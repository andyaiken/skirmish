.encounter-map {
	height: 100%;
	overflow: auto;
	border: 2px solid rgb(220, 220, 220);
	border-radius: 10px;

	.encounter-map-square-container {
		position: relative;
		margin: 0 auto;

		.encounter-map-square {
			aspect-ratio: 1 / 1;
			position: absolute;
			border: 0.5px solid rgb(150, 150, 150);
			background-color: rgb(255, 255, 255);

			&.obstructed {
				background-color: rgb(220, 220, 220);
			}

			&.wall {
				background-color: rgb(50, 50, 50);
				border-color: rgb(80, 80, 80);
			}

			&.selectable {
				border-color: rgb(60, 170, 255);
				background-color: rgb(200, 230, 255);
				cursor: pointer;

				&:hover {
					outline: 3px solid rgb(60, 170, 255);
					z-index: 100;
				}
			}

			&.selected {
				background-color: rgb(60, 170, 255);
				z-index: 100;
			}
		}

		.encounter-map-loot-token {
			aspect-ratio: 1 / 1;
			position: absolute;
			border-radius: 50%;
			background-color: rgb(170, 130, 10);

			.loot-token-face {
				position: absolute;
				top: 5%;
				left: 5%;
				right: 6%;
				bottom: 6%;
				display: flex;
				align-items: center;
				justify-content: center;
				border-radius: 50%;
				background: radial-gradient(rgb(230, 175, 40), rgb(210, 155, 20));

				&.current {
					background: rgb(255, 255, 255) !important;
					color: rgb(0, 0, 0) !important;
					pointer-events: none;
				}
			}
		}

		.encounter-map-aura-token {
			aspect-ratio: 1 / 1;
			position: absolute;
			border-radius: 33%;
			border: 1px solid rgb(80, 80, 80);
			background: radial-gradient(rgb(160, 160, 160), rgb(140, 140, 140));
			opacity: 0.3;
			pointer-events: none;
		}

		.encounter-map-mini-token {
			aspect-ratio: 1 / 1;
			position: absolute;
			border-radius: 50%;
			background-color: black;

			.mini-token-face {
				position: absolute;
				top: 5%;
				left: 5%;
				right: 6%;
				bottom: 6%;
				display: flex;
				align-items: center;
				justify-content: center;
				border-radius: 50%;
				background: rgb(150, 150, 150);
				color: white;
				font-weight: 600;
				z-index: 40;

				&.current {
					background: rgb(255, 255, 255) !important;
					color: rgb(0, 0, 0) !important;
					pointer-events: none;
				}
			}

			&.hero {
				background-color: rgb(0, 70, 0);

				.mini-token-face {
					background: radial-gradient(rgb(0, 150, 0), rgb(0, 100, 0));
				}
			}

			&.monster {
				background-color: rgb(100, 0, 0);

				.mini-token-face {
					background: radial-gradient(rgb(240, 0, 0), rgb(220, 0, 0));
				}
			}

			.pulse {
				position: absolute;
				top: 5%;
				left: 5%;
				right: 5%;
				bottom: 5%;
				border: 1px solid rgb(60, 170, 255);
				border-radius: 50%;
				background: rgb(60, 170, 255);
				pointer-events: none;

				&.pulse-one {
					z-index: 30;
					opacity: 0.6;
					animation: 2s linear 1s infinite backwards pulse-1;
				}

				&.pulse-two {
					z-index: 20;
					opacity: 0.7;
					animation: 2s linear 1s infinite backwards pulse-2;
				}

				&.pulse-three {
					z-index: 10;
					opacity: 0.8;
					animation: 2s linear 1s infinite backwards pulse-3;
				}
			}
		}

		.encounter-map-trail-token {
			aspect-ratio: 1 / 1;
			position: absolute;
			border-radius: 50%;
			border: 1px solid rgb(100, 100, 100);
			background: rgb(240, 240, 240);
			opacity: 0.3;
			pointer-events: none;
		}

		.encounter-map-loot-token,
		.encounter-map-mini-token {
			&.selectable:not(.selected) {
				&:hover {
					background-color: rgb(60, 170, 255);
				}
			}

			&.selected {
				outline: 3px solid rgb(60, 170, 255);
			}

			&:not(.selectable) {
				opacity: 0.3;
				pointer-events: none;
			}
		}
	}
}

@keyframes pulse-1 {
	10% {
		transform: scale(1);
	}

	70% {
		transform: scale(5);
		opacity: 0;
	}

	100% {
		transform: scale(1);
		opacity: 0;
	}
}

@keyframes pulse-2 {
	30% {
		transform: scale(1);
	}

	80% {
		transform: scale(5);
		opacity: 0;
	}

	100% {
		transform: scale(1);
		opacity: 0;
	}
}

@keyframes pulse-3 {
	50% {
		transform: scale(1);
	}

	90% {
		transform: scale(5);
		opacity: 0;
	}

	100% {
		transform: scale(1);
		opacity: 0;
	}
}
