{"version":3,"file":"static/js/main.82fb1cb4.js","mappings":"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QYk2B,GA0QLS,YAAc,SAAC32B,GACrB,OAAOwU,EAAYa,SAASrV,GAAK,SAAAia,GAAE,SAAAloD,OAAOkoD,EAAGlpD,EAAC,KAAAgB,OAAIkoD,EAAGjpD,EAAC,GACvD,EClRM,OAAM2mE,GAAa5kB,GAAA,SAAA4kB,IAAA73E,EAAA,KAAA63E,EAAA,IAwXzBxkB,GAxXYwkB,GAAAA,GACLC,aAAe,WACrB,IAAI5uE,EAAQ,EACZ,OAAQkqD,EAAOO,aAAa,KAC3B,KAAK,GACL,KAAK,GACL,KAAK,GACL,KAAK,GACJzqD,EAAQ,EAKV,IADA,IAAM6uE,EAAQ,GACPA,EAAMzhF,OAAS4S,GACrB6uE,EAAMj/E,KAAK++E,GAAcG,WAAWH,GAAcI,iBAGnD,OAAOF,EAAM/wC,KAAK,IACnB,EAlBY6wC,GAoBLI,aAAe,WACrB,IAAMC,EAAS,CACd,KACA,KACA,MACA,KACA,KACA,QACA,MACA,MACA,KACA,OACA,KACA,OACA,MACA,MACA,MACA,KACA,KACA,KACA,MACA,OACA,MACA,QACA,QACA,OACA,OACA,MACA,OACA,IACA,MACA,MACA,MACA,MACA,OACA,MACA,MACA,OACA,MACA,MACA,OACA,OACA,KACA,MACA,KACA,MACA,QACA,KACA,KACA,OACA,KACA,QACA,OACA,OACA,MACA,OACA,OACA,MACA,KACA,KACA,MACA,OACA,OACA,OACA,MACA,MACA,MACA,MACA,QACA,OACA,KACA,KACA,KACA,OACA,QACA,MACA,OACA,KACA,OACA,MACA,OACA,MACA,MACA,QACA,OACA,KACA,MACA,IACA,MACA,MACA,OACA,MACA,MACA,OACA,MACA,MACA,MACA,MACA,MACA,OACA,MACA,OACA,MACA,KACA,MACA,OACA,MACA,KACA,KACA,KACA,KACA,MACA,OACA,OACA,MACA,MACA,MACA,MACA,MACA,OACA,OACA,QACA,MACA,MACA,MACA,MACA,MACA,IACA,MACA,MACA,SACA,OACA,OACA,OACA,QACA,MACA,OACA,OACA,IACA,MACA,MACA,MACA,MACA,OACA,OACA,OACA,MACA,MACA,IACA,MACA,MACA,MACA,QACA,OACA,OACA,QAGKC,EAAO,CACZ,IACA,OACA,MACA,MACA,MACA,OACA,QACA,OACA,MACA,KACA,MACA,KACA,MACA,OACA,MACA,KACA,OACA,MACA,OACA,MACA,QACA,OACA,MACA,OACA,OACA,KACA,QACA,OACA,MACA,KACA,MACA,MACA,KACA,MACA,OACA,MACA,MACA,MACA,OACA,MACA,IACA,KACA,KACA,SACA,MACA,KACA,KACA,MACA,OACA,MACA,QACA,KACA,OACA,OACA,QACA,MACA,OACA,KACA,MACA,KACA,MACA,MACA,OACA,OACA,OACA,MACA,MACA,KACA,OACA,MACA,MACA,MACA,OACA,MACA,OACA,MACA,MACA,KACA,MACA,QACA,MACA,MACA,KACA,MACA,KACA,OACA,KACA,OACA,MACA,OACA,KACA,MACA,OACA,OACA,MACA,KACA,KACA,KACA,MACA,OACA,SACA,KACA,SACA,MACA,OACA,MACA,MACA,OACA,OACA,OACA,QACA,OACA,KACA,MACA,OACA,MACA,OACA,KACA,MACA,OACA,MACA,OACA,MACA,MACA,KACA,MACA,OACA,OACA,MACA,MACA,MACA,MACA,QACA,KACA,OACA,MACA,OACA,MACA,MACA,OACA,OACA,OACA,QACA,MACA,MACA,MACA,OACA,UACA,MACA,MACA,MACA,KACA,KACA,KACA,MACA,MACA,MACA,OACA,KACA,MACA,MACA,MACA,MACA,KACA,OAQD,OAAQ/kB,EAAOO,aAAa,IAC3B,KAAK,EACL,KAAK,EACL,KAAK,EACL,KAAK,EACL,KAAK,EACJ,MAAM,GAAN1hD,OAAUyiD,EAAYY,KAAK4iB,IAAOjmE,OAAGyiD,EAAYY,KAAK6iB,IACvD,KAAK,EACJ,MAAM,GAANlmE,OAAUyiD,EAAYY,KAAK4iB,IAAOjmE,OAAGyiD,EAAYY,KAbhC,CAClB,IACA,OAWkErjD,OAAGyiD,EAAYY,KAAK6iB,IAGvF,MAAO,EACR,EA3WYN,GA6WLG,WAAa,SAAC9gF,GACpB,OAAOA,EACL2hB,MAAM,KACN48C,QAAO,SAAA77D,GAAG,OAAIA,EAAItD,OAAS,CAAC,IAC5B4pD,KAAI,SAAAtmD,GAGJ,OAFcA,EAAI,GAAGsf,eACRtf,EAAItD,OAAS,EAAIsD,EAAIuS,UAAU,GAAK,GAElD,IACC66B,KAAK,IACR,ECvWM,IAAMoxC,GAAkBnlB,GAAA,SAAAmlB,IAAAp4E,EAAA,KAAAo4E,EAAA,IA6L9B/kB,GA7LY+kB,GAAAA,GACLC,kBAAoB,SAACC,EAAqB7c,GAChD,IAAMltD,EAAO6pE,GAAmBG,mBAAmBD,GACnD,OAAOF,GAAmBI,oBAAoBjqE,EAAMktD,EACrD,EAJY2c,GAMLK,wBAA0B,SAAChd,GACjC,IAAM6c,EAAW5jB,EAAYY,KAAKkV,GAAUkO,YAAYjd,IAClDltD,EAAO6pE,GAAmBG,mBAAmBD,GACnD,OAAOF,GAAmBI,oBAAoBjqE,EAAMktD,EACrD,EAVY2c,GAYLG,mBAAqB,SAACD,GAC5B,GAAIA,EAASK,MACZ,OAAOL,EAGR,IAAM/pE,EAAO7B,KAAKG,MAAMH,KAAKC,UAAU2rE,IAMvC,OALA/pE,EAAK2d,GAAKssC,EAAMC,OAChBlqD,EAAKjZ,KAAOuiF,GAAcC,eAC1BvpE,EAAKV,YAAW,WAAAoE,OAAcqmE,EAAShjF,KAAKyjB,eAC5CxK,EAAK+pE,SAAWA,EAAShjF,KACzBiZ,EAAKoqE,OAAQ,EACNpqE,CACR,EAxBY6pE,GA0BLI,oBAAsB,SAACjqE,EAAiBktD,GAC9C,IAAMpmE,EAAuB,GAE7B,GAAIkZ,EAAKq/D,OAAQ,CAEhB,IAAMgL,EAASlsE,KAAKG,MAAMH,KAAKC,UAAU4B,IACnCsqE,EAAOD,EAAOhL,OACRlZ,EAAYY,KAAKujB,EAAKhT,QAC9BiB,MAAQ1T,EAAOU,cACnBz+D,EAAQyD,KAAK8/E,GAGb,IAAME,EAASpsE,KAAKG,MAAMH,KAAKC,UAAU4B,IACnCwqE,EAAOD,EAAOlL,OAChBmL,EAAKnkD,OAAS,EACjBmkD,EAAKnkD,OAAS,EAEdmkD,EAAKnkD,OAAS/M,KAAK8pC,MAAMonB,EAAKnkD,MAAQw+B,EAAOU,cAAgB,IAE9Dz+D,EAAQyD,KAAKggF,GAGb,IAAME,EAAStsE,KAAKG,MAAMH,KAAKC,UAAU4B,IAC5ByqE,EAAOpL,OACf/H,OAAO/sE,KAAK,CAChBW,KAAM+wE,GAAUG,oBAAoBvX,EAAOQ,gBAAkB0Q,GAAmBmM,OAASnM,GAAmBoM,YAC5G5J,KAAM1T,EAAOU,gBAEdz+D,EAAQyD,KAAKkgF,GAGb,IAAMC,EAASvsE,KAAKG,MAAMH,KAAKC,UAAU4B,IAKzC,GAJA0qE,EAAOvtB,SAAS5yD,KAAK+xE,GAAaS,mBAAmB9S,EAAMC,OAAQoM,GAAUmJ,OAAQ5a,EAAOU,gBAC5Fz+D,EAAQyD,KAAKmgF,GAGT1qE,EAAKq/D,OAAOsL,WAAa,EAAG,CAC/B,IAAMC,EAASzsE,KAAKG,MAAMH,KAAKC,UAAU4B,IAC5B4qE,EAAOvL,OACfsL,WAAa,EAClB7jF,EAAQyD,KAAKqgF,EACd,CACD,CAEA,GAAI5qE,EAAK6qE,MAAO,CAEf,IAAMC,EAAS3sE,KAAKG,MAAMH,KAAKC,UAAU4B,IAEnC+qE,EADOD,EAAOD,MACJ1tB,SAAS0O,MAAK,SAAA3/D,GAAC,OAAIA,EAAEhB,OAASsrE,GAAYoG,oBAAoB,IAC1EmO,IACHA,EAAGxS,MAAQ1T,EAAOU,cAClBz+D,EAAQyD,KAAKugF,IAId,IAAME,EAAS7sE,KAAKG,MAAMH,KAAKC,UAAU4B,IACnCirE,EAAOD,EAAOH,MACdK,EAAKD,EAAK9tB,SAAS0O,MAAK,SAAA3/D,GAAC,OAAIA,EAAEhB,OAASsrE,GAAYoG,oBAAoB,IAC9E,GAAIsO,EAAI,CACP,IAAMC,EAAShtE,KAAKG,MAAMH,KAAKC,UAAU8sE,IACzCC,EAAOxtD,GAAKssC,EAAMC,OAClBihB,EAAOvS,eAAiB/T,EAAOQ,gBAAkB0Q,GAAmBmM,OAASnM,GAAmBoM,WAChG8I,EAAK9tB,SAAS5yD,KAAK4gF,GACnBrkF,EAAQyD,KAAKygF,EACd,CAGA,IAAMI,EAASjtE,KAAKG,MAAMH,KAAKC,UAAU4B,IACnCqrE,EAAOD,EAAOP,MACdS,EAAKD,EAAKluB,SAAS0O,MAAK,SAAA3/D,GAAC,OAAIA,EAAEhB,OAASsrE,GAAY0G,aAAa,IACnEoO,IACHD,EAAKluB,SAAWkuB,EAAKluB,SAAS+J,QAAO,SAAAh7D,GAAC,OAAIA,EAAEyxB,KAAO2tD,EAAG3tD,EAAE,IACxD72B,EAAQyD,KAAK6gF,IAId,IAAMG,EAASptE,KAAKG,MAAMH,KAAKC,UAAU4B,IACnCwrE,EAAOD,EAAOV,MACdY,EAAKD,EAAKruB,SAAS0O,MAAK,SAAA3/D,GAAC,OAAIA,EAAEhB,OAASsrE,GAAYsC,KAAK,IAC3D2S,IACHD,EAAKruB,SAAWquB,EAAKruB,SAAS+J,QAAO,SAAAh7D,GAAC,OAAIA,EAAEyxB,KAAO8tD,EAAG9tD,EAAE,IACxD72B,EAAQyD,KAAKghF,GAEf,CAEA,GAAIvrE,EAAK+4D,cAAgB9C,GAAoByV,WAAY,CAExD,IAAMC,EAASxtE,KAAKG,MAAMH,KAAKC,UAAU4B,IACzC2rE,EAAOxuB,SAAS5yD,KAAK+xE,GAAaS,mBAAmB9S,EAAMC,OAAQoM,GAAUsV,aAAc/mB,EAAOU,gBAClGz+D,EAAQyD,KAAKohF,GAGb,IAAME,EAAS1tE,KAAKG,MAAMH,KAAKC,UAAU4B,IACzC6rE,EAAO1uB,SAAS5yD,KAAK+xE,GAAaE,iCAAiCvS,EAAMC,OAAQ6L,GAAmBmM,OAAQrd,EAAOU,gBACnHz+D,EAAQyD,KAAKshF,GAGb,IAAMC,EAAS3tE,KAAKG,MAAMH,KAAKC,UAAU4B,IACzC8rE,EAAO3uB,SAAS5yD,KAAK+xE,GAAaE,iCAAiCvS,EAAMC,OAAQ6L,GAAmBoM,WAAYtd,EAAOU,gBACvHz+D,EAAQyD,KAAKuhF,EACd,CASA,GAPA9rE,EAAKm9C,SAAS+J,QAAO,SAAAh7D,GAAC,OAAIA,EAAEqsE,KAAO,CAAC,IAAEhuD,SAAQ,SAAAwhE,GAE7C,IAAMrkF,EAAOyW,KAAKG,MAAMH,KAAKC,UAAU4B,IACvCtY,EAAKy1D,SAAWz1D,EAAKy1D,SAAS+J,QAAO,SAAAh7D,GAAC,OAAIA,EAAEyxB,KAAOouD,EAAQpuD,EAAE,IAC7D72B,EAAQyD,KAAK7C,EACd,IAEIsY,EAAKoH,WAAa4uD,GAAiBgW,KAAM,CAE5C,IAAMC,EAAS9tE,KAAKG,MAAMH,KAAKC,UAAU4B,IACzCisE,EAAO9uB,SAAS5yD,KAAK+xE,GAAaS,mBAAmB9S,EAAMC,OAAQ+R,GAAUE,eAAejG,GAAkByL,QAAS9c,EAAOU,gBAC9Hz+D,EAAQyD,KAAK0hF,GAGb,IAAMC,EAAS/tE,KAAKG,MAAMH,KAAKC,UAAU4B,IACzCksE,EAAO/uB,SAAS5yD,KAAK+xE,GAAaW,2BAA2BhT,EAAMC,OAAQrF,EAAOQ,gBAAkB6Q,GAAkB+L,SAAW/L,GAAkByL,OAAQ9c,EAAOU,gBAClKz+D,EAAQyD,KAAK2hF,GAGb,IAAMC,EAAShuE,KAAKG,MAAMH,KAAKC,UAAU4B,IACzCmsE,EAAOhvB,SAAS5yD,KAAK+xE,GAAaa,mBAAmBlT,EAAMC,OAAQiM,GAAU2K,QAASjc,EAAOU,gBAC7Fz+D,EAAQyD,KAAK4hF,EACd,CAEA,GAAInsE,EAAKoH,WAAa4uD,GAAiBoW,KAAM,CAE5C,IAAM1kF,EAAOyW,KAAKG,MAAMH,KAAKC,UAAU4B,IACvCtY,EAAKy1D,SAAS5yD,KAAK+xE,GAAaa,mBAAmBlT,EAAMC,OAAQiM,GAAUuJ,MAAO7a,EAAOU,gBACzFz+D,EAAQyD,KAAK7C,EACd,CAEA,GAAIsY,EAAKoH,WAAa4uD,GAAiBqW,KAAM,CAE5C,IAAMC,EAASnuE,KAAKG,MAAMH,KAAKC,UAAU4B,IACzCssE,EAAOnvB,SAAS5yD,KAAK+xE,GAAaa,mBAAmBlT,EAAMC,OAAQiM,GAAUuJ,MAAO7a,EAAOU,gBAC3Fz+D,EAAQyD,KAAK+hF,GAGb,IAAMC,EAASpuE,KAAKG,MAAMH,KAAKC,UAAU4B,IACzCusE,EAAOpvB,SAAS5yD,KAAK+xE,GAAaa,mBAAmBlT,EAAMC,OAAQiM,GAAU2K,QAASjc,EAAOU,gBAC7Fz+D,EAAQyD,KAAKgiF,EACd,CAGA,IAAMC,EAAcruE,KAAKG,MAAMH,KAAKC,UAAU4B,IAC9CwsE,EAAY7uD,GAAKssC,EAAMC,OACvBsiB,EAAYrvB,SAAS5yD,KAAK+xE,GAAaqB,uBACvC72E,EAAQyD,KAAKiiF,GAGb,IAAMC,EAAatuE,KAAKG,MAAMH,KAAKC,UAAU4B,IAK7C,OAJAysE,EAAW9uD,GAAKssC,EAAMC,OACtBuiB,EAAW5U,QAAQttE,KAAK0xE,GAAUyQ,gBAAgB1sE,EAAMktD,IACxDpmE,EAAQyD,KAAKkiF,GAEU,IAAnB3lF,EAAQiB,OACJiY,EAGDmmD,EAAYY,KAAKjgE,EACzB,EC/MM,UAAK6lF,GAAQ,SAARA,GAAQ,OAARA,EAAQ,kBAARA,EAAQ,YAARA,EAAQ,kBAARA,EAAQ,YAARA,EAAQ,wBAARA,EAAQ,YAARA,EAAQ,gBAARA,EAAQ,YAARA,EAAQ,gBAARA,EAAQ,sBAARA,EAAQ,kBAARA,EAAQ,gBAARA,EAAQ,YAARA,EAAQ,YAARA,CAAQ,MC+BPC,GAAcloB,GAAA,SAAAkoB,IAAAn7E,EAAA,KAAAm7E,EAAA,IA4gB1B9nB,GA5gBY8nB,GAAAA,GACLC,eAAiB,EADZD,GAGLE,oBAAsB,SAACC,EAA2BpW,EAAmBC,EAAgBC,GAC3F,IAAMmW,EAAU/Q,GAAUgR,WAAWtW,GAcrC,GAbIqW,IACHD,EAAUpW,UAAYqW,EAAQrvD,GAC9BovD,EAAU7hF,KAAO8hF,EAAQ9hF,KACzB6hF,EAAU1f,QAAU2f,EAAQ9hF,KAC5B6hF,EAAUxtE,KAAOytE,EAAQztE,KACzBytE,EAAQjW,OAAOxsD,SAAQ,SAAA8rB,GAAC,OAAI02C,EAAUhW,OAAOxsE,KAAK8rC,EAAE,IACpD22C,EAAQpM,iBAAiBr2D,SAAQ,SAAAre,GAAC,OAAI6gF,EAAU5vB,SAAS5yD,KAAK4T,KAAKG,MAAMH,KAAKC,UAAUlS,IAAoB,IAExG6gF,EAAU1f,UAAYwI,GAAc8K,UACvCoM,EAAUhmF,KAAOimF,EAAQjmF,OAIvBgmF,EAAUhW,OAAOl0D,SAAS29D,GAAUkC,QAAUqK,EAAUhW,OAAOl0D,SAAS29D,GAAUqC,eAE/E,CACN,IAAM7Q,EAAOiK,GAAUiR,QAAQtW,GAC3B5E,IACH+a,EAAUnW,OAAS5E,EAAKr0C,GACxBq0C,EAAK4O,iBAAiBr2D,SAAQ,SAAAre,GAAC,OAAI6gF,EAAU5vB,SAAS5yD,KAAK4T,KAAKG,MAAMH,KAAKC,UAAUlS,IAAoB,IAErG6gF,EAAU1f,UAAYwI,GAAc8K,UACvCoM,EAAUhmF,MAAI,IAAA2c,OAAQsuD,EAAKjrE,QAI7B,IAAMomF,EAAalR,GAAUmR,cAAcvW,GACvCsW,IACHJ,EAAUlW,aAAesW,EAAWxvD,GACpCwvD,EAAWvM,iBAAiBr2D,SAAQ,SAAAre,GAAC,OAAI6gF,EAAU5vB,SAAS5yD,KAAK4T,KAAKG,MAAMH,KAAKC,UAAUlS,IAAoB,IAEjH,CACD,EArCY0gF,GAuCLS,wBAA0B,SAACN,EAA2B/7B,EAAuBkc,GACnF6f,EAAUjW,GAAKx9C,KAAK4rC,IAAI6nB,EAAUjW,GAAKiW,EAAUtkB,MAAO,GACxDskB,EAAUtkB,OAAS,EAGnBskB,EAAU5vB,SAAS5yD,KAAKymD,GAGxB,IAAK,IAAInlD,EAAI,EAAGA,IAAMkhF,EAAU/V,MAAMjvE,SAAU8D,EAAG,CAClD,IAAMmU,EAAO+sE,EAAU/V,MAAMnrE,GACzBmU,EAAKoqE,OACuB,IAA3BvlB,EAAOO,aAAa,KACvB2nB,EAAU/V,MAAMnrE,GAAKg+E,GAAmBC,kBAAkB9pE,EAAMktD,GAGnE,CACD,EAvDY0f,GAyDLU,mBAAqB,SAACP,GAC5BA,EAAU5vB,SAAS5yC,SAAQ,SAAAymC,GAC1B,GAAIA,EAAQsnB,QAAUnC,GAAUoI,IAAK,CACpC,IAAMz3E,EAAU,CACfqvE,GAAU0K,UACV1K,GAAU2K,QACV3K,GAAUuJ,OAEX1uB,EAAQsnB,MAAQnS,EAAYY,KAAKjgE,EAClC,CAEA,GAAIkqD,EAAQ0nB,QAAUpC,GAAUiI,IAAK,CACpC,IAAMz3E,EAAU,CACfwvE,GAAU4J,MACV5J,GAAUiX,WACVjX,GAAUmL,SACVnL,GAAUuL,UACVvL,GAAUsV,aACVtV,GAAUwL,QACVxL,GAAUmJ,QAEXzuB,EAAQ0nB,MAAQvS,EAAYY,KAAKjgE,EAClC,CAEA,GAAIkqD,EAAQ2nB,gBAAkBzC,GAAkBqI,IAAK,CACpD,IAAMz3E,EAAU,CACfovE,GAAkB+L,SAClB/L,GAAkByL,QAEnB3wB,EAAQ2nB,cAAgBxS,EAAYY,KAAKjgE,EAC1C,CAEA,GAAIkqD,EAAQ+nB,cAAgB9C,GAAoBsI,IAAK,CACpD,IAAMz3E,EAAU,CACfmvE,GAAoBuX,gBACpBvX,GAAoB6M,aACpB7M,GAAoBwX,cACpBxX,GAAoByX,cACpBzX,GAAoB0X,cACpB1X,GAAoByV,WACpBzV,GAAoB2X,WACpB3X,GAAoB4X,WACpB5X,GAAoB6X,SAErB98B,EAAQ+nB,YAAc5S,EAAYY,KAAKjgE,EAAQogE,QAAO,SAAAl7D,GAAC,OAAK4gF,GAAemB,iBAAiBhB,GAAWlqE,SAAS7W,EAAE,IACnH,CAEA,GAAIglD,EAAQsmB,SAAWjB,GAAWkI,IAAK,CACtC,IAAMz3E,EAAU,CACfuvE,GAAWsM,KACXtM,GAAW6M,KACX7M,GAAWkM,MACXlM,GAAWiL,MACXjL,GAAW+M,YACX/M,GAAWmN,KACXnN,GAAW+J,OACX/J,GAAWoN,MACXpN,GAAWgL,SACXhL,GAAW2L,OACX3L,GAAW2X,QACX3X,GAAW8M,OAEZnyB,EAAQsmB,OAASnR,EAAYY,KAAKjgE,EACnC,CAEA,GAAIkqD,EAAQ4nB,iBAAmB7C,GAAmBwI,IAAK,CACtD,IAAMz3E,EAAU,CACfivE,GAAmBkM,SACnBlM,GAAmBmM,OACnBnM,GAAmBoM,YAEpBnxB,EAAQ4nB,eAAiBzS,EAAYY,KAAKjgE,EAC3C,CACD,GACD,EAnIY8lF,GAqILqB,SAAW,SAAClB,EAA2B7f,GACzC6f,EAAUhW,OAAOl0D,SAAS29D,GAAUkC,QAKxCkK,GAAemB,iBAAiBhB,GAAWxiE,SAAQ,SAAA2jE,GAClD,IAAMlX,EAAQiF,GAAUkS,uBAAuBD,EAAMhhB,GAC/CltD,EAAO7B,KAAKG,MAAMH,KAAKC,UAAU+nD,EAAYY,KAAKiQ,KACxDh3D,EAAK2d,GAAKssC,EAAMC,OAChB6iB,EAAU/V,MAAMzsE,KAAKyV,EACtB,GACD,EAjJY4sE,GAmJLwB,SAAW,SAACrB,EAA2B/sE,GAC7C,GAAI+sE,EAAUhW,OAAOl0D,SAAS29D,GAAUkC,OAEvC,OAAO,EAGR,GAAI1iE,EAAKoH,WAAa4uD,GAAiByC,KACtC,OAAO,EAGR,IAAI4V,EAAa,EACjB,OAAQruE,EAAKoH,UACZ,KAAK4uD,GAAiBsY,KACtB,KAAKtY,GAAiBuY,KACrBF,EAAa,EAIf,IAAMG,EAAYroB,EAAYgB,IAAI4lB,EAAU/V,MAAM9P,QAAO,SAAAp/D,GAAC,OAAIA,EAAEsf,WAAapH,EAAKoH,QAAQ,KAAG,SAAAtf,GAAC,OAAIA,EAAE2mF,KAAK,IACnGC,EAAiBL,EAAaG,EAEpC,QAAIxuE,EAAKyuE,MAAQC,KAID1uE,EAAK+4D,cAAgB9C,GAAoBwC,MAAUmU,GAAemB,iBAAiBhB,GAAWlqE,SAAS7C,EAAK+4D,aAE7H,EA9KY6T,GAgLL+B,eAAiB,SAAC5B,GACxB,IAAMhhF,EAAIkwE,GAAUgR,WAAWF,EAAUpW,WACnC7qE,EAAImwE,GAAUiR,QAAQH,EAAUnW,QAChC9tD,EAAImzD,GAAUmR,cAAcL,EAAUlW,cAE5C,MAAQ,GACNnzD,OAAO3X,EAAIA,EAAEoxD,SAAW,IACxBz5C,OAAO5X,EAAIA,EAAEqxD,SAAW,IACxBz5C,OAAOoF,EAAIA,EAAEq0C,SAAW,GAC3B,EAzLYyvB,GA2LLgC,cAAgB,SAAC7B,GACvB,IAAMhhF,EAAIkwE,GAAUgR,WAAWF,EAAUpW,WACnC7qE,EAAImwE,GAAUiR,QAAQH,EAAUnW,QAChC9tD,EAAImzD,GAAUmR,cAAcL,EAAUlW,cAExC1O,EAAQ,GACVzkD,OAAO3X,EAAIA,EAAE8rE,QAAU,IACvBn0D,OAAO5X,EAAIA,EAAE+rE,QAAU,IACvBn0D,OAAOoF,EAAIA,EAAE+uD,QAAU,IAMzB,OAJAkV,EAAU/V,MAAMzsD,SAAQ,SAAAziB,GACvBqgE,EAAOA,EAAKzkD,OAAO5b,EAAE+vE,QACtB,IAEO1P,CACR,EA1MYykB,GA4MLiC,iBAAmB,SAAC9B,EAA2B+B,GACrD,GAAInQ,GAASC,kBAAkB/S,MAAK,SAAA3/D,GAAC,OAAIA,EAAEyxB,KAAOmxD,CAAM,IACvD,MAAO,WAGR,IAAM/iF,EAAIkwE,GAAUgR,WAAWF,EAAUpW,WACzC,GAAM5qE,GAAKA,EAAEoxD,SAAS0O,MAAK,SAAA/gE,GAAC,OAAIA,EAAE6yB,KAAOmxD,CAAM,IAC9C,OAAO/iF,EAAEhF,KAGV,IAAM+E,EAAImwE,GAAUiR,QAAQH,EAAUnW,QACtC,GAAM9qE,GAAKA,EAAEqxD,SAAS0O,MAAK,SAAA/gE,GAAC,OAAIA,EAAE6yB,KAAOmxD,CAAM,IAC9C,OAAOhjF,EAAE/E,KAGV,IAAM+hB,EAAImzD,GAAUmR,cAAcL,EAAUlW,cAC5C,GAAM/tD,GAAKA,EAAEq0C,SAAS0O,MAAK,SAAA/gE,GAAC,OAAIA,EAAE6yB,KAAOmxD,CAAM,IAC9C,OAAOhmE,EAAE/hB,KAGV,IAAIgoF,EAAW,GAWf,OAVAhC,EAAU/V,MAAMzsD,SAAQ,SAAAvK,GACnBA,EAAK6qE,OACJ7qE,EAAK6qE,MAAM1tB,SAAS0O,MAAK,SAAA3/D,GAAC,OAAIA,EAAEyxB,KAAOmxD,CAAM,MAChDC,EAAW/uE,EAAKjZ,MAGdiZ,EAAKm9C,SAAS0O,MAAK,SAAA3/D,GAAC,OAAIA,EAAEyxB,KAAOmxD,CAAM,MAC1CC,EAAW/uE,EAAKjZ,KAElB,IACiB,KAAbgoF,EACIA,EAGD,EACR,EAhPYnC,GAkPLoC,qBAAuB,SAACjC,EAA2B+B,GACzD,GAAInQ,GAASC,kBAAkB/S,MAAK,SAAA3/D,GAAC,OAAIA,EAAEyxB,KAAOmxD,CAAM,IACvD,OAAOnC,GAASsC,KAGjB,IAAMljF,EAAIkwE,GAAUgR,WAAWF,EAAUpW,WACzC,GAAM5qE,GAAKA,EAAEoxD,SAAS0O,MAAK,SAAA/gE,GAAC,OAAIA,EAAE6yB,KAAOmxD,CAAM,IAC9C,OAAOnC,GAASuC,QAGjB,IAAMpjF,EAAImwE,GAAUiR,QAAQH,EAAUnW,QACtC,GAAM9qE,GAAKA,EAAEqxD,SAAS0O,MAAK,SAAA/gE,GAAC,OAAIA,EAAE6yB,KAAOmxD,CAAM,IAC9C,OAAOnC,GAASwC,KAGjB,IAAMrmE,EAAImzD,GAAUmR,cAAcL,EAAUlW,cAC5C,GAAM/tD,GAAKA,EAAEq0C,SAAS0O,MAAK,SAAA/gE,GAAC,OAAIA,EAAE6yB,KAAOmxD,CAAM,IAC9C,OAAOnC,GAASyC,WAGjB,IAAIC,GAAS,EAWb,OAVAtC,EAAU/V,MAAMzsD,SAAQ,SAAAvK,GACnBA,EAAK6qE,OACJ7qE,EAAK6qE,MAAM1tB,SAAS0O,MAAK,SAAA3/D,GAAC,OAAIA,EAAEyxB,KAAOmxD,CAAM,MAChDO,GAAS,GAGPrvE,EAAKm9C,SAAS0O,MAAK,SAAA3/D,GAAC,OAAIA,EAAEyxB,KAAOmxD,CAAM,MAC1CO,GAAS,EAEX,IACIA,EACI1C,GAAS2C,KAGV3C,GAAS4C,OACjB,EAtRY3C,GAwRL4C,gBAAkB,SAACzC,EAA2B+B,GACpD,GAAInQ,GAASE,iBAAiBhT,MAAK,SAAAhjD,GAAC,OAAIA,EAAE8U,KAAOmxD,CAAM,IACtD,MAAO,WAGR,IAAM/iF,EAAIkwE,GAAUgR,WAAWF,EAAUpW,WACzC,GAAM5qE,GAAKA,EAAE8rE,QAAQhM,MAAK,SAAA/gE,GAAC,OAAIA,EAAE6yB,KAAOmxD,CAAM,IAC7C,OAAO/iF,EAAEhF,KAGV,IAAM+E,EAAImwE,GAAUiR,QAAQH,EAAUnW,QACtC,GAAM9qE,GAAKA,EAAE+rE,QAAQhM,MAAK,SAAA/gE,GAAC,OAAIA,EAAE6yB,KAAOmxD,CAAM,IAC7C,OAAOhjF,EAAE/E,KAGV,IAAM+hB,EAAImzD,GAAUmR,cAAcL,EAAUlW,cAC5C,GAAM/tD,GAAKA,EAAE+uD,QAAQhM,MAAK,SAAA/gE,GAAC,OAAIA,EAAE6yB,KAAOmxD,CAAM,IAC7C,OAAOhmE,EAAE/hB,KAGV,IAAIgoF,EAAW,GAMf,OALAhC,EAAU/V,MAAMzsD,SAAQ,SAAAvK,GACnBA,EAAK63D,QAAQhM,MAAK,SAAAhjD,GAAC,OAAIA,EAAE8U,KAAOmxD,CAAM,MACzCC,EAAW/uE,EAAKjZ,KAElB,IACiB,KAAbgoF,EACIA,EAGD,EACR,EAvTYnC,GAyTL6C,oBAAsB,SAAC1C,EAA2B+B,GACxD,GAAInQ,GAASE,iBAAiBhT,MAAK,SAAAhjD,GAAC,OAAIA,EAAE8U,KAAOmxD,CAAM,IACtD,OAAOnC,GAASsC,KAGjB,IAAMljF,EAAIkwE,GAAUgR,WAAWF,EAAUpW,WACzC,GAAM5qE,GAAKA,EAAE8rE,QAAQhM,MAAK,SAAA/gE,GAAC,OAAIA,EAAE6yB,KAAOmxD,CAAM,IAC7C,OAAOnC,GAASuC,QAGjB,IAAMpjF,EAAImwE,GAAUiR,QAAQH,EAAUnW,QACtC,GAAM9qE,GAAKA,EAAE+rE,QAAQhM,MAAK,SAAA/gE,GAAC,OAAIA,EAAE6yB,KAAOmxD,CAAM,IAC7C,OAAOnC,GAASwC,KAGjB,IAAMrmE,EAAImzD,GAAUmR,cAAcL,EAAUlW,cAC5C,GAAM/tD,GAAKA,EAAE+uD,QAAQhM,MAAK,SAAA/gE,GAAC,OAAIA,EAAE6yB,KAAOmxD,CAAM,IAC7C,OAAOnC,GAASyC,WAGjB,IAAIC,GAAS,EAMb,OALAtC,EAAU/V,MAAMzsD,SAAQ,SAAAvK,GACnBA,EAAK63D,QAAQhM,MAAK,SAAAhjD,GAAC,OAAIA,EAAE8U,KAAOmxD,CAAM,MACzCO,GAAS,EAEX,IACIA,EACI1C,GAAS2C,KAGV3C,GAAS4C,OACjB,EAxVY3C,GA0VL8C,eAAiB,SAAC3C,GACxBA,EAAU7V,OAAOx/C,SAAU,EAC3Bq1D,EAAU7V,OAAOE,SAAU,EAC3B2V,EAAU7V,OAAOhoE,MAAQ0mE,GAAeuB,SACxC4V,EAAU7V,OAAO7tE,SAAW,CAAEqZ,EAAGuvC,OAAOqV,UAAW3kD,EAAGsvC,OAAOqV,WAC7DylB,EAAU7V,OAAOG,MAAQ,GACzB0V,EAAU7V,OAAOI,OAAS,EAC1ByV,EAAU7V,OAAOK,OAAS,EAC1BwV,EAAU7V,OAAOM,WAAavlB,OAAOqV,UACrCylB,EAAU7V,OAAOO,SAAW,EAC5BsV,EAAU7V,OAAOQ,OAAS,EAC1BqV,EAAU7V,OAAOS,OAAS,EAC1BoV,EAAU7V,OAAOU,WAAa,GAC9BmV,EAAU7V,OAAOW,QAAU,GAC3BkV,EAAU7V,OAAOY,eAAiB,KAClCiV,EAAU7V,OAAOa,QAAU,IAC5B,EA1WY6U,GA4WL+C,YAAc,SAAC5C,GACrB,IAAI5kB,EAAQ,GAAsBzkD,OAAOqpE,EAAU5vB,UAQnD,OAPA4vB,EAAU/V,MAAMzsD,SAAQ,SAAAziB,GACnBA,EAAE+iF,QACL1iB,EAAOA,EAAKzkD,OAAO5b,EAAE+iF,MAAM1tB,WAE5BgL,EAAOA,EAAKzkD,OAAO5b,EAAEq1D,SACtB,IAEOgL,CACR,EAtXYykB,GAwXLgD,aAAe,SAAC7C,EAA2BnV,EAA8BU,GAC/E,IAAIpxE,EAAQ,EAeZ,OAbA0lF,GAAe+C,YAAY5C,GACzB7lB,QAAO,SAAAh7D,GAAC,OAAIA,EAAEhB,OAASsrE,GAAYsC,KAAK,IACxC5R,QAAO,SAAAh7D,GAAC,OAAKA,EAAEosE,QAAUA,GAAWpsE,EAAEosE,QAAUnC,GAAU4K,GAAI,IAC9Dx2D,SAAQ,SAAAre,GAAC,OAAIhF,GAASgF,EAAEqsE,IAAI,IAE9BX,EAAW1Q,QAAO,SAAAp8D,GAAC,OAAIA,EAAEI,OAASqrE,GAAcmD,UAAU,IACxDxS,QAAO,SAAAp8D,GAAC,OAAKA,EAAE0tE,QAAQF,QAAUA,GAAWxtE,EAAE0tE,QAAQF,QAAUnC,GAAU4K,GAAI,IAC9Ex2D,SAAQ,SAAAzf,GAAC,OAAI5D,GAAS4D,EAAEytE,IAAI,IAC9BX,EAAW1Q,QAAO,SAAAp8D,GAAC,OAAIA,EAAEI,OAASqrE,GAAcqD,YAAY,IAC1D1S,QAAO,SAAAp8D,GAAC,OAAKA,EAAE0tE,QAAQF,QAAUA,GAAWxtE,EAAE0tE,QAAQF,QAAUnC,GAAU4K,GAAI,IAC9Ex2D,SAAQ,SAAAzf,GAAC,OAAI5D,GAAS4D,EAAEytE,IAAI,IAGvBj/C,KAAK4rC,IAAIh+D,EAAO,EACxB,EAzYY0lF,GA2YLiD,aAAe,SAAC9C,EAA2BnV,EAA8Bc,GAC/E,IAAIxxE,EAAQ,EA4BZ,OA1BA0lF,GAAe+C,YAAY5C,GACzB7lB,QAAO,SAAAh7D,GAAC,OAAIA,EAAEhB,OAASsrE,GAAYwG,KAAK,IACxC9V,QAAO,SAAAh7D,GAAC,OAAKA,EAAEwsE,QAAUA,GAAWxsE,EAAEwsE,QAAUpC,GAAUyK,GAAI,IAC9Dx2D,SAAQ,SAAAre,GAAC,OAAIhF,GAASgF,EAAEqsE,IAAI,IAC9BqU,GAAe+C,YAAY5C,GACzB7lB,QAAO,SAAAh7D,GAAC,OAAIA,EAAEhB,OAASsrE,GAAY0G,aAAa,IAChDhW,QAAO,SAAAh7D,GAAC,OAAKA,EAAEysE,gBAAkBsD,GAAU6T,iBAAiBpX,IAAYxsE,EAAEysE,gBAAkBzC,GAAkB6K,GAAI,IAClHx2D,SAAQ,SAAAre,GAAC,OAAIhF,GAASgF,EAAEqsE,IAAI,IAE9BX,EAAW1Q,QAAO,SAAAp8D,GAAC,OAAIA,EAAEI,OAASqrE,GAAcuD,UAAU,IACxD5S,QAAO,SAAAp8D,GAAC,OAAKA,EAAE0tE,QAAQE,QAAUA,GAAW5tE,EAAE0tE,QAAQE,QAAUpC,GAAUyK,GAAI,IAC9Ex2D,SAAQ,SAAAzf,GAAC,OAAI5D,GAAS4D,EAAEytE,IAAI,IAC9BX,EAAW1Q,QAAO,SAAAp8D,GAAC,OAAIA,EAAEI,OAASqrE,GAAc4D,kBAAkB,IAChEjT,QAAO,SAAAp8D,GAAC,OAAKA,EAAE0tE,QAAQG,gBAAkBsD,GAAU6T,iBAAiBpX,IAAY5tE,EAAE0tE,QAAQG,gBAAkBzC,GAAkB6K,GAAI,IAClIx2D,SAAQ,SAAAzf,GAAC,OAAI5D,GAAS4D,EAAEytE,IAAI,IAC9BX,EAAW1Q,QAAO,SAAAp8D,GAAC,OAAIA,EAAEI,OAASqrE,GAAcyD,YAAY,IAC1D9S,QAAO,SAAAp8D,GAAC,OAAKA,EAAE0tE,QAAQE,QAAUA,GAAW5tE,EAAE0tE,QAAQF,QAAUnC,GAAU4K,GAAI,IAC9Ex2D,SAAQ,SAAAzf,GAAC,OAAI5D,GAAS4D,EAAEytE,IAAI,IAC9BX,EAAW1Q,QAAO,SAAAp8D,GAAC,OAAIA,EAAEI,OAASqrE,GAAc8D,oBAAoB,IAClEnT,QAAO,SAAAp8D,GAAC,OAAKA,EAAE0tE,QAAQG,gBAAkBsD,GAAU6T,iBAAiBpX,IAAY5tE,EAAE0tE,QAAQG,gBAAkBzC,GAAkB6K,GAAI,IAClIx2D,SAAQ,SAAAzf,GAAC,OAAI5D,GAAS4D,EAAEytE,IAAI,IAE1BwU,EAAU7V,OAAOhoE,QAAU0mE,GAAema,QAC7C7oF,EAAQoyB,KAAK8pC,MAAMl8D,EAAQ,IAGrBoyB,KAAK4rC,IAAIh+D,EAAO,EACxB,EAzaY0lF,GA2aLoD,eAAiB,SAACjD,EAA2BnV,EAA8BN,GACjF,IAAIpwE,EAAQ,EAyBZ,OAvBA0lF,GAAe+C,YAAY5C,GACzB7lB,QAAO,SAAAh7D,GAAC,OAAIA,EAAEhB,OAASsrE,GAAY+D,WAAW,IAC9CrT,QAAO,SAAAh7D,GAAC,OAAKA,EAAEorE,SAAWA,GAAYprE,EAAEorE,SAAWjB,GAAW0K,GAAI,IAClEx2D,SAAQ,SAAAre,GAAC,OAAIhF,GAASgF,EAAEqsE,IAAI,IAC9BqU,GAAe+C,YAAY5C,GACzB7lB,QAAO,SAAAh7D,GAAC,OAAIA,EAAEhB,OAASsrE,GAAYmE,mBAAmB,IACtDzT,QAAO,SAAAh7D,GAAC,OAAKA,EAAE0sE,iBAAmBqD,GAAUgU,kBAAkB3Y,IAAaprE,EAAE0sE,iBAAmB7C,GAAmBgL,GAAI,IACvHx2D,SAAQ,SAAAre,GAAC,OAAIhF,GAASgF,EAAEqsE,IAAI,IAE9BX,EAAW1Q,QAAO,SAAAp8D,GAAC,OAAIA,EAAEI,OAASqrE,GAAcgE,WAAW,IACzDrT,QAAO,SAAAp8D,GAAC,OAAKA,EAAE0tE,QAAQlB,SAAWA,GAAYxsE,EAAE0tE,QAAQlB,SAAWjB,GAAW0K,GAAI,IAClFx2D,SAAQ,SAAAzf,GAAC,OAAI5D,GAAS4D,EAAEytE,IAAI,IAC9BX,EAAW1Q,QAAO,SAAAp8D,GAAC,OAAIA,EAAEI,OAASqrE,GAAcoE,mBAAmB,IACjEzT,QAAO,SAAAp8D,GAAC,OAAKA,EAAE0tE,QAAQI,iBAAmBqD,GAAUgU,kBAAkB3Y,IAAaxsE,EAAE0tE,QAAQI,iBAAmB7C,GAAmBgL,GAAI,IACvIx2D,SAAQ,SAAAzf,GAAC,OAAI5D,GAAS4D,EAAEytE,IAAI,IAC9BX,EAAW1Q,QAAO,SAAAp8D,GAAC,OAAIA,EAAEI,OAASqrE,GAAckE,aAAa,IAC3DvT,QAAO,SAAAp8D,GAAC,OAAKA,EAAE0tE,QAAQlB,SAAWA,GAAYxsE,EAAE0tE,QAAQlB,SAAWjB,GAAW0K,GAAI,IAClFx2D,SAAQ,SAAAzf,GAAC,OAAI5D,GAAS4D,EAAEytE,IAAI,IAC9BX,EAAW1Q,QAAO,SAAAp8D,GAAC,OAAIA,EAAEI,OAASqrE,GAAcsE,qBAAqB,IACnE3T,QAAO,SAAAp8D,GAAC,OAAKA,EAAE0tE,QAAQI,iBAAmBqD,GAAUgU,kBAAkB3Y,IAAaxsE,EAAE0tE,QAAQI,iBAAmB7C,GAAmBgL,GAAI,IACvIx2D,SAAQ,SAAAzf,GAAC,OAAI5D,GAAS4D,EAAEytE,IAAI,IAGvBrxE,CACR,EAtcY0lF,GAwcLsD,oBAAsB,SAACnD,EAA2BnV,EAA8BN,GACtF,IAAIpwE,EAAQ,EAyBZ,OAvBA0lF,GAAe+C,YAAY5C,GACzB7lB,QAAO,SAAAh7D,GAAC,OAAIA,EAAEhB,OAASsrE,GAAYkG,YAAY,IAC/CxV,QAAO,SAAAh7D,GAAC,OAAKA,EAAEorE,SAAWA,GAAYprE,EAAEorE,SAAWjB,GAAW0K,GAAI,IAClEx2D,SAAQ,SAAAre,GAAC,OAAIhF,GAASgF,EAAEqsE,IAAI,IAC9BqU,GAAe+C,YAAY5C,GACzB7lB,QAAO,SAAAh7D,GAAC,OAAIA,EAAEhB,OAASsrE,GAAYoG,oBAAoB,IACvD1V,QAAO,SAAAh7D,GAAC,OAAKA,EAAE0sE,iBAAmBqD,GAAUgU,kBAAkB3Y,IAAaprE,EAAE0sE,iBAAmB7C,GAAmBgL,GAAI,IACvHx2D,SAAQ,SAAAre,GAAC,OAAIhF,GAASgF,EAAEqsE,IAAI,IAE9BX,EAAW1Q,QAAO,SAAAp8D,GAAC,OAAIA,EAAEI,OAASqrE,GAAcwE,gBAAgB,IAC9D7T,QAAO,SAAAp8D,GAAC,OAAKA,EAAE0tE,QAAQlB,SAAWA,GAAYxsE,EAAE0tE,QAAQlB,SAAWjB,GAAW0K,GAAI,IAClFx2D,SAAQ,SAAAzf,GAAC,OAAI5D,GAAS4D,EAAEytE,IAAI,IAC9BX,EAAW1Q,QAAO,SAAAp8D,GAAC,OAAIA,EAAEI,OAASqrE,GAAc4E,wBAAwB,IACtEjU,QAAO,SAAAp8D,GAAC,OAAKA,EAAE0tE,QAAQI,iBAAmBqD,GAAUgU,kBAAkB3Y,IAAaxsE,EAAE0tE,QAAQI,iBAAmB7C,GAAmBgL,GAAI,IACvIx2D,SAAQ,SAAAzf,GAAC,OAAI5D,GAAS4D,EAAEytE,IAAI,IAC9BX,EAAW1Q,QAAO,SAAAp8D,GAAC,OAAIA,EAAEI,OAASqrE,GAAc0E,mBAAmB,IACjE/T,QAAO,SAAAp8D,GAAC,OAAKA,EAAE0tE,QAAQlB,SAAWA,GAAYxsE,EAAE0tE,QAAQlB,SAAWjB,GAAW0K,GAAI,IAClFx2D,SAAQ,SAAAzf,GAAC,OAAI5D,GAAS4D,EAAEytE,IAAI,IAC9BX,EAAW1Q,QAAO,SAAAp8D,GAAC,OAAIA,EAAEI,OAASqrE,GAAc8E,2BAA2B,IACzEnU,QAAO,SAAAp8D,GAAC,OAAKA,EAAE0tE,QAAQI,iBAAmBqD,GAAUgU,kBAAkB3Y,IAAaxsE,EAAE0tE,QAAQI,iBAAmB7C,GAAmBgL,GAAI,IACvIx2D,SAAQ,SAAAzf,GAAC,OAAI5D,GAAS4D,EAAEytE,IAAI,IAGvBrxE,CACR,EAneY0lF,GAqeLmB,iBAAmB,SAAChB,GAC1B,IAAMoD,EAA+B,GAMrC,OAJAvD,GAAe+C,YAAY5C,GACzB7lB,QAAO,SAAAh7D,GAAC,OAAIA,EAAEhB,OAASsrE,GAAYsG,WAAW,IAC9CvyD,SAAQ,SAAAre,GAAC,OAAIikF,EAAM5lF,KAAK2B,EAAE6sE,YAAY,IAEjC5S,EAAYa,SAASmpB,GAAO,SAAA5yE,GAAC,OAAIA,EAAEzX,UAAU,GACrD,EA7eY8mF,GA+eLwD,SAAW,SAACrD,GAClB,IAAMsD,EAA0B,GA0BhC,OAxBKtD,EAAU7V,OAAOhoE,QAAU0mE,GAAeuB,UAAc4V,EAAU7V,OAAOhoE,QAAU0mE,GAAema,OACtGnD,GAAe+C,YAAY5C,GACzB7lB,QAAO,SAAAh7D,GAAC,OAAIA,EAAEhB,OAASsrE,GAAY6G,IAAI,IACvC9yD,SAAQ,SAAAre,GACR,IAAMokF,EAAWD,EAAMxkB,MAAK,SAAAhjD,GAAC,OAAKA,EAAE3d,OAASgB,EAAE8sE,MAC1CnwD,EAAE2vD,QAAQF,QAAUpsE,EAAEosE,OACtBzvD,EAAE2vD,QAAQE,QAAUxsE,EAAEwsE,OACtB7vD,EAAE2vD,QAAQG,gBAAkBzsE,EAAEysE,eAC9B9vD,EAAE2vD,QAAQlB,SAAWprE,EAAEorE,QACvBzuD,EAAE2vD,QAAQI,iBAAmB1sE,EAAE0sE,cAAe,IACnD,GAAI0X,EACHA,EAAS/X,MAAQ,MACX,CACN,IAAMS,EAAOvC,GAAQ4B,gBAAgBnsE,EAAE8sE,KAAM7C,GAAUsC,KAAMvsE,EAAEqsE,MAC/DS,EAAKR,QAAQF,MAAQpsE,EAAEosE,MACvBU,EAAKR,QAAQE,MAAQxsE,EAAEwsE,MACvBM,EAAKR,QAAQG,cAAgBzsE,EAAEysE,cAC/BK,EAAKR,QAAQlB,OAASprE,EAAEorE,OACxB0B,EAAKR,QAAQI,eAAiB1sE,EAAE0sE,eAChCyX,EAAM9lF,KAAKyuE,EACZ,CACD,IAGKqX,CACR,ECpiBM,OAAME,GAAK7rB,GAAA,SAAA6rB,IAAA9+E,EAAA,KAAA8+E,EAAA,IAmDjBzrB,GAnDYyrB,GAAAA,GACL77C,QAA+B,KAD1B67C,GAELC,OAAS,GAFJD,GAILE,KAAoB,CAAEC,UAAU,EAAO5tE,MAAO,KAAM6tE,MAAO,MAJtDJ,GAMLK,KAAO,SAACC,GACd,IAAIA,EAAMH,SAIV,IACMH,GAAM77C,UACV67C,GAAM77C,QAAU,IAAIo8C,cAGjBD,EAAMF,MACTJ,GAAMQ,YAAYF,EAAMF,OACdE,EAAM/tE,QAChB+tE,EAAMH,UAAW,EACjBH,GAAM77C,QAAQs8C,gBAAgBH,EAAM/tE,OAAO,SAAAmuE,GAC1CJ,EAAMH,UAAW,EACjBG,EAAM/tE,MAAQ,KACd+tE,EAAMF,MAAQM,EACdV,GAAMQ,YAAYF,EAAMF,MACzB,IAAG,WACF,IAGH,CAAE,MAAAO,GACD,CAEF,EAhCYX,GAkCLQ,YAAc,SAACJ,GACrB,GAAKJ,GAAM77C,QAIX,IACC,IAAMy8C,EAAOZ,GAAM77C,QAAQ08C,aAC3BD,EAAKA,KAAKjqF,MAAQqpF,GAAMC,OAExB,IAAM3mF,EAAS0mF,GAAM77C,QAAQ28C,qBAC7BxnF,EAAO2T,OAASmzE,EAChB9mF,EAAOynF,QAAQH,GAAMG,QAAQf,GAAM77C,QAAQ68C,aAC3C1nF,EAAOP,OACR,CAAE,MAAAkoF,GACD,CAEF,ECzBM,OAAMC,GAAc/sB,GAAA,SAAA+sB,IAAAhgF,EAAA,KAAAggF,EAAA,IA64B1B3sB,GA74BY2sB,GAAAA,GACL/3D,IAAM,SAAC4zC,EAA2BztB,GACxC4xC,GAAeC,YAAYnnF,KAAKs1C,GAE5B4xC,GAAeE,aAClB9iD,aAAa4iD,GAAeE,YAC5BF,GAAeE,WAAa,MAE7BF,GAAeE,WAAa7jF,YAAW,WAClC2jF,GAAeG,mBAClBH,GAAeG,iBAAiBH,GAAeC,aAC/CD,GAAeC,YAAc,GAE/B,GAAG,IACJ,EAdYD,GAgBLC,YAAwB,GAhBnBD,GAiBLE,WAAoC,KAjB/BF,GAkBLG,iBAA0D,KAlBrDH,GAoBLI,oBAAsB,SAACvkB,EAA2Byf,GAAiF,IAAtD1jF,EAAyCxB,UAAAE,OAAA,QAAAuR,IAAAzR,UAAA,GAAAA,UAAA,GAAG,KACzH69E,EAAU,GAEXr8E,IACJA,EAAW0jF,EAAU7V,OAAO7tE,UAQ7B,IALA,IAAM+gC,EAAO/gC,EAASqZ,EAChBsoD,EAAQ5gC,EAAO2iD,EAAUxtE,KAAO,EAChC+qB,EAAMjhC,EAASsZ,EACfsoD,EAAS3gC,EAAMyiD,EAAUxtE,KAAO,EAE7BmD,EAAI0nB,EAAM1nB,GAAKsoD,IAAStoD,EAChC,IAAK,IAAIC,EAAI2nB,EAAK3nB,GAAKsoD,IAAUtoD,EAChC+iE,EAAQn7E,KAAK,CAAEmY,EAAGA,EAAGC,EAAGA,IAI1B,OAAO+iE,CACR,EAvCY+L,GAyCLK,wBAA0B,SAACxkB,EAA2Byf,GAQ5D,IAPA,IAAMrH,EAAU,GAEVt7C,EAAO2iD,EAAU7V,OAAO7tE,SAASqZ,EAAI,EACrCsoD,EAAQ5gC,EAAO2iD,EAAUxtE,KAAO,EAChC+qB,EAAMyiD,EAAU7V,OAAO7tE,SAASsZ,EAAI,EACpCsoD,EAAS3gC,EAAMyiD,EAAUxtE,KAAO,EAE7BmD,EAAI0nB,EAAM1nB,GAAKsoD,IAAStoD,EAChC,IAAK,IAAIC,EAAI2nB,EAAK3nB,GAAKsoD,IAAUtoD,EAChC+iE,EAAQn7E,KAAK,CAAEmY,EAAGA,EAAGC,EAAGA,IAI1B,IAAMovE,EAAmBN,GAAeI,oBAAoBvkB,EAAWyf,GACvE,OAAOrH,EAAQxe,QAAO,SAAA0E,GAAE,OAAKmmB,EAAiBlmB,MAAK,SAAA9/D,GAAC,OAAKA,EAAE2W,IAAMkpD,EAAGlpD,GAAO3W,EAAE4W,IAAMipD,EAAGjpD,CAAE,GAAC,GAC1F,EAzDY8uE,GA2DLO,iBAAmB,SAAC1kB,EAA2BxB,GAAqE,IAAnCmmB,EAAwBpqF,UAAAE,OAAA,QAAAuR,IAAAzR,UAAA,GAAAA,UAAA,GAAG,GAC5GqqF,EAAuC,GAW7C,OATA5kB,EAAUC,WACRrG,QAAO,SAAAp8D,GAAC,OAAKmnF,EAAOpvE,SAAS/X,EAAE,IAC/Bo8D,QAAO,SAAAp8D,GAAC,OAAIA,EAAEosE,OAAOhoE,QAAU0mE,GAAeuc,IAAI,IAClD5nE,SAAQ,SAAAzf,GACR,IAAM46E,EAAU+L,GAAeI,oBAAoBvkB,EAAWxiE,GAC9DonF,EAAS3nF,KAAI6F,MAAb8hF,EAAQxjB,EAASgX,GAClB,IACDpY,EAAUE,KAAKjjD,SAAQ,SAAAkjD,GAAE,OAAIykB,EAAS3nF,KAAKkjE,EAAGpkE,SAAS,IAEhDikE,EAAU8kB,WAAWvmB,MAAK,SAAA9/D,GAAC,OAAKA,EAAE2W,IAAMopD,EAAOppD,GAAO3W,EAAE4W,IAAMmpD,EAAOnpD,CAAE,MAAMuvE,EAASrmB,MAAK,SAAA9/D,GAAC,OAAKA,EAAE2W,IAAMopD,EAAOppD,GAAO3W,EAAE4W,IAAMmpD,EAAOnpD,CAAE,GAChJ,EAxEY8uE,GA0ELY,eAAiB,SAAC/kB,GACxBA,EAAUglB,OAAS,EAEnBhlB,EAAUC,WAAWhjD,SAAQ,SAAAzf,GAC5BA,EAAEosE,OAAOM,WAAavlB,OAAOqV,UAE7B,IAAMirB,EAAQd,GAAe7B,aAAatiB,EAAWxiE,EAAGqrE,GAAUuJ,OAClE50E,EAAEosE,OAAOM,WAAa3S,EAAOE,KAAKwtB,EACnC,IAEAjlB,EAAUC,WAAWnH,MAAK,SAACv9C,EAAGC,GAE7B,IAAIrY,EAAiBqY,EAAEouD,OAAOM,WAAa3uD,EAAEquD,OAAOM,WAEpD,GAAe,IAAX/mE,EAAc,CAEjB,IAAM+hF,EAASf,GAAe7B,aAAatiB,EAAWzkD,EAAGstD,GAAUuJ,OAEnEjvE,EADeghF,GAAe7B,aAAatiB,EAAWxkD,EAAGqtD,GAAUuJ,OACjD8S,CACnB,CAEA,GAAe,IAAX/hF,EAAc,CAEjB,IAAMgiF,EAAU5pE,EAAEwkD,UAAYwI,GAAc6c,KAAO,EAAI,EAEvDjiF,GADgBqY,EAAEukD,UAAYwI,GAAc6c,KAAO,EAAI,GACrCD,CACnB,CAOA,OALe,IAAXhiF,IAEHA,EAAUoY,EAAE9hB,KAAO+hB,EAAE/hB,MAAS,EAAI,GAG5B0J,CACR,GACD,EA7GYghF,GA+GLkB,QAAU,SAACrlB,GACjBA,EAAUC,WAAWrG,QAAO,SAAAp8D,GAAC,OAAIA,EAAEosE,OAAOx/C,OAAO,IAAEnN,SAAQ,SAAAzf,GAC1D2mF,GAAemB,UAAUtlB,EAAWxiE,EACrC,IAEA,IAAM+nF,EAASpB,GAAeqB,oBAAoBxlB,GAC9CulB,EAAO9qF,OAAS,GACnB0pF,GAAesB,YAAYzlB,EAAWulB,EAAO,GAE/C,EAxHYpB,GA0HLsB,YAAc,SAACzlB,EAA2Byf,GAYhD,GAXAzf,EAAUC,WAAWhjD,SAAQ,SAAAzf,GAAC,OAAIA,EAAEosE,OAAOx/C,SAAU,CAAK,IAC1Dq1D,EAAU7V,OAAOx/C,SAAU,EAE3Bq1D,EAAU7V,OAAOS,OAAS,EAC1BoV,EAAU7V,OAAOQ,OAAS,EAC1BqV,EAAU7V,OAAOO,SAAW,EAC5BsV,EAAU7V,OAAOG,MAAQ,GACzB0V,EAAU7V,OAAOW,QAAU,GAC3BkV,EAAU7V,OAAOY,eAAiB,KAClCiV,EAAU7V,OAAOa,QAAU,KAEvBgV,EAAU7V,OAAOhoE,QAAU0mE,GAAeod,YAAa,CAC1D,IAAMza,EAAOkZ,GAAe7B,aAAatiB,EAAWyf,EAAW5W,GAAU2K,SACnErwE,EAASo0D,EAAOE,KAAKwT,GAC3BkZ,GAAe/3D,IAAI4zC,EAAU,GAAD5pD,OAAKqpE,EAAUhmF,KAAI,oCAAA2c,OAAmC60D,EAAI,eAAA70D,OAAcjT,IAChGA,GAAU,EACbghF,GAAewB,KAAK3lB,EAAWyf,GACpBt8E,GAAU,IAAQs8E,EAAUhW,OAAOl0D,SAAS29D,GAAU4D,UACjE2I,EAAU7V,OAAOK,OAASgB,EAAO,EACjCwU,EAAU7V,OAAOhoE,MAAQ0mE,GAAema,MACxC0B,GAAe/3D,IAAI4zC,EAAU,GAAD5pD,OAAKqpE,EAAUhmF,KAAI,YAAA2c,OAAWqpE,EAAU7V,OAAOhoE,QAE7E,CAEA,IAAM0oE,EAAc,GAClBl0D,OAAOqpE,EAAU7V,OAAOU,YACxBl0D,OAAO+tE,GAAeyB,kBAAkB5lB,EAAWyf,IAErDnV,EAAWrtD,SAAQ,SAAAgvD,GAClBkY,GAAe/3D,IAAI4zC,EAAU,GAAD5pD,OAAKqpE,EAAUhmF,KAAI,8BAAA2c,OAA6Bw1D,GAAewC,wBAAwBnC,GAAU,WAAA71D,OAAU61D,EAAUhB,MAClJ,IAEIwU,EAAU7V,OAAOE,SACpBqa,GAAe/3D,IAAI4zC,EAAU,GAAD5pD,OAAKqpE,EAAUhmF,KAAI,gBAGhD6wE,EACE1Q,QAAO,SAAAqS,GAAS,OAAIA,EAAUruE,OAASqrE,GAAc8C,QAAQ,IAC7D9uD,SAAQ,SAAAgvD,GACRkY,GAAe/3D,IAAI4zC,EAAU,sBAAD5pD,OAAwB61D,EAAUhB,KAAI,MAClEkZ,GAAepN,WAAW/W,EAAWyf,EAAWxT,EAAUhB,KAC3D,IAEDX,EACE1Q,QAAO,SAAAqS,GAAS,OAAIA,EAAUruE,OAASqrE,GAAciD,UAAU,IAC/DjvD,SAAQ,SAAAgvD,GACRkY,GAAe/3D,IAAI4zC,EAAU,qBAAD5pD,OAAuB61D,EAAUf,QAAQlB,OAAM,MAAA5zD,OAAK61D,EAAUhB,KAAI,MAC9F,IAAMrxE,EAAQ29D,EAAOE,KAAKwU,EAAUhB,MACpCkZ,GAAena,OAAOhK,EAAWyf,EAAW7lF,EAAOqyE,EAAUf,QAAQlB,OACtE,IAEIyV,EAAU7V,OAAOhoE,QAAU0mE,GAAeuB,UAAc4V,EAAU7V,OAAOhoE,QAAU0mE,GAAema,QACtGhD,EAAU7V,OAAOQ,OAAS7S,EAAOE,KAAK0sB,GAAe5B,aAAaviB,EAAWyf,EAAWzW,GAAUiX,aAClGR,EAAU7V,OAAOO,SAAW5S,EAAOE,KAAK0sB,GAAe7B,aAAatiB,EAAWyf,EAAW5W,GAAUuJ,QAEpG9H,EACE1Q,QAAO,SAAAqS,GAAS,OAAIA,EAAUruE,OAASqrE,GAAcgF,aAAa,IAClEhxD,SAAQ,SAAAgvD,GACRkY,GAAe/3D,IAAI4zC,EAAU,6BAAD5pD,OAA+B61D,EAAUhB,KAAI,MACzEwU,EAAU7V,OAAOO,UAAY5S,EAAOE,KAAKwU,EAAUhB,KACpD,IACDX,EACE1Q,QAAO,SAAAqS,GAAS,OAAIA,EAAUruE,OAASqrE,GAAckF,eAAe,IACpElxD,SAAQ,SAAAgvD,GACRkY,GAAe/3D,IAAI4zC,EAAU,+BAAD5pD,OAAiC61D,EAAUhB,KAAI,MAC3EwU,EAAU7V,OAAOO,SAAWn+C,KAAK4rC,IAAI,EAAG6nB,EAAU7V,OAAOO,SAAW8B,EAAUhB,KAC/E,IAEDkZ,GAAe0B,YAAY7lB,EAAWyf,IAIvCA,EAAU7V,OAAOU,WAAWrtD,SAAQ,SAAAgvD,GACnC,GAAIL,GAAe6C,yBAAyBxC,GAC3CA,EAAUhB,MAAQ,EAClBkZ,GAAe/3D,IAAI4zC,EAAU,cAAD5pD,OAAgBw1D,GAAewC,wBAAwBnC,GAAU,sBAAA71D,OAAqB61D,EAAUhB,WACtH,CACN,IAAMD,EAAQmZ,GAAe7B,aAAatiB,EAAWyf,EAAWxT,EAAUjB,OACtEzT,EAAOE,KAAKuT,IAAUzT,EAAOE,KAAKwU,EAAUhB,MAC/CgB,EAAUhB,KAAO,EAEjBgB,EAAUhB,MAAQ,EAEnBkZ,GAAe/3D,IAAI4zC,EAAU,cAAD5pD,OAAgBw1D,GAAewC,wBAAwBnC,GAAU,sBAAA71D,OAAqB61D,EAAUhB,MAC7H,CACD,IACAwU,EAAU7V,OAAOU,WAAamV,EAAU7V,OAAOU,WAAW1Q,QAAO,SAAAp8D,GAAC,OAAIA,EAAEytE,KAAO,CAAC,IAGhF,IAAMtoE,EAAUwhF,GAAe7B,aAAatiB,EAAWyf,EAAW5W,GAAU2K,SAS5E,GARKiM,EAAU7V,OAAOK,SAAWtnE,GAAc88E,EAAU7V,OAAOhoE,QAAU0mE,GAAeuB,UAAc4V,EAAU7V,OAAOhoE,QAAU0mE,GAAeod,cAChJjG,EAAU7V,OAAOhoE,MAAQ0mE,GAAeod,YACxCvB,GAAe/3D,IAAI4zC,EAAU,GAAD5pD,OAAKqpE,EAAUhmF,KAAI,YAAA2c,OAAWqpE,EAAU7V,OAAOhoE,SAEvE69E,EAAU7V,OAAOK,OAAStnE,GAAa88E,EAAU7V,OAAOhoE,QAAU0mE,GAAeuc,MACrFV,GAAewB,KAAK3lB,EAAWyf,GAG3BA,EAAU7V,OAAOhoE,QAAU0mE,GAAeod,aAAiBjG,EAAU7V,OAAOhoE,QAAU0mE,GAAeuc,KAAO,CAChHV,GAAemB,UAAUtlB,EAAWyf,GAEpC,IAAM8F,EAASpB,GAAeqB,oBAAoBxlB,GAC9CulB,EAAO9qF,OAAS,GACnB0pF,GAAesB,YAAYzlB,EAAWulB,EAAO,GAE/C,CACD,EArOYpB,GAuOLmB,UAAY,SAACtlB,EAA2Byf,GAC9Czf,EAAUC,WAAWhjD,SAAQ,SAAAzf,GAC5BA,EAAEosE,OAAOx/C,SAAU,EACnB5sB,EAAEosE,OAAOQ,OAAS,EAClB5sE,EAAEosE,OAAOO,SAAW,EACpB3sE,EAAEosE,OAAOG,MAAQ,GACjBvsE,EAAEosE,OAAOW,QAAU,GACnB/sE,EAAEosE,OAAOY,eAAiB,KAC1BhtE,EAAEosE,OAAOa,QAAU,IACpB,IAEAgV,EAAU7V,OAAOE,SAAU,EAC3B2V,EAAU7V,OAAOM,WAAavlB,OAAOqV,SACtC,EApPYmqB,GAsPL0B,YAAc,SAAC7lB,EAA2Byf,GAA+B,IAADqG,EAAAC,EACxEC,EAAO1G,GAAegC,cAAc7B,GAC1C,OAAQA,EAAU1f,SACjB,KAAKwI,GAAc6c,KAClB3F,EAAU7V,OAAOW,QAAU1R,EAAYQ,QAAQ2sB,GAAMnmC,OAAO,EAAG,IAC/DimC,EAAArG,EAAU7V,OAAOW,SAAQttE,KAAI6F,MAAAgjF,EAAA1kB,EAAIiQ,GAASE,mBAC1CkO,EAAU7V,OAAOY,eAAiB,KAClC,MACD,KAAKjC,GAAc8K,QAClBoM,EAAU7V,OAAOW,QAAUyb,GAC3BD,EAAAtG,EAAU7V,OAAOW,SAAQttE,KAAI6F,MAAAijF,EAAA3kB,EAAIiQ,GAASE,mBAC1C4S,GAAe8B,sBAAsBjmB,EAAWyf,GAChDA,EAAU7V,OAAOY,eAAiB,KAGrC,EArQY2Z,GAuQL+B,aAAe,SAAClmB,EAA2Byf,EAA2BhxC,GAC5EgxC,EAAU7V,OAAOY,eAAiB,CACjC/7B,OAAQA,EACRitC,MAAM,GAEPyI,GAAe8B,sBAAsBjmB,EAAWyf,GAAW,EAC5D,EA7QY0E,GA+QLgC,eAAiB,SAACnmB,EAA2Byf,GACnDA,EAAU7V,OAAOY,eAAiB,KAClC2Z,GAAe8B,sBAAsBjmB,EAAWyf,GAAW,EAC5D,EAlRY0E,GAoRL8B,sBAAwB,SAACjmB,EAA2Byf,GAAsD,IAA3B2G,EAAa7rF,UAAAE,OAAA,QAAAuR,IAAAzR,UAAA,IAAAA,UAAA,GAClGklF,EAAU7V,OAAOW,QAAQttD,SAAQ,SAAAwxB,GAChCA,EAAOkjC,WAAW10D,SAAQ,SAAAopE,GACzB,OAAQA,EAAUh2D,IACjB,IAAK,SACJi2D,GAAYC,qBAAqBF,EAAyC5G,GAC1E,MACD,IAAK,SACJ6G,GAAYE,qBAAqBH,EAAyCrmB,EAAWyf,EAAWhxC,GAChG,MACD,IAAK,UACJ63C,GAAYG,qBAAqBJ,EAAyCrmB,EAAWyf,EAAWhxC,EAAQ23C,GAI3G,GACD,GACD,EArSYjC,GAuSLuC,UAAY,SAAC1mB,EAA2Byf,GAC9C,GAAwC,OAApCA,EAAU7V,OAAOY,eAAyB,CAC7C,IAAM/7B,EAASgxC,EAAU7V,OAAOY,eAAe/7B,OAC/CgxC,EAAU7V,OAAOY,eAAekR,MAAO,EACvCyI,GAAe/3D,IAAI4zC,EAAU,GAAD5pD,OAAKqpE,EAAUhmF,KAAI,UAAA2c,OAASq4B,EAAOh1C,OAC/Dg1C,EAAOrG,QAAQnrB,SAAQ,SAAA0pE,GAAM,OAAI1U,GAAc2U,IAAID,EAAQ3mB,EAAWyf,EAAWhxC,EAAOkjC,WAAW,GACpG,CACD,EA9SYwS,GAgTL0C,YAAc,SAAC7mB,EAA2Byf,EAA2B1jF,EAAoCk/E,GAC/G,IAAM6L,EAAa3C,GAAeI,oBAAoBvkB,EAAWyf,EAAW1jF,GACtEgrF,EAAWD,EAAWziC,KAAI,SAAAia,GAC/B,IAAM0oB,EAAO,CAAE5xE,EAAGkpD,EAAGlpD,EAAGC,EAAGipD,EAAGjpD,GAC9B,OAAQ4lE,GACP,IAAK,IACJ+L,EAAK3xE,GAAK,EACV,MACD,IAAK,KACJ2xE,EAAK5xE,GAAK,EACV4xE,EAAK3xE,GAAK,EACV,MACD,IAAK,IACJ2xE,EAAK5xE,GAAK,EACV,MACD,IAAK,KACJ4xE,EAAK5xE,GAAK,EACV4xE,EAAK3xE,GAAK,EACV,MACD,IAAK,IACJ2xE,EAAK3xE,GAAK,EACV,MACD,IAAK,KACJ2xE,EAAK5xE,GAAK,EACV4xE,EAAK3xE,GAAK,EACV,MACD,IAAK,IACJ2xE,EAAK5xE,GAAK,EACV,MACD,IAAK,KACJ4xE,EAAK5xE,GAAK,EACV4xE,EAAK3xE,GAAK,EAGZ,OAAO2xE,CACR,IAEMC,EAAwBF,EAC5B1iC,KAAI,SAAAia,GAAE,IAAA4oB,EAAA,OAAuE,QAAvEA,EAAIlnB,EAAU8kB,WAAWvmB,MAAK,SAAA4oB,GAAE,OAAKA,EAAG/xE,IAAMkpD,EAAGlpD,GAAO+xE,EAAG9xE,IAAMipD,EAAGjpD,CAAE,WAAC,IAAA6xE,EAAAA,EAAI,IAAI,IACrFttB,QAAO,SAAAutB,GAAE,OAAW,OAAPA,CAAW,IAG1B,GAAIF,EAAsBxsF,SAAWssF,EAAStsF,OAC7C,OAAOkqD,OAAOoV,UAIf,GAAIgtB,EAAS7jC,MAAK,SAAAob,GAAE,OAAK6lB,GAAeO,iBAAiB1kB,EAAW1B,EAAI,CAAEmhB,GAAY,IACrF,OAAO96B,OAAOoV,UAGf,IAAIqtB,EAAO,EAGPH,EAAsB/jC,MAAK,SAAAikC,GAAE,OAAIA,EAAGvpF,OAAS85E,GAAuBqD,UAAU,MACjFqM,GAAQ,GAIT,IAAMzU,EAAuC,GAmB7C,OAlBA3S,EAAUC,WACRrG,QAAO,SAAAp8D,GAAC,OAAIA,EAAEuiE,UAAY0f,EAAU1f,OAAO,IAC3CnG,QAAO,SAAAp8D,GAAC,OAAIA,EAAEosE,OAAOhoE,QAAU0mE,GAAeuB,QAAQ,IACtDjQ,QAAO,SAAAp8D,GAAC,OAAKA,EAAEosE,OAAOE,OAAO,IAC7B7sD,SAAQ,SAAAzf,GACR,IAAM4sB,EAAU+5D,GAAeI,oBAAoBvkB,EAAWxiE,GACxD46E,EAAUF,GAAkBI,mBAAmBtY,EAAU8kB,WAAY16D,GAC3EuoD,EAAS11E,KAAI6F,MAAb6vE,EAAQvR,EAASgX,GAClB,IACG0O,EAAW5jC,MAAK,SAAAob,GAAE,OAAIqU,EAASpU,MAAK,SAAA8oB,GAAE,OAAKA,EAAGjyE,IAAMkpD,EAAGlpD,GAAOiyE,EAAGhyE,IAAMipD,EAAGjpD,CAAE,GAAC,MAChF+xE,GAAQ,IAIJ3H,EAAU7V,OAAOhoE,QAAU0mE,GAAema,OAAWhD,EAAU7V,OAAOS,OAAS,KACnF+c,GAAQ,GAGFA,CACR,EA/XYjD,GAiYLmD,uBAAyB,SAACtnB,EAA2Byf,GAY3D,MAXgB,CACf,CAAExE,IAAK,IAAK7lE,EAAGqqE,EAAU7V,OAAO7tE,SAASqZ,EAAGC,EAAGoqE,EAAU7V,OAAO7tE,SAASsZ,EAAI,GAC7E,CAAE4lE,IAAK,KAAM7lE,EAAGqqE,EAAU7V,OAAO7tE,SAASqZ,EAAI,EAAGC,EAAGoqE,EAAU7V,OAAO7tE,SAASsZ,EAAI,GAClF,CAAE4lE,IAAK,IAAK7lE,EAAGqqE,EAAU7V,OAAO7tE,SAASqZ,EAAI,EAAGC,EAAGoqE,EAAU7V,OAAO7tE,SAASsZ,GAC7E,CAAE4lE,IAAK,KAAM7lE,EAAGqqE,EAAU7V,OAAO7tE,SAASqZ,EAAI,EAAGC,EAAGoqE,EAAU7V,OAAO7tE,SAASsZ,EAAI,GAClF,CAAE4lE,IAAK,IAAK7lE,EAAGqqE,EAAU7V,OAAO7tE,SAASqZ,EAAGC,EAAGoqE,EAAU7V,OAAO7tE,SAASsZ,EAAI,GAC7E,CAAE4lE,IAAK,KAAM7lE,EAAGqqE,EAAU7V,OAAO7tE,SAASqZ,EAAI,EAAGC,EAAGoqE,EAAU7V,OAAO7tE,SAASsZ,EAAI,GAClF,CAAE4lE,IAAK,IAAK7lE,EAAGqqE,EAAU7V,OAAO7tE,SAASqZ,EAAI,EAAGC,EAAGoqE,EAAU7V,OAAO7tE,SAASsZ,GAC7E,CAAE4lE,IAAK,KAAM7lE,EAAGqqE,EAAU7V,OAAO7tE,SAASqZ,EAAI,EAAGC,EAAGoqE,EAAU7V,OAAO7tE,SAASsZ,EAAI,IAGpEukD,QAAO,SAAA4E,GAErB,OADa2lB,GAAe0C,YAAY7mB,EAAWyf,EAAWA,EAAU7V,OAAO7tE,SAAUyiE,EAAOyc,OAChFt2B,OAAOoV,SACxB,GACD,EAjZYoqB,GAqZLoD,KAAO,SAACvnB,EAA2Byf,EAA2BxE,EAAamM,GAKjF,OAJA3H,EAAU7V,OAAOO,SAAWn+C,KAAK4rC,IAAI,EAAG6nB,EAAU7V,OAAOO,SAAWid,GAEpE3H,EAAU7V,OAAOG,MAAM9sE,KAAK,CAAEmY,EAAGqqE,EAAU7V,OAAO7tE,SAASqZ,EAAGC,EAAGoqE,EAAU7V,OAAO7tE,SAASsZ,IAEnF4lE,GACP,IAAK,IACJwE,EAAU7V,OAAO7tE,SAASsZ,GAAK,EAC/B,MACD,IAAK,KACJoqE,EAAU7V,OAAO7tE,SAASqZ,GAAK,EAC/BqqE,EAAU7V,OAAO7tE,SAASsZ,GAAK,EAC/B,MACD,IAAK,IACJoqE,EAAU7V,OAAO7tE,SAASqZ,GAAK,EAC/B,MACD,IAAK,KACJqqE,EAAU7V,OAAO7tE,SAASqZ,GAAK,EAC/BqqE,EAAU7V,OAAO7tE,SAASsZ,GAAK,EAC/B,MACD,IAAK,IACJoqE,EAAU7V,OAAO7tE,SAASsZ,GAAK,EAC/B,MACD,IAAK,KACJoqE,EAAU7V,OAAO7tE,SAASqZ,GAAK,EAC/BqqE,EAAU7V,OAAO7tE,SAASsZ,GAAK,EAC/B,MACD,IAAK,IACJoqE,EAAU7V,OAAO7tE,SAASqZ,GAAK,EAC/B,MACD,IAAK,KACJqqE,EAAU7V,OAAO7tE,SAASqZ,GAAK,EAC/BqqE,EAAU7V,OAAO7tE,SAASsZ,GAAK,EAIjC8uE,GAAe8B,sBAAsBjmB,EAAWyf,EACjD,EA1bY0E,GA4bLqD,YAAc,SAACxnB,EAA2BynB,EAAuBC,EAAyBC,GAC3FA,EAAOA,SAIRF,EAAMp3D,KAAOq3D,EAAQr3D,GACxB8zD,GAAe/3D,IAAI4zC,EAAU,GAAD5pD,OAAKqxE,EAAMhuF,KAAI,YAAA2c,OAAWuxE,EAAOluF,OAE7D0qF,GAAe/3D,IAAI4zC,EAAU,GAAD5pD,OAAKqxE,EAAMhuF,KAAI,WAAA2c,OAAUuxE,EAAOluF,KAAI,QAAA2c,OAAOsxE,EAAQjuF,OAGhFguF,EAAM7d,OAAOO,UAAY,EAEzBsd,EAAM/d,MAAQ+d,EAAM/d,MAAM9P,QAAO,SAAAp/D,GAAC,OAAIA,EAAE61B,KAAOs3D,EAAOt3D,EAAE,IACxDo3D,EAAM9d,QAAU8d,EAAM9d,QAAQ/P,QAAO,SAAAp/D,GAAC,OAAIA,EAAE61B,KAAOs3D,EAAOt3D,EAAE,IAE5Ds3D,EAAOA,OAAOv/C,QAAQnrB,SAAQ,SAAA0pE,GAC7B,IAAMr/D,EAAQwqD,GAAuB3wE,OACrCmmB,EAAM1tB,MAAQ,CAAE8tF,EAAQr3D,IACxB4hD,GAAc2U,IAAID,EAAQ3mB,EAAW0nB,EAAS,CAAEpgE,GACjD,IACD,EAjdY68D,GAmdLpN,WAAa,SAAC/W,EAA2Byf,EAA2B7lF,GAC1E6lF,EAAU7V,OAAOI,OAASh+C,KAAK4rC,IAAI,EAAG6nB,EAAU7V,OAAOI,OAASpwE,GAEhEuqF,GAAe8B,sBAAsBjmB,EAAWyf,GAEhD0E,GAAe/3D,IAAI4zC,EAAU,GAAD5pD,OAAKqpE,EAAUhmF,KAAI,mBAAA2c,OAAkBxc,EAAK,wBAAAwc,OAAuBqpE,EAAU7V,OAAOI,QAC/G,EAzdYma,GA2dL1O,WAAa,SAACzV,EAA2Byf,EAA2B7lF,GAC1E6lF,EAAU7V,OAAOK,OAASj+C,KAAK4rC,IAAI,EAAG6nB,EAAU7V,OAAOK,OAASrwE,GAEhEuqF,GAAe/3D,IAAI4zC,EAAU,GAAD5pD,OAAKqpE,EAAUhmF,KAAI,mBAAA2c,OAAkBxc,EAAK,oBAAAwc,OAAmBqpE,EAAU7V,OAAOK,SAE1G,IAAMtnE,EAAUwhF,GAAe7B,aAAatiB,EAAWyf,EAAW5W,GAAU2K,SACvEiM,EAAU7V,OAAOK,OAAStnE,GAAa88E,EAAU7V,OAAOhoE,QAAU0mE,GAAeod,cACrFjG,EAAU7V,OAAOhoE,MAAQ0mE,GAAema,MACxC0B,GAAe/3D,IAAI4zC,EAAU,GAAD5pD,OAAKqpE,EAAUhmF,KAAI,YAAA2c,OAAWqpE,EAAU7V,OAAOhoE,SAG5EuiF,GAAe8B,sBAAsBjmB,EAAWyf,EACjD,EAveY0E,GAyeLna,OAAS,SAAChK,EAA2Byf,EAA2B7lF,EAAegE,GACrF,GAAI6hF,EAAU7V,OAAOhoE,QAAU0mE,GAAeuc,KAA9C,CAIAV,GAAe/3D,IAAI4zC,EAAU,GAAD5pD,OAAKqpE,EAAUhmF,KAAI,qBAAA2c,OAAoBxY,EAAI,MAAAwY,OAAKxc,EAAK,WAE7E6lF,EAAUhW,OAAOl0D,SAAS29D,GAAUsD,QAAUiJ,EAAUhW,OAAOl0D,SAAS29D,GAAUyC,aACjFhH,GAAUgU,kBAAkB/kF,KAAU6qE,GAAmBkM,WAC5DwP,GAAe/3D,IAAI4zC,EAAU,GAAD5pD,OAAKqpE,EAAUhmF,KAAI,gCAC/CG,EAAQoyB,KAAK8pC,MAAMl8D,EAAQ,IAI7B,IAAMguF,EAAazD,GAAevB,oBAAoB5iB,EAAWyf,EAAW7hF,GAM5E,GALIgqF,EAAa,IAChBzD,GAAe/3D,IAAI4zC,EAAU,GAAD5pD,OAAKqpE,EAAUhmF,KAAI,4BAAA2c,OAA2BxY,EAAI,MAAAwY,OAAKwxE,EAAU,UAC7FhuF,GAASguF,GAGNhuF,EAAQ,EACX,GAAI6lF,EAAUhW,OAAOl0D,SAAS29D,GAAU2U,OAEvC1D,GAAewB,KAAK3lB,EAAWyf,OACzB,CACNA,EAAU7V,OAAOI,QAAUpwE,EAC3BuqF,GAAe/3D,IAAI4zC,EAAU,GAAD5pD,OAAKqpE,EAAUhmF,KAAI,mBAAA2c,OAAkBxc,EAAK,wBAAAwc,OAAuBqpE,EAAU7V,OAAOI,SAE9G,IAAMiB,EAAOkZ,GAAe7B,aAAatiB,EAAWyf,EAAW5W,GAAU0K,WACnEpwE,EAASo0D,EAAOE,KAAKwT,GAC3BkZ,GAAe/3D,IAAI4zC,EAAU,GAAD5pD,OAAKqpE,EAAUhmF,KAAI,sBAAA2c,OAAqB60D,EAAI,eAAA70D,OAAcjT,IAClFA,EAASs8E,EAAU7V,OAAOI,QAC7Bma,GAAepP,MAAM/U,EAAWyf,EAAW,EAE7C,MAEA0E,GAAe/3D,IAAI4zC,EAAU,GAAD5pD,OAAKqpE,EAAUhmF,KAAI,qBAGhD0qF,GAAe8B,sBAAsBjmB,EAAWyf,EApChD,CAqCD,EAjhBY0E,GAmhBLpP,MAAQ,SAAC/U,EAA2Byf,EAA2B7lF,GACrE,GAAI6lF,EAAU7V,OAAOhoE,QAAU0mE,GAAeuc,KAA9C,CAQA,GAJApF,EAAU7V,OAAOI,OAAS,EAC1ByV,EAAU7V,OAAOK,QAAUrwE,EAC3BuqF,GAAe/3D,IAAI4zC,EAAU,GAAD5pD,OAAKqpE,EAAUhmF,KAAI,mBAAA2c,OAAkBxc,EAAK,oBAAAwc,OAAmBqpE,EAAU7V,OAAOI,OAAM,aAAA5zD,OAAYqpE,EAAU7V,OAAOK,OAAM,YAE/IwV,EAAUhW,OAAOl0D,SAAS29D,GAAU2U,OAEvC1D,GAAewB,KAAK3lB,EAAWyf,OACzB,CACN,IAAM98E,EAAUwhF,GAAe7B,aAAatiB,EAAWyf,EAAW5W,GAAU2K,SACxEiM,EAAU7V,OAAOK,SAAWtnE,IAC/B88E,EAAU7V,OAAOhoE,MAAQ0mE,GAAeod,YACxCvB,GAAe/3D,IAAI4zC,EAAU,GAAD5pD,OAAKqpE,EAAUhmF,KAAI,YAAA2c,OAAWqpE,EAAU7V,OAAOhoE,SAExE69E,EAAU7V,OAAOK,OAAStnE,GAC7BwhF,GAAewB,KAAK3lB,EAAWyf,EAEjC,CAEA0E,GAAe8B,sBAAsBjmB,EAAWyf,EApBhD,CAqBD,EA3iBY0E,GA6iBLwB,KAAO,SAAC3lB,EAA2Byf,GACrCA,EAAU7V,OAAOhoE,QAAU0mE,GAAeuc,OAI9CpF,EAAU7V,OAAOhoE,MAAQ0mE,GAAeuc,KACxCpF,EAAU7V,OAAOU,WAAa,GAC9B6Z,GAAe/3D,IAAI4zC,EAAU,GAAD5pD,OAAKqpE,EAAUhmF,KAAI,YAAA2c,OAAWqpE,EAAU7V,OAAOhoE,QAC3EuiF,GAAe2D,aAAa9nB,EAAWyf,GACvCwD,GAAMK,KAAKL,GAAME,MAClB,EAvjBYgB,GAyjBL4D,QAAU,SAAC/nB,EAA2Byf,GACxCA,EAAU7V,OAAOhoE,QAAU0mE,GAAeuB,WAC7C4V,EAAU7V,OAAOhoE,MAAQ0mE,GAAema,MAExC0B,GAAe8B,sBAAsBjmB,EAAWyf,GAEhD0E,GAAe/3D,IAAI4zC,EAAU,GAAD5pD,OAAKqpE,EAAUhmF,KAAI,YAAA2c,OAAWqpE,EAAU7V,OAAOhoE,QAE7E,EAjkBYuiF,GAmkBL6D,QAAU,SAAChoB,EAA2Byf,GACxCA,EAAU7V,OAAOhoE,QAAU0mE,GAAema,QAC7ChD,EAAU7V,OAAOhoE,MAAQ0mE,GAAeuB,SAExCsa,GAAe8B,sBAAsBjmB,EAAWyf,GAEhD0E,GAAe/3D,IAAI4zC,EAAU,GAAD5pD,OAAKqpE,EAAUhmF,KAAI,YAAA2c,OAAWqpE,EAAU7V,OAAOhoE,QAE7E,EA3kBYuiF,GA6kBLjN,KAAO,SAAClX,EAA2Byf,GACrCA,EAAU7V,OAAOhoE,QAAU0mE,GAAeuc,OAI9CpF,EAAU7V,OAAOE,SAAU,EAC3Bqa,GAAe/3D,IAAI4zC,EAAU,GAAD5pD,OAAKqpE,EAAUhmF,KAAI,gBAChD,EAplBY0qF,GAslBL8D,QAAU,SAACjoB,EAA2Byf,GAC5C,IAAMxU,EAAOkZ,GAAe5B,aAAaviB,EAAWyf,EAAWzW,GAAUmL,UACnEhxE,EAASo0D,EAAOE,KAAKwT,GAI3B,GAHAkZ,GAAe/3D,IAAI4zC,EAAU,YAAD5pD,OAAcqpE,EAAUhmF,KAAI,qBAAA2c,OAAoB60D,EAAI,eAAA70D,OAAcjT,IAE9Fs8E,EAAU7V,OAAOO,UAAY,EACzBhnE,EAAS,EAAG,CACf,IAAMw2E,EAAQzB,GAAkBkC,YAAYpa,EAAU8kB,YAChDL,EAAmBN,GAAeI,oBAAoBvkB,EAAWyf,GACvEzf,EAAUC,WACRrG,QAAO,SAAAp8D,GAAC,OAAIA,EAAEuiE,UAAY0f,EAAU1f,OAAO,IAC3CnG,QAAO,SAAAp8D,GAAC,OAAIA,EAAEosE,OAAOE,OAAO,IAC5B7sD,SAAQ,SAAAirE,GACR,IAAMC,EAAchE,GAAeI,oBAAoBvkB,EAAWkoB,GAC9DhQ,GAAkBwB,UAAUC,EAAO8K,EAAkB0D,KACxDD,EAAKte,OAAOE,SAAU,EACtBqa,GAAe/3D,IAAI4zC,EAAU,GAAD5pD,OAAK8xE,EAAKzuF,KAAI,0BAE5C,GACF,CAEA0qF,GAAe8B,sBAAsBjmB,EAAWyf,EAEjD,EA7mBY0E,GA+mBL70B,KAAO,SAAC0Q,EAA2Byf,GACzC,IAAMxU,EAAOkZ,GAAe5B,aAAaviB,EAAWyf,EAAWzW,GAAUiX,YACnE98E,EAASo0D,EAAOE,KAAKwT,GAE3BwU,EAAU7V,OAAOO,UAAY,EAC7BsV,EAAU7V,OAAOQ,QAAUjnE,EAE3BghF,GAAe8B,sBAAsBjmB,EAAWyf,GAEhD0E,GAAe/3D,IAAI4zC,EAAU,SAAD5pD,OAAWqpE,EAAUhmF,KAAI,uBAAA2c,OAAsB60D,EAAI,eAAA70D,OAAcjT,GAC9F,EAznBYghF,GA2nBLiE,KAAO,SAACpoB,EAA2Byf,GACzC,IAAMxU,EAAOkZ,GAAe5B,aAAaviB,EAAWyf,EAAWzW,GAAUwL,SACnErxE,EAASo0D,EAAOE,KAAKwT,GAE3BwU,EAAU7V,OAAOO,UAAY,EAC7BsV,EAAU7V,OAAOS,QAAUlnE,EAE3BghF,GAAe8B,sBAAsBjmB,EAAWyf,GAEhD0E,GAAe/3D,IAAI4zC,EAAU,SAAD5pD,OAAWqpE,EAAUhmF,KAAI,oBAAA2c,OAAmB60D,EAAI,eAAA70D,OAAcjT,GAC3F,EAroBYghF,GAuoBLkE,OAAS,SAACroB,EAA2Byf,GACvCA,EAAU7V,OAAOS,OAAS,IAC7BoV,EAAU7V,OAAOS,OAAS,EAE1B8Z,GAAe8B,sBAAsBjmB,EAAWyf,GAEhD0E,GAAe/3D,IAAI4zC,EAAU,GAAD5pD,OAAKqpE,EAAUhmF,KAAI,yBAEjD,EA/oBY0qF,GAipBLmE,UAAY,SAACtoB,EAA2Byf,EAA2B/sE,GACrE+sE,EAAUhW,OAAOl0D,SAAS29D,GAAUkC,SAKxCqK,EAAU7V,OAAOO,SAAWn+C,KAAK4rC,IAAI,EAAG6nB,EAAU7V,OAAOO,SAAW,GAEpEsV,EAAU9V,QAAU8V,EAAU9V,QAAQ/P,QAAO,SAAAp/D,GAAC,OAAIA,EAAE61B,KAAO3d,EAAK2d,EAAE,IAElEovD,EAAU/V,MAAMzsE,KAAKyV,GAErByxE,GAAe8B,sBAAsBjmB,EAAWyf,GAEhD0E,GAAe/3D,IAAI4zC,EAAU,GAAD5pD,OAAKqpE,EAAUhmF,KAAI,YAAA2c,OAAW1D,EAAKjZ,OAChE,EAhqBY0qF,GAkqBLoE,YAAc,SAACvoB,EAA2Byf,EAA2B/sE,GACvE+sE,EAAUhW,OAAOl0D,SAAS29D,GAAUkC,SAKxCqK,EAAU7V,OAAOO,SAAWn+C,KAAK4rC,IAAI,EAAG6nB,EAAU7V,OAAOO,SAAW,GAEpEsV,EAAU/V,MAAQ+V,EAAU/V,MAAM9P,QAAO,SAAAp/D,GAAC,OAAIA,EAAE61B,KAAO3d,EAAK2d,EAAE,IAE9DovD,EAAU9V,QAAQ1sE,KAAKyV,GAEvByxE,GAAe8B,sBAAsBjmB,EAAWyf,GAEhD0E,GAAe/3D,IAAI4zC,EAAU,GAAD5pD,OAAKqpE,EAAUhmF,KAAI,cAAA2c,OAAa1D,EAAKjZ,OAClE,EAjrBY0qF,GAmrBLqE,WAAa,SAACxoB,EAA2Byf,EAA2B/sE,GAC1E,IAAI+sE,EAAUhW,OAAOl0D,SAAS29D,GAAUkC,OAAxC,CAKAqK,EAAU7V,OAAOO,SAAWn+C,KAAK4rC,IAAI,EAAG6nB,EAAU7V,OAAOO,SAAW,GAEpE,IAAMnM,EAAMka,GAAkBI,mBAAmBtY,EAAU8kB,WAAY,CAAErF,EAAU7V,OAAO7tE,WACpF0sF,EAAQzoB,EAAUE,KAAKtG,QAAO,SAAAuG,GAAE,OAAInC,EAAIO,MAAK,SAAAD,GAAE,OAAKA,EAAGlpD,IAAM+qD,EAAGpkE,SAASqZ,GAAOkpD,EAAGjpD,IAAM8qD,EAAGpkE,SAASsZ,CAAE,GAAC,IACxG8qD,EAAKsoB,EAAMlqB,MAAK,SAAAz/D,GAAC,OAAIA,EAAE4qE,MAAMnL,MAAK,SAAA/jE,GAAC,OAAIA,IAAMkY,CAAI,GAAC,IACpDytD,IACHA,EAAGuJ,MAAQvJ,EAAGuJ,MAAM9P,QAAO,SAAAp/D,GAAC,OAAIA,EAAE61B,KAAO3d,EAAK2d,EAAE,IACxB,IAApB8vC,EAAGuJ,MAAMjvE,SACZulE,EAAUE,KAAOF,EAAUE,KAAKtG,QAAO,SAAA96D,GAAC,OAAIA,EAAEuxB,KAAO8vC,EAAG9vC,EAAE,MAI5DovD,EAAU9V,QAAQ1sE,KAAKyV,GAEvByxE,GAAe8B,sBAAsBjmB,EAAWyf,GAEhD0E,GAAe/3D,IAAI4zC,EAAU,GAAD5pD,OAAKqpE,EAAUhmF,KAAI,cAAA2c,OAAa1D,EAAKjZ,MAlBjE,CAmBD,EA1sBY0qF,GA4sBLuE,SAAW,SAAC1oB,EAA2Byf,EAA2B/sE,GACxE,IAAI+sE,EAAUhW,OAAOl0D,SAAS29D,GAAUkC,OAAxC,CAKAqK,EAAU/V,MAAQ+V,EAAU/V,MAAM9P,QAAO,SAAAp/D,GAAC,OAAIA,EAAE61B,KAAO3d,EAAK2d,EAAE,IAC9DovD,EAAU9V,QAAU8V,EAAU9V,QAAQ/P,QAAO,SAAAp/D,GAAC,OAAIA,EAAE61B,KAAO3d,EAAK2d,EAAE,IAGlE,IAAM2tC,EAAMka,GAAkBI,mBAAmBtY,EAAU8kB,WAAY,CAAErF,EAAU7V,OAAO7tE,WACpF0sF,EAAQzoB,EAAUE,KAAKtG,QAAO,SAAAuG,GAAE,OAAInC,EAAIO,MAAK,SAAAD,GAAE,OAAKA,EAAGlpD,IAAM+qD,EAAGpkE,SAASqZ,GAAOkpD,EAAGjpD,IAAM8qD,EAAGpkE,SAASsZ,CAAE,GAAC,IAE1G8qD,EAAK,KACT,GAAqB,IAAjBsoB,EAAMhuF,OAAc,CACvB0lE,EAAKgJ,GAAQwC,iBAEb,IAAMtN,EAAQL,EAAIpE,QAAO,SAAA0E,GAAE,OAAI6lB,GAAeO,iBAAiB1kB,EAA6B1B,EAAG,IAC/F,GAAID,EAAM5jE,OAAS,EAAG,CACrB,IAAM6jE,EAAKzF,EAAYY,KAAK4E,GAC5B8B,EAAGpkE,SAASqZ,EAAIkpD,EAAGlpD,EACnB+qD,EAAGpkE,SAASsZ,EAAIipD,EAAGjpD,EACnB2qD,EAAUE,KAAKjjE,KAAKkjE,EACrB,CACD,MACCA,EAAKtH,EAAYY,KAAKgvB,GAGvBtoB,EAAGuJ,MAAMzsE,KAAKyV,GAEdyxE,GAAe8B,sBAAsBjmB,EAAWyf,GAEhD0E,GAAe/3D,IAAI4zC,EAAU,GAAD5pD,OAAKqpE,EAAUhmF,KAAI,WAAA2c,OAAU1D,EAAKjZ,MA5B9D,CA6BD,EA7uBY0qF,GA+uBL2D,aAAe,SAAC9nB,EAA2Byf,GACjD,IAAIA,EAAUhW,OAAOl0D,SAAS29D,GAAUkC,OAAxC,CAKA,IAAM1L,EAAS,GAAmBtzD,OAAOqpE,EAAU/V,OAAOtzD,OAAOqpE,EAAU9V,SAEvEvJ,EAAQ,EAOZ,GANIqf,EAAU1f,UAAYwI,GAAc8K,SACnC9b,EAAOQ,kBACVqI,EAAQ7I,EAAOE,KAAK,GAAKF,EAAOE,KAAK,IAIlCiS,EAAMjvE,OAAS,GAAO2lE,EAAQ,EAAI,CAAC,IAADuoB,EAChCzoB,EAAOiJ,GAAQwC,kBACrBgd,EAAAzoB,EAAKwJ,OAAMzsE,KAAI6F,MAAA6lF,EAAAvnB,EAAIsI,IACnBxJ,EAAKE,MAAQA,EAEbqf,EAAU/V,MAAQ,GAClB+V,EAAU9V,QAAU,GAEpB,IAAMtL,EAAQ8lB,GAAeI,oBAAoBvkB,EAAWyf,GAAW7lB,QAAO,SAAA0E,GAAE,OAAI6lB,GAAeO,iBAAiB1kB,EAA6B1B,EAAG,IACpJ,GAAID,EAAM5jE,OAAS,EAAG,CACrB,IAAM6jE,EAAKzF,EAAYY,KAAK4E,GAC5B6B,EAAKnkE,SAASqZ,EAAIkpD,EAAGlpD,EACrB8qD,EAAKnkE,SAASsZ,EAAIipD,EAAGjpD,EACrB2qD,EAAUE,KAAKjjE,KAAKijE,EACrB,CACD,CA1BA,CA2BD,EA9wBYikB,GAkxBLyE,kBAAoB,SAAC5oB,GAC3B,IAAM6oB,EAAkB7oB,EAAUC,WAChCrG,QAAO,SAAAp8D,GAAC,OAAIA,EAAEuiE,UAAYwI,GAAc8K,OAAO,IAC/C7vB,OAAM,SAAAhmD,GAAC,OAAKA,EAAEosE,OAAOhoE,QAAU0mE,GAAeuc,MAAUrnF,EAAEosE,OAAOhoE,QAAU0mE,GAAeod,WAAY,IACxG,GAAImD,EACH,OAAOrgB,GAAesgB,QAEvB,IAAMC,EAAgB/oB,EAAUC,WAC9BrG,QAAO,SAAAp8D,GAAC,OAAIA,EAAEuiE,UAAYwI,GAAc6c,IAAI,IAC5C5hC,OAAM,SAAAhmD,GAAC,OAAKA,EAAEosE,OAAOhoE,QAAU0mE,GAAeuc,MAAUrnF,EAAEosE,OAAOhoE,QAAU0mE,GAAeod,WAAY,IACxG,OAAIqD,EACIvgB,GAAewgB,OAGhBxgB,GAAeygB,MACvB,EAjyBY9E,GAmyBL+E,aAAe,SAAClpB,EAA2B3vC,GAAuC,IAAD84D,EACvF,OAAkD,QAAlDA,EAAOnpB,EAAUC,WAAW1B,MAAK,SAAA/gE,GAAC,OAAIA,EAAE6yB,KAAOA,CAAE,WAAC,IAAA84D,EAAAA,EAAI,IACvD,EAryBYhF,GAuyBLiF,QAAU,SAACppB,EAA2B3vC,GAAsC,IAADg5D,EACjF,OAA8C,QAA9CA,EAAOrpB,EAAUE,KAAK3B,MAAK,SAAA4B,GAAE,OAAIA,EAAG9vC,KAAOA,CAAE,WAAC,IAAAg5D,EAAAA,EAAI,IACnD,EAzyBYlF,GA2yBLyB,kBAAoB,SAAC5lB,EAA2Byf,GACtD,IAAMsD,EAA0B,GAE1B3K,EAAU+L,GAAeI,oBAAoBvkB,EAAWyf,GAoB9D,OAjBAzf,EAAUC,WACRrG,QAAO,SAAA6lB,GAAS,OAAIA,EAAU7V,OAAOhoE,QAAU0mE,GAAeuc,IAAI,IAClEjrB,QAAO,SAAAp8D,GAAC,OAAIA,EAAEuiE,UAAY0f,EAAU1f,OAAO,IAC3CnG,QAAO,SAAAp8D,GAAC,OAAI46E,EAAQl1B,MAAK,SAAAob,GAAE,OAAI6lB,GAAeK,wBAAwBxkB,EAAWxiE,GAAG+gE,MAAK,SAAA9/D,GAAC,OAAKA,EAAE2W,IAAMkpD,EAAGlpD,GAAO3W,EAAE4W,IAAMipD,EAAGjpD,CAAE,GAAC,GAAC,IAChI2jE,SAAQ,SAAAx7E,GAAC,OAAI8hF,GAAewD,SAASqB,GAAe+E,aAAalpB,EAAWxiE,EAAE6yB,IAAsB,IACpGupC,QAAO,SAAA8R,GAAI,OAAIE,GAAe6C,yBAAyB/C,EAAK,IAC5DzuD,SAAQ,SAAAyuD,GAAI,OAAIqX,EAAM9lF,KAAKyuE,EAAK,IAGlC1L,EAAUC,WACRrG,QAAO,SAAA6lB,GAAS,OAAIA,EAAU7V,OAAOhoE,QAAU0mE,GAAeuc,IAAI,IAClEjrB,QAAO,SAAAp8D,GAAC,OAAIA,EAAEuiE,UAAY0f,EAAU1f,OAAO,IAC3CnG,QAAO,SAAAp8D,GAAC,OAAI46E,EAAQl1B,MAAK,SAAAob,GAAE,OAAI6lB,GAAeK,wBAAwBxkB,EAAWxiE,GAAG+gE,MAAK,SAAA9/D,GAAC,OAAKA,EAAE2W,IAAMkpD,EAAGlpD,GAAO3W,EAAE4W,IAAMipD,EAAGjpD,CAAE,GAAC,GAAC,IAChI2jE,SAAQ,SAAAx7E,GAAC,OAAI8hF,GAAewD,SAASqB,GAAe+E,aAAalpB,EAAWxiE,EAAE6yB,IAAsB,IACpGupC,QAAO,SAAA8R,GAAI,OAAKE,GAAe6C,yBAAyB/C,EAAK,IAC7DzuD,SAAQ,SAAAyuD,GAAI,OAAIqX,EAAM9lF,KAAKyuE,EAAK,IAE3BqX,CACR,EAn0BYoB,GAu0BLqB,oBAAsB,SAACxlB,GAC7B,OAAOA,EAAUC,WACfrG,QAAO,SAAAp8D,GAAC,OAAIA,EAAEosE,OAAOhoE,QAAU0mE,GAAeuc,IAAI,IAClDjrB,QAAO,SAAAp8D,GAAC,OAAIA,EAAEosE,OAAOM,aAAevlB,OAAOqV,SAAS,GACvD,EA30BYmqB,GA60BLmF,mBAAqB,SAACtpB,GAC5B,OAAOA,EAAUC,WACfrG,QAAO,SAAAp8D,GAAC,OAAIA,EAAEosE,OAAOhoE,QAAU0mE,GAAeuc,IAAI,IAClDjrB,QAAO,SAAAp8D,GAAC,OAAIA,EAAEosE,OAAOM,aAAevlB,OAAOqV,SAAS,GACvD,EAj1BYmqB,GAm1BLoF,kBAAoB,SAACvpB,GAC3B,OAAOA,EAAUC,WACfrG,QAAO,SAAAp8D,GAAC,OAAIA,EAAEosE,OAAOhoE,QAAU0mE,GAAeuc,IAAI,GACrD,EAt1BYV,GA01BL7B,aAAe,SAACtiB,EAA2Byf,EAA2BzU,GAC5E,IAAMV,EAAc,GAClBl0D,OAAOqpE,EAAU7V,OAAOU,YACxBl0D,OAAO+tE,GAAeyB,kBAAkB5lB,EAAWyf,IACrD,OAAOH,GAAegD,aAAa7C,EAAWnV,EAAYU,EAC3D,EA/1BYmZ,GAi2BL5B,aAAe,SAACviB,EAA2Byf,EAA2BrU,GAC5E,IAAMd,EAAc,GAClBl0D,OAAOqpE,EAAU7V,OAAOU,YACxBl0D,OAAO+tE,GAAeyB,kBAAkB5lB,EAAWyf,IACrD,OAAOH,GAAeiD,aAAa9C,EAAWnV,EAAYc,EAC3D,EAt2BY+Y,GAw2BLzB,eAAiB,SAAC1iB,EAA2Byf,EAA2BzV,GAC9E,IAAMM,EAAc,GAClBl0D,OAAOqpE,EAAU7V,OAAOU,YACxBl0D,OAAO+tE,GAAeyB,kBAAkB5lB,EAAWyf,IACrD,OAAOH,GAAeoD,eAAejD,EAAWnV,EAAYN,EAC7D,EA72BYma,GA+2BLvB,oBAAsB,SAAC5iB,EAA2Byf,EAA2BzV,GACnF,IAAMM,EAAc,GAClBl0D,OAAOqpE,EAAU7V,OAAOU,YACxBl0D,OAAO+tE,GAAeyB,kBAAkB5lB,EAAWyf,IACrD,OAAOH,GAAesD,oBAAoBnD,EAAWnV,EAAYN,EAClE,EAp3BYma,GAw3BLqF,eAAiB,SAACxpB,EAA2BypB,EAA2CC,GAC9F,OAAO1pB,EAAUC,WAAWrG,QAAO,SAAA6lB,GAClC,IAAMkK,EAAcxF,GAAeI,oBAAoBvkB,EAAWyf,GAElE,OADiBvH,GAAkBU,eAAe6Q,EAAeE,IAC7CD,CACrB,GACD,EA93BYvF,GAg4BLyF,YAAc,SAAC5pB,EAA2BypB,EAA2CC,GAC3F,OAAO1pB,EAAU8kB,WAAWlrB,QAAO,SAAA4E,GAElC,OADiB0Z,GAAkBU,eAAe6Q,EAAe,CAAEjrB,KAC/CkrB,CACrB,GACD,EAr4BYvF,GAu4BL0F,UAAY,SAAC7pB,EAA2BypB,EAA2CC,GACzF,OAAOxR,GAAkBM,iBAAiBxY,EAAU8kB,WAAY9kB,EAAU8kB,YAAYlrB,QAAO,SAAAsD,GAE5F,OADiBgb,GAAkBU,eAAe6Q,EAAe,CAAEvsB,KAC/CwsB,CACrB,GACD,ECr5BM,IAAMI,GAAkB1yB,GAAA,SAAA0yB,IAAA3lF,EAAA,KAAA2lF,EAAA,IAuM9BtyB,GAvMYsyB,GAAAA,GACLC,gBAAkB,SAACC,EAAqBlqB,EAA0BF,GA4BxE,IA5B+G,IAADupB,EAAAc,EACxG7xB,EAAO4xB,EAAO1pB,WAAW,GACzB5I,EAAMH,EAAOY,aAAaC,GAE1B4H,EAA4B,CACjCkqB,SAAUF,EAAO35D,GACjB20D,MAAO,EACP/kB,WAAUmB,EAAOtB,GACjBI,KAAM,GACN4kB,WAAYvK,GAAsBC,qBAAqB9iB,IAGlDyyB,EAA6B,GAC7BC,EAAa,SAAC/gB,EAAmBC,EAAgBC,GAGtD,IAFA,IAAM8gB,EAAU9yB,EAAOE,KAAK,EAAGC,GAAO,GAChCrqD,EAAQg9E,EAAU,EAAI,EACnB9rF,EAAI,EAAGA,EAAI8O,IAAS9O,EAAG,CAC/B,IAAM+rF,EAAUnhB,GAAQC,gBAAgBb,GAAc8K,SAClDgX,GACHC,EAAQ7gB,OAAOxsE,KAAKi2E,GAAU2U,OAE/BvI,GAAeE,oBAAoB8K,EAASjhB,EAAWC,EAAQC,GAC/D+V,GAAeU,mBAAmBsK,GAClChL,GAAeqB,SAAS2J,EAAS1qB,GACjCuqB,EAASltF,KAAKqtF,EACf,CACD,EAEOzxB,EAAYgB,IAAIswB,GAAU,SAAAhtF,GAAC,OAAIA,EAAEg+D,KAAK,IAAItC,EAAYgB,IAAIiG,GAAQ,SAAAngD,GAAC,OAAIA,EAAEw7C,KAAK,KACpF,OAAQ5D,EAAOO,aAAa,GAAIJ,IAC/B,KAAK,EAEJ,GAAIyyB,EAAS1vF,OAA0B,EAAhBqlE,EAAOrlE,OAAa,CAC1C,IAAM8vF,EAAaC,GAAiBC,YAAYT,EAAQpqB,GAASvb,KAAI,SAAA5lD,GAAC,OAAIA,EAAE4xB,EAAE,IACxEg5C,EAAYxQ,EAAYY,KAAK8wB,EAAY7yB,GACzC4R,EAASzQ,EAAYY,KAAKkV,GAAU+b,YAAY9qB,GAASvb,KAAI,SAAA7lD,GAAC,OAAIA,EAAE6xB,EAAE,IAAGqnC,GACzE6R,EAAe1Q,EAAYY,KAAKkV,GAAUgc,kBAAkB/qB,GAASvb,KAAI,SAAA7oC,GAAC,OAAIA,EAAE6U,EAAE,IAAGqnC,GAC3F0yB,EAAW/gB,EAAWC,EAAQC,EAC/B,CACA,MAED,KAAK,EAEJ,GAAK4gB,EAAS1vF,OAAS,GAAO0vF,EAAS1vF,OAA0B,EAAhBqlE,EAAOrlE,OAAc,CACrE,IACM4uE,EADWxQ,EAAYY,KAAK0wB,EAAUzyB,GACjB2R,UACrBC,EAASzQ,EAAYY,KAAKkV,GAAU+b,YAAY9qB,GAASvb,KAAI,SAAA7lD,GAAC,OAAIA,EAAE6xB,EAAE,IAAGqnC,GACzE6R,EAAe1Q,EAAYY,KAAKkV,GAAUgc,kBAAkB/qB,GAASvb,KAAI,SAAA7oC,GAAC,OAAIA,EAAE6U,EAAE,IAAGqnC,GAC3F0yB,EAAW/gB,EAAWC,EAAQC,EAC/B,CACA,MAED,KAAK,EACL,KAAK,EAEJ,GAAK4gB,EAAS1vF,OAAS,GAAO0vF,EAAS1vF,OAA0B,EAAhBqlE,EAAOrlE,OAAc,CACrE,IAAMuoF,EAAWnqB,EAAYY,KAAK0wB,EAAUzyB,GACtC2R,EAAY2Z,EAAS3Z,UACrBC,EAAS0Z,EAAS1Z,OAClBC,EAAe1Q,EAAYY,KAAKkV,GAAUgc,kBAAkB/qB,GAASvb,KAAI,SAAA7oC,GAAC,OAAIA,EAAE6U,EAAE,IAAGqnC,GAC3F0yB,EAAW/gB,EAAWC,EAAQC,EAC/B,CACA,MAED,KAAK,EACL,KAAK,EACL,KAAK,EACL,KAAK,EACL,KAAK,EACL,KAAK,EAEJ,GAAI4gB,EAAS1vF,OAAS,EAAG,CACxB,IAAM6vF,EAAUzxB,EAAYY,KAAK0wB,EAAUzyB,GACrCkzB,EAActL,GAAe+B,eAAeiJ,GAAS1wB,QAAO,SAAAh7D,GAAC,OAAIA,EAAEhB,OAASsrE,GAAYsG,WAAW,IACzG8P,GAAeS,wBAAwBuK,EAASzxB,EAAYY,KAAKmxB,GAAchrB,GAC/E0f,GAAeU,mBAAmBsK,EACnC,EAMH,IAAMO,EAAuB,GAC7BV,EAASltE,SAAQ,SAAAqtE,GAChB,IAAKO,EAAWt1E,SAAS+0E,EAAQj6D,IAAK,CACrC,IAAMy6D,EAAaX,EAASvwB,QAAO,SAAAz8D,GAAC,OAAIA,EAAE1D,OAAS6wF,EAAQ7wF,IAAI,IAC/D,GAAIqxF,EAAWrwF,OAAS,EAAG,CAC1B,IAAI8D,EAAI,EACRusF,EAAW7tE,SAAQ,SAAA9f,GAClBA,EAAE1D,KAAI,GAAA2c,OAAMjZ,EAAE1D,KAAI,KAAA2c,OAAI7X,GACtBA,GAAK,CACN,GACD,CACAssF,EAAW5tF,KAAI6F,MAAf+nF,EAAUzpB,EAAS0pB,EAAWzmC,KAAI,SAAAlnD,GAAC,OAAIA,EAAEkzB,EAAE,KAC5C,CACD,IAEA85D,EAASltE,SAAQ,SAAA9f,GAAC,OAAImiF,GAAe8C,eAAejlF,EAAE,KACtDgsF,EAAAnpB,EAAUC,YAAWhjE,KAAI6F,MAAAqmF,EAAIgB,GAE7BL,GAAmBiB,gBAAgB/qB,EAAWtI,GAE9C,IAAMwI,EAAwB,GAC9B,GAAoC,IAAhC3I,EAAOO,aAAa,EAAGJ,GAAY,CACtC,IAAMyI,EAAKgJ,GAAQwC,iBACnB,GAAoC,IAAhCpU,EAAOO,aAAa,EAAGJ,GAC1ByI,EAAGuJ,MAAMzsE,KAAKs/E,GAAmBK,wBAAwBhd,QACnD,CACN,IAAMnF,EAAUkU,GAAUqc,cAAcprB,GAClCltD,EAAOmmD,EAAYY,KAAKgB,GAC9B/nD,EAAK2d,GAAKssC,EAAMC,OAChBuD,EAAGuJ,MAAMzsE,KAAKyV,EACf,CAEA,IAAM8rD,EAAS3F,EAAYY,KAAKuG,EAAU8kB,WAAWlrB,QAAO,SAAAp8D,GAAC,OAAIA,EAAEI,OAAS85E,GAAuByD,KAAK,IAAGzjB,GAC3GyI,EAAGpkE,SAASqZ,EAAIopD,EAAOppD,EACvB+qD,EAAGpkE,SAASsZ,EAAImpD,EAAOnpD,EAEvB6qD,EAAKjjE,KAAKkjE,EACX,CAGA,OAFA8pB,EAAAjqB,EAAUE,MAAKjjE,KAAI6F,MAAAmnF,EAAI/pB,GAEhBF,CACR,EA5HY8pB,GA8HLiB,gBAAkB,SAAC/qB,EAA2BtI,GACpDsI,EAAUC,WAAWhjD,SAAQ,SAAAwiE,GAC5B,GAAKA,EAAU7V,OAAO7tE,SAASqZ,IAAMuvC,OAAOqV,WAAeylB,EAAU7V,OAAO7tE,SAASsZ,IAAMsvC,OAAOqV,gBAGjG,IAAK,IAAIx/D,EAAI,EAAGA,EAAI,MAAQA,EAAG,CAI9B,IAHA,IAAMgkE,EAAS3F,EAAYY,KAAKuG,EAAU8kB,WAAYptB,GAEhD0gB,EAAU,GACPhjE,EAAIopD,EAAOppD,EAAGA,GAAKopD,EAAOppD,EAAIqqE,EAAUxtE,KAAO,IAAKmD,EAC5D,IAAK,IAAIC,EAAImpD,EAAOnpD,EAAGA,GAAKmpD,EAAOnpD,EAAIoqE,EAAUxtE,KAAO,IAAKoD,EAC5D+iE,EAAQn7E,KAAK,CAAEmY,EAAGA,EAAGC,EAAGA,IAK1B,GADiB+iE,EAAQ50B,OAAM,SAAA8a,GAAE,OAAIwrB,GAAmBmB,aAAajrB,EAAW1B,EAAG,IACrE,CACbmhB,EAAU7V,OAAO7tE,SAASqZ,EAAIopD,EAAOppD,EACrCqqE,EAAU7V,OAAO7tE,SAASsZ,EAAImpD,EAAOnpD,EACrC,KACD,CACD,CAEF,IAGA2qD,EAAUC,WAAaD,EAAUC,WAAWrG,QAAO,SAAAp8D,GAAC,OAAKA,EAAEosE,OAAO7tE,SAASqZ,IAAMuvC,OAAOqV,WAAex8D,EAAEosE,OAAO7tE,SAASsZ,IAAMsvC,OAAOqV,SAAU,GACjJ,EAzJY8vB,GA2JLoB,UAAY,SAAClrB,EAA2BtI,GAC9CsI,EAAUE,KAAKjjD,SAAQ,SAAAkjD,GACtB,GAAKA,EAAGpkE,SAASqZ,IAAMuvC,OAAOqV,WAAemG,EAAGpkE,SAASsZ,IAAMsvC,OAAOqV,gBAGrE,IAAK,IAAIx/D,EAAI,EAAGA,EAAI,MAAQA,EAAG,CAC9B,IAAMgkE,EAAS3F,EAAYY,KAAKuG,EAAU8kB,WAAYptB,GACtD,GAAIoyB,GAAmBmB,aAAajrB,EAAWxB,GAAS,CACvD2B,EAAGpkE,SAASqZ,EAAIopD,EAAOppD,EACvB+qD,EAAGpkE,SAASsZ,EAAImpD,EAAOnpD,EACvB,KACD,CACD,CAEF,IAGA2qD,EAAUC,WAAaD,EAAUC,WAAWrG,QAAO,SAAAp8D,GAAC,OAAKA,EAAEosE,OAAO7tE,SAASqZ,IAAMuvC,OAAOqV,WAAex8D,EAAEosE,OAAO7tE,SAASsZ,IAAMsvC,OAAOqV,SAAU,GACjJ,EA7KY8vB,GA+KLmB,aAAe,SAACjrB,EAA2BxB,GACjD,IAAMma,EAAY3Y,EAAU8kB,WAAWvmB,MAAK,SAAA4oB,GAAE,OAAKA,EAAG/xE,IAAMopD,EAAOppD,GAAO+xE,EAAG9xE,IAAMmpD,EAAOnpD,CAAE,IAE5F,IAAKsjE,EAEJ,OAAO,EAGR,GAAIA,EAAU/6E,OAAS85E,GAAuByD,MAE7C,OAAO,EAGR,IAAMgQ,EAA8C,GAIpD,OAHAnrB,EAAUC,WAAWhjD,SAAQ,SAAAwiE,GAAS,OAAI0L,EAAgBluF,KAAI6F,MAApBqoF,EAAe/pB,EAAS+iB,GAAeI,oBAAoBvkB,EAAWyf,IAAW,IAC3Hzf,EAAUE,KAAKjjD,SAAQ,SAAAkjD,GAAE,OAAIgrB,EAAgBluF,KAAKkjE,EAAGpkE,SAAS,KAE1DovF,EAAgB5sB,MAAK,SAAA8oB,GAAE,OAAKA,EAAGjyE,IAAMopD,EAAOppD,GAAOiyE,EAAGhyE,IAAMmpD,EAAOnpD,CAAE,GAM1E,ECzNM,OAAM+1E,GAAWh0B,GAAA,SAAAg0B,IAAAjnF,EAAA,KAAAinF,EAAA,IAAXA,GACLnD,QAAU,WAChB,MAAO,CACN53D,GAAI,UACJvwB,KAAM,KAER,EANYsrF,GAQL97B,KAAO,WACb,MAAO,CACNj/B,GAAI,OACJvwB,KAAM,KAER,EAbYsrF,GAeLhD,KAAO,WACb,MAAO,CACN/3D,GAAI,OACJvwB,KAAM,KAER,EApBYsrF,GAsBL7D,KAAO,SAACtM,GACd,MAAO,CACN5qD,GAAI,OACJvwB,KAAMm7E,EAER,EA3BYmQ,GA6BL38C,OAAS,SAACA,GAChB,MAAO,CACNpe,GAAI,SACJvwB,KAAM2uC,EAER,EC/BM,OAAM48C,GAASj0B,GAAA,SAAAi0B,IAAAlnF,EAAA,KAAAknF,EAAA,IA4ErB7zB,GA5EY6zB,GAAAA,GACLC,UAAY,SAACtrB,EAA2Byf,GAW9C,IAVA,IAAM8L,EAAqB,CAC1B,CACCn2E,EAAGqqE,EAAU7V,OAAO7tE,SAASqZ,EAC7BC,EAAGoqE,EAAU7V,OAAO7tE,SAASsZ,EAC7Bm2E,MAAO,GACPpE,KAAM,EACNqE,SAAS,IAIJF,EAAM3xB,QAAO,SAAA3pD,GAAC,OAAIA,EAAEw7E,OAAO,IAAEhxF,OAAS,GAC5C4wF,GAAUK,UAAU1rB,EAAWyf,EAAW8L,GAG3C,OAAOA,EAAM3xB,QAAO,SAAA+xB,GAAI,OAAIA,EAAKvE,MAAQ3H,EAAU7V,OAAOO,QAAQ,GACnE,EAjBYkhB,GAmBLK,UAAY,SAAC1rB,EAA2Byf,EAA2B8L,GACzE,IAAMK,EAAaL,EAAM3xB,QAAO,SAAA+xB,GAAI,OAAIA,EAAKF,OAAO,IAAE7xB,QAAO,SAAA+xB,GAAI,OAAIA,EAAKvE,MAAQ3H,EAAU7V,OAAOO,QAAQ,IAC3GohB,EAAMtuE,SAAQ,SAAA0uE,GAAI,OAAIA,EAAKF,SAAU,CAAK,IAE1CG,EAAW3uE,SAAQ,SAAA0uE,GAClB,CAAE,IAAK,KAAM,IAAK,KAAM,IAAK,KAAM,IAAK,MAAO1uE,SAAQ,SAAAg+D,GACtD,IAAMv9E,EAAM,CAAE0X,EAAGu2E,EAAKv2E,EAAGC,EAAGs2E,EAAKt2E,GACjC,OAAQ4lE,GACP,IAAK,IACJv9E,EAAI2X,GAAK,EACT,MACD,IAAK,KACJ3X,EAAI0X,GAAK,EACT1X,EAAI2X,GAAK,EACT,MACD,IAAK,IACJ3X,EAAI0X,GAAK,EACT,MACD,IAAK,KACJ1X,EAAI0X,GAAK,EACT1X,EAAI2X,GAAK,EACT,MACD,IAAK,IACJ3X,EAAI2X,GAAK,EACT,MACD,IAAK,KACJ3X,EAAI0X,GAAK,EACT1X,EAAI2X,GAAK,EACT,MACD,IAAK,IACJ3X,EAAI0X,GAAK,EACT,MACD,IAAK,KACJ1X,EAAI0X,GAAK,EACT1X,EAAI2X,GAAK,EAGX,IAAM+xE,EAAOjD,GAAe0C,YAAY7mB,EAAWyf,EAAW,CAAErqE,EAAGu2E,EAAKv2E,EAAGC,EAAGs2E,EAAKt2E,GAAK4lE,GAClF4Q,EAAaN,EAAMhtB,MAAK,SAAAtuD,GAAC,OAAKA,EAAEmF,IAAM1X,EAAI0X,GAAOnF,EAAEoF,IAAM3X,EAAI2X,CAAE,IACrE,IAAKw2E,GACAzE,IAASziC,OAAOoV,UAAW,CAC9B,IAAM+xB,EAAU,CACf12E,EAAG1X,EAAI0X,EACPC,EAAG3X,EAAI2X,EACPm2E,MAAO36E,KAAKG,MAAMH,KAAKC,UAAU66E,EAAKH,QACtCpE,KAAMuE,EAAKvE,KAAOA,EAClBqE,SAAS,GAEVK,EAAQN,MAAMvuF,KAAKg+E,GACf6Q,EAAQ1E,MAAQ3H,EAAU7V,OAAOO,UACpCohB,EAAMtuF,KAAK6uF,EAEb,CAEF,GACD,GACD,EC3DM,UAAMC,GAAY30B,GAAA,SAAA20B,IAAA5nF,EAAA,KAAA4nF,EAAA,IAsXxBv0B,GAtXYu0B,GAAAA,GACLC,WAAa,SAAChsB,EAA2Byf,GAC/C,IAAM8L,EAAQF,GAAUC,UAAUtrB,EAAWyf,GACvC9F,EAAQzB,GAAkBkC,YAAYpa,EAAU8kB,YAEhDtrF,EAA0B,GAE3BimF,EAAU7V,OAAOY,gBACrBiV,EAAU7V,OAAOW,QACf3Q,QAAO,SAAAr+C,GAAC,OAAIA,EAAEi2D,cAAchuB,OAAM,SAAAvzC,GAAC,OAAIwhE,GAAoBwa,YAAYh8E,EAAGwvE,EAAU,GAAC,IACrFxiE,SAAQ,SAAAwxB,GACRA,EAAOkjC,WAAW10D,SAAQ,SAAAqK,GACzB,GAAiB,YAAbA,EAAM+I,GAAkB,CAC3B,IAAM67D,EAAc5kE,EACpB,GAA4B,OAAxB4kE,EAAYC,QACf3yF,EAAQyD,KAAK,CACZ+U,YAAay8B,EAAOh1C,KACpBgxE,QAAS,CAAE2gB,GAAY38C,OAAOA,IAC9B29C,OAAQ,SAGT,OAAQF,EAAYC,QAAQvuF,MAC3B,KAAKkrE,GAAiBkJ,QACtB,KAAKlJ,GAAiBoL,WACrB16E,EAAQyD,KAAI6F,MAAZtJ,EAAO4nE,EAAS2qB,GAAaM,0BAA0BrsB,EAAWyf,EAAWhxC,EAAQ85B,GAAc6c,KAAMmG,EAAO5R,KAChH,MACD,KAAK7Q,GAAiB6N,OACrBn9E,EAAQyD,KAAI6F,MAAZtJ,EAAO4nE,EAAS2qB,GAAaM,0BAA0BrsB,EAAWyf,EAAWhxC,EAAQ85B,GAAc8K,QAASkY,EAAO5R,KACnH,MACD,KAAK7Q,GAAiBwjB,QACrB9yF,EAAQyD,KAAI6F,MAAZtJ,EAAO4nE,EAAS2qB,GAAaQ,uBAAuBvsB,EAAWyf,EAAWhxC,EAAQ88C,EAAO5R,KACzF,MACD,KAAK7Q,GAAiB0jB,MACrBhzF,EAAQyD,KAAI6F,MAAZtJ,EAAO4nE,EAAS2qB,GAAaU,qBAAqBzsB,EAAWyf,EAAWhxC,EAAQ88C,KAIpF,CACD,GACD,IAGF/xF,EAAQyD,KAAI6F,MAAZtJ,EAAO4nE,EAAS2qB,GAAaW,mBAAmB1sB,EAAWyf,EAAW8L,KACtE/xF,EAAQyD,KAAI6F,MAAZtJ,EAAO4nE,EAAS2qB,GAAaY,iBAAiB3sB,EAAWyf,KAEzD,IAAMmN,EAAWzI,GAAe5B,aAAaviB,EAAWyf,EAAWzW,GAAUmL,UACvE0Y,EAAoB7sB,EAAUC,WAClCrG,QAAO,SAAAp8D,GAAC,OAAIA,EAAEuiE,UAAY0f,EAAU1f,OAAO,IAC3CnG,QAAO,SAAAsuB,GAAI,OAAIA,EAAKte,OAAOE,OAAO,IAClC5mB,MAAK,SAAAglC,GAAI,OAAIhQ,GAAkBwB,UAAUC,EAAOwK,GAAeI,oBAAoBvkB,EAAWyf,GAAY0E,GAAeI,oBAAoBvkB,EAAWkoB,GAAM,IAC3J0E,EAAW,GAAOnN,EAAU7V,OAAOO,UAAY,GAAM0iB,GACzDrzF,EAAQyD,KAAK,CACZ+U,YAAa,UACby4D,QAAS,CAAE2gB,GAAYnD,WACvBmE,OAAQQ,IAIV,IAAME,EAAa3I,GAAe5B,aAAaviB,EAAWyf,EAAWzW,GAAUiX,YAC1E6M,EAAa,GAAOrN,EAAU7V,OAAOO,UAAY,GACrD3wE,EAAQyD,KAAK,CACZ+U,YAAa,OACby4D,QAAS,CAAE2gB,GAAY97B,QACvB88B,OAAQU,IAIV,IAAMC,EAAU5I,GAAe5B,aAAaviB,EAAWyf,EAAWzW,GAAUwL,SAS5E,OARKuY,EAAU,GAAmC,IAA5BtN,EAAU7V,OAAOS,QAAkBoV,EAAU7V,OAAOO,UAAY,GACrF3wE,EAAQyD,KAAK,CACZ+U,YAAa,OACby4D,QAAS,CAAE2gB,GAAYhD,QACvBgE,OAAQW,IAIHl0B,EAAYjB,IAAIp+D,GAAS,SAAAkF,GAAC,OAAI64D,EAAOE,KAAK/4D,EAAE0tF,OAAO,GAC3D,EA7EYL,GA+ELM,0BAA4B,SAACrsB,EAA2Byf,EAA2BhxC,EAAqBsxB,EAAwBwrB,EAAoB5R,GAC1J,IAAM5gD,EAAQutD,GAAY0G,eAAev+C,EAAQgxC,GAE3ChV,EAA0B,GAsChC,OApCAzK,EAAUC,WACRrG,QAAO,SAAAp8D,GAAC,OAAIA,EAAEuiE,UAAYA,CAAO,IACjCnG,QAAO,SAAAp8D,GAAC,OAAIiiF,EAAU7V,OAAOQ,QAAU5sE,EAAEosE,OAAOS,MAAM,IACtDzQ,QAAO,SAAAp8D,GAAC,OAAKA,EAAEosE,OAAOhoE,QAAU0mE,GAAeod,aAAiBloF,EAAEosE,OAAOhoE,QAAU0mE,GAAeuc,IAAK,IACvG5nE,SAAQ,SAAA1jB,GACR,IAAM0zF,EAAgB9I,GAAeI,oBAAoBvkB,EAAWzmE,GAC9D2zF,EAAiBltB,EAAU8kB,WAC/BlrB,QAAO,SAAA0E,GAAE,OAAI4Z,GAAkBwB,UAAUC,EAAOsT,EAAe,CAAE3uB,GAAK,IACtE1E,QAAO,SAAA0E,GAEP,OAAO4Z,GAAkBU,eAAeqU,EAAe,CAAE3uB,KAASvlC,CACnE,IACCsrB,KAAI,SAAAia,GAEJ,OAAOitB,EAAMhtB,MAAK,SAAAotB,GAAI,OAAKrtB,EAAGlpD,IAAMu2E,EAAKv2E,GAAOkpD,EAAGjpD,IAAMs2E,EAAKt2E,CAAE,KAAK,IACtE,IACCukD,QAAO,SAAA3pD,GAGP,OADaA,EAAIA,EAAEm3E,KAAOziC,OAAOoV,YAClB0lB,EAAU7V,OAAOO,QACjC,IACD,GAAI+iB,EAAezyF,OAAS,EAAG,CAC9B,IAAMkxF,EAAO9yB,EAAY58B,IAAIixD,GAAgB,SAAAj9E,GAAC,OAAK,OAADA,QAAC,IAADA,OAAC,EAADA,EAAGm3E,OAAQziC,OAAOoV,SAAS,IACzE4xB,GACHlhB,EAAQxtE,KAAK,CACZ+U,YAAay8B,EAAOh1C,KACpBgxE,QAAQ,GAADr0D,OAAAgrD,EACHuqB,EAAKH,MAAMnnC,KAAI,SAAAqF,GAAI,OAAI0hC,GAAY7D,KAAK79B,EAAK,KAAC,CACjD0hC,GAAY38C,OAAOA,KAEpB29C,OAA8C,WAAtC9F,GAAY6G,cAAc1+C,GAAuB,EAAI,GAGhE,CACD,IAEMg8B,CACR,EAzHYshB,GA2HLQ,uBAAyB,SAACvsB,EAA2Byf,EAA2BhxC,EAAqB88C,EAAoB5R,GAC/H,IAAM5gD,EAAQutD,GAAY0G,eAAev+C,EAAQgxC,GAE3ChV,EAA0B,GA8DhC,OA5DAzK,EAAU8kB,WACR7nE,SAAQ,SAAAmwE,GACR,IAAMF,EAAiBltB,EAAU8kB,WAC/BlrB,QAAO,SAAA0E,GAAE,OAAI4Z,GAAkB0B,OAAOD,EAAOyT,EAAc9uB,EAAG,IAC9D1E,QAAO,SAAA0E,GAEP,OAAO4Z,GAAkBe,YAAYmU,EAAc9uB,IAAOvlC,CAC3D,IACCsrB,KAAI,SAAAia,GAEJ,OAAOitB,EAAMhtB,MAAK,SAAAotB,GAAI,OAAKrtB,EAAGlpD,IAAMu2E,EAAKv2E,GAAOkpD,EAAGjpD,IAAMs2E,EAAKt2E,CAAE,KAAK,IACtE,IACCukD,QAAO,SAAA3pD,GAGP,OADaA,EAAIA,EAAEm3E,KAAOziC,OAAOoV,YAClB0lB,EAAU7V,OAAOO,QACjC,IACD,GAAI+iB,EAAezyF,OAAS,EAAG,CAC9B,IAAMkxF,EAAO9yB,EAAY58B,IAAIixD,GAAgB,SAAAj9E,GAAC,OAAK,OAADA,QAAC,IAADA,OAAC,EAADA,EAAGm3E,OAAQziC,OAAOoV,SAAS,IAC7E,GAAI4xB,EAAM,CACT,IAAIS,EAAS,EACP9kE,EAAQmnB,EAAOkjC,WAAWpT,MAAK,SAAAtuD,GAAC,MAAa,YAATA,EAAEogB,EAAgB,IAC5D,GAAI/I,EAAO,CACV,IAAM4kE,EAAc5kE,EACpB,GAAI4kE,EAAYC,QACf,OAAQD,EAAYC,QAAQvuF,MAC3B,KAAKkrE,GAAiB6N,OACrByV,EAASpsB,EAAUC,WACjBrG,QAAO,SAAAp8D,GAAC,OAAIA,EAAEuiE,UAAYwI,GAAc8K,OAAO,IAC/CzZ,QAAO,SAAAp8D,GAEP,OADa06E,GAAkBU,eAAeuL,GAAeI,oBAAoBvkB,EAAWxiE,GAAI,CAAE4vF,KACnFlB,EAAYnzD,MAAM2wD,MAClC,IACCjvF,OACF,MACD,KAAKquE,GAAiBoL,WACtB,KAAKpL,GAAiBkJ,QACrBoa,EAASpsB,EAAUC,WACjBrG,QAAO,SAAAp8D,GAAC,OAAIA,EAAEuiE,UAAYwI,GAAc6c,IAAI,IAC5CxrB,QAAO,SAAAp8D,GAEP,OADa06E,GAAkBU,eAAeuL,GAAeI,oBAAoBvkB,EAAWxiE,GAAI,CAAE4vF,KACnFlB,EAAYnzD,MAAM2wD,MAClC,IACCjvF,OAIN,CACAgwE,EAAQxtE,KAAK,CACZ+U,YAAay8B,EAAOh1C,KACpBgxE,QAAQ,GAADr0D,OAAAgrD,EACHuqB,EAAKH,MAAMnnC,KAAI,SAAAqF,GAAI,OAAI0hC,GAAY7D,KAAK79B,EAAK,KAAC,CACjD0hC,GAAY38C,OAAOA,KAEpB29C,OAAQA,GAEV,CACD,CACD,IAEM3hB,CACR,EA7LYshB,GA+LLU,qBAAuB,SAACzsB,EAA2Byf,EAA2BhxC,EAAqB88C,GACzG,IAAMxyD,EAAQutD,GAAY0G,eAAev+C,EAAQgxC,GAE3ChV,EAA0B,GAiChC,OA/BA5R,EAAYa,SAASwe,GAAkBM,iBAAiBxY,EAAU8kB,WAAY9kB,EAAU8kB,aAAa,SAAAxmB,GAAE,SAAAloD,OAAOkoD,EAAGlpD,EAAC,KAAAgB,OAAIkoD,EAAGjpD,EAAC,IACxH4H,SAAQ,SAAAowE,GACR,IAAMH,EAAiBltB,EAAU8kB,WAC/BlrB,QAAO,SAAA0E,GAEP,OAAO4Z,GAAkBe,YAAYoU,EAAY/uB,IAAOvlC,CACzD,IACCsrB,KAAI,SAAAia,GAEJ,OAAOitB,EAAMhtB,MAAK,SAAAotB,GAAI,OAAKrtB,EAAGlpD,IAAMu2E,EAAKv2E,GAAOkpD,EAAGjpD,IAAMs2E,EAAKt2E,CAAE,KAAK,IACtE,IACCukD,QAAO,SAAA3pD,GAGP,OADaA,EAAIA,EAAEm3E,KAAOziC,OAAOoV,YAClB0lB,EAAU7V,OAAOO,QACjC,IACD,GAAI+iB,EAAezyF,OAAS,EAAG,CAC9B,IAAMkxF,EAAO9yB,EAAY58B,IAAIixD,GAAgB,SAAAj9E,GAAC,OAAK,OAADA,QAAC,IAADA,OAAC,EAADA,EAAGm3E,OAAQziC,OAAOoV,SAAS,IACzE4xB,GACHlhB,EAAQxtE,KAAK,CACZ+U,YAAay8B,EAAOh1C,KACpBgxE,QAAQ,GAADr0D,OAAAgrD,EACHuqB,EAAKH,MAAMnnC,KAAI,SAAAqF,GAAI,OAAI0hC,GAAY7D,KAAK79B,EAAK,KAAC,CACjD0hC,GAAY38C,OAAOA,KAEpB29C,OAAQ,GAGX,CACD,IAEM3hB,CACR,EApOYshB,GAsOLY,iBAAmB,SAAC3sB,EAA2Byf,GAAsD,IAA3B2G,EAAa7rF,UAAAE,OAAA,QAAAuR,IAAAzR,UAAA,IAAAA,UAAA,GACvFkwE,EAA0B,GAkChC,OAhCKgV,EAAU7V,OAAOY,gBACrBiV,EAAU7V,OAAOW,QACf3Q,QAAO,SAAAnrB,GAAM,MAA0C,WAAtC63C,GAAY6G,cAAc1+C,EAAoB,IAC/DxxB,SAAQ,SAAAwxB,GACR,IAAM6+C,EAAmB7+C,EAAO+iC,cAAchuB,OAAM,SAAA+pC,GAAY,OAAI9b,GAAoBwa,YAAYsB,EAAc9N,EAAU,IACtH+N,EAAgB/+C,EAAOkjC,WAAWnuB,OAAM,SAAAl8B,GAC7C,OAAQA,EAAM+I,IACb,IAAK,SACJ,OAAQ/I,EAAM1tB,MAAaa,OAAS,EACrC,IAAK,UACJ,IACM0xF,EADY7kE,EAAM1tB,MACEyqD,KAAI,SAAAh0B,GAAE,OAAI8zD,GAAe+E,aAAalpB,EAAW3vC,EAAG,IACxEo9D,EAAStB,EAAQvyB,QAAO,SAAAt7D,GAAC,OAAW,OAANA,IAAgB8nF,EAAiB9nF,EAAEyhE,UAAY0f,EAAU1f,QAAYzhE,EAAEyhE,UAAY0f,EAAU1f,QAAS,IACpI2tB,EAAUvB,EAAQvyB,QAAO,SAAAt7D,GAAC,OAAW,OAANA,IAAgB8nF,EAAiB9nF,EAAEyhE,UAAY0f,EAAU1f,QAAYzhE,EAAEyhE,UAAY0f,EAAU1f,QAAS,IAC3I,OAAO2tB,EAAQjzF,OAASgzF,EAAOhzF,OAIjC,OAAuB,OAAhB6sB,EAAM1tB,KACd,IACI0zF,GAAoBE,GACvB/iB,EAAQxtE,KAAK,CACZ+U,YAAay8B,EAAOh1C,KACpBgxE,QAAS,CACR2gB,GAAY38C,OAAOA,IAEpB29C,OAAQ,GAGX,IAGK3hB,CACR,EA1QYshB,GA4QLW,mBAAqB,SAAC1sB,EAA2Byf,EAA2B8L,GAClF,IAAMoC,EAAYpC,EAAM3xB,QAAO,SAAA3pD,GAAC,OAAIA,EAAEm3E,KAAO,CAAC,IAC9C,GAAyB,IAArBuG,EAAUlzF,OACb,MAAO,GAGR,IAAMgwE,EAA0B,GAE1BmjB,EAAY5hE,KAAK4rC,IAAIusB,GAAe7B,aAAatiB,EAAWyf,EAAW5W,GAAU2K,SAAW,EAAG,GACrG,GAAKiM,EAAU7V,OAAOI,OAAS,GAAOyV,EAAU7V,OAAOK,QAAU2jB,EAAY,CAE5E,IAAMjC,EAAO9yB,EAAYjB,IAAI+1B,GAAW,SAAA19E,GACvC,IAAM8oE,EAAY/Y,EAAUC,WAC1BrG,QAAO,SAAAp8D,GAAC,OAAIA,EAAEuiE,UAAY0f,EAAU1f,OAAO,IAC3CnG,QAAO,SAAAp8D,GAAC,OAAIiiF,EAAU7V,OAAOQ,QAAU5sE,EAAEosE,OAAOS,MAAM,IACtDzQ,QAAO,SAAAp8D,GAAC,OAAKA,EAAEosE,OAAOhoE,QAAU0mE,GAAeod,aAAiBloF,EAAEosE,OAAOhoE,QAAU0mE,GAAeuc,IAAK,IACvGxgC,KAAI,SAAA7mD,GACJ,IAAM46E,EAAU+L,GAAeI,oBAAoBvkB,EAAWxiE,GAC9D,OAAO06E,GAAkBU,eAAeR,EAAS,CAAEnoE,GACpD,IACD,OAAO+b,KAAKiQ,IAAGn5B,MAARkpB,KAAIo1C,EAAQ2X,GACpB,IACI4S,GACHlhB,EAAQxtE,KAAK,CACZ+U,YAAa,YACby4D,QAAOrJ,EACHuqB,EAAKH,MAAMnnC,KAAI,SAAAqF,GAAI,OAAI0hC,GAAY7D,KAAK79B,EAAK,KAEjD0iC,OAAQ,GAGX,KAAO,CAEN,IAAMT,EAAO9yB,EAAY58B,IAAI0xD,GAAW,SAAA19E,GACvC,IAAM8oE,EAAY/Y,EAAUC,WAC1BrG,QAAO,SAAAp8D,GAAC,OAAIA,EAAEuiE,UAAY0f,EAAU1f,OAAO,IAC3CnG,QAAO,SAAAp8D,GAAC,OAAIiiF,EAAU7V,OAAOQ,QAAU5sE,EAAEosE,OAAOS,MAAM,IACtDzQ,QAAO,SAAAp8D,GAAC,OAAKA,EAAEosE,OAAOhoE,QAAU0mE,GAAeod,aAAiBloF,EAAEosE,OAAOhoE,QAAU0mE,GAAeuc,IAAK,IACvGxgC,KAAI,SAAA7mD,GACJ,IAAM46E,EAAU+L,GAAeI,oBAAoBvkB,EAAWxiE,GAC9D,OAAO06E,GAAkBU,eAAeR,EAAS,CAAEnoE,GACpD,IACD,OAAO+b,KAAKiQ,IAAGn5B,MAARkpB,KAAIo1C,EAAQ2X,GACpB,IACI4S,GACHlhB,EAAQxtE,KAAK,CACZ+U,YAAa,OACby4D,QAAOrJ,EACHuqB,EAAKH,MAAMnnC,KAAI,SAAAqF,GAAI,OAAI0hC,GAAY7D,KAAK79B,EAAK,KAEjD0iC,OAAQ,GAGX,CAEA,OAAO3hB,CACR,EApUYshB,GAsUL8B,eAAiB,SAAC7tB,EAA2Byf,GACjB,OAA7BA,EAAU7V,OAAOa,SAAkE,IAA5CgV,EAAU7V,OAAOa,QAAQA,QAAQhwE,QAK7EglF,EAAU7V,OAAOa,QAAQA,QAAQxtD,SAAQ,SAAA6wE,GACxC/B,GAAagC,cAAc/tB,EAAWyf,EAAWqO,EAClD,IACArO,EAAU7V,OAAOa,QAAUshB,GAAaC,WAAWhsB,EAAWyf,IAP7D0E,GAAekB,QAAQrlB,EAQzB,EAhVY+rB,GAkVLgC,cAAgB,SAAC/tB,EAA2Byf,EAA2BqO,GAC7E,OAAQA,EAAOz9D,IACd,IAAK,UACAovD,EAAU7V,OAAOO,UAAY,GAChCga,GAAe8D,QAAQjoB,EAAWyf,GAEnC,MAED,IAAK,OACAA,EAAU7V,OAAOO,UAAY,GAChCga,GAAe70B,KAAK0Q,EAAWyf,GAEhC,MAED,IAAK,OACAA,EAAU7V,OAAOO,UAAY,GAChCga,GAAeiE,KAAKpoB,EAAWyf,GAEhC,MAED,IAAK,OACJ,IAAMxE,EAAM6S,EAAOhuF,KACbsnF,EAAOjD,GAAe0C,YAAY7mB,EAAWyf,EAAWA,EAAU7V,OAAO7tE,SAAUk/E,GACrFwE,EAAU7V,OAAOO,UAAYid,GAChCjD,GAAeoD,KAAKvnB,EAAWyf,EAAWxE,EAAKmM,GAEhD,MAED,IAAK,SACJ,IAAM34C,EAASq/C,EAAOhuF,KACtBqkF,GAAe+B,aAAalmB,EAAWyf,EAAWhxC,GAClD01C,GAAeuC,UAAU1mB,EAAWyf,GAIvC,EC5VM,IAAMhO,GAAmBra,GAAA,SAAAqa,IAAAttE,EAAA,KAAAstE,EAAA,IAAnBA,GACLC,YAAc,WACpB,MAAO,CACNrhD,GAAI,OACJre,YAAa,sCACblS,KAAM,CAAE6oE,GAAoB6M,aAAc7M,GAAoBuX,gBAAiBvX,GAAoBwX,eAErG,EAPY1O,GASLe,aAAe,WACrB,MAAO,CACNniD,GAAI,OACJre,YAAa,uCACblS,KAAM,CAAE6oE,GAAoB0X,cAAe1X,GAAoByX,eAEjE,EAfY3O,GAiBL8L,MAAQ,WACd,MAAO,CACNltD,GAAI,OACJre,YAAa,mCACblS,KAAM,CAAE6oE,GAAoB2X,WAAY3X,GAAoB4X,YAE9D,EAvBY9O,GAyBLuc,OAAS,WACf,MAAO,CACN39D,GAAI,OACJre,YAAa,gCACblS,KAAM,CAAE6oE,GAAoB6X,SAE9B,EA/BY/O,GAiCLwc,UAAY,WAClB,MAAO,CACN59D,GAAI,OACJre,YAAa,oCACblS,KAAM,CAAE6oE,GAAoByV,YAE9B,EAvCY3M,GAyCLiB,UAAY,WAClB,MAAO,CACNriD,GAAI,YACJre,YAAa,mCACblS,KAAM,KAER,EA/CY2xE,GAiDLzH,OAAS,WACf,MAAO,CACN35C,GAAI,SACJre,YAAa,kDACblS,KAAM,KAER,EAvDY2xE,GAyDLsD,MAAQ,WACd,MAAO,CACN1kD,GAAI,QACJre,YAAa,wCACblS,KAAM,KAER,EA/DY2xE,GAiELxF,UAAY,SAACjB,GACnB,MAAO,CACN36C,GAAI,YACJre,YAAag5D,IAAUnC,GAAUoI,IAAM,mCAAmC,0BAAD76D,OAA4B40D,EAAK,cAC1GlrE,KAAM,KAER,EAvEY2xE,GAyELyc,iBAAmB,WACzB,MAAO,CACN79D,GAAI,mBACJre,YAAa,+CACblS,KAAM,KAER,EA/EY2xE,GAiFLpH,OAAS,WACf,MAAO,CACNh6C,GAAI,SACJre,YAAa,4BACblS,KAAM,KAER,EAvFY2xE,GAyFLsB,MAAQ,WACd,MAAO,CACN1iD,GAAI,QACJre,YAAa,2BACblS,KAAM,KAER,EA/FY2xE,GAiGLwa,YAAc,SAACsB,EAAuC9N,GAC5D,OAAQ8N,EAAal9D,IACpB,IAAK,OAEJ,OADsBk9D,EAAaztF,KACdojD,MAAK,SAAA09B,GACzB,OAAOnB,EAAU/V,MAAMxmB,MAAK,SAAA1oD,GAAC,OAAIA,EAAEixE,cAAgBmV,CAAI,KAAKtB,GAAemB,iBAAiBhB,GAAWlqE,SAASqrE,EACjH,IAED,IAAK,YACJ,IAAMM,EAAYroB,EAAYgB,IAAI4lB,EAAU/V,MAAM9P,QAAO,SAAAp/D,GAAC,OAAIA,EAAEsf,WAAa4uD,GAAiBsY,IAAI,KAAG,SAAAxmF,GAAC,OAAIA,EAAE2mF,KAAK,IACjH,OAAOD,EAAY,EAEpB,IAAK,SACJ,OAAOzB,EAAU7V,OAAOI,OAAS,EAElC,IAAK,QACJ,OAAOyV,EAAU7V,OAAOK,OAAS,EAElC,IAAK,YACJ,IAAMe,EAAQuiB,EAAaztF,KAC3B,OAAIkrE,IAAUnC,GAAUoI,IAChBwO,EAAU7V,OAAOU,WAAW7vE,OAAS,EAGtCglF,EAAU7V,OAAOU,WAAW1Q,QAAO,SAAAp8D,GAAC,OAAIA,EAAEwtE,QAAUA,CAAK,IAAEvwE,OAAS,EAE5E,IAAK,mBACJ,OAAOglF,EAAU9V,QAAQlvE,OAAS6kF,GAAeC,eAElD,IAAK,SACJ,OAAOE,EAAU7V,OAAOS,OAAS,EAElC,IAAK,QACJ,OAAOoV,EAAU7V,OAAOhoE,QAAU0mE,GAAema,MAInD,OAAO,CACR,EAGM,IAAM0L,GAAsB/2B,GAAA,SAAA+2B,IAAAhqF,EAAA,KAAAgqF,EAAA,IAAtBA,GACLC,SAAW,SAACx0F,GAClB,MAAO,CACNy2B,GAAI,SACJ+9D,SAAUx0F,EACVy+E,WAAY,GACZz+E,MAAO,KAET,EARYu0F,GAULpc,OAAS,WACf,MAAO,CACN1hD,GAAI,SACJ+9D,SAAU,SACV/V,WAAY,GACZz+E,MAAO,KAET,EAGM,IAAMk4E,GAAsB1a,GAAA,SAAA0a,IAAA3tE,EAAA,KAAA2tE,EAAA,IAAtBA,GACL3wE,KAAO,WACb,MAAO,CACNkvB,GAAI,UACJ0I,MAAO,CACNn7B,KAAM65E,GAAgB4W,KACtB3E,OAAQ,GAETyC,QAAS,KACT9T,WAAY,GACZz+E,MAAO,KAET,EAZYk4E,GAcLa,SAAW,SAAC/0E,EAAwByP,GAC1C,MAAO,CACNgjB,GAAI,UACJ0I,MAAO,CACNn7B,KAAM65E,GAAgB6W,SACtB5E,OAAQ,GAETyC,QAAS,CACRvuF,KAAMA,EACNyP,MAAOA,GAERgrE,WAAY,GACZz+E,MAAO,KAET,EA5BYk4E,GA8BL4B,MAAQ,SAAC91E,EAAwByP,EAAeq8E,GACtD,MAAO,CACNr5D,GAAI,UACJ0I,MAAO,CACNn7B,KAAM65E,GAAgB8W,MACtB7E,OAAQA,GAETyC,QAAS,CACRvuF,KAAMA,EACNyP,MAAOA,GAERgrE,WAAY,GACZz+E,MAAO,KAET,EA5CYk4E,GA8CLC,OAAS,SAACn0E,EAAwByP,EAAemhF,GACvD,MAAO,CACNn+D,GAAI,UACJ0I,MAAO,CACNn7B,KAAM65E,GAAgBtF,OACtBuX,OAAQ8E,GAETrC,QAAS,CACRvuF,KAAMA,EACNyP,MAAOA,GAERgrE,WAAY,GACZz+E,MAAO,KAET,EAGM,IAAMg4E,GAAsBxa,GAAA,SAAAwa,IAAAztE,EAAA,KAAAytE,EAAA,IAAtBA,GACLC,MAAQ,WACd,MAAO,CACNxhD,GAAI,SACJzyB,KAAM,QACNy6E,WAAY,GACZz+E,MAAO,KAET,EARYg4E,GAULa,OAAS,WACf,MAAO,CACNpiD,GAAI,SACJzyB,KAAM,SACNy6E,WAAY,GACZz+E,MAAO,KAET,EAGM,IAAMq4E,GAAa7a,GAAA,SAAA6a,IAAA9tE,EAAA,KAAA8tE,EAAA,IAmlCzBwc,GAnlCYxc,GAAAA,GACLC,OAAS,SACfpyE,GAQA,MAAO,CACNuwB,GAAI,SACJvwB,KAAMA,EACNyiB,SAAUziB,EAAKwyE,IAEjB,EAfYL,GAiBLgF,OAAS,SAACn3E,GAChB,MAAO,CACNuwB,GAAI,SACJvwB,KAAMA,EACNyiB,SAAUziB,EAEZ,EAvBYmyE,GAyBLM,iBAAmB,WACzB,MAAO,CACNliD,GAAI,eACJvwB,KAHqCvF,UAAAE,OAAA,QAAAuR,IAAAzR,UAAA,GAAAA,UAAA,GAAG,EAIxCgoB,SAAU,GAEZ,EA/BY0vD,GAiCLY,WAAa,SAACj1E,EAAkBqtE,GACtC,MAAO,CACN56C,GAAI,SACJvwB,KAAM,CAAElC,KAAMA,EAAMqtE,KAAMA,GAC1B1oD,SAAU,GAEZ,EAvCY0vD,GAyCLyc,cAAgB,SAAC90F,GACvB,MAAO,CACNy2B,GAAI,SACJvwB,KAAMlG,EACN2oB,SAAU,GAEZ,EA/CY0vD,GAiDL8E,WAAa,SAAC9L,GACpB,MAAO,CACN56C,GAAI,aACJvwB,KAAMmrE,EACN1oD,SAAU,GAEZ,EAvDY0vD,GAyDLwD,WAAa,SAAC77E,GACpB,MAAO,CACNy2B,GAAI,aACJvwB,KAAMlG,EACN2oB,SAAU,GAEZ,EA/DY0vD,GAiELmC,aAAe,SAACnI,GACtB,MAAO,CACN57C,GAAI,eACJvwB,KAAMmsE,EACN1pD,SAAU,GAEZ,EAvEY0vD,GAyEL0c,gBAAkB,SAAC3jB,GACzB,MAAO,CACN36C,GAAI,kBACJvwB,KAAMkrE,EACNzoD,SAAU,GAEZ,EA/EY0vD,GAiFLiD,YAAc,WACpB,MAAO,CACN7kD,GAAI,cACJvwB,KAAM,KACNyiB,SAAU,GAEZ,EAvFY0vD,GAyFL0B,UAAY,WAClB,MAAO,CACNtjD,GAAI,YACJvwB,KAAM,KACNyiB,SAAU,GAEZ,EA/FY0vD,GAiGLiF,KAAO,WACb,MAAO,CACN7mD,GAAI,OACJvwB,KAAM,KACNyiB,SAAU,GAEZ,EAvGY0vD,GAyGLe,MAAQ,WACd,MAAO,CACN3iD,GAAI,QACJvwB,KAAM,KACNyiB,SAAU,GAEZ,EA/GY0vD,GAiHL3iB,KAAO,WACb,MAAO,CACNj/B,GAAI,OACJvwB,KAAM,KACNyiB,SAAU,GAEZ,EAvHY0vD,GAyHLmW,KAAO,WACb,MAAO,CACN/3D,GAAI,OACJvwB,KAAM,KACNyiB,SAAU,GAEZ,EA/HY0vD,GAiILoW,OAAS,WACf,MAAO,CACNh4D,GAAI,SACJvwB,KAAM,KACNyiB,SAAU,GAEZ,EAvIY0vD,GAyILgC,kBAAoB,WAC1B,MAAO,CACN5jD,GAAI,oBACJvwB,KAHgCvF,UAAAE,OAAA,QAAAuR,IAAAzR,UAAA,IAAAA,UAAA,GAIhCgoB,SAAU,GAEZ,EA/IY0vD,GAiJL2c,iBAAmB,SAACrrF,GAC1B,MAAO,CACN8sB,GAAI,mBACJvwB,KAAMyD,EACNgf,SAAU,GAEZ,EAvJY0vD,GAyJL4c,kBAAoB,WAC1B,MAAO,CACNx+D,GAAI,oBACJvwB,KAAM,KACNyiB,SAAU,GAEZ,EA/JY0vD,GAiKLuF,cAAgB,WACtB,MAAO,CACNnnD,GAAI,gBACJvwB,KAAM,KACNyiB,SAAU,GAEZ,EAvKY0vD,GAyKL2E,YAAc,WACpB,MAAO,CACNvmD,GAAI,cACJvwB,KAAM,KACNyiB,SAAU,GAEZ,EA/KY0vD,GAiLL2B,cAAgB,SAACh2E,EAAoBqtE,GAC3C,MAAO,CACN56C,GAAI,gBACJvwB,KAAM,CACLlC,KAAMA,EACNqtE,KAAMA,GAEP1oD,SAAU,GAEZ,EA1LY0vD,GA4LL6c,mBAAqB,WAC3B,MAAO,CACNz+D,GAAI,aACJvwB,KAAM,KACNyiB,SAAU,GAEZ,EAlMY0vD,GAoML8c,OAAS,WACf,MAAO,CACN1+D,GAAI,SACJvwB,KAAM,KACNyiB,SAAU,GAEZ,EA1MY0vD,GA4ML+c,MAAQ,WACd,MAAO,CACN3+D,GAAI,QACJvwB,KAAM,KACNyiB,SAAU,GAEZ,EAlNY0vD,GAoNLgd,cAAgB,SAACrxF,GACvB,MAAO,CACNyyB,GAAI,gBACJvwB,KAAMlC,EACN2kB,SAAU,GAEZ,EA1NY0vD,GA4NLid,WAAa,WACnB,MAAO,CACN7+D,GAAI,aACJvwB,KAAM,KACNyiB,SAAU,GAEZ,EAlOY0vD,GAoOLkd,cAAgB,WACtB,MAAO,CACN9+D,GAAI,gBACJvwB,KAAM,KACNyiB,SAAU,GAEZ,EA1OY0vD,GA4OLmd,aAAe,WACrB,MAAO,CACN/+D,GAAI,eACJvwB,KAAM,KACNyiB,SAAU,GAEZ,EAlPY0vD,GAoPLod,aAAe,SAACC,GACtB,MAAO,CACNj/D,GAAI,eACJvwB,KAAMwvF,EACN/sE,SAAU,GAEZ,EA1PY0vD,GA4PLsd,OAAS,SAAC3xF,GAChB,MAAO,CACNyyB,GAAI,SACJvwB,KAAMlC,EACN2kB,SAAU,GAEZ,EAlQY0vD,GAoQLud,eAAiB,SAAC7I,EAA2BlH,EAAkCzf,GACrF,OAAQ2mB,EAAOt2D,IACd,IAAK,SACJ,IAAMvwB,EAAO6mF,EAAO7mF,KAOpB,GAAI2/E,EAAW,CACd,IAAIxU,EAAOqU,GAAeiD,aAAa9C,EAAW,GAAI3/E,EAAKsrE,OAI3D,OAHIpL,IACHiL,EAAOkZ,GAAe5B,aAAaviB,EAAWyf,EAAW3/E,EAAKsrE,QAEvC,IAApBtrE,EAAKuyE,WACF,WAANj8D,OAAkBtW,EAAKsrE,MAAK,WAAAh1D,OAAU60D,EAAI,SAAA70D,OAAQtW,EAAKkrE,OAElD,WAAN50D,OAAkBtW,EAAKsrE,MAAK,KAAAh1D,OAAItW,EAAKuyE,YAAc,EAAI,IAAM,IAAEj8D,OAAGtW,EAAKuyE,WAAU,WAAAj8D,OAAU4V,KAAK4rC,IAAIqT,EAAOnrE,EAAKuyE,WAAY,GAAE,SAAAj8D,OAAQtW,EAAKkrE,MAC5I,CACA,OAAwB,IAApBlrE,EAAKuyE,WACF,WAANj8D,OAAkBtW,EAAKsrE,MAAK,QAAAh1D,OAAOtW,EAAKkrE,OAEnC,WAAN50D,OAAkBtW,EAAKsrE,MAAK,KAAAh1D,OAAItW,EAAKuyE,YAAc,EAAI,IAAM,IAAEj8D,OAAGtW,EAAKuyE,WAAU,QAAAj8D,OAAOtW,EAAKkrE,OAE9F,IAAK,SACJ,MAAO,UAER,IAAK,eACJ,IAAMykB,EAAe9I,EAAO7mF,KAC5B,OAAwB,IAAjB2vF,EAAqB,qBAAoB,sBAAAr5E,OAAyBq5E,EAAe,EAAI,IAAM,IAAEr5E,OAAGq5E,GAExG,IAAK,SACJ,IAAM3vF,EAAO6mF,EAAO7mF,KACpB,MAAM,QAANsW,OAAetW,EAAKlC,KAAI,kBAAAwY,OAAiBtW,EAAKmrE,KAAI,KAEnD,IAAK,SACJ,IAAMrxE,EAAQ+sF,EAAO7mF,KACrB,MAAM,WAANsW,OAAkBxc,EAAK,WAExB,IAAK,aACJ,IAAMqxE,EAAO0b,EAAO7mF,KACpB,MAAM,qBAANsW,OAA4B60D,EAAI,KAEjC,IAAK,aACJ,IAAMrxE,EAAQ+sF,EAAO7mF,KACrB,MAAM,QAANsW,OAAexc,EAAK,aAErB,IAAK,eACJ,IAAMqyE,EAAY0a,EAAO7mF,KACzB,MAAM,oBAANsW,OAA2Bw1D,GAAewC,wBAAwBnC,GAAU,WAAA71D,OAAU61D,EAAUhB,KAAI,KAErG,IAAK,kBACJ,IAAMD,EAAQ2b,EAAO7mF,KACrB,OAAOkrE,IAAUnC,GAAUoI,IAAM,qBAAoB,YAAA76D,OAAe40D,EAAK,cAE1E,IAAK,cACJ,MAAO,sBAER,IAAK,YACJ,MAAO,aAER,IAAK,OACJ,MAAO,OAER,IAAK,OACJ,MAAO,OAER,IAAK,OACJ,MAAO,OAER,IAAK,SACJ,MAAO,SAER,IAAK,QACJ,MAAO,WAER,IAAK,oBAEJ,OADe2b,EAAO7mF,KACN,sBAAwB,sBAEzC,IAAK,mBAEJ,OADY6mF,EAAO7mF,KACN,oBAAsB,qBAEpC,IAAK,oBACJ,MAAO,uBAER,IAAK,gBACJ,MAAO,2BAER,IAAK,cACJ,MAAO,yBAER,IAAK,gBACJ,IAAMA,EAAO6mF,EAAO7mF,KACpB,OAAkB,IAAdA,EAAKmrE,KACF,SAAN70D,OAAgBtW,EAAKlC,KAAI,KAEpB,SAANwY,OAAgBtW,EAAKlC,KAAI,YAAAwY,OAAWtW,EAAKmrE,MAE1C,IAAK,aACJ,MAAO,iBAER,IAAK,SACJ,MAAO,SAER,IAAK,QACJ,MAAO,QAER,IAAK,gBACJ,IAAMrtE,EAAO+oF,EAAO7mF,KACpB,MAAM,UAANsW,OAAiBxY,EAAKsf,cAAa,YAEpC,IAAK,aACJ,MAAO,qBAER,IAAK,gBACJ,MAAO,sBAER,IAAK,eACJ,MAAO,gBAER,IAAK,eACJ,IAAMoyE,EAAW3I,EAAO7mF,KAClB6nF,EAAShZ,GAAU+gB,UAAUJ,GACnC,MAAM,YAANl5E,OAAmBuxE,EAAOluF,MAE3B,IAAK,SACJ,IAAMmE,EAAO+oF,EAAO7mF,KACpB,MAAM,UAANsW,OAAiBxY,GAInB,MAAO,EACR,EA3YYq0E,GA6YL2U,IAAM,SAACD,EAA2B3mB,EAA2Byf,EAA2B9N,GAC9F,OAAQgV,EAAOt2D,IACd,IAAK,SACJ,IAAMvwB,EAAO6mF,EAAO7mF,KAQd6vF,EAA6B,GAE7BC,EAAkBje,EAAWpT,MAAK,SAAAtuD,GAAC,MAAa,YAATA,EAAEogB,EAAgB,IAC/D,GAAIu/D,EACeA,EAAgBh2F,MACxBqjB,SAAQ,SAAAoT,GACjB,IAAM92B,EAAS4qF,GAAe+E,aAAalpB,EAAW3vC,GAElDg0C,GAAU,EACRwrB,EAAcle,EAAWpT,MAAK,SAAAtuD,GAAC,MAAa,WAATA,EAAEogB,EAAe,IAC1D,GAAIw/D,EAAa,CAChB,IAAMC,EAASD,EAAYj2F,MACrB8Y,EAAO+sE,EAAU/V,MAAMnL,MAAK,SAAA/jE,GAAC,OAAIA,EAAE61B,KAAOy/D,CAAM,IACtD,GAAIp9E,EAAM,CACT,IAAMq/D,EAASr/D,EAAKq/D,OACpB,GAAIA,EAAOsL,WAAa,EAAG,CAC1B,IAAM0S,EAAOx4B,EAAOE,KAAKsa,EAAOsL,YAC5B0S,GAAQ,KACX1rB,GAAU,EACV8f,GAAe/3D,IAAI4zC,EAAU,GAAD5pD,OAAK1D,EAAKjZ,KAAI,yBAAA2c,OAAwB27D,EAAOsL,WAAU,wBAAAjnE,OAAuB25E,EAAI,MAEhH,CACD,CACD,CAEA,GAAI1rB,EACH,GAAK9qE,EAAOqwE,OAAOhoE,QAAU0mE,GAAeod,aAAiBnsF,EAAOqwE,OAAOhoE,QAAU0mE,GAAeuc,KAEnGV,GAAe/3D,IAAI4zC,EAAW,iDACxB,CACN,IAAMgwB,EAAU7L,GAAe5B,aAAaviB,EAAWyf,EAAW3/E,EAAKsrE,OAAStrE,EAAKuyE,WAC/E4d,EAAU9L,GAAe7B,aAAatiB,EAAWzmE,EAAQuG,EAAKkrE,OAE9DklB,EAAU34B,EAAOE,KAAKu4B,GACtBG,EAAU54B,EAAOE,KAAKw4B,GAC5B5rB,EAAU6rB,GAAWC,EAErBhM,GAAe/3D,IACd4zC,EAAU,GAAD5pD,OACNqpE,EAAUhmF,KAAI,WAAA2c,OAAUtW,EAAKsrE,MAAK,WAAAh1D,OAAU45E,EAAO,OAAA55E,OAAM85E,EAAO,MAAA95E,OAAK7c,EAAOE,KAAI,WAAA2c,OAAUtW,EAAKkrE,MAAK,WAAA50D,OAAU65E,EAAO,OAAA75E,OAAM+5E,EAAO,MAAA/5E,OAAKiuD,EAAU,MAAQ,QAE9J,CAGGA,GACHsrB,EAAiB1yF,KAAK1D,EAAO82B,GAE/B,IAGD,IAAIj2B,EAAOyW,KAAKG,MAAMH,KAAKC,UAAU6gE,IACrCv3E,EAAOA,EAAKw/D,QAAO,SAAA3pD,GAAC,MAAa,YAATA,EAAEogB,EAAgB,IAC1Cj2B,EAAK6C,KAAK,CAAEozB,GAAI,UAAWgoD,WAAY,GAAIz+E,MAAO+1F,IAClD7vF,EAAKwyE,IAAIr1D,SAAQ,SAAA0pE,GAChB1U,GAAc2U,IAAID,EAAQ3mB,EAAWyf,EAAWrlF,EACjD,IACA,MAED,IAAK,SACJ,IAAIA,EAAOyW,KAAKG,MAAMH,KAAKC,UAAU6gE,IACrCv3E,EAAOA,EAAKw/D,QAAO,SAAA3pD,GAAC,MAAa,YAATA,EAAEogB,EAAgB,IAC1Cj2B,EAAK6C,KAAK,CAAEozB,GAAI,UAAWgoD,WAAY,GAAIz+E,MAAO,CAAE6lF,EAAUpvD,MAC9Cs2D,EAAO7mF,KACfmd,SAAQ,SAAA0pE,GACf1U,GAAc2U,IAAID,EAAQ3mB,EAAWyf,EAAWrlF,EACjD,IACA,MAED,IAAK,eACJ,IAAMq1F,EAAe9I,EAAO7mF,KACtBswF,EAAkBze,EAAWpT,MAAK,SAAAtuD,GAAC,MAAa,WAATA,EAAEogB,EAAe,IACxDu/D,EAAkBje,EAAWpT,MAAK,SAAAtuD,GAAC,MAAa,YAATA,EAAEogB,EAAgB,IAC/D,GAAI+/D,GAAmBR,EAAiB,CACvC,IAAME,EAASM,EAAgBx2F,MACzB8Y,EAAO+sE,EAAU/V,MAAMnL,MAAK,SAAA/jE,GAAC,OAAIA,EAAE61B,KAAOy/D,CAAM,IACtD,GAAIp9E,EAAM,CACT,IAAMq/D,EAASr/D,EAAKq/D,OACF6d,EAAgBh2F,MACxBqjB,SAAQ,SAAAoT,GACjB,IAAM92B,EAAS4qF,GAAe+E,aAAalpB,EAAW3vC,GACtD0hD,EAAO/H,OAAO/sD,SAAQ,SAAAozE,GACrB,IAAMplB,EAAOolB,EAAIplB,KAAOwkB,EAClBtsF,EAASo0D,EAAOE,KAAKwT,GAC3BkZ,GAAe/3D,IAAI4zC,EAAU,GAAD5pD,OAAKqpE,EAAUhmF,KAAI,0BAAA2c,OAAyBi6E,EAAIzyF,KAAI,UAAAwY,OAAS7c,EAAOE,KAAI,WAAA2c,OAAU60D,EAAI,eAAA70D,OAAcjT,IAChI,IAAMqrF,EAAQrK,GAAezB,eAAe1iB,EAAWyf,EAAW4Q,EAAIzyF,MAClE4wF,EAAQ,GACXrK,GAAe/3D,IAAI4zC,EAAU,GAAD5pD,OAAKqpE,EAAUhmF,KAAI,WAAA2c,OAAUo4E,EAAK,gBAAAp4E,OAAei6E,EAAIzyF,KAAI,YAElF4wF,EAAQ,GACXrK,GAAe/3D,IAAI4zC,EAAU,GAAD5pD,OAAKqpE,EAAUhmF,KAAI,WAAA2c,OAAUo4E,EAAK,UAAAp4E,OAASi6E,EAAIzyF,KAAI,YAEhFumF,GAAena,OAAOhK,EAAWzmE,EAAQ4J,EAASqrF,EAAO6B,EAAIzyF,KAC9D,GACD,GACD,CACD,CACA,MAED,IAAK,SACJ,IAAMkC,EAAO6mF,EAAO7mF,KAChBA,EAAKlC,OAASmrE,GAAWkI,MAC5BnxE,EAAKlC,KAAO+wE,GAAUG,uBAEvB,IAAM8gB,EAAkBje,EAAWpT,MAAK,SAAAtuD,GAAC,MAAa,YAATA,EAAEogB,EAAgB,IAC/D,GAAIu/D,EACeA,EAAgBh2F,MACxBqjB,SAAQ,SAAAoT,GACjB,IAAM92B,EAAS4qF,GAAe+E,aAAalpB,EAAW3vC,GAChDltB,EAASo0D,EAAOE,KAAK33D,EAAKmrE,MAChCkZ,GAAe/3D,IAAI4zC,EAAU,GAAD5pD,OAAKqpE,EAAUhmF,KAAI,sBAAA2c,OAAqB7c,EAAOE,KAAI,WAAA2c,OAAUtW,EAAKmrE,KAAI,eAAA70D,OAAcjT,IAChH,IAAMqrF,EAAQrK,GAAezB,eAAe1iB,EAAWyf,EAAW3/E,EAAKlC,MACnE4wF,EAAQ,GACXrK,GAAe/3D,IAAI4zC,EAAU,GAAD5pD,OAAKqpE,EAAUhmF,KAAI,WAAA2c,OAAUo4E,EAAK,gBAAAp4E,OAAetW,EAAKlC,KAAI,YAEnF4wF,EAAQ,GACXrK,GAAe/3D,IAAI4zC,EAAU,GAAD5pD,OAAKqpE,EAAUhmF,KAAI,WAAA2c,OAAUo4E,EAAK,UAAAp4E,OAAStW,EAAKlC,KAAI,YAEjFumF,GAAena,OAAOhK,EAAWzmE,EAAQ4J,EAASqrF,EAAO1uF,EAAKlC,KAC/D,IAED,MAED,IAAK,SACJ,IAAMhE,EAAQ+sF,EAAO7mF,KACf8vF,EAAkBje,EAAWpT,MAAK,SAAAtuD,GAAC,MAAa,YAATA,EAAEogB,EAAgB,IAC/D,GAAIu/D,EACeA,EAAgBh2F,MACxBqjB,SAAQ,SAAAoT,GACjB,IAAM92B,EAAS4qF,GAAe+E,aAAalpB,EAAW3vC,GACtD8zD,GAAepP,MAAM/U,EAAWzmE,EAAQK,EACzC,IAED,MAED,IAAK,aACJ,IAAMqxE,EAAO0b,EAAO7mF,KACd8vF,EAAkBje,EAAWpT,MAAK,SAAAtuD,GAAC,MAAa,YAATA,EAAEogB,EAAgB,IAC/D,GAAIu/D,EACeA,EAAgBh2F,MACxBqjB,SAAQ,SAAAoT,GACjB,IAAM92B,EAAS4qF,GAAe+E,aAAalpB,EAAW3vC,GAChDz2B,EAAQ29D,EAAOE,KAAKwT,GAC1BkZ,GAAepN,WAAW/W,EAAWzmE,EAAQK,EAC9C,IAED,MAED,IAAK,aACJ,IAAMA,EAAQ+sF,EAAO7mF,KACf8vF,EAAkBje,EAAWpT,MAAK,SAAAtuD,GAAC,MAAa,YAATA,EAAEogB,EAAgB,IAC/D,GAAIu/D,EACeA,EAAgBh2F,MACxBqjB,SAAQ,SAAAoT,GACjB,IAAM92B,EAAS4qF,GAAe+E,aAAalpB,EAAW3vC,GACtD8zD,GAAe1O,WAAWzV,EAAWzmE,EAAQK,EAC9C,IAED,MAED,IAAK,eACJ,IAAMqyE,EAAY0a,EAAO7mF,KACnB8vF,EAAkBje,EAAWpT,MAAK,SAAAtuD,GAAC,MAAa,YAATA,EAAEogB,EAAgB,IAC/D,GAAIu/D,EACeA,EAAgBh2F,MACxBqjB,SAAQ,SAAAoT,GACjB,IAAM92B,EAAS4qF,GAAe+E,aAAalpB,EAAW3vC,GACtD,GAAI92B,EAAOqwE,OAAOhoE,QAAU0mE,GAAeuc,KAAM,CAChD,IAAMzT,EAAW73E,EAAOqwE,OAAOU,WAC7B/L,MAAK,SAAA/gE,GAAC,OAAKA,EAAEwtE,QAAUiB,EAAUjB,OAAWY,GAAewC,wBAAwB5wE,KAAOouE,GAAewC,wBAAwBnC,EAAW,IAC9I,GAAImF,EACHA,EAASnG,MAAQgB,EAAUhB,SACrB,CACN,IAAM7wE,EAAOyW,KAAKG,MAAMH,KAAKC,UAAUm7D,IACvC7xE,EAAKi2B,GAAKssC,EAAMC,OAChBrjE,EAAOqwE,OAAOU,WAAWrtE,KAAK7C,EAC/B,CACA+pF,GAAe/3D,IAAI4zC,EAAU,GAAD5pD,OAAK7c,EAAOE,KAAI,wBAAA2c,OAAuBw1D,GAAewC,wBAAwBnC,GAAU,WAAA71D,OAAU61D,EAAUhB,MACzI,CACD,IAED,MAED,IAAK,kBACJ,IAAMD,EAAQ2b,EAAO7mF,KACf8vF,EAAkBje,EAAWpT,MAAK,SAAAtuD,GAAC,MAAa,YAATA,EAAEogB,EAAgB,IAC/D,GAAIu/D,EACeA,EAAgBh2F,MACxBqjB,SAAQ,SAAAoT,GACjB,IAAM92B,EAAS4qF,GAAe+E,aAAalpB,EAAW3vC,GAChD/xB,EAAI0sE,IAAUnC,GAAUoI,IAAMpY,EAAYY,KAAK,CAAEoP,GAAU0K,UAAW1K,GAAU2K,QAAS3K,GAAUuJ,QAAWpH,EAC9GV,EAAa/wE,EAAOqwE,OAAOU,WAC/B1Q,QAAO,SAAAqS,GAAS,OAAIA,EAAUjB,QAAU1sE,CAAC,IACzCs7D,QAAO,SAAAqS,GAAS,OAAIL,GAAe6C,yBAAyBxC,MAAgBwT,EAAU1f,UAAYxmE,EAAOwmE,QAAQ,IACnH,GAA0B,IAAtBuK,EAAW7vE,OAAc,CAC5B,IAAM61F,EAAUtkE,KAAK4rC,IAAG90D,MAARkpB,KAAIo1C,EAAQkJ,EAAWjmB,KAAI,SAAA7mD,GAAC,OAAIA,EAAEytE,IAAI,MAChDgB,EAAY3B,EAAW/L,MAAK,SAAA/gE,GAAC,OAAIA,EAAEytE,OAASqlB,CAAO,IACzD/2F,EAAOqwE,OAAOU,WAAa/wE,EAAOqwE,OAAOU,WAAW1Q,QAAO,SAAAp8D,GAAC,OAAIA,EAAE6yB,KAAO47C,EAAU57C,EAAE,IACrF8zD,GAAe/3D,IAAI4zC,EAAU,GAAD5pD,OAAK7c,EAAOE,KAAI,8BAAA2c,OAA6Bw1D,GAAewC,wBAAwBnC,IACjH,CACD,IAED,MAED,IAAK,cACJ,IAAM2jB,EAAkBje,EAAWpT,MAAK,SAAAtuD,GAAC,MAAa,YAATA,EAAEogB,EAAgB,IAC/D,GAAIu/D,EACeA,EAAgBh2F,MACxBqjB,SAAQ,SAAAoT,GACjB,IAAM92B,EAAS4qF,GAAe+E,aAAalpB,EAAW3vC,GAChD46C,EAAOkZ,GAAe7B,aAAatiB,EAAWzmE,EAAQsvE,GAAUuJ,OAChEjvE,EAASo0D,EAAOE,KAAKwT,GAC3B1xE,EAAOqwE,OAAOO,UAAYhnE,EAC1BghF,GAAe/3D,IAAI4zC,EAAU,GAAD5pD,OAAK7c,EAAOE,KAAI,uBAAA2c,OAAsB60D,EAAI,eAAA70D,OAAcjT,EAAM,wBAC3F,IAED,MAED,IAAK,YACJ,IAAMysF,EAAkBje,EAAWpT,MAAK,SAAAtuD,GAAC,MAAa,YAATA,EAAEogB,EAAgB,IAC/D,GAAIu/D,EACeA,EAAgBh2F,MACxBqjB,SAAQ,SAAAoT,GACjB,IAAM92B,EAAS4qF,GAAe+E,aAAalpB,EAAW3vC,GACtD8zD,GAAe4D,QAAQ/nB,EAAWzmE,EACnC,IAED,MAED,IAAK,OACJ,IAAMq2F,EAAkBje,EAAWpT,MAAK,SAAAtuD,GAAC,MAAa,YAATA,EAAEogB,EAAgB,IAC/D,GAAIu/D,EACeA,EAAgBh2F,MACxBqjB,SAAQ,SAAAoT,GACjB,IAAM92B,EAAS4qF,GAAe+E,aAAalpB,EAAW3vC,GACtD8zD,GAAejN,KAAKlX,EAAWzmE,EAChC,IAED,MAED,IAAK,OACJ,IAAMq2F,EAAkBje,EAAWpT,MAAK,SAAAtuD,GAAC,MAAa,YAATA,EAAEogB,EAAgB,IAC/D,GAAIu/D,EACeA,EAAgBh2F,MACxBqjB,SAAQ,SAAAoT,GACjB,IAAM92B,EAAS4qF,GAAe+E,aAAalpB,EAAW3vC,GACtD92B,EAAOqwE,OAAOO,UAAY,EAC1Bga,GAAe70B,KAAK0Q,EAAWzmE,GAC/B4qF,GAAe/3D,IAAI4zC,EAAU,GAAD5pD,OAAK7c,EAAOE,KAAI,UAC7C,IAED,MAED,IAAK,OACJ,IAAMm2F,EAAkBje,EAAWpT,MAAK,SAAAtuD,GAAC,MAAa,YAATA,EAAEogB,EAAgB,IAC/D,GAAIu/D,EACeA,EAAgBh2F,MACxBqjB,SAAQ,SAAAoT,GACjB,IAAM92B,EAAS4qF,GAAe+E,aAAalpB,EAAW3vC,GACtD92B,EAAOqwE,OAAOO,UAAY,EAC1Bga,GAAeiE,KAAKpoB,EAAWzmE,GAC/B4qF,GAAe/3D,IAAI4zC,EAAU,GAAD5pD,OAAK7c,EAAOE,KAAI,UAC7C,IAED,MAED,IAAK,SACJ,IAAMm2F,EAAkBje,EAAWpT,MAAK,SAAAtuD,GAAC,MAAa,YAATA,EAAEogB,EAAgB,IAC/D,GAAIu/D,EACeA,EAAgBh2F,MACxBqjB,SAAQ,SAAAoT,GACjB,IAAM92B,EAAS4qF,GAAe+E,aAAalpB,EAAW3vC,GACtD8zD,GAAekE,OAAOroB,EAAWzmE,EAClC,IAED,MAED,IAAK,QACJ,IAAMq2F,EAAkBje,EAAWpT,MAAK,SAAAtuD,GAAC,MAAa,YAATA,EAAEogB,EAAgB,IAC/D,GAAIu/D,EACeA,EAAgBh2F,MACxBqjB,SAAQ,SAAAoT,GACjB,IAAM92B,EAAS4qF,GAAe+E,aAAalpB,EAAW3vC,GACtD8zD,GAAe6D,QAAQhoB,EAAWzmE,EACnC,IAED,MAED,IAAK,oBAGJ,GADeotF,EAAO7mF,KAGrBqkF,GAAe0B,YAAY7lB,EAAWyf,GACtCA,EAAU7V,OAAOY,eAAiB,SAC5B,CAEN,IAAM+lB,EAAkB9Q,EAAU7V,OAAOY,eAAiBiV,EAAU7V,OAAOY,eAAe/7B,OAAOpe,GAAK,KAClGkgE,IACH9Q,EAAU7V,OAAOW,QAAUkV,EAAU7V,OAAOW,QAAQ3Q,QAAO,SAAAr+C,GAAC,OAAIA,EAAE8U,KAAOkgE,CAAe,KAEzF9Q,EAAU7V,OAAOY,eAAiB,IACnC,CACA,MAED,IAAK,mBACJ,IAAMjnE,EAAMojF,EAAO7mF,KACb0wF,EAAS,SAACj3F,EAAwB0yE,GACvCA,EAAUruE,KAAOguE,GAAeyC,gBAAgBpC,EAAUruE,MAC1DumF,GAAe/3D,IAAI4zC,EAAU,GAAD5pD,OAAK7c,EAAOE,KAAI,wBAAA2c,OAAuBw1D,GAAewC,wBAAwBnC,IAC3G,EACM2jB,EAAkBje,EAAWpT,MAAK,SAAAtuD,GAAC,MAAa,YAATA,EAAEogB,EAAgB,IAC/D,GAAIu/D,EACeA,EAAgBh2F,MACxBqjB,SAAQ,SAAAoT,GACjB,IAAM92B,EAAS4qF,GAAe+E,aAAalpB,EAAW3vC,GAChDi6C,EAAa/wE,EAAOqwE,OAAOU,WAAW1Q,QAAO,SAAAp8D,GAAC,OAAKiiF,EAAU1f,UAAYxmE,EAAOwmE,UAAa6L,GAAe6C,yBAAyBjxE,EAAE,IAC7I,GAAI+F,EACH+mE,EAAWrtD,SAAQ,SAAAgvD,GAAS,OAAIukB,EAAOj3F,EAAQ0yE,EAAU,SACnD,GAAI3B,EAAW7vE,OAAS,EAAG,CACjC,IAAMwxE,EAAYpT,EAAYY,KAAK6Q,GACnCkmB,EAAOj3F,EAAQ0yE,EAChB,CACD,IAED,MAED,IAAK,oBACJ,IAAM2jB,EAAkBje,EAAWpT,MAAK,SAAAtuD,GAAC,MAAa,YAATA,EAAEogB,EAAgB,IAC/D,GAAIu/D,EACeA,EAAgBh2F,MACxBqjB,SAAQ,SAAAoT,GACjB,IAAM92B,EAAS4qF,GAAe+E,aAAalpB,EAAW3vC,GAChDi6C,EAAamV,EAAU7V,OAAOU,WAAW1Q,QAAO,SAAAp8D,GAAC,OAAKiiF,EAAU1f,UAAYxmE,EAAOwmE,UAAa6L,GAAe6C,yBAAyBjxE,EAAE,IAChJ,GAAI8sE,EAAW7vE,OAAS,EAAG,CAC1B,IAAMwxE,EAAYpT,EAAYY,KAAK6Q,GACnCmV,EAAU7V,OAAOU,WAAamV,EAAU7V,OAAOU,WAAW1Q,QAAO,SAAAp8D,GAAC,OAAIA,IAAMyuE,CAAS,IACrF,IAAM7xE,EAAOyW,KAAKG,MAAMH,KAAKC,UAAUm7D,IACvC1yE,EAAOqwE,OAAOU,WAAWrtE,KAAK7C,GAC9B+pF,GAAe/3D,IAAI4zC,EAAU,GAAD5pD,OAAKqpE,EAAUhmF,KAAI,8BAAA2c,OAA6Bw1D,GAAewC,wBAAwBnC,KACnHkY,GAAe/3D,IAAI4zC,EAAU,GAAD5pD,OAAK7c,EAAOE,KAAI,wBAAA2c,OAAuBw1D,GAAewC,wBAAwBh0E,IAC3G,CACD,IAED,MAED,IAAK,gBACJ,IAAMw1F,EAAkBje,EAAWpT,MAAK,SAAAtuD,GAAC,MAAa,YAATA,EAAEogB,EAAgB,IAC/D,GAAIu/D,EACeA,EAAgBh2F,MACxBqjB,SAAQ,SAAAoT,GAAO,IAADogE,EACjBl3F,EAAS4qF,GAAe+E,aAAalpB,EAAW3vC,GACtD8zD,GAAe/3D,IAAI4zC,EAAU,GAAD5pD,OAAKqpE,EAAUhmF,KAAI,cAAA2c,OAAa7c,EAAOE,KAAI,eACvEF,EAAOqwE,OAAOY,eAAiB,KAC/BjxE,EAAOqwE,OAAOW,QAAU+U,GAAegC,cAAc/nF,GAAQqgE,QAAO,SAAAnrB,GAAM,MAA0C,WAAtC63C,GAAY6G,cAAc1+C,EAAoB,KAC5HgiD,EAAAl3F,EAAOqwE,OAAOW,SAAQttE,KAAI6F,MAAA2tF,EAAArvB,EAAIiQ,GAASE,iBAAiB3X,QAAO,SAAAnrB,GAAM,MAA0C,WAAtC63C,GAAY6G,cAAc1+C,EAAoB,MACvH01C,GAAe8B,sBAAsBjmB,EAAWzmE,EAASkmF,EAAU1f,UAAYxmE,EAAOwmE,SACtF,IAAM0K,EAAUshB,GAAaY,iBAAiB3sB,EAAWzmE,EAASkmF,EAAU1f,UAAYxmE,EAAOwmE,SAC3F0K,EAAQhwE,OAAS,GACpBlB,EAAOqwE,OAAOa,QAAU5R,EAAYY,KAAKgR,GACzCshB,GAAa8B,eAAe7tB,EAAWzmE,IAEvC4qF,GAAe/3D,IAAI4zC,EAAU,GAAD5pD,OAAK7c,EAAOE,KAAI,kBAE9C,IAED,MAED,IAAK,cACJ,IAAMm2F,EAAkBje,EAAWpT,MAAK,SAAAtuD,GAAC,MAAa,YAATA,EAAEogB,EAAgB,IAC/D,GAAIu/D,EACeA,EAAgBh2F,MACxBqjB,SAAQ,SAAAoT,GACjB,IAAM92B,EAAS4qF,GAAe+E,aAAalpB,EAAW3vC,GACtD8zD,GAAe/3D,IAAI4zC,EAAU,GAAD5pD,OAAKqpE,EAAUhmF,KAAI,cAAA2c,OAAa7c,EAAOE,KAAI,aACvEF,EAAOqwE,OAAOO,SAAW5S,EAAOE,KAAK0sB,GAAe7B,aAAatiB,EAAWzmE,EAAQsvE,GAAUuJ,QAC9F,IAAMmZ,EAAQF,GAAUC,UAAUtrB,EAAWzmE,GACvCkxE,EAAUshB,GAAaW,mBAAmB1sB,EAAWzmE,EAAQgyF,GAC/D9gB,EAAQhwE,OAAS,GACpBlB,EAAOqwE,OAAOa,QAAU5R,EAAYY,KAAKgR,GACzCshB,GAAa8B,eAAe7tB,EAAWzmE,IAEvC4qF,GAAe/3D,IAAI4zC,EAAU,GAAD5pD,OAAK7c,EAAOE,KAAI,gBAE9C,IAED,MAED,IAAK,gBACJ,IAAMqG,EAAO6mF,EAAO7mF,KACd8vF,EAAkBje,EAAWpT,MAAK,SAAAtuD,GAAC,MAAa,YAATA,EAAEogB,EAAgB,IAC/D,GAAIu/D,EACeA,EAAgBh2F,MACxBqjB,SAAQ,SAAAoT,GACjB,IAAM92B,EAAS4qF,GAAe+E,aAAalpB,EAAW3vC,GACtD,OAAQvwB,EAAKlC,MACZ,KAAKq1E,GAAayd,KACjB,IAAIC,EAASlR,EAAU7V,OAAO7tE,SACxB60F,EAAkBjf,EAAWpT,MAAK,SAAAtuD,GAAC,MAAa,WAATA,EAAEogB,EAAe,IAC9D,GAAIugE,GAAmBA,EAAgBh3F,MAAO,CAC7C,IAAM6vF,EAAgBmH,EAAgBh3F,MAClC6vF,EAAchvF,OAAS,IAC1Bk2F,EAASlH,EAAc,GAEzB,CAEA,IADA,IAAMoH,EAAet5B,EAAOE,KAAK33D,EAAKmrE,MAAM1H,EAAA,WAE3C,IAAM6qB,EAAWlW,GAAkBe,YAAY0X,EAAQp3F,EAAOqwE,OAAO7tE,UAC/Dq8E,EAAU+L,GAAemD,uBAAuBtnB,EAAWzmE,GAAQqgE,QAAO,SAAA4E,GAC/E,OAAO0Z,GAAkBe,YAAY0X,EAAQnyB,GAAU4vB,CACxD,IACA,GAAIhW,EAAQ39E,OAAS,EAAG,CACvB,IAAM+jE,EAAS3F,EAAYY,KAAK2e,GAChC7+E,EAAOqwE,OAAOG,MAAM9sE,KAAK,CAAEmY,EAAG7b,EAAOqwE,OAAO7tE,SAASqZ,EAAGC,EAAG9b,EAAOqwE,OAAO7tE,SAASsZ,IAClF9b,EAAOqwE,OAAO7tE,SAASqZ,EAAIopD,EAAOppD,EAClC7b,EAAOqwE,OAAO7tE,SAASsZ,EAAImpD,EAAOnpD,CACnC,CACD,EAXS9W,EAAI,EAAGA,EAAIsyF,IAAgBtyF,EAACglE,IAYrC4gB,GAAe/3D,IAAI4zC,EAAU,GAAD5pD,OAAK7c,EAAOE,KAAI,qBAC5C,MAED,KAAKw5E,GAAaY,KACjB,IAAI8c,EAASlR,EAAU7V,OAAO7tE,SACxB60F,EAAkBjf,EAAWpT,MAAK,SAAAtuD,GAAC,MAAa,WAATA,EAAEogB,EAAe,IAC9D,GAAIugE,GAAmBA,EAAgBh3F,MAAO,CAC7C,IAAM6vF,EAAgBmH,EAAgBh3F,MAClC6vF,EAAchvF,OAAS,IAC1Bk2F,EAASlH,EAAc,GAEzB,CAEA,IADA,IAAMoH,EAAet5B,EAAOE,KAAK33D,EAAKmrE,MAAMiQ,EAAA,WAE3C,IAAMkT,EAAWlW,GAAkBe,YAAY0X,EAAQp3F,EAAOqwE,OAAO7tE,UAC/Dq8E,EAAU+L,GAAemD,uBAAuBtnB,EAAWzmE,GAAQqgE,QAAO,SAAA4E,GAC/E,OAAO0Z,GAAkBe,YAAY0X,EAAQnyB,GAAU4vB,CACxD,IACA,GAAIhW,EAAQ39E,OAAS,EAAG,CACvB,IAAM+jE,EAAS3F,EAAYY,KAAK2e,GAChC7+E,EAAOqwE,OAAOG,MAAM9sE,KAAK,CAAEmY,EAAG7b,EAAOqwE,OAAO7tE,SAASqZ,EAAGC,EAAG9b,EAAOqwE,OAAO7tE,SAASsZ,IAClF9b,EAAOqwE,OAAO7tE,SAASqZ,EAAIopD,EAAOppD,EAClC7b,EAAOqwE,OAAO7tE,SAASsZ,EAAImpD,EAAOnpD,CACnC,CACD,EAXS9W,EAAI,EAAGA,EAAIsyF,IAAgBtyF,EAAC28E,IAYrCiJ,GAAe/3D,IAAI4zC,EAAU,GAAD5pD,OAAK7c,EAAOE,KAAI,qBAC5C,MAED,KAAKw5E,GAAa6d,KACjB,IAAMC,EAAWtR,EAAU7V,OAAO7tE,SAASqZ,EACrC47E,EAAWvR,EAAU7V,OAAO7tE,SAASsZ,EAC3CoqE,EAAU7V,OAAO7tE,SAASqZ,EAAI7b,EAAOqwE,OAAO7tE,SAASqZ,EACrDqqE,EAAU7V,OAAO7tE,SAASsZ,EAAI9b,EAAOqwE,OAAO7tE,SAASsZ,EACrD9b,EAAOqwE,OAAO7tE,SAASqZ,EAAI27E,EAC3Bx3F,EAAOqwE,OAAO7tE,SAASsZ,EAAI27E,EAC3B7M,GAAe/3D,IAAI4zC,EAAU,GAAD5pD,OAAKqpE,EAAUhmF,KAAI,SAAA2c,OAAQ7c,EAAOE,KAAI,4BAClE,MAED,KAAKw5E,GAAage,cAEjB,IADA,IAAMJ,EAAet5B,EAAOE,KAAK33D,EAAKmrE,MAAMmQ,EAAA,WAE3C,IAAMgT,EAAWlW,GAAkBe,YAAYwG,EAAU7V,OAAO7tE,SAAUxC,EAAOqwE,OAAO7tE,UAClFq8E,EAAU+L,GAAemD,uBAAuBtnB,EAAWyf,GAAW7lB,QAAO,SAAA4E,GAClF,OAAO0Z,GAAkBe,YAAY1/E,EAAOqwE,OAAO7tE,SAAUyiE,GAAU4vB,CACxE,IACA,GAAIhW,EAAQ39E,OAAS,EAAG,CACvB,IAAM+jE,EAAS3F,EAAYY,KAAK2e,GAChCqH,EAAU7V,OAAOG,MAAM9sE,KAAK,CAAEmY,EAAGqqE,EAAU7V,OAAO7tE,SAASqZ,EAAGC,EAAGoqE,EAAU7V,OAAO7tE,SAASsZ,IAC3FoqE,EAAU7V,OAAO7tE,SAASqZ,EAAIopD,EAAOppD,EACrCqqE,EAAU7V,OAAO7tE,SAASsZ,EAAImpD,EAAOnpD,CACtC,CACD,EAXS9W,EAAI,EAAGA,EAAIsyF,IAAgBtyF,EAAC68E,IAYrC+I,GAAe/3D,IAAI4zC,EAAU,GAAD5pD,OAAKqpE,EAAUhmF,KAAI,uBAAA2c,OAAsB7c,EAAOE,OAC5E,MAED,KAAKw5E,GAAa8C,aACjB,IAAM0O,EAAmBN,GAAeI,oBAAoBvkB,EAAWyf,GACjEwN,EAAgB9I,GAAeI,oBAAoBvkB,EAAWzmE,GAC9D23F,EAAwBhZ,GAAkBI,mBAAmBtY,EAAU8kB,WAAYmI,GACzF,GAAIxI,EAAiBvhC,MAAK,SAAAsb,GAAM,OAAI0yB,EAAsB3yB,MAAK,SAAA9/D,GAAC,OAAKA,EAAE2W,IAAMopD,EAAOppD,GAAO3W,EAAE4W,IAAMmpD,EAAOnpD,CAAE,GAAC,IAC5G8uE,GAAe/3D,IAAI4zC,EAAU,GAAD5pD,OAAKqpE,EAAUhmF,KAAI,uBAAA2c,OAAsB7c,EAAOE,WACtE,CACN,IAAM4+E,EAAarY,EAAU8kB,WAAWlrB,QAAO,SAAA4E,GAC9C,IAAM4Z,EAAU+L,GAAeI,oBAAoBvkB,EAAWyf,EAAWjhB,GACnE2yB,EAAc/Y,EAAQ50B,OAAM,SAAA8a,GAAE,OAAI6lB,GAAeO,iBAAiB1kB,EAAW1B,EAAI,CAAEmhB,GAAY,IAC/F2R,EAAkBhZ,EAAQl1B,MAAK,SAAAob,GAAE,OAAI4yB,EAAsB3yB,MAAK,SAAA9/D,GAAC,OAAKA,EAAE2W,IAAMkpD,EAAGlpD,GAAO3W,EAAE4W,IAAMipD,EAAGjpD,CAAE,GAAC,IAC5G,OAAO87E,GAAeC,CACvB,IACA,GAAI/Y,EAAW59E,OAAS,EAAG,CAC1B,IAAM+jE,EAAS3F,EAAYY,KAAK4e,GAChCoH,EAAU7V,OAAOG,MAAM9sE,KAAK,CAAEmY,EAAG7b,EAAOqwE,OAAO7tE,SAASqZ,EAAGC,EAAG9b,EAAOqwE,OAAO7tE,SAASsZ,IACrFoqE,EAAU7V,OAAO7tE,SAASqZ,EAAIopD,EAAOppD,EACrCqqE,EAAU7V,OAAO7tE,SAASsZ,EAAImpD,EAAOnpD,EACrC8uE,GAAe/3D,IAAI4zC,EAAU,GAAD5pD,OAAKqpE,EAAUhmF,KAAI,kBAAA2c,OAAiB7c,EAAOE,MACxE,MACC0qF,GAAe/3D,IAAI4zC,EAAU,GAAD5pD,OAAKqpE,EAAUhmF,KAAI,mBAAA2c,OAAkB7c,EAAOE,MAE1E,CACA,MAED,KAAKw5E,GAAa1b,OACjB,IAAMs5B,EAAet5B,EAAOE,KAAK33D,EAAKmrE,MAChCmN,EAAUpY,EAAU8kB,WACxBlrB,QAAO,SAAA4E,GAAM,OAAI0Z,GAAkBe,YAAY1/E,EAAOqwE,OAAO7tE,SAAUyiE,IAAWqyB,CAAY,IAC9Fj3B,QAAO,SAAA4E,GAAM,OAAI2lB,GAAeI,oBAAoBvkB,EAAWzmE,EAAQilE,GAAQhb,OAAM,SAAA8a,GAAE,OAAI6lB,GAAeO,iBAAiB1kB,EAAW1B,EAAI,CAAE/kE,GAAS,GAAC,IACxJ,GAAI6+E,EAAQ39E,OAAS,EAAG,CACvB,IAAM+jE,EAAS3F,EAAYY,KAAK2e,GAChC7+E,EAAOqwE,OAAOG,MAAM9sE,KAAK,CAAEmY,EAAG7b,EAAOqwE,OAAO7tE,SAASqZ,EAAGC,EAAG9b,EAAOqwE,OAAO7tE,SAASsZ,IAClF9b,EAAOqwE,OAAO7tE,SAASqZ,EAAIopD,EAAOppD,EAClC7b,EAAOqwE,OAAO7tE,SAASsZ,EAAImpD,EAAOnpD,CACnC,CACA8uE,GAAe/3D,IAAI4zC,EAAU,GAAD5pD,OAAK7c,EAAOE,KAAI,uCAI/C,IAED,MAED,IAAK,aACJ,IAAMm2F,EAAkBje,EAAWpT,MAAK,SAAAtuD,GAAC,MAAa,YAATA,EAAEogB,EAAgB,IAC/D,GAAIu/D,EAAiB,CACpB,IACMvX,EADgBuX,EAAgBh2F,MACLggE,QAAO,SAAA4E,GACvC,OAAO2lB,GAAeI,oBAAoBvkB,EAAWyf,EAAWjhB,GAAQhb,OAAM,SAAA8a,GAAE,OAAI6lB,GAAeO,iBAAiB1kB,EAAW1B,EAAI,CAAEmhB,GAAY,GAClJ,IACA,GAAIpH,EAAW59E,OAAS,EAAG,CAC1B,IAAM+jE,EAAS3F,EAAYY,KAAK4e,GAChCoH,EAAU7V,OAAOG,MAAM9sE,KAAK,CAAEmY,EAAGqqE,EAAU7V,OAAO7tE,SAASqZ,EAAGC,EAAGoqE,EAAU7V,OAAO7tE,SAASsZ,IAC3FoqE,EAAU7V,OAAO7tE,SAASqZ,EAAIopD,EAAOppD,EACrCqqE,EAAU7V,OAAO7tE,SAASsZ,EAAImpD,EAAOnpD,CACtC,MACC8uE,GAAe/3D,IAAI4zC,EAAU,GAAD5pD,OAAKqpE,EAAUhmF,KAAI,eAEjD,CACA,MAED,IAAK,SACJ,IAAMm2F,EAAkBje,EAAWpT,MAAK,SAAAtuD,GAAC,MAAa,YAATA,EAAEogB,EAAgB,IAC/D,GAAIu/D,EACeA,EAAgBh2F,MACxBqjB,SAAQ,SAAAoT,GACjB,IAAM92B,EAAS4qF,GAAe+E,aAAalpB,EAAW3vC,GAChDq5C,EAAQnwE,EAAOmwE,MAAM9P,QAAO,SAAAp/D,GAAC,OAAIA,EAAEsf,WAAa4uD,GAAiBsY,IAAI,IAC3E,GAAItX,EAAMjvE,OAAS,EAAG,CACrB,IAAMiY,EAAOmmD,EAAYY,KAAKiQ,GAC9BnwE,EAAOmwE,MAAQnwE,EAAOmwE,MAAM9P,QAAO,SAAAp/D,GAAC,OAAIA,EAAE61B,KAAO3d,EAAK2d,EAAE,IACxD,IAAM+nD,EAAUF,GAAkBI,mBAAmBtY,EAAU8kB,WAAYX,GAAeI,oBAAoBvkB,EAAWzmE,IACvHqgE,QAAO,SAAA4E,GAAM,OAAI2lB,GAAeO,iBAAiB1kB,EAAWxB,EAAO,IACrE,GAAI4Z,EAAQ39E,OAAS,EAAG,CACvB,IAAM+jE,EAAS3F,EAAYY,KAAK2e,GAC1BlY,EAAOiJ,GAAQwC,iBACrBzL,EAAKwJ,MAAMzsE,KAAKyV,GAChBwtD,EAAKnkE,SAASqZ,EAAIopD,EAAOppD,EACzB8qD,EAAKnkE,SAASsZ,EAAImpD,EAAOnpD,EACzB2qD,EAAUE,KAAKjjE,KAAKijE,EACrB,CACAikB,GAAe/3D,IAAI4zC,EAAU,GAAD5pD,OAAK7c,EAAOE,KAAI,cAAA2c,OAAa1D,EAAKjZ,MAC/D,MACC0qF,GAAe/3D,IAAI4zC,EAAU,GAAD5pD,OAAK7c,EAAOE,KAAI,4BAE9C,IAED,MAED,IAAK,QACJ,IAAMm2F,EAAkBje,EAAWpT,MAAK,SAAAtuD,GAAC,MAAa,YAATA,EAAEogB,EAAgB,IAC/D,GAAIu/D,EACeA,EAAgBh2F,MACxBqjB,SAAQ,SAAAoT,GACjB,IAAM92B,EAAS4qF,GAAe+E,aAAalpB,EAAW3vC,GAChDq5C,EAAS,GAAmBtzD,OAAO7c,EAAOmwE,OAAOtzD,OAAO7c,EAAOowE,SACrE,GAAID,EAAMjvE,OAAS,EAAG,CACrB,IAAMiY,EAAOmmD,EAAYY,KAAKiQ,GAC9BnwE,EAAOmwE,MAAQnwE,EAAOmwE,MAAM9P,QAAO,SAAAp/D,GAAC,OAAIA,EAAE61B,KAAO3d,EAAK2d,EAAE,IACxD92B,EAAOowE,QAAUpwE,EAAOowE,QAAQ/P,QAAO,SAAAp/D,GAAC,OAAIA,EAAE61B,KAAO3d,EAAK2d,EAAE,IAC5DovD,EAAU9V,QAAQ1sE,KAAKyV,GACvByxE,GAAe/3D,IAAI4zC,EAAU,GAAD5pD,OAAKqpE,EAAUhmF,KAAI,gBAAA2c,OAAe1D,EAAKjZ,KAAI,UAAA2c,OAAS7c,EAAOE,MACxF,CACD,IAED,MAED,IAAK,gBACJ,IAAMmE,EAAO+oF,EAAO7mF,KACd8vF,EAAkBje,EAAWpT,MAAK,SAAAtuD,GAAC,MAAa,YAATA,EAAEogB,EAAgB,IAC/D,GAAIu/D,EACaA,EAAgBh2F,MACxBqjB,SAAQ,SAAAuhD,GACF0Z,GAAkBC,aAAanY,EAAU8kB,WAAYtmB,GAC7DvhD,SAAQ,SAAAqhD,GAAE,OAAIA,EAAG1gE,KAAOA,CAAI,GAClC,IACAumF,GAAe/3D,IAAI4zC,EAAU,GAAD5pD,OAAKqpE,EAAUhmF,KAAI,4BAAA2c,OAA2BxY,EAAKsf,cAAa,aAE7F,MAED,IAAK,aACJ,IAAM0yE,GAAkBje,EAAWpT,MAAK,SAAAtuD,GAAC,MAAa,YAATA,EAAEogB,EAAgB,IAC/D,GAAIu/D,GACWA,GAAgBh2F,MACxBqjB,SAAQ,SAAAigD,GACAgb,GAAkBK,YAAYvY,EAAU8kB,WAAY5nB,GAC5DjgD,SAAQ,SAAAqhD,GACZ,IAAME,EAAkC,CACvCppD,EAAGkpD,EAAGlpD,EACNC,EAAGipD,EAAGjpD,EACNzX,KAAM85E,GAAuByD,OAE9Bnb,EAAU8kB,WAAW7nF,KAAKuhE,EAC3B,GACD,IACA0Z,GAAkB2B,gBAAgB5B,QAClCkM,GAAe/3D,IAAI4zC,EAAU,GAAD5pD,OAAKqpE,EAAUhmF,KAAI,6BAEhD,MAED,IAAK,gBACJ,IAAMm2F,GAAkBje,EAAWpT,MAAK,SAAAtuD,GAAC,MAAa,YAATA,EAAEogB,EAAgB,IAC/D,GAAIu/D,GACaA,GAAgBh2F,MACxBqjB,SAAQ,SAAAuhD,GACf,IAAM52D,EAAOswE,GAAkBC,aAAanY,EAAU8kB,WAAYtmB,GAAQ5E,QAAO,SAAA0E,GAAE,OAAI6lB,GAAeO,iBAAiB1kB,EAAW1B,EAAG,IACrI0B,EAAU8kB,WAAa9kB,EAAU8kB,WAAWlrB,QAAO,SAAA0E,GAAE,OAAK12D,EAAK2N,SAAS+oD,EAAG,GAC5E,IACA4Z,GAAkB2B,gBAAgB5B,QAClCkM,GAAe/3D,IAAI4zC,EAAU,GAAD5pD,OAAKqpE,EAAUhmF,KAAI,+BAEhD,MAED,IAAK,eACJ,IAAMm2F,GAAkBje,EAAWpT,MAAK,SAAAtuD,GAAC,MAAa,YAATA,EAAEogB,EAAgB,IAC/D,GAAIu/D,GACWA,GAAgBh2F,MACxBqjB,SAAQ,SAAAigD,GACb,IAAMsB,EAAkC,CACvCppD,EAAG8nD,EAAK9nD,EACRC,EAAG6nD,EAAK7nD,EACRzX,KAAM85E,GAAuBqD,YAE9B/a,EAAU8kB,WAAW7nF,KAAKuhE,EAC3B,IACA0Z,GAAkB2B,gBAAgB5B,QAClCkM,GAAe/3D,IAAI4zC,EAAU,GAAD5pD,OAAKqpE,EAAUhmF,KAAI,yBAEhD,MAED,IAAK,eACJ,IAAM61F,GAAW3I,EAAO7mF,KAClB8vF,GAAkBje,EAAWpT,MAAK,SAAAtuD,GAAC,MAAa,YAATA,EAAEogB,EAAgB,IAC/D,GAAIu/D,GACeA,GAAgBh2F,MACxBqjB,SAAQ,SAAAoT,GACjB,IAAM92B,EAAS4qF,GAAe+E,aAAalpB,EAAW3vC,GAChDs3D,EAAShZ,GAAU+gB,UAAUJ,IAC7Bl1F,EAAOyW,KAAKG,MAAMH,KAAKC,UAAU62E,IACvCvtF,EAAKi2B,GAAKssC,EAAMC,OAChBrjE,EAAOowE,QAAQ1sE,KAAK7C,EACrB,IAED,MAED,IAAK,SACJ,IACMygE,GAAO,GACb,OAFa8rB,EAAO7mF,MAGnB,KAAK63E,GAAWb,OACfjc,GAAK59D,KAAI6F,MAAT+3D,GAAIuG,EAAS+R,GAAmBvY,UAAUhB,QAAO,SAAAn7D,GAAC,OAAIA,EAAEgrE,OAAOl0D,SAAS29D,GAAU4D,OAAO,IAAEzyB,KAAI,SAAA5lD,GAAC,OAAIA,EAAE4xB,EAAE,MACxG,MAED,KAAKsnD,GAAWvC,MACfva,GAAK59D,KAAI6F,MAAT+3D,GAAIuG,EAAS+R,GAAmBvY,UAAUhB,QAAO,SAAAn7D,GAAC,OAAIA,EAAEgrE,OAAOl0D,SAAS29D,GAAUkC,MAAM,IAAE/wB,KAAI,SAAA5lD,GAAC,OAAIA,EAAE4xB,EAAE,MACvG,MAED,KAAKsnD,GAAW0Z,UACfx2B,GAAK59D,KAAI6F,MAAT+3D,GAAIuG,EAAS+R,GAAmBvY,UAAUhB,QAAO,SAAAn7D,GAAC,OAAIA,EAAEhF,KAAKyjB,cAAc3H,SAAS,YAAY,IAAE8uC,KAAI,SAAA5lD,GAAC,OAAIA,EAAE4xB,EAAE,MAIjH,GAAIwqC,GAAKpgE,OAAS,EAAG,CACpB,IAAM4uE,GAAYxQ,EAAYY,KAAKoB,IAC7ByvB,GAAUnhB,GAAQC,gBAAgBb,GAAc8K,SAKtD,IAJAiM,GAAeE,oBAAoB8K,GAASjhB,GAAW,GAAI,IAC3DiW,GAAeU,mBAAmBsK,IAClChL,GAAeqB,SAAS2J,GAAS,IAE1BA,GAAQnvB,MAAQskB,EAAUtkB,OAAO,CACvC,IAAMyvB,GAActL,GAAe+B,eAAeiJ,IAAS1wB,QAAO,SAAAh7D,GAAC,OAAIA,EAAEhB,OAASsrE,GAAYsG,WAAW,IACzG8P,GAAeS,wBAAwBuK,GAASzxB,EAAYY,KAAKmxB,IAAc,IAC/EtL,GAAeU,mBAAmBsK,GACnC,CAEAA,GAAQvqB,QAAU0f,EAAU1f,QAC5BuqB,GAAQ7gB,OAAOxsE,KAAKi2E,GAAU2U,OAC9BvI,GAAe8C,eAAekI,IAC9BtqB,EAAUC,WAAWhjE,KAAKqtF,IAC1BR,GAAmBiB,gBAAgB/qB,EAAWh0C,KAAKuT,QACnD4kD,GAAe/3D,IAAI4zC,EAAU,GAAD5pD,OAAKqpE,EAAUhmF,KAAI,kBAAA2c,OAAiBk0E,GAAQ7wF,MACzE,EAIH,EAGM,OAAM6sF,GAAWlvB,GAAA,SAAAkvB,IAAAniF,EAAA,KAAAmiF,EAAA,IAqTvBgL,GArTYhL,GAAAA,GACL6G,cAAgB,SAAC1+C,GACvB,OAAOA,EAAOrG,QAAQ8a,MAAK,SAAA7kD,GAAC,MAAa,WAATA,EAAEgyB,EAAe,IAAI,SAAW,SACjE,EAHYi2D,GAKLiL,eAAiB,SAAC9iD,GACxB,OAAOA,EAAOrG,QAAQ8a,MAAK,SAAA7kD,GAAC,MAAa,sBAATA,EAAEgyB,EAA0B,IAAI,QAAU,MAC3E,EAPYi2D,GASLkL,qBAAuB,SAAC/iD,GAC9B,OAAOA,EAAOh1C,IACf,EAXY6sF,GAaLmL,wBAA0B,SAACpL,GACjC,OAAQA,EAAUh2D,IACjB,IAAK,SACJ,IAAMqhE,EAAcrL,EACpB,MAA6B,WAAzBqL,EAAYtD,SACR,8BAEF,kBAANh4E,OAAyBs7E,EAAYtD,SAAQ,YAE9C,IAAK,SAEJ,MAAM,gBAANh4E,OADoBiwE,EACezoF,MAEpC,IAAK,UACJ,IAAMsuF,EAAc7F,EACpB,MAAM,cAANjwE,OAAqBkwE,GAAYqL,qBAAqBzF,IAIxD,MAAO,EACR,EAjCY5F,GAmCLqL,qBAAuB,SAACp4F,GAC9B,IAAI8T,EAAQ,GACRzP,EAAO,GACX,GAAIrE,EAAO4yF,QAAS,CACnB,IAAIyF,GAAS,EAYb,OAV6B,IAAzBr4F,EAAO4yF,QAAQ9+E,MAClBA,EAAQ,MACE9T,EAAO4yF,QAAQ9+E,QAAUs3C,OAAOoV,WAC1C1sD,EAAQ,MACRukF,GAAS,IAETvkF,EAAK,SAAA+I,OAAY7c,EAAO4yF,QAAQ9+E,OAChCukF,GAAS,GAGFr4F,EAAO4yF,QAAQvuF,MACtB,KAAKkrE,GAAiBoL,WACrBt2E,EAAOg0F,EAAS,aAAe,YAC/B,MACD,KAAK9oB,GAAiBkJ,QACrBp0E,EAAOg0F,EAAS,UAAY,QAC5B,MACD,KAAK9oB,GAAiB6N,OACrB/4E,EAAOg0F,EAAS,SAAW,OAC3B,MACD,KAAK9oB,GAAiBwjB,QACrB1uF,EAAOg0F,EAAS,UAAY,SAC5B,MACD,KAAK9oB,GAAiB0jB,MACrB5uF,EAAOg0F,EAAS,QAAU,OAG7B,CAEA,IAAIv2F,EAAM,GACV,OAAQ9B,EAAOw/B,MAAMn7B,MACpB,KAAK65E,GAAgB4W,KACpBhzF,EAAM,OACN,MACD,KAAKo8E,GAAgB6W,SACpBjzF,EAAG,GAAA+a,OAAM/I,EAAK,cAAA+I,OAAaxY,GAC3B,MACD,KAAK65E,GAAgB8W,MACpBlzF,EAAG,GAAA+a,OAAM/I,EAAK,KAAA+I,OAAIxY,EAAI,YAAAwY,OAAW7c,EAAOw/B,MAAM2wD,OAAM,YACpD,MACD,KAAKjS,GAAgBtF,OAEnB92E,EADG9B,EAAOw/B,MAAM2wD,OAAS,EACtB,GAAAtzE,OAAM/I,EAAK,KAAA+I,OAAIxY,EAAI,0BAAAwY,OAAyB7c,EAAOw/B,MAAM2wD,QAEzD,GAAAtzE,OAAM/I,EAAK,KAAA+I,OAAIxY,EAAI,wBAKzB,OAAOvC,CACR,EA3FYirF,GA6FL0G,eAAiB,SAACv+C,EAAqBgxC,GAC7C,IAAI1mD,EAAQ,EAiCZ,OA/BA0V,EAAOkjC,WAAW10D,SAAQ,SAAAqK,GACzB,GAAiB,YAAbA,EAAM+I,GAAkB,CAC3B,IAAM67D,EAAc5kE,EACpB,OAAQ4kE,EAAYnzD,MAAMn7B,MACzB,KAAK65E,GAAgB4W,KACpBt1D,EAAQ,EACR,MAED,KAAK0+C,GAAgB6W,SACpBv1D,EAAQ,EACR,MAED,KAAK0+C,GAAgB8W,MACpBx1D,EAAQmzD,EAAYnzD,MAAM2wD,OAC1B,MAED,KAAKjS,GAAgBtF,OACpB,IAAM0f,EAAWpjD,EAAOkjC,WAAWpT,MAAK,SAAAtuD,GAAC,MAAa,WAATA,EAAEogB,EAAe,IAC9D,GAAIwhE,GAAgC,OAAnBA,EAASj4F,MAAiB,CAC1C,IAAMk2F,EAAS+B,EAASj4F,MAClB8Y,EAAO+sE,EAAU/V,MAAMnL,MAAK,SAAA/jE,GAAC,OAAIA,EAAE61B,KAAOy/D,CAAM,IAClDp9E,GAAQA,EAAKq/D,SAChBh5C,EAAQrmB,EAAKq/D,OAAOh5C,MAAQmzD,EAAYnzD,MAAM2wD,OAEhD,EAIH,CACD,IAEO3wD,CACR,EAhIYutD,GAkILC,qBAAuB,SAACF,EAAuC5G,GACrE,IAAMpH,EAAuB,GACzBz+E,EAAQysF,EAAUzsF,MAEhBk4F,EAAuC,GAC7C,OAAQzL,EAAUzoF,MACjB,IAAK,QACJk0F,EAAc70F,KAAK0rE,GAAoB6M,cACvCsc,EAAc70F,KAAK0rE,GAAoBwX,eACvC2R,EAAc70F,KAAK0rE,GAAoBuX,iBACvC,MACD,IAAK,SACJ4R,EAAc70F,KAAK0rE,GAAoByX,eACvC0R,EAAc70F,KAAK0rE,GAAoB0X,eAIzCZ,EAAU/V,MACR9P,QAAO,SAAAp/D,GAAC,OAAIs3F,EAAcv8E,SAAS/a,EAAEixE,YAAY,IACjDxuD,SAAQ,SAAAziB,GAAC,OAAI69E,EAAWp7E,KAAKzC,EAAE61B,GAAG,IAErB,OAAVz2B,GAAoBy+E,EAAW9iE,SAAS3b,KAE3CA,EADGy+E,EAAW59E,OAAS,EACf49E,EAAW,GAEX,MAIVgO,EAAUhO,WAAaA,EACvBgO,EAAUzsF,MAAQA,CACnB,EAjKY0sF,GAmKLE,qBAAuB,SAACH,EAAuCrmB,EAA2Byf,EAA2BhxC,GAC3H,IAAM4pC,EAAyC,GAC3Cz+E,EAAQysF,EAAUzsF,MAElB8vF,EAAS,EACb,GAA2B,WAAvBrD,EAAU+H,SAAuB,CACpC,IAAMyD,EAAWpjD,EAAOkjC,WAAWpT,MAAK,SAAAtuD,GAAC,MAAa,WAATA,EAAEogB,EAAe,IAC9D,GAAIwhE,GAAgC,OAAnBA,EAASj4F,MAAiB,CAC1C,IAAMk2F,EAAS+B,EAASj4F,MAClB8Y,EAAO+sE,EAAU/V,MAAMnL,MAAK,SAAA/jE,GAAC,OAAIA,EAAE61B,KAAOy/D,CAAM,IAClDp9E,GAAQA,EAAKq/D,SAChB2X,EAASh3E,EAAKq/D,OAAOh5C,MAEvB,CACD,MACC2wD,EAASrD,EAAU+H,SAGpB,IAAMzU,EAAQzB,GAAkBkC,YAAYpa,EAAU8kB,YAChD2E,EAAgBtF,GAAeI,oBAAoBvkB,EAAWyf,GACpEpH,EAAWp7E,KAAI6F,MAAfu1E,EAAUjX,EACN+iB,GAAeyF,YAAY5pB,EAAWmkB,GAAeI,oBAAoBvkB,EAAWyf,GAAYiK,GACjG9vB,QAAO,SAAA0E,GAAE,OAAI4Z,GAAkBwB,UAAUC,EAAO8P,EAAe,CAAEnrB,GAAK,OAE1D,OAAV1kE,GAAqC,IAAjBA,EAAMa,QAAiBb,EAAMspD,MAAK,SAAA7mC,GAAC,OAAKg8D,EAAW9iE,SAAS8G,EAAE,OAErFziB,EADGy+E,EAAW59E,OAAS,EACf,CAAE49E,EAAW,IAEb,IAIVgO,EAAUhO,WAAaA,EACvBgO,EAAUzsF,MAAQA,CACnB,EArMY0sF,GAuMLG,qBAAuB,SAACJ,EAAuCrmB,EAA2Byf,EAA2BhxC,EAAqB23C,GAA4B,IAADnhB,EACrKoT,EAAoD,GACtDz+E,EAAuB,QAAlBqrE,EAAGohB,EAAUzsF,aAAK,IAAAqrE,EAAAA,EAA6C,GAExE,GAAIohB,EAAUttD,MAAMn7B,OAAS65E,GAAgB4W,KAC5ChW,EAAWp7E,KAAKwiF,EAAUpvD,IAC1Bz2B,EAAQ,CAAE6lF,EAAUpvD,QACd,CACN,IAAMq5D,EAASpD,GAAY0G,eAAev+C,EAAQgxC,GAE9CgK,EAAgBtF,GAAeI,oBAAoBvkB,EAAWyf,GAC5DiS,EAAcjjD,EAAOkjC,WAAWpT,MAAK,SAAAtuD,GAAC,MAAa,WAATA,EAAEogB,EAAe,IAKjE,GAJIqhE,IACHjI,EAAgBiI,EAAY93F,OAGzBysF,EAAU8F,QAAS,CACtB,IAAMxS,EAAQzB,GAAkBkC,YAAYpa,EAAU8kB,YACtD,OAAQuB,EAAU8F,QAAQvuF,MACzB,KAAKkrE,GAAiBoL,WACrBmE,EAAWp7E,KAAI6F,MAAfu1E,EAAUjX,EACN+iB,GAAeqF,eAAexpB,EAAWypB,EAAeC,GACzD9vB,QAAO,SAAAp8D,GAAC,OAAIA,EAAE6yB,KAAOovD,EAAUpvD,EAAE,IACjCupC,QAAO,SAAAp8D,GAAC,OAAIA,EAAEosE,OAAOhoE,QAAU0mE,GAAeuc,IAAI,IAClDjrB,QAAO,SAAAp8D,GAAC,OAAIiiF,EAAU7V,OAAOQ,QAAU5sE,EAAEosE,OAAOS,MAAM,IACtDzQ,QAAO,SAAAp8D,GAAC,OAAI06E,GAAkBwB,UAAUC,EAAO8P,EAAetF,GAAeI,oBAAoBvkB,EAAWxiE,GAAG,IAC/Gs7D,MAAK,SAACv9C,EAAGC,GACT,IAAMu2E,EAAmB5N,GAAeI,oBAAoBvkB,EAAWyf,GACjEuS,EAAW7N,GAAeI,oBAAoBvkB,EAAWzkD,GACzD02E,EAAW9N,GAAeI,oBAAoBvkB,EAAWxkD,GAG/D,OAFkB08D,GAAkBU,eAAeoZ,EAAUD,GAC3C7Z,GAAkBU,eAAeqZ,EAAUF,EAE9D,IACC1tC,KAAI,SAAA7mD,GAAC,OAAIA,EAAE6yB,EAAE,MAEhB,MACD,KAAKy4C,GAAiBkJ,QACrBqG,EAAWp7E,KAAI6F,MAAfu1E,EAAUjX,EACN+iB,GAAeqF,eAAexpB,EAAWypB,EAAeC,GACzD9vB,QAAO,SAAAp8D,GAAC,OAAIA,EAAE6yB,KAAOovD,EAAUpvD,EAAE,IACjCupC,QAAO,SAAAp8D,GAAC,OAAIA,EAAEosE,OAAOhoE,QAAU0mE,GAAeuc,IAAI,IAClDjrB,QAAO,SAAAp8D,GAAC,OAAIiiF,EAAU7V,OAAOQ,QAAU5sE,EAAEosE,OAAOS,MAAM,IACtDzQ,QAAO,SAAAp8D,GAAC,OAAI4oF,EAAiB5oF,EAAEuiE,UAAY0f,EAAU1f,QAAYviE,EAAEuiE,UAAY0f,EAAU1f,OAAQ,IACjGnG,QAAO,SAAAp8D,GAAC,OAAI06E,GAAkBwB,UAAUC,EAAO8P,EAAetF,GAAeI,oBAAoBvkB,EAAWxiE,GAAG,IAC/Gs7D,MAAK,SAACv9C,EAAGC,GACT,IAAMu2E,EAAmB5N,GAAeI,oBAAoBvkB,EAAWyf,GACjEuS,EAAW7N,GAAeI,oBAAoBvkB,EAAWzkD,GACzD02E,EAAW9N,GAAeI,oBAAoBvkB,EAAWxkD,GAG/D,OAFkB08D,GAAkBU,eAAeoZ,EAAUD,GAC3C7Z,GAAkBU,eAAeqZ,EAAUF,EAE9D,IACC1tC,KAAI,SAAA7mD,GAAC,OAAIA,EAAE6yB,EAAE,MAEhB,MACD,KAAKy4C,GAAiB6N,OACrB0B,EAAWp7E,KAAI6F,MAAfu1E,EAAUjX,EACN+iB,GAAeqF,eAAexpB,EAAWypB,EAAeC,GACzD9vB,QAAO,SAAAp8D,GAAC,OAAIA,EAAE6yB,KAAOovD,EAAUpvD,EAAE,IACjCupC,QAAO,SAAAp8D,GAAC,OAAIA,EAAEosE,OAAOhoE,QAAU0mE,GAAeuc,IAAI,IAClDjrB,QAAO,SAAAp8D,GAAC,OAAI4oF,EAAiB5oF,EAAEuiE,UAAY0f,EAAU1f,QAAYviE,EAAEuiE,UAAY0f,EAAU1f,OAAQ,IACjGnG,QAAO,SAAAp8D,GAAC,OAAI06E,GAAkBwB,UAAUC,EAAO8P,EAAetF,GAAeI,oBAAoBvkB,EAAWxiE,GAAG,IAC/Gs7D,MAAK,SAACv9C,EAAGC,GACT,IAAMu2E,EAAmB5N,GAAeI,oBAAoBvkB,EAAWyf,GACjEuS,EAAW7N,GAAeI,oBAAoBvkB,EAAWzkD,GACzD02E,EAAW9N,GAAeI,oBAAoBvkB,EAAWxkD,GAG/D,OAFkB08D,GAAkBU,eAAeoZ,EAAUD,GAC3C7Z,GAAkBU,eAAeqZ,EAAUF,EAE9D,IACC1tC,KAAI,SAAA7mD,GAAC,OAAIA,EAAE6yB,EAAE,MAEhB,MACD,KAAKy4C,GAAiBwjB,QACrBjU,EAAWp7E,KAAI6F,MAAfu1E,EAAUjX,EACN+iB,GAAeyF,YAAY5pB,EAAWypB,EAAeC,GACtD9vB,QAAO,SAAA0E,GAAE,OAAI4Z,GAAkBwB,UAAUC,EAAO8P,EAAe,CAAEnrB,GAAK,IACtExF,MAAK,SAACv9C,EAAGC,GAGT,OAFkB08D,GAAkBe,YAAY19D,EAAGkkE,EAAU7V,OAAO7tE,UAClDm8E,GAAkBe,YAAYz9D,EAAGikE,EAAU7V,OAAO7tE,SAErE,MAEF,MACD,KAAK+sE,GAAiB0jB,MACrBnU,EAAWp7E,KAAI6F,MAAfu1E,EAAUjX,EACN+iB,GAAe0F,UAAU7pB,EAAWypB,EAAeC,GACpD5wB,MAAK,SAACv9C,EAAGC,GAGT,OAFkB08D,GAAkBe,YAAY19D,EAAGkkE,EAAU7V,OAAO7tE,UAClDm8E,GAAkBe,YAAYz9D,EAAGikE,EAAU7V,OAAO7tE,SAErE,MAKAsqF,EAAU8F,QAAQ9+E,QAAUs3C,OAAOoV,UACtCngE,EAAK,GAAAwc,OAAQiiE,IAES,IAAjBz+E,EAAMa,QAAiBb,EAAMspD,MAAK,SAAA7mC,GAAC,OAAKg8D,EAAW9iE,SAAS8G,EAAE,OAClEziB,EAAKwnE,EAAQiX,EAAWh7E,MAAM,EAAGgpF,EAAU8F,QAAQ9+E,QAGtD,CACD,CAEAg5E,EAAUhO,WAAaA,EACvBgO,EAAUzsF,MAAQA,CACnB,EC1pDM,OAAMs4F,GAAU96B,GAAA,SAAA86B,IAAA/tF,EAAA,KAAA+tF,EAAA,IAqNtB16B,GArNY06B,GAAAA,GACLC,SAAW,iBAAkB,CACnC9hE,GAAI,kBACJ52B,KAAM,oBACNyhE,OAAQjB,EAASQ,UAAUpqC,GAC3Bre,YAAa,oDACbyqE,SAAU,GACVK,OAAO,EACPrR,YAAa9C,GAAoBwC,KACjCrxD,SAAU4uD,GAAiByC,KAC3BgW,MAAO,EACPpP,OAAQ,KACRwL,MAAO,KACPoK,OAAQ,CACPv/C,QAAS,CACR6pC,GAAcmC,aAAaxI,GAAee,kCAAkC9D,GAAU2K,QAAS,EAAG5K,GAAkB+L,aAGtH9kB,SAAU,GACV0a,QAAS,GACT,EApBW2nB,GAsBLE,WAAa,iBAAkB,CACrC/hE,GAAI,oBACJ52B,KAAM,yBACNyhE,OAAQjB,EAASQ,UAAUpqC,GAC3Bre,YAAa,kDACbyqE,SAAU,GACVK,OAAO,EACPrR,YAAa9C,GAAoBwC,KACjCrxD,SAAU4uD,GAAiByC,KAC3BgW,MAAO,EACPpP,OAAQ,KACRwL,MAAO,KACPoK,OAAQ,CACPv/C,QAAS,CACR6pC,GAAcmC,aAAaxI,GAAee,kCAAkC9D,GAAU2K,QAAS,EAAG5K,GAAkByL,WAGtHxkB,SAAU,GACV0a,QAAS,GACT,EAzCW2nB,GA2CLG,OAAS,iBAAkB,CACjChiE,GAAI,gBACJ52B,KAAM,mBACNyhE,OAAQjB,EAASQ,UAAUpqC,GAC3Bre,YAAa,mDACbyqE,SAAU,GACVK,OAAO,EACPrR,YAAa9C,GAAoBwC,KACjCrxD,SAAU4uD,GAAiByC,KAC3BgW,MAAO,EACPpP,OAAQ,KACRwL,MAAO,KACPoK,OAAQ,CACPv/C,QAAS,CACR6pC,GAAcwD,WAAW,KAG3B5lB,SAAU,GACV0a,QAAS,GACT,EA9DW2nB,GAgELI,KAAO,iBAAkB,CAC/BjiE,GAAI,cACJ52B,KAAM,kBACNyhE,OAAQjB,EAASQ,UAAUpqC,GAC3Bre,YAAa,yDACbyqE,SAAU,GACVK,OAAO,EACPrR,YAAa9C,GAAoBwC,KACjCrxD,SAAU4uD,GAAiByC,KAC3BgW,MAAO,EACPpP,OAAQ,KACRwL,MAAO,KACPoK,OAAQ,CACPv/C,QAAS,CACR6pC,GAAcmC,aAAaxI,GAAee,kCAAkC9D,GAAU2K,QAAS,EAAG5K,GAAkByL,SACpHpC,GAAcmC,aAAaxI,GAAee,kCAAkC9D,GAAU2K,QAAS,EAAG5K,GAAkB+L,WACpH1C,GAAcmC,aAAaxI,GAAeO,0BAA0BtD,GAAU2K,QAAS,EAAG3K,GAAU0K,YACpGtB,GAAcmC,aAAaxI,GAAeO,0BAA0BtD,GAAU2K,QAAS,EAAG3K,GAAU2K,UACpGvB,GAAcmC,aAAaxI,GAAeO,0BAA0BtD,GAAU2K,QAAS,EAAG3K,GAAUuJ,UAGtGviB,SAAU,GACV0a,QAAS,GACT,EAvFW2nB,GAyFLK,MAAQ,iBAAkB,CAChCliE,GAAI,eACJ52B,KAAM,kBACNyhE,OAAQjB,EAASQ,UAAUpqC,GAC3Bre,YAAa,wDACbyqE,SAAU,GACVK,OAAO,EACPrR,YAAa9C,GAAoBwC,KACjCrxD,SAAU4uD,GAAiByC,KAC3BgW,MAAO,EACPpP,OAAQ,KACRwL,MAAO,KACPoK,OAAQ,CACPv/C,QAAS,CACR6pC,GAAcmC,aAAaxI,GAAewB,mCAAmCvE,GAAU2K,QAAS,EAAG/K,GAAmBkM,WACtH1C,GAAcmC,aAAaxI,GAAewB,mCAAmCvE,GAAU2K,QAAS,EAAG/K,GAAmBmM,SACtH3C,GAAcmC,aAAaxI,GAAewB,mCAAmCvE,GAAU2K,QAAS,EAAG/K,GAAmBoM,eAGxHhlB,SAAU,GACV0a,QAAS,GACT,EA9GW2nB,GAgHLtK,WAAa,iBAAkB,CACrCv3D,GAAI,oBACJ52B,KAAM,uBACNyhE,OAAQjB,EAASQ,UAAUpqC,GAC3Bre,YAAa,wDACbyqE,SAAU,GACVK,OAAO,EACPrR,YAAa9C,GAAoBwC,KACjCrxD,SAAU4uD,GAAiByC,KAC3BgW,MAAO,EACPpP,OAAQ,KACRwL,MAAO,KACPoK,OAAQ,CACPv/C,QAAS,CACR6pC,GAAcmC,aAAaxI,GAAegC,wCAAwC/E,GAAU2K,QAAS,EAAG/K,GAAmBkM,WAC3H1C,GAAcmC,aAAaxI,GAAegC,wCAAwC/E,GAAU2K,QAAS,EAAG/K,GAAmBmM,SAC3H3C,GAAcmC,aAAaxI,GAAegC,wCAAwC/E,GAAU2K,QAAS,EAAG/K,GAAmBoM,eAG7HhlB,SAAU,GACV0a,QAAS,GACT,EArIW2nB,GAuILM,SAAW,iBAAkB,CACnCniE,GAAI,kBACJ52B,KAAM,mBACNyhE,OAAQjB,EAASQ,UAAUpqC,GAC3Bre,YAAa,mDACbyqE,SAAU,GACVK,OAAO,EACPrR,YAAa9C,GAAoBwC,KACjCrxD,SAAU4uD,GAAiByC,KAC3BgW,MAAO,EACPpP,OAAQ,KACRwL,MAAO,KACPoK,OAAQ,CACPv/C,QAAS,CACR6pC,GAAcmC,aAAaxI,GAAeO,0BAA0BtD,GAAU2K,QAAS,EAAG3K,GAAU0K,cAGtG1jB,SAAU,GACV0a,QAAS,GACT,EA1JW2nB,GA4JLO,KAAO,iBAAkB,CAC/BpiE,GAAI,cACJ52B,KAAM,eACNyhE,OAAQjB,EAASQ,UAAUpqC,GAC3Bre,YAAa,oDACbyqE,SAAU,GACVK,OAAO,EACPrR,YAAa9C,GAAoBwC,KACjCrxD,SAAU4uD,GAAiByC,KAC3BgW,MAAO,EACPpP,OAAQ,KACRwL,MAAO,KACPoK,OAAQ,CACPv/C,QAAS,CACR6pC,GAAcmC,aAAaxI,GAAeO,0BAA0BtD,GAAU2K,QAAS,EAAG3K,GAAU2K,YAGtG3jB,SAAU,GACV0a,QAAS,GACT,EA/KW2nB,GAiLLQ,UAAY,iBAAkB,CACpCriE,GAAI,mBACJ52B,KAAM,oBACNyhE,OAAQjB,EAASQ,UAAUpqC,GAC3Bre,YAAa,mDACbyqE,SAAU,GACVK,OAAO,EACPrR,YAAa9C,GAAoBwC,KACjCrxD,SAAU4uD,GAAiByC,KAC3BgW,MAAO,EACPpP,OAAQ,KACRwL,MAAO,KACPoK,OAAQ,CACPv/C,QAAS,CACR6pC,GAAcmC,aAAaxI,GAAeO,0BAA0BtD,GAAU2K,QAAS,EAAG3K,GAAUuJ,UAGtGviB,SAAU,GACV0a,QAAS,GACT,EApMW2nB,GAsMLt3B,QAAU,WAChB,IAAMC,EAAoB,CACzBq3B,GAAWC,WACXD,GAAWE,aACXF,GAAWG,SACXH,GAAWI,OACXJ,GAAWK,QACXL,GAAWtK,aACXsK,GAAWM,WACXN,GAAWO,OACXP,GAAWQ,aAGZ,OAAO75B,EAAYC,KAAK+B,GAAM,SAAAt8D,GAAC,OAAIA,EAAE9E,IAAI,GAC1C,EC9MM,OAAMk5F,GAAcv7B,GAAA,SAAAu7B,IAAAxuF,EAAA,KAAAwuF,EAAA,IAs0B1Bn7B,GAt0BYm7B,GAAAA,GACLC,QAAU,iBAAwB,CACxCviE,GAAI,qBACJ52B,KAAM,UACNyhE,OAAQ,GACRlpD,YAAa,uDACbshE,iBAAkB,GAClBzjB,SAAU,CACTmf,GAAaa,mBAAmB,oBAAqBhH,GAAUuJ,MAAO,GACtEpD,GAAaS,mBAAmB,oBAAqBzG,GAAUuL,UAAW,IAE3EhK,QAAS,CACR,CACCl6C,GAAI,mBACJ52B,KAAM,UACN+3E,cAAe,CACdC,GAAoBsB,SAErBpB,WAAY,CACXG,GAAuB3wE,QAExBinC,QAAS,CACR6pC,GAAce,QACdf,GAAcgC,sBAGhB,CACC5jD,GAAI,mBACJ52B,KAAM,iBACN+3E,cAAe,GACfG,WAAY,CACXG,GAAuB3wE,QAExBinC,QAAS,CACR6pC,GAAciD,cACdjD,GAAcgC,sBAGhB,CACC5jD,GAAI,mBACJ52B,KAAM,YACN+3E,cAAe,GACfG,WAAY,CACXG,GAAuB3wE,QAExBinC,QAAS,CACR6pC,GAAcmC,aAAaxI,GAAeoC,6BAA6BnF,GAAU0K,UAAW,IAC5FtB,GAAcgC,uBAIjB,EAnDW0e,GAqDLE,WAAa,iBAAwB,CAC3CxiE,GAAI,wBACJ52B,KAAM,aACNyhE,OAAQjB,EAASQ,UAAUpqC,GAC3Bre,YAAa,kCACbshE,iBAAkB,GAClBzjB,SAAU,CACTmf,GAAaW,2BAA2B,uBAAwB/G,GAAkByL,OAAQ,IAE3F9J,QAAS,CACR,CACCl6C,GAAI,sBACJ52B,KAAM,2BACN+3E,cAAe,CACdC,GAAoByc,oBAErBvc,WAAY,CACXG,GAAuB3wE,QAExBinC,QAAS,CACR6pC,GAAcod,aAAa6C,GAAWC,WAAW9hE,MAGnD,CACCA,GAAI,sBACJ52B,KAAM,gCACN+3E,cAAe,CACdC,GAAoByc,oBAErBvc,WAAY,CACXG,GAAuB3wE,QAExBinC,QAAS,CACR6pC,GAAcod,aAAa6C,GAAWE,aAAa/hE,MAGrD,CACCA,GAAI,sBACJ52B,KAAM,0BACN+3E,cAAe,CACdC,GAAoByc,oBAErBvc,WAAY,CACXG,GAAuB3wE,QAExBinC,QAAS,CACR6pC,GAAcod,aAAa6C,GAAWG,SAAShiE,MAGjD,CACCA,GAAI,sBACJ52B,KAAM,yBACN+3E,cAAe,CACdC,GAAoByc,oBAErBvc,WAAY,CACXG,GAAuB3wE,QAExBinC,QAAS,CACR6pC,GAAcod,aAAa6C,GAAWI,OAAOjiE,MAG/C,CACCA,GAAI,sBACJ52B,KAAM,yBACN+3E,cAAe,CACdC,GAAoByc,oBAErBvc,WAAY,CACXG,GAAuB3wE,QAExBinC,QAAS,CACR6pC,GAAcod,aAAa6C,GAAWK,QAAQliE,MAGhD,CACCA,GAAI,sBACJ52B,KAAM,8BACN+3E,cAAe,CACdC,GAAoByc,oBAErBvc,WAAY,CACXG,GAAuB3wE,QAExBinC,QAAS,CACR6pC,GAAcod,aAAa6C,GAAWtK,aAAav3D,MAGrD,CACCA,GAAI,sBACJ52B,KAAM,0BACN+3E,cAAe,CACdC,GAAoByc,oBAErBvc,WAAY,CACXG,GAAuB3wE,QAExBinC,QAAS,CACR6pC,GAAcod,aAAa6C,GAAWM,WAAWniE,MAGnD,CACCA,GAAI,sBACJ52B,KAAM,sBACN+3E,cAAe,CACdC,GAAoByc,oBAErBvc,WAAY,CACXG,GAAuB3wE,QAExBinC,QAAS,CACR6pC,GAAcod,aAAa6C,GAAWO,OAAOpiE,MAG/C,CACCA,GAAI,sBACJ52B,KAAM,2BACN+3E,cAAe,CACdC,GAAoByc,oBAErBvc,WAAY,CACXG,GAAuB3wE,QAExBinC,QAAS,CACR6pC,GAAcod,aAAa6C,GAAWQ,YAAYriE,OAIrD,EArLWsiE,GAuLLG,KAAO,iBAAwB,CACrCziE,GAAI,kBACJ52B,KAAM,OACNyhE,OAAQ,GACRlpD,YAAa,2DACbshE,iBAAkB,GAClBzjB,SAAU,CACTmf,GAAaS,mBAAmB,iBAAkBzG,GAAUmL,SAAU,GACtEnF,GAAaW,2BAA2B,iBAAkB/G,GAAkByL,OAAQ,GACpFrF,GAAaO,yBAAyB,iBAAkB5G,GAAoBsI,MAE7E1G,QAAS,CACR,CACCl6C,GAAI,gBACJ52B,KAAM,iBACN+3E,cAAe,GACfG,WAAY,CACXG,GAAuB4B,MAAM5K,GAAiB6N,OAAQhyB,OAAOoV,UAAW,KAEzE3xB,QAAS,CACR6pC,GAAc8E,WAAW,KAG3B,CACC1mD,GAAI,gBACJ52B,KAAM,wBACN+3E,cAAe,GACfG,WAAY,CACXG,GAAuB4B,MAAM5K,GAAiB6N,OAAQhyB,OAAOoV,UAAW,KAEzE3xB,QAAS,CACR6pC,GAAcmC,aAAaxI,GAAee,kCAAkC9D,GAAU2K,QAAS,EAAG5K,GAAkB+L,aAGtH,CACCtkD,GAAI,gBACJ52B,KAAM,oBACN+3E,cAAe,GACfG,WAAY,CACXG,GAAuB4B,MAAM5K,GAAiB6N,OAAQhyB,OAAOoV,UAAW,KAEzE3xB,QAAS,CACR6pC,GAAcmC,aAAaxI,GAAee,kCAAkC9D,GAAU2K,QAAS,EAAG5K,GAAkByL,WAGtH,CACChkD,GAAI,gBACJ52B,KAAM,0BACN+3E,cAAe,GACfG,WAAY,CACXG,GAAuB4B,MAAM5K,GAAiBkJ,QAASrtB,OAAOoV,UAAW,KAE1E3xB,QAAS,CACR6pC,GAAcC,OAAO,CACpBH,QAAQ,EACR3G,MAAOpC,GAAUmL,SACjBnJ,MAAOnC,GAAU2K,QACjBnB,WAAY,EACZC,IAAK,CACJL,GAAcmC,aAAaxI,GAAeS,4BAA4BxD,GAAU2K,QAAS,EAAG3K,GAAU0K,YACtGtB,GAAcmC,aAAaxI,GAAeS,4BAA4BxD,GAAU2K,QAAS,EAAG3K,GAAU2K,UACtGvB,GAAcmC,aAAaxI,GAAeS,4BAA4BxD,GAAU2K,QAAS,EAAG3K,GAAUuJ,cAM3G,EA1PWugB,GA4PLI,UAAY,iBAAwB,CAC1C1iE,GAAI,uBACJ52B,KAAM,YACNyhE,OAAQ,GACRlpD,YAAa,wEACbshE,iBAAkB,GAClBzjB,SAAU,CACTmf,GAAaS,mBAAmB,sBAAuBzG,GAAUmL,SAAU,GAC3EnF,GAAaoB,gCAAgC,sBAAuBnH,GAAcoE,oBAAqB5E,GAAmBoM,WAAY,GACtI7F,GAAaoB,gCAAgC,sBAAuBnH,GAAcoE,oBAAqB5E,GAAmBmM,OAAQ,GAClI5F,GAAaoB,gCAAgC,sBAAuBnH,GAAcoE,oBAAqB5E,GAAmBkM,SAAU,GACpI3F,GAAakB,+BAA+B,sBAAuBjH,GAAc4D,mBAAoBjE,GAAkB+L,SAAU,IAElIpK,QAAS,CACR,CACCl6C,GAAI,qBACJ52B,KAAM,oBACN+3E,cAAe,GACfG,WAAY,CACXG,GAAuB4B,MAAM5K,GAAiB6N,OAAQ,EAAG,KAE1DvuC,QAAS,CACR6pC,GAAcuF,kBAGhB,CACCnnD,GAAI,qBACJ52B,KAAM,uBACN+3E,cAAe,GACfG,WAAY,CACXG,GAAuB4B,MAAM5K,GAAiB6N,OAAQhyB,OAAOoV,UAAW,KAEzE3xB,QAAS,CACR6pC,GAAc2E,gBAGhB,CACCvmD,GAAI,qBACJ52B,KAAM,QACN+3E,cAAe,GACfG,WAAY,CACXG,GAAuB4B,MAAM5K,GAAiB6N,OAAQhyB,OAAOoV,UAAW,KAEzE3xB,QAAS,CACR6pC,GAAc8E,WAAW,GACzB9E,GAAce,UAGhB,CACC3iD,GAAI,qBACJ52B,KAAM,oBACN+3E,cAAe,GACfG,WAAY,CACXG,GAAuB4B,MAAM5K,GAAiBkJ,QAASrtB,OAAOoV,UAAW,KAE1E3xB,QAAS,CACR6pC,GAAcgF,OAAO,CACpBhF,GAAc3iB,SAEf2iB,GAAcoW,SACdpW,GAAcgC,uBAIjB,EA5TW0e,GA8TLK,UAAY,iBAAwB,CAC1C3iE,GAAI,uBACJ52B,KAAM,YACNyhE,OAAQjB,EAASM,aAAalqC,GAC9Bre,YAAa,0EACbshE,iBAAkB,GAClBzjB,SAAU,CACTmf,GAAaS,mBAAmB,sBAAuBzG,GAAUiX,WAAY,IAE9E1V,QAAS,CACR,CACCl6C,GAAI,qBACJ52B,KAAM,cACN+3E,cAAe,CACdC,GAAoBiB,aAErBf,WAAY,CACXG,GAAuB4B,MAAM5K,GAAiB0jB,MAAO,EAAG,KAEzDpkD,QAAS,CACR6pC,GAAcid,eAGhB,CACC7+D,GAAI,qBACJ52B,KAAM,UACN+3E,cAAe,CACdC,GAAoBiB,aAErBf,WAAY,CACXwc,GAAuBC,SAAS,GAChCtc,GAAuB4B,MAAM5K,GAAiBoL,WAAYvvB,OAAOoV,UAAW,IAE7E3xB,QAAS,CACR6pC,GAAcY,WAAW9J,GAAW+J,OAAQ,GAC5Cb,GAAc0B,cAGhB,CACCtjD,GAAI,qBACJ52B,KAAM,UACN+3E,cAAe,CACdC,GAAoBiB,aAErBf,WAAY,CACXwc,GAAuBC,SAAS,GAChCtc,GAAuB4B,MAAM5K,GAAiBoL,WAAYvvB,OAAOoV,UAAW,IAE7E3xB,QAAS,CACR6pC,GAAcY,WAAW9J,GAAWmN,KAAM,GAC1CjE,GAAcmC,aAAaxI,GAAeI,0BAA0BnD,GAAU0K,UAAW,EAAGxK,GAAWmN,SAGzG,CACC7lD,GAAI,qBACJ52B,KAAM,YACN+3E,cAAe,CACdC,GAAoBiB,aAErBf,WAAY,CACXwc,GAAuBC,SAAS,GAChCtc,GAAuB4B,MAAM5K,GAAiBoL,WAAYvvB,OAAOoV,UAAW,IAE7E3xB,QAAS,CACR6pC,GAAciF,UAIjB,EAlYWyb,GAoYLM,WAAa,iBAAwB,CAC3C5iE,GAAI,wBACJ52B,KAAM,aACNyhE,OAAQjB,EAASE,eAAe9pC,GAChCre,YAAa,qFACbshE,iBAAkB,GAClBzjB,SAAU,CACTmf,GAAaS,mBAAmB,uBAAwBzG,GAAUmL,SAAU,GAC5EnF,GAAaoB,gCAAgC,uBAAwBnH,GAAc8E,4BAA6BtF,GAAmBoM,WAAY,GAC/I7F,GAAaoB,gCAAgC,uBAAwBnH,GAAc8E,4BAA6BtF,GAAmBmM,OAAQ,GAC3I5F,GAAaoB,gCAAgC,uBAAwBnH,GAAc8E,4BAA6BtF,GAAmBkM,SAAU,IAE9IpK,QAAS,CACR,CACCl6C,GAAI,sBACJ52B,KAAM,OACN+3E,cAAe,GACfG,WAAY,CACXG,GAAuB4B,MAAM5K,GAAiBkJ,QAAS,EAAG,IAE3D5pC,QAAS,CACR6pC,GAAcmC,aAAaxI,GAAea,4BAA4B5D,GAAU2K,QAAS,EAAGxK,GAAUyK,QAGxG,CACCpjD,GAAI,sBACJ52B,KAAM,kBACN+3E,cAAe,GACfG,WAAY,CACXG,GAAuB4B,MAAM5K,GAAiBkJ,QAAS,EAAG,IAE3D5pC,QAAS,CACR6pC,GAAcmC,aAAaxI,GAAe8B,mCAAmC7E,GAAU2K,QAAS,EAAGzK,GAAW0K,QAGhH,CACCpjD,GAAI,sBACJ52B,KAAM,gBACN+3E,cAAe,GACfG,WAAY,CACXG,GAAuB3wE,QAExBinC,QAAS,CACR6pC,GAAc2c,kBAAiB,MAIlC,EAnbW+D,GAqbLO,OAAS,iBAAwB,CACvC7iE,GAAI,oBACJ52B,KAAM,SACNyhE,OAAQjB,EAASC,SAAS7pC,GAC1Bre,YAAa,8CACbshE,iBAAkB,GAClBzjB,SAAU,CACTmf,GAAaS,mBAAmB,mBAAoBzG,GAAUsV,aAAc,GAC5EtP,GAAaE,iCAAiC,mBAAoBzG,GAAmBmM,OAAQ,GAC7F5F,GAAaK,kCAAkC,mBAAoB5G,GAAmBmM,OAAQ,GAC9F5F,GAAaE,iCAAiC,mBAAoBzG,GAAmBoM,WAAY,GACjG7F,GAAaK,kCAAkC,mBAAoB5G,GAAmBoM,WAAY,IAEnGtK,QAAS,CACR,CACCl6C,GAAI,kBACJ52B,KAAM,YACN+3E,cAAe,GACfG,WAAY,CACXG,GAAuB4B,MAAM5K,GAAiBkJ,QAAS,EAAG,IAE3D5pC,QAAS,CACR6pC,GAAcuF,kBAGhB,CACCnnD,GAAI,kBACJ52B,KAAM,yBACN+3E,cAAe,CACdC,GAAoBxF,UAAUpD,GAAUoI,MAEzCU,WAAY,CACXG,GAAuB4B,MAAM5K,GAAiBkJ,QAAS,EAAG,IAE3D5pC,QAAS,CACR6pC,GAAc4c,sBAGhB,CACCx+D,GAAI,kBACJ52B,KAAM,oBACN+3E,cAAe,GACfG,WAAY,CACXG,GAAuB4B,MAAM5K,GAAiBoL,WAAY,EAAG,IAE9D9rC,QAAS,CACR6pC,GAAc2c,kBAAiB,MAIlC,EAveW+D,GAyeLQ,MAAQ,iBAAwB,CACtC9iE,GAAI,mBACJ52B,KAAM,QACNyhE,OAAQ,GACRlpD,YAAa,kFACbshE,iBAAkB,GAClBzjB,SAAU,CACTmf,GAAaS,mBAAmB,kBAAmBzG,GAAUmL,SAAU,GACvEnF,GAAac,kBAAkB,kBAAmB7G,GAAcgF,cAAe,GAC/Ee,GAAagB,uBAAuB,kBAAmB/G,GAAcmD,WAAYvD,GAAU0K,UAAW,GACtGvE,GAAagB,uBAAuB,kBAAmB/G,GAAcmD,WAAYvD,GAAU2K,QAAS,GACpGxE,GAAagB,uBAAuB,kBAAmB/G,GAAcmD,WAAYvD,GAAUuJ,MAAO,IAEnG7H,QAAS,CACR,CACCl6C,GAAI,iBACJ52B,KAAM,eACN+3E,cAAe,GACfG,WAAY,CACXG,GAAuB4B,MAAM5K,GAAiB6N,OAAQhyB,OAAOoV,UAAW,IAEzE3xB,QAAS,CACR6pC,GAAcmC,aAAaxI,GAAeW,0BAA0B1D,GAAU2K,QAAS,EAAGxK,GAAUyK,QAGtG,CACCpjD,GAAI,iBACJ52B,KAAM,aACN+3E,cAAe,GACfG,WAAY,CACXG,GAAuB4B,MAAM5K,GAAiBkJ,QAASrtB,OAAOoV,UAAW,IAE1E3xB,QAAS,CACR6pC,GAAcmC,aAAaxI,GAAea,4BAA4B5D,GAAU2K,QAAS,EAAGxK,GAAUyK,QAGxG,CACCpjD,GAAI,iBACJ52B,KAAM,QACN+3E,cAAe,GACfG,WAAY,CACXG,GAAuB4B,MAAM5K,GAAiBkJ,QAASrtB,OAAOoV,UAAW,IAE1E3xB,QAAS,CACR6pC,GAAcC,OAAO,CACpBH,QAAQ,EACR3G,MAAOpC,GAAUmL,SACjBnJ,MAAOnC,GAAU2K,QACjBnB,WAAY,EACZC,IAAK,CACJL,GAAciF,aAMnB,EAjiBWyb,GAmiBLS,UAAY,iBAAwB,CAC1C/iE,GAAI,uBACJ52B,KAAM,YACNyhE,OAAQ,GACRlpD,YAAa,yEACbshE,iBAAkB,GAClBzjB,SAAU,CACTmf,GAAac,kBAAkB,sBAAuB7G,GAAc8C,SAAU,IAE/ExB,QAAS,CACR,CACCl6C,GAAI,qBACJ52B,KAAM,oBACN+3E,cAAe,GACfG,WAAY,CACXG,GAAuB4B,MAAM5K,GAAiB6N,OAAQhyB,OAAOoV,UAAW,IAEzE3xB,QAAS,CACR6pC,GAAc0c,gBAAgB9lB,GAAUoI,OAG1C,CACC5gD,GAAI,qBACJ52B,KAAM,YACN+3E,cAAe,GACfG,WAAY,CACXG,GAAuBa,SAAS7J,GAAiB6N,OAAQ,IAE1DvuC,QAAS,CACR6pC,GAAc8E,WAAW,GACzB9E,GAAcwD,WAAW,KAG3B,CACCplD,GAAI,qBACJ52B,KAAM,eACN+3E,cAAe,CACdC,GAAoBsD,SAErBpD,WAAY,CACXG,GAAuB3wE,QAExBinC,QAAS,CACR6pC,GAAcwD,WAAW,MAI5B,EAllBWkd,GAolBLU,OAAS,iBAAwB,CACvChjE,GAAI,oBACJ52B,KAAM,SACNyhE,OAAQ,GACRlpD,YAAa,iEACbshE,iBAAkB,GAClBzjB,SAAU,CACTmf,GAAaS,mBAAmB,mBAAoBzG,GAAU4J,MAAO,GACrE5D,GAAaS,mBAAmB,mBAAoBzG,GAAUmJ,OAAQ,GACtEnD,GAAaK,kCAAkC,mBAAoB5G,GAAmBwI,IAAK,GAC3FjC,GAAaE,iCAAiC,mBAAoBzG,GAAmBkM,SAAU,GAC/F3F,GAAamB,wBAAwB,mBAAoBlH,GAAciD,WAAYnD,GAAWiL,MAAO,GACrGhF,GAAamB,wBAAwB,mBAAoBlH,GAAciD,WAAYnD,GAAW+J,OAAQ,GACtG9D,GAAamB,wBAAwB,mBAAoBlH,GAAciD,WAAYnD,GAAWgL,SAAU,IAEzGxJ,QAAS,CACR,CACCl6C,GAAI,kBACJ52B,KAAM,SACN+3E,cAAe,GACfG,WAAY,CACXG,GAAuB3wE,QAExBinC,QAAS,CACR6pC,GAAcmC,aAAaxI,GAAewB,mCAAmCvE,GAAU2K,QAAS,EAAG/K,GAAmBkM,aAGxH,CACCtkD,GAAI,kBACJ52B,KAAM,aACN+3E,cAAe,GACfG,WAAY,CACXG,GAAuB3wE,QAExBinC,QAAS,CACR6pC,GAAcmC,aAAaxI,GAAeoC,6BAA6BnF,GAAU0K,UAAW,IAC5FtB,GAAcmC,aAAaxI,GAAeO,0BAA0BtD,GAAU0K,UAAW,EAAG1K,GAAUuJ,UAGxG,CACC/hD,GAAI,kBACJ52B,KAAM,YACN+3E,cAAe,GACfG,WAAY,CACXG,GAAuB3wE,QAExBinC,QAAS,CACR6pC,GAAcmC,aAAaxI,GAAeO,0BAA0BtD,GAAU0K,UAAW,EAAG1K,GAAU0K,YACtGtB,GAAcmC,aAAaxI,GAAeO,0BAA0BtD,GAAU0K,UAAW,EAAG1K,GAAU2K,aAIzG,EAxoBWmf,GA0oBLW,SAAW,iBAAwB,CACzCjjE,GAAI,sBACJ52B,KAAM,WACNyhE,OAAQ,GACRlpD,YAAa,qDACbshE,iBAAkB,GAClBzjB,SAAU,CACTmf,GAAaa,mBAAmB,qBAAsBhH,GAAU0K,UAAW,GAC3EvE,GAAaa,mBAAmB,qBAAsBhH,GAAU2K,QAAS,GACzExE,GAAaG,0BAA0B,qBAAsBpG,GAAW0K,IAAK,GAC7EzE,GAAac,kBAAkB,qBAAsB7G,GAAckF,gBAAiB,IAErF5D,QAAS,CACR,CACCl6C,GAAI,oBACJ52B,KAAM,aACN+3E,cAAe,GACfG,WAAY,CACXG,GAAuBa,SAAS7J,GAAiBkJ,QAAS,IAE3D5pC,QAAS,CACR6pC,GAAcmC,aAAaxI,GAAesC,+BAA+BrF,GAAUuJ,MAAO,IAC1FH,GAAcgC,sBAGhB,CACC5jD,GAAI,oBACJ52B,KAAM,oBACN+3E,cAAe,GACfG,WAAY,CACXG,GAAuB3wE,QAExBinC,QAAS,CACR6pC,GAAcmC,aAAaxI,GAAeO,0BAA0BtD,GAAU0K,UAAW,EAAG1K,GAAU0K,YACtGtB,GAAcmC,aAAaxI,GAAeO,0BAA0BtD,GAAU0K,UAAW,EAAG1K,GAAU2K,YAGxG,CACCnjD,GAAI,oBACJ52B,KAAM,aACN+3E,cAAe,GACfG,WAAY,CACXG,GAAuB4B,MAAM5K,GAAiBkJ,QAAS,EAAG,IAE3D5pC,QAAS,CACR6pC,GAAc2B,cAAcX,GAAayd,KAAM,MAIlD,EA3rBWiC,GA6rBLx2B,MAAQ,iBAAwB,CACtC9rC,GAAI,mBACJ52B,KAAM,QACNyhE,OAAQjB,EAASE,eAAe9pC,GAChCre,YAAa,mEACbshE,iBAAkB,GAClBzjB,SAAU,CACTmf,GAAaS,mBAAmB,kBAAmBzG,GAAUuL,UAAW,GACxEvF,GAAaS,mBAAmB,kBAAmBzG,GAAUwL,QAAS,GACtExF,GAAaa,mBAAmB,kBAAmBhH,GAAUuJ,MAAO,IAErE7H,QAAS,CACR,CACCl6C,GAAI,iBACJ52B,KAAM,QACN+3E,cAAe,CACdC,GAAoByc,oBAErBvc,WAAY,CACXG,GAAuBa,SAAS7J,GAAiBkJ,QAAS,IAE3D5pC,QAAS,CACR6pC,GAAcC,OAAO,CACpBH,QAAQ,EACR3G,MAAOpC,GAAUuL,UACjBvJ,MAAOnC,GAAUuJ,MACjBC,WAAY,EACZC,IAAK,CACJL,GAAc+c,aAKlB,CACC3+D,GAAI,iBACJ52B,KAAM,YACN+3E,cAAe,GACfG,WAAY,CACXG,GAAuB4B,MAAM5K,GAAiBkJ,QAAS,EAAG,IAE3D5pC,QAAS,CACR6pC,GAAcmC,aAAaxI,GAAe8B,mCAAmC7E,GAAU2K,QAAS,EAAGzK,GAAW0K,QAGhH,CACCpjD,GAAI,iBACJ52B,KAAM,OACN+3E,cAAe,GACfG,WAAY,CACXG,GAAuB3wE,QAExBinC,QAAS,CACR6pC,GAAcmW,OACdnW,GAAcgC,uBAIjB,EAtvBW0e,GAwvBLY,OAAS,iBAAwB,CACvCljE,GAAI,oBACJ52B,KAAM,SACNyhE,OAAQjB,EAASO,QAAQnqC,GACzBre,YAAa,uEACbshE,iBAAkB,GAClBzjB,SAAU,CACTmf,GAAaS,mBAAmB,mBAAoBzG,GAAU4J,MAAO,GACrE5D,GAAaS,mBAAmB,mBAAoBzG,GAAUmJ,OAAQ,GACtEnD,GAAaE,iCAAiC,mBAAoBzG,GAAmBwI,IAAK,IAE3F1G,QAAS,CACR,CACCl6C,GAAI,kBACJ52B,KAAM,qBACN+3E,cAAe,GACfG,WAAY,CACXG,GAAuB3wE,QAExBinC,QAAS,CACR6pC,GAAcmC,aAAaxI,GAAewB,mCAAmCvE,GAAU2K,QAAS,EAAG/K,GAAmBkM,WACtH1C,GAAcmC,aAAaxI,GAAewB,mCAAmCvE,GAAU2K,QAAS,EAAG/K,GAAmBmM,SACtH3C,GAAcmC,aAAaxI,GAAewB,mCAAmCvE,GAAU2K,QAAS,EAAG/K,GAAmBoM,eAGxH,CACCxkD,GAAI,kBACJ52B,KAAM,kBACN+3E,cAAe,GACfG,WAAY,CACXG,GAAuB3wE,QAExBinC,QAAS,CACR6pC,GAAcmC,aAAaxI,GAAeoC,6BAA6BnF,GAAU0K,UAAW,IAC5FtB,GAAcgC,sBAGhB,CACC5jD,GAAI,kBACJ52B,KAAM,iBACN+3E,cAAe,GACfG,WAAY,CACXG,GAAuB3wE,QAExBinC,QAAS,CACR6pC,GAAc2c,kBAAiB,GAC/B3c,GAAcmC,aAAaxI,GAAeO,0BAA0BtD,GAAU0K,UAAW,EAAG1K,GAAU0K,YACtGtB,GAAcmC,aAAaxI,GAAeO,0BAA0BtD,GAAU0K,UAAW,EAAG1K,GAAU2K,UACtGvB,GAAcmC,aAAaxI,GAAeO,0BAA0BtD,GAAU0K,UAAW,EAAG1K,GAAU2K,aAIzG,EA5yBWmf,GA8yBL/3B,QAAU,WAChB,IAAMC,EAAO,CACZ83B,GAAeC,UACfD,GAAeE,aACfF,GAAeG,OACfH,GAAeI,YACfJ,GAAeK,YACfL,GAAeM,aACfN,GAAeO,SACfP,GAAeQ,QACfR,GAAeS,YACfT,GAAeU,SACfV,GAAeW,WACfX,GAAex2B,QACfw2B,GAAeY,UAQhB,OALA14B,EAAK59C,SAAQ,SAAA1e,GACZA,EAAE+0E,iBAAmBza,EAAYC,KAAKv6D,EAAE+0E,kBAAkB,SAAA10E,GAAC,OAAIowE,GAAa2B,gBAAgB/xE,EAAE,IAC9FL,EAAEsxD,SAAWgJ,EAAYC,KAAKv6D,EAAEsxD,UAAU,SAAAjxD,GAAC,OAAIowE,GAAa2B,gBAAgB/xE,EAAE,IAC9EL,EAAEgsE,QAAU1R,EAAYC,KAAKv6D,EAAEgsE,SAAS,SAAAhvD,GAAC,OAAIA,EAAE9hB,IAAI,GACpD,IACOo/D,EAAYC,KAAK+B,GAAM,SAAAt8D,GAAC,OAAIA,EAAE9E,IAAI,GAC1C,ECv0BM,IAAM+5F,GAAep8B,GAAA,SAAAo8B,IAAArvF,EAAA,KAAAqvF,EAAA,IA0vB3Bh8B,GA1vBYg8B,GAAAA,GACLC,MAAQ,iBAAqB,CACnCpjE,GAAI,gBACJ52B,KAAM,QACNyhE,OAAQ,GACRlpD,YAAa,wCACbpU,KAAM2qE,GAAc6c,KACpBnzE,KAAM,EACNw3D,OAAQ,GACR6J,iBAAkB,CACjBtE,GAAaa,mBAAmB,gBAAiBhH,GAAU0K,UAAW,GACtEvE,GAAaa,mBAAmB,gBAAiBhH,GAAU2K,QAAS,GACpExE,GAAaa,mBAAmB,gBAAiBhH,GAAUuJ,MAAO,IAEnEviB,SAAU,CACTmf,GAAaa,mBAAmB,kBAAmBhH,GAAUoI,IAAK,GAClEjC,GAAaS,mBAAmB,kBAAmBzG,GAAUiI,IAAK,IAEnE1G,QAAS,CACR,CACCl6C,GAAI,iBACJ52B,KAAM,YACN+3E,cAAe,CACdC,GAAoBxF,UAAUpD,GAAUoI,MAEzCU,WAAY,CACXG,GAAuB3wE,QAExBinC,QAAS,CACR6pC,GAAc0c,gBAAgB9lB,GAAUoI,OAG1C,CACC5gD,GAAI,iBACJ52B,KAAM,cACN+3E,cAAe,GACfG,WAAY,CACXG,GAAuB3wE,QAExBinC,QAAS,CACR6pC,GAAcgC,mBAAkB,MAInC,EA5CWuf,GA8CL9zE,UAAY,iBAAqB,CACvC2Q,GAAI,oBACJ52B,KAAM,YACNyhE,OAAQjB,EAASM,aAAalqC,GAC9Bre,YAAa,sBACbpU,KAAM2qE,GAAc6c,KACpBnzE,KAAM,EACNw3D,OAAQ,GACR6J,iBAAkB,CACjBtE,GAAaa,mBAAmB,oBAAqBhH,GAAU0K,UAAW,GAC1EvE,GAAaS,mBAAmB,oBAAqBzG,GAAU4J,MAAO,GACtE5D,GAAaG,0BAA0B,oBAAqBpG,GAAW2L,OAAQ,GAC/E1F,GAAaG,0BAA0B,oBAAqBpG,GAAW2X,QAAS,IAEjF7wB,SAAU,CACTmf,GAAaa,mBAAmB,sBAAuBhH,GAAU0K,UAAW,GAC5EvE,GAAaS,mBAAmB,oBAAqBzG,GAAU4J,MAAO,GACtE5D,GAAaG,0BAA0B,sBAAuBpG,GAAW2L,OAAQ,GACjF1F,GAAaG,0BAA0B,sBAAuBpG,GAAW2X,QAAS,IAEnFnW,QAAS,CACR,CACCl6C,GAAI,qBACJ52B,KAAM,YACN+3E,cAAe,GACfG,WAAY,CACXG,GAAuBa,SAAS7J,GAAiBkJ,QAAS,IAE3D5pC,QAAS,CACR6pC,GAAcC,OAAO,CACpBH,QAAQ,EACR3G,MAAOpC,GAAU4J,MACjB5H,MAAOnC,GAAU0K,UACjBlB,WAAY,EACZC,IAAK,CACJL,GAAcY,WAAW9J,GAAW+J,OAAQ,GAC5Cb,GAAc0B,iBAKlB,CACCtjD,GAAI,qBACJ52B,KAAM,SACN+3E,cAAe,CACdC,GAAoBzH,UAErB2H,WAAY,CACXG,GAAuB3wE,QAExBinC,QAAS,CACR6pC,GAAc8E,WAAW,GACzB9E,GAAcgC,uBAIjB,EAtGWuf,GAwGLE,KAAO,iBAAqB,CAClCrjE,GAAI,eACJ52B,KAAM,OACNyhE,OAAQjB,EAASO,QAAQnqC,GACzBre,YAAa,oCACbpU,KAAM2qE,GAAc6c,KACpBnzE,KAAM,EACNw3D,OAAQ,GACR6J,iBAAkB,CACjBtE,GAAaa,mBAAmB,eAAgBhH,GAAU2K,QAAS,GACnExE,GAAaS,mBAAmB,eAAgBzG,GAAUmL,SAAU,GACpEnF,GAAaK,kCAAkC,eAAgB5G,GAAmBoM,WAAY,IAE/FhlB,SAAU,CACTmf,GAAaa,mBAAmB,iBAAkBhH,GAAU2K,QAAS,GACrExE,GAAaS,mBAAmB,iBAAkBzG,GAAUmL,SAAU,GACtEnF,GAAaK,kCAAkC,iBAAkB5G,GAAmBoM,WAAY,GAChG7F,GAAamB,wBAAwB,iBAAkBlH,GAAciD,WAAYnD,GAAWoN,MAAO,IAEpG5L,QAAS,CACR,CACCl6C,GAAI,gBACJ52B,KAAM,kBACN+3E,cAAe,GACfG,WAAY,CACXG,GAAuB4B,MAAM5K,GAAiBkJ,QAASrtB,OAAOoV,UAAW,IAE1E3xB,QAAS,CACR6pC,GAAcC,OAAO,CACpBH,QAAQ,EACR3G,MAAOpC,GAAUmL,SACjBnJ,MAAOnC,GAAU0K,UACjBlB,WAAY,EACZC,IAAK,CACJL,GAAciF,YAKlB,CACC7mD,GAAI,gBACJ52B,KAAM,eACN+3E,cAAe,GACfG,WAAY,CACXG,GAAuB4B,MAAM5K,GAAiBkJ,QAASrtB,OAAOoV,UAAW,IAE1E3xB,QAAS,CACR6pC,GAAcC,OAAO,CACpBH,QAAQ,EACR3G,MAAOpC,GAAUmL,SACjBnJ,MAAOnC,GAAU0K,UACjBlB,WAAY,EACZC,IAAK,CACJL,GAAcY,WAAW9J,GAAWoN,MAAO,SAMhD,EAnKWqd,GAqKLG,MAAQ,iBAAqB,CACnCtjE,GAAI,gBACJ52B,KAAM,QACNyhE,OAAQ,GACRlpD,YAAa,wDACbpU,KAAM2qE,GAAc6c,KACpBnzE,KAAM,EACNw3D,OAAQ,GACR6J,iBAAkB,CACjBtE,GAAaa,mBAAmB,gBAAiBhH,GAAU0K,UAAW,GACtEvE,GAAaa,mBAAmB,gBAAiBhH,GAAU2K,QAAS,IAErE3jB,SAAU,CACTmf,GAAaa,mBAAmB,kBAAmBhH,GAAU0K,UAAW,GACxEvE,GAAaa,mBAAmB,kBAAmBhH,GAAU2K,QAAS,GACtExE,GAAaG,0BAA0B,kBAAmBpG,GAAW2L,OAAQ,GAC7E1F,GAAaG,0BAA0B,kBAAmBpG,GAAW2X,QAAS,IAE/EnW,QAAS,CACR,CACCl6C,GAAI,iBACJ52B,KAAM,uBACN+3E,cAAe,CACdC,GAAoBxF,UAAUpD,GAAU0K,YAEzC5B,WAAY,CACXG,GAAuB3wE,QAExBinC,QAAS,CACR6pC,GAAc0c,gBAAgB9lB,GAAU0K,WACxCtB,GAAcgC,sBAGhB,CACC5jD,GAAI,iBACJ52B,KAAM,qBACN+3E,cAAe,CACdC,GAAoBxF,UAAUpD,GAAU2K,UAEzC7B,WAAY,CACXG,GAAuB3wE,QAExBinC,QAAS,CACR6pC,GAAc0c,gBAAgB9lB,GAAU2K,SACxCvB,GAAcgC,uBAIjB,EArNWuf,GAuNLI,IAAM,iBAAqB,CACjCvjE,GAAI,cACJ52B,KAAM,MACNyhE,OAAQ,GACRlpD,YAAa,uCACbpU,KAAM2qE,GAAc6c,KACpBnzE,KAAM,EACNw3D,OAAQ,GACR6J,iBAAkB,CACjBtE,GAAaa,mBAAmB,cAAehH,GAAUuJ,MAAO,GAChEpD,GAAaS,mBAAmB,cAAezG,GAAUiX,WAAY,GACrEjR,GAAaS,mBAAmB,cAAezG,GAAUuL,UAAW,GACpEvF,GAAaS,mBAAmB,cAAezG,GAAUwL,QAAS,IAEnE3kB,SAAU,CACTmf,GAAaa,mBAAmB,gBAAiBhH,GAAUuJ,MAAO,GAClEpD,GAAaS,mBAAmB,gBAAiBzG,GAAUiX,WAAY,GACvEjR,GAAaS,mBAAmB,gBAAiBzG,GAAUuL,UAAW,GACtEvF,GAAaS,mBAAmB,gBAAiBzG,GAAUwL,QAAS,IAErEjK,QAAS,CACR,CACCl6C,GAAI,eACJ52B,KAAM,cACN+3E,cAAe,GACfG,WAAY,CACXG,GAAuB4B,MAAM5K,GAAiBwjB,QAAS,EAAG,KAE3DlkD,QAAS,CACR6pC,GAAc6c,uBAGhB,CACCz+D,GAAI,eACJ52B,KAAM,eACN+3E,cAAe,GACfG,WAAY,CACXG,GAAuB3wE,QAExBinC,QAAS,CACR6pC,GAAc3iB,OACd2iB,GAAcgC,uBAIjB,EApQWuf,GAsQLK,KAAO,iBAAqB,CAClCxjE,GAAI,eACJ52B,KAAM,OACNyhE,OAAQjB,EAASS,MAAMrqC,GACvBre,YAAa,2CACbpU,KAAM2qE,GAAc6c,KACpBnzE,KAAM,EACNw3D,OAAQ,GACR6J,iBAAkB,CACjBtE,GAAaa,mBAAmB,eAAgBhH,GAAUuJ,MAAO,GACjEpD,GAAaS,mBAAmB,eAAgBzG,GAAUuL,UAAW,IAEtE1kB,SAAU,CACTmf,GAAaa,mBAAmB,iBAAkBhH,GAAUuJ,MAAO,GACnEpD,GAAaS,mBAAmB,iBAAkBzG,GAAUuL,UAAW,IAExEhK,QAAS,CACR,CACCl6C,GAAI,gBACJ52B,KAAM,aACN+3E,cAAe,GACfG,WAAY,CACXG,GAAuB4B,MAAM5K,GAAiBkJ,QAAS,EAAG,IAE3D5pC,QAAS,CACR6pC,GAAc2B,cAAcX,GAAa8C,aAAc,GACvD9D,GAAcgC,sBAGhB,CACC5jD,GAAI,gBACJ52B,KAAM,iBACN+3E,cAAe,GACfG,WAAY,CACXG,GAAuB4B,MAAM5K,GAAiBkJ,QAAS,EAAG,IAE3D5pC,QAAS,CACR6pC,GAAc2B,cAAcX,GAAa8C,aAAc,GACvD9D,GAAc0B,eAIjB,EAhTW6f,GAkTLM,MAAQ,iBAAqB,CACnCzjE,GAAI,gBACJ52B,KAAM,QACNyhE,OAAQ,GACRlpD,YAAa,mDACbpU,KAAM2qE,GAAc6c,KACpBnzE,KAAM,EACNw3D,OAAQ,GACR6J,iBAAkB,CACjBtE,GAAaa,mBAAmB,gBAAiBhH,GAAUuJ,MAAO,GAClEpD,GAAaS,mBAAmB,gBAAiBzG,GAAUuL,UAAW,GACtEvF,GAAaS,mBAAmB,gBAAiBzG,GAAUwL,QAAS,IAErE3kB,SAAU,CACTmf,GAAaa,mBAAmB,kBAAmBhH,GAAUuJ,MAAO,GACpEpD,GAAaS,mBAAmB,kBAAmBzG,GAAUuL,UAAW,GACxEvF,GAAaS,mBAAmB,kBAAmBzG,GAAUwL,QAAS,IAEvEjK,QAAS,CACR,CACCl6C,GAAI,iBACJ52B,KAAM,OACN+3E,cAAe,GACfG,WAAY,CACXG,GAAuBa,SAAS7J,GAAiBkJ,QAAS,IAE3D5pC,QAAS,CACR6pC,GAAcC,OAAO,CACpBH,QAAQ,EACR3G,MAAOpC,GAAU4J,MACjB5H,MAAOnC,GAAU0K,UACjBlB,WAAY,EACZC,IAAK,CACJL,GAAc0B,iBAKlB,CACCtjD,GAAI,iBACJ52B,KAAM,YACN+3E,cAAe,GACfG,WAAY,CACXG,GAAuB3wE,QAExBinC,QAAS,CACR6pC,GAAcmW,OACdnW,GAAcgC,uBAIjB,EArWWuf,GAuWLO,SAAW,iBAAqB,CACtC1jE,GAAI,mBACJ52B,KAAM,WACNyhE,OAAQjB,EAASI,SAAShqC,GAC1Bre,YAAa,+CACbpU,KAAM2qE,GAAc6c,KACpBnzE,KAAM,EACNw3D,OAAQ,GACR6J,iBAAkB,CACjBtE,GAAaa,mBAAmB,mBAAoBhH,GAAU0K,UAAW,GACzEvE,GAAaS,mBAAmB,mBAAoBzG,GAAU4J,MAAO,GACrE5D,GAAaS,mBAAmB,mBAAoBzG,GAAUmL,SAAU,GACxEnF,GAAaE,iCAAiC,mBAAoBzG,GAAmBkM,SAAU,IAEhG9kB,SAAU,CACTmf,GAAaa,mBAAmB,qBAAsBhH,GAAU0K,UAAW,GAC3EvE,GAAaS,mBAAmB,qBAAsBzG,GAAU4J,MAAO,GACvE5D,GAAaS,mBAAmB,qBAAsBzG,GAAUmL,SAAU,GAC1EnF,GAAaE,iCAAiC,qBAAsBzG,GAAmBkM,SAAU,IAElGpK,QAAS,CACR,CACCl6C,GAAI,oBACJ52B,KAAM,OACN+3E,cAAe,GACfG,WAAY,CACXG,GAAuBa,SAAS7J,GAAiBkJ,QAAS,IAE3D5pC,QAAS,CACR6pC,GAAcC,OAAO,CACpBH,QAAQ,EACR3G,MAAOpC,GAAU4J,MACjB5H,MAAOnC,GAAUuJ,MACjBC,WAAY,EACZC,IAAK,CACJL,GAAcY,WAAW9J,GAAWgL,SAAU,QAKlD,CACC1jD,GAAI,oBACJ52B,KAAM,YACN+3E,cAAe,GACfG,WAAY,CACXG,GAAuB4B,MAAM5K,GAAiBkJ,QAAS,EAAG,IAE3D5pC,QAAS,CACR6pC,GAAc2B,cAAcX,GAAage,cAAe,GACxDhf,GAAcC,OAAO,CACpBH,QAAQ,EACR3G,MAAOpC,GAAU4J,MACjB5H,MAAOnC,GAAUuJ,MACjBC,WAAY,EACZC,IAAK,CACJL,GAAcY,WAAW9J,GAAWgL,SAAU,QAKlD,CACC1jD,GAAI,oBACJ52B,KAAM,SACN+3E,cAAe,GACfG,WAAY,CACXG,GAAuB4B,MAAM5K,GAAiBoL,WAAYvvB,OAAOoV,UAAW,IAE7E3xB,QAAS,CACR6pC,GAAcC,OAAO,CACpBH,QAAQ,EACR3G,MAAOpC,GAAU4J,MACjB5H,MAAOnC,GAAU0K,UACjBlB,WAAY,EACZC,IAAK,CACJL,GAAcY,WAAW9J,GAAW8M,MAAO,QAK/C,CACCxlD,GAAI,oBACJ52B,KAAM,aACN+3E,cAAe,GACfG,WAAY,CACXG,GAAuB4B,MAAM5K,GAAiBkJ,QAAS,EAAG,IAE3D5pC,QAAS,CACR6pC,GAAcC,OAAO,CACpBH,QAAQ,EACR3G,MAAOpC,GAAUmL,SACjBnJ,MAAOnC,GAAU2K,QACjBnB,WAAY,EACZC,IAAK,CACJL,GAAc2B,cAAcX,GAAaY,KAAM,GAC/C5B,GAAciF,aAMnB,EA3cWsc,GA6cLQ,MAAQ,iBAAqB,CACnC3jE,GAAI,gBACJ52B,KAAM,QACNyhE,OAAQjB,EAASS,MAAMrqC,GACvBre,YAAa,8BACbpU,KAAM2qE,GAAc6c,KACpBnzE,KAAM,EACNw3D,OAAQ,GACR6J,iBAAkB,CACjBtE,GAAaa,mBAAmB,gBAAiBhH,GAAUuJ,MAAO,GAClEpD,GAAaS,mBAAmB,gBAAiBzG,GAAUwL,QAAS,GACpExF,GAAaK,kCAAkC,gBAAiB5G,GAAmBoM,WAAY,IAEhGhlB,SAAU,CACTmf,GAAaa,mBAAmB,kBAAmBhH,GAAUuJ,MAAO,GACpEpD,GAAaS,mBAAmB,kBAAmBzG,GAAUwL,QAAS,GACtExF,GAAaK,kCAAkC,kBAAmB5G,GAAmBoM,WAAY,IAElGtK,QAAS,CACR,CACCl6C,GAAI,iBACJ52B,KAAM,WACN+3E,cAAe,GACfG,WAAY,CACXG,GAAuB4B,MAAM5K,GAAiBkJ,QAAS,EAAG,IAE3D5pC,QAAS,CACR6pC,GAAcuF,kBAGhB,CACCnnD,GAAI,iBACJ52B,KAAM,QACN+3E,cAAe,GACfG,WAAY,CACXG,GAAuB4B,MAAM5K,GAAiBwjB,QAAS,EAAG,IAE3DlkD,QAAS,CACR6pC,GAAc6c,qBACd7c,GAAcgC,uBAIjB,EAxfWuf,GA0fLS,UAAY,iBAAqB,CACvC5jE,GAAI,oBACJ52B,KAAM,YACNyhE,OAAQjB,EAASU,YAAYtqC,GAC7Bre,YAAa,2CACbpU,KAAM2qE,GAAc6c,KACpBnzE,KAAM,EACNw3D,OAAQ,GACR6J,iBAAkB,CACjBtE,GAAaa,mBAAmB,oBAAqBhH,GAAUuJ,MAAO,GACtEpD,GAAaS,mBAAmB,oBAAqBzG,GAAU4J,MAAO,GACtE5D,GAAaS,mBAAmB,oBAAqBzG,GAAUmL,SAAU,IAE1EtkB,SAAU,CACTmf,GAAaa,mBAAmB,sBAAuBhH,GAAUuJ,MAAO,GACxEpD,GAAaS,mBAAmB,sBAAuBzG,GAAU4J,MAAO,GACxE5D,GAAaS,mBAAmB,sBAAuBzG,GAAUmL,SAAU,GAC3EnF,GAAaK,kCAAkC,sBAAuB5G,GAAmBkM,SAAU,GACnG3F,GAAaG,0BAA0B,sBAAuBpG,GAAW2X,QAAS,IAEnFnW,QAAS,CACR,CACCl6C,GAAI,qBACJ52B,KAAM,eACN+3E,cAAe,GACfG,WAAY,CACXG,GAAuB4B,MAAM5K,GAAiBkJ,QAAS,EAAG,IAE3D5pC,QAAS,CACR6pC,GAAcC,OAAO,CACpBH,QAAQ,EACR3G,MAAOpC,GAAU4J,MACjB5H,MAAOnC,GAAUuJ,MACjBC,WAAY,EACZC,IAAK,CACJL,GAAcY,WAAW9J,GAAWmN,KAAM,QAK9C,CACC7lD,GAAI,qBACJ52B,KAAM,eACN+3E,cAAe,CACdC,GAAoBsD,SAErBpD,WAAY,CACXG,GAAuB3wE,QAExBinC,QAAS,CACR6pC,GAAcwD,WAAW,KAG3B,CACCplD,GAAI,qBACJ52B,KAAM,wBACN+3E,cAAe,GACfG,WAAY,CACXG,GAAuB4B,MAAM5K,GAAiBkJ,QAASrtB,OAAOoV,UAAW,IAE1E3xB,QAAS,CACR6pC,GAAcC,OAAO,CACpBH,QAAQ,EACR3G,MAAOpC,GAAUmL,SACjBnJ,MAAOnC,GAAU2K,QACjBnB,WAAY,EACZC,IAAK,CACJL,GAAc2B,cAAcX,GAAaY,KAAM,GAC/C5B,GAAciF,aAMnB,EApkBWsc,GAskBLU,WAAa,iBAAqB,CACxC7jE,GAAI,qBACJ52B,KAAM,aACNyhE,OAAQ,GACRlpD,YAAa,oCACbpU,KAAM2qE,GAAc6c,KACpBnzE,KAAM,EACNw3D,OAAQ,GACR6J,iBAAkB,CACjBtE,GAAaa,mBAAmB,qBAAsBhH,GAAU2K,QAAS,GACzExE,GAAaS,mBAAmB,qBAAsBzG,GAAU4J,MAAO,GACvE5D,GAAaS,mBAAmB,qBAAsBzG,GAAUmL,SAAU,GAC1EnF,GAAaS,mBAAmB,qBAAsBzG,GAAUwL,QAAS,IAE1E3kB,SAAU,CACTmf,GAAaa,mBAAmB,uBAAwBhH,GAAU2K,QAAS,GAC3ExE,GAAaS,mBAAmB,uBAAwBzG,GAAU4J,MAAO,GACzE5D,GAAaS,mBAAmB,uBAAwBzG,GAAUmL,SAAU,GAC5EnF,GAAaS,mBAAmB,uBAAwBzG,GAAUwL,QAAS,GAC3ExF,GAAaK,kCAAkC,uBAAwB5G,GAAmBoM,WAAY,GACtG7F,GAAamB,wBAAwB,uBAAwBlH,GAAciD,WAAYnD,GAAWkM,MAAO,IAE1G1K,QAAS,CACR,CACCl6C,GAAI,sBACJ52B,KAAM,eACN+3E,cAAe,CACdC,GAAoBxF,UAAUpD,GAAUoI,MAEzCU,WAAY,CACXG,GAAuBa,SAAS7J,GAAiBkJ,QAAS,IAE3D5pC,QAAS,CACR6pC,GAAc4c,sBAGhB,CACCx+D,GAAI,sBACJ52B,KAAM,eACN+3E,cAAe,GACfG,WAAY,CACXG,GAAuBa,SAAS7J,GAAiBkJ,QAAS,IAE3D5pC,QAAS,CACR6pC,GAAcC,OAAO,CACpBH,QAAQ,EACR3G,MAAOpC,GAAUmL,SACjBnJ,MAAOnC,GAAU2K,QACjBnB,WAAY,EACZC,IAAK,CACJL,GAAcmC,aAAaxI,GAAesC,+BAA+BrF,GAAU2K,QAAS,IAC5FvB,GAAcmC,aAAaxI,GAAeS,4BAA4BxD,GAAU2K,QAAS,EAAG3K,GAAU4K,MACtGxB,GAAcmC,aAAaxI,GAAea,4BAA4B5D,GAAU2K,QAAS,EAAGxK,GAAUyK,WAK1G,CACCpjD,GAAI,sBACJ52B,KAAM,aACN+3E,cAAe,GACfG,WAAY,CACXG,GAAuB4B,MAAM5K,GAAiBkJ,QAAS,EAAG,IAE3D5pC,QAAS,CACR6pC,GAAcC,OAAO,CACpBH,QAAQ,EACR3G,MAAOpC,GAAUmL,SACjBnJ,MAAOnC,GAAU2K,QACjBnB,WAAY,EACZC,IAAK,CACJL,GAAc2B,cAAcX,GAAaY,KAAM,GAC/C5B,GAAciF,aAMnB,EAppBWsc,GAspBLW,SAAW,iBAAqB,CACtC9jE,GAAI,mBACJ52B,KAAM,WACNyhE,OAAQjB,EAASI,SAAShqC,GAC1Bre,YAAa,sCACbpU,KAAM2qE,GAAc6c,KACpBnzE,KAAM,EACNw3D,OAAQ,GACR6J,iBAAkB,CACjBtE,GAAaa,mBAAmB,mBAAoBhH,GAAU2K,QAAS,GACvExE,GAAaS,mBAAmB,mBAAoBzG,GAAU4J,MAAO,GACrE5D,GAAaS,mBAAmB,mBAAoBzG,GAAUiX,WAAY,GAC1EjR,GAAaS,mBAAmB,mBAAoBzG,GAAUwL,QAAS,IAExE3kB,SAAU,CACTmf,GAAaa,mBAAmB,qBAAsBhH,GAAU2K,QAAS,GACzExE,GAAaS,mBAAmB,qBAAsBzG,GAAU4J,MAAO,GACvE5D,GAAaS,mBAAmB,qBAAsBzG,GAAUiX,WAAY,GAC5EjR,GAAaS,mBAAmB,qBAAsBzG,GAAUwL,QAAS,IAE1EjK,QAAS,CACR,CACCl6C,GAAI,oBACJ52B,KAAM,eACN+3E,cAAe,CACdC,GAAoBzH,UAErB2H,WAAY,CACXG,GAAuB3wE,QAExBinC,QAAS,CACR6pC,GAAcmC,aAAaxI,GAAeC,wBAAwBhD,GAAU0K,UAAW,MAGzF,CACCljD,GAAI,oBACJ52B,KAAM,OACN+3E,cAAe,GACfG,WAAY,CACXG,GAAuBa,SAAS7J,GAAiBkJ,QAAS,IAE3D5pC,QAAS,CACR6pC,GAAcC,OAAO,CACpBH,QAAQ,EACR3G,MAAOpC,GAAU4J,MACjB5H,MAAOnC,GAAUuJ,MACjBC,WAAY,EACZC,IAAK,CACJL,GAAcY,WAAW9J,GAAWgL,SAAU,QAKlD,CACC1jD,GAAI,oBACJ52B,KAAM,gBACN+3E,cAAe,CACdC,GAAoBiB,aAErBf,WAAY,CACXG,GAAuBa,SAAS7J,GAAiBkJ,QAAS,IAE3D5pC,QAAS,CACR6pC,GAAcC,OAAO,CACpBH,QAAQ,EACR3G,MAAOpC,GAAU4J,MACjB5H,MAAOnC,GAAUuJ,MACjBC,WAAY,EACZC,IAAK,CACJL,GAAcY,WAAW9J,GAAWiL,MAAO,SAMhD,EAjuBWwf,GAmuBL54B,QAAU,WAChB,IAAMC,EAAO,CACZ24B,GAAgBC,QAChBD,GAAgB9zE,YAChB8zE,GAAgBE,OAChBF,GAAgBG,QAChBH,GAAgBI,MAChBJ,GAAgBK,OAChBL,GAAgBM,QAChBN,GAAgBO,WAChBP,GAAgBQ,QAChBR,GAAgBS,YAChBT,GAAgBU,aAChBV,GAAgBW,YAQjB,OALAt5B,EAAK59C,SAAQ,SAAA1e,GACZA,EAAE+0E,iBAAmBza,EAAYC,KAAKv6D,EAAE+0E,kBAAkB,SAAA10E,GAAC,OAAIowE,GAAa2B,gBAAgB/xE,EAAE,IAC9FL,EAAEsxD,SAAWgJ,EAAYC,KAAKv6D,EAAEsxD,UAAU,SAAAjxD,GAAC,OAAIowE,GAAa2B,gBAAgB/xE,EAAE,IAC9EL,EAAEgsE,QAAU1R,EAAYC,KAAKv6D,EAAEgsE,SAAS,SAAAhvD,GAAC,OAAIA,EAAE9hB,IAAI,GACpD,IACOo/D,EAAYC,KAAK+B,GAAM,SAAAt8D,GAAC,OAAIA,EAAE9E,IAAI,GAC1C,EC7vBM,OAAM26F,GAAQh9B,GAAA,SAAAg9B,IAAAjwF,EAAA,KAAAiwF,EAAA,IAARA,GACLx5B,QAAU,WAChB,IAAMC,EAAoB,CACzB,CACCxqC,GAAI,aACJ52B,KAAM,QACNyhE,OAAQ,GACRlpD,YAAa,2CACbyqE,SAAU,GACVK,OAAO,EACPrR,YAAa9C,GAAoBuX,gBACjCpmE,SAAU4uD,GAAiBsY,KAC3BG,MAAO,EACPpP,OAAQ,CACP/H,OAAQ,CACP,CACCpsE,KAAMmrE,GAAWiL,MACjB/I,KAAM,IAGRlyC,MAAO,EACPskD,WAAY,GAEbE,MAAO,KACPoK,OAAQ,KACR93B,SAAU,GACV0a,QAAS,IAEV,CACCl6C,GAAI,cACJ52B,KAAM,SACNyhE,OAAQ,GACRlpD,YAAa,qDACbyqE,SAAU,GACVK,OAAO,EACPrR,YAAa9C,GAAoBuX,gBACjCpmE,SAAU4uD,GAAiBsY,KAC3BG,MAAO,EACPpP,OAAQ,CACP/H,OAAQ,CACP,CACCpsE,KAAMmrE,GAAWiL,MACjB/I,KAAM,IAGRlyC,MAAO,EACPskD,WAAY,GAEbE,MAAO,KACPoK,OAAQ,KACR93B,SAAU,GACV0a,QAAS,IAEV,CACCl6C,GAAI,gBACJ52B,KAAM,WACNyhE,OAAQ,GACRlpD,YAAa,2BACbyqE,SAAU,GACVK,OAAO,EACPrR,YAAa9C,GAAoBuX,gBACjCpmE,SAAU4uD,GAAiBsY,KAC3BG,MAAO,EACPpP,OAAQ,CACP/H,OAAQ,CACP,CACCpsE,KAAMmrE,GAAWiL,MACjB/I,KAAM,IAGRlyC,MAAO,EACPskD,WAAY,GAEbE,MAAO,KACPoK,OAAQ,KACR93B,SAAU,GACV0a,QAAS,IAEV,CACCl6C,GAAI,eACJ52B,KAAM,UACNyhE,OAAQ,GACRlpD,YAAa,gDACbyqE,SAAU,GACVK,OAAO,EACPrR,YAAa9C,GAAoBuX,gBACjCpmE,SAAU4uD,GAAiBsY,KAC3BG,MAAO,EACPpP,OAAQ,CACP/H,OAAQ,CACP,CACCpsE,KAAMmrE,GAAWiL,MACjB/I,KAAM,IAGRlyC,MAAO,EACPskD,WAAY,GAEbE,MAAO,KACPoK,OAAQ,KACR93B,SAAU,GACV0a,QAAS,IAEV,CACCl6C,GAAI,eACJ52B,KAAM,UACNyhE,OAAQ,GACRlpD,YAAa,kCACbyqE,SAAU,GACVK,OAAO,EACPrR,YAAa9C,GAAoBuX,gBACjCpmE,SAAU4uD,GAAiBsY,KAC3BG,MAAO,EACPpP,OAAQ,CACP/H,OAAQ,CACP,CACCpsE,KAAMmrE,GAAWiL,MACjB/I,KAAM,IAGRlyC,MAAO,EACPskD,WAAY,GAEbE,MAAO,KACPoK,OAAQ,KACR93B,SAAU,GACV0a,QAAS,IAEV,CACCl6C,GAAI,YACJ52B,KAAM,OACNyhE,OAAQ,GACRlpD,YAAa,+BACbyqE,SAAU,GACVK,OAAO,EACPrR,YAAa9C,GAAoBuX,gBACjCpmE,SAAU4uD,GAAiBsY,KAC3BG,MAAO,EACPpP,OAAQ,CACP/H,OAAQ,CACP,CACCpsE,KAAMmrE,GAAW+J,OACjB7H,KAAM,IAGRlyC,MAAO,EACPskD,WAAY,GAEbE,MAAO,KACPoK,OAAQ,KACR93B,SAAU,GACV0a,QAAS,IAEV,CACCl6C,GAAI,aACJ52B,KAAM,QACNyhE,OAAQ,GACRlpD,YAAa,uDACbyqE,SAAU,GACVK,OAAO,EACPrR,YAAa9C,GAAoBuX,gBACjCpmE,SAAU4uD,GAAiBsY,KAC3BG,MAAO,EACPpP,OAAQ,CACP/H,OAAQ,CACP,CACCpsE,KAAMmrE,GAAW+J,OACjB7H,KAAM,IAGRlyC,MAAO,EACPskD,WAAY,GAEbE,MAAO,KACPoK,OAAQ,KACR93B,SAAU,GACV0a,QAAS,IAEV,CACCl6C,GAAI,aACJ52B,KAAM,QACNyhE,OAAQ,GACRlpD,YAAa,gDACbyqE,SAAU,GACVK,OAAO,EACPrR,YAAa9C,GAAoBuX,gBACjCpmE,SAAU4uD,GAAiBsY,KAC3BG,MAAO,EACPpP,OAAQ,CACP/H,OAAQ,CACP,CACCpsE,KAAMmrE,GAAWgL,SACjB9I,KAAM,IAGRlyC,MAAO,EACPskD,WAAY,GAEbE,MAAO,KACPoK,OAAQ,KACR93B,SAAU,GACV0a,QAAS,IAEV,CACCl6C,GAAI,eACJ52B,KAAM,UACNyhE,OAAQ,GACRlpD,YAAa,mCACbyqE,SAAU,GACVK,OAAO,EACPrR,YAAa9C,GAAoBuX,gBACjCpmE,SAAU4uD,GAAiBsY,KAC3BG,MAAO,EACPpP,OAAQ,CACP/H,OAAQ,CACP,CACCpsE,KAAMmrE,GAAWgL,SACjB9I,KAAM,IAGRlyC,MAAO,EACPskD,WAAY,GAEbE,MAAO,KACPoK,OAAQ,KACR93B,SAAU,GACV0a,QAAS,IAEV,CACCl6C,GAAI,cACJ52B,KAAM,SACNyhE,OAAQ,GACRlpD,YAAa,sCACbyqE,SAAU,GACVK,OAAO,EACPrR,YAAa9C,GAAoBuX,gBACjCpmE,SAAU4uD,GAAiBsY,KAC3BG,MAAO,EACPpP,OAAQ,CACP/H,OAAQ,CACP,CACCpsE,KAAMmrE,GAAWgL,SACjB9I,KAAM,IAGRlyC,MAAO,EACPskD,WAAY,GAEbE,MAAO,KACPoK,OAAQ,KACR93B,SAAU,GACV0a,QAAS,IAEV,CACCl6C,GAAI,kBACJ52B,KAAM,aACNyhE,OAAQ,GACRlpD,YAAa,6BACbyqE,SAAU,GACVK,OAAO,EACPrR,YAAa9C,GAAoB6M,aACjC17D,SAAU4uD,GAAiBsY,KAC3BG,MAAO,EACPpP,OAAQ,CACP/H,OAAQ,CACP,CACCpsE,KAAMmrE,GAAWiL,MACjB/I,KAAM,IAGRlyC,MAAO,EACPskD,WAAY,GAEbE,MAAO,KACPoK,OAAQ,KACR93B,SAAU,GACV0a,QAAS,IAEV,CACCl6C,GAAI,iBACJ52B,KAAM,YACNyhE,OAAQ,GACRlpD,YAAa,mDACbyqE,SAAU,GACVK,OAAO,EACPrR,YAAa9C,GAAoB6M,aACjC17D,SAAU4uD,GAAiBsY,KAC3BG,MAAO,EACPpP,OAAQ,CACP/H,OAAQ,CACP,CACCpsE,KAAMmrE,GAAWiL,MACjB/I,KAAM,IAGRlyC,MAAO,EACPskD,WAAY,GAEbE,MAAO,KACPoK,OAAQ,KACR93B,SAAU,GACV0a,QAAS,IAEV,CACCl6C,GAAI,cACJ52B,KAAM,SACNyhE,OAAQ,GACRlpD,YAAa,mDACbyqE,SAAU,GACVK,OAAO,EACPrR,YAAa9C,GAAoB6M,aACjC17D,SAAU4uD,GAAiBsY,KAC3BG,MAAO,EACPpP,OAAQ,CACP/H,OAAQ,CACP,CACCpsE,KAAMmrE,GAAWiL,MACjB/I,KAAM,IAGRlyC,MAAO,EACPskD,WAAY,GAEbE,MAAO,KACPoK,OAAQ,KACR93B,SAAU,GACV0a,QAAS,IAEV,CACCl6C,GAAI,iBACJ52B,KAAM,YACNyhE,OAAQ,GACRlpD,YAAa,wCACbyqE,SAAU,GACVK,OAAO,EACPrR,YAAa9C,GAAoB6M,aACjC17D,SAAU4uD,GAAiBsY,KAC3BG,MAAO,EACPpP,OAAQ,CACP/H,OAAQ,CACP,CACCpsE,KAAMmrE,GAAW+J,OACjB7H,KAAM,IAGRlyC,MAAO,EACPskD,WAAY,GAEbE,MAAO,KACPoK,OAAQ,KACR93B,SAAU,GACV0a,QAAS,IAEV,CACCl6C,GAAI,oBACJ52B,KAAM,eACNyhE,OAAQ,GACRlpD,YAAa,8CACbyqE,SAAU,GACVK,OAAO,EACPrR,YAAa9C,GAAoB6M,aACjC17D,SAAU4uD,GAAiBsY,KAC3BG,MAAO,EACPpP,OAAQ,CACP/H,OAAQ,CACP,CACCpsE,KAAMmrE,GAAW+J,OACjB7H,KAAM,IAGRlyC,MAAO,EACPskD,WAAY,GAEbE,MAAO,KACPoK,OAAQ,KACR93B,SAAU,GACV0a,QAAS,IAEV,CACCl6C,GAAI,YACJ52B,KAAM,OACNyhE,OAAQ,GACRlpD,YAAa,mDACbyqE,SAAU,GACVK,OAAO,EACPrR,YAAa9C,GAAoB6M,aACjC17D,SAAU4uD,GAAiBsY,KAC3BG,MAAO,EACPpP,OAAQ,CACP/H,OAAQ,CACP,CACCpsE,KAAMmrE,GAAWgL,SACjB9I,KAAM,IAGRlyC,MAAO,EACPskD,WAAY,GAEbE,MAAO,KACPoK,OAAQ,KACR93B,SAAU,GACV0a,QAAS,IAEV,CACCl6C,GAAI,eACJ52B,KAAM,UACNyhE,OAAQ,GACRlpD,YAAa,kDACbyqE,SAAU,GACVK,OAAO,EACPrR,YAAa9C,GAAoB6M,aACjC17D,SAAU4uD,GAAiBsY,KAC3BG,MAAO,EACPpP,OAAQ,CACP/H,OAAQ,CACP,CACCpsE,KAAMmrE,GAAWiL,MACjB/I,KAAM,IAGRlyC,MAAO,EACPskD,WAAY,GAEbE,MAAO,KACPoK,OAAQ,KACR93B,SAAU,GACV0a,QAAS,IAEV,CACCl6C,GAAI,eACJ52B,KAAM,UACNyhE,OAAQ,GACRlpD,YAAa,yBACbyqE,SAAU,GACVK,OAAO,EACPrR,YAAa9C,GAAoB6M,aACjC17D,SAAU4uD,GAAiBsY,KAC3BG,MAAO,EACPpP,OAAQ,CACP/H,OAAQ,CACP,CACCpsE,KAAMmrE,GAAWgL,SACjB9I,KAAM,IAGRlyC,MAAO,EACPskD,WAAY,GAEbE,MAAO,KACPoK,OAAQ,KACR93B,SAAU,GACV0a,QAAS,IAEV,CACCl6C,GAAI,cACJ52B,KAAM,UACNyhE,OAAQ,GACRlpD,YAAa,sCACbyqE,SAAU,GACVK,OAAO,EACPrR,YAAa9C,GAAoBwX,cACjCrmE,SAAU4uD,GAAiBsY,KAC3BG,MAAO,EACPpP,OAAQ,CACP/H,OAAQ,CACP,CACCpsE,KAAMmrE,GAAWiL,MACjB/I,KAAM,IAGRlyC,MAAO,EACPskD,WAAY,GAEbE,MAAO,KACPoK,OAAQ,KACR93B,SAAU,GACV0a,QAAS,IAEV,CACCl6C,GAAI,WACJ52B,KAAM,OACNyhE,OAAQ,GACRlpD,YAAa,0CACbyqE,SAAU,GACVK,OAAO,EACPrR,YAAa9C,GAAoBwX,cACjCrmE,SAAU4uD,GAAiBsY,KAC3BG,MAAO,EACPpP,OAAQ,CACP/H,OAAQ,CACP,CACCpsE,KAAMmrE,GAAWgL,SACjB9I,KAAM,IAGRlyC,MAAO,EACPskD,WAAY,GAEbE,MAAO,KACPoK,OAAQ,KACR93B,SAAU,GACV0a,QAAS,IAEV,CACCl6C,GAAI,cACJ52B,KAAM,SACNyhE,OAAQ,GACRlpD,YAAa,6CACbyqE,SAAU,GACVK,OAAO,EACPrR,YAAa9C,GAAoBwX,cACjCrmE,SAAU4uD,GAAiBsY,KAC3BG,MAAO,EACPpP,OAAQ,CACP/H,OAAQ,CACP,CACCpsE,KAAMmrE,GAAW+J,OACjB7H,KAAM,IAGRlyC,MAAO,EACPskD,WAAY,GAEbE,MAAO,KACPoK,OAAQ,KACR93B,SAAU,GACV0a,QAAS,IAEV,CACCl6C,GAAI,eACJ52B,KAAM,UACNyhE,OAAQ,GACRlpD,YAAa,6CACbyqE,SAAU,GACVK,OAAO,EACPrR,YAAa9C,GAAoByX,cACjCtmE,SAAU4uD,GAAiBsY,KAC3BG,MAAO,EACPpP,OAAQ,CACP/H,OAAQ,CACP,CACCpsE,KAAMmrE,GAAWgL,SACjB9I,KAAM,IAGRlyC,MAAO,GACPskD,WAAY,GAEbE,MAAO,KACPoK,OAAQ,KACR93B,SAAU,GACV0a,QAAS,IAEV,CACCl6C,GAAI,gBACJ52B,KAAM,WACNyhE,OAAQ,GACRlpD,YAAa,2DACbyqE,SAAU,GACVK,OAAO,EACPrR,YAAa9C,GAAoByX,cACjCtmE,SAAU4uD,GAAiBsY,KAC3BG,MAAO,EACPpP,OAAQ,CACP/H,OAAQ,CACP,CACCpsE,KAAMmrE,GAAWgL,SACjB9I,KAAM,IAGRlyC,MAAO,GACPskD,WAAY,GAEbE,MAAO,KACPoK,OAAQ,KACR93B,SAAU,GACV0a,QAAS,IAEV,CACCl6C,GAAI,gBACJ52B,KAAM,WACNyhE,OAAQ,GACRlpD,YAAa,yEACbyqE,SAAU,GACVK,OAAO,EACPrR,YAAa9C,GAAoByX,cACjCtmE,SAAU4uD,GAAiBsY,KAC3BG,MAAO,EACPpP,OAAQ,CACP/H,OAAQ,CACP,CACCpsE,KAAMmrE,GAAW+J,OACjB7H,KAAM,IAGRlyC,MAAO,GACPskD,WAAY,GAEbE,MAAO,KACPoK,OAAQ,KACR93B,SAAU,GACV0a,QAAS,IAEV,CACCl6C,GAAI,aACJ52B,KAAM,QACNyhE,OAAQjB,EAASM,aAAalqC,GAC9Bre,YAAa,8CACbyqE,SAAU,GACVK,OAAO,EACPrR,YAAa9C,GAAoB0X,cACjCvmE,SAAU4uD,GAAiBsY,KAC3BG,MAAO,EACPpP,OAAQ,CACP/H,OAAQ,CACP,CACCpsE,KAAMmrE,GAAWgL,SACjB9I,KAAM,IAGRlyC,MAAO,GACPskD,WAAY,GAEbE,MAAO,KACPoK,OAAQ,KACR93B,SAAU,GACV0a,QAAS,IAEV,CACCl6C,GAAI,eACJ52B,KAAM,UACNyhE,OAAQjB,EAASM,aAAalqC,GAC9Bre,YAAa,8CACbyqE,SAAU,GACVK,OAAO,EACPrR,YAAa9C,GAAoB0X,cACjCvmE,SAAU4uD,GAAiBsY,KAC3BG,MAAO,EACPpP,OAAQ,CACP/H,OAAQ,CACP,CACCpsE,KAAMmrE,GAAWgL,SACjB9I,KAAM,IAGRlyC,MAAO,GACPskD,WAAY,GAEbE,MAAO,KACPoK,OAAQ,KACR93B,SAAU,GACV0a,QAAS,IAEV,CACCl6C,GAAI,cACJ52B,KAAM,SACNyhE,OAAQ,GACRlpD,YAAa,iCACbyqE,SAAU,GACVK,OAAO,EACPrR,YAAa9C,GAAoB0X,cACjCvmE,SAAU4uD,GAAiBsY,KAC3BG,MAAO,EACPpP,OAAQ,CACP/H,OAAQ,CACP,CACCpsE,KAAMmrE,GAAWgL,SACjB9I,KAAM,IAGRlyC,MAAO,GACPskD,WAAY,GAEbE,MAAO,KACPoK,OAAQ,KACR93B,SAAU,GACV0a,QAAS,IAEV,CACCl6C,GAAI,WACJ52B,KAAM,MACNyhE,OAAQ,GACRlpD,YAAa,kBACbyqE,SAAU,GACVK,OAAO,EACPrR,YAAa9C,GAAoByV,WACjCtkE,SAAU4uD,GAAiBsY,KAC3BG,MAAO,EACPpP,OAAQ,KACRwL,MAAO,KACPoK,OAAQ,KACR93B,SAAU,GACV0a,QAAS,IAEV,CACCl6C,GAAI,YACJ52B,KAAM,OACNyhE,OAAQ,GACRlpD,YAAa,sBACbyqE,SAAU,GACVK,OAAO,EACPrR,YAAa9C,GAAoByV,WACjCtkE,SAAU4uD,GAAiBsY,KAC3BG,MAAO,EACPpP,OAAQ,KACRwL,MAAO,KACPoK,OAAQ,KACR93B,SAAU,GACV0a,QAAS,IAEV,CACCl6C,GAAI,YACJ52B,KAAM,OACNyhE,OAAQ,GACRlpD,YAAa,2BACbyqE,SAAU,GACVK,OAAO,EACPrR,YAAa9C,GAAoByV,WACjCtkE,SAAU4uD,GAAiBsY,KAC3BG,MAAO,EACPpP,OAAQ,KACRwL,MAAO,KACPoK,OAAQ,KACR93B,SAAU,GACV0a,QAAS,IAEV,CACCl6C,GAAI,cACJ52B,KAAM,SACNyhE,OAAQ,GACRlpD,YAAa,yCACbyqE,SAAU,GACVK,OAAO,EACPrR,YAAa9C,GAAoByV,WACjCtkE,SAAU4uD,GAAiBqW,KAC3BoC,MAAO,EACPpP,OAAQ,KACRwL,MAAO,KACPoK,OAAQ,KACR93B,SAAU,GACV0a,QAAS,IAEV,CACCl6C,GAAI,aACJ52B,KAAM,QACNyhE,OAAQ,GACRlpD,YAAa,2BACbyqE,SAAU,GACVK,OAAO,EACPrR,YAAa9C,GAAoByV,WACjCtkE,SAAU4uD,GAAiBsY,KAC3BG,MAAO,EACPpP,OAAQ,KACRwL,MAAO,KACPoK,OAAQ,KACR93B,SAAU,GACV0a,QAAS,IAEV,CACCl6C,GAAI,qBACJ52B,KAAM,gBACNyhE,OAAQ,GACRlpD,YAAa,oCACbyqE,SAAU,GACVK,OAAO,EACPrR,YAAa9C,GAAoB2X,WACjCxmE,SAAU4uD,GAAiB2rB,KAC3BlT,MAAO,EACPpP,OAAQ,KACRwL,MAAO,CACN1tB,SAAU,CACTmf,GAAaK,kCAAkC,kBAAmB5G,GAAmBkM,SAAU,KAGjGgT,OAAQ,KACR93B,SAAU,GACV0a,QAAS,IAEV,CACCl6C,GAAI,kBACJ52B,KAAM,aACNyhE,OAAQ,GACRlpD,YAAa,4CACbyqE,SAAU,GACVK,OAAO,EACPrR,YAAa9C,GAAoB2X,WACjCxmE,SAAU4uD,GAAiB2rB,KAC3BlT,MAAO,EACPpP,OAAQ,KACRwL,MAAO,CACN1tB,SAAU,CACTmf,GAAaK,kCAAkC,eAAgB5G,GAAmBkM,SAAU,GAC5F3F,GAAaW,2BAA2B,eAAgB/G,GAAkB+L,UAAW,KAGvFgT,OAAQ,KACR93B,SAAU,GACV0a,QAAS,IAEV,CACCl6C,GAAI,wBACJ52B,KAAM,mBACNyhE,OAAQ,GACRlpD,YAAa,qDACbyqE,SAAU,GACVK,OAAO,EACPrR,YAAa9C,GAAoB2X,WACjCxmE,SAAU4uD,GAAiB2rB,KAC3BlT,MAAO,EACPpP,OAAQ,KACRwL,MAAO,CACN1tB,SAAU,CACTmf,GAAaK,kCAAkC,qBAAsB5G,GAAmBkM,SAAU,GAClG3F,GAAaW,2BAA2B,qBAAsB/G,GAAkB+L,UAAW,GAC3F3F,GAAaa,mBAAmB,qBAAsBhH,GAAUuJ,OAAQ,KAG1EuV,OAAQ,KACR93B,SAAU,GACV0a,QAAS,IAEV,CACCl6C,GAAI,mBACJ52B,KAAM,cACNyhE,OAAQ,GACRlpD,YAAa,iDACbyqE,SAAU,GACVK,OAAO,EACPrR,YAAa9C,GAAoB2X,WACjCxmE,SAAU4uD,GAAiB2rB,KAC3BlT,MAAO,EACPpP,OAAQ,KACRwL,MAAO,CACN1tB,SAAU,CACTmf,GAAaK,kCAAkC,qBAAsB5G,GAAmBkM,SAAU,GAClG3F,GAAaW,2BAA2B,qBAAsB/G,GAAkB+L,UAAW,KAG7FgT,OAAQ,KACR93B,SAAU,GACV0a,QAAS,IAEV,CACCl6C,GAAI,mBACJ52B,KAAM,cACNyhE,OAAQ,GACRlpD,YAAa,6CACbyqE,SAAU,GACVK,OAAO,EACPrR,YAAa9C,GAAoB4X,WACjCzmE,SAAU4uD,GAAiB2rB,KAC3BlT,MAAO,EACPpP,OAAQ,KACRwL,MAAO,CACN1tB,SAAU,CACTmf,GAAaK,kCAAkC,gBAAiB5G,GAAmBkM,SAAU,GAC7F3F,GAAaW,2BAA2B,gBAAiB/G,GAAkB+L,UAAW,GACtF3F,GAAaa,mBAAmB,gBAAiBhH,GAAUuJ,OAAQ,KAGrEuV,OAAQ,KACR93B,SAAU,GACV0a,QAAS,IAEV,CACCl6C,GAAI,mBACJ52B,KAAM,cACNyhE,OAAQ,GACRlpD,YAAa,yCACbyqE,SAAU,GACVK,OAAO,EACPrR,YAAa9C,GAAoB4X,WACjCzmE,SAAU4uD,GAAiB2rB,KAC3BlT,MAAO,EACPpP,OAAQ,KACRwL,MAAO,CACN1tB,SAAU,CACTmf,GAAaK,kCAAkC,eAAgB5G,GAAmBkM,SAAU,GAC5F3F,GAAaW,2BAA2B,eAAgB/G,GAAkB+L,UAAW,GACrF3F,GAAaa,mBAAmB,eAAgBhH,GAAUuJ,OAAQ,KAGpEuV,OAAQ,KACR93B,SAAU,GACV0a,QAAS,IAEV,CACCl6C,GAAI,cACJ52B,KAAM,SACNyhE,OAAQ,GACRlpD,YAAa,kDACbyqE,SAAU,GACVK,OAAO,EACPrR,YAAa9C,GAAoB6X,QACjC1mE,SAAU4uD,GAAiBsY,KAC3BG,MAAO,EACPpP,OAAQ,KACRwL,MAAO,CACN1tB,SAAU,CACTmf,GAAaK,kCAAkC,WAAY5G,GAAmBkM,SAAU,KAG1FgT,OAAQ,KACR93B,SAAU,GACV0a,QAAS,IAEV,CACCl6C,GAAI,oBACJ52B,KAAM,eACNyhE,OAAQ,GACRlpD,YAAa,mDACbyqE,SAAU,GACVK,OAAO,EACPrR,YAAa9C,GAAoB6X,QACjC1mE,SAAU4uD,GAAiBsY,KAC3BG,MAAO,EACPpP,OAAQ,KACRwL,MAAO,CACN1tB,SAAU,CACTmf,GAAaK,kCAAkC,gBAAiB5G,GAAmBkM,SAAU,GAC7F3F,GAAaW,2BAA2B,gBAAiB/G,GAAkB+L,UAAW,KAGxFgT,OAAQ,KACR93B,SAAU,GACV0a,QAAS,IAEV,CACCl6C,GAAI,YACJ52B,KAAM,OACNyhE,OAAQ,GACRlpD,YAAa,uBACbyqE,SAAU,GACVK,OAAO,EACPrR,YAAa9C,GAAoBwC,KACjCrxD,SAAU4uD,GAAiBgW,KAC3ByC,MAAO,EACPpP,OAAQ,KACRwL,MAAO,KACPoK,OAAQ,KACR93B,SAAU,GACV0a,QAAS,IAEV,CACCl6C,GAAI,eACJ52B,KAAM,UACNyhE,OAAQ,GACRlpD,YAAa,uBACbyqE,SAAU,GACVK,OAAO,EACPrR,YAAa9C,GAAoBwC,KACjCrxD,SAAU4uD,GAAiBgW,KAC3ByC,MAAO,EACPpP,OAAQ,KACRwL,MAAO,KACPoK,OAAQ,KACR93B,SAAU,GACV0a,QAAS,IAEV,CACCl6C,GAAI,aACJ52B,KAAM,QACNyhE,OAAQ,GACRlpD,YAAa,uBACbyqE,SAAU,GACVK,OAAO,EACPrR,YAAa9C,GAAoBwC,KACjCrxD,SAAU4uD,GAAiBgW,KAC3ByC,MAAO,EACPpP,OAAQ,KACRwL,MAAO,KACPoK,OAAQ,KACR93B,SAAU,GACV0a,QAAS,IAEV,CACCl6C,GAAI,aACJ52B,KAAM,QACNyhE,OAAQ,GACRlpD,YAAa,uBACbyqE,SAAU,GACVK,OAAO,EACPrR,YAAa9C,GAAoBwC,KACjCrxD,SAAU4uD,GAAiBgW,KAC3ByC,MAAO,EACPpP,OAAQ,KACRwL,MAAO,KACPoK,OAAQ,KACR93B,SAAU,GACV0a,QAAS,IAEV,CACCl6C,GAAI,cACJ52B,KAAM,SACNyhE,OAAQ,GACRlpD,YAAa,uBACbyqE,SAAU,GACVK,OAAO,EACPrR,YAAa9C,GAAoBwC,KACjCrxD,SAAU4uD,GAAiBgW,KAC3ByC,MAAO,EACPpP,OAAQ,KACRwL,MAAO,KACPoK,OAAQ,KACR93B,SAAU,GACV0a,QAAS,IAEV,CACCl6C,GAAI,YACJ52B,KAAM,OACNyhE,OAAQ,GACRlpD,YAAa,uCACbyqE,SAAU,GACVK,OAAO,EACPrR,YAAa9C,GAAoBwC,KACjCrxD,SAAU4uD,GAAiB2rB,KAC3BlT,MAAO,EACPpP,OAAQ,KACRwL,MAAO,KACPoK,OAAQ,KACR93B,SAAU,GACV0a,QAAS,IAEV,CACCl6C,GAAI,YACJ52B,KAAM,OACNyhE,OAAQ,GACRlpD,YAAa,wCACbyqE,SAAU,GACVK,OAAO,EACPrR,YAAa9C,GAAoBwC,KACjCrxD,SAAU4uD,GAAiB2rB,KAC3BlT,MAAO,EACPpP,OAAQ,KACRwL,MAAO,KACPoK,OAAQ,KACR93B,SAAU,GACV0a,QAAS,IAEV,CACCl6C,GAAI,iBACJ52B,KAAM,YACNyhE,OAAQ,GACRlpD,YAAa,+BACbyqE,SAAU,GACVK,OAAO,EACPrR,YAAa9C,GAAoBwC,KACjCrxD,SAAU4uD,GAAiB2rB,KAC3BlT,MAAO,EACPpP,OAAQ,KACRwL,MAAO,KACPoK,OAAQ,KACR93B,SAAU,GACV0a,QAAS,IAEV,CACCl6C,GAAI,aACJ52B,KAAM,QACNyhE,OAAQ,GACRlpD,YAAa,qEACbyqE,SAAU,GACVK,OAAO,EACPrR,YAAa9C,GAAoBwC,KACjCrxD,SAAU4uD,GAAiBqW,KAC3BoC,MAAO,EACPpP,OAAQ,KACRwL,MAAO,KACPoK,OAAQ,KACR93B,SAAU,GACV0a,QAAS,IAEV,CACCl6C,GAAI,YACJ52B,KAAM,OACNyhE,OAAQ,GACRlpD,YAAa,uBACbyqE,SAAU,GACVK,OAAO,EACPrR,YAAa9C,GAAoBwC,KACjCrxD,SAAU4uD,GAAiBqW,KAC3BoC,MAAO,EACPpP,OAAQ,KACRwL,MAAO,KACPoK,OAAQ,KACR93B,SAAU,GACV0a,QAAS,IAEV,CACCl6C,GAAI,gBACJ52B,KAAM,WACNyhE,OAAQ,GACRlpD,YAAa,uBACbyqE,SAAU,GACVK,OAAO,EACPrR,YAAa9C,GAAoBwC,KACjCrxD,SAAU4uD,GAAiBqW,KAC3BoC,MAAO,EACPpP,OAAQ,KACRwL,MAAO,KACPoK,OAAQ,KACR93B,SAAU,GACV0a,QAAS,IAEV,CACCl6C,GAAI,YACJ52B,KAAM,OACNyhE,OAAQ,GACRlpD,YAAa,uBACbyqE,SAAU,GACVK,OAAO,EACPrR,YAAa9C,GAAoBwC,KACjCrxD,SAAU4uD,GAAiBuY,KAC3BE,MAAO,EACPpP,OAAQ,KACRwL,MAAO,KACPoK,OAAQ,KACR93B,SAAU,GACV0a,QAAS,IAEV,CACCl6C,GAAI,aACJ52B,KAAM,QACNyhE,OAAQ,GACRlpD,YAAa,YACbyqE,SAAU,GACVK,OAAO,EACPrR,YAAa9C,GAAoBwC,KACjCrxD,SAAU4uD,GAAiBoW,KAC3BqC,MAAO,EACPpP,OAAQ,KACRwL,MAAO,KACPoK,OAAQ,KACR93B,SAAU,GACV0a,QAAS,KAIX,OAAO1R,EAAYC,KAAK+B,GAAM,SAAAt8D,GAAC,OAAIA,EAAE9E,IAAI,GAC1C,EC3mCM,OAAM66F,GAAQl9B,GAAA,SAAAk9B,IAAAnwF,EAAA,KAAAmwF,EAAA,IA2/EpB98B,GA3/EY88B,GAAAA,GACLC,SAAW,iBAAkB,CACnClkE,GAAI,gBACJ52B,KAAM,WACNyhE,OAAQ,GACRlpD,YAAa,6EACbshE,iBAAkB,CACjBtE,GAAaa,mBAAmB,mBAAoBhH,GAAU2K,QAAS,GACvExE,GAAaS,mBAAmB,mBAAoBzG,GAAUsV,aAAc,GAC5EtP,GAAaO,yBAAyB,mBAAoB5G,GAAoByV,aAE/EvuB,SAAU,CACTmf,GAAaa,mBAAmB,qBAAsBhH,GAAU2K,QAAS,GACzExE,GAAaS,mBAAmB,qBAAsBzG,GAAUsV,aAAc,GAC9EtP,GAAaE,iCAAiC,qBAAsBzG,GAAmBmM,OAAQ,IAEhGrK,QAAS,CACR,CACCl6C,GAAI,oBACJ52B,KAAM,gBACN+3E,cAAe,CACdC,GAAoBwc,aAErBtc,WAAY,CACXG,GAAuB3wE,QAExBinC,QAAS,CACR6pC,GAAcmC,aAAaxI,GAAe4B,gCAAgC3E,GAAU2K,QAAS,EAAGzK,GAAW0K,QAG7G,CACCpjD,GAAI,oBACJ52B,KAAM,eACN+3E,cAAe,CACdC,GAAoBwc,aAErBtc,WAAY,CACXG,GAAuB4B,MAAM5K,GAAiB6N,OAAQ,EAAG,KAE1DvuC,QAAS,CACR6pC,GAAcmC,aAAaxI,GAAe4B,gCAAgC3E,GAAU2K,QAAS,EAAGzK,GAAW0K,QAG7G,CACCpjD,GAAI,oBACJ52B,KAAM,eACN+3E,cAAe,CACdC,GAAoBwc,aAErBtc,WAAY,CACXG,GAAuB4B,MAAM5K,GAAiBkJ,QAAS,EAAG,KAE3D5pC,QAAS,CACR6pC,GAAcC,OAAO,CACpBH,QAAQ,EACR3G,MAAOpC,GAAUsV,aACjBtT,MAAOnC,GAAUuJ,MACjBC,WAAY,EACZC,IAAK,CACJL,GAAcY,WAAW9J,GAAW+J,OAAQ,GAC5Cb,GAAc2B,cAAcX,GAAaY,KAAM,QAKnD,CACCxjD,GAAI,oBACJ52B,KAAM,eACN+3E,cAAe,CACdC,GAAoBwc,aAErBtc,WAAY,CACXG,GAAuB4B,MAAM5K,GAAiBkJ,QAAS,EAAG,KAE3D5pC,QAAS,CACR6pC,GAAcC,OAAO,CACpBH,QAAQ,EACR3G,MAAOpC,GAAUsV,aACjBtT,MAAOnC,GAAUuJ,MACjBC,WAAY,EACZC,IAAK,CACJL,GAAcY,WAAW9J,GAAW+M,YAAa,GACjD7D,GAAcY,WAAW9J,GAAWgL,SAAU,QAKlD,CACC1jD,GAAI,oBACJ52B,KAAM,sBACN+3E,cAAe,CACdC,GAAoBwc,aAErBtc,WAAY,CACXG,GAAuB4B,MAAM5K,GAAiBoL,WAAY,EAAG,KAE9D9rC,QAAS,CACR6pC,GAAc2B,cAAcX,GAAa6d,KAAM,GAC/C7e,GAAcgC,sBAGhB,CACC5jD,GAAI,oBACJ52B,KAAM,gBACN+3E,cAAe,CACdC,GAAoBwc,aAErBtc,WAAY,CACXG,GAAuB3wE,QAExBinC,QAAS,CACR6pC,GAAc2B,cAAcX,GAAa1b,OAAQ,IACjD0a,GAAcgC,uBAIjB,EApHWqgB,GAsHLE,UAAY,iBAAkB,CACpCnkE,GAAI,iBACJ52B,KAAM,YACNyhE,OAAQjB,EAASM,aAAalqC,GAC9Bre,YAAa,6CACbshE,iBAAkB,CACjBtE,GAAaa,mBAAmB,oBAAqBhH,GAAU2K,QAAS,GACxExE,GAAaS,mBAAmB,oBAAqBzG,GAAUsV,aAAc,IAE9EzuB,SAAU,CACTmf,GAAaa,mBAAmB,sBAAuBhH,GAAU2K,QAAS,GAC1ExE,GAAaS,mBAAmB,sBAAuBzG,GAAUsV,aAAc,GAC/EtP,GAAaE,iCAAiC,sBAAuBzG,GAAmBmM,OAAQ,IAEjGrK,QAAS,CACR,CACCl6C,GAAI,qBACJ52B,KAAM,oBACN+3E,cAAe,GACfG,WAAY,CACXG,GAAuBa,SAAS7J,GAAiBkJ,QAAS,IAE3D5pC,QAAS,CACR6pC,GAAcC,OAAO,CACpBH,QAAQ,EACR3G,MAAOpC,GAAUsV,aACjBtT,MAAOnC,GAAUuJ,MACjBC,WAAY,EACZC,IAAK,CACJL,GAAcY,WAAW9J,GAAW+M,YAAa,QAKrD,CACCzlD,GAAI,qBACJ52B,KAAM,eACN+3E,cAAe,GACfG,WAAY,CACXG,GAAuBa,SAAS7J,GAAiBkJ,QAASrtB,OAAOoV,YAElE3xB,QAAS,CACR6pC,GAAcC,OAAO,CACpBH,QAAQ,EACR3G,MAAOpC,GAAUsV,aACjBtT,MAAOnC,GAAU2K,QACjBnB,WAAY,EACZC,IAAK,CACJL,GAAcY,WAAW9J,GAAW+M,YAAa,QAKrD,CACCzlD,GAAI,qBACJ52B,KAAM,cACN+3E,cAAe,GACfG,WAAY,CACXG,GAAuB4B,MAAM5K,GAAiB6N,OAAQ,EAAG,IAE1DvuC,QAAS,CACR6pC,GAAcmC,aAAaxI,GAAewB,mCAAmCvE,GAAU0K,UAAW,EAAG9K,GAAmBoM,aACxH5C,GAAcmC,aAAaxI,GAAewB,mCAAmCvE,GAAU0K,UAAW,EAAG9K,GAAmBmM,SACxH3C,GAAcmC,aAAaxI,GAAewB,mCAAmCvE,GAAU0K,UAAW,EAAG9K,GAAmBkM,aAG1H,CACCtkD,GAAI,qBACJ52B,KAAM,eACN+3E,cAAe,GACfG,WAAY,CACXwc,GAAuBC,SAAS,GAChCtc,GAAuB4B,MAAM5K,GAAiBoL,WAAYvvB,OAAOoV,UAAW,IAE7E3xB,QAAS,CACR6pC,GAAcC,OAAO,CACpBH,QAAQ,EACR3G,MAAOpC,GAAUsV,aACjBtT,MAAOnC,GAAU0K,UACjBlB,WAAY,EACZC,IAAK,CACJL,GAAc2B,cAAcX,GAAayd,KAAM,GAC/Cze,GAAc0B,iBAKlB,CACCtjD,GAAI,qBACJ52B,KAAM,gBACN+3E,cAAe,GACfG,WAAY,CACXG,GAAuB4B,MAAM5K,GAAiBkJ,QAAS,EAAG,IAE3D5pC,QAAS,CACR6pC,GAAcC,OAAO,CACpBH,QAAQ,EACR3G,MAAOpC,GAAUsV,aACjBtT,MAAOnC,GAAU0K,UACjBlB,WAAY,EACZC,IAAK,CACJL,GAAcY,WAAW9J,GAAWsM,KAAM,SAM/C,EAjOWif,GAmOLG,SAAW,iBAAkB,CACnCpkE,GAAI,gBACJ52B,KAAM,WACNyhE,OAAQjB,EAASE,eAAe9pC,GAChCre,YAAa,4DACbshE,iBAAkB,CACjBtE,GAAaa,mBAAmB,mBAAoBhH,GAAUuJ,MAAO,GACrEpD,GAAaS,mBAAmB,mBAAoBzG,GAAUwL,QAAS,GACvExF,GAAaS,mBAAmB,mBAAoBzG,GAAUmJ,OAAQ,GACtEnD,GAAaO,yBAAyB,mBAAoB5G,GAAoBwX,gBAE/EtwB,SAAU,CACTmf,GAAaa,mBAAmB,qBAAsBhH,GAAUuJ,MAAO,GACvEpD,GAAaS,mBAAmB,qBAAsBzG,GAAUwL,QAAS,GACzExF,GAAaS,mBAAmB,qBAAsBzG,GAAUmJ,OAAQ,GACxEnD,GAAaC,yBAAyB,qBAAsBlG,GAAW2L,OAAQ,IAEhFnK,QAAS,CACR,CACCl6C,GAAI,oBACJ52B,KAAM,gBACN+3E,cAAe,CACdC,GAAoBC,eAErBC,WAAY,CACXC,GAAuBC,QACvBC,GAAuBC,OAAOjJ,GAAiBkJ,QAAS,EAAG,IAE5D5pC,QAAS,CACR6pC,GAAcC,OAAO,CACpBH,QAAQ,EACR3G,MAAOpC,GAAUmJ,OACjBnH,MAAOnC,GAAUuJ,MACjBC,WAAY,EACZC,IAAK,CACJL,GAAcM,mBACdN,GAAcY,WAAW9J,GAAW2L,OAAQ,GAC5CzC,GAAcmC,aAAaxI,GAAeI,0BAA0BnD,GAAU0K,UAAW,EAAGxK,GAAW2L,cAK3G,CACCrkD,GAAI,oBACJ52B,KAAM,SACN+3E,cAAe,GACfG,WAAY,CACXG,GAAuB3wE,QAExBinC,QAAS,CACR6pC,GAAcmW,OACdnW,GAAcgC,sBAGhB,CACC5jD,GAAI,oBACJ52B,KAAM,eACN+3E,cAAe,CACdC,GAAoBC,cACpBD,GAAoBpH,UAErBsH,WAAY,CACXC,GAAuBC,QACvBC,GAAuBC,OAAOjJ,GAAiBkJ,QAAS,EAAG,IAE5D5pC,QAAS,CACR6pC,GAAcC,OAAO,CACpBH,QAAQ,EACR3G,MAAOpC,GAAUmJ,OACjBnH,MAAOnC,GAAUuJ,MACjBC,WAAY,EACZC,IAAK,CACJL,GAAcM,iBAAiB,GAC/BN,GAAcY,WAAW9J,GAAW2L,OAAQ,SAMjD,EAlTW4f,GAoTLI,UAAY,iBAAkB,CACpCrkE,GAAI,iBACJ52B,KAAM,YACNyhE,OAAQ,GACRlpD,YAAa,qFACbshE,iBAAkB,CACjBtE,GAAaa,mBAAmB,oBAAqBhH,GAAU0K,UAAW,GAC1EvE,GAAaS,mBAAmB,oBAAqBzG,GAAUmJ,OAAQ,GACvEnD,GAAaO,yBAAyB,oBAAqB5G,GAAoB6M,cAC/ExG,GAAaO,yBAAyB,oBAAqB5G,GAAoB2X,aAEhFzwB,SAAU,CACTmf,GAAaa,mBAAmB,sBAAuBhH,GAAU0K,UAAW,GAC5EvE,GAAaS,mBAAmB,sBAAuBzG,GAAUmJ,OAAQ,GACzEnD,GAAaE,iCAAiC,sBAAuBzG,GAAmBkM,SAAU,GAClG3F,GAAaK,kCAAkC,sBAAuB5G,GAAmBkM,SAAU,IAEpGpK,QAAS,CACR,CACCl6C,GAAI,qBACJ52B,KAAM,kBACN+3E,cAAe,CACdC,GAAoBC,eAErBC,WAAY,CACXC,GAAuBC,QACvBC,GAAuBC,OAAOjJ,GAAiBkJ,QAAS,EAAG,IAE5D5pC,QAAS,CACR6pC,GAAcC,OAAO,CACpBH,QAAQ,EACR3G,MAAOpC,GAAUmJ,OACjBnH,MAAOnC,GAAUuJ,MACjBC,WAAY,EACZC,IAAK,CACJL,GAAcM,mBACdN,GAAcM,wBAKlB,CACCliD,GAAI,qBACJ52B,KAAM,mBACN+3E,cAAe,CACdC,GAAoBC,eAErBC,WAAY,CACXC,GAAuBC,QACvBC,GAAuBC,OAAOjJ,GAAiBkJ,QAAS,EAAG,IAE5D5pC,QAAS,CACR6pC,GAAcC,OAAO,CACpBH,QAAQ,EACR3G,MAAOpC,GAAUmJ,OACjBnH,MAAOnC,GAAUuJ,MACjBC,WAAY,EACZC,IAAK,CACJL,GAAcM,mBACdN,GAAc0B,iBAKlB,CACCtjD,GAAI,qBACJ52B,KAAM,kBACN+3E,cAAe,CACdC,GAAoBC,eAErBC,WAAY,CACXC,GAAuBC,QACvBC,GAAuBC,OAAOjJ,GAAiBkJ,QAAS,EAAG,IAE5D5pC,QAAS,CACR6pC,GAAcC,OAAO,CACpBH,QAAQ,EACR3G,MAAOpC,GAAUmJ,OACjBnH,MAAOnC,GAAUuJ,MACjBC,WAAY,EACZC,IAAK,CACJL,GAAcM,mBACdN,GAAciF,YAKlB,CACC7mD,GAAI,qBACJ52B,KAAM,WACN+3E,cAAe,CACdC,GAAoBC,eAErBC,WAAY,CACXC,GAAuBC,QACvBC,GAAuBC,OAAOjJ,GAAiBkJ,QAASrtB,OAAOoV,UAAW,IAE3E3xB,QAAS,CACR6pC,GAAcC,OAAO,CACpBH,QAAQ,EACR3G,MAAOpC,GAAUmJ,OACjBnH,MAAOnC,GAAUuJ,MACjBC,WAAY,EACZC,IAAK,CACJL,GAAcM,wBAKlB,CACCliD,GAAI,qBACJ52B,KAAM,gBACN+3E,cAAe,CACdC,GAAoBC,eAErBC,WAAY,CACXC,GAAuBC,QACvBC,GAAuBC,OAAOjJ,GAAiB0jB,MAAO7nC,OAAOoV,UAAW,IAEzE3xB,QAAS,CACR6pC,GAAcmd,iBAGhB,CACC/+D,GAAI,qBACJ52B,KAAM,OACN+3E,cAAe,GACfG,WAAY,CACXG,GAAuB3wE,QAExBinC,QAAS,CACR6pC,GAAcmC,aAAaxI,GAAewB,mCAAmCvE,GAAU2K,QAAS,EAAG/K,GAAmBkM,cAIzH,EA3bW2f,GA6bLK,UAAY,iBAAkB,CACpCtkE,GAAI,iBACJ52B,KAAM,YACNyhE,OAAQ,GACRlpD,YAAa,+BACbshE,iBAAkB,CACjBtE,GAAaa,mBAAmB,oBAAqBhH,GAAU0K,UAAW,GAC1EvE,GAAaS,mBAAmB,oBAAqBzG,GAAUmJ,OAAQ,GACvEnD,GAAaO,yBAAyB,oBAAqB5G,GAAoBuX,iBAC/ElR,GAAaO,yBAAyB,oBAAqB5G,GAAoB4X,YAC/EvR,GAAaO,yBAAyB,oBAAqB5G,GAAoB6X,UAEhF3wB,SAAU,CACTmf,GAAaa,mBAAmB,sBAAuBhH,GAAU0K,UAAW,GAC5EvE,GAAaS,mBAAmB,sBAAuBzG,GAAUmJ,OAAQ,GACzEnD,GAAaE,iCAAiC,sBAAuBzG,GAAmBkM,SAAU,IAEnGpK,QAAS,CACR,CACCl6C,GAAI,qBACJ52B,KAAM,SACN+3E,cAAe,CACdC,GAAoBC,eAErBC,WAAY,CACXC,GAAuBC,QACvBC,GAAuB4B,MAAM5K,GAAiBkJ,QAAS,EAAG,IAE3D5pC,QAAS,CACR6pC,GAAc2B,cAAcX,GAAage,cAAe,GACxDhf,GAAcC,OAAO,CACpBH,QAAQ,EACR3G,MAAOpC,GAAUmJ,OACjBnH,MAAOnC,GAAUuJ,MACjBC,WAAY,EACZC,IAAK,CACJL,GAAcM,wBAKlB,CACCliD,GAAI,qBACJ52B,KAAM,iBACN+3E,cAAe,CACdC,GAAoBC,eAErBC,WAAY,CACXC,GAAuBC,QACvBC,GAAuBC,OAAOjJ,GAAiBkJ,QAAS,EAAG,IAE5D5pC,QAAS,CACR6pC,GAAcC,OAAO,CACpBH,QAAQ,EACR3G,MAAOpC,GAAUmJ,OACjBnH,MAAOnC,GAAUuJ,MACjBC,WAAY,EACZC,IAAK,CACJL,GAAcM,wBAKlB,CACCliD,GAAI,qBACJ52B,KAAM,SACN+3E,cAAe,CACdC,GAAoBC,eAErBC,WAAY,CACXC,GAAuBC,QACvBC,GAAuBC,OAAOjJ,GAAiBkJ,QAAS,EAAG,IAE5D5pC,QAAS,CACR6pC,GAAcC,OAAO,CACpBH,QAAQ,EACR3G,MAAOpC,GAAUmJ,OACjBnH,MAAOnC,GAAUuJ,MACjBC,WAAY,EACZC,IAAK,CACJL,GAAc8c,cAKlB,CACC1+D,GAAI,qBACJ52B,KAAM,kBACN+3E,cAAe,GACfG,WAAY,CACXG,GAAuB3wE,QAExBinC,QAAS,CACR6pC,GAAcmC,aAAaxI,GAAe4B,gCAAgC3E,GAAU0K,UAAW,EAAGxK,GAAW0K,QAG/G,CACCpjD,GAAI,qBACJ52B,KAAM,cACN+3E,cAAe,CACdC,GAAoBuc,UAErBrc,WAAY,CACXG,GAAuBa,SAAS7J,GAAiBkJ,QAAS,IAE3D5pC,QAAS,CACR6pC,GAAcC,OAAO,CACpBH,QAAQ,EACR3G,MAAOpC,GAAUmJ,OACjBnH,MAAOnC,GAAUuJ,MACjBC,WAAY,EACZC,IAAK,CACJL,GAAcY,WAAW9J,GAAW+J,OAAQ,GAC5Cb,GAAc2B,cAAcX,GAAaY,KAAM,QAKnD,CACCxjD,GAAI,qBACJ52B,KAAM,kBACN+3E,cAAe,CACdC,GAAoBC,eAErBC,WAAY,CACXC,GAAuBC,QACvBC,GAAuBC,OAAOjJ,GAAiBkJ,QAASrtB,OAAOoV,UAAW,IAE3E3xB,QAAS,CACR6pC,GAAcC,OAAO,CACpBH,QAAQ,EACR3G,MAAOpC,GAAUmJ,OACjBnH,MAAOnC,GAAUuJ,MACjBC,WAAY,EACZC,IAAK,CACJL,GAAcM,yBAMnB,EA1kBW+hB,GA4kBLM,OAAS,iBAAkB,CACjCvkE,GAAI,cACJ52B,KAAM,SACNyhE,OAAQjB,EAASO,QAAQnqC,GACzBre,YAAa,uEACbshE,iBAAkB,CACjBtE,GAAaa,mBAAmB,iBAAkBhH,GAAU2K,QAAS,GACrExE,GAAaS,mBAAmB,iBAAkBzG,GAAUmL,SAAU,IAEvEtkB,SAAU,CACTmf,GAAaa,mBAAmB,mBAAoBhH,GAAU2K,QAAS,GACvExE,GAAaS,mBAAmB,mBAAoBzG,GAAUmL,SAAU,GACxEnF,GAAaC,yBAAyB,mBAAoBlG,GAAWoN,MAAO,IAE7E5L,QAAS,CACR,CACCl6C,GAAI,kBACJ52B,KAAM,eACN+3E,cAAe,GACfG,WAAY,CACXG,GAAuBa,SAAS7J,GAAiB6N,OAAQ,IAE1DvuC,QAAS,CACR6pC,GAAc8E,WAAW,GACzB9E,GAAcwD,WAAW,KAG3B,CACCplD,GAAI,kBACJ52B,KAAM,YACN+3E,cAAe,GACfG,WAAY,CACXG,GAAuBa,SAAS7J,GAAiB6N,OAAQhyB,OAAOoV,YAEjE3xB,QAAS,CACR6pC,GAAc0c,gBAAgB9lB,GAAUoI,KACxCgB,GAAc8E,WAAW,GACzB9E,GAAcmC,aAAaxI,GAAe4B,gCAAgC3E,GAAU2K,QAAS,EAAGzK,GAAW0K,QAG7G,CACCpjD,GAAI,kBACJ52B,KAAM,aACN+3E,cAAe,GACfG,WAAY,CACXG,GAAuB4B,MAAM5K,GAAiB6N,OAAQhyB,OAAOoV,UAAW,IAEzE3xB,QAAS,CACR6pC,GAAcmC,aAAaxI,GAAe4B,gCAAgC3E,GAAU2K,QAAS,EAAGzK,GAAW0K,QAG7G,CACCpjD,GAAI,kBACJ52B,KAAM,QACN+3E,cAAe,GACfG,WAAY,CACXG,GAAuB4B,MAAM5K,GAAiB6N,OAAQ,EAAG,IAE1DvuC,QAAS,CACR6pC,GAAcmC,aAAaxI,GAAeO,0BAA0BtD,GAAU2K,QAAS,EAAG3K,GAAU0K,YACpGtB,GAAcmC,aAAaxI,GAAeO,0BAA0BtD,GAAU2K,QAAS,EAAG3K,GAAU2K,UACpGvB,GAAcmC,aAAaxI,GAAeO,0BAA0BtD,GAAU2K,QAAS,EAAG3K,GAAUuJ,UAGtG,CACC/hD,GAAI,kBACJ52B,KAAM,qBACN+3E,cAAe,GACfG,WAAY,CACXG,GAAuB4B,MAAM5K,GAAiBkJ,QAAS,EAAG,IAE3D5pC,QAAS,CACR6pC,GAAcC,OAAO,CACpBH,QAAQ,EACR3G,MAAOpC,GAAUmL,SACjBnJ,MAAOnC,GAAU0K,UACjBlB,WAAY,EACZC,IAAK,CACJL,GAAcY,WAAW9J,GAAWoN,MAAO,GAC3ClE,GAAcY,WAAW9J,GAAWmN,KAAM,SAM/C,EAjqBWoe,GAmqBLO,QAAU,iBAAkB,CAClCxkE,GAAI,eACJ52B,KAAM,UACNyhE,OAAQ,GACRlpD,YAAa,+DACbshE,iBAAkB,CACjBtE,GAAaa,mBAAmB,kBAAmBhH,GAAUuJ,MAAO,GACpEpD,GAAaS,mBAAmB,kBAAmBzG,GAAUmJ,OAAQ,GACrEnD,GAAaO,yBAAyB,kBAAmB5G,GAAoBwX,eAC7EnR,GAAaO,yBAAyB,kBAAmB5G,GAAoB2X,aAE9EzwB,SAAU,CACTmf,GAAaa,mBAAmB,oBAAqBhH,GAAUuJ,MAAO,GACtEpD,GAAaS,mBAAmB,oBAAqBzG,GAAUmJ,OAAQ,IAExE5H,QAAS,CACR,CACCl6C,GAAI,mBACJ52B,KAAM,cACN+3E,cAAe,CACdC,GAAoBC,eAErBC,WAAY,CACXC,GAAuBC,QACvBC,GAAuBC,OAAOjJ,GAAiBkJ,QAAS,EAAG,IAE5D5pC,QAAS,CACR6pC,GAAcC,OAAO,CACpBH,QAAQ,EACR3G,MAAOpC,GAAUmJ,OACjBnH,MAAOnC,GAAUuJ,MACjBC,WAAY,EACZC,IAAK,CACJL,GAAcM,sBAGhBN,GAAcC,OAAO,CACpBH,QAAQ,EACR3G,MAAOpC,GAAUmJ,OACjBnH,MAAOnC,GAAUuJ,MACjBC,WAAY,EACZC,IAAK,CACJL,GAAcM,wBAKlB,CACCliD,GAAI,mBACJ52B,KAAM,cACN+3E,cAAe,CACdC,GAAoBC,eAErBC,WAAY,CACXC,GAAuBC,QACvBC,GAAuBC,OAAOjJ,GAAiBkJ,QAAS,EAAG,IAE5D5pC,QAAS,CACR6pC,GAAcC,OAAO,CACpBH,QAAQ,EACR3G,MAAOpC,GAAUmJ,OACjBnH,MAAOnC,GAAUuJ,MACjBC,WAAY,EACZC,IAAK,CACJL,GAAcM,wBAKlB,CACCliD,GAAI,mBACJ52B,KAAM,mBACN+3E,cAAe,CACdC,GAAoBC,eAErBC,WAAY,CACXC,GAAuBC,QACvBC,GAAuBC,OAAOjJ,GAAiBkJ,QAASrtB,OAAOoV,UAAW,IAE3E3xB,QAAS,CACR6pC,GAAcC,OAAO,CACpBH,QAAQ,EACR3G,MAAOpC,GAAUmJ,OACjBnH,MAAOnC,GAAUuJ,MACjBC,WAAY,EACZC,IAAK,CACJL,GAAcM,wBAKlB,CACCliD,GAAI,mBACJ52B,KAAM,iBACN+3E,cAAe,CACdC,GAAoBC,eAErBC,WAAY,CACXC,GAAuBC,QACvBC,GAAuBC,OAAOjJ,GAAiBkJ,QAAS,EAAG,IAE5D5pC,QAAS,CACR6pC,GAAc2B,cAAcX,GAAage,cAAe,GACxDhf,GAAcC,OAAO,CACpBH,QAAQ,EACR3G,MAAOpC,GAAUmJ,OACjBnH,MAAOnC,GAAUuJ,MACjBC,WAAY,EACZC,IAAK,CACJL,GAAcM,wBAKlB,CACCliD,GAAI,mBACJ52B,KAAM,iBACN+3E,cAAe,GACfG,WAAY,CACXG,GAAuB3wE,QAExBinC,QAAS,CACR6pC,GAAcmC,aAAaxI,GAAeO,0BAA0BtD,GAAU0K,UAAW,EAAG1K,GAAUuJ,QACtGH,GAAcmC,aAAaxI,GAAe4B,gCAAgC3E,GAAU0K,UAAW,EAAGxK,GAAW0K,QAG/G,CACCpjD,GAAI,mBACJ52B,KAAM,kBACN+3E,cAAe,CACdC,GAAoBC,eAErBC,WAAY,CACXC,GAAuBC,QACvBC,GAAuBC,OAAOjJ,GAAiBkJ,QAAS,EAAG,IAE5D5pC,QAAS,CACR6pC,GAAcC,OAAO,CACpBH,QAAQ,EACR3G,MAAOpC,GAAUmJ,OACjBnH,MAAOnC,GAAUuJ,MACjBC,YAAa,EACbC,IAAK,CACJL,GAAcM,sBAGhBN,GAAcgC,uBAIjB,EAzzBWqgB,GA2zBLQ,MAAQ,iBAAkB,CAChCzkE,GAAI,aACJ52B,KAAM,QACNyhE,OAAQjB,EAASS,MAAMrqC,GACvBre,YAAa,+CACbshE,iBAAkB,CACjBtE,GAAaa,mBAAmB,gBAAiBhH,GAAU2K,QAAS,GACpExE,GAAaS,mBAAmB,gBAAiBzG,GAAUsV,aAAc,IAE1EzuB,SAAU,CACTmf,GAAaa,mBAAmB,kBAAmBhH,GAAU2K,QAAS,GACtExE,GAAaS,mBAAmB,kBAAmBzG,GAAUsV,aAAc,IAE5E/T,QAAS,CACR,CACCl6C,GAAI,iBACJ52B,KAAM,mBACN+3E,cAAe,GACfG,WAAY,CACXG,GAAuB3wE,QAExBinC,QAAS,CACR6pC,GAAcsd,OAAO5X,GAAWvC,SAGlC,CACC/kD,GAAI,iBACJ52B,KAAM,gBACN+3E,cAAe,GACfG,WAAY,CACXG,GAAuB4B,MAAM5K,GAAiB0jB,MAAO,EAAG,KAEzDpkD,QAAS,CACR6pC,GAAcid,eAGhB,CACC7+D,GAAI,iBACJ52B,KAAM,WACN+3E,cAAe,GACfG,WAAY,CACXG,GAAuB4B,MAAM5K,GAAiBoL,WAAYvvB,OAAOoV,UAAW,IAE7E3xB,QAAS,CACR6pC,GAAcC,OAAO,CACpBH,QAAQ,EACR3G,MAAOpC,GAAUsV,aACjBtT,MAAOnC,GAAU0K,UACjBlB,WAAY,EACZC,IAAK,CACJL,GAAcY,WAAW9J,GAAWoN,MAAO,GAC3ClE,GAAciF,YAKlB,CACC7mD,GAAI,iBACJ52B,KAAM,gBACN+3E,cAAe,GACfG,WAAY,CACXG,GAAuB4B,MAAM5K,GAAiB6N,OAAQhyB,OAAOoV,UAAW,IAEzE3xB,QAAS,CACR6pC,GAAc8E,WAAW,GACzB9E,GAAc0c,gBAAgB9lB,GAAUoI,QAI3C,EAh4BWqjB,GAk4BLS,aAAe,iBAAkB,CACvC1kE,GAAI,oBACJ52B,KAAM,eACNyhE,OAAQjB,EAASG,WAAW/pC,GAC5Bre,YAAa,8CACbshE,iBAAkB,CACjBtE,GAAaa,mBAAmB,uBAAwBhH,GAAU2K,QAAS,GAC3ExE,GAAaS,mBAAmB,uBAAwBzG,GAAUsV,aAAc,GAChFtP,GAAaO,yBAAyB,uBAAwB5G,GAAoByV,aAEnFvuB,SAAU,CACTmf,GAAaa,mBAAmB,yBAA0BhH,GAAU2K,QAAS,GAC7ExE,GAAaS,mBAAmB,yBAA0BzG,GAAUsV,aAAc,GAClFtP,GAAaE,iCAAiC,yBAA0BzG,GAAmBmM,OAAQ,GACnG5F,GAAaK,kCAAkC,yBAA0B5G,GAAmBmM,OAAQ,IAErGrK,QAAS,CACR,CACCl6C,GAAI,wBACJ52B,KAAM,mBACN+3E,cAAe,CACdC,GAAoBwc,aAErBtc,WAAY,CACXG,GAAuB3wE,QAExBinC,QAAS,CACR6pC,GAAcsd,OAAO5X,GAAW0Z,aAGlC,CACChhE,GAAI,wBACJ52B,KAAM,QACN+3E,cAAe,CACdC,GAAoBwc,aAErBtc,WAAY,CACXG,GAAuB4B,MAAM5K,GAAiBkJ,QAAS,EAAG,KAE3D5pC,QAAS,CACR6pC,GAAcC,OAAO,CACpBH,QAAQ,EACR3G,MAAOpC,GAAUsV,aACjBtT,MAAOnC,GAAUuJ,MACjBC,WAAY,EACZC,IAAK,CACJL,GAAcY,WAAW9J,GAAWmN,KAAM,GAC1CjE,GAAcmC,aAAaxI,GAAeI,0BAA0BnD,GAAU0K,UAAW,EAAGxK,GAAWmN,YAK3G,CACC7lD,GAAI,wBACJ52B,KAAM,OACN+3E,cAAe,CACdC,GAAoBwc,aAErBtc,WAAY,CACXG,GAAuB4B,MAAM5K,GAAiBkJ,QAAS,EAAG,KAE3D5pC,QAAS,CACR6pC,GAAcC,OAAO,CACpBH,QAAQ,EACR3G,MAAOpC,GAAUsV,aACjBtT,MAAOnC,GAAUuJ,MACjBC,WAAY,EACZC,IAAK,CACJL,GAAcY,WAAW9J,GAAW6M,KAAM,GAC1C3D,GAAcmC,aAAaxI,GAAesC,+BAA+BrF,GAAU0K,UAAW,SAKlG,CACCljD,GAAI,wBACJ52B,KAAM,cACN+3E,cAAe,CACdC,GAAoBwc,aAErBtc,WAAY,CACXG,GAAuB4B,MAAM5K,GAAiBkJ,QAAS,EAAG,KAE3D5pC,QAAS,CACR6pC,GAAcC,OAAO,CACpBH,QAAQ,EACR3G,MAAOpC,GAAUsV,aACjBtT,MAAOnC,GAAUuJ,MACjBC,WAAY,EACZC,IAAK,CACJL,GAAcY,WAAW9J,GAAW+M,YAAa,GACjD7D,GAAciF,YAKlB,CACC7mD,GAAI,wBACJ52B,KAAM,uBACN+3E,cAAe,CACdC,GAAoBwc,aAErBtc,WAAY,CACXG,GAAuB3wE,QAExBinC,QAAS,CACR6pC,GAAcmC,aAAaxI,GAAegC,wCAAwC/E,GAAU2K,QAAS,EAAG/K,GAAmBmM,YAI9H,EAh/BW0f,GAk/BLU,UAAY,iBAAkB,CACpC3kE,GAAI,iBACJ52B,KAAM,YACNyhE,OAAQjB,EAASC,SAAS7pC,GAC1Bre,YAAa,iEACbshE,iBAAkB,CACjBtE,GAAaa,mBAAmB,oBAAqBhH,GAAU2K,QAAS,GACxExE,GAAaS,mBAAmB,oBAAqBzG,GAAUsV,aAAc,GAC7EtP,GAAaO,yBAAyB,oBAAqB5G,GAAoByV,aAEhFvuB,SAAU,CACTmf,GAAaa,mBAAmB,sBAAuBhH,GAAU2K,QAAS,GAC1ExE,GAAaS,mBAAmB,sBAAuBzG,GAAUsV,aAAc,GAC/EtP,GAAaC,yBAAyB,sBAAuBlG,GAAW2X,QAAS,GACjF1R,GAAaG,0BAA0B,sBAAuBpG,GAAW2X,QAAS,IAEnFnW,QAAS,CACR,CACCl6C,GAAI,qBACJ52B,KAAM,sBACN+3E,cAAe,CACdC,GAAoBwc,aAErBtc,WAAY,CACXG,GAAuB4B,MAAM5K,GAAiBkJ,QAAS,EAAG,KAE3D5pC,QAAS,CACR6pC,GAAcC,OAAO,CACpBH,QAAQ,EACR3G,MAAOpC,GAAUsV,aACjBtT,MAAOnC,GAAU2K,QACjBnB,WAAY,EACZC,IAAK,CACJL,GAAcuF,qBAKlB,CACCnnD,GAAI,qBACJ52B,KAAM,WACN+3E,cAAe,CACdC,GAAoBwc,aAErBtc,WAAY,CACXG,GAAuB4B,MAAM5K,GAAiBkJ,QAAS,EAAG,KAE3D5pC,QAAS,CACR6pC,GAAcC,OAAO,CACpBH,QAAQ,EACR3G,MAAOpC,GAAUsV,aACjBtT,MAAOnC,GAAU2K,QACjBnB,WAAY,EACZC,IAAK,CACJL,GAAciF,YAKlB,CACC7mD,GAAI,qBACJ52B,KAAM,cACN+3E,cAAe,CACdC,GAAoBwc,aAErBtc,WAAY,CACXG,GAAuB4B,MAAM5K,GAAiBkJ,QAAS,EAAG,KAE3D5pC,QAAS,CACR6pC,GAAcC,OAAO,CACpBH,QAAQ,EACR3G,MAAOpC,GAAUsV,aACjBtT,MAAOnC,GAAU2K,QACjBnB,WAAY,EACZC,IAAK,CACJL,GAAcmC,aAAaxI,GAAeS,4BAA4BxD,GAAU2K,QAAS,EAAG3K,GAAUuJ,aAK1G,CACC/hD,GAAI,qBACJ52B,KAAM,mBACN+3E,cAAe,CACdC,GAAoBwc,aAErBtc,WAAY,CACXG,GAAuB3wE,QAExBinC,QAAS,CACR6pC,GAAcmC,aAAaxI,GAAegC,wCAAwC/E,GAAU2K,QAAS,EAAG/K,GAAmBoM,eAG7H,CACCxkD,GAAI,qBACJ52B,KAAM,SACN+3E,cAAe,CACdC,GAAoBwc,aAErBtc,WAAY,CACXG,GAAuB4B,MAAM5K,GAAiBkJ,QAAS,EAAG,KAE3D5pC,QAAS,CACR6pC,GAAcC,OAAO,CACpBH,QAAQ,EACR3G,MAAOpC,GAAUsV,aACjBtT,MAAOnC,GAAU2K,QACjBnB,WAAY,EACZC,IAAK,CACJL,GAAcmC,aAAaxI,GAAesB,6BAA6BrE,GAAU0K,UAAW,EAAGxK,GAAW0K,WAK9G,CACCpjD,GAAI,qBACJ52B,KAAM,QACN+3E,cAAe,CACdC,GAAoBwc,aAErBtc,WAAY,CACXG,GAAuB4B,MAAM5K,GAAiB6N,OAAQhyB,OAAOoV,UAAW,IAEzE3xB,QAAS,CACR6pC,GAAcmW,UAIjB,EAlnCWkM,GAonCLW,UAAY,iBAAkB,CACpC5kE,GAAI,iBACJ52B,KAAM,YACNyhE,OAAQjB,EAASC,SAAS7pC,GAC1Bre,YAAa,2DACbshE,iBAAkB,CACjBtE,GAAaa,mBAAmB,oBAAqBhH,GAAU0K,UAAW,GAC1EvE,GAAaS,mBAAmB,oBAAqBzG,GAAUsV,aAAc,GAC7EtP,GAAaO,yBAAyB,oBAAqB5G,GAAoByV,aAEhFvuB,SAAU,CACTmf,GAAaa,mBAAmB,sBAAuBhH,GAAU0K,UAAW,GAC5EvE,GAAaS,mBAAmB,sBAAuBzG,GAAUsV,aAAc,GAC/EtP,GAAac,kBAAkB,sBAAuB7G,GAAcgF,cAAe,GACnFe,GAAac,kBAAkB,sBAAuB7G,GAAckF,gBAAiB,IAEtF5D,QAAS,CACR,CACCl6C,GAAI,qBACJ52B,KAAM,mBACN+3E,cAAe,CACdC,GAAoBwc,aAErBtc,WAAY,CACXG,GAAuB4B,MAAM5K,GAAiBwjB,QAAS,EAAG,KAE3DlkD,QAAS,CACR6pC,GAAcgd,cAAcvX,GAAuBqD,cAGrD,CACC1qD,GAAI,qBACJ52B,KAAM,gBACN+3E,cAAe,CACdC,GAAoBwc,aAErBtc,WAAY,CACXG,GAAuB4B,MAAM5K,GAAiBwjB,QAAS,EAAG,KAE3DlkD,QAAS,CACR6pC,GAAcgd,cAAcvX,GAAuByD,SAGrD,CACC9qD,GAAI,qBACJ52B,KAAM,iBACN+3E,cAAe,CACdC,GAAoBwc,aAErBtc,WAAY,CACXG,GAAuB4B,MAAM5K,GAAiBwjB,QAAS,EAAG,KAE3DlkD,QAAS,CACR6pC,GAAckd,kBAGhB,CACC9+D,GAAI,qBACJ52B,KAAM,OACN+3E,cAAe,CACdC,GAAoBwc,aAErBtc,WAAY,CACXG,GAAuB4B,MAAM5K,GAAiB0jB,MAAO7nC,OAAOoV,UAAW,IAExE3xB,QAAS,CACR6pC,GAAcid,eAGhB,CACC7+D,GAAI,qBACJ52B,KAAM,YACN+3E,cAAe,CACdC,GAAoBwc,aAErBtc,WAAY,CACXG,GAAuB4B,MAAM5K,GAAiBkJ,QAAS,EAAG,KAE3D5pC,QAAS,CACR6pC,GAAcC,OAAO,CACpBH,QAAQ,EACR3G,MAAOpC,GAAUsV,aACjBtT,MAAOnC,GAAU0K,UACjBlB,WAAY,EACZC,IAAK,CACJL,GAAcmC,aAAaxI,GAAeS,4BAA4BxD,GAAU0K,UAAW,EAAG1K,GAAUuJ,QACxGH,GAAcmC,aAAaxI,GAAesC,+BAA+BrF,GAAU0K,UAAW,SAKlG,CACCljD,GAAI,qBACJ52B,KAAM,YACN+3E,cAAe,CACdC,GAAoBwc,aAErBtc,WAAY,CACXG,GAAuB4B,MAAM5K,GAAiBkJ,QAAS,EAAG,KAE3D5pC,QAAS,CACR6pC,GAAcC,OAAO,CACpBH,QAAQ,EACR3G,MAAOpC,GAAUsV,aACjBtT,MAAOnC,GAAUuJ,MACjBC,WAAY,EACZC,IAAK,CACJL,GAAcY,WAAW9J,GAAW+J,OAAQ,GAC5Cb,GAAc0B,kBAMnB,EAtuCW2gB,GAwuCLY,WAAa,iBAAkB,CACrC7kE,GAAI,kBACJ52B,KAAM,aACNyhE,OAAQjB,EAASM,aAAalqC,GAC9Bre,YAAa,wCACbshE,iBAAkB,CACjBtE,GAAaa,mBAAmB,qBAAsBhH,GAAUuJ,MAAO,GACvEpD,GAAaS,mBAAmB,qBAAsBzG,GAAUmJ,OAAQ,GACxEnD,GAAaO,yBAAyB,qBAAsB5G,GAAoB0X,gBAEjFxwB,SAAU,CACTmf,GAAaa,mBAAmB,uBAAwBhH,GAAUuJ,MAAO,GACzEpD,GAAaS,mBAAmB,uBAAwBzG,GAAUmJ,OAAQ,IAE3E5H,QAAS,CACR,CACCl6C,GAAI,sBACJ52B,KAAM,WACN+3E,cAAe,CACdC,GAAoBe,gBAErBb,WAAY,CACXC,GAAuBa,SACvB0b,GAAuBpc,SACvBD,GAAuB4B,MAAM5K,GAAiBoL,WAAYvvB,OAAOoV,UAAW,IAE7E3xB,QAAS,CACR6pC,GAAcC,OAAO,CACpBH,QAAQ,EACR3G,MAAOpC,GAAUmJ,OACjBnH,MAAOnC,GAAUuJ,MACjBC,WAAY,EACZC,IAAK,CACJL,GAAcM,kBAAkB,QAKpC,CACCliD,GAAI,sBACJ52B,KAAM,oBACN+3E,cAAe,CACdC,GAAoBe,gBAErBb,WAAY,CACXC,GAAuBa,SACvBX,GAAuBC,OAAOjJ,GAAiBkJ,QAAS,EAAG,IAE5D5pC,QAAS,CACR6pC,GAAcC,OAAO,CACpBH,QAAQ,EACR3G,MAAOpC,GAAUmJ,OACjBnH,MAAOnC,GAAUuJ,MACjBC,YAAa,EACbC,IAAK,CACJL,GAAcM,iBAAiB,QAKnC,CACCliD,GAAI,sBACJ52B,KAAM,gBACN+3E,cAAe,CACdC,GAAoBe,gBAErBb,WAAY,CACXG,GAAuBa,SAAS7J,GAAiBkJ,QAAS,IAE3D5pC,QAAS,CACR6pC,GAAcC,OAAO,CACpBH,QAAQ,EACR3G,MAAOpC,GAAUmJ,OACjBnH,MAAOnC,GAAUuJ,MACjBC,WAAY,EACZC,IAAK,CACJL,GAAcY,WAAW9J,GAAW+J,OAAQ,QAKhD,CACCziD,GAAI,sBACJ52B,KAAM,YACN+3E,cAAe,CACdC,GAAoBe,gBAErBb,WAAY,CACXC,GAAuBa,SACvBX,GAAuBC,OAAOjJ,GAAiBkJ,QAAS,EAAG,IAE5D5pC,QAAS,CACR6pC,GAAcC,OAAO,CACpBH,QAAQ,EACR3G,MAAOpC,GAAUmJ,OACjBnH,MAAOnC,GAAUuJ,MACjBC,YAAa,EACbC,IAAK,CACJL,GAAcM,sBAGhBN,GAAcC,OAAO,CACpBH,QAAQ,EACR3G,MAAOpC,GAAUmJ,OACjBnH,MAAOnC,GAAUuJ,MACjBC,YAAa,EACbC,IAAK,CACJL,GAAcM,wBAKlB,CACCliD,GAAI,sBACJ52B,KAAM,eACN+3E,cAAe,CACdC,GAAoBe,gBAErBb,WAAY,CACXC,GAAuBa,SACvBX,GAAuBC,OAAOjJ,GAAiBkJ,QAAS,EAAG,IAE5D5pC,QAAS,CACR6pC,GAAcC,OAAO,CACpBH,QAAQ,EACR3G,MAAOpC,GAAUmJ,OACjBnH,MAAOnC,GAAUuJ,MACjBC,WAAY,EACZC,IAAK,CACJL,GAAcM,yBAMnB,EA/2CW+hB,GAi3CLa,WAAa,iBAAkB,CACrC9kE,GAAI,kBACJ52B,KAAM,aACNyhE,OAAQjB,EAASS,MAAMrqC,GACvBre,YAAa,6CACbshE,iBAAkB,CACjBtE,GAAaS,mBAAmB,qBAAsBzG,GAAUsV,aAAc,IAE/EzuB,SAAU,CACTmf,GAAaS,mBAAmB,uBAAwBzG,GAAUsV,aAAc,GAChFtP,GAAaW,2BAA2B,uBAAwB/G,GAAkBqI,IAAK,GACvFjC,GAAaE,iCAAiC,uBAAwBzG,GAAmBwI,IAAK,GAC9FjC,GAAaK,kCAAkC,uBAAwB5G,GAAmBwI,IAAK,IAEhG1G,QAAS,CACR,CACCl6C,GAAI,sBACJ52B,KAAM,aACN+3E,cAAe,GACfG,WAAY,CACXG,GAAuB4B,MAAM5K,GAAiBkJ,QAAS,EAAG,KAE3D5pC,QAAS,CACR6pC,GAAcC,OAAO,CACpBH,QAAQ,EACR3G,MAAOpC,GAAUsV,aACjBtT,MAAOnC,GAAUuJ,MACjBC,WAAY,EACZC,IAAK,CACJL,GAAcY,WAAW9J,GAAWkI,IAAK,QAK7C,CACC5gD,GAAI,sBACJ52B,KAAM,aACN+3E,cAAe,GACfG,WAAY,CACXG,GAAuB4B,MAAM5K,GAAiBoL,WAAYvvB,OAAOoV,UAAW,KAE7E3xB,QAAS,CACR6pC,GAAc2B,cAAcX,GAAa1b,OAAQ,KAGnD,CACClnC,GAAI,sBACJ52B,KAAM,mBACN+3E,cAAe,GACfG,WAAY,CACXG,GAAuB4B,MAAM5K,GAAiBoL,WAAYvvB,OAAOoV,UAAW,KAE7E3xB,QAAS,CACR6pC,GAAc2c,kBAAiB,KAGjC,CACCv+D,GAAI,sBACJ52B,KAAM,SACN+3E,cAAe,GACfG,WAAY,CACXG,GAAuB4B,MAAM5K,GAAiBoL,WAAY,EAAG,IAE9D9rC,QAAS,CACR6pC,GAAc2B,cAAcX,GAAa1b,OAAQ,IACjD0a,GAAciF,UAIjB,EAt7CWod,GAw7CLc,YAAc,iBAAkB,CACtC/kE,GAAI,mBACJ52B,KAAM,cACNyhE,OAAQjB,EAASK,SAASjqC,GAC1Bre,YAAa,uDACbshE,iBAAkB,CACjBtE,GAAaa,mBAAmB,sBAAuBhH,GAAU2K,QAAS,GAC1ExE,GAAaS,mBAAmB,sBAAuBzG,GAAUsV,aAAc,GAC/EtP,GAAaO,yBAAyB,sBAAuB5G,GAAoByV,aAElFvuB,SAAU,CACTmf,GAAaa,mBAAmB,wBAAyBhH,GAAU2K,QAAS,GAC5ExE,GAAaS,mBAAmB,wBAAyBzG,GAAUsV,aAAc,GACjFtP,GAAamB,wBAAwB,wBAAyBlH,GAAciD,WAAYnD,GAAWkM,MAAO,GAC1GjG,GAAaC,yBAAyB,wBAAyBlG,GAAWkM,MAAO,IAElF1K,QAAS,CACR,CACCl6C,GAAI,uBACJ52B,KAAM,kBACN+3E,cAAe,CACdC,GAAoBwc,YACpBxc,GAAoBzH,UAErB2H,WAAY,CACXG,GAAuB4B,MAAM5K,GAAiBkJ,QAAS,EAAG,IAE3D5pC,QAAS,CACR6pC,GAAcY,WAAW9J,GAAWkM,MAAO,GAC3ChD,GAAcgF,OAAO,CACpBhF,GAAc8E,WAAW,OAI5B,CACC1mD,GAAI,uBACJ52B,KAAM,kBACN+3E,cAAe,CACdC,GAAoBwc,YACpBxc,GAAoBsD,SAErBpD,WAAY,CACXG,GAAuB4B,MAAM5K,GAAiBkJ,QAAS,EAAG,IAE3D5pC,QAAS,CACR6pC,GAAcyc,cAAc,GAC5Bzc,GAAcgF,OAAO,CACpBhF,GAAcwD,WAAW,OAI5B,CACCplD,GAAI,uBACJ52B,KAAM,gBACN+3E,cAAe,CACdC,GAAoBwc,aAErBtc,WAAY,CACXG,GAAuB4B,MAAM5K,GAAiB6N,OAAQ,EAAG,IAE1DvuC,QAAS,CACR6pC,GAAc8E,WAAW,GACzB9E,GAAcgF,OAAO,CACpBhF,GAAcY,WAAW9J,GAAWkM,MAAO,OAI9C,CACC5kD,GAAI,uBACJ52B,KAAM,gBACN+3E,cAAe,CACdC,GAAoBwc,aAErBtc,WAAY,CACXG,GAAuB4B,MAAM5K,GAAiB6N,OAAQ,EAAG,IAE1DvuC,QAAS,CACR6pC,GAAcwD,WAAW,GACzBxD,GAAcgF,OAAO,CACpBhF,GAAcyc,cAAc,OAI/B,CACCr+D,GAAI,uBACJ52B,KAAM,qBACN+3E,cAAe,CACdC,GAAoBwc,YACpBxc,GAAoBzH,UAErB2H,WAAY,CACXG,GAAuB4B,MAAM5K,GAAiB6N,OAAQ,EAAG,IAE1DvuC,QAAS,CACR6pC,GAAc8E,WAAW,GACzB9E,GAAcmC,aAAaxI,GAAeO,0BAA0BtD,GAAU2K,QAAS,EAAG3K,GAAU0K,YACpGtB,GAAcmC,aAAaxI,GAAeO,0BAA0BtD,GAAU2K,QAAS,EAAG3K,GAAU2K,YAGtG,CACCnjD,GAAI,uBACJ52B,KAAM,aACN+3E,cAAe,CACdC,GAAoBwc,aAErBtc,WAAY,CACXG,GAAuB4B,MAAM5K,GAAiBkJ,QAAS,EAAG,IAE3D5pC,QAAS,CACR6pC,GAAcC,OAAO,CACpBH,QAAQ,EACR3G,MAAOpC,GAAUsV,aACjBtT,MAAOnC,GAAU2K,QACjBnB,WAAY,EACZC,IAAK,CACJL,GAAcY,WAAW9J,GAAWkM,MAAO,GAC3ChD,GAAcgF,OAAO,CACpBhF,GAAcwD,WAAW,UAM9B,CACCplD,GAAI,uBACJ52B,KAAM,iBACN+3E,cAAe,CACdC,GAAoBwc,aAErBtc,WAAY,CACXG,GAAuB3wE,QAExBinC,QAAS,CACR6pC,GAAcsd,OAAO5X,GAAWb,WAInC,EAjkDWwd,GAmkDLe,MAAQ,iBAAkB,CAChChlE,GAAI,aACJ52B,KAAM,QACNyhE,OAAQjB,EAASE,eAAe9pC,GAChCre,YAAa,wFACbshE,iBAAkB,CACjBtE,GAAaa,mBAAmB,gBAAiBhH,GAAUuJ,MAAO,GAClEpD,GAAaS,mBAAmB,gBAAiBzG,GAAU4J,MAAO,GAClE5D,GAAaS,mBAAmB,gBAAiBzG,GAAUwL,QAAS,IAErE3kB,SAAU,CACTmf,GAAaa,mBAAmB,kBAAmBhH,GAAUuJ,MAAO,GACpEpD,GAAaS,mBAAmB,kBAAmBzG,GAAU4J,MAAO,GACpE5D,GAAaS,mBAAmB,kBAAmBzG,GAAUwL,QAAS,GACtExF,GAAaE,iCAAiC,kBAAmBzG,GAAmBkM,SAAU,IAE/FpK,QAAS,CACR,CACCl6C,GAAI,iBACJ52B,KAAM,kBACN+3E,cAAe,GACfG,WAAY,CACXG,GAAuBa,SAAS7J,GAAiBkJ,QAAS,IAE3D5pC,QAAS,CACR6pC,GAAcC,OAAO,CACpBH,QAAQ,EACR3G,MAAOpC,GAAU4J,MACjB5H,MAAOnC,GAAUuJ,MACjBC,WAAY,EACZC,IAAK,CACJL,GAAcY,WAAW9J,GAAW+J,OAAQ,QAKhD,CACCziD,GAAI,iBACJ52B,KAAM,SACN+3E,cAAe,GACfG,WAAY,CACXG,GAAuBa,SAAS7J,GAAiBkJ,QAAS,IAE3D5pC,QAAS,CACR6pC,GAAcC,OAAO,CACpBH,QAAQ,EACR3G,MAAOpC,GAAU4J,MACjB5H,MAAOnC,GAAUuJ,MACjBC,WAAY,EACZC,IAAK,CACJL,GAAcY,WAAW9J,GAAW+J,OAAQ,MAG9Cb,GAAcC,OAAO,CACpBH,QAAQ,EACR3G,MAAOpC,GAAU4J,MACjB5H,MAAOnC,GAAUuJ,MACjBC,WAAY,EACZC,IAAK,CACJL,GAAcY,WAAW9J,GAAW+J,OAAQ,MAG9Cb,GAAcC,OAAO,CACpBH,QAAQ,EACR3G,MAAOpC,GAAU4J,MACjB5H,MAAOnC,GAAUuJ,MACjBC,WAAY,EACZC,IAAK,CACJL,GAAcY,WAAW9J,GAAW+J,OAAQ,QAKhD,CACCziD,GAAI,iBACJ52B,KAAM,aACN+3E,cAAe,GACfG,WAAY,CACXG,GAAuBa,SAAS7J,GAAiBkJ,QAAS,IAE3D5pC,QAAS,CACR6pC,GAAcC,OAAO,CACpBH,QAAQ,EACR3G,MAAOpC,GAAU4J,MACjB5H,MAAOnC,GAAUuJ,MACjBC,WAAY,EACZC,IAAK,CACJL,GAAcY,WAAW9J,GAAW+J,OAAQ,QAKhD,CACCziD,GAAI,iBACJ52B,KAAM,gBACN+3E,cAAe,GACfG,WAAY,CACXG,GAAuB3wE,QAExBinC,QAAS,CACR6pC,GAAcmC,aAAaxI,GAAeO,0BAA0BtD,GAAU0K,UAAW,EAAG1K,GAAUuJ,QACtGH,GAAcmC,aAAaxI,GAAeoC,6BAA6BnF,GAAU0K,UAAW,IAC5FtB,GAAcmC,aAAaxI,GAAeW,0BAA0B1D,GAAU0K,UAAW,EAAGvK,GAAU4J,QACtGX,GAAcmC,aAAaxI,GAAewB,mCAAmCvE,GAAU0K,UAAW,EAAG9K,GAAmBkM,cAI3H,EA9qDW2f,GAgrDLgB,QAAU,iBAAkB,CAClCjlE,GAAI,eACJ52B,KAAM,UACNyhE,OAAQjB,EAASO,QAAQnqC,GACzBre,YAAa,8CACbshE,iBAAkB,CACjBtE,GAAaa,mBAAmB,kBAAmBhH,GAAU2K,QAAS,GACtExE,GAAaS,mBAAmB,kBAAmBzG,GAAUmL,SAAU,GACvEnF,GAAaS,mBAAmB,kBAAmBzG,GAAUmJ,OAAQ,GACrEnD,GAAaO,yBAAyB,kBAAmB5G,GAAoBuX,iBAC7ElR,GAAaO,yBAAyB,kBAAmB5G,GAAoB4X,YAC7EvR,GAAaO,yBAAyB,kBAAmB5G,GAAoB6X,UAE9E3wB,SAAU,CACTmf,GAAaa,mBAAmB,oBAAqBhH,GAAU2K,QAAS,GACxExE,GAAaS,mBAAmB,oBAAqBzG,GAAUmL,SAAU,GACzEnF,GAAaS,mBAAmB,oBAAqBzG,GAAUmJ,OAAQ,IAExE5H,QAAS,CACR,CACCl6C,GAAI,mBACJ52B,KAAM,gBACN+3E,cAAe,CACdC,GAAoBC,eAErBC,WAAY,CACXG,GAAuBa,SAAS7J,GAAiBkJ,QAAS,IAE3D5pC,QAAS,CACR6pC,GAAcC,OAAO,CACpBH,QAAQ,EACR3G,MAAOpC,GAAUmJ,OACjBnH,MAAOnC,GAAU2K,QACjBnB,WAAY,EACZC,IAAK,CACJL,GAAcM,mBACdN,GAAcY,WAAW9J,GAAWoN,MAAO,QAK/C,CACC9lD,GAAI,mBACJ52B,KAAM,iBACN+3E,cAAe,GACfG,WAAY,CACXG,GAAuBa,SAAS7J,GAAiBkJ,QAASrtB,OAAOoV,YAElE3xB,QAAS,CACR6pC,GAAcC,OAAO,CACpBH,QAAQ,EACR3G,MAAOpC,GAAUmL,SACjBnJ,MAAOnC,GAAU2K,QACjBnB,WAAY,EACZC,IAAK,CACJL,GAAcY,WAAW9J,GAAWoN,MAAO,QAK/C,CACC9lD,GAAI,mBACJ52B,KAAM,oBACN+3E,cAAe,GACfG,WAAY,CACXG,GAAuB4B,MAAM5K,GAAiB6N,OAAQhyB,OAAOoV,UAAW,IAEzE3xB,QAAS,CACR6pC,GAAcmC,aAAaxI,GAAe4B,gCAAgC3E,GAAU2K,QAAS,EAAGzK,GAAW0K,QAG7G,CACCpjD,GAAI,mBACJ52B,KAAM,qBACN+3E,cAAe,GACfG,WAAY,CACXG,GAAuB3wE,QAExBinC,QAAS,CACR6pC,GAAc8E,WAAW,GACzB9E,GAAcwD,WAAW,MAI5B,EApwDW6e,GAswDLiB,MAAQ,iBAAkB,CAChCllE,GAAI,aACJ52B,KAAM,QACNyhE,OAAQjB,EAASC,SAAS7pC,GAC1Bre,YAAa,qCACbshE,iBAAkB,CACjBtE,GAAaa,mBAAmB,gBAAiBhH,GAAU2K,QAAS,GACpExE,GAAaS,mBAAmB,gBAAiBzG,GAAUmL,SAAU,IAEtEtkB,SAAU,CACTmf,GAAaa,mBAAmB,kBAAmBhH,GAAU2K,QAAS,GACtExE,GAAaS,mBAAmB,kBAAmBzG,GAAUmL,SAAU,GACvEnF,GAAaC,yBAAyB,kBAAmBlG,GAAW2X,QAAS,GAC7E1R,GAAaG,0BAA0B,kBAAmBpG,GAAW2X,QAAS,IAE/EnW,QAAS,CACR,CACCl6C,GAAI,iBACJ52B,KAAM,kBACN+3E,cAAe,GACfG,WAAY,CACXG,GAAuB4B,MAAM5K,GAAiBkJ,QAAS,EAAG,IAE3D5pC,QAAS,CACR6pC,GAAcuF,kBAGhB,CACCnnD,GAAI,iBACJ52B,KAAM,mBACN+3E,cAAe,GACfG,WAAY,CACXG,GAAuBa,SAAS7J,GAAiBoL,WAAYvvB,OAAOoV,YAErE3xB,QAAS,CACR6pC,GAAcC,OAAO,CACpBH,QAAQ,EACR3G,MAAOpC,GAAUmL,SACjBnJ,MAAOnC,GAAU2K,QACjBnB,WAAY,EACZC,IAAK,CACJL,GAAciF,YAKlB,CACC7mD,GAAI,iBACJ52B,KAAM,kBACN+3E,cAAe,GACfG,WAAY,CACXG,GAAuB4B,MAAM5K,GAAiBoL,WAAYvvB,OAAOoV,UAAW,IAE7E3xB,QAAS,CACR6pC,GAAcC,OAAO,CACpBH,QAAQ,EACR3G,MAAOpC,GAAUmL,SACjBnJ,MAAOnC,GAAU2K,QACjBnB,WAAY,EACZC,IAAK,CACJL,GAAcY,WAAW9J,GAAW2X,QAAS,QAKjD,CACCrwD,GAAI,iBACJ52B,KAAM,aACN+3E,cAAe,GACfG,WAAY,CACXG,GAAuB4B,MAAM5K,GAAiBkJ,QAAS,EAAG,IAE3D5pC,QAAS,CACR6pC,GAAcC,OAAO,CACpBH,QAAQ,EACR3G,MAAOpC,GAAUmL,SACjBnJ,MAAOnC,GAAU2K,QACjBnB,WAAY,EACZC,IAAK,CACJL,GAAcmC,aAAaxI,GAAesB,6BAA6BrE,GAAU2K,QAAS,EAAGzK,GAAW0K,WAK5G,CACCpjD,GAAI,iBACJ52B,KAAM,iBACN+3E,cAAe,GACfG,WAAY,CACXG,GAAuB4B,MAAM5K,GAAiBkJ,QAAS,EAAG,IAE3D5pC,QAAS,CACR6pC,GAAcC,OAAO,CACpBH,QAAQ,EACR3G,MAAOpC,GAAUmL,SACjBnJ,MAAOnC,GAAU2K,QACjBnB,WAAY,EACZC,IAAK,CACJL,GAAcY,WAAW9J,GAAW2X,QAAS,QAKjD,CACCrwD,GAAI,iBACJ52B,KAAM,iBACN+3E,cAAe,CACdC,GAAoBsD,SAErBpD,WAAY,CACXG,GAAuB3wE,QAExBinC,QAAS,CACR6pC,GAAcwD,WAAW,MAI5B,EA33DW6e,GA63DLkB,OAAS,iBAAkB,CACjCnlE,GAAI,cACJ52B,KAAM,SACNyhE,OAAQ,GACRlpD,YAAa,gDACbshE,iBAAkB,CACjBtE,GAAaa,mBAAmB,iBAAkBhH,GAAU0K,UAAW,GACvEvE,GAAaS,mBAAmB,iBAAkBzG,GAAUiX,WAAY,GACxEjR,GAAaS,mBAAmB,iBAAkBzG,GAAUmJ,OAAQ,GACpEnD,GAAaO,yBAAyB,iBAAkB5G,GAAoByX,eAC5EpR,GAAaO,yBAAyB,iBAAkB5G,GAAoB2X,aAE7EzwB,SAAU,CACTmf,GAAaa,mBAAmB,mBAAoBhH,GAAU0K,UAAW,GACzEvE,GAAaS,mBAAmB,mBAAoBzG,GAAUiX,WAAY,GAC1EjR,GAAaS,mBAAmB,mBAAoBzG,GAAUmJ,OAAQ,IAEvE5H,QAAS,CACR,CACCl6C,GAAI,kBACJ52B,KAAM,UACN+3E,cAAe,CACdC,GAAoBe,gBAErBb,WAAY,CACXG,GAAuB3wE,QAExBinC,QAAS,CACR6pC,GAAcmC,aAAaxI,GAAeW,0BAA0B1D,GAAU2K,QAAS,EAAGxK,GAAUmJ,WAGtG,CACC9hD,GAAI,kBACJ52B,KAAM,YACN+3E,cAAe,CACdC,GAAoBe,gBAErBb,WAAY,CACXC,GAAuBa,SACvBX,GAAuBC,OAAOjJ,GAAiBkJ,QAAS,EAAG,IAE5D5pC,QAAS,CACR6pC,GAAcC,OAAO,CACpBH,QAAQ,EACR3G,MAAOpC,GAAUmJ,OACjBnH,MAAOnC,GAAUuJ,MACjBC,WAAY,EACZC,IAAK,CACJL,GAAcM,wBAKlB,CACCliD,GAAI,kBACJ52B,KAAM,eACN+3E,cAAe,CACdC,GAAoBe,gBAErBb,WAAY,CACXC,GAAuBa,SACvBX,GAAuBC,OAAOjJ,GAAiBkJ,QAAS,EAAG,IAE5D5pC,QAAS,CACR6pC,GAAcC,OAAO,CACpBH,QAAQ,EACR3G,MAAOpC,GAAUmJ,OACjBnH,MAAOnC,GAAUuJ,MACjBC,WAAY,EACZC,IAAK,CACJL,GAAcM,mBACdN,GAAcmC,aAAaxI,GAAeS,4BAA4BxD,GAAU0K,UAAW,EAAG1K,GAAUuJ,aAK5G,CACC/hD,GAAI,kBACJ52B,KAAM,UACN+3E,cAAe,CACdC,GAAoBe,gBAErBb,WAAY,CACXC,GAAuBa,SACvB0b,GAAuBpc,SACvBD,GAAuB4B,MAAM5K,GAAiBkJ,QAASrtB,OAAOoV,UAAW,IAE1E3xB,QAAS,CACR6pC,GAAcC,OAAO,CACpBH,QAAQ,EACR3G,MAAOpC,GAAUmJ,OACjBnH,MAAOnC,GAAUuJ,MACjBC,YAAa,EACbC,IAAK,CACJL,GAAcM,wBAKlB,CACCliD,GAAI,kBACJ52B,KAAM,aACN+3E,cAAe,CACdC,GAAoBe,gBAErBb,WAAY,CACXC,GAAuBa,SACvBX,GAAuBC,OAAOjJ,GAAiBkJ,QAAS,EAAG,IAE5D5pC,QAAS,CACR6pC,GAAcC,OAAO,CACpBH,QAAQ,EACR3G,MAAOpC,GAAUmJ,OACjBnH,MAAOnC,GAAUuJ,MACjBC,YAAa,EACbC,IAAK,CACJL,GAAcM,kBAAkB,MAGlCN,GAAcgC,sBAGhB,CACC5jD,GAAI,kBACJ52B,KAAM,cACN+3E,cAAe,CACdC,GAAoBe,gBAErBb,WAAY,CACXC,GAAuBa,SACvBX,GAAuBC,OAAOjJ,GAAiBkJ,QAAS,EAAG,IAE5D5pC,QAAS,CACR6pC,GAAcC,OAAO,CACpBH,QAAQ,EACR3G,MAAOpC,GAAUmJ,OACjBnH,MAAOnC,GAAUuJ,MACjBC,YAAa,EACbC,IAAK,CACJL,GAAcM,iBAAiB,SAMpC,EA9gEW+hB,GAghELmB,OAAS,iBAAkB,CACjCplE,GAAI,cACJ52B,KAAM,SACNyhE,OAAQ,GACRlpD,YAAa,oEACbshE,iBAAkB,CACjBtE,GAAaa,mBAAmB,iBAAkBhH,GAAUuJ,MAAO,GACnEpD,GAAaS,mBAAmB,iBAAkBzG,GAAU4J,MAAO,IAEpE/iB,SAAU,CACTmf,GAAaa,mBAAmB,mBAAoBhH,GAAUuJ,MAAO,GACrEpD,GAAaS,mBAAmB,mBAAoBzG,GAAU4J,MAAO,GACrE5D,GAAaE,iCAAiC,mBAAoBzG,GAAmBmM,OAAQ,IAE9FrK,QAAS,CACR,CACCl6C,GAAI,kBACJ52B,KAAM,eACN+3E,cAAe,GACfG,WAAY,CACXG,GAAuB4B,MAAM5K,GAAiBoL,WAAYvvB,OAAOoV,UAAW,IAE7E3xB,QAAS,CACR6pC,GAAcC,OAAO,CACpBH,QAAQ,EACR3G,MAAOpC,GAAU4J,MACjB5H,MAAOnC,GAAU0K,UACjBlB,WAAY,EACZC,IAAK,CACJL,GAAcY,WAAW9J,GAAW+J,OAAQ,GAC5Cb,GAAc2B,cAAcX,GAAaY,KAAM,GAC/C5B,GAAc0B,iBAKlB,CACCtjD,GAAI,kBACJ52B,KAAM,wBACN+3E,cAAe,GACfG,WAAY,CACXG,GAAuBa,SAAS7J,GAAiBkJ,QAAS,IAE3D5pC,QAAS,CACR6pC,GAAcC,OAAO,CACpBH,QAAQ,EACR3G,MAAOpC,GAAU4J,MACjB5H,MAAOnC,GAAUuJ,MACjBC,WAAY,EACZC,IAAK,CACJL,GAAcY,WAAW9J,GAAWmN,KAAM,QAK9C,CACC7lD,GAAI,kBACJ52B,KAAM,eACN+3E,cAAe,GACfG,WAAY,CACXG,GAAuB4B,MAAM5K,GAAiBkJ,QAASrtB,OAAOoV,UAAW,IAE1E3xB,QAAS,CACR6pC,GAAcC,OAAO,CACpBH,QAAQ,EACR3G,MAAOpC,GAAU4J,MACjB5H,MAAOnC,GAAU0K,UACjBlB,WAAY,EACZC,IAAK,CACJL,GAAcY,WAAW9J,GAAW+J,OAAQ,GAC5Cb,GAAc2B,cAAcX,GAAa6d,KAAM,QAKnD,CACCzgE,GAAI,kBACJ52B,KAAM,kBACN+3E,cAAe,GACfG,WAAY,CACXG,GAAuB3wE,QAExBinC,QAAS,CACR6pC,GAAciD,gBAGhB,CACC7kD,GAAI,kBACJ52B,KAAM,YACN+3E,cAAe,CACdC,GAAoBxF,UAAUpD,GAAUoI,MAEzCU,WAAY,CACXG,GAAuB3wE,QAExBinC,QAAS,CACR6pC,GAAc0c,gBAAgB9lB,GAAUoI,OAG1C,CACC5gD,GAAI,kBACJ52B,KAAM,YACN+3E,cAAe,GACfG,WAAY,CACXG,GAAuBa,SAAS7J,GAAiBkJ,QAAS,IAE3D5pC,QAAS,CACR6pC,GAAcC,OAAO,CACpBH,QAAQ,EACR3G,MAAOpC,GAAU4J,MACjB5H,MAAOnC,GAAUuJ,MACjBC,WAAY,EACZC,IAAK,CACJL,GAAcY,WAAW9J,GAAW+J,OAAQ,SAMjD,EAvoEWwhB,GAyoELoB,SAAW,iBAAkB,CACnCrlE,GAAI,gBACJ52B,KAAM,WACNyhE,OAAQjB,EAASG,WAAW/pC,GAC5Bre,YAAa,2DACbshE,iBAAkB,CACjBtE,GAAaa,mBAAmB,mBAAoBhH,GAAU2K,QAAS,GACvExE,GAAaS,mBAAmB,mBAAoBzG,GAAUsV,aAAc,GAC5EtP,GAAaO,yBAAyB,mBAAoB5G,GAAoByV,aAE/EvuB,SAAU,CACTmf,GAAaa,mBAAmB,qBAAsBhH,GAAU2K,QAAS,GACzExE,GAAaS,mBAAmB,qBAAsBzG,GAAUsV,aAAc,GAC9EtP,GAAaE,iCAAiC,qBAAsBzG,GAAmBmM,OAAQ,GAC/F5F,GAAaK,kCAAkC,qBAAsB5G,GAAmBmM,OAAQ,GAChG5F,GAAamB,wBAAwB,qBAAsBlH,GAAciD,WAAYnD,GAAWmN,KAAM,GACtGlH,GAAamB,wBAAwB,qBAAsBlH,GAAciD,WAAYnD,GAAW6M,KAAM,GACtG5G,GAAamB,wBAAwB,qBAAsBlH,GAAciD,WAAYnD,GAAW+M,YAAa,IAE9GvL,QAAS,CACR,CACCl6C,GAAI,oBACJ52B,KAAM,eACN+3E,cAAe,CACdC,GAAoBwc,aAErBtc,WAAY,CACXwc,GAAuBC,SAAS,IAChCtc,GAAuB4B,MAAM5K,GAAiBoL,WAAYvvB,OAAOoV,UAAW,IAE7E3xB,QAAS,CACR6pC,GAAcC,OAAO,CACpBH,QAAQ,EACR3G,MAAOpC,GAAUsV,aACjBtT,MAAOnC,GAAUuJ,MACjBC,WAAY,EACZC,IAAK,CACJL,GAAcY,WAAW9J,GAAW+M,YAAa,GACjD7D,GAAciF,YAKlB,CACC7mD,GAAI,oBACJ52B,KAAM,UACN+3E,cAAe,CACdC,GAAoBwc,aAErBtc,WAAY,CACXwc,GAAuBC,SAAS,IAChCtc,GAAuB4B,MAAM5K,GAAiBoL,WAAYvvB,OAAOoV,UAAW,IAE7E3xB,QAAS,CACR6pC,GAAcC,OAAO,CACpBH,QAAQ,EACR3G,MAAOpC,GAAUsV,aACjBtT,MAAOnC,GAAUuJ,MACjBC,WAAY,EACZC,IAAK,CACJL,GAAcY,WAAW9J,GAAWmN,KAAM,GAC1CjE,GAAcmC,aAAaxI,GAAeI,0BAA0BnD,GAAU0K,UAAW,EAAGxK,GAAWmN,YAK3G,CACC7lD,GAAI,oBACJ52B,KAAM,YACN+3E,cAAe,CACdC,GAAoBwc,aAErBtc,WAAY,CACXwc,GAAuBC,SAAS,IAChCtc,GAAuB4B,MAAM5K,GAAiBoL,WAAYvvB,OAAOoV,UAAW,IAE7E3xB,QAAS,CACR6pC,GAAcC,OAAO,CACpBH,QAAQ,EACR3G,MAAOpC,GAAUsV,aACjBtT,MAAOnC,GAAU0K,UACjBlB,WAAY,EACZC,IAAK,CACJL,GAAcY,WAAW9J,GAAW6M,KAAM,GAC1C3D,GAAcmC,aAAaxI,GAAeS,4BAA4BxD,GAAU0K,UAAW,EAAG1K,GAAUuJ,cAM7G,EAnuEWkiB,GAquELqB,QAAU,iBAAkB,CAClCtlE,GAAI,eACJ52B,KAAM,UACNyhE,OAAQjB,EAASC,SAAS7pC,GAC1Bre,YAAa,6DACbshE,iBAAkB,CACjBtE,GAAaa,mBAAmB,kBAAmBhH,GAAU2K,QAAS,GACtExE,GAAaS,mBAAmB,kBAAmBzG,GAAUmJ,OAAQ,GACrEnD,GAAaO,yBAAyB,kBAAmB5G,GAAoBuX,iBAC7ElR,GAAaO,yBAAyB,kBAAmB5G,GAAoB2X,aAE9EzwB,SAAU,CACTmf,GAAaa,mBAAmB,oBAAqBhH,GAAU2K,QAAS,GACxExE,GAAaS,mBAAmB,oBAAqBzG,GAAUmJ,OAAQ,GACvEnD,GAAaE,iCAAiC,oBAAqBzG,GAAmBmM,OAAQ,GAC9F5F,GAAaE,iCAAiC,oBAAqBzG,GAAmBkM,SAAU,IAEjGpK,QAAS,CACR,CACCl6C,GAAI,mBACJ52B,KAAM,gBACN+3E,cAAe,CACdC,GAAoBC,eAErBC,WAAY,CACXC,GAAuBC,QACvBC,GAAuBC,OAAOjJ,GAAiBkJ,QAAS,EAAG,IAE5D5pC,QAAS,CACR6pC,GAAcC,OAAO,CACpBH,QAAQ,EACR3G,MAAOpC,GAAUmJ,OACjBnH,MAAOnC,GAAUuJ,MACjBC,WAAY,EACZC,IAAK,CACJL,GAAcM,mBACdN,GAAcY,WAAW9J,GAAWmN,KAAM,GAC1CjE,GAAcmC,aAAaxI,GAAeI,0BAA0BnD,GAAU0K,UAAW,EAAGxK,GAAWmN,YAK3G,CACC7lD,GAAI,mBACJ52B,KAAM,cACN+3E,cAAe,CACdC,GAAoBC,eAErBC,WAAY,CACXC,GAAuBC,QACvBC,GAAuBC,OAAOjJ,GAAiBkJ,QAAS,EAAG,IAE5D5pC,QAAS,CACR6pC,GAAcC,OAAO,CACpBH,QAAQ,EACR3G,MAAOpC,GAAUmJ,OACjBnH,MAAOnC,GAAUuJ,MACjBC,WAAY,EACZC,IAAK,CACJL,GAAcM,mBACdN,GAAcY,WAAW9J,GAAW6M,KAAM,GAC1C3D,GAAcmC,aAAaxI,GAAeS,4BAA4BxD,GAAU0K,UAAW,EAAG1K,GAAUuJ,aAK5G,CACC/hD,GAAI,mBACJ52B,KAAM,iBACN+3E,cAAe,CACdC,GAAoBC,eAErBC,WAAY,CACXC,GAAuBC,QACvBC,GAAuBC,OAAOjJ,GAAiBkJ,QAAS,EAAG,IAE5D5pC,QAAS,CACR6pC,GAAcC,OAAO,CACpBH,QAAQ,EACR3G,MAAOpC,GAAUmJ,OACjBnH,MAAOnC,GAAUuJ,MACjBC,WAAY,EACZC,IAAK,CACJL,GAAcM,mBACdN,GAAcY,WAAW9J,GAAW+M,YAAa,GACjD7D,GAAciF,YAKlB,CACC7mD,GAAI,mBACJ52B,KAAM,oBACN+3E,cAAe,CACdC,GAAoB8L,SAErB5L,WAAY,CACXG,GAAuB3wE,QAExBinC,QAAS,CACR6pC,GAAcmC,aAAaxI,GAAegC,wCAAwC/E,GAAU2K,QAAS,EAAG/K,GAAmBkM,WAC3H1C,GAAcmC,aAAaxI,GAAegC,wCAAwC/E,GAAU2K,QAAS,EAAG/K,GAAmBmM,WAG7H,CACCvkD,GAAI,mBACJ52B,KAAM,cACN+3E,cAAe,CACdC,GAAoBC,eAErBC,WAAY,CACXC,GAAuBC,QACvBC,GAAuBC,OAAOjJ,GAAiBkJ,QAAS,EAAG,IAE5D5pC,QAAS,CACR6pC,GAAcC,OAAO,CACpBH,QAAQ,EACR3G,MAAOpC,GAAUmJ,OACjBnH,MAAOnC,GAAUuJ,MACjBC,WAAY,EACZC,IAAK,CACJL,GAAcM,mBACdN,GAAc2B,cAAcX,GAAayd,KAAM,SAMpD,EAr2EW4D,GAu2ELsB,SAAW,iBAAkB,CACnCvlE,GAAI,gBACJ52B,KAAM,WACNyhE,OAAQ,GACRlpD,YAAa,wEACbshE,iBAAkB,CACjBtE,GAAaa,mBAAmB,mBAAoBhH,GAAU0K,UAAW,GACzEvE,GAAaa,mBAAmB,mBAAoBhH,GAAU2K,QAAS,GACvExE,GAAaS,mBAAmB,mBAAoBzG,GAAUmJ,OAAQ,GACtEnD,GAAaO,yBAAyB,mBAAoB5G,GAAoB6M,cAC9ExG,GAAaO,yBAAyB,mBAAoB5G,GAAoB4X,aAE/E1wB,SAAU,CACTmf,GAAaa,mBAAmB,qBAAsBhH,GAAU0K,UAAW,GAC3EvE,GAAaa,mBAAmB,qBAAsBhH,GAAU2K,QAAS,GACzExE,GAAaS,mBAAmB,qBAAsBzG,GAAUmJ,OAAQ,IAEzE5H,QAAS,CACR,CACCl6C,GAAI,oBACJ52B,KAAM,kBACN+3E,cAAe,CACdC,GAAoBC,eAErBC,WAAY,CACXC,GAAuBC,QACvBC,GAAuB4B,MAAM5K,GAAiBkJ,QAAS,EAAG,IAE3D5pC,QAAS,CACR6pC,GAAc6c,qBACd7c,GAAcC,OAAO,CACpBH,QAAQ,EACR3G,MAAOpC,GAAUmJ,OACjBnH,MAAOnC,GAAU0K,UACjBlB,WAAY,EACZC,IAAK,CACJL,GAAcM,iBAAiB,QAKnC,CACCliD,GAAI,oBACJ52B,KAAM,YACN+3E,cAAe,CACdC,GAAoBC,eAErBC,WAAY,CACXC,GAAuBC,QACvBC,GAAuBC,OAAOjJ,GAAiBkJ,QAAS,EAAG,IAE5D5pC,QAAS,CACR6pC,GAAcC,OAAO,CACpBH,QAAQ,EACR3G,MAAOpC,GAAUmJ,OACjBnH,MAAOnC,GAAU0K,UACjBlB,WAAY,EACZC,IAAK,CACJL,GAAcM,mBACdN,GAAc0B,iBAKlB,CACCtjD,GAAI,oBACJ52B,KAAM,mBACN+3E,cAAe,CACdC,GAAoBC,eAErBC,WAAY,CACXC,GAAuBC,QACvBC,GAAuBC,OAAOjJ,GAAiBkJ,QAAS,EAAG,IAE5D5pC,QAAS,CACR6pC,GAAcC,OAAO,CACpBH,QAAQ,EACR3G,MAAOpC,GAAUmJ,OACjBnH,MAAOnC,GAAU0K,UACjBlB,WAAY,EACZC,IAAK,CACJL,GAAcM,kBAAkB,GAChCN,GAAcmC,aAAaxI,GAAe0B,qCAAqCzE,GAAU0K,UAAW,EAAG9K,GAAmBkM,WAC1H1C,GAAcmC,aAAaxI,GAAe0B,qCAAqCzE,GAAU0K,UAAW,EAAG9K,GAAmBmM,SAC1H3C,GAAcmC,aAAaxI,GAAe0B,qCAAqCzE,GAAU0K,UAAW,EAAG9K,GAAmBoM,kBAK9H,CACCxkD,GAAI,oBACJ52B,KAAM,iBACN+3E,cAAe,CACdC,GAAoBC,eAErBC,WAAY,CACXC,GAAuBC,QACvBC,GAAuBC,OAAOjJ,GAAiBkJ,QAASrtB,OAAOoV,UAAW,IAE3E3xB,QAAS,CACR6pC,GAAcC,OAAO,CACpBH,QAAQ,EACR3G,MAAOpC,GAAUmJ,OACjBnH,MAAOnC,GAAU0K,UACjBlB,WAAY,EACZC,IAAK,CACJL,GAAcM,mBACdN,GAAcY,WAAW9J,GAAW+M,YAAa,SAMtD,EAx9EWwe,GA09EL15B,QAAU,WAChB,IAAMC,EAAO,CACZy5B,GAASC,WACTD,GAASE,YACTF,GAASG,WACTH,GAASI,YACTJ,GAASK,YACTL,GAASM,SACTN,GAASO,UACTP,GAASQ,QACTR,GAASS,eACTT,GAASU,YACTV,GAASW,YACTX,GAASY,aACTZ,GAASa,aACTb,GAASc,cACTd,GAASe,QACTf,GAASgB,UACThB,GAASiB,QACTjB,GAASkB,SACTlB,GAASmB,SACTnB,GAASoB,WACTpB,GAASqB,UACTrB,GAASsB,YAQV,OALA/6B,EAAK59C,SAAQ,SAAA1e,GACZA,EAAE+0E,iBAAmBza,EAAYC,KAAKv6D,EAAE+0E,kBAAkB,SAAA10E,GAAC,OAAIowE,GAAa2B,gBAAgB/xE,EAAE,IAC9FL,EAAEsxD,SAAWgJ,EAAYC,KAAKv6D,EAAEsxD,UAAU,SAAAjxD,GAAC,OAAIowE,GAAa2B,gBAAgB/xE,EAAE,IAC9EL,EAAEgsE,QAAU1R,EAAYC,KAAKv6D,EAAEgsE,SAAS,SAAAhvD,GAAC,OAAIA,EAAE9hB,IAAI,GACpD,IACOo/D,EAAYC,KAAK+B,GAAM,SAAAt8D,GAAC,OAAIA,EAAE9E,IAAI,GAC1C,EC7+EM,OAAMk1E,GAASvX,GAAA,SAAAuX,IAAAxqE,EAAA,KAAAwqE,EAAA,IAgcrBnX,GAhcYmX,GAAAA,GACLknB,mBAAqB,SAACj2B,GAC5B,OAAO4zB,GAAgB54B,UAAUhB,QAAO,SAAAn7D,GAAC,MAAkB,KAAbA,EAAEy8D,QAAkB0E,EAAQrqD,SAAS9W,EAAEy8D,OAAO,GAC7F,EAHYyT,GAKLmnB,sBAAwB,SAACl2B,GAC/B,OAAOuT,GAAmBvY,UAAUhB,QAAO,SAAAn7D,GAAC,MAAkB,KAAbA,EAAEy8D,QAAkB0E,EAAQrqD,SAAS9W,EAAEy8D,OAAO,GAChG,EAPYyT,GASL+b,YAAc,SAAC9qB,GACrB,OAAO00B,GAAS15B,UAAUhB,QAAO,SAAAp7D,GAAC,MAAkB,KAAbA,EAAE08D,QAAkB0E,EAAQrqD,SAAS/W,EAAE08D,OAAO,GACtF,EAXYyT,GAaLgc,kBAAoB,SAAC/qB,GAC3B,OAAO+yB,GAAe/3B,UAAUhB,QAAO,SAAAp+C,GAAC,MAAkB,KAAbA,EAAE0/C,QAAkB0E,EAAQrqD,SAASiG,EAAE0/C,OAAO,GAC5F,EAfYyT,GAiBLkO,YAAc,SAACjd,GACrB,OAAOw0B,GAASx5B,UAAUhB,QAAO,SAAAp/D,GAAC,MAAkB,KAAbA,EAAE0gE,QAAkB0E,EAAQrqD,SAAS/a,EAAE0gE,OAAO,GACtF,EAnBYyT,GAqBLqc,cAAgB,SAACprB,GACvB,OAAOsyB,GAAWt3B,UAAUhB,QAAO,SAAAp/D,GAAC,MAAkB,KAAbA,EAAE0gE,QAAkB0E,EAAQrqD,SAAS/a,EAAE0gE,OAAO,GACxF,EAvBYyT,GAyBLonB,iBAAmB,SAACn2B,GAC1B,OAAO7E,EAAcH,UAAUhB,QAAO,SAAAn7D,GAAC,MAAkB,KAAbA,EAAEy8D,QAAkB0E,EAAQrqD,SAAS9W,EAAEy8D,OAAO,GAC3F,EA3BYyT,GA+BLgR,WAAa,SAACtvD,GAKpB,MAJoB,GAClBja,OAAOo9E,GAAgB54B,WACvBxkD,OAAO+8D,GAAmBvY,WAEV2D,MAAK,SAAA9/D,GAAC,OAAIA,EAAE4xB,KAAOA,CAAE,KAAK,IAC7C,EArCYs+C,GAuCLiR,QAAU,SAACvvD,GACjB,OAAOikE,GAAS15B,UAAU2D,MAAK,SAAA//D,GAAC,OAAIA,EAAE6xB,KAAOA,CAAE,KAAK,IACrD,EAzCYs+C,GA2CLmR,cAAgB,SAACzvD,GACvB,OAAOsiE,GAAe/3B,UAAU2D,MAAK,SAAA/iD,GAAC,OAAIA,EAAE6U,KAAOA,CAAE,KAAK,IAC3D,EA7CYs+C,GA+CLliE,QAAU,SAAC4jB,GACjB,OAAO+jE,GAASx5B,UAAU2D,MAAK,SAAA/jE,GAAC,OAAIA,EAAE61B,KAAOA,CAAE,KAAK,IACrD,EAjDYs+C,GAmDL+gB,UAAY,SAACr/D,GACnB,OAAO6hE,GAAWt3B,UAAU2D,MAAK,SAAA/jE,GAAC,OAAIA,EAAE61B,KAAOA,CAAE,KAAK,IACvD,EArDYs+C,GAuDLqnB,aAAe,SAAC3lE,GACtB,OAAO0qC,EAAcH,UAAU2D,MAAK,SAAA9/D,GAAC,OAAIA,EAAE4xB,KAAOA,CAAE,KAAK,IAC1D,EAzDYs+C,GA2DLsnB,QAAU,SAAC5lE,GACjB,OAAO4pC,EAASW,UAAU2D,MAAK,SAAAtuD,GAAC,OAAIA,EAAEogB,KAAOA,CAAE,KAAK,IACrD,EA7DYs+C,GAiELunB,cAAgB,SAACt2B,GACvB,IAAM2K,EAAyB,GAO/B,OALAoE,GAAUknB,mBAAmBj2B,GAAS3iD,SAAQ,SAAAxe,GAAC,OAAI8rE,EAAQttE,KAAI6F,MAAZynE,EAAOnJ,EAAS3iE,EAAE8rE,SAAQ,IAC7EoE,GAAUmnB,sBAAsBl2B,GAAS3iD,SAAQ,SAAAxe,GAAC,OAAI8rE,EAAQttE,KAAI6F,MAAZynE,EAAOnJ,EAAS3iE,EAAE8rE,SAAQ,IAChFoE,GAAU+b,YAAY9qB,GAAS3iD,SAAQ,SAAAze,GAAC,OAAI+rE,EAAQttE,KAAI6F,MAAZynE,EAAOnJ,EAAS5iE,EAAE+rE,SAAQ,IACtEoE,GAAUgc,kBAAkB/qB,GAAS3iD,SAAQ,SAAAzB,GAAC,OAAI+uD,EAAQttE,KAAI6F,MAAZynE,EAAOnJ,EAAS5lD,EAAE+uD,SAAQ,IAErEA,CACR,EA1EYoE,GA4ELyQ,gBAAkB,SAAC1sE,EAAiBktD,GAC1C,IAAM2K,EAAUoE,GAAUunB,cAAct2B,GAAShG,QAAO,SAAAr+C,GAEvD,IAAMgyE,EAAehyE,EAAEi2D,cAAcjT,MAAK,SAAAtuD,GAAC,MAAa,SAATA,EAAEogB,EAAa,IAC9D,GAAIk9D,IACWA,EAAaztF,KAChByV,SAAS7C,EAAK+4D,aACxB,OAAO,EAIT,OAAO,CACR,IAEMh9B,EAASoqB,EAAYY,KAAK8Q,GAC1BnwE,EAAOyW,KAAKG,MAAMH,KAAKC,UAAU29B,IAGvC,OAFAr0C,EAAKi2B,GAAKssC,EAAMC,OAETxiE,CACR,EA/FYu0E,GAiGLG,oBAAsB,WAA4D,IAClFt1E,EAAU,GAEhB,OAHyDe,UAAAE,OAAA,QAAAuR,IAAAzR,UAAA,GAAAA,UAAA,GAAGkuE,GAAmBwI,KAI9E,KAAKxI,GAAmBwI,IACvBz3E,EAAQyD,KAAK8rE,GAAWsM,MACxB77E,EAAQyD,KAAK8rE,GAAW6M,MACxBp8E,EAAQyD,KAAK8rE,GAAWkM,OACxBz7E,EAAQyD,KAAK8rE,GAAWiL,OACxBx6E,EAAQyD,KAAK8rE,GAAW+M,aACxBt8E,EAAQyD,KAAK8rE,GAAWmN,MACxB18E,EAAQyD,KAAK8rE,GAAW+J,QACxBt5E,EAAQyD,KAAK8rE,GAAWoN,OACxB38E,EAAQyD,KAAK8rE,GAAWgL,UACxBv6E,EAAQyD,KAAK8rE,GAAW2L,QACxBl7E,EAAQyD,KAAK8rE,GAAW2X,SACxBlnF,EAAQyD,KAAK8rE,GAAW8M,OACxB,MACD,KAAKpN,GAAmBkM,SACvBn7E,EAAQyD,KAAK8rE,GAAWiL,OACxBx6E,EAAQyD,KAAK8rE,GAAW+J,QACxBt5E,EAAQyD,KAAK8rE,GAAWgL,UACxB,MACD,KAAKtL,GAAmBmM,OACvBp7E,EAAQyD,KAAK8rE,GAAW6M,MACxBp8E,EAAQyD,KAAK8rE,GAAW+M,aACxBt8E,EAAQyD,KAAK8rE,GAAWmN,MACxB18E,EAAQyD,KAAK8rE,GAAWoN,OACxB38E,EAAQyD,KAAK8rE,GAAW8M,OACxB,MACD,KAAKpN,GAAmBoM,WACvBr7E,EAAQyD,KAAK8rE,GAAWsM,MACxB77E,EAAQyD,KAAK8rE,GAAWkM,OACxBz7E,EAAQyD,KAAK8rE,GAAW2L,QACxBl7E,EAAQyD,KAAK8rE,GAAW2X,SAI1B,OAAO7nB,EAAYY,KAAKjgE,EACzB,EAxIYm1E,GA0IL2B,4BAA8B,WACpC,IAAM92E,EAAU,CACfivE,GAAmBkM,SACnBlM,GAAmBmM,OACnBnM,GAAmBoM,YAGpB,OAAOhc,EAAYY,KAAKjgE,EACzB,EAlJYm1E,GAoJL4B,yBAA2B,WACjC,IAAM/2E,EAAU,CACfmvE,GAAoBuX,gBACpBvX,GAAoB6M,aACpB7M,GAAoBwX,cACpBxX,GAAoByX,cACpBzX,GAAoB0X,cACpB1X,GAAoByV,WACpBzV,GAAoB2X,WACpB3X,GAAoB4X,WACpB5X,GAAoB6X,SAGrB,OAAO3nB,EAAYY,KAAKjgE,EACzB,EAlKYm1E,GAoKLE,eAAiB,WAA0D,IAC3Er1E,EAAU,GAEhB,OAHmDe,UAAAE,OAAA,QAAAuR,IAAAzR,UAAA,GAAAA,UAAA,GAAGquE,GAAkBqI,KAIvE,KAAKrI,GAAkBqI,IACtBz3E,EAAQyD,KAAK+rE,GAAU4J,OACvBp5E,EAAQyD,KAAK+rE,GAAUiX,YACvBzmF,EAAQyD,KAAK+rE,GAAUmL,UACvB36E,EAAQyD,KAAK+rE,GAAUuL,WACvB/6E,EAAQyD,KAAK+rE,GAAUsV,cACvB9kF,EAAQyD,KAAK+rE,GAAUwL,SACvBh7E,EAAQyD,KAAK+rE,GAAUmJ,QACvB,MACD,KAAKvJ,GAAkB+L,SACtBn7E,EAAQyD,KAAK+rE,GAAU4J,OACvBp5E,EAAQyD,KAAK+rE,GAAUwL,SACvBh7E,EAAQyD,KAAK+rE,GAAUmJ,QACvB,MACD,KAAKvJ,GAAkByL,OACtB76E,EAAQyD,KAAK+rE,GAAUiX,YACvBzmF,EAAQyD,KAAK+rE,GAAUmL,UACvB36E,EAAQyD,KAAK+rE,GAAUuL,WACvB/6E,EAAQyD,KAAK+rE,GAAUsV,cAIzB,OAAOzlB,EAAYY,KAAKjgE,EACzB,EA/LYm1E,GAiML6B,uBAAyB,WAC/B,IAAMh3E,EAAU,CACfovE,GAAkB+L,SAClB/L,GAAkByL,QAGnB,OAAOxb,EAAYY,KAAKjgE,EACzB,EAxMYm1E,GA0MLC,eAAiB,WACvB,IAAMp1E,EAAU,CACfqvE,GAAU0K,UACV1K,GAAU2K,QACV3K,GAAUuJ,OAGX,OAAOvZ,EAAYY,KAAKjgE,EACzB,EAlNYm1E,GAsNLwnB,kBAAoB,SAACC,GAC3B,OAAQA,EAAKx4F,MACZ,KAAKyqE,GAASguB,UACd,KAAKhuB,GAASiuB,QACd,KAAKjuB,GAASkuB,QACb,OAAO,EAGT,OAAO,CACR,EA/NY5nB,GAiOL6nB,kBAAoB,SAACJ,GAC3B,OAAQA,EAAKx4F,MACZ,KAAKyqE,GAASouB,YACd,KAAKpuB,GAASquB,UACd,KAAKruB,GAASsuB,MACb,OAAO,EAGT,OAAO,CACR,EA1OYhoB,GA4OLioB,wBAA0B,SAACR,GACjC,OAAQA,EAAKx4F,OACPyqE,GAASwuB,SAKhB,EAnPYloB,GAqPLgU,kBAAoB,SAAC/kF,GAC3B,OAAQA,GACP,KAAKmrE,GAAW0K,IACf,OAAOhL,GAAmBgL,IAC3B,KAAK1K,GAAWiL,MAChB,KAAKjL,GAAW+J,OAChB,KAAK/J,GAAWgL,SACf,OAAOtL,GAAmBkM,SAC3B,KAAK5L,GAAW6M,KAChB,KAAK7M,GAAW+M,YAChB,KAAK/M,GAAWmN,KAChB,KAAKnN,GAAWoN,MAChB,KAAKpN,GAAW8M,MACf,OAAOpN,GAAmBmM,OAC3B,KAAK7L,GAAWsM,KAChB,KAAKtM,GAAWkM,MAChB,KAAKlM,GAAW2L,OAChB,KAAK3L,GAAW2X,QACf,OAAOjY,GAAmBoM,WAG5B,OAAOpM,GAAmB0C,IAC3B,EA3QYwD,GA6QL6T,iBAAmB,SAACpX,GAC1B,OAAQA,GACP,KAAKpC,GAAUyK,IACd,OAAO7K,GAAkB6K,IAC1B,KAAKzK,GAAU4J,MACf,KAAK5J,GAAUwL,QACf,KAAKxL,GAAUmJ,OACd,OAAOvJ,GAAkB+L,SAC1B,KAAK3L,GAAUiX,WACf,KAAKjX,GAAUmL,SACf,KAAKnL,GAAUuL,UACf,KAAKvL,GAAUsV,aACd,OAAO1V,GAAkByL,OAG3B,OAAOzL,GAAkBuC,IAC1B,EA7RYwD,GA+RLkS,uBAAyB,SAACpV,EAAkC7L,GAClE,OAAO+O,GAAUkO,YAAYjd,GAAShG,QAAO,SAAAp/D,GAAC,OAAIA,EAAEixE,cAAgBA,CAAW,GAChF,EAjSYkD,GAmSLmoB,cAAgB,SAACn4B,EAAiBo4B,GACxCp4B,EAAKgM,UAAY3+C,KAAK4rC,IAAI+G,EAAKgM,UAAY,EAAG,GAC9ChM,EAAKmB,OAAO7iE,KAAK85F,GACjBp4B,EAAKmB,OAASjH,EAAYC,KAAK6F,EAAKmB,QAAQ,SAAAvhE,GAAC,OAAIA,EAAE9E,IAAI,GACxD,EAvSYk1E,GA2SLqoB,mBAAqB,SAACtX,GAC5B,IAAI9lF,EAAQ,EAMZ,OAJAA,GAASi/D,EAAYgB,IAAI6lB,EAAQpM,kBAAkB,SAAA5vB,GAAO,OAAIirB,GAAUsoB,mBAAmBvzC,EAAQ,IAAIg8B,EAAQpM,iBAAiB74E,OAChIb,GAASi/D,EAAYiB,KAAK4lB,EAAQ7vB,UAAU,SAAAnM,GAAO,OAAIirB,GAAUsoB,mBAAmBvzC,EAAQ,IAAIg8B,EAAQ7vB,SAASp1D,OACjHb,GAASi/D,EAAYiB,KAAK4lB,EAAQnV,SAAS,SAAA97B,GAAM,OAAIkgC,GAAUuoB,kBAAkBzoD,EAAO,IAAIixC,EAAQnV,QAAQ9vE,OAErGuxB,KAAKg5D,MAAMprF,EAAQ,EAC3B,EAnTY+0E,GAqTLwoB,gBAAkB,SAACzyB,GACzB,IAAI9qE,EAAQ,EAMZ,OAJAA,GAASi/D,EAAYgB,IAAI6K,EAAK4O,kBAAkB,SAAA5vB,GAAO,OAAIirB,GAAUsoB,mBAAmBvzC,EAAQ,IAAIghB,EAAK4O,iBAAiB74E,OAC1Hb,GAASi/D,EAAYiB,KAAK4K,EAAK7U,UAAU,SAAAnM,GAAO,OAAIirB,GAAUsoB,mBAAmBvzC,EAAQ,IAAIghB,EAAK7U,SAASp1D,OAC3Gb,GAASi/D,EAAYiB,KAAK4K,EAAK6F,SAAS,SAAA97B,GAAM,OAAIkgC,GAAUuoB,kBAAkBzoD,EAAO,IAAIi2B,EAAK6F,QAAQ9vE,OAE/FuxB,KAAKg5D,MAAMprF,EAAQ,EAC3B,EA7TY+0E,GA+TLyoB,sBAAwB,SAACvX,GAC/B,IAAIjmF,EAAQ,EAMZ,OAJAA,GAASi/D,EAAYgB,IAAIgmB,EAAWvM,kBAAkB,SAAA5vB,GAAO,OAAIirB,GAAUsoB,mBAAmBvzC,EAAQ,IAAIm8B,EAAWvM,iBAAiB74E,OACtIb,GAASi/D,EAAYiB,KAAK+lB,EAAWhwB,UAAU,SAAAnM,GAAO,OAAIirB,GAAUsoB,mBAAmBvzC,EAAQ,IAAIm8B,EAAWhwB,SAASp1D,OACvHb,GAASi/D,EAAYiB,KAAK+lB,EAAWtV,SAAS,SAAA97B,GAAM,OAAIkgC,GAAUuoB,kBAAkBzoD,EAAO,IAAIoxC,EAAWtV,QAAQ9vE,OAE3GuxB,KAAKg5D,MAAMprF,EAAQ,EAC3B,EAvUY+0E,GAyULsoB,mBAAqB,SAACvzC,GAC5B,IAAI2zC,EAAS,EAEb,OAAQ3zC,EAAQ9lD,MACf,KAAKsrE,GAAY6G,KAChBsnB,EAAS,EACT,MACD,KAAKnuB,GAAY+D,YACjB,KAAK/D,GAAYkG,aAChBioB,EAAU3zC,EAAQsmB,SAAWjB,GAAWkI,IAAO,EAAI,EACnD,MACD,KAAK/H,GAAYmE,oBACjB,KAAKnE,GAAYoG,qBAChB+nB,EAAU3zC,EAAQ4nB,iBAAmB7C,GAAmBwI,IAAO,EAAI,EACnE,MACD,KAAK/H,GAAYwG,MAChB2nB,EAAU3zC,EAAQ0nB,QAAUpC,GAAUiI,IAAO,EAAI,EACjD,MACD,KAAK/H,GAAY0G,cAChBynB,EAAU3zC,EAAQ2nB,gBAAkBzC,GAAkBqI,IAAO,EAAI,EACjE,MACD,KAAK/H,GAAYsC,MAChB6rB,EAAU3zC,EAAQsnB,QAAUnC,GAAUoI,IAAO,EAAI,EACjD,MACD,KAAK/H,GAAYsG,YAChB6nB,EAAS,EAIX,OAAO3zC,EAAQunB,KAAOosB,CACvB,EAvWY1oB,GAyWLuoB,kBAAoB,SAACzoD,GAC3B,IAAMy9C,EAAcz9C,EAAOkjC,WAAWpT,MAAK,SAAAhjD,GAAC,MAAa,YAATA,EAAE8U,EAAgB,IAC5DinE,EAAiBpL,EAAcvd,GAAU4oB,wBAAwBrL,EAAaz9C,GAAU,EAExF+oD,EAAiB3+B,EAAYgB,IAAIprB,EAAOrG,SAAS,SAAA/pC,GAAC,OAAIswE,GAAU8oB,wBAAwBp5F,EAAE,IAE5Fm0F,EAAWxmE,KAAKg5D,MAAMsS,EAAiBE,GAK3C,MAJ2C,UAAvClR,GAAYiL,eAAe9iD,KAC9B+jD,GAAY,GAGNA,CACR,EArXY7jB,GAuXL4oB,wBAA0B,SAACrL,EAAyCz9C,GAE1E,GAAIy9C,EAAYC,QAAS,CACxB,IAGIuL,EAAiB,EACrB,OAHc1rE,KAAK4rC,IAAI0uB,GAAY0G,eAAev+C,EAD5B,CAAEi7B,MAAO,KAC2C,IAIzE,KAAK,EACL,KAAK,EACL,KAAK,EACJguB,EAAiB,EACjB,MACD,KAAK,EACL,KAAK,EACL,KAAK,EACJA,EAAiB,EACjB,MACD,QACCA,EAAiB,EAInB,IAAIvL,EAAUngE,KAAKiQ,IAAIiwD,EAAYC,QAAQ9+E,MAAOqqF,GAMlD,OAJIxL,EAAYC,QAAQvuF,OAASkrE,GAAiBoL,aACjDiY,EAAUngE,KAAK4rC,IAAIu0B,EAAU,EAAG,IAG1BA,CACR,CAGA,OAAO,CACR,EAzZYxd,GA2ZL8oB,wBAA0B,SAAC9Q,GACjC,OAAQA,EAAOt2D,IACd,IAAK,SACJ,OAAOwoC,EAAYgB,IAAI8sB,EAAOpkE,UAAU,SAAAlkB,GAAC,OAAIswE,GAAU8oB,wBAAwBp5F,EAAE,IAAI,EACtF,IAAK,SACJ,OAAOw6D,EAAYgB,IAAI8sB,EAAOpkE,UAAU,SAAAlkB,GAAC,OAAIswE,GAAU8oB,wBAAwBp5F,EAAE,IAClF,IAAK,SAML,IAAK,eACJ,OAAQsoF,EAAO7mF,KAAwBmrE,KALxC,IAAK,eACJ,OAAO,EAAK0b,EAAO7mF,KACpB,IAAK,QAiBL,IAAK,aACJ,OAAO,EAAK6mF,EAAO7mF,KAdpB,IAAK,OASL,IAAK,gBAML,IAAK,SACJ,OAAO,EAdR,IAAK,YASL,IAAK,aACJ,OAAO,EARR,IAAK,SACL,IAAK,QACJ,OAAO,GACR,IAAK,eACJ,OAAO,EASR,IAAK,oBACJ,OAAO,EAGT,OAAO,CACR,EC1dM,IAAM0qF,GAAgBpzB,GAAA,SAAAozB,IAAArmF,EAAA,KAAAqmF,EAAA,IAiH5BhzB,GAjHYgzB,GAAAA,GACLlS,mBAAqB,SAACj0B,EAAuBjvC,EAAWC,GAC9D,IAAM2oD,EAAgC,GAEhCz/D,EAAI8lD,EAAI+zB,QAAQ7Z,MAAK,SAAAD,GAAE,OAAKA,EAAGlpD,IAAMA,GAAOkpD,EAAGjpD,IAAMA,EAAI,CAAE,IAIjE,GAHI9W,GACHy/D,EAAI/gE,KAAKsB,GAEN6W,EAAI,IAAM,EAAG,CAChB,IAAMmkB,EAAK8qB,EAAI+zB,QAAQ7Z,MAAK,SAAAD,GAAE,OAAKA,EAAGlpD,IAAMA,EAAI,GAAOkpD,EAAGjpD,IAAMA,CAAE,IAC9DkkB,GACHykC,EAAI/gE,KAAKs8B,GAEV,IAAMM,EAAKwqB,EAAI+zB,QAAQ7Z,MAAK,SAAAD,GAAE,OAAKA,EAAGlpD,IAAMA,EAAI,GAAOkpD,EAAGjpD,IAAMA,EAAI,CAAE,IAClEwkB,GACHmkC,EAAI/gE,KAAK48B,EAEX,KAAO,CACN,IAAMN,EAAK8qB,EAAI+zB,QAAQ7Z,MAAK,SAAAD,GAAE,OAAKA,EAAGlpD,IAAMA,EAAI,GAAOkpD,EAAGjpD,IAAMA,EAAI,CAAE,IAClEkkB,GACHykC,EAAI/gE,KAAKs8B,GAEV,IAAMM,EAAKwqB,EAAI+zB,QAAQ7Z,MAAK,SAAAD,GAAE,OAAKA,EAAGlpD,IAAMA,EAAI,GAAOkpD,EAAGjpD,IAAMA,CAAE,IAC9DwkB,GACHmkC,EAAI/gE,KAAK48B,EAEX,CACA,IAAMp7B,EAAI4lD,EAAI+zB,QAAQ7Z,MAAK,SAAAD,GAAE,OAAKA,EAAGlpD,IAAMA,GAAOkpD,EAAGjpD,IAAMA,EAAI,CAAE,IAIjE,GAHI5W,GACHu/D,EAAI/gE,KAAKwB,GAEN2W,EAAI,IAAM,EAAG,CAChB,IAAMuiF,EAAKtzC,EAAI+zB,QAAQ7Z,MAAK,SAAAD,GAAE,OAAKA,EAAGlpD,IAAMA,EAAI,GAAOkpD,EAAGjpD,IAAMA,EAAI,CAAE,IAClEsiF,GACH35B,EAAI/gE,KAAK06F,GAEV,IAAMC,EAAKvzC,EAAI+zB,QAAQ7Z,MAAK,SAAAD,GAAE,OAAKA,EAAGlpD,IAAMA,EAAI,GAAOkpD,EAAGjpD,IAAMA,CAAE,IAC9DuiF,GACH55B,EAAI/gE,KAAK26F,EAEX,KAAO,CACN,IAAMD,EAAKtzC,EAAI+zB,QAAQ7Z,MAAK,SAAAD,GAAE,OAAKA,EAAGlpD,IAAMA,EAAI,GAAOkpD,EAAGjpD,IAAMA,CAAE,IAC9DsiF,GACH35B,EAAI/gE,KAAK06F,GAEV,IAAMC,EAAKvzC,EAAI+zB,QAAQ7Z,MAAK,SAAAD,GAAE,OAAKA,EAAGlpD,IAAMA,EAAI,GAAOkpD,EAAGjpD,IAAMA,EAAI,CAAE,IAClEuiF,GACH55B,EAAI/gE,KAAK26F,EAEX,CAEA,OAAO55B,CACR,EApDYwsB,GAsDLjtB,cAAgB,SAAC6a,GACvB,IAAM3a,EAAO,CACZ3gC,KAAM6nB,OAAOqV,UACbh9B,IAAK2nB,OAAOqV,UACZ0D,MAAO/Y,OAAOqV,UACd2D,OAAQhZ,OAAOqV,WAUhB,OAPAoe,EAAQn7D,SAAQ,SAAAqhD,GACfb,EAAK3gC,KAAO2gC,EAAK3gC,OAAS6nB,OAAOqV,UAAYsE,EAAGlpD,EAAI4W,KAAKiQ,IAAIwhC,EAAK3gC,KAAMwhC,EAAGlpD,GAC3EqoD,EAAKzgC,IAAMygC,EAAKzgC,MAAQ2nB,OAAOqV,UAAYsE,EAAGjpD,EAAI2W,KAAKiQ,IAAIwhC,EAAKzgC,IAAKshC,EAAGjpD,GACxEooD,EAAKC,MAAQD,EAAKC,QAAU/Y,OAAOqV,UAAYsE,EAAGlpD,EAAI4W,KAAK4rC,IAAI6F,EAAKC,MAAOY,EAAGlpD,GAC9EqoD,EAAKE,OAASF,EAAKE,SAAWhZ,OAAOqV,UAAYsE,EAAGjpD,EAAI2W,KAAK4rC,IAAI6F,EAAKE,OAAQW,EAAGjpD,EAClF,IAEOooD,CACR,EAtEY+sB,GAwELqN,WAAa,SAACxzC,EAAuB2lC,GAC3C,OAAO3lC,EAAI+zB,QAAQxe,QAAO,SAAA0E,GAAE,OAAIA,EAAG4rB,WAAaF,EAAO35D,EAAE,GAC1D,EA1EYm6D,GA4ELsN,iBAAmB,SAACzzC,EAAuB2lC,GACjD,IAAM5R,EAAUoS,GAAiBqN,WAAWxzC,EAAK2lC,GAC3C50E,EAAIyjD,EAAYiB,KAAKse,GAAS,SAAA35E,GAAC,OAAIA,EAAE2W,CAAC,IACtCC,EAAIwjD,EAAYiB,KAAKse,GAAS,SAAA35E,GAAC,OAAIA,EAAE4W,CAAC,IAC5C,OAAOwjD,EAAY58B,IAAIm8C,GAAS,SAAA35E,GAC/B,IAAMy6E,EAAKltD,KAAKmtD,IAAI16E,EAAE2W,EAAIA,EAAG,GACvBgkE,EAAKptD,KAAKmtD,IAAI16E,EAAE4W,EAAIA,EAAG,GAC7B,OAAO2W,KAAKstD,KAAKJ,EAAKE,EACvB,GACD,EArFYoR,GAuFLuN,gBAAkB,SAAC1zC,EAAuB2lC,GAEhD,OADgBQ,GAAiBqN,WAAWxzC,EAAK2lC,GAClC9mC,MAAK,SAAAob,GAAE,OAAIksB,GAAiBlS,mBAAmBj0B,EAAKia,EAAGlpD,EAAGkpD,EAAGjpD,GAAG6tC,MAAK,SAAA3nC,GAAC,MAAmB,KAAfA,EAAE2uE,QAAe,GAAC,GAC5G,EA1FYM,GA4FLwN,cAAgB,SAAC3zC,EAAuB2lC,GAC9C3lC,EAAI+zB,QAAQn7D,SAAQ,SAAAqhD,GACfA,EAAG4rB,WAAaF,EAAO35D,KAC1BiuC,EAAG4rB,SAAW,GAEhB,IAEA7lC,EAAIgc,QAAUhc,EAAIgc,QAAQzG,QAAO,SAAAp7D,GAAC,OAAI6lD,EAAI+zB,QAAQl1B,MAAK,SAAAob,GAAE,OAAIA,EAAG4rB,WAAa1rF,EAAE6xB,EAAE,GAAC,GACnF,EApGYm6D,GAsGLyN,YAAc,SAAC5zC,GACrB,OAAOA,EAAI+zB,QAAQ50B,OAAM,SAAA8a,GAAE,MAAoB,KAAhBA,EAAG4rB,QAAe,GAClD,EAxGYM,GA0GLC,YAAc,SAACT,EAAqBpqB,GAC1C,IAAMs4B,EAAavpB,GAAUmnB,sBAAsBl2B,GAE7ClI,EAAMH,EAAOY,aAAa6xB,EAAO35D,IACjChjB,EAAQkqD,EAAOO,aAAa,EAAGJ,GAAO,EAC5C,OAAOmB,EAAYQ,QAAQ6+B,EAAYxgC,GAAKr6D,MAAM,EAAGgQ,EACtD,EC5GM,IAAM8qF,GAAa/gC,GAAA,SAAA+gC,IAAAh0F,EAAA,KAAAg0F,EAAA,IAAbA,GACLC,aAAe,SAACx4B,GACtB,IAAIhiE,EAAOyqE,GAASguB,UACpB,OAAQ9+B,EAAOO,aAAa,IAC3B,KAAK,EACJl6D,EAAOyqE,GAASguB,UAChB,MACD,KAAK,EACJz4F,EAAOyqE,GAASiuB,QAChB,MACD,KAAK,EACJ14F,EAAOyqE,GAASkuB,QAChB,MACD,KAAK,EACJ34F,EAAOyqE,GAASquB,UAChB,MACD,KAAK,EACJ94F,EAAOyqE,GAASsuB,MAChB,MACD,KAAK,EACJ/4F,EAAOyqE,GAASouB,YAChB,MACD,KAAK,EACJ74F,EAAOyqE,GAASwuB,UAIlB,IAAI/2F,EAAO,KACX,OAAQlC,GACP,KAAKyqE,GAASquB,UACb52F,EAAOy8E,GAAmBK,wBAAwBhd,GAClD,MACD,KAAKyI,GAASiuB,QACbx2F,EAAOy3D,EAAOE,KAAK,GACnB,MACD,KAAK4Q,GAASsuB,MACb72F,EAAwB,EAAjBy3D,EAAOE,KAAK,GACnB,MACD,KAAK4Q,GAASwuB,UACb/2F,EAAO+4D,EAAYY,KAAKkV,GAAUonB,iBAAiBn2B,IAIrD,MAAO,CACNvvC,GAAIssC,EAAMC,OACVh/D,KAAMA,EACNkC,KAAMA,EAER,ECjDM,IAAM+qE,GAAoBzT,GAAA,SAAAyT,IAAA1mE,EAAA,KAAA0mE,EAAA,ICVlB,SAASwtB,GAA2B35F,EAAG45F,GACpD,IAAIC,EAAuB,qBAAXt0F,QAA0BvF,EAAEuF,OAAOC,WAAaxF,EAAE,cAClE,IAAK65F,EAAI,CACP,GAAIz/F,MAAMF,QAAQ8F,KAAO65F,EAAK,EAA2B75F,KAAO45F,GAAkB55F,GAAyB,kBAAbA,EAAEjE,OAAqB,CAC/G89F,IAAI75F,EAAI65F,GACZ,IAAI/9F,EAAI,EACJslC,EAAI,WAAc,EACtB,MAAO,CACLrhC,EAAGqhC,EACHvhC,EAAG,WACD,OAAI/D,GAAKkE,EAAEjE,OAAe,CACxBoxC,MAAM,GAED,CACLA,MAAM,EACNjyC,MAAO8E,EAAElE,KAEb,EACA6D,EAAG,SAAWm6F,GACZ,MAAMA,CACR,EACA55F,EAAGkhC,EAEP,CACA,MAAM,IAAItkC,UAAU,wIACtB,CACA,IAEEoB,EAFE67F,GAAmB,EACrBC,GAAS,EAEX,MAAO,CACLj6F,EAAG,WACD85F,EAAKA,EAAGx/F,KAAK2F,EACf,EACAH,EAAG,WACD,IAAImrD,EAAO6uC,EAAGjxD,OAEd,OADAmxD,EAAmB/uC,EAAK7d,KACjB6d,CACT,EACArrD,EAAG,SAAWs6F,GACZD,GAAS,EACT97F,EAAM+7F,CACR,EACA/5F,EAAG,WACD,IACO65F,GAAoC,MAAhBF,EAAW,QAAWA,EAAW,QAC5D,CAAE,QACA,GAAIG,EAAQ,MAAM97F,CACpB,CACF,EAEJ,CDxCaiuE,GACLC,oBAAsB,SAAClL,GAU7B,IATA,IAAMvb,EAAwB,CAC7B+zB,QAAS,CAAE,CACVhjE,EAAG,EACHC,EAAG,EACH60E,SAAU,KAEX7pB,QAAS,IAGHhc,EAAI+zB,QAAQ39E,OAAS,KAAM,CACjC,IAAMm+F,EAAS//B,EAAYY,KAAKpV,EAAI+zB,SAuB9B/Z,GApBFu6B,EAAOxjF,EAAI,IAAM,EACT,CACV,CAAEA,EAAGwjF,EAAOxjF,EAAGC,EAAGujF,EAAOvjF,EAAI,EAAG60E,SAAU,IAC1C,CAAE90E,EAAGwjF,EAAOxjF,EAAI,EAAGC,EAAGujF,EAAOvjF,EAAG60E,SAAU,IAC1C,CAAE90E,EAAGwjF,EAAOxjF,EAAI,EAAGC,EAAGujF,EAAOvjF,EAAI,EAAG60E,SAAU,IAC9C,CAAE90E,EAAGwjF,EAAOxjF,EAAGC,EAAGujF,EAAOvjF,EAAI,EAAG60E,SAAU,IAC1C,CAAE90E,EAAGwjF,EAAOxjF,EAAI,EAAGC,EAAGujF,EAAOvjF,EAAI,EAAG60E,SAAU,IAC9C,CAAE90E,EAAGwjF,EAAOxjF,EAAI,EAAGC,EAAGujF,EAAOvjF,EAAG60E,SAAU,KAGhC,CACV,CAAE90E,EAAGwjF,EAAOxjF,EAAGC,EAAGujF,EAAOvjF,EAAI,EAAG60E,SAAU,IAC1C,CAAE90E,EAAGwjF,EAAOxjF,EAAI,EAAGC,EAAGujF,EAAOvjF,EAAI,EAAG60E,SAAU,IAC9C,CAAE90E,EAAGwjF,EAAOxjF,EAAI,EAAGC,EAAGujF,EAAOvjF,EAAG60E,SAAU,IAC1C,CAAE90E,EAAGwjF,EAAOxjF,EAAGC,EAAGujF,EAAOvjF,EAAI,EAAG60E,SAAU,IAC1C,CAAE90E,EAAGwjF,EAAOxjF,EAAI,EAAGC,EAAGujF,EAAOvjF,EAAG60E,SAAU,IAC1C,CAAE90E,EAAGwjF,EAAOxjF,EAAI,EAAGC,EAAGujF,EAAOvjF,EAAI,EAAG60E,SAAU,MAIzBtwB,QAAO,SAAAv7D,GAAC,OAAKgmD,EAAI+zB,QAAQ7Z,MAAK,SAAAD,GAAE,OAAKA,EAAGlpD,IAAM/W,EAAE+W,GAAOkpD,EAAGjpD,IAAMhX,EAAEgX,CAAE,GAAC,IAC5F,GAAIgpD,EAAM5jE,OAAS,EAAG,CACrB,IAAM6jE,EAAKzF,EAAYY,KAAK4E,GAC5Bha,EAAI+zB,QAAQn7E,KAAKqhE,EAClB,CACD,CAGA,IADA,IAAMu6B,EAAc,EAAKx0C,EAAI+zB,QAAQ39E,OAAS,GACvC4pD,EAAIgc,QAAQ5lE,SAAWo+F,GAAa,CAG1C,IAAMpgE,EAAQ8+B,EAAOW,YAAY,GAAI,KAErC7T,EAAIgc,QAAQpjE,KAAK,CAChBozB,GAAIssC,EAAMC,OACVnjE,KAAMuiF,GAAcC,eACpBxjD,MAAM,OAADriB,OAASqiB,EAAMj6B,EAAC,MAAA4X,OAAKqiB,EAAMlc,EAAC,MAAAnG,OAAKqiB,EAAMjd,EAAC,KAC7C8kD,WAAY,GACZ81B,KAAM+B,GAAcC,aAAax4B,GACjCk5B,aAAc,CACb7mF,KAAM,EACN8mF,WAAY,EACZC,QAAS,KAGZ,CAEA30C,EAAIgc,QAAQpjD,SAAQ,SAAA+sE,GACnB,IAAMiP,EAAY50C,EAAI+zB,QAAQxe,QAAO,SAAA0E,GAAE,MAAoB,KAAhBA,EAAG4rB,QAAe,IAC9CrxB,EAAYY,KAAKw/B,GACzB/O,SAAWF,EAAO35D,EAC1B,IAEA,GAECg0B,EAAIgc,QAAQpjD,SAAQ,SAAA+sE,GAEnB,IAAM3R,EAAuC,IAC7Ch0B,EAAI+zB,QACFxe,QAAO,SAAA0E,GAAE,OAAIA,EAAG4rB,WAAaF,EAAO35D,EAAE,IACtCpT,SAAQ,SAAAqhD,GACRksB,GAAiBlS,mBAAmBj0B,EAAKia,EAAGlpD,EAAGkpD,EAAGjpD,GAChDukD,QAAO,SAAAn7D,GAAC,MAAmB,KAAfA,EAAEyrF,QAAe,IAC7BjtE,SAAQ,SAAAxe,GAAC,OAAI45E,EAAWp7E,KAAKwB,EAAE,GAClC,IAGG45E,EAAW59E,OAAS,KACRo+D,EAAYY,KAAK4e,GACzB6R,SAAWF,EAAO35D,GAE3B,UACgE,IAAxDg0B,EAAI+zB,QAAQxe,QAAO,SAAA0E,GAAE,MAAoB,KAAhBA,EAAG4rB,QAAe,IAAEzvF,QAEtD4pD,EAAIgc,QAAQpjD,SAAQ,SAAA+sE,GACnB,IAAM/3E,EAAOu4E,GAAiBqN,WAAWxzC,EAAK2lC,GAAQvvF,OACtDuvF,EAAO8O,aAAa7mF,KAAOA,EAC3B+3E,EAAO8O,aAAaC,WAAaxhC,EAAOE,KAAKxlD,GAwB7C+3E,EAAO8O,aAAaE,QAAUngC,EAAYY,KAtBzB,CAChB,WACA,UACA,SACA,OACA,SACA,SACA,QACA,YACA,YACA,SACA,WACA,aACA,aACA,aACA,YACA,SACA,QACA,UACA,WACA,aAKD,IADA,IAAMpsD,EAAQkqD,EAAOO,aAAa,GAAK,EAChCkyB,EAAO1pB,WAAW7lE,OAAS4S,GACjC28E,EAAO1pB,WAAWrjE,KAAK0/D,EAAMC,OAE/B,IAGA,IAAMs8B,EAAiB70C,EAAIgc,QAAQzG,QAAO,SAAAowB,GAEzC,OADgBQ,GAAiBqN,WAAWxzC,EAAK2lC,GAClC9mC,MAAK,SAAAob,GAAE,OAAoE,IAAhEksB,GAAiBlS,mBAAmBj0B,EAAKia,EAAGlpD,EAAGkpD,EAAGjpD,GAAG5a,MAAY,GAC5F,IACM0+F,EAAiBtgC,EAAYY,KAAKy/B,GAGxC,OAFA1O,GAAiBwN,cAAc3zC,EAAK80C,GAE7B90C,CACR,yBEhJc+0C,GAAA,CACbC,MAAO,6BACP/iE,MAAO,GACPC,OAAQ,GACR+iE,QAAS,YACTC,KAAM,OACNC,OAAQ,eACRnzE,YAAa,EACbozE,cAAe,QACfC,eAAgB,6fCLlBC,GAAe,SAACC,EAAUC,EAAgBC,GACxC,IAAM3wD,GAAY4rB,EAAAA,EAAAA,aACd,SAACrH,EAAsE3iB,GAAtE,IAAAgvD,EAAArsC,EAAAssC,EAAAD,EAAUthE,MAAAA,OAAA,IAAAuhE,EAAA,eAAAA,EAAAC,EAAVF,EAA0B9nF,KAAAA,OAAO,IAAAgoF,EAAA,GAAAA,EAAAC,EAAjCH,EAAqCP,OAAAA,OAAA,IAAAU,EAAS,EAAGA,EAAA33E,EAAjDw3E,EAAiDx3E,SAAa43E,+OAA9DC,CAAAL,EAA8D,CAA5D,QAAwB,OAAW,SAAY,aAC9C,OAAA95F,EAAAA,EAAAA,eACI,MACAo6F,oCAAAC,CAAAD,GAAA,CACEtvD,IAAAA,GACGquD,IAFL,CAGE9iE,MAAOrkB,EACPskB,OAAQtkB,EACRunF,OAAQ/gE,EACRpS,YAAamzE,EACb/1B,UAAA,2BAAArtD,OAAsCwjF,KACnCO,GAAA,GAAA/jF,OAAAgrD,EAED04B,EAASz1C,KAAK,SAAD4gB,GAAA,IAAA2B,EAAA7D,EAAAkC,EAAA,GAAEnlD,EAAK8mD,EAAA,GAAA2zB,EAAK3zB,EAAA,UAAM3mE,EAAAA,EAAAA,eAAc6f,EAAKy6E,EAAM,KAAAn5B,EAAO7+C,GAAY,KACnF,IAWD,OARP4mB,EAAUqxD,UAAY,CACpB/hE,MAAOrd,KAAAA,OACPnJ,KAAMmJ,KAAAA,UAAoB,CAACA,KAAAA,OAAkBA,KAAAA,SAC7Co+E,OAAQp+E,KAAAA,UAAoB,CAACA,KAAAA,OAAkBA,KAAAA,UAGjD+tB,EAAUvpB,YAAA,GAAAxJ,OAAiByjF,GAEpB1wD,CACT,EC/BAsxD,GAAed,GAAqB,QAAS,YAAa,CACxD,CACE,OACA,CACEr9E,EAAG,qKACHpjB,IAAK,UAGT,CAAC,OAAQ,CAAEojB,EAAG,4BAA6BpjB,IAAK,UAChD,CACE,OACA,CACEojB,EAAG,sEACHpjB,IAAK,YCbXwhG,GAAef,GACb,qBACA,uBACA,CACE,CACE,OACA,CACEr9E,EAAG,+YACHi9E,KAAM,eACNrgG,IAAK,QACLmtB,YAAa,QCVrBs0E,GAAehB,GAAqB,cAAe,iBAAkB,CACnE,CAAC,OAAQ,CAAEr9E,EAAG,uCAAwCpjB,IAAK,UAC3D,CAAC,OAAQ,CAAEojB,EAAG,aAAcpjB,IAAK,UACjC,CACE,OACA,CACEojB,EAAG,2DACHpjB,IAAK,YCCE0hG,GAASxjC,GAAA,SAAAwjC,IAAAz2F,EAAA,KAAAy2F,EAAA,IAATA,GACLj6B,SAAW,WACjB,OAAO1G,EAASW,SACjB,EAHYggC,GAKLC,iBAAmB,SAAC3/B,GAC1B,IAAI7tD,EAAQ,EAUZ,OARAA,GAASmmF,GAAgB54B,UAAUhB,QAAO,SAAAn7D,GAAC,OAAIA,EAAEy8D,SAAWA,CAAM,IAAEzgE,OACpE4S,GAAS8lE,GAAmBvY,UAAUhB,QAAO,SAAAn7D,GAAC,OAAIA,EAAEy8D,SAAWA,CAAM,IAAEzgE,OACvE4S,GAASinF,GAAS15B,UAAUhB,QAAO,SAAAp7D,GAAC,OAAIA,EAAE08D,SAAWA,CAAM,IAAEzgE,OAC7D4S,GAASslF,GAAe/3B,UAAUhB,QAAO,SAAAp+C,GAAC,OAAIA,EAAE0/C,SAAWA,CAAM,IAAEzgE,OACnE4S,GAAS+mF,GAASx5B,UAAUhB,QAAO,SAAAp/D,GAAC,OAAIA,EAAE0gE,SAAWA,CAAM,IAAEzgE,OAC7D4S,GAAS6kF,GAAWt3B,UAAUhB,QAAO,SAAAp/D,GAAC,OAAIA,EAAE0gE,SAAWA,CAAM,IAAEzgE,OAC/D4S,GAAS0tD,EAAcH,UAAUhB,QAAO,SAAAn7D,GAAC,OAAIA,EAAEy8D,SAAWA,CAAM,IAAEzgE,OAE3D4S,CACR,ECzBD,IAAAytF,GAAenB,GACb,+BACA,+BACA,CACE,CACE,OACA,CACEr9E,EAAG,0OACHi9E,KAAM,eACNrgG,IAAK,QACLmtB,YAAa,MAGjB,CACE,OACA,CACE/J,EAAG,4FACHi9E,KAAM,eACNrgG,IAAK,QACLmtB,YAAa,MAGjB,CACE,OACA,CACE/J,EAAG,4FACHi9E,KAAM,eACNrgG,IAAK,QACLmtB,YAAa,QC5BrB00E,GAAepB,GAAqB,QAAS,YAAa,CACxD,CACE,OACA,CACEr9E,EAAG,yEACHpjB,IAAK,UAGT,CAAC,OAAQ,CAAEojB,EAAG,+CAAgDpjB,IAAK,UACnE,CACE,OACA,CACEojB,EAAG,kKACHpjB,IAAK,UAGT,CAAC,OAAQ,CAAEojB,EAAG,+BAAgCpjB,IAAK,UACnD,CAAC,OAAQ,CAAEojB,EAAG,6BAA8BpjB,IAAK,YCjBnD8hG,GAAerB,GAAqB,eAAgB,kBAAmB,CACrE,CACE,OACA,CACEr9E,EAAG,4MACHi9E,KAAM,eACNrgG,IAAK,QACLmtB,YAAa,MAGjB,CACE,OACA,CACE/J,EAAG,uMACHi9E,KAAM,eACNrgG,IAAK,QACLmtB,YAAa,MAGjB,CACE,OACA,CACE/J,EAAG,kWACHi9E,KAAM,eACNrgG,IAAK,QACLmtB,YAAa,QCzBnB40E,GAAetB,GAAqB,UAAW,cAAe,CAC5D,CAAC,OAAQ,CAAEr9E,EAAG,2CAA4CpjB,IAAK,UAC/D,CAAC,OAAQ,CAAEojB,EAAG,wCAAyCpjB,IAAK,YCF9DgiG,GAAevB,GAAqB,iBAAkB,oBAAqB,CACzE,CACE,OACA,CACEr9E,EAAG,+EACHpjB,IAAK,UAGT,CACE,OACA,CACEojB,EAAG,oLACHpjB,IAAK,UAGT,CAAC,OAAQ,CAAEojB,EAAG,WAAYpjB,IAAK,UAC/B,CAAC,OAAQ,CAAEojB,EAAG,WAAYpjB,IAAK,UAC/B,CAAC,OAAQ,CAAEojB,EAAG,WAAYpjB,IAAK,YCjBjCiiG,GAAexB,GAAqB,YAAa,gBAAiB,CAChE,CAAC,OAAQ,CAAEr9E,EAAG,iBAAkBpjB,IAAK,UACrC,CAAC,OAAQ,CAAEojB,EAAG,mBAAoBpjB,IAAK,UACvC,CAAC,OAAQ,CAAEojB,EAAG,uCAAwCpjB,IAAK,UAC3D,CAAC,OAAQ,CAAEojB,EAAG,iCAAkCpjB,IAAK,UACrD,CAAC,OAAQ,CAAEojB,EAAG,0CAA2CpjB,IAAK,UAC9D,CAAC,OAAQ,CAAEojB,EAAG,qCAAsCpjB,IAAK,UACzD,CAAC,OAAQ,CAAEojB,EAAG,oBAAqBpjB,IAAK,UACxC,CAAC,OAAQ,CAAEojB,EAAG,uBAAwBpjB,IAAK,UAC3C,CAAC,OAAQ,CAAEojB,EAAG,2CAA4CpjB,IAAK,UAC/D,CAAC,OAAQ,CAAEojB,EAAG,mCAAoCpjB,IAAK,UACvD,CAAC,OAAQ,CAAEojB,EAAG,wCAAyCpjB,IAAK,WAC5D,CAAC,OAAQ,CAAEojB,EAAG,iCAAkCpjB,IAAK,aCZvDkiG,GAAezB,GAAqB,SAAU,aAAc,CAC1D,CACE,OACA,CACEr9E,EAAG,oYACHpjB,IAAK,YCLXmiG,GAAe1B,GAAqB,QAAS,YAAa,CACxD,CAAC,OAAQ,CAAEr9E,EAAG,8CAA+CpjB,IAAK,YCDpEoiG,GAAe3B,GAAqB,OAAQ,WAAY,CACtD,CAAC,OAAQ,CAAEr9E,EAAG,sCAAuCpjB,IAAK,YCD5DqiG,GAAe5B,GAAqB,QAAS,YAAa,CACxD,CACE,OACA,CACEr9E,EAAG,kJACHpjB,IAAK,YCLXsiG,GAAe7B,GAAqB,SAAU,aAAc,CAC1D,CACE,OACA,CACEr9E,EAAG,yFACHpjB,IAAK,UAGT,CACE,OACA,CACEojB,EAAG,gJACHpjB,IAAK,YCZXuiG,GAAe9B,GAAqB,MAAO,UAAW,CACpD,CAAC,OAAQ,CAAEr9E,EAAG,2CAA4CpjB,IAAK,UAC/D,CACE,OACA,CACEojB,EAAG,6FACHpjB,IAAK,YCNXwiG,GAAe/B,GAAqB,UAAW,cAAe,CAC5D,CAAC,OAAQ,CAAEr9E,EAAG,oCAAqCpjB,IAAK,UACxD,CAAC,OAAQ,CAAEojB,EAAG,4BAA6BpjB,IAAK,YCFlDyiG,GAAehC,GAAqB,QAAS,YAAa,CACxD,CACE,OACA,CACEr9E,EAAG,uKACHpjB,IAAK,UAGT,CAAC,OAAQ,CAAEojB,EAAG,WAAYpjB,IAAK,UAC/B,CAAC,OAAQ,CAAEojB,EAAG,WAAYpjB,IAAK,UAC/B,CAAC,OAAQ,CAAEojB,EAAG,0CAA2CpjB,IAAK,UAC9D,CAAC,OAAQ,CAAEojB,EAAG,2CAA4CpjB,IAAK,YCXjE0iG,GAAejC,GAAqB,QAAS,YAAa,CACxD,CACE,OACA,CACEr9E,EAAG,2DACHpjB,IAAK,UAGT,CACE,OACA,CACEojB,EAAG,0DACHpjB,IAAK,UAGT,CAAC,OAAQ,CAAEojB,EAAG,kCAAmCpjB,IAAK,UACtD,CAAC,OAAQ,CAAEojB,EAAG,kCAAmCpjB,IAAK,UACtD,CAAC,OAAQ,CAAEojB,EAAG,gCAAiCpjB,IAAK,UACpD,CAAC,OAAQ,CAAEojB,EAAG,mCAAoCpjB,IAAK,YClBzD2iG,GAAelC,GAAqB,eAAgB,kBAAmB,CACrE,CAAC,OAAQ,CAAEr9E,EAAG,eAAgBpjB,IAAK,UACnC,CAAC,OAAQ,CAAEojB,EAAG,kCAAmCpjB,IAAK,UACtD,CAAC,OAAQ,CAAEojB,EAAG,mCAAoCpjB,IAAK,UACvD,CAAC,OAAQ,CAAEojB,EAAG,mCAAoCpjB,IAAK,UACvD,CAAC,OAAQ,CAAEojB,EAAG,oCAAqCpjB,IAAK,sBCI9C4iG,GAAQ,SAARA,GAAQ,OAARA,EAAQ,oBAARA,EAAQ,cAARA,EAAQ,QAARA,EAAQ,gBAARA,CAAQ,MAORC,GAAQ,SAARA,GAAQ,OAARA,EAAQ,kBAARA,EAAQ,gBAARA,EAAQ,cAARA,CAAQ,MAYPC,GAAS,SAAAC,GAAAz6B,EAAAw6B,EAAAC,GAAA,IAAAC,EAAA/5B,EAAA65B,GAAA,SAAAA,IAAA,IAAAh9B,EAAA76D,EAAA,KAAA63F,GAAA,QAAAlkF,EAAAvd,UAAAE,OAAA4X,EAAA,IAAAvZ,MAAAgf,GAAAnB,EAAA,EAAAA,EAAAmB,EAAAnB,IAAAtE,EAAAsE,GAAApc,UAAAoc,GAqGnB,OArGmBqoD,EAAAk9B,EAAAnjG,KAAA+J,MAAAo5F,EAAA,OAAA9lF,OAAA/D,KAKrB8pF,YAAc,WACb,OAAQn9B,EAAKrlD,MAAM1H,MAClB,KAAK8pF,GAASK,OACb,OAAO,GACR,KAAKL,GAASM,MACb,OAAO,GAGT,OAAO,EACR,EAACr9B,EAEDs9B,YAAc,WACb,OAAQt9B,EAAKrlD,MAAM1H,MAClB,KAAK8pF,GAASK,OACb,OAAO,GACR,KAAKL,GAASM,MACb,OAAO,GAGT,OAAO,EACR,EAACr9B,EAEDu9B,cAAgB,WACf,OAAQv9B,EAAKrlD,MAAM1H,MAClB,KAAK8pF,GAASK,OACd,KAAKL,GAASM,MACb,OAAO,IAGT,OAAO,GACR,EAACr9B,EAEDj/C,OAAS,WACR,IACC,IAAM9N,EAAO+sD,EAAKs9B,cAEdz1B,EAAO,KACX,OAAQ7H,EAAKrlD,MAAM/b,MAClB,KAAKk+F,GAASU,SACb31B,GAAO41B,EAAAA,GAAAA,KAAC3B,GAA4B,CAAC7oF,KAAMA,IAC3C,MACD,KAAK6pF,GAASnF,MACb9vB,GAAO41B,EAAAA,GAAAA,KAAC1B,GAAS,CAAC9oF,KAAMA,IACxB,MACD,KAAK6pF,GAASY,GACb71B,GAAO41B,EAAAA,GAAAA,KAACzB,GAAe,CAAC/oF,KAAMA,IAC9B,MACD,KAAK6pF,GAASa,OACb91B,GAAO41B,EAAAA,GAAAA,KAACxB,GAAW,CAAChpF,KAAMA,IAC1B,MACD,KAAK82D,GAAWsM,KACfxO,GAAO41B,EAAAA,GAAAA,KAACvB,GAAiB,CAACjpF,KAAMA,IAChC,MACD,KAAK82D,GAAW6M,KACf/O,GAAO41B,EAAAA,GAAAA,KAACtB,GAAa,CAAClpF,KAAMA,IAC5B,MACD,KAAK82D,GAAWkM,MACfpO,GAAO41B,EAAAA,GAAAA,KAACrB,GAAU,CAACnpF,KAAMA,IACzB,MACD,KAAK82D,GAAWiL,MACfnN,GAAO41B,EAAAA,GAAAA,KAACpB,GAAS,CAACppF,KAAMA,IACxB,MACD,KAAK82D,GAAW+M,YACfjP,GAAO41B,EAAAA,GAAAA,KAACnB,GAAQ,CAACrpF,KAAMA,IACvB,MACD,KAAK82D,GAAWmN,KACfrP,GAAO41B,EAAAA,GAAAA,KAAClB,GAAS,CAACtpF,KAAMA,IACxB,MACD,KAAK82D,GAAW+J,OACfjM,GAAO41B,EAAAA,GAAAA,KAACjB,GAAU,CAACvpF,KAAMA,IACzB,MACD,KAAK82D,GAAWoN,MACftP,GAAO41B,EAAAA,GAAAA,KAAChB,GAAO,CAACxpF,KAAMA,IACtB,MACD,KAAK82D,GAAWgL,SACflN,GAAO41B,EAAAA,GAAAA,KAACf,GAAW,CAACzpF,KAAMA,IAC1B,MACD,KAAK82D,GAAW2L,OACf7N,GAAO41B,EAAAA,GAAAA,KAACd,GAAS,CAAC1pF,KAAMA,IACxB,MACD,KAAK82D,GAAW2X,QACf7Z,GAAO41B,EAAAA,GAAAA,KAACb,GAAS,CAAC3pF,KAAMA,IACxB,MACD,KAAK82D,GAAW8M,MACfhP,GAAO41B,EAAAA,GAAAA,KAACZ,GAAe,CAAC5pF,KAAMA,IAIhC,OACC2qF,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,aAAaiN,MAAK,GAAAt6D,OAAK4oD,EAAKrlD,MAAM/f,MAAK,KAAAwc,OAAI4oD,EAAKrlD,MAAM/b,MAAQrC,MAAO,CAAEshG,SAAS,GAADzmF,OAAK4oD,EAAKm9B,cAAa,MAAM/2E,WAAW,GAADhP,OAAK4oD,EAAKu9B,kBAAoBh6E,SAAA,CACjKy8C,EAAKrlD,MAAM/f,MAAM,IAAEitE,IAGvB,CAAE,MAAA+c,GACD,OAAO6Y,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,2BACvB,CACD,EAACzE,CAAC,CAAD,OAAA5H,EAAA4kC,EAAA,CArGoB,CAAS7yD,EAAAA,WAAlB6yD,GACL51D,aAAe,CACrBn0B,KAAM8pF,GAAS9Z,SC9BjB,IAAA6a,GAAenD,GAAqB,cAAe,iBAAkB,CACnE,CAAC,OAAQ,CAAEr9E,EAAG,uCAAwCpjB,IAAK,UAC3D,CAAC,OAAQ,CAAEojB,EAAG,YAAapjB,IAAK,UAChC,CAAC,OAAQ,CAAEojB,EAAG,eAAgBpjB,IAAK,YCCzB6jG,GAAQ,SAARA,GAAQ,OAARA,EAAQ,kBAARA,EAAQ,gBAARA,EAAQ,kBAARA,EAAQ,wBAARA,EAAQ,4BAARA,EAAQ,oBAARA,EAAQ,0BAARA,EAAQ,UAARA,EAAQ,cAARA,CAAQ,MAiBPC,GAAI,SAAAf,GAAAz6B,EAAAw7B,EAAAf,GAAA,IAAAC,EAAA/5B,EAAA66B,GAAA,SAAAA,IAAA,IAAAh+B,EAAA76D,EAAA,KAAA64F,GAAA,QAAAllF,EAAAvd,UAAAE,OAAA4X,EAAA,IAAAvZ,MAAAgf,GAAAnB,EAAA,EAAAA,EAAAmB,EAAAnB,IAAAtE,EAAAsE,GAAApc,UAAAoc,GA6Bd,OA7BcqoD,EAAAk9B,EAAAnjG,KAAA+J,MAAAo5F,EAAA,OAAA9lF,OAAA/D,KAKhB0N,OAAS,WACR,IACC,IAAI8mD,EAAO,KACX,GAAQ7H,EAAKrlD,MAAM/b,OACbm/F,GAASE,IACbp2B,GACC41B,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,qBAAoBlhD,UAClCk6E,EAAAA,GAAAA,KAACK,GAAc,MAMnB,OACCF,EAAAA,GAAAA,MAAA,OAAKn5B,UAAS,iBAAArtD,OAAmB4oD,EAAKrlD,MAAM/b,MAAO2kB,SAAA,CACjDskD,GACD41B,EAAAA,GAAAA,KAAA,OAAKh5B,UAAS,yBAAArtD,OAA2B4oD,EAAKrlD,MAAM/b,MAAO2kB,SACzDy8C,EAAKrlD,MAAM4I,aAIhB,CAAE,MAAAqhE,GACD,OAAO6Y,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,8BACvB,CACD,EAACzE,CAAC,CAAD,OAAA5H,EAAA4lC,EAAA,CA7Be,CAAS7zD,EAAAA,WAAb6zD,GACL52D,aAAe,CACrBxoC,KAAMm/F,GAAS9a,SCfV,IAAMib,GAAK,SAAAjB,GAAAz6B,EAAA07B,EAAAjB,GAAA,IAAAC,EAAA/5B,EAAA+6B,GAAA,SAAAA,IAAA,IAAAl+B,EAAA76D,EAAA,KAAA+4F,GAAA,QAAAplF,EAAAvd,UAAAE,OAAA4X,EAAA,IAAAvZ,MAAAgf,GAAAnB,EAAA,EAAAA,EAAAmB,EAAAnB,IAAAtE,EAAAsE,GAAApc,UAAAoc,GAsBf,OAtBeqoD,EAAAk9B,EAAAnjG,KAAA+J,MAAAo5F,EAAA,OAAA9lF,OAAA/D,KAKjB0N,OAAS,WACR,IACC,OAAKi/C,EAAKrlD,MAAM/f,OAKfgjG,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,QAAOlhD,SAAA,CACpBy8C,EAAKrlD,MAAM4I,UACZk6E,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,cAAalhD,SAC1By8C,EAAKrlD,MAAM/f,WAPPolE,EAAKrlD,MAAM4I,QAWpB,CAAE,MAAAqhE,GACD,OAAO6Y,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,sBACvB,CACD,EAACzE,CAAC,CAAD,OAAA5H,EAAA8lC,EAAA,CAtBgB,CAAS/zD,EAAAA,WAAd+zD,GACL92D,aAAe,CACrBxsC,MAAO,MCJF,IAAMujG,GAAM,SAACxjF,GACnB,IACC,OACCijF,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,MAAKlhD,SAAA,EACnBk6E,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,cAAalhD,SAC1B5I,EAAM4I,YAERk6E,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,YAAWlhD,SACxB5I,EAAMyjF,UAIX,CAAE,MAAAxZ,GACD,OAAO6Y,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,oBACvB,CACD,ECba45B,GAAQ,SAAApB,GAAAz6B,EAAA67B,EAAApB,GAAA,IAAAC,EAAA/5B,EAAAk7B,GAAA,SAAAA,IAAA,IAAAr+B,EAAA76D,EAAA,KAAAk5F,GAAA,QAAAvlF,EAAAvd,UAAAE,OAAA4X,EAAA,IAAAvZ,MAAAgf,GAAAnB,EAAA,EAAAA,EAAAmB,EAAAnB,IAAAtE,EAAAsE,GAAApc,UAAAoc,GAelB,OAfkBqoD,EAAAk9B,EAAAnjG,KAAA+J,MAAAo5F,EAAA,OAAA9lF,OAAA/D,KAKpB0N,OAAS,WACR,IACC,OACC08E,EAAAA,GAAAA,KAAA,OAAKh5B,UAAS,aAAArtD,OAAe4oD,EAAKrlD,MAAM7N,MAAOyW,SAC7Cy8C,EAAKrlD,MAAM2jF,MAAMj5C,KAAI,SAACk5C,EAAMh/F,GAAC,OAAKk+F,EAAAA,GAAAA,KAAA,OAAah5B,UAAU,iBAAgBlhD,SAAGg7E,GAAhCh/F,EAA4C,KAG5F,CAAE,MAAAqlF,GACD,OAAO6Y,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,0BACvB,CACD,EAACzE,CAAC,CAAD,OAAA5H,EAAAimC,EAAA,CAfmB,CAASl0D,EAAAA,WAAjBk0D,GACLj3D,aAAe,CACrBt6B,KAAM,QCAD,IAAM0xF,GAAgB,SAAC7jF,GAC7B,IAAgE8jF,EAAA16B,GAAtClxB,EAAAA,EAAAA,UAA6B,UAAS,GAAxDrf,EAAIirE,EAAA,GAAEC,EAAOD,EAAA,GAerB,GAAa,WAATjrE,EACH,OACCiqE,EAAAA,GAAAA,KAAA,UAAQh5B,UAAU,SAASnsB,QAfV,WAClBomD,EAAQ,QACT,EAaiDn7E,SAAE5I,EAAMyjF,QAIzD,IACC,OACCR,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,gBAAelhD,SAAA,EAC7Bk6E,EAAAA,GAAAA,KAACO,GAAI,CAAAz6E,UACJk6E,EAAAA,GAAAA,KAAA,KAAAl6E,SAAA,GAAAnM,OAAOuD,EAAMyjF,MAAK,yBAEnBR,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,aAAYlhD,SAAA,EAC1Bk6E,EAAAA,GAAAA,KAAA,UAAQnlD,QAtBM,WACjBomD,EAAQ,UACR/jF,EAAM29B,SACP,EAmB+B/0B,SAAC,QAC5Bk6E,EAAAA,GAAAA,KAAA,UAAQnlD,QAlBK,WAChBomD,EAAQ,SACT,EAgB8Bn7E,SAAC,gBAI/B,CAAE,MAAAqhE,GACD,OAAO6Y,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,8BACvB,CACD,EC/CAk6B,GAAehE,GAAqB,IAAK,QAAS,CAChD,CAAC,OAAQ,CAAEr9E,EAAG,eAAgBpjB,IAAK,UACnC,CAAC,OAAQ,CAAEojB,EAAG,aAAcpjB,IAAK,YCQtB0kG,GAAM,SAAA3B,GAAAz6B,EAAAo8B,EAAA3B,GAAA,IAAAC,EAAA/5B,EAAAy7B,GAAA,SAAAA,IAAA,IAAA5+B,EAAA76D,EAAA,KAAAy5F,GAAA,QAAA9lF,EAAAvd,UAAAE,OAAA4X,EAAA,IAAAvZ,MAAAgf,GAAAnB,EAAA,EAAAA,EAAAmB,EAAAnB,IAAAtE,EAAAsE,GAAApc,UAAAoc,GAsDhB,OAtDgBqoD,EAAAk9B,EAAAnjG,KAAA+J,MAAAo5F,EAAA,OAAA9lF,OAAA/D,KAMlBwrF,WAAa,SAACx/F,GACbA,EAAE4J,kBAEE+2D,EAAKrlD,MAAMmkF,SACd9+B,EAAKrlD,MAAMmkF,SAEb,EAAC9+B,EAED++B,YAAc,SAAC1/F,GACdA,EAAE4J,iBACH,EAAC+2D,EAEDg/B,UAAY,WACX,IACC,IAAIC,EAAW,KASf,OARIj/B,EAAKrlD,MAAMmkF,UACdG,GACCxB,EAAAA,GAAAA,KAAA,UAAQh5B,UAAU,qBAAqBnsB,QAAS0nB,EAAK6+B,WAAWt7E,UAC/Dk6E,EAAAA,GAAAA,KAACkB,GAAK,QAMRf,EAAAA,GAAAA,MAAA,OAAKn5B,UAAS,gBAAArtD,OAAkB4oD,EAAKrlD,MAAMwhD,OAAS7jB,QAAS0nB,EAAK++B,YAAYx7E,SAAA,CAC5E07E,GACDxB,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,iBAAgBlhD,SAC7By8C,EAAKrlD,MAAMnd,YAIhB,CAAE,MAAAonF,GACD,OAAO6Y,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,uBACvB,CACD,EAACzE,EAEDj/C,OAAS,WACR,IACC,OACC08E,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,kBAAkBnsB,QAAS0nB,EAAK6+B,WAAWt7E,SACxDy8C,EAAKg/B,aAGT,CAAE,MAAA9Z,GACD,OACCuY,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,gCAEjB,CACD,EAACzE,CAAC,CAAD,OAAA5H,EAAAwmC,EAAA,CAtDiB,CAASz0D,EAAAA,WAAfy0D,GACLx3D,aAAe,CACrB+0B,MAAO,EACP2iC,QAAS,MCLJ,IAAMI,GAAW,SAACvkF,GACxB,IAAsD8jF,EAAA16B,GAAxBlxB,EAAAA,EAAAA,WAAkB,GAAM,GAA9CssD,EAAMV,EAAA,GAAEW,EAASX,EAAA,GAEnBY,GAAezsD,EAAAA,EAAAA,QAAuB,MACtC0sD,GAAa1sD,EAAAA,EAAAA,QAAuB,OAE1CN,EAAAA,EAAAA,YAAU,WACT,GAAK+sD,EAAaj0E,QAAlB,CAIA,IAAM7qB,EAAW,IAAIH,iBAAiBm/F,GAMtC,OALAh/F,EAASK,QAAQy+F,EAAaj0E,QAAS,CACtCm9C,WAAW,EACXD,SAAS,IAGH,WACN/nE,EAASi/F,YACV,CAVA,CAWD,GAAG,IAEH,IAAMD,EAAa,WAClB,IAAM/hG,EAAU8hG,EAAWl0E,QACtB5tB,GAILA,EACEiiG,QACA,CAAEruC,UAAU,GAADh6C,OAAK5Z,EAAQkiG,aAAY,MAAMn5E,QAAS,GACnD,CAAEw/C,SAAU,IAAK45B,OAAQ,UAAWpF,KAAM,YAE7C,EAiCA,OACCqD,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,WAAW14B,IAAKszD,EAAc/mD,QAX9B,SAACj5C,GAChBA,EAAE4J,kBAEEk2F,EApBiB,WACrB,IAAM3hG,EAAU8hG,EAAWl0E,QACtB5tB,GAILA,EACEiiG,QACA,CAAEruC,UAAW,EAAG7qC,QAAS,GACzB,CAAEw/C,SAAU,IAAK45B,OAAQ,aAEzBC,SAAS/7F,MAAK,WACdrG,EAAQjB,MAAMw+C,QAAU,OACxBqkD,GAAU,EACX,GACF,CAMES,GAxBDT,GAAU,EA4BX,EAG+D77E,SAAA,EAC7Dk6E,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,kBAAiBlhD,SAC9B5I,EAAMmlF,SAEPX,GAAS1B,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,mBAAmB14B,IAAKuzD,EAAW/7E,SAAE5I,EAAMnd,UAAiB,OAGxF,EC5EauiG,GAAQ,SAACplF,GACrB,IAAM2c,EAAQ,GACR0oE,EAAgB,GAAKhzE,KAAKytD,GAC1BwlB,EAA+B,EAAhBD,EAAoB,EAEzC,OACCpC,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,QAAOlhD,SAAA,EACrBq6E,EAAAA,GAAAA,MAAA,OACCtmE,MAAOA,EACPC,OAAQD,EACRgjE,QAAO,OAAAljF,OAASkgB,EAAK,KAAAlgB,OAAIkgB,GACzB/6B,MAAO,CAAE4sE,UAAW,mBAAoB5lD,SAAA,EAExCk6E,EAAAA,GAAAA,KAAA,UACCyC,GAAI5oE,GACJ6oE,GAAI7oE,GACJ93B,EAAG,GACH+6F,KAAK,OACLC,OAAO,qBACPnzE,YAAa,EACbJ,gBAAe,GAAA7P,OAAK6oF,EAAY,MAAA7oF,OAAK4oF,GACrCvF,cAAc,WAEfgD,EAAAA,GAAAA,KAAA,UACCyC,GAAI5oE,GACJ6oE,GAAI7oE,GACJ93B,EAAG,GACH+6F,KAAK,OACLC,OAAO,oBACPnzE,YAAa,EACbJ,gBAAe,GAAA7P,OAAK6oF,EAAY,MAAA7oF,OAAK4oF,GACrC94E,iBAAkB+4E,GAAgB,EAAIjzE,KAAKiQ,IAAItiB,EAAMylF,SAAU,IAC/D3F,cAAc,cAGhBgD,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,gBAAelhD,SAC5B5I,EAAMnd,YAIX,EC3Ba6iG,GAAW,SAAApD,GAAAz6B,EAAA69B,EAAApD,GAAA,IAAAC,EAAA/5B,EAAAk9B,GAAA,SAAAA,IAAA,IAAArgC,EAAA76D,EAAA,KAAAk7F,GAAA,QAAAvnF,EAAAvd,UAAAE,OAAA4X,EAAA,IAAAvZ,MAAAgf,GAAAnB,EAAA,EAAAA,EAAAmB,EAAAnB,IAAAtE,EAAAsE,GAAApc,UAAAoc,GAmGrB,OAnGqBqoD,EAAAk9B,EAAAnjG,KAAA+J,MAAAo5F,EAAA,OAAA9lF,OAAA/D,KAavBilC,QAAU,SAACj5C,GACVA,EAAE4J,kBAEE+2D,EAAKrlD,MAAM29B,SACd0nB,EAAKrlD,MAAM29B,QAAQj5C,EAErB,EAAC2gE,EAEDj/C,OAAS,WACR,IACC,IAAI0jD,EAAY,eACY,OAAvBzE,EAAKrlD,MAAM29B,SAAsB0nB,EAAKrlD,MAAMyI,WAChDqhD,GAAa,cAEVzE,EAAKrlD,MAAM2lF,UACd77B,GAAa,YAEVzE,EAAKrlD,MAAMyI,WACdqhD,GAAa,aAGd,IAAMrkD,EAAQ,GACd,GAAI4/C,EAAKrlD,MAAMyF,MACd,IAAK,IAAI7gB,EAAI,EAAS,KAANA,IAAYA,EAAG,CAC9B,IAAMghG,EAAoC,GAAzBhoC,EAAOS,gBAAwB,EAC1CwnC,EAAoC,GAAzBjoC,EAAOS,gBAAwB,EAC1CynC,EAAoC,GAAzBloC,EAAOS,gBAAwB,EAChD54C,EAAMniB,MACLw/F,EAAAA,GAAAA,KAAA,OAECh5B,UAAS,cAAArtD,OAAgB4oD,EAAKrlD,MAAM/b,KAAKsf,eACzC3hB,MACC,CACC4sE,UAAU,UAAD/xD,OAAYmpF,EAAO,QAC5BziE,KAAK,GAAD1mB,OAAKopF,EAAO,MAChBxiE,IAAI,GAAD5mB,OAAKqpF,EAAO,QANZlhG,GAWR,CAGD,IAAMmhG,EAAuC,KAA1B1gC,EAAKrlD,MAAMgmF,YAA2D,IAApC3gC,EAAKrlD,MAAMimF,cAAcnlG,OACxEolG,GAAc7gC,EAAKrlD,MAAMkmF,YAAc7gC,EAAKrlD,MAAM/b,MAAMsf,cAE9D,OACC0/E,EAAAA,GAAAA,MAAA,OAAKn5B,UAAWA,EAAWnsB,QAAS0nB,EAAK1nB,QAAQ/0B,SAAA,CAC/CnD,GACDw9E,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,qBAAoBlhD,SAAA,EAClCq6E,EAAAA,GAAAA,MAAA,OAAKn5B,UAAS,sBAAArtD,OAAwB4oD,EAAKrlD,MAAM/b,KAAKsf,eAAgBqF,SAAA,EACrEk6E,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,eAAclhD,SAAEy8C,EAAKrlD,MAAMmmF,QAEzCJ,GACC9C,EAAAA,GAAAA,MAAA,OAAKn5B,UAAS,eAAArtD,OAAiBypF,GAAat9E,SAAA,EAC3Ck6E,EAAAA,GAAAA,KAAA,OAAKh5B,UAA+C,IAApCzE,EAAKrlD,MAAMimF,cAAcnlG,OAAe,yCAA2C,yCAAyC8nB,SAC1Iy8C,EAAKrlD,MAAMgmF,cAEblD,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,sBAAqBlhD,SAClCy8C,EAAKrlD,MAAMyI,SAAW,KAAO48C,EAAKrlD,MAAMimF,mBAGzC,SAGLhD,EAAAA,GAAAA,MAAA,OAAKn5B,UAAS,qBAAArtD,OAAuB4oD,EAAKrlD,MAAM/b,KAAKsf,eAAgBqF,SAAA,EACpEk6E,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,eAAclhD,SAAEy8C,EAAKrlD,MAAMomF,OAEzCL,GACC9C,EAAAA,GAAAA,MAAA,OAAKn5B,UAAS,eAAArtD,OAAiBypF,GAAat9E,SAAA,EAC3Ck6E,EAAAA,GAAAA,KAAA,OAAKh5B,UAA+C,IAApCzE,EAAKrlD,MAAMimF,cAAcnlG,OAAe,yCAA2C,yCAAyC8nB,SAC1Iy8C,EAAKrlD,MAAMgmF,cAEblD,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,sBAAqBlhD,SAClCy8C,EAAKrlD,MAAMyI,SAAW,KAAO48C,EAAKrlD,MAAMimF,mBAGzC,aAMT,CAAE,MAAAhc,GACD,OAAO6Y,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,6BACvB,CACD,EAACzE,CAAC,CAAD,OAAA5H,EAAAioC,EAAA,CAnGsB,CAASl2D,EAAAA,WAApBk2D,GACLj5D,aAAe,CACrBhnB,OAAO,EACPxhB,KAAMyhF,GAAS4C,QACf8d,KAAM,KACNJ,WAAY,GACZC,cAAe,GACfC,WAAY,KACZP,SAAS,EACTl9E,UAAU,EACVk1B,QAAS,MCnBJ,IAAM0oD,GAAQ,SAAA/D,GAAAz6B,EAAAw+B,EAAA/D,GAAA,IAAAC,EAAA/5B,EAAA69B,GAAA,SAAAA,IAAA,IAAAhhC,EAAA76D,EAAA,KAAA67F,GAAA,QAAAloF,EAAAvd,UAAAE,OAAA4X,EAAA,IAAAvZ,MAAAgf,GAAAnB,EAAA,EAAAA,EAAAmB,EAAAnB,IAAAtE,EAAAsE,GAAApc,UAAAoc,GA2BlB,OA3BkBqoD,EAAAk9B,EAAAnjG,KAAA+J,MAAAo5F,EAAA,OAAA9lF,OAAA/D,KAMpB0N,OAAS,WACR,IACC,IAAMqE,EAAO,UAAAhO,OAAa4oD,EAAKrlD,MAAMwK,YAAc,EAAI66C,EAAKrlD,MAAMwK,YAAc66C,EAAKrlD,MAAMngB,QAAQiB,OAAM,UAEnGjB,EAAUwlE,EAAKrlD,MAAMngB,QAAQ6qD,KAAI,SAAA47C,GAAW,IAADC,EAC1Cz8B,EAAYw8B,EAAO5vE,KAAO2uC,EAAKrlD,MAAMwmF,WAAa,kBAAoB,SAC5E,OACC1D,EAAAA,GAAAA,KAAA,OAAqBh5B,UAAWA,EAAWnsB,QAAS,kBAAM0nB,EAAKrlD,MAAMymF,SAASH,EAAO5vE,GAAG,EAAC9N,SACxE,QADwE29E,EACtFD,EAAOlmD,eAAO,IAAAmmD,EAAAA,EAAID,EAAO5vE,IADlB4vE,EAAO5vE,GAInB,IAEA,OACCosE,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,WAAWloE,MAAO,CAAE8kG,oBAAqBj8E,GAAU7B,SAC/D/oB,GAGL,CAAE,MAAAoqF,GACD,OAAO6Y,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,yBACvB,CACD,EAACzE,CAAC,CAAD,OAAA5H,EAAA4oC,EAAA,CA3BmB,CAAS72D,EAAAA,WAAjB62D,GACL55D,aAAe,CACrBjiB,YAAa,EACbg8E,WAAY,ICJP,IAAMG,GAAS,SAAArE,GAAAz6B,EAAA8+B,EAAArE,GAAA,IAAAC,EAAA/5B,EAAAm+B,GAAA,SAAAA,IAAA,IAAAthC,EAAA76D,EAAA,KAAAm8F,GAAA,QAAAxoF,EAAAvd,UAAAE,OAAA4X,EAAA,IAAAvZ,MAAAgf,GAAAnB,EAAA,EAAAA,EAAAmB,EAAAnB,IAAAtE,EAAAsE,GAAApc,UAAAoc,GAmDnB,OAnDmBqoD,EAAAk9B,EAAAnjG,KAAA+J,MAAAo5F,EAAA,OAAA9lF,OAAA/D,KAKrB0N,OAAS,WACR,IACC,IAAMq9E,GACLX,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,mBAAkBlhD,SAC/By8C,EAAKrlD,MAAMyjF,QAIVxjG,EAAQ,KAeZ,GAbCA,EADGd,MAAMF,QAAQomE,EAAKrlD,MAAM/f,QAE3B6iG,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,kBAAiBlhD,SAC9By8C,EAAKrlD,MAAM/f,MAAMyqD,KAAI,SAAChoC,EAAG9d,GAAC,OAAMk+F,EAAAA,GAAAA,KAAA,OAAah5B,UAAU,mBAAkBlhD,SAAElG,GAAjC9d,EAAyC,OAKrFk+F,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,mBAAkBlhD,SAC/By8C,EAAKrlD,MAAM/f,QAKgB,aAA3BolE,EAAKrlD,MAAM01C,YACd,OACCutC,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,sBAAqBlhD,SAAA,CAClC3oB,EACAwjG,KAKJ,IAAI35B,EAAS,cAAArtD,OAAiB4oD,EAAKrlD,MAAM01C,aAKzC,OAJK2P,EAAKrlD,MAAM/f,QACf6pE,GAAa,UAIbm5B,EAAAA,GAAAA,MAAA,OAAKn5B,UAAWA,EAAUlhD,SAAA,CACxB66E,EACAxjG,IAGJ,CAAE,MAAAgqF,GACD,OAAO6Y,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,2BACvB,CACD,EAACzE,CAAC,CAAD,OAAA5H,EAAAkpC,EAAA,CAnDoB,CAASn3D,EAAAA,WAAlBm3D,GACLl6D,aAAe,CACrBipB,YAAa,cCXf,IAAAkxC,GAAe5G,GACb,sBACA,wBACA,CACE,CACE,OACA,CACEr9E,EAAG,+RACHi9E,KAAM,eACNrgG,IAAK,QACLmtB,YAAa,QCVrBm6E,GAAe7G,GAAqB,SAAU,aAAc,CAC1D,CAAC,OAAQ,CAAEr9E,EAAG,6CAA8CpjB,IAAK,YCStDunG,GAAS,SAAC9mF,GAMtB,IACC,OACCijF,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,SAASnsB,QAPV,SAACj5C,GAChBA,EAAE4J,kBACF0R,EAAMi0C,UAAUj0C,EAAMqH,QACvB,EAI2CuB,SAAA,EACxCk6E,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,eAAclhD,SAAE5I,EAAMyjF,QACpCzjF,EAAMqH,SAAUy7E,EAAAA,GAAAA,KAAC8D,GAAqB,CAAC98B,UAAU,yBAA2Bg5B,EAAAA,GAAAA,KAAC+D,GAAU,CAAC/8B,UAAU,kBAGtG,CAAE,MAAAmgB,GACD,OAAO6Y,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,uBACvB,CACD,ECjBai9B,GAAI,SAAAzE,GAAAz6B,EAAAk/B,EAAAzE,GAAA,IAAAC,EAAA/5B,EAAAu+B,GAAA,SAAAA,IAAA,IAAA1hC,EAAA76D,EAAA,KAAAu8F,GAAA,QAAA5oF,EAAAvd,UAAAE,OAAA4X,EAAA,IAAAvZ,MAAAgf,GAAAnB,EAAA,EAAAA,EAAAmB,EAAAnB,IAAAtE,EAAAsE,GAAApc,UAAAoc,GA0Bd,OA1BcqoD,EAAAk9B,EAAAnjG,KAAA+J,MAAAo5F,EAAA,OAAA9lF,OAAA/D,KAKhB0N,OAAS,WACR,IACC,IAAMvmB,EAAUwlE,EAAKrlD,MAAMngB,QAAQ6qD,KAAI,SAAA47C,GAAW,IAADC,EAC1Cz8B,EAAYw8B,EAAO5vE,KAAO2uC,EAAKrlD,MAAMwmF,WAAa,kBAAoB,SAC5E,OACC1D,EAAAA,GAAAA,KAAA,OAAqBh5B,UAAWA,EAAWnsB,QAAS,kBAAM0nB,EAAKrlD,MAAMymF,SAASH,EAAO5vE,GAAG,EAAC9N,SACxE,QADwE29E,EACtFD,EAAOlmD,eAAO,IAAAmmD,EAAAA,EAAID,EAAO5vE,IADlB4vE,EAAO5vE,GAInB,IAEA,OACCusE,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,OAAMlhD,SAAA,EACpBk6E,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,WACbjqE,GACFijG,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,aAGlB,CAAE,MAAAmgB,GACD,OAAO6Y,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,qBACvB,CACD,EAACzE,CAAC,CAAD,OAAA5H,EAAAspC,EAAA,CA1Be,CAASv3D,EAAAA,WAAbu3D,GACLt6D,aAAe,CACrB+5D,WAAY,ICNP,IAAMQ,GAAM,SAAChnF,GACnB,IACC,OACC8iF,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,MAAKlhD,SAClB5I,EAAM4I,UAGV,CAAE,MAAAqhE,GACD,OAAO6Y,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,oBACvB,CACD,ECUam9B,GAAU,SAAA3E,GAAAz6B,EAAAo/B,EAAA3E,GAAA,IAAAC,EAAA/5B,EAAAy+B,GAAA,SAAAA,IAAA,IAAA5hC,EAAA76D,EAAA,KAAAy8F,GAAA,QAAA9oF,EAAAvd,UAAAE,OAAA4X,EAAA,IAAAvZ,MAAAgf,GAAAnB,EAAA,EAAAA,EAAAmB,EAAAnB,IAAAtE,EAAAsE,GAAApc,UAAAoc,GAuFpB,OAvFoBqoD,EAAAk9B,EAAAnjG,KAAA+J,MAAAo5F,EAAA,OAAA9lF,OAAA/D,KAStBilC,QAAU,SAACj5C,GACVA,EAAE4J,kBAEE+2D,EAAKrlD,MAAM29B,SACd0nB,EAAKrlD,MAAM29B,QAAQ0nB,EAAKrlD,MAAM80B,OAEhC,EAACuwB,EAED6hC,iBAAmB,WAClB,OAA6B,OAAzB7hC,EAAKrlD,MAAM8lE,UACP,GAGDzgB,EAAKrlD,MAAM80B,OAAO+iC,cACvB5X,QAAO,SAAA3pD,GAAC,OAAKwhE,GAAoBwa,YAAYh8E,EAAG+uD,EAAKrlD,MAAM8lE,UAA4B,IACvFp7B,KAAI,SAACp0C,EAAG1R,GAAC,OAAKk+F,EAAAA,GAAAA,KAAA,OAAah5B,UAAU,2BAA0BlhD,SAAEtS,EAAE+B,aAA3CzT,EAA6D,GACxF,EAACygE,EAED8hC,cAAgB,WACf,OAAO9hC,EAAKrlD,MAAM80B,OAAOkjC,WAAWttB,KAAI,SAACp0C,EAAG1R,GAC3C,MAAa,YAAT0R,EAAEogB,IAEJosE,EAAAA,GAAAA,KAACS,GAAK,CAAStjG,MAAOolE,EAAKrlD,MAAM8lD,UAAYkP,GAAU4oB,wBAAwBtnF,EAAiC+uD,EAAKrlD,MAAM80B,QAAU,EAAElsB,UACtIk6E,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,YAAWlhD,SAAE+jE,GAAYmL,wBAAwBxhF,MADrD1R,IAObk+F,EAAAA,GAAAA,KAAA,OAAah5B,UAAU,YAAWlhD,SAAE+jE,GAAYmL,wBAAwBxhF,IAA9D1R,EAEZ,GACD,EAACygE,EAED+hC,WAAa,WACZ,IAAMC,EAAuB,SAAvBA,EAAwBra,GAC7B,IAAIpkE,EAAW,KAKf,OAJIokE,EAAOpkE,SAAS9nB,OAAS,IAC5B8nB,EAAWokE,EAAOpkE,SAAS8hC,KAAI,SAACn6B,EAAO3rB,GAAC,OAAKk+F,EAAAA,GAAAA,KAAA,OAAAl6E,SAAcy+E,EAAqB92E,IAAzB3rB,EAAsC,MAI7Fq+F,EAAAA,GAAAA,MAAA,OAAAr6E,SAAA,EACCk6E,EAAAA,GAAAA,KAACS,GAAK,CAACtjG,MAAOolE,EAAKrlD,MAAM8lD,UAAYkP,GAAU8oB,wBAAwB9Q,GAAU,EAAEpkE,UAClFk6E,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,SAAQlhD,SAAE0vD,GAAcud,eAAe7I,EAAQ3nB,EAAKrlD,MAAM8lE,UAAWzgB,EAAKrlD,MAAMqmD,eAE/Fz9C,GAAWk6E,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,SAAQlhD,SAAEA,IAAkB,OAG1D,EAEA,OAAOy8C,EAAKrlD,MAAM80B,OAAOrG,QAAQic,KAAI,SAAChmD,EAAGE,GAAC,OAAKk+F,EAAAA,GAAAA,KAAA,OAAAl6E,SAAcy+E,EAAqB3iG,IAAzBE,EAAkC,GAC5F,EAACygE,EAEDj/C,OAAS,WACR,OACC08E,EAAAA,GAAAA,KAAC4C,GAAW,CACXzhG,KAAMyhF,GAAS4hB,OACfnB,OACClD,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,oBAAmBlhD,SAAA,EACjCk6E,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,eAAclhD,UAC5Bk6E,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAASmE,WAAW3+E,SAAEy8C,EAAKrlD,MAAM80B,OAAOh1C,UAErDmjG,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,OAAMlhD,SAAA,EACpBk6E,EAAAA,GAAAA,KAACkE,GAAG,CAAAp+E,SAAE+jE,GAAY6G,cAAcnuB,EAAKrlD,MAAM80B,UACQ,UAAlD63C,GAAYiL,eAAevyB,EAAKrlD,MAAM80B,SAAsBguD,EAAAA,GAAAA,KAACkE,GAAG,CAAAp+E,SAAC,UAAc,QAEhFy8C,EAAK6hC,mBACL7hC,EAAK8hC,gBACL9hC,EAAK+hC,gBAGRpB,WAAY3gC,EAAKrlD,MAAMwnF,QAAU,SACjCtB,WAAY7gC,EAAKrlD,MAAMkmF,WACvBz9E,SAAU48C,EAAKrlD,MAAMyI,SACrBk1B,QAAS0nB,EAAKrlD,MAAM29B,QAAU0nB,EAAK1nB,QAAU,MAGhD,EAAC0nB,CAAC,CAAD,OAAA5H,EAAAwpC,EAAA,CAvFqB,CAASz3D,EAAAA,WCvBjB,SAASi4D,KACtBA,GAAc,SAAqB/iG,EAAGG,GACpC,OAAO,IAAI6iG,EAAYhjG,OAAG,EAAQG,EACpC,EACA,IAAIH,EAAIwrD,OAAOxxD,UACbmG,EAAI,IAAIo0C,QACV,SAASyuD,EAAYhjG,EAAGC,EAAG2R,GACzB,IAAIvR,EAAI,IAAImrD,OAAOxrD,EAAGC,GACtB,OAAOE,EAAEghB,IAAI9gB,EAAGuR,GAAKzR,EAAEmO,IAAItO,IAAK,EAAeK,EAAG2iG,EAAYhpG,UAChE,CACA,SAASipG,EAAYjjG,EAAGC,GACtB,IAAI2R,EAAIzR,EAAEmO,IAAIrO,GACd,OAAOlG,OAAOqV,KAAKwC,GAAG0hD,QAAO,SAAUnzD,EAAGF,GACxC,IAAII,EAAIuR,EAAE3R,GACV,GAAI,iBAAmBI,EAAGF,EAAEF,GAAKD,EAAEK,OAAQ,CACzC,IAAK,IAAIlE,EAAI,OAAG,IAAW6D,EAAEK,EAAElE,KAAOA,EAAI,EAAIkE,EAAEjE,QAASD,IACzDgE,EAAEF,GAAKD,EAAEK,EAAElE,GACb,CACA,OAAOgE,CACT,GAAGpG,OAAO03C,OAAO,MACnB,CACA,OAAO,EAASuxD,EAAax3C,QAASw3C,EAAYhpG,UAAU+E,KAAO,SAAUoB,GAC3E,IAAIF,EAAID,EAAEjB,KAAKrE,KAAKsD,KAAMmC,GAC1B,GAAIF,EAAG,CACLA,EAAEijG,OAASD,EAAYhjG,EAAGjC,MAC1B,IAAI4T,EAAI3R,EAAEkjG,QACVvxF,IAAMA,EAAEsxF,OAASD,EAAYrxF,EAAG5T,MAClC,CACA,OAAOiC,CACT,EAAG+iG,EAAYhpG,UAAU4L,OAAO3I,SAAW,SAAUgD,EAAG2R,GACtD,GAAI,iBAAmBA,EAAG,CACxB,IAAIvR,EAAIF,EAAEmO,IAAItQ,MACd,OAAOgC,EAAE4F,OAAO3I,SAASvC,KAAKsD,KAAMiC,EAAG2R,EAAE3U,QAAQ,gBAAgB,SAAU+C,EAAGG,GAC5E,IAAIF,EAAII,EAAEF,GACV,MAAO,KAAO1F,MAAMF,QAAQ0F,GAAKA,EAAE6sC,KAAK,KAAO7sC,EACjD,IACF,CACA,GAAI,mBAAqB2R,EAAG,CAC1B,IAAIzV,EAAI6B,KACR,OAAOgC,EAAE4F,OAAO3I,SAASvC,KAAKsD,KAAMiC,GAAG,WACrC,IAAID,EAAI9D,UACR,MAAO,UAAYyJ,EAAQ3F,EAAEA,EAAE5D,OAAS,MAAQ4D,EAAI,GAAGhB,MAAMtE,KAAKsF,IAAIpB,KAAKqkG,EAAYjjG,EAAG7D,IAAKyV,EAAEnN,MAAMzG,KAAMgC,EAC/G,GACF,CACA,OAAOA,EAAE4F,OAAO3I,SAASvC,KAAKsD,KAAMiC,EAAG2R,EACzC,EAAGmxF,GAAYt+F,MAAMzG,KAAM9B,UAC7B,CDvBaqmG,GACLx6D,aAAe,CACrBq5B,WAAW,EACXggB,UAAW,KACXzf,UAAW,KACX59C,UAAU,EACVk1B,QAAS,ME1BJ,IAAMmqD,GAAKrqC,GAAA,SAAAqqC,IAAAt9F,EAAA,KAAAs9F,EAAA,IAALA,GACLjpG,SAAW,SAACigC,GAClB,MAAM,OAANriB,OAAcqiB,EAAMj6B,EAAC,MAAA4X,OAAKqiB,EAAMlc,EAAC,MAAAnG,OAAKqiB,EAAMjd,EAAC,IAC9C,EAHYimF,GAKLzwF,MAAQ,SAAC3V,GACf,IAEM+Z,EAFKgsF,GAAG,yCAAoD,CAAA5iG,EAAA,EAAA+d,EAAA,EAAAf,EAAA,IAElDpe,KAAK/B,GACrB,OAAI+Z,GAAKA,EAAEmsF,OAKH,CACN/iG,EALS6J,SAAS+M,EAAEmsF,OAAU,GAM9BhlF,EALSlU,SAAS+M,EAAEmsF,OAAU,GAM9B/lF,EALSnT,SAAS+M,EAAEmsF,OAAU,IASzB,IACR,EAtBYE,GAwBLC,QAAU,SAACjpE,GAAmC,IAAvB4+D,EAAM98F,UAAAE,OAAA,QAAAuR,IAAAzR,UAAA,GAAAA,UAAA,GAAG,GACtC,MAAO,CACNiE,EAAGi6B,EAAMj6B,GAAM,IAAMi6B,EAAMj6B,GAAK64F,EAChC96E,EAAGkc,EAAMlc,GAAM,IAAMkc,EAAMlc,GAAK86E,EAChC77E,EAAGid,EAAMjd,GAAM,IAAMid,EAAMjd,GAAK67E,EAElC,EA9BYoK,GAgCLE,OAAS,SAAClpE,GAAmC,IAAvB4+D,EAAM98F,UAAAE,OAAA,QAAAuR,IAAAzR,UAAA,GAAAA,UAAA,GAAG,GACrC,MAAO,CACNiE,EAAGi6B,EAAMj6B,EAAI64F,EACb96E,EAAGkc,EAAMlc,EAAI86E,EACb77E,EAAGid,EAAMjd,EAAI67E,EAEf,EC1BM,IAAMuK,GAAgB,SAAA3F,GAAAz6B,EAAAogC,EAAA3F,GAAA,IAAAC,EAAA/5B,EAAAy/B,GAAA,SAAAA,IAAA,IAAA5iC,EAAA76D,EAAA,KAAAy9F,GAAA,QAAA9pF,EAAAvd,UAAAE,OAAA4X,EAAA,IAAAvZ,MAAAgf,GAAAnB,EAAA,EAAAA,EAAAmB,EAAAnB,IAAAtE,EAAAsE,GAAApc,UAAAoc,GA+H1B,OA/H0BqoD,EAAAk9B,EAAAnjG,KAAA+J,MAAAo5F,EAAA,OAAA9lF,OAAA/D,KAM5BilC,QAAU,SAACj5C,EAAqB2rF,GAC/B3rF,EAAE4J,kBACF+2D,EAAKrlD,MAAMkoF,eAAe7X,EAC3B,EAAChrB,EAED8iC,OAAS,SAACtjC,GACT,IAAIujC,EAAkB,qBAClBC,EAAc,qBAEZhY,EAAShrB,EAAKrlD,MAAM0qC,IAAIgc,QAAQ9B,MAAK,SAAA//D,GAAC,OAAIA,EAAE6xB,KAAOmuC,EAAO0rB,QAAQ,KAAK,KAC7E,GAAIF,EAAQ,CACX,IAAMvxD,EAAQgpE,GAAMzwF,MAAMg5E,EAAOvxD,OAC7BA,IACHspE,EAAkB/X,EAAOvxD,MACzBupE,EAAcP,GAAMjpG,SAASipG,GAAME,OAAOlpE,EAAO,MAE7CumC,EAAKrlD,MAAMsoF,gBAAmBjjC,EAAKrlD,MAAMsoF,eAAe5xE,KAAO25D,EAAO35D,KACzE0xE,EAAkBN,GAAMjpG,SAASipG,GAAMC,QAAQjpE,EAAO,KACtDupE,EAAchY,EAAOvxD,OAGxB,CAEA,IAAMypE,EAAU,KACVC,EAAK,GACLC,EAAS,CACd,CAAEhtF,EAAGopD,EAAOppD,EAAI8sF,EAAUC,EAAI9sF,EAAGmpD,EAAOnpD,EAAI6sF,GAC5C,CAAE9sF,EAAGopD,EAAOppD,EAAI,EAAI8sF,EAAUC,EAAI9sF,EAAGmpD,EAAOnpD,EAAI6sF,GAChD,CAAE9sF,EAAGopD,EAAOppD,EAAI,EAAI+sF,EAAKD,EAAS7sF,EAAGmpD,EAAOnpD,EAAI,IAChD,CAAED,EAAGopD,EAAOppD,EAAI,EAAI8sF,EAAUC,EAAI9sF,EAAGmpD,EAAOnpD,EAAI,EAAI6sF,GACpD,CAAE9sF,EAAGopD,EAAOppD,EAAI8sF,EAAUC,EAAI9sF,EAAGmpD,EAAOnpD,EAAI,EAAI6sF,GAChD,CAAE9sF,EAAGopD,EAAOppD,EAAI8sF,EAAUC,EAAI9sF,EAAGmpD,EAAOnpD,EAAI,KAS7C,OANImpD,EAAOppD,EAAI,IAAM,EACpBgtF,EAAOnlF,SAAQ,SAAAolF,GAAE,OAAIA,EAAGhtF,GAAK,GAAI,IAEjC+sF,EAAOnlF,SAAQ,SAAAolF,GAAE,OAAIA,EAAGhtF,GAAK,GAAI,KAIjConF,EAAAA,GAAAA,KAAA,WAECh5B,UAAU,mBACV2+B,OACCA,EACE/9C,KAAI,SAAAg+C,GAAE,SAAAjsF,OAAOisF,EAAGjtF,EAAC,KAAAgB,OAAIisF,EAAGhtF,EAAC,IACzB81B,KAAK,KAER5vC,MAAO,CACNg+F,KAAMwI,EACNvI,OAAQwI,GAET1qD,QAAS,SAAAj5C,GAAC,OAAI2gE,EAAK1nB,QAAQj5C,EAAG2rF,EAAO,GAAC,GAAA5zE,OAX9BooD,EAAOppD,EAAC,KAAAgB,OAAIooD,EAAOnpD,GAc9B,EAAC2pD,EAEDsjC,SAAW,SAACtY,GACX,IAAMxrB,EAASgsB,GAAiBsN,iBAAiB94B,EAAKrlD,MAAM0qC,IAAK2lC,GACjE,GAAIxrB,EAAQ,CAEX,IAAInpD,EAAImpD,EAAOnpD,EAOf,OANImpD,EAAOppD,EAAI,IAAM,EACpBC,GAAK,IAELA,GAAK,KAILunF,EAAAA,GAAAA,MAAA,KAAmBtlD,QAAS,SAAAj5C,GAAC,OAAI2gE,EAAK1nB,QAAQj5C,EAAG2rF,EAAO,EAACznE,SAAA,EACxDk6E,EAAAA,GAAAA,KAAA,UACCh5B,UAAU,+BACVy7B,GAAI1gC,EAAOppD,EAAI,GACf+pF,GAAI9pF,EAAI,GACR7W,EAAG,MAEJi+F,EAAAA,GAAAA,KAAA,QACCh5B,UAAU,0BACVruD,EAAGopD,EAAOppD,EAAI,IACdC,EAAGA,EAAI,IACPktF,WAAY,GACZC,iBAAiB,SACjBC,WAAW,SAAQlgF,SAElBynE,EAAO1pB,WAAW7lE,WAfbuvF,EAAO35D,GAmBjB,CAEA,OAAO,IACR,EAAC2uC,EAEDj/C,OAAS,WACR,IACC,IAAI+kE,EAAa9lB,EAAKrlD,MAAM0qC,IAAI+zB,QAChC,GAAyB,WAApBpZ,EAAKrlD,MAAM7N,MAAqD,OAA9BkzD,EAAKrlD,MAAMsoF,eAA0B,CAC3E,IAAM/X,EAAWlrB,EAAKrlD,MAAMsoF,eAAe5xE,GAC3Cy0D,EAAaA,EAAWlrB,QAAO,SAAA4E,GAAM,OAAIA,EAAO0rB,WAAaA,CAAQ,GACtE,CAGA,IAAMzsB,EAAO+sB,GAAiBjtB,cAAcunB,GAC5CrnB,EAAK3gC,MAAQ,EACb2gC,EAAKzgC,KAAO,EACZygC,EAAKC,OAAS,EACdD,EAAKE,QAAU,EAEf,IAAMrnC,EAAamnC,EAAKC,MAAQD,EAAK3gC,KAAvB,EACRvG,EAAcknC,EAAKE,OAASF,EAAKzgC,IAAxB,EAEf,OACC4/D,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,eAAe61B,QAAO,GAAAljF,OAAKqnD,EAAK3gC,KAAI,KAAA1mB,OAAIqnD,EAAKzgC,IAAG,KAAA5mB,OAAIkgB,EAAK,KAAAlgB,OAAImgB,GAAU+gB,QAAS,SAAAj5C,GAAC,OAAI2gE,EAAK1nB,QAAQj5C,EAAG,KAAK,EAACkkB,SAAA,CACxHuiE,EAAWzgC,IAAI2a,EAAK8iC,QACA,QAApB9iC,EAAKrlD,MAAM7N,KAAiBkzD,EAAKrlD,MAAM0qC,IAAIgc,QAAQhc,IAAI2a,EAAKsjC,UAAY,OAG5E,CAAE,MAAA1e,GACD,OAAO6Y,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,6BACvB,CACD,EAACzE,CAAC,CAAD,OAAA5H,EAAAwqC,EAAA,CA/H2B,CAASz4D,EAAAA,WAAzBy4D,GACEx7D,aAAe,CAC5Bt6B,KAAM,MACN+1F,eAAgB,kBAAM,IAAI,GCcrB,IAAMa,GAAa,SAAAzG,GAAAz6B,EAAAkhC,EAAAzG,GAAA,IAAAC,EAAA/5B,EAAAugC,GACzB,SAAAA,EAAY/oF,GAAe,IAADqlD,EAIvB,OAJuB76D,EAAA,KAAAu+F,IACzB1jC,EAAAk9B,EAAAnjG,KAAA,KAAM4gB,IAMPgpF,WAAa,SAAClpG,EAAcuY,EAAqBpU,EAAgBglG,EAA0B/yC,EAA0B0a,GACpHvL,EAAKnL,SAAS,CACb3xC,SAAU,CACTzoB,KAAMA,EACNuY,YAAaA,EACbpU,KAAMA,EACNglG,SAAUA,EACV/yC,SAAUA,EACV0a,QAASA,IAGZ,EAACvL,EAED6jC,aAAe,WACd7jC,EAAKnL,SAAS,CACb3xC,SAAU,MAEZ,EAAC88C,EAED8jC,UAAY,SAACvF,EAA0E/K,EAAmBv2D,EAAa27B,GACtH,OAAK46B,EAAWv2D,GAASu2D,EAAW56B,KAIhC2lC,EAAKhzB,QAAQrnB,MAAK,SAAA3nC,GAAC,OAAKozD,GAAUuoB,kBAAkB37E,GAAK,GAAOozD,GAAUuoB,kBAAkB37E,GAAK,EAAG,GA+BzG,EAACyjD,EAED+jC,SAAW,SAACnlG,EAAcs9D,GACzB,OAAQt9D,GACP,IAAK,eACJ,OAAO41F,GAAgB54B,UACrBhB,QAAO,SAAAn7D,GAAC,OAAIA,EAAEy8D,SAAWA,CAAM,IAC/B7W,KAAI,SAAA5lD,GACJ,IAAM+zF,EAAW7jB,GAAUqoB,mBAAmBv4F,GACxCglE,EAAYzE,EAAK8jC,UAAUrkG,EAAG+zF,EAAU,EAAG,GAAK,SAAW,GACjE,OACCiK,EAAAA,GAAAA,KAAA,UAAmBh5B,UAAWA,EAAWnsB,QAAS,kBAAM0nB,EAAK2jC,WAAWlkG,EAAEhF,KAAMgF,EAAEuT,YAAaqtE,GAASuC,QAASnjF,EAAE60E,iBAAkB70E,EAAEoxD,SAAUpxD,EAAE8rE,QAAQ,EAAChoD,UAC3Jk6E,EAAAA,GAAAA,KAAC6D,GAAS,CAAClD,MAAO3+F,EAAEhF,KAAMG,MAAO44F,KADrB/zF,EAAE4xB,GAIjB,IACF,IAAK,kBACJ,OAAO8iD,GAAmBvY,UACxBhB,QAAO,SAAAn7D,GAAC,OAAIA,EAAEy8D,SAAWA,CAAM,IAC/B7W,KAAI,SAAA5lD,GACJ,IAAM+zF,EAAW7jB,GAAUqoB,mBAAmBv4F,GACxCglE,EAAYzE,EAAK8jC,UAAUrkG,EAAG+zF,EAAU,EAAG,GAAK,SAAW,GACjE,OACCiK,EAAAA,GAAAA,KAAA,UAAmBh5B,UAAWA,EAAWnsB,QAAS,kBAAM0nB,EAAK2jC,WAAWlkG,EAAEhF,KAAMgF,EAAEuT,YAAaqtE,GAASuC,QAASnjF,EAAE60E,iBAAkB70E,EAAEoxD,SAAUpxD,EAAE8rE,QAAQ,EAAChoD,UAC3Jk6E,EAAAA,GAAAA,KAAC6D,GAAS,CAAClD,MAAO3+F,EAAEhF,KAAMG,MAAO44F,KADrB/zF,EAAE4xB,GAIjB,IACF,IAAK,QACJ,OAAOikE,GAAS15B,UACdhB,QAAO,SAAAp7D,GAAC,OAAIA,EAAE08D,SAAWA,CAAM,IAC/B7W,KAAI,SAAA7lD,GACJ,IAAMg0F,EAAW7jB,GAAUwoB,gBAAgB34F,GACrCilE,EAAYzE,EAAK8jC,UAAUtkG,EAAGg0F,EAAU,EAAG,GAAK,SAAW,GACjE,OACCiK,EAAAA,GAAAA,KAAA,UAAmBh5B,UAAWA,EAAWnsB,QAAS,kBAAM0nB,EAAK2jC,WAAWnkG,EAAE/E,KAAM+E,EAAEwT,YAAaqtE,GAASuC,QAASpjF,EAAE80E,iBAAkB90E,EAAEqxD,SAAUrxD,EAAE+rE,QAAQ,EAAChoD,UAC3Jk6E,EAAAA,GAAAA,KAAC6D,GAAS,CAAClD,MAAO5+F,EAAE/E,KAAMG,MAAO44F,KADrBh0F,EAAE6xB,GAIjB,IACF,IAAK,cACJ,OAAOsiE,GAAe/3B,UACpBhB,QAAO,SAAAp+C,GAAC,OAAIA,EAAE0/C,SAAWA,CAAM,IAC/B7W,KAAI,SAAA7oC,GACJ,IAAMg3E,EAAW7jB,GAAUyoB,sBAAsB57E,GAC3CioD,EAAYzE,EAAK8jC,UAAUtnF,EAAGg3E,EAAU,EAAG,GAAK,SAAW,GACjE,OACCiK,EAAAA,GAAAA,KAAA,UAAmBh5B,UAAWA,EAAWnsB,QAAS,kBAAM0nB,EAAK2jC,WAAWnnF,EAAE/hB,KAAM+hB,EAAExJ,YAAaqtE,GAASuC,QAASpmE,EAAE83D,iBAAkB93D,EAAEq0C,SAAUr0C,EAAE+uD,QAAQ,EAAChoD,UAC3Jk6E,EAAAA,GAAAA,KAAC6D,GAAS,CAAClD,MAAO5hF,EAAE/hB,KAAMG,MAAO44F,KADrBh3E,EAAE6U,GAIjB,IACF,IAAK,aACJ,OAAO0qC,EAAcH,UACnBhB,QAAO,SAAAn7D,GAAC,OAAIA,EAAEy8D,SAAWA,CAAM,IAC/B7W,KAAI,SAAA5lD,GAAC,OAAIg+F,EAAAA,GAAAA,KAACO,GAAI,CAAYp/F,KAAMm/F,GAASiG,MAAMzgF,SAAE9jB,EAAEhF,MAA/BgF,EAAE4xB,GAAyC,IAClE,IAAK,UACJ,OAAO6hE,GAAWt3B,UAChBhB,QAAO,SAAA3pD,GAAC,OAAIA,EAAEirD,SAAWA,CAAM,IAC/B7W,KAAI,SAAAp0C,GAAC,OAAIwsF,EAAAA,GAAAA,KAACO,GAAI,CAAYp/F,KAAMm/F,GAASiG,MAAMzgF,SAAEtS,EAAExW,MAA/BwW,EAAEogB,GAAyC,IAClE,IAAK,QACJ,OAAO+jE,GAASx5B,UACdhB,QAAO,SAAAp/D,GAAC,OAAIA,EAAE0gE,SAAWA,CAAM,IAC/B7W,KAAI,SAAA7pD,GAAC,OAAIiiG,EAAAA,GAAAA,KAACO,GAAI,CAAYp/F,KAAMm/F,GAASiG,MAAMzgF,SAAE/nB,EAAEf,MAA/Be,EAAE61B,GAAyC,IAGnE,OAAO,IACR,EAAC2uC,EAEDikC,aAAe,SAACrlG,GACf,OAAQA,GACP,IAAK,eACJ,OAAO41F,GAAgB54B,UAAUngE,OAClC,IAAK,kBACJ,OAAO04E,GAAmBvY,UAAUngE,OACrC,IAAK,QACJ,OAAO65F,GAAS15B,UAAUngE,OAC3B,IAAK,cACJ,OAAOk4F,GAAe/3B,UAAUngE,OACjC,IAAK,aACJ,OAAOsgE,EAAcH,UAAUngE,OAChC,IAAK,UACJ,OAAOy3F,GAAWt3B,UAAUngE,OAC7B,IAAK,QACJ,OAAO25F,GAASx5B,UAAUngE,OAG5B,OAAO,CACR,EAACukE,EAEDj/C,OAAS,WACR,IACC,IAUM6/C,EAAU,CAAE,IAAKxpD,OAAO6jD,EAASW,UAAUvW,KAAI,SAAAp0C,GAAC,OAAIA,EAAEogB,EAAE,KAExD7d,EAZQ,CACb,eACA,kBACA,QACA,cACA,aACA,UACA,SAKkB6xC,KAAI,SAAAzmD,GACtB,OACCg/F,EAAAA,GAAAA,MAAA,OAAAr6E,SAAA,EACCq6E,EAAAA,GAAAA,MAACI,GAAI,CAACp/F,KAAMm/F,GAASmE,WAAW3+E,SAAA,CAAE3kB,EAAK,KAAGohE,EAAKikC,aAAarlG,GAAM,QAClE6+F,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,MAAKlhD,SAElBq9C,EAAQvb,KAAI,SAAAh0B,GACX,OACCosE,EAAAA,GAAAA,KAAA,OAAch5B,UAAU,OAAMlhD,SAC5By8C,EAAK+jC,SAASnlG,EAAMyyB,IADZA,EAIZ,QAVOzyB,EAeZ,IAEIslG,EAAS,KACb,GAAIlkC,EAAKp9D,MAAMsgB,SAAU,CACxB,IAAM3lB,EAASyiE,EAAKp9D,MAAMsgB,SAASzoB,KAC7BmE,EAAOohE,EAAKp9D,MAAMsgB,SAAStkB,KAE3BulG,EAAgBnkC,EAAKp9D,MAAMsgB,SAAS0gF,SAASv+C,KAAI,SAAAzlD,GACtD,IAAM4zF,EAAW7jB,GAAUsoB,mBAAmBr4F,GAC9C,OACC69F,EAAAA,GAAAA,KAACS,GAAK,CAAYtjG,MAAO44F,EAASjwE,UACjCk6E,EAAAA,GAAAA,KAAC2G,GAAW,CACX1/C,QAAS9kD,EACTuiG,OAAQ5kG,EACRsjG,WAAYjiG,KAJFgB,EAAEyxB,GAQhB,IACMgzE,EAAerkC,EAAKp9D,MAAMsgB,SAAS2tC,SAASxL,KAAI,SAAAzlD,GACrD,IAAM4zF,EAAW7jB,GAAUsoB,mBAAmBr4F,GAC9C,OACC69F,EAAAA,GAAAA,KAACS,GAAK,CAAYtjG,MAAO44F,EAASjwE,UACjCk6E,EAAAA,GAAAA,KAAC2G,GAAW,CACX1/C,QAAS9kD,EACTuiG,OAAQ5kG,EACRsjG,WAAYjiG,KAJFgB,EAAEyxB,GAQhB,IACMizE,EAActkC,EAAKp9D,MAAMsgB,SAASqoD,QAAQlmB,KAAI,SAAA9oC,GACnD,IAAMi3E,EAAW7jB,GAAUuoB,kBAAkB37E,GAC7C,OACCkhF,EAAAA,GAAAA,KAACS,GAAK,CAAYtjG,MAAO44F,EAASjwE,UACjCk6E,EAAAA,GAAAA,KAACmE,GAAU,CACVnyD,OAAQlzB,EACRkkD,WAAW,EACX0hC,OAAQ5kG,EACRsjG,WAAYjiG,KALF2d,EAAE8U,GAShB,IACM7zB,GACLogG,EAAAA,GAAAA,MAAA,OAAAr6E,SAAA,EACCk6E,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAASwG,QAAQhhF,SAAEy8C,EAAKp9D,MAAMsgB,SAASzoB,QACnDgjG,EAAAA,GAAAA,KAAA,UACAA,EAAAA,GAAAA,KAACO,GAAI,CAAAz6E,UACJk6E,EAAAA,GAAAA,KAAA,KAAGlhG,MAAO,CAAEioG,UAAW,UAAWjhF,SAAEy8C,EAAKp9D,MAAMsgB,SAASlQ,gBAExDmxF,EAAc1oG,OAAS,GAAIgiG,EAAAA,GAAAA,KAAA,SAAS,KACpC0G,EAAc1oG,OAAS,GAAIgiG,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAASmE,WAAW3+E,SAAC,mBAAwB,KACpF4gF,EAAc1oG,OAAS,GAAIgiG,EAAAA,GAAAA,KAACY,GAAQ,CAACC,MAAO6F,IAAoB,KAChEE,EAAa5oG,OAAS,GAAIgiG,EAAAA,GAAAA,KAAA,SAAS,KACnC4G,EAAa5oG,OAAS,GAAIgiG,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAASmE,WAAW3+E,SAAC,kBAAuB,KAClF8gF,EAAa5oG,OAAS,GAAIgiG,EAAAA,GAAAA,KAACY,GAAQ,CAACC,MAAO+F,IAAmB,KAC9DC,EAAY7oG,OAAS,GAAIgiG,EAAAA,GAAAA,KAAA,SAAS,KAClC6G,EAAY7oG,OAAS,GAAIgiG,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAASmE,WAAW3+E,SAAC,iBAAsB,KAChF+gF,EAAY7oG,OAAS,GAAIgiG,EAAAA,GAAAA,KAACY,GAAQ,CAACC,MAAOgG,IAAkB,QAG/DJ,GACCzG,EAAAA,GAAAA,KAACmB,GAAM,CACNphG,QAASA,EACTshG,QAAS9+B,EAAK6jC,cAGjB,CAEA,OACCjG,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,kBAAiBlhD,SAAA,EAC/Bk6E,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,MAAKlhD,SAElBq9C,EAAQvb,KAAI,SAAAh0B,GACX,IAAMozE,EAAO90B,GAAUsnB,QAAQ5lE,GACzB52B,EAAOgqG,EAAOA,EAAKhqG,KAAO,WAChC,OACCgjG,EAAAA,GAAAA,KAAA,OAAch5B,UAAU,sBAAqBlhD,SAC3C9oB,GADQ42B,EAIZ,MAGD7d,EACA0wF,IAGJ,CAAE,MAAAtf,GACD,OAAO6Y,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,gCACvB,CACD,EAjRCzE,EAAKp9D,MAAQ,CACZsgB,SAAU,MACT88C,CACH,CAAC,OAAA5H,EAAAsrC,EAAA,CANwB,CAASv5D,EAAAA,WClCnCu6D,GAAe/J,GAAqB,YAAa,eAAgB,CAC/D,CAAC,OAAQ,CAAEr9E,EAAG,aAAcpjB,IAAK,UACjC,CACE,OACA,CACEojB,EAAG,qJACHpjB,IAAK,YCNXyqG,GAAehK,GAAqB,eAAgB,kBAAmB,CACrE,CACE,OACA,CACEr9E,EAAG,0NACHi9E,KAAM,eACNrgG,IAAK,QACLmtB,YAAa,QCPnBu9E,GAAejK,GACb,oBACA,uBACA,CACE,CACE,OACA,CACEr9E,EAAG,yPACHi9E,KAAM,eACNrgG,IAAK,QACLmtB,YAAa,QCWRw9E,GAAe,SAAA5H,GAAAz6B,EAAAqiC,EAAA5H,GAAA,IAAAC,EAAA/5B,EAAA0hC,GAAA,SAAAA,IAAA,IAAA7kC,EAAA76D,EAAA,KAAA0/F,GAAA,QAAA/rF,EAAAvd,UAAAE,OAAA4X,EAAA,IAAAvZ,MAAAgf,GAAAnB,EAAA,EAAAA,EAAAmB,EAAAnB,IAAAtE,EAAAsE,GAAApc,UAAAoc,GA+DzB,OA/DyBqoD,EAAAk9B,EAAAnjG,KAAA+J,MAAAo5F,EAAA,OAAA9lF,OAAA/D,KAC3ByxF,cAAgB,SAAC94B,GAChB,IAAMV,EAAatL,EAAKrlD,MAAM8lE,UAAU7V,OAAOU,WAAW1Q,QAAO,SAAAp8D,GAAC,OAAIA,EAAEwtE,QAAUA,CAAK,IACvF,OAAOnS,EAAYa,SAAS4Q,GAAY,SAAA9sE,GAAC,OAAIouE,GAAewC,wBAAwB5wE,EAAE,IACpF6mD,KAAI,SAAA7mD,GACJ,IAAMgiB,EAAMw/C,EAAKrlD,MAAM8lE,UAAU7V,OAAOU,WAAW1Q,QAAO,SAAAmqC,GAAG,OAAIn4B,GAAewC,wBAAwB21B,KAASn4B,GAAewC,wBAAwB5wE,EAAE,IACpJi7B,EAAQmzC,GAAe6C,yBAAyBjxE,GAAK,YAAc,UACnEwmG,EAASp4B,GAAe6C,yBAAyBjxE,GAAK,OAAQ,SACpE,OACCo/F,EAAAA,GAAAA,MAAA,OAAgBn5B,UAAU,gBAAelhD,SAAA,EACxCk6E,EAAAA,GAAAA,KAACmH,GAAoB,CAAC3xF,KAAM,GAAI1W,MAAO,CAAEk9B,MAAOA,EAAOurE,OAAQA,MAC/DvH,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,UAASlhD,UACvBk6E,EAAAA,GAAAA,KAAC6D,GAAS,CACTjxC,YAAY,UACZ+tC,MAAOxxB,GAAewC,wBAAwB5wE,GAC9C5D,MAAOi/D,EAAYgB,IAAIr6C,GAAK,SAAAhiB,GAAC,OAAIA,EAAEytE,IAAI,UANhCztE,EAAE6yB,GAWd,GACF,EAAC2uC,EAED8jB,SAAW,WACV,OAAOqB,GAAeyB,kBAAkB5mB,EAAKrlD,MAAMqmD,UAAWhB,EAAKrlD,MAAM8lE,WACvEp7B,KAAI,SAAA7mD,GAAC,OACLi/F,EAAAA,GAAAA,KAAC6D,GAAS,CAAYjxC,YAAY,UAAU+tC,MAAOxxB,GAAewC,wBAAwB5wE,GAAI5D,MAAO4D,EAAEytE,MAAvFztE,EAAE6yB,GAA6F,GAElH,EAAC2uC,EAEDj/C,OAAS,WACR,IACC,IAAMkkF,EAAYjlC,EAAK8kC,cAAcj7B,GAAU0K,WACzC5wE,EAAUq8D,EAAK8kC,cAAcj7B,GAAU2K,SACvCyR,EAAQjmB,EAAK8kC,cAAcj7B,GAAUuJ,OACrC2Q,EAAQ/jB,EAAK8jB,WAEfxY,EAAa,KAkBjB,OAjBI25B,EAAUxpG,OAASkI,EAAQlI,OAASwqF,EAAMxqF,OAASsoF,EAAMtoF,OAAS,IACrE6vE,GACCmyB,EAAAA,GAAAA,KAACU,GAAG,CAACC,MAAM,aAAY76E,UACtBq6E,EAAAA,GAAAA,MAAA,OAAAr6E,SAAA,CACG0hF,EAAUxpG,OAAS,GAAIgiG,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAASmH,aAAa3hF,SAAC,yBAA8B,KACzF0hF,EACCthG,EAAQlI,OAAS,GAAIgiG,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAASmH,aAAa3hF,SAAC,uBAA4B,KACrF5f,EACCsiF,EAAMxqF,OAAS,GAAIgiG,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAASmH,aAAa3hF,SAAC,qBAA0B,KACjF0iE,EACClC,EAAMtoF,OAAS,GAAIgiG,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAASmH,aAAa3hF,SAAC,aAAkB,KACzEwgE,SAOJ0Z,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,mBAAkBlhD,SAC/B+nD,GAGJ,CAAE,MAAAsZ,GACD,OAAO6Y,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,iCACvB,CACD,EAACzE,CAAC,CAAD,OAAA5H,EAAAysC,EAAA,CA/D0B,CAAS16D,EAAAA,WCFxBg7D,GAAgB,SAAAlI,GAAAz6B,EAAA2iC,EAAAlI,GAAA,IAAAC,EAAA/5B,EAAAgiC,GAAA,SAAAA,IAAA,IAAAnlC,EAAA76D,EAAA,KAAAggG,GAAA,QAAArsF,EAAAvd,UAAAE,OAAA4X,EAAA,IAAAvZ,MAAAgf,GAAAnB,EAAA,EAAAA,EAAAmB,EAAAnB,IAAAtE,EAAAsE,GAAApc,UAAAoc,GAyC1B,OAzC0BqoD,EAAAk9B,EAAAnjG,KAAA+J,MAAAo5F,EAAA,OAAA9lF,OAAA/D,KAC5B0N,OAAS,WACR,IAGC,IAFA,IAAIkqD,EAAwB,GACtBm6B,EAAcjgB,GAAe7B,aAAatjB,EAAKrlD,MAAMqmD,UAAWhB,EAAKrlD,MAAM8lE,UAAW5W,GAAU2K,SAC7Fj1E,EAAI,EAAGA,EAAI6lG,IAAe7lG,EAClC0rE,EAAOhtE,KAAKsB,EAAIygE,EAAKrlD,MAAM8lE,UAAU7V,OAAOK,QAASwyB,EAAAA,GAAAA,KAACiH,GAAY,CAASzxF,KAAM,IAAT1T,IAAkBk+F,EAAAA,GAAAA,KAACkH,GAAe,CAASlgC,UAAU,YAAYxxD,KAAM,IAA/B1T,IAEjH0rE,EAAOo6B,UAIP,IAFA,IAAMC,EAAkC,IAAlBr6B,EAAOxvE,OAAgB,EAAI,EAC3C8pG,EAA8B,GAC7Bt6B,EAAOxvE,OAAS6pG,GACtBC,EAAatnG,MAAKw/F,EAAAA,GAAAA,KAAA,OAA+Bh5B,UAAU,SAAQlhD,SAAE0nD,EAAO5sE,MAAM,EAAGinG,IAAzDC,EAAa9pG,SACzCwvE,EAASA,EAAO5sE,MAAMinG,GAMvB,OAJsB,IAAlBr6B,EAAOxvE,QACV8pG,EAAatnG,MAAKw/F,EAAAA,GAAAA,KAAA,OAA+Bh5B,UAAU,SAAQlhD,SAAE0nD,GAAzCs6B,EAAa9pG,UAIzCmiG,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,qBAAoBlhD,SAAA,EAClCk6E,EAAAA,GAAAA,KAACU,GAAG,CAACC,MAAM,aAAY76E,UACtBq6E,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,mBAAkBlhD,SAAA,EAChCk6E,EAAAA,GAAAA,KAAC6D,GAAS,CAACjxC,YAAY,WAAW+tC,MAAM,WAAWxjG,OAAO6iG,EAAAA,GAAAA,KAACT,GAAS,CAACpiG,MAAOolE,EAAKrlD,MAAM8lE,UAAU7V,OAAOO,SAAUvsE,KAAMk+F,GAASU,SAAUvqF,KAAM8pF,GAASM,WAC1JI,EAAAA,GAAAA,KAAC6D,GAAS,CAACjxC,YAAY,WAAW+tC,MAAM,SAASxjG,MAAOolE,EAAKrlD,MAAM8lE,UAAU7V,OAAOQ,UACpFqyB,EAAAA,GAAAA,KAAC6D,GAAS,CAACjxC,YAAY,WAAW+tC,MAAM,SAASxjG,MAAOolE,EAAKrlD,MAAM8lE,UAAU7V,OAAOS,eAGtFoyB,EAAAA,GAAAA,KAACU,GAAG,CAACC,MAAM,SAAQ76E,UAClBq6E,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,mBAAkBlhD,SAAA,EAChCk6E,EAAAA,GAAAA,KAAC6D,GAAS,CAACjxC,YAAY,WAAW+tC,MAAM,SAASxjG,MAAOolE,EAAKrlD,MAAM8lE,UAAU7V,OAAOI,UACpFyyB,EAAAA,GAAAA,KAAC6D,GAAS,CAACjxC,YAAY,WAAW+tC,MAAM,SAASxjG,OAAO6iG,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,iBAAgBlhD,SAAEgiF,YAG3F9H,EAAAA,GAAAA,KAACoH,GAAe,CAACpkB,UAAWzgB,EAAKrlD,MAAM8lE,UAAWzf,UAAWhB,EAAKrlD,MAAMqmD,cAG3E,CAAE,MAAA4jB,GACD,OAAO6Y,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,mCACvB,CACD,EAACzE,CAAC,CAAD,OAAA5H,EAAA+sC,EAAA,CAzC2B,CAASh7D,EAAAA,WCNzBq7D,GAAgB,SAAAvI,GAAAz6B,EAAAgjC,EAAAvI,GAAA,IAAAC,EAAA/5B,EAAAqiC,GAAA,SAAAA,IAAA,IAAAxlC,EAAA76D,EAAA,KAAAqgG,GAAA,QAAA1sF,EAAAvd,UAAAE,OAAA4X,EAAA,IAAAvZ,MAAAgf,GAAAnB,EAAA,EAAAA,EAAAmB,EAAAnB,IAAAtE,EAAAsE,GAAApc,UAAAoc,GA6C1B,OA7C0BqoD,EAAAk9B,EAAAnjG,KAAA+J,MAAAo5F,EAAA,OAAA9lF,OAAA/D,KAC5B0N,OAAS,WACR,IACC,OACC68E,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,oBAAmBlhD,SAAA,CAEhCy8C,EAAKrlD,MAAM8lE,UAAU7V,OAAOhoE,QAAU0mE,GAAema,OACpDga,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAAS0H,YAAYliF,UAChCq6E,EAAAA,GAAAA,MAAA,KAAAr6E,SAAA,EAAGq6E,EAAAA,GAAAA,MAAA,KAAAr6E,SAAA,CAAIy8C,EAAKrlD,MAAM8lE,UAAUhmF,KAAK,gBAAc,mEAE9C,KAGHulE,EAAKrlD,MAAM8lE,UAAU7V,OAAOhoE,QAAU0mE,GAAeod,aACpD+W,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAAS0H,YAAYliF,UAChCq6E,EAAAA,GAAAA,MAAA,KAAAr6E,SAAA,EAAGq6E,EAAAA,GAAAA,MAAA,KAAAr6E,SAAA,CAAIy8C,EAAKrlD,MAAM8lE,UAAUhmF,KAAK,sBAAoB,6FAEpD,KAGHulE,EAAKrlD,MAAM8lE,UAAU7V,OAAOhoE,QAAU0mE,GAAeuc,MACpD4X,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAAS0H,YAAYliF,UAChCq6E,EAAAA,GAAAA,MAAA,KAAAr6E,SAAA,EAAGq6E,EAAAA,GAAAA,MAAA,KAAAr6E,SAAA,CAAIy8C,EAAKrlD,MAAM8lE,UAAUhmF,KAAK,eAAa,+DAE7C,KAGHulE,EAAKrlD,MAAM8lE,UAAU7V,OAAOE,SAC3B2yB,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAAS0H,YAAYliF,UAChCq6E,EAAAA,GAAAA,MAAA,KAAAr6E,SAAA,EAAGq6E,EAAAA,GAAAA,MAAA,KAAAr6E,SAAA,CAAIy8C,EAAKrlD,MAAM8lE,UAAUhmF,KAAK,kBAAgB,0EAEhD,KAGHulE,EAAKrlD,MAAM8lE,UAAU7V,OAAOS,OAAS,GACpCoyB,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAAS0H,YAAYliF,UAChCq6E,EAAAA,GAAAA,MAAA,KAAAr6E,SAAA,EAAGq6E,EAAAA,GAAAA,MAAA,KAAAr6E,SAAA,CAAIy8C,EAAKrlD,MAAM8lE,UAAUhmF,KAAK,iBAAe,wCAE/C,OAIP,CAAE,MAAAmqF,GACD,OAAO6Y,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,kCACvB,CACD,EAACzE,CAAC,CAAD,OAAA5H,EAAAotC,EAAA,CA7C2B,CAASr7D,EAAAA,WCbtCu7D,GAAe/K,GAAqB,QAAS,YAAa,CACxD,CAAC,OAAQ,CAAEr9E,EAAG,mBAAoBpjB,IAAK,YCDzCyrG,GAAehL,GAAqB,KAAM,SAAU,CAClD,CACE,OACA,CACEr9E,EAAG,kFACHpjB,IAAK,UAGT,CAAC,OAAQ,CAAEojB,EAAG,0CAA2CpjB,IAAK,UAC9D,CAAC,OAAQ,CAAEojB,EAAG,YAAapjB,IAAK,UAChC,CAAC,OAAQ,CAAEojB,EAAG,aAAcpjB,IAAK,UACjC,CAAC,OAAQ,CAAEojB,EAAG,aAAcpjB,IAAK,YCXnC0rG,GAAejL,GACb,wBACA,yBACA,CACE,CACE,OACA,CACEr9E,EAAG,4NACHi9E,KAAM,eACNrgG,IAAK,QACLmtB,YAAa,QCVrBw+E,GAAelL,GAAqB,cAAe,iBAAkB,CACnE,CACE,OACA,CACEr9E,EAAG,iRACHi9E,KAAM,eACNrgG,IAAK,QACLmtB,YAAa,QCqBNy+E,GAAS,SAAA7I,GAAAz6B,EAAAsjC,EAAA7I,GAAA,IAAAC,EAAA/5B,EAAA2iC,GACrB,SAAAA,EAAYnrF,GAAe,IAADqlD,EAIvB,OAJuB76D,EAAA,KAAA2gG,IACzB9lC,EAAAk9B,EAAAnjG,KAAA,KAAM4gB,IAMPorF,UAAWjwC,EAAAA,EAAAA,aAA2BkK,EAEtCgmC,eAAiB,WAAO,IAADC,EACD,QAArBA,EAAAjmC,EAAK+lC,SAAS36E,eAAO,IAAA66E,GAArBA,EAAuBD,eAAe,CAAEE,SAAU,UACnD,EAAClmC,EAED1nB,QAAU,SAACj5C,GACN2gE,EAAKrlD,MAAMwrF,aACd9mG,EAAE4J,kBACF+2D,EAAKrlD,MAAM29B,QAAQ0nB,EAAKrlD,MAAM8lE,WAEhC,EAACzgB,EAEDomC,aAAe,SAACxrG,GACfolE,EAAKnL,SAAS,CACbwxC,UAAWzrG,GAEb,EAAColE,EAEDsmC,YAAc,WACb,OAAOtmC,EAAKrlD,MAAM8lE,UAAUhmF,KAC1BujB,MAAM,KACN48C,QAAO,SAAA2rC,GAAK,OAAIA,EAAM9qG,OAAS,CAAC,IAChC4pD,KAAI,SAAAkhD,GACJ,MAAI,QAAQtgG,KAAKsgG,GACTA,EAEDA,EAAM,EACd,IACCp6D,KAAK,GACR,EAAC6zB,EAEDj/C,OAAS,WACR,IACC,IAAMylF,EAAQxmC,EAAKrlD,MAAMqmD,UAAY,SAAW,GAC1C51C,EAAU40C,EAAKrlD,MAAM8lE,UAAU7V,OAAOx/C,QAAU,UAAY,GAC5D+6E,EAAanmC,EAAKrlD,MAAMwrF,WAAa,aAAe,GACpDjjF,EAAW88C,EAAKrlD,MAAMuI,SAAW,WAAa,GAC9CmoD,EAAWrL,EAAKrlD,MAAMqmD,WAAchB,EAAKrlD,MAAM8lE,UAAU7V,OAAOS,OAAS,EAAK,SAAW,GACzFg7B,EAAYrmC,EAAKp9D,MAAMyjG,UAAY,aAAe,GAClD5hC,EAAS,4BAAArtD,OAA+BovF,EAAK,KAAApvF,OAAIgU,EAAO,KAAAhU,OAAI+uF,EAAU,KAAA/uF,OAAI8L,EAAQ,KAAA9L,OAAIi0D,EAAM,KAAAj0D,OAAIivF,GAElGtyB,EAAQ,KACZ,GAAI/T,EAAKrlD,MAAMqmD,WAAchB,EAAKrlD,MAAM8lE,UAAU7V,OAAOhoE,QAAU0mE,GAAema,MAAQ,CACzF,IAAMxwE,EAAO+sD,EAAKrlD,MAAM8lE,UAAUxtE,KAAO+sD,EAAKrlD,MAAM8rF,WAAa,EAC3DC,EAAW1mC,EAAKrlD,MAAM8lE,UAAUxtE,KAAO+sD,EAAKrlD,MAAM8rF,WAAa,EACrE1yB,GACC0pB,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,aAAaloE,MAAO,CAAE+6B,MAAM,GAADlgB,OAAKnE,EAAI,MAAMskB,OAAO,GAADngB,OAAKnE,EAAI,OAAOsQ,UAC9Ek6E,EAAAA,GAAAA,KAACmI,GAAsB,CAAC3yF,KAAMyzF,KAGjC,CAEA,IAAI57B,EAAU,KACd,GAAI9K,EAAKrlD,MAAMqmD,WAAahB,EAAKrlD,MAAM8lE,UAAU7V,OAAOE,QAAS,CAChE,IAAM73D,EAAO+sD,EAAKrlD,MAAM8lE,UAAUxtE,KAAO+sD,EAAKrlD,MAAM8rF,WAAa,EAC3DC,EAAW1mC,EAAKrlD,MAAM8lE,UAAUxtE,KAAO+sD,EAAKrlD,MAAM8rF,WAAa,EACrE37B,GACC2yB,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,eAAeloE,MAAO,CAAE+6B,MAAM,GAADlgB,OAAKnE,EAAI,MAAMskB,OAAO,GAADngB,OAAKnE,EAAI,OAAOsQ,UAChFk6E,EAAAA,GAAAA,KAACoI,GAAc,CAAC5yF,KAAMyzF,KAGzB,CAEA,IAAIC,EAAY,KAChB,GAAI3mC,EAAKrlD,MAAMqmD,WAAchB,EAAKrlD,MAAM8lE,UAAU7V,OAAOK,OAAS,EAAI,CACrE,IAAMtnE,EAAUwhF,GAAe7B,aAAatjB,EAAKrlD,MAAMqmD,UAAWhB,EAAKrlD,MAAM8lE,UAAW5W,GAAU2K,SAC5FoyB,EAAW,EAAK5mC,EAAKrlD,MAAM8lE,UAAU7V,OAAOK,OAAStnE,EAC3DgjG,GACClJ,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,aAAaloE,MAAO,CAAEg7B,OAAO,GAADngB,OAAK4oD,EAAKrlD,MAAM8rF,WAAa,EAAC,OAAOljF,UAC/Ek6E,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,mBAAmBloE,MAAO,CAAE+6B,MAAM,GAADlgB,OAAK,IAAMwvF,EAAQ,SAGtE,CAEA,IAAIC,EAAY7mC,EAAKrlD,MAAM8lE,UAAUhnD,MACjCqtE,EAAa9mC,EAAKrlD,MAAM8lE,UAAUhnD,MAChCA,EAAQgpE,GAAMzwF,MAAMguD,EAAKrlD,MAAM8lE,UAAUhnD,OAM/C,OALIA,IACHotE,EAAYpE,GAAMjpG,SAASipG,GAAME,OAAOlpE,IACxCqtE,EAAarE,GAAMjpG,SAASipG,GAAMC,QAAQjpE,MAI1CmkE,EAAAA,GAAAA,MAAA,OACC7xD,IAAKi0B,EAAK+lC,SACVthC,UAAWA,EACXloE,MAAO,CACN+6B,MAAO0oC,EAAKrlD,MAAMqmD,UAAS,GAAA5pD,OAAM4oD,EAAKrlD,MAAM8rF,WAAazmC,EAAKrlD,MAAM8lE,UAAUxtE,KAAI,SAAAmE,OAAU4oD,EAAKrlD,MAAM8rF,WAAU,MACjH3oE,KAAMkiC,EAAKrlD,MAAMqmD,UAAS,GAAA5pD,QAAQ4oD,EAAKrlD,MAAM8lE,UAAU7V,OAAO7tE,SAASqZ,EAAI4pD,EAAKrlD,MAAMosF,cAAcjpE,MAAQkiC,EAAKrlD,MAAM8rF,WAAU,MAAQ,IACzIzoE,IAAKgiC,EAAKrlD,MAAMqmD,UAAS,GAAA5pD,QAAQ4oD,EAAKrlD,MAAM8lE,UAAU7V,OAAO7tE,SAASsZ,EAAI2pD,EAAKrlD,MAAMosF,cAAc/oE,KAAOgiC,EAAKrlD,MAAM8rF,WAAU,MAAQ,IACvI5I,SAAU79B,EAAKrlD,MAAMqmD,UAAS,GAAA5pD,OAAM4oD,EAAKrlD,MAAM8rF,WAAazmC,EAAKrlD,MAAM8lE,UAAUxtE,KAAO,IAAI,SAAAmE,OAAkC,IAAxB4oD,EAAKrlD,MAAM8rF,WAAiB,MAClIO,gBAAgB,2BAAD5vF,OAA6B4oD,EAAKrlD,MAAM8lE,UAAUhnD,MAAK,MAAAriB,OAAKyvF,EAAS,MAErFvuD,QAAS,SAAAj5C,GAAC,OAAI2gE,EAAK1nB,QAAQj5C,EAAE,EAC7B2pE,aAAc,kBAAMhJ,EAAKomC,cAAa,EAAK,EAC3Cn9B,aAAc,kBAAMjJ,EAAKomC,cAAa,EAAM,EAAC7iF,SAAA,EAE7Ck6E,EAAAA,GAAAA,KAAA,OACCh5B,UAAWzE,EAAKrlD,MAAM8lE,UAAU7V,OAAOx/C,QAAU,0BAA4B,kBAC7E7uB,MAAO,CACNyqG,gBAAgB,2BAAD5vF,OAA6B0vF,EAAU,MAAA1vF,OAAK4oD,EAAKrlD,MAAM8lE,UAAUhnD,MAAK,MACpFlW,SAEDy8C,EAAKsmC,gBAENvyB,EACAjJ,EACA67B,EACE3mC,EAAKrlD,MAAMqmD,WAAahB,EAAKrlD,MAAM8lE,UAAU7V,OAAOx/C,SAAUqyE,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,oBAAuB,KACpGzE,EAAKrlD,MAAMqmD,WAAahB,EAAKrlD,MAAM8lE,UAAU7V,OAAOx/C,SAAUqyE,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,oBAAuB,KACpGzE,EAAKrlD,MAAMqmD,WAAahB,EAAKrlD,MAAM8lE,UAAU7V,OAAOx/C,SAAUqyE,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,sBAAyB,OAG5G,CAAE,MAAAmgB,GACD,OAAO6Y,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,yCACvB,CACD,EA1HCzE,EAAKp9D,MAAQ,CACZyjG,WAAW,GACVrmC,CACH,CAAC,OAAA5H,EAAA0tC,EAAA,CANoB,CAAS37D,EAAAA,WCGlB88D,GAAiB,SAAAhK,GAAAz6B,EAAAykC,EAAAhK,GAAA,IAAAC,EAAA/5B,EAAA8jC,GAAA,SAAAA,IAAA,IAAAjnC,EAAA76D,EAAA,KAAA8hG,GAAA,QAAAnuF,EAAAvd,UAAAE,OAAA4X,EAAA,IAAAvZ,MAAAgf,GAAAnB,EAAA,EAAAA,EAAAmB,EAAAnB,IAAAtE,EAAAsE,GAAApc,UAAAoc,GAkR3B,OAlR2BqoD,EAAAk9B,EAAAnjG,KAAA+J,MAAAo5F,EAAA,OAAA9lF,OAAA/D,KAW7BilC,QAAU,SAACj5C,GACVA,EAAE4J,kBACE+2D,EAAKrlD,MAAM29B,SACd0nB,EAAKrlD,MAAM29B,QAAQ0nB,EAAKrlD,MAAM8lE,UAEhC,EAACzgB,EAEDohC,SAAW,SAAC/hG,GACXA,EAAE4J,kBACE+2D,EAAKrlD,MAAMymF,UACdphC,EAAKrlD,MAAMymF,SAASphC,EAAKrlD,MAAM8lE,UAEjC,EAACzgB,EAEDknC,UAAY,SAAC7nG,GACZA,EAAE4J,kBACE+2D,EAAKrlD,MAAMusF,WACdlnC,EAAKrlD,MAAMusF,UAAUlnC,EAAKrlD,MAAM8lE,UAElC,EAACzgB,EAEDmnC,SAAW,SAAC9nG,GACXA,EAAE4J,kBACE+2D,EAAKrlD,MAAMwsF,UACdnnC,EAAKrlD,MAAMwsF,SAASnnC,EAAKrlD,MAAM8lE,UAEjC,EAACzgB,EAEDonC,YAAc,WACb,OACC3J,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,aAAYlhD,SACzBy8C,EAAKqnC,aAAY,IAGrB,EAACrnC,EAEDsnC,kBAAoB,WACnB,IAAMh8B,EAAazR,EAAYa,SAASsF,EAAKrlD,MAAM8lE,UAAU7V,OAAOU,YAAY,SAAA9sE,GAAC,OAAIouE,GAAewC,wBAAwB5wE,EAAE,IAC5H6mD,KAAI,SAAA7mD,GACJ,IAAMgiB,EAAMw/C,EAAKrlD,MAAM8lE,UAAU7V,OAAOU,WAAW1Q,QAAO,SAAAmqC,GAAG,OAAIn4B,GAAewC,wBAAwB21B,KAASn4B,GAAewC,wBAAwB5wE,EAAE,IAC1J,OACCi/F,EAAAA,GAAAA,KAAC6D,GAAS,CAETjxC,YAAY,UACZ+tC,MAAOxxB,GAAewC,wBAAwB5wE,GAC9C5D,MAAOi/D,EAAYgB,IAAIr6C,GAAK,SAAAhiB,GAAC,OAAIA,EAAEytE,IAAI,KAHlCztE,EAAE6yB,GAMV,IAED,OACCusE,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,aAAYlhD,SAAA,EAC1Bk6E,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,OAAMlhD,SACnBy8C,EAAKunC,eAAc,KAEpBvnC,EAAKrlD,MAAM8lE,UAAU7V,OAAOI,OAAS,EAAIhL,EAAKwnC,YAAc,KAC5DxnC,EAAKynC,YACLznC,EAAKrlD,MAAM8lE,UAAU7V,OAAOU,WAAW7vE,OAAS,GAAIgiG,EAAAA,GAAAA,KAAA,SAAS,KAC7DnyB,IAGJ,EAACtL,EAED0nC,qBAAuB,WACtB,OACCjK,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,aAAYlhD,UAC1Bk6E,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,OAAMlhD,SACnBy8C,EAAKunC,eAAc,MAIxB,EAACvnC,EAED2nC,mBAAqB,WACpB,OACC/J,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,WAAUlhD,SAAA,CACvBy8C,EAAKwnC,YACLxnC,EAAKynC,cAGT,EAACznC,EAED4nC,mBAAqB,WACpB,OACCnK,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,aAAYlhD,UAC1Bk6E,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,OAAMlhD,SACnBy8C,EAAKqnC,aAAY,MAItB,EAACrnC,EAEDqnC,YAAc,SAACQ,GACd,IAAMnnB,EAAU/Q,GAAUgR,WAAW3gB,EAAKrlD,MAAM8lE,UAAUpW,WACpD3E,EAAOiK,GAAUiR,QAAQ5gB,EAAKrlD,MAAM8lE,UAAUnW,QAC9CuW,EAAalR,GAAUmR,cAAc9gB,EAAKrlD,MAAM8lE,UAAUlW,cAEhE,MAAM,CACLmW,GAAU+c,EAAAA,GAAAA,KAACkE,GAAG,CAAAp+E,SAAgBm9D,EAAQjmF,MAAnB,WAAiC,KACpDirE,GAAO+3B,EAAAA,GAAAA,KAACkE,GAAG,CAAAp+E,SAAamiD,EAAKjrE,MAAb,QAA2B,KAC3ComF,GAAa4c,EAAAA,GAAAA,KAACkE,GAAG,CAAAp+E,SAAmBs9D,EAAWpmF,MAAzB,cAAuC,MAC7DmjG,EAAAA,GAAAA,MAAC+D,GAAG,CAAAp+E,SAAA,CAAa,SAAOy8C,EAAKrlD,MAAM8lE,UAAUtkB,QAApC,UAAgD/kD,OAAAgrD,EACrDylC,EAAgB7nC,EAAKrlD,MAAM8lE,UAAUhW,OAAOplB,KAAI,SAACtb,EAAGxqC,GAAC,OAAKk+F,EAAAA,GAAAA,KAACkE,GAAG,CAAAp+E,SAAUwmB,GAAJxqC,EAAY,IAAI,IAE1F,EAACygE,EAEDunC,cAAgB,SAACM,GAChB,MAAM,GAANzwF,OAAAgrD,EACKylC,EAAgB7nC,EAAKrlD,MAAM8lE,UAAUhW,OAAOplB,KAAI,SAACtb,EAAGxqC,GAAC,OAAKk+F,EAAAA,GAAAA,KAACkE,GAAG,CAAAp+E,SAAUwmB,GAAJxqC,EAAY,IAAI,IAAI,CAC5FygE,EAAKrlD,MAAM8lE,UAAU7V,OAAOS,OAAS,GAAIoyB,EAAAA,GAAAA,KAACkE,GAAG,CAAAp+E,SAAc,UAAT,UAAwB,KAC1Ey8C,EAAKrlD,MAAM8lE,UAAU7V,OAAOE,SAAU2yB,EAAAA,GAAAA,KAACkE,GAAG,CAAAp+E,SAAe,WAAV,WAA0B,KACzEy8C,EAAKrlD,MAAM8lE,UAAU7V,OAAOhoE,QAAU0mE,GAAeuB,UAAW4yB,EAAAA,GAAAA,KAACkE,GAAG,CAAAp+E,SAAcy8C,EAAKrlD,MAAM8lE,UAAU7V,OAAOhoE,OAArC,SAAoD,MAE/H,EAACo9D,EAEDwnC,UAAY,WACX,OAAIxnC,EAAKrlD,MAAM8lE,UAAUhW,OAAOl0D,SAAS29D,GAAU2U,QAI/C7oB,EAAKrlD,MAAM8lE,UAAU7V,OAAOhoE,QAAU0mE,GAAeuc,KAHjD,MAQP4X,EAAAA,GAAAA,KAAC6D,GAAS,CACTjxC,YAAY,UACZ+tC,MAAM,SACNxjG,MAAOolE,EAAKrlD,MAAM8lE,UAAU7V,OAAOI,QAGtC,EAAChL,EAEDynC,UAAY,WACX,GAAIznC,EAAKrlD,MAAM8lE,UAAUhW,OAAOl0D,SAAS29D,GAAU2U,OAClD,OAAO,KAGR,GAAI7oB,EAAKrlD,MAAM8lE,UAAU7V,OAAOhoE,QAAU0mE,GAAeod,YACxD,OAAO,KAGR,GAAI1mB,EAAKrlD,MAAM8lE,UAAU7V,OAAOhoE,QAAU0mE,GAAeuc,KACxD,OAAO,KAMR,IAHA,IAAMliF,EAAUq8D,EAAKrlD,MAAMqmD,UAAYmkB,GAAe7B,aAAatjB,EAAKrlD,MAAMqmD,UAA6BhB,EAAKrlD,MAAM8lE,UAAW5W,GAAU2K,SAAW,EAChJhhE,EAAO,GACTs0F,EAAS,GACJvoG,EAAI,EAAGA,EAAIoE,IAAWpE,EAC9BuoG,EAAO7pG,KAAKsB,EAAIygE,EAAKrlD,MAAM8lE,UAAU7V,OAAOK,QAASwyB,EAAAA,GAAAA,KAACiH,GAAY,CAASzxF,KAAM,IAAT1T,IAAkBk+F,EAAAA,GAAAA,KAACkH,GAAe,CAAS1xF,KAAM,IAAT1T,IAC5GuoG,EAAOrsG,QAAU,IACpB+X,EAAKvV,MACJw/F,EAAAA,GAAAA,KAAA,OAAAl6E,SAAwBukF,GAAdt0F,EAAK/X,SAEhBqsG,EAAS,IAUX,OAPIA,EAAOrsG,OAAS,IACnB+X,EAAKvV,MACJw/F,EAAAA,GAAAA,KAAA,OAAAl6E,SAAwBukF,GAAdt0F,EAAK/X,SAEhBqsG,EAAS,KAITrK,EAAAA,GAAAA,KAAC6D,GAAS,CACTjxC,YAAY,UACZ+tC,MAAM,SACNxjG,OAAO6iG,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,SAAQlhD,SAAE/P,KAGnC,EAACwsD,EAEDj/C,OAAS,WACR,IACC,IAAMgnF,EAAmC,OAAvB/nC,EAAKrlD,MAAM29B,QAAmB,YAAc,GACxDltB,EAA+B,eAApB40C,EAAKrlD,MAAM7N,MAA0BkzD,EAAKrlD,MAAM8lE,UAAU7V,OAAOx/C,QAAU,UAAY,GAClG48E,EAA8B,eAApBhoC,EAAKrlD,MAAM7N,OAEtBkzD,EAAKrlD,MAAMqmD,WAAahB,EAAKrlD,MAAMqmD,UAAUC,WAAW/c,MAAK,SAAA1lD,GAAC,OAAIA,EAAEosE,OAAOx/C,OAAO,KAAM40C,EAAKrlD,MAAM8lE,UAAU7V,OAAOM,aAAevlB,OAAOqV,WACzIgF,EAAKrlD,MAAM8lE,UAAU7V,OAAOhoE,QAAU0mE,GAAeod,aACrD1mB,EAAKrlD,MAAM8lE,UAAU7V,OAAOhoE,QAAU0mE,GAAeuc,MACtD,SAAW,GACVphB,EAAS,uBAAArtD,OAA0B4oD,EAAKrlD,MAAM7N,KAAI,KAAAsK,OAAI2wF,EAAS,KAAA3wF,OAAIgU,EAAO,KAAAhU,OAAI4wF,GAEhFC,EAAgC,KAChCC,EAAgC,KAChCC,EAA8B,KAClC,OAAQnoC,EAAKrlD,MAAM7N,MAClB,IAAK,OACJo7F,EAAYloC,EAAKonC,cACjB,MACD,IAAK,aACJa,EAAYjoC,EAAKsnC,oBACjB,MACD,IAAK,WACJW,EAAYjoC,EAAK0nC,uBACjBS,EAAUnoC,EAAK2nC,qBACf,MACD,IAAK,SACJM,EAAYjoC,EAAK4nC,qBAInB,IAAIQ,EAAY,KACZpoC,EAAKrlD,MAAMymF,WACdgH,GACC3K,EAAAA,GAAAA,KAAA,UAAQh5B,UAAU,WAAWnsB,QAAS,SAAAj5C,GAAC,OAAI2gE,EAAKohC,SAAS/hG,EAAE,EAACkkB,UAC3Dk6E,EAAAA,GAAAA,KAACiI,GAAS,OAKb,IAAI2C,EAAa,KACbroC,EAAKrlD,MAAMusF,YACdmB,GACC5K,EAAAA,GAAAA,KAAA,UAAQh5B,UAAU,WAAWnsB,QAAS,SAAAj5C,GAAC,OAAI2gE,EAAKknC,UAAU7nG,EAAE,EAACkkB,UAC5Dk6E,EAAAA,GAAAA,KAACkI,GAAM,OAKV,IAAI2C,EAAY,KAShB,OARItoC,EAAKrlD,MAAMwsF,WACdmB,GACC7K,EAAAA,GAAAA,KAAA,UAAQh5B,UAAU,WAAWnsB,QAAS,SAAAj5C,GAAC,OAAI2gE,EAAKmnC,SAAS9nG,EAAE,EAACkkB,UAC3Dk6E,EAAAA,GAAAA,KAACkB,GAAK,QAMRf,EAAAA,GAAAA,MAAA,OAAKn5B,UAAWA,EAAWnsB,QAAS,SAAAj5C,GAAC,OAAI2gE,EAAK1nB,QAAQj5C,EAAE,EAACkkB,SAAA,EACxDk6E,EAAAA,GAAAA,KAACqI,GAAS,CACTrlB,UAAWzgB,EAAKrlD,MAAM8lE,UACtBzf,UAAW,KACXylC,WAAY,GACZM,cAAe,CAAEjpE,KAAM,EAAGE,IAAK,GAC/BmoE,YAAY,EACZjjF,UAAU,EACVo1B,QAAS,SAAA95C,GAAC,OAAIwhE,EAAKrlD,MAAM4tF,aAAevoC,EAAKrlD,MAAM4tF,aAAa/pG,GAAK,IAAI,KAE1Eo/F,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,OAAMlhD,SAAA,EACpBk6E,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAASmH,aAAa3hF,SAAEy8C,EAAKrlD,MAAM8lE,UAAUhmF,OACxDwtG,KAEDC,EACAC,EAEAC,GAAaC,GAAcC,GAC1B1K,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,UAASlhD,SAAA,CACtB6kF,EACAC,EACAC,KAEA,OAIP,CAAE,MAAA1jB,GACD,OAAO6Y,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,oCACvB,CACD,EAACzE,CAAC,CAAD,OAAA5H,EAAA6uC,EAAA,CAlR4B,CAAS98D,EAAAA,WAA1B88D,GACL7/D,aAAe,CACrBt6B,KAAM,OACNk0D,UAAW,KACX1oB,QAAS,KACTiwD,aAAc,KACdnH,SAAU,KACV8F,UAAW,KACXC,SAAU,MCvCZ,IAAAqB,GAAe7N,GAAqB,kBAAmB,oBAAqB,CAC1E,CAAC,OAAQ,CAAEr9E,EAAG,aAAcpjB,IAAK,YCDnCuuG,GAAe9N,GAAqB,aAAc,gBAAiB,CACjE,CAAC,OAAQ,CAAEr9E,EAAG,iBAAkBpjB,IAAK,YCDvCwuG,GAAe/N,GAAqB,mBAAoB,qBAAsB,CAC5E,CAAC,OAAQ,CAAEr9E,EAAG,WAAYpjB,IAAK,YCDjCyuG,GAAehO,GAAqB,eAAgB,kBAAmB,CACrE,CAAC,OAAQ,CAAEr9E,EAAG,iBAAkBpjB,IAAK,YCDvC0uG,GAAejO,GAAqB,gBAAiB,mBAAoB,CACvE,CAAC,OAAQ,CAAEr9E,EAAG,gBAAiBpjB,IAAK,YCDtC2uG,GAAelO,GACb,oBACA,sBACA,CAAC,CAAC,OAAQ,CAAEr9E,EAAG,WAAYpjB,IAAK,YCHlC4uG,GAAenO,GAAqB,eAAgB,kBAAmB,CACrE,CAAC,OAAQ,CAAEr9E,EAAG,gBAAiBpjB,IAAK,YCDtC6uG,GAAepO,GACb,qBACA,uBACA,CAAC,CAAC,OAAQ,CAAEr9E,EAAG,aAAcpjB,IAAK,YCWvB8uG,GAAc,SAAA/L,GAAAz6B,EAAAwmC,EAAA/L,GAAA,IAAAC,EAAA/5B,EAAA6lC,GAAA,SAAAA,IAAA,IAAAhpC,EAAA76D,EAAA,KAAA6jG,GAAA,QAAAlwF,EAAAvd,UAAAE,OAAA4X,EAAA,IAAAvZ,MAAAgf,GAAAnB,EAAA,EAAAA,EAAAmB,EAAAnB,IAAAtE,EAAAsE,GAAApc,UAAAoc,GAuExB,OAvEwBqoD,EAAAk9B,EAAAnjG,KAAA+J,MAAAo5F,EAAA,OAAA9lF,OAAA/D,KAC1B41F,aAAe,SAAChtB,GACf,MAAM,OAAN7kE,OAAc6kE,EAAG,KAAA7kE,OAAI4oD,EAAKkpC,QAAQjtB,GAAO,UAAY,WACtD,EAACjc,EAEDkpC,QAAU,SAACjtB,GACV,IAAMmM,EAAOpoB,EAAKrlD,MAAMwuF,MAAMltB,GAC9B,OAAQmM,IAASziC,OAAOoV,WAAeqtB,GAAQpoB,EAAKrlD,MAAM8lE,UAAU7V,OAAOO,QAC5E,EAACnL,EAEDopC,aAAe,SAACxuG,GACf,OAAIA,IAAU+qD,OAAOoV,UACb,IAGDngE,CACR,EAAColE,EAED1nB,QAAU,SAACj5C,EAAe48E,EAAamM,GACtC/oF,EAAE4J,kBACF+2D,EAAKrlD,MAAM0uF,OAAOptB,EAAKmM,EACxB,EAACpoB,EAEDspC,cAAgB,SAACjqG,GAChBA,EAAE4J,iBACH,EAAC+2D,EAEDj/C,OAAS,WACR,IACC,OACC68E,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,kBAAiBlhD,SAAA,EAC/Bq6E,EAAAA,GAAAA,MAAA,OAAKn5B,UAAWzE,EAAKipC,aAAa,MAAO3wD,QAAS,SAAAj5C,GAAC,OAAI2gE,EAAK1nB,QAAQj5C,EAAG,KAAM2gE,EAAKrlD,MAAMwuF,MAAMvQ,GAAG,EAAE0Q,cAAetpC,EAAKspC,cAAc/lF,SAAA,EACpIk6E,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,QAAOlhD,UAACk6E,EAAAA,GAAAA,KAAC+K,GAAiB,CAACv1F,KAAM,QAChDwqF,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,OAAMlhD,UAACk6E,EAAAA,GAAAA,KAACT,GAAS,CAACp+F,KAAMk+F,GAASU,SAAU5iG,MAAOolE,EAAKopC,aAAappC,EAAKrlD,MAAMwuF,MAAMvQ,YAErGgF,EAAAA,GAAAA,MAAA,OAAKn5B,UAAWzE,EAAKipC,aAAa,KAAM3wD,QAAS,SAAAj5C,GAAC,OAAI2gE,EAAK1nB,QAAQj5C,EAAG,IAAK2gE,EAAKrlD,MAAMwuF,MAAM5pG,EAAE,EAAE+pG,cAAetpC,EAAKspC,cAAc/lF,SAAA,EACjIk6E,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,QAAOlhD,UAACk6E,EAAAA,GAAAA,KAACgL,GAAa,CAACx1F,KAAM,QAC5CwqF,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,OAAMlhD,UAACk6E,EAAAA,GAAAA,KAACT,GAAS,CAACp+F,KAAMk+F,GAASU,SAAU5iG,MAAOolE,EAAKopC,aAAappC,EAAKrlD,MAAMwuF,MAAM5pG,WAErGq+F,EAAAA,GAAAA,MAAA,OAAKn5B,UAAWzE,EAAKipC,aAAa,MAAO3wD,QAAS,SAAAj5C,GAAC,OAAI2gE,EAAK1nB,QAAQj5C,EAAG,KAAM2gE,EAAKrlD,MAAMwuF,MAAM5uE,GAAG,EAAE+uE,cAAetpC,EAAKspC,cAAc/lF,SAAA,EACpIk6E,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,QAAOlhD,UAACk6E,EAAAA,GAAAA,KAACiL,GAAkB,CAACz1F,KAAM,QACjDwqF,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,OAAMlhD,UAACk6E,EAAAA,GAAAA,KAACT,GAAS,CAACp+F,KAAMk+F,GAASU,SAAU5iG,MAAOolE,EAAKopC,aAAappC,EAAKrlD,MAAMwuF,MAAM5uE,YAErGqjE,EAAAA,GAAAA,MAAA,OAAKn5B,UAAWzE,EAAKipC,aAAa,KAAM3wD,QAAS,SAAAj5C,GAAC,OAAI2gE,EAAK1nB,QAAQj5C,EAAG,IAAK2gE,EAAKrlD,MAAMwuF,MAAMtoE,EAAE,EAAEyoE,cAAetpC,EAAKspC,cAAc/lF,SAAA,EACjIk6E,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,QAAOlhD,UAACk6E,EAAAA,GAAAA,KAACkL,GAAe,CAAC11F,KAAM,QAC9CwqF,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,OAAMlhD,UAACk6E,EAAAA,GAAAA,KAACT,GAAS,CAACp+F,KAAMk+F,GAASU,SAAU5iG,MAAOolE,EAAKopC,aAAappC,EAAKrlD,MAAMwuF,MAAMtoE,WAErG48D,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,SAAQlhD,UACtBk6E,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,WAAUlhD,UAACk6E,EAAAA,GAAAA,KAACT,GAAS,CAACp+F,KAAMk+F,GAASU,SAAU5iG,MAAOolE,EAAKrlD,MAAM8lE,UAAU7V,OAAOO,SAAUl4D,KAAM8pF,GAASM,aAE3HO,EAAAA,GAAAA,MAAA,OAAKn5B,UAAWzE,EAAKipC,aAAa,KAAM3wD,QAAS,SAAAj5C,GAAC,OAAI2gE,EAAK1nB,QAAQj5C,EAAG,IAAK2gE,EAAKrlD,MAAMwuF,MAAM9pG,EAAE,EAAEiqG,cAAetpC,EAAKspC,cAAc/lF,SAAA,EACjIk6E,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,QAAOlhD,UAACk6E,EAAAA,GAAAA,KAACmL,GAAgB,CAAC31F,KAAM,QAC/CwqF,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,OAAMlhD,UAACk6E,EAAAA,GAAAA,KAACT,GAAS,CAACp+F,KAAMk+F,GAASU,SAAU5iG,MAAOolE,EAAKopC,aAAappC,EAAKrlD,MAAMwuF,MAAM9pG,WAErGu+F,EAAAA,GAAAA,MAAA,OAAKn5B,UAAWzE,EAAKipC,aAAa,MAAO3wD,QAAS,SAAAj5C,GAAC,OAAI2gE,EAAK1nB,QAAQj5C,EAAG,KAAM2gE,EAAKrlD,MAAMwuF,MAAMxQ,GAAG,EAAE2Q,cAAetpC,EAAKspC,cAAc/lF,SAAA,EACpIk6E,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,QAAOlhD,UAACk6E,EAAAA,GAAAA,KAACoL,GAAmB,CAAC51F,KAAM,QAClDwqF,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,OAAMlhD,UAACk6E,EAAAA,GAAAA,KAACT,GAAS,CAACp+F,KAAMk+F,GAASU,SAAU5iG,MAAOolE,EAAKopC,aAAappC,EAAKrlD,MAAMwuF,MAAMxQ,YAErGiF,EAAAA,GAAAA,MAAA,OAAKn5B,UAAWzE,EAAKipC,aAAa,KAAM3wD,QAAS,SAAAj5C,GAAC,OAAI2gE,EAAK1nB,QAAQj5C,EAAG,IAAK2gE,EAAKrlD,MAAMwuF,MAAM1pG,EAAE,EAAE6pG,cAAetpC,EAAKspC,cAAc/lF,SAAA,EACjIk6E,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,QAAOlhD,UAACk6E,EAAAA,GAAAA,KAACqL,GAAe,CAAC71F,KAAM,QAC9CwqF,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,OAAMlhD,UAACk6E,EAAAA,GAAAA,KAACT,GAAS,CAACp+F,KAAMk+F,GAASU,SAAU5iG,MAAOolE,EAAKopC,aAAappC,EAAKrlD,MAAMwuF,MAAM1pG,WAErGm+F,EAAAA,GAAAA,MAAA,OAAKn5B,UAAWzE,EAAKipC,aAAa,MAAO3wD,QAAS,SAAAj5C,GAAC,OAAI2gE,EAAK1nB,QAAQj5C,EAAG,KAAM2gE,EAAKrlD,MAAMwuF,MAAMtuE,GAAG,EAAEyuE,cAAetpC,EAAKspC,cAAc/lF,SAAA,EACpIk6E,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,QAAOlhD,UAACk6E,EAAAA,GAAAA,KAACsL,GAAoB,CAAC91F,KAAM,QACnDwqF,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,OAAMlhD,UAACk6E,EAAAA,GAAAA,KAACT,GAAS,CAACp+F,KAAMk+F,GAASU,SAAU5iG,MAAOolE,EAAKopC,aAAappC,EAAKrlD,MAAMwuF,MAAMtuE,aAIxG,CAAE,MAAA+pD,GACD,OAAO6Y,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,gCACvB,CACD,EAACzE,CAAC,CAAD,OAAA5H,EAAA4wC,EAAA,CAvEyB,CAAS7+D,EAAAA,WCHvBo/D,GAAS,SAAAtM,GAAAz6B,EAAA+mC,EAAAtM,GAAA,IAAAC,EAAA/5B,EAAAomC,GAAA,SAAAA,IAAA,IAAAvpC,EAAA76D,EAAA,KAAAokG,GAAA,QAAAzwF,EAAAvd,UAAAE,OAAA4X,EAAA,IAAAvZ,MAAAgf,GAAAnB,EAAA,EAAAA,EAAAmB,EAAAnB,IAAAtE,EAAAsE,GAAApc,UAAAoc,GAiBnB,OAjBmBqoD,EAAAk9B,EAAAnjG,KAAA+J,MAAAo5F,EAAA,OAAA9lF,OAAA/D,KACrB0N,OAAS,WACR,IACC,OACC08E,EAAAA,GAAAA,KAAA,OACCh5B,UAAU,2BACVloE,MAAO,CACN+6B,MAAM,GAADlgB,OAAK4oD,EAAKrlD,MAAM8rF,YAAczmC,EAAKrlD,MAAM8lE,UAAUxtE,KAAO,GAAE,MACjE6qB,KAAK,GAAD1mB,QAAO4oD,EAAKrlD,MAAM8lE,UAAU7V,OAAO7tE,SAASqZ,EAAI4pD,EAAKrlD,MAAMosF,cAAcjpE,KAAO,GAAKkiC,EAAKrlD,MAAM8rF,WAAU,MAC9GzoE,IAAI,GAAD5mB,QAAO4oD,EAAKrlD,MAAM8lE,UAAU7V,OAAO7tE,SAASsZ,EAAI2pD,EAAKrlD,MAAMosF,cAAc/oE,IAAM,GAAKgiC,EAAKrlD,MAAM8rF,WAAU,QAKhH,CAAE,MAAA7hB,GACD,OAAO6Y,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,yCACvB,CACD,EAACzE,CAAC,CAAD,OAAA5H,EAAAmxC,EAAA,CAjBoB,CAASp/D,EAAAA,WCGlBq/D,GAAK,SAAAvM,GAAAz6B,EAAAgnC,EAAAvM,GAAA,IAAAC,EAAA/5B,EAAAqmC,GAAA,SAAAA,IAAA,IAAAxpC,EAAA76D,EAAA,KAAAqkG,GAAA,QAAA1wF,EAAAvd,UAAAE,OAAA4X,EAAA,IAAAvZ,MAAAgf,GAAAnB,EAAA,EAAAA,EAAAmB,EAAAnB,IAAAtE,EAAAsE,GAAApc,UAAAoc,GA8Bf,OA9BeqoD,EAAAk9B,EAAAnjG,KAAA+J,MAAAo5F,EAAA,OAAA9lF,OAAA/D,KACjBilC,QAAU,SAACj5C,GACN2gE,EAAKrlD,MAAMwrF,aACd9mG,EAAE4J,kBACF+2D,EAAKrlD,MAAM29B,QAAQ0nB,EAAKrlD,MAAM6kD,QAEhC,EAACQ,EAEDj/C,OAAS,WACR,IACC,IAAMniB,EAAOohE,EAAKrlD,MAAM6kD,OAAO5gE,KAAKsf,cAC9BioF,EAAanmC,EAAKrlD,MAAMwrF,WAAa,aAAe,GACpDjjF,EAAW88C,EAAKrlD,MAAMuI,SAAW,WAAa,GAC9CuhD,EAAS,uBAAArtD,OAA0BxY,EAAI,KAAAwY,OAAI+uF,EAAU,KAAA/uF,OAAI8L,GAE/D,OACCu6E,EAAAA,GAAAA,KAAA,OAECh5B,UAAWA,EACXloE,MAAO,CACN+6B,MAAM,GAADlgB,OAAK4oD,EAAKrlD,MAAM8rF,WAAU,MAC/B3oE,KAAK,GAAD1mB,QAAO4oD,EAAKrlD,MAAM6kD,OAAOppD,EAAI4pD,EAAKrlD,MAAMosF,cAAcjpE,MAAQkiC,EAAKrlD,MAAM8rF,WAAU,MACvFzoE,IAAI,GAAD5mB,QAAO4oD,EAAKrlD,MAAM6kD,OAAOnpD,EAAI2pD,EAAKrlD,MAAMosF,cAAc/oE,KAAOgiC,EAAKrlD,MAAM8rF,WAAU,OAEtFnuD,QAAS,SAAAj5C,GAAC,OAAI2gE,EAAK1nB,QAAQj5C,EAAE,GAAC,UAAA+X,OAPf4oD,EAAKrlD,MAAM6kD,OAAOppD,EAAC,KAAAgB,OAAI4oD,EAAKrlD,MAAM6kD,OAAOnpD,GAU3D,CAAE,MAAAuuE,GACD,OAAO6Y,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,oCACvB,CACD,EAACzE,CAAC,CAAD,OAAA5H,EAAAoxC,EAAA,CA9BgB,CAASr/D,EAAAA,WCHds/D,GAAG,SAAAxM,GAAAz6B,EAAAinC,EAAAxM,GAAA,IAAAC,EAAA/5B,EAAAsmC,GAAA,SAAAA,IAAA,IAAAzpC,EAAA76D,EAAA,KAAAskG,GAAA,QAAA3wF,EAAAvd,UAAAE,OAAA4X,EAAA,IAAAvZ,MAAAgf,GAAAnB,EAAA,EAAAA,EAAAmB,EAAAnB,IAAAtE,EAAAsE,GAAApc,UAAAoc,GAiBb,OAjBaqoD,EAAAk9B,EAAAnjG,KAAA+J,MAAAo5F,EAAA,OAAA9lF,OAAA/D,KACf0N,OAAS,WACR,IACC,OACC08E,EAAAA,GAAAA,KAAA,OAECh5B,UAAU,oBACVloE,MAAO,CACN+6B,MAAM,GAADlgB,OAAK4oD,EAAKrlD,MAAM8rF,WAAU,MAC/B3oE,KAAK,GAAD1mB,QAAO4oD,EAAKrlD,MAAM6kD,OAAOppD,EAAI4pD,EAAKrlD,MAAMosF,cAAcjpE,MAAQkiC,EAAKrlD,MAAM8rF,WAAU,MACvFzoE,IAAI,GAAD5mB,QAAO4oD,EAAKrlD,MAAM6kD,OAAOnpD,EAAI2pD,EAAKrlD,MAAMosF,cAAc/oE,KAAOgiC,EAAKrlD,MAAM8rF,WAAU,QACpF,UAAArvF,OANa4oD,EAAKrlD,MAAM6kD,OAAOppD,EAAC,KAAAgB,OAAI4oD,EAAKrlD,MAAM6kD,OAAOnpD,GAS3D,CAAE,MAAAuuE,GACD,OAAO6Y,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,kCACvB,CACD,EAACzE,CAAC,CAAD,OAAA5H,EAAAqxC,EAAA,CAjBc,CAASt/D,EAAAA,WCQZu/D,GAAS,SAAAzM,GAAAz6B,EAAAknC,EAAAzM,GAAA,IAAAC,EAAA/5B,EAAAumC,GACrB,SAAAA,EAAY/uF,GAAe,IAADqlD,EAIvB,OAJuB76D,EAAA,KAAAukG,IACzB1pC,EAAAk9B,EAAAnjG,KAAA,KAAM4gB,IAMP29B,QAAU,SAACj5C,GACN2gE,EAAKrlD,MAAMwrF,aACd9mG,EAAE4J,kBACF+2D,EAAKrlD,MAAM29B,QAAQ0nB,EAAKrlD,MAAMumD,MAEhC,EAAClB,EAEDomC,aAAe,SAACxrG,GACfolE,EAAKnL,SAAS,CACbwxC,UAAWzrG,GAEb,EAAColE,EAEDj/C,OAAS,WACR,IACC,IAAMylF,EAAQxmC,EAAKrlD,MAAMqmD,UAAY,SAAW,GAC1C99C,EAAW88C,EAAKrlD,MAAMuI,SAAW,WAAa,GAC9CijF,EAAanmC,EAAKrlD,MAAMwrF,WAAa,aAAe,GACpD1hC,EAAS,4BAAArtD,OAA+BovF,EAAK,KAAApvF,OAAI8L,EAAQ,KAAA9L,OAAI+uF,GAEnE,OACC1I,EAAAA,GAAAA,KAAA,OACCh5B,UAAWA,EACXloE,MAAO,CACN+6B,MAAM,GAADlgB,OAAK4oD,EAAKrlD,MAAM8rF,WAAU,MAC/B3oE,KAAMkiC,EAAKrlD,MAAMqmD,UAAS,GAAA5pD,QAAQ4oD,EAAKrlD,MAAMumD,KAAKnkE,SAASqZ,EAAI4pD,EAAKrlD,MAAMosF,cAAcjpE,MAAQkiC,EAAKrlD,MAAM8rF,WAAU,MAAQ,IAC7HzoE,IAAKgiC,EAAKrlD,MAAMqmD,UAAS,GAAA5pD,QAAQ4oD,EAAKrlD,MAAMumD,KAAKnkE,SAASsZ,EAAI2pD,EAAKrlD,MAAMosF,cAAc/oE,KAAOgiC,EAAKrlD,MAAM8rF,WAAU,MAAQ,KAE5H/0B,MAAM,WACNp5B,QAAS,SAAAj5C,GAAC,OAAI2gE,EAAK1nB,QAAQj5C,EAAE,EAC7B2pE,aAAc,kBAAMhJ,EAAKomC,cAAa,EAAK,EAC3Cn9B,aAAc,kBAAMjJ,EAAKomC,cAAa,EAAM,EAAC7iF,UAE7Ck6E,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,qBAGlB,CAAE,MAAAmgB,GACD,OAAO6Y,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,yCACvB,CACD,EA5CCzE,EAAKp9D,MAAQ,CACZyjG,WAAW,GACVrmC,CACH,CAAC,OAAA5H,EAAAsxC,EAAA,CANoB,CAASv/D,EAAAA,WCPlBw/D,GAAO,SAAA1M,GAAAz6B,EAAAmnC,EAAA1M,GAAA,IAAAC,EAAA/5B,EAAAwmC,GAAA,SAAAA,IAAA,IAAA3pC,EAAA76D,EAAA,KAAAwkG,GAAA,QAAA7wF,EAAAvd,UAAAE,OAAA4X,EAAA,IAAAvZ,MAAAgf,GAAAnB,EAAA,EAAAA,EAAAmB,EAAAnB,IAAAtE,EAAAsE,GAAApc,UAAAoc,GAiBjB,OAjBiBqoD,EAAAk9B,EAAAnjG,KAAA+J,MAAAo5F,EAAA,OAAA9lF,OAAA/D,KACnB0N,OAAS,WACR,IACC,OACC08E,EAAAA,GAAAA,KAAA,OACCh5B,UAAU,wBACVloE,MAAO,CACN+6B,MAAM,GAADlgB,OAAK4oD,EAAKrlD,MAAM8rF,YAAczmC,EAAKrlD,MAAM1H,KAAQ,EAAI+sD,EAAKrlD,MAAM+vE,QAAQ,MAC7E5sD,KAAK,GAAD1mB,QAAO4oD,EAAKrlD,MAAMvE,EAAI4pD,EAAKrlD,MAAMosF,cAAcjpE,KAAOkiC,EAAKrlD,MAAM+vE,QAAU1qB,EAAKrlD,MAAM8rF,WAAU,MACpGzoE,IAAI,GAAD5mB,QAAO4oD,EAAKrlD,MAAMtE,EAAI2pD,EAAKrlD,MAAMosF,cAAc/oE,IAAMgiC,EAAKrlD,MAAM+vE,QAAU1qB,EAAKrlD,MAAM8rF,WAAU,QAKtG,CAAE,MAAA7hB,GACD,OAAO6Y,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,sCACvB,CACD,EAACzE,CAAC,CAAD,OAAA5H,EAAAuxC,EAAA,CAjBkB,CAASx/D,EAAAA,WCFhBy/D,GAAU,SAAA3M,GAAAz6B,EAAAonC,EAAA3M,GAAA,IAAAC,EAAA/5B,EAAAymC,GAAA,SAAAA,IAAA,IAAA5pC,EAAA76D,EAAA,KAAAykG,GAAA,QAAA9wF,EAAAvd,UAAAE,OAAA4X,EAAA,IAAAvZ,MAAAgf,GAAAnB,EAAA,EAAAA,EAAAmB,EAAAnB,IAAAtE,EAAAsE,GAAApc,UAAAoc,GAiBpB,OAjBoBqoD,EAAAk9B,EAAAnjG,KAAA+J,MAAAo5F,EAAA,OAAA9lF,OAAA/D,KACtB0N,OAAS,WACR,IACC,OACC08E,EAAAA,GAAAA,KAAA,OACCh5B,UAAU,4BACVloE,MAAO,CACN+6B,MAAM,GAADlgB,OAAK4oD,EAAKrlD,MAAM8rF,WAAazmC,EAAKrlD,MAAM1H,KAAI,MACjD6qB,KAAK,GAAD1mB,QAAO4oD,EAAKrlD,MAAM5d,SAASqZ,EAAI4pD,EAAKrlD,MAAMosF,cAAcjpE,MAAQkiC,EAAKrlD,MAAM8rF,WAAU,MACzFzoE,IAAI,GAAD5mB,QAAO4oD,EAAKrlD,MAAM5d,SAASsZ,EAAI2pD,EAAKrlD,MAAMosF,cAAc/oE,KAAOgiC,EAAKrlD,MAAM8rF,WAAU,QAK3F,CAAE,MAAA7hB,GACD,OAAO6Y,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,0CACvB,CACD,EAACzE,CAAC,CAAD,OAAA5H,EAAAwxC,EAAA,CAjBqB,CAASz/D,EAAAA,WCEnB0/D,GAAI,SAAA5M,GAAAz6B,EAAAqnC,EAAA5M,GAAA,IAAAC,EAAA/5B,EAAA0mC,GAAA,SAAAA,IAAA,IAAA7pC,EAAA76D,EAAA,KAAA0kG,GAAA,QAAA/wF,EAAAvd,UAAAE,OAAA4X,EAAA,IAAAvZ,MAAAgf,GAAAnB,EAAA,EAAAA,EAAAmB,EAAAnB,IAAAtE,EAAAsE,GAAApc,UAAAoc,GA6Bd,OA7BcqoD,EAAAk9B,EAAAnjG,KAAA+J,MAAAo5F,EAAA,OAAA9lF,OAAA/D,KAChBilC,QAAU,SAACj5C,GACN2gE,EAAKrlD,MAAMwrF,aACd9mG,EAAE4J,kBACF+2D,EAAKrlD,MAAM29B,QAAQ0nB,EAAKrlD,MAAMujD,MAEhC,EAAC8B,EAEDj/C,OAAS,WACR,IACC,IAAMolF,EAAanmC,EAAKrlD,MAAMwrF,WAAa,aAAe,GACpDjjF,EAAW88C,EAAKrlD,MAAMuI,SAAW,WAAa,GAC9CuhD,EAAS,sBAAArtD,OAAyB+uF,EAAU,KAAA/uF,OAAI8L,GAEtD,OACCu6E,EAAAA,GAAAA,KAAA,OAECh5B,UAAWA,EACXloE,MAAO,CACN+6B,MAAM,GAADlgB,OAAK4oD,EAAKrlD,MAAM8rF,WAAU,MAC/B3oE,KAAK,GAAD1mB,QAAO4oD,EAAKrlD,MAAMujD,KAAK9nD,EAAI4pD,EAAKrlD,MAAMosF,cAAcjpE,MAAQkiC,EAAKrlD,MAAM8rF,WAAU,MACrFzoE,IAAI,GAAD5mB,QAAO4oD,EAAKrlD,MAAMujD,KAAK7nD,EAAI2pD,EAAKrlD,MAAMosF,cAAc/oE,KAAOgiC,EAAKrlD,MAAM8rF,WAAU,OAEpFnuD,QAAS,SAAAj5C,GAAC,OAAI2gE,EAAK1nB,QAAQj5C,EAAE,GAAC,UAAA+X,OAPf4oD,EAAKrlD,MAAMujD,KAAK9nD,EAAC,KAAAgB,OAAI4oD,EAAKrlD,MAAMujD,KAAK7nD,GAUvD,CAAE,MAAAuuE,GACD,OAAO6Y,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,mCACvB,CACD,EAACzE,CAAC,CAAD,OAAA5H,EAAAyxC,EAAA,CA7Be,CAAS1/D,EAAAA,WC4Bb2/D,GAAiB,SAAA7M,GAAAz6B,EAAAsnC,EAAA7M,GAAA,IAAAC,EAAA/5B,EAAA2mC,GAAA,SAAAA,IAAA,IAAA9pC,EAAA76D,EAAA,KAAA2kG,GAAA,QAAAhxF,EAAAvd,UAAAE,OAAA4X,EAAA,IAAAvZ,MAAAgf,GAAAnB,EAAA,EAAAA,EAAAmB,EAAAnB,IAAAtE,EAAAsE,GAAApc,UAAAoc,GAuP3B,OAvP2BqoD,EAAAk9B,EAAAnjG,KAAA+J,MAAAo5F,EAAA,OAAA9lF,OAAA/D,KAE7B02F,qBAAsBj0C,EAAAA,EAAAA,aAAsBkK,EAC5CgqC,sBAAuBl0C,EAAAA,EAAAA,aAAsBkK,EAE7CiqC,kBAAoB,SAACxpB,GAAuC,IAADypB,EAAAC,EAC1D,GAAkB,aAAd1pB,EAA0B,CAE7B,IAAMr1D,EAAU40C,EAAKrlD,MAAMqmD,UAAUC,WAAW1B,MAAK,SAAA/gE,GAAC,OAAIA,EAAEosE,OAAOx/C,OAAO,IACtEA,GAAY40C,EAAKrlD,MAAMyvF,qBAAqB3uG,OAAS,GAAOukE,EAAKrlD,MAAMyvF,qBAAqB,KAAOh/E,EAAQiG,KAC9GovD,EAAY,UAEd,CAEA,OAAQA,GACP,IAAK,UAC4B,QAAhCypB,EAAAlqC,EAAK+pC,oBAAoB3+E,eAAO,IAAA8+E,GAAhCA,EAAkClE,iBAClC,MACD,IAAK,WAC6B,QAAjCmE,EAAAnqC,EAAKgqC,qBAAqB5+E,eAAO,IAAA++E,GAAjCA,EAAmCnE,iBAGtC,EAAChmC,EAEDqqC,UAAY,WACX,IAAI1iB,EAAS,KAEPlH,EAAYzgB,EAAKrlD,MAAMqmD,UAAUC,WAAW1B,MAAK,SAAA/gE,GAAC,OAAIA,EAAEosE,OAAOx/C,OAAO,IAC5E,GAAIq1D,GACCA,EAAU7V,OAAOY,iBAAmBiV,EAAU7V,OAAOY,eAAekR,KAAM,CAC7E,IAAMjtC,EAASgxC,EAAU7V,OAAOY,eAAe/7B,OAEzC1V,EAAQutD,GAAY0G,eAAev+C,EAAQgxC,GAC3Cn4D,EAAQmnB,EAAOkjC,WAAWpT,MAAK,SAAAtuD,GAAC,MAAa,WAATA,EAAEogB,EAAe,IAC3D,GAAI/I,GACH,GAAIyR,EAAQ,EAAG,CACd,IAAM24D,EAAcpqE,EACpB,GAAIoqE,EAAY93F,MAAO,CACtB,IAAM6vF,EAAiBiI,EAAY93F,MAC/B6vF,EAAchvF,OAAS,IAC1BksF,EAAS,CACRvxE,EAAGq0E,EAAc,GAAGr0E,EACpBC,EAAGo0E,EAAc,GAAGp0E,EACpBpD,KAAM,EACNy3E,OAAQ3wD,GAEX,CACD,OAEIA,EAAQ,IACX4tD,EAAS,CACRvxE,EAAGqqE,EAAU7V,OAAO7tE,SAASqZ,EAC7BC,EAAGoqE,EAAU7V,OAAO7tE,SAASsZ,EAC7BpD,KAAMwtE,EAAUxtE,KAChBy3E,OAAQ3wD,GAIZ,CAGD,OAAO4tD,CACR,EAAC3nB,EAEDj/C,OAAS,WACR,IAEC,IAAM09C,EAAOya,GAAkB3a,cAAcyB,EAAKrlD,MAAMqmD,UAAU8kB,YAClErnB,EAAK3gC,MAAQ,EACb2gC,EAAKzgC,KAAO,EACZygC,EAAKC,OAAS,EACdD,EAAKE,QAAU,EAEf,IAAIsC,EAAajB,EAAKrlD,MAAMqmD,UAAUC,WAAWrG,QAAO,SAAA6lB,GAAS,OAAIA,EAAU7V,OAAOhoE,QAAU0mE,GAAeuc,IAAI,IAC7Gz6D,EAAU61C,EAAW1B,MAAK,SAAA/gE,GAAC,OAAIA,EAAEosE,OAAOx/C,OAAO,IACjDA,IACH61C,EAAaA,EAAWrG,QAAO,SAAAp8D,GAAC,OAAKA,IAAM4sB,GAAa5sB,EAAEuiE,UAAY31C,EAAQ21C,SAAa31C,EAAQw/C,OAAOQ,QAAU5sE,EAAEosE,OAAOS,MAAO,KAGrI,IAAMiR,EAAQziB,EAAYa,SAASwe,GAAkBM,iBAAiBxZ,EAAKrlD,MAAMqmD,UAAU8kB,WAAY9lB,EAAKrlD,MAAMqmD,UAAU8kB,aAAa,SAAAxmB,GAAE,SAAAloD,OAAOkoD,EAAGlpD,EAAC,KAAAgB,OAAIkoD,EAAGjpD,EAAC,IAC5JyjD,MAAK,SAACv9C,EAAGC,GACT,IAAIrY,EAAiBoY,EAAElG,EAAImG,EAAEnG,EAI7B,OAHe,IAAXlS,IACHA,EAASoY,EAAEnG,EAAIoG,EAAEpG,GAEXjS,CACR,IACCkhD,KAAI,SAAA6Y,GACJ,OACCu/B,EAAAA,GAAAA,KAACoM,GAAI,CAEJ3rC,KAAMA,EACNuoC,WAAYzmC,EAAKrlD,MAAM8rF,WACvBM,cAAetoC,EACf0nC,aAAcnmC,EAAKrlD,MAAM2vF,kBAAkB/qC,MAAK,SAAA9/D,GAAC,OAAKA,EAAE2W,IAAM8nD,EAAK9nD,GAAO3W,EAAE4W,IAAM6nD,EAAK7nD,CAAE,IACzF6M,WAAY88C,EAAKrlD,MAAM4vF,gBAAgBhrC,MAAK,SAAA9/D,GAAC,OAAKA,EAAE2W,IAAM8nD,EAAK9nD,GAAO3W,EAAE4W,IAAM6nD,EAAK7nD,CAAE,IACrFiiC,QAAS0nB,EAAKrlD,MAAM6vF,eAAc,QAAApzF,OANrB8mD,EAAK9nD,EAAC,KAAAgB,OAAI8mD,EAAK7nD,GAS/B,IAEKygD,EAAQ+C,EAAYa,SAASsF,EAAKrlD,MAAMqmD,UAAU8kB,YAAY,SAAAxmB,GAAE,SAAAloD,OAAOkoD,EAAGlpD,EAAC,KAAAgB,OAAIkoD,EAAGjpD,EAAC,IACvFyjD,MAAK,SAACv9C,EAAGC,GACT,IAAIrY,EAASoY,EAAElG,EAAImG,EAAEnG,EAIrB,OAHe,IAAXlS,IACHA,EAASoY,EAAEnG,EAAIoG,EAAEpG,GAEXjS,CACR,IACCkhD,KAAI,SAAAia,GACJ,OACCm+B,EAAAA,GAAAA,KAAC+L,GAAK,CAELhqC,OAAQF,EACRmnC,WAAYzmC,EAAKrlD,MAAM8rF,WACvBM,cAAetoC,EACf0nC,aAAcnmC,EAAKrlD,MAAM2vF,kBAAkB/qC,MAAK,SAAA9/D,GAAC,OAAKA,EAAE2W,IAAMkpD,EAAGlpD,GAAO3W,EAAE4W,IAAMipD,EAAGjpD,CAAE,IACrF6M,WAAY88C,EAAKrlD,MAAM4vF,gBAAgBhrC,MAAK,SAAA9/D,GAAC,OAAKA,EAAE2W,IAAMkpD,EAAGlpD,GAAO3W,EAAE4W,IAAMipD,EAAGjpD,CAAE,IACjFiiC,QAAS0nB,EAAKrlD,MAAM6vF,eAAc,UAAApzF,OANnBkoD,EAAGlpD,EAAC,KAAAgB,OAAIkoD,EAAGjpD,GAS7B,IAEK6qD,EAAOlB,EAAKrlD,MAAMqmD,UAAUE,KAAK7b,KAAI,SAAA8b,GAC1C,OACCs8B,EAAAA,GAAAA,KAACiM,GAAS,CAETxoC,KAAMC,EACNH,UAAWhB,EAAKrlD,MAAMqmD,UACtBylC,WAAYzmC,EAAKrlD,MAAM8rF,WACvBM,cAAetoC,EACf0nC,WAAqD,IAAxCnmC,EAAKrlD,MAAM8vF,kBAAkBhvG,QAAiBukE,EAAKrlD,MAAM8vF,kBAAkBl0F,SAAS4qD,EAAG9vC,IACpGnO,SAAU88C,EAAKrlD,MAAM+vF,gBAAgBn0F,SAAS4qD,EAAG9vC,IACjDinB,QAAS0nB,EAAKrlD,MAAMgwF,aAPfxpC,EAAG9vC,GAUX,IAEM0yD,EAAQ9iB,EAAW5b,KAAI,SAAAo7B,GAC5B,OAAIH,GAAewD,SAASrD,GAAWhlF,OAAS,GAE9CgiG,EAAAA,GAAAA,KAAC8L,GAAS,CAET9oB,UAAWA,EACXgmB,WAAYzmC,EAAKrlD,MAAM8rF,WACvBM,cAAetoC,GAHVgiB,EAAUpvD,IAQX,IACR,IAEMu5E,EAAS3pC,EAAW+Y,SAAQ,SAAAyG,GACjC,OAAOA,EAAU7V,OAAOG,MAAM1lB,KAAI,SAAC3mD,EAAKa,GACvC,OACCk+F,EAAAA,GAAAA,KAACmM,GAAU,CAEV7sG,SAAU2B,EACVuU,KAAMwtE,EAAUxtE,KAChBwzF,WAAYzmC,EAAKrlD,MAAM8rF,WACvBM,cAAetoC,GAAK,SAAArnD,OAJNqpE,EAAUpvD,GAAE,KAAAja,OAAI7X,GAOjC,GACD,IAEMsrG,EAAQ5pC,EAAW5b,KAAI,SAAAo7B,GAC5B,IAAI10C,EAAM,KAMV,OALI00C,EAAU7V,OAAOx/C,QACpB2gB,EAAMi0B,EAAK+pC,oBACA/pC,EAAKrlD,MAAMyvF,qBAAqB3uG,OAAS,GAAOukE,EAAKrlD,MAAMyvF,qBAAqB,KAAO3pB,EAAUpvD,KAC5G0a,EAAMi0B,EAAKgqC,uBAGXvM,EAAAA,GAAAA,KAACqI,GAAS,CAET/5D,IAAKA,EACL00C,UAAWA,EACXzf,UAAWhB,EAAKrlD,MAAMqmD,UACtBylC,WAAYzmC,EAAKrlD,MAAM8rF,WACvBM,cAAetoC,EACf0nC,WAA0D,IAA7CnmC,EAAKrlD,MAAMmwF,uBAAuBrvG,QAAiBukE,EAAKrlD,MAAMmwF,uBAAuBv0F,SAASkqE,EAAUpvD,IACrHnO,SAAU88C,EAAKrlD,MAAMyvF,qBAAqB7zF,SAASkqE,EAAUpvD,IAC7DinB,QAAS0nB,EAAKrlD,MAAMowF,kBARftqB,EAAUpvD,GAWlB,IAEM25E,EAAmBhrC,EAAKrlD,MAAMqmD,UAAUC,WAAW1B,MAAK,SAAA/gE,GAAC,OAAIA,EAAEosE,OAAOx/C,OAAO,IAC7E6/E,EAA0BD,EAAmB7lB,GAAeI,oBAAoBvlB,EAAKrlD,MAAMqmD,UAAWgqC,GAAoB,GAC1HrwB,EAAQzB,GAAkBkC,YAAYpb,EAAKrlD,MAAMqmD,UAAU8kB,YAC3DolB,EAAMrxC,EAAYa,SAASsF,EAAKrlD,MAAMqmD,UAAU8kB,YAAY,SAAAxmB,GAAE,SAAAloD,OAAOkoD,EAAGlpD,EAAC,KAAAgB,OAAIkoD,EAAGjpD,EAAC,IACrFukD,QAAO,SAAA0E,GACP,QAAI0rC,IACK9xB,GAAkBwB,UAAUC,EAAOswB,EAAyB,CAAE3rC,GAIxE,IACCja,KAAI,SAAAia,GACJ,OACCm+B,EAAAA,GAAAA,KAACgM,GAAG,CAEHjqC,OAAQF,EACRmnC,WAAYzmC,EAAKrlD,MAAM8rF,WACvBM,cAAetoC,GAAK,UAAArnD,OAHLkoD,EAAGlpD,EAAC,KAAAgB,OAAIkoD,EAAGjpD,GAM7B,IAEK80F,EAAW,GACXxjB,EAAS3nB,EAAKqqC,YAChB1iB,GACHwjB,EAASltG,MACRw/F,EAAAA,GAAAA,KAACkM,GAAO,CAEPvzF,EAAGuxE,EAAOvxE,EACVC,EAAGsxE,EAAOtxE,EACVpD,KAAM00E,EAAO10E,KACby3E,OAAQ/C,EAAO+C,OACf+b,WAAYzmC,EAAKrlD,MAAM8rF,WACvBM,cAAetoC,GANX,WAWP,IAAMnnC,EAAQmnC,EAAKC,MAAQD,EAAK3gC,KAAO,EACjCvG,EAASknC,EAAKE,OAASF,EAAKzgC,IAAM,EAExC,OACCy/D,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,gBAAgBnsB,QAAS,kBAAM0nB,EAAKrlD,MAAMywF,YAAY,EAAC7nF,UACrEq6E,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,iCAAiCloE,MAAO,CAAEi1D,SAAS,GAADp6C,OAAK4oD,EAAKrlD,MAAM8rF,WAAanvE,EAAK,MAAM85B,UAAU,GAADh6C,OAAK4oD,EAAKrlD,MAAM8rF,WAAalvE,EAAM,OAAOhU,SAAA,CAC1JuzC,EACAitB,EACA6mB,EACAtuB,EACApb,EACA2pC,EACAK,EACAC,MAIL,CAAE,MAAAvmB,GACD,OAAO6Y,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,8BACvB,CACD,EAACzE,CAAC,CAAD,OAAA5H,EAAA0xC,EAAA,CAvP4B,CAAS3/D,EAAAA,WCvB1BkhE,GAAmB,SAAApO,GAAAz6B,EAAA6oC,EAAApO,GAAA,IAAAC,EAAA/5B,EAAAkoC,GAAA,SAAAA,IAAA,IAAArrC,EAAA76D,EAAA,KAAAkmG,GAAA,QAAAvyF,EAAAvd,UAAAE,OAAA4X,EAAA,IAAAvZ,MAAAgf,GAAAnB,EAAA,EAAAA,EAAAmB,EAAAnB,IAAAtE,EAAAsE,GAAApc,UAAAoc,GAiF7B,OAjF6BqoD,EAAAk9B,EAAAnjG,KAAA+J,MAAAo5F,EAAA,OAAA9lF,OAAA/D,KAC/B0N,OAAS,WACR,IACC,IAAMuqF,EAAiBnmB,GAAeqB,oBAAoBxmB,EAAKrlD,MAAMqmD,WACnEpG,QAAO,SAAAp8D,GAAC,OAAIA,EAAEosE,OAAOx/C,OAAO,IAC5Bi6B,KAAI,SAAAo7B,GACJ,OACCgd,EAAAA,GAAAA,KAACwJ,GAAiB,CAEjBn6F,KAAK,aACL2zE,UAAWA,EACXzf,UAAWhB,EAAKrlD,MAAMqmD,UACtB1oB,QAAS0nB,EAAKrlD,MAAMymF,SACpBmH,aAAcvoC,EAAKrlD,MAAMymF,UALpB3gB,EAAUpvD,GAQlB,IAEKk6E,EAAgBpmB,GAAeqB,oBAAoBxmB,EAAKrlD,MAAMqmD,WAClEpG,QAAO,SAAAp8D,GAAC,OAAKA,EAAEosE,OAAOx/C,OAAO,IAC7Bi6B,KAAI,SAAAo7B,GACJ,OACCgd,EAAAA,GAAAA,KAACwJ,GAAiB,CAEjBn6F,KAAK,aACL2zE,UAAWA,EACXzf,UAAWhB,EAAKrlD,MAAMqmD,UACtB1oB,QAAS0nB,EAAKrlD,MAAMymF,SACpBmH,aAAcvoC,EAAKrlD,MAAMymF,UALpB3gB,EAAUpvD,GAQlB,IAEKm6E,EAAermB,GAAemF,mBAAmBtqB,EAAKrlD,MAAMqmD,WAChE3b,KAAI,SAAAo7B,GACJ,OACCgd,EAAAA,GAAAA,KAACwJ,GAAiB,CAEjBn6F,KAAK,aACL2zE,UAAWA,EACXzf,UAAWhB,EAAKrlD,MAAMqmD,UACtB1oB,QAAS0nB,EAAKrlD,MAAMymF,SACpBmH,aAAcvoC,EAAKrlD,MAAMymF,UALpB3gB,EAAUpvD,GAQlB,IAEKo6E,EAActmB,GAAeoF,kBAAkBvqB,EAAKrlD,MAAMqmD,WAC9D3b,KAAI,SAAAo7B,GACJ,OACCgd,EAAAA,GAAAA,KAACwJ,GAAiB,CAEjBn6F,KAAK,aACL2zE,UAAWA,EACXzf,UAAWhB,EAAKrlD,MAAMqmD,UACtB1oB,QAAS0nB,EAAKrlD,MAAMymF,SACpBmH,aAAcvoC,EAAKrlD,MAAMymF,UALpB3gB,EAAUpvD,GAQlB,IAEGq6E,EAAe,QAKnB,OAJ8B,IAA1BJ,EAAe7vG,SAClBiwG,EAAe,eAIf9N,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,wBAAuBlhD,SAAA,CACpC+nF,EAAe7vG,OAAS,GAAIgiG,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAASmE,WAAW3+E,SAAC,sBAA2B,KACxF+nF,EACAC,EAAc9vG,OAAS,GAAIgiG,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAASmE,WAAW3+E,SAAC,YAAiB,KAC7EgoF,EACAC,EAAa/vG,OAAS,GAAIgiG,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAASmE,WAAW3+E,SAAEmoF,IAAuB,KACnFF,EACAC,EAAYhwG,OAAS,GAAIgiG,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAASmE,WAAW3+E,SAAC,SAAc,KACxEkoF,IAGJ,CAAE,MAAA7mB,GACD,OAAO6Y,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,sCACvB,CACD,EAACzE,CAAC,CAAD,OAAA5H,EAAAizC,EAAA,CAjF8B,CAASlhE,EAAAA,WCV5BwhE,GAAa,SAAA1O,GAAAz6B,EAAAmpC,EAAA1O,GAAA,IAAAC,EAAA/5B,EAAAwoC,GAAA,SAAAA,IAAA,IAAA3rC,EAAA76D,EAAA,KAAAwmG,GAAA,QAAA7yF,EAAAvd,UAAAE,OAAA4X,EAAA,IAAAvZ,MAAAgf,GAAAnB,EAAA,EAAAA,EAAAmB,EAAAnB,IAAAtE,EAAAsE,GAAApc,UAAAoc,GAWvB,OAXuBqoD,EAAAk9B,EAAAnjG,KAAA+J,MAAAo5F,EAAA,OAAA9lF,OAAA/D,KACzB0N,OAAS,WACR,IACC,OACC08E,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,kBAAiBlhD,SAC9By8C,EAAKrlD,MAAMjH,MAGf,CAAE,MAAAkxE,GACD,OAAO6Y,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,gCACvB,CACD,EAACzE,CAAC,CAAD,OAAA5H,EAAAuzC,EAAA,CAXwB,CAASxhE,EAAAA,WCStByhE,GAAkB,SAAA3O,GAAAz6B,EAAAopC,EAAA3O,GAAA,IAAAC,EAAA/5B,EAAAyoC,GAAA,SAAAA,IAAA,IAAA5rC,EAAA76D,EAAA,KAAAymG,GAAA,QAAA9yF,EAAAvd,UAAAE,OAAA4X,EAAA,IAAAvZ,MAAAgf,GAAAnB,EAAA,EAAAA,EAAAmB,EAAAnB,IAAAtE,EAAAsE,GAAApc,UAAAoc,GA6I5B,OA7I4BqoD,EAAAk9B,EAAAnjG,KAAA+J,MAAAo5F,EAAA,OAAA9lF,OAAA/D,KAM9BilC,QAAU,SAACj5C,EAAqBu/D,GAC/Bv/D,EAAE4J,kBACF+2D,EAAKrlD,MAAMkxF,kBAAkBjtC,EAC9B,EAACoB,EAEDg3B,aAAe,SAACp4B,GACf,IAAMlG,EAAMH,EAAOY,aAAayF,EAAUvtC,IAEpCiG,EAAqC,GAA5BihC,EAAOS,cAAcN,GAAa,GAC3CnhC,EAAsC,GAA5BghC,EAAOS,cAAcN,GAAa,GAC5C6nC,EAAuC,IAA5BhoC,EAAOS,cAAcN,GAChCj/B,EAAQ8+B,EAAOW,YAAY,GAAI,IAAKR,GAEtC0qC,EAAqC,GACzC,OAAQ7qC,EAAOO,aAAa,EAAGJ,IAC9B,KAAK,EAEJ0qC,EAAS,CACR,CAAEhtF,EAAG,EAAGC,EAAG,GACX,CAAED,EAAGkhB,EAAOjhB,EAAG,GACf,CAAED,EAAGkhB,EAAOjhB,EAAGkhB,GACf,CAAEnhB,EAAG,EAAGC,EAAGkhB,IAEZ,MACD,KAAK,EAEJ,IAAMnhB,EAAImiD,EAAOO,aAAaxhC,EAAQ,EAAGohC,GAAQphC,EAAQ,EACnDjhB,EAAIkiD,EAAOO,aAAavhC,EAAS,EAAGmhC,GAAQnhC,EAAS,EAC3D6rE,EAAS,CACR,CAAEhtF,EAAG,EAAGC,EAAG,GACX,CAAED,EAAGA,EAAGC,EAAG,GACX,CAAED,EAAGA,EAAGC,EAAGA,GACX,CAAED,EAAGkhB,EAAOjhB,EAAGA,GACf,CAAED,EAAGkhB,EAAOjhB,EAAGkhB,GACf,CAAEnhB,EAAG,EAAGC,EAAGkhB,IAEZ,MAED,KAAK,EAEJ,IAAMnhB,EAAImiD,EAAOO,aAAaxhC,EAAQ,EAAGohC,GAAQphC,EAAQ,EACnDw0E,EAAKvzC,EAAOO,aAAavhC,EAAS,EAAGmhC,GAAQnhC,EAAS,EACtD6iD,EAAK7hB,EAAOO,aAAavhC,EAAS,EAAGmhC,GAAQnhC,EAAS,EAAMA,EAAS,EAC3E6rE,EAAS,CACR,CAAEhtF,EAAG,EAAGC,EAAG,GACX,CAAED,EAAGkhB,EAAOjhB,EAAG,GACf,CAAED,EAAGkhB,EAAOjhB,EAAGy1F,GACf,CAAE11F,EAAGA,EAAGC,EAAGy1F,GACX,CAAE11F,EAAGA,EAAGC,EAAG+jE,GACX,CAAEhkE,EAAGkhB,EAAOjhB,EAAG+jE,GACf,CAAEhkE,EAAGkhB,EAAOjhB,EAAGkhB,GACf,CAAEnhB,EAAG,EAAGC,EAAGkhB,IAEZ,MAED,KAAK,EAEJ,IAAMw0E,EAAKxzC,EAAOO,aAAaxhC,EAAQ,EAAGohC,GAAQphC,EAAQ,EAAMA,EAAQ,EAClE4iD,EAAK3hB,EAAOO,aAAaxhC,EAAQ,EAAGohC,GAAQphC,EAAQ,EACpDw0E,EAAKvzC,EAAOO,aAAavhC,EAAS,EAAGmhC,GAAQnhC,EAAS,EACtD6iD,EAAK7hB,EAAOO,aAAavhC,EAAS,EAAGmhC,GAAQnhC,EAAS,EAC5D6rE,EAAS,CACR,CAAEhtF,EAAG,EAAGC,EAAG,GACX,CAAED,EAAGkhB,EAAOjhB,EAAG,GACf,CAAED,EAAGkhB,EAAOjhB,EAAGy1F,GACf,CAAE11F,EAAG21F,EAAI11F,EAAGy1F,GACZ,CAAE11F,EAAG21F,EAAI11F,EAAGkhB,GACZ,CAAEnhB,EAAG8jE,EAAI7jE,EAAGkhB,GACZ,CAAEnhB,EAAG8jE,EAAI7jE,EAAG+jE,GACZ,CAAEhkE,EAAG,EAAGC,EAAG+jE,IAMd,IAAMomB,GAAW,IAAMlpE,GAAS,EAC1BmpE,GAAW,IAAMlpE,GAAU,EAQjC,OANIqnC,IAAcoB,EAAKrlD,MAAMqxF,oBAC5BvyE,EAAMj6B,EAAI,IACVi6B,EAAMlc,EAAI,IACVkc,EAAMjd,EAAI,MAIVihF,EAAAA,GAAAA,KAAA,KAAAl6E,UACCk6E,EAAAA,GAAAA,KAAA,WACCh5B,UAAWnG,EAAgBS,UAAUH,IAAqC,IAAtBA,EAAUxC,QAAiB,sBAAwB,YACvGgnC,OACCA,EACE/9C,KAAI,SAAAg+C,GACJ,IAAMF,GAAME,EAAGjtF,EAAIoqF,GAAW,IACxByL,GAAM5I,EAAGhtF,EAAIoqF,GAAW,IAC9B,MAAM,GAANrpF,OAAUwnD,EAAU7hE,SAASqZ,EAAI+sF,EAAE,KAAA/rF,OAAIwnD,EAAU7hE,SAASsZ,EAAI41F,EAC/D,IACC9/D,KAAK,KAER5vC,MAAO,CACNg+F,KAAK,OAADnjF,OAASqiB,EAAMj6B,EAAC,MAAA4X,OAAKqiB,EAAMlc,EAAC,MAAAnG,OAAKqiB,EAAMjd,EAAC,KAC5CwoF,OAAO,GAAD5tF,OAAKmpF,EAAO,QAEnBjoD,QAAS,SAAAj5C,GAAC,OAAI2gE,EAAK1nB,QAAQj5C,EAAGu/D,EAAU,EAACr7C,UAEzCk6E,EAAAA,GAAAA,KAAA,SAAAl6E,SAAQq7C,EAAUnkE,UAlBZmkE,EAAUvtC,GAsBpB,EAAC2uC,EAEDj/C,OAAS,WACR,IACC,IAAI++C,EAAaE,EAAKrlD,MAAM6jD,WAC5B,GAAyB,cAApBwB,EAAKrlD,MAAM7N,MAA2D,OAAjCkzD,EAAKrlD,MAAMqxF,kBAA6B,CACjF,IAAME,EAAclsC,EAAKrlD,MAAMqxF,kBAAkB36E,GACjDyuC,EAAaA,EAAWlF,QAAO,SAAAn7D,GAAC,OAAIA,EAAE4xB,KAAO66E,CAAW,GACzD,CAGA,IAAMztC,EAAOH,EAAgBC,cAAcuB,GAC3CrB,EAAK3gC,MAAQ,EACb2gC,EAAKzgC,KAAO,EACZygC,EAAKC,OAAS,EACdD,EAAKE,QAAU,EAEf,IAAMrnC,EAAamnC,EAAKC,MAAQD,EAAK3gC,KAAvB,EACRvG,EAAcknC,EAAKE,OAASF,EAAKzgC,IAAxB,EAEf,OACCy/D,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,iBAAiB61B,QAAO,GAAAljF,OAAKqnD,EAAK3gC,KAAI,KAAA1mB,OAAIqnD,EAAKzgC,IAAG,KAAA5mB,OAAIkgB,EAAK,KAAAlgB,OAAImgB,GAAU+gB,QAAS,SAAAj5C,GAAC,OAAI2gE,EAAK1nB,QAAQj5C,EAAG,KAAK,EAACkkB,SAC1Hu8C,EAAWza,IAAI2a,EAAKg3B,eAGxB,CAAE,MAAApS,GACD,OAAO6Y,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,+BACvB,CACD,EAACzE,CAAC,CAAD,OAAA5H,EAAAwzC,EAAA,CA7I6B,CAASzhE,EAAAA,WAA3ByhE,GACExkE,aAAe,CAC5Bt6B,KAAM,MACN++F,kBAAmB,kBAAM,IAAI,GCnB/B,IAAAM,GAAexR,GAAqB,OAAQ,WAAY,CACtD,CAAC,OAAQ,CAAEr9E,EAAG,YAAapjB,IAAK,UAChC,CAAC,OAAQ,CAAEojB,EAAG,aAAcpjB,IAAK,UACjC,CAAC,OAAQ,CAAEojB,EAAG,aAAcpjB,IAAK,UACjC,CAAC,OAAQ,CAAEojB,EAAG,aAAcpjB,IAAK,UACjC,CAAC,OAAQ,CAAEojB,EAAG,cAAepjB,IAAK,UAClC,CAAC,OAAQ,CAAEojB,EAAG,cAAepjB,IAAK,YCSvBkyG,GAAgB,SAAAnP,GAAAz6B,EAAA4pC,EAAAnP,GAAA,IAAAC,EAAA/5B,EAAAipC,GAAA,SAAAA,IAAA,IAAApsC,EAAA76D,EAAA,KAAAinG,GAAA,QAAAtzF,EAAAvd,UAAAE,OAAA4X,EAAA,IAAAvZ,MAAAgf,GAAAnB,EAAA,EAAAA,EAAAmB,EAAAnB,IAAAtE,EAAAsE,GAAApc,UAAAoc,GAoE1B,OApE0BqoD,EAAAk9B,EAAAnjG,KAAA+J,MAAAo5F,EAAA,OAAA9lF,OAAA/D,KAC5B6zF,UAAY,SAAC7nG,GACZA,EAAE4J,kBACE+2D,EAAKrlD,MAAMusF,WACdlnC,EAAKrlD,MAAMusF,UAAUlnC,EAAKrlD,MAAMumD,KAElC,EAAClB,EAEDmnC,SAAW,SAAC9nG,GACXA,EAAE4J,kBACE+2D,EAAKrlD,MAAMwsF,UACdnnC,EAAKrlD,MAAMwsF,SAASnnC,EAAKrlD,MAAMumD,KAEjC,EAAClB,EAEDj/C,OAAS,WACR,IACC,IAAItmB,EAAO,GACP4xG,EAA2B,KAC/B,GAAqC,IAAjCrsC,EAAKrlD,MAAMumD,KAAKwJ,MAAMjvE,OAAc,CACvC,IAAMiY,EAAOssD,EAAKrlD,MAAMumD,KAAKwJ,MAAM,GACnCjwE,EAAOiZ,EAAKjZ,KACRiZ,EAAKoqE,QACRuuB,GACC5O,EAAAA,GAAAA,KAAA,OAAAl6E,UACCk6E,EAAAA,GAAAA,KAACkE,GAAG,CAAAp+E,SAAE7P,EAAKV,gBAIf,MACCvY,EAAI,GAAA2c,OAAM4oD,EAAKrlD,MAAMumD,KAAKwJ,MAAMjvE,OAAM,UAUvC,OARIukE,EAAKrlD,MAAMumD,KAAKE,MAAQ,IACd,KAAT3mE,EACHA,EAAO,QAEPA,GAAQ,YAKTmjG,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,qBAAoBlhD,SAAA,EAClCk6E,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,kBAAiBlhD,UAC/Bk6E,EAAAA,GAAAA,KAACiM,GAAS,CACTxoC,KAAMlB,EAAKrlD,MAAMumD,KACjBF,UAAW,KACXylC,WAAY,GACZM,cAAe,CAAEjpE,KAAM,EAAGE,IAAK,GAC/BmoE,YAAY,EACZjjF,UAAU,EACVo1B,QAAS,kBAAM,IAAI,OAGrBslD,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,OAAMlhD,SAAA,EACpBk6E,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAASmH,aAAa3hF,SAAE9oB,IACnC4xG,MAEF5O,EAAAA,GAAAA,KAAA,UAAQh5B,UAAU,WAAWnsB,QAAS,SAAAj5C,GAAC,OAAI2gE,EAAKknC,UAAU7nG,EAAE,EAACkkB,UAC5Dk6E,EAAAA,GAAAA,KAAC0O,GAAQ,OAEV1O,EAAAA,GAAAA,KAAA,UAAQh5B,UAAU,WAAWnsB,QAAS,SAAAj5C,GAAC,OAAI2gE,EAAKmnC,SAAS9nG,EAAE,EAACkkB,UAC3Dk6E,EAAAA,GAAAA,KAACkB,GAAK,QAIV,CAAE,MAAA/Z,GACD,OAAO6Y,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,mCACvB,CACD,EAACzE,CAAC,CAAD,OAAA5H,EAAAg0C,EAAA,CApE2B,CAASjiE,EAAAA,WCNzBmiE,GAAe,SAAArP,GAAAz6B,EAAA8pC,EAAArP,GAAA,IAAAC,EAAA/5B,EAAAmpC,GAAA,SAAAA,IAAA,IAAAtsC,EAAA76D,EAAA,KAAAmnG,GAAA,QAAAxzF,EAAAvd,UAAAE,OAAA4X,EAAA,IAAAvZ,MAAAgf,GAAAnB,EAAA,EAAAA,EAAAmB,EAAAnB,IAAAtE,EAAAsE,GAAApc,UAAAoc,GA0CzB,OA1CyBqoD,EAAAk9B,EAAAnjG,KAAA+J,MAAAo5F,EAAA,OAAA9lF,OAAA/D,KAO3B0N,OAAS,WAER,OAAIi/C,EAAKrlD,MAAMuf,MAAS8lC,EAAKrlD,MAAM4xF,SAAYvsC,EAAKrlD,MAAMnd,QASrDwiE,EAAKrlD,MAAMuf,OAAQ8lC,EAAKrlD,MAAM4xF,SAAYvsC,EAAKrlD,MAAMnd,QASrDwiE,EAAKrlD,MAAMuf,MAAS8lC,EAAKrlD,MAAM4xF,UAAWvsC,EAAKrlD,MAAMnd,SASzDogG,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,mBAAkBlhD,SAAA,CAC/By8C,EAAKrlD,MAAMuf,MAAOujE,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,YAAWlhD,SAAEy8C,EAAKrlD,MAAMuf,OAAc,KACvE8lC,EAAKrlD,MAAM4xF,SAAU9O,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,WAAUlhD,SAAEy8C,EAAKrlD,MAAM4xF,UAAiB,KAC5EvsC,EAAKrlD,MAAMnd,YAVZigG,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,4BAA2BlhD,SACxCy8C,EAAKrlD,MAAMnd,WAVbigG,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,4BAA2BlhD,UACzCk6E,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,WAAUlhD,SAAEy8C,EAAKrlD,MAAM4xF,aAVvC9O,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,4BAA2BlhD,UACzCk6E,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,YAAWlhD,SAAEy8C,EAAKrlD,MAAMuf,QA8B3C,EAAC8lC,CAAC,CAAD,OAAA5H,EAAAk0C,EAAA,CA1C0B,CAASniE,EAAAA,WAAxBmiE,GACLllE,aAAe,CACrBlN,KAAM,KACNqyE,QAAS,KACT/uG,QAAS,MCaJ,IAAMgvG,GAAc,SAAAvP,GAAAz6B,EAAAgqC,EAAAvP,GAAA,IAAAC,EAAA/5B,EAAAqpC,GAM1B,SAAAA,EAAY7xF,GAAe,IAADqlD,EAIvB,OAJuB76D,EAAA,KAAAqnG,IACzBxsC,EAAAk9B,EAAAnjG,KAAA,KAAM4gB,IAMP8xF,OAAS,SAACptG,GACTA,EAAE4J,kBAEF+2D,EAAKnL,SAAS,CACbyrC,SAAUtgC,EAAKp9D,MAAM09F,SAEvB,EAACtgC,EAED1nB,QAAU,SAACj5C,GACVA,EAAE4J,kBAEE+2D,EAAKrlD,MAAM29B,SACd0nB,EAAKrlD,MAAM29B,QAAQ0nB,EAAKrlD,MAAMkmE,WAEhC,EAAC7gB,EAEDj/C,OAAS,WACR,IAAIuzD,EAAmB,KACnBtU,EAAKrlD,MAAMkmE,WAAWvM,iBAAiB74E,OAAS,IACnD64E,GACCspB,EAAAA,GAAAA,MAAA,OAAAr6E,SAAA,EACCk6E,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAASmH,aAAa3hF,SAAC,eAClCy8C,EAAKrlD,MAAMkmE,WAAWvM,iBAAiBjvB,KAAI,SAAAzlD,GAAC,OAAI69F,EAAAA,GAAAA,KAACkO,GAAa,CAAYj4F,KAAMs8D,GAAayB,sBAAsB7xE,IAA/CA,EAAEyxB,GAAmD,QAK7H,IAAIw/B,EAAW,KACXmP,EAAKrlD,MAAMkmE,WAAWhwB,SAASp1D,OAAS,IAC3Co1D,GACC+sC,EAAAA,GAAAA,MAAA,OAAAr6E,SAAA,EACCk6E,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAASmH,aAAa3hF,SAAC,aAClCy8C,EAAKrlD,MAAMkmE,WAAWhwB,SAASxL,KAAI,SAAAzlD,GAAC,OAAI69F,EAAAA,GAAAA,KAACkO,GAAa,CAAYj4F,KAAMs8D,GAAayB,sBAAsB7xE,IAA/CA,EAAEyxB,GAAmD,QAKrH,IAAIk6C,EAAU,KACVvL,EAAKrlD,MAAMkmE,WAAWtV,QAAQ9vE,OAAS,IAC1C8vE,GACCqyB,EAAAA,GAAAA,MAAA,OAAAr6E,SAAA,EACCk6E,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAASmH,aAAa3hF,SAAC,YAClCy8C,EAAKrlD,MAAMkmE,WAAWtV,QAAQlmB,KAAI,SAAA9oC,GAAC,OAAIkhF,EAAAA,GAAAA,KAACkO,GAAa,CAAYj4F,KAAM4zE,GAAYkL,qBAAqBj2E,IAA7CA,EAAE8U,GAAiD,QAKlH,IAAMoD,EAAyB,GAK/B,OAJAA,EAAQx2B,MACPw/F,EAAAA,GAAAA,KAAA,UAAmBh5B,UAAU,WAAWiN,MAAM,OAAOp5B,QAAS0nB,EAAKysC,OAAOlpF,UAACk6E,EAAAA,GAAAA,KAACxB,GAAW,KAA3E,UAIZwB,EAAAA,GAAAA,KAAC4C,GAAW,CACXzhG,KAAMyhF,GAASyC,WACfge,OACCrD,EAAAA,GAAAA,KAAC6O,GAAe,CACfpyE,KAAM8lC,EAAKrlD,MAAMkmE,WAAWpmF,KAC5B8xG,QAASvsC,EAAKrlD,MAAMkmE,WAAW7tE,cAGjC+tF,MACCnD,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,uBAAsBlhD,SAAA,CACnC+wD,EACAzjB,EACA0a,KAGHo1B,WAAW,aACXC,cAAensE,EACf6rE,QAAStgC,EAAKp9D,MAAM09F,QACpBl9E,SAAU48C,EAAKrlD,MAAMyI,SACrBk1B,QAAS0nB,EAAKrlD,MAAM29B,QAAU0nB,EAAK1nB,QAAU0nB,EAAKysC,QAGrD,EAhFCzsC,EAAKp9D,MAAQ,CACZ09F,SAAS,GACRtgC,CACH,CAAC,OAAA5H,EAAAo0C,EAAA,CAXyB,CAASriE,EAAAA,WAAvBqiE,GACLplE,aAAe,CACrBhkB,UAAU,EACVk1B,QAAS,MCAJ,IAAMo0D,GAAQ,SAAAzP,GAAAz6B,EAAAkqC,EAAAzP,GAAA,IAAAC,EAAA/5B,EAAAupC,GAOpB,SAAAA,EAAY/xF,GAAe,IAADqlD,EAIvB,OAJuB76D,EAAA,KAAAunG,IACzB1sC,EAAAk9B,EAAAnjG,KAAA,KAAM4gB,IAMP8xF,OAAS,SAACptG,GACTA,EAAE4J,kBAEF+2D,EAAKnL,SAAS,CACbyrC,SAAUtgC,EAAKp9D,MAAM09F,SAEvB,EAACtgC,EAED1nB,QAAU,SAACj5C,GACVA,EAAE4J,kBAEE+2D,EAAKrlD,MAAM29B,SACd0nB,EAAKrlD,MAAM29B,QAAQ0nB,EAAKrlD,MAAMjH,KAEhC,EAACssD,EAEDj/C,OAAS,WACR,IAAIjG,EAAWklD,EAAKrlD,MAAMjH,KAAKoH,SAASthB,WACpCwmE,EAAKrlD,MAAMjH,KAAKyuE,MAAQ,IAC3BrnE,EAAQ,GAAA1D,OAAM4oD,EAAKrlD,MAAMjH,KAAKyuE,MAAK,KAAA/qE,OAAI0D,EAAQ,MAE5CklD,EAAKrlD,MAAMjH,KAAKoH,WAAa4uD,GAAiByC,OACjDrxD,EAAW,IAGZ,IAAIi4D,EAAS,KACT/S,EAAKrlD,MAAMjH,KAAKq/D,SACnBA,GACC6qB,EAAAA,GAAAA,MAAA,OAAAr6E,SAAA,EACCk6E,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAASmH,aAAa3hF,SAAC,WAClCy8C,EAAKrlD,MAAMjH,KAAKq/D,QAAQ0qB,EAAAA,GAAAA,KAAC6D,GAAS,CAACjxC,YAAY,UAAU+tC,MAAM,SAASxjG,MACxEolE,EAAKrlD,MAAMjH,KAAKq/D,OAAO/H,OAAO3lB,KAAI,SAACgsC,EAAK9xF,GAAC,OACxCk+F,EAAAA,GAAAA,KAACT,GAAS,CAASp+F,KAAMyyF,EAAIzyF,KAAMhE,MAAOy2F,EAAIplB,MAA9B1sE,EAAsC,MAElD,KACLygE,EAAKrlD,MAAMjH,KAAKq/D,QAAW/S,EAAKrlD,MAAMjH,KAAKq/D,OAAOh5C,MAAQ,GAAK0jE,EAAAA,GAAAA,KAAC6D,GAAS,CAACjxC,YAAY,UAAU+tC,MAAM,QAAQxjG,MAAOolE,EAAKrlD,MAAMjH,KAAKq/D,OAAOh5C,QAAW,KACvJimC,EAAKrlD,MAAMjH,KAAKq/D,QAAW/S,EAAKrlD,MAAMjH,KAAKq/D,OAAOsL,WAAa,GAAKof,EAAAA,GAAAA,KAAC6D,GAAS,CAACjxC,YAAY,UAAU+tC,MAAM,aAAaxjG,MAAOolE,EAAKrlD,MAAMjH,KAAKq/D,OAAOsL,aAAgB,SAK1K,IAAIE,EAAQ,KACRve,EAAKrlD,MAAMjH,KAAK6qE,QACnBA,GACCqf,EAAAA,GAAAA,MAAA,OAAAr6E,SAAA,EACCk6E,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAASmH,aAAa3hF,SAAC,UAClCy8C,EAAKrlD,MAAMjH,KAAK6qE,MAAM1tB,SAASxL,KAAI,SAAAzlD,GAAC,OAAI69F,EAAAA,GAAAA,KAACkO,GAAa,CAAYj4F,KAAMs8D,GAAayB,sBAAsB7xE,IAA/CA,EAAEyxB,GAAmD,QAKrH,IAAIs3D,EAAS,KACT3oB,EAAKrlD,MAAMjH,KAAKi1E,SACnBA,GACCiV,EAAAA,GAAAA,MAAA,OAAAr6E,SAAA,EACCk6E,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAASmH,aAAa3hF,SAAC,WAClCy8C,EAAKrlD,MAAMjH,KAAKi1E,OAAOv/C,QAAQic,KAAI,SAAChmD,EAAGE,GAAC,OAAKk+F,EAAAA,GAAAA,KAACkO,GAAa,CAASj4F,KAAMu/D,GAAcud,eAAenxF,EAAG,KAAM,OAA/CE,EAAwD,QAK7H,IAAIsxD,EAAW,KACT87C,EAAmB38B,GAAakC,gBAAgBlS,EAAKrlD,MAAMjH,KAAKm9C,UAClE87C,EAAiBlxG,OAAS,IAC7Bo1D,GACC+sC,EAAAA,GAAAA,MAAA,OAAAr6E,SAAA,EACCk6E,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAASmH,aAAa3hF,SAAC,aAClCopF,EAAiBtnD,KAAI,SAAAzlD,GAAC,OAAI69F,EAAAA,GAAAA,KAACkO,GAAa,CAAYj4F,KAAMs8D,GAAayB,sBAAsB7xE,IAA/CA,EAAEyxB,GAAmD,QAKvG,IAAIk6C,EAAU,KACVvL,EAAKrlD,MAAMjH,KAAK63D,QAAQ9vE,OAAS,IACpC8vE,GACCqyB,EAAAA,GAAAA,MAAA,OAAAr6E,SAAA,EACCk6E,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAASmH,aAAa3hF,SAAC,YAClCy8C,EAAKrlD,MAAMjH,KAAK63D,QAAQlmB,KAAI,SAAA9oC,GAAC,OAAIkhF,EAAAA,GAAAA,KAACkO,GAAa,CAAYj4F,KAAM4zE,GAAYkL,qBAAqBj2E,IAA7CA,EAAE8U,GAAiD,QAK5G,IAAIguC,EAAQ,KACP0T,GAAWwL,GAAUoK,GAAW93B,GAAa0a,IACjDlM,GACCo+B,EAAAA,GAAAA,KAAA,OAAAl6E,UACCk6E,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAASiG,MAAMzgF,SAAC,+CAK/B,IAAMkR,EAAyB,GAK/B,OAJAA,EAAQx2B,MACPw/F,EAAAA,GAAAA,KAAA,UAAmBh5B,UAAU,WAAWiN,MAAM,OAAOp5B,QAAS0nB,EAAKysC,OAAOlpF,UAACk6E,EAAAA,GAAAA,KAACxB,GAAW,KAA3E,UAIZwB,EAAAA,GAAAA,KAAC4C,GAAW,CACXzhG,KAAMohE,EAAKrlD,MAAMjH,KAAKi1E,OAAStI,GAASusB,OAASvsB,GAAS2C,KAC1D8d,OACCrD,EAAAA,GAAAA,KAAC6O,GAAe,CACfpyE,KAA2B,IAArB8lC,EAAKrlD,MAAMtM,MAAc2xD,EAAKrlD,MAAMjH,KAAKjZ,KAAI,GAAA2c,OAAM4oD,EAAKrlD,MAAMjH,KAAKjZ,KAAI,OAAA2c,OAAM4oD,EAAKrlD,MAAMtM,MAAK,KACnGk+F,QAASvsC,EAAKrlD,MAAMjH,KAAKV,YACzBxV,SACCigG,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,kBAAiBlhD,UAC/Bq6E,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,OAAMlhD,SAAA,CACnBy8C,EAAKrlD,MAAMjH,KAAK+4D,cAAgB9C,GAAoBwC,MAAOsxB,EAAAA,GAAAA,KAACkE,GAAG,CAAAp+E,SAAEy8C,EAAKrlD,MAAMjH,KAAK+4D,cAAqB,KACzF,KAAb3xD,GAAkB2iF,EAAAA,GAAAA,KAACkE,GAAG,CAAAp+E,SAAEzI,IAAkB,YAMhDimF,MACCnD,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,iBAAgBlhD,SAAA,CAC7BwvD,EACAwL,EACAoK,EACA93B,EACA0a,EACAlM,KAGHshC,WAAY3gC,EAAKrlD,MAAMjH,KAAKi1E,OAAS,SAAW,OAChDiY,cAAensE,EACf6rE,QAAStgC,EAAKp9D,MAAM09F,QACpBl9E,SAAU48C,EAAKrlD,MAAMyI,SACrBk1B,QAAS0nB,EAAKrlD,MAAM29B,QAAU0nB,EAAK1nB,QAAU0nB,EAAKysC,QAGrD,EAvICzsC,EAAKp9D,MAAQ,CACZ09F,SAAS,GACRtgC,CACH,CAAC,OAAA5H,EAAAs0C,EAAA,CAZmB,CAASviE,EAAAA,WAAjBuiE,GACLtlE,aAAe,CACrB/4B,MAAO,EACP+U,UAAU,EACVk1B,QAAS,MCVJ,IAAMu0D,GAAa,SAAA5P,GAAAz6B,EAAAqqC,EAAA5P,GAAA,IAAAC,EAAA/5B,EAAA0pC,GAMzB,SAAAA,EAAYlyF,GAAe,IAADqlD,EAIvB,OAJuB76D,EAAA,KAAA0nG,IACzB7sC,EAAAk9B,EAAAnjG,KAAA,KAAM4gB,IAMP8xF,OAAS,SAACptG,GACTA,EAAE4J,kBAEF+2D,EAAKnL,SAAS,CACbyrC,SAAUtgC,EAAKp9D,MAAM09F,SAEvB,EAACtgC,EAED1nB,QAAU,SAACj5C,GACVA,EAAE4J,kBAEE+2D,EAAKrlD,MAAM29B,SACd0nB,EAAKrlD,MAAM29B,QAAQ0nB,EAAKrlD,MAAMikD,UAEhC,EAACoB,EAED8sC,oBAAsB,WACrB,OAAQ9sC,EAAKrlD,MAAMikD,UAAUhgE,MAC5B,KAAKk9D,EAAcG,QAClB,OACC2hC,EAAAA,GAAAA,MAACI,GAAI,CAAAz6E,SAAA,EACJk6E,EAAAA,GAAAA,KAAA,KAAAl6E,SAAG,+DACHq6E,EAAAA,GAAAA,MAAA,KAAAr6E,SAAA,CAAG,YAAUy8C,EAAKrlD,MAAMikD,UAAUzC,MAAM,2CAG3C,KAAKL,EAAcQ,SAClB,OACCmhC,EAAAA,GAAAA,KAACO,GAAI,CAAAz6E,UACJq6E,EAAAA,GAAAA,MAAA,KAAAr6E,SAAA,CAAG,kDAA6E,EAA7By8C,EAAKrlD,MAAMikD,UAAUzC,MAAU,gBAGrF,KAAKL,EAAcU,MAClB,OACCohC,EAAAA,GAAAA,MAACI,GAAI,CAAAz6E,SAAA,EACJk6E,EAAAA,GAAAA,KAAA,KAAAl6E,SAAG,gGACHq6E,EAAAA,GAAAA,MAAA,KAAAr6E,SAAA,CAAG,YAAUy8C,EAAKrlD,MAAMikD,UAAUzC,MAAM,kDAG3C,KAAKL,EAAcY,KAClB,OACCkhC,EAAAA,GAAAA,MAACI,GAAI,CAAAz6E,SAAA,EACJk6E,EAAAA,GAAAA,KAAA,KAAAl6E,SAAG,yGACHq6E,EAAAA,GAAAA,MAAA,KAAAr6E,SAAA,CAAG,YAAUy8C,EAAKrlD,MAAMikD,UAAUzC,MAAM,kDAG3C,KAAKL,EAAcc,cAClB,OACCghC,EAAAA,GAAAA,MAACI,GAAI,CAAAz6E,SAAA,EACJk6E,EAAAA,GAAAA,KAAA,KAAAl6E,SAAG,uFACHq6E,EAAAA,GAAAA,MAAA,KAAAr6E,SAAA,CAAG,YAAUy8C,EAAKrlD,MAAMikD,UAAUzC,MAAM,sDAG3C,KAAKL,EAAcgB,YAClB,OACC8gC,EAAAA,GAAAA,MAACI,GAAI,CAAAz6E,SAAA,EACJk6E,EAAAA,GAAAA,KAAA,KAAAl6E,SAAG,wEACHq6E,EAAAA,GAAAA,MAAA,KAAAr6E,SAAA,CAAG,YAAUy8C,EAAKrlD,MAAMikD,UAAUzC,MAAM,kDAG3C,KAAKL,EAAckB,cAClB,OACC4gC,EAAAA,GAAAA,MAACI,GAAI,CAAAz6E,SAAA,EACJk6E,EAAAA,GAAAA,KAAA,KAAAl6E,SAAG,iFACHq6E,EAAAA,GAAAA,MAAA,KAAAr6E,SAAA,CAAG,YAAUy8C,EAAKrlD,MAAMikD,UAAUzC,MAAM,kDAG3C,KAAKL,EAAcoB,OAClB,OACC0gC,EAAAA,GAAAA,MAACI,GAAI,CAAAz6E,SAAA,EACJk6E,EAAAA,GAAAA,KAAA,KAAAl6E,SAAG,yFACHq6E,EAAAA,GAAAA,MAAA,KAAAr6E,SAAA,CAAG,YAAUy8C,EAAKrlD,MAAMikD,UAAUzC,MAAM,sDAG3C,KAAKL,EAAcsB,aAClB,OACCwgC,EAAAA,GAAAA,MAACI,GAAI,CAAAz6E,SAAA,EACJk6E,EAAAA,GAAAA,KAAA,KAAAl6E,SAAG,mFACHq6E,EAAAA,GAAAA,MAAA,KAAAr6E,SAAA,CAAG,YAAUy8C,EAAKrlD,MAAMikD,UAAUzC,MAAM,kDAG3C,KAAKL,EAAcwB,eAClB,OACCsgC,EAAAA,GAAAA,MAACI,GAAI,CAAAz6E,SAAA,EACJk6E,EAAAA,GAAAA,KAAA,KAAAl6E,SAAG,kFACHq6E,EAAAA,GAAAA,MAAA,KAAAr6E,SAAA,CAAG,YAAUy8C,EAAKrlD,MAAMikD,UAAUzC,MAAM,kDAG3C,KAAKL,EAAc0B,QAClB,OACCogC,EAAAA,GAAAA,MAACI,GAAI,CAAAz6E,SAAA,EACJk6E,EAAAA,GAAAA,KAAA,KAAAl6E,SAAG,yEACHq6E,EAAAA,GAAAA,MAAA,KAAAr6E,SAAA,CAAG,YAAUy8C,EAAKrlD,MAAMikD,UAAUzC,MAAM,kDAG3C,KAAKL,EAAc4B,YAClB,OACCkgC,EAAAA,GAAAA,MAACI,GAAI,CAAAz6E,SAAA,EACJk6E,EAAAA,GAAAA,KAAA,KAAAl6E,SAAG,yFACHq6E,EAAAA,GAAAA,MAAA,KAAAr6E,SAAA,CAAG,YAAUy8C,EAAKrlD,MAAMikD,UAAUzC,MAAM,gDAK5C,OAAO,IACR,EAAC6D,EAEDj/C,OAAS,WACR,IAAM0T,EAAyB,GAK/B,OAJAA,EAAQx2B,MACPw/F,EAAAA,GAAAA,KAAA,UAAmBh5B,UAAU,WAAWiN,MAAM,OAAOp5B,QAAS0nB,EAAKysC,OAAOlpF,UAACk6E,EAAAA,GAAAA,KAACxB,GAAW,KAA3E,UAIZwB,EAAAA,GAAAA,KAAC4C,GAAW,CACXzhG,KAAMyhF,GAASwX,UACfiJ,OACCrD,EAAAA,GAAAA,KAAC6O,GAAe,CACfpyE,KAAM8lC,EAAKrlD,MAAMikD,UAAUnkE,KAC3B8xG,QAASvsC,EAAKrlD,MAAMikD,UAAU5rD,cAGhC+tF,MACCtD,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,sBAAqBlhD,SAClCy8C,EAAK8sC,wBAGRnM,WAAW,YACXC,cAAensE,EACf6rE,QAAStgC,EAAKp9D,MAAM09F,QACpBl9E,SAAU48C,EAAKrlD,MAAMyI,SACrBk1B,QAAS0nB,EAAKrlD,MAAM29B,QAAU0nB,EAAK1nB,QAAU0nB,EAAKysC,QAGrD,EA1ICzsC,EAAKp9D,MAAQ,CACZ09F,SAAS,GACRtgC,CACH,CAAC,OAAA5H,EAAAy0C,EAAA,CAXwB,CAAS1iE,EAAAA,WAAtB0iE,GACLzlE,aAAe,CACrBhkB,UAAU,EACVk1B,QAAS,MCLJ,IAAMy0D,GAAQ,SAAA9P,GAAAz6B,EAAAuqC,EAAA9P,GAAA,IAAAC,EAAA/5B,EAAA4pC,GAAA,SAAAA,IAAA,IAAA/sC,EAAA76D,EAAA,KAAA4nG,GAAA,QAAAj0F,EAAAvd,UAAAE,OAAA4X,EAAA,IAAAvZ,MAAAgf,GAAAnB,EAAA,EAAAA,EAAAmB,EAAAnB,IAAAtE,EAAAsE,GAAApc,UAAAoc,GAqFlB,OArFkBqoD,EAAAk9B,EAAAnjG,KAAA+J,MAAAo5F,EAAA,OAAA9lF,OAAA/D,KAMpBilC,QAAU,SAACj5C,GACVA,EAAE4J,kBAEE+2D,EAAKrlD,MAAM29B,SACd0nB,EAAKrlD,MAAM29B,QAAQ0nB,EAAKrlD,MAAMy8E,KAEhC,EAACp3B,EAEDgtC,aAAe,SAACt5F,GACXssD,EAAKrlD,MAAM29B,SACd0nB,EAAKrlD,MAAM29B,QAAQ0nB,EAAKrlD,MAAMy8E,KAEhC,EAACp3B,EAED6rC,kBAAoB,SAACjtC,GAChBoB,EAAKrlD,MAAM29B,SACd0nB,EAAKrlD,MAAM29B,QAAQ0nB,EAAKrlD,MAAMy8E,KAEhC,EAACp3B,EAEDj/C,OAAS,WACR,GAAIi/C,EAAKrlD,MAAMy8E,KAAKx4F,OAASyqE,GAASquB,UACrC,OACC+F,EAAAA,GAAAA,KAACiP,GAAQ,CACRh5F,KAAMssD,EAAKrlD,MAAMy8E,KAAKt2F,KACtBw3C,QAAS0nB,EAAKrlD,MAAM29B,QAAU0nB,EAAKgtC,aAAe,OAKrD,GAAIhtC,EAAKrlD,MAAMy8E,KAAKx4F,OAASyqE,GAASwuB,UACrC,OACC4F,EAAAA,GAAAA,KAACoP,GAAa,CACbjuC,UAAWoB,EAAKrlD,MAAMy8E,KAAKt2F,KAC3Bw3C,QAAS0nB,EAAKrlD,MAAM29B,QAAU0nB,EAAK6rC,kBAAoB,OAK1D,IAAIj6B,EAAO,GACPq7B,EAAQ,KACZ,OAAQjtC,EAAKrlD,MAAMy8E,KAAKx4F,MACvB,KAAKyqE,GAASguB,UACbzlB,EAAO,8BACP,MACD,KAAKvI,GAASiuB,QACb1lB,EAAO,8CACPq7B,GAAQxP,EAAAA,GAAAA,KAACT,GAAS,CAACp+F,KAAMk+F,GAASY,GAAI9iG,MAAOolE,EAAKrlD,MAAMy8E,KAAKt2F,KAAgBmS,KAAM8pF,GAASM,QAC5F,MACD,KAAKh0B,GAASkuB,QACb3lB,EAAO,yCACP,MACD,KAAKvI,GAASsuB,MACbsV,GAAQxP,EAAAA,GAAAA,KAACT,GAAS,CAACp+F,KAAMk+F,GAASnF,MAAO/8F,MAAOolE,EAAKrlD,MAAMy8E,KAAKt2F,KAAgBmS,KAAM8pF,GAASM,QAC/F,MACD,KAAKh0B,GAASouB,YACbwV,EAAQ,6BAIV,OACCxP,EAAAA,GAAAA,KAAC4C,GAAW,CACXzhG,KAAMyhF,GAAS6sB,KACfpM,OACCrD,EAAAA,GAAAA,KAAC6O,GAAe,CACfpyE,KAAM8lC,EAAKrlD,MAAMy8E,KAAKx4F,KACtB2tG,QAAS36B,EACTp0E,SACCigG,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,kBAAiBlhD,SAC9B0pF,GAAQxP,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,QAAOlhD,SAAE0pF,IAAe,SAKpDtM,WAAW,SACXv9E,SAAU48C,EAAKrlD,MAAMyI,SACrBk1B,QAAS0nB,EAAKrlD,MAAM29B,QAAU0nB,EAAK1nB,QAAU,MAGhD,EAAC0nB,CAAC,CAAD,OAAA5H,EAAA20C,EAAA,CArFmB,CAAS5iE,EAAAA,WAAjB4iE,GACL3lE,aAAe,CACrBhkB,UAAU,EACVk1B,QAAS,MCJJ,IAAM8rD,GAAW,SAAAnH,GAAAz6B,EAAA4hC,EAAAnH,GAAA,IAAAC,EAAA/5B,EAAAihC,GAAA,SAAAA,IAAA,IAAApkC,EAAA76D,EAAA,KAAAi/F,GAAA,QAAAtrF,EAAAvd,UAAAE,OAAA4X,EAAA,IAAAvZ,MAAAgf,GAAAnB,EAAA,EAAAA,EAAAmB,EAAAnB,IAAAtE,EAAAsE,GAAApc,UAAAoc,GA2BrB,OA3BqBqoD,EAAAk9B,EAAAnjG,KAAA+J,MAAAo5F,EAAA,OAAA9lF,OAAA/D,KAMvBilC,QAAU,SAACj5C,GACVA,EAAE4J,kBAEE+2D,EAAKrlD,MAAM29B,SACd0nB,EAAKrlD,MAAM29B,QAAQ0nB,EAAKrlD,MAAM+pC,QAEhC,EAACsb,EAEDj/C,OAAS,WACR,OACC08E,EAAAA,GAAAA,KAAC4C,GAAW,CACXzhG,KAAMyhF,GAAS8sB,QACfrM,OACCrD,EAAAA,GAAAA,KAAC6O,GAAe,CAACpyE,KAAM81C,GAAa2B,gBAAgB3R,EAAKrlD,MAAM+pC,SAAU6nD,QAASv8B,GAAa6B,sBAAsB7R,EAAKrlD,MAAM+pC,WAEjIi8C,WAAY3gC,EAAKrlD,MAAMwnF,QAAU,UACjCtB,WAAY7gC,EAAKrlD,MAAMkmF,WACvBz9E,SAAU48C,EAAKrlD,MAAMyI,SACrBk1B,QAAS0nB,EAAKrlD,MAAM29B,QAAU0nB,EAAK1nB,QAAU,MAGhD,EAAC0nB,CAAC,CAAD,OAAA5H,EAAAgsC,EAAA,CA3BsB,CAASj6D,EAAAA,WAApBi6D,GACLh9D,aAAe,CACrBhkB,UAAU,EACVk1B,QAAS,MCMJ,IAAM80D,GAAQ,SAAAnQ,GAAAz6B,EAAA4qC,EAAAnQ,GAAA,IAAAC,EAAA/5B,EAAAiqC,GAQpB,SAAAA,EAAYzyF,GAAe,IAADqlD,EAIvB,OAJuB76D,EAAA,KAAAioG,IACzBptC,EAAAk9B,EAAAnjG,KAAA,KAAM4gB,IAMP8xF,OAAS,SAACptG,GACTA,EAAE4J,kBAEF+2D,EAAKnL,SAAS,CACbyrC,SAAUtgC,EAAKp9D,MAAM09F,SAEvB,EAACtgC,EAED1nB,QAAU,SAACj5C,GACVA,EAAE4J,kBAEE+2D,EAAKrlD,MAAM29B,SACd0nB,EAAKrlD,MAAM29B,QAAQ0nB,EAAKrlD,MAAMo9E,KAEhC,EAAC/3B,EAEDqtC,iBAAmB,SAAChuG,GACnBA,EAAE4J,kBAEE+2D,EAAKrlD,MAAM0yF,kBACdrtC,EAAKrlD,MAAM0yF,iBAAiBrtC,EAAKrlD,MAAMo9E,KAEzC,EAAC/3B,EAEDstC,SAAW,SAACjuG,GACXA,EAAE4J,kBAEE+2D,EAAKrlD,MAAM2yF,UACdttC,EAAKrlD,MAAM2yF,SAASttC,EAAKrlD,MAAMo9E,KAEjC,EAAC/3B,EAEDj/C,OAAS,WACR,IAAI2pD,EAAQ,KACN6iC,EAAavtC,EAAKrlD,MAAMo9E,KAAKrtB,MAAM9P,QAAO,SAAAp/D,GAAC,OAAIA,EAAEsiF,KAAK,IACxDyvB,EAAW9xG,OAAS,IACvBivE,GACCkzB,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,QAAOlhD,SAAA,EACrBk6E,EAAAA,GAAAA,KAAA,UACAA,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAASmH,aAAa3hF,SAAC,gBAClCgqF,EAAWloD,KAAI,SAAA7pD,GAAC,OAAKiiG,EAAAA,GAAAA,KAACkO,GAAa,CAAYj4F,KAAI,GAAA0D,OAAK5b,EAAEf,KAAI,MAAA2c,OAAK5b,EAAEiiF,SAAQ,MAApCjiF,EAAE61B,GAAyC,QAKxF,IAAMoD,EAAyB,GAC/BA,EAAQx2B,MACPw/F,EAAAA,GAAAA,KAAA,UAAmBh5B,UAAU,WAAWiN,MAAM,OAAOp5B,QAAS0nB,EAAKysC,OAAOlpF,UAACk6E,EAAAA,GAAAA,KAACxB,GAAW,KAA3E,SAETj8B,EAAKrlD,MAAM0yF,kBACd54E,EAAQx2B,MACPw/F,EAAAA,GAAAA,KAAA,UAA8Bh5B,UAAU,WAAWiN,MAAM,kBAAkBp5B,QAAS0nB,EAAKqtC,iBAAiB9pF,UAACk6E,EAAAA,GAAAA,KAACkI,GAAM,KAAtG,oBAGV3lC,EAAKrlD,MAAM2yF,UACd74E,EAAQx2B,MACPw/F,EAAAA,GAAAA,KAAA,UAAqBh5B,UAAU,WAAWiN,MAAM,SAASp5B,QAAS0nB,EAAKstC,SAAS/pF,UAACk6E,EAAAA,GAAAA,KAACkB,GAAK,KAA3E,WAId,IAAMje,EAAU/Q,GAAUgR,WAAW3gB,EAAKrlD,MAAMo9E,KAAK1tB,WAC/C3E,EAAOiK,GAAUiR,QAAQ5gB,EAAKrlD,MAAMo9E,KAAKztB,QACzCuW,EAAalR,GAAUmR,cAAc9gB,EAAKrlD,MAAMo9E,KAAKxtB,cAE3D,OACCkzB,EAAAA,GAAAA,KAAC4C,GAAW,CACXzhG,KAAMyhF,GAAS+F,KACf0a,OACCrD,EAAAA,GAAAA,KAAC6O,GAAe,CACfpyE,KAAM8lC,EAAKrlD,MAAMo9E,KAAKt9F,KACtB+C,SACCogG,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,kBAAiBlhD,SAAA,EAC/Bk6E,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,kBAAiBlhD,UAC/Bk6E,EAAAA,GAAAA,KAACqI,GAAS,CACTrlB,UAAWzgB,EAAKrlD,MAAMo9E,KACtB/2B,UAAW,KACXylC,WAAY,GACZM,cAAe,CAAEjpE,KAAM,EAAGE,IAAK,GAC/BmoE,YAAY,EACZjjF,UAAU,EACVo1B,QAAS,kBAAM,IAAI,OAGrBslD,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,OAAMlhD,SAAA,CACnBm9D,GAAU+c,EAAAA,GAAAA,KAACkE,GAAG,CAAAp+E,SAAEm9D,EAAQjmF,OAAc,KACtCirE,GAAO+3B,EAAAA,GAAAA,KAACkE,GAAG,CAAAp+E,SAAEmiD,EAAKjrE,OAAc,KAChComF,GAAa4c,EAAAA,GAAAA,KAACkE,GAAG,CAAAp+E,SAAEs9D,EAAWpmF,OAAc,MAC7CmjG,EAAAA,GAAAA,MAAC+D,GAAG,CAAAp+E,SAAA,CAAC,SAAOy8C,EAAKrlD,MAAMo9E,KAAK57B,SAC3B6D,EAAKrlD,MAAMo9E,KAAKttB,OAAOplB,KAAI,SAACtb,EAAGxqC,GAAC,OAAKk+F,EAAAA,GAAAA,KAACkE,GAAG,CAAAp+E,SAAUwmB,GAAJxqC,EAAY,YAMjEwhG,MACCnD,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,iBAAgBlhD,SAAA,EAC9Bk6E,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,KAAIlhD,UAClBk6E,EAAAA,GAAAA,KAACsC,GAAK,CACLK,SAAUpgC,EAAKrlD,MAAMo9E,KAAKvtB,GAAKxK,EAAKrlD,MAAMo9E,KAAK57B,MAC/C3+D,SACCogG,EAAAA,GAAAA,MAAA,OAAAr6E,SAAA,EAAKq6E,EAAAA,GAAAA,MAAA,KAAAr6E,SAAA,CAAIy8C,EAAKrlD,MAAMo9E,KAAKvtB,GAAG,SAAO,MAAIxK,EAAKrlD,MAAMo9E,KAAK57B,cAI1DshC,EAAAA,GAAAA,KAAA,UACAG,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,SAAQlhD,SAAA,EACtBk6E,EAAAA,GAAAA,KAAC6D,GAAS,CAACjxC,YAAY,WAAW+tC,MAAM,MAAMxjG,MAAO0lF,GAAegD,aAAatjB,EAAKrlD,MAAMo9E,KAAM,GAAIluB,GAAU0K,cAChHkpB,EAAAA,GAAAA,KAAC6D,GAAS,CAACjxC,YAAY,WAAW+tC,MAAM,MAAMxjG,MAAO0lF,GAAegD,aAAatjB,EAAKrlD,MAAMo9E,KAAM,GAAIluB,GAAU2K,YAChHipB,EAAAA,GAAAA,KAAC6D,GAAS,CAACjxC,YAAY,WAAW+tC,MAAM,MAAMxjG,MAAO0lF,GAAegD,aAAatjB,EAAKrlD,MAAMo9E,KAAM,GAAIluB,GAAUuJ,YAEhH1I,KAGHi2B,WAAW,OACXC,cAAensE,EACf6rE,QAAStgC,EAAKp9D,MAAM09F,QACpBl9E,SAAU48C,EAAKrlD,MAAMyI,SACrBk1B,QAAS0nB,EAAKrlD,MAAM29B,QAAU0nB,EAAK1nB,QAAU0nB,EAAKysC,QAGrD,EA7HCzsC,EAAKp9D,MAAQ,CACZ09F,SAAS,GACRtgC,CACH,CAAC,OAAA5H,EAAAg1C,EAAA,CAbmB,CAASjjE,EAAAA,WAAjBijE,GACLhmE,aAAe,CACrBhkB,UAAU,EACVk1B,QAAS,KACT+0D,iBAAkB,KAClBC,SAAU,MCbL,IAAME,GAAQ,SAAAvQ,GAAAz6B,EAAAgrC,EAAAvQ,GAAA,IAAAC,EAAA/5B,EAAAqqC,GAAA,SAAAA,IAAA,IAAAxtC,EAAA76D,EAAA,KAAAqoG,GAAA,QAAA10F,EAAAvd,UAAAE,OAAA4X,EAAA,IAAAvZ,MAAAgf,GAAAnB,EAAA,EAAAA,EAAAmB,EAAAnB,IAAAtE,EAAAsE,GAAApc,UAAAoc,GAyDlB,OAzDkBqoD,EAAAk9B,EAAAnjG,KAAA+J,MAAAo5F,EAAA,OAAA9lF,OAAA/D,KAOpBilC,QAAU,SAACj5C,GACVA,EAAE4J,kBAEE+2D,EAAKrlD,MAAM29B,SACd0nB,EAAKrlD,MAAM29B,QAAQ0nB,EAAKrlD,MAAM8pF,KAEhC,EAACzkC,EAEDytC,SAAW,SAACpuG,GACXA,EAAE4J,kBAEE+2D,EAAKrlD,MAAM8yF,UACdztC,EAAKrlD,MAAM8yF,SAASztC,EAAKrlD,MAAM8pF,KAEjC,EAACzkC,EAEDj/C,OAAS,WACR,IAAM0T,EAAyB,GAC3BurC,EAAKrlD,MAAM8yF,UACdh5E,EAAQx2B,MACPw/F,EAAAA,GAAAA,KAAA,UAAqBh5B,UAAU,WAAWiN,MAAM,SAASp5B,QAAS0nB,EAAKytC,SAASlqF,UAACk6E,EAAAA,GAAAA,KAACkB,GAAK,KAA3E,WAId,IAAInhG,EAAU,KASd,OARIwiE,EAAKrlD,MAAM8pF,KAAKpzE,KACnB7zB,GACCigG,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,kBAAiBlhD,UAC/Bk6E,EAAAA,GAAAA,KAAC6D,GAAS,CAAClD,MAAM,QAAQxjG,MAAOghG,GAAUC,iBAAiB77B,EAAKrlD,MAAM8pF,KAAKpzE,UAM7EosE,EAAAA,GAAAA,KAAC4C,GAAW,CACXzhG,KAAMyhF,GAASqtB,KACfttF,OAAO,EACP0gF,OACCrD,EAAAA,GAAAA,KAAC6O,GAAe,CACfpyE,KAAM8lC,EAAKrlD,MAAM8pF,KAAKhqG,KACtB8xG,QAASvsC,EAAKrlD,MAAM8pF,KAAKzxF,YACzBxV,QAASA,IAGXmjG,WAAW,OACXC,cAAensE,EACfrR,SAAU48C,EAAKrlD,MAAMyI,SACrBk1B,QAAS0nB,EAAKrlD,MAAM29B,QAAU0nB,EAAK1nB,QAAU,MAGhD,EAAC0nB,CAAC,CAAD,OAAA5H,EAAAo1C,EAAA,CAzDmB,CAASrjE,EAAAA,WAAjBqjE,GACLpmE,aAAe,CACrBhkB,UAAU,EACVk1B,QAAS,KACTm1D,SAAU,MCGL,IAAME,GAAU,SAAA1Q,GAAAz6B,EAAAmrC,EAAA1Q,GAAA,IAAAC,EAAA/5B,EAAAwqC,GAMtB,SAAAA,EAAYhzF,GAAe,IAADqlD,EAIvB,OAJuB76D,EAAA,KAAAwoG,IACzB3tC,EAAAk9B,EAAAnjG,KAAA,KAAM4gB,IAMP8xF,OAAS,SAACptG,GACTA,EAAE4J,kBAEF+2D,EAAKnL,SAAS,CACbyrC,SAAUtgC,EAAKp9D,MAAM09F,SAEvB,EAACtgC,EAED1nB,QAAU,SAACj5C,GACVA,EAAE4J,kBAEE+2D,EAAKrlD,MAAM29B,SACd0nB,EAAKrlD,MAAM29B,QAAQ0nB,EAAKrlD,MAAMqwE,OAEhC,EAAChrB,EAEDj/C,OAAS,WACR,IAAMoqE,EAAWK,GAAiBC,YAAYzrB,EAAKrlD,MAAMqwE,OAAQhrB,EAAKrlD,MAAMngB,QAAQomE,SAClFvb,KAAI,SAAAq7B,GAAO,OAAIA,EAAQjmF,IAAI,IAC3Bq/D,OACAzU,KAAI,SAAClnD,EAAGoB,GAAC,OAAKk+F,EAAAA,GAAAA,KAACkE,GAAG,CAAAp+E,SAAUplB,GAAJoB,EAAY,IAGhCk1B,EAAyB,GAK/B,OAJAA,EAAQx2B,MACPw/F,EAAAA,GAAAA,KAAA,UAAmBh5B,UAAU,WAAWiN,MAAM,OAAOp5B,QAAS0nB,EAAKysC,OAAOlpF,UAACk6E,EAAAA,GAAAA,KAACxB,GAAW,KAA3E,UAIZwB,EAAAA,GAAAA,KAAC4C,GAAW,CACXzhG,KAAMyhF,GAASutB,OACf9M,OACCrD,EAAAA,GAAAA,KAAC6O,GAAe,CACfpyE,KAAM8lC,EAAKrlD,MAAMqwE,OAAOvwF,KACxB+C,SACCogG,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,oBAAmBlhD,SAAA,EACjCk6E,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,gBAAelhD,UAC7Bk6E,EAAAA,GAAAA,KAACmF,GAAgB,CAChBv9C,IAAK2a,EAAKrlD,MAAM0qC,IAChBv4C,KAAK,SACLm2F,eAAgBjjC,EAAKrlD,MAAMqwE,YAG7ByS,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,iBAAgBlhD,UAC9Bk6E,EAAAA,GAAAA,KAAC6D,GAAS,CACTjxC,YAAY,WACZ+tC,MAA+C,IAAxCp+B,EAAKrlD,MAAMqwE,OAAO1pB,WAAW7lE,OAAe,YAAc,aACjEb,MAAOolE,EAAKrlD,MAAMqwE,OAAO1pB,WAAW7lE,gBAO1CslG,MACCnD,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,mBAAkBlhD,SAAA,EAChCk6E,EAAAA,GAAAA,KAAC6D,GAAS,CAAClD,MAAM,aAAaxjG,MAAK,GAAAwc,OAAK4oD,EAAKrlD,MAAMqwE,OAAO8O,aAAaC,WAAU,WACjF0D,EAAAA,GAAAA,KAAC6D,GAAS,CAAClD,MAAM,OAAOxjG,MAAK,GAAAwc,OAAK4oD,EAAKrlD,MAAMqwE,OAAO8O,aAAa7mF,KAAI,aACrEwqF,EAAAA,GAAAA,KAAC6D,GAAS,CAAClD,MAAM,UAAUxjG,MAAOolE,EAAKrlD,MAAMqwE,OAAO8O,aAAaE,WACjEyD,EAAAA,GAAAA,KAAA,UACAA,EAAAA,GAAAA,KAAC6D,GAAS,CAAClD,MAAM,WAAWxjG,MAAOuwF,OAGrCwV,WAAW,SACXC,cAAensE,EACf6rE,QAAStgC,EAAKp9D,MAAM09F,QACpBl9E,SAAU48C,EAAKrlD,MAAMyI,SACrBk1B,QAAS0nB,EAAKrlD,MAAM29B,QAAU0nB,EAAK1nB,QAAU0nB,EAAKysC,QAGrD,EA3ECzsC,EAAKp9D,MAAQ,CACZ09F,SAAS,GACRtgC,CACH,CAAC,OAAA5H,EAAAu1C,EAAA,CAXqB,CAASxjE,EAAAA,WAAnBwjE,GACLvmE,aAAe,CACrBhkB,UAAU,EACVk1B,QAAS,MCLJ,IAAMu1D,GAAQ,SAAA5Q,GAAAz6B,EAAAqrC,EAAA5Q,GAAA,IAAAC,EAAA/5B,EAAA0qC,GAMpB,SAAAA,EAAYlzF,GAAe,IAADqlD,EAIvB,OAJuB76D,EAAA,KAAA0oG,IACzB7tC,EAAAk9B,EAAAnjG,KAAA,KAAM4gB,IAMP8xF,OAAS,SAACptG,GACTA,EAAE4J,kBAEF+2D,EAAKnL,SAAS,CACbyrC,SAAUtgC,EAAKp9D,MAAM09F,SAEvB,EAACtgC,EAED1nB,QAAU,SAACj5C,GACVA,EAAE4J,kBAEE+2D,EAAKrlD,MAAM29B,SACd0nB,EAAKrlD,MAAM29B,QAAQ0nB,EAAKrlD,MAAM+qD,KAEhC,EAAC1F,EAEDj/C,OAAS,WACR,IAAIuzD,EAAmB,KACnBtU,EAAKrlD,MAAM+qD,KAAK4O,iBAAiB74E,OAAS,IAC7C64E,GACCspB,EAAAA,GAAAA,MAAA,OAAAr6E,SAAA,EACCk6E,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAASmH,aAAa3hF,SAAC,eAClCy8C,EAAKrlD,MAAM+qD,KAAK4O,iBAAiBjvB,KAAI,SAAAzlD,GAAC,OAAI69F,EAAAA,GAAAA,KAACkO,GAAa,CAAYj4F,KAAMs8D,GAAayB,sBAAsB7xE,IAA/CA,EAAEyxB,GAAmD,QAKvH,IAAIw/B,EAAW,KACXmP,EAAKrlD,MAAM+qD,KAAK7U,SAASp1D,OAAS,IACrCo1D,GACC+sC,EAAAA,GAAAA,MAAA,OAAAr6E,SAAA,EACCk6E,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAASmH,aAAa3hF,SAAC,aAClCy8C,EAAKrlD,MAAM+qD,KAAK7U,SAASxL,KAAI,SAAAzlD,GAAC,OAAI69F,EAAAA,GAAAA,KAACkO,GAAa,CAAYj4F,KAAMs8D,GAAayB,sBAAsB7xE,IAA/CA,EAAEyxB,GAAmD,QAK/G,IAAIk6C,EAAU,KACVvL,EAAKrlD,MAAM+qD,KAAK6F,QAAQ9vE,OAAS,IACpC8vE,GACCqyB,EAAAA,GAAAA,MAAA,OAAAr6E,SAAA,EACCk6E,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAASmH,aAAa3hF,SAAC,YAClCy8C,EAAKrlD,MAAM+qD,KAAK6F,QAAQlmB,KAAI,SAAA9oC,GAAC,OAAIkhF,EAAAA,GAAAA,KAACkO,GAAa,CAAYj4F,KAAM4zE,GAAYkL,qBAAqBj2E,IAA7CA,EAAE8U,GAAiD,QAK5G,IAAMoD,EAAyB,GAK/B,OAJAA,EAAQx2B,MACPw/F,EAAAA,GAAAA,KAAA,UAAmBh5B,UAAU,WAAWiN,MAAM,OAAOp5B,QAAS0nB,EAAKysC,OAAOlpF,UAACk6E,EAAAA,GAAAA,KAACxB,GAAW,KAA3E,UAIZwB,EAAAA,GAAAA,KAAC4C,GAAW,CACXzhG,KAAMyhF,GAASwC,KACfie,OACCrD,EAAAA,GAAAA,KAAC6O,GAAe,CACfpyE,KAAM8lC,EAAKrlD,MAAM+qD,KAAKjrE,KACtB8xG,QAASvsC,EAAKrlD,MAAM+qD,KAAK1yD,cAG3B+tF,MACCnD,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,iBAAgBlhD,SAAA,CAC7B+wD,EACAzjB,EACA0a,KAGHo1B,WAAW,OACXC,cAAensE,EACf6rE,QAAStgC,EAAKp9D,MAAM09F,QACpBl9E,SAAU48C,EAAKrlD,MAAMyI,SACrBk1B,QAAS0nB,EAAKrlD,MAAM29B,QAAU0nB,EAAK1nB,QAAU0nB,EAAKysC,QAGrD,EAhFCzsC,EAAKp9D,MAAQ,CACZ09F,SAAS,GACRtgC,CACH,CAAC,OAAA5H,EAAAy1C,EAAA,CAXmB,CAAS1jE,EAAAA,WAAjB0jE,GACLzmE,aAAe,CACrBhkB,UAAU,EACVk1B,QAAS,MCFJ,IAAMw1D,GAAW,SAAA7Q,GAAAz6B,EAAAsrC,EAAA7Q,GAAA,IAAAC,EAAA/5B,EAAA2qC,GAMvB,SAAAA,EAAYnzF,GAAe,IAADqlD,EAIvB,OAJuB76D,EAAA,KAAA2oG,IACzB9tC,EAAAk9B,EAAAnjG,KAAA,KAAM4gB,IAMP8xF,OAAS,SAACptG,GACTA,EAAE4J,kBAEF+2D,EAAKnL,SAAS,CACbyrC,SAAUtgC,EAAKp9D,MAAM09F,SAEvB,EAACtgC,EAED1nB,QAAU,SAACj5C,GACVA,EAAE4J,kBAEE+2D,EAAKrlD,MAAM29B,SACd0nB,EAAKrlD,MAAM29B,QAAQ0nB,EAAKrlD,MAAM+lE,QAEhC,EAAC1gB,EAEDj/C,OAAS,WACR,IAAMsrF,EAAOrsC,EAAKrlD,MAAM+lE,QAAQjW,OAAOplB,KAAI,SAACtb,EAAGxqC,GAAC,OAAKk+F,EAAAA,GAAAA,KAACkE,GAAG,CAAAp+E,SAAUwmB,GAAJxqC,EAAY,IAEvE0T,EAAO,KACqB,IAA5B+sD,EAAKrlD,MAAM+lE,QAAQztE,OACtBA,GACC2qF,EAAAA,GAAAA,MAAA,OAAAr6E,SAAA,EACCk6E,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAASmH,aAAa3hF,SAAC,UACnCk6E,EAAAA,GAAAA,KAACkO,GAAa,CAACj4F,KAAI,GAAA0D,OAAK4oD,EAAKrlD,MAAM+lE,QAAQztE,YAK9C,IAAIqhE,EAAmB,KACnBtU,EAAKrlD,MAAM+lE,QAAQpM,iBAAiB74E,OAAS,IAChD64E,GACCspB,EAAAA,GAAAA,MAAA,OAAAr6E,SAAA,EACCk6E,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAASmH,aAAa3hF,SAAC,eAClCy8C,EAAKrlD,MAAM+lE,QAAQpM,iBAAiBjvB,KAAI,SAAAzlD,GAAC,OAAI69F,EAAAA,GAAAA,KAACkO,GAAa,CAAYj4F,KAAMs8D,GAAayB,sBAAsB7xE,IAA/CA,EAAEyxB,GAAmD,QAK1H,IAAIw/B,EAAW,KACXmP,EAAKrlD,MAAM+lE,QAAQ7vB,SAASp1D,OAAS,IACxCo1D,GACC+sC,EAAAA,GAAAA,MAAA,OAAAr6E,SAAA,EACCk6E,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAASmH,aAAa3hF,SAAC,aAClCy8C,EAAKrlD,MAAM+lE,QAAQ7vB,SAASxL,KAAI,SAAAzlD,GAAC,OAAI69F,EAAAA,GAAAA,KAACkO,GAAa,CAAYj4F,KAAMs8D,GAAayB,sBAAsB7xE,IAA/CA,EAAEyxB,GAAmD,QAKlH,IAAIk6C,EAAU,KACVvL,EAAKrlD,MAAM+lE,QAAQnV,QAAQ9vE,OAAS,IACvC8vE,GACCqyB,EAAAA,GAAAA,MAAA,OAAAr6E,SAAA,EACCk6E,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAASmH,aAAa3hF,SAAC,YAClCy8C,EAAKrlD,MAAM+lE,QAAQnV,QAAQlmB,KAAI,SAAA9oC,GAAC,OAAIkhF,EAAAA,GAAAA,KAACkO,GAAa,CAAYj4F,KAAM4zE,GAAYkL,qBAAqBj2E,IAA7CA,EAAE8U,GAAiD,QAK/G,IAAMoD,EAAyB,GAK/B,OAJAA,EAAQx2B,MACPw/F,EAAAA,GAAAA,KAAA,UAAmBh5B,UAAU,WAAWiN,MAAM,OAAOp5B,QAAS0nB,EAAKysC,OAAOlpF,UAACk6E,EAAAA,GAAAA,KAACxB,GAAW,KAA3E,UAIZwB,EAAAA,GAAAA,KAAC4C,GAAW,CACXzhG,KAAMyhF,GAASuC,QACfke,OACCrD,EAAAA,GAAAA,KAAC6O,GAAe,CACfpyE,KAAM8lC,EAAKrlD,MAAM+lE,QAAQjmF,KACzB8xG,QAASvsC,EAAKrlD,MAAM+lE,QAAQ1tE,YAC5BxV,SACCigG,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,qBAAoBlhD,SAChC8oF,EAAK5wG,OAAS,GAAIgiG,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,OAAMlhD,SAAE8oF,IAAc,SAK7DtL,MACCnD,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,oBAAmBlhD,SAAA,CAChCtQ,EACAqhE,EACAzjB,EACA0a,KAGHo1B,WAAY3gC,EAAKrlD,MAAM+lE,QAAQ9hF,OAAS2qE,GAAc6c,KAAO,UAAY,UACzEwa,cAAensE,EACf6rE,QAAStgC,EAAKp9D,MAAM09F,QACpBl9E,SAAU48C,EAAKrlD,MAAMyI,SACrBk1B,QAAS0nB,EAAKrlD,MAAM29B,QAAU0nB,EAAK1nB,QAAU0nB,EAAKysC,QAGrD,EAlGCzsC,EAAKp9D,MAAQ,CACZ09F,SAAS,GACRtgC,CACH,CAAC,OAAA5H,EAAA01C,EAAA,CAXsB,CAAS3jE,EAAAA,WAApB2jE,GACL1mE,aAAe,CACrBhkB,UAAU,EACVk1B,QAAS,MC9BX,IAAAy1D,GAAepT,GAAqB,eAAgB,kBAAmB,CACrE,CAAC,OAAQ,CAAEr9E,EAAG,6CAA8CpjB,IAAK,UACjE,CAAC,OAAQ,CAAEojB,EAAG,YAAapjB,IAAK,YCFlC8zG,GAAerT,GAAqB,cAAe,iBAAkB,CACnE,CAAC,OAAQ,CAAEr9E,EAAG,uCAAwCpjB,IAAK,UAC3D,CAAC,OAAQ,CAAEojB,EAAG,UAAWpjB,IAAK,UAC9B,CAAC,OAAQ,CAAEojB,EAAG,UAAWpjB,IAAK,YCgBnB+zG,GAAqB,SAAAhR,GAAAz6B,EAAAyrC,EAAAhR,GAAA,IAAAC,EAAA/5B,EAAA8qC,GAAA,SAAAA,IAAA,IAAAjuC,EAAA76D,EAAA,KAAA8oG,GAAA,QAAAn1F,EAAAvd,UAAAE,OAAA4X,EAAA,IAAAvZ,MAAAgf,GAAAnB,EAAA,EAAAA,EAAAmB,EAAAnB,IAAAtE,EAAAsE,GAAApc,UAAAoc,GAqF/B,OArF+BqoD,EAAAk9B,EAAAnjG,KAAA+J,MAAAo5F,EAAA,OAAA9lF,OAAA/D,KAQjCilC,QAAU,WACL0nB,EAAKrlD,MAAMuzF,UACdluC,EAAKrlD,MAAMuzF,WAGRluC,EAAKrlD,MAAMwzF,OACdnuC,EAAKrlD,MAAMwzF,OAEb,EAACnuC,EAEDouC,QAAU,SAACC,GACNruC,EAAKrlD,MAAMi0C,UACdoR,EAAKrlD,MAAMi0C,SAASoR,EAAKrlD,MAAM+hE,KAAO2xB,EAExC,EAACruC,EAEDj/C,OAAS,WACR,IACC,IAAIvjB,EAAU,KAuCd,OArCIwiE,EAAKrlD,MAAMuzF,WACd1wG,GACCigG,EAAAA,GAAAA,KAACT,GAAS,CACTp+F,KAAMk+F,GAASa,OACf/iG,MAAOolE,EAAKrlD,MAAM2zF,UAClBr7F,KAAM8pF,GAASM,SAKdr9B,EAAKrlD,MAAMwzF,QACd3wG,GACCigG,EAAAA,GAAAA,KAAC6D,GAAS,CACTjxC,YAAY,WACZ+tC,MAAM,OACNxjG,MAAOolE,EAAKrlD,MAAM2zF,aAKjBtuC,EAAKrlD,MAAMi0C,WACdpxD,GACCogG,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,OAAMlhD,SAAA,EACpBk6E,EAAAA,GAAAA,KAAC6D,GAAS,CAACjxC,YAAY,WAAW+tC,MAAM,YAAYxjG,MAAOolE,EAAKrlD,MAAM8lD,UAAYT,EAAKrlD,MAAM2zF,UAAYtuC,EAAKrlD,MAAM2zF,UAAYtuC,EAAKrlD,MAAM+hE,QAC3IkhB,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,eAAclhD,SAAA,EAC5Bk6E,EAAAA,GAAAA,KAAA,UAAQh5B,UAAU,WAAWrhD,SAA8B,IAApB48C,EAAKrlD,MAAM+hE,KAAYpkC,QAAS,kBAAM0nB,EAAKouC,SAAS,EAAE,EAAC7qF,UAC7Fk6E,EAAAA,GAAAA,KAACsQ,GAAe,OAEjBtQ,EAAAA,GAAAA,KAAC6D,GAAS,CAACjxC,YAAY,WAAW+tC,MAAM,OAAOxjG,MAAOolE,EAAKrlD,MAAM+hE,QACjE+gB,EAAAA,GAAAA,KAAA,UAAQh5B,UAAU,WAAWrhD,SAAW48C,EAAKrlD,MAAM+hE,OAAS1c,EAAKrlD,MAAM2zF,YAAetuC,EAAKrlD,MAAM8lD,UAAWnoB,QAAS,kBAAM0nB,EAAKouC,QAAQ,EAAE,EAAC7qF,UAC1Ik6E,EAAAA,GAAAA,KAACuQ,GAAc,cAQnBvQ,EAAAA,GAAAA,KAAC4C,GAAW,CACXzhG,KAAMyhF,GAASwX,UACfiJ,OACCrD,EAAAA,GAAAA,KAAC6O,GAAe,CACf9uG,SACCogG,EAAAA,GAAAA,MAAA,OAAKn5B,UAAWzE,EAAKrlD,MAAM8lD,UAAY,oCAAsC,0BAA0Bl9C,SAAA,EACtGk6E,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAASmE,WAAW3+E,SAAEy8C,EAAKrlD,MAAMyjF,QAC5C5gG,OAKLmjG,WAAW,qBACXroD,QAAS0nB,EAAK1nB,SAGjB,CAAE,MAAAssC,GACD,OAAO6Y,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,wCACvB,CACD,EAACzE,CAAC,CAAD,OAAA5H,EAAA61C,EAAA,CArFgC,CAAS9jE,EAAAA,WAA9B8jE,GACL7mE,aAAe,CACrBs1C,KAAM,EACNwxB,SAAU,KACVC,MAAO,KACPv/C,SAAU,MCIL,IAAM2/C,GAAiB,SAAAtR,GAAAz6B,EAAA+rC,EAAAtR,GAAA,IAAAC,EAAA/5B,EAAAorC,GAC7B,SAAAA,EAAY5zF,GAAe,IAADqlD,EAMvB,OANuB76D,EAAA,KAAAopG,IACzBvuC,EAAAk9B,EAAAnjG,KAAA,KAAM4gB,IAQP6zF,SAAW,WACV,IAAM9jC,EAAQiF,GAAUkO,YAAY7d,EAAKrlD,MAAMngB,QAAQomE,SACrDhG,QAAO,SAAAp/D,GAAC,OAAKA,EAAEixE,cAAgBzM,EAAKp9D,MAAM6pE,aAAiBzM,EAAKp9D,MAAM6pE,cAAgB9C,GAAoBsI,GAAI,IAC9GrX,QAAO,SAAAp/D,GAAC,OAAKA,EAAEsf,WAAaklD,EAAKp9D,MAAMkY,UAAcklD,EAAKp9D,MAAMkY,WAAa4uD,GAAiBuI,GAAI,IAEpG,OAAOpY,EAAYC,KAAK4Q,GAAO,SAAAnrE,GAAC,OAAIA,EAAE9E,IAAI,GAC3C,EAACulE,EAEDj/C,OAAS,WACR,IACC,IAAMu9E,EAAQt+B,EAAKwuC,WACjBnpD,KAAI,SAAA3xC,GAAI,OACR+pF,EAAAA,GAAAA,KAACiP,GAAQ,CAAeh5F,KAAMA,EAAM4kC,QAAS0nB,EAAKrlD,MAAM8zF,SAAzC/6F,EAAK2d,GAA+C,IAGrE,OACCusE,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,sBAAqBlhD,SAAA,EACnCk6E,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAASwG,QAAQhhF,SAAC,mBAC9Bk6E,EAAAA,GAAAA,KAAA,UACAG,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,qBAAoBlhD,SAAA,EAClCk6E,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAASmE,WAAW3+E,SAAC,2BACjCk6E,EAAAA,GAAAA,KAACuD,GAAQ,CACRxmG,QAAS,CACR,CAAE62B,GAAIs4C,GAAoBsI,IAAKl3B,QAAS,mBACxC,CAAE1pB,GAAIs4C,GAAoBwC,KAAMpxB,QAAS,kBACzC,CAAE1pB,GAAIs4C,GAAoBuX,iBAC1B,CAAE7vD,GAAIs4C,GAAoB6M,cAC1B,CAAEnlD,GAAIs4C,GAAoBwX,eAC1B,CAAE9vD,GAAIs4C,GAAoByX,eAC1B,CAAE/vD,GAAIs4C,GAAoB0X,eAC1B,CAAEhwD,GAAIs4C,GAAoByV,YAC1B,CAAE/tD,GAAIs4C,GAAoB2X,YAC1B,CAAEjwD,GAAIs4C,GAAoB4X,YAC1B,CAAElwD,GAAIs4C,GAAoB6X,UAE3Br8D,YAAa,EACbg8E,WAAYnhC,EAAKp9D,MAAM6pE,YACvB20B,SAAU,SAAAxf,GAAI,OAAI5hB,EAAKnL,SAAS,CAAE4X,YAAamV,GAA8B,KAE9E6b,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAASmE,WAAW3+E,SAAC,wBACjCk6E,EAAAA,GAAAA,KAACuD,GAAQ,CACRxmG,QAAS,CACR,CAAE62B,GAAIq4C,GAAiBuI,IAAKl3B,QAAS,gBACrC,CAAE1pB,GAAIq4C,GAAiBgW,MACvB,CAAEruD,GAAIq4C,GAAiBqW,MACvB,CAAE1uD,GAAIq4C,GAAiB2rB,MACvB,CAAEhkE,GAAIq4C,GAAiBoW,MACvB,CAAEzuD,GAAIq4C,GAAiBsY,MACvB,CAAE3wD,GAAIq4C,GAAiBuY,OAExBkf,WAAYnhC,EAAKp9D,MAAMkY,SACvBsmF,SAAU,SAAAsN,GAAG,OAAI1uC,EAAKnL,SAAS,CAAE/5C,SAAU4zF,GAA0B,KAEtEjR,EAAAA,GAAAA,KAAA,UACAA,EAAAA,GAAAA,KAACY,GAAQ,CAACC,MAAOA,SAIrB,CAAE,MAAA1Z,GACD,OAAO6Y,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,oCACvB,CACD,EAnECzE,EAAKp9D,MAAQ,CACZ6pE,YAAa9C,GAAoBsI,IACjCn3D,SAAU4uD,GAAiBuI,KAC1BjS,CACH,CAAC,OAAA5H,EAAAm2C,EAAA,CAR4B,CAASpkE,EAAAA,WCG1BwkE,GAAiB,SAAA1R,GAAAz6B,EAAAmsC,EAAA1R,GAAA,IAAAC,EAAA/5B,EAAAwrC,GAC7B,SAAAA,EAAYh0F,GAAe,IAADqlD,EAKvB,OALuB76D,EAAA,KAAAwpG,IACzB3uC,EAAAk9B,EAAAnjG,KAAA,KAAM4gB,IAOP6zF,SAAW,WAGV,IAFA,IAAM9jC,EAAqB,GAAGnG,EAAA,WAG7B,IAAM7wD,EAAO6pE,GAAmBK,wBAAwB5d,EAAKrlD,MAAMngB,QAAQomE,SAEvEnlB,GAAK,EAGHqlB,EAASd,EAAKrlD,MAAMglD,KAAKmB,OAC7BlG,QAAO,SAAAj6C,GAAC,OAAKjN,EAAK+4D,cAAgB9C,GAAoBwC,MAASmU,GAAemB,iBAAiB9gE,GAAGpK,SAAS7C,EAAK+4D,YAAY,IACxG,IAAlB3L,EAAOrlE,SACVggD,GAAK,GAIF/nC,EAAKq/D,QACJrI,EAAM9P,QAAO,SAAAp/D,GAAC,OAAIA,EAAEu3E,MAAM,IAAEt3E,OAAS,IACxCggD,GAAK,GAKH/nC,EAAK6qE,OACJ7T,EAAM9P,QAAO,SAAAp/D,GAAC,OAAIA,EAAE+iF,KAAK,IAAE9iF,OAAS,IACvCggD,GAAK,GAIHA,GACHivB,EAAMzsE,KAAKyV,EAEb,EA7BOg3D,EAAMjvE,OAAS,GAAC8oE,IA+BvB,OAAO1K,EAAYC,KAAK4Q,GAAO,SAAAnrE,GAAC,OAAIA,EAAE9E,IAAI,GAC3C,EAACulE,EAED4uC,OAAS,WACR5uC,EAAKnL,SAAS,CACb04C,WAAYvtC,EAAKwuC,aACf,WACGxuC,EAAKrlD,MAAMngB,QAAQimE,WACvBT,EAAKrlD,MAAMklD,UAAU/D,EAAc4B,YAAa,EAElD,GACD,EAACsC,EAEDj/C,OAAS,WACR,IACC,IAAMu9E,EAAQt+B,EAAKp9D,MAAM2qG,WAAWloD,KAAI,SAAA3xC,GAAI,OAC3C+pF,EAAAA,GAAAA,KAACiP,GAAQ,CAAeh5F,KAAMA,EAAM4kC,QAAS0nB,EAAKrlD,MAAM8zF,SAAzC/6F,EAAK2d,GAA+C,IAG9Dw9E,EAAUvwC,EAAgBsB,oBAAoBI,EAAKrlD,MAAMglD,KAAM7D,EAAc4B,aAanF,OAZKmxC,EAAU,GAAM7uC,EAAKrlD,MAAMngB,QAAQimE,YACvC69B,EAAMrgG,MACLw/F,EAAAA,GAAAA,KAACwQ,GAAqB,CAErB7P,MAAM,SACNkQ,UAAWO,EACXpuC,UAAWT,EAAKrlD,MAAMngB,QAAQimE,UAC9BytC,SAAUluC,EAAK4uC,QAJX,YAUNhR,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,uBAAsBlhD,SAAA,EACpCk6E,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAASwG,QAAQhhF,SAAC,yBAC9Bk6E,EAAAA,GAAAA,KAAA,UACAA,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAAS0H,YAAYliF,UAChCk6E,EAAAA,GAAAA,KAAA,KAAAl6E,SAAG,oFAEJk6E,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,qBAAoBlhD,UAClCk6E,EAAAA,GAAAA,KAACY,GAAQ,CAACvxF,KAAK,MAAMwxF,MAAOA,QAIhC,CAAE,MAAA1Z,GACD,OAAO6Y,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,qCACvB,CACD,EAtFCzE,EAAKp9D,MAAQ,CACZ2qG,WAAYvtC,EAAKwuC,YAChBxuC,CACH,CAAC,OAAA5H,EAAAu2C,EAAA,CAP4B,CAASxkE,EAAAA,WCF1B2kE,GAAc,SAAA7R,GAAAz6B,EAAAssC,EAAA7R,GAAA,IAAAC,EAAA/5B,EAAA2rC,GAC1B,SAAAA,EAAYn0F,GAAe,IAADqlD,EAKvB,OALuB76D,EAAA,KAAA2pG,IACzB9uC,EAAAk9B,EAAAnjG,KAAA,KAAM4gB,IAOP6zF,SAAW,WAGV,IAFA,IAAM9jC,EAAqB,GAEpBA,EAAMjvE,OAAS,GAAG,CACxB,IAAMggE,EAAUkU,GAAUqc,cAAchsB,EAAKrlD,MAAMngB,QAAQomE,SACrDltD,EAAOmmD,EAAYY,KAAKgB,GACzBiP,EAAMrlB,KAAI,SAAA7pD,GAAC,OAAIA,EAAEf,IAAI,IAAE8b,SAAS7C,EAAKjZ,QACzCiZ,EAAK2d,GAAKssC,EAAMC,OAChB8M,EAAMzsE,KAAKyV,GAEb,CAEA,OAAOmmD,EAAYC,KAAK4Q,GAAO,SAAAnrE,GAAC,OAAIA,EAAE9E,IAAI,GAC3C,EAACulE,EAED4uC,OAAS,WACR5uC,EAAKnL,SAAS,CACb4G,QAASuE,EAAKwuC,aACZ,WACGxuC,EAAKrlD,MAAMngB,QAAQimE,WACvBT,EAAKrlD,MAAMklD,UAAU/D,EAAc4B,YAAa,EAElD,GACD,EAACsC,EAEDj/C,OAAS,WACR,IACC,IAAMu9E,EAAQt+B,EAAKp9D,MAAM64D,QAAQpW,KAAI,SAAA3xC,GAAI,OACxC+pF,EAAAA,GAAAA,KAACiP,GAAQ,CAAeh5F,KAAMA,EAAM4kC,QAAS0nB,EAAKrlD,MAAM8zF,SAAzC/6F,EAAK2d,GAA+C,IAG9Dw9E,EAAUvwC,EAAgBsB,oBAAoBI,EAAKrlD,MAAMglD,KAAM7D,EAAc4B,aAanF,OAZKmxC,EAAU,GAAM7uC,EAAKrlD,MAAMngB,QAAQimE,YACvC69B,EAAMrgG,MACLw/F,EAAAA,GAAAA,KAACwQ,GAAqB,CAErB7P,MAAM,SACNkQ,UAAWO,EACXpuC,UAAWT,EAAKrlD,MAAMngB,QAAQimE,UAC9BytC,SAAUluC,EAAK4uC,QAJX,YAUNhR,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,mBAAkBlhD,SAAA,EAChCk6E,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAASwG,QAAQhhF,SAAC,qBAC9Bk6E,EAAAA,GAAAA,KAAA,UACAA,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAAS0H,YAAYliF,UAChCk6E,EAAAA,GAAAA,KAAA,KAAAl6E,SAAG,uFAEJk6E,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,qBAAoBlhD,UAClCk6E,EAAAA,GAAAA,KAACY,GAAQ,CAACvxF,KAAK,MAAMwxF,MAAOA,QAIhC,CAAE,MAAA1Z,GACD,OAAO6Y,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,iCACvB,CACD,EAhECzE,EAAKp9D,MAAQ,CACZ64D,QAASuE,EAAKwuC,YACbxuC,CACH,CAAC,OAAA5H,EAAA02C,EAAA,CAPyB,CAAS3kE,EAAAA,WCFvB4kE,GAAK,SAAA9R,GAAAz6B,EAAAusC,EAAA9R,GAAA,IAAAC,EAAA/5B,EAAA4rC,GAAA,SAAAA,IAAA,IAAA/uC,EAAA76D,EAAA,KAAA4pG,GAAA,QAAAj2F,EAAAvd,UAAAE,OAAA4X,EAAA,IAAAvZ,MAAAgf,GAAAnB,EAAA,EAAAA,EAAAmB,EAAAnB,IAAAtE,EAAAsE,GAAApc,UAAAoc,GAgPf,OAhPeqoD,EAAAk9B,EAAAnjG,KAAA+J,MAAAo5F,EAAA,OAAA9lF,OAAA/D,KACjB27F,mBAAqB,SAACl0F,GACrB,IAAI2pD,EAAY,mBACZ25B,EAAQtjF,EAASthB,WACrB,OAAQshB,GACP,KAAK4uD,GAAiBsY,KACtB,KAAKtY,GAAiBuY,KACrBxd,GAAa,UACb25B,GAAS,IAGX,IAAME,EAAQt+B,EAAKrlD,MAAM8lE,UAAU/V,MACjC9P,QAAO,SAAAlnD,GAAI,OAAIoH,IAAapH,EAAKoH,QAAQ,IACzCuqC,KAAI,SAAA3xC,GACJ,IAAIu7F,EAAgC,QAChCjvC,EAAKrlD,MAAMglD,KAAKqB,WAAchB,EAAKrlD,MAAM8lE,UAAU1f,UAAYwI,GAAc6c,OAChF6oB,GACCrR,EAAAA,GAAAA,MAAA,OAAAr6E,SAAA,CAAK,SAAKk6E,EAAAA,GAAAA,KAAA,UAAMA,EAAAA,GAAAA,KAACT,GAAS,CAACp+F,KAAMk+F,GAASU,SAAU5iG,MAAO,EAAGqY,KAAM8pF,GAASK,aAI/E,IAAI5iG,GACHojG,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,eAAclhD,SAAA,EAC5Bk6E,EAAAA,GAAAA,KAAA,UAAQr6E,SAAU48C,EAAKrlD,MAAM8lE,UAAU9V,QAAQlvE,QAAU6kF,GAAeC,eAAgBjoC,QAAS,kBAAM0nB,EAAKrlD,MAAM4uE,YAAY71E,EAAK,EAAC6P,SAClI0rF,KAEFxR,EAAAA,GAAAA,KAAA,UAAQnlD,QAAS,kBAAM0nB,EAAKrlD,MAAM+uE,SAASh2E,EAAK,EAAC6P,SAAC,YAYpD,OAPIy8C,EAAKrlD,MAAM8lE,UAAU1f,UAAYwI,GAAc6c,OAClD5rF,EAAU,MAELwlE,EAAKrlD,MAAMglD,KAAKqB,YAAchB,EAAKrlD,MAAM8lE,UAAU7V,OAAOx/C,UAC/D5wB,EAAU,OAIVojG,EAAAA,GAAAA,MAAA,OAAmBn5B,UAAU,OAAMlhD,SAAA,EAClCk6E,EAAAA,GAAAA,KAACiP,GAAQ,CAACh5F,KAAMA,IACflZ,IAFQkZ,EAAK2d,GAKjB,IAWD,OATqB,IAAjBitE,EAAM7iG,QACT6iG,EAAMrgG,MACL2/F,EAAAA,GAAAA,MAAA,OAAiBn5B,UAAU,OAAMlhD,SAAA,EAChCk6E,EAAAA,GAAAA,KAAC4C,GAAW,CAACS,OAAOrD,EAAAA,GAAAA,KAAC6O,GAAe,CAACC,QAAQ,eAC7C9O,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,mBAFP,WAQVg5B,EAAAA,GAAAA,KAAA,OAAKh5B,UAAWA,EAAUlhD,UACzBk6E,EAAAA,GAAAA,KAACU,GAAG,CAACC,MAAOA,EAAM76E,UACjBk6E,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,QAAOlhD,SACpB+6E,OAKN,EAACt+B,EAEDkvC,sBAAwB,WACvB,IAAM5Q,EAAQt+B,EAAKrlD,MAAM8lE,UAAU9V,QACjC7Q,MAAK,SAACv9C,EAAGC,GAAC,OAAKD,EAAE9hB,KAAK2/D,cAAc59C,EAAE/hB,KAAK,IAC3C4qD,KAAI,SAAA3xC,GACJ,IAAIy7F,EAA8B,QAC9BnvC,EAAKrlD,MAAMglD,KAAKqB,WAAchB,EAAKrlD,MAAM8lE,UAAU1f,UAAYwI,GAAc6c,OAChF+oB,GACCvR,EAAAA,GAAAA,MAAA,OAAAr6E,SAAA,CAAK,SAAKk6E,EAAAA,GAAAA,KAAA,UAAMA,EAAAA,GAAAA,KAACT,GAAS,CAACp+F,KAAMk+F,GAASU,SAAU5iG,MAAO,EAAGqY,KAAM8pF,GAASK,aAI/E,IAAI5iG,GACHojG,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,eAAclhD,SAAA,EAC5Bk6E,EAAAA,GAAAA,KAAA,UAAQr6E,UAAWk9D,GAAewB,SAAS9hB,EAAKrlD,MAAM8lE,UAAW/sE,GAAO4kC,QAAS,kBAAM0nB,EAAKrlD,MAAM2uE,UAAU51E,EAAK,EAAC6P,SAChH4rF,KAEF1R,EAAAA,GAAAA,KAAA,UAAQnlD,QAAS,kBAAM0nB,EAAKrlD,MAAM+uE,SAASh2E,EAAK,EAAC6P,SAAC,YAYpD,OAPIy8C,EAAKrlD,MAAM8lE,UAAU1f,UAAYwI,GAAc6c,OAClD5rF,EAAU,MAELwlE,EAAKrlD,MAAMglD,KAAKqB,YAAchB,EAAKrlD,MAAM8lE,UAAU7V,OAAOx/C,UAC/D5wB,EAAU,OAIVojG,EAAAA,GAAAA,MAAA,OAAmBn5B,UAAU,OAAMlhD,SAAA,EAClCk6E,EAAAA,GAAAA,KAACiP,GAAQ,CAACh5F,KAAMA,IACflZ,IAFQkZ,EAAK2d,GAKjB,IAWD,OAT4C,IAAxC2uC,EAAKrlD,MAAM8lE,UAAU9V,QAAQlvE,QAChC6iG,EAAMrgG,MACL2/F,EAAAA,GAAAA,MAAA,OAAiBn5B,UAAU,OAAMlhD,SAAA,EAChCk6E,EAAAA,GAAAA,KAAC4C,GAAW,CAACS,OAAOrD,EAAAA,GAAAA,KAAC6O,GAAe,CAACC,QAAQ,eAC7C9O,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,mBAFP,WAQVg5B,EAAAA,GAAAA,KAACY,GAAQ,CAACC,MAAOA,GAEnB,EAACt+B,EAEDovC,oBAAsB,WACrB,GAAkC,OAA9BpvC,EAAKrlD,MAAMglD,KAAKqB,UACnB,OAAO,KAGR,GAAIhB,EAAKrlD,MAAM8lE,UAAU1f,UAAYwI,GAAc6c,KAClD,OAAO,KAGR,GAAqC,IAAjCpmB,EAAKrlD,MAAMglD,KAAK+K,MAAMjvE,OACzB,OAAO,KAGR,IAAM6iG,EAAQzkC,EAAYa,SAASsF,EAAKrlD,MAAMglD,KAAK+K,OAAO,SAAAlvE,GAAC,OAAIA,EAAEf,IAAI,IACnEq/D,MAAK,SAACv9C,EAAGC,GAAC,OAAKD,EAAE9hB,KAAK2/D,cAAc59C,EAAE/hB,KAAK,IAC3C4qD,KAAI,SAAA3xC,GACJ,IAAMrF,EAAQ2xD,EAAKrlD,MAAMglD,KAAK+K,MAAM9P,QAAO,SAAAp/D,GAAC,OAAIA,EAAEf,OAASiZ,EAAKjZ,IAAI,IAAEgB,OAEhEjB,GACLojG,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,eAAclhD,SAAA,EAC5Bk6E,EAAAA,GAAAA,KAAA,UAAQr6E,UAAWk9D,GAAewB,SAAS9hB,EAAKrlD,MAAM8lE,UAAW/sE,GAAO4kC,QAAS,kBAAM0nB,EAAKrlD,MAAM2uE,UAAU51E,EAAK,EAAC6P,SAAC,WAGnHk6E,EAAAA,GAAAA,KAAA,UAAQr6E,SAAU48C,EAAKrlD,MAAM8lE,UAAU9V,QAAQlvE,QAAU6kF,GAAeC,eAAgBjoC,QAAS,kBAAM0nB,EAAKrlD,MAAM6uE,WAAW91E,EAAK,EAAC6P,SAAC,eAMtI,OACCq6E,EAAAA,GAAAA,MAAA,OAAmBn5B,UAAU,OAAMlhD,SAAA,EAClCk6E,EAAAA,GAAAA,KAACiP,GAAQ,CAACh5F,KAAMA,EAAMrF,MAAOA,IAC5B7T,IAFQkZ,EAAK2d,GAKjB,IAED,OACCosE,EAAAA,GAAAA,KAACY,GAAQ,CAACC,MAAOA,GAEnB,EAACt+B,EAEDqvC,qBAAuB,WACtB,GAAkC,OAA9BrvC,EAAKrlD,MAAMglD,KAAKqB,UACnB,OAAO,KAGR,IAAKhB,EAAKrlD,MAAM8lE,UAAU7V,OAAOx/C,QAChC,OAAO,KAGR,GAAI40C,EAAKrlD,MAAM8lE,UAAU1f,UAAYwI,GAAc6c,KAClD,OAAO,KAGR,IAAMpnB,EAAMka,GAAkBI,mBAAmBtZ,EAAKrlD,MAAMglD,KAAKqB,UAAU8kB,WAAY,CAAE9lB,EAAKrlD,MAAM8lE,UAAU7V,OAAO7tE,WAC/G0sF,EAAQzpB,EAAKrlD,MAAMglD,KAAKqB,UAAUE,KAAKtG,QAAO,SAAAuG,GAAE,OAAInC,EAAIO,MAAK,SAAAD,GAAE,OAAKA,EAAGlpD,IAAM+qD,EAAGpkE,SAASqZ,GAAOkpD,EAAGjpD,IAAM8qD,EAAGpkE,SAASsZ,CAAE,GAAC,IACxHq0D,EAAQ7Q,EAAYC,KAAKD,EAAYa,SAAS+uB,EAAMzP,SAAQ,SAAAs1B,GAAI,OAAIA,EAAK5kC,KAAK,KAAG,SAAAlvE,GAAC,OAAIA,EAAEf,IAAI,KAAG,SAAAe,GAAC,OAAIA,EAAEf,IAAI,IAEhH,GAAqB,IAAjBiwE,EAAMjvE,OACT,OAAO,KAGR,IAAM6iG,EAAQ5zB,EACZrlB,KAAI,SAAA3xC,GACJ,IAAMlZ,GACLijG,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,eAAclhD,UAC5Bk6E,EAAAA,GAAAA,KAAA,UAAQr6E,SAAU48C,EAAKrlD,MAAM8lE,UAAU9V,QAAQlvE,QAAU6kF,GAAeC,eAAgBjoC,QAAS,kBAAM0nB,EAAKrlD,MAAM6uE,WAAW91E,EAAK,EAAC6P,UAClIq6E,EAAAA,GAAAA,MAAA,OAAAr6E,SAAA,CAAK,WAAOk6E,EAAAA,GAAAA,KAAA,UAAMA,EAAAA,GAAAA,KAACT,GAAS,CAACp+F,KAAMk+F,GAASU,SAAU5iG,MAAO,EAAGqY,KAAM8pF,GAASK,gBAKlF,OACCQ,EAAAA,GAAAA,MAAA,OAAmBn5B,UAAU,OAAMlhD,SAAA,EAClCk6E,EAAAA,GAAAA,KAACiP,GAAQ,CAACh5F,KAAMA,IACflZ,IAFQkZ,EAAK2d,GAKjB,IAED,OACCosE,EAAAA,GAAAA,KAACY,GAAQ,CAACC,MAAOA,GAEnB,EAACt+B,EAEDj/C,OAAS,WACR,IACC,IAAM4pD,EAAU3K,EAAKkvC,wBACfK,EAAQvvC,EAAKovC,sBACbI,EAASxvC,EAAKqvC,uBAEpB,OACCzR,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,QAAOlhD,SAAA,EACrBk6E,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAASmE,WAAW3+E,SAAC,oBACjCq6E,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,WAAUlhD,SAAA,EACxBk6E,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,YAAWlhD,SACxBy8C,EAAKgvC,mBAAmBtlC,GAAiBsY,SAE3C4b,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,YAAWlhD,SAAA,CACxBy8C,EAAKgvC,mBAAmBtlC,GAAiB2rB,MACzCr1B,EAAKgvC,mBAAmBtlC,GAAiBoW,UAE3C8d,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,YAAWlhD,SAAA,CACxBy8C,EAAKgvC,mBAAmBtlC,GAAiBgW,MACzC1f,EAAKgvC,mBAAmBtlC,GAAiBqW,UAE3C0d,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,YAAWlhD,SACxBy8C,EAAKgvC,mBAAmBtlC,GAAiBuY,YAG5Cwb,EAAAA,GAAAA,KAAA,UACAG,EAAAA,GAAAA,MAACI,GAAI,CAACp/F,KAAMm/F,GAASmE,WAAW3+E,SAAA,CAAC,kBAAgBy8C,EAAKrlD,MAAM8lE,UAAU9V,QAAQlvE,OAAO,MAAI6kF,GAAeC,eAAe,OACtH5V,GACD8yB,EAAAA,GAAAA,KAAA,SACW,OAAV8R,GAAiB9R,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAASmE,WAAW3+E,SAAC,gBAAqB,KAC5D,OAAXisF,GAAkB/R,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAASmE,WAAW3+E,SAAC,iBAAsB,KACzEgsF,EACAC,IAGJ,CAAE,MAAA5qB,GACD,OAAO6Y,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,sBACvB,CACD,EAACzE,CAAC,CAAD,OAAA5H,EAAA22C,EAAA,CAhPgB,CAAS5kE,EAAAA,WCCdslE,GAAW,SAAAxS,GAAAz6B,EAAAitC,EAAAxS,GAAA,IAAAC,EAAA/5B,EAAAssC,GACvB,SAAAA,EAAY90F,GAAe,IAADqlD,EAAA76D,EAAA,KAAAsqG,IACzBzvC,EAAAk9B,EAAAnjG,KAAA,KAAM4gB,IAQP+0F,YAAc,SAAC1jC,GACd,IAAMtnB,EAAUsb,EAAKp9D,MAAM8hD,QAC3BA,EAAQsnB,MAAQA,EAChBhM,EAAKnL,SAAS,CACbnQ,QAASA,IACP,WACFsb,EAAKrlD,MAAMi0C,SAASoR,EAAKp9D,MAAM8hD,QAChC,GACD,EAACsb,EAED2vC,YAAc,SAACvjC,GACd,IAAM1nB,EAAUsb,EAAKp9D,MAAM8hD,QAC3BA,EAAQ0nB,MAAQA,EAChBpM,EAAKnL,SAAS,CACbnQ,QAASA,IACP,WACFsb,EAAKrlD,MAAMi0C,SAASoR,EAAKp9D,MAAM8hD,QAChC,GACD,EAACsb,EAED4vC,oBAAsB,SAAChiC,GACtB,IAAMlpB,EAAUsb,EAAKp9D,MAAM8hD,QAC3BA,EAAQ2nB,cAAgBuB,EACxB5N,EAAKnL,SAAS,CACbnQ,QAASA,IACP,WACFsb,EAAKrlD,MAAMi0C,SAASoR,EAAKp9D,MAAM8hD,QAChC,GACD,EAACsb,EAED6vC,kBAAoB,SAACpjC,GACpB,IAAM/nB,EAAUsb,EAAKp9D,MAAM8hD,QAC3BA,EAAQ+nB,YAAcA,EACtBzM,EAAKnL,SAAS,CACbnQ,QAASA,IACP,WACFsb,EAAKrlD,MAAMi0C,SAASoR,EAAKp9D,MAAM8hD,QAChC,GACD,EAACsb,EAED8vC,aAAe,SAAC9kC,GACf,IAAMtmB,EAAUsb,EAAKp9D,MAAM8hD,QAC3BA,EAAQsmB,OAASA,EACjBhL,EAAKnL,SAAS,CACbnQ,QAASA,IACP,WACFsb,EAAKrlD,MAAMi0C,SAASoR,EAAKp9D,MAAM8hD,QAChC,GACD,EAACsb,EAED+vC,yBAA2B,SAACniC,GAC3B,IAAMlpB,EAAUsb,EAAKp9D,MAAM8hD,QAC3BA,EAAQ4nB,eAAiBsB,EACzB5N,EAAKnL,SAAS,CACbnQ,QAASA,IACP,WACFsb,EAAKrlD,MAAMi0C,SAASoR,EAAKp9D,MAAM8hD,QAChC,GACD,EAACsb,EAEDj/C,OAAS,WACR,IAAIivF,EAAS,KACb,OAAQhwC,EAAKp9D,MAAM8hD,QAAQ9lD,MAC1B,KAAKsrE,GAAYsC,MAChBwjC,GACCvS,EAAAA,GAAAA,KAAA,OAAAl6E,UACCk6E,EAAAA,GAAAA,KAACuD,GAAQ,CACRxmG,QAAS,CACR,CAAE62B,GAAIw4C,GAAU0K,WAChB,CAAEljD,GAAIw4C,GAAU2K,SAChB,CAAEnjD,GAAIw4C,GAAUuJ,QAEjB+tB,WAAYnhC,EAAKp9D,MAAM8hD,QAAQsnB,MAC/Bo1B,SAAU,SAAA/vE,GAAE,OAAI2uC,EAAK0vC,YAAYr+E,EAAgB,MAIpD,MACD,KAAK64C,GAAYwG,MAChBs/B,GACCvS,EAAAA,GAAAA,KAAA,OAAAl6E,UACCk6E,EAAAA,GAAAA,KAACuD,GAAQ,CACRxmG,QAAS,CACR,CAAE62B,GAAI24C,GAAU4J,OAChB,CAAEviD,GAAI24C,GAAUiX,YAChB,CAAE5vD,GAAI24C,GAAUmL,UAChB,CAAE9jD,GAAI24C,GAAUuL,WAChB,CAAElkD,GAAI24C,GAAUsV,cAChB,CAAEjuD,GAAI24C,GAAUwL,SAChB,CAAEnkD,GAAI24C,GAAUmJ,SAEjBhuD,YAAa,EACbg8E,WAAYnhC,EAAKp9D,MAAM8hD,QAAQ0nB,MAC/Bg1B,SAAU,SAAA/vE,GAAE,OAAI2uC,EAAK2vC,YAAYt+E,EAAgB,MAIpD,MACD,KAAK64C,GAAY0G,cAChBo/B,GACCvS,EAAAA,GAAAA,KAAA,OAAAl6E,UACCk6E,EAAAA,GAAAA,KAACuD,GAAQ,CACRxmG,QAAS,CACR,CAAE62B,GAAIu4C,GAAkB+L,UACxB,CAAEtkD,GAAIu4C,GAAkByL,SAEzB8rB,WAAYnhC,EAAKp9D,MAAM8hD,QAAQ2nB,cAC/B+0B,SAAU,SAAA/vE,GAAE,OAAI2uC,EAAK4vC,oBAAoBv+E,EAAwB,MAIpE,MACD,KAAK64C,GAAYsG,YAChB,IAAMy/B,EAAM3vB,GAAemB,iBAAiBzhB,EAAKrlD,MAAMo9E,MACvDiY,GACCvS,EAAAA,GAAAA,KAAA,OAAAl6E,UACCk6E,EAAAA,GAAAA,KAACuD,GAAQ,CACRxmG,QAAS,CACR,CAAE62B,GAAIs4C,GAAoBuX,iBAC1B,CAAE7vD,GAAIs4C,GAAoB6M,cAC1B,CAAEnlD,GAAIs4C,GAAoBwX,eAC1B,CAAE9vD,GAAIs4C,GAAoByX,eAC1B,CAAE/vD,GAAIs4C,GAAoB0X,eAC1B,CAAEhwD,GAAIs4C,GAAoByV,YAC1B,CAAE/tD,GAAIs4C,GAAoB2X,YAC1B,CAAEjwD,GAAIs4C,GAAoB4X,YAC1B,CAAElwD,GAAIs4C,GAAoB6X,UACzB5mB,QAAO,SAAAl7D,GAAC,OAAKuwG,EAAI15F,SAAS7W,EAAE2xB,GAAG,IACjClM,YAAa,EACbg8E,WAAYnhC,EAAKp9D,MAAM8hD,QAAQ+nB,YAC/B20B,SAAU,SAAA/vE,GAAE,OAAI2uC,EAAK6vC,kBAAkBx+E,EAA0B,MAIpE,MAED,KAAK64C,GAAY+D,YACjB,KAAK/D,GAAYkG,aAChB4/B,GACCvS,EAAAA,GAAAA,KAAA,OAAAl6E,UACCk6E,EAAAA,GAAAA,KAACuD,GAAQ,CACRxmG,QAAS,CACR,CAAE62B,GAAI04C,GAAWsM,KAAMt7B,SAAS0iD,EAAAA,GAAAA,KAACT,GAAS,CAACp+F,KAAMmrE,GAAWsM,KAAMz7E,MAAM,UACxE,CAAEy2B,GAAI04C,GAAWiL,MAAOj6B,SAAS0iD,EAAAA,GAAAA,KAACT,GAAS,CAACp+F,KAAMmrE,GAAWiL,MAAOp6E,MAAM,WAC1E,CAAEy2B,GAAI04C,GAAW+J,OAAQ/4B,SAAS0iD,EAAAA,GAAAA,KAACT,GAAS,CAACp+F,KAAMmrE,GAAW+J,OAAQl5E,MAAM,YAC5E,CAAEy2B,GAAI04C,GAAWgL,SAAUh6B,SAAS0iD,EAAAA,GAAAA,KAACT,GAAS,CAACp+F,KAAMmrE,GAAWgL,SAAUn6E,MAAM,cAChF,CAAEy2B,GAAI04C,GAAW6M,KAAM77B,SAAS0iD,EAAAA,GAAAA,KAACT,GAAS,CAACp+F,KAAMmrE,GAAW6M,KAAMh8E,MAAM,UACxE,CAAEy2B,GAAI04C,GAAW+M,YAAa/7B,SAAS0iD,EAAAA,GAAAA,KAACT,GAAS,CAACp+F,KAAMmrE,GAAW+M,YAAal8E,MAAM,iBACtF,CAAEy2B,GAAI04C,GAAWmN,KAAMn8B,SAAS0iD,EAAAA,GAAAA,KAACT,GAAS,CAACp+F,KAAMmrE,GAAWmN,KAAMt8E,MAAM,UACxE,CAAEy2B,GAAI04C,GAAWoN,MAAOp8B,SAAS0iD,EAAAA,GAAAA,KAACT,GAAS,CAACp+F,KAAMmrE,GAAWoN,MAAOv8E,MAAM,WAC1E,CAAEy2B,GAAI04C,GAAW8M,MAAO97B,SAAS0iD,EAAAA,GAAAA,KAACT,GAAS,CAACp+F,KAAMmrE,GAAW8M,MAAOj8E,MAAM,WAC1E,CAAEy2B,GAAI04C,GAAWkM,MAAOl7B,SAAS0iD,EAAAA,GAAAA,KAACT,GAAS,CAACp+F,KAAMmrE,GAAWkM,MAAOr7E,MAAM,WAC1E,CAAEy2B,GAAI04C,GAAW2L,OAAQ36B,SAAS0iD,EAAAA,GAAAA,KAACT,GAAS,CAACp+F,KAAMmrE,GAAW2L,OAAQ96E,MAAM,YAC5E,CAAEy2B,GAAI04C,GAAW2X,QAAS3mC,SAAS0iD,EAAAA,GAAAA,KAACT,GAAS,CAACp+F,KAAMmrE,GAAW2X,QAAS9mF,MAAM,cAE/EuqB,YAAa,EACbg8E,WAAYnhC,EAAKp9D,MAAM8hD,QAAQsmB,OAC/Bo2B,SAAU,SAAA/vE,GAAE,OAAI2uC,EAAK8vC,aAAaz+E,EAAiB,MAItD,MACD,KAAK64C,GAAYmE,oBACjB,KAAKnE,GAAYoG,qBAChB0/B,GACCvS,EAAAA,GAAAA,KAAA,OAAAl6E,UACCk6E,EAAAA,GAAAA,KAACuD,GAAQ,CACRxmG,QAAS,CACR,CAAE62B,GAAIo4C,GAAmBkM,UACzB,CAAEtkD,GAAIo4C,GAAmBmM,QACzB,CAAEvkD,GAAIo4C,GAAmBoM,aAE1BsrB,WAAYnhC,EAAKp9D,MAAM8hD,QAAQ4nB,eAC/B80B,SAAU,SAAA/vE,GAAE,OAAI2uC,EAAK+vC,yBAAyB1+E,EAAyB,MAO5E,OACCosE,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,cAAalhD,SAC1BysF,GAGJ,EA/LC,IAAMtrD,EAAU7yC,KAAKG,MAAMH,KAAKC,UAAU6I,EAAM+pC,UAG9C,OAFFsb,EAAKp9D,MAAQ,CACZ8hD,QAASA,GACRsb,CACH,CAAC,OAAA5H,EAAAq3C,EAAA,CARsB,CAAStlE,EAAAA,WCMpBotD,GAAO,SAAA0F,GAAAz6B,EAAA+0B,EAAA0F,GAAA,IAAAC,EAAA/5B,EAAAo0B,GACnB,SAAAA,EAAY58E,GAAe,IAADqlD,EAKvB,OALuB76D,EAAA,KAAAoyF,IACzBv3B,EAAAk9B,EAAAnjG,KAAA,KAAM4gB,IAOPu1F,aAAe,SAACzvB,GAA+B,IAAD0vB,EAAAC,EACzCv/C,EAA2B,GAoB/B,OAnBAs/C,EAAAt/C,GAAS5yD,KAAI6F,MAAAqsG,EAAA/tC,EAAIke,GAAe+B,eAAe5B,MAC/C2vB,EAAAv/C,GAAS5yD,KAAI6F,MAAAssG,EAAAhuC,EAAIiQ,GAASC,oBAE1BzhB,EAAWA,EAAS+J,QAAO,SAAAlW,GAE1B,GAAIA,EAAQ9lD,OAASsrE,GAAYsG,YAAa,CAC7C,IAAMqT,EAAQvD,GAAemB,iBAAiBhB,GAC9C,GAAIoD,EAAMpoF,QAAU,EAEnB,OAAO,EAER,GAAIooF,EAAMttE,SAASmuC,EAAQ+nB,aAE1B,OAAO,CAET,CACA,OAAO,CACR,IAEO5S,EAAYQ,QAAQxJ,GAAUhQ,OAAO,EAAG,EAChD,EAACmf,EAEDqwC,YAAc,WACbrwC,EAAKnL,SAAS,CACbhE,SAAUmP,EAAKkwC,aAAalwC,EAAKrlD,MAAM8lE,WACvC6vB,gBAAiB,OACf,WACGtwC,EAAKrlD,MAAM8lD,WACfT,EAAKrlD,MAAMklD,UAAU/D,EAAcwB,eAAgB,EAErD,GACD,EAAC0C,EAEDuwC,mBAAqB,SAAC7rD,GACrBsb,EAAKnL,SAAS,CACby7C,gBAAiB5rD,IACf,WACGsrB,GAAagC,UAAUhS,EAAKp9D,MAAM0tG,kBAEtCtwC,EAAKnL,SAAS,CACbhE,SAAUmP,EAAKkwC,aAAalwC,EAAKrlD,MAAM8lE,WACvC6vB,gBAAiB,OACf,WACFtwC,EAAKrlD,MAAM61F,QAAQ9rD,EACpB,GAEF,GACD,EAACsb,EAEDj/C,OAAS,WACR,IACC,GAAIi/C,EAAKp9D,MAAM0tG,gBACd,OACC1S,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,0BAAyBlhD,SAAA,EACvCk6E,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,mBAAkBlhD,UAChCk6E,EAAAA,GAAAA,KAAC2G,GAAW,CAAC1/C,QAASsb,EAAKp9D,MAAM0tG,gBAChCnO,OAAQ7hB,GAAeiC,iBAAiBviB,EAAKrlD,MAAM8lE,UAAWzgB,EAAKp9D,MAAM0tG,gBAAgBj/E,KAAO,UAChGwvE,WAAYvgB,GAAeoC,qBAAqB1iB,EAAKrlD,MAAM8lE,UAAWzgB,EAAKp9D,MAAM0tG,gBAAgBj/E,SAGnGosE,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,sBAAqBlhD,UACnCk6E,EAAAA,GAAAA,KAACgS,GAAW,CAAC/qD,QAASsb,EAAKp9D,MAAM0tG,gBAAiBvY,KAAM/3B,EAAKrlD,MAAM8lE,UAAW7xB,SAAUoR,EAAKuwC,0BAMjG,IAAMlM,EAAerkC,EAAKp9D,MAAMiuD,SAASxL,KAAI,SAAAX,GAC5C,OACC+4C,EAAAA,GAAAA,KAAC2G,GAAW,CAEX1/C,QAASA,EACTy9C,OAAQ7hB,GAAeiC,iBAAiBviB,EAAKrlD,MAAM8lE,UAAW/7B,EAAQrzB,KAAO,UAC7EwvE,WAAYvgB,GAAeoC,qBAAqB1iB,EAAKrlD,MAAM8lE,UAAW/7B,EAAQrzB,IAC9EinB,QAAS0nB,EAAKuwC,oBAJT7rD,EAAQrzB,GAOhB,IAEMw9E,EAAUvwC,EAAgBsB,oBAAoBI,EAAKrlD,MAAMglD,KAAM7D,EAAcwB,gBAgBnF,OAfKuxC,EAAU,GAAM7uC,EAAKrlD,MAAM8lD,aAC/B4jC,EAAapmG,MACZw/F,EAAAA,GAAAA,KAAA,OAAqBh5B,UAAU,aAAtB,cAEV4/B,EAAapmG,MACZw/F,EAAAA,GAAAA,KAACwQ,GAAqB,CAErB7P,MAAM,SACNkQ,UAAWO,EACXpuC,UAAWT,EAAKrlD,MAAM8lD,UACtBytC,SAAUluC,EAAKqwC,aAJX,aAUN5S,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,qBAAoBlhD,SACjC8gF,GAGJ,CAAE,MAAAzf,GACD,OAAO6Y,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,yBACvB,CACD,EA/GCzE,EAAKp9D,MAAQ,CACZiuD,SAAUmP,EAAKkwC,aAAav1F,EAAM8lE,WAClC6vB,gBAAiB,MAChBtwC,CACH,CAAC,OAAA5H,EAAAm/B,EAAA,CAPkB,CAASptD,EAAAA,WCpBhBsmE,GAAW,SAAAxT,GAAAz6B,EAAAiuC,EAAAxT,GAAA,IAAAC,EAAA/5B,EAAAstC,GAAA,SAAAA,IAAA,IAAAzwC,EAAA76D,EAAA,KAAAsrG,GAAA,QAAA33F,EAAAvd,UAAAE,OAAA4X,EAAA,IAAAvZ,MAAAgf,GAAAnB,EAAA,EAAAA,EAAAmB,EAAAnB,IAAAtE,EAAAsE,GAAApc,UAAAoc,GAqGrB,OArGqBqoD,EAAAk9B,EAAAnjG,KAAA+J,MAAAo5F,EAAA,OAAA9lF,OAAA/D,KACvB0N,OAAS,WACR,IAeMtc,EAAM29D,EAfE,CACb2H,GAAWsM,KACXtM,GAAW6M,KACX7M,GAAWkM,MACXlM,GAAWiL,MACXjL,GAAW+M,YACX/M,GAAWmN,KACXnN,GAAW+J,OACX/J,GAAWoN,MACXpN,GAAWgL,SACXhL,GAAW2L,OACX3L,GAAW2X,QACX3X,GAAW8M,OAGcxxB,KAAI,SAAAzmD,GAAI,MAAK,CAAEA,KAAMA,EAAMhE,MAAOolE,EAAKrlD,MAAMgH,SAAS/iB,GAAO,KAEvF,GAAI6F,EAAO+/C,OAAM,SAAAgrB,GAAI,OAAmB,IAAfA,EAAK50E,KAAW,IACxC,OACC6iG,EAAAA,GAAAA,KAACU,GAAG,CAACC,MAAOp+B,EAAKrlD,MAAMyjF,MAAM76E,UAC5Bk6E,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAAS2S,OAAOntF,SAAC,WAKhC,GAAIs2C,EAAY58B,IAAIx4B,GAAQ,SAAA+qE,GAAI,OAAIA,EAAK50E,KAAK,MAAMi/D,EAAYjB,IAAIn0D,GAAQ,SAAA+qE,GAAI,OAAIA,EAAK50E,KAAK,IAC7F,OACC6iG,EAAAA,GAAAA,KAACU,GAAG,CAACC,MAAOp+B,EAAKrlD,MAAMyjF,MAAM76E,UAC5Bk6E,EAAAA,GAAAA,KAAC6D,GAAS,CAAClD,MAAM,mBAAmBxjG,MAAO6J,EAAO,GAAG7J,UAKxD,IAAM+1G,EAAgB,CAAE5mC,GAAWiL,MAAOjL,GAAW+J,OAAQ/J,GAAWgL,UAClE67B,EAAcxuC,EAAQuuC,EAActrD,KAAI,SAAAzmD,GAAI,MAAK,CAAEA,KAAMA,EAAMhE,MAAOolE,EAAKrlD,MAAMgH,SAAS/iB,GAAO,KACnGiyG,EAAW,KAEdA,EADGD,EAAepsD,OAAM,SAAAgrB,GAAI,OAAmB,IAAfA,EAAK50E,KAAW,KAE/C6iG,EAAAA,GAAAA,KAAC6D,GAAS,CAAClD,MAAM,kBAAkBxjG,MAAO,IAEjCi/D,EAAY58B,IAAI2zE,GAAgB,SAAAphC,GAAI,OAAIA,EAAK50E,KAAK,MAAMi/D,EAAYjB,IAAIg4C,GAAgB,SAAAphC,GAAI,OAAIA,EAAK50E,KAAK,KAEnH6iG,EAAAA,GAAAA,KAAC6D,GAAS,CAAClD,MAAM,kBAAkBxjG,MAAOg2G,EAAe,GAAGh2G,SAI5D6iG,EAAAA,GAAAA,KAAA,OAAAl6E,SACEotF,EAActrD,KAAI,SAAAzmD,GAAI,IAAAkyG,EAAA,OAAIrT,EAAAA,GAAAA,KAAC6D,GAAS,CAAYlD,MAAO,aAAex/F,EAAMhE,OAAwC,QAAjCk2G,EAAArsG,EAAO86D,MAAK,SAAAtuD,GAAC,OAAIA,EAAErS,OAASA,CAAI,WAAC,IAAAkyG,OAAA,EAAjCA,EAAmCl2G,QAAS,GAArFgE,EAAyF,MAKvI,IAAMmyG,EAAc,CAAEhnC,GAAW6M,KAAM7M,GAAW+M,YAAa/M,GAAWmN,KAAMnN,GAAWoN,MAAOpN,GAAW8M,OACvGm6B,EAAY5uC,EAAQ2uC,EAAY1rD,KAAI,SAAAzmD,GAAI,MAAK,CAAEA,KAAMA,EAAMhE,MAAOolE,EAAKrlD,MAAMgH,SAAS/iB,GAAO,KAC/FqyG,EAAS,KAEZA,EADGD,EAAaxsD,OAAM,SAAAgrB,GAAI,OAAmB,IAAfA,EAAK50E,KAAW,KAE7C6iG,EAAAA,GAAAA,KAAC6D,GAAS,CAAClD,MAAM,gBAAgBxjG,MAAO,IAE/Bi/D,EAAY58B,IAAI+zE,GAAc,SAAAxhC,GAAI,OAAIA,EAAK50E,KAAK,MAAMi/D,EAAYjB,IAAIo4C,GAAc,SAAAxhC,GAAI,OAAIA,EAAK50E,KAAK,KAE/G6iG,EAAAA,GAAAA,KAAC6D,GAAS,CAAClD,MAAM,gBAAgBxjG,MAAOo2G,EAAa,GAAGp2G,SAIxD6iG,EAAAA,GAAAA,KAAA,OAAAl6E,SACEwtF,EAAY1rD,KAAI,SAAAzmD,GAAI,IAAAsyG,EAAA,OAAIzT,EAAAA,GAAAA,KAAC6D,GAAS,CAAYlD,MAAO,WAAax/F,EAAMhE,OAAwC,QAAjCs2G,EAAAzsG,EAAO86D,MAAK,SAAAtuD,GAAC,OAAIA,EAAErS,OAASA,CAAI,WAAC,IAAAsyG,OAAA,EAAjCA,EAAmCt2G,QAAS,GAAnFgE,EAAuF,MAKnI,IAAMuyG,EAAkB,CAAEpnC,GAAWsM,KAAMtM,GAAWkM,MAAOlM,GAAW2L,OAAQ3L,GAAW2X,SACrF0vB,EAAgBhvC,EAAQ+uC,EAAgB9rD,KAAI,SAAAzmD,GAAI,MAAK,CAAEA,KAAMA,EAAMhE,MAAOolE,EAAKrlD,MAAMgH,SAAS/iB,GAAO,KACvGyyG,EAAa,KAiBjB,OAfCA,EADGD,EAAiB5sD,OAAM,SAAAgrB,GAAI,OAAmB,IAAfA,EAAK50E,KAAW,KAEjD6iG,EAAAA,GAAAA,KAAC6D,GAAS,CAAClD,MAAM,oBAAoBxjG,MAAO,IAEnCi/D,EAAY58B,IAAIm0E,GAAkB,SAAA5hC,GAAI,OAAIA,EAAK50E,KAAK,MAAMi/D,EAAYjB,IAAIw4C,GAAkB,SAAA5hC,GAAI,OAAIA,EAAK50E,KAAK,KAEvH6iG,EAAAA,GAAAA,KAAC6D,GAAS,CAAClD,MAAM,oBAAoBxjG,MAAOw2G,EAAiB,GAAGx2G,SAIhE6iG,EAAAA,GAAAA,KAAA,OAAAl6E,SACE4tF,EAAgB9rD,KAAI,SAAAzmD,GAAI,IAAA0yG,EAAA,OAAI7T,EAAAA,GAAAA,KAAC6D,GAAS,CAAYlD,MAAO,eAAiBx/F,EAAMhE,OAAwC,QAAjC02G,EAAA7sG,EAAO86D,MAAK,SAAAtuD,GAAC,OAAIA,EAAErS,OAASA,CAAI,WAAC,IAAA0yG,OAAA,EAAjCA,EAAmC12G,QAAS,GAAvFgE,EAA2F,OAM1Ig/F,EAAAA,GAAAA,MAACO,GAAG,CAACC,MAAOp+B,EAAKrlD,MAAMyjF,MAAM76E,SAAA,CAC3BstF,GACDpT,EAAAA,GAAAA,KAAA,SACCwT,GACDxT,EAAAA,GAAAA,KAAA,SACC4T,IAGJ,EAACrxC,CAAC,CAAD,OAAA5H,EAAAq4C,EAAA,CArGsB,CAAStmE,EAAAA,WCWpBonE,GAAK,SAAAtU,GAAAz6B,EAAA+uC,EAAAtU,GAAA,IAAAC,EAAA/5B,EAAAouC,GAAA,SAAAA,IAAA,IAAAvxC,EAAA76D,EAAA,KAAAosG,GAAA,QAAAz4F,EAAAvd,UAAAE,OAAA4X,EAAA,IAAAvZ,MAAAgf,GAAAnB,EAAA,EAAAA,EAAAmB,EAAAnB,IAAAtE,EAAAsE,GAAApc,UAAAoc,GAsJf,OAtJeqoD,EAAAk9B,EAAAnjG,KAAA+J,MAAAo5F,EAAA,OAAA9lF,OAAA/D,KACjBiwE,aAAe,SAACtX,GACf,OAAIhM,EAAKrlD,MAAMqmD,UACPmkB,GAAe7B,aAAatjB,EAAKrlD,MAAMqmD,UAAWhB,EAAKrlD,MAAM8lE,UAAWzU,GAGzEsU,GAAegD,aAAatjB,EAAKrlD,MAAM8lE,UAAW,GAAIzU,EAC9D,EAAChM,EAEDujB,aAAe,SAACnX,GACf,OAAIpM,EAAKrlD,MAAMqmD,UACPmkB,GAAe5B,aAAavjB,EAAKrlD,MAAMqmD,UAAWhB,EAAKrlD,MAAM8lE,UAAWrU,GAGzEkU,GAAeiD,aAAavjB,EAAKrlD,MAAM8lE,UAAW,GAAIrU,EAC9D,EAACpM,EAEDwxC,oBAAsB,SAACxmC,GACtB,OAAIhL,EAAKrlD,MAAMqmD,UACPmkB,GAAezB,eAAe1jB,EAAKrlD,MAAMqmD,UAAWhB,EAAKrlD,MAAM8lE,UAAWzV,GAG3EsV,GAAeoD,eAAe1jB,EAAKrlD,MAAM8lE,UAAW,GAAIzV,EAChE,EAAChL,EAEDyxC,yBAA2B,SAACzmC,GAC3B,OAAIhL,EAAKrlD,MAAMqmD,UACPmkB,GAAevB,oBAAoB5jB,EAAKrlD,MAAMqmD,UAAWhB,EAAKrlD,MAAM8lE,UAAWzV,GAGhFsV,GAAesD,oBAAoB5jB,EAAKrlD,MAAM8lE,UAAW,GAAIzV,EACrE,EAAChL,EAED0xC,iBAAmB,WAClB,OACCjU,EAAAA,GAAAA,KAACU,GAAG,CAACC,MAAM,SAAQ76E,UAClBq6E,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,YAAWlhD,SAAA,EACzBk6E,EAAAA,GAAAA,KAAC6D,GAAS,CAACjxC,YAAY,WAAW+tC,MAAM,YAAYxjG,MAAOolE,EAAKsjB,aAAazZ,GAAU0K,cACvFkpB,EAAAA,GAAAA,KAAC6D,GAAS,CAACjxC,YAAY,WAAW+tC,MAAM,UAAUxjG,MAAOolE,EAAKsjB,aAAazZ,GAAU2K,YACrFipB,EAAAA,GAAAA,KAAC6D,GAAS,CAACjxC,YAAY,WAAW+tC,MAAM,QAAQxjG,MAAOolE,EAAKsjB,aAAazZ,GAAUuJ,aAIvF,EAACpT,EAED2xC,iBAAmB,WAClB,OACC/T,EAAAA,GAAAA,MAACO,GAAG,CAACC,MAAM,SAAQ76E,SAAA,EAClBk6E,EAAAA,GAAAA,KAAC6D,GAAS,CAAClD,MAAM,QAAQxjG,MAAOolE,EAAKujB,aAAavZ,GAAU4J,UAC5D6pB,EAAAA,GAAAA,KAAC6D,GAAS,CAAClD,MAAM,aAAaxjG,MAAOolE,EAAKujB,aAAavZ,GAAUiX,eACjEwc,EAAAA,GAAAA,KAAC6D,GAAS,CAAClD,MAAM,WAAWxjG,MAAOolE,EAAKujB,aAAavZ,GAAUmL,aAC/DsoB,EAAAA,GAAAA,KAAC6D,GAAS,CAAClD,MAAM,YAAYxjG,MAAOolE,EAAKujB,aAAavZ,GAAUuL,cAChEkoB,EAAAA,GAAAA,KAAC6D,GAAS,CAAClD,MAAM,eAAexjG,MAAOolE,EAAKujB,aAAavZ,GAAUsV,iBACnEme,EAAAA,GAAAA,KAAC6D,GAAS,CAAClD,MAAM,UAAUxjG,MAAOolE,EAAKujB,aAAavZ,GAAUwL,YAC9DioB,EAAAA,GAAAA,KAAC6D,GAAS,CAAClD,MAAM,SAASxjG,MAAOolE,EAAKujB,aAAavZ,GAAUmJ,YAGhE,EAACnT,EAED4xC,wBAA0B,WACzB,IAAIC,GACHpU,EAAAA,GAAAA,KAACU,GAAG,CAACC,MAAM,gBAAe76E,UACzBk6E,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAAS2S,OAAOntF,SAAC,WAIzBsgE,EAAQvD,GAAemB,iBAAiBzhB,EAAKrlD,MAAM8lE,WASzD,OARIoD,EAAMpoF,OAAS,IAClBo2G,GACCpU,EAAAA,GAAAA,KAACU,GAAG,CAACC,MAAM,gBAAe76E,SACxBsgE,EAAMx+B,KAAI,SAACp0C,EAAG1R,GAAC,OAAMk+F,EAAAA,GAAAA,KAACkE,GAAG,CAAAp+E,SAAUtS,GAAJ1R,EAAY,OAKxCsyG,CACR,EAAC7xC,EAED8xC,gBAAkB,WACjB,IAAIC,GACHtU,EAAAA,GAAAA,KAACU,GAAG,CAACC,MAAM,QAAO76E,UACjBk6E,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAAS2S,OAAOntF,SAAC,WAIzBwgE,EAAQzD,GAAewD,SAAS9jB,EAAKrlD,MAAM8lE,WAejD,OAdIsD,EAAMtoF,OAAS,IAClBs2G,GACCtU,EAAAA,GAAAA,KAACU,GAAG,CAACC,MAAM,QAAO76E,SAEhBwgE,EAAM1+B,KAAI,SAAAqnB,GACT,IAAMqF,EAAUnF,GAAe6C,yBAAyB/C,GAAQ,SAAW,UACrEkF,EAAI,GAAAx6D,OAAMw1D,GAAewC,wBAAwB1C,GAAK,cAAAt1D,OAAa26D,EAAO,KAChF,OAAO0rB,EAAAA,GAAAA,KAAC6D,GAAS,CAAelD,MAAOxsB,EAAMh3E,MAAO8xE,EAAKT,MAAlCS,EAAKr7C,GAC7B,OAMG0gF,CACR,EAAC/xC,EAEDgyC,aAAe,WACd,OACCvU,EAAAA,GAAAA,KAACU,GAAG,CAACC,MAAM,KAAI76E,UACdk6E,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,WAAUlhD,UACxBk6E,EAAAA,GAAAA,KAACsC,GAAK,CACLK,SAAUpgC,EAAKrlD,MAAM8lE,UAAUjW,GAAKxK,EAAKrlD,MAAM8lE,UAAUtkB,MACzD3+D,SACCogG,EAAAA,GAAAA,MAAA,OAAAr6E,SAAA,EAAKq6E,EAAAA,GAAAA,MAAA,KAAAr6E,SAAA,CAAIy8C,EAAKrlD,MAAM8lE,UAAUjW,GAAG,SAAO,MAAIxK,EAAKrlD,MAAM8lE,UAAUtkB,cAMvE,EAAC6D,EAEDj/C,OAAS,WACR,IACC,IAAIkxF,EAAe,KASnB,OARIjyC,EAAKrlD,MAAMqmD,YACdixC,GACCxU,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,SAAQlhD,UACtBk6E,EAAAA,GAAAA,KAAC0H,GAAgB,CAAC1kB,UAAWzgB,EAAKrlD,MAAM8lE,UAAWzf,UAAWhB,EAAKrlD,MAAMqmD,gBAM3E48B,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,QAAOlhD,SAAA,CACpB0uF,GACDrU,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,SAAQlhD,SAAA,CACrBy8C,EAAK0xC,mBACL1xC,EAAK2xC,uBAEP/T,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,SAAQlhD,SAAA,EACtBk6E,EAAAA,GAAAA,KAACgT,GAAW,CAACrS,MAAM,iBAAiBz8E,SAAUq+C,EAAKwxC,uBACnD/T,EAAAA,GAAAA,KAACgT,GAAW,CAACrS,MAAM,qBAAqBz8E,SAAUq+C,EAAKyxC,+BAExD7T,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,SAAQlhD,SAAA,CACpBy8C,EAAKrlD,MAAM8lE,UAAU7hF,OAAS2qE,GAAc6c,MAAUpmB,EAAKrlD,MAAM8lE,UAAU1f,UAAYwI,GAAc6c,KAAQpmB,EAAKgyC,eAAiB,KACpIhyC,EAAK4xC,0BACL5xC,EAAK8xC,uBAIV,CAAE,MAAAltB,GACD,OAAO6Y,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,sBACvB,CACD,EAACzE,CAAC,CAAD,OAAA5H,EAAAm5C,EAAA,CAtJgB,CAASpnE,EAAAA,WCgBd+nE,GAAmB,SAAAjV,GAAAz6B,EAAA0vC,EAAAjV,GAAA,IAAAC,EAAA/5B,EAAA+uC,GAC/B,SAAAA,EAAYv3F,GAAe,IAADqlD,EAIvB,OAJuB76D,EAAA,KAAA+sG,IACzBlyC,EAAAk9B,EAAAnjG,KAAA,KAAM4gB,IAMP2uE,UAAY,SAAC51E,GACZssD,EAAKrlD,MAAM2uE,UAAU51E,EAAMssD,EAAKrlD,MAAM8lE,UACvC,EAACzgB,EAEDupB,YAAc,SAAC71E,GACdssD,EAAKrlD,MAAM4uE,YAAY71E,EAAMssD,EAAKrlD,MAAM8lE,UACzC,EAACzgB,EAED0pB,SAAW,SAACh2E,GACXssD,EAAKrlD,MAAM+uE,SAASh2E,EAAMssD,EAAKrlD,MAAM8lE,UACtC,EAACzgB,EAEDwpB,WAAa,SAAC91E,GACbssD,EAAKrlD,MAAM6uE,WAAW91E,EAAMssD,EAAKrlD,MAAM8lE,UACxC,EAACzgB,EAEDwwC,QAAU,SAAC9rD,GACV,IAAMtpD,EAAOyW,KAAKG,MAAMH,KAAKC,UAAU4yC,IACvCtpD,EAAKi2B,GAAKssC,EAAMC,OAChBoC,EAAKrlD,MAAM61F,QAAQp1G,EAAM4kE,EAAKrlD,MAAM8lE,UACrC,EAACzgB,EAEDj/C,OAAS,WACR,IACC,IAAIyS,EAAOwsC,EAAKp9D,MAAM4wB,KAClB2+E,EAAW,KACf,GAAInyC,EAAKrlD,MAAM8lE,UAAUhW,OAAOl0D,SAAS29D,GAAUkC,OAClD+7B,EAAW,SACL,CACN,IAAM33G,EAAU,CACf,CAAE62B,GAAI,QAAS0pB,QAAS,cACxB,CAAE1pB,GAAI,QAAS0pB,QAAS,aACxB,CAAE1pB,GAAI,WAAY0pB,QAAS,YAC3B,CAAE1pB,GAAI,UAAW0pB,QAAS,YAGrBq3D,EAAQ9zC,EAAgBsB,oBAAoBI,EAAKrlD,MAAMglD,KAAM7D,EAAcG,SAAW,EACzD,OAA9B+D,EAAKrlD,MAAMglD,KAAKqB,YAAwBoxC,GAASpyC,EAAKrlD,MAAM8lD,WAChEjmE,EAAQyD,KAAK,CACZozB,GAAI,WACJ0pB,QAAS,aAGG,aAATvnB,IACHA,EAAO,SAIT2+E,GACC1U,EAAAA,GAAAA,KAACiE,GAAI,CACJlnG,QAASA,EACT2mG,WAAY3tE,EACZ4tE,SAAU,SAAA/vE,GAAE,OAAI2uC,EAAKnL,SAAS,CAAErhC,KAAMnC,GAAK,GAG9C,CAEA,IAAI7zB,EAAU,KACd,OAAQg2B,GACP,IAAK,QACJh2B,GACCigG,EAAAA,GAAAA,KAAC8T,GAAK,CACL9wB,UAAWzgB,EAAKrlD,MAAM8lE,UACtBzf,UAAWhB,EAAKrlD,MAAMglD,KAAKqB,UAC3BP,UAAWT,EAAKrlD,MAAM8lD,YAGxB,MACD,IAAK,QACJjjE,GACCigG,EAAAA,GAAAA,KAACsR,GAAK,CACLtuB,UAAWzgB,EAAKrlD,MAAM8lE,UACtB9gB,KAAMK,EAAKrlD,MAAMglD,KACjB2pB,UAAWtpB,EAAKspB,UAChBC,YAAavpB,EAAKupB,YAClBC,WAAYxpB,EAAKwpB,WACjBE,SAAU1pB,EAAK0pB,WAGjB,MACD,IAAK,WACJ,IAAM4U,EAAQhe,GAAe+B,eAAeriB,EAAKrlD,MAAM8lE,WAAWp7B,KAAI,SAAAzlD,GAAC,OACtE69F,EAAAA,GAAAA,KAAC2G,GAAW,CAEX1/C,QAAS9kD,EACTuiG,OAAQ7hB,GAAeiC,iBAAiBviB,EAAKrlD,MAAM8lE,UAAW7gF,EAAEyxB,IAChEwvE,WAAYvgB,GAAeoC,qBAAqB1iB,EAAKrlD,MAAM8lE,UAAW7gF,EAAEyxB,KAHnEzxB,EAAEyxB,GAIN,IAEH7zB,GACCigG,EAAAA,GAAAA,KAACY,GAAQ,CAACC,MAAOA,IAElB,MAED,IAAK,UACJ,IAAMA,EAAQhe,GAAegC,cAActiB,EAAKrlD,MAAM8lE,WAAWp7B,KAAI,SAAA9oC,GAAC,OACrEkhF,EAAAA,GAAAA,KAACmE,GAAU,CAEVnyD,OAAQlzB,EACR4lF,OAAQ7hB,GAAe4C,gBAAgBljB,EAAKrlD,MAAM8lE,UAAWlkE,EAAE8U,IAC/DwvE,WAAYvgB,GAAe6C,oBAAoBnjB,EAAKrlD,MAAM8lE,UAAWlkE,EAAE8U,KAHlE9U,EAAE8U,GAIN,IAEH7zB,GACCigG,EAAAA,GAAAA,KAACY,GAAQ,CAACC,MAAOA,IAElB,MAED,IAAK,WACJ,IAAMA,EAAQ,GAER9zB,EAAKlM,EAAgBsB,oBAAoBI,EAAKrlD,MAAMglD,KAAM7D,EAAcG,UACzEuO,EAAK,GAAMxK,EAAKrlD,MAAM8lD,YAC1B69B,EAAMrgG,MACLw/F,EAAAA,GAAAA,KAACwQ,GAAqB,CAErB7P,MAAM,WACNkQ,UAAW9jC,EACX/J,UAAWT,EAAKrlD,MAAM8lD,UACtB0tC,MAAO,kBAAMnuC,EAAKrlD,MAAM03F,MAAMryC,EAAKrlD,MAAM8lE,UAAWzgB,EAAKrlD,MAAM8lD,UAAY,KAAO3E,EAAcG,QAAQ,GAJpG,OAUPz+D,GACCigG,EAAAA,GAAAA,KAACY,GAAQ,CAACC,MAAOA,IAMpB,IAAIkS,EAAU,KACqB,OAA9BxwC,EAAKrlD,MAAMglD,KAAKqB,WAAwBhB,EAAKrlD,MAAM8lE,UAAUjW,IAAMxK,EAAKrlD,MAAM8lE,UAAUtkB,QAC5Fq0C,GACC/S,EAAAA,GAAAA,KAACS,GAAK,CAACtjG,MAAK,8BAAAwc,OAAgC4oD,EAAKrlD,MAAM8lE,UAAUtkB,MAAQ,GAAI54C,UAC5Ek6E,EAAAA,GAAAA,KAAClG,GAAO,CACP9W,UAAWzgB,EAAKrlD,MAAM8lE,UACtB9gB,KAAMK,EAAKrlD,MAAMglD,KACjBc,UAAWT,EAAKrlD,MAAM8lD,UACtBZ,UAAWG,EAAKrlD,MAAMklD,UACtB2wC,QAASxwC,EAAKwwC,aAMlB,IAAM9vB,EAAU/Q,GAAUgR,WAAW3gB,EAAKrlD,MAAM8lE,UAAUpW,WACpD3E,EAAOiK,GAAUiR,QAAQ5gB,EAAKrlD,MAAM8lE,UAAUnW,QAC9CuW,EAAalR,GAAUmR,cAAc9gB,EAAKrlD,MAAM8lE,UAAUlW,cAEhE,OACCqzB,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,wBAAuBlhD,SAAA,EACrCq6E,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,eAAclhD,SAAA,EAC5Bq6E,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,SAAQlhD,SAAA,EACtBk6E,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAASwG,QAAQhhF,SAAEy8C,EAAKrlD,MAAM8lE,UAAUhmF,MAAQ,kBAC5DmjG,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,OAAMlhD,SAAA,CACnBm9D,GAAU+c,EAAAA,GAAAA,KAACkE,GAAG,CAAAp+E,SAAEm9D,EAAQjmF,OAAc,KACtCirE,GAAO+3B,EAAAA,GAAAA,KAACkE,GAAG,CAAAp+E,SAAEmiD,EAAKjrE,OAAc,KAChComF,GAAa4c,EAAAA,GAAAA,KAACkE,GAAG,CAAAp+E,SAAEs9D,EAAWpmF,OAAc,MAC7CmjG,EAAAA,GAAAA,MAAC+D,GAAG,CAAAp+E,SAAA,CAAC,SAAOy8C,EAAKrlD,MAAM8lE,UAAUtkB,SAChC6D,EAAKrlD,MAAM8lE,UAAUhW,OAAOplB,KAAI,SAACtb,EAAGxqC,GAAC,OAAMk+F,EAAAA,GAAAA,KAACkE,GAAG,CAAAp+E,SAAUwmB,GAAJxqC,EAAY,UAGnE4yG,GACD1U,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,UAASlhD,SACtB/lB,OAGFgzG,IAGJ,CAAE,MAAA5rB,GACD,OAAO6Y,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,sCACvB,CACD,EApLCzE,EAAKp9D,MAAQ,CACZ4wB,KAAM,SACLwsC,CACH,CAAC,OAAA5H,EAAA85C,EAAA,CAN8B,CAAS/nE,EAAAA,WCX5BmoE,GAAgB,SAAArV,GAAAz6B,EAAA8vC,EAAArV,GAAA,IAAAC,EAAA/5B,EAAAmvC,GAC5B,SAAAA,EAAY33F,GAAe,IAADqlD,EAMvB,OANuB76D,EAAA,KAAAmtG,IACzBtyC,EAAAk9B,EAAAnjG,KAAA,KAAM4gB,IAQP43F,WAAa,SAAC7+F,GACbssD,EAAKnL,SAAS,CACb29C,aAAc9+F,EACd65F,WAAYvtC,EAAKwuC,SAAS96F,IAE5B,EAACssD,EAEDwuC,SAAW,SAAC/wB,GAGX,IAFA,IAAM/S,EAAqB,GAEpBA,EAAMjvE,OAAS,GACrBivE,EAAMzsE,KAAKs/E,GAAmBC,kBAAkBC,EAAUzd,EAAKrlD,MAAMngB,QAAQomE,UAG9E,OAAO/G,EAAYC,KAAK4Q,GAAO,SAAAnrE,GAAC,OAAIA,EAAE9E,IAAI,GAC3C,EAACulE,EAED4uC,OAAS,WACR5uC,EAAKnL,SAAS,CACb04C,WAAYvtC,EAAKwuC,SAASxuC,EAAKp9D,MAAM4vG,gBACnC,WACGxyC,EAAKrlD,MAAMngB,QAAQimE,WACvBT,EAAKrlD,MAAMklD,UAAU/D,EAAc4B,YAAa,EAElD,GACD,EAACsC,EAEDj/C,OAAS,WACR,IACC,IAAImjF,EAAS,KACb,GAAIlkC,EAAKp9D,MAAM4vG,aAAc,CAC5B,IAAMlU,EAAQt+B,EAAKp9D,MAAM2qG,WAAWloD,KAAI,SAAA3xC,GAAI,OAC3C+pF,EAAAA,GAAAA,KAAA,OAAAl6E,UACCk6E,EAAAA,GAAAA,KAACiP,GAAQ,CAACh5F,KAAMA,EAAM4kC,QAAS,SAAA5kC,GAAI,OAAIssD,EAAKrlD,MAAM83F,YAAYzyC,EAAKp9D,MAAM4vG,aAA2B9+F,EAAK,KADhGA,EAAK2d,GAET,IAGDw9E,EAAUvwC,EAAgBsB,oBAAoBI,EAAKrlD,MAAMglD,KAAM7D,EAAc4B,cAC9EmxC,EAAU,GAAM7uC,EAAKrlD,MAAMngB,QAAQimE,YACvC69B,EAAMrgG,MACLw/F,EAAAA,GAAAA,KAACwQ,GAAqB,CAErB7P,MAAM,SACNkQ,UAAWO,EACXpuC,UAAWT,EAAKrlD,MAAMngB,QAAQimE,UAC9BytC,SAAUluC,EAAK4uC,QAJX,WASP1K,GACCzG,EAAAA,GAAAA,KAACmB,GAAM,CACNphG,SACCogG,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,qBAAoBlhD,SAAA,EAClCk6E,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAASwG,QAAQhhF,SAAC,2BAC9Bk6E,EAAAA,GAAAA,KAAA,UACAA,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAAS0H,YAAYliF,UAChCk6E,EAAAA,GAAAA,KAAA,KAAAl6E,SAAG,oFAEJk6E,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,qBAAoBlhD,UAClCk6E,EAAAA,GAAAA,KAACY,GAAQ,CAACvxF,KAAK,MAAMwxF,MAAOA,UAMlC,CAEA,IAAMx9B,EAASd,EAAKrlD,MAAMglD,KAAKmB,OAAOzb,KAAI,SAAA1kC,GACzC,IAAM+pD,EAAS,GAAmBtzD,OAAOuJ,EAAE+pD,OAAOtzD,OAAOuJ,EAAEgqD,SAAS/P,QAAO,SAAAp/D,GAAC,OAAKA,EAAEmtF,MAAM,IACzF,GAAIje,EAAMjvE,OAAS,EAAG,CACrB,IAAM6iG,EAAQ5zB,EAAMrlB,KAAI,SAAA3xC,GAAI,OAC3B+pF,EAAAA,GAAAA,KAAA,OAAAl6E,UACCk6E,EAAAA,GAAAA,KAACiP,GAAQ,CAACh5F,KAAMA,EAAM4kC,QAAS0nB,EAAKuyC,cAD3B7+F,EAAK2d,GAET,IAGP,OACCusE,EAAAA,GAAAA,MAAA,OAAgBn5B,UAAU,qBAAoBlhD,SAAA,EAC7Ck6E,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAASmE,WAAW3+E,SAAE5C,EAAElmB,QACpCgjG,EAAAA,GAAAA,KAACY,GAAQ,CAACC,MAAOA,MAFR39E,EAAE0Q,GAKd,CAEA,OAAO,IACR,IAEIqhF,EAAQ,KACZ,GAAI1yC,EAAKrlD,MAAMglD,KAAK+K,MAAMjvE,OAAS,EAAG,CACrC,IAAM6iG,EAAQt+B,EAAKrlD,MAAMglD,KAAK+K,MAAM9P,QAAO,SAAAp/D,GAAC,OAAKA,EAAEmtF,MAAM,IAAEtjC,KAAI,SAAA3xC,GAAI,OAClE+pF,EAAAA,GAAAA,KAAA,OAAAl6E,UACCk6E,EAAAA,GAAAA,KAACiP,GAAQ,CAACh5F,KAAMA,EAAM4kC,QAAS0nB,EAAKuyC,cAD3B7+F,EAAK2d,GAET,IAGPqhF,GACC9U,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,qBAAoBlhD,SAAA,EAClCk6E,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAASmE,WAAW3+E,SAAC,iBACjCk6E,EAAAA,GAAAA,KAACY,GAAQ,CAACC,MAAOA,MAGpB,CAEA,OACCV,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,qBAAoBlhD,SAAA,EAClCk6E,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAASwG,QAAQhhF,SAAC,oBAC9Bk6E,EAAAA,GAAAA,KAAA,UACAA,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAAS0H,YAAYliF,UAChCk6E,EAAAA,GAAAA,KAAA,KAAAl6E,SAAG,yDAEHu9C,EACA4xC,EACAxO,IAGJ,CAAE,MAAAtf,GACD,OAAO6Y,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,mCACvB,CACD,EA7HCzE,EAAKp9D,MAAQ,CACZ4vG,aAAc,KACdjF,WAAY,IACXvtC,CACH,CAAC,OAAA5H,EAAAk6C,EAAA,CAR2B,CAASnoE,EAAAA,WCGzBwoE,GAAmB,SAAA1V,GAAAz6B,EAAAmwC,EAAA1V,GAAA,IAAAC,EAAA/5B,EAAAwvC,GAC/B,SAAAA,EAAYh4F,GAAe,IAADqlD,EAOvB,OAPuB76D,EAAA,KAAAwtG,IACzB3yC,EAAAk9B,EAAAnjG,KAAA,KAAM4gB,IASPi4F,gBAAkB,WAAO,IAADC,EACjB/xC,EAASd,EAAKrlD,MAAMglD,KAAKmB,OAAOlG,QAAO,SAAAj6C,GAAC,OAAKq/C,EAAKp9D,MAAMkwG,eAAev8F,SAASoK,EAAE,IAEpFuC,EAAW88C,EAAKp9D,MAAMkwG,gBAC1BD,EAAA3vF,GAASjlB,KAAI6F,MAAA+uG,EAAAzwC,EAAItB,IACjB59C,EAAW22C,EAAYC,KAAK52C,GAAU,SAAA3jB,GAAC,OAAIA,EAAE9E,IAAI,IAEjDulE,EAAKnL,SAAS,CACbk+C,SAAU,SACVD,eAAgB5vF,GAElB,EAAC88C,EAEDgzC,WAAa,SAACjb,GACb,IAAI70E,EAAW88C,EAAKp9D,MAAMkwG,eAC1B5vF,EAASjlB,KAAK85F,GACd70E,EAAW22C,EAAYC,KAAK52C,GAAU,SAAA3jB,GAAC,OAAIA,EAAE9E,IAAI,IAEjDulE,EAAKnL,SAAS,CACbk+C,SAAU,SACVD,eAAgB5vF,GAElB,EAAC88C,EAEDizC,aAAe,SAAClb,GACf,IAAM70E,EAAW88C,EAAKp9D,MAAMkwG,eAAel4C,QAAO,SAAAj6C,GAAC,OAAIA,EAAE0Q,KAAO0mE,EAAK1mE,EAAE,IACvE2uC,EAAKnL,SAAS,CACbi+C,eAAgB5vF,GAElB,EAAC88C,EAEDkzC,eAAiB,WAChBlzC,EAAKrlD,MAAMu4F,eAAelzC,EAAKrlD,MAAMqwE,OAAQhrB,EAAKp9D,MAAMkwG,eAAgB9yC,EAAKp9D,MAAMuwG,SAAUnzC,EAAKp9D,MAAMwwG,WACzG,EAACpzC,EAEDj/C,OAAS,WACR,IAAMs4D,EAAarZ,EAAKrlD,MAAMglD,KAAKmB,OACjClG,QAAO,SAAAj6C,GAAC,OAAKq/C,EAAKp9D,MAAMkwG,eAAev8F,SAASoK,EAAE,IAClD0kC,KAAI,SAAA1kC,GACJ,OACC88E,EAAAA,GAAAA,KAAC2P,GAAQ,CAAYrV,KAAMp3E,EAAG23B,QAAS0nB,EAAKp9D,MAAMkwG,eAAer3G,OAAS,EAAI,SAAAs8F,GAAI,OAAI/3B,EAAKgzC,WAAWjb,EAAK,EAAG,MAA/Fp3E,EAAE0Q,GAEnB,IAEK72B,EAAU,CACf,CAAE62B,GAAI,SAAU0pB,QAAS,mBACzB,CAAE1pB,GAAI,WAAY0pB,QAAS,cAEZujB,EAAgBsB,oBAAoBI,EAAKrlD,MAAMglD,KAAM7D,EAAcoB,QAAUoB,EAAgBsB,oBAAoBI,EAAKrlD,MAAMglD,KAAM7D,EAAcc,eACjJ,GAAMoD,EAAKrlD,MAAMngB,QAAQimE,YACvCjmE,EAAQyD,KAAK,CACZozB,GAAI,WACJ0pB,QAAS,aAIX,IAAIs4D,EAAe,KACnB,OAAQrzC,EAAKp9D,MAAMmwG,UAClB,IAAK,SAEJ,IADA,IAAM7vF,EAAW88C,EAAKp9D,MAAMkwG,eAAeztD,KAAI,SAAA1kC,GAAC,OAAI88E,EAAAA,GAAAA,KAACwJ,GAAiB,CAAYn6F,KAAK,OAAO2zE,UAAW9/D,EAAGwmF,SAAU,SAAApP,GAAI,OAAI/3B,EAAKizC,aAAalb,EAAK,GAAzEp3E,EAAE0Q,GAA2E,IAClJnO,EAASznB,OAAS,GACxBynB,EAASjlB,MACRw/F,EAAAA,GAAAA,KAAA,OAA2Bh5B,UAAU,kBAAiBlhD,SAAC,sBAA7CL,EAASznB,SAKrB43G,GACCzV,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,qBAAoBlhD,SAAA,CAChC81D,EAAW59E,QAAS,GAA4C,IAArCukE,EAAKp9D,MAAMkwG,eAAer3G,QAAgBgiG,EAAAA,GAAAA,KAAA,UAAQh5B,UAAU,UAAUnsB,QAAS0nB,EAAK4yC,gBAAgBrvF,SAAC,mBAA0B,KAC3JL,KAGH,MAED,IAAK,WACJ,IAAMioE,EAAWK,GAAiBC,YAAYzrB,EAAKrlD,MAAMqwE,OAAQhrB,EAAKrlD,MAAMngB,QAAQomE,SAClFvb,KAAI,SAAAq7B,GAAO,OACX+c,EAAAA,GAAAA,KAACqQ,GAAW,CAAkBptB,QAASA,GAArBA,EAAQrvD,GAAwB,IAGpDgiF,GACCzV,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,eAAclhD,SAAA,EAC5Bk6E,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAASmE,WAAW3+E,SAAC,6BACjCk6E,EAAAA,GAAAA,KAACY,GAAQ,CAACC,MAAOnT,OAGnB,MAED,IAAK,WACJ,IAAMmT,EAAQ,GAERgV,EAAMh1C,EAAgBsB,oBAAoBI,EAAKrlD,MAAMglD,KAAM7D,EAAcoB,SAC1Eo2C,EAAM,GAAMtzC,EAAKrlD,MAAMngB,QAAQimE,YACnC69B,EAAMrgG,MACL2/F,EAAAA,GAAAA,MAAA,OAAmBn5B,UAAU,qBAAoBlhD,SAAA,EAChDk6E,EAAAA,GAAAA,KAACwQ,GAAqB,CACrB7P,MAAM,UACNkQ,UAAWgF,EACX52B,KAAM1c,EAAKp9D,MAAMuwG,SACjB1yC,UAAWT,EAAKrlD,MAAMngB,QAAQimE,UAC9B7R,SAAU,SAAAh0D,GAAK,OAAIolE,EAAKnL,SAAS,CAAEs+C,SAAUv4G,GAAQ,KAEtD6iG,EAAAA,GAAAA,KAACO,GAAI,CAAAz6E,SAAC,6EARE,YAaX,IAAM46C,EAAMG,EAAgBsB,oBAAoBI,EAAKrlD,MAAMglD,KAAM7D,EAAcc,gBAC1EuB,EAAM,GAAM6B,EAAKrlD,MAAMngB,QAAQimE,YACnC69B,EAAMrgG,MACL2/F,EAAAA,GAAAA,MAAA,OAAqBn5B,UAAU,qBAAoBlhD,SAAA,EAClDk6E,EAAAA,GAAAA,KAACwQ,GAAqB,CACrB7P,MAAM,YACNkQ,UAAWnwC,EACXue,KAAM1c,EAAKp9D,MAAMwwG,WACjB3yC,UAAWT,EAAKrlD,MAAMngB,QAAQimE,UAC9B7R,SAAU,SAAAh0D,GAAK,OAAIolE,EAAKnL,SAAS,CAAEu+C,WAAYx4G,GAAQ,KAExD6iG,EAAAA,GAAAA,KAACO,GAAI,CAAAz6E,SAAC,iFARE,cAaX8vF,GACCzV,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,mBAAkBlhD,SAAA,EAChCk6E,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAASmE,WAAW3+E,SAAC,sBACjCk6E,EAAAA,GAAAA,KAACY,GAAQ,CAACC,MAAOA,OAOrB,OACCV,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,wBAAuBlhD,SAAA,EACrCk6E,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,SAAQlhD,UACtBk6E,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAASwG,QAAQhhF,SAAC,0BAE/Bq6E,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,aAAYlhD,SAAA,EAC1Bq6E,EAAAA,GAAAA,MAAA,OAAKn5B,UAAkC,IAAtB4U,EAAW59E,QAAkBukE,EAAKp9D,MAAMkwG,eAAer3G,QAAU,EAAK,0BAA4B,mBAAmB8nB,SAAA,EACrIk6E,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAAS0H,YAAYliF,UAChCq6E,EAAAA,GAAAA,MAAA,KAAAr6E,SAAA,CAAG,WAAOk6E,EAAAA,GAAAA,KAAA,KAAAl6E,SAAG,mBAAkB,wDAEhCk6E,EAAAA,GAAAA,KAACY,GAAQ,CAACC,MAAOjlB,QAElBokB,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,aACfm5B,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,mBAAkBlhD,SAAA,EAChCk6E,EAAAA,GAAAA,KAACiE,GAAI,CACJlnG,QAASA,EACT2mG,WAAYnhC,EAAKp9D,MAAMmwG,SACvB3R,SAAU,SAAA/vE,GAAE,OAAI2uC,EAAKnL,SAAS,CAAEk+C,SAAU1hF,GAAK,IAE/CgiF,GACD5V,EAAAA,GAAAA,KAAA,UACAA,EAAAA,GAAAA,KAAA,UACCh5B,UAAU,UACVrhD,SAAW48C,EAAKp9D,MAAMkwG,eAAer3G,OAAS,GAAOukE,EAAKp9D,MAAMkwG,eAAer3G,OAAS,EACxF68C,QAAS0nB,EAAKkzC,eAAe3vF,SAC7B,gCAON,EA9KCy8C,EAAKp9D,MAAQ,CACZmwG,SAAU,SACVD,eAAgB,GAChBK,SAAU,EACVC,WAAY,GACXpzC,CACH,CAAC,OAAA5H,EAAAu6C,EAAA,CAT8B,CAASxoE,EAAAA,WClC5BopE,GAAMn7C,GAAA,SAAAm7C,IAAApuG,EAAA,KAAAouG,EAAA,IAANA,GACLC,OAAS,SAAC54G,GAChB,IAAIyB,EAAG,GAAA+a,OAAMxc,EAAK,MAiBlB,OAfIA,EAAQ,OAEXyB,EAAG,GAAA+a,QADHxc,GAAS,MACM64G,QAAQ,GAAE,QAGtB74G,EAAQ,OAEXyB,EAAG,GAAA+a,QADHxc,GAAS,MACM64G,QAAQ,GAAE,QAGtB74G,EAAQ,OAEXyB,EAAG,GAAA+a,QADHxc,GAAS,MACM64G,QAAQ,GAAE,QAGnBp3G,CACR,EApBYk3G,GAsBLG,WAAa,SAAC94G,EAAe6gB,GACnC,OAAI7gB,GAAS,EACL,OAGF,GAANwc,OAAUqE,GAAMrE,OAAGxc,EAAM64G,QAAQ,GAClC,mBCVYE,GAAQ,SAAA1W,GAAAz6B,EAAAmxC,EAAA1W,GAAA,IAAAC,EAAA/5B,EAAAwwC,GAAA,SAAAA,IAAA,IAAA3zC,EAAA76D,EAAA,KAAAwuG,GAAA,QAAA76F,EAAAvd,UAAAE,OAAA4X,EAAA,IAAAvZ,MAAAgf,GAAAnB,EAAA,EAAAA,EAAAmB,EAAAnB,IAAAtE,EAAAsE,GAAApc,UAAAoc,GAgBlB,OAhBkBqoD,EAAAk9B,EAAAnjG,KAAA+J,MAAAo5F,EAAA,OAAA9lF,OAAA/D,KACpB0N,OAAS,WACR,IACC,OACC68E,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,YAAWlhD,SAAA,EACzBq6E,EAAAA,GAAAA,MAACI,GAAI,CAAAz6E,SAAA,CAAC,yBAAqBk6E,EAAAA,GAAAA,KAAA,KAAGhhE,KAAK,+BAA8BlZ,SAAC,eAAc,6BAChFk6E,EAAAA,GAAAA,KAAA,UACAA,EAAAA,GAAAA,KAAC6D,GAAS,CAAClD,MAAM,UAAUxjG,MAAOg5G,MAClCnW,EAAAA,GAAAA,KAAA,UACAA,EAAAA,GAAAA,KAAC6D,GAAS,CAAClD,MAAM,YAAYxjG,MAAOolE,EAAKrlD,MAAMglD,KAAO4zC,GAAOC,OAAO3hG,KAAKC,UAAUkuD,EAAKrlD,MAAMglD,MAAMlkE,QAAU,KAC9GgiG,EAAAA,GAAAA,KAAC6D,GAAS,CAAClD,MAAM,eAAexjG,MAAO24G,GAAOC,OAAO3hG,KAAKC,UAAUkuD,EAAKrlD,MAAMngB,SAASiB,YAG3F,CAAE,MAAAmpF,GACD,OAAO6Y,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,0BACvB,CACD,EAACzE,CAAC,CAAD,OAAA5H,EAAAu7C,EAAA,CAhBmB,CAASxpE,EAAAA,WCMjB0pE,GAAQ,SAAA5W,GAAAz6B,EAAAqxC,EAAA5W,GAAA,IAAAC,EAAA/5B,EAAA0wC,GACpB,SAAAA,EAAYl5F,GAAe,IAADqlD,EAKvB,OALuB76D,EAAA,KAAA0uG,IACzB7zC,EAAAk9B,EAAAnjG,KAAA,KAAM4gB,IAOPm5F,OAAS,SAACC,GACT/zC,EAAKnL,SAAS,CACbk/C,IAAKA,GAEP,EAAC/zC,EAED2jC,WAAa,SAAClpG,EAAcuY,EAAqBpU,EAAgBglG,EAA0B/yC,EAA0B0a,GACpHvL,EAAKnL,SAAS,CACb3xC,SAAU,CACTzoB,KAAMA,EACNuY,YAAaA,EACbpU,KAAMA,EACNglG,SAAUA,EACV/yC,SAAUA,EACV0a,QAASA,IAGZ,EAACvL,EAED6jC,aAAe,WACd7jC,EAAKnL,SAAS,CACb3xC,SAAU,MAEZ,EAAC88C,EAEDg0C,SAAW,SAAC93C,GACX,IAAMuoC,EAAO90B,GAAUsnB,QAAQ/6B,GAC/B,OAAIuoC,EACIA,EAAKhqG,KAGN,EACR,EAACulE,EAEDj/C,OAAS,WACR,IACC,IAAMu9E,EAAuB,GAE7B,OAAQt+B,EAAKp9D,MAAMmxG,KAClB,IAAK,SACJpkC,GAAUknB,mBAAmB72B,EAAKrlD,MAAMngB,QAAQomE,SAC9C3iD,SAAQ,SAAAxe,GACR6+F,EAAMrgG,MACLw/F,EAAAA,GAAAA,KAACS,GAAK,CAAYtjG,MAAOolE,EAAKg0C,SAASv0G,EAAEy8D,QAAQ34C,UAChDk6E,EAAAA,GAAAA,KAACqQ,GAAW,CAACptB,QAASjhF,EAAG64C,QAAS,SAAA74C,GAAC,OAAIugE,EAAK2jC,WAAWlkG,EAAEhF,KAAMgF,EAAEuT,YAAaqtE,GAASuC,QAASnjF,EAAE60E,iBAAkB70E,EAAEoxD,SAAUpxD,EAAE8rE,QAAQ,KAD/H9rE,EAAE4xB,IAIhB,IACD,MACD,IAAK,WACJs+C,GAAUmnB,sBAAsB92B,EAAKrlD,MAAMngB,QAAQomE,SACjD3iD,SAAQ,SAAAxe,GACR6+F,EAAMrgG,MACLw/F,EAAAA,GAAAA,KAACS,GAAK,CAAYtjG,MAAOolE,EAAKg0C,SAASv0G,EAAEy8D,QAAQ34C,UAChDk6E,EAAAA,GAAAA,KAACqQ,GAAW,CAACptB,QAASjhF,EAAG64C,QAAS,SAAA74C,GAAC,OAAIugE,EAAK2jC,WAAWlkG,EAAEhF,KAAMgF,EAAEuT,YAAaqtE,GAASuC,QAASnjF,EAAE60E,iBAAkB70E,EAAEoxD,SAAUpxD,EAAE8rE,QAAQ,KAD/H9rE,EAAE4xB,IAIhB,IACD,MACD,IAAK,QACJs+C,GAAU+b,YAAY1rB,EAAKrlD,MAAMngB,QAAQomE,SACvC3iD,SAAQ,SAAAze,GACR8+F,EAAMrgG,MACLw/F,EAAAA,GAAAA,KAACS,GAAK,CAAYtjG,MAAOolE,EAAKg0C,SAASx0G,EAAE08D,QAAQ34C,UAChDk6E,EAAAA,GAAAA,KAACoQ,GAAQ,CAACnoC,KAAMlmE,EAAG84C,QAAS,SAAA94C,GAAC,OAAIwgE,EAAK2jC,WAAWnkG,EAAE/E,KAAM+E,EAAEwT,YAAaqtE,GAASwC,KAAMrjF,EAAE80E,iBAAkB90E,EAAEqxD,SAAUrxD,EAAE+rE,QAAQ,KADtH/rE,EAAE6xB,IAIhB,IACD,MACD,IAAK,cACJs+C,GAAUgc,kBAAkB3rB,EAAKrlD,MAAMngB,QAAQomE,SAC7C3iD,SAAQ,SAAAzB,GACR8hF,EAAMrgG,MACLw/F,EAAAA,GAAAA,KAACS,GAAK,CAAYtjG,MAAOolE,EAAKg0C,SAASx3F,EAAE0/C,QAAQ34C,UAChDk6E,EAAAA,GAAAA,KAAC+O,GAAc,CAAC3rB,WAAYrkE,EAAG87B,QAAS,SAAA97B,GAAC,OAAIwjD,EAAK2jC,WAAWnnF,EAAE/hB,KAAM+hB,EAAExJ,YAAaqtE,GAASyC,WAAYtmE,EAAE83D,iBAAkB93D,EAAEq0C,SAAUr0C,EAAE+uD,QAAQ,KADxI/uD,EAAE6U,IAIhB,IACD,MACD,IAAK,aACJs+C,GAAUonB,iBAAiB/2B,EAAKrlD,MAAMngB,QAAQomE,SAC5C3iD,SAAQ,SAAAxe,GACR6+F,EAAMrgG,MACLw/F,EAAAA,GAAAA,KAACS,GAAK,CAAYtjG,MAAOolE,EAAKg0C,SAASv0G,EAAEy8D,QAAQ34C,UAChDk6E,EAAAA,GAAAA,KAACoP,GAAa,CAACjuC,UAAWn/D,KADfA,EAAE4xB,IAIhB,IACD,MACD,IAAK,QACJs+C,GAAUkO,YAAY7d,EAAKrlD,MAAMngB,QAAQomE,SACvC3iD,SAAQ,SAAAziB,GACR8iG,EAAMrgG,MACLw/F,EAAAA,GAAAA,KAACS,GAAK,CAAYtjG,MAAOolE,EAAKg0C,SAASx4G,EAAE0gE,QAAQ34C,UAChDk6E,EAAAA,GAAAA,KAACiP,GAAQ,CAACh5F,KAAMlY,KADLA,EAAE61B,IAIhB,IACD,MACD,IAAK,UACJs+C,GAAUqc,cAAchsB,EAAKrlD,MAAMngB,QAAQomE,SACzC3iD,SAAQ,SAAAhN,GACRqtF,EAAMrgG,MACLw/F,EAAAA,GAAAA,KAACS,GAAK,CAAYtjG,MAAOolE,EAAKg0C,SAAS/iG,EAAEirD,QAAQ34C,UAChDk6E,EAAAA,GAAAA,KAACiP,GAAQ,CAACh5F,KAAMzC,KADLA,EAAEogB,IAIhB,IAIH,IAAI6yE,EAAS,KACb,GAAIlkC,EAAKp9D,MAAMsgB,SAAU,CACxB,IAAM3lB,EAASyiE,EAAKp9D,MAAMsgB,SAASzoB,KAC7BmE,EAAOohE,EAAKp9D,MAAMsgB,SAAStkB,KAE3BulG,EAAgBnkC,EAAKp9D,MAAMsgB,SAAS0gF,SAASv+C,KAAI,SAAAzlD,GACtD,OACC69F,EAAAA,GAAAA,KAACS,GAAK,CAAYtjG,MAAM,GAAE2oB,UACzBk6E,EAAAA,GAAAA,KAAC2G,GAAW,CACX1/C,QAAS9kD,EACTuiG,OAAQ5kG,EACRsjG,WAAYjiG,KAJFgB,EAAEyxB,GAQhB,IACMgzE,EAAerkC,EAAKp9D,MAAMsgB,SAAS2tC,SAASxL,KAAI,SAAAzlD,GACrD,OACC69F,EAAAA,GAAAA,KAACS,GAAK,CAAYtjG,MAAM,GAAE2oB,UACzBk6E,EAAAA,GAAAA,KAAC2G,GAAW,CACX1/C,QAAS9kD,EACTuiG,OAAQ5kG,EACRsjG,WAAYjiG,KAJFgB,EAAEyxB,GAQhB,IACMizE,EAActkC,EAAKp9D,MAAMsgB,SAASqoD,QAAQlmB,KAAI,SAAA9oC,GACnD,OACCkhF,EAAAA,GAAAA,KAACS,GAAK,CAAYtjG,MAAM,GAAE2oB,UACzBk6E,EAAAA,GAAAA,KAACmE,GAAU,CACVnyD,OAAQlzB,EACR4lF,OAAQ5kG,EACRsjG,WAAYjiG,KAJF2d,EAAE8U,GAQhB,IACM7zB,GACLogG,EAAAA,GAAAA,MAAA,OAAAr6E,SAAA,EACCk6E,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAASwG,QAAQhhF,SAAEy8C,EAAKp9D,MAAMsgB,SAASzoB,QACnDgjG,EAAAA,GAAAA,KAAA,UACAA,EAAAA,GAAAA,KAACO,GAAI,CAAAz6E,UACJk6E,EAAAA,GAAAA,KAAA,KAAGlhG,MAAO,CAAEioG,UAAW,UAAWjhF,SAAEy8C,EAAKp9D,MAAMsgB,SAASlQ,gBAExDmxF,EAAc1oG,OAAS,GAAIgiG,EAAAA,GAAAA,KAAA,SAAS,KACpC0G,EAAc1oG,OAAS,GAAIgiG,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAASmE,WAAW3+E,SAAC,mBAAwB,KACpF4gF,EAAc1oG,OAAS,GAAIgiG,EAAAA,GAAAA,KAACY,GAAQ,CAACC,MAAO6F,IAAoB,KAChEE,EAAa5oG,OAAS,GAAIgiG,EAAAA,GAAAA,KAAA,SAAS,KACnC4G,EAAa5oG,OAAS,GAAIgiG,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAASmE,WAAW3+E,SAAC,kBAAuB,KAClF8gF,EAAa5oG,OAAS,GAAIgiG,EAAAA,GAAAA,KAACY,GAAQ,CAACC,MAAO+F,IAAmB,KAC9DC,EAAY7oG,OAAS,GAAIgiG,EAAAA,GAAAA,KAAA,SAAS,KAClC6G,EAAY7oG,OAAS,GAAIgiG,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAASmE,WAAW3+E,SAAC,iBAAsB,KAChF+gF,EAAY7oG,OAAS,GAAIgiG,EAAAA,GAAAA,KAACY,GAAQ,CAACC,MAAOgG,IAAkB,QAG/DJ,GACCzG,EAAAA,GAAAA,KAACmB,GAAM,CACNphG,QAASA,EACT2+D,MAAO,EACP2iC,QAAS9+B,EAAK6jC,cAGjB,CAEA,OACCjG,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,YAAWlhD,SAAA,EACzBk6E,EAAAA,GAAAA,KAACuD,GAAQ,CACRxmG,QAAS,CACR,CAAE62B,GAAI,SAAU0pB,QAAS,UACzB,CAAE1pB,GAAI,WAAY0pB,QAAS,YAC3B,CAAE1pB,GAAI,QAAS0pB,QAAS,SACxB,CAAE1pB,GAAI,cAAe0pB,QAAS,eAC9B,CAAE1pB,GAAI,aAAc0pB,QAAS,cAC7B,CAAE1pB,GAAI,QAAS0pB,QAAS,SACxB,CAAE1pB,GAAI,UAAW0pB,QAAS,YAE3BomD,WAAYnhC,EAAKp9D,MAAMmxG,IACvB3S,SAAUphC,EAAK8zC,SAEfxV,EAAM7iG,OAAS,GAAIgiG,EAAAA,GAAAA,KAACY,GAAQ,CAACC,MAAOA,IAAY,KAChDA,EAAM7iG,OAAS,EAAI,MAAOgiG,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAASiG,MAAMzgF,SAAC,UACtD2gF,IAGJ,CAAE,MAAAtf,GACD,OAAO6Y,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,0BACvB,CACD,EA7MCzE,EAAKp9D,MAAQ,CACZmxG,IAAK,SACL7wF,SAAU,MACT88C,CACH,CAAC,OAAA5H,EAAAy7C,EAAA,CAPmB,CAAS1pE,EAAAA,WCJjB8pE,GAAU,SAAAhX,GAAAz6B,EAAAyxC,EAAAhX,GAAA,IAAAC,EAAA/5B,EAAA8wC,GAAA,SAAAA,IAAA,IAAAj0C,EAAA76D,EAAA,KAAA8uG,GAAA,QAAAn7F,EAAAvd,UAAAE,OAAA4X,EAAA,IAAAvZ,MAAAgf,GAAAnB,EAAA,EAAAA,EAAAmB,EAAAnB,IAAAtE,EAAAsE,GAAApc,UAAAoc,GAgCpB,OAhCoBqoD,EAAAk9B,EAAAnjG,KAAA+J,MAAAo5F,EAAA,OAAA9lF,OAAA/D,KACtB6gG,sBAAwB,SAACt5G,GACxBolE,EAAKrlD,MAAMu5F,sBAAsBt5G,GACjCqpF,GAAMK,KAAKL,GAAME,KAClB,EAACnkB,EAEDj/C,OAAS,WACR,IACC,IAAMozF,EAAQ/xG,OAAO0Y,SAAS2hB,KAAKlmB,SAAS,aAE5C,OACCqnF,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,cAAalhD,SAAA,EAC3Bk6E,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAASmE,WAAW3+E,SAAC,WACjCk6E,EAAAA,GAAAA,KAAC6D,GAAS,CAAClD,MAAM,uBAAuBxjG,MAAK,GAAAwc,OAA6C,IAAxC4oD,EAAKrlD,MAAMngB,QAAQmmE,mBAAwB,QAC7F88B,EAAAA,GAAAA,KAAA,SACC7+F,KAAK,QACLq+B,IAAK,EACL27B,IAAK,EACLlO,KAAM,IACN9vD,MAAOolE,EAAKrlD,MAAMngB,QAAQmmE,mBAC1B/R,SAAU,SAAAvvD,GAAC,OAAI2gE,EAAKk0C,sBAAsBruD,WAAWxmD,EAAE9E,OAAOK,OAAO,KAEtE6iG,EAAAA,GAAAA,KAAA,SACC0W,GAAQ1W,EAAAA,GAAAA,KAACgE,GAAM,CAACrD,MAAM,iBAAiBp8E,QAASg+C,EAAKrlD,MAAMngB,QAAQimE,UAAW7R,SAAUoR,EAAKrlD,MAAMy5F,mBAAuB,MAC3H3W,EAAAA,GAAAA,KAACgE,GAAM,CAACrD,MAAM,YAAYp8E,QAASg+C,EAAKrlD,MAAMngB,QAAQkmE,SAAU9R,SAAUoR,EAAKrlD,MAAM05F,eACrF5W,EAAAA,GAAAA,KAAA,SACCz9B,EAAKrlD,MAAMglD,MAAO89B,EAAAA,GAAAA,KAACe,GAAa,CAACJ,MAAM,wBAAwB9lD,QAAS,kBAAM0nB,EAAKrlD,MAAM25F,aAAa,IAAO,OAGjH,CAAE,MAAA1vB,GACD,OAAO6Y,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,4BACvB,CACD,EAACzE,CAAC,CAAD,OAAA5H,EAAA67C,EAAA,CAhCqB,CAAS9pE,EAAAA,WCdhC,IAAMjsC,GAAK,eAyBX,SAASmhE,GAAMzkE,GACb,MAAiC,KAA1BA,EAAM0B,QAAQ4B,GAAI,GAC3B,CC3BO,IAAMq2G,GAAMn8C,GAOjB,SAAAm8C,EAAYt1G,EAAUu1G,EAAQC,GAAOtvG,EAAA,KAAAovG,GACnCl3G,KAAK4B,SAAWA,EAChB5B,KAAKm3G,OAASA,EACVC,IACFp3G,KAAKo3G,MAAQA,EAEjB,ICPK,SAASC,GAAMC,EAAaF,GAOjC,IALA,IAAMx1G,EAAW,CAAC,EAEZu1G,EAAS,CAAC,EACZloE,GAAS,IAEJA,EAAQqoE,EAAYl5G,QAC3BrC,OAAO8mB,OAAOjhB,EAAU01G,EAAYroE,GAAOrtC,UAC3C7F,OAAO8mB,OAAOs0F,EAAQG,EAAYroE,GAAOkoE,QAG3C,OAAO,IAAID,GAAOt1G,EAAUu1G,EAAQC,EACtC,CCrBO,SAASG,GAAUh6G,GACxB,OAAOA,EAAMsjB,aACf,CFiBAq2F,GAAOl7G,UAAU4F,SAAW,CAAC,EAE7Bs1G,GAAOl7G,UAAUm7G,OAAS,CAAC,EAE3BD,GAAOl7G,UAAUo7G,MAAQ,KG3BlB,IAAMI,GAAIz8C,GAMf,SAAAy8C,EAAY51G,EAAU61G,GAAW3vG,EAAA,KAAA0vG,GAE/Bx3G,KAAK4B,SAAWA,EAEhB5B,KAAKy3G,UAAYA,CACnB,IAIFD,GAAKx7G,UAAUo7G,MAAQ,KACvBI,GAAKx7G,UAAU07G,SAAU,EACzBF,GAAKx7G,UAAU27G,YAAa,EAC5BH,GAAKx7G,UAAU47G,mBAAoB,EACnCJ,GAAKx7G,UAAUiiB,QAAS,EACxBu5F,GAAKx7G,UAAU67G,gBAAiB,EAChCL,GAAKx7G,UAAU87G,gBAAiB,EAChCN,GAAKx7G,UAAU+7G,uBAAwB,EACvCP,GAAKx7G,UAAUskB,iBAAkB,EACjCk3F,GAAKx7G,UAAUg8G,SAAU,ECxBzB,IAAIC,GAAS,EAEAP,GAAUQ,KACVP,GAAaO,KACbN,GAAoBM,KACpBj6F,GAASi6F,KACTJ,GAAiBI,KACjBL,GAAiBK,KACjBH,GAAwBG,KAErC,SAASA,KACP,OAAAvoF,KAAAmtD,IAAO,IAAOm7B,GAChB,CCPA,IAAME,GAASp8G,OAAOqV,KAAKghD,GAEdgmD,GAAW,SAAAC,GAAAlzC,EAAAizC,EAAAC,GAAA,IAAAxY,EAAA/5B,EAAAsyC,GAQtB,SAAAA,EAAYx2G,EAAU61G,EAAWa,EAAMlB,GAAO,IAAAz0C,EAAA76D,EAAA,KAAAswG,GAC5C,IAAInpE,GAAS,EAMb,GAFAspE,GAAI3yC,EAFJjD,EAAAk9B,EAAAnjG,KAAA,KAAMkF,EAAU61G,IAEL,QAASL,GAEA,kBAATkB,EACT,OAASrpE,EAAQkpE,GAAO/5G,QAAQ,CAC9B,IAAMo6G,EAAQL,GAAOlpE,GACrBspE,GAAI3yC,EAAAjD,GAAOw1C,GAAOlpE,IAASqpE,EAAOlmD,EAAMomD,MAAYpmD,EAAMomD,GAC5D,CACD,OAAA71C,CACH,CAAC,OAAA5H,EAAAq9C,EAAA,CArBqB,CAASZ,IA+BjC,SAASe,GAAKnxG,EAAQvK,EAAKU,GACrBA,IAEF6J,EAAOvK,GAAOU,EAElB,CAZA66G,GAAYp8G,UAAUg8G,SAAU,ECbhC,IAAMS,GAAM,CAAC,EAAEx8G,eAMR,SAASw3C,GAAOyjB,GAErB,IAIIz1D,EAJEG,EAAW,CAAC,EAEZu1G,EAAS,CAAC,EAIhB,IAAK11G,KAAQy1D,EAAW5tD,WACtB,GAAImvG,GAAI/7G,KAAKw6D,EAAW5tD,WAAY7H,GAAO,CACzC,IAAMlE,EAAQ25D,EAAW5tD,WAAW7H,GAC9Boa,EAAO,IAAIu8F,GACf32G,EACAy1D,EAAW4U,UAAU5U,EAAWwhD,YAAc,CAAC,EAAGj3G,GAClDlE,EACA25D,EAAWkgD,OAIXlgD,EAAW52C,iBACX42C,EAAW52C,gBAAgBpH,SAASzX,KAEpCoa,EAAKyE,iBAAkB,GAGzB1e,EAASH,GAAQoa,EAEjBs7F,EAAOI,GAAU91G,IAASA,EAC1B01G,EAAOI,GAAU17F,EAAK47F,YAAch2G,CACtC,CAGF,OAAO,IAAIy1G,GAAOt1G,EAAUu1G,EAAQjgD,EAAWkgD,MACjD,CCvDO,IAAMuB,GAAQllE,GAAO,CAC1B2jE,MAAO,QACPtrC,UAAS,SAACpC,EAAGjoE,GACX,MAAO,SAAWA,EAAKT,MAAM,GAAG6f,aAClC,EACAvX,WAAY,CACVsvG,aAAc,KACdC,aAAc,KACdC,UAAW,KACXC,UAAW,KACXC,UAAW,KACXC,WAAY,KACZC,UAAW,QCZFC,GAAM1lE,GAAO,CACxB2jE,MAAO,MACPtrC,UAAS,SAACpC,EAAGjoE,GACX,MAAO,OAASA,EAAKT,MAAM,GAAG6f,aAChC,EACAvX,WAAY,CAAC8vG,QAAS,KAAMC,QAAS,KAAMC,SAAU,QCFhD,SAASC,GAAuBb,EAAYjB,GACjD,OAAOA,KAAaiB,EAAaA,EAAWjB,GAAaA,CAC3D,CCAO,SAAS+B,GAAyBd,EAAY92G,GACnD,OAAO23G,GAAuBb,EAAY92G,EAASif,cACrD,CCNO,IAAMm8E,GAAQvpD,GAAO,CAC1B2jE,MAAO,QACPsB,WAAY,CAACe,WAAY,eACzB3tC,UAAW0tC,GACXlwG,WAAY,CAAC0zF,MAAO,KAAM0c,WAAY,QCJ3BC,GAAOlmE,GAAO,CACzBq4B,UAAS,SAACpC,EAAGjoE,GACX,MAAgB,SAATA,EAAkBA,EAAO,QAAUA,EAAKT,MAAM,GAAG6f,aAC1D,EACAvX,WAAY,CACVswG,qBAAsB,KACtBC,WAAYlC,GACZmC,iBAAkB,KAClBC,SAAUpC,GACVqC,YAAarC,GACbsC,aAAch8F,GACdi8F,aAAcj8F,GACdk8F,YAAal8F,GACbm8F,aAActC,GACduC,YAAa,KACbC,gBAAiBxC,GACjByC,YAAa,KACbC,aAAc7C,GACd8C,eAAgB3C,GAChB4C,iBAAkB,KAClBC,aAAchD,GACdiD,WAAY9C,GACZ+C,YAAalD,GACbmD,aAAc,KACdC,WAAYpD,GACZqD,YAAa,KACbC,iBAAkB,KAClBC,UAAW,KACXC,eAAgBrD,GAChBsD,UAAWn9F,GACXo9F,SAAU,KACVC,UAAW3D,GACX4D,cAAe5D,GACf6D,oBAAqB7D,GACrB8D,gBAAiB,KACjBC,SAAU5D,GACV6D,gBAAiB,KACjBC,aAAc39F,GACd49F,YAAalE,GACbmE,aAAcnE,GACdoE,aAAc,KACdC,aAAcrE,GACdsE,oBAAqBnE,GACrBoE,aAAcj+F,GACdk+F,aAAcl+F,GACdm+F,YAAan+F,GACbo+F,aAAc1E,GACd2E,YAAar+F,GACbs+F,SAAU,KACVC,aAAcv+F,GACdw+F,aAAcx+F,GACdy+F,aAAcz+F,GACd0+F,cAAe,KACft0C,KAAM,QC7CGu0C,GAAOnpE,GAAO,CACzB2jE,MAAO,OACPsB,WAAY,CACVmE,cAAe,iBACfC,UAAW,QACXC,QAAS,MACTC,UAAW,cAEblxC,UAAW0tC,GACXl5F,gBAAiB,CAAC,UAAW,WAAY,QAAS,YAClDhX,WAAY,CAEV2zG,KAAM,KACNC,OAAQrF,GACRsF,cAAerF,GACfsF,UAAWtF,GACX1lE,OAAQ,KACRirE,MAAO,KACPC,gBAAiB5F,GACjB6F,oBAAqB7F,GACrB8F,eAAgB9F,GAChB+F,IAAK,KACLn2C,GAAI,KACJo2C,MAAOhG,GACPiG,eAAgB,KAChBC,aAAc9F,GACd18D,UAAWs8D,GACXmG,SAAUnG,GACVoG,SAAUhG,GACVz0E,QAASq0E,GACTqG,QAAS,KACTp5F,QAAS+yF,GACTsG,KAAM,KACN52C,UAAW0wC,GACXmG,KAAMhgG,GACNigG,QAAS,KACT/9G,QAAS,KACTm/B,gBAAiBq4E,GACjBwG,SAAUzG,GACV0G,aAActG,GACduG,OAAQpgG,GAAS45F,GACjByG,YAAa,KACb76G,KAAM,KACN86G,SAAU,KACVx3B,SAAU,KACVr1B,QAASgmD,GACT8G,MAAO9G,GACP94B,IAAK,KACL6/B,QAAS,KACT14F,SAAU2xF,GACVgH,SAAU9G,GACV+G,UAAWhH,GACXiH,QAAS,KACTC,aAAc,KACdC,cAAe,KACfp7D,KAAM,KACNq7D,WAAY,KACZC,YAAa,KACbC,WAAY,KACZC,eAAgBxH,GAChByH,WAAY,KACZC,QAAStH,GACT59E,OAAQjc,GACR+vD,OAAQ0pC,GACR2H,KAAMphG,GACNmhB,KAAM,KACNkgF,SAAU,KACVC,QAASzH,GACT0H,UAAW1H,GACX9jF,GAAI,KACJyrF,WAAY,KACZC,YAAa,KACbC,MAAOjI,GACPkI,UAAW,KACXC,UAAW,KACXv0F,GAAI,KACJw0F,MAAOpI,GACPqI,OAAQ,KACRC,SAAUlI,GACVmI,QAASnI,GACToI,UAAWxI,GACXyI,SAAUrI,GACVsI,KAAM,KACNrf,MAAO,KACPsf,KAAM,KACNC,SAAU,KACV9hD,KAAM,KACNyJ,QAAS,KACTs4C,KAAM7I,GACN8I,IAAKviG,GACLwiG,SAAU,KACVllD,IAAK,KACLmlD,UAAWziG,GACXqrC,MAAO,KACPq3D,OAAQ,KACR/gF,IAAK,KACLghF,UAAW3iG,GACX88B,SAAU28D,GACVmJ,MAAOnJ,GACPt6G,KAAM,KACN0jH,MAAO,KACPC,SAAUrJ,GACVsJ,WAAYtJ,GACZuJ,QAAS,KACTC,aAAc,KACdC,WAAY,KACZC,cAAe,KACfC,cAAe,KACfC,eAAgB,KAChBC,OAAQ,KACRzX,SAAU,KACV0X,UAAW,KACXC,iBAAkB,KAClBlwD,SAAU,KACVtW,QAAS,KACTwmD,QAAS,KACTigB,cAAe,KACfC,cAAe,KACfC,kBAAmB,KACnBC,OAAQ,KACRC,YAAa,KACbC,MAAO,KACPC,WAAY,KACZC,OAAQ,KACRC,UAAW,KACXC,YAAa,KACbC,WAAY,KACZC,YAAa,KACbC,WAAY,KACZC,YAAa,KACbC,OAAQ,KACRC,iBAAkB,KAClBC,UAAW,KACXC,QAAS,KACTh8G,QAAS,KACTi8G,QAAS,KACTC,WAAY,KACZC,aAAc,KACdC,QAAS,KACTC,UAAW,KACXC,UAAW,KACXC,WAAY,KACZC,QAAS,KACTC,iBAAkB,KAClBC,OAAQ,KACRC,aAAc,KACdC,iBAAkB,KAClBC,UAAW,KACXC,YAAa,KACbC,UAAW,KACXC,eAAgB,KAChBC,YAAa,KACbj4C,aAAc,KACdC,aAAc,KACdi4C,YAAa,KACbC,WAAY,KACZC,YAAa,KACbC,UAAW,KACXC,UAAW,KACXC,SAAU,KACVC,WAAY,KACZC,WAAY,KACZC,QAAS,KACTC,QAAS,KACTC,OAAQ,KACRC,UAAW,KACXC,WAAY,KACZC,WAAY,KACZC,aAAc,KACdC,mBAAoB,KACpBC,QAAS,KACTC,SAAU,KACVC,SAAU,KACVC,YAAa,KACbC,0BAA2B,KAC3BC,SAAU,KACVC,UAAW,KACXphB,SAAU,KACVqhB,aAAc,KACdC,UAAW,KACXC,UAAW,KACXC,SAAU,KACVC,UAAW,KACXC,aAAc,KACdC,SAAU,KACVC,qBAAsB,KACtBC,SAAU,KACVC,eAAgB,KAChBC,UAAW,KACXC,QAAS,KACTt9G,KAAMivG,GACNsO,QAAS/nG,GACTgoG,QAAS,KACTC,KAAMpO,GACNqO,YAAa,KACbC,YAAa1O,GACb2O,QAAS,KACTC,cAAe,KACfC,oBAAqB,KACrBC,OAAQ,KACRC,QAAS,KACTC,SAAUhP,GACViP,eAAgB,KAChBC,IAAK9O,GACL+O,SAAUnP,GACVoP,SAAUpP,GACVvhG,KAAM8H,GACN8oG,QAAS9oG,GACT+oG,QAASlP,GACTmP,MAAO,KACPC,OAAQxP,GACRyP,SAAUzP,GACV7xF,SAAU6xF,GACV94F,MAAO,KACPhJ,KAAMqI,GACNmpG,MAAO,KACPC,KAAM,KACNC,KAAMrpG,GACNspG,WAAY5P,GACZ75G,IAAK,KACL0pH,OAAQ,KACRC,QAAS,KACTC,OAAQ,KACR/nH,MAAOse,GACPovC,KAAM,KACNnuD,MAAO,KACPyoH,SAAU1pG,GACV/gB,OAAQ,KACRm3E,MAAO,KACPuzC,UAAW,KACXrmH,KAAM,KACNsmH,cAAenQ,GACfoQ,OAAQ,KACRvqH,MAAOo6G,GACP19E,MAAOhc,GACP8pG,KAAM,KAINC,MAAO,KACPC,MAAO,KACPC,QAASpQ,GACTqQ,KAAM,KACN3kC,WAAY,KACZ4kC,QAAS,KACTC,OAAQpqG,GACR0nF,YAAa,KACb2iB,aAAcrqG,GACdsqG,YAAa,KACbC,YAAa,KACbpkF,KAAM,KACNqkF,QAAS,KACTC,QAAS,KACT33G,MAAO,KACPvO,KAAM,KACNmmH,SAAU,KACVC,SAAU,KACVxsF,MAAO,KACPysF,QAASnR,GACToR,QAASpR,GACTt6E,MAAO,KACP2rF,KAAM,KACNC,MAAO,KACPC,YAAa,KACbC,OAAQjrG,GACRkrG,WAAYlrG,GACZ8M,KAAM,KACNq+F,SAAU,KACVC,OAAQ,KACRC,aAAcrrG,GACdsrG,YAAatrG,GACburG,SAAU9R,GACV+R,OAAQ/R,GACRgS,QAAShS,GACTiS,OAAQjS,GACRx5F,OAAQ,KACR0rG,QAAS,KACTC,OAAQ,KACRC,IAAK,KACLC,YAAa9rG,GACb/c,MAAO,KACP8oH,OAAQ,KACRC,UAAWtS,GACXuS,QAAS,KACTC,QAAS,KACTttF,KAAM,KACNutF,UAAWnsG,GACX9J,UAAW,KACXlH,QAAS,KACTo9G,OAAQ,KACRC,MAAO,KACPC,OAAQtsG,GAGRusG,kBAAmB,KACnBC,YAAa,KACbC,SAAU,KACVC,wBAAyBjT,GACzBkT,sBAAuBlT,GACvBmT,OAAQ,KACRjpH,SAAU,KACVsU,QAAS+H,GACT6sG,SAAU,KACVC,aAAc,QChTLC,GAAMv3E,GAAO,CACxB2jE,MAAO,MACPsB,WAAY,CACVuS,aAAc,gBACdC,kBAAmB,qBACnBC,WAAY,cACZC,cAAe,iBACfC,UAAW,aACXjkD,UAAW,QACXkkD,SAAU,YACVC,SAAU,YACVC,mBAAoB,sBACpBC,0BAA2B,8BAC3BC,aAAc,gBACdC,eAAgB,kBAChBrN,YAAa,cACbsN,SAAU,WACVzlB,iBAAkB,oBAClB0lB,iBAAkB,oBAClBpiG,YAAa,eACbqiG,SAAU,YACVC,WAAY,cACZriG,aAAc,gBACdsiG,WAAY,cACZxrB,SAAU,YACVyrB,eAAgB,mBAChBC,YAAa,eACbC,UAAW,aACXC,YAAa,eACbrjG,WAAY,cACZsjG,UAAW,aACXC,2BAA4B,+BAC5BC,yBAA0B,6BAC1BjN,SAAU,WACVkN,UAAW,cACXC,aAAc,iBACdC,aAAc,iBACdC,eAAgB,kBAChBC,cAAe,iBACfC,cAAe,iBACfC,UAAW,aACXC,UAAW,aACXC,YAAa,eACbC,QAAS,WACTC,YAAa,gBACbC,aAAc,iBACdC,QAAS,WACTC,QAAS,WACTC,QAAS,WACTC,SAAU,YACVC,MAAO,SACPC,UAAW,cACXC,WAAY,eACZzM,QAAS,UACT0M,WAAY,aACZzM,aAAc,eACdG,cAAe,gBACfuM,QAAS,UACT9jB,SAAU,WACV0X,UAAW,YACXC,iBAAkB,mBAClBlwD,SAAU,WACVtW,QAAS,UACTwmD,QAAS,UACTogB,OAAQ,SACRC,YAAa,cACbC,MAAO,QACPC,WAAY,aACZC,OAAQ,SACRC,UAAW,YACXC,YAAa,cACbC,WAAY,aACZC,YAAa,cACbC,WAAY,aACZC,YAAa,cACbC,OAAQ,SACRC,iBAAkB,mBAClBC,UAAW,YACXmL,MAAO,QACPlL,QAAS,UACTh8G,QAAS,UACTi8G,QAAS,UACTkL,UAAW,YACXC,WAAY,aACZjL,aAAc,eACdC,QAAS,UACTC,UAAW,YACXC,UAAW,YACXC,WAAY,aACZC,QAAS,UACTE,OAAQ,SACRC,aAAc,eACdC,iBAAkB,mBAClBE,YAAa,cACbC,UAAW,YACXE,YAAa,cACbj4C,aAAc,eACdC,aAAc,eACdi4C,YAAa,cACbC,WAAY,aACZC,YAAa,cACbC,UAAW,YACXgK,aAAc,eACd/J,UAAW,YACXC,SAAU,WACVC,WAAY,aACZC,WAAY,aACZC,QAAS,UACTC,QAAS,UACTC,OAAQ,SACRC,UAAW,YACXC,WAAY,aACZC,WAAY,aACZC,aAAc,eACdsJ,SAAU,WACVpJ,QAAS,UACTC,SAAU,WACVC,SAAU,WACVG,SAAU,WACVC,UAAW,YACXphB,SAAU,WACVmqB,OAAQ,SACR7I,UAAW,YACXC,UAAW,YACXC,SAAU,WACVC,UAAW,YACXC,aAAc,eACdC,SAAU,WACVE,SAAU,WACVC,eAAgB,iBAChBC,UAAW,YACXqI,OAAQ,SACRC,iBAAkB,oBAClBC,kBAAmB,qBACnBC,WAAY,cACZC,QAAS,WACT7iD,cAAe,iBACfi7C,eAAgB,iBAChB6H,gBAAiB,mBACjBC,eAAgB,kBAChBC,UAAW,aACX/kG,YAAa,eACbglG,sBAAuB,yBACvBC,uBAAwB,0BACxBC,gBAAiB,mBACjBC,iBAAkB,oBAClBC,cAAe,iBACfC,eAAgB,kBAChBC,iBAAkB,oBAClBllG,cAAe,iBACfC,YAAa,eACb29F,SAAU,WACVvhB,WAAY,cACZ8oB,eAAgB,kBAChBC,cAAe,iBACfC,gBAAiB,mBACjBrgE,OAAQ,SACRsgE,kBAAmB,qBACnBC,mBAAoB,sBACpBC,YAAa,eACbC,aAAc,gBACdC,WAAY,eACZC,YAAa,eACbC,SAAU,YACVC,aAAc,gBACdC,cAAe,iBACfC,aAAc,gBACdC,SAAU,aACVC,YAAa,gBACbC,YAAa,gBACbC,YAAa,eACbC,YAAa,eACbC,QAAS,WAETC,cAAe,gBACfC,cAAe,iBAEjBxkD,UAAWytC,GACXjwG,WAAY,CACVinH,MAAOxY,GACPkT,aAAchtG,GACduyG,WAAY,KACZC,SAAU,KACVvF,kBAAmB,KACnBwF,WAAYzyG,GACZ0yG,UAAW1yG,GACXktG,WAAY,KACZyF,OAAQ3yG,GACRmC,cAAe,KACfywG,cAAe,KACfC,QAAS7yG,GACT8yG,UAAW,KACX3F,cAAe,KACf4F,cAAe,KACfC,YAAa,KACbC,KAAM,KACNC,MAAO,KACPC,KAAMnzG,GACNozG,GAAI,KACJC,SAAU,KACVjG,UAAWptG,GACXmpD,UAAW0wC,GACXyZ,KAAM,KACNjG,SAAU,KACVkG,cAAe,KACfjG,SAAU,KACVnvF,MAAO,KACPovF,mBAAoB,KACpBC,0BAA2B,KAC3BC,aAAc,KACdC,eAAgB,KAChBxrH,QAAS,KACTsxH,kBAAmB,KACnBC,iBAAkB,KAClBpT,YAAa,KACb5tG,OAAQ,KACRmyF,GAAI,KACJC,GAAI,KACJ7iF,EAAG,KACH2rG,SAAU,KACV+F,cAAe,KACfC,QAAS3zG,GACT4zG,gBAAiB5zG,GACjB6zG,UAAW,KACXp0E,QAAS,KACTq0E,IAAK,KACLC,QAAS/zG,GACTkoF,iBAAkB,KAClBuY,SAAUhH,GACV5R,GAAI,KACJ8I,GAAI,KACJqjB,SAAU,KACVC,SAAU,KACVC,UAAWl0G,GACX4tG,iBAAkB,KAClB5rH,IAAK,KACLm9B,MAAO,KACPg1F,SAAUn0G,GACVo0G,0BAA2B,KAC3Bn1B,KAAM,KACNzzE,YAAaxL,GACb6tG,SAAU,KACVvuD,OAAQ,KACR+0D,UAAW,KACXC,YAAa,KACbxG,WAAY,KACZriG,aAAc,KACd8oG,UAAW,KACXC,eAAgB,KAChBzG,WAAY,KACZxrB,SAAU,KACVyrB,eAAgB,KAChBC,YAAa,KACbC,UAAW,KACXC,YAAa,KACbrjG,WAAY,KACZ2pG,OAAQ,KACRC,GAAI,KACJtoE,KAAM,KACNuoE,GAAI,KACJC,GAAI,KACJC,GAAIjb,GACJkb,GAAIlb,GACJwU,UAAWxU,GACXyU,2BAA4B,KAC5BC,yBAA0B,KAC1ByG,SAAU,KACVC,kBAAmB,KACnBC,cAAe,KACfC,QAAS,KACTC,QAASn1G,GACTo1G,kBAAmB,KACnBC,WAAY,KACZp5F,OAAQ,KACRkF,KAAM,KACNkgF,SAAU,KACVkN,UAAWvuG,GACXwuG,aAAcxuG,GACdyuG,aAAczuG,GACd+V,GAAI,KACJu/F,YAAat1G,GACb0uG,eAAgB,KAChB6G,kBAAmB,KACnBC,GAAI,KACJC,IAAK,KACLC,UAAW11G,GACX9N,EAAG8N,GACH21G,GAAI31G,GACJ41G,GAAI51G,GACJ61G,GAAI71G,GACJ81G,GAAI91G,GACJ+1G,aAAcjc,GACdkc,iBAAkB,KAClBC,UAAW,KACXC,WAAY,KACZC,SAAU,KACVC,QAAS,KACThU,KAAM,KACNiU,aAAc,KACd1H,cAAe,KACfC,cAAe,KACf0H,kBAAmBt2G,GACnB64F,MAAO,KACPgW,UAAW,KACXC,UAAW,KACXC,YAAa,KACbwH,aAAc,KACdC,YAAa,KACbC,YAAa,KACbpc,KAAM,KACNqc,iBAAkB,KAClBC,UAAW,KACXC,aAAc,KACdt5D,IAAK,KACLjS,MAAO,KACPwrE,uBAAwB,KACxBC,sBAAuB,KACvBC,UAAW/2G,GACXg3G,UAAW,KACXtU,OAAQ,KACR/gF,IAAK,KACLnwB,KAAM,KACNrS,KAAM,KACN6vH,QAAS,KACTC,YAAa,KACbC,aAAc,KACdC,QAAS,KACTC,QAAS,KACTC,QAAS,KACTC,SAAU,KACVC,MAAO,KACPC,UAAW,KACXC,WAAY,KACZwH,WAAY,KACZhyH,SAAU,KACV27B,OAAQ,KACRoiF,QAAS,KACT0M,WAAY,KACZzM,aAAc,KACdG,cAAe,KACfuM,QAAS,KACT9jB,SAAU,KACV0X,UAAW,KACXC,iBAAkB,KAClBlwD,SAAU,KACVtW,QAAS,KACTwmD,QAAS,KACTogB,OAAQ,KACRC,YAAa,KACbC,MAAO,KACPC,WAAY,KACZC,OAAQ,KACRC,UAAW,KACXC,YAAa,KACbC,WAAY,KACZC,YAAa,KACbC,WAAY,KACZC,YAAa,KACbC,OAAQ,KACRC,iBAAkB,KAClBC,UAAW,KACXmL,MAAO,KACPlL,QAAS,KACTh8G,QAAS,KACTi8G,QAAS,KACTkL,UAAW,KACXC,WAAY,KACZjL,aAAc,KACdC,QAAS,KACTC,UAAW,KACXC,UAAW,KACXC,WAAY,KACZC,QAAS,KACTE,OAAQ,KACRC,aAAc,KACdC,iBAAkB,KAClBE,YAAa,KACbC,UAAW,KACXE,YAAa,KACbj4C,aAAc,KACdC,aAAc,KACdi4C,YAAa,KACbC,WAAY,KACZC,YAAa,KACbC,UAAW,KACXgK,aAAc,KACd/J,UAAW,KACXC,SAAU,KACVC,WAAY,KACZC,WAAY,KACZC,QAAS,KACTC,QAAS,KACTC,OAAQ,KACRC,UAAW,KACXC,WAAY,KACZC,WAAY,KACZC,aAAc,KACdsJ,SAAU,KACVpJ,QAAS,KACTC,SAAU,KACVC,SAAU,KACVG,SAAU,KACVC,UAAW,KACXphB,SAAU,KACVmqB,OAAQ,KACR7I,UAAW,KACXC,UAAW,KACXC,SAAU,KACVC,UAAW,KACXC,aAAc,KACdC,SAAU,KACVE,SAAU,KACVC,eAAgB,KAChBC,UAAW,KACXqI,OAAQ,KACRjlG,QAAS,KACTisG,SAAU,KACVhsG,MAAO,KACPisG,OAAQ,KACRpiE,YAAa,KACbshC,OAAQ,KACRprD,SAAU,KACVmsF,QAAS,KACTjH,iBAAkBnwG,GAClBowG,kBAAmBpwG,GACnBqwG,WAAY,KACZC,QAAS,KACTj/B,KAAM,KACNgmC,WAAYr3G,GACZs3G,oBAAqB,KACrBC,iBAAkB,KAClBC,aAAc,KACdC,MAAO,KACPxP,KAAMpO,GACN6d,MAAO,KACPtF,cAAe,KACf3kD,cAAe,KACfq6B,OAAQ,KACR6vB,UAAW33G,GACX43G,UAAW53G,GACX63G,UAAW73G,GACX83G,cAAe,KACfC,oBAAqB,KACrBC,eAAgB,KAChBC,UAAW,KACXt0H,SAAUm2G,GACV51G,EAAG,KACHkrF,OAAQ,KACRs5B,eAAgB,KAChBwP,KAAM,KACNC,KAAM,KACNxP,IAAK7O,GACL+R,IAAK/R,GACLyW,gBAAiB,KACjB6H,YAAa,KACbC,UAAW,KACXC,mBAAoBxe,GACpBye,iBAAkBze,GAClB0e,cAAe1e,GACf2e,gBAAiB3e,GACjB4e,SAAU,KACVC,QAAS,KACT9vH,OAAQ,KACR6gG,OAAQ,KACRkvB,GAAI,KACJC,GAAI,KACJC,MAAO,KACPh7D,KAAM,KACN0yD,eAAgB,KAChBuI,KAAM,KACNC,MAAO,KACPC,aAAc,KACdC,iBAAkBl5G,GAClBm5G,iBAAkBn5G,GAClBo5G,aAAc,KACdC,QAAS,KACTC,YAAa,KACbC,aAAc,KACdC,MAAO,KACPC,MAAO,KACPC,YAAa,KACbjJ,UAAW,KACX/kG,YAAa,KACbglG,sBAAuB1wG,GACvB2wG,uBAAwB3wG,GACxBE,OAAQ,KACRg/E,OAAQ,KACR0xB,gBAAiB9W,GACjB+W,iBAAkB,KAClBC,cAAe,KACfC,eAAgB,KAChBC,iBAAkBhxG,GAClB8L,cAAe9L,GACf+L,YAAa,KACb9qB,MAAO,KACP04H,aAAc35G,GACd45G,aAAc,KACdC,oBAAqB,KACrBC,WAAY,KACZC,cAAe,KACfC,qBAAsB,KACtBC,eAAgBngB,GAChB4P,SAAU1pG,GACVk6G,YAAa,KACbj7H,OAAQ,KACRk7H,QAASn6G,GACTo6G,QAASp6G,GACTmoF,WAAY,KACZ8oB,eAAgB,KAChBC,cAAe,KACfjpB,WAAY,KACZoqB,cAAe,KACfj8C,MAAO,KACPikD,kBAAmB,KACnB/2H,KAAM,KACNwtD,OAAQgpD,GACRxtD,GAAI,KACJuhB,UAAW,KACXsjD,gBAAiB,KACjBmJ,GAAI,KACJC,GAAI,KACJnJ,kBAAmBpxG,GACnBqxG,mBAAoBrxG,GACpBw6G,QAAS,KACTlJ,YAAa,KACbC,aAAc,KACdC,WAAYxxG,GACZ7W,OAAQ,KACRsoH,YAAazxG,GACb4xG,cAAe5xG,GACf6xG,aAAc,KACdH,SAAU1xG,GACV2xG,aAAc3xG,GACdhR,QAAS,KACT8iH,SAAU9xG,GACV+xG,YAAa/xG,GACbgyG,YAAahyG,GACbg/E,QAAS,KACTy7B,WAAY,KACZC,WAAY,KACZ1+F,MAAO,KACP2+F,OAAQ,KACR1I,YAAa,KACbC,YAAa,KACbp3G,EAAG,KACH21F,GAAI,KACJ7xB,GAAI,KACJg8C,iBAAkB,KAClBzI,QAASnyG,GACTjF,EAAG,KACHy1F,GAAI,KACJ1xB,GAAI,KACJ+7C,iBAAkB,KAClBp4G,EAAG,KACHq4G,WAAY,QCpiBHnc,GAAOvF,GAAM,CAAC8B,GAAKR,GAAO3b,GAAO2c,GAAMqf,IAAW,QAClDhO,GAAM3T,GAAM,CAAC8B,GAAKR,GAAO3b,GAAO2c,GAAMsf,IAAU,OCTvDC,GAAQ,kBACRC,GAAO,UACPC,GAAM,SA+CZ,SAASC,GAAMC,GACb,MAAO,IAAMA,EAAGz4G,aAClB,CAMA,SAAS04G,GAAUD,GACjB,OAAOA,EAAGh4H,OAAO,GAAG0f,aACtB,CC1DO,IAAMw4G,GAAc,CACzB9Q,QAAS,UACTkD,SAAU,WACV7L,OAAQ,SACR8O,gBAAiB,kBACjBC,iBAAkB,mBAClBC,cAAe,gBACfC,eAAgB,iBAChBC,iBAAkB,mBAClBlgE,OAAQ,SACR6pD,aAAc,eACdC,aAAc,eACdC,UAAW,YACXC,UAAW,YACXC,UAAW,YACXC,WAAY,aACZC,UAAW,YACXQ,WAAY,kBCxBd,UC2Ba+f,GAAWC,GAAM,OAUjBC,GAAaD,GAAM,SAUhC,SAASA,GAAMn4H,GACb,OAQA,SAAe1B,GACb,IAAM65H,EAAS75H,GAAQA,EAAKH,UAAYG,EAAKH,SAAS6B,IAAU,CAAC,EAEjE,GACwB,kBAAfm4H,EAAM95H,MACb85H,EAAM95H,KAAO,GACW,kBAAjB85H,EAAMr6H,QACbq6H,EAAMr6H,OAAS,EAEf,MAAO,CACLO,KAAM85H,EAAM95H,KACZP,OAAQq6H,EAAMr6H,OACdw/B,OAC0B,kBAAjB66F,EAAM76F,QAAuB66F,EAAM76F,QAAU,EAChD66F,EAAM76F,YACNlvB,EAGZ,CACF,CC3Ee,SAASiqH,GAAWC,EAAQ7jH,EAAM8jH,GAa/C,OAXEF,GADE,IACWx2G,QAAQC,UAAU+f,OAElB,SAAoBy2F,EAAQ7jH,EAAM8jH,GAC7C,IAAI56G,EAAI,CAAC,MACTA,EAAEte,KAAK6F,MAAMyY,EAAGlJ,GAChB,IACIjO,EAAW,IADG4lD,SAASvqB,KAAK38B,MAAMozH,EAAQ36G,IAG9C,OADI46G,GAAO,EAAe/xH,EAAU+xH,EAAM99H,WACnC+L,CACT,EAEK6xH,GAAWnzH,MAAM,KAAMvI,UAChC,CCZe,SAAS67H,GAAiBD,GACvC,IAAIE,EAAwB,oBAARloG,IAAqB,IAAIA,SAAQniB,EAuBrD,OAtBAoqH,GAAmB,SAA0BD,GAC3C,GAAc,OAAVA,ICPO,SAA2Br7C,GACxC,IACE,OAAgE,IAAzD9wB,SAASxxD,SAASO,KAAK+hF,GAAIv1E,QAAQ,gBAC5C,CAAE,MAAOlH,GACP,MAAqB,oBAAPy8E,CAChB,CACF,CDC2B,CAAiBq7C,GAAQ,OAAOA,EACvD,GAAqB,oBAAVA,EACT,MAAM,IAAI36H,UAAU,sDAEtB,GAAsB,qBAAX66H,EAAwB,CACjC,GAAIA,EAAOl3F,IAAIg3F,GAAQ,OAAOE,EAAO1pH,IAAIwpH,GACzCE,EAAO72G,IAAI22G,EAAOG,EACpB,CACA,SAASA,IACP,OAAO,GAAUH,EAAO57H,UAAW,EAAe8B,MAAMhD,YAC1D,CASA,OARAi9H,EAAQj+H,UAAYD,OAAO03C,OAAOqmF,EAAM99H,UAAW,CACjDgB,YAAa,CACXO,MAAO08H,EACP58H,YAAY,EACZI,UAAU,EACVH,cAAc,KAGX,EAAe28H,EAASH,EACjC,EACOC,GAAiBD,EAC1B,CEOO,SAASI,GAAkB38H,GAEhC,OAAKA,GAA0B,kBAAVA,EAKjB,aAAcA,GAAS,SAAUA,EAC5BmC,GAASnC,EAAMmC,UAIpB,UAAWnC,GAAS,QAASA,EACxBmC,GAASnC,GAId,SAAUA,GAAS,WAAYA,EAC1Bm8H,GAAMn8H,GAIR,GAnBE,EAoBX,CAMA,SAASm8H,GAAMA,GACb,OAAOzqF,GAAMyqF,GAASA,EAAM95H,MAAQ,IAAMqvC,GAAMyqF,GAASA,EAAMr6H,OACjE,CAMA,SAASK,GAAS2B,GAChB,OAAOq4H,GAAMr4H,GAAOA,EAAI1B,OAAS,IAAM+5H,GAAMr4H,GAAOA,EAAIpB,IAC1D,CAMA,SAASgvC,GAAM1xC,GACb,OAAOA,GAA0B,kBAAVA,EAAqBA,EAAQ,CACtD,CCvDO,IAAM48H,GAAY,SAAAC,GAAAj1D,EAAAg1D,EAAAC,GAAA,IAAAv6B,EAAA/5B,EAAAq0D,GAwDvB,SAAAA,EAAYE,EAAeC,EAAwBhmC,GAAQ,IAAA3xB,EAAA76D,EAAA,KAAAqyH,GACzDx3D,EAAAk9B,EAAAnjG,KAAA,MAEsC,kBAA3B49H,IACThmC,EAASgmC,EACTA,OAAyB3qH,GAI3B,IAAIlP,EAAS,GAETtD,EAAU,CAAC,EACXo9H,GAAc,EAwClB,GAtCID,IAMAn9H,EAHA,SAAUm9H,GACV,WAAYA,GAMZ,UAAWA,GACX,QAASA,EALC,CAACE,MAAOF,GAUX,SAAUA,EACP,CACRG,UAAW,CAACH,GACZE,MAAOF,EAAuB56H,UAKzB+nE,EAAA,GAAO6yD,IAIW,kBAAlBD,EACT55H,EAAS45H,GAGDl9H,EAAQu9H,OAASL,IACzBE,GAAc,EACd95H,EAAS45H,EAAcnkF,QACvB/4C,EAAQu9H,MAAQL,IAGbl9H,EAAQw9H,SAAWx9H,EAAQ+C,QAA4B,kBAAXo0F,EAAqB,CACpE,IAAMrlD,EAAQqlD,EAAOprF,QAAQ,MAEd,IAAX+lC,EACF9xC,EAAQw9H,OAASrmC,GAEjBn3F,EAAQ+C,OAASo0F,EAAOtzF,MAAM,EAAGiuC,GACjC9xC,EAAQw9H,OAASrmC,EAAOtzF,MAAMiuC,EAAQ,GAE1C,CAEA,IAAK9xC,EAAQq9H,OAASr9H,EAAQs9H,WAAat9H,EAAQs9H,UAAW,CAC5D,IAAMl+B,EAASp/F,EAAQs9H,UAAUt9H,EAAQs9H,UAAUr8H,OAAS,GAExDm+F,IACFp/F,EAAQq9H,MAAQj+B,EAAO78F,SAE3B,CAEA,IAAMC,EACJxC,EAAQq9H,OAAS,UAAWr9H,EAAQq9H,MAChCr9H,EAAQq9H,MAAM76H,MACdxC,EAAQq9H,MA+Id,OAvIA73D,EAAK83D,UAAYt9H,EAAQs9H,gBAAa9qH,EAOtCgzD,EAAK+3D,MAAQv9H,EAAQu9H,YAAS/qH,EAO9BgzD,EAAKtjE,OAASM,EAAQA,EAAMN,YAASsQ,EAWrCgzD,EAAKi4D,WAAQjrH,EAObgzD,EAAKk4D,KAQLl4D,EAAKzsB,QAAUz1C,EAOfkiE,EAAK/iE,KAAOD,EAAQA,EAAMC,UAAO+P,EASjCgzD,EAAKvlE,KAAO88H,GAAkB/8H,EAAQq9H,QAAU,MAOhD73D,EAAK63D,MAAQr9H,EAAQq9H,YAAS7qH,EAO9BgzD,EAAKliE,OAASkiE,EAAKzsB,QAOnBysB,EAAKg4D,OAASx9H,EAAQw9H,aAAUhrH,EAOhCgzD,EAAKziE,OAAS/C,EAAQ+C,aAAUyP,EAWhCgzD,EAAK5/C,MACHw3G,GAAep9H,EAAQu9H,OAAwC,kBAAxBv9H,EAAQu9H,MAAM33G,MACjD5lB,EAAQu9H,MAAM33G,MACd,GAYN4/C,EAAKm4D,OAOLn4D,EAAKo4D,SAOLp4D,EAAKq4D,KAULr4D,EAAK5lC,IACL4lC,CACF,CAAC,OAAA5H,EAAAo/D,EAAA,CAlRsB,CAkRtBJ,GAlR+Bv5H,QAqRlC25H,GAAan+H,UAAU6+H,KAAO,GAC9BV,GAAan+H,UAAUoB,KAAO,GAC9B+8H,GAAan+H,UAAUyE,OAAS,GAChC05H,GAAan+H,UAAUk6C,QAAU,GACjCikF,GAAan+H,UAAU+mB,MAAQ,GAC/Bo3G,GAAan+H,UAAUqD,YAASsQ,EAChCwqH,GAAan+H,UAAU4D,UAAO+P,EAC9BwqH,GAAan+H,UAAUy+H,eAAY9qH,EACnCwqH,GAAan+H,UAAU0+H,WAAQ/qH,EAC/BwqH,GAAan+H,UAAU4+H,WAAQjrH,EAC/BwqH,GAAan+H,UAAUw+H,WAAQ7qH,EAC/BwqH,GAAan+H,UAAU2+H,YAAShrH,EAChCwqH,GAAan+H,UAAUkE,YAASyP,ECjGhC,IAAM8oG,GAAM,CAAC,EAAEx8G,eAGTg/H,GAAW,IAAInpG,IAEfsnG,GAAM,SACN8B,GAAgB,YAahBC,GAAgB,IAAI77G,IAAI,CAAC,QAAS,QAAS,QAAS,QAAS,OAE7D87G,GAAmB,IAAI97G,IAAI,CAAC,KAAM,OAcjC,SAAS+7G,GAAaC,EAAMn+H,GACjC,IAAKA,QAAgCwS,IAArBxS,EAAQoyD,SACtB,MAAM,IAAIpwD,UAAU,kCAGtB,IAEIs0C,EAFE8nF,EAAWp+H,EAAQo+H,eAAY5rH,EAIrC,GAAIxS,EAAQq+H,YAAa,CACvB,GAA8B,oBAAnBr+H,EAAQs+H,OACjB,MAAM,IAAIt8H,UACR,yDAIJs0C,EAuJJ,SAA2B8nF,EAAUE,GACnC,OAAOhoF,EAEP,SAASA,EAAO5zC,EAAM0B,EAAM+b,EAAOzgB,GAEjC,IAAM6+H,EAAmBj/H,MAAMF,QAAQ+gB,EAAM4I,UACvCwzG,EAAQC,GAAW95H,GACzB,OAAO47H,EACLl6H,EACA+b,EACAzgB,EACA6+H,EACA,CACEC,aAAcjC,EAAQA,EAAMr6H,OAAS,OAAIsQ,EACzCisH,SAAUL,EACVM,WAAYnC,EAAQA,EAAM95H,UAAO+P,QAEnCA,EAEJ,CACF,CA3KamsH,CAAkBP,EAAUp+H,EAAQs+H,OAC/C,KAAO,CACL,GAA2B,oBAAhBt+H,EAAQm6D,IACjB,MAAM,IAAIn4D,UAAU,wCAGtB,GAA4B,oBAAjBhC,EAAQo6D,KACjB,MAAM,IAAIp4D,UAAU,yCAGtBs0C,EA0HJ,SAA0Bi2B,EAAGpS,EAAKC,GAChC,OAAO9jB,EAEP,SAASA,EAAOi2B,EAAGnoE,EAAM+b,EAAOzgB,GAE9B,IACM4hF,EADmBhiF,MAAMF,QAAQ+gB,EAAM4I,UACfqxC,EAAOD,EACrC,OAAOz6D,EAAM4hF,EAAGl9E,EAAM+b,EAAOzgB,GAAO4hF,EAAGl9E,EAAM+b,EAC/C,CACF,CAnIay+G,CAAiBR,EAAUp+H,EAAQm6D,IAAKn6D,EAAQo6D,KAC3D,CAGA,IAAMhyD,EAAQ,CACZgqD,SAAUpyD,EAAQoyD,SAClBkrE,UAAW,GACXuB,WAAY7+H,EAAQ6+H,YAAc,CAAC,EACnCvoF,OAAAA,EACAwoF,yBAA0B9+H,EAAQ8+H,0BAA4B,QAC9DV,SAAAA,EACAW,mBAAoB/+H,EAAQ++H,qBAAsB,EAClDC,UAA+B,IAArBh/H,EAAQg/H,SAClBC,SAAUj/H,EAAQi/H,WAAY,EAC9BC,OAA0B,QAAlBl/H,EAAQi6G,MAAkB4T,GAAMpO,GACxC0f,sBAAuBn/H,EAAQm/H,uBAAyB,MACxDC,uBAAyD,IAAlCp/H,EAAQo/H,uBAG3Bz1H,EAAS01H,GAAIj3H,EAAO+1H,OAAM3rH,GAGhC,OAAI7I,GAA4B,kBAAXA,EACZA,EAIFvB,EAAMkuC,OACX6nF,EACA/1H,EAAMgqD,SACN,CAACrpC,SAAUpf,QAAU6I,QACrBA,EAEJ,CAcA,SAAS6sH,GAAIj3H,EAAO1F,EAAMhD,GACxB,GAAkB,YAAdgD,EAAK0B,MAAoC,SAAd1B,EAAK0B,KAAiB,CACnD,IAAMk7H,EAAel3H,EAAM82H,OACvBA,EAASI,EAGG,YAAd58H,EAAK0B,MAC0B,QAA/B1B,EAAKowC,QAAQpvB,eACU,SAAvB47G,EAAarlB,QAEbilB,EAASrR,GACTzlH,EAAM82H,OAASA,GAGjB92H,EAAMk1H,UAAU75H,KAAKf,GAErB,IAAIqmB,EA8GR,SAAwB3gB,EAAO1F,GAE7B,IAAMqmB,EAAW,GACb+oB,GAAS,EAIPytF,EAAkBn3H,EAAM42H,SAAW,IAAIrqG,IAAQmpG,GAErD,OAAShsF,EAAQpvC,EAAKqmB,SAAS9nB,QAAQ,CACrC,IAAMyvB,EAAQhuB,EAAKqmB,SAAS+oB,GAExBpyC,OAAG,EAEP,GAAI0I,EAAM42H,UAA2B,YAAftuG,EAAMtsB,KAAoB,CAC9C,IAAMyP,EAAQ0rH,EAAgBpsH,IAAIud,EAAMoiB,UAAY,EACpDpzC,EAAMgxB,EAAMoiB,QAAU,IAAMj/B,EAC5B0rH,EAAgBv5G,IAAI0K,EAAMoiB,QAASj/B,EAAQ,EAC7C,CAEA,IAAMlK,EAAS01H,GAAIj3H,EAAOsoB,EAAOhxB,QAClB8S,IAAX7I,GAAsBof,EAAStlB,KAAKkG,EAC1C,CAEA,OAAOof,CACT,CAvImBy2G,CAAep3H,EAAO1F,GAC/Byd,EAkJV,SAA0B/X,EAAOk1H,GAC/B,IAIIh5H,EAJE5B,EAAO46H,EAAUA,EAAUr8H,OAAS,GAEpCkf,EAAQ,CAAC,EAIf,GAAI,eAAgBzd,GAAQA,EAAKyJ,WAAY,CAE3C,IAAIszH,EAEJ,IAAKn7H,KAAQ5B,EAAKyJ,WAChB,GAAa,aAAT7H,GAAuBg3G,GAAI/7G,KAAKmD,EAAKyJ,WAAY7H,GAAO,CAC1D,IAAMqF,EAAS+1H,GACbt3H,EACAk1H,EACAh5H,EACA5B,EAAKyJ,WAAW7H,IAGlB,GAAIqF,EAAQ,CACV,IAAA8wD,EAAA8O,EAAqB5/D,EAAM,GAApBjK,EAAG+6D,EAAA,GAAEr6D,EAAKq6D,EAAA,GAGfryD,EAAMg3H,uBACE,UAAR1/H,GACiB,kBAAVU,GACP69H,GAAiBt4F,IAAIjjC,EAAKowC,SAE1B2sF,EAAar/H,EAEb+f,EAAMzgB,GAAOU,CAEjB,CACF,CAGF,GAAIq/H,GAEkCt/G,EAAMpe,QAAUoe,EAAMpe,MAAQ,CAAC,IAEjC,QAAhCqG,EAAM+2H,sBAAkC,aAAe,aACrDM,CAER,CAEA,OAAOt/G,CACT,CAjMkBw/G,CAAiBv3H,EAAOA,EAAMk1H,WACxCl5H,EAAOgE,EAAMgqD,SAIjB,GAFAhqD,EAAMk1H,UAAUhuH,MAEE,YAAd5M,EAAK0B,KAOP,GANI2kB,GAAYi1G,GAAcr4F,IAAIjjC,EAAKowC,WACrC/pB,EAAWA,EAASq3C,QAAO,SAAU1vC,GACnC,MAAwB,kBAAVA,K1B7UE,kBADCkvG,E0B8U8BlvG,G1B5UpC,SAAfkvG,EAAMx7H,MACJygE,GAAM+6D,EAAMx/H,OAEdykE,GAAM+6D,IALL,IAAoBA,C0B+UnB,KAGEtkB,GAAI/7G,KAAK6I,EAAMy2H,WAAYn8H,EAAKowC,SAAU,CAC5C,IAAMpzC,EAAkDgD,EAAKowC,QAK3C,kBAJlB1uC,EAAOgE,EAAMy2H,WAAWn/H,KAKtB0E,IAASgE,EAAMgqD,UACfhqD,EAAM62H,WAEN9+G,EAAMzd,KAAOA,EAEjB,MACE0B,EAAO1B,EAAKowC,QAIhB,GAAI/pB,EAAS9nB,OAAS,EAAG,CACvB,IAAMb,EAAQ2oB,EAAS9nB,OAAS,EAAI8nB,EAAWA,EAAS,GAEpD3oB,IACF+f,EAAM4I,SAAW3oB,EAErB,CAKA,OAFAgI,EAAM82H,OAASI,EAERl3H,EAAMkuC,OAAO5zC,EAAM0B,EAAM+b,EAAOzgB,EACzC,CAEA,GAAkB,SAAdgD,EAAK0B,KACP,OAAO1B,EAAKtC,KAEhB,CAmKA,SAASs/H,GAAet3H,EAAOk1H,EAAWh5H,EAAMlE,GAC9C,IAAMse,ET1hBD,SAAcwgH,EAAQ9+H,GAC3B,IAAM45G,EAASI,GAAUh6G,GACrBkE,EAAOlE,EACPy/H,EAAOxlB,GAEX,GAAIL,KAAUklB,EAAOllB,OACnB,OAAOklB,EAAOz6H,SAASy6H,EAAOllB,OAAOA,IAGvC,GAAIA,EAAO/4G,OAAS,GAA4B,SAAvB+4G,EAAOn2G,MAAM,EAAG,IAAiBk4H,GAAMtwH,KAAKrL,GAAQ,CAE3E,GAAwB,MAApBA,EAAM+D,OAAO,GAAY,CAE3B,IAAMw8F,EAAOvgG,EAAMyD,MAAM,GAAG/B,QAAQk6H,GAAMI,IAC1C93H,EAAO,OAASq8F,EAAKx8F,OAAO,GAAG0f,cAAgB88E,EAAK98F,MAAM,EAC5D,KAAO,CAEL,IAAM88F,EAAOvgG,EAAMyD,MAAM,GAEzB,IAAKm4H,GAAKvwH,KAAKk1F,GAAO,CACpB,IAAIm/B,EAASn/B,EAAK7+F,QAAQm6H,GAAKC,IAEN,MAArB4D,EAAO37H,OAAO,KAChB27H,EAAS,IAAMA,GAGjB1/H,EAAQ,OAAS0/H,CACnB,CACF,CAEAD,EAAO5kB,EACT,CAEA,OAAO,IAAI4kB,EAAKv7H,EAAMlE,EACxB,CSwfe2kE,CAAK38D,EAAM82H,OAAQ56H,GAGhC,KACY,OAAVlE,QACUoS,IAAVpS,GACkB,kBAAVA,GAAsB+qD,OAAOrvC,MAAM1b,IAH7C,CAeA,GAPId,MAAMF,QAAQgB,KAGhBA,EAAQse,EAAKg8F,eC7fV,SAAmBzwG,EAAQjK,GAChC,IAAMq0D,EAAWr0D,GAAW,CAAC,EAK7B,OAF4C,KAA9BiK,EAAOA,EAAOhJ,OAAS,GAAY,GAAH2b,OAAAgrD,EAAO39D,GAAM,CAAE,KAAMA,GAGhE0nC,MACE0iB,EAAS0rE,SAAW,IAAM,IACzB,MACsB,IAArB1rE,EAAS2rE,QAAoB,GAAK,MAEtCp+H,MACL,CDgfkCq+H,CAAO7/H,GAAgBA,EEniBzCuxC,KAAK,KAAK/vC,QFuiBF,UAAlB8c,EAAKja,SAAsB,CAC7B,IAAIy7H,EACe,kBAAV9/H,EACHA,EAgCV,SAAoBgI,EAAOk1H,EAAWl9H,GAEpC,IAAMuJ,EAAS,CAAC,EAEhB,IACEw2H,GAAc//H,EAAOggI,EACvB,CAAE,MAAOl9H,GACP,IAAKkF,EAAM22H,mBAAoB,CAC7B,IACMhmF,EAAU,IAAIikF,GAAa,iCAAkC,CACjEM,UAAAA,EACAC,MAHkCr6H,EAIlCH,OAAQ,2BACRy6H,OAAQ,UAMV,MAJAzkF,EAAQ2kF,KAAOt1H,EAAMg2H,eAAY5rH,EACjCumC,EAAQnZ,IACN,uFAEImZ,CACR,CACF,CAEA,OAAOpvC,EAaP,SAASy2H,EAASngI,EAAMG,GACtB,IAAIV,EAAMO,EAEc,OAApBP,EAAImE,MAAM,EAAG,KACS,SAApBnE,EAAImE,MAAM,EAAG,KAAenE,EAAM,MAAQA,EAAImE,MAAM,IACxDnE,EAAMA,EAAIoC,QAAQi8H,GAAesC,KAGnC12H,EAAOjK,GAAOU,CAChB,CACF,CA7EUkgI,CAAWl4H,EAAOk1H,EAAWlwH,OAAOhN,IAM1C,MAJoC,QAAhCgI,EAAM+2H,wBACRe,EAkFN,SAAoCK,GAElC,IAEIrzE,EAFEszE,EAAY,CAAC,EAInB,IAAKtzE,KAAQqzE,EACPjlB,GAAI/7G,KAAKghI,EAAWrzE,KACtBszE,EAAUC,GAA0BvzE,IAASqzE,EAAUrzE,IAI3D,OAAOszE,CACT,CA/FoBE,CAA2BR,IAGpC,CAAC,QAASA,EACnB,CAEA,MAAO,CAC8B,UAAnC93H,EAAM02H,0BAAwCpgH,EAAKu7F,MAC/CoiB,GAAY39G,EAAKja,WAAaia,EAAKja,SACnCia,EAAK47F,UACTl6G,EA1BF,CA4BF,CA2FA,SAASqgI,GAA0BvzE,GACjC,IAAIE,EAAKF,EAAKprD,QAAQm6H,GAAK0E,IAG3B,MADuB,QAAnBvzE,EAAGvpD,MAAM,EAAG,KAAcupD,EAAK,IAAMA,GAClCA,CACT,CAYA,SAASizE,GAAQ9zD,EAAGq0D,GAClB,OAAOA,EAAG/8G,aACZ,CAUA,SAAS88G,GAAOxE,GACd,MAAO,IAAMA,EAAGz4G,aAClB,CGlsBO,IAAMm9G,GAAgB,CAC3B5rF,OAAQ,CAAC,QACT4rE,KAAM,CAAC,aAAc,MAAO,MAAO,KACnCv6G,KAAM,CAAC,UACPs7G,WAAY,CAAC,SAAU,SACvB3/E,KAAM,CAAC,IAAK,OAAQ,OAAQ,QAC5BorC,KAAM,CAAC,YACPu1C,OAAQ,KACRU,SAAU,CAAC,QACXyF,KAAM,CAAC,IAAK,QACZM,OAAQ,CAAC,SACT1oH,IAAK,CACH,QACA,QACA,SACA,MACA,QACA,SACA,SACA,QACA,UChBEmgI,GAAe,CAAC,EAuCtB,SAASzB,GAAIj/H,EAAO2gI,EAAiBC,GACnC,GAqDF,SAAc5gI,GACZ,OAAOooE,QAAQpoE,GAA0B,kBAAVA,EACjC,CAvDMsC,CAAKtC,GAAQ,CACf,GAAI,UAAWA,EACb,MAAsB,SAAfA,EAAMgE,MAAoB48H,EAAmB5gI,EAAMA,MAAX,GAGjD,GAAI2gI,GAAmB,QAAS3gI,GAASA,EAAMkgH,IAC7C,OAAOlgH,EAAMkgH,IAGf,GAAI,aAAclgH,EAChB,OAAO2J,GAAI3J,EAAM2oB,SAAUg4G,EAAiBC,EAEhD,CAEA,OAAI1hI,MAAMF,QAAQgB,GACT2J,GAAI3J,EAAO2gI,EAAiBC,GAG9B,EACT,CAcA,SAASj3H,GAAIE,EAAQ82H,EAAiBC,GAKpC,IAHA,IAAMr3H,EAAS,GACXmoC,GAAS,IAEJA,EAAQ7nC,EAAOhJ,QACtB0I,EAAOmoC,GAASutF,GAAIp1H,EAAO6nC,GAAQivF,EAAiBC,GAGtD,OAAOr3H,EAAOgoC,KAAK,GACrB,CCzEO,SAAS0U,GAAOgb,EAAM7+D,EAAO4oE,EAAQ8E,GAC1C,IAGIiI,EAHEr1E,EAAMu+D,EAAKpgE,OACbggI,EAAa,EAajB,GAPEz+H,EADEA,EAAQ,GACDA,EAAQM,EAAM,EAAIA,EAAMN,EAEzBA,EAAQM,EAAMA,EAAMN,EAE9B4oE,EAASA,EAAS,EAAIA,EAAS,EAG3B8E,EAAMjvE,OAAS,KACjBk3E,EAAa74E,MAAM4tD,KAAKgjB,IACb/oC,QAAQ3kC,EAAO4oE,GAE1B/J,EAAKhb,OAAM/8C,MAAX+3D,EAAIuG,EAAWuQ,SAMf,IAHI/M,GAAQ/J,EAAKhb,OAAO7jD,EAAO4oE,GAGxB61D,EAAa/wD,EAAMjvE,SACxBk3E,EAAajI,EAAMrsE,MAAMo9H,EAAYA,EAAa,MACvC95F,QAAQ3kC,EAAO,GAE1B6+D,EAAKhb,OAAM/8C,MAAX+3D,EAAIuG,EAAWuQ,IACf8oD,GAAc,IACdz+H,GAAS,GAGf,CAkBO,SAASiB,GAAK49D,EAAM6O,GACzB,OAAI7O,EAAKpgE,OAAS,GAChBolD,GAAOgb,EAAMA,EAAKpgE,OAAQ,EAAGivE,GACtB7O,GAEF6O,CACT,CCjEO,SAASgxD,GAAYC,GAkB1B,IAhBA,IAGIlhG,EAEAmhG,EAEAC,EAEAC,EAEAnpD,EAEAopD,EAEAC,EAfEC,EAAQ,CAAC,EACX3vF,GAAS,IAeJA,EAAQqvF,EAAOlgI,QAAQ,CAC9B,KAAO6wC,KAAS2vF,GACd3vF,EAAQ2vF,EAAM3vF,GAMhB,GAJA7R,EAAQkhG,EAAOrvF,GAKbA,GACkB,cAAlB7R,EAAM,GAAG77B,MACqB,mBAA9B+8H,EAAOrvF,EAAQ,GAAG,GAAG1tC,QAGrBi9H,EAAa,IADbE,EAAYthG,EAAM,GAAGyhG,WAAWP,QAGPlgI,QACW,oBAAlCsgI,EAAUF,GAAY,GAAGj9H,OAEzBi9H,GAAc,GAGdA,EAAaE,EAAUtgI,QACW,YAAlCsgI,EAAUF,GAAY,GAAGj9H,MAEzB,OAASi9H,EAAaE,EAAUtgI,QACQ,YAAlCsgI,EAAUF,GAAY,GAAGj9H,MAGS,cAAlCm9H,EAAUF,GAAY,GAAGj9H,OAC3Bm9H,EAAUF,GAAY,GAAGM,6BAA8B,EACvDN,KAOR,GAAiB,UAAbphG,EAAM,GACJA,EAAM,GAAG2hG,cACXhjI,OAAO8mB,OAAO+7G,EAAOI,GAAWV,EAAQrvF,IACxCA,EAAQ2vF,EAAM3vF,GACd0vF,GAAO,QAIN,GAAIvhG,EAAM,GAAG6hG,WAAY,CAG5B,IAFAT,EAAavvF,EACbsvF,OAAY5uH,EACL6uH,MAGoB,gBAFzBC,EAAaH,EAAOE,IAEP,GAAGj9H,MACS,oBAAvBk9H,EAAW,GAAGl9H,OAEQ,UAAlBk9H,EAAW,KACTF,IACFD,EAAOC,GAAW,GAAGh9H,KAAO,mBAE9Bk9H,EAAW,GAAGl9H,KAAO,aACrBg9H,EAAYC,GAMdD,IAEFnhG,EAAM,GAAGn9B,IAAMlE,OAAO8mB,OAAO,CAAC,EAAGy7G,EAAOC,GAAW,GAAG5+H,QAGtD21E,EAAagpD,EAAOt9H,MAAMu9H,EAAWtvF,IAC1B3K,QAAQlH,GACnBomB,GAAO86E,EAAQC,EAAWtvF,EAAQsvF,EAAY,EAAGjpD,GAErD,CACF,CACA,OAAQqpD,CACV,CASA,SAASK,GAAWV,EAAQY,GA0B1B,IAzBA,IAaIC,EAEAC,EAfEl2B,EAAQo1B,EAAOY,GAAY,GAC3Bn0F,EAAUuzF,EAAOY,GAAY,GAC/BG,EAAgBH,EAAa,EAE3BI,EAAiB,GACjBC,EACJr2B,EAAM21B,YAAc9zF,EAAQy0F,OAAOt2B,EAAM61B,aAAa71B,EAAMvpG,OACxD8/H,EAAcF,EAAUjB,OAExBM,EAAQ,GAERc,EAAO,CAAC,EAKVzwF,GAAS,EAETlhB,EAAUm7E,EACVy2B,EAAS,EACThgI,EAAQ,EACNigI,EAAS,CAACjgI,GAITouB,GAAS,CAEd,KAAOuwG,IAASe,GAAe,KAAOtxG,IAGtCuxG,EAAe1+H,KAAKy+H,GACftxG,EAAQ8wG,aACXM,EAASp0F,EAAQ80F,YAAY9xG,GACxBA,EAAQkd,MACXk0F,EAAOv+H,KAAK,MAEVw+H,GACFG,EAAUO,WAAW/xG,EAAQpuB,OAE3BouB,EAAQ+wG,8BACVS,EAAUQ,oCAAqC,GAEjDR,EAAUS,MAAMb,GACZpxG,EAAQ+wG,8BACVS,EAAUQ,wCAAqCpwH,IAKnDyvH,EAAWrxG,EACXA,EAAUA,EAAQkd,IACpB,CAKA,IADAld,EAAUm7E,IACDj6D,EAAQwwF,EAAYrhI,QAGC,SAA1BqhI,EAAYxwF,GAAO,IACW,UAA9BwwF,EAAYxwF,EAAQ,GAAG,IACvBwwF,EAAYxwF,GAAO,GAAG1tC,OAASk+H,EAAYxwF,EAAQ,GAAG,GAAG1tC,MACzDk+H,EAAYxwF,GAAO,GAAGtvC,MAAMC,OAAS6/H,EAAYxwF,GAAO,GAAGhvC,IAAIL,OAE/DD,EAAQsvC,EAAQ,EAChB2wF,EAAOh/H,KAAKjB,GAEZouB,EAAQ8wG,gBAAalvH,EACrBoe,EAAQqxG,cAAWzvH,EACnBoe,EAAUA,EAAQkd,MAqBtB,IAhBAs0F,EAAUjB,OAAS,GAKfvwG,GAEFA,EAAQ8wG,gBAAalvH,EACrBoe,EAAQqxG,cAAWzvH,GAEnBiwH,EAAOnzH,MAKTwiC,EAAQ2wF,EAAOxhI,OACR6wC,KAAS,CACd,IAAMjuC,EAAQy+H,EAAYz+H,MAAM4+H,EAAO3wF,GAAQ2wF,EAAO3wF,EAAQ,IACxDtvC,EAAQ2/H,EAAe7yH,MAC7BmyH,EAAMt6F,QAAQ,CAAC3kC,EAAOA,EAAQqB,EAAM5C,OAAS,IAC7ColD,GAAO86E,EAAQ3+H,EAAO,EAAGqB,EAC3B,CAEA,IADAiuC,GAAS,IACAA,EAAQ2vF,EAAMxgI,QACrBshI,EAAKC,EAASf,EAAM3vF,GAAO,IAAM0wF,EAASf,EAAM3vF,GAAO,GACvD0wF,GAAUf,EAAM3vF,GAAO,GAAK2vF,EAAM3vF,GAAO,GAAK,EAEhD,OAAOywF,CACT,CCtNA,IAAMzjI,GAAiB,CAAC,EAAEA,eA+B1B,SAASgkI,GAAgB/4H,EAAKg5H,GAE5B,IAAIC,EAEJ,IAAKA,KAAQD,EAAW,CACtB,IAEMz/F,GAFQxkC,GAAeS,KAAKwK,EAAKi5H,GAAQj5H,EAAIi5H,QAAQxwH,KAEpCzI,EAAIi5H,GAAQ,CAAC,GAE9B9+D,EAAQ6+D,EAAUC,GAEpB39H,OAAI,EAER,GAAI6+D,EACF,IAAK7+D,KAAQ6+D,EAAO,CACbplE,GAAeS,KAAK+jC,EAAMj+B,KAAOi+B,EAAKj+B,GAAQ,IACnD,IAAMjF,EAAQ8jE,EAAM7+D,GACpB49H,GAEE3/F,EAAKj+B,GACL/F,MAAMF,QAAQgB,GAASA,EAAQA,EAAQ,CAACA,GAAS,GAErD,CAEJ,CACF,CAUA,SAAS6iI,GAAWrrD,EAAUvW,GAK5B,IAJA,IAAIvvB,GAAS,EAEPoxF,EAAS,KAENpxF,EAAQuvB,EAAKpgE,SAEE,UAApBogE,EAAKvvB,GAAOvvB,IAAkBq1D,EAAWsrD,GAAQz/H,KAAK49D,EAAKvvB,IAG/DuU,GAAOuxB,EAAU,EAAG,EAAGsrD,EACzB,CClFA,IAAMC,GAA6BC,GAAW,i/DAmBjCC,GAAaD,GAAW,YAcxBE,GAAoBF,GAAW,cAuB/BG,GAAaH,GAAW,uBAa9B,SAASI,GAAan+H,GAC3B,OAGW,OAATA,IAAkBA,EAAO,IAAe,MAATA,EAEnC,CAaO,IAAMo+H,GAAaL,GAAW,MAoBxBM,GAAgBN,GAAW,cAe3BO,GAAmBP,GAAW,kBAiBpC,SAASQ,GAAmBv+H,GACjC,OAAgB,OAATA,GAAiBA,GAAQ,CAClC,CAWO,SAASw+H,GAA0Bx+H,GACxC,OAAgB,OAATA,IAAkBA,EAAO,GAAc,KAATA,EACvC,CAiBO,SAASy+H,GAAcz+H,GAC5B,OAAiB,IAAVA,IAAyB,IAAVA,GAAwB,KAATA,CACvC,CA+CO,IAAM0+H,GAAoBX,GAAW,MAQ5C,SAASA,GAAWY,GAClB,OAUA,SAAe3+H,GACb,OAAgB,OAATA,GAAiBA,GAAQ,GAAK2+H,EAAMv4H,KAAK2B,OAAOovB,aAAan3B,GACtE,CACF,CC7MO,SAAS4+H,GAAar1F,EAASqS,EAAI78C,EAAMg6D,GAC9C,IAAM8lE,EAAQ9lE,EAAMA,EAAM,EAAIjT,OAAOg5E,kBACjC1rH,EAAO,EACX,OAGA,SAAepT,GACb,GAAIy+H,GAAcz+H,GAEhB,OADAupC,EAAQw1F,MAAMhgI,GACPspH,EAAOroH,GAEhB,OAAO47C,EAAG57C,EACZ,EAGA,SAASqoH,EAAOroH,GACd,OAAIy+H,GAAcz+H,IAASoT,IAASyrH,GAClCt1F,EAAQy1F,QAAQh/H,GACTqoH,IAET9+E,EAAQ01F,KAAKlgI,GACN68C,EAAG57C,GACZ,CACF,CCtDO,IAAMrC,GAAU,CACrBuhI,SAOF,SAA2B31F,GACzB,IAMIqzF,EANEuC,EAAe51F,EAAQ61F,QAC3B5hI,KAAKw/H,OAAOY,WAAWyB,gBASzB,SAAoCr/H,GAClC,GAAa,OAATA,EAEF,YADAupC,EAAQy1F,QAAQh/H,GAMlB,OAHAupC,EAAQw1F,MAAM,cACdx1F,EAAQy1F,QAAQh/H,GAChBupC,EAAQ01F,KAAK,cACNL,GAAar1F,EAAS41F,EAAc,aAC7C,IAGA,SAA0Bn/H,GAExB,OADAupC,EAAQw1F,MAAM,aACPO,EAAUt/H,EACnB,IAlBA,OAAOm/H,EAqBP,SAASG,EAAUt/H,GACjB,IAAM0mG,EAAQn9D,EAAQw1F,MAAM,YAAa,CACvCxC,YAAa,OACbK,SAAAA,IAMF,OAJIA,IACFA,EAASn0F,KAAOi+D,GAElBk2B,EAAWl2B,EACJzlG,EAAKjB,EACd,CAGA,SAASiB,EAAKjB,GACZ,OAAa,OAATA,GACFupC,EAAQ01F,KAAK,aACb11F,EAAQ01F,KAAK,kBACb11F,EAAQy1F,QAAQh/H,IAGdu+H,GAAmBv+H,IACrBupC,EAAQy1F,QAAQh/H,GAChBupC,EAAQ01F,KAAK,aACNK,IAIT/1F,EAAQy1F,QAAQh/H,GACTiB,EACT,CACF,GC1DO,IAAMJ,GAAW,CACtBq+H,SAYF,SAA4B31F,GAC1B,IAKIg2F,EAEAC,EAEAC,EATEn9H,EAAO9E,KAEP+iB,EAAQ,GACVm/G,EAAY,EAOhB,OAAOviI,EAGP,SAASA,EAAM6C,GAWb,GAAI0/H,EAAYn/G,EAAM3kB,OAAQ,CAC5B,IAAMiY,EAAO0M,EAAMm/G,GAEnB,OADAp9H,EAAKq9H,eAAiB9rH,EAAK,GACpB01B,EAAQ61F,QACbvrH,EAAK,GAAG+rH,aACRC,EACAC,EAHKv2F,CAILvpC,EACJ,CAGA,OAAO8/H,EAAmB9/H,EAC5B,CAGA,SAAS6/H,EAAiB7/H,GAMxB,GALA0/H,IAKIp9H,EAAKq9H,eAAeI,WAAY,CAClCz9H,EAAKq9H,eAAeI,gBAAa5yH,EAC7BoyH,GACFS,IAWF,IANA,IAGI9I,EAHE+I,EAAmB39H,EAAKw5H,OAAOlgI,OACjCskI,EAAkBD,EAKfC,KACL,GACsC,SAApC59H,EAAKw5H,OAAOoE,GAAiB,IACY,cAAzC59H,EAAKw5H,OAAOoE,GAAiB,GAAGnhI,KAChC,CACAm4H,EAAQ50H,EAAKw5H,OAAOoE,GAAiB,GAAGziI,IACxC,KACF,CAEF0iI,EAAeT,GAIf,IADA,IAAIjzF,EAAQwzF,EACLxzF,EAAQnqC,EAAKw5H,OAAOlgI,QACzB0G,EAAKw5H,OAAOrvF,GAAO,GAAGhvC,IAAMlE,OAAO8mB,OAAO,CAAC,EAAG62G,GAC9CzqF,IAaF,OATAuU,GACE1+C,EAAKw5H,OACLoE,EAAkB,EAClB,EACA59H,EAAKw5H,OAAOt9H,MAAMyhI,IAIpB39H,EAAKw5H,OAAOlgI,OAAS6wC,EACdqzF,EAAmB9/H,EAC5B,CACA,OAAO7C,EAAM6C,EACf,CAGA,SAAS8/H,EAAmB9/H,GAM1B,GAAI0/H,IAAcn/G,EAAM3kB,OAAQ,CAI9B,IAAK2jI,EACH,OAAOa,EAAkBpgI,GAM3B,GAAIu/H,EAAUc,kBAAoBd,EAAUc,iBAAiBC,SAC3D,OAAOC,EAAUvgI,GAQnBsC,EAAKk+H,UAAYr9D,QACfo8D,EAAUc,mBAAqBd,EAAUkB,8BAE7C,CAIA,OADAn+H,EAAKq9H,eAAiB,CAAC,EAChBp2F,EAAQysE,MACb0qB,GACAC,EACAC,EAHKr3F,CAILvpC,EACJ,CAGA,SAAS2gI,EAAqB3gI,GAG5B,OAFIu/H,GAAWS,IACfG,EAAeT,GACRU,EAAkBpgI,EAC3B,CAGA,SAAS4gI,EAAsB5gI,GAG7B,OAFAsC,EAAK06H,OAAO7mE,KAAK7zD,EAAKixB,MAAMn2B,MAAQsiI,IAAcn/G,EAAM3kB,OACxD6jI,EAAkBn9H,EAAKixB,MAAM8I,OACtBkkG,EAAUvgI,EACnB,CAGA,SAASogI,EAAkBpgI,GAGzB,OADAsC,EAAKq9H,eAAiB,CAAC,EAChBp2F,EAAQ61F,QACbsB,GACAG,EACAN,EAHKh3F,CAILvpC,EACJ,CAGA,SAAS6gI,EAAkB7gI,GAIzB,OAHA0/H,IACAn/G,EAAMniB,KAAK,CAACkE,EAAK+9H,iBAAkB/9H,EAAKq9H,iBAEjCS,EAAkBpgI,EAC3B,CAGA,SAASugI,EAAUvgI,GACjB,OAAa,OAATA,GACEu/H,GAAWS,IACfG,EAAe,QACf52F,EAAQy1F,QAAQh/H,KAGlBu/H,EAAYA,GAAaj9H,EAAK06H,OAAO8D,KAAKx+H,EAAKixB,OAC/CgW,EAAQw1F,MAAM,YAAa,CACzBxC,YAAa,OACbK,SAAU4C,EACVnD,WAAYkD,IAEPwB,EAAa/gI,GACtB,CAGA,SAAS+gI,EAAa/gI,GACpB,OAAa,OAATA,GACFghI,EAAaz3F,EAAQ01F,KAAK,cAAc,GACxCkB,EAAe,QACf52F,EAAQy1F,QAAQh/H,IAGdu+H,GAAmBv+H,IACrBupC,EAAQy1F,QAAQh/H,GAChBghI,EAAaz3F,EAAQ01F,KAAK,cAE1BS,EAAY,EACZp9H,EAAKk+H,eAAYrzH,EACVhQ,IAETosC,EAAQy1F,QAAQh/H,GACT+gI,EACT,CAOA,SAASC,EAAat6B,EAAOu6B,GAC3B,IAAMtE,EAASr6H,EAAK+6H,YAAY32B,GAyChC,GAxCIu6B,GAAKtE,EAAOv+H,KAAK,MACrBsoG,EAAMk2B,SAAW4C,EACbA,IAAYA,EAAW/2F,KAAOi+D,GAClC84B,EAAa94B,EACb64B,EAAUjC,WAAW52B,EAAMvpG,OAC3BoiI,EAAU/B,MAAMb,GAmCZr6H,EAAK06H,OAAO7mE,KAAKuwC,EAAMvpG,MAAMC,MAAO,CAEtC,IADA,IAAIqvC,EAAQ8yF,EAAUzD,OAAOlgI,OACtB6wC,KACL,GAEE8yF,EAAUzD,OAAOrvF,GAAO,GAAGtvC,MAAMk/B,OAASojG,KAExCF,EAAUzD,OAAOrvF,GAAO,GAAGhvC,KAE3B8hI,EAAUzD,OAAOrvF,GAAO,GAAGhvC,IAAI4+B,OAASojG,GAI1C,OAcJ,IARA,IAGI3kE,EAEAo8D,EALE+I,EAAmB39H,EAAKw5H,OAAOlgI,OACjCskI,EAAkBD,EAOfC,KACL,GACsC,SAApC59H,EAAKw5H,OAAOoE,GAAiB,IACY,cAAzC59H,EAAKw5H,OAAOoE,GAAiB,GAAGnhI,KAChC,CACA,GAAI+7D,EAAM,CACRo8D,EAAQ50H,EAAKw5H,OAAOoE,GAAiB,GAAGziI,IACxC,KACF,CACAq9D,GAAO,CACT,CAMF,IAJAqlE,EAAeT,GAGfjzF,EAAQwzF,EACDxzF,EAAQnqC,EAAKw5H,OAAOlgI,QACzB0G,EAAKw5H,OAAOrvF,GAAO,GAAGhvC,IAAMlE,OAAO8mB,OAAO,CAAC,EAAG62G,GAC9CzqF,IAIFuU,GACE1+C,EAAKw5H,OACLoE,EAAkB,EAClB,EACA59H,EAAKw5H,OAAOt9H,MAAMyhI,IAIpB39H,EAAKw5H,OAAOlgI,OAAS6wC,CACvB,CACF,CAMA,SAAS0zF,EAAe/sH,GAItB,IAHA,IAAIq5B,EAAQlsB,EAAM3kB,OAGX6wC,KAAUr5B,GAAM,CACrB,IAAM23C,EAAQxqC,EAAMksB,GACpBnqC,EAAKq9H,eAAiB50E,EAAM,GAC5BA,EAAM,GAAGk0E,KAAK/kI,KAAKoI,EAAMinC,EAC3B,CACAhpB,EAAM3kB,OAASwX,CACjB,CACA,SAAS4sH,IACPT,EAAU/B,MAAM,CAAC,OACjBgC,OAAaryH,EACboyH,OAAYpyH,EACZ7K,EAAKq9H,eAAeI,gBAAa5yH,CACnC,CACF,GArVMuzH,GAAqB,CACzBxB,SA0VF,SAA2B31F,EAASqS,EAAIslF,GAGtC,OAAOtC,GACLr1F,EACAA,EAAQ61F,QAAQ5hI,KAAKw/H,OAAOY,WAAW/8H,SAAU+6C,EAAIslF,GACrD,aACA1jI,KAAKw/H,OAAOY,WAAWuD,QAAQC,KAAK1qH,SAAS,qBAAkBvJ,EAAY,EAE/E,GCnXO,IAAMk0H,GAAY,CACvBnC,SAQF,SAA2B31F,EAASqS,EAAIslF,GACtC,OAgBA,SAAelhI,GACb,OAAOy+H,GAAcz+H,GACjB4+H,GAAar1F,EAAS+3F,EAAO,aAA7B1C,CAA2C5+H,GAC3CshI,EAAMthI,EACZ,EAgBA,SAASshI,EAAMthI,GACb,OAAgB,OAATA,GAAiBu+H,GAAmBv+H,GAAQ47C,EAAG57C,GAAQkhI,EAAIlhI,EACpE,CACF,EA/CEuhI,SAAS,GCIJ,IAAM5jI,GAAU,CACrBuhI,SAyBF,SAAyB31F,EAASqS,GAEhC,IAAIghF,EACJ,OAYA,SAAoB58H,GAKlB,OAJAupC,EAAQw1F,MAAM,WACdnC,EAAWrzF,EAAQw1F,MAAM,eAAgB,CACvCxC,YAAa,YAERiF,EAAYxhI,EACrB,EAYA,SAASwhI,EAAYxhI,GACnB,OAAa,OAATA,EACKyhI,EAAWzhI,GAKhBu+H,GAAmBv+H,GACdupC,EAAQysE,MACb0rB,GACAC,EACAF,EAHKl4F,CAILvpC,IAIJupC,EAAQy1F,QAAQh/H,GACTwhI,EACT,CAOA,SAASC,EAAWzhI,GAGlB,OAFAupC,EAAQ01F,KAAK,gBACb11F,EAAQ01F,KAAK,WACNrjF,EAAG57C,EACZ,CAOA,SAAS2hI,EAAgB3hI,GAQvB,OAPAupC,EAAQy1F,QAAQh/H,GAChBupC,EAAQ01F,KAAK,gBACbrC,EAASn0F,KAAOc,EAAQw1F,MAAM,eAAgB,CAC5CxC,YAAa,UACbK,SAAAA,IAEFA,EAAWA,EAASn0F,KACb+4F,CACT,CACF,EAvGE19H,QAeF,SAAwBg4H,GAEtB,OADAD,GAAYC,GACLA,CACT,GAdM4F,GAAwB,CAC5BxC,SAwGF,SAA8B31F,EAASqS,EAAIslF,GACzC,IAAM5+H,EAAO9E,KACb,OAOA,SAAwBwC,GAKtB,OAJAupC,EAAQ01F,KAAK,gBACb11F,EAAQw1F,MAAM,cACdx1F,EAAQy1F,QAAQh/H,GAChBupC,EAAQ01F,KAAK,cACNL,GAAar1F,EAASq4F,EAAU,aACzC,EAOA,SAASA,EAAS5hI,GAChB,GAAa,OAATA,GAAiBu+H,GAAmBv+H,GACtC,OAAOkhI,EAAIlhI,GAKb,IAAM+3C,EAAOz1C,EAAKw5H,OAAOx5H,EAAKw5H,OAAOlgI,OAAS,GAC9C,OACG0G,EAAK06H,OAAOY,WAAWuD,QAAQC,KAAK1qH,SAAS,iBAC9CqhC,GACiB,eAAjBA,EAAK,GAAGh5C,MACRg5C,EAAK,GAAG8pF,eAAe9pF,EAAK,IAAI,GAAMn8C,QAAU,EAEzCggD,EAAG57C,GAELupC,EAAQi3F,UAAUl+H,EAAK06H,OAAOY,WAAWkD,KAAMI,EAAKtlF,EAApDrS,CAAwDvpC,EACjE,CACF,EA/IEuhI,SAAS,GCbJ,IAAMT,GAAO,CAClB5B,SAOF,SAAwB31F,GACtB,IAAMjnC,EAAO9E,KACPskI,EAAUv4F,EAAQ61F,QAEtBiC,IAoBF,SAAuBrhI,GACrB,GAAa,OAATA,EAEF,YADAupC,EAAQy1F,QAAQh/H,GAOlB,OAJAupC,EAAQw1F,MAAM,mBACdx1F,EAAQy1F,QAAQh/H,GAChBupC,EAAQ01F,KAAK,mBACb38H,EAAK+9H,sBAAmBlzH,EACjB20H,CACT,GA3BEv4F,EAAQ61F,QACN5hI,KAAKw/H,OAAOY,WAAWmE,YACvBC,EACApD,GACEr1F,EACAA,EAAQ61F,QACN5hI,KAAKw/H,OAAOY,WAAWkD,KACvBkB,EACAz4F,EAAQ61F,QAAQzhI,GAASqkI,IAE3B,gBAIN,OAAOF,EAgBP,SAASE,EAAehiI,GACtB,GAAa,OAATA,EAQJ,OAJAupC,EAAQw1F,MAAM,cACdx1F,EAAQy1F,QAAQh/H,GAChBupC,EAAQ01F,KAAK,cACb38H,EAAK+9H,sBAAmBlzH,EACjB20H,EAPLv4F,EAAQy1F,QAAQh/H,EAQpB,CACF,GC1DO,IAAM8C,GAAW,CACtBm/H,WAAYC,MAEDvmH,GAASwmH,GAAkB,UAC3B9nG,GAAO8nG,GAAkB,QAMtC,SAASA,GAAkBC,GACzB,MAAO,CACLlD,SAUF,SAAwB31F,GACtB,IAAMjnC,EAAO9E,KACPogI,EAAapgI,KAAKw/H,OAAOY,WAAWwE,GACpC/nG,EAAOkP,EAAQ61F,QAAQxB,EAAYzgI,EAAOklI,GAChD,OAAOllI,EAGP,SAASA,EAAM6C,GACb,OAAOsiI,EAAQtiI,GAAQq6B,EAAKr6B,GAAQqiI,EAAQriI,EAC9C,CAGA,SAASqiI,EAAQriI,GACf,GAAa,OAATA,EAMJ,OAFAupC,EAAQw1F,MAAM,QACdx1F,EAAQy1F,QAAQh/H,GACTiB,EALLsoC,EAAQy1F,QAAQh/H,EAMpB,CAGA,SAASiB,EAAKjB,GACZ,OAAIsiI,EAAQtiI,IACVupC,EAAQ01F,KAAK,QACN5kG,EAAKr6B,KAIdupC,EAAQy1F,QAAQh/H,GACTiB,EACT,CAMA,SAASqhI,EAAQtiI,GACf,GAAa,OAATA,EACF,OAAO,EAET,IAAMg8D,EAAO4hE,EAAW59H,GACpBysC,GAAS,EACb,GAAIuvB,EAGF,OAASvvB,EAAQuvB,EAAKpgE,QAAQ,CAC5B,IAAMiY,EAAOmoD,EAAKvvB,GAClB,IAAK54B,EAAK+oH,UAAY/oH,EAAK+oH,SAAS1iI,KAAKoI,EAAMA,EAAKs6H,UAClD,OAAO,CAEX,CAEF,OAAO,CACT,CACF,EAjEEqF,WAAYC,GACA,SAAVE,EAAmBG,QAAyBp1H,GAiElD,CAMA,SAAS+0H,GAAeM,GACtB,OAGA,SAAwB1G,EAAQvzF,GAC9B,IAEIw2F,EAFAtyF,GAAS,EAMb,OAASA,GAASqvF,EAAOlgI,aACTuR,IAAV4xH,EACEjD,EAAOrvF,IAAoC,SAA1BqvF,EAAOrvF,GAAO,GAAG1tC,OACpCggI,EAAQtyF,EACRA,KAEQqvF,EAAOrvF,IAAoC,SAA1BqvF,EAAOrvF,GAAO,GAAG1tC,OAExC0tC,IAAUsyF,EAAQ,IACpBjD,EAAOiD,GAAO,GAAGthI,IAAMq+H,EAAOrvF,EAAQ,GAAG,GAAGhvC,IAC5Cq+H,EAAO96E,OAAO+9E,EAAQ,EAAGtyF,EAAQsyF,EAAQ,GACzCtyF,EAAQsyF,EAAQ,GAElBA,OAAQ5xH,GAGZ,OAAOq1H,EAAgBA,EAAc1G,EAAQvzF,GAAWuzF,CAC1D,CACF,CAaA,SAASyG,GAAuBzG,EAAQvzF,GAGtC,IAFA,IAAIm0F,EAAa,IAERA,GAAcZ,EAAOlgI,QAC5B,IACG8gI,IAAeZ,EAAOlgI,QACU,eAA/BkgI,EAAOY,GAAY,GAAG39H,OACW,SAAnC+8H,EAAOY,EAAa,GAAG,GAAG39H,KAC1B,CAQA,IAPA,IAAMkC,EAAO66H,EAAOY,EAAa,GAAG,GAC9B+F,EAASl6F,EAAQ80F,YAAYp8H,GAC/BwrC,EAAQg2F,EAAO7mI,OACf8mI,GAAe,EACftvH,EAAO,EAEPuvH,OAAI,EACDl2F,KAAS,CACd,IAAMm2F,EAAQH,EAAOh2F,GACrB,GAAqB,kBAAVm2F,EAAoB,CAE7B,IADAF,EAAcE,EAAMhnI,OACyB,KAAtCgnI,EAAMj6H,WAAW+5H,EAAc,IACpCtvH,IACAsvH,IAEF,GAAIA,EAAa,MACjBA,GAAe,CACjB,MAEK,IAAe,IAAXE,EACPD,GAAO,EACPvvH,SACK,IAAe,IAAXwvH,EAEJ,CAELn2F,IACA,KACF,CACF,CACA,GAAIr5B,EAAM,CACR,IAAMszF,EAAQ,CACZ3nG,KACE29H,IAAeZ,EAAOlgI,QAAU+mI,GAAQvvH,EAAO,EAC3C,aACA,oBACNjW,MAAO,CACLC,KAAM6D,EAAKxD,IAAIL,KACfP,OAAQoE,EAAKxD,IAAIZ,OAASuW,EAC1BipB,OAAQp7B,EAAKxD,IAAI4+B,OAASjpB,EAC1ByvH,OAAQ5hI,EAAK9D,MAAM0lI,OAASp2F,EAC5Bq2F,aAAcr2F,EACVi2F,EACAzhI,EAAK9D,MAAM2lI,aAAeJ,GAEhCjlI,IAAKlE,OAAO8mB,OAAO,CAAC,EAAGpf,EAAKxD,MAE9BwD,EAAKxD,IAAMlE,OAAO8mB,OAAO,CAAC,EAAGqmF,EAAMvpG,OAC/B8D,EAAK9D,MAAMk/B,SAAWp7B,EAAKxD,IAAI4+B,OACjC9iC,OAAO8mB,OAAOpf,EAAMylG,IAEpBo1B,EAAO96E,OACL07E,EACA,EACA,CAAC,QAASh2B,EAAOn+D,GACjB,CAAC,OAAQm+D,EAAOn+D,IAElBm0F,GAAc,EAElB,CACAA,GACF,CAEF,OAAOZ,CACT,CC/LO,SAASmG,GAAWrE,EAAY9B,EAAQvzF,GAK7C,IAHA,IAAM9nC,EAAS,GACXgsC,GAAS,IAEJA,EAAQmxF,EAAWhiI,QAAQ,CAClC,IAAMkI,EAAU85H,EAAWnxF,GAAOw1F,WAE9Bn+H,IAAYrD,EAAOiW,SAAS5S,KAC9Bg4H,EAASh4H,EAAQg4H,EAAQvzF,GACzB9nC,EAAOrC,KAAK0F,GAEhB,CAEA,OAAOg4H,CACT,CCcO,SAASiH,GAAgB/F,EAAQgG,EAAYn7E,GAElD,IAAIqvE,EAAQ39H,OAAO8mB,OACjBwnC,EACItuD,OAAO8mB,OAAO,CAAC,EAAGwnC,GAClB,CACEzqD,KAAM,EACNP,OAAQ,EACRw/B,OAAQ,GAEd,CACEwmG,OAAQ,EACRC,cAAe,IAIbG,EAAc,CAAC,EAEfC,EAAuB,GAEzBT,EAAS,GAETliH,EAAQ,GASNgpB,EAAU,CACdy1F,QAkJF,SAAiBh/H,GACXu+H,GAAmBv+H,IACrBk3H,EAAM95H,OACN85H,EAAMr6H,OAAS,EACfq6H,EAAM76F,SAAoB,IAAVr8B,EAAc,EAAI,EAClCmjI,MACmB,IAAVnjI,IACTk3H,EAAMr6H,SACNq6H,EAAM76F,UAIJ66F,EAAM4L,aAAe,EACvB5L,EAAM2L,UAEN3L,EAAM4L,eAKF5L,EAAM4L,eAAiBL,EAAOvL,EAAM2L,QAAQjnI,SAC9Cs7H,EAAM4L,cAAgB,EACtB5L,EAAM2L,WAKVt6F,EAAQq0F,SAAW58H,GAGR,CACb,EAhLE++H,MAmLF,SAAehgI,EAAMqkI,GAGnB,IAAM18B,EAAQ08B,GAAU,CAAC,EAKzB,OAJA18B,EAAM3nG,KAAOA,EACb2nG,EAAMvpG,MAAQo2B,IACdgV,EAAQuzF,OAAO19H,KAAK,CAAC,QAASsoG,EAAOn+D,IACrChoB,EAAMniB,KAAKsoG,GACJA,CACT,EA3LEu4B,KA8LF,SAAclgI,GACZ,IAAM2nG,EAAQnmF,EAAMtW,MAGpB,OAFAy8F,EAAMjpG,IAAM81B,IACZgV,EAAQuzF,OAAO19H,KAAK,CAAC,OAAQsoG,EAAOn+D,IAC7Bm+D,CACT,EAlME04B,QAASiE,GAyMX,SAA+BxiH,EAAWxH,GACxCiqH,EAAUziH,EAAWxH,EAAKwuC,KAC5B,IA1MEmuD,MAAOqtB,EAAiBE,GACxB/C,UAAW6C,EAAiBE,EAAmB,CAC7C/C,WAAW,KASTj4F,EAAU,CACdq0F,SAAU,KACV58H,KAAM,KACN2/H,eAAgB,CAAC,EACjB7D,OAAQ,GACRkB,OAAAA,EACAK,YAAAA,EACAwE,eA6CF,SAAwBn7B,EAAO88B,GAC7B,OAsYJ,SAAyBf,EAAQe,GAC/B,IAIIC,EAJAh3F,GAAS,EAEPnoC,EAAS,GAGf,OAASmoC,EAAQg2F,EAAO7mI,QAAQ,CAC9B,IAAMgnI,EAAQH,EAAOh2F,GAEjB1xC,OAAK,EACT,GAAqB,kBAAV6nI,EACT7nI,EAAQ6nI,OAER,OAAQA,GACN,KAAM,EACJ7nI,EAAQ,KACR,MAEF,KAAM,EACJA,EAAQ,KACR,MAEF,KAAM,EACJA,EAAQ,OACR,MAEF,KAAM,EACJA,EAAQyoI,EAAa,IAAM,KAC3B,MAEF,KAAM,EACJ,IAAKA,GAAcC,EAAO,SAC1B1oI,EAAQ,IACR,MAEF,QAEEA,EAAQgN,OAAOovB,aAAayrG,GAGlCa,GAAmB,IAAXb,EACRt+H,EAAOlG,KAAKrD,EACd,CACA,OAAOuJ,EAAOgoC,KAAK,GACrB,CAlbWo3F,CAAgBrG,EAAY32B,GAAQ88B,EAC7C,EA9CEjwG,IAAAA,EACA+pG,WAkEF,SAAoBviI,GAClBkoI,EAAYloI,EAAMqC,MAAQrC,EAAM8B,OAChCsmI,GACF,EApEE3F,MAsBF,SAAeh/H,GAKb,GAJAikI,EAASrkI,GAAKqkI,EAAQjkI,GACtBmlI,IAGkC,OAA9BlB,EAAOA,EAAO7mI,OAAS,GACzB,MAAO,GAMT,OAJA0nI,EAAUN,EAAY,GAGtBz6F,EAAQuzF,OAASmG,GAAWiB,EAAsB36F,EAAQuzF,OAAQvzF,GAC3DA,EAAQuzF,MACjB,GA3BI/4H,EAAQigI,EAAW9D,SAAShlI,KAAKquC,EAASgB,GAW9C,OAHIy5F,EAAWf,YACbiB,EAAqB9kI,KAAK4kI,GAErBz6F,EA4BP,SAAS80F,EAAY32B,GACnB,OA8VJ,SAAqB+7B,EAAQ/7B,GAC3B,IAKI/yE,EALEiwG,EAAal9B,EAAMvpG,MAAM0lI,OACzBgB,EAAmBn9B,EAAMvpG,MAAM2lI,aAC/BgB,EAAWp9B,EAAMjpG,IAAIolI,OACrBkB,EAAiBr9B,EAAMjpG,IAAIqlI,aAGjC,GAAIc,IAAeE,EAEjBnwG,EAAO,CAAC8uG,EAAOmB,GAAYplI,MAAMqlI,EAAkBE,QAC9C,CAEL,GADApwG,EAAO8uG,EAAOjkI,MAAMolI,EAAYE,GAC5BD,GAAoB,EAAG,CACzB,IAAMp/D,EAAO9wC,EAAK,GACE,kBAAT8wC,EACT9wC,EAAK,GAAK8wC,EAAKjmE,MAAMqlI,GAErBlwG,EAAKhD,OAET,CACIozG,EAAiB,GAEnBpwG,EAAKv1B,KAAKqkI,EAAOqB,GAAUtlI,MAAM,EAAGulI,GAExC,CACA,OAAOpwG,CACT,CAxXWqwG,CAAYvB,EAAQ/7B,EAC7B,CAGA,SAASnzE,IAEP,IAAA0wG,EAAqD/M,EACrD,MAAO,CACL95H,KAFS6mI,EAAJ7mI,KAGLP,OAHiBonI,EAANpnI,OAIXw/B,OAJyB4nG,EAAN5nG,OAKnBwmG,OALiCoB,EAANpB,OAM3BC,aAN+CmB,EAAZnB,aAQvC,CAsBA,SAASa,IAGP,IADA,IAAIO,EACGhN,EAAM2L,OAASJ,EAAO7mI,QAAQ,CACnC,IAAMgnI,EAAQH,EAAOvL,EAAM2L,QAG3B,GAAqB,kBAAVD,EAKT,IAJAsB,EAAahN,EAAM2L,OACf3L,EAAM4L,aAAe,IACvB5L,EAAM4L,aAAe,GAGrB5L,EAAM2L,SAAWqB,GACjBhN,EAAM4L,aAAeF,EAAMhnI,QAE3BuoI,EAAGvB,EAAMj6H,WAAWuuH,EAAM4L,oBAG5BqB,EAAGvB,EAEP,CACF,CAQA,SAASuB,EAAGnkI,QACCmN,EACInN,EACf+C,EAAQA,EAAM/C,EAChB,CAsEA,SAASujI,EAAkBr8D,EAAG7tD,GAC5BA,EAAK+qH,SACP,CAQA,SAASf,EAAiBgB,EAAUjB,GAClC,OAWA,SAAcxF,EAAY0G,EAAaC,GAErC,IAAIC,EAEAC,EAEApE,EAEAhnH,EACJ,OAAOpf,MAAMF,QAAQ6jI,GACjB8G,EAAuB9G,GACvB,aAAcA,EAEd8G,EAAuB,CAAC9G,IAS5B,SAA+Bp4E,GAC7B,OAAOroD,EAGP,SAASA,EAAM6C,GACb,IAAM2kI,EAAe,OAAT3kI,GAAiBwlD,EAAIxlD,GAC3B0E,EAAe,OAAT1E,GAAiBwlD,EAAI47E,KAOjC,OAAOsD,EANM,GAAHntH,OAAAgrD,EAGJtoE,MAAMF,QAAQ4qI,GAAOA,EAAMA,EAAM,CAACA,GAAO,IAAEpiE,EAC3CtoE,MAAMF,QAAQ2K,GAAOA,EAAMA,EAAM,CAACA,GAAO,KAExCggI,CAA6B1kI,EACtC,CACF,CAvBI4kI,CAAsBhH,GA+B1B,SAAS8G,EAAuB1oE,GAG9B,OAFAwoE,EAAmBxoE,EACnByoE,EAAiB,EACG,IAAhBzoE,EAAKpgE,OACA2oI,EAEFM,EAAgB7oE,EAAKyoE,GAC9B,CAQA,SAASI,EAAgBhkH,GACvB,OAGA,SAAe7gB,GAKbqZ,EAwER,WACE,IAAMyrH,EAAavxG,IACbwxG,EAAgBx8F,EAAQq0F,SACxBoI,EAAwBz8F,EAAQ83F,iBAChC4E,EAAmB18F,EAAQuzF,OAAOlgI,OAClCspI,EAAajrI,MAAM4tD,KAAKtnC,GAC9B,MAAO,CACL6jH,QAAAA,EACAv8E,KAAMo9E,GAQR,SAASb,IACPlN,EAAQ4N,EACRv8F,EAAQq0F,SAAWmI,EACnBx8F,EAAQ83F,iBAAmB2E,EAC3Bz8F,EAAQuzF,OAAOlgI,OAASqpI,EACxB1kH,EAAQ2kH,EACR/B,GACF,CACF,CAhGe90H,GACPgyH,EAAmBx/G,EACdA,EAAU0gH,UACbh5F,EAAQ83F,iBAAmBx/G,GAK7B,GACEA,EAAUjmB,MACV2tC,EAAQy0F,OAAOY,WAAWuD,QAAQC,KAAK1qH,SAASmK,EAAUjmB,MAE1D,OAAOsmI,EAAIlhI,GAEb,OAAO6gB,EAAUq+G,SAAShlI,KAIxBkpI,EAAS7pI,OAAO8mB,OAAO9mB,OAAO03C,OAAO1I,GAAU66F,GAAU76F,EACzDgB,EACAqS,EACAslF,EAPKrgH,CAQL7gB,EACJ,CACF,CAGA,SAAS47C,EAAG57C,GAGV,OAFW,EACXqkI,EAAShE,EAAkBhnH,GACpBirH,CACT,CAGA,SAASpD,EAAIlhI,GAGX,OAFW,EACXqZ,EAAK+qH,YACCK,EAAiBD,EAAiB5oI,OAC/BipI,EAAgBL,EAAiBC,IAEnCF,CACT,CACF,CACF,CAOA,SAASjB,EAAUziH,EAAWgnC,GACxBhnC,EAAUohH,aAAeiB,EAAqBxsH,SAASmK,IACzDqiH,EAAqB9kI,KAAKyiB,GAExBA,EAAU/c,SACZk9C,GACEzY,EAAQuzF,OACRj0E,EACAtf,EAAQuzF,OAAOlgI,OAASisD,EACxBhnC,EAAU/c,QAAQykC,EAAQuzF,OAAOt9H,MAAMqpD,GAAOtf,IAG9C1nB,EAAUskH,YACZ58F,EAAQuzF,OAASj7G,EAAUskH,UAAU58F,EAAQuzF,OAAQvzF,GAEzD,CAuCA,SAAS46F,IACHjM,EAAM95H,QAAQ6lI,GAAe/L,EAAMr6H,OAAS,IAC9Cq6H,EAAMr6H,OAASomI,EAAY/L,EAAM95H,MACjC85H,EAAM76F,QAAU4mG,EAAY/L,EAAM95H,MAAQ,EAE9C,CACF,CCleO,IAAMgoI,GAAgB,CAC3BxqI,KAAM,gBACNskI,SAOF,SAA+B31F,EAASqS,EAAIslF,GAC1C,IAEItvH,EAFAwB,EAAO,EAGX,OAYA,SAAepT,GAGb,OAFAupC,EAAQw1F,MAAM,iBAehB,SAAgB/+H,GAEd,OADA4R,EAAS5R,EACFsiI,EAAQtiI,EACjB,CAhBS69H,CAAO79H,EAChB,EA2BA,SAASsiI,EAAQtiI,GACf,OAAIA,IAAS4R,GACX23B,EAAQw1F,MAAM,yBACPsG,EAASrlI,IAEdoT,GAAQ,IAAe,OAATpT,GAAiBu+H,GAAmBv+H,KACpDupC,EAAQ01F,KAAK,iBACNrjF,EAAG57C,IAELkhI,EAAIlhI,EACb,CAYA,SAASqlI,EAASrlI,GAChB,OAAIA,IAAS4R,GACX23B,EAAQy1F,QAAQh/H,GAChBoT,IACOiyH,IAET97F,EAAQ01F,KAAK,yBACNR,GAAcz+H,GACjB4+H,GAAar1F,EAAS+4F,EAAS,aAA/B1D,CAA6C5+H,GAC7CsiI,EAAQtiI,GACd,CACF,GCpFO,IAAMg8D,GAAO,CAClBphE,KAAM,OACNskI,SA0BF,SAA2B31F,EAASqS,EAAIslF,GACtC,IAAM5+H,EAAO9E,KACPu6C,EAAOz1C,EAAKw5H,OAAOx5H,EAAKw5H,OAAOlgI,OAAS,GAC1C0pI,EACFvtF,GAAyB,eAAjBA,EAAK,GAAGh5C,KACZg5C,EAAK,GAAG8pF,eAAe9pF,EAAK,IAAI,GAAMn8C,OACtC,EACFwX,EAAO,EACX,OAGA,SAAepT,GACb,IAAM49G,EACJt7G,EAAKq9H,eAAe5gI,OACV,KAATiB,GAAwB,KAATA,GAAwB,KAATA,EAC3B,gBACA,eACN,GACW,kBAAT49G,GACKt7G,EAAKq9H,eAAe/tH,QAAU5R,IAASsC,EAAKq9H,eAAe/tH,OAC5DwsH,GAAWp+H,GACf,CAOA,GANKsC,EAAKq9H,eAAe5gI,OACvBuD,EAAKq9H,eAAe5gI,KAAO6+G,EAC3Br0E,EAAQw1F,MAAMnhB,EAAM,CAClB6e,YAAY,KAGH,kBAAT7e,EAEF,OADAr0E,EAAQw1F,MAAM,kBACE,KAAT/+H,GAAwB,KAATA,EAClBupC,EAAQysE,MAAMovB,GAAelE,EAAKqE,EAAlCh8F,CAA4CvpC,GAC5CulI,EAASvlI,GAEf,IAAKsC,EAAKk+H,WAAsB,KAATxgI,EAGrB,OAFAupC,EAAQw1F,MAAM,kBACdx1F,EAAQw1F,MAAM,iBACPyG,EAAOxlI,EAElB,CACA,OAAOkhI,EAAIlhI,EACb,EAGA,SAASwlI,EAAOxlI,GACd,OAAIo+H,GAAWp+H,MAAWoT,EAAO,IAC/Bm2B,EAAQy1F,QAAQh/H,GACTwlI,KAGLljI,EAAKk+H,WAAaptH,EAAO,KAC1B9Q,EAAKq9H,eAAe/tH,OACjB5R,IAASsC,EAAKq9H,eAAe/tH,OACpB,KAAT5R,GAAwB,KAATA,IAEnBupC,EAAQ01F,KAAK,iBACNsG,EAASvlI,IAEXkhI,EAAIlhI,EACb,CAKA,SAASulI,EAASvlI,GAKhB,OAJAupC,EAAQw1F,MAAM,kBACdx1F,EAAQy1F,QAAQh/H,GAChBupC,EAAQ01F,KAAK,kBACb38H,EAAKq9H,eAAe/tH,OAAStP,EAAKq9H,eAAe/tH,QAAU5R,EACpDupC,EAAQysE,MACbqrB,GAEA/+H,EAAKk+H,UAAYU,EAAMuE,EACvBl8F,EAAQ61F,QACNsG,GACAC,EACAC,GAGN,CAGA,SAASH,EAAQzlI,GAGf,OAFAsC,EAAKq9H,eAAekG,kBAAmB,EACvCP,IACOK,EAAY3lI,EACrB,CAGA,SAAS4lI,EAAY5lI,GACnB,OAAIy+H,GAAcz+H,IAChBupC,EAAQw1F,MAAM,4BACdx1F,EAAQy1F,QAAQh/H,GAChBupC,EAAQ01F,KAAK,4BACN0G,GAEFzE,EAAIlhI,EACb,CAGA,SAAS2lI,EAAY3lI,GAInB,OAHAsC,EAAKq9H,eAAevsH,KAClBkyH,EACAhjI,EAAKu/H,eAAet4F,EAAQ01F,KAAK,mBAAmB,GAAMrjI,OACrDggD,EAAG57C,EACZ,CACF,EAnIE4/H,aAAc,CACZV,SAwIJ,SAAkC31F,EAASqS,EAAIslF,GAC7C,IAAM5+H,EAAO9E,KAEb,OADA8E,EAAKq9H,eAAeI,gBAAa5yH,EAC1Bo8B,EAAQysE,MAAMqrB,GAAWoE,EAASK,GAGzC,SAASL,EAAQzlI,GAOf,OANAsC,EAAKq9H,eAAeoG,kBAClBzjI,EAAKq9H,eAAeoG,mBACpBzjI,EAAKq9H,eAAekG,iBAIfjH,GACLr1F,EACAqS,EACA,iBACAt5C,EAAKq9H,eAAevsH,KAAO,EAJtBwrH,CAKL5+H,EACJ,CAGA,SAAS8lI,EAAS9lI,GAChB,OAAIsC,EAAKq9H,eAAeoG,oBAAsBtH,GAAcz+H,IAC1DsC,EAAKq9H,eAAeoG,uBAAoB54H,EACxC7K,EAAKq9H,eAAekG,sBAAmB14H,EAChC64H,EAAiBhmI,KAE1BsC,EAAKq9H,eAAeoG,uBAAoB54H,EACxC7K,EAAKq9H,eAAekG,sBAAmB14H,EAChCo8B,EAAQ61F,QAAQ6G,GAAiBrqF,EAAIoqF,EAArCz8F,CAAuDvpC,GAChE,CAGA,SAASgmI,EAAiBhmI,GAOxB,OALAsC,EAAKq9H,eAAeI,YAAa,EAEjCz9H,EAAKk+H,eAAYrzH,EAGVyxH,GACLr1F,EACAA,EAAQ61F,QAAQpjE,GAAMpgB,EAAIslF,GAC1B,aACA5+H,EAAK06H,OAAOY,WAAWuD,QAAQC,KAAK1qH,SAAS,qBACzCvJ,EACA,EANCyxH,CAOL5+H,EACJ,CACF,GAxLEi/H,KAsNF,SAAyB11F,GACvBA,EAAQ01F,KAAKzhI,KAAKmiI,eAAe5gI,KACnC,GApNM2mI,GAAoC,CACxCxG,SAyNF,SAA0C31F,EAASqS,EAAIslF,GACrD,IAAM5+H,EAAO9E,KAIb,OAAOohI,GACLr1F,GASF,SAAqBvpC,GACnB,IAAM+3C,EAAOz1C,EAAKw5H,OAAOx5H,EAAKw5H,OAAOlgI,OAAS,GAC9C,OAAQ6iI,GAAcz+H,IACpB+3C,GACiB,6BAAjBA,EAAK,GAAGh5C,KACN68C,EAAG57C,GACHkhI,EAAIlhI,EACV,GAdE,2BACAsC,EAAK06H,OAAOY,WAAWuD,QAAQC,KAAK1qH,SAAS,qBACzCvJ,EACA,EAYR,EA/OEo0H,SAAS,GAIL0E,GAAkB,CACtB/G,SAmLF,SAAwB31F,EAASqS,EAAIslF,GACnC,IAAM5+H,EAAO9E,KACb,OAAOohI,GACLr1F,GAOF,SAAqBvpC,GACnB,IAAM+3C,EAAOz1C,EAAKw5H,OAAOx5H,EAAKw5H,OAAOlgI,OAAS,GAC9C,OAAOm8C,GACY,mBAAjBA,EAAK,GAAGh5C,MACRg5C,EAAK,GAAG8pF,eAAe9pF,EAAK,IAAI,GAAMn8C,SAAW0G,EAAKq9H,eAAevsH,KACnEwoC,EAAG57C,GACHkhI,EAAIlhI,EACV,GAZE,iBACAsC,EAAKq9H,eAAevsH,KAAO,EAY/B,EApMEmuH,SAAS,GCvBJ,IAAM2E,GAAa,CACxBtrI,KAAM,aACNskI,SAWF,SAAiC31F,EAASqS,EAAIslF,GAC5C,IAAM5+H,EAAO9E,KACb,OAYA,SAAewC,GACb,GAAa,KAATA,EAAa,CACf,IAAM+C,EAAQT,EAAKq9H,eAWnB,OAVK58H,EAAMkD,OACTsjC,EAAQw1F,MAAM,aAAc,CAC1BtC,YAAY,IAEd15H,EAAMkD,MAAO,GAEfsjC,EAAQw1F,MAAM,oBACdx1F,EAAQw1F,MAAM,oBACdx1F,EAAQy1F,QAAQh/H,GAChBupC,EAAQ01F,KAAK,oBACNqC,CACT,CACA,OAAOJ,EAAIlhI,EACb,EAYA,SAASshI,EAAMthI,GACb,OAAIy+H,GAAcz+H,IAChBupC,EAAQw1F,MAAM,8BACdx1F,EAAQy1F,QAAQh/H,GAChBupC,EAAQ01F,KAAK,8BACb11F,EAAQ01F,KAAK,oBACNrjF,IAETrS,EAAQ01F,KAAK,oBACNrjF,EAAG57C,GACZ,CACF,EA/DE4/H,aAAc,CACZV,SA4EJ,SAAwC31F,EAASqS,EAAIslF,GACnD,IAAM5+H,EAAO9E,KACb,OAeA,SAAmBwC,GACjB,GAAIy+H,GAAcz+H,GAGhB,OAAO4+H,GACLr1F,EACA48F,EACA,aACA7jI,EAAK06H,OAAOY,WAAWuD,QAAQC,KAAK1qH,SAAS,qBACzCvJ,EACA,EANCyxH,CAOL5+H,GAEJ,OAAOmmI,EAAWnmI,EACpB,EAeA,SAASmmI,EAAWnmI,GAClB,OAAOupC,EAAQ61F,QAAQ8G,GAAYtqF,EAAIslF,EAAhC33F,CAAqCvpC,EAC9C,CACF,GA3HEi/H,KA8HF,SAAc11F,GACZA,EAAQ01F,KAAK,aACf,GCjGO,SAASmH,GACd78F,EACAqS,EACAslF,EACAniI,EACAsnI,EACAC,EACAC,EACAC,EACAztE,GAEA,IAAM8lE,EAAQ9lE,GAAOjT,OAAOg5E,kBACxB2H,EAAU,EACd,OAcA,SAAezmI,GACb,GAAa,KAATA,EAMF,OALAupC,EAAQw1F,MAAMhgI,GACdwqC,EAAQw1F,MAAMsH,GACd98F,EAAQw1F,MAAMuH,GACd/8F,EAAQy1F,QAAQh/H,GAChBupC,EAAQ01F,KAAKqH,GACNI,EAIT,GAAa,OAAT1mI,GAA0B,KAATA,GAAwB,KAATA,GAAem+H,GAAan+H,GAC9D,OAAOkhI,EAAIlhI,GAQb,OANAupC,EAAQw1F,MAAMhgI,GACdwqC,EAAQw1F,MAAMwH,GACdh9F,EAAQw1F,MAAMyH,GACdj9F,EAAQw1F,MAAM,cAAe,CAC3BxC,YAAa,WAER14D,EAAI7jE,EACb,EAYA,SAAS0mI,EAAe1mI,GACtB,OAAa,KAATA,GACFupC,EAAQw1F,MAAMuH,GACd/8F,EAAQy1F,QAAQh/H,GAChBupC,EAAQ01F,KAAKqH,GACb/8F,EAAQ01F,KAAKoH,GACb98F,EAAQ01F,KAAKlgI,GACN68C,IAETrS,EAAQw1F,MAAMyH,GACdj9F,EAAQw1F,MAAM,cAAe,CAC3BxC,YAAa,WAERoK,EAAS3mI,GAClB,CAYA,SAAS2mI,EAAS3mI,GAChB,OAAa,KAATA,GACFupC,EAAQ01F,KAAK,eACb11F,EAAQ01F,KAAKuH,GACNE,EAAe1mI,IAEX,OAATA,GAA0B,KAATA,GAAeu+H,GAAmBv+H,GAC9CkhI,EAAIlhI,IAEbupC,EAAQy1F,QAAQh/H,GACA,KAATA,EAAc4mI,EAAiBD,EACxC,CAYA,SAASC,EAAe5mI,GACtB,OAAa,KAATA,GAAwB,KAATA,GAAwB,KAATA,GAChCupC,EAAQy1F,QAAQh/H,GACT2mI,GAEFA,EAAS3mI,EAClB,CAYA,SAAS6jE,EAAI7jE,GACX,OACGymI,GACS,OAATzmI,GAA0B,KAATA,IAAew+H,GAA0Bx+H,GAQzDymI,EAAU5H,GAAkB,KAAT7+H,GACrBupC,EAAQy1F,QAAQh/H,GAChBymI,IACO5iE,GAEI,KAAT7jE,GACFupC,EAAQy1F,QAAQh/H,GAChBymI,IACO5iE,GAMI,OAAT7jE,GAA0B,KAATA,GAAwB,KAATA,GAAem+H,GAAan+H,GACvDkhI,EAAIlhI,IAEbupC,EAAQy1F,QAAQh/H,GACA,KAATA,EAAc6mI,EAAYhjE,IAxB/Bt6B,EAAQ01F,KAAK,eACb11F,EAAQ01F,KAAKuH,GACbj9F,EAAQ01F,KAAKsH,GACbh9F,EAAQ01F,KAAKlgI,GACN68C,EAAG57C,GAqBd,CAYA,SAAS6mI,EAAU7mI,GACjB,OAAa,KAATA,GAAwB,KAATA,GAAwB,KAATA,GAChCupC,EAAQy1F,QAAQh/H,GACT6jE,GAEFA,EAAI7jE,EACb,CACF,CCzLO,SAAS8mI,GAAav9F,EAASqS,EAAIslF,EAAKniI,EAAMgoI,EAAYP,GAC/D,IAGI1rE,EAHEx4D,EAAO9E,KACT4V,EAAO,EAGX,OAYA,SAAepT,GAMb,OALAupC,EAAQw1F,MAAMhgI,GACdwqC,EAAQw1F,MAAMgI,GACdx9F,EAAQy1F,QAAQh/H,GAChBupC,EAAQ01F,KAAK8H,GACbx9F,EAAQw1F,MAAMyH,GACPlE,CACT,EAYA,SAASA,EAAQtiI,GACf,OACEoT,EAAO,KACE,OAATpT,GACS,KAATA,GACU,KAATA,IAAgB86D,GAMP,KAAT96D,IACEoT,GACD,2BAA4B9Q,EAAK06H,OAAOY,WAEnCsD,EAAIlhI,GAEA,KAATA,GACFupC,EAAQ01F,KAAKuH,GACbj9F,EAAQw1F,MAAMgI,GACdx9F,EAAQy1F,QAAQh/H,GAChBupC,EAAQ01F,KAAK8H,GACbx9F,EAAQ01F,KAAKlgI,GACN68C,GAIL2iF,GAAmBv+H,IACrBupC,EAAQw1F,MAAM,cACdx1F,EAAQy1F,QAAQh/H,GAChBupC,EAAQ01F,KAAK,cACNqD,IAET/4F,EAAQw1F,MAAM,cAAe,CAC3BxC,YAAa,WAERyK,EAAYhnI,GACrB,CAYA,SAASgnI,EAAYhnI,GACnB,OACW,OAATA,GACS,KAATA,GACS,KAATA,GACAu+H,GAAmBv+H,IACnBoT,IAAS,KAETm2B,EAAQ01F,KAAK,eACNqD,EAAQtiI,KAEjBupC,EAAQy1F,QAAQh/H,GACX86D,IAAMA,GAAQ2jE,GAAcz+H,IACjB,KAATA,EAAcinI,EAAcD,EACrC,CAYA,SAASC,EAAYjnI,GACnB,OAAa,KAATA,GAAwB,KAATA,GAAwB,KAATA,GAChCupC,EAAQy1F,QAAQh/H,GAChBoT,IACO4zH,GAEFA,EAAYhnI,EACrB,CACF,CCtHO,SAASknI,GAAa39F,EAASqS,EAAIslF,EAAKniI,EAAMgoI,EAAYP,GAE/D,IAAI50H,EACJ,OAYA,SAAe5R,GACb,GAAa,KAATA,GAAwB,KAATA,GAAwB,KAATA,EAMhC,OALAupC,EAAQw1F,MAAMhgI,GACdwqC,EAAQw1F,MAAMgI,GACdx9F,EAAQy1F,QAAQh/H,GAChBupC,EAAQ01F,KAAK8H,GACbn1H,EAAkB,KAAT5R,EAAc,GAAKA,EACrB2uH,EAET,OAAOuS,EAAIlhI,EACb,EAcA,SAAS2uH,EAAM3uH,GACb,OAAIA,IAAS4R,GACX23B,EAAQw1F,MAAMgI,GACdx9F,EAAQy1F,QAAQh/H,GAChBupC,EAAQ01F,KAAK8H,GACbx9F,EAAQ01F,KAAKlgI,GACN68C,IAETrS,EAAQw1F,MAAMyH,GACPlE,EAAQtiI,GACjB,CAYA,SAASsiI,EAAQtiI,GACf,OAAIA,IAAS4R,GACX23B,EAAQ01F,KAAKuH,GACN7X,EAAM/8G,IAEF,OAAT5R,EACKkhI,EAAIlhI,GAITu+H,GAAmBv+H,IAErBupC,EAAQw1F,MAAM,cACdx1F,EAAQy1F,QAAQh/H,GAChBupC,EAAQ01F,KAAK,cACNL,GAAar1F,EAAS+4F,EAAS,gBAExC/4F,EAAQw1F,MAAM,cAAe,CAC3BxC,YAAa,WAERiJ,EAAOxlI,GAChB,CAOA,SAASwlI,EAAOxlI,GACd,OAAIA,IAAS4R,GAAmB,OAAT5R,GAAiBu+H,GAAmBv+H,IACzDupC,EAAQ01F,KAAK,eACNqD,EAAQtiI,KAEjBupC,EAAQy1F,QAAQh/H,GACA,KAATA,EAAck1D,EAASswE,EAChC,CAYA,SAAStwE,EAAOl1D,GACd,OAAIA,IAAS4R,GAAmB,KAAT5R,GACrBupC,EAAQy1F,QAAQh/H,GACTwlI,GAEFA,EAAOxlI,EAChB,CACF,CClIO,SAASmnI,GAAkB59F,EAASqS,GAEzC,IAAIkf,EACJ,OAGA,SAAS39D,EAAM6C,GACb,GAAIu+H,GAAmBv+H,GAKrB,OAJAupC,EAAQw1F,MAAM,cACdx1F,EAAQy1F,QAAQh/H,GAChBupC,EAAQ01F,KAAK,cACbnkE,GAAO,EACA39D,EAET,GAAIshI,GAAcz+H,GAChB,OAAO4+H,GACLr1F,EACApsC,EACA29D,EAAO,aAAe,aAHjB8jE,CAIL5+H,GAEJ,OAAO47C,EAAG57C,EACZ,CACF,CC7BO,SAASonI,GAAoBrsI,GAClC,OACEA,EAEG0B,QAAQ,cAAe,KAEvBA,QAAQ,SAAU,IAOlB4hB,cACAG,aAEP,CChBO,IAAMk2C,GAAa,CACxB95D,KAAM,aACNskI,SAaF,SAA4B31F,EAASqS,EAAIslF,GACvC,IAEImG,EAFE/kI,EAAO9E,KAGb,OAYA,SAAewC,GAKb,OADAupC,EAAQw1F,MAAM,cAchB,SAAgB/+H,GAGd,OAAO8mI,GAAa5sI,KAClBoI,EACAinC,EACA+9F,EAEApG,EACA,kBACA,wBACA,wBARK4F,CASL9mI,EACJ,CA1BS69H,CAAO79H,EAChB,EAqCA,SAASsnI,EAAWtnI,GAIlB,OAHAqnI,EAAaD,GACX9kI,EAAKu/H,eAAev/H,EAAKw5H,OAAOx5H,EAAKw5H,OAAOlgI,OAAS,GAAG,IAAI4C,MAAM,GAAI,IAE3D,KAATwB,GACFupC,EAAQw1F,MAAM,oBACdx1F,EAAQy1F,QAAQh/H,GAChBupC,EAAQ01F,KAAK,oBACNsI,GAEFrG,EAAIlhI,EACb,CAYA,SAASunI,EAAYvnI,GAEnB,OAAOw+H,GAA0Bx+H,GAC7BmnI,GAAkB59F,EAASi+F,EAA3BL,CAA8CnnI,GAC9CwnI,EAAkBxnI,EACxB,CAYA,SAASwnI,EAAkBxnI,GACzB,OAAOomI,GACL78F,EACAk+F,EAEAvG,EACA,wBACA,+BACA,qCACA,2BACA,8BATKkF,CAULpmI,EACJ,CAYA,SAASynI,EAAiBznI,GACxB,OAAOupC,EAAQ61F,QAAQsI,GAAapG,EAAOA,EAApC/3F,CAA2CvpC,EACpD,CAcA,SAASshI,EAAMthI,GACb,OAAOy+H,GAAcz+H,GACjB4+H,GAAar1F,EAASo+F,EAAiB,aAAvC/I,CAAqD5+H,GACrD2nI,EAAgB3nI,EACtB,CAcA,SAAS2nI,EAAgB3nI,GACvB,OAAa,OAATA,GAAiBu+H,GAAmBv+H,IACtCupC,EAAQ01F,KAAK,cAKb38H,EAAK06H,OAAOxnB,QAAQp3G,KAAKipI,GAKlBzrF,EAAG57C,IAELkhI,EAAIlhI,EACb,CACF,GAtLM0nI,GAAc,CAClBxI,SA2LF,SAA6B31F,EAASqS,EAAIslF,GACxC,OAcA,SAAqBlhI,GACnB,OAAOw+H,GAA0Bx+H,GAC7BmnI,GAAkB59F,EAASq+F,EAA3BT,CAAyCnnI,GACzCkhI,EAAIlhI,EACV,EAaA,SAAS4nI,EAAa5nI,GACpB,OAAOknI,GACL39F,EACAs+F,EACA3G,EACA,kBACA,wBACA,wBANKgG,CAOLlnI,EACJ,CAYA,SAAS6nI,EAAW7nI,GAClB,OAAOy+H,GAAcz+H,GACjB4+H,GAAar1F,EAASu+F,EAA8B,aAApDlJ,CAAkE5+H,GAClE8nI,EAA6B9nI,EACnC,CAYA,SAAS8nI,EAA6B9nI,GACpC,OAAgB,OAATA,GAAiBu+H,GAAmBv+H,GAAQ47C,EAAG57C,GAAQkhI,EAAIlhI,EACpE,CACF,EAlQEuhI,SAAS,GCjBJ,IAAMwG,GAAe,CAC1BntI,KAAM,eACNskI,SAaF,SAA8B31F,EAASqS,EAAIslF,GACzC,IAAM5+H,EAAO9E,KACb,OAgBA,SAAewC,GAMb,OAHAupC,EAAQw1F,MAAM,gBAGPH,GAAar1F,EAASy+F,EAAa,aAAc,EAAjDpJ,CAAwD5+H,EACjE,EAYA,SAASgoI,EAAYhoI,GACnB,IAAM+3C,EAAOz1C,EAAKw5H,OAAOx5H,EAAKw5H,OAAOlgI,OAAS,GAC9C,OAAOm8C,GACY,eAAjBA,EAAK,GAAGh5C,MACRg5C,EAAK,GAAG8pF,eAAe9pF,EAAK,IAAI,GAAMn8C,QAAU,EAC9C0mI,EAAQtiI,GACRkhI,EAAIlhI,EACV,CAYA,SAASsiI,EAAQtiI,GACf,OAAa,OAATA,EACKshI,EAAMthI,GAEXu+H,GAAmBv+H,GACdupC,EAAQ61F,QAAQ6I,GAAc3F,EAAShB,EAAvC/3F,CAA8CvpC,IAEvDupC,EAAQw1F,MAAM,iBACPyG,EAAOxlI,GAChB,CAYA,SAASwlI,EAAOxlI,GACd,OAAa,OAATA,GAAiBu+H,GAAmBv+H,IACtCupC,EAAQ01F,KAAK,iBACNqD,EAAQtiI,KAEjBupC,EAAQy1F,QAAQh/H,GACTwlI,EACT,CAGA,SAASlE,EAAMthI,GAKb,OAJAupC,EAAQ01F,KAAK,gBAINrjF,EAAG57C,EACZ,CACF,GAvGMioI,GAAe,CACnB/I,SA4GF,SAA8B31F,EAASqS,EAAIslF,GACzC,IAAM5+H,EAAO9E,KACb,OAAOyqI,EAaP,SAASA,EAAajoI,GAGpB,OAAIsC,EAAK06H,OAAO7mE,KAAK7zD,EAAKixB,MAAMn2B,MACvB8jI,EAAIlhI,GAETu+H,GAAmBv+H,IACrBupC,EAAQw1F,MAAM,cACdx1F,EAAQy1F,QAAQh/H,GAChBupC,EAAQ01F,KAAK,cACNgJ,GASFrJ,GAAar1F,EAASy+F,EAAa,aAAc,EAAjDpJ,CAAwD5+H,EACjE,CAYA,SAASgoI,EAAYhoI,GACnB,IAAM+3C,EAAOz1C,EAAKw5H,OAAOx5H,EAAKw5H,OAAOlgI,OAAS,GAC9C,OAAOm8C,GACY,eAAjBA,EAAK,GAAGh5C,MACRg5C,EAAK,GAAG8pF,eAAe9pF,EAAK,IAAI,GAAMn8C,QAAU,EAC9CggD,EAAG57C,GACHu+H,GAAmBv+H,GACnBioI,EAAajoI,GACbkhI,EAAIlhI,EACV,CACF,EApKEuhI,SAAS,GCDJ,IAAM2G,GAAa,CACxBttI,KAAM,aACNskI,SA2DF,SAA4B31F,EAASqS,EAAIslF,GACvC,IAAI9tH,EAAO,EACX,OAYA,SAAepT,GAGb,OADAupC,EAAQw1F,MAAM,cAchB,SAAgB/+H,GAEd,OADAupC,EAAQw1F,MAAM,sBACPoJ,EAAanoI,EACtB,CAhBS69H,CAAO79H,EAChB,EA2BA,SAASmoI,EAAanoI,GACpB,OAAa,KAATA,GAAeoT,IAAS,GAC1Bm2B,EAAQy1F,QAAQh/H,GACTmoI,GAII,OAATnoI,GAAiBw+H,GAA0Bx+H,IAC7CupC,EAAQ01F,KAAK,sBACNqD,EAAQtiI,IAEVkhI,EAAIlhI,EACb,CAYA,SAASsiI,EAAQtiI,GACf,OAAa,KAATA,GACFupC,EAAQw1F,MAAM,sBACPqJ,EAAgBpoI,IAEZ,OAATA,GAAiBu+H,GAAmBv+H,IACtCupC,EAAQ01F,KAAK,cAINrjF,EAAG57C,IAERy+H,GAAcz+H,GACT4+H,GAAar1F,EAAS+4F,EAAS,aAA/B1D,CAA6C5+H,IAKtDupC,EAAQw1F,MAAM,kBACP99H,EAAKjB,GACd,CAcA,SAASooI,EAAgBpoI,GACvB,OAAa,KAATA,GACFupC,EAAQy1F,QAAQh/H,GACTooI,IAET7+F,EAAQ01F,KAAK,sBACNqD,EAAQtiI,GACjB,CAYA,SAASiB,EAAKjB,GACZ,OAAa,OAATA,GAA0B,KAATA,GAAew+H,GAA0Bx+H,IAC5DupC,EAAQ01F,KAAK,kBACNqD,EAAQtiI,KAEjBupC,EAAQy1F,QAAQh/H,GACTiB,EACT,CACF,EA5LE6C,QAIF,SAA2Bg4H,EAAQvzF,GACjC,IAGI5qC,EAEA08B,EALAonG,EAAa3F,EAAOlgI,OAAS,EAC7BujI,EAAe,EAOkB,eAAjCrD,EAAOqD,GAAc,GAAGpgI,OAC1BogI,GAAgB,GAKhBsC,EAAa,EAAItC,GACc,eAA/BrD,EAAO2F,GAAY,GAAG1iI,OAEtB0iI,GAAc,GAGiB,uBAA/B3F,EAAO2F,GAAY,GAAG1iI,OACrBogI,IAAiBsC,EAAa,GAC5BA,EAAa,EAAItC,GACmB,eAAnCrD,EAAO2F,EAAa,GAAG,GAAG1iI,QAE9B0iI,GAActC,EAAe,IAAMsC,EAAa,EAAI,GAElDA,EAAatC,GAYfn+E,GAAO86E,EAAQqD,EAAcsC,EAAatC,EAAe,EAAG,CAC1D,CAAC,QAZHxhI,EAAU,CACRoB,KAAM,iBACN5B,MAAO2+H,EAAOqD,GAAc,GAAGhiI,MAC/BM,IAAKq+H,EAAO2F,GAAY,GAAGhkI,KASR8qC,GACnB,CAAC,QARHlO,EAAO,CACLt7B,KAAM,YACN5B,MAAO2+H,EAAOqD,GAAc,GAAGhiI,MAC/BM,IAAKq+H,EAAO2F,GAAY,GAAGhkI,IAC3B8+H,YAAa,QAIGh0F,GAChB,CAAC,OAAQlO,EAAMkO,GACf,CAAC,OAAQ5qC,EAAS4qC,KAGtB,OAAOuzF,CACT,GC5DO,IAAMuM,GAAkB,CAC7BztI,KAAM,kBACNskI,SAkEF,SAAiC31F,EAASqS,EAAIslF,GAC5C,IAEItvH,EAFEtP,EAAO9E,KAGb,OAaA,SAAewC,GACb,IAEIsoI,EAFA77F,EAAQnqC,EAAKw5H,OAAOlgI,OAIxB,KAAO6wC,KAGL,GACiC,eAA/BnqC,EAAKw5H,OAAOrvF,GAAO,GAAG1tC,MACS,eAA/BuD,EAAKw5H,OAAOrvF,GAAO,GAAG1tC,MACS,YAA/BuD,EAAKw5H,OAAOrvF,GAAO,GAAG1tC,KACtB,CACAupI,EAA2C,cAA/BhmI,EAAKw5H,OAAOrvF,GAAO,GAAG1tC,KAClC,KACF,CAKF,IAAKuD,EAAK06H,OAAO7mE,KAAK7zD,EAAKixB,MAAMn2B,QAAUkF,EAAKk+H,WAAa8H,GAG3D,OAFA/+F,EAAQw1F,MAAM,qBACdntH,EAAS5R,EAiBb,SAAgBA,GAEd,OADAupC,EAAQw1F,MAAM,6BACPyG,EAAOxlI,EAChB,CAnBW69H,CAAO79H,GAEhB,OAAOkhI,EAAIlhI,EACb,EA6BA,SAASwlI,EAAOxlI,GACd,OAAIA,IAAS4R,GACX23B,EAAQy1F,QAAQh/H,GACTwlI,IAETj8F,EAAQ01F,KAAK,6BACNR,GAAcz+H,GACjB4+H,GAAar1F,EAAS+3F,EAAO,aAA7B1C,CAA2C5+H,GAC3CshI,EAAMthI,GACZ,CAaA,SAASshI,EAAMthI,GACb,OAAa,OAATA,GAAiBu+H,GAAmBv+H,IACtCupC,EAAQ01F,KAAK,qBACNrjF,EAAG57C,IAELkhI,EAAIlhI,EACb,CACF,EAtKEmlI,UAIF,SAAkCrJ,EAAQvzF,GAExC,IAEI5qC,EAEA08B,EAEAq6B,EANAjoB,EAAQqvF,EAAOlgI,OAUnB,KAAO6wC,KACL,GAAyB,UAArBqvF,EAAOrvF,GAAO,GAAgB,CAChC,GAA8B,YAA1BqvF,EAAOrvF,GAAO,GAAG1tC,KAAoB,CACvCpB,EAAU8uC,EACV,KACF,CAC8B,cAA1BqvF,EAAOrvF,GAAO,GAAG1tC,OACnBs7B,EAAOoS,EAEX,KAGgC,YAA1BqvF,EAAOrvF,GAAO,GAAG1tC,MAEnB+8H,EAAO96E,OAAOvU,EAAO,GAElBioB,GAAwC,eAA1BonE,EAAOrvF,GAAO,GAAG1tC,OAClC21D,EAAajoB,GAInB,IAAM87F,EAAU,CACdxpI,KAAM,gBACN5B,MAAO5D,OAAO8mB,OAAO,CAAC,EAAGy7G,EAAOzhG,GAAM,GAAGl9B,OACzCM,IAAKlE,OAAO8mB,OAAO,CAAC,EAAGy7G,EAAOA,EAAOlgI,OAAS,GAAG,GAAG6B,MAItDq+H,EAAOzhG,GAAM,GAAGt7B,KAAO,oBAInB21D,GACFonE,EAAO96E,OAAO3mB,EAAM,EAAG,CAAC,QAASkuG,EAAShgG,IAC1CuzF,EAAO96E,OAAO0T,EAAa,EAAG,EAAG,CAAC,OAAQonE,EAAOn+H,GAAS,GAAI4qC,IAC9DuzF,EAAOn+H,GAAS,GAAGF,IAAMlE,OAAO8mB,OAAO,CAAC,EAAGy7G,EAAOpnE,GAAY,GAAGj3D,MAEjEq+H,EAAOn+H,GAAS,GAAK4qI,EAKvB,OADAzM,EAAO19H,KAAK,CAAC,OAAQmqI,EAAShgG,IACvBuzF,CACT,GC3DO,IAAM0M,GAAiB,CAC5B,UACA,UACA,QACA,OACA,WACA,aACA,OACA,UACA,SACA,MACA,WACA,KACA,UACA,SACA,MACA,MACA,KACA,KACA,WACA,aACA,SACA,SACA,OACA,QACA,WACA,KACA,KACA,KACA,KACA,KACA,KACA,OACA,SACA,KACA,OACA,SACA,SACA,KACA,OACA,OACA,OACA,WACA,MACA,WACA,KACA,WACA,SACA,IACA,QACA,SACA,UACA,UACA,QACA,QACA,KACA,QACA,KACA,QACA,QACA,KACA,QACA,MAeWC,GAAe,CAAC,MAAO,SAAU,QAAS,YCxE1CC,GAAW,CACtB9tI,KAAM,WACNskI,SAsCF,SAA0B31F,EAASqS,EAAIslF,GACrC,IAEItvH,EAEA+2H,EAEAt3H,EAEAo7B,EAEAm8F,EAVEtmI,EAAO9E,KAWb,OAYA,SAAewC,GAEb,OAaF,SAAgBA,GAId,OAHAupC,EAAQw1F,MAAM,YACdx1F,EAAQw1F,MAAM,gBACdx1F,EAAQy1F,QAAQh/H,GACTiG,CACT,CAlBS43H,CAAO79H,EAChB,EAiCA,SAASiG,EAAKjG,GACZ,OAAa,KAATA,GACFupC,EAAQy1F,QAAQh/H,GACT6oI,GAEI,KAAT7oI,GACFupC,EAAQy1F,QAAQh/H,GAChB2oI,GAAa,EACNG,GAEI,KAAT9oI,GACFupC,EAAQy1F,QAAQh/H,GAChB4R,EAAS,EAMFtP,EAAKk+H,UAAY5kF,EAAKmtF,GAI3B/K,GAAWh+H,IACbupC,EAAQy1F,QAAQh/H,GAEhBqR,EAAStJ,OAAOovB,aAAan3B,GACtBytC,GAEFyzF,EAAIlhI,EACb,CAgBA,SAAS6oI,EAAgB7oI,GACvB,OAAa,KAATA,GACFupC,EAAQy1F,QAAQh/H,GAChB4R,EAAS,EACFo3H,GAEI,KAAThpI,GACFupC,EAAQy1F,QAAQh/H,GAChB4R,EAAS,EACT66B,EAAQ,EACDw8F,GAILjL,GAAWh+H,IACbupC,EAAQy1F,QAAQh/H,GAChB4R,EAAS,EAGFtP,EAAKk+H,UAAY5kF,EAAKmtF,GAExB7H,EAAIlhI,EACb,CAYA,SAASgpI,EAAkBhpI,GACzB,OAAa,KAATA,GACFupC,EAAQy1F,QAAQh/H,GAGTsC,EAAKk+H,UAAY5kF,EAAKmtF,GAExB7H,EAAIlhI,EACb,CAYA,SAASipI,EAAgBjpI,GACvB,IAAMjF,EAAQ,SACd,OAAIiF,IAASjF,EAAM4N,WAAW8jC,MAC5BlD,EAAQy1F,QAAQh/H,GACFjF,IAAV0xC,EAGKnqC,EAAKk+H,UAAY5kF,EAAKgkF,EAExBqJ,GAEF/H,EAAIlhI,EACb,CAYA,SAAS8oI,EAAc9oI,GACrB,OAAIg+H,GAAWh+H,IACbupC,EAAQy1F,QAAQh/H,GAEhBqR,EAAStJ,OAAOovB,aAAan3B,GACtBytC,GAEFyzF,EAAIlhI,EACb,CAcA,SAASytC,EAAQztC,GACf,GACW,OAATA,GACS,KAATA,GACS,KAATA,GACAw+H,GAA0Bx+H,GAC1B,CACA,IAAMkpI,EAAiB,KAATlpI,EACRpF,EAAOyW,EAAOgN,cACpB,OAAK6qH,GAAUP,IAAcF,GAAa/xH,SAAS9b,GAM/C4tI,GAAe9xH,SAASrF,EAAOgN,gBACjCzM,EAAS,EACLs3H,GACF3/F,EAAQy1F,QAAQh/H,GACTmpI,GAKF7mI,EAAKk+H,UAAY5kF,EAAG57C,GAAQ4/H,EAAa5/H,KAElD4R,EAAS,EAEFtP,EAAKk+H,YAAcl+H,EAAK06H,OAAO7mE,KAAK7zD,EAAKixB,MAAMn2B,MAClD8jI,EAAIlhI,GACJ2oI,EACAS,EAAwBppI,GACxBqpI,EAA4BrpI,KAtB9B4R,EAAS,EAGFtP,EAAKk+H,UAAY5kF,EAAG57C,GAAQ4/H,EAAa5/H,GAoBpD,CAGA,OAAa,KAATA,GAAei+H,GAAkBj+H,IACnCupC,EAAQy1F,QAAQh/H,GAChBqR,GAAUtJ,OAAOovB,aAAan3B,GACvBytC,GAEFyzF,EAAIlhI,EACb,CAYA,SAASmpI,EAAiBnpI,GACxB,OAAa,KAATA,GACFupC,EAAQy1F,QAAQh/H,GAGTsC,EAAKk+H,UAAY5kF,EAAKgkF,GAExBsB,EAAIlhI,EACb,CAYA,SAASopI,EAAwBppI,GAC/B,OAAIy+H,GAAcz+H,IAChBupC,EAAQy1F,QAAQh/H,GACTopI,GAEFE,EAAYtpI,EACrB,CAyBA,SAASqpI,EAA4BrpI,GACnC,OAAa,KAATA,GACFupC,EAAQy1F,QAAQh/H,GACTspI,GAII,KAATtpI,GAAwB,KAATA,GAAeg+H,GAAWh+H,IAC3CupC,EAAQy1F,QAAQh/H,GACTupI,GAEL9K,GAAcz+H,IAChBupC,EAAQy1F,QAAQh/H,GACTqpI,GAEFC,EAAYtpI,EACrB,CAgBA,SAASupI,EAAsBvpI,GAE7B,OACW,KAATA,GACS,KAATA,GACS,KAATA,GACS,KAATA,GACAi+H,GAAkBj+H,IAElBupC,EAAQy1F,QAAQh/H,GACTupI,GAEFC,EAA2BxpI,EACpC,CAeA,SAASwpI,EAA2BxpI,GAClC,OAAa,KAATA,GACFupC,EAAQy1F,QAAQh/H,GACTypI,GAELhL,GAAcz+H,IAChBupC,EAAQy1F,QAAQh/H,GACTwpI,GAEFH,EAA4BrpI,EACrC,CAeA,SAASypI,EAA6BzpI,GACpC,OACW,OAATA,GACS,KAATA,GACS,KAATA,GACS,KAATA,GACS,KAATA,EAEOkhI,EAAIlhI,GAEA,KAATA,GAAwB,KAATA,GACjBupC,EAAQy1F,QAAQh/H,GAChB4oI,EAAU5oI,EACH0pI,GAELjL,GAAcz+H,IAChBupC,EAAQy1F,QAAQh/H,GACTypI,GAEFE,EAA+B3pI,EACxC,CAcA,SAAS0pI,EAA6B1pI,GACpC,OAAIA,IAAS4oI,GACXr/F,EAAQy1F,QAAQh/H,GAChB4oI,EAAU,KACHgB,GAEI,OAAT5pI,GAAiBu+H,GAAmBv+H,GAC/BkhI,EAAIlhI,IAEbupC,EAAQy1F,QAAQh/H,GACT0pI,EACT,CAYA,SAASC,EAA+B3pI,GACtC,OACW,OAATA,GACS,KAATA,GACS,KAATA,GACS,KAATA,GACS,KAATA,GACS,KAATA,GACS,KAATA,GACS,KAATA,GACAw+H,GAA0Bx+H,GAEnBwpI,EAA2BxpI,IAEpCupC,EAAQy1F,QAAQh/H,GACT2pI,EACT,CAaA,SAASC,EAAkC5pI,GACzC,OAAa,KAATA,GAAwB,KAATA,GAAey+H,GAAcz+H,GACvCqpI,EAA4BrpI,GAE9BkhI,EAAIlhI,EACb,CAYA,SAASspI,EAAYtpI,GACnB,OAAa,KAATA,GACFupC,EAAQy1F,QAAQh/H,GACT6pI,GAEF3I,EAAIlhI,EACb,CAYA,SAAS6pI,EAAc7pI,GACrB,OAAa,OAATA,GAAiBu+H,GAAmBv+H,GAG/B4/H,EAAa5/H,GAElBy+H,GAAcz+H,IAChBupC,EAAQy1F,QAAQh/H,GACT6pI,GAEF3I,EAAIlhI,EACb,CAYA,SAAS4/H,EAAa5/H,GACpB,OAAa,KAATA,GAA0B,IAAX4R,GACjB23B,EAAQy1F,QAAQh/H,GACT8pI,GAEI,KAAT9pI,GAA0B,IAAX4R,GACjB23B,EAAQy1F,QAAQh/H,GACT+pI,GAEI,KAAT/pI,GAA0B,IAAX4R,GACjB23B,EAAQy1F,QAAQh/H,GACTgqI,GAEI,KAAThqI,GAA0B,IAAX4R,GACjB23B,EAAQy1F,QAAQh/H,GACT+oI,GAEI,KAAT/oI,GAA0B,IAAX4R,GACjB23B,EAAQy1F,QAAQh/H,GACTiqI,IAEL1L,GAAmBv+H,IAAqB,IAAX4R,GAA2B,IAAXA,EAQpC,OAAT5R,GAAiBu+H,GAAmBv+H,IACtCupC,EAAQ01F,KAAK,gBACNiL,EAAkBlqI,KAE3BupC,EAAQy1F,QAAQh/H,GACT4/H,IAZLr2F,EAAQ01F,KAAK,gBACN11F,EAAQysE,MACbm0B,GACAC,EACAF,EAHK3gG,CAILvpC,GAQN,CAaA,SAASkqI,EAAkBlqI,GACzB,OAAOupC,EAAQysE,MACbq0B,GACAC,EACAF,EAHK7gG,CAILvpC,EACJ,CAaA,SAASsqI,EAAyBtqI,GAIhC,OAHAupC,EAAQw1F,MAAM,cACdx1F,EAAQy1F,QAAQh/H,GAChBupC,EAAQ01F,KAAK,cACNsL,CACT,CAaA,SAASA,EAAmBvqI,GAC1B,OAAa,OAATA,GAAiBu+H,GAAmBv+H,GAC/BkqI,EAAkBlqI,IAE3BupC,EAAQw1F,MAAM,gBACPa,EAAa5/H,GACtB,CAYA,SAAS8pI,EAA0B9pI,GACjC,OAAa,KAATA,GACFupC,EAAQy1F,QAAQh/H,GACT+oI,GAEFnJ,EAAa5/H,EACtB,CAYA,SAAS+pI,EAAuB/pI,GAC9B,OAAa,KAATA,GACFupC,EAAQy1F,QAAQh/H,GAChBqR,EAAS,GACFm5H,GAEF5K,EAAa5/H,EACtB,CAYA,SAASwqI,EAAsBxqI,GAC7B,GAAa,KAATA,EAAa,CACf,IAAMpF,EAAOyW,EAAOgN,cACpB,OAAIoqH,GAAa/xH,SAAS9b,IACxB2uC,EAAQy1F,QAAQh/H,GACTgqI,GAEFpK,EAAa5/H,EACtB,CACA,OAAIg+H,GAAWh+H,IAASqR,EAAOzV,OAAS,GACtC2tC,EAAQy1F,QAAQh/H,GAEhBqR,GAAUtJ,OAAOovB,aAAan3B,GACvBwqI,GAEF5K,EAAa5/H,EACtB,CAYA,SAASiqI,EAAwBjqI,GAC/B,OAAa,KAATA,GACFupC,EAAQy1F,QAAQh/H,GACT+oI,GAEFnJ,EAAa5/H,EACtB,CAoBA,SAAS+oI,EAA8B/oI,GACrC,OAAa,KAATA,GACFupC,EAAQy1F,QAAQh/H,GACTgqI,GAII,KAAThqI,GAA0B,IAAX4R,GACjB23B,EAAQy1F,QAAQh/H,GACT+oI,GAEFnJ,EAAa5/H,EACtB,CAYA,SAASgqI,EAAkBhqI,GACzB,OAAa,OAATA,GAAiBu+H,GAAmBv+H,IACtCupC,EAAQ01F,KAAK,gBACNmL,EAAkBpqI,KAE3BupC,EAAQy1F,QAAQh/H,GACTgqI,EACT,CAYA,SAASI,EAAkBpqI,GAMzB,OALAupC,EAAQ01F,KAAK,YAKNrjF,EAAG57C,EACZ,CACF,EArzBEmlI,UAeF,SAA2BrJ,GACzB,IAAIrvF,EAAQqvF,EAAOlgI,OACnB,KAAO6wC,MACoB,UAArBqvF,EAAOrvF,GAAO,IAA4C,aAA1BqvF,EAAOrvF,GAAO,GAAG1tC,QAInD0tC,EAAQ,GAAmC,eAA9BqvF,EAAOrvF,EAAQ,GAAG,GAAG1tC,OAEpC+8H,EAAOrvF,GAAO,GAAGtvC,MAAQ2+H,EAAOrvF,EAAQ,GAAG,GAAGtvC,MAE9C2+H,EAAOrvF,EAAQ,GAAG,GAAGtvC,MAAQ2+H,EAAOrvF,EAAQ,GAAG,GAAGtvC,MAElD2+H,EAAO96E,OAAOvU,EAAQ,EAAG,IAE3B,OAAOqvF,CACT,EA9BEwE,UAAU,GAIN6J,GAAkB,CACtBjL,SAk2BF,SAAiC31F,EAASqS,EAAIslF,GAC5C,OAaA,SAAelhI,GAIb,OAHAupC,EAAQw1F,MAAM,cACdx1F,EAAQy1F,QAAQh/H,GAChBupC,EAAQ01F,KAAK,cACN11F,EAAQ61F,QAAQiC,GAAWzlF,EAAIslF,EACxC,CACF,EAr3BEK,SAAS,GAEL8I,GAA2B,CAC/BnL,SAizBF,SAA0C31F,EAASqS,EAAIslF,GACrD,IAAM5+H,EAAO9E,KACb,OAaA,SAAewC,GACb,GAAIu+H,GAAmBv+H,GAIrB,OAHAupC,EAAQw1F,MAAM,cACdx1F,EAAQy1F,QAAQh/H,GAChBupC,EAAQ01F,KAAK,cACNqC,EAET,OAAOJ,EAAIlhI,EACb,EAaA,SAASshI,EAAMthI,GACb,OAAOsC,EAAK06H,OAAO7mE,KAAK7zD,EAAKixB,MAAMn2B,MAAQ8jI,EAAIlhI,GAAQ47C,EAAG57C,EAC5D,CACF,EAv1BEuhI,SAAS,GCvBX,IAAMkJ,GAAsB,CAC1BvL,SAwbF,SAAqC31F,EAASqS,EAAIslF,GAChD,IAAM5+H,EAAO9E,KACb,OAOA,SAAewC,GACb,GAAa,OAATA,EACF,OAAOkhI,EAAIlhI,GAKb,OAHAupC,EAAQw1F,MAAM,cACdx1F,EAAQy1F,QAAQh/H,GAChBupC,EAAQ01F,KAAK,cACNK,CACT,EAOA,SAASA,EAAUt/H,GACjB,OAAOsC,EAAK06H,OAAO7mE,KAAK7zD,EAAKixB,MAAMn2B,MAAQ8jI,EAAIlhI,GAAQ47C,EAAG57C,EAC5D,CACF,EAldEuhI,SAAS,GAIEmJ,GAAa,CACxB9vI,KAAM,aACNskI,SAQF,SAA4B31F,EAASqS,EAAIslF,GACvC,IASItvH,EATEtP,EAAO9E,KAEPmtI,EAAa,CACjBzL,SA+SF,SAA4B31F,EAASqS,EAAIslF,GACvC,IAAI9tH,EAAO,EACX,OAAOw3H,EAOP,SAASA,EAAY5qI,GAInB,OAHAupC,EAAQw1F,MAAM,cACdx1F,EAAQy1F,QAAQh/H,GAChBupC,EAAQ01F,KAAK,cACN9hI,CACT,CAcA,SAASA,EAAM6C,GAKb,OADAupC,EAAQw1F,MAAM,mBACPN,GAAcz+H,GACjB4+H,GACEr1F,EACAshG,EACA,aACAvoI,EAAK06H,OAAOY,WAAWuD,QAAQC,KAAK1qH,SAAS,qBACzCvJ,EACA,EANNyxH,CAOE5+H,GACF6qI,EAAoB7qI,EAC1B,CAcA,SAAS6qI,EAAoB7qI,GAC3B,OAAIA,IAAS4R,GACX23B,EAAQw1F,MAAM,2BACP+L,EAAc9qI,IAEhBkhI,EAAIlhI,EACb,CAcA,SAAS8qI,EAAc9qI,GACrB,OAAIA,IAAS4R,GACXwB,IACAm2B,EAAQy1F,QAAQh/H,GACT8qI,GAEL13H,GAAQ23H,GACVxhG,EAAQ01F,KAAK,2BACNR,GAAcz+H,GACjB4+H,GAAar1F,EAASyhG,EAAoB,aAA1CpM,CAAwD5+H,GACxDgrI,EAAmBhrI,IAElBkhI,EAAIlhI,EACb,CAcA,SAASgrI,EAAmBhrI,GAC1B,OAAa,OAATA,GAAiBu+H,GAAmBv+H,IACtCupC,EAAQ01F,KAAK,mBACNrjF,EAAG57C,IAELkhI,EAAIlhI,EACb,CACF,EA7ZEuhI,SAAS,GAEP0J,EAAgB,EAChBF,EAAW,EAGf,OAcA,SAAe/qI,GAEb,OAeF,SAA4BA,GAC1B,IAAM+3C,EAAOz1C,EAAKw5H,OAAOx5H,EAAKw5H,OAAOlgI,OAAS,GAS9C,OARAqvI,EACElzF,GAAyB,eAAjBA,EAAK,GAAGh5C,KACZg5C,EAAK,GAAG8pF,eAAe9pF,EAAK,IAAI,GAAMn8C,OACtC,EACNgW,EAAS5R,EACTupC,EAAQw1F,MAAM,cACdx1F,EAAQw1F,MAAM,mBACdx1F,EAAQw1F,MAAM,2BACPoJ,EAAanoI,EACtB,CA1BSkrI,CAAmBlrI,EAC5B,EAuCA,SAASmoI,EAAanoI,GACpB,OAAIA,IAAS4R,GACXm5H,IACAxhG,EAAQy1F,QAAQh/H,GACTmoI,GAEL4C,EAAW,EACN7J,EAAIlhI,IAEbupC,EAAQ01F,KAAK,2BACNR,GAAcz+H,GACjB4+H,GAAar1F,EAAS4hG,EAAY,aAAlCvM,CAAgD5+H,GAChDmrI,EAAWnrI,GACjB,CAcA,SAASmrI,EAAWnrI,GAClB,OAAa,OAATA,GAAiBu+H,GAAmBv+H,IACtCupC,EAAQ01F,KAAK,mBACN38H,EAAKk+H,UACR5kF,EAAG57C,GACHupC,EAAQysE,MAAMy0B,GAAqBW,EAAgB9J,EAAnD/3F,CAA0DvpC,KAEhEupC,EAAQw1F,MAAM,uBACdx1F,EAAQw1F,MAAM,cAAe,CAC3BxC,YAAa,WAERljH,EAAKrZ,GACd,CAcA,SAASqZ,EAAKrZ,GACZ,OAAa,OAATA,GAAiBu+H,GAAmBv+H,IACtCupC,EAAQ01F,KAAK,eACb11F,EAAQ01F,KAAK,uBACNkM,EAAWnrI,IAEhBy+H,GAAcz+H,IAChBupC,EAAQ01F,KAAK,eACb11F,EAAQ01F,KAAK,uBACNL,GAAar1F,EAAS8hG,EAAY,aAAlCzM,CAAgD5+H,IAE5C,KAATA,GAAeA,IAAS4R,EACnBsvH,EAAIlhI,IAEbupC,EAAQy1F,QAAQh/H,GACTqZ,EACT,CAcA,SAASgyH,EAAWrrI,GAClB,OAAa,OAATA,GAAiBu+H,GAAmBv+H,GAC/BmrI,EAAWnrI,IAEpBupC,EAAQw1F,MAAM,uBACdx1F,EAAQw1F,MAAM,cAAe,CAC3BxC,YAAa,WAER/zG,EAAKxoB,GACd,CAcA,SAASwoB,EAAKxoB,GACZ,OAAa,OAATA,GAAiBu+H,GAAmBv+H,IACtCupC,EAAQ01F,KAAK,eACb11F,EAAQ01F,KAAK,uBACNkM,EAAWnrI,IAEP,KAATA,GAAeA,IAAS4R,EACnBsvH,EAAIlhI,IAEbupC,EAAQy1F,QAAQh/H,GACTwoB,EACT,CAeA,SAAS4iH,EAAeprI,GACtB,OAAOupC,EAAQ61F,QAAQuL,EAAYrJ,EAAOgK,EAAnC/hG,CAAkDvpC,EAC3D,CAcA,SAASsrI,EAActrI,GAIrB,OAHAupC,EAAQw1F,MAAM,cACdx1F,EAAQy1F,QAAQh/H,GAChBupC,EAAQ01F,KAAK,cACNE,CACT,CAcA,SAASA,EAAan/H,GACpB,OAAOirI,EAAgB,GAAKxM,GAAcz+H,GACtC4+H,GACEr1F,EACAgiG,EACA,aACAN,EAAgB,EAJlBrM,CAKE5+H,GACFurI,EAAmBvrI,EACzB,CAcA,SAASurI,EAAmBvrI,GAC1B,OAAa,OAATA,GAAiBu+H,GAAmBv+H,GAC/BupC,EAAQysE,MAAMy0B,GAAqBW,EAAgB9J,EAAnD/3F,CAA0DvpC,IAEnEupC,EAAQw1F,MAAM,iBACPyM,EAAaxrI,GACtB,CAcA,SAASwrI,EAAaxrI,GACpB,OAAa,OAATA,GAAiBu+H,GAAmBv+H,IACtCupC,EAAQ01F,KAAK,iBACNsM,EAAmBvrI,KAE5BupC,EAAQy1F,QAAQh/H,GACTwrI,EACT,CAcA,SAASlK,EAAMthI,GAEb,OADAupC,EAAQ01F,KAAK,cACNrjF,EAAG57C,EACZ,CAsHF,EA1aEsgI,UAAU,GChBZ,IAAM1/H,GAAUC,SAASO,cAAc,KAMhC,SAASqqI,GAA8B1wI,GAC5C,IAAM2wI,EAAqB,IAAM3wI,EAAQ,IACzC6F,GAAQwjB,UAAYsnH,EACpB,IAAM9pG,EAAOhhC,GAAQkjB,YAUrB,OAAyC,KAArC8d,EAAKj5B,WAAWi5B,EAAKhmC,OAAS,IAAiC,SAAVb,KAQlD6mC,IAAS8pG,GAA6B9pG,EAC/C,CCjBO,IAAM8pG,GAAqB,CAChC9wI,KAAM,qBACNskI,SAOF,SAAoC31F,EAASqS,EAAIslF,GAC/C,IAGInoE,EAEA3yD,EALE9D,EAAO9E,KACT4V,EAAO,EAKX,OAgBA,SAAepT,GAKb,OAJAupC,EAAQw1F,MAAM,sBACdx1F,EAAQw1F,MAAM,4BACdx1F,EAAQy1F,QAAQh/H,GAChBupC,EAAQ01F,KAAK,4BACNh5H,CACT,EAiBA,SAASA,EAAKjG,GACZ,OAAa,KAATA,GACFupC,EAAQw1F,MAAM,mCACdx1F,EAAQy1F,QAAQh/H,GAChBupC,EAAQ01F,KAAK,mCACN0M,IAETpiG,EAAQw1F,MAAM,2BACdhmE,EAAM,GACN3yD,EAAO63H,GACAljI,EAAMiF,GACf,CAcA,SAAS2rI,EAAQ3rI,GACf,OAAa,KAATA,GAAwB,MAATA,GACjBupC,EAAQw1F,MAAM,uCACdx1F,EAAQy1F,QAAQh/H,GAChBupC,EAAQ01F,KAAK,uCACb11F,EAAQw1F,MAAM,2BACdhmE,EAAM,EACN3yD,EAAOi4H,GACAtjI,IAETwuC,EAAQw1F,MAAM,2BACdhmE,EAAM,EACN3yD,EAAOg4H,GACArjI,EAAMiF,GACf,CAmBA,SAASjF,EAAMiF,GACb,GAAa,KAATA,GAAeoT,EAAM,CACvB,IAAMszF,EAAQn9D,EAAQ01F,KAAK,2BAC3B,OACE74H,IAAS63H,IACRwN,GAA8BnpI,EAAKu/H,eAAen7B,KAOrDn9D,EAAQw1F,MAAM,4BACdx1F,EAAQy1F,QAAQh/H,GAChBupC,EAAQ01F,KAAK,4BACb11F,EAAQ01F,KAAK,sBACNrjF,GATEslF,EAAIlhI,EAUf,CACA,OAAIoG,EAAKpG,IAASoT,IAAS2lD,GACzBxvB,EAAQy1F,QAAQh/H,GACTjF,GAEFmmI,EAAIlhI,EACb,CACF,GC/IO,IAAM4rI,GAAkB,CAC7BhxI,KAAM,kBACNskI,SAOF,SAAiC31F,EAASqS,EAAIslF,GAC5C,OAYA,SAAelhI,GAKb,OAJAupC,EAAQw1F,MAAM,mBACdx1F,EAAQw1F,MAAM,gBACdx1F,EAAQy1F,QAAQh/H,GAChBupC,EAAQ01F,KAAK,gBACNuG,CACT,EAYA,SAASA,EAAOxlI,GAEd,OAAIs+H,GAAiBt+H,IACnBupC,EAAQw1F,MAAM,wBACdx1F,EAAQy1F,QAAQh/H,GAChBupC,EAAQ01F,KAAK,wBACb11F,EAAQ01F,KAAK,mBACNrjF,GAEFslF,EAAIlhI,EACb,CACF,GClDO,IAAM6rI,GAAa,CACxBjxI,KAAM,aACNskI,SAOF,SAA4B31F,EAASqS,GACnC,OAGA,SAAe57C,GAIb,OAHAupC,EAAQw1F,MAAM,cACdx1F,EAAQy1F,QAAQh/H,GAChBupC,EAAQ01F,KAAK,cACNL,GAAar1F,EAASqS,EAAI,aACnC,CACF,GCVO,IAAMkwF,GAAW,CACtBlxI,KAAM,WACNskI,SA8IF,SAA0B31F,EAASqS,EAAIslF,GACrC,IAGI6K,EAEAv2B,EALElzG,EAAO9E,KACTivC,EAAQnqC,EAAKw5H,OAAOlgI,OAOxB,KAAO6wC,KACL,IACkC,eAA/BnqC,EAAKw5H,OAAOrvF,GAAO,GAAG1tC,MACU,cAA/BuD,EAAKw5H,OAAOrvF,GAAO,GAAG1tC,QACvBuD,EAAKw5H,OAAOrvF,GAAO,GAAGu/F,UACvB,CACAD,EAAazpI,EAAKw5H,OAAOrvF,GAAO,GAChC,KACF,CAEF,OAiBA,SAAezsC,GAEb,IAAK+rI,EACH,OAAO7K,EAAIlhI,GAYb,GAAI+rI,EAAWE,UACb,OAAOC,EAAYlsI,GAerB,OAbAw1G,EAAUlzG,EAAK06H,OAAOxnB,QAAQ9+F,SAC5B0wH,GACE9kI,EAAKu/H,eAAe,CAClB1kI,MAAO4uI,EAAWtuI,IAClBA,IAAK6E,EAAKixB,UAIhBgW,EAAQw1F,MAAM,YACdx1F,EAAQw1F,MAAM,eACdx1F,EAAQy1F,QAAQh/H,GAChBupC,EAAQ01F,KAAK,eACb11F,EAAQ01F,KAAK,YACNqC,CACT,EAkBA,SAASA,EAAMthI,GAKb,OAAa,KAATA,EACKupC,EAAQ61F,QACb+M,GACAC,EACA52B,EAAU42B,EAAaF,EAHlB3iG,CAILvpC,GAIS,KAATA,EACKupC,EAAQ61F,QACbiN,GACAD,EACA52B,EAAU82B,EAAmBJ,EAHxB3iG,CAILvpC,GAIGw1G,EAAU42B,EAAWpsI,GAAQksI,EAAYlsI,EAClD,CAgBA,SAASssI,EAAiBtsI,GACxB,OAAOupC,EAAQ61F,QACbmN,GACAH,EACAF,EAHK3iG,CAILvpC,EACJ,CAkBA,SAASosI,EAAWpsI,GAElB,OAAO47C,EAAG57C,EACZ,CAkBA,SAASksI,EAAYlsI,GAEnB,OADA+rI,EAAWC,WAAY,EAChB9K,EAAIlhI,EACb,CACF,EA5TEmlI,UAqCF,SAA2BrJ,EAAQvzF,GACjC,IAGIm+D,EAEAzgG,EAEAsE,EAEAu8C,EATAra,EAAQqvF,EAAOlgI,OACfygC,EAAS,EAWb,KAAOoQ,KAEL,GADAi6D,EAAQo1B,EAAOrvF,GAAO,GAClBxmC,EAAM,CAER,GACiB,SAAfygG,EAAM3nG,MACU,cAAf2nG,EAAM3nG,MAAwB2nG,EAAMulC,UAErC,MAKuB,UAArBnQ,EAAOrvF,GAAO,IAAiC,cAAfi6D,EAAM3nG,OACxC2nG,EAAMulC,WAAY,EAEtB,MAAO,GAAI1hI,GACT,GACuB,UAArBuxH,EAAOrvF,GAAO,KACE,eAAfi6D,EAAM3nG,MAAwC,cAAf2nG,EAAM3nG,QACrC2nG,EAAMslC,YAEP/lI,EAAOwmC,EACY,cAAfi6D,EAAM3nG,MAAsB,CAC9Bs9B,EAAS,EACT,KACF,MAEsB,aAAfqqE,EAAM3nG,OACfwL,EAAQkiC,GAGZ,IAAM+/F,EAAQ,CACZztI,KAA+B,cAAzB+8H,EAAO71H,GAAM,GAAGlH,KAAuB,OAAS,QACtD5B,MAAO5D,OAAO8mB,OAAO,CAAC,EAAGy7G,EAAO71H,GAAM,GAAG9I,OACzCM,IAAKlE,OAAO8mB,OAAO,CAAC,EAAGy7G,EAAOA,EAAOlgI,OAAS,GAAG,GAAG6B,MAEhD8gG,EAAQ,CACZx/F,KAAM,QACN5B,MAAO5D,OAAO8mB,OAAO,CAAC,EAAGy7G,EAAO71H,GAAM,GAAG9I,OACzCM,IAAKlE,OAAO8mB,OAAO,CAAC,EAAGy7G,EAAOvxH,GAAO,GAAG9M,MAEpC48B,EAAO,CACXt7B,KAAM,YACN5B,MAAO5D,OAAO8mB,OAAO,CAAC,EAAGy7G,EAAO71H,EAAOo2B,EAAS,GAAG,GAAG5+B,KACtDA,IAAKlE,OAAO8mB,OAAO,CAAC,EAAGy7G,EAAOvxH,EAAQ,GAAG,GAAGpN,QAuC9C,OA/BA2pD,EAAQ1oD,GANR0oD,EAAQ,CACN,CAAC,QAAS0lF,EAAOjkG,GACjB,CAAC,QAASg2D,EAAOh2D,IAICuzF,EAAOt9H,MAAMyH,EAAO,EAAGA,EAAOo2B,EAAS,IAG3DyqB,EAAQ1oD,GAAK0oD,EAAO,CAAC,CAAC,QAASzsB,EAAMkO,KAKrCue,EAAQ1oD,GACN0oD,EACAm7E,GACE15F,EAAQy0F,OAAOY,WAAW6O,WAAWrL,KACrCtF,EAAOt9H,MAAMyH,EAAOo2B,EAAS,EAAG9xB,EAAQ,GACxCg+B,IAKJue,EAAQ1oD,GAAK0oD,EAAO,CAClB,CAAC,OAAQzsB,EAAMkO,GACfuzF,EAAOvxH,EAAQ,GACfuxH,EAAOvxH,EAAQ,GACf,CAAC,OAAQg0F,EAAOh2D,KAIlBue,EAAQ1oD,GAAK0oD,EAAOg1E,EAAOt9H,MAAM+L,EAAQ,IAGzCu8C,EAAQ1oD,GAAK0oD,EAAO,CAAC,CAAC,OAAQ0lF,EAAOjkG,KACrCyY,GAAO86E,EAAQ71H,EAAM61H,EAAOlgI,OAAQkrD,GAC7Bg1E,CACT,EAtIEmG,WAiBF,SAA4BnG,GAC1B,IAAIrvF,GAAS,EACb,OAASA,EAAQqvF,EAAOlgI,QAAQ,CAC9B,IAAM8qG,EAAQo1B,EAAOrvF,GAAO,GAEX,eAAfi6D,EAAM3nG,MACS,cAAf2nG,EAAM3nG,MACS,aAAf2nG,EAAM3nG,OAGN+8H,EAAO96E,OAAOvU,EAAQ,EAAkB,eAAfi6D,EAAM3nG,KAAwB,EAAI,GAC3D2nG,EAAM3nG,KAAO,OACb0tC,IAEJ,CACA,OAAOqvF,CACT,GA7BMqQ,GAAoB,CACxBjN,SA4TF,SAA0B31F,EAASqS,EAAIslF,GACrC,OAYA,SAAuBlhI,GAKrB,OAJAupC,EAAQw1F,MAAM,YACdx1F,EAAQw1F,MAAM,kBACdx1F,EAAQy1F,QAAQh/H,GAChBupC,EAAQ01F,KAAK,kBACNyN,CACT,EAYA,SAASA,EAAe1sI,GACtB,OAAOw+H,GAA0Bx+H,GAC7BmnI,GAAkB59F,EAASojG,EAA3BxF,CAAyCnnI,GACzC2sI,EAAa3sI,EACnB,CAYA,SAAS2sI,EAAa3sI,GACpB,OAAa,KAATA,EACK4sI,EAAY5sI,GAEdomI,GACL78F,EACAsjG,EACAC,EACA,sBACA,6BACA,mCACA,yBACA,4BACA,GATK1G,CAULpmI,EACJ,CAYA,SAAS6sI,EAAyB7sI,GAChC,OAAOw+H,GAA0Bx+H,GAC7BmnI,GAAkB59F,EAASwjG,EAA3B5F,CAA4CnnI,GAC5C4sI,EAAY5sI,EAClB,CAYA,SAAS8sI,EAA2B9sI,GAClC,OAAOkhI,EAAIlhI,EACb,CAYA,SAAS+sI,EAAgB/sI,GACvB,OAAa,KAATA,GAAwB,KAATA,GAAwB,KAATA,EACzBknI,GACL39F,EACAyjG,EACA9L,EACA,gBACA,sBACA,sBANKgG,CAOLlnI,GAEG4sI,EAAY5sI,EACrB,CAYA,SAASgtI,EAAmBhtI,GAC1B,OAAOw+H,GAA0Bx+H,GAC7BmnI,GAAkB59F,EAASqjG,EAA3BzF,CAAwCnnI,GACxC4sI,EAAY5sI,EAClB,CAYA,SAAS4sI,EAAY5sI,GACnB,OAAa,KAATA,GACFupC,EAAQw1F,MAAM,kBACdx1F,EAAQy1F,QAAQh/H,GAChBupC,EAAQ01F,KAAK,kBACb11F,EAAQ01F,KAAK,YACNrjF,GAEFslF,EAAIlhI,EACb,CACF,GAndMqsI,GAAyB,CAC7BnN,SAwdF,SAA+B31F,EAASqS,EAAIslF,GAC1C,IAAM5+H,EAAO9E,KACb,OAYA,SAAuBwC,GACrB,OAAO8mI,GAAa5sI,KAClBoI,EACAinC,EACA0jG,EACAC,EACA,YACA,kBACA,kBAPKpG,CAQL9mI,EACJ,EAYA,SAASitI,EAAmBjtI,GAC1B,OAAOsC,EAAK06H,OAAOxnB,QAAQ9+F,SACzB0wH,GACE9kI,EAAKu/H,eAAev/H,EAAKw5H,OAAOx5H,EAAKw5H,OAAOlgI,OAAS,GAAG,IAAI4C,MAAM,GAAI,KAGtEo9C,EAAG57C,GACHkhI,EAAIlhI,EACV,CAYA,SAASktI,EAAqBltI,GAC5B,OAAOkhI,EAAIlhI,EACb,CACF,GAhhBMusI,GAA8B,CAClCrN,SAqhBF,SAAoC31F,EAASqS,EAAIslF,GAC/C,OAcA,SAAiClhI,GAO/B,OAJAupC,EAAQw1F,MAAM,aACdx1F,EAAQw1F,MAAM,mBACdx1F,EAAQy1F,QAAQh/H,GAChBupC,EAAQ01F,KAAK,mBACNkO,CACT,EAcA,SAASA,EAAuBntI,GAC9B,OAAa,KAATA,GACFupC,EAAQw1F,MAAM,mBACdx1F,EAAQy1F,QAAQh/H,GAChBupC,EAAQ01F,KAAK,mBACb11F,EAAQ01F,KAAK,aACNrjF,GAEFslF,EAAIlhI,EACb,CACF,GC9lBO,IAAMotI,GAAkB,CAC7BxyI,KAAM,kBACNskI,SAQF,SAAiC31F,EAASqS,EAAIslF,GAC5C,IAAM5+H,EAAO9E,KACb,OAYA,SAAewC,GAKb,OAJAupC,EAAQw1F,MAAM,cACdx1F,EAAQw1F,MAAM,oBACdx1F,EAAQy1F,QAAQh/H,GAChBupC,EAAQ01F,KAAK,oBACNh5H,CACT,EAYA,SAASA,EAAKjG,GACZ,OAAa,KAATA,GACFupC,EAAQw1F,MAAM,eACdx1F,EAAQy1F,QAAQh/H,GAChBupC,EAAQ01F,KAAK,eACb11F,EAAQ01F,KAAK,cACNqC,GAEFJ,EAAIlhI,EACb,CA6BA,SAASshI,EAAMthI,GAMb,OAAgB,KAATA,GAAe,2BAA4BsC,EAAK06H,OAAOY,WAC1DsD,EAAIlhI,GACJ47C,EAAG57C,EACT,CACF,EAvFEiiI,WAAY6J,GAAS7J,YCUhB,SAASoL,GAAkBrtI,GAChC,OACW,OAATA,GACAw+H,GAA0Bx+H,IAC1B0+H,GAAkB1+H,GAEX,E/B4KJ,SAA4BA,GACjC,OAAOs+H,GAAiBt+H,IAAS89H,GAA2B99H,EAC9D,C+B5KMstI,CAAmBttI,GACd,OADT,CAGF,CClBO,IAAMutI,GAAY,CACvB3yI,KAAM,YACNskI,SA6KF,SAA2B31F,EAASqS,GAClC,IAKIhqC,EALE47H,EAAmBhwI,KAAKw/H,OAAOY,WAAW4P,iBAAiBpM,KAC3DxE,EAAWp/H,KAAKo/H,SAChBiB,EAASwP,GAAkBzQ,GAIjC,OAYA,SAAe58H,GAGb,OAFA4R,EAAS5R,EACTupC,EAAQw1F,MAAM,qBACPyG,EAAOxlI,EAChB,EAYA,SAASwlI,EAAOxlI,GACd,GAAIA,IAAS4R,EAEX,OADA23B,EAAQy1F,QAAQh/H,GACTwlI,EAET,IAAM9+B,EAAQn9D,EAAQ01F,KAAK,qBAGrBqC,EAAQ+L,GAAkBrtI,GAI1BiG,GACHq7H,GAAoB,IAAVA,GAAezD,GAAW2P,EAAiB92H,SAAS1W,GAC3DuK,GACHszH,GAAsB,IAAXA,GAAgByD,GAAUkM,EAAiB92H,SAASkmH,GAGlE,OAFAl2B,EAAM+mC,MAAQtqE,QAAmB,KAAXvxD,EAAgB3L,EAAOA,IAAS43H,IAAWtzH,IACjEm8F,EAAMgnC,OAASvqE,QAAmB,KAAXvxD,EAAgBrH,EAAQA,IAAU+2H,IAAUr7H,IAC5D21C,EAAG57C,EACZ,CACF,EAnOEiiI,WASF,SAA6BnG,EAAQvzF,GACnC,IAEItiC,EAEAumI,EAEAnyG,EAEAszG,EAEAC,EAEAC,EAEAC,EAEAzxG,EAhBAoQ,GAAS,EAsBb,OAASA,EAAQqvF,EAAOlgI,QAEtB,GACuB,UAArBkgI,EAAOrvF,GAAO,IACY,sBAA1BqvF,EAAOrvF,GAAO,GAAG1tC,MACjB+8H,EAAOrvF,GAAO,GAAGihG,OAKjB,IAHAznI,EAAOwmC,EAGAxmC,KAEL,GACsB,SAApB61H,EAAO71H,GAAM,IACY,sBAAzB61H,EAAO71H,GAAM,GAAGlH,MAChB+8H,EAAO71H,GAAM,GAAGwnI,OAEhBllG,EAAQs5F,eAAe/F,EAAO71H,GAAM,IAAI0C,WAAW,KACjD4/B,EAAQs5F,eAAe/F,EAAOrvF,GAAO,IAAI9jC,WAAW,GACtD,CAKA,IACGmzH,EAAO71H,GAAM,GAAGynI,QAAU5R,EAAOrvF,GAAO,GAAGghG,SAC3C3R,EAAOrvF,GAAO,GAAGhvC,IAAI4+B,OAASy/F,EAAOrvF,GAAO,GAAGtvC,MAAMk/B,QAAU,MAE7Dy/F,EAAO71H,GAAM,GAAGxI,IAAI4+B,OACnBy/F,EAAO71H,GAAM,GAAG9I,MAAMk/B,OACtBy/F,EAAOrvF,GAAO,GAAGhvC,IAAI4+B,OACrBy/F,EAAOrvF,GAAO,GAAGtvC,MAAMk/B,QACzB,GAGF,SAIFwxG,EACE/R,EAAO71H,GAAM,GAAGxI,IAAI4+B,OAASy/F,EAAO71H,GAAM,GAAG9I,MAAMk/B,OAAS,GAC5Dy/F,EAAOrvF,GAAO,GAAGhvC,IAAI4+B,OAASy/F,EAAOrvF,GAAO,GAAGtvC,MAAMk/B,OAAS,EAC1D,EACA,EACN,IAAMl/B,EAAQ5D,OAAO8mB,OAAO,CAAC,EAAGy7G,EAAO71H,GAAM,GAAGxI,KAC1CA,EAAMlE,OAAO8mB,OAAO,CAAC,EAAGy7G,EAAOrvF,GAAO,GAAGtvC,OAC/C4wI,GAAU5wI,GAAQ0wI,GAClBE,GAAUtwI,EAAKowI,GACfF,EAAkB,CAChB5uI,KAAM8uI,EAAM,EAAI,iBAAmB,mBACnC1wI,MAAAA,EACAM,IAAKlE,OAAO8mB,OAAO,CAAC,EAAGy7G,EAAO71H,GAAM,GAAGxI,MAEzCmwI,EAAkB,CAChB7uI,KAAM8uI,EAAM,EAAI,iBAAmB,mBACnC1wI,MAAO5D,OAAO8mB,OAAO,CAAC,EAAGy7G,EAAOrvF,GAAO,GAAGtvC,OAC1CM,IAAAA,GAEF48B,EAAO,CACLt7B,KAAM8uI,EAAM,EAAI,aAAe,eAC/B1wI,MAAO5D,OAAO8mB,OAAO,CAAC,EAAGy7G,EAAO71H,GAAM,GAAGxI,KACzCA,IAAKlE,OAAO8mB,OAAO,CAAC,EAAGy7G,EAAOrvF,GAAO,GAAGtvC,QAE1CqvI,EAAQ,CACNztI,KAAM8uI,EAAM,EAAI,SAAW,WAC3B1wI,MAAO5D,OAAO8mB,OAAO,CAAC,EAAGstH,EAAgBxwI,OACzCM,IAAKlE,OAAO8mB,OAAO,CAAC,EAAGutH,EAAgBnwI,MAEzCq+H,EAAO71H,GAAM,GAAGxI,IAAMlE,OAAO8mB,OAAO,CAAC,EAAGstH,EAAgBxwI,OACxD2+H,EAAOrvF,GAAO,GAAGtvC,MAAQ5D,OAAO8mB,OAAO,CAAC,EAAGutH,EAAgBnwI,KAC3DqwI,EAAa,GAGThS,EAAO71H,GAAM,GAAGxI,IAAI4+B,OAASy/F,EAAO71H,GAAM,GAAG9I,MAAMk/B,SACrDyxG,EAAa1vI,GAAK0vI,EAAY,CAC5B,CAAC,QAAShS,EAAO71H,GAAM,GAAIsiC,GAC3B,CAAC,OAAQuzF,EAAO71H,GAAM,GAAIsiC,MAK9BulG,EAAa1vI,GAAK0vI,EAAY,CAC5B,CAAC,QAAStB,EAAOjkG,GACjB,CAAC,QAASolG,EAAiBplG,GAC3B,CAAC,OAAQolG,EAAiBplG,GAC1B,CAAC,QAASlO,EAAMkO,KAMlBulG,EAAa1vI,GACX0vI,EACA7L,GACE15F,EAAQy0F,OAAOY,WAAW6O,WAAWrL,KACrCtF,EAAOt9H,MAAMyH,EAAO,EAAGwmC,GACvBlE,IAKJulG,EAAa1vI,GAAK0vI,EAAY,CAC5B,CAAC,OAAQzzG,EAAMkO,GACf,CAAC,QAASqlG,EAAiBrlG,GAC3B,CAAC,OAAQqlG,EAAiBrlG,GAC1B,CAAC,OAAQikG,EAAOjkG,KAIduzF,EAAOrvF,GAAO,GAAGhvC,IAAI4+B,OAASy/F,EAAOrvF,GAAO,GAAGtvC,MAAMk/B,QACvDA,EAAS,EACTyxG,EAAa1vI,GAAK0vI,EAAY,CAC5B,CAAC,QAAShS,EAAOrvF,GAAO,GAAIlE,GAC5B,CAAC,OAAQuzF,EAAOrvF,GAAO,GAAIlE,MAG7BlM,EAAS,EAEX2kB,GAAO86E,EAAQ71H,EAAO,EAAGwmC,EAAQxmC,EAAO,EAAG6nI,GAC3CrhG,EAAQxmC,EAAO6nI,EAAWlyI,OAASygC,EAAS,EAC5C,KACF,CAMNoQ,GAAS,EACT,OAASA,EAAQqvF,EAAOlgI,QACQ,sBAA1BkgI,EAAOrvF,GAAO,GAAG1tC,OACnB+8H,EAAOrvF,GAAO,GAAG1tC,KAAO,QAG5B,OAAO+8H,CACT,GAyEA,SAASiS,GAAU7W,EAAO76F,GACxB66F,EAAMr6H,QAAUw/B,EAChB66F,EAAM76F,QAAUA,EAChB66F,EAAM4L,cAAgBzmG,CACxB,CCxPO,IAAM2xG,GAAW,CACtBpzI,KAAM,WACNskI,SAOF,SAA0B31F,EAASqS,EAAIslF,GACrC,IAAI9tH,EAAO,EACX,OAcA,SAAepT,GAMb,OALAupC,EAAQw1F,MAAM,YACdx1F,EAAQw1F,MAAM,kBACdx1F,EAAQy1F,QAAQh/H,GAChBupC,EAAQ01F,KAAK,kBACb11F,EAAQw1F,MAAM,oBACP94H,CACT,EAcA,SAASA,EAAKjG,GACZ,OAAIg+H,GAAWh+H,IACbupC,EAAQy1F,QAAQh/H,GACTiuI,GAEFC,EAAWluI,EACpB,CAcA,SAASiuI,EAAmBjuI,GAE1B,OAAa,KAATA,GAAwB,KAATA,GAAwB,KAATA,GAAei+H,GAAkBj+H,IAEjEoT,EAAO,EACA+6H,EAAyBnuI,IAE3BkuI,EAAWluI,EACpB,CAcA,SAASmuI,EAAyBnuI,GAChC,OAAa,KAATA,GACFupC,EAAQy1F,QAAQh/H,GAChBoT,EAAO,EACAg7H,IAKG,KAATpuI,GAAwB,KAATA,GAAwB,KAATA,GAAei+H,GAAkBj+H,KAChEoT,IAAS,IAETm2B,EAAQy1F,QAAQh/H,GACTmuI,IAET/6H,EAAO,EACA86H,EAAWluI,GACpB,CAYA,SAASouI,EAAUpuI,GACjB,OAAa,KAATA,GACFupC,EAAQ01F,KAAK,oBACb11F,EAAQw1F,MAAM,kBACdx1F,EAAQy1F,QAAQh/H,GAChBupC,EAAQ01F,KAAK,kBACb11F,EAAQ01F,KAAK,YACNrjF,GAII,OAAT57C,GAA0B,KAATA,GAAwB,KAATA,GAAem+H,GAAan+H,GACvDkhI,EAAIlhI,IAEbupC,EAAQy1F,QAAQh/H,GACTouI,EACT,CAYA,SAASF,EAAWluI,GAClB,OAAa,KAATA,GACFupC,EAAQy1F,QAAQh/H,GACTquI,GAELnQ,GAAWl+H,IACbupC,EAAQy1F,QAAQh/H,GACTkuI,GAEFhN,EAAIlhI,EACb,CAYA,SAASquI,EAAiBruI,GACxB,OAAOi+H,GAAkBj+H,GAAQsuI,EAAWtuI,GAAQkhI,EAAIlhI,EAC1D,CAYA,SAASsuI,EAAWtuI,GAClB,OAAa,KAATA,GACFupC,EAAQy1F,QAAQh/H,GAChBoT,EAAO,EACAi7H,GAEI,KAATruI,GAEFupC,EAAQ01F,KAAK,oBAAoBlgI,KAAO,gBACxCwqC,EAAQw1F,MAAM,kBACdx1F,EAAQy1F,QAAQh/H,GAChBupC,EAAQ01F,KAAK,kBACb11F,EAAQ01F,KAAK,YACNrjF,GAEF2yF,EAAWvuI,EACpB,CAcA,SAASuuI,EAAWvuI,GAElB,IAAc,KAATA,GAAei+H,GAAkBj+H,KAAUoT,IAAS,GAAI,CAC3D,IAAMq1B,EAAgB,KAATzoC,EAAcuuI,EAAaD,EAExC,OADA/kG,EAAQy1F,QAAQh/H,GACTyoC,CACT,CACA,OAAOy4F,EAAIlhI,EACb,CACF,GCzNO,IAAMwuI,GAAW,CACtB5zI,KAAM,WACNskI,SAOF,SAA0B31F,EAASqS,EAAIslF,GACrC,IAEItvH,EAEA66B,EAEA63F,EANEhiI,EAAO9E,KAOb,OAYA,SAAewC,GAIb,OAHAupC,EAAQw1F,MAAM,YACdx1F,EAAQw1F,MAAM,gBACdx1F,EAAQy1F,QAAQh/H,GACTiG,CACT,EAgBA,SAASA,EAAKjG,GACZ,OAAa,KAATA,GACFupC,EAAQy1F,QAAQh/H,GACT6oI,GAEI,KAAT7oI,GACFupC,EAAQy1F,QAAQh/H,GACT8oI,GAEI,KAAT9oI,GACFupC,EAAQy1F,QAAQh/H,GACTyuI,GAILzQ,GAAWh+H,IACbupC,EAAQy1F,QAAQh/H,GACT0uI,GAEFxN,EAAIlhI,EACb,CAgBA,SAAS6oI,EAAgB7oI,GACvB,OAAa,KAATA,GACFupC,EAAQy1F,QAAQh/H,GACTgpI,GAEI,KAAThpI,GACFupC,EAAQy1F,QAAQh/H,GAChBysC,EAAQ,EACDw8F,GAELjL,GAAWh+H,IACbupC,EAAQy1F,QAAQh/H,GACThB,GAEFkiI,EAAIlhI,EACb,CAYA,SAASgpI,EAAkBhpI,GACzB,OAAa,KAATA,GACFupC,EAAQy1F,QAAQh/H,GACT2uI,GAEFzN,EAAIlhI,EACb,CAYA,SAASpB,EAAQoB,GACf,OAAa,OAATA,EACKkhI,EAAIlhI,GAEA,KAATA,GACFupC,EAAQy1F,QAAQh/H,GACT4uI,GAELrQ,GAAmBv+H,IACrBskI,EAAc1lI,EACPiwI,EAAiB7uI,KAE1BupC,EAAQy1F,QAAQh/H,GACTpB,EACT,CAYA,SAASgwI,EAAa5uI,GACpB,OAAa,KAATA,GACFupC,EAAQy1F,QAAQh/H,GACT2uI,GAEF/vI,EAAQoB,EACjB,CAYA,SAAS2uI,EAAW3uI,GAClB,OAAgB,KAATA,EACHvC,EAAIuC,GACK,KAATA,EACA4uI,EAAa5uI,GACbpB,EAAQoB,EACd,CAYA,SAASipI,EAAgBjpI,GACvB,IAAMjF,EAAQ,SACd,OAAIiF,IAASjF,EAAM4N,WAAW8jC,MAC5BlD,EAAQy1F,QAAQh/H,GACCjF,IAAV0xC,EAAyBqiG,EAAQ7F,GAEnC/H,EAAIlhI,EACb,CAYA,SAAS8uI,EAAM9uI,GACb,OAAa,OAATA,EACKkhI,EAAIlhI,GAEA,KAATA,GACFupC,EAAQy1F,QAAQh/H,GACT+uI,GAELxQ,GAAmBv+H,IACrBskI,EAAcwK,EACPD,EAAiB7uI,KAE1BupC,EAAQy1F,QAAQh/H,GACT8uI,EACT,CAYA,SAASC,EAAW/uI,GAClB,OAAa,KAATA,GACFupC,EAAQy1F,QAAQh/H,GACTgvI,GAEFF,EAAM9uI,EACf,CAYA,SAASgvI,EAAShvI,GAChB,OAAa,KAATA,EACKvC,EAAIuC,GAEA,KAATA,GACFupC,EAAQy1F,QAAQh/H,GACTgvI,GAEFF,EAAM9uI,EACf,CAYA,SAAShB,EAAYgB,GACnB,OAAa,OAATA,GAA0B,KAATA,EACZvC,EAAIuC,GAETu+H,GAAmBv+H,IACrBskI,EAActlI,EACP6vI,EAAiB7uI,KAE1BupC,EAAQy1F,QAAQh/H,GACThB,EACT,CAYA,SAASyvI,EAAYzuI,GACnB,OAAa,OAATA,EACKkhI,EAAIlhI,GAEA,KAATA,GACFupC,EAAQy1F,QAAQh/H,GACTivI,GAEL1Q,GAAmBv+H,IACrBskI,EAAcmK,EACPI,EAAiB7uI,KAE1BupC,EAAQy1F,QAAQh/H,GACTyuI,EACT,CAYA,SAASQ,EAAiBjvI,GACxB,OAAgB,KAATA,EAAcvC,EAAIuC,GAAQyuI,EAAYzuI,EAC/C,CAYA,SAAS8oI,EAAc9oI,GAErB,OAAIg+H,GAAWh+H,IACbupC,EAAQy1F,QAAQh/H,GACTkvI,GAEFhO,EAAIlhI,EACb,CAYA,SAASkvI,EAASlvI,GAEhB,OAAa,KAATA,GAAei+H,GAAkBj+H,IACnCupC,EAAQy1F,QAAQh/H,GACTkvI,GAEFC,EAAgBnvI,EACzB,CAYA,SAASmvI,EAAgBnvI,GACvB,OAAIu+H,GAAmBv+H,IACrBskI,EAAc6K,EACPN,EAAiB7uI,IAEtBy+H,GAAcz+H,IAChBupC,EAAQy1F,QAAQh/H,GACTmvI,GAEF1xI,EAAIuC,EACb,CAYA,SAAS0uI,EAAQ1uI,GAEf,OAAa,KAATA,GAAei+H,GAAkBj+H,IACnCupC,EAAQy1F,QAAQh/H,GACT0uI,GAEI,KAAT1uI,GAAwB,KAATA,GAAew+H,GAA0Bx+H,GACnDovI,EAAepvI,GAEjBkhI,EAAIlhI,EACb,CAYA,SAASovI,EAAepvI,GACtB,OAAa,KAATA,GACFupC,EAAQy1F,QAAQh/H,GACTvC,GAII,KAATuC,GAAwB,KAATA,GAAeg+H,GAAWh+H,IAC3CupC,EAAQy1F,QAAQh/H,GACTqvI,GAEL9Q,GAAmBv+H,IACrBskI,EAAc8K,EACPP,EAAiB7uI,IAEtBy+H,GAAcz+H,IAChBupC,EAAQy1F,QAAQh/H,GACTovI,GAEF3xI,EAAIuC,EACb,CAYA,SAASqvI,EAAqBrvI,GAE5B,OACW,KAATA,GACS,KAATA,GACS,KAATA,GACS,KAATA,GACAi+H,GAAkBj+H,IAElBupC,EAAQy1F,QAAQh/H,GACTqvI,GAEFC,EAA0BtvI,EACnC,CAaA,SAASsvI,EAA0BtvI,GACjC,OAAa,KAATA,GACFupC,EAAQy1F,QAAQh/H,GACTuvI,GAELhR,GAAmBv+H,IACrBskI,EAAcgL,EACPT,EAAiB7uI,IAEtBy+H,GAAcz+H,IAChBupC,EAAQy1F,QAAQh/H,GACTsvI,GAEFF,EAAepvI,EACxB,CAaA,SAASuvI,EAA4BvvI,GACnC,OACW,OAATA,GACS,KAATA,GACS,KAATA,GACS,KAATA,GACS,KAATA,EAEOkhI,EAAIlhI,GAEA,KAATA,GAAwB,KAATA,GACjBupC,EAAQy1F,QAAQh/H,GAChB4R,EAAS5R,EACFwvI,GAELjR,GAAmBv+H,IACrBskI,EAAciL,EACPV,EAAiB7uI,IAEtBy+H,GAAcz+H,IAChBupC,EAAQy1F,QAAQh/H,GACTuvI,IAEThmG,EAAQy1F,QAAQh/H,GACTyvI,EACT,CAYA,SAASD,EAA4BxvI,GACnC,OAAIA,IAAS4R,GACX23B,EAAQy1F,QAAQh/H,GAChB4R,OAASzE,EACFuiI,GAEI,OAAT1vI,EACKkhI,EAAIlhI,GAETu+H,GAAmBv+H,IACrBskI,EAAckL,EACPX,EAAiB7uI,KAE1BupC,EAAQy1F,QAAQh/H,GACTwvI,EACT,CAYA,SAASC,EAA8BzvI,GACrC,OACW,OAATA,GACS,KAATA,GACS,KAATA,GACS,KAATA,GACS,KAATA,GACS,KAATA,EAEOkhI,EAAIlhI,GAEA,KAATA,GAAwB,KAATA,GAAew+H,GAA0Bx+H,GACnDovI,EAAepvI,IAExBupC,EAAQy1F,QAAQh/H,GACTyvI,EACT,CAaA,SAASC,EAAiC1vI,GACxC,OAAa,KAATA,GAAwB,KAATA,GAAew+H,GAA0Bx+H,GACnDovI,EAAepvI,GAEjBkhI,EAAIlhI,EACb,CAYA,SAASvC,EAAIuC,GACX,OAAa,KAATA,GACFupC,EAAQy1F,QAAQh/H,GAChBupC,EAAQ01F,KAAK,gBACb11F,EAAQ01F,KAAK,YACNrjF,GAEFslF,EAAIlhI,EACb,CAgBA,SAAS6uI,EAAiB7uI,GAKxB,OAJAupC,EAAQ01F,KAAK,gBACb11F,EAAQw1F,MAAM,cACdx1F,EAAQy1F,QAAQh/H,GAChBupC,EAAQ01F,KAAK,cACN0Q,CACT,CAgBA,SAASA,EAAgB3vI,GAGvB,OAAOy+H,GAAcz+H,GACjB4+H,GACEr1F,EACAqmG,EACA,aACAttI,EAAK06H,OAAOY,WAAWuD,QAAQC,KAAK1qH,SAAS,qBACzCvJ,EACA,EANNyxH,CAOE5+H,GACF4vI,EAAsB5vI,EAC5B,CAgBA,SAAS4vI,EAAsB5vI,GAE7B,OADAupC,EAAQw1F,MAAM,gBACPuF,EAAYtkI,EACrB,CACF,GC9rBO,IAAM6vI,GAAiB,CAC5Bj1I,KAAM,iBACNskI,SAQF,SAAgC31F,EAASqS,EAAIslF,GAC3C,IAAM5+H,EAAO9E,KACb,OAYA,SAAewC,GAMb,OALAupC,EAAQw1F,MAAM,aACdx1F,EAAQw1F,MAAM,eACdx1F,EAAQy1F,QAAQh/H,GAChBupC,EAAQ01F,KAAK,eACb11F,EAAQ01F,KAAK,aACNqC,CACT,EAGA,SAASA,EAAMthI,GAKb,OAAgB,KAATA,GAAe,2BAA4BsC,EAAK06H,OAAOY,WAC1DsD,EAAIlhI,GACJ47C,EAAG57C,EACT,CACF,EAxCEiiI,WAAY6J,GAAS7J,YCJhB,IAAM6N,GAAkB,CAC7Bl1I,KAAM,kBACNskI,SAOF,SAAiC31F,EAASqS,EAAIslF,GAC5C,OAaA,SAAelhI,GAGb,OAFAupC,EAAQw1F,MAAM,mBACdx1F,EAAQy1F,QAAQh/H,GACTshI,CACT,EAaA,SAASA,EAAMthI,GACb,OAAIu+H,GAAmBv+H,IACrBupC,EAAQ01F,KAAK,mBACNrjF,EAAG57C,IAELkhI,EAAIlhI,EACb,CACF,GC5CO,mBAAM+vI,GAAW,CACtBn1I,KAAM,WACNskI,SA8EF,SAA0B31F,EAASqS,EAAIslF,GACrC,IAGI9tH,EAEAszF,EAJAqkC,EAAW,EAKf,OAcA,SAAe/qI,GAGb,OAFAupC,EAAQw1F,MAAM,YACdx1F,EAAQw1F,MAAM,oBACPoJ,EAAanoI,EACtB,EAYA,SAASmoI,EAAanoI,GACpB,OAAa,KAATA,GACFupC,EAAQy1F,QAAQh/H,GAChB+qI,IACO5C,IAET5+F,EAAQ01F,KAAK,oBACN+Q,EAAQhwI,GACjB,CAYA,SAASgwI,EAAQhwI,GAEf,OAAa,OAATA,EACKkhI,EAAIlhI,GAMA,KAATA,GACFupC,EAAQw1F,MAAM,SACdx1F,EAAQy1F,QAAQh/H,GAChBupC,EAAQ01F,KAAK,SACN+Q,GAII,KAAThwI,GACF0mG,EAAQn9D,EAAQw1F,MAAM,oBACtB3rH,EAAO,EACA03H,EAAc9qI,IAEnBu+H,GAAmBv+H,IACrBupC,EAAQw1F,MAAM,cACdx1F,EAAQy1F,QAAQh/H,GAChBupC,EAAQ01F,KAAK,cACN+Q,IAITzmG,EAAQw1F,MAAM,gBACP99H,EAAKjB,GACd,CAYA,SAASiB,EAAKjB,GACZ,OACW,OAATA,GACS,KAATA,GACS,KAATA,GACAu+H,GAAmBv+H,IAEnBupC,EAAQ01F,KAAK,gBACN+Q,EAAQhwI,KAEjBupC,EAAQy1F,QAAQh/H,GACTiB,EACT,CAYA,SAAS6pI,EAAc9qI,GAErB,OAAa,KAATA,GACFupC,EAAQy1F,QAAQh/H,GAChBoT,IACO03H,GAIL13H,IAAS23H,GACXxhG,EAAQ01F,KAAK,oBACb11F,EAAQ01F,KAAK,YACNrjF,EAAG57C,KAIZ0mG,EAAM3nG,KAAO,eACNkC,EAAKjB,GACd,CACF,EA7NE8D,QAMF,SAAyBg4H,GACvB,IAGIrvF,EAEAsyF,EALAkR,EAAgBnU,EAAOlgI,OAAS,EAChCs0I,EAAiB,EAOrB,IACsC,eAAnCpU,EAAOoU,GAAgB,GAAGnxI,MACU,UAAnC+8H,EAAOoU,GAAgB,GAAGnxI,QACO,eAAlC+8H,EAAOmU,GAAe,GAAGlxI,MACU,UAAlC+8H,EAAOmU,GAAe,GAAGlxI,MAK3B,IAHA0tC,EAAQyjG,IAGCzjG,EAAQwjG,GACf,GAA8B,iBAA1BnU,EAAOrvF,GAAO,GAAG1tC,KAAyB,CAE5C+8H,EAAOoU,GAAgB,GAAGnxI,KAAO,kBACjC+8H,EAAOmU,GAAe,GAAGlxI,KAAO,kBAChCmxI,GAAkB,EAClBD,GAAiB,EACjB,KACF,CAKJxjG,EAAQyjG,EAAiB,EACzBD,IACA,OAASxjG,GAASwjG,QACF9iI,IAAV4xH,EACEtyF,IAAUwjG,GAA2C,eAA1BnU,EAAOrvF,GAAO,GAAG1tC,OAC9CggI,EAAQtyF,GAGVA,IAAUwjG,GACgB,eAA1BnU,EAAOrvF,GAAO,GAAG1tC,OAEjB+8H,EAAOiD,GAAO,GAAGhgI,KAAO,eACpB0tC,IAAUsyF,EAAQ,IACpBjD,EAAOiD,GAAO,GAAGthI,IAAMq+H,EAAOrvF,EAAQ,GAAG,GAAGhvC,IAC5Cq+H,EAAO96E,OAAO+9E,EAAQ,EAAGtyF,EAAQsyF,EAAQ,GACzCkR,GAAiBxjG,EAAQsyF,EAAQ,EACjCtyF,EAAQsyF,EAAQ,GAElBA,OAAQ5xH,GAGZ,OAAO2uH,CACT,EA1DEc,SAgEF,SAAkB58H,GAEhB,OACW,KAATA,GACgD,oBAAhDxC,KAAKs+H,OAAOt+H,KAAKs+H,OAAOlgI,OAAS,GAAG,GAAGmD,IAE3C,GCzDO,IAAM8B,IAAQsjE,EAAAgsE,GAAG,CAAC,EACtB,GAAKn0E,IAAImI,EAAAgsE,GACT,GAAKn0E,IAAImI,EAAAgsE,GACT,GAAKn0E,IAAImI,EAAAgsE,GACT,GAAKn0E,IAAImI,EAAAgsE,GACT,GAAKn0E,IAAImI,EAAAgsE,GACT,GAAKn0E,IAAImI,EAAAgsE,GACT,GAAKn0E,IAAImI,EAAAgsE,GACT,GAAKn0E,IAAImI,EAAAgsE,GACT,GAAKn0E,IAAImI,EAAAgsE,GACT,GAAKn0E,IAAImI,EAAAgsE,GACT,GAAKn0E,IAAImI,EAAAgsE,GACT,GAAKn0E,IAAImI,EAAAgsE,GACT,GAAKn0E,IAAImI,EAAAgsE,GACT,GAAKjK,IAAUiK,IAIL9Q,GAAcl7D,EAAA,GACxB,GAAKzP,IAIKqtE,IAAW59D,EAAAisE,GAAG,CAAC,GACxB,EAAIrI,IAAY5jE,EAAAisE,IAChB,EAAIrI,IAAY5jE,EAAAisE,GACjB,GAAKrI,IAAYqI,IAIPtP,IAAI38D,EAAAksE,GAAG,CAAC,EAClB,GAAKnI,IAAU/jE,EAAAksE,GACf,GAAKjL,IAAajhE,EAAAksE,GAClB,GAAK,CAAChI,GAAiBjD,KAAcjhE,EAAAksE,GACrC,GAAK3H,IAAQvkE,EAAAksE,GACb,GAAKhI,IAAelkE,EAAAksE,GACpB,GAAKjL,IAAajhE,EAAAksE,GAClB,GAAK3F,IAAUvmE,EAAAksE,GACf,IAAM3F,IAAU2F,IAIN10H,IAAMwoD,EAAAmsE,GAAG,CAAC,EACpB,GAAK5E,IAAkBvnE,EAAAmsE,GACvB,GAAK1E,IAAe0E,IAIVj2G,IAAI8pC,EAAAosE,GAAG,CAAC,GACjB,EAAI1E,IAAU1nE,EAAAosE,IACd,EAAI1E,IAAU1nE,EAAAosE,IACd,EAAI1E,IAAU1nE,EAAAosE,GACf,GAAKnD,IAAejpE,EAAAosE,GACpB,GAAK7E,IAAkBvnE,EAAAosE,GACvB,GAAKhD,IAASppE,EAAAosE,GACd,GAAK,CAACvC,GAAUQ,KAASrqE,EAAAosE,GACzB,GAAKV,IAAc1rE,EAAAosE,GACnB,GAAK,CAACT,GAAiBlE,KAAgBznE,EAAAosE,GACvC,GAAKzE,IAAQ3nE,EAAAosE,GACb,GAAKhD,IAASppE,EAAAosE,GACd,GAAKR,IAAQQ,IAIH9D,GAAa,CACxBrL,KAAM,CAACmM,GAAWiD,KAIPhD,GAAmB,CAC9BpM,KAAM,CAAC,GAAI,KAIAD,GAAU,CACrBC,KAAM,ICpFD,SAASjvH,GAAMxX,GACpB,IACMijI,ExCHD,SAA2B6S,GAKhC,IAHA,IAAM/rI,EAAM,CAAC,EACT+nC,GAAS,IAEJA,EAAQgkG,EAAW70I,QAC1B6hI,GAAgB/4H,EAAK+rI,EAAWhkG,IAGlC,OAAO/nC,CACT,CwCLIgsI,CAAkB,CAACC,GAAiBp5H,OAAAgrD,GAHrB5nE,GAAW,CAAC,GAGwB81I,YAAc,MAG7DzT,EAAS,CACbxnB,QAAS,GACTr/C,KAAM,CAAC,EACPynE,WAAAA,EACAjgI,QAASszC,EAAOtzC,IAChBkD,SAAUowC,EAAOpwC,IACjBigI,KAAM7vF,EAAO6vF,IACbnlH,OAAQs1B,EAAOt1B,IACf0e,KAAM4W,EAAO5W,KAEf,OAAO2iG,EAKP,SAAS/rF,EAAO6wF,GACd,OAEA,SAAiBj6E,GACf,OAAOk7E,GAAgB/F,EAAQ8E,EAASj6E,EAC1C,CACF,CACF,CClCA,IAAM1tB,GAAS,cCDR,SAASy2G,GAAgC71I,EAAOgtB,GACrD,IAAM/nB,EAAO8lD,OAAOt8C,SAASzO,EAAOgtB,GACpC,OAEE/nB,EAAO,GACE,KAATA,GACCA,EAAO,IAAMA,EAAO,IAEpBA,EAAO,KAAOA,EAAO,KAErBA,EAAO,OAAUA,EAAO,OAExBA,EAAO,OAAUA,EAAO,OACL,SAAZ,MAAPA,IACmB,SAAZ,MAAPA,IAEDA,EAAO,QAEA,SAEF+H,OAAOovB,aAAan3B,EAC7B,CCjCA,IAAM6wI,GACJ,oEAwBF,SAASC,GAAOha,EAAIyE,EAAIwV,GACtB,GAAIxV,EAEF,OAAOA,EAKT,GAAa,KADAwV,EAAGpoI,WAAW,GACV,CACf,IAAM87D,EAAOssE,EAAGpoI,WAAW,GACrBqoI,EAAe,MAATvsE,GAAyB,KAATA,EAC5B,OAAOmsE,GAAgCG,EAAGvyI,MAAMwyI,EAAM,EAAI,GAAIA,EAAM,GAAK,GAC3E,CACA,OAAOvF,GAA8BsF,IAAOja,CAC9C,CCqGA,IAAM7gB,GAAM,CAAC,EAAEx8G,eAyBR,SAASw3I,GAAal2I,EAAOm2I,EAAUv2I,GAK5C,MAJwB,kBAAbu2I,IACTv2I,EAAUu2I,EACVA,OAAW/jI,GAcf,SAAkBxS,GAEhB,IAAMoU,EAAS,CACboiI,WAAY,GACZC,eAAgB,CAAC,WAAY,WAAY,UAAW,YAAa,UACjErS,MAAO,CACLiP,SAAUqD,EAAO9oH,IACjB+oH,iBAAkBC,EAClBC,cAAeD,EACfE,WAAYJ,EAAO9I,GACnBrC,WAAYmL,EAAOnL,GACnB0F,gBAAiB2F,EACjB7F,mBAAoB6F,EACpB7G,WAAY2G,EAAOK,GACnBC,oBAAqBtgI,EACrBugI,oBAAqBvgI,EACrB02H,aAAcsJ,EAAOK,EAAUrgI,GAC/B0+H,SAAUsB,EAAOtB,EAAU1+H,GAC3BwgI,aAAcN,EACdtwI,KAAMswI,EACNO,cAAeP,EACf78E,WAAY28E,EAAO38E,GACnBq9E,4BAA6B1gI,EAC7B2gI,sBAAuB3gI,EACvB4gI,sBAAuB5gI,EACvB6gI,SAAUb,EAAOa,GACjBpC,gBAAiBuB,EAAOc,GACxBC,kBAAmBf,EAAOc,GAC1BzJ,SAAU2I,EAAOj3B,EAAM/oG,GACvBghI,aAAcd,EACd/C,SAAU6C,EAAOj3B,EAAM/oG,GACvBihI,aAAcf,EACdgB,MAAOlB,EAAOkB,GACdh0C,MAAOltF,EACPkX,KAAM8oH,EAAO9oH,IACbiqH,SAAUnB,EAAOmB,IACjBC,cAAeC,EACfC,YAAatB,EAAOr1E,GAAM42E,GAC1BC,cAAexB,EAAOr1E,IACtBssE,UAAW+I,EAAO/I,IAClBwK,UAAWC,EACXC,gBAAiB3hI,EACjB4hI,0BAA2B5hI,EAC3B6hI,oBAAqB7hI,EACrB8hI,cAAe9B,EAAO9I,GACtB6K,OAAQ/B,EAAO+B,IACfhO,cAAeiM,EAAOjM,KAExBnG,KAAM,CACJwS,WAAY4B,IACZC,mBAAoBC,EACpBvF,SAAUqF,IACV7B,cAAegC,EACflC,iBAAkBmC,EAClBvN,WAAYmN,IACZK,qBAAsBC,EACtBC,oCAAqCC,EACrCC,gCAAiCD,EACjCE,wBAAyBC,EACzBtJ,WAAY2I,EAAOY,GACnBC,gBAAiBC,EACjBxC,oBAAqByC,EACrBxC,oBAAqByC,EACrBvC,cAAe6B,EACf5L,aAAcsL,EAAOiB,GACrBvE,SAAUsD,EAAOkB,GACjB1C,aAAc8B,EACd1yI,KAAM0yI,EACNj/E,WAAY2+E,IACZtB,4BAA6ByC,EAC7BxC,sBAAuByC,EACvBxC,sBAAuByC,EACvBxC,SAAUmB,IACVvD,gBAAiBuD,EAAOsB,GACxBvC,kBAAmBiB,EAAOsB,GAC1BjM,SAAU2K,EAAOuB,GACjBvC,aAAcsB,EACdnF,SAAU6E,EAAOwB,GACjBvC,aAAcqB,EACdpB,MAAOc,EAAOyB,GACdv2C,MAAOw2C,EACPC,UAAWC,EACXpJ,WAAYqJ,EACZ3sH,KAAM8qH,EAAO8B,GACb3C,SAAUa,IACVV,YAAaU,IACbR,cAAeQ,IACf/K,UAAW+K,IACXL,gBAAiBoC,EACjBnC,0BAA2BoC,EAC3BnC,oBAAqBoC,EACrBnhB,SAAUohB,EACVpC,cAAeE,EAAOmC,GACtBC,0BAA2BC,EAC3BC,kBAAmBC,EACnBxC,OAAQC,IACRjO,cAAeiO,MAGnBwC,GAAU9mI,GAASpU,GAAW,CAAC,GAAGm7I,iBAAmB,IAGrD,IAAM70I,EAAO,CAAC,EACd,OAAO80I,EAUP,SAASA,EAAQja,GAoBf,IAlBA,IAAIhD,EAAO,CACT/5H,KAAM,OACN2kB,SAAU,IAGN6kB,EAAU,CACdhoB,MAAO,CAACu4G,GACRkd,WAAY,GACZjnI,OAAAA,EACAgwH,MAAAA,EACAE,KAAAA,EACA5tH,OAAAA,EACA4kI,OAAAA,EACAh1I,KAAAA,GAGIi1I,EAAY,GACdzpG,GAAS,IACJA,EAAQqvF,EAAOlgI,QAAQ,CAG9B,GAC4B,gBAA1BkgI,EAAOrvF,GAAO,GAAG1tC,MACS,kBAA1B+8H,EAAOrvF,GAAO,GAAG1tC,KAEjB,GAAyB,UAArB+8H,EAAOrvF,GAAO,GAChBypG,EAAU93I,KAAKquC,QAGfA,EAAQ0pG,EAAYra,EADPoa,EAAUjsI,MACWwiC,EAGxC,CAEA,IADAA,GAAS,IACAA,EAAQqvF,EAAOlgI,QAAQ,CAC9B,IAAM+0H,EAAU5hH,EAAO+sH,EAAOrvF,GAAO,IACjCwpE,GAAI/7G,KAAKy2H,EAASmL,EAAOrvF,GAAO,GAAG1tC,OACrC4xH,EAAQmL,EAAOrvF,GAAO,GAAG1tC,MAAM7E,KAC7BX,OAAO8mB,OACL,CACEwhH,eAAgB/F,EAAOrvF,GAAO,GAAGo1F,gBAEnCt5F,GAEFuzF,EAAOrvF,GAAO,GAGpB,CAGA,GAAIlE,EAAQytG,WAAWp6I,OAAS,EAAG,CACjC,IAAMm8C,EAAOxP,EAAQytG,WAAWztG,EAAQytG,WAAWp6I,OAAS,IAC5Cm8C,EAAK,IAAMq+F,IACnBl8I,KAAKquC,OAASp7B,EAAW4qC,EAAK,GACxC,CA0BA,IAvBA+gF,EAAK57H,SAAW,CACdC,MAAO+5H,GACL4E,EAAOlgI,OAAS,EACZkgI,EAAO,GAAG,GAAG3+H,MACb,CACEC,KAAM,EACNP,OAAQ,EACRw/B,OAAQ,IAGhB5+B,IAAKy5H,GACH4E,EAAOlgI,OAAS,EACZkgI,EAAOA,EAAOlgI,OAAS,GAAG,GAAG6B,IAC7B,CACEL,KAAM,EACNP,OAAQ,EACRw/B,OAAQ,KAMlBoQ,GAAS,IACAA,EAAQ19B,EAAOoiI,WAAWv1I,QACjCk9H,EAAO/pH,EAAOoiI,WAAW1kG,GAAOqsF,IAASA,EAE3C,OAAOA,CACT,CAQA,SAASqd,EAAYra,EAAQ3+H,EAAOvB,GAYlC,IAXA,IAII42I,EAEAzW,EAEAsa,EAEA9Q,EAVA94F,EAAQtvC,EAAQ,EAChBm5I,GAAoB,EACpBC,GAAa,IASR9pG,GAAS7wC,GAAQ,CACxB,IAAMg/B,EAAQkhG,EAAOrvF,GACrB,OAAQ7R,EAAM,GAAG77B,MACf,IAAK,gBACL,IAAK,cACL,IAAK,aACc,UAAb67B,EAAM,GACR07G,IAEAA,IAEF/Q,OAAWp4H,EACX,MAEF,IAAK,kBACc,UAAbytB,EAAM,MAEN43G,GACCjN,GACA+Q,GACAD,IAEDA,EAAsB5pG,GAExB84F,OAAWp4H,GAEb,MAEF,IAAK,aACL,IAAK,gBACL,IAAK,iBACL,IAAK,iBACL,IAAK,2BAGH,MAEF,QACEo4H,OAAWp4H,EAGf,IACImpI,GACa,UAAb17G,EAAM,IACY,mBAAlBA,EAAM,GAAG77B,OACY,IAAtBu3I,GACc,SAAb17G,EAAM,KACa,kBAAlBA,EAAM,GAAG77B,MACU,gBAAlB67B,EAAM,GAAG77B,MACb,CACA,GAAIyzI,EAAU,CACZ,IAAIgE,EAAY/pG,EAEhB,IADAsvF,OAAY5uH,EACLqpI,KAAa,CAClB,IAAMC,EAAY3a,EAAO0a,GACzB,GACwB,eAAtBC,EAAU,GAAG13I,MACS,oBAAtB03I,EAAU,GAAG13I,KACb,CACA,GAAqB,SAAjB03I,EAAU,GAAe,SACzB1a,IACFD,EAAOC,GAAW,GAAGh9H,KAAO,kBAC5Bw3I,GAAa,GAEfE,EAAU,GAAG13I,KAAO,aACpBg9H,EAAYya,CACd,MAAO,GACiB,eAAtBC,EAAU,GAAG13I,MACS,qBAAtB03I,EAAU,GAAG13I,MACS,+BAAtB03I,EAAU,GAAG13I,MACS,qBAAtB03I,EAAU,GAAG13I,MACS,mBAAtB03I,EAAU,GAAG13I,KAIb,KAEJ,CAEEs3I,KACEta,GAAasa,EAAsBta,KAErCyW,EAASkE,SAAU,GAIrBlE,EAAS/0I,IAAMlE,OAAO8mB,OACpB,CAAC,EACD07G,EAAYD,EAAOC,GAAW,GAAG5+H,MAAQy9B,EAAM,GAAGn9B,KAEpDq+H,EAAO96E,OAAO+6E,GAAatvF,EAAO,EAAG,CAAC,OAAQ+lG,EAAU53G,EAAM,KAC9D6R,IACA7wC,GACF,CAGA,GAAsB,mBAAlBg/B,EAAM,GAAG77B,KAA2B,CAEtC,IAAM8U,EAAO,CACX9U,KAAM,WACN23I,SAAS,EACTv5I,MAAO5D,OAAO8mB,OAAO,CAAC,EAAGua,EAAM,GAAGz9B,OAElCM,SAAK0P,GAEPqlI,EAAW3+H,EACXioH,EAAO96E,OAAOvU,EAAO,EAAG,CAAC,QAAS54B,EAAM+mB,EAAM,KAC9C6R,IACA7wC,IACAy6I,OAAsBlpI,EACtBo4H,GAAW,CACb,CACF,CACF,CAEA,OADAzJ,EAAO3+H,GAAO,GAAGu5I,QAAUH,EACpB36I,CACT,CAYA,SAASy1I,EAAOpgG,EAAQ0lG,GACtB,OAAO1wI,EAOP,SAASA,EAAKygG,GACZq4B,EAAM7kI,KAAKsD,KAAMyzC,EAAOy1D,GAAQA,GAC5BiwC,GAAKA,EAAIz8I,KAAKsD,KAAMkpG,EAC1B,CACF,CAMA,SAASr1F,IACP7T,KAAK+iB,MAAMniB,KAAK,CACdW,KAAM,WACN2kB,SAAU,IAEd,CAcA,SAASq7G,EAAM1hI,EAAMqpG,EAAOkwC,GACXp5I,KAAK+iB,MAAM/iB,KAAK+iB,MAAM3kB,OAAS,GAEtB8nB,SACftlB,KAAKf,GACdG,KAAK+iB,MAAMniB,KAAKf,GAChBG,KAAKw4I,WAAW53I,KAAK,CAACsoG,EAAOkwC,IAC7Bv5I,EAAKH,SAAW,CACdC,MAAO+5H,GAAMxwB,EAAMvpG,OAEnBM,SAAK0P,EAET,CAUA,SAASkmI,EAAOsD,GACd,OAAOpsI,EAOP,SAASA,EAAMm8F,GACTiwC,GAAKA,EAAIz8I,KAAKsD,KAAMkpG,GACxBu4B,EAAK/kI,KAAKsD,KAAMkpG,EAClB,CACF,CAYA,SAASu4B,EAAKv4B,EAAOmwC,GACnB,IAAMx5I,EAAOG,KAAK+iB,MAAMtW,MAClBhE,EAAOzI,KAAKw4I,WAAW/rI,MAC7B,IAAKhE,EACH,MAAM,IAAIjI,MACR,iBACE0oG,EAAM3nG,KACN,MACA24H,GAAkB,CAChBv6H,MAAOupG,EAAMvpG,MACbM,IAAKipG,EAAMjpG,MAEb,yBAEKwI,EAAK,GAAGlH,OAAS2nG,EAAM3nG,OAC5B83I,EACFA,EAAY38I,KAAKsD,KAAMkpG,EAAOzgG,EAAK,KAEnBA,EAAK,IAAMmwI,IACnBl8I,KAAKsD,KAAMkpG,EAAOzgG,EAAK,KAGnC5I,EAAKH,SAASO,IAAMy5H,GAAMxwB,EAAMjpG,IAClC,CAMA,SAASw4I,IACP,O/CzmBG,SAAkBl7I,EAAOJ,GAC9B,IAAMq0D,EAAWr0D,GAAW8gI,GAQ5B,OAAOzB,GAAIj/H,EAN2B,mBAA7Bi0D,EAAS0sE,iBACZ1sE,EAAS0sE,gBAGmB,mBAAzB1sE,EAAS2sE,aAA4B3sE,EAAS2sE,YAGzD,C+C+lBWhiI,CAAS6D,KAAK+iB,MAAMtW,MAC7B,CAUA,SAAS2oI,IACPp1I,KAAKyD,KAAK61I,6BAA8B,CAC1C,CAMA,SAASpE,EAAqBhsC,GACxBlpG,KAAKyD,KAAK61I,8BACKt5I,KAAK+iB,MAAM/iB,KAAK+iB,MAAM3kB,OAAS,GACvCuB,MAAQ2oD,OAAOt8C,SAAShM,KAAKqkI,eAAen7B,GAAQ,IAC7DlpG,KAAKyD,KAAK61I,iCAA8B3pI,EAE5C,CAMA,SAASinI,IACP,IAAMnzI,EAAOzD,KAAKy4I,SACLz4I,KAAK+iB,MAAM/iB,KAAK+iB,MAAM3kB,OAAS,GACvCiiH,KAAO58G,CACd,CAMA,SAASozI,IACP,IAAMpzI,EAAOzD,KAAKy4I,SACLz4I,KAAK+iB,MAAM/iB,KAAK+iB,MAAM3kB,OAAS,GACvC4sB,KAAOvnB,CACd,CAMA,SAASkzI,IAEH32I,KAAKyD,KAAK81I,iBACdv5I,KAAK6T,SACL7T,KAAKyD,KAAK81I,gBAAiB,EAC7B,CAMA,SAAS9C,IACP,IAAMhzI,EAAOzD,KAAKy4I,SACLz4I,KAAK+iB,MAAM/iB,KAAK+iB,MAAM3kB,OAAS,GACvCb,MAAQkG,EAAKxE,QAAQ,2BAA4B,IACtDe,KAAKyD,KAAK81I,oBAAiB5pI,CAC7B,CAMA,SAASmnI,IACP,IAAMrzI,EAAOzD,KAAKy4I,SACLz4I,KAAK+iB,MAAM/iB,KAAK+iB,MAAM3kB,OAAS,GACvCb,MAAQkG,EAAKxE,QAAQ,eAAgB,GAC5C,CAMA,SAASg4I,EAA4B/tC,GACnC,IAAMnI,EAAQ/gG,KAAKy4I,SACb54I,EAAOG,KAAK+iB,MAAM/iB,KAAK+iB,MAAM3kB,OAAS,GAC5CyB,EAAKkhG,MAAQA,EACblhG,EAAKgqI,WAAaD,GAChB5pI,KAAKqkI,eAAen7B,IACpBroF,aACJ,CAMA,SAASq2H,IACP,IAAMzzI,EAAOzD,KAAKy4I,SACLz4I,KAAK+iB,MAAM/iB,KAAK+iB,MAAM3kB,OAAS,GACvCi2E,MAAQ5wE,CACf,CAMA,SAASuzI,IACP,IAAMvzI,EAAOzD,KAAKy4I,SACLz4I,KAAK+iB,MAAM/iB,KAAK+iB,MAAM3kB,OAAS,GACvC2+B,IAAMt5B,CACb,CAMA,SAASsyI,EAAyB7sC,GAChC,IAAMrpG,EAAOG,KAAK+iB,MAAM/iB,KAAK+iB,MAAM3kB,OAAS,GAC5C,IAAKyB,EAAK25I,MAAO,CACf,IAAMA,EAAQx5I,KAAKqkI,eAAen7B,GAAO9qG,OACzCyB,EAAK25I,MAAQA,CACf,CACF,CAMA,SAASpB,IACPp4I,KAAKyD,KAAKg2I,8BAA+B,CAC3C,CAMA,SAASvB,EAAgChvC,GAC1BlpG,KAAK+iB,MAAM/iB,KAAK+iB,MAAM3kB,OAAS,GACvCo7I,MAAsD,KAA9Cx5I,KAAKqkI,eAAen7B,GAAOwwC,YAAY,GAAY,EAAI,CACtE,CAMA,SAAS1B,IACPh4I,KAAKyD,KAAKg2I,kCAA+B9pI,CAC3C,CAOA,SAASokI,EAAY7qC,GACnB,IAEMywC,EAFO35I,KAAK+iB,MAAM/iB,KAAK+iB,MAAM3kB,OAAS,GAEtB8nB,SAClBq0B,EAAOo/F,EAASA,EAASv7I,OAAS,GACjCm8C,GAAsB,SAAdA,EAAKh5C,QAEhBg5C,EAAO1d,MACFn9B,SAAW,CACdC,MAAO+5H,GAAMxwB,EAAMvpG,OAEnBM,SAAK0P,GAEPgqI,EAAS/4I,KAAK25C,IAEhBv6C,KAAK+iB,MAAMniB,KAAK25C,EAClB,CAOA,SAAS47F,EAAWjtC,GAClB,IAAM3uD,EAAOv6C,KAAK+iB,MAAMtW,MACxB8tC,EAAKh9C,OAASyC,KAAKqkI,eAAen7B,GAClC3uD,EAAK76C,SAASO,IAAMy5H,GAAMxwB,EAAMjpG,IAClC,CAOA,SAASy3I,EAAiBxuC,GACxB,IAAMn+D,EAAU/qC,KAAK+iB,MAAM/iB,KAAK+iB,MAAM3kB,OAAS,GAE/C,GAAI4B,KAAKyD,KAAKm2I,YAIZ,OAHa7uG,EAAQ7kB,SAAS6kB,EAAQ7kB,SAAS9nB,OAAS,GACnDsB,SAASO,IAAMy5H,GAAMxwB,EAAMjpG,UAChCD,KAAKyD,KAAKm2I,iBAAcjqI,IAIvB3P,KAAKyD,KAAKg2I,8BACXloI,EAAOqiI,eAAe16H,SAAS6xB,EAAQxpC,QAEvCwyI,EAAYr3I,KAAKsD,KAAMkpG,GACvBitC,EAAWz5I,KAAKsD,KAAMkpG,GAE1B,CAOA,SAASiuC,IACPn3I,KAAKyD,KAAKm2I,aAAc,CAC1B,CAOA,SAASxC,IACP,IAAM3zI,EAAOzD,KAAKy4I,SACLz4I,KAAK+iB,MAAM/iB,KAAK+iB,MAAM3kB,OAAS,GACvCb,MAAQkG,CACf,CAOA,SAAS4zI,IACP,IAAM5zI,EAAOzD,KAAKy4I,SACLz4I,KAAK+iB,MAAM/iB,KAAK+iB,MAAM3kB,OAAS,GACvCb,MAAQkG,CACf,CAOA,SAASszI,IACP,IAAMtzI,EAAOzD,KAAKy4I,SACLz4I,KAAK+iB,MAAM/iB,KAAK+iB,MAAM3kB,OAAS,GACvCb,MAAQkG,CACf,CAOA,SAASk0I,IACP,IAAM93I,EAAOG,KAAK+iB,MAAM/iB,KAAK+iB,MAAM3kB,OAAS,GAI5C,GAAI4B,KAAKyD,KAAKo2I,YAAa,CAEzB,IAAMC,EAAgB95I,KAAKyD,KAAKq2I,eAAiB,WACjDj6I,EAAK0B,MAAQ,YAEb1B,EAAKi6I,cAAgBA,SAEdj6I,EAAKk9B,WACLl9B,EAAKw0E,KACd,aAESx0E,EAAKgqI,kBAELhqI,EAAKkhG,MAEd/gG,KAAKyD,KAAKq2I,mBAAgBnqI,CAC5B,CAOA,SAAS2nI,IACP,IAAMz3I,EAAOG,KAAK+iB,MAAM/iB,KAAK+iB,MAAM3kB,OAAS,GAI5C,GAAI4B,KAAKyD,KAAKo2I,YAAa,CAEzB,IAAMC,EAAgB95I,KAAKyD,KAAKq2I,eAAiB,WACjDj6I,EAAK0B,MAAQ,YAEb1B,EAAKi6I,cAAgBA,SAEdj6I,EAAKk9B,WACLl9B,EAAKw0E,KACd,aAESx0E,EAAKgqI,kBAELhqI,EAAKkhG,MAEd/gG,KAAKyD,KAAKq2I,mBAAgBnqI,CAC5B,CAOA,SAAS8nI,EAAgBvuC,GACvB,IAAM/qF,EAASne,KAAKqkI,eAAen7B,GAC7B6wC,EAAW/5I,KAAK+iB,MAAM/iB,KAAK+iB,MAAM3kB,OAAS,GAGhD27I,EAASh5C,MD76BN,SAAsBxjG,GAC3B,OAAOA,EAAM0B,QAAQo0I,GAA4BC,GACnD,CC26BqB0G,CAAa77H,GAE9B47H,EAASlQ,WAAaD,GAAoBzrH,GAAQ0C,aACpD,CAOA,SAAS02H,IACP,IAAM0C,EAAWj6I,KAAK+iB,MAAM/iB,KAAK+iB,MAAM3kB,OAAS,GAC1Cb,EAAQyC,KAAKy4I,SACb54I,EAAOG,KAAK+iB,MAAM/iB,KAAK+iB,MAAM3kB,OAAS,GAG5C,GADA4B,KAAKyD,KAAKo2I,aAAc,EACN,SAAdh6I,EAAK0B,KAAiB,CAExB,IAAM2kB,EAAW+zH,EAAS/zH,SAC1BrmB,EAAKqmB,SAAWA,CAClB,MACErmB,EAAK49G,IAAMlgH,CAEf,CAOA,SAASs6I,IACP,IAAMp0I,EAAOzD,KAAKy4I,SACLz4I,KAAK+iB,MAAM/iB,KAAK+iB,MAAM3kB,OAAS,GACvC2+B,IAAMt5B,CACb,CAOA,SAASq0I,IACP,IAAMr0I,EAAOzD,KAAKy4I,SACLz4I,KAAK+iB,MAAM/iB,KAAK+iB,MAAM3kB,OAAS,GACvCi2E,MAAQ5wE,CACf,CAOA,SAASs0I,IACP/3I,KAAKyD,KAAKo2I,iBAAclqI,CAC1B,CAOA,SAAS4lI,IACPv1I,KAAKyD,KAAKq2I,cAAgB,WAC5B,CAOA,SAASlC,EAAsB1uC,GAC7B,IAAMnI,EAAQ/gG,KAAKy4I,SACb54I,EAAOG,KAAK+iB,MAAM/iB,KAAK+iB,MAAM3kB,OAAS,GAG5CyB,EAAKkhG,MAAQA,EAEblhG,EAAKgqI,WAAaD,GAChB5pI,KAAKqkI,eAAen7B,IACpBroF,cACF7gB,KAAKyD,KAAKq2I,cAAgB,MAC5B,CAOA,SAASzD,EAA+BntC,GACtClpG,KAAKyD,KAAKy2I,uBAAyBhxC,EAAM3nG,IAC3C,CAMA,SAASi1I,EAA8BttC,GACrC,IAGI3rG,EAHEkG,EAAOzD,KAAKqkI,eAAen7B,GAC3B3nG,EAAOvB,KAAKyD,KAAKy2I,uBAGnB34I,GACFhE,EAAQ61I,GACN3vI,EACS,oCAATlC,EAA6C,GAAK,IAEpDvB,KAAKyD,KAAKy2I,4BAAyBvqI,GAGnCpS,EADe0wI,GAA8BxqI,GAG/C,IAAM82C,EAAOv6C,KAAK+iB,MAAMtW,MACxB8tC,EAAKh9C,OAASA,EACdg9C,EAAK76C,SAASO,IAAMy5H,GAAMxwB,EAAMjpG,IAClC,CAMA,SAASg2I,EAAuB/sC,GAC9BitC,EAAWz5I,KAAKsD,KAAMkpG,GACTlpG,KAAK+iB,MAAM/iB,KAAK+iB,MAAM3kB,OAAS,GACvC2+B,IAAM/8B,KAAKqkI,eAAen7B,EACjC,CAMA,SAAS8sC,EAAoB9sC,GAC3BitC,EAAWz5I,KAAKsD,KAAMkpG,GACTlpG,KAAK+iB,MAAM/iB,KAAK+iB,MAAM3kB,OAAS,GACvC2+B,IAAM,UAAY/8B,KAAKqkI,eAAen7B,EAC7C,CAOA,SAASw/B,IACP,MAAO,CACLnnI,KAAM,aACN2kB,SAAU,GAEd,CAGA,SAASguH,IACP,MAAO,CACL3yI,KAAM,OACN8+G,KAAM,KACNr1F,KAAM,KACNztB,MAAO,GAEX,CAGA,SAASg1I,IACP,MAAO,CACLhxI,KAAM,aACNhE,MAAO,GAEX,CAGA,SAAS25D,IACP,MAAO,CACL31D,KAAM,aACNsoI,WAAY,GACZ9oC,MAAO,KACP1sB,MAAO,KACPt3C,IAAK,GAET,CAGA,SAAS23G,IACP,MAAO,CACLnzI,KAAM,WACN2kB,SAAU,GAEd,CAGA,SAAS6kH,IACP,MAAO,CACLxpI,KAAM,UAENi4I,MAAO,EACPtzH,SAAU,GAEd,CAGA,SAASyuH,IACP,MAAO,CACLpzI,KAAM,QAEV,CAGA,SAASq7G,IACP,MAAO,CACLr7G,KAAM,OACNhE,MAAO,GAEX,CAGA,SAASw3I,IACP,MAAO,CACLxzI,KAAM,QACN8yE,MAAO,KACPt3C,IAAK,GACL0gF,IAAK,KAET,CAGA,SAAS1yF,KACP,MAAO,CACLxpB,KAAM,OACN8yE,MAAO,KACPt3C,IAAK,GACL7W,SAAU,GAEd,CAMA,SAASs4C,GAAK0qC,GACZ,MAAO,CACL3nG,KAAM,OACN44I,QAAwB,gBAAfjxC,EAAM3nG,KACf5B,MAAO,KACPy6I,OAAQlxC,EAAMgwC,QACdhzH,SAAU,GAEd,CAMA,SAAS8uH,GAAS9rC,GAChB,MAAO,CACL3nG,KAAM,WACN64I,OAAQlxC,EAAMgwC,QACdv0H,QAAS,KACTuB,SAAU,GAEd,CAGA,SAAS4kH,KACP,MAAO,CACLvpI,KAAM,YACN2kB,SAAU,GAEd,CAGA,SAAS0vH,KACP,MAAO,CACLr0I,KAAM,SACN2kB,SAAU,GAEd,CAGA,SAAS2W,KACP,MAAO,CACLt7B,KAAM,OACNhE,MAAO,GAEX,CAGA,SAASqqI,KACP,MAAO,CACLrmI,KAAM,gBAEV,CACF,CAjjCS84I,CAASl9I,EAATk9I,CClKF,SAAqB/b,GAC1B,MAAQD,GAAYC,KAGpB,OAAOA,CACT,CD8JIgc,CACE3lI,GAAMxX,GAASkG,WAAW28H,MH1JzB,WACL,IAKIua,EALAl7I,EAAS,EACTwU,EAAS,GAETlU,GAAQ,EAGZ,OAIA,SAAsBpC,EAAOm2I,EAAUzzI,GAErC,IAEIT,EAEAyrC,EAEAo0F,EAEAmb,EAEAh4I,EAVEyiI,EAAS,GAyBf,IAdA1nI,EACEsW,GACkB,kBAAVtW,EACJA,EAAMpB,WACN,IAAIs+I,YAAY/G,QAAY/jI,GAAW2jI,OAAO/1I,IACpD8hI,EAAgB,EAChBxrH,EAAS,GACLlU,IAE0B,QAAxBpC,EAAM4N,WAAW,IACnBk0H,IAEF1/H,OAAQgQ,GAEH0vH,EAAgB9hI,EAAMa,QAAQ,CAMnC,GALAu+B,GAAO+9G,UAAYrb,EAEnBmb,GADAh7I,EAAQm9B,GAAO57B,KAAKxD,UAEOoS,IAAhBnQ,EAAMyvC,MAAsBzvC,EAAMyvC,MAAQ1xC,EAAMa,OAC3DoE,EAAOjF,EAAM4N,WAAWqvI,IACnBh7I,EAAO,CACVqU,EAAStW,EAAMyD,MAAMq+H,GACrB,KACF,CACA,GAAa,KAAT78H,GAAe68H,IAAkBmb,GAAeD,EAClDtV,EAAOrkI,MAAM,GACb25I,OAAmB5qI,OAUnB,OARI4qI,IACFtV,EAAOrkI,MAAM,GACb25I,OAAmB5qI,GAEjB0vH,EAAgBmb,IAClBvV,EAAOrkI,KAAKrD,EAAMyD,MAAMq+H,EAAemb,IACvCn7I,GAAUm7I,EAAcnb,GAElB78H,GACN,KAAK,EACHyiI,EAAOrkI,KAAK,OACZvB,IACA,MAEF,KAAK,EAGH,IAFA4rC,EAA+B,EAAxBtb,KAAKuuB,KAAK7+C,EAAS,GAC1B4lI,EAAOrkI,MAAM,GACNvB,IAAW4rC,GAAMg6F,EAAOrkI,MAAM,GACrC,MAEF,KAAK,GACHqkI,EAAOrkI,MAAM,GACbvB,EAAS,EACT,MAEF,QACEk7I,GAAmB,EACnBl7I,EAAS,EAIfggI,EAAgBmb,EAAc,CAChC,CAMA,OALIv6I,IACEs6I,GAAkBtV,EAAOrkI,MAAM,GAC/BiT,GAAQoxH,EAAOrkI,KAAKiT,GACxBoxH,EAAOrkI,KAAK,OAEPqkI,CACT,CACF,CG8DsC0V,GAAap9I,EAAOm2I,GAAU,KAGpE,CAsjCA,SAASha,GAAMz5G,GACb,MAAO,CACLrgB,KAAMqgB,EAAErgB,KACRP,OAAQ4gB,EAAE5gB,OACVw/B,OAAQ5e,EAAE4e,OAEd,CAOA,SAASw5G,GAAUuC,EAAU3H,GAE3B,IADA,IAAIhkG,GAAS,IACJA,EAAQgkG,EAAW70I,QAAQ,CAClC,IAAMb,EAAQ01I,EAAWhkG,GACrBxyC,MAAMF,QAAQgB,GAChB86I,GAAUuC,EAAUr9I,GAEpB2iI,GAAU0a,EAAUr9I,EAExB,CACF,CAOA,SAAS2iI,GAAU0a,EAAU1a,GAE3B,IAAIrjI,EACJ,IAAKA,KAAOqjI,EACV,GAAIznB,GAAI/7G,KAAKwjI,EAAWrjI,GACtB,OAAQA,GACN,IAAK,iBACH,IACWg+I,EADLx5E,EAAQ6+D,EAAUrjI,GACxB,GAAIwkE,GACFw5E,EAAAD,EAAS/9I,IAAK+D,KAAI6F,MAAAo0I,EAAA91E,EAAI1D,IAExB,MAEF,IAAK,aACH,IACWy5E,EADLz5E,EAAQ6+D,EAAUrjI,GACxB,GAAIwkE,GACFy5E,EAAAF,EAAS/9I,IAAK+D,KAAI6F,MAAAq0I,EAAA/1E,EAAI1D,IAExB,MAEF,IAAK,QACL,IAAK,OACH,IAAMA,EAAQ6+D,EAAUrjI,GACpBwkE,GACFtlE,OAAO8mB,OAAO+3H,EAAS/9I,GAAMwkE,GAQzC,CAGA,SAASu3E,GAAen4G,EAAM4gC,GAC5B,MAAI5gC,EACI,IAAIjgC,MACR,iBACEigC,EAAKl/B,KACL,MACA24H,GAAkB,CAChBv6H,MAAO8gC,EAAK9gC,MACZM,IAAKwgC,EAAKxgC,MAEZ,0BACAohE,EAAM9/D,KACN,MACA24H,GAAkB,CAChBv6H,MAAO0hE,EAAM1hE,MACbM,IAAKohE,EAAMphE,MAEb,aAGE,IAAIO,MACR,oCACE6gE,EAAM9/D,KACN,MACA24H,GAAkB,CAChBv6H,MAAO0hE,EAAM1hE,MACbM,IAAKohE,EAAMphE,MAEb,kBAGR,CElzCe,SAAS86I,GAAY59I,GAGlC,IAAM2H,EAAO9E,KAEb8E,EAAK06H,OAKL,SAAgBwb,GACd,OAAOvH,GAAauH,EAAGvzE,EAAAA,EAAAA,EAAA,GAClB3iE,EAAKrB,KAAK,aACVtG,GAAO,IAIV81I,WAAYnuI,EAAKrB,KAAK,wBAA0B,GAChD60I,gBAAiBxzI,EAAKrB,KAAK,2BAA6B,KAE5D,CACF,CCzCe,SAASw3I,KAEtBA,GAAsB,WACpB,OAAOj5I,CACT,EACA,IAAIC,EACFD,EAAI,CAAC,EACLG,EAAIpG,OAAOC,UACXkG,EAAIC,EAAElG,eACNoG,EAAItG,OAAOK,gBAAkB,SAAU6F,EAAGD,EAAGG,GAC3CF,EAAED,GAAKG,EAAE5E,KACX,EACAY,EAAI,mBAAqByJ,OAASA,OAAS,CAAC,EAC5CsX,EAAI/gB,EAAE0J,UAAY,aAClB1G,EAAIhD,EAAE+8I,eAAiB,kBACvB54I,EAAInE,EAAEg5D,aAAe,gBACvB,SAASgkF,EAAOl5I,EAAGD,EAAGG,GACpB,OAAOpG,OAAOK,eAAe6F,EAAGD,EAAG,CACjCzE,MAAO4E,EACP9E,YAAY,EACZC,cAAc,EACdG,UAAU,IACRwE,EAAED,EACR,CACA,IACEm5I,EAAO,CAAC,EAAG,GACb,CAAE,MAAOl5I,GACPk5I,EAAS,SAAgBl5I,EAAGD,EAAGG,GAC7B,OAAOF,EAAED,GAAKG,CAChB,CACF,CACA,SAAS4lH,EAAK9lH,EAAGD,EAAGG,EAAGD,GACrB,IAAI/D,EAAI6D,GAAKA,EAAEhG,qBAAqBo/I,EAAYp5I,EAAIo5I,EAClDl8H,EAAInjB,OAAO03C,OAAOt1C,EAAEnC,WACpBmF,EAAI,IAAIwwD,EAAQzvD,GAAK,IACvB,OAAOG,EAAE6c,EAAG,UAAW,CACrB3hB,MAAO89I,EAAiBp5I,EAAGE,EAAGhB,KAC5B+d,CACN,CACA,SAASnY,EAAS9E,EAAGD,EAAGG,GACtB,IACE,MAAO,CACLZ,KAAM,SACN8X,IAAKpX,EAAEvF,KAAKsF,EAAGG,GAEnB,CAAE,MAAOF,GACP,MAAO,CACLV,KAAM,QACN8X,IAAKpX,EAET,CACF,CACAD,EAAE+lH,KAAOA,EACT,IAAIzkG,EAAI,iBACN7gB,EAAI,iBACJF,EAAI,YACJH,EAAI,YACJ4W,EAAI,CAAC,EACP,SAASoiI,IAAa,CACtB,SAASE,IAAqB,CAC9B,SAASC,IAA8B,CACvC,IAAI3nI,EAAI,CAAC,EACTunI,EAAOvnI,EAAGsL,GAAG,WACX,OAAOlf,IACT,IACA,IAAIigB,EAAIlkB,OAAOwpE,eACbvlD,EAAIC,GAAKA,EAAEA,EAAE7Y,EAAO,MACtB4Y,GAAKA,IAAM7d,GAAKD,EAAExF,KAAKsjB,EAAGd,KAAOtL,EAAIoM,GACrC,IAAIE,EAAIq7H,EAA2Bv/I,UAAYo/I,EAAUp/I,UAAYD,OAAO03C,OAAO7/B,GACnF,SAAS4nI,EAAsBv5I,GAC7B,CAAC,OAAQ,QAAS,UAAU2e,SAAQ,SAAU5e,GAC5Cm5I,EAAOl5I,EAAGD,GAAG,SAAUC,GACrB,OAAOjC,KAAKy7I,QAAQz5I,EAAGC,EACzB,GACF,GACF,CACA,SAASy5I,EAAcz5I,EAAGD,GACxB,SAAS25I,EAAOx5I,EAAGE,EAAGlE,EAAG+gB,GACvB,IAAI/d,EAAI4F,EAAS9E,EAAEE,GAAIF,EAAGI,GAC1B,GAAI,UAAYlB,EAAEI,KAAM,CACtB,IAAIe,EAAInB,EAAEkY,IACRiK,EAAIhhB,EAAE/E,MACR,OAAO+lB,GAAK,UAAY3b,EAAQ2b,IAAMphB,EAAExF,KAAK4mB,EAAG,WAAathB,EAAEsE,QAAQgd,EAAEs4H,SAASp1I,MAAK,SAAUvE,GAC/F05I,EAAO,OAAQ15I,EAAG9D,EAAG+gB,EACvB,IAAG,SAAUjd,GACX05I,EAAO,QAAS15I,EAAG9D,EAAG+gB,EACxB,IAAKld,EAAEsE,QAAQgd,GAAG9c,MAAK,SAAUvE,GAC/BK,EAAE/E,MAAQ0E,EAAG9D,EAAEmE,EACjB,IAAG,SAAUL,GACX,OAAO05I,EAAO,QAAS15I,EAAG9D,EAAG+gB,EAC/B,GACF,CACAA,EAAE/d,EAAEkY,IACN,CACA,IAAIlX,EACJE,EAAErC,KAAM,UAAW,CACjBzC,MAAO,SAAe0E,EAAGC,GACvB,SAAS25I,IACP,OAAO,IAAI75I,GAAE,SAAUA,EAAGG,GACxBw5I,EAAO15I,EAAGC,EAAGF,EAAGG,EAClB,GACF,CACA,OAAOA,EAAIA,EAAIA,EAAEqE,KAAKq1I,EAA4BA,GAA8BA,GAClF,GAEJ,CACA,SAASR,EAAiBr5I,EAAGG,EAAGD,GAC9B,IAAIG,EAAIihB,EACR,OAAO,SAAUnlB,EAAG+gB,GAClB,GAAI7c,IAAME,EAAG,MAAM,IAAI/B,MAAM,gCAC7B,GAAI6B,IAAMD,EAAG,CACX,GAAI,UAAYjE,EAAG,MAAM+gB,EACzB,MAAO,CACL3hB,MAAO0E,EACPutC,MAAM,EAEV,CACA,IAAKttC,EAAEy+G,OAASxiH,EAAG+D,EAAEmX,IAAM6F,IAAK,CAC9B,IAAI/d,EAAIe,EAAE45I,SACV,GAAI36I,EAAG,CACL,IAAImB,EAAIy5I,EAAoB56I,EAAGe,GAC/B,GAAII,EAAG,CACL,GAAIA,IAAM0W,EAAG,SACb,OAAO1W,CACT,CACF,CACA,GAAI,SAAWJ,EAAEy+G,OAAQz+G,EAAE85I,KAAO95I,EAAE+5I,MAAQ/5I,EAAEmX,SAAS,GAAI,UAAYnX,EAAEy+G,OAAQ,CAC/E,GAAIt+G,IAAMihB,EAAG,MAAMjhB,EAAID,EAAGF,EAAEmX,IAC5BnX,EAAEg6I,kBAAkBh6I,EAAEmX,IACxB,KAAO,WAAanX,EAAEy+G,QAAUz+G,EAAEi6I,OAAO,SAAUj6I,EAAEmX,KACrDhX,EAAIE,EACJ,IAAIqR,EAAI7M,EAAS/E,EAAGG,EAAGD,GACvB,GAAI,WAAa0R,EAAErS,KAAM,CACvB,GAAIc,EAAIH,EAAEstC,KAAOptC,EAAIK,EAAGmR,EAAEyF,MAAQL,EAAG,SACrC,MAAO,CACLzb,MAAOqW,EAAEyF,IACTm2B,KAAMttC,EAAEstC,KAEZ,CACA,UAAY57B,EAAErS,OAASc,EAAID,EAAGF,EAAEy+G,OAAS,QAASz+G,EAAEmX,IAAMzF,EAAEyF,IAC9D,CACF,CACF,CACA,SAAS0iI,EAAoB/5I,EAAGG,GAC9B,IAAID,EAAIC,EAAEw+G,OACRt+G,EAAIL,EAAE6F,SAAS3F,GACjB,GAAIG,IAAMJ,EAAG,OAAOE,EAAE25I,SAAW,KAAM,UAAY55I,GAAKF,EAAE6F,SAAiB,SAAM1F,EAAEw+G,OAAS,SAAUx+G,EAAEkX,IAAMpX,EAAG85I,EAAoB/5I,EAAGG,GAAI,UAAYA,EAAEw+G,SAAW,WAAaz+G,IAAMC,EAAEw+G,OAAS,QAASx+G,EAAEkX,IAAM,IAAIla,UAAU,oCAAsC+C,EAAI,aAAc8W,EAC1R,IAAI7a,EAAI4I,EAAS1E,EAAGL,EAAE6F,SAAU1F,EAAEkX,KAClC,GAAI,UAAYlb,EAAEoD,KAAM,OAAOY,EAAEw+G,OAAS,QAASx+G,EAAEkX,IAAMlb,EAAEkb,IAAKlX,EAAE25I,SAAW,KAAM9iI,EACrF,IAAIkG,EAAI/gB,EAAEkb,IACV,OAAO6F,EAAIA,EAAEswB,MAAQrtC,EAAEH,EAAEo6I,YAAcl9H,EAAE3hB,MAAO4E,EAAE8oC,KAAOjpC,EAAEq6I,QAAS,WAAal6I,EAAEw+G,SAAWx+G,EAAEw+G,OAAS,OAAQx+G,EAAEkX,IAAMpX,GAAIE,EAAE25I,SAAW,KAAM9iI,GAAKkG,GAAK/c,EAAEw+G,OAAS,QAASx+G,EAAEkX,IAAM,IAAIla,UAAU,oCAAqCgD,EAAE25I,SAAW,KAAM9iI,EAC9P,CACA,SAASsjI,EAAar6I,GACpB,IAAID,EAAI,CACNu6I,OAAQt6I,EAAE,IAEZ,KAAKA,IAAMD,EAAEw6I,SAAWv6I,EAAE,IAAK,KAAKA,IAAMD,EAAEy6I,WAAax6I,EAAE,GAAID,EAAE06I,SAAWz6I,EAAE,IAAKjC,KAAK28I,WAAW/7I,KAAKoB,EAC1G,CACA,SAAS46I,EAAc36I,GACrB,IAAID,EAAIC,EAAE46I,YAAc,CAAC,EACzB76I,EAAET,KAAO,gBAAiBS,EAAEqX,IAAKpX,EAAE46I,WAAa76I,CAClD,CACA,SAAS2vD,EAAQ1vD,GACfjC,KAAK28I,WAAa,CAAC,CACjBJ,OAAQ,SACNt6I,EAAE2e,QAAQ07H,EAAct8I,MAAOA,KAAK47E,OAAM,EAChD,CACA,SAASx0E,EAAOpF,GACd,GAAIA,GAAK,KAAOA,EAAG,CACjB,IAAIG,EAAIH,EAAEkd,GACV,GAAI/c,EAAG,OAAOA,EAAEzF,KAAKsF,GACrB,GAAI,mBAAqBA,EAAEipC,KAAM,OAAOjpC,EACxC,IAAKiX,MAAMjX,EAAE5D,QAAS,CACpB,IAAIiE,GAAK,EACPlE,EAAI,SAAS8sC,IACX,OAAS5oC,EAAIL,EAAE5D,QAAS,GAAI8D,EAAExF,KAAKsF,EAAGK,GAAI,OAAO4oC,EAAK1tC,MAAQyE,EAAEK,GAAI4oC,EAAKuE,MAAO,EAAIvE,EACpF,OAAOA,EAAK1tC,MAAQ0E,EAAGgpC,EAAKuE,MAAO,EAAIvE,CACzC,EACF,OAAO9sC,EAAE8sC,KAAO9sC,CAClB,CACF,CACA,MAAM,IAAIgB,UAAUwI,EAAQ3F,GAAK,mBACnC,CACA,OAAOs5I,EAAkBt/I,UAAYu/I,EAA4Bl5I,EAAE6d,EAAG,cAAe,CACnF3iB,MAAOg+I,EACPj+I,cAAc,IACZ+E,EAAEk5I,EAA4B,cAAe,CAC/Ch+I,MAAO+9I,EACPh+I,cAAc,IACZg+I,EAAkB/3H,YAAc43H,EAAOI,EAA4Bj5I,EAAG,qBAAsBN,EAAE86I,oBAAsB,SAAU76I,GAChI,IAAID,EAAI,mBAAqBC,GAAKA,EAAEjF,YACpC,QAASgF,IAAMA,IAAMs5I,GAAqB,uBAAyBt5I,EAAEuhB,aAAevhB,EAAE5E,MACxF,EAAG4E,EAAEu2G,KAAO,SAAUt2G,GACpB,OAAOlG,OAAOkpE,eAAiBlpE,OAAOkpE,eAAehjE,EAAGs5I,IAA+Bt5I,EAAEijE,UAAYq2E,EAA4BJ,EAAOl5I,EAAGK,EAAG,sBAAuBL,EAAEjG,UAAYD,OAAO03C,OAAOvzB,GAAIje,CACvM,EAAGD,EAAE+6I,MAAQ,SAAU96I,GACrB,MAAO,CACL25I,QAAS35I,EAEb,EAAGu5I,EAAsBE,EAAc1/I,WAAYm/I,EAAOO,EAAc1/I,UAAWmF,GAAG,WACpF,OAAOnB,IACT,IAAIgC,EAAE05I,cAAgBA,EAAe15I,EAAE07G,MAAQ,SAAUz7G,EAAGE,EAAGD,EAAGG,EAAGlE,QACnE,IAAWA,IAAMA,EAAIkH,SACrB,IAAI6Z,EAAI,IAAIw8H,EAAc3zB,EAAK9lH,EAAGE,EAAGD,EAAGG,GAAIlE,GAC5C,OAAO6D,EAAE86I,oBAAoB36I,GAAK+c,EAAIA,EAAE+rB,OAAOzkC,MAAK,SAAUvE,GAC5D,OAAOA,EAAEutC,KAAOvtC,EAAE1E,MAAQ2hB,EAAE+rB,MAC9B,GACF,EAAGuwG,EAAsBt7H,GAAIi7H,EAAOj7H,EAAG5d,EAAG,aAAc64I,EAAOj7H,EAAGhB,GAAG,WACnE,OAAOlf,IACT,IAAIm7I,EAAOj7H,EAAG,YAAY,WACxB,MAAO,oBACT,IAAIle,EAAEoP,KAAO,SAAUnP,GACrB,IAAID,EAAIjG,OAAOkG,GACbE,EAAI,GACN,IAAK,IAAID,KAAKF,EAAGG,EAAEvB,KAAKsB,GACxB,OAAOC,EAAE6lG,UAAW,SAAS/8D,IAC3B,KAAO9oC,EAAE/D,QAAS,CAChB,IAAI6D,EAAIE,EAAEsK,MACV,GAAIxK,KAAKD,EAAG,OAAOipC,EAAK1tC,MAAQ0E,EAAGgpC,EAAKuE,MAAO,EAAIvE,CACrD,CACA,OAAOA,EAAKuE,MAAO,EAAIvE,CACzB,CACF,EAAGjpC,EAAEoF,OAASA,EAAQuqD,EAAQ31D,UAAY,CACxCgB,YAAa20D,EACbiqB,MAAO,SAAe55E,GACpB,GAAIhC,KAAKg9I,KAAO,EAAGh9I,KAAKirC,KAAO,EAAGjrC,KAAKg8I,KAAOh8I,KAAKi8I,MAAQh6I,EAAGjC,KAAKwvC,MAAO,EAAIxvC,KAAK87I,SAAW,KAAM97I,KAAK2gH,OAAS,OAAQ3gH,KAAKqZ,IAAMpX,EAAGjC,KAAK28I,WAAW/7H,QAAQg8H,IAAiB56I,EAAG,IAAK,IAAIG,KAAKnC,KAAM,MAAQmC,EAAEb,OAAO,IAAMY,EAAExF,KAAKsD,KAAMmC,KAAO8W,OAAO9W,EAAEnB,MAAM,MAAQhB,KAAKmC,GAAKF,EACtR,EACAg7I,KAAM,WACJj9I,KAAKwvC,MAAO,EACZ,IAAIvtC,EAAIjC,KAAK28I,WAAW,GAAGE,WAC3B,GAAI,UAAY56I,EAAEV,KAAM,MAAMU,EAAEoX,IAChC,OAAOrZ,KAAKk9I,IACd,EACAhB,kBAAmB,SAA2Bl6I,GAC5C,GAAIhC,KAAKwvC,KAAM,MAAMxtC,EACrB,IAAIG,EAAInC,KACR,SAASm9I,EAAOj7I,EAAGG,GACjB,OAAO6c,EAAE3d,KAAO,QAAS2d,EAAE7F,IAAMrX,EAAGG,EAAE8oC,KAAO/oC,EAAGG,IAAMF,EAAEw+G,OAAS,OAAQx+G,EAAEkX,IAAMpX,KAAMI,CACzF,CACA,IAAK,IAAIA,EAAIrC,KAAK28I,WAAWv+I,OAAS,EAAGiE,GAAK,IAAKA,EAAG,CACpD,IAAIlE,EAAI6B,KAAK28I,WAAWt6I,GACtB6c,EAAI/gB,EAAE0+I,WACR,GAAI,SAAW1+I,EAAEo+I,OAAQ,OAAOY,EAAO,OACvC,GAAIh/I,EAAEo+I,QAAUv8I,KAAKg9I,KAAM,CACzB,IAAI77I,EAAIe,EAAExF,KAAKyB,EAAG,YAChBmE,EAAIJ,EAAExF,KAAKyB,EAAG,cAChB,GAAIgD,GAAKmB,EAAG,CACV,GAAItC,KAAKg9I,KAAO7+I,EAAEq+I,SAAU,OAAOW,EAAOh/I,EAAEq+I,UAAU,GACtD,GAAIx8I,KAAKg9I,KAAO7+I,EAAEs+I,WAAY,OAAOU,EAAOh/I,EAAEs+I,WAChD,MAAO,GAAIt7I,GACT,GAAInB,KAAKg9I,KAAO7+I,EAAEq+I,SAAU,OAAOW,EAAOh/I,EAAEq+I,UAAU,OACjD,CACL,IAAKl6I,EAAG,MAAM,IAAI9B,MAAM,0CACxB,GAAIR,KAAKg9I,KAAO7+I,EAAEs+I,WAAY,OAAOU,EAAOh/I,EAAEs+I,WAChD,CACF,CACF,CACF,EACAN,OAAQ,SAAgBl6I,EAAGD,GACzB,IAAK,IAAIG,EAAInC,KAAK28I,WAAWv+I,OAAS,EAAG+D,GAAK,IAAKA,EAAG,CACpD,IAAIE,EAAIrC,KAAK28I,WAAWx6I,GACxB,GAAIE,EAAEk6I,QAAUv8I,KAAKg9I,MAAQ96I,EAAExF,KAAK2F,EAAG,eAAiBrC,KAAKg9I,KAAO36I,EAAEo6I,WAAY,CAChF,IAAIt+I,EAAIkE,EACR,KACF,CACF,CACAlE,IAAM,UAAY8D,GAAK,aAAeA,IAAM9D,EAAEo+I,QAAUv6I,GAAKA,GAAK7D,EAAEs+I,aAAet+I,EAAI,MACvF,IAAI+gB,EAAI/gB,EAAIA,EAAE0+I,WAAa,CAAC,EAC5B,OAAO39H,EAAE3d,KAAOU,EAAGid,EAAE7F,IAAMrX,EAAG7D,GAAK6B,KAAK2gH,OAAS,OAAQ3gH,KAAKirC,KAAO9sC,EAAEs+I,WAAYzjI,GAAKhZ,KAAKo9I,SAASl+H,EACxG,EACAk+H,SAAU,SAAkBn7I,EAAGD,GAC7B,GAAI,UAAYC,EAAEV,KAAM,MAAMU,EAAEoX,IAChC,MAAO,UAAYpX,EAAEV,MAAQ,aAAeU,EAAEV,KAAOvB,KAAKirC,KAAOhpC,EAAEoX,IAAM,WAAapX,EAAEV,MAAQvB,KAAKk9I,KAAOl9I,KAAKqZ,IAAMpX,EAAEoX,IAAKrZ,KAAK2gH,OAAS,SAAU3gH,KAAKirC,KAAO,OAAS,WAAahpC,EAAEV,MAAQS,IAAMhC,KAAKirC,KAAOjpC,GAAIgX,CAC1N,EACAqkI,OAAQ,SAAgBp7I,GACtB,IAAK,IAAID,EAAIhC,KAAK28I,WAAWv+I,OAAS,EAAG4D,GAAK,IAAKA,EAAG,CACpD,IAAIG,EAAInC,KAAK28I,WAAW36I,GACxB,GAAIG,EAAEs6I,aAAex6I,EAAG,OAAOjC,KAAKo9I,SAASj7I,EAAE06I,WAAY16I,EAAEu6I,UAAWE,EAAcz6I,GAAI6W,CAC5F,CACF,EACA,MAAS,SAAgB/W,GACvB,IAAK,IAAID,EAAIhC,KAAK28I,WAAWv+I,OAAS,EAAG4D,GAAK,IAAKA,EAAG,CACpD,IAAIG,EAAInC,KAAK28I,WAAW36I,GACxB,GAAIG,EAAEo6I,SAAWt6I,EAAG,CAClB,IAAIC,EAAIC,EAAE06I,WACV,GAAI,UAAY36I,EAAEX,KAAM,CACtB,IAAIc,EAAIH,EAAEmX,IACVujI,EAAcz6I,EAChB,CACA,OAAOE,CACT,CACF,CACA,MAAM,IAAI7B,MAAM,wBAClB,EACA88I,cAAe,SAAuBt7I,EAAGG,EAAGD,GAC1C,OAAOlC,KAAK87I,SAAW,CACrBj0I,SAAUT,EAAOpF,GACjBo6I,WAAYj6I,EACZk6I,QAASn6I,GACR,SAAWlC,KAAK2gH,SAAW3gH,KAAKqZ,IAAMpX,GAAI+W,CAC/C,GACChX,CACL,CC9SA,SAASu7I,GAAmBC,EAAKl3I,EAASD,EAAQo3I,EAAOC,EAAQ7gJ,EAAKwc,GACpE,IACE,IAAIwC,EAAO2hI,EAAI3gJ,GAAKwc,GAChB9b,EAAQse,EAAKte,KACnB,CAAE,MAAO8C,GAEP,YADAgG,EAAOhG,EAET,CACIwb,EAAK2zB,KACPlpC,EAAQ/I,GAER8H,QAAQiB,QAAQ/I,GAAOiJ,KAAKi3I,EAAOC,EAEvC,CCbO,ICODC,GAAsB,kBAAT74I,KAAoBA,KAAOw1D,WAuEjC5lD,GAAc,SAAAkpI,GAAU,OArEhB,SAACr2E,EAAGmC,GACvB,IAAMpC,EAAK,SAACrgE,EAAKgoC,GAEf,OADAs4B,EAAEpkD,IAAI8rB,EAAOhoC,GACNA,CACT,EAqDA,OAnDe,SAAT42I,EAAS5uG,GACb,GAAIs4B,EAAEzkC,IAAImM,GACR,OAAOs4B,EAAEj3D,IAAI2+B,GAEf,IAAA6uG,EAAAp3E,EAAsBgD,EAAEz6B,GAAM,GAAvB1tC,EAAIu8I,EAAA,GAAEvgJ,EAAKugJ,EAAA,GAClB,OAAQv8I,GACN,KDpBoB,ECqBpB,KDtBoB,ECuBlB,OAAO+lE,EAAG/pE,EAAO0xC,GACnB,KDtBoB,ECuBlB,IACyB8uG,EADnBvhJ,EAAM8qE,EAAG,GAAIr4B,GAAO+uG,EAAAhiD,GACNz+F,GAAK,IAAzB,IAAAygJ,EAAA57I,MAAA27I,EAAAC,EAAA97I,KAAAstC,MACE,KADSP,EAAK8uG,EAAAxgJ,MACdf,EAAIoE,KAAKi9I,EAAO5uG,GAAO,CAAC,OAAA1uC,GAAAy9I,EAAAh8I,EAAAzB,EAAA,SAAAy9I,EAAAz7I,GAAA,CAC1B,OAAO/F,EAET,KD3BoB,EC4BlB,IACgCyhJ,EAD1B//H,EAASopD,EAAG,CAAC,EAAGr4B,GAAOivG,EAAAliD,GACFz+F,GAAK,IAAhC,IAAA2gJ,EAAA97I,MAAA67I,EAAAC,EAAAh8I,KAAAstC,MACE,KAAA2uG,EAAAz3E,EAAAu3E,EAAA1gJ,MAAA,GADUV,EAAGshJ,EAAA,GAAElvG,EAAKkvG,EAAA,GACpBjgI,EAAO2/H,EAAOhhJ,IAAQghJ,EAAO5uG,EAAM,CAAC,OAAA1uC,GAAA29I,EAAAl8I,EAAAzB,EAAA,SAAA29I,EAAA37I,GAAA,CACtC,OAAO2b,EAET,KDhCoB,ECiClB,OAAOopD,EAAG,IAAIxxC,KAAKv4B,GAAQ0xC,GAC7B,KDjCoB,ECkClB,IAAO/uC,EAAiB3C,EAAjB2C,OAAQqtB,EAAShwB,EAATgwB,MACf,OAAO+5C,EAAG,IAAI9Z,OAAOttD,EAAQqtB,GAAQ0hB,GAEvC,KDpCoB,ECqClB,IACgCmvG,EAD1Bp2F,EAAMsf,EAAG,IAAIx1C,IAAKmd,GAAOovG,EAAAriD,GACJz+F,GAAK,IAAhC,IAAA8gJ,EAAAj8I,MAAAg8I,EAAAC,EAAAn8I,KAAAstC,MACE,KAAA8uG,EAAA53E,EAAA03E,EAAA7gJ,MAAA,GADUV,EAAGyhJ,EAAA,GAAErvG,EAAKqvG,EAAA,GACpBt2F,EAAI7kC,IAAI06H,EAAOhhJ,GAAMghJ,EAAO5uG,GAAO,CAAC,OAAA1uC,GAAA89I,EAAAr8I,EAAAzB,EAAA,SAAA89I,EAAA97I,GAAA,CACtC,OAAOylD,EAET,KDzCoB,EC0ClB,IACyBu2F,EADnBp7H,EAAMmkD,EAAG,IAAIhoD,IAAK2vB,GAAOuvG,EAAAxiD,GACXz+F,GAAK,IAAzB,IAAAihJ,EAAAp8I,MAAAm8I,EAAAC,EAAAt8I,KAAAstC,MACE,KADSP,EAAKsvG,EAAAhhJ,MACd4lB,EAAIzD,IAAIm+H,EAAO5uG,GAAO,CAAC,OAAA1uC,GAAAi+I,EAAAx8I,EAAAzB,EAAA,SAAAi+I,EAAAj8I,GAAA,CACzB,OAAO4gB,EAET,KD9CoB,EC+ClB,IAAO/lB,EAAiBG,EAAjBH,KAAM84C,EAAW34C,EAAX24C,QACb,OAAOoxB,EAAG,IAAIq2E,GAAIvgJ,GAAM84C,GAAUjH,GAEpC,KDjDoB,ECkDlB,OAAOq4B,EAAGm3E,OAAOlhJ,GAAQ0xC,GAC3B,IAAK,SACH,OAAOq4B,EAAGvrE,OAAO0iJ,OAAOlhJ,IAAS0xC,GAErC,OAAOq4B,EAAG,IAAIq2E,GAAIp8I,GAAMhE,GAAQ0xC,EAClC,CAGF,CAWyCyvG,CAAa,IAAI5sH,IAAK8rH,EAAtBc,CAAkC,EAAE,ECvEvEC,GAAQ,GAEPxiJ,GAAY,CAAC,EAAbA,SACAiV,GAAQrV,OAARqV,KAED29C,GAAS,SAAAxxD,GACb,IAAMgE,SAAchE,EACpB,GAAa,WAATgE,IAAsBhE,EACxB,MAAO,CFde,EEcHgE,GAErB,IAAMq9I,EAAWziJ,GAASO,KAAKa,GAAOyD,MAAM,GAAI,GAChD,OAAQ49I,GACN,IAAK,QACH,MAAO,CFlBa,EEkBLD,IACjB,IAAK,SACH,MAAO,CFnBa,EEmBJA,IAClB,IAAK,OACH,MAAO,CFpBa,EEoBNA,IAChB,IAAK,SACH,MAAO,CFrBa,EEqBJA,IAClB,IAAK,MACH,MAAO,CFtBa,EEsBPA,IACf,IAAK,MACH,MAAO,CFvBa,EEuBPA,IAGjB,OAAIC,EAAS1lI,SAAS,SACb,CFhCe,EEgCP0lI,GAEbA,EAAS1lI,SAAS,SACb,CF7Be,EE6BP0lI,GAEV,CFpCiB,EEoCRA,EAClB,EAEMC,GAAa,SAAHt0E,GAAA,IAAAu0E,EAAAp4E,EAAA6D,EAAA,GAAKw0E,EAAID,EAAA,GAAEv9I,EAAIu9I,EAAA,UFzCL,IE0CxBC,IACU,aAATx9I,GAAgC,WAATA,EAAkB,EAiH9B2S,GAAY,SAAC3W,GAA8B,IAAAstE,EAAA3sE,UAAAE,OAAA,QAAAuR,IAAAzR,UAAA,GAAAA,UAAA,GAAP,CAAC,EAAhB8gJ,EAAIn0E,EAAJm0E,KAAMC,EAAKp0E,EAALo0E,MACjCv1E,EAAI,GACV,OAhHiB,SAACw1E,EAAQF,EAAMz3E,EAAGmC,GAEnC,IAAMpC,EAAK,SAACrgE,EAAK1J,GACf,IAAM0xC,EAAQy6B,EAAE9oE,KAAKqG,GAAO,EAE5B,OADAsgE,EAAEpkD,IAAI5lB,EAAO0xC,GACNA,CACT,EAyFA,OAvFa,SAAPkjC,EAAO50E,GACX,GAAIgqE,EAAEzkC,IAAIvlC,GACR,OAAOgqE,EAAEj3D,IAAI/S,GAEf,IAAgC4hJ,EAAAz4E,EAAb3X,GAAOxxD,GAAM,GAA3BwhJ,EAAII,EAAA,GAAE59I,EAAI49I,EAAA,GACf,OAAQJ,GACN,KF5DoB,EE6DlB,IAAIxxF,EAAQhwD,EACZ,OAAQgE,GACN,IAAK,SACHw9I,EFxDc,EEyDdxxF,EAAQhwD,EAAMpB,WACd,MACF,IAAK,WACL,IAAK,SACH,GAAI+iJ,EACF,MAAM,IAAI//I,UAAU,uBAAyBoC,GAC/CgsD,EAAQ,KACR,MACF,IAAK,YACH,OAAO+Z,EAAG,EF3EI,GE2EI/pE,GAEtB,OAAO+pE,EAAG,CAACy3E,EAAMxxF,GAAQhwD,GAE3B,KF7EoB,EE8ElB,GAAIgE,EACF,OAAO+lE,EAAG,CAAC/lE,EAAIwjE,EAAMxnE,IAASA,GAEhC,IAEyBwgJ,EAFnBvhJ,EAAM,GACNyyC,EAAQq4B,EAAG,CAACy3E,EAAMviJ,GAAMe,GAAOygJ,EAAAhiD,GACjBz+F,GAAK,IAAzB,IAAAygJ,EAAA57I,MAAA27I,EAAAC,EAAA97I,KAAAstC,MACE,KADS+d,EAAKwwF,EAAAxgJ,MACdf,EAAIoE,KAAKuxE,EAAK5kB,GAAO,CAAC,OAAAhtD,GAAAy9I,EAAAh8I,EAAAzB,EAAA,SAAAy9I,EAAAz7I,GAAA,CACxB,OAAO0sC,EAET,KFtFoB,EEuFlB,GAAI1tC,EACF,OAAQA,GACN,IAAK,SACH,OAAO+lE,EAAG,CAAC/lE,EAAMhE,EAAMpB,YAAaoB,GACtC,IAAK,UACL,IAAK,SACL,IAAK,SACH,OAAO+pE,EAAG,CAAC/lE,EAAMhE,EAAMspB,WAAYtpB,GAIzC,GAAIyhJ,GAAS,WAAYzhJ,EACvB,OAAO40E,EAAK50E,EAAM6hJ,UAEpB,IAE6BnB,EAFvB3wF,EAAU,GACVre,EAAQq4B,EAAG,CAACy3E,EAAMzxF,GAAU/vD,GAAO2gJ,EAAAliD,GACvB5qF,GAAK7T,IAAM,IAA7B,IAAA2gJ,EAAA97I,MAAA67I,EAAAC,EAAAh8I,KAAAstC,MAA+B,KAApB3yC,EAAGohJ,EAAA1gJ,OACR2hJ,GAAWL,GAAW9vF,GAAOxxD,EAAMV,MACrCywD,EAAQ1sD,KAAK,CAACuxE,EAAKt1E,GAAMs1E,EAAK50E,EAAMV,KACxC,CAAC,OAAA0D,GAAA29I,EAAAl8I,EAAAzB,EAAA,SAAA29I,EAAA37I,GAAA,CACD,OAAO0sC,EAET,KF5GoB,EE6GlB,OAAOq4B,EAAG,CAACy3E,EAAMxhJ,EAAM8hJ,eAAgB9hJ,GACzC,KF7GoB,EE8GlB,IAAO2C,EAAiB3C,EAAjB2C,OAAQqtB,EAAShwB,EAATgwB,MACf,OAAO+5C,EAAG,CAACy3E,EAAM,CAAC7+I,OAAAA,EAAQqtB,MAAAA,IAAShwB,GAErC,KFhHoB,EEiHlB,IAEgC6gJ,EAF1B9wF,EAAU,GACVre,EAAQq4B,EAAG,CAACy3E,EAAMzxF,GAAU/vD,GAAO8gJ,EAAAriD,GACdz+F,GAAK,IAAhC,IAAA8gJ,EAAAj8I,MAAAg8I,EAAAC,EAAAn8I,KAAAstC,MAAkC,KAAA8uG,EAAA53E,EAAA03E,EAAA7gJ,MAAA,GAAtBV,EAAGyhJ,EAAA,GAAE/wF,EAAK+wF,EAAA,IAChBY,IAAYL,GAAW9vF,GAAOlyD,MAASgiJ,GAAW9vF,GAAOxB,MAC3DD,EAAQ1sD,KAAK,CAACuxE,EAAKt1E,GAAMs1E,EAAK5kB,IAClC,CAAC,OAAAhtD,GAAA89I,EAAAr8I,EAAAzB,EAAA,SAAA89I,EAAA97I,GAAA,CACD,OAAO0sC,EAET,KFxHoB,EEyHlB,IAEyBsvG,EAFnBjxF,EAAU,GACVre,EAAQq4B,EAAG,CAACy3E,EAAMzxF,GAAU/vD,GAAOihJ,EAAAxiD,GACrBz+F,GAAK,IAAzB,IAAAihJ,EAAAp8I,MAAAm8I,EAAAC,EAAAt8I,KAAAstC,MAA2B,KAAhB+d,EAAKgxF,EAAAhhJ,OACV2hJ,GAAWL,GAAW9vF,GAAOxB,KAC/BD,EAAQ1sD,KAAKuxE,EAAK5kB,GACtB,CAAC,OAAAhtD,GAAAi+I,EAAAx8I,EAAAzB,EAAA,SAAAi+I,EAAAj8I,GAAA,CACD,OAAO0sC,EAIX,IAAOiH,EAAW34C,EAAX24C,QACP,OAAOoxB,EAAG,CAACy3E,EAAM,CAAC3hJ,KAAMmE,EAAM20C,QAAAA,IAAW34C,EAC3C,CAGF,CAgBSsY,GAAampI,GAAQC,KAAUD,EAAM,IAAIltH,IAAK43C,EAA9C7zD,CAAiDtY,GAAQmsE,CAClE,ECjJA,GAA0C,oBAApB41E,gBAEpB,SAACjhI,EAAKlhB,GAAO,OACXA,IAAY,SAAUA,GAAW,UAAWA,GAC1CuX,GAAYR,GAAUmK,EAAKlhB,IAAYmiJ,gBAAgBjhI,EAAI,EAE/D,SAACA,EAAKlhB,GAAO,OAAKuX,GAAYR,GAAUmK,EAAKlhB,GAAS,ECsCjD,SAASoiJ,GAAahiJ,GAM3B,IAJA,IAAMuJ,EAAS,GACXmoC,GAAS,EACTtvC,EAAQ,EACR6/I,EAAO,IACFvwG,EAAQ1xC,EAAMa,QAAQ,CAC7B,IAAMoE,EAAOjF,EAAM4N,WAAW8jC,GAE1BhwC,EAAU,GAGd,GACW,KAATuD,GACAi+H,GAAkBljI,EAAM4N,WAAW8jC,EAAQ,KAC3CwxF,GAAkBljI,EAAM4N,WAAW8jC,EAAQ,IAE3CuwG,EAAO,OAGJ,GAAIh9I,EAAO,IACT,oBAAoBoG,KAAK2B,OAAOovB,aAAan3B,MAChDvD,EAAUsL,OAAOovB,aAAan3B,SAI7B,GAAIA,EAAO,OAAUA,EAAO,MAAQ,CACvC,IAAMyoC,EAAO1tC,EAAM4N,WAAW8jC,EAAQ,GAGlCzsC,EAAO,OAAUyoC,EAAO,OAAUA,EAAO,OAC3ChsC,EAAUsL,OAAOovB,aAAan3B,EAAMyoC,GACpCu0G,EAAO,GAIPvgJ,EAAU,QAEd,MAGEA,EAAUsL,OAAOovB,aAAan3B,GAE5BvD,IACF6H,EAAOlG,KAAKrD,EAAMyD,MAAMrB,EAAOsvC,GAAQ7vB,mBAAmBngB,IAC1DU,EAAQsvC,EAAQuwG,EAAO,EACvBvgJ,EAAU,IAERugJ,IACFvwG,GAASuwG,EACTA,EAAO,EAEX,CACA,OAAO14I,EAAOgoC,KAAK,IAAMvxC,EAAMyD,MAAMrB,EACvC,CCjCO,SAAS8/I,GAA2B/1E,EAAGg2E,GAE5C,IAAM54I,EAAS,CAAC,CAACvF,KAAM,OAAQhE,MAAO,WAWtC,OATImiJ,EAAmB,GACrB54I,EAAOlG,KAAK,CACVW,KAAM,UACN0uC,QAAS,MACT3mC,WAAY,CAAC,EACb4c,SAAU,CAAC,CAAC3kB,KAAM,OAAQhE,MAAOgN,OAAOm1I,OAIrC54I,CACT,CAaO,SAAS64I,GAAyBC,EAAgBF,GACvD,MACE,sBACCE,EAAiB,IACjBF,EAAmB,EAAI,IAAMA,EAAmB,GAErD,CChHe,SAASG,GAAyB3/I,EAAQ4/I,GACvD,GAAc,MAAV5/I,EAAgB,MAAO,CAAC,EAC5B,IACIrD,EAAKsB,EADLjB,ECHS,SAAuCgD,EAAQ4/I,GAC5D,GAAc,MAAV5/I,EAAgB,MAAO,CAAC,EAC5B,IAEIrD,EAAKsB,EAFLjB,EAAS,CAAC,EACV6iJ,EAAahkJ,OAAOqV,KAAKlR,GAE7B,IAAK/B,EAAI,EAAGA,EAAI4hJ,EAAW3hJ,OAAQD,IACjCtB,EAAMkjJ,EAAW5hJ,GACb2hJ,EAAS52I,QAAQrM,IAAQ,IAC7BK,EAAOL,GAAOqD,EAAOrD,IAEvB,OAAOK,CACT,CDRe,CAA6BgD,EAAQ4/I,GAElD,GAAI/jJ,OAAO6tD,sBAAuB,CAChC,IAAIo2F,EAAmBjkJ,OAAO6tD,sBAAsB1pD,GACpD,IAAK/B,EAAI,EAAGA,EAAI6hJ,EAAiB5hJ,OAAQD,IACvCtB,EAAMmjJ,EAAiB7hJ,GACnB2hJ,EAAS52I,QAAQrM,IAAQ,GACxBd,OAAOC,UAAU8tD,qBAAqBptD,KAAKwD,EAAQrD,KACxDK,EAAOL,GAAOqD,EAAOrD,GAEzB,CACA,OAAOK,CACT,CEkDO,IA0EM+iJ,GAgBT,SAAUr3I,GACR,GAAa,OAATA,QAA0B+G,IAAT/G,EACnB,OAAOw1C,GAGT,GAAoB,oBAATx1C,EACT,OAAOs3I,GAAYt3I,GAGrB,GAAoB,kBAATA,EACT,OAAOnM,MAAMF,QAAQqM,GAAQu3I,GAAWv3I,GA+ChD,SAAsB4vG,GACpB,IAAM4nC,EAAwD5nC,EAE9D,OAAO0nC,GAAYh5I,GAMnB,SAASA,EAAIrH,GACX,IAKIhD,EALEwjJ,EACoBxgJ,EAM1B,IAAKhD,KAAO27G,EACV,GAAI6nC,EAAaxjJ,KAASujJ,EAAcvjJ,GAAM,OAAO,EAGvD,OAAO,CACT,CACF,CAtEwDyjJ,CAAa13I,GAG/D,GAAoB,kBAATA,EACT,OA0ER,SAAqB4vG,GACnB,OAAO0nC,GAAY3+I,GAKnB,SAASA,EAAK1B,GACZ,OAAOA,GAAQA,EAAK0B,OAASi3G,CAC/B,CACF,CAnFe+nC,CAAY33I,GAGrB,MAAM,IAAIpI,MAAM,+CAClB,EAOJ,SAAS2/I,GAAWK,GAKlB,IAHA,IAAMroC,EAAS,GACXlpE,GAAS,IAEJA,EAAQuxG,EAAMpiJ,QACrB+5G,EAAOlpE,GAASgxG,GAAQO,EAAMvxG,IAGhC,OAAOixG,IAMP,WACgB,IAAd,IAAIjxG,GAAS,EAACxzB,EAAAvd,UAAAE,OADAk3E,EAAU,IAAA74E,MAAAgf,GAAAnB,EAAA,EAAAA,EAAAmB,EAAAnB,IAAVg7D,EAAUh7D,GAAApc,UAAAoc,GAGxB,OAAS20B,EAAQkpE,EAAO/5G,QACtB,GAAI+5G,EAAOlpE,GAAOxoC,MAAMzG,KAAMs1E,GAAa,OAAO,EAGpD,OAAO,CACT,GACF,CAwDA,SAAS4qE,GAAYO,GACnB,OAMA,SAAeljJ,EAAO0xC,EAAOstD,GAC3B,OAAO52B,QACL+6E,GAAenjJ,IACbkjJ,EAAa/jJ,KACXsD,KACAzC,EACiB,kBAAV0xC,EAAqBA,OAAQt/B,EACpC4sF,QAAU5sF,GAGlB,CACF,CAEA,SAASyuC,KACP,OAAO,CACT,CAMA,SAASsiG,GAAenjJ,GACtB,OAAiB,OAAVA,GAAmC,kBAAVA,GAAsB,SAAUA,CAClE,CCnEA,IAAMykE,GAAQ,GAKD2+E,IAAW,EAKXC,IAAO,EAKPC,GAAO,OAiDb,SAASC,GAAaxlB,EAAM1yH,EAAMm4I,EAAS/4C,GAEhD,IAAIwQ,EAEgB,oBAAT5vG,GAA0C,oBAAZm4I,GACvC/4C,EAAU+4C,EAEVA,EAAUn4I,GAGV4vG,EAAQ5vG,EAGV,IAAM0iB,EAAK20H,GAAQznC,GACbnrD,EAAO26C,GAAW,EAAI,GAS5B,SAASvhD,EAAQ5mD,EAAMovC,EAAO+xG,GAC5B,IAAMzjJ,EACJsC,GAAwB,kBAATA,EAAoBA,EAAO,CAAC,EAG7C,GAA0B,kBAAftC,EAAMgE,KAAmB,CAClC,IAAMnE,EAEqB,kBAAlBG,EAAM0yC,QACT1yC,EAAM0yC,QAEc,kBAAf1yC,EAAMH,KACXG,EAAMH,UACNuS,EAEN5T,OAAOK,eAAe6kJ,EAAO,OAAQ,CACnC1jJ,MACE,SAAiBsC,EAAK0B,MAAQnE,EAAO,IAAMA,EAAO,IAAM,IAAO,KAErE,CAEA,OAAO6jJ,EAEP,SAASA,IAEP,IAEIC,EAEAriH,EAEAsiH,EANAr6I,EAASk7D,GAQb,KAAKp5D,GAAQ0iB,EAAGzrB,EAAMovC,EAAO+xG,EAAQA,EAAQ5iJ,OAAS,SAAMuR,MAE1D7I,EA0CR,SAAkBvJ,GAChB,GAAId,MAAMF,QAAQgB,GAChB,OAAOA,EAGT,GAAqB,kBAAVA,EACT,MAAO,CAACojJ,GAAUpjJ,GAGpB,OAAiB,OAAVA,QAA4BoS,IAAVpS,EAAsBykE,GAAQ,CAACzkE,EAC1D,CApDiB6jJ,CAASL,EAAQlhJ,EAAMmhJ,IAE5Bl6I,EAAO,KAAO85I,IAChB,OAAO95I,EAIX,GAAI,aAAcjH,GAAQA,EAAKqmB,SAAU,CACvC,IAAMm7H,EAA2CxhJ,EAEjD,GAAIwhJ,EAAan7H,UAAYpf,EAAO,KAAO+5I,GAIzC,IAHAhiH,GAAUmpE,EAAUq5C,EAAan7H,SAAS9nB,QAAU,GAAKivD,EACzD8zF,EAAeH,EAAQjnI,OAAOsnI,GAEvBxiH,GAAU,GAAKA,EAASwiH,EAAan7H,SAAS9nB,QAAQ,CAC3D,IAAMyvB,EAAQwzH,EAAan7H,SAAS2Y,GAIpC,IAFAqiH,EAAYz6F,EAAQ54B,EAAOgR,EAAQsiH,EAAvB16F,IAEE,KAAOm6F,GACnB,OAAOM,EAGTriH,EAC0B,kBAAjBqiH,EAAU,GAAkBA,EAAU,GAAKriH,EAASwuB,CAC/D,CAEJ,CAEA,OAAOvmD,CACT,CACF,CAzEA2/C,CAAQ60E,OAAM3rH,EAAW,GAAzB82C,EA0EF,CCnGO,SAASw6F,GAAM3lB,EAAMgmB,EAAeC,EAAkBC,GAE3D,IAAIx5C,EAEAp/F,EAEAm4I,EAGuB,oBAAlBO,GACqB,oBAArBC,GAEP34I,OAAO+G,EACPoxI,EAAUO,EACVt5C,EAAUu5C,IAGV34I,EAAO04I,EAEPP,EAAUQ,EACVv5C,EAAUw5C,GAGZV,GAAaxlB,EAAM1yH,GAMnB,SAAkB/I,EAAMmhJ,GACtB,IAAMzkD,EAASykD,EAAQA,EAAQ5iJ,OAAS,GAClC6wC,EAAQstD,EAASA,EAAOr2E,SAAShd,QAAQrJ,QAAQ8P,EACvD,OAAOoxI,EAAQlhJ,EAAMovC,EAAOstD,EAC9B,GAVmCyL,EAWrC,CClSO,SAASy5C,GAAOl8I,EAAO1F,GAC5B,IAAM6hJ,EAAU7hJ,EAAKi6I,cACjB6H,EAAS,IAQb,GANgB,cAAZD,EACFC,GAAU,KACW,SAAZD,IACTC,GAAU,KAAO9hJ,EAAKkhG,OAASlhG,EAAKgqI,YAAc,KAGlC,mBAAdhqI,EAAK0B,KACP,MAAO,CAAC,CAACA,KAAM,OAAQhE,MAAO,KAAOsC,EAAK49G,IAAMkkC,IAGlD,IAAMC,EAAWr8I,EAAM2B,IAAIrH,GACrBonE,EAAO26E,EAAS,GAElB36E,GAAsB,SAAdA,EAAK1lE,KACf0lE,EAAK1pE,MAAQ,IAAM0pE,EAAK1pE,MAExBqkJ,EAASt9G,QAAQ,CAAC/iC,KAAM,OAAQhE,MAAO,MAGzC,IAAMg9C,EAAOqnG,EAASA,EAASxjJ,OAAS,GAQxC,OANIm8C,GAAsB,SAAdA,EAAKh5C,KACfg5C,EAAKh9C,OAASokJ,EAEdC,EAAShhJ,KAAK,CAACW,KAAM,OAAQhE,MAAOokJ,IAG/BC,CACT,CCgEA,SAASC,GAAchiJ,GACrB,IAAMu6I,EAASv6I,EAAKu6I,OAEpB,OAAkB,OAAXA,QAA8BzqI,IAAXyqI,EACtBv6I,EAAKqmB,SAAS9nB,OAAS,EACvBg8I,CACN,CC5HA,IAAM1jC,GAAM,EACNU,GAAQ,GAWP,SAAS0qC,GAAUvkJ,GAQxB,IAPA,IAAM2C,EAASqK,OAAOhN,GAChBo/B,EAAS,YACXn9B,EAAQm9B,EAAO57B,KAAKb,GACpBo6C,EAAO,EAEL/6C,EAAQ,GAEPC,GACLD,EAAMqB,KACJmhJ,GAAS7hJ,EAAOc,MAAMs5C,EAAM96C,EAAMyvC,OAAQqL,EAAO,GAAG,GACpD96C,EAAM,IAGR86C,EAAO96C,EAAMyvC,MAAQzvC,EAAM,GAAGpB,OAC9BoB,EAAQm9B,EAAO57B,KAAKb,GAKtB,OAFAX,EAAMqB,KAAKmhJ,GAAS7hJ,EAAOc,MAAMs5C,GAAOA,EAAO,GAAG,IAE3C/6C,EAAMuvC,KAAK,GACpB,CAYA,SAASizG,GAASxkJ,EAAOoC,EAAOM,GAC9B,IAAImmI,EAAa,EACbE,EAAW/oI,EAAMa,OAErB,GAAIuB,EAGF,IAFA,IAAI6C,EAAOjF,EAAMm8I,YAAYtT,GAEtB5jI,IAASk0G,IAAOl0G,IAAS40G,IAC9BgvB,IACA5jI,EAAOjF,EAAMm8I,YAAYtT,GAI7B,GAAInmI,EAGF,IAFA,IAAIuC,EAAOjF,EAAMm8I,YAAYpT,EAAW,GAEjC9jI,IAASk0G,IAAOl0G,IAAS40G,IAC9BkvB,IACA9jI,EAAOjF,EAAMm8I,YAAYpT,EAAW,GAIxC,OAAOA,EAAWF,EAAa7oI,EAAMyD,MAAMolI,EAAYE,GAAY,EACrE,CCvCO,IAAMrhI,GAAW,CACtB+8I,WCXK,SAAoBz8I,EAAO1F,GAEhC,IAAMiH,EAAS,CACbvF,KAAM,UACN0uC,QAAS,aACT3mC,WAAY,CAAC,EACb4c,SAAU3gB,EAAMwiH,KAAKxiH,EAAM2B,IAAIrH,IAAO,IAGxC,OADA0F,EAAM08I,MAAMpiJ,EAAMiH,GACXvB,EAAM28I,UAAUriJ,EAAMiH,EAC/B,EDEEq7I,MEXK,SAAmB58I,EAAO1F,GAE/B,IAAMiH,EAAS,CAACvF,KAAM,UAAW0uC,QAAS,KAAM3mC,WAAY,CAAC,EAAG4c,SAAU,IAE1E,OADA3gB,EAAM08I,MAAMpiJ,EAAMiH,GACX,CAACvB,EAAM28I,UAAUriJ,EAAMiH,GAAS,CAACvF,KAAM,OAAQhE,MAAO,MAC/D,EFOEiF,KGZK,SAAc+C,EAAO1F,GAC1B,IAAMtC,EAAQsC,EAAKtC,MAAQsC,EAAKtC,MAAQ,KAAO,GAEzC+L,EAAa,CAAC,EAEhBzJ,EAAKwgH,OACP/2G,EAAW89D,UAAY,CAAC,YAAcvnE,EAAKwgH,OAK7C,IAAIv5G,EAAS,CACXvF,KAAM,UACN0uC,QAAS,OACT3mC,WAAAA,EACA4c,SAAU,CAAC,CAAC3kB,KAAM,OAAQhE,MAAAA,KAa5B,OAVIsC,EAAKmrB,OACPlkB,EAAOrD,KAAO,CAACunB,KAAMnrB,EAAKmrB,OAG5BzlB,EAAM08I,MAAMpiJ,EAAMiH,GAIlBA,EAAS,CAACvF,KAAM,UAAW0uC,QAAS,MAAO3mC,WAAY,CAAC,EAAG4c,SAAU,CAHrEpf,EAASvB,EAAM28I,UAAUriJ,EAAMiH,KAI/BvB,EAAM08I,MAAMpiJ,EAAMiH,GACXA,CACT,EHhBEqrB,OIdK,SAAuB5sB,EAAO1F,GAEnC,IAAMiH,EAAS,CACbvF,KAAM,UACN0uC,QAAS,MACT3mC,WAAY,CAAC,EACb4c,SAAU3gB,EAAM2B,IAAIrH,IAGtB,OADA0F,EAAM08I,MAAMpiJ,EAAMiH,GACXvB,EAAM28I,UAAUriJ,EAAMiH,EAC/B,EJKE4tI,SKfK,SAAkBnvI,EAAO1F,GAE9B,IAAMiH,EAAS,CACbvF,KAAM,UACN0uC,QAAS,KACT3mC,WAAY,CAAC,EACb4c,SAAU3gB,EAAM2B,IAAIrH,IAGtB,OADA0F,EAAM08I,MAAMpiJ,EAAMiH,GACXvB,EAAM28I,UAAUriJ,EAAMiH,EAC/B,ELMEs7I,kBMjBK,SAA2B78I,EAAO1F,GACvC,IAQIwiJ,EAREC,EACmC,kBAAhC/8I,EAAMpI,QAAQmlJ,cACjB/8I,EAAMpI,QAAQmlJ,cACd,gBACAtuH,EAAKzpB,OAAO1K,EAAKgqI,YAAY7oH,cAC7BuhI,EAAShD,GAAavrH,EAAGnT,eACzBouB,EAAQ1pC,EAAMi9I,cAAct5I,QAAQ8qB,GAItCyuH,EAAel9I,EAAMm9I,eAAepyI,IAAI0jB,QAEvBrkB,IAAjB8yI,GACFA,EAAe,EACfl9I,EAAMi9I,cAAc5hJ,KAAKozB,GACzBquH,EAAU98I,EAAMi9I,cAAcpkJ,QAE9BikJ,EAAUpzG,EAAQ,EAGpBwzG,GAAgB,EAChBl9I,EAAMm9I,eAAev/H,IAAI6Q,EAAIyuH,GAG7B,IAAM13H,EAAO,CACXxpB,KAAM,UACN0uC,QAAS,IACT3mC,WAAY,CACV81B,KAAM,IAAMkjH,EAAgB,MAAQC,EACpCvuH,GACEsuH,EACA,SACAC,GACCE,EAAe,EAAI,IAAMA,EAAe,IAC3CE,iBAAiB,EACjBroC,gBAAiB,CAAC,mBAEpBp0F,SAAU,CAAC,CAAC3kB,KAAM,OAAQhE,MAAOgN,OAAO83I,MAE1C98I,EAAM08I,MAAMpiJ,EAAMkrB,GAGlB,IAAM63H,EAAM,CACVrhJ,KAAM,UACN0uC,QAAS,MACT3mC,WAAY,CAAC,EACb4c,SAAU,CAAC6E,IAGb,OADAxlB,EAAM08I,MAAMpiJ,EAAM+iJ,GACXr9I,EAAM28I,UAAUriJ,EAAM+iJ,EAC/B,ENjCE7X,QOjBK,SAAiBxlI,EAAO1F,GAE7B,IAAMiH,EAAS,CACbvF,KAAM,UACN0uC,QAAS,IAAMpwC,EAAK25I,MACpBlwI,WAAY,CAAC,EACb4c,SAAU3gB,EAAM2B,IAAIrH,IAGtB,OADA0F,EAAM08I,MAAMpiJ,EAAMiH,GACXvB,EAAM28I,UAAUriJ,EAAMiH,EAC/B,EPQE81G,KQhBK,SAAcr3G,EAAO1F,GAC1B,GAAI0F,EAAMpI,QAAQ0lJ,mBAAoB,CAEpC,IAAM/7I,EAAS,CAACvF,KAAM,MAAOhE,MAAOsC,EAAKtC,OAEzC,OADAgI,EAAM08I,MAAMpiJ,EAAMiH,GACXvB,EAAM28I,UAAUriJ,EAAMiH,EAC/B,CAGF,ERQEg8I,eSjBK,SAAwBv9I,EAAO1F,GACpC,IAAMm0B,EAAKzpB,OAAO1K,EAAKgqI,YAAY7oH,cAC7BmmH,EAAM5hI,EAAMw9I,eAAezyI,IAAI0jB,GAErC,IAAKmzG,EACH,OAAOsa,GAAOl8I,EAAO1F,GAIvB,IAAMyJ,EAAa,CAACxL,IAAKyhJ,GAAapY,EAAIpqG,KAAO,IAAK0gF,IAAK59G,EAAK49G,KAE9C,OAAd0pB,EAAI9yD,YAAgC1kE,IAAdw3H,EAAI9yD,QAC5B/qE,EAAW+qE,MAAQ8yD,EAAI9yD,OAIzB,IAAMvtE,EAAS,CAACvF,KAAM,UAAW0uC,QAAS,MAAO3mC,WAAAA,EAAY4c,SAAU,IAEvE,OADA3gB,EAAM08I,MAAMpiJ,EAAMiH,GACXvB,EAAM28I,UAAUriJ,EAAMiH,EAC/B,ETDEiuI,MUpBK,SAAexvI,EAAO1F,GAE3B,IAAMyJ,EAAa,CAACxL,IAAKyhJ,GAAa1/I,EAAKk9B,MAE1B,OAAbl9B,EAAK49G,UAA6B9tG,IAAb9P,EAAK49G,MAC5Bn0G,EAAWm0G,IAAM59G,EAAK49G,KAGL,OAAf59G,EAAKw0E,YAAiC1kE,IAAf9P,EAAKw0E,QAC9B/qE,EAAW+qE,MAAQx0E,EAAKw0E,OAI1B,IAAMvtE,EAAS,CAACvF,KAAM,UAAW0uC,QAAS,MAAO3mC,WAAAA,EAAY4c,SAAU,IAEvE,OADA3gB,EAAM08I,MAAMpiJ,EAAMiH,GACXvB,EAAM28I,UAAUriJ,EAAMiH,EAC/B,EVKEk8I,WWpBK,SAAoBz9I,EAAO1F,GAEhC,IAAMg9B,EAAO,CAACt7B,KAAM,OAAQhE,MAAOsC,EAAKtC,MAAM0B,QAAQ,YAAa,MACnEsG,EAAM08I,MAAMpiJ,EAAMg9B,GAGlB,IAAM/1B,EAAS,CACbvF,KAAM,UACN0uC,QAAS,OACT3mC,WAAY,CAAC,EACb4c,SAAU,CAAC2W,IAGb,OADAt3B,EAAM08I,MAAMpiJ,EAAMiH,GACXvB,EAAM28I,UAAUriJ,EAAMiH,EAC/B,EXOEm8I,cYpBK,SAAuB19I,EAAO1F,GACnC,IAAMm0B,EAAKzpB,OAAO1K,EAAKgqI,YAAY7oH,cAC7BmmH,EAAM5hI,EAAMw9I,eAAezyI,IAAI0jB,GAErC,IAAKmzG,EACH,OAAOsa,GAAOl8I,EAAO1F,GAIvB,IAAMyJ,EAAa,CAAC81B,KAAMmgH,GAAapY,EAAIpqG,KAAO,KAEhC,OAAdoqG,EAAI9yD,YAAgC1kE,IAAdw3H,EAAI9yD,QAC5B/qE,EAAW+qE,MAAQ8yD,EAAI9yD,OAIzB,IAAMvtE,EAAS,CACbvF,KAAM,UACN0uC,QAAS,IACT3mC,WAAAA,EACA4c,SAAU3gB,EAAM2B,IAAIrH,IAGtB,OADA0F,EAAM08I,MAAMpiJ,EAAMiH,GACXvB,EAAM28I,UAAUriJ,EAAMiH,EAC/B,EZHEikB,KavBK,SAAcxlB,EAAO1F,GAE1B,IAAMyJ,EAAa,CAAC81B,KAAMmgH,GAAa1/I,EAAKk9B,MAEzB,OAAfl9B,EAAKw0E,YAAiC1kE,IAAf9P,EAAKw0E,QAC9B/qE,EAAW+qE,MAAQx0E,EAAKw0E,OAI1B,IAAMvtE,EAAS,CACbvF,KAAM,UACN0uC,QAAS,IACT3mC,WAAAA,EACA4c,SAAU3gB,EAAM2B,IAAIrH,IAGtB,OADA0F,EAAM08I,MAAMpiJ,EAAMiH,GACXvB,EAAM28I,UAAUriJ,EAAMiH,EAC/B,EbOEkuI,SFnBK,SAAkBzvI,EAAO1F,EAAM08F,GACpC,IAAMrmF,EAAU3Q,EAAM2B,IAAIrH,GACpBqjJ,EAAQ3mD,EAyEhB,SAAmB18F,GACjB,IAAIqjJ,GAAQ,EACZ,GAAkB,SAAdrjJ,EAAK0B,KAAiB,CACxB2hJ,EAAQrjJ,EAAKu6I,SAAU,EAIvB,IAHA,IAAMl0H,EAAWrmB,EAAKqmB,SAClB+oB,GAAS,GAELi0G,KAAWj0G,EAAQ/oB,EAAS9nB,QAClC8kJ,EAAQrB,GAAc37H,EAAS+oB,GAEnC,CAEA,OAAOi0G,CACT,CAtFyBC,CAAU5mD,GAAUslD,GAAchiJ,GAEnDyJ,EAAa,CAAC,EAEd4c,EAAW,GAEjB,GAA4B,mBAAjBrmB,EAAK8kB,QAAuB,CACrC,IAEImmH,EAFE7jE,EAAO/wD,EAAQ,GAIjB+wD,GAAsB,YAAdA,EAAK1lE,MAAuC,MAAjB0lE,EAAKh3B,QAC1C66F,EAAY7jE,GAEZ6jE,EAAY,CAACvpI,KAAM,UAAW0uC,QAAS,IAAK3mC,WAAY,CAAC,EAAG4c,SAAU,IACtEhQ,EAAQouB,QAAQwmG,IAGdA,EAAU5kH,SAAS9nB,OAAS,GAC9B0sI,EAAU5kH,SAASoe,QAAQ,CAAC/iC,KAAM,OAAQhE,MAAO,MAGnDutI,EAAU5kH,SAASoe,QAAQ,CACzB/iC,KAAM,UACN0uC,QAAS,QACT3mC,WAAY,CAAC/H,KAAM,WAAYojB,QAAS9kB,EAAK8kB,QAASoB,UAAU,GAChEG,SAAU,KAKZ5c,EAAW89D,UAAY,CAAC,iBAC1B,CAIA,IAFA,IAAIn4B,GAAS,IAEJA,EAAQ/4B,EAAQ9X,QAAQ,CAC/B,IAAMyvB,EAAQ3X,EAAQ+4B,IAIpBi0G,GACU,IAAVj0G,GACe,YAAfphB,EAAMtsB,MACY,MAAlBssB,EAAMoiB,UAEN/pB,EAAStlB,KAAK,CAACW,KAAM,OAAQhE,MAAO,OAGnB,YAAfswB,EAAMtsB,MAAwC,MAAlBssB,EAAMoiB,SAAoBizG,EAGxDh9H,EAAStlB,KAAKitB,GAFd3H,EAAStlB,KAAI6F,MAAbyf,EAAQ6+C,EAASl3C,EAAM3H,UAI3B,CAEA,IAAMq0B,EAAOrkC,EAAQA,EAAQ9X,OAAS,GAGlCm8C,IAAS2oG,GAAuB,YAAd3oG,EAAKh5C,MAAuC,MAAjBg5C,EAAKtK,UACpD/pB,EAAStlB,KAAK,CAACW,KAAM,OAAQhE,MAAO,OAItC,IAAMuJ,EAAS,CAACvF,KAAM,UAAW0uC,QAAS,KAAM3mC,WAAAA,EAAY4c,SAAAA,GAE5D,OADA3gB,EAAM08I,MAAMpiJ,EAAMiH,GACXvB,EAAM28I,UAAUriJ,EAAMiH,EAC/B,EEjDE03D,KcxBK,SAAcj5D,EAAO1F,GAE1B,IAAMyJ,EAAa,CAAC,EACd4M,EAAU3Q,EAAM2B,IAAIrH,GACtBovC,GAAS,EAOb,IAL0B,kBAAfpvC,EAAKF,OAAqC,IAAfE,EAAKF,QACzC2J,EAAW3J,MAAQE,EAAKF,SAIjBsvC,EAAQ/4B,EAAQ9X,QAAQ,CAC/B,IAAMyvB,EAAQ3X,EAAQ+4B,GAEtB,GACiB,YAAfphB,EAAMtsB,MACY,OAAlBssB,EAAMoiB,SACNpiB,EAAMvkB,YACN7M,MAAMF,QAAQsxB,EAAMvkB,WAAW89D,YAC/Bv5C,EAAMvkB,WAAW89D,UAAUluD,SAAS,kBACpC,CACA5P,EAAW89D,UAAY,CAAC,sBACxB,KACF,CACF,CAGA,IAAMtgE,EAAS,CACbvF,KAAM,UACN0uC,QAASpwC,EAAKs6I,QAAU,KAAO,KAC/B7wI,WAAAA,EACA4c,SAAU3gB,EAAMwiH,KAAK7xG,GAAS,IAGhC,OADA3Q,EAAM08I,MAAMpiJ,EAAMiH,GACXvB,EAAM28I,UAAUriJ,EAAMiH,EAC/B,EdVEgkI,Ue1BK,SAAmBvlI,EAAO1F,GAE/B,IAAMiH,EAAS,CACbvF,KAAM,UACN0uC,QAAS,IACT3mC,WAAY,CAAC,EACb4c,SAAU3gB,EAAM2B,IAAIrH,IAGtB,OADA0F,EAAM08I,MAAMpiJ,EAAMiH,GACXvB,EAAM28I,UAAUriJ,EAAMiH,EAC/B,EfkBE2oE,KgB3BK,SAAclqE,EAAO1F,GAE1B,IAAMiH,EAAS,CAACvF,KAAM,OAAQ2kB,SAAU3gB,EAAMwiH,KAAKxiH,EAAM2B,IAAIrH,KAE7D,OADA0F,EAAM08I,MAAMpiJ,EAAMiH,GACXvB,EAAM28I,UAAUriJ,EAAMiH,EAC/B,EhBuBE8uI,OiB7BK,SAAgBrwI,EAAO1F,GAE5B,IAAMiH,EAAS,CACbvF,KAAM,UACN0uC,QAAS,SACT3mC,WAAY,CAAC,EACb4c,SAAU3gB,EAAM2B,IAAIrH,IAGtB,OADA0F,EAAM08I,MAAMpiJ,EAAMiH,GACXvB,EAAM28I,UAAUriJ,EAAMiH,EAC/B,EjBoBEs8I,MkB/BK,SAAe79I,EAAO1F,GAC3B,IAAMsW,EAAO5Q,EAAM2B,IAAIrH,GACjBwjJ,EAAWltI,EAAKgd,QAEhBmwH,EAAe,GAErB,GAAID,EAAU,CAEZ,IAAMp8E,EAAO,CACX1lE,KAAM,UACN0uC,QAAS,QACT3mC,WAAY,CAAC,EACb4c,SAAU3gB,EAAMwiH,KAAK,CAACs7B,IAAW,IAEnC99I,EAAM08I,MAAMpiJ,EAAKqmB,SAAS,GAAI+gD,GAC9Bq8E,EAAa1iJ,KAAKqmE,EACpB,CAEA,GAAI9wD,EAAK/X,OAAS,EAAG,CAEnB,IAAM0mB,EAAO,CACXvjB,KAAM,UACN0uC,QAAS,QACT3mC,WAAY,CAAC,EACb4c,SAAU3gB,EAAMwiH,KAAK5xG,GAAM,IAGvBxW,EAAQg6H,GAAW95H,EAAKqmB,SAAS,IACjCjmB,EAAMw5H,GAAS55H,EAAKqmB,SAASrmB,EAAKqmB,SAAS9nB,OAAS,IACtDuB,GAASM,IAAK6kB,EAAKplB,SAAW,CAACC,MAAAA,EAAOM,IAAAA,IAC1CqjJ,EAAa1iJ,KAAKkkB,EACpB,CAGA,IAAMhe,EAAS,CACbvF,KAAM,UACN0uC,QAAS,QACT3mC,WAAY,CAAC,EACb4c,SAAU3gB,EAAMwiH,KAAKu7B,GAAc,IAGrC,OADA/9I,EAAM08I,MAAMpiJ,EAAMiH,GACXvB,EAAM28I,UAAUriJ,EAAMiH,EAC/B,ElBVEy8I,UmB/BK,SAAmBh+I,EAAO1F,GAI/B,IAAMiH,EAAS,CACbvF,KAAM,UACN0uC,QAAS,KACT3mC,WAAY,CAAC,EACb4c,SAAU3gB,EAAM2B,IAAIrH,IAGtB,OADA0F,EAAM08I,MAAMpiJ,EAAMiH,GACXvB,EAAM28I,UAAUriJ,EAAMiH,EAC/B,EnBoBE08I,SoB3BK,SAAkBj+I,EAAO1F,EAAM08F,GAYpC,IAXA,IAAMo9C,EAAWp9C,EAASA,EAAOr2E,cAAWvW,EAGtCsgC,EAAuB,KADZ0pG,EAAWA,EAASzwI,QAAQrJ,GAAQ,GACpB,KAAO,KAElCmoH,EAAQzrB,GAA0B,UAAhBA,EAAOh7F,KAAmBg7F,EAAOyrB,WAAQr4G,EAC3DvR,EAAS4pH,EAAQA,EAAM5pH,OAASyB,EAAKqmB,SAAS9nB,OAChDqlJ,GAAa,EAEXC,EAAQ,KAELD,EAAYrlJ,GAAQ,CAE3B,IAAMulJ,EAAO9jJ,EAAKqmB,SAASu9H,GAErBn6I,EAAa,CAAC,EACdszH,EAAa5U,EAAQA,EAAMy7B,QAAa9zI,EAE1CitH,IACFtzH,EAAW0+G,MAAQ4U,GAIrB,IAAI91H,EAAS,CAACvF,KAAM,UAAW0uC,QAAAA,EAAS3mC,WAAAA,EAAY4c,SAAU,IAE1Dy9H,IACF78I,EAAOof,SAAW3gB,EAAM2B,IAAIy8I,GAC5Bp+I,EAAM08I,MAAM0B,EAAM78I,GAClBA,EAASvB,EAAM28I,UAAUyB,EAAM78I,IAGjC48I,EAAM9iJ,KAAKkG,EACb,CAGA,IAAMA,EAAS,CACbvF,KAAM,UACN0uC,QAAS,KACT3mC,WAAY,CAAC,EACb4c,SAAU3gB,EAAMwiH,KAAK27B,GAAO,IAG9B,OADAn+I,EAAM08I,MAAMpiJ,EAAMiH,GACXvB,EAAM28I,UAAUriJ,EAAMiH,EAC/B,EpBhBE+1B,KqBjCK,SAAct3B,EAAO1F,GAE1B,IAAMiH,EAAS,CAACvF,KAAM,OAAQhE,MAAOukJ,GAAUv3I,OAAO1K,EAAKtC,SAE3D,OADAgI,EAAM08I,MAAMpiJ,EAAMiH,GACXvB,EAAM28I,UAAUriJ,EAAMiH,EAC/B,ErB6BE8gI,csBlCK,SAAuBriI,EAAO1F,GAEnC,IAAMiH,EAAS,CACbvF,KAAM,UACN0uC,QAAS,KACT3mC,WAAY,CAAC,EACb4c,SAAU,IAGZ,OADA3gB,EAAM08I,MAAMpiJ,EAAMiH,GACXvB,EAAM28I,UAAUriJ,EAAMiH,EAC/B,EtByBE88I,KAAMt7D,GACNu7D,KAAMv7D,GACNpxB,WAAYoxB,GACZw7D,mBAAoBx7D,IAItB,SAASA,KAET,qBuBgHMmwB,GAAM,CAAC,EAAEx8G,eAGTgiI,GAAe,CAAC,EAsJtB,SAASgkB,GAAM53F,EAAME,GACfF,EAAK3qD,WAAU6qD,EAAG7qD,SnGlPjB,SAAkBG,GACvB,IAAMF,EAAQg6H,GAAW95H,GACnBI,EAAMw5H,GAAS55H,GAErB,GAAIF,GAASM,EACX,MAAO,CAACN,MAAAA,EAAOM,IAAAA,EAEnB,CmG2OmCP,CAAS2qD,GAC5C,CAcA,SAAS63F,GAAU73F,EAAME,GAEvB,IAAIzjD,EAASyjD,EAGb,GAAIF,GAAQA,EAAK5mD,KAAM,CACrB,IAAMolD,EAAQwB,EAAK5mD,KAAKolD,MAClBk7F,EAAY15F,EAAK5mD,KAAKsgJ,UACtBC,EAAc35F,EAAK5mD,KAAKugJ,YAE9B,GAAqB,kBAAVn7F,EAGT,GAAoB,YAAhB/hD,EAAOvF,KACTuF,EAAOmpC,QAAU4Y,OAUjB/hD,EAAS,CAACvF,KAAM,UAAW0uC,QAAS4Y,EAAOv/C,WAAY,CAAC,EAAG4c,SAD1C,aAAcpf,EAASA,EAAOof,SAAW,CAACpf,IAK3C,YAAhBA,EAAOvF,MAAsByiJ,GAC/BjoJ,OAAO8mB,OAAO/b,EAAOwC,WAAYg2I,GAAgB0E,IAIjD,aAAcl9I,GACdA,EAAOof,UACO,OAAd69H,QACcp0I,IAAdo0I,IAEAj9I,EAAOof,SAAW69H,EAEtB,CAEA,OAAOj9I,CACT,CAYA,SAASm9I,GAAsB1+I,EAAO1F,GACpC,IAAM4D,EAAO5D,EAAK4D,MAAQ,CAAC,EAErBqD,IACJ,UAAWjH,IACT44G,GAAI/7G,KAAK+G,EAAM,gBAAkBg1G,GAAI/7G,KAAK+G,EAAM,aAE9C,CACElC,KAAM,UACN0uC,QAAS,MACT3mC,WAAY,CAAC,EACb4c,SAAU3gB,EAAM2B,IAAIrH,IALtB,CAAC0B,KAAM,OAAQhE,MAAOsC,EAAKtC,OASjC,OADAgI,EAAM08I,MAAMpiJ,EAAMiH,GACXvB,EAAM28I,UAAUriJ,EAAMiH,EAC/B,CAcO,SAASihH,GAAKm8B,EAAOhB,GAE1B,IAAMp8I,EAAS,GACXmoC,GAAS,EAMb,IAJIi0G,GACFp8I,EAAOlG,KAAK,CAACW,KAAM,OAAQhE,MAAO,SAG3B0xC,EAAQi1G,EAAM9lJ,QACjB6wC,GAAOnoC,EAAOlG,KAAK,CAACW,KAAM,OAAQhE,MAAO,OAC7CuJ,EAAOlG,KAAKsjJ,EAAMj1G,IAOpB,OAJIi0G,GAASgB,EAAM9lJ,OAAS,GAC1B0I,EAAOlG,KAAK,CAACW,KAAM,OAAQhE,MAAO,OAG7BuJ,CACT,CAUA,SAASq9I,GAAuB5mJ,GAI9B,IAHA,IAAI0xC,EAAQ,EACRzsC,EAAOjF,EAAM4N,WAAW8jC,GAEZ,IAATzsC,GAAuB,KAATA,GACnBysC,IACAzsC,EAAOjF,EAAM4N,WAAW8jC,GAG1B,OAAO1xC,EAAMyD,MAAMiuC,EACrB,CC7XO,SAASm1G,GAAO9oB,EAAMn+H,GAC3B,IAAMoI,EDsGD,SAAqB+1H,EAAMn+H,GAChC,IAAMq0D,EAAWr0D,GAAW8gI,GAEtB8kB,EAAiB,IAAIjxH,IAErBuyH,EAAe,IAAIvyH,IAEnB4wH,EAAiB,IAAI5wH,IAIrB7sB,EAAQwiE,EAAAA,EAAA,GAAO68E,IAAoB9yF,EAASvsD,UAG5CM,EAAQ,CACZ2B,IA0EF,SAAaq1F,GAEX,IAAMn1F,EAAS,GAEf,GAAI,aAAcm1F,EAGhB,IAFA,IAAM2nD,EAAQ3nD,EAAOr2E,SACjB+oB,GAAS,IACJA,EAAQi1G,EAAM9lJ,QAAQ,CAC7B,IAAM0I,EAASvB,EAAMi3H,IAAI0nB,EAAMj1G,GAAQstD,GAGvC,GAAIz1F,EAAQ,CACV,GAAImoC,GAAmC,UAA1Bi1G,EAAMj1G,EAAQ,GAAG1tC,OACvB9E,MAAMF,QAAQuK,IAA2B,SAAhBA,EAAOvF,OACnCuF,EAAOvJ,MAAQ4mJ,GAAuBr9I,EAAOvJ,SAG1Cd,MAAMF,QAAQuK,IAA2B,YAAhBA,EAAOvF,MAAoB,CACvD,IAAM0lE,EAAOngE,EAAOof,SAAS,GAEzB+gD,GAAsB,SAAdA,EAAK1lE,OACf0lE,EAAK1pE,MAAQ4mJ,GAAuBl9E,EAAK1pE,OAE7C,CAGEd,MAAMF,QAAQuK,GAChBM,EAAOxG,KAAI6F,MAAXW,EAAM29D,EAASj+D,IAEfM,EAAOxG,KAAKkG,EAEhB,CACF,CAGF,OAAOM,CACT,EA7GE86I,UAAAA,GACAa,eAAAA,EACAsB,aAAAA,EACA3B,eAAAA,EACAF,cAAe,GACfv9I,SAAAA,EACAu3H,IAgCF,SAAa38H,EAAM08F,GACjB,IAAMh7F,EAAO1B,EAAK0B,KACZ47I,EAAS53I,EAAMN,SAAS1D,GAE9B,GAAIk3G,GAAI/7G,KAAK6I,EAAMN,SAAU1D,IAAS47I,EACpC,OAAOA,EAAO53I,EAAO1F,EAAM08F,GAG7B,GAAIh3F,EAAMpI,QAAQonJ,aAAeh/I,EAAMpI,QAAQonJ,YAAYrrI,SAAS3X,GAAO,CACzE,GAAI,aAAc1B,EAAM,CACSA,EAAxBqmB,SAAP,IAAoBs+H,EAAO3E,GAAIhgJ,EAAI4kJ,IAC7B39I,EAASw4I,GAAgBkF,GAI/B,OAFA19I,EAAOof,SAAW3gB,EAAM2B,IAAIrH,GAErBiH,CACT,CAGA,OAAOw4I,GAAgBz/I,EACzB,CAIA,OAFgB0F,EAAMpI,QAAQunJ,gBAAkBT,IAEjC1+I,EAAO1F,EAAM08F,EAC9B,EAxDEp/F,QAASq0D,EACTywF,MAAAA,GACAl6B,KAAAA,IAiBF,OAdAk5B,GAAM3lB,GAAM,SAAUz7H,GACpB,GAAkB,eAAdA,EAAK0B,MAAuC,uBAAd1B,EAAK0B,KAA+B,CACpE,IAAMymD,EAAoB,eAAdnoD,EAAK0B,KAAwBwhJ,EAAiBsB,EACpDrwH,EAAKzpB,OAAO1K,EAAKgqI,YAAY7oH,cAI9BgnC,EAAIllB,IAAI9O,IAEXg0B,EAAI7kC,IAAI6Q,EAAIn0B,EAEhB,CACF,IAEO0F,CAoFT,CCpOgBo/I,CAAYrpB,EAAMn+H,GAC1B0C,EAAO0F,EAAMi3H,IAAIlB,OAAM3rH,GACvBi1I,EjCkCD,SAAgBr/I,GAkBrB,IAjBA,IAAM+8I,EACmC,kBAAhC/8I,EAAMpI,QAAQmlJ,cACjB/8I,EAAMpI,QAAQmlJ,cACd,gBACAuC,EACJt/I,EAAMpI,QAAQ0nJ,qBAAuBpF,GACjCqF,EACJv/I,EAAMpI,QAAQ2nJ,mBAAqBnF,GAC/BoF,EAAgBx/I,EAAMpI,QAAQ4nJ,eAAiB,YAC/CC,EAAuBz/I,EAAMpI,QAAQ6nJ,sBAAwB,KAC7DC,EAA0B1/I,EAAMpI,QAAQ8nJ,yBAA2B,CACvE79E,UAAW,CAAC,YAGR89E,EAAY,GACdtF,GAAkB,IAEbA,EAAiBr6I,EAAMi9I,cAAcpkJ,QAAQ,CACpD,IAAM+oI,EAAM5hI,EAAM8+I,aAAa/zI,IAAI/K,EAAMi9I,cAAc5C,IAEvD,GAAKzY,EAAL,CAaA,IATA,IAAMhnI,EAAUoF,EAAM2B,IAAIigI,GACpBnzG,EAAKzpB,OAAO48H,EAAI0C,YAAY7oH,cAC5BuhI,EAAShD,GAAavrH,EAAGnT,eAC3B6+H,EAAmB,EAEjByF,EAAiB,GACjBC,EAAS7/I,EAAMm9I,eAAepyI,IAAI0jB,QAGtBrkB,IAAXy1I,KAA0B1F,GAAoB0F,GAAQ,CACvDD,EAAe/mJ,OAAS,GAC1B+mJ,EAAevkJ,KAAK,CAACW,KAAM,OAAQhE,MAAO,MAG5C,IAAI2oB,EAC6B,kBAAxB2+H,EACHA,EACAA,EAAoBjF,EAAgBF,GAElB,kBAAbx5H,IACTA,EAAW,CAAC3kB,KAAM,OAAQhE,MAAO2oB,IAGnCi/H,EAAevkJ,KAAK,CAClBW,KAAM,UACN0uC,QAAS,IACT3mC,WAAY,CACV81B,KACE,IACAkjH,EACA,SACAC,GACC7C,EAAmB,EAAI,IAAMA,EAAmB,IACnD2F,oBAAqB,GACrBnqC,UAC+B,kBAAtB4pC,EACHA,EACAA,EAAkBlF,EAAgBF,GACxCt4E,UAAW,CAAC,0BAEdlhD,SAAUzpB,MAAMF,QAAQ2pB,GAAYA,EAAW,CAACA,IAEpD,CAEA,IAAMq0B,EAAOp6C,EAAQA,EAAQ/B,OAAS,GAEtC,GAAIm8C,GAAsB,YAAdA,EAAKh5C,MAAuC,MAAjBg5C,EAAKtK,QAAiB,KAAAq1G,EACrDC,EAAWhrG,EAAKr0B,SAASq0B,EAAKr0B,SAAS9nB,OAAS,GAClDmnJ,GAA8B,SAAlBA,EAAShkJ,KACvBgkJ,EAAShoJ,OAAS,IAElBg9C,EAAKr0B,SAAStlB,KAAK,CAACW,KAAM,OAAQhE,MAAO,OAG3C+nJ,EAAA/qG,EAAKr0B,UAAStlB,KAAI6F,MAAA6+I,EAAIH,EACxB,MACEhlJ,EAAQS,KAAI6F,MAAZtG,EAAgBglJ,GAIlB,IAAMnQ,EAAW,CACfzzI,KAAM,UACN0uC,QAAS,KACT3mC,WAAY,CAAC0qB,GAAIsuH,EAAgB,MAAQC,GACzCr8H,SAAU3gB,EAAMwiH,KAAK5nH,GAAS,IAGhCoF,EAAM08I,MAAM9a,EAAK6N,GAEjBkQ,EAAUtkJ,KAAKo0I,EAvEf,CAwEF,CAEA,GAAyB,IAArBkQ,EAAU9mJ,OAId,MAAO,CACLmD,KAAM,UACN0uC,QAAS,UACT3mC,WAAY,CAACk8I,eAAe,EAAMp+E,UAAW,CAAC,cAC9ClhD,SAAU,CACR,CACE3kB,KAAM,UACN0uC,QAAS+0G,EACT17I,WAAUm+D,EAAAA,EAAA,GACL63E,GAAgB2F,IAAwB,IAC3CjxH,GAAI,mBAEN9N,SAAU,CAAC,CAAC3kB,KAAM,OAAQhE,MAAOwnJ,KAEnC,CAACxjJ,KAAM,OAAQhE,MAAO,MACtB,CACEgE,KAAM,UACN0uC,QAAS,KACT3mC,WAAY,CAAC,EACb4c,SAAU3gB,EAAMwiH,KAAKm9B,GAAW,IAElC,CAAC3jJ,KAAM,OAAQhE,MAAO,OAG5B,CiC/JeunG,CAAOv/F,GAEduB,EAASrK,MAAMF,QAAQsD,GACzB,CAAC0B,KAAM,OAAQ2kB,SAAUrmB,GACzBA,GAAQ,CAAC0B,KAAM,OAAQ2kB,SAAU,IAUrC,OARI0+H,GAKF99I,EAAOof,SAAStlB,KAAK,CAACW,KAAM,OAAQhE,MAAO,MAAOqnJ,GAG7C99I,CACT,CC4Be,SAAS2+I,GAAa79D,EAAazqF,GAChD,OAAIyqF,GAAe,QAASA,EAI1B,exC5HsCnJ,EwC4HtC7V,GxC5HsC6V,EwC4HtCw8D,KAAA1iC,MAAO,SAAAmtC,EAAgBpqB,EAAMT,GAAI,IAAA8qB,EAAA,OAAA1K,KAAAlzB,MAAA,SAAAlkG,GAAA,cAAAA,EAAAm5H,KAAAn5H,EAAAonB,MAAA,OAEgC,OAAzD06G,EAAoCvB,GAAO9oB,EAAMn+H,GAAQ0mB,EAAAonB,KAAA,EACzD28C,EAAY2C,IAAIo7D,EAAU9qB,GAAK,wBAAAh3G,EAAAo5H,OAAA,GAAAyI,EAAA,IxC9HlC,WACL,IAAI5gJ,EAAO9E,KACTgW,EAAO9X,UACT,OAAO,IAAImH,SAAQ,SAAUiB,EAASD,GACpC,IAAIm3I,EAAM/+D,EAAGh4E,MAAM3B,EAAMkR,GACzB,SAASynI,EAAMlgJ,GACbggJ,GAAmBC,EAAKl3I,EAASD,EAAQo3I,EAAOC,EAAQ,OAAQngJ,EAClE,CACA,SAASmgJ,EAAOn9I,GACdg9I,GAAmBC,EAAKl3I,EAASD,EAAQo3I,EAAOC,EAAQ,QAASn9I,EACnE,CACAk9I,OAAM9tI,EACR,GACF,GwCkHG,gBAAA8vE,EAAAmmE,GAAA,OAAAh9E,EAAAniE,MAAA,KAAAvI,UAAA,EAJD,GAUK,SAAUo9H,GAEf,OAAgC8oB,GAAO9oB,EAAMn+H,GAAWyqF,EAC1D,CACF,CCpJe,SAASi+D,GAASrpJ,GAC/B,OAAO,EAAeA,IAAQ,EAAgBA,IAAQ,EAA2BA,IAAQ,GAC3F,CCCO,SAASspJ,GAAKzlJ,GACnB,GAAIA,EACF,MAAMA,CAEV,eCXe,SAAS1D,GAAcY,GACrC,GAAqB,kBAAVA,GAAgC,OAAVA,EAChC,OAAO,EAGR,IAAMvB,EAAYD,OAAOwpE,eAAehoE,GACxC,OAAsB,OAAdvB,GAAsBA,IAAcD,OAAOC,WAAkD,OAArCD,OAAOwpE,eAAevpE,OAA0B4L,OAAOuvD,eAAe55D,MAAYqK,OAAOC,YAAYtK,EACtK,CCUO,SAASwoJ,KAEd,IAAMC,EAAM,GAENC,EAAW,CAAC17D,IAKlB,WAAwB,QAAA9uE,EAAAvd,UAAAE,OAARgJ,EAAM,IAAA3K,MAAAgf,GAAAnB,EAAA,EAAAA,EAAAmB,EAAAnB,IAANlT,EAAMkT,GAAApc,UAAAoc,GACpB,IAAI4rI,GAAmB,EAEjBj8I,EAAW7C,EAAOqF,MAExB,GAAwB,oBAAbxC,EACT,MAAM,IAAI9K,UAAU,2CAA6C8K,IAWnE,SAASghC,EAAK5qC,GACZ,IAAMo+E,EAAKunE,IAAME,GACbj3G,GAAS,EAEb,GAAI5uC,EACF4J,EAAS5J,OADX,CAKA,QAAA8lJ,EAAAjoJ,UAAAE,OATsB67D,EAAM,IAAAx9D,MAAA0pJ,EAAA,EAAAA,EAAA,KAAAC,EAAA,EAAAA,EAAAD,EAAAC,IAANnsF,EAAMmsF,EAAA,GAAAloJ,UAAAkoJ,GAU5B,OAASn3G,EAAQ7nC,EAAOhJ,QACA,OAAlB67D,EAAOhrB,SAAqCt/B,IAAlBsqD,EAAOhrB,KACnCgrB,EAAOhrB,GAAS7nC,EAAO6nC,IAK3B7nC,EAAS6yD,EAGLwkB,EA6BH,SAAc4nE,EAAYp8I,GAE/B,IAAIhH,EAEJ,OAAOqjJ,EAQP,SAASA,IAAuB,QAAAC,EAAAroJ,UAAAE,OAAZk3E,EAAU,IAAA74E,MAAA8pJ,GAAAC,EAAA,EAAAA,EAAAD,EAAAC,IAAVlxE,EAAUkxE,GAAAtoJ,UAAAsoJ,GAC5B,IAEI1/I,EAFE2/I,EAAoBJ,EAAWjoJ,OAASk3E,EAAWl3E,OAIrDqoJ,GACFnxE,EAAW10E,KAAK4uC,GAGlB,IACE1oC,EAASu/I,EAAW5/I,MAAMzG,KAAMs1E,EAClC,CAAE,MAAOj1E,GAOP,GAAIomJ,GAAqBxjJ,EACvB,MAPsC5C,EAUxC,OAAOmvC,EAViCnvC,EAW1C,CAEKomJ,IACC3/I,aAAkBzB,QACpByB,EAAON,KAAKA,EAAMgpC,GACT1oC,aAAkBtG,MAC3BgvC,EAAK1oC,GAELN,EAAKM,GAGX,CAMA,SAAS0oC,EAAKnvC,GACZ,IAAK4C,EAAQ,CACXA,GAAS,EAAI,QAAAyjJ,EAAAxoJ,UAAAE,OAFO67D,EAAM,IAAAx9D,MAAAiqJ,EAAA,EAAAA,EAAA,KAAAC,EAAA,EAAAA,EAAAD,EAAAC,IAAN1sF,EAAM0sF,EAAA,GAAAzoJ,UAAAyoJ,GAG1B18I,EAAQxD,WAAC,EAAD,CAACpG,GAAK0Z,OAAKkgD,GACrB,CACF,CAOA,SAASzzD,EAAKjJ,GACZiyC,EAAK,KAAMjyC,EACb,CACF,CA/FQwqH,CAAKtpC,EAAIxzC,GAAKxkC,WAAC,EAAGwzD,GAElBhwD,EAAQxD,WAAC,EAAD,CAAC,MAAIsT,OAAKkgD,GAhBpB,CAkBF,GAjCIxzD,WAAC,EAAD,CAAC,MAAIsT,OAAAgrD,EAAK39D,IAkChB,EAhDuBipI,IAmDvB,SAAauW,GACX,GAA0B,oBAAfA,EACT,MAAM,IAAIznJ,UACR,+CAAiDynJ,GAKrD,OADAZ,EAAIplJ,KAAKgmJ,GACFX,CACT,GA1DA,OAAOA,CA2DT,CC/BO,IAAM32D,GAAO,CAACu3D,SAcrB,SAAkBv3D,EAAMw3D,GACtB,QAAYn3I,IAARm3I,GAAoC,kBAARA,EAC9B,MAAM,IAAI3nJ,UAAU,mCAGtB4nJ,GAAWz3D,GACX,IAII03D,EAJArnJ,EAAQ,EACRM,GAAO,EACPgvC,EAAQqgD,EAAKlxF,OAIjB,QAAYuR,IAARm3I,GAAoC,IAAfA,EAAI1oJ,QAAgB0oJ,EAAI1oJ,OAASkxF,EAAKlxF,OAAQ,CACrE,KAAO6wC,KACL,GAAgC,KAA5BqgD,EAAKoqD,YAAYzqG,IAGnB,GAAI+3G,EAAc,CAChBrnJ,EAAQsvC,EAAQ,EAChB,KACF,OACShvC,EAAM,IAGf+mJ,GAAe,EACf/mJ,EAAMgvC,EAAQ,GAIlB,OAAOhvC,EAAM,EAAI,GAAKqvF,EAAKtuF,MAAMrB,EAAOM,EAC1C,CAEA,GAAI6mJ,IAAQx3D,EACV,MAAO,GAGT,IAAI23D,GAAoB,EACpBC,EAAWJ,EAAI1oJ,OAAS,EAE5B,KAAO6wC,KACL,GAAgC,KAA5BqgD,EAAKoqD,YAAYzqG,IAGnB,GAAI+3G,EAAc,CAChBrnJ,EAAQsvC,EAAQ,EAChB,KACF,OAEIg4G,EAAmB,IAGrBD,GAAe,EACfC,EAAmBh4G,EAAQ,GAGzBi4G,GAAY,IAEV53D,EAAKoqD,YAAYzqG,KAAW63G,EAAIpN,YAAYwN,KAC1CA,EAAW,IAGbjnJ,EAAMgvC,IAKRi4G,GAAY,EACZjnJ,EAAMgnJ,IAMVtnJ,IAAUM,EACZA,EAAMgnJ,EACGhnJ,EAAM,IACfA,EAAMqvF,EAAKlxF,QAGb,OAAOkxF,EAAKtuF,MAAMrB,EAAOM,EAC3B,EA9F+BknJ,QAwG/B,SAAiB73D,GAGf,GAFAy3D,GAAWz3D,GAES,IAAhBA,EAAKlxF,OACP,MAAO,IAGT,IAGIgpJ,EAHAnnJ,GAAO,EACPgvC,EAAQqgD,EAAKlxF,OAKjB,OAAS6wC,GACP,GAAgC,KAA5BqgD,EAAKoqD,YAAYzqG,IACnB,GAAIm4G,EAAgB,CAClBnnJ,EAAMgvC,EACN,KACF,OACUm4G,IAEVA,GAAiB,GAIrB,OAAOnnJ,EAAM,EACe,KAAxBqvF,EAAKoqD,YAAY,GACf,IACA,IACM,IAARz5I,GAAqC,KAAxBqvF,EAAKoqD,YAAY,GAC9B,KACApqD,EAAKtuF,MAAM,EAAGf,EACpB,EAxIwConJ,QAkJxC,SAAiB/3D,GACfy3D,GAAWz3D,GAEX,IASI83D,EATAn4G,EAAQqgD,EAAKlxF,OAEb6B,GAAO,EACPqnJ,EAAY,EACZC,GAAY,EAGZC,EAAc,EAIlB,KAAOv4G,KAAS,CACd,IAAMzsC,EAAO8sF,EAAKoqD,YAAYzqG,GAE9B,GAAa,KAATzsC,EAWAvC,EAAM,IAGRmnJ,GAAiB,EACjBnnJ,EAAMgvC,EAAQ,GAGH,KAATzsC,EAEE+kJ,EAAW,EACbA,EAAWt4G,EACc,IAAhBu4G,IACTA,EAAc,GAEPD,GAAY,IAGrBC,GAAe,QAzBf,GAAIJ,EAAgB,CAClBE,EAAYr4G,EAAQ,EACpB,KACF,CAwBJ,CAEA,GACEs4G,EAAW,GACXtnJ,EAAM,GAEU,IAAhBunJ,GAEiB,IAAhBA,GAAqBD,IAAatnJ,EAAM,GAAKsnJ,IAAaD,EAAY,EAEvE,MAAO,GAGT,OAAOh4D,EAAKtuF,MAAMumJ,EAAUtnJ,EAC9B,EA/MiD6uC,KAyNjD,WAGY,IAFV,IAEI24G,EAFAx4G,GAAS,EAEHxzB,EAAAvd,UAAAE,OAHKspJ,EAAQ,IAAAjrJ,MAAAgf,GAAAnB,EAAA,EAAAA,EAAAmB,EAAAnB,IAARotI,EAAQptI,GAAApc,UAAAoc,GAKvB,OAAS20B,EAAQy4G,EAAStpJ,QACxB2oJ,GAAWW,EAASz4G,IAEhBy4G,EAASz4G,KACXw4G,OACa93I,IAAX83I,EAAuBC,EAASz4G,GAASw4G,EAAS,IAAMC,EAASz4G,IAIvE,YAAkBt/B,IAAX83I,EAAuB,IAahC,SAAmBn4D,GACjBy3D,GAAWz3D,GAEX,IAAMq4D,EAAmC,KAAxBr4D,EAAKoqD,YAAY,GAG9Bn8I,EAuBN,SAAyB+xF,EAAMs4D,GAC7B,IAMIplJ,EAEAqlJ,EARA/gJ,EAAS,GACTghJ,EAAoB,EACpBC,GAAa,EACbC,EAAO,EACP/4G,GAAS,EAMb,OAASA,GAASqgD,EAAKlxF,QAAQ,CAC7B,GAAI6wC,EAAQqgD,EAAKlxF,OACfoE,EAAO8sF,EAAKoqD,YAAYzqG,OACnB,IAAa,KAATzsC,EACT,MAEAA,EAAO,EACT,CAEA,GAAa,KAATA,EAAuB,CACzB,GAAIulJ,IAAc94G,EAAQ,GAAc,IAAT+4G,QAExB,GAAID,IAAc94G,EAAQ,GAAc,IAAT+4G,EAAY,CAChD,GACElhJ,EAAO1I,OAAS,GACM,IAAtB0pJ,GAC0C,KAA1ChhJ,EAAO4yI,YAAY5yI,EAAO1I,OAAS,IACO,KAA1C0I,EAAO4yI,YAAY5yI,EAAO1I,OAAS,GAEnC,GAAI0I,EAAO1I,OAAS,GAGlB,IAFAypJ,EAAiB/gJ,EAAOrH,YAAY,QAEbqH,EAAO1I,OAAS,EAAG,CACpCypJ,EAAiB,GACnB/gJ,EAAS,GACTghJ,EAAoB,GAGpBA,GADAhhJ,EAASA,EAAO9F,MAAM,EAAG6mJ,IACEzpJ,OAAS,EAAI0I,EAAOrH,YAAY,KAG7DsoJ,EAAY94G,EACZ+4G,EAAO,EACP,QACF,OACK,GAAIlhJ,EAAO1I,OAAS,EAAG,CAC5B0I,EAAS,GACTghJ,EAAoB,EACpBC,EAAY94G,EACZ+4G,EAAO,EACP,QACF,CAGEJ,IACF9gJ,EAASA,EAAO1I,OAAS,EAAI0I,EAAS,MAAQ,KAC9CghJ,EAAoB,EAExB,MACMhhJ,EAAO1I,OAAS,EAClB0I,GAAU,IAAMwoF,EAAKtuF,MAAM+mJ,EAAY,EAAG94G,GAE1CnoC,EAASwoF,EAAKtuF,MAAM+mJ,EAAY,EAAG94G,GAGrC64G,EAAoB74G,EAAQ84G,EAAY,EAG1CA,EAAY94G,EACZ+4G,EAAO,CACT,MAAoB,KAATxlJ,GAAyBwlJ,GAAQ,EAC1CA,IAEAA,GAAQ,CAEZ,CAEA,OAAOlhJ,CACT,CAtGcmhJ,CAAgB34D,GAAOq4D,GAEd,IAAjBpqJ,EAAMa,QAAiBupJ,IACzBpqJ,EAAQ,KAGNA,EAAMa,OAAS,GAA2C,KAAtCkxF,EAAKoqD,YAAYpqD,EAAKlxF,OAAS,KACrDb,GAAS,KAGX,OAAOoqJ,EAAW,IAAMpqJ,EAAQA,CAClC,CA9BsCg6G,CAAUkwC,EAChD,EAxOuDS,IAAK,KA0W5D,SAASnB,GAAWz3D,GAClB,GAAoB,kBAATA,EACT,MAAM,IAAInwF,UACR,mCAAqCqV,KAAKC,UAAU66E,GAG1D,CChaO,IAAM64D,GAAO,CAACC,IAErB,WACE,MAAO,GACT,GCYO,SAASC,GAAMC,GACpB,OAAO3iF,QACa,OAAlB2iF,GAC2B,kBAAlBA,GACP,SAAUA,GACVA,EAAclpH,MACd,aAAckpH,GACdA,EAAcC,eAES54I,IAAvB24I,EAAcE,KAEpB,CClBO,SAASC,GAAUn5D,GACxB,GAAoB,kBAATA,EACTA,EAAO,IAAI9qB,IAAI8qB,QACV,IAAK+4D,GAAM/4D,GAAO,CAEvB,IAAMjvF,EAAQ,IAAIlB,UAChB,+EACEmwF,EACA,KAGJ,MADAjvF,EAAMmC,KAAO,uBACPnC,CACR,CAEA,GAAsB,UAAlBivF,EAAKi5D,SAAsB,CAE7B,IAAMloJ,EAAQ,IAAIlB,UAAU,kCAE5B,MADAkB,EAAMmC,KAAO,yBACPnC,CACR,CAEA,OAWF,SAA6B08B,GAC3B,GAAqB,KAAjBA,EAAI2rH,SAAiB,CAEvB,IAAMroJ,EAAQ,IAAIlB,UAChB,wDAGF,MADAkB,EAAMmC,KAAO,4BACPnC,CACR,CAEA,IAAMsoJ,EAAW5rH,EAAI4rH,SACjB15G,GAAS,EAEb,OAASA,EAAQ05G,EAASvqJ,QACxB,GACkC,KAAhCuqJ,EAASjP,YAAYzqG,IACe,KAApC05G,EAASjP,YAAYzqG,EAAQ,GAC7B,CACA,IAAM25G,EAAQD,EAASjP,YAAYzqG,EAAQ,GAC3C,GAAc,KAAV25G,GAAoC,MAAVA,EAAyB,CAErD,IAAMvoJ,EAAQ,IAAIlB,UAChB,uDAGF,MADAkB,EAAMmC,KAAO,4BACPnC,CACR,CACF,CAGF,OAAOwoJ,mBAAmBF,EAC5B,CA1CSG,CAAoBx5D,EAC7B,CCsDA,IAAMnmE,GAA8B,CAClC,UACA,OACA,WACA,OACA,UACA,WAGW4/H,GAAK,WAuBhB,SAAAA,EAAYxrJ,GAEV,IAAIJ,EAFa2K,EAAA,KAAAihJ,GAOf5rJ,EAHGI,EAEM8qJ,GAAM9qJ,GACL,CAAC+xF,KAAM/xF,GACS,kBAAVA,GAujBtB,SAAsBA,GACpB,OAAOooE,QACLpoE,GACmB,kBAAVA,GACP,eAAgBA,GAChB,eAAgBA,EAEtB,CA9jB4CyrJ,CAAazrJ,GACzC,CAACA,MAAAA,GAEDA,EANA,CAAC,EAgBbyC,KAAKooJ,IAAMD,GAAKC,MAUhBpoJ,KAAKyD,KAAO,CAAC,EASbzD,KAAKipJ,QAAU,GAOfjpJ,KAAKkpJ,SAAW,GAOhBlpJ,KAAKzC,MAYLyC,KAAKgoD,IAULhoD,KAAK8G,OASL9G,KAAKmpJ,OAML,IAFA,IAkBI1nJ,EAlBAwtC,GAAS,IAEJA,EAAQ9lB,GAAM/qB,QAAQ,CAC7B,IAAMqD,EAAO0nB,GAAM8lB,GAKjBxtC,KAAQtE,QACUwS,IAAlBxS,EAAQsE,IACU,OAAlBtE,EAAQsE,KAGRzB,KAAKyB,GAAiB,YAATA,EAAkBsjE,EAAO5nE,EAAQsE,IAAStE,EAAQsE,GAEnE,CAMA,IAAKA,KAAQtE,EAENgsB,GAAMjQ,SAASzX,KAElBzB,KAAKyB,GAAQtE,EAAQsE,GAG3B,CA6YC,OA3YDs5D,EAAAguF,EAAA,EAAAlsJ,IAAA,WAAAyT,IAMA,WACE,MAA4B,kBAAdtQ,KAAKsvF,KAAoBA,GAAKu3D,SAAS7mJ,KAAKsvF,WAAQ3/E,CACpE,EAEAwT,IAYA,SAAa0jI,GACXuC,GAAevC,EAAU,YACzBwC,GAAWxC,EAAU,YACrB7mJ,KAAKsvF,KAAOA,GAAKxgD,KAAK9uC,KAAKmnJ,SAAW,GAAIN,EAC5C,GAEA,CAAAhqJ,IAAA,UAAAyT,IAMA,WACE,MAA4B,kBAAdtQ,KAAKsvF,KAAoBA,GAAK63D,QAAQnnJ,KAAKsvF,WAAQ3/E,CACnE,EAEAwT,IAUA,SAAYgkI,GACVJ,GAAW/mJ,KAAK6mJ,SAAU,WAC1B7mJ,KAAKsvF,KAAOA,GAAKxgD,KAAKq4G,GAAW,GAAInnJ,KAAK6mJ,SAC5C,GAEA,CAAAhqJ,IAAA,UAAAyT,IAMA,WACE,MAA4B,kBAAdtQ,KAAKsvF,KAAoBA,GAAK+3D,QAAQrnJ,KAAKsvF,WAAQ3/E,CACnE,EAEAwT,IAYA,SAAYkkI,GAIV,GAHAgC,GAAWhC,EAAS,WACpBN,GAAW/mJ,KAAKmnJ,QAAS,WAErBE,EAAS,CACX,GAA+B,KAA3BA,EAAQ3N,YAAY,GACtB,MAAM,IAAIl5I,MAAM,iCAGlB,GAAI6mJ,EAAQnuI,SAAS,IAAK,GACxB,MAAM,IAAI1Y,MAAM,yCAEpB,CAEAR,KAAKsvF,KAAOA,GAAKxgD,KAAK9uC,KAAKmnJ,QAASnnJ,KAAKspJ,MAAQjC,GAAW,IAC9D,GAEA,CAAAxqJ,IAAA,OAAAyT,IAMA,WACE,OAAOtQ,KAAKipJ,QAAQjpJ,KAAKipJ,QAAQ7qJ,OAAS,EAC5C,EAEA+kB,IAYA,SAASmsE,GACH+4D,GAAM/4D,KACRA,EAAOm5D,GAAUn5D,IAGnB85D,GAAe95D,EAAM,QAEjBtvF,KAAKsvF,OAASA,GAChBtvF,KAAKipJ,QAAQroJ,KAAK0uF,EAEtB,GAEA,CAAAzyF,IAAA,OAAAyT,IAMA,WACE,MAA4B,kBAAdtQ,KAAKsvF,KACfA,GAAKu3D,SAAS7mJ,KAAKsvF,KAAMtvF,KAAKqnJ,cAC9B13I,CACN,EAEAwT,IAYA,SAASmmI,GACPF,GAAeE,EAAM,QACrBD,GAAWC,EAAM,QACjBtpJ,KAAKsvF,KAAOA,GAAKxgD,KAAK9uC,KAAKmnJ,SAAW,GAAImC,GAAQtpJ,KAAKqnJ,SAAW,IACpE,GAGA,CAAAxqJ,IAAA,OAAAU,MA4DA,SAAK88H,EAAeC,EAAwBhmC,GAE1C,IAAMp+C,EAAUl2C,KAAKk2C,QAAQmkF,EAAeC,EAAwBhmC,GAIpE,MAFAp+C,EAAQ0kF,OAAQ,EAEV1kF,CACR,GAEA,CAAAr5C,IAAA,OAAAU,MA0DA,SAAK88H,EAAeC,EAAwBhmC,GAE1C,IAAMp+C,EAAUl2C,KAAKk2C,QAAQmkF,EAAeC,EAAwBhmC,GAIpE,OAFAp+C,EAAQ0kF,WAAQjrH,EAETumC,CACT,GAEA,CAAAr5C,IAAA,UAAAU,MA0DA,SAAQ88H,EAAeC,EAAwBhmC,GAC7C,IAAMp+C,EAAU,IAAIikF,GAElBE,EACAC,EACAhmC,GAYF,OATIt0F,KAAKsvF,OACPp5C,EAAQ94C,KAAO4C,KAAKsvF,KAAO,IAAMp5C,EAAQ94C,KACzC84C,EAAQ2kF,KAAO76H,KAAKsvF,MAGtBp5C,EAAQ0kF,OAAQ,EAEhB56H,KAAKkpJ,SAAStoJ,KAAKs1C,GAEZA,CACT,GAEA,CAAAr5C,IAAA,WAAAU,MAaA,SAASm2I,GACP,YAAmB/jI,IAAf3P,KAAKzC,MACA,GAGiB,kBAAfyC,KAAKzC,MACPyC,KAAKzC,MAGE,IAAIk9I,YAAY/G,QAAY/jI,GAC7B2jI,OAAOtzI,KAAKzC,MAC7B,KAACwrJ,CAAA,CAzhBe,GAsiBlB,SAASM,GAAWE,EAAMnsJ,GACxB,GAAImsJ,GAAQA,EAAKrwI,SAASo2E,GAAK44D,KAC7B,MAAM,IAAI1nJ,MACR,IAAMpD,EAAO,uCAAyCkyF,GAAK44D,IAAM,IAGvE,CAYA,SAASkB,GAAeG,EAAMnsJ,GAC5B,IAAKmsJ,EACH,MAAM,IAAI/oJ,MAAM,IAAMpD,EAAO,oBAEjC,CAYA,SAAS2pJ,GAAWz3D,EAAMlyF,GACxB,IAAKkyF,EACH,MAAM,IAAI9uF,MAAM,YAAcpD,EAAO,kCAEzC,CC7qBO,IAAMosJ,GAYP,SAAU5nJ,GACR,IAEM6nJ,EAFOzpJ,KACOhD,YAIXhB,UAEHmK,EAAOsjJ,EAAM7nJ,GAEb6E,EAAQ,SAARA,IACJ,OAAON,EAAKM,MAAMA,EAAOvI,UAC3B,EAEAnC,OAAOkpE,eAAex+D,EAAOgjJ,GAE7B,IAEqB1L,EAFyBC,EAAAhiD,GAAhCjgG,OAAOiuD,oBAAoB7jD,IAEpB,IAArB,IAAA63I,EAAA57I,MAAA27I,EAAAC,EAAA97I,KAAAstC,MAAuB,KAAZ57B,EAACmqI,EAAAxgJ,MACJu9D,EAAa/+D,OAAOO,yBAAyB6J,EAAMyN,GACrDknD,GAAY/+D,OAAOK,eAAeqK,EAAOmN,EAAGknD,EAClD,CAAC,OAAAv6D,GAAAy9I,EAAAh8I,EAAAzB,EAAA,SAAAy9I,EAAAz7I,GAAA,CAED,OAAOkE,CACT,ECsUAgyG,GAAM,CAAC,EAAEx8G,eAeFytJ,GAAS,SAAAC,GAAAxkF,EAAAukF,EAAAC,GAAA,IAAA9pD,EAAA/5B,EAAA4jF,GAIpB,SAAAA,IAAc,IAAA/mF,EAqGgB,OArGhB76D,EAAA,KAAA4hJ,IAEZ/mF,EAAAk9B,EAAAnjG,KAAA,KAAM,SAeDktJ,cAAWj6I,EAYhBgzD,EAAKknF,YAASl6I,EAadgzD,EAAKmnF,UAAY,GAajBnnF,EAAK03E,cAAW1qI,EAShBgzD,EAAKonF,aAAe,EASpBpnF,EAAKqnF,YAASr6I,EASdgzD,EAAKsnF,UAAY,CAAC,EAUlBtnF,EAAK68D,YAAS7vH,EASdgzD,EAAKunF,aAAenE,KAAQpjF,CAC9B,CAgrBC,OA9qBD5H,EAAA2uF,EAAA,EAAA7sJ,IAAA,OAAAU,MAWA,WAQE,IANA,IAAMqqF,EAEF,IAAI8hE,EAEJz6G,GAAS,IAEJA,EAAQjvC,KAAK8pJ,UAAU1rJ,QAAQ,CACtC,IAAM+rJ,EAAWnqJ,KAAK8pJ,UAAU76G,GAChC24C,EAAYyoD,IAAG5pI,MAAfmhF,EAAW7iB,EAAQolF,GACrB,CAIA,OAFAviE,EAAYnkF,KAAK5F,IAAO,EAAM,CAAC,EAAGmC,KAAKiqJ,YAEhCriE,CACT,GAEA,CAAA/qF,IAAA,OAAAU,MA2DA,SAAKV,EAAKU,GACR,MAAmB,kBAARV,EAEgB,IAArBqB,UAAUE,QACZgsJ,GAAe,OAAQpqJ,KAAKgqJ,QAC5BhqJ,KAAKiqJ,UAAUptJ,GAAOU,EACfyC,MAIDy4G,GAAI/7G,KAAKsD,KAAKiqJ,UAAWptJ,IAAQmD,KAAKiqJ,UAAUptJ,SAAS8S,EAI/D9S,GACFutJ,GAAe,OAAQpqJ,KAAKgqJ,QAC5BhqJ,KAAKiqJ,UAAYptJ,EACVmD,MAIFA,KAAKiqJ,SACd,GAEA,CAAAptJ,IAAA,SAAAU,MAiBA,WACE,GAAIyC,KAAKgqJ,OACP,OAAOhqJ,KAQT,IAFA,IAAM8E,EAAyD9E,OAEtDA,KAAK+pJ,YAAc/pJ,KAAK8pJ,UAAU1rJ,QAAQ,CACjD,IAAAisJ,EAAAxE,GAA+B7lJ,KAAK8pJ,UAAU9pJ,KAAK+pJ,cAA5CI,EAAQE,EAAA,GAAKltJ,EAAOktJ,EAAArpJ,MAAA,GAE3B,IAAmB,IAAf7D,EAAQ,GAAZ,EAImB,IAAfA,EAAQ,KACVA,EAAQ,QAAKwS,GAGf,IAAM26I,EAAcH,EAASztJ,KAAI+J,MAAb0jJ,EAAQ,CAAMrlJ,GAAIiV,OAAAgrD,EAAK5nE,KAEhB,oBAAhBmtJ,GACTtqJ,KAAKkqJ,aAAa7Z,IAAIia,EATxB,CAWF,CAKA,OAHAtqJ,KAAKgqJ,QAAS,EACdhqJ,KAAK+pJ,YAAczhG,OAAOg5E,kBAEnBthI,IACT,GAEA,CAAAnD,IAAA,QAAAU,MAcA,SAAMs9H,GACJ76H,KAAKsmE,SACL,IAAMikF,EAAWC,GAAM3vB,GACjB2E,EAASx/H,KAAKw/H,QAAUx/H,KAAK6pJ,OAEnC,OADAY,GAAa,QAASjrB,GACfA,EAAOj1H,OAAOggJ,GAAWA,EAClC,GAEA,CAAA1tJ,IAAA,UAAAU,MA0CA,SAAQs9H,EAAMrrF,GACZ,IAAM1qC,EAAO9E,KAMb,OAJAA,KAAKsmE,SACLmkF,GAAa,UAAWzqJ,KAAKw/H,QAAUx/H,KAAK6pJ,QAC5Ca,GAAe,UAAW1qJ,KAAKq6I,UAAYr6I,KAAK4pJ,UAEzCp6G,EAAOm7G,OAASh7I,EAAW6/B,GAAQ,IAAInqC,QAAQslJ,GAQtD,SAASA,EAASrkJ,EAASD,GACzB,IAAMkkJ,EAAWC,GAAM3vB,GAGjB+vB,EAEsB9lJ,EAAK6P,MAAM41I,GA+BvC,SAASM,EAASxqJ,EAAOw6H,GACnBx6H,IAAUw6H,EACZx0H,EAAOhG,GACEiG,EACTA,EAAQu0H,GAGRrrF,OAAK7/B,EAAWkrH,EAEpB,CArCA/1H,EAAKylF,IAAIqgE,EAAWL,GAAU,SAAUlqJ,EAAOi7H,EAAMT,GACnD,GAAIx6H,IAAUi7H,IAAST,EACrB,OAAOgwB,EAASxqJ,GAKlB,IAgjBiB9C,EAhjBXutJ,EAEsBxvB,EAGtByvB,EAAgBjmJ,EAAK2P,UAAUq2I,EAAajwB,GA4iBhC,kBADDt9H,EAziBGwtJ,IAqjB5B,SAAsBxtJ,GACpB,OAAOooE,QACLpoE,GACmB,kBAAVA,GACP,eAAgBA,GAChB,eAAgBA,EAEtB,CAlBsCyrJ,CAAazrJ,GAziBzCs9H,EAAKt9H,MAAQwtJ,EAEblwB,EAAK/zH,OAASikJ,EAGhBF,EAASxqJ,EAAsDw6H,EACjE,GAiBF,CACF,GAEA,CAAAh+H,IAAA,cAAAU,MA+BA,SAAYs9H,GAEV,IAEI/zH,EAFAs2I,GAAW,EAYf,OARAp9I,KAAKsmE,SACLmkF,GAAa,cAAezqJ,KAAKw/H,QAAUx/H,KAAK6pJ,QAChDa,GAAe,cAAe1qJ,KAAKq6I,UAAYr6I,KAAK4pJ,UAEpD5pJ,KAAKgrJ,QAAQnwB,GASb,SAAkBx6H,EAAOw6H,GACvBuiB,GAAW,EACX0I,GAAKzlJ,GACLyG,EAAS+zH,CACX,IAZAowB,GAAW,cAAe,UAAW7N,GAG9Bt2I,CAUT,GAEA,CAAAjK,IAAA,MAAAU,MAsCA,SAAI+9H,EAAMT,EAAMrrF,GACd07G,GAAW5vB,GACXt7H,KAAKsmE,SAEL,IAAM4jF,EAAelqJ,KAAKkqJ,aAO1B,OALK16G,GAAwB,oBAATqrF,IAClBrrF,EAAOqrF,EACPA,OAAOlrH,GAGF6/B,EAAOm7G,OAASh7I,EAAW6/B,GAAQ,IAAInqC,QAAQslJ,GAWtD,SAASA,EAASrkJ,EAASD,GAKzB,IAAMkkJ,EAAWC,GAAM3vB,GACvBqvB,EAAa3/D,IAAI+wC,EAAMivB,GAQvB,SAAkBlqJ,EAAO8qJ,EAAYtwB,GACnC,IAAMuwB,EAEFD,GAAc7vB,EAGdj7H,EACFgG,EAAOhG,GACEiG,EACTA,EAAQ8kJ,GAGR57G,OAAK7/B,EAAWy7I,EAAevwB,EAEnC,GACF,CACF,GAEA,CAAAh+H,IAAA,UAAAU,MAiBA,SAAQ+9H,EAAMT,GAEZ,IAEI/zH,EAFAs2I,GAAW,EAQf,OAJAp9I,KAAKuqF,IAAI+wC,EAAMT,GASf,SAAkBx6H,EAAOi7H,GACvBwqB,GAAKzlJ,GACLyG,EAASw0H,EACT8hB,GAAW,CACb,IAXA6N,GAAW,UAAW,MAAO7N,GAEtBt2I,CAUT,GAEA,CAAAjK,IAAA,YAAAU,MA6BA,SAAU+9H,EAAMT,GACd76H,KAAKsmE,SACL,IAAMikF,EAAWC,GAAM3vB,GACjBwf,EAAWr6I,KAAKq6I,UAAYr6I,KAAK4pJ,SAIvC,OAHAc,GAAe,YAAarQ,GAC5B6Q,GAAW5vB,GAEJ+e,EAAS/e,EAAMivB,EACxB,GAEA,CAAA1tJ,IAAA,MAAAU,MAyDA,SAAIA,GACF,IAAMusJ,EAAY9pJ,KAAK8pJ,UACjBG,EAAYjqJ,KAAKiqJ,UAIvB,GAFAG,GAAe,MAAOpqJ,KAAKgqJ,QAEb,OAAVzsJ,QAA4BoS,IAAVpS,QAEf,GAAqB,oBAAVA,EAAsB,SAAAke,EAAAvd,UAAAE,OAR5Bk3E,EAAU,IAAA74E,MAAAgf,EAAA,EAAAA,EAAA,KAAAnB,EAAA,EAAAA,EAAAmB,EAAAnB,IAAVg7D,EAAUh7D,EAAA,GAAApc,UAAAoc,GASpB+wI,EAAU9tJ,EAAO+3E,EACnB,KAAO,IAAqB,kBAAV/3E,EAOhB,MAAM,IAAI4B,UAAU,+BAAiC5B,EAAQ,KANzDd,MAAMF,QAAQgB,GAChB+tJ,EAAQ/tJ,GAERguJ,EAAUhuJ,EAId,CAEA,OAAOyC,KAMP,SAAS0f,EAAIniB,GACX,GAAqB,oBAAVA,EACT8tJ,EAAU9tJ,EAAO,QACZ,IAAqB,kBAAVA,EAShB,MAAM,IAAI4B,UAAU,+BAAiC5B,EAAQ,KAR7D,GAAId,MAAMF,QAAQgB,GAAQ,CACxB,IAAAiuJ,EAAA3F,GAC8CtoJ,GAC9C8tJ,EAFaG,EAAA,GAAeA,EAAAxqJ,MAAA,GAG9B,MACEuqJ,EAAUhuJ,EAId,CACF,CAMA,SAASguJ,EAAUzkJ,GACjB,KAAM,YAAaA,MAAa,aAAcA,GAC5C,MAAM,IAAItG,MACR,8KAIJ8qJ,EAAQxkJ,EAAO2kJ,SAEX3kJ,EAAO0qD,WACTy4F,EAAUz4F,SAAW3zD,IAAO,EAAMosJ,EAAUz4F,SAAU1qD,EAAO0qD,UAEjE,CAMA,SAAS85F,EAAQG,GACf,IAAIx8G,GAAS,EAEb,GAAgB,OAAZw8G,QAAgC97I,IAAZ87I,OAEjB,KAAIhvJ,MAAMF,QAAQkvJ,GAMvB,MAAM,IAAItsJ,UAAU,oCAAsCssJ,EAAU,KALpE,OAASx8G,EAAQw8G,EAAQrtJ,QAAQ,CAE/BshB,EADc+rI,EAAQx8G,GAExB,CAGF,CACF,CAOA,SAASo8G,EAAUK,EAAQp2E,GAIzB,IAHA,IAAIrmC,GAAS,EACT08G,GAAc,IAET18G,EAAQ66G,EAAU1rJ,QACzB,GAAI0rJ,EAAU76G,GAAO,KAAOy8G,EAAQ,CAClCC,EAAa18G,EACb,KACF,CAGF,IAAoB,IAAhB08G,EACF7B,EAAUlpJ,KAAK,CAAC8qJ,GAAM3xI,OAAAgrD,EAAKuQ,UAIxB,GAAIA,EAAWl3E,OAAS,EAAG,CAC9B,IAAAwtJ,EAAA/F,GAAyBvwE,GAApB1L,EAAOgiF,EAAA,GAAK9tD,EAAI8tD,EAAA5qJ,MAAA,GACf6qJ,EAAiB/B,EAAU6B,GAAY,GACzCG,GAAWD,IAAmBC,GAAWliF,KAC3CA,EAAU/rE,IAAO,EAAMguJ,EAAgBjiF,IAGzCkgF,EAAU6B,GAAc,CAACD,EAAQ9hF,GAAO7vD,OAAAgrD,EAAK+4B,GAC/C,CACF,CACF,KAAC4rD,CAAA,CA1xBmB,CAASF,IAyzBlBuC,IAAU,IAAIrC,IAAYpjF,SASvC,SAASmkF,GAAartJ,EAAMG,GAC1B,GAAqB,oBAAVA,EACT,MAAM,IAAI4B,UAAU,WAAa/B,EAAO,qBAE5C,CASA,SAASstJ,GAAettJ,EAAMG,GAC5B,GAAqB,oBAAVA,EACT,MAAM,IAAI4B,UAAU,WAAa/B,EAAO,uBAE5C,CASA,SAASgtJ,GAAehtJ,EAAM4sJ,GAC5B,GAAIA,EACF,MAAM,IAAIxpJ,MACR,gBACEpD,EACA,mHAGR,CAQA,SAAS8tJ,GAAWrrJ,GAGlB,IAAKisJ,GAAWjsJ,IAA8B,kBAAdA,EAAK0B,KACnC,MAAM,IAAIpC,UAAU,uBAAyBU,EAAO,IAGxD,CAUA,SAASorJ,GAAW7tJ,EAAM4uJ,EAAW5O,GACnC,IAAKA,EACH,MAAM,IAAI58I,MACR,IAAMpD,EAAO,0BAA4B4uJ,EAAY,YAG3D,CAMA,SAASxB,GAAMjtJ,GACb,OAOF,SAAyBA,GACvB,OAAOooE,QACLpoE,GACmB,kBAAVA,GACP,YAAaA,GACb,aAAcA,EAEpB,CAdS0uJ,CAAgB1uJ,GAASA,EAAQ,IAAIwrJ,GAAMxrJ,EACpD,CCtqCA,IAIM2uJ,GAAe,GAEfC,GAA2B,CAACtJ,oBAAoB,GAChDuJ,GAAe,gCAIfC,GAAe,CACnB,CAAChiG,KAAM,aAAcr2B,GAAI,wCACzB,CAACq2B,KAAM,qBAAsBr2B,GAAI,wCACjC,CACEq2B,KAAM,YACNr2B,GAAI,qDACJu2B,GAAI,gBAEN,CACEF,KAAM,eACNr2B,GAAI,qDACJu2B,GAAI,mBAEN,CACEF,KAAM,kBACNr2B,GAAI,qDACJu2B,GAAI,sBAEN,CAACF,KAAM,aAAcr2B,GAAI,wCACzB,CAACq2B,KAAM,sBAAuBr2B,GAAI,+BAClC,CACEq2B,KAAM,mBACNr2B,GAAI,kDAEN,CAACq2B,KAAM,aAAcr2B,GAAI,qBACzB,CAACq2B,KAAM,UAAWr2B,GAAI,kCAAmCu2B,GAAI,iBAC7D,CAACF,KAAM,eAAgBr2B,GAAI,wBAC3B,CAACq2B,KAAM,YAAar2B,GAAI,iCAAkCu2B,GAAI,cAC9D,CAACF,KAAM,SAAUr2B,GAAI,4BAA6Bu2B,GAAI,YACtD,CAACF,KAAM,YAAar2B,GAAI,qBACxB,CAACq2B,KAAM,oBAAqBr2B,GAAI,oBAAqBu2B,GAAI,gBACzD,CAACF,KAAM,mBAAoBr2B,GAAI,oBAAqBu2B,GAAI,iBAWnD,SAAS+hG,GAASnvJ,GACvB,IAAMovJ,EAAkBpvJ,EAAQovJ,gBAC1BC,EAAervJ,EAAQqvJ,aACvBtmI,EAAW/oB,EAAQ+oB,UAAY,GAC/BkhD,EAAYjqE,EAAQiqE,UACpB40D,EAAa7+H,EAAQ6+H,WACrBywB,EAAqBtvJ,EAAQsvJ,mBAC7BC,EAAgBvvJ,EAAQuvJ,eAAiBR,GACzCS,EAAgBxvJ,EAAQwvJ,eAAiBT,GACzCU,EAAsBzvJ,EAAQyvJ,oBAAmBnlF,EAAAA,EAAA,GAC/CtqE,EAAQyvJ,qBAAwBT,IACpCA,GACEU,EAAW1vJ,EAAQ0vJ,SACnBC,EAAmB3vJ,EAAQ2vJ,iBAC3BC,EAAe5vJ,EAAQ4vJ,cAAgBC,GAEvCC,EAAYlB,KACf1b,IAAI0K,IACJ1K,IAAIsc,GACJtc,IAAIoV,GAAcmH,GAClBvc,IAAIqc,GAED7xB,EAAO,IAAIkuB,GAEO,kBAAb7iI,IACT20G,EAAKt9H,MAAQ2oB,GAad,IAEqC63H,EAFrCC,EAAAhiD,GAEyBqwD,IAAY,IAAtC,IAAArO,EAAA57I,MAAA27I,EAAAC,EAAA97I,KAAAstC,MAAwC,KAA7B09G,EAAWnP,EAAAxgJ,MAChBxB,OAAOD,OAAOqB,EAAS+vJ,EAAY7iG,QAGjC6iG,EAAY7iG,KAEX6iG,EAAY3iG,IACC2iG,EAAY3iG,GAK1B2iG,EAAYl5H,GAIpB,CAAC,OAAAzzB,GAAAy9I,EAAAh8I,EAAAzB,EAAA,SAAAy9I,EAAAz7I,GAAA,CAED,IAAM4qJ,EAAYF,EAAUt4I,MAAMkmH,GAE9B8qB,EAAWsH,EAAUG,QAAQD,EAAWtyB,GAiB5C,OAdIzzD,IACFu+E,EAAW,CACTpkJ,KAAM,UACN0uC,QAAS,MACT3mC,WAAY,CAAC89D,UAAAA,GAEblhD,SACoB,SAAlBy/H,EAASpkJ,KAAkBokJ,EAASz/H,SAAW,CAACy/H,KAKtD1E,GAAM0E,GAaN,SAAmB9lJ,EAAMovC,EAAOstD,GAC9B,GAAkB,QAAd18F,EAAK0B,MAAkBg7F,GAA2B,kBAAVttD,EAO1C,OANI49G,EACFtwD,EAAOr2E,SAASs9B,OAAOvU,EAAO,GAE9BstD,EAAOr2E,SAAS+oB,GAAS,CAAC1tC,KAAM,OAAQhE,MAAOsC,EAAKtC,OAG/C0xC,EAKP,IAAIpyC,EAFN,GAAkB,YAAdgD,EAAK0B,KAIP,IAAK1E,KAAOmhI,GACV,GACEjiI,OAAOD,OAAOkiI,GAAenhI,IAC7Bd,OAAOD,OAAO+D,EAAKyJ,WAAYzM,GAC/B,CACA,IAAMU,EAAQsC,EAAKyJ,WAAWzM,GACxB+L,EAAOo1H,GAAcnhI,IACd,OAAT+L,GAAiBA,EAAKsQ,SAASrZ,EAAKowC,YACtCpwC,EAAKyJ,WAAWzM,GAAOkwJ,EAAaxiJ,OAAOhN,GAAS,IAAKV,EAAKgD,GAElE,CAIJ,GAAkB,YAAdA,EAAK0B,KAAoB,CAC3B,IAAIgnE,EAASgkF,GACRA,EAAgBrzI,SAASrZ,EAAKowC,WAC/Bw8G,GACAA,EAAmBvzI,SAASrZ,EAAKowC,SAOrC,IAJKs4B,GAAUikF,GAAiC,kBAAVv9G,IACpCs5B,GAAUikF,EAAa3sJ,EAAMovC,EAAOstD,IAGlCh0B,GAAUg0B,GAA2B,kBAAVttD,EAAoB,CACV,IAAAo+G,EAAvC,GAAIP,GAAoBjtJ,EAAKqmB,UAC3BmnI,EAAA9wD,EAAOr2E,UAASs9B,OAAM/8C,MAAA4mJ,EAAA,CAACp+G,EAAO,GAACl1B,OAAAgrD,EAAKllE,EAAKqmB,iBAEzCq2E,EAAOr2E,SAASs9B,OAAOvU,EAAO,GAGhC,OAAOA,CACT,CACF,CACF,IA7DOosF,GAAasqB,EAAU,CAC5Bp2F,SAAAA,GAAAA,SACAysE,WAAAA,EACAE,oBAAoB,EACpB5kE,IAAAA,GAAAA,IACAC,KAAAA,GAAAA,KACA4kE,UAAU,EACVC,UAAU,GAuDd,CAWO,SAAS4wB,GAAoBzvJ,GAIlC,IAAM+vJ,EAAQ/vJ,EAAM2L,QAAQ,KACtBqkJ,EAAehwJ,EAAM2L,QAAQ,KAC7BskJ,EAAajwJ,EAAM2L,QAAQ,KAC3BwiI,EAAQnuI,EAAM2L,QAAQ,KAE5B,OAEEokJ,EAAQ,GAEP5hB,GAAS,GAAK4hB,EAAQ5hB,GACtB6hB,GAAgB,GAAKD,EAAQC,GAC7BC,GAAc,GAAKF,EAAQE,GAE5BpB,GAAaxjJ,KAAKrL,EAAMyD,MAAM,EAAGssJ,IAE1B/vJ,EAGF,EACT,CCrTO,IAAMkwJ,GAAQ,SAAA7tD,GAAAz6B,EAAAsoF,EAAA7tD,GAAA,IAAAC,EAAA/5B,EAAA2nF,GAAA,SAAAA,IAAA,IAAA9qF,EAAA76D,EAAA,KAAA2lJ,GAAA,QAAAhyI,EAAAvd,UAAAE,OAAA4X,EAAA,IAAAvZ,MAAAgf,GAAAnB,EAAA,EAAAA,EAAAmB,EAAAnB,IAAAtE,EAAAsE,GAAApc,UAAAoc,GAkBlB,OAlBkBqoD,EAAAk9B,EAAAnjG,KAAA+J,MAAAo5F,EAAA,OAAA9lF,OAAA/D,KACpB0N,OAAS,WACR,IACC,OACC08E,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,YAAWlhD,SAExBy8C,EAAKrlD,MAAMpc,OACVk/F,EAAAA,GAAAA,KAACstD,GAAa,CAAAxnI,SAAEy8C,EAAKrlD,MAAMpc,SAE3Bk/F,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAAS0H,YAAYliF,UAChCk6E,EAAAA,GAAAA,KAAA,KAAAl6E,SAAG,+BAKT,CAAE,MAAAqhE,GACD,OAAO6Y,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,0BACvB,CACD,EAACzE,CAAC,CAAD,OAAA5H,EAAA0yF,EAAA,CAlBmB,CAAS3gH,EAAAA,WCiBjB6gH,GAAS,SAAA/tD,GAAAz6B,EAAAwoF,EAAA/tD,GAAA,IAAAC,EAAA/5B,EAAA6nF,GACrB,SAAAA,EAAYrwI,GAAe,IAADqlD,EAIvB,OAJuB76D,EAAA,KAAA6lJ,IACzBhrF,EAAAk9B,EAAAnjG,KAAA,KAAM4gB,IAMPoG,OAAS,WACR,IACC,IAAMyhH,EAAO,CACZ,CAAEnxG,GAAI,QAAS0pB,QAAS,cACxB,CAAE1pB,GAAI,QAAS0pB,QAAS,cACxB,CAAE1pB,GAAI,UAAW0pB,QAAS,WAC1B,CAAE1pB,GAAI,QAAS0pB,QAAS,UAGrBilB,EAAKrlD,MAAMswI,WAAWxvJ,OAAS,GAClC+mI,EAAKvkI,KAAK,CAAEozB,GAAI,aAAc0pB,QAAS,eAGxC,IAAIv9C,EAAU,KACd,OAAQwiE,EAAKp9D,MAAMsoJ,aAClB,IAAK,QACJ1tJ,GACCigG,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,UAASlhD,UACvBk6E,EAAAA,GAAAA,KAACqtD,GAAQ,CAACvsJ,MAAOyhE,EAAKrlD,MAAMpc,UAG9B,MACD,IAAK,QACJf,GACCigG,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,UAASlhD,UACvBk6E,EAAAA,GAAAA,KAACoW,GAAQ,CAACr5G,QAASwlE,EAAKrlD,MAAMngB,YAGhC,MACD,IAAK,UACJgD,GACCigG,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,UAASlhD,UACvBk6E,EAAAA,GAAAA,KAACwW,GAAU,CACVt0C,KAAMK,EAAKrlD,MAAMglD,KACjBnlE,QAASwlE,EAAKrlD,MAAMngB,QACpB85G,YAAat0C,EAAKrlD,MAAM25F,YACxBF,iBAAkBp0C,EAAKrlD,MAAMy5F,iBAC7BC,YAAar0C,EAAKrlD,MAAM05F,YACxBH,sBAAuBl0C,EAAKrlD,MAAMu5F,0BAIrC,MACD,IAAK,QACJ12G,GACCigG,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,UAASlhD,UACvBk6E,EAAAA,GAAAA,KAACkW,GAAQ,CACRh0C,KAAMK,EAAKrlD,MAAMglD,KACjBnlE,QAASwlE,EAAKrlD,MAAMngB,YAIvB,MACD,IAAK,aACJgD,GACCigG,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,UAASlhD,SACtBy8C,EAAKrlD,MAAMswI,WAAW5lG,KAAI,SAACz6C,EAAIrL,GAAC,OAAKk+F,EAAAA,GAAAA,KAACO,GAAI,CAAAz6E,SAAU3Y,GAAJrL,EAAc,MAMnE,OACCq+F,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,aAAYlhD,SAAA,EAC1Bk6E,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAASwG,QAAQhhF,SAAC,UAC9Bk6E,EAAAA,GAAAA,KAACiE,GAAI,CAAClnG,QAASgoI,EAAMrhC,WAAYnhC,EAAKp9D,MAAMsoJ,YAAa9pD,SAAU,SAAA/vE,GAAE,OAAI2uC,EAAKnL,SAAS,CAAEq2F,YAAa75H,GAAK,IAC1G7zB,IAGJ,CAAE,MAAAonF,GACD,OAAO6Y,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,2BACvB,CACD,EA7ECzE,EAAKp9D,MAAQ,CACZsoJ,YAAa,SACZlrF,CACH,CAAC,OAAA5H,EAAA4yF,EAAA,CANoB,CAAS7gH,EAAAA,WCUlBghH,GAAQ,SAAAluD,GAAAz6B,EAAA2oF,EAAAluD,GAAA,IAAAC,EAAA/5B,EAAAgoF,GACpB,SAAAA,EAAYxwI,GAAe,IAADqlD,EASvB,OATuB76D,EAAA,KAAAgmJ,IACzBnrF,EAAAk9B,EAAAnjG,KAAA,KAAM4gB,IAWPywI,cAAgB,SAAC1qE,GACqB,KAAjC1gB,EAAKp9D,MAAMyoJ,mBACdrrF,EAAKnL,SAAS,CACbw2F,kBAAmB3qE,EAAQrvD,IAG9B,EAAC2uC,EAEDsrF,WAAa,SAAC5lF,GACqB,KAA9B1F,EAAKp9D,MAAM2oJ,gBACdvrF,EAAKnL,SAAS,CACb02F,eAAgB7lF,EAAKr0C,IAGxB,EAAC2uC,EAEDwrF,iBAAmB,SAAC3qE,GACqB,KAApC7gB,EAAKp9D,MAAM6oJ,sBACdzrF,EAAKnL,SAAS,CACb42F,qBAAsB5qE,EAAWxvD,IAGpC,EAAC2uC,EAED0rF,OAAS,WACR1rF,EAAKrlD,MAAM+wI,OAAO1rF,EAAKp9D,MAAMyoJ,kBAAmBrrF,EAAKp9D,MAAM2oJ,eAAgBvrF,EAAKp9D,MAAM6oJ,qBACvF,EAACzrF,EAED4uC,OAAS,SAAChwG,GACT,OAAQA,GACP,KAAKyhF,GAASuC,QACb5iB,EAAKnL,SAAS,CACb02B,WAAY1xB,EAAYQ,QAAQsV,GAAUknB,mBAAmB72B,EAAKrlD,MAAMngB,QAAQomE,SAASvb,KAAI,SAAA5lD,GAAC,OAAIA,EAAE4xB,EAAE,KAAGwvB,OAAO,EAAG,KACjH,WACGmf,EAAKrlD,MAAMngB,QAAQimE,WACvBT,EAAKrlD,MAAMklD,UAAU/D,EAAcY,KAAM,EAE3C,IACA,MACD,KAAK2jB,GAASwC,KACb7iB,EAAKnL,SAAS,CACb82F,QAAS9xF,EAAYQ,QAAQsV,GAAU+b,YAAY1rB,EAAKrlD,MAAMngB,QAAQomE,SAASvb,KAAI,SAAA7lD,GAAC,OAAIA,EAAE6xB,EAAE,KAAGwvB,OAAO,EAAG,KACvG,WACGmf,EAAKrlD,MAAMngB,QAAQimE,WACvBT,EAAKrlD,MAAMklD,UAAU/D,EAAcY,KAAM,EAE3C,IACA,MACD,KAAK2jB,GAASyC,WACb9iB,EAAKnL,SAAS,CACb+2F,cAAe/xF,EAAYQ,QAAQsV,GAAUgc,kBAAkB3rB,EAAKrlD,MAAMngB,QAAQomE,SAASvb,KAAI,SAAA7oC,GAAC,OAAIA,EAAE6U,EAAE,KAAGwvB,OAAO,EAAG,KACnH,WACGmf,EAAKrlD,MAAMngB,QAAQimE,WACvBT,EAAKrlD,MAAMklD,UAAU/D,EAAcY,KAAM,EAE3C,IAGH,EAACsD,EAED6rF,mBAAqB,WACpB,IAAIC,GACHruD,EAAAA,GAAAA,KAAC4C,GAAW,CACXzhG,KAAMyhF,GAASuC,QACfx/D,UAAU,EACV09E,OAAOrD,EAAAA,GAAAA,KAAC6O,GAAe,CAACpyE,KAAK,UAAUqyE,QAAQ,4CAI7Cw/C,GACHtuD,EAAAA,GAAAA,KAAC4C,GAAW,CACXzhG,KAAMyhF,GAASwC,KACfz/D,UAAU,EACV09E,OAAOrD,EAAAA,GAAAA,KAAC6O,GAAe,CAACpyE,KAAK,OAAOqyE,QAAQ,yCAI1Cy/C,GACHvuD,EAAAA,GAAAA,KAAC4C,GAAW,CACXzhG,KAAMyhF,GAASyC,WACf1/D,UAAU,EACV09E,OAAOrD,EAAAA,GAAAA,KAAC6O,GAAe,CAACpyE,KAAK,aAAaqyE,QAAQ,+CAI9C7rB,EAAU/Q,GAAUgR,WAAW3gB,EAAKp9D,MAAMyoJ,mBAC5C3qE,IACHorE,GACCruD,EAAAA,GAAAA,KAACqQ,GAAW,CAACptB,QAASA,KAIxB,IAAMhb,EAAOiK,GAAUiR,QAAQ5gB,EAAKp9D,MAAM2oJ,gBACtC7lF,IACHqmF,GACCtuD,EAAAA,GAAAA,KAACoQ,GAAQ,CAACnoC,KAAMA,KAIlB,IAAMmb,EAAalR,GAAUmR,cAAc9gB,EAAKp9D,MAAM6oJ,sBAOtD,OANI5qE,IACHmrE,GACCvuD,EAAAA,GAAAA,KAAC+O,GAAc,CAAC3rB,WAAYA,MAK7B4c,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,qBAAoBlhD,UAClCk6E,EAAAA,GAAAA,KAACY,GAAQ,CAACvxF,KAAK,MAAMwxF,MAAO,CAAEwtD,EAAaC,EAAUC,MAGxD,EAAChsF,EAEDisF,kBAAoB,WACnB,IAAIjsF,EAAKp9D,MAAMyoJ,kBAAf,CAIA,IAAM/sD,EAAQt+B,EAAKp9D,MAAM2oF,WAAWlmC,KAAI,SAAAh0B,GACvC,IAAMqvD,EAAU/Q,GAAUgR,WAAWtvD,GACrC,OACCosE,EAAAA,GAAAA,KAACqQ,GAAW,CAAkBptB,QAASA,EAASpoC,QAAS0nB,EAAKorF,eAA5C1qE,EAAQrvD,GAE5B,IAEMw9E,EAAUvwC,EAAgBsB,oBAAoBI,EAAKrlD,MAAMglD,KAAM7D,EAAcY,MAanF,OAZKmyC,EAAU,GAAM7uC,EAAKrlD,MAAMngB,QAAQimE,YACvC69B,EAAMrgG,MACLw/F,EAAAA,GAAAA,KAACwQ,GAAqB,CAErB7P,MAAM,SACNkQ,UAAWO,EACXpuC,UAAWT,EAAKrlD,MAAMngB,QAAQimE,UAC9BytC,SAAU,kBAAMluC,EAAK4uC,OAAOvuB,GAASuC,QAAQ,GAJzC,YAUN6a,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,qBAAoBlhD,UAClCk6E,EAAAA,GAAAA,KAACY,GAAQ,CAACvxF,KAAK,MAAMwxF,MAAOA,KAxB9B,CA2BD,EAACt+B,EAEDksF,eAAiB,WAChB,IAAIlsF,EAAKp9D,MAAM2oJ,eAAf,CAIA,IAAMjtD,EAAQt+B,EAAKp9D,MAAM+oJ,QAAQtmG,KAAI,SAAAh0B,GACpC,IAAMq0C,EAAOiK,GAAUiR,QAAQvvD,GAC/B,OACCosE,EAAAA,GAAAA,KAACoQ,GAAQ,CAAenoC,KAAMA,EAAMptB,QAAS0nB,EAAKsrF,YAAnC5lF,EAAKr0C,GAEtB,IAEMw9E,EAAUvwC,EAAgBsB,oBAAoBI,EAAKrlD,MAAMglD,KAAM7D,EAAcY,MAanF,OAZKmyC,EAAU,GAAM7uC,EAAKrlD,MAAMngB,QAAQimE,YACvC69B,EAAMrgG,MACLw/F,EAAAA,GAAAA,KAACwQ,GAAqB,CAErB7P,MAAM,SACNkQ,UAAWO,EACXpuC,UAAWT,EAAKrlD,MAAMngB,QAAQimE,UAC9BytC,SAAU,kBAAMluC,EAAK4uC,OAAOvuB,GAASwC,KAAK,GAJtC,YAUN4a,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,qBAAoBlhD,UAClCk6E,EAAAA,GAAAA,KAACY,GAAQ,CAACvxF,KAAK,MAAMwxF,MAAOA,KAxB9B,CA2BD,EAACt+B,EAEDmsF,qBAAuB,WACtB,IAAInsF,EAAKp9D,MAAM6oJ,qBAAf,CAIA,IAAMntD,EAAQt+B,EAAKp9D,MAAMgpJ,cAAcvmG,KAAI,SAAAh0B,GAC1C,IAAMwvD,EAAalR,GAAUmR,cAAczvD,GAC3C,OACCosE,EAAAA,GAAAA,KAAC+O,GAAc,CAAqB3rB,WAAYA,EAAYvoC,QAAS0nB,EAAKwrF,kBAArD3qE,EAAWxvD,GAElC,IAEMw9E,EAAUvwC,EAAgBsB,oBAAoBI,EAAKrlD,MAAMglD,KAAM7D,EAAcY,MAanF,OAZKmyC,EAAU,GAAM7uC,EAAKrlD,MAAMngB,QAAQimE,YACvC69B,EAAMrgG,MACLw/F,EAAAA,GAAAA,KAACwQ,GAAqB,CAErB7P,MAAM,SACNkQ,UAAWO,EACXpuC,UAAWT,EAAKrlD,MAAMngB,QAAQimE,UAC9BytC,SAAU,kBAAMluC,EAAK4uC,OAAOvuB,GAASyC,WAAW,GAJ5C,YAUN2a,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,qBAAoBlhD,UAClCk6E,EAAAA,GAAAA,KAACY,GAAQ,CAACvxF,KAAK,MAAMwxF,MAAOA,KAxB9B,CA2BD,EAACt+B,EAEDj/C,OAAS,WACR,IACC,IAAMqrI,EAA8C,KAAjCpsF,EAAKp9D,MAAMyoJ,mBAA4D,KAA9BrrF,EAAKp9D,MAAM2oJ,gBAA+D,KAApCvrF,EAAKp9D,MAAM6oJ,qBAE7G,OACC7tD,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,YAAWlhD,SAAA,CACxBy8C,EAAK6rF,qBAEL7rF,EAAKrlD,MAAMngB,QAAQkmE,UAClB+8B,EAAAA,GAAAA,KAACyB,GAAQ,CACRY,QACCrC,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAASE,IAAI16E,UACxBq6E,EAAAA,GAAAA,MAAA,KAAAr6E,SAAA,CAAG,+BACyBk6E,EAAAA,GAAAA,KAAA,KAAAl6E,SAAG,YAAW,eAAWk6E,EAAAA,GAAAA,KAAA,KAAAl6E,SAAG,SAAQ,mBAAek6E,EAAAA,GAAAA,KAAA,KAAAl6E,SAAG,eAAc,cAIlG/lB,SACCogG,EAAAA,GAAAA,MAAA,OAAAr6E,SAAA,EACCk6E,EAAAA,GAAAA,KAAA,KAAAl6E,SAAG,mCACHq6E,EAAAA,GAAAA,MAAA,KAAAr6E,SAAA,CAAG,yBAAqBk6E,EAAAA,GAAAA,KAACxB,GAAW,CAAChpF,KAAM,KAAM,uDACjD2qF,EAAAA,GAAAA,MAAA,KAAAr6E,SAAA,CAAG,sCAAkCk6E,EAAAA,GAAAA,KAAA,KAAAl6E,SAAG,aAAY,SAAKk6E,EAAAA,GAAAA,KAAA,KAAAl6E,SAAG,YAAW,QACvEq6E,EAAAA,GAAAA,MAAA,MAAAr6E,SAAA,EACCk6E,EAAAA,GAAAA,KAAA,MAAAl6E,SAAI,oDACJk6E,EAAAA,GAAAA,KAAA,MAAAl6E,SAAI,4CAKN,MAEJk6E,EAAAA,GAAAA,KAAA,SACCz9B,EAAKisF,oBACLjsF,EAAKksF,iBACLlsF,EAAKmsF,uBACJC,GAAY3uD,EAAAA,GAAAA,KAAA,UAAQh5B,UAAU,UAAUnsB,QAAS,kBAAM0nB,EAAK0rF,QAAQ,EAACnoI,SAAC,SAAgB,OAG3F,CAAE,MAAAqhE,GACD,OAAO6Y,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,0BACvB,CACD,EApQCzE,EAAKp9D,MAAQ,CACZ2oF,WAAY1xB,EAAYQ,QAAQsV,GAAUknB,mBAAmBl8E,EAAMngB,QAAQomE,SAASvb,KAAI,SAAA5lD,GAAC,OAAIA,EAAE4xB,EAAE,KAAGwvB,OAAO,EAAG,GAC9G8qG,QAAS9xF,EAAYQ,QAAQsV,GAAU+b,YAAY/wE,EAAMngB,QAAQomE,SAASvb,KAAI,SAAA7lD,GAAC,OAAIA,EAAE6xB,EAAE,KAAGwvB,OAAO,EAAG,GACpG+qG,cAAe/xF,EAAYQ,QAAQsV,GAAUgc,kBAAkBhxE,EAAMngB,QAAQomE,SAASvb,KAAI,SAAA7oC,GAAC,OAAIA,EAAE6U,EAAE,KAAGwvB,OAAO,EAAG,GAChHwqG,kBAAmB,GACnBE,eAAgB,GAChBE,qBAAsB,IACrBzrF,CACH,CAAC,OAAA5H,EAAA+yF,EAAA,CAXmB,CAAShhH,EAAAA,WCCjBkiH,GAAa,SAAApvD,GAAAz6B,EAAA6pF,EAAApvD,GAAA,IAAAC,EAAA/5B,EAAAkpF,GACzB,SAAAA,EAAY1xI,GAAe,IAADqlD,EAAA76D,EAAA,KAAAknJ,IACzBrsF,EAAAk9B,EAAAnjG,KAAA,KAAM4gB,IAeP43F,WAAa,SAAC7+F,GACb,IAAMgxG,EAAO1kD,EAAKp9D,MAAMu/E,MAAM5iB,MAAK,SAAA9/D,GAAC,OAAIA,EAAEgtE,cAAgB/4D,EAAK+4D,WAAW,IAC1E,GAAIi4C,EAAM,CACT,IAAMtpH,EAAOyW,KAAKG,MAAMH,KAAKC,UAAU4B,IACvCtY,EAAKi2B,GAAKssC,EAAMC,OAChB8mD,EAAKxhG,SAAW9nB,EAChB4kE,EAAKnL,SAAS,CACbstB,MAAOniB,EAAKp9D,MAAMu/E,OAEpB,CACD,EAACniB,EAED4uC,OAAS,SAACniC,GACT,IAAMi4C,EAAO1kD,EAAKp9D,MAAMu/E,MAAM5iB,MAAK,SAAA9/D,GAAC,OAAIA,EAAEgtE,cAAgBA,CAAW,IACjEi4C,IACHA,EAAKrrC,WAAaxf,EAAYQ,QAAQsV,GAAUkS,uBAAuBpV,EAAazM,EAAKrlD,MAAMngB,QAAQomE,UAAU/f,OAAO,EAAG,GAC3Hmf,EAAKnL,SAAS,CACbstB,MAAOniB,EAAKp9D,MAAMu/E,QAChB,WACGniB,EAAKrlD,MAAMngB,QAAQimE,WACvBT,EAAKrlD,MAAMklD,UAAU/D,EAAckB,cAAe,EAEpD,IAEF,EAACgD,EAED2hB,SAAW,WACV,IAAMjX,EAAQ1K,EAAKp9D,MAAMu/E,MAAM98B,KAAI,SAAA5lD,GAAC,OAAIA,EAAEyjB,QAAQ,IAAE03C,QAAO,SAAAp/D,GAAC,OAAU,OAANA,CAAU,IAC1EwkE,EAAKrlD,MAAMgnE,SAASjX,EACrB,EAAC1K,EAEDj/C,OAAS,WACR,IAEC,IADa4uD,GAAUiR,QAAQ5gB,EAAKrlD,MAAMo9E,KAAKztB,QAE9C,OAAO,KAGR,IAAMgiF,EAAgBtsF,EAAKp9D,MAAMu/E,MAAM98B,KAAI,SAACq/D,EAAMnlH,GACjD,OAAImlH,EAAKxhG,UAEPu6E,EAAAA,GAAAA,KAACiP,GAAQ,CAASh5F,KAAMgxG,EAAKxhG,UAAd3jB,IAIhBk+F,EAAAA,GAAAA,KAAC4C,GAAW,CAEXzhG,KAAMyhF,GAAS2C,KACf5/D,UAAU,EACV09E,OAAOrD,EAAAA,GAAAA,KAAC6O,GAAe,CAACpyE,KAAMwqF,EAAKj4C,YAAa8/B,QAAO,qBAAAn1F,OAAuBstG,EAAKj4C,YAAW,mBAHzFltE,EAMR,IAEM4iF,EAAQniB,EAAKp9D,MAAMu/E,MAAMvnB,QAAO,SAAA8pD,GAAI,OAAKA,EAAKxhG,QAAQ,IAAEmiC,KAAI,SAACq/D,EAAMnlH,GACxE,IAAM++F,EAAQomB,EAAKrrC,WAAWh0B,KAAI,SAAA3xC,GAAI,OAAI+pF,EAAAA,GAAAA,KAACiP,GAAQ,CAAeh5F,KAAMA,EAAM4kC,QAAS0nB,EAAKuyC,YAAnC7+F,EAAK2d,GAA4C,IAEpGw9E,EAAUvwC,EAAgBsB,oBAAoBI,EAAKrlD,MAAMglD,KAAM7D,EAAckB,eAanF,OAZK6xC,EAAU,GAAM7uC,EAAKrlD,MAAMngB,QAAQimE,YACvC69B,EAAMrgG,MACLw/F,EAAAA,GAAAA,KAACwQ,GAAqB,CAErB7P,MAAM,SACNkQ,UAAWO,EACXpuC,UAAWT,EAAKrlD,MAAMngB,QAAQimE,UAC9BytC,SAAU,kBAAMluC,EAAK4uC,OAAO8V,EAAKj4C,YAAY,GAJzC,YAUNgxB,EAAAA,GAAAA,KAAA,OAAah5B,UAAU,qBAAoBlhD,UAC1Ck6E,EAAAA,GAAAA,KAACY,GAAQ,CAACvxF,KAAK,MAAMwxF,MAAOA,KADnB/+F,EAIZ,IAEM6sJ,EAAYpsF,EAAKp9D,MAAMu/E,MAAM39B,OAAM,SAAA/kD,GAAC,OAAmB,OAAfA,EAAEyjB,QAAiB,IAEjE,OACC06E,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,iBAAgBlhD,SAAA,EAC9Bk6E,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,qBAAoBlhD,UAClCk6E,EAAAA,GAAAA,KAACY,GAAQ,CAACvxF,KAAK,MAAMwxF,MAAOguD,MAG5BtsF,EAAKrlD,MAAMngB,QAAQkmE,UAClB+8B,EAAAA,GAAAA,KAACyB,GAAQ,CACRY,QACCrC,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAASE,IAAI16E,SAAC,6CAE3B/lB,SACCogG,EAAAA,GAAAA,MAAA,OAAAr6E,SAAA,EACCq6E,EAAAA,GAAAA,MAAA,KAAAr6E,SAAA,CAAG,0CAA2Ck6E,EAAAA,GAAAA,KAAA,KAAAl6E,SAAG,kBAAiB,kDAClEk6E,EAAAA,GAAAA,KAAA,KAAAl6E,SAAG,4EAIJ,MAEJk6E,EAAAA,GAAAA,KAAA,SACCtb,EACCiqE,GAAY3uD,EAAAA,GAAAA,KAAA,UAAQh5B,UAAU,UAAUnsB,QAAS,kBAAM0nB,EAAK2hB,UAAU,EAACp+D,SAAC,SAAgB,OAG7F,CAAE,MAAAqhE,GACD,OAAO6Y,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,+BACvB,CACD,EAxHC,IAAM0d,EAAQ7B,GAAemB,iBAAiBzhB,EAAKrlD,MAAMo9E,MAAM1yC,KAAI,SAAAu8B,GAClE,MAAO,CACNnV,YAAamV,EACbvI,WAAYxf,EAAYQ,QAAQsV,GAAUkS,uBAAuBD,EAAMjnE,EAAMngB,QAAQomE,UAAU/f,OAAO,EAAG,GACzG39B,SAAU,KAEZ,IAIE,OAFF88C,EAAKp9D,MAAQ,CACZu/E,MAAOA,GACNniB,CACH,CAAC,OAAA5H,EAAAi0F,EAAA,CAfwB,CAASliH,EAAAA,WCrBtBoiH,GAAU,SAAAtvD,GAAAz6B,EAAA+pF,EAAAtvD,GAAA,IAAAC,EAAA/5B,EAAAopF,GAAA,SAAAA,IAAA,IAAAvsF,EAAA76D,EAAA,KAAAonJ,GAAA,QAAAzzI,EAAAvd,UAAAE,OAAA4X,EAAA,IAAAvZ,MAAAgf,GAAAnB,EAAA,EAAAA,EAAAmB,EAAAnB,IAAAtE,EAAAsE,GAAApc,UAAAoc,GA+BpB,OA/BoBqoD,EAAAk9B,EAAAnjG,KAAA+J,MAAAo5F,EAAA,OAAA9lF,OAAA/D,KACtB0N,OAAS,WACR,IACC,OACC68E,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,cAAalhD,SAAA,EAC3Bk6E,EAAAA,GAAAA,KAACwJ,GAAiB,CAACxmB,UAAWzgB,EAAKrlD,MAAMo9E,OAExC/3B,EAAKrlD,MAAMngB,QAAQkmE,UAClB+8B,EAAAA,GAAAA,KAACyB,GAAQ,CACRY,QACCrC,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAASE,IAAI16E,SAAC,6CAE3B/lB,SACCogG,EAAAA,GAAAA,MAAA,OAAAr6E,SAAA,EACCq6E,EAAAA,GAAAA,MAAA,KAAAr6E,SAAA,CAAG,kBAAck6E,EAAAA,GAAAA,KAAA,KAAAl6E,SAAG,gBAAe,mCACnCq6E,EAAAA,GAAAA,MAAA,KAAAr6E,SAAA,CAAG,kBAAck6E,EAAAA,GAAAA,KAAA,KAAAl6E,SAAG,iBAAgB,mHAIrC,MAEJk6E,EAAAA,GAAAA,KAAA,UACAA,EAAAA,GAAAA,KAAA,UAAQnlD,QAAS0nB,EAAKrlD,MAAM6xI,OAAOjpI,SAAC,iBACpCk6E,EAAAA,GAAAA,KAAA,UAAQnlD,QAAS0nB,EAAKrlD,MAAM8xI,QAAQlpI,SAAC,kBACrCk6E,EAAAA,GAAAA,KAAA,UACAA,EAAAA,GAAAA,KAAA,UAAQh5B,UAAU,UAAUnsB,QAAS0nB,EAAKrlD,MAAMilF,SAASr8E,SAAC,eAG7D,CAAE,MAAAqhE,GACD,OAAO6Y,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,4BACvB,CACD,EAACzE,CAAC,CAAD,OAAA5H,EAAAm0F,EAAA,CA/BqB,CAASpiH,EAAAA,WCgBnBuiH,GAAgB,SAAAzvD,GAAAz6B,EAAAkqF,EAAAzvD,GAAA,IAAAC,EAAA/5B,EAAAupF,GAC5B,SAAAA,EAAY/xI,GAAe,IAADqlD,EAAA76D,EAAA,KAAAunJ,IACzB1sF,EAAAk9B,EAAAnjG,KAAA,KAAM4gB,IAaPgyI,YAAc,SAACtiF,EAAmBC,EAAgBC,GACjD,IAAMwtB,EAAO/3B,EAAKp9D,MAAMm1F,KACxBzX,GAAeE,oBAAoBuX,EAAM1tB,EAAWC,EAAQC,GAC5DvK,EAAKnL,SAAS,CACbkjC,KAAMA,GAER,EAAC/3B,EAED2hB,SAAW,SAACjX,GACX,IAAMqtB,EAAO/3B,EAAKp9D,MAAMm1F,KACxBA,EAAKrtB,MAAQA,EACb1K,EAAKnL,SAAS,CACbkjC,KAAMA,GAER,EAAC/3B,EAEDwsF,OAAS,WACR,IAAMz0D,EAAO/3B,EAAKp9D,MAAMm1F,KACxBA,EAAKt9F,KAAOuiF,GAAcC,eAE1Bjd,EAAKnL,SAAS,CACbkjC,KAAMA,GAER,EAAC/3B,EAEDysF,QAAU,WACT,IAAMhzH,EAAQ8+B,EAAOW,YAAY,GAAI,KAE/B6+B,EAAO/3B,EAAKp9D,MAAMm1F,KACxBA,EAAKt+D,MAAK,OAAAriB,OAAUqiB,EAAMj6B,EAAC,MAAA4X,OAAKqiB,EAAMlc,EAAC,MAAAnG,OAAKqiB,EAAMjd,EAAC,KAEnDwjD,EAAKnL,SAAS,CACbkjC,KAAMA,GAER,EAAC/3B,EAED4/B,SAAW,WACV5/B,EAAKrlD,MAAMilF,SAAS5/B,EAAKp9D,MAAMm1F,KAChC,EAAC/3B,EAEDj/C,OAAS,WACR,IACC,IAAIvjB,EAAU,KAmCd,MAlCmC,KAA9BwiE,EAAKp9D,MAAMm1F,KAAK1tB,WAAiD,KAA3BrK,EAAKp9D,MAAMm1F,KAAKztB,QAAoD,KAAjCtK,EAAKp9D,MAAMm1F,KAAKxtB,aAE7F/sE,GACCigG,EAAAA,GAAAA,KAAC0tD,GAAQ,CACRxrF,KAAMK,EAAKrlD,MAAMglD,KACjBnlE,QAASwlE,EAAKrlD,MAAMngB,QACpBkxJ,OAAQ1rF,EAAK2sF,YACb9sF,UAAWG,EAAKrlD,MAAMklD,YAGdygB,GAAemB,iBAAiBzhB,EAAKp9D,MAAMm1F,MAAMt8F,SAAWukE,EAAKp9D,MAAMm1F,KAAKrtB,MAAMjvE,OAE5F+B,GACCigG,EAAAA,GAAAA,KAAC4uD,GAAa,CACbt0D,KAAM/3B,EAAKp9D,MAAMm1F,KACjBp4B,KAAMK,EAAKrlD,MAAMglD,KACjBnlE,QAASwlE,EAAKrlD,MAAMngB,QACpBmnF,SAAU3hB,EAAK2hB,SACf9hB,UAAWG,EAAKrlD,MAAMklD,YAGY,IAA1BG,EAAKp9D,MAAMm1F,KAAK57B,QAE1B3+D,GACCigG,EAAAA,GAAAA,KAAC8uD,GAAU,CACVx0D,KAAM/3B,EAAKp9D,MAAMm1F,KACjBv9F,QAASwlE,EAAKrlD,MAAMngB,QACpBgyJ,OAAQxsF,EAAKwsF,OACbC,QAASzsF,EAAKysF,QACd7sD,SAAU5/B,EAAK4/B,aAMjBhC,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,qBAAoBlhD,SAAA,EAClCk6E,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,SAAQlhD,UACtBk6E,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAASwG,QAAQhhF,SAAC,sBAI/Bk6E,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,UAASlhD,SACtB/lB,MAIL,CAAE,MAAAonF,GACD,OAAO6Y,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,mCACvB,CACD,EAvGC,IAAMhrC,EAAQ8+B,EAAOW,YAAY,GAAI,KAE/B6+B,EAAOlmF,KAAKG,MAAMH,KAAKC,UAAU6I,EAAMo9E,OAM3C,OALFA,EAAKt9F,KAAOuiF,GAAcC,eAC1B8a,EAAKt+D,MAAK,OAAAriB,OAAUqiB,EAAMj6B,EAAC,MAAA4X,OAAKqiB,EAAMlc,EAAC,MAAAnG,OAAKqiB,EAAMjd,EAAC,KAEnDwjD,EAAKp9D,MAAQ,CACZm1F,KAAMA,GACL/3B,CACH,CAAC,OAAA5H,EAAAs0F,EAAA,CAb2B,CAASviH,EAAAA,WCHzByiH,GAAkB,SAAA3vD,GAAAz6B,EAAAoqF,EAAA3vD,GAAA,IAAAC,EAAA/5B,EAAAypF,GAC9B,SAAAA,EAAYjyI,GAAe,IAADqlD,EAIvB,OAJuB76D,EAAA,KAAAynJ,IACzB5sF,EAAAk9B,EAAAnjG,KAAA,KAAM4gB,IAMPkyI,cAAgB,SAAC90D,GAChB/3B,EAAKnL,SAAS,CACbkjC,KAAMA,GAER,EAAC/3B,EAED8sF,gBAAkB,SAAC/0D,EAAsBrkF,GACxC,IAAIquE,EAAa,EACjB,OAAQruE,EAAKoH,UACZ,KAAK4uD,GAAiBsY,KACtB,KAAKtY,GAAiBuY,KACrBF,EAAa,EAGf,IAAMgrE,EAAWh1D,EAAKrtB,MAAM9P,QAAO,SAAAp/D,GAAC,OAAIA,EAAEsf,WAAapH,EAAKoH,QAAQ,IAC9DonE,EAAYroB,EAAYgB,IAAIkyF,GAAU,SAAAvxJ,GAAC,OAAIA,EAAE2mF,KAAK,IAClDC,EAAiBL,EAAaG,EACpC,OAAOxuE,EAAKyuE,OAASC,CACtB,EAACpiB,EAEDg/B,UAAY,WACX,GAAwB,OAApBh/B,EAAKp9D,MAAMm1F,KACd,OAAO,KAGR,IAAM3sE,EAAU40C,EAAKp9D,MAAMm1F,KAAKrtB,MAAM9P,QAAO,SAAAp/D,GAAC,OAAIA,EAAEsf,WAAaklD,EAAKrlD,MAAMjH,KAAKoH,QAAQ,IAAEuqC,KAAI,SAAA7pD,GAAC,OAC/FoiG,EAAAA,GAAAA,MAAA,OAAgBn5B,UAAU,iBAAgBlhD,SAAA,EACzCk6E,EAAAA,GAAAA,KAACiP,GAAQ,CAACh5F,KAAMlY,KAChBiiG,EAAAA,GAAAA,KAAA,UAAQnlD,QAAS,kBAAM0nB,EAAKrlD,MAAM+uE,SAASluF,EAAGwkE,EAAKp9D,MAAMm1F,KAAuB,EAACx0E,SAAC,WAFzE/nB,EAAE61B,GAGN,IAEgB,IAAnBjG,EAAQ3vB,QACX2vB,EAAQntB,MACPw/F,EAAAA,GAAAA,KAAA,OAAiBh5B,UAAU,iBAAgBlhD,UAC1Ck6E,EAAAA,GAAAA,KAAC4C,GAAW,CACXS,OACCrD,EAAAA,GAAAA,KAAC6O,GAAe,CACf9uG,SACCigG,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAASiG,MAAMzgF,SAAC,cAI/BH,UAAU,KATH,UAeX,IAAM4pI,EAAahtF,EAAK8sF,gBAAgB9sF,EAAKp9D,MAAMm1F,KAAM/3B,EAAKrlD,MAAMjH,MAEpE,OACC+pF,EAAAA,GAAAA,KAACmB,GAAM,CACNziC,MAAO,EACP3+D,SACCogG,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,uBAAsBlhD,SAAA,EACpCk6E,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAASwG,QAAQhhF,SAAEy8C,EAAKp9D,MAAMm1F,KAAKt9F,QAC/CgjG,EAAAA,GAAAA,KAAA,UACAG,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,eAAclhD,SAAA,EAC5Bq6E,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,cAAalhD,SAAA,EAC3Bk6E,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAASmE,WAAW3+E,SAAC,uBAChC6H,MAEFwyE,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,cAAalhD,SAAA,EAC3Bk6E,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAASmE,WAAW3+E,SAAC,cACjCq6E,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,iBAAgBlhD,SAAA,EAC9Bk6E,EAAAA,GAAAA,KAACiP,GAAQ,CAACh5F,KAAMssD,EAAKrlD,MAAMjH,OAC1Bs5I,GAAavvD,EAAAA,GAAAA,KAAA,UAAQnlD,QAAS,WAAQ0nB,EAAKrlD,MAAM2uE,UAAUtpB,EAAKrlD,MAAMjH,KAAMssD,EAAKp9D,MAAMm1F,MAAyB/3B,EAAK6sF,cAAc,KAAO,EAAEtpI,SAAC,UAAiB,iBAMpKu7E,QAAS,kBAAM9+B,EAAK6sF,cAAc,KAAK,GAG1C,EAAC7sF,EAEDj/C,OAAS,WACR,IACC,IAAM+gE,EAA0B,GAC1BmrE,EAA4B,GAElCjtF,EAAKrlD,MAAMglD,KAAKmB,OACdlG,QAAO,SAAAm9B,GAAI,OAAK/3B,EAAKrlD,MAAMjH,KAAK+4D,cAAgB9C,GAAoBwC,MAASmU,GAAemB,iBAAiBsW,GAAMxhF,SAASypD,EAAKrlD,MAAMjH,KAAK+4D,YAAY,IACxJxuD,SAAQ,SAAA85E,GACW/3B,EAAK8sF,gBAAgB/0D,EAAM/3B,EAAKrlD,MAAMjH,MAExDouE,EAAS7jF,MACRw/F,EAAAA,GAAAA,KAACwJ,GAAiB,CAAexmB,UAAWsX,EAAMz/C,QAAS,SAAAmoC,GAAS,OAAIzgB,EAAKrlD,MAAM2uE,UAAUtpB,EAAKrlD,MAAMjH,KAAM+sE,EAAU,GAAhGsX,EAAK1mE,KAG9B47H,EAAWhvJ,MACVw/F,EAAAA,GAAAA,KAACwJ,GAAiB,CAAexmB,UAAWsX,EAAMz/C,QAAS,SAAAmoC,GAAS,OAAIzgB,EAAK6sF,cAAcpsE,EAAU,GAA7EsX,EAAK1mE,IAGhC,IAED,IAAI7zB,EAAU,KA8Bd,OA5BCA,EADGskF,EAASrmF,OAASwxJ,EAAWxxJ,SAAW,GAE1CgiG,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,kBAAiBlhD,UAC/Bk6E,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAASiG,MAAMzgF,SAAC,8CAK7Bq6E,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,YAAWlhD,SAAA,CAExBu+D,EAASrmF,OAAS,GACjBgiG,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAAS0H,YAAYliF,UAChCk6E,EAAAA,GAAAA,KAAA,KAAAl6E,SAAG,0EAEF,KAEHu+D,EAEAmrE,EAAWxxJ,OAAS,GACnBgiG,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAAS0H,YAAYliF,UAChCk6E,EAAAA,GAAAA,KAAA,KAAAl6E,SAAG,0HAEF,KAEH0pI,MAMHrvD,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,wBAAuBlhD,SAAA,EACrCk6E,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAASwG,QAAQhhF,SAAC,gBAC9Bk6E,EAAAA,GAAAA,KAAA,UACAG,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,0BAAyBlhD,SAAA,EACvCq6E,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,OAAMlhD,SAAA,EACpBk6E,EAAAA,GAAAA,KAACiP,GAAQ,CAACh5F,KAAMssD,EAAKrlD,MAAMjH,QAC3BkqF,EAAAA,GAAAA,MAAA,UAAQtlD,QAAS,kBAAM0nB,EAAKrlD,MAAMuyI,SAASltF,EAAKrlD,MAAMjH,KAAK,EAAC6P,SAAA,CAAC,QACxDk6E,EAAAA,GAAAA,KAAA,UAAMA,EAAAA,GAAAA,KAACT,GAAS,CAACp+F,KAAMk+F,GAASnF,MAAO/8F,MAAO,GAAIqY,KAAM8pF,GAASK,eAGtE5/F,KAEDwiE,EAAKg/B,cAGT,CAAE,MAAApa,GACD,OAAO6Y,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,iCACvB,CACD,EAvJCzE,EAAKp9D,MAAQ,CACZm1F,KAAM,MACL/3B,CACH,CAAC,OAAA5H,EAAAw0F,EAAA,CAN6B,CAASziH,EAAAA,WCE3BgjH,GAAU,SAAAlwD,GAAAz6B,EAAA2qF,EAAAlwD,GAAA,IAAAC,EAAA/5B,EAAAgqF,GACtB,SAAAA,EAAYxyI,GAAe,IAADqlD,EAIvB,OAJuB76D,EAAA,KAAAgoJ,IACzBntF,EAAAk9B,EAAAnjG,KAAA,KAAM4gB,IAMPqkF,UAAY,WACX,IAAKh/B,EAAKp9D,MAAMwqJ,aACf,OAAO,KAGR,IAAM3oD,EAAOzkC,EAAKp9D,MAAMwqJ,aAEpBC,EAAQ,KAEXA,EADgB,KAAZ5oD,EAAKpzE,IAAc2uC,EAAKrlD,MAAMngB,QAAQomE,QAAQrqD,SAASkuF,EAAKpzE,IACxD,MAGPusE,EAAAA,GAAAA,MAAA,OAAAr6E,SAAA,EACCk6E,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAAS0H,YAAYliF,UAChCq6E,EAAAA,GAAAA,MAAA,KAAAr6E,SAAA,CAAG,QAAIk6E,EAAAA,GAAAA,KAAA,KAAAl6E,SAAG,WAAU,6BAErBq6E,EAAAA,GAAAA,MAAA,UAAQn5B,UAAU,UAAUnsB,QAAS,kBAAM0nB,EAAKrlD,MAAM2yI,SAAS,CAAE7oD,GAAO,EAAClhF,SAAA,CAAC,kBACzDgwF,GAAOG,WAAW1zC,EAAKrlD,MAAM4yI,SAAS,CAAE9oD,IAAS,KAAK,UAM1E,IAAM3jC,EAAS0zB,GAAgB54B,UAAUhB,QAAO,SAAAn7D,GAAC,OAAIA,EAAEy8D,SAAWuoC,EAAKpzE,EAAE,IAAEg0B,KAAI,SAAA5lD,GAC9E,OACCg+F,EAAAA,GAAAA,KAACqQ,GAAW,CAAYptB,QAASjhF,GAAfA,EAAE4xB,GAEtB,IAEM85D,EAAWhX,GAAmBvY,UAAUhB,QAAO,SAAAn7D,GAAC,OAAIA,EAAEy8D,SAAWuoC,EAAKpzE,EAAE,IAAEg0B,KAAI,SAAA5lD,GACnF,OACCg+F,EAAAA,GAAAA,KAACqQ,GAAW,CAAYptB,QAASjhF,GAAfA,EAAE4xB,GAEtB,IAEMm8H,EAAQl4D,GAAS15B,UAAUhB,QAAO,SAAAp7D,GAAC,OAAIA,EAAE08D,SAAWuoC,EAAKpzE,EAAE,IAAEg0B,KAAI,SAAA7lD,GACtE,OACCi+F,EAAAA,GAAAA,KAACoQ,GAAQ,CAAYnoC,KAAMlmE,GAAZA,EAAE6xB,GAEnB,IAEMo8H,EAAc95D,GAAe/3B,UAAUhB,QAAO,SAAAp+C,GAAC,OAAIA,EAAE0/C,SAAWuoC,EAAKpzE,EAAE,IAAEg0B,KAAI,SAAA7oC,GAClF,OACCihF,EAAAA,GAAAA,KAAC+O,GAAc,CAAY3rB,WAAYrkE,GAAlBA,EAAE6U,GAEzB,IAEMyuC,EAAa/D,EAAcH,UAAUhB,QAAO,SAAAn7D,GAAC,OAAIA,EAAEy8D,SAAWuoC,EAAKpzE,EAAE,IAAEg0B,KAAI,SAAA5lD,GAChF,OACCg+F,EAAAA,GAAAA,KAACoP,GAAa,CAAYjuC,UAAWn/D,GAAjBA,EAAE4xB,GAExB,IAEMq5C,EAAQ0qB,GAASx5B,UAAUhB,QAAO,SAAAp/D,GAAC,OAAIA,EAAE0gE,SAAWuoC,EAAKpzE,EAAE,IAAEg0B,KAAI,SAAA7pD,GACtE,OACCiiG,EAAAA,GAAAA,KAACiP,GAAQ,CAAYh5F,KAAMlY,GAAZA,EAAE61B,GAEnB,IAEMoqC,EAAUy3B,GAAWt3B,UAAUhB,QAAO,SAAAp/D,GAAC,OAAIA,EAAE0gE,SAAWuoC,EAAKpzE,EAAE,IAAEg0B,KAAI,SAAAp0C,GAC1E,OACCwsF,EAAAA,GAAAA,KAACiP,GAAQ,CAAYh5F,KAAMzC,GAAZA,EAAEogB,GAEnB,IAEA,OACCosE,EAAAA,GAAAA,KAACmB,GAAM,CACNphG,SACCogG,EAAAA,GAAAA,MAAA,OAAAr6E,SAAA,EACCk6E,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAASwG,QAAQhhF,SAAEy8C,EAAKp9D,MAAMwqJ,aAAa3yJ,QACvDgjG,EAAAA,GAAAA,KAAA,UACAA,EAAAA,GAAAA,KAACO,GAAI,CAAAz6E,UACJk6E,EAAAA,GAAAA,KAAA,KAAGlhG,MAAO,CAAEioG,UAAW,UAAWjhF,SAAEy8C,EAAKp9D,MAAMwqJ,aAAap6I,gBAE5Dq6I,EACAvsF,EAAOrlE,OAAS,GAAIgiG,EAAAA,GAAAA,KAAA,SAAS,KAC7B38B,EAAOrlE,OAAS,GAAIgiG,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAASmH,aAAa3hF,SAAC,uBAA4B,KACnFu9C,EAAOrlE,OAAS,GAAIgiG,EAAAA,GAAAA,KAACY,GAAQ,CAACC,MAAOx9B,IAAa,KAClDqqB,EAAS1vF,OAAS,GAAIgiG,EAAAA,GAAAA,KAAA,SAAS,KAC/BtS,EAAS1vF,OAAS,GAAIgiG,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAASmH,aAAa3hF,SAAC,0BAA+B,KACxF4nE,EAAS1vF,OAAS,GAAIgiG,EAAAA,GAAAA,KAACY,GAAQ,CAACC,MAAOnT,IAAe,KACtDqiE,EAAM/xJ,OAAS,GAAIgiG,EAAAA,GAAAA,KAAA,SAAS,KAC5B+vD,EAAM/xJ,OAAS,GAAIgiG,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAASmH,aAAa3hF,SAAC,eAAoB,KAC1EiqI,EAAM/xJ,OAAS,GAAIgiG,EAAAA,GAAAA,KAACY,GAAQ,CAACC,MAAOkvD,IAAY,KAChDC,EAAYhyJ,OAAS,GAAIgiG,EAAAA,GAAAA,KAAA,SAAS,KAClCgwD,EAAYhyJ,OAAS,GAAIgiG,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAASmH,aAAa3hF,SAAC,qBAA0B,KACtFkqI,EAAYhyJ,OAAS,GAAIgiG,EAAAA,GAAAA,KAACY,GAAQ,CAACC,MAAOmvD,IAAkB,KAC5D3tF,EAAWrkE,OAAS,GAAIgiG,EAAAA,GAAAA,KAAA,SAAS,KACjC39B,EAAWrkE,OAAS,GAAIgiG,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAASmH,aAAa3hF,SAAC,oBAAyB,KACpFu8C,EAAWrkE,OAAS,GAAIgiG,EAAAA,GAAAA,KAACY,GAAQ,CAACC,MAAOx+B,IAAiB,KAC1D4K,EAAMjvE,OAAS,GAAIgiG,EAAAA,GAAAA,KAAA,SAAS,KAC5B/yB,EAAMjvE,OAAS,GAAIgiG,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAASmH,aAAa3hF,SAAC,eAAoB,KAC1EmnD,EAAMjvE,OAAS,GAAIgiG,EAAAA,GAAAA,KAACY,GAAQ,CAACC,MAAO5zB,IAAY,KAChDjP,EAAQhgE,OAAS,GAAIgiG,EAAAA,GAAAA,KAAA,SAAS,KAC9BhiC,EAAQhgE,OAAS,GAAIgiG,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAASmH,aAAa3hF,SAAC,iBAAsB,KAC9Ek4C,EAAQhgE,OAAS,GAAIgiG,EAAAA,GAAAA,KAACY,GAAQ,CAACC,MAAO7iC,IAAc,QAGvDU,MAAO,EACP2iC,QAAS,kBAAM9+B,EAAKnL,SAAS,CAAEu4F,aAAc,MAAO,GAGvD,EAACptF,EAEDj/C,OAAS,WACR,IACC,IAMM2sI,EAAa9xD,GAAUj6B,WAAW/G,QAAO,SAAA6pC,GAAI,MAAiB,KAAZA,EAAKpzE,IAAc2uC,EAAKrlD,MAAMngB,QAAQomE,QAAQrqD,SAASkuF,EAAKpzE,GAAG,IACjHs8H,EAAgB/xD,GAAUj6B,WAAW/G,QAAO,SAAA6pC,GAAI,MAAiB,KAAZA,EAAKpzE,KAAe2uC,EAAKrlD,MAAMngB,QAAQomE,QAAQrqD,SAASkuF,EAAKpzE,GAAG,IAErHg8H,EAAQK,EAAWroG,KAAI,SAAAo/C,GAC5B,OACChH,EAAAA,GAAAA,KAAC+P,GAAQ,CAER/I,KAAMA,EACNnsD,QAAS,SAAArnC,GAAC,OAAI+uD,EAAKnL,SAAS,CAAEu4F,aAAcn8I,GAAI,EAChDw8F,SAAUztC,EAAKrlD,MAAMngB,QAAQimE,UAAY,SAAAxvD,GAAC,OAAI+uD,EAAKrlD,MAAMizI,WAAW38I,EAAE,EAAG,MAHpEwzF,EAAKpzE,GAMb,IACAg8H,EAAM1rH,SACL87D,EAAAA,GAAAA,KAAC+P,GAAQ,CAAY/I,KApBT,CACZpzE,GAAI,GACJ52B,KAAM,WACNuY,YAAa,kDAiBoBslC,QAAS,SAAArnC,GAAC,OAAI+uD,EAAKnL,SAAS,CAAEu4F,aAAcn8I,GAAI,GAAnE,SAEf,IAAM48I,EAAWF,EAActoG,KAAI,SAAAo/C,GAClC,OACChH,EAAAA,GAAAA,KAAC+P,GAAQ,CAER/I,KAAMA,EACNnsD,QAAS,SAAArnC,GAAC,OAAI+uD,EAAKnL,SAAS,CAAEu4F,aAAcn8I,GAAI,GAF3CwzF,EAAKpzE,GAKb,IAEA,OACCusE,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,cAAalhD,SAAA,EAC3Bk6E,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAASwG,QAAQhhF,SAAC,gBAC9Bk6E,EAAAA,GAAAA,KAAA,SACCowD,EAASpyJ,OAAS,GAAIgiG,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAASmE,WAAW3+E,SAAC,oBAAyB,KAEhFsqI,EAASpyJ,OAAS,GACjBmiG,EAAAA,GAAAA,MAAA,UAAQn5B,UAAU,UAAUnsB,QAAS,kBAAM0nB,EAAKrlD,MAAM2yI,SAASK,EAAc,EAACpqI,SAAA,CAAC,kBAC9DgwF,GAAOG,WAAW1zC,EAAKrlD,MAAM4yI,SAASI,GAAgB,KAAK,OAE1E,KAEHE,EAASpyJ,OAAS,GAAIgiG,EAAAA,GAAAA,KAACY,GAAQ,CAACC,MAAOuvD,IAAe,KACtDA,EAASpyJ,OAAS,GAAIgiG,EAAAA,GAAAA,KAAA,SAAS,MAChCA,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAASmE,WAAW3+E,SAAC,cACjCk6E,EAAAA,GAAAA,KAACY,GAAQ,CAACC,MAAO+uD,IAChBrtF,EAAKg/B,cAGT,CAAE,MAAApa,GACD,OAAO6Y,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,4BACvB,CACD,EArKCzE,EAAKp9D,MAAQ,CACZwqJ,aAAc,MACbptF,CACH,CAAC,OAAA5H,EAAA+0F,EAAA,CANqB,CAAShjH,EAAAA,WCFnB2jH,GAAe,SAAA7wD,GAAAz6B,EAAAsrF,EAAA7wD,GAAA,IAAAC,EAAA/5B,EAAA2qF,GAC3B,SAAAA,EAAYnzI,GAAe,IAADqlD,EAKvB,OALuB76D,EAAA,KAAA2oJ,IACzB9tF,EAAAk9B,EAAAnjG,KAAA,KAAM4gB,IAOPozI,QAAU,SAAC/iE,GACVhrB,EAAKnL,SAAS,CACbouC,eAAgB,OACd,WACFjjC,EAAKrlD,MAAMozI,QAAQ/iE,EACpB,GACD,EAAChrB,EAEDguF,WAAa,WACZ,GAAIhuF,EAAKp9D,MAAMqgG,eAAgB,CAC9B,IAAMgrD,EAAYziE,GAAiBuN,gBAAgB/4B,EAAKrlD,MAAMglD,KAAKta,IAAK2a,EAAKp9D,MAAMqgG,gBAC7EirD,EAAcluF,EAAKrlD,MAAMglD,KAAKmB,OAAOrlE,OAAS,EACpD,OACCmiG,EAAAA,GAAAA,MAAA,OAAwCn5B,UAAU,UAASlhD,SAAA,CAEzD0qI,EACC,MACAxwD,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAAS0H,YAAYliF,UAChCq6E,EAAAA,GAAAA,MAAA,KAAAr6E,SAAA,EAAGq6E,EAAAA,GAAAA,MAAA,KAAAr6E,SAAA,CAAG,oBAAuBy8C,EAAKp9D,MAAMqgG,eAAexoG,QAAS,gDAIlEyzJ,EACC,MACAzwD,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAAS0H,YAAYliF,UAChCq6E,EAAAA,GAAAA,MAAA,KAAAr6E,SAAA,EAAGq6E,EAAAA,GAAAA,MAAA,KAAAr6E,SAAA,CAAG,oBAAuBy8C,EAAKp9D,MAAMqgG,eAAexoG,QAAS,2CAGlEwzJ,GAAaC,GAAczwD,EAAAA,GAAAA,KAAA,UAAQh5B,UAAU,UAAUnsB,QAAS,kBAAM0nB,EAAKnL,SAAS,CAAEs5F,mBAAmB,GAAO,EAAC5qI,SAAC,uBAA8B,KAChJy8C,EAAKrlD,MAAMngB,QAAQimE,WAAYg9B,EAAAA,GAAAA,KAAA,UAAQh5B,UAAU,YAAYnsB,QAAS,kBAAM0nB,EAAK+tF,QAAQ/tF,EAAKp9D,MAAMqgG,eAA8B,EAAC1/E,SAAC,YAAmB,MACxJk6E,EAAAA,GAAAA,KAAA,UACAA,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,sBAAqBlhD,UACnCk6E,EAAAA,GAAAA,KAACkQ,GAAU,CAACtoD,IAAK2a,EAAKrlD,MAAMglD,KAAKta,IAAK2lC,OAAQhrB,EAAKp9D,MAAMqgG,eAAgBzoG,QAASwlE,EAAKrlD,MAAMngB,aAE9FojG,EAAAA,GAAAA,MAACI,GAAI,CAAAz6E,SAAA,CAAC,0BACmBy8C,EAAKp9D,MAAMqgG,eAAexoG,KAAK,gHAExDgjG,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,sBAAqBlhD,UACnCk6E,EAAAA,GAAAA,KAACsP,GAAQ,CAAC3V,KAAMp3B,EAAKp9D,MAAMqgG,eAAe7L,WAzBlCp3B,EAAKp9D,MAAMqgG,eAAe5xE,GA6BtC,CAEA,IAAMgwC,EAAUxH,EAAYa,SAASsF,EAAKrlD,MAAMglD,KAAKta,IAAI+zB,QAAQ/zB,KAAI,SAAAia,GAAE,OAAIA,EAAG4rB,QAAQ,IAAEtwB,QAAO,SAAAvpC,GAAE,MAAW,KAAPA,CAAS,KAAG,SAAAA,GAAE,OAAIA,CAAE,IAEnH+8H,EADQpuF,EAAKrlD,MAAMglD,KAAKta,IAAI+zB,QAAQxe,QAAO,SAAA0E,GAAE,MAAoB,KAAhBA,EAAG4rB,QAAe,IAC7CzvF,OAASukE,EAAKrlD,MAAMglD,KAAKta,IAAI+zB,QAAQ39E,OAC3D6lE,EAAazH,EAAYgB,IAAImF,EAAKrlD,MAAMglD,KAAKta,IAAIgc,SAAS,SAAA7hE,GAAC,OAAIA,EAAE8hE,WAAW7lE,MAAM,IAExF,OACCmiG,EAAAA,GAAAA,MAAA,OAAen5B,UAAU,UAASlhD,SAAA,EACjCk6E,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAASmE,WAAW3+E,SAAC,gBACjCq6E,EAAAA,GAAAA,MAACI,GAAI,CAAAz6E,SAAA,EACJk6E,EAAAA,GAAAA,KAAA,KAAAl6E,SAAG,oCACHk6E,EAAAA,GAAAA,KAAA,KAAAl6E,SAAG,8GACHk6E,EAAAA,GAAAA,KAAA,KAAAl6E,SAAG,+CAEHy8C,EAAKrlD,MAAMngB,QAAQimE,WAAYg9B,EAAAA,GAAAA,KAAA,UAAQh5B,UAAU,YAAYnsB,QAAS0nB,EAAKrlD,MAAM0zI,sBAAsB9qI,SAAC,mBAA0B,KAElIy8C,EAAKrlD,MAAMngB,QAAQkmE,UAClB+8B,EAAAA,GAAAA,KAACyB,GAAQ,CACRY,QACCrC,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAASE,IAAI16E,SAAC,0DAE3B/lB,SACCogG,EAAAA,GAAAA,MAAA,OAAAr6E,SAAA,EACCk6E,EAAAA,GAAAA,KAAA,KAAAl6E,SAAG,yEACHk6E,EAAAA,GAAAA,KAAA,KAAAl6E,SAAG,sGACHk6E,EAAAA,GAAAA,KAAA,KAAAl6E,SAAG,2IACHk6E,EAAAA,GAAAA,KAAA,KAAAl6E,SAAG,0FAIJ,MAEJk6E,EAAAA,GAAAA,KAAA,UACAA,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,YAAWlhD,UACzBk6E,EAAAA,GAAAA,KAAC6D,GAAS,CACTjxC,YAAY,WACZ+tC,MAAM,oBACNxjG,OAAO6iG,EAAAA,GAAAA,KAACsC,GAAK,CAACK,SAAUguD,EAAe5wJ,SAASogG,EAAAA,GAAAA,MAAA,KAAAr6E,SAAA,CAAIyJ,KAAK8pC,MAAsB,IAAhBs3F,GAAqB,cAGtF3wD,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,YAAWlhD,UACzBk6E,EAAAA,GAAAA,KAAC6D,GAAS,CACTjxC,YAAY,WACZ+tC,MAAM,oBACNxjG,MAAOymE,EAAQ5lE,WAIhB6lE,GAAc,KACbm8B,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,YAAWlhD,UACzBk6E,EAAAA,GAAAA,KAAC6D,GAAS,CACTjxC,YAAY,WACZ+tC,MAAM,uBACNxjG,MAAO0mE,MAGP,OAjDI,MAqDX,EAACtB,EAEDg/B,UAAY,WACX,OAAKh/B,EAAKp9D,MAAMurJ,mBAKf1wD,EAAAA,GAAAA,KAACmB,GAAM,CACNphG,SACCigG,EAAAA,GAAAA,KAACkV,GAAmB,CACnB3nB,OAAQhrB,EAAKp9D,MAAMqgG,eACnBtjC,KAAMK,EAAKrlD,MAAMglD,KACjBnlE,QAASwlE,EAAKrlD,MAAMngB,QACpB04G,eAAgBlzC,EAAKrlD,MAAMu4F,iBAG7BpU,QAAS,WACR9+B,EAAKnL,SAAS,CACbs5F,mBAAmB,GAErB,IAjBM,IAoBT,EAACnuF,EAEDj/C,OAAS,WACR,IACC,OACC68E,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,oBAAmBlhD,SAAA,EACjCk6E,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,cAAcnsB,QAAS,kBAAM0nB,EAAKnL,SAAS,CAAEouC,eAAgB,MAAO,EAAC1/E,UACnFk6E,EAAAA,GAAAA,KAACmF,GAAgB,CAChBv9C,IAAK2a,EAAKrlD,MAAMglD,KAAKta,IACrB49C,eAAgBjjC,EAAKp9D,MAAMqgG,eAC3BJ,eAAgB,SAAA7X,GAAM,OAAIhrB,EAAKnL,SAAS,CAAEouC,eAAgBjY,GAAS,MAGpEhrB,EAAKguF,aACLhuF,EAAKg/B,cAGT,CAAE,MAAApa,GACD,OAAO6Y,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,kCACvB,CACD,EAzJCzE,EAAKp9D,MAAQ,CACZqgG,eAAgB,KAChBkrD,mBAAmB,GAClBnuF,CACH,CAAC,OAAA5H,EAAA01F,EAAA,CAP0B,CAAS3jH,EAAAA,WCHxBmkH,GAAO,SAAArxD,GAAAz6B,EAAA8rF,EAAArxD,GAAA,IAAAC,EAAA/5B,EAAAmrF,GACnB,SAAAA,EAAY3zI,GAAe,IAADqlD,EAIvB,OAJuB76D,EAAA,KAAAmpJ,IACzBtuF,EAAAk9B,EAAAnjG,KAAA,KAAM4gB,IAMP6sF,UAAY,WACX,IAAM+mD,EAA6E,SAA7EA,EAA8EvjF,EAAoB5hC,GACvG,IAAMolH,EAAQplH,EAAQwxB,QAAO,SAAAv7D,GAAC,MAAa,WAATA,EAAEgyB,EAAe,IAAE6yB,MAAK,SAAA7kD,GACzD,IAAMyB,EAAOzB,EAAEyB,KACf,OAAOkqE,IAAWlqE,EAAKlC,IACxB,IACA,QAAI4vJ,GAIGplH,EAAQ8a,MAAK,SAAA7kD,GAAC,OAAIkvJ,EAAYvjF,EAAQ3rE,EAAEkkB,SAAS,GACzD,EAEMkrI,EAAa,CAClB,CACC7gF,SAAUnE,GAAmBkM,SAC7BlmB,MAAO,CACNsa,GAAWiL,MACXjL,GAAW+J,OACX/J,GAAWgL,WAGb,CACCnH,SAAUnE,GAAmBmM,OAC7BnmB,MAAO,CACNsa,GAAW6M,KACX7M,GAAW+M,YACX/M,GAAWmN,KACXnN,GAAWoN,MACXpN,GAAW8M,QAGb,CACCjJ,SAAUnE,GAAmBoM,WAC7BpmB,MAAO,CACNsa,GAAWsM,KACXtM,GAAWkM,MACXlM,GAAW2L,OACX3L,GAAW2X,WAIRnW,EAAUoE,GAAUunB,cAAcj8B,EAASW,UAAUvW,KAAI,SAAAp0C,GAAC,OAAIA,EAAEogB,EAAE,KAExE,OACCosE,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,mBAAkBlhD,SAC/BkrI,EAAWppG,KAAI,SAAA7mD,GACf,OACCo/F,EAAAA,GAAAA,MAAA,OAAsBn5B,UAAU,kBAAiBlhD,SAAA,EAChDk6E,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAASmE,WAAW3+E,SAAE/kB,EAAEovE,YACpC6vB,EAAAA,GAAAA,KAAA,OAAAl6E,SACE/kB,EAAEixD,MAAMpK,KAAI,SAAAzmD,GACZ,OACCg/F,EAAAA,GAAAA,MAAA,OAAgBn5B,UAAU,cAAalhD,SAAA,EACtCk6E,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAASmH,aAAa3hF,SAAE3kB,KACpC6+F,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,iBAAgBlhD,SAE7BgoD,EACE3Q,QAAO,SAAAr+C,GAAC,OAAIgyI,EAAY3vJ,EAAM2d,EAAE6sB,QAAQ,IACxC0wB,MAAK,SAACv9C,EAAGC,GAAC,OAAKD,EAAE9hB,KAAK2/D,cAAc59C,EAAE/hB,KAAK,IAC3C4qD,KAAI,SAAA9oC,GAAC,OAAIkhF,EAAAA,GAAAA,KAACO,GAAI,CAAYp/F,KAAMm/F,GAASiG,MAAMzgF,SAAEhH,EAAE9hB,MAA/B8hB,EAAE8U,GAAyC,QAP1DzyB,EAYZ,QAjBQJ,EAAEovE,SAqBd,KAGH,EAAC5N,EAED+hC,WAAa,WACZ,IAAMlmC,EAA0C,GAE1C6yF,EAAY,SAAZA,EAAatlH,GAClBA,EAAQnrB,SAAQ,SAAA5e,GACf,IAAI+yE,EAAWvW,EAAK0D,MAAK,SAAA7rD,GAAI,OAAIA,EAAK2d,KAAOhyB,EAAEgyB,EAAE,IAC5C+gD,IACJA,EAAW,CAAE/gD,GAAIhyB,EAAEgyB,GAAIvwB,KAAM,IAC7B+6D,EAAK59D,KAAKm0E,IAEXA,EAAStxE,KAAK7C,KAAKoB,EAAEyB,MACrB4tJ,EAAUrvJ,EAAEkkB,SACb,GACD,EAEMgoD,EAAUoE,GAAUunB,cAAcj8B,EAASW,UAAUvW,KAAI,SAAAp0C,GAAC,OAAIA,EAAEogB,EAAE,KAGxE,OAFAk6C,EAAQttD,SAAQ,SAAA1B,GAAC,OAAImyI,EAAUnyI,EAAE6sB,QAAQ,KAGxCq0D,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,mBAAkBlhD,SAC/Bs4C,EAAKxW,KAAI,SAAA3xC,GACT,OACCkqF,EAAAA,GAAAA,MAAA,OAAmBn5B,UAAU,cAAalhD,SAAA,EACzCk6E,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAASmH,aAAa3hF,SAAE7P,EAAK2d,MACzCosE,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,cAAalhD,SAC1B7P,EAAK5S,KAAKukD,KAAI,SAACvkD,EAAMvB,GAAC,OAAKk+F,EAAAA,GAAAA,KAACO,GAAI,CAASp/F,KAAMm/F,GAASiG,MAAMzgF,SAAE1R,KAAKC,UAAUhR,IAAzCvB,EAAsD,QAHrFmU,EAAK2d,GAOjB,KAGH,EAAC2uC,EAEDj/C,OAAS,WACR,IACC,IAMIvjB,EAAU,KACd,OAAQwiE,EAAKp9D,MAAM4wB,MAClB,IAAK,QACJh2B,GAAUigG,EAAAA,GAAAA,KAACiG,GAAa,CAAClpG,QAASwlE,EAAKrlD,MAAMngB,QAAS4L,SAAU45D,EAAKrlD,MAAMvU,WAC3E,MACD,IAAK,SACJ5I,EAAUwiE,EAAKwnC,YACf,MACD,IAAK,UACJhqG,EAAUwiE,EAAK+hC,aAIjB,OACCnE,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,WAAUlhD,SAAA,EACxBk6E,EAAAA,GAAAA,KAACuD,GAAQ,CAACxmG,QArBI,CACf,CAAE62B,GAAI,QAAS0pB,QAAS,SACxB,CAAE1pB,GAAI,SAAU0pB,QAAS,UACzB,CAAE1pB,GAAI,UAAW0pB,QAAS,YAkBGomD,WAAYnhC,EAAKp9D,MAAM4wB,KAAM4tE,SAAU,SAAA/vE,GAAE,OAAI2uC,EAAKnL,SAAS,CAAErhC,KAAMnC,GAAK,KACpGosE,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,mBAAkBlhD,SAC/B/lB,MAIL,CAAE,MAAAonF,GACD,OAAO6Y,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,yBACvB,CACD,EAjJCzE,EAAKp9D,MAAQ,CACZ4wB,KAAM,SACLwsC,CACH,CAAC,OAAA5H,EAAAk2F,EAAA,CANkB,CAASnkH,EAAAA,WCgBhBwkH,GAAU,SAAA1xD,GAAAz6B,EAAAmsF,EAAA1xD,GAAA,IAAAC,EAAA/5B,EAAAwrF,GACtB,SAAAA,EAAYh0I,GAAe,IAADqlD,EAMvB,OANuB76D,EAAA,KAAAwpJ,IACzB3uF,EAAAk9B,EAAAnjG,KAAA,KAAM4gB,IAQPi0I,WAAa,SAACx3D,GACb,OAAQA,EAAKx4F,MACZ,KAAKyqE,GAASguB,UACd,KAAKhuB,GAASquB,UACd,KAAKruB,GAASsuB,MACb33B,EAAKrlD,MAAMk0I,WAAWz3D,EAAM,KAAM,KAAM,KAAM,GAC9C,MAED,KAAK/tB,GAASiuB,QACd,KAAKjuB,GAASkuB,QACd,KAAKluB,GAASouB,YACbz3B,EAAKnL,SAAS,CACbi6F,aAAc13D,IAKlB,EAACp3B,EAEDgzC,WAAa,SAACjb,GACb/3B,EAAKnL,SAAS,CACbk6F,aAAch3D,GAEhB,EAAC/3B,EAEDgvF,mBAAqB,SAACj3D,GACrB/3B,EAAKnL,SAAS,CACbo6F,aAAcl3D,GAEhB,EAAC/3B,EAEDkvF,WAAa,SAACn3D,GACb/3B,EAAKnL,SAAS,CACbk6F,aAAc,OACZ,WACF/uF,EAAKrlD,MAAMu0I,WAAWn3D,EACvB,GACD,EAAC/3B,EAEDmvF,WAAa,WACZ,IAAI3+C,EAAU,KASd,GARIxwC,EAAKrlD,MAAMglD,KAAKmB,OAAO5c,MAAK,SAAAvjC,GAAC,OAAIA,EAAE6pD,IAAM7pD,EAAEw7C,KAAK,MACnDq0C,GACC/S,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAAS0H,YAAYliF,UAChCq6E,EAAAA,GAAAA,MAAA,KAAAr6E,SAAA,EAAGk6E,EAAAA,GAAAA,KAAA,KAAAl6E,SAAG,2DAA0D,qDAK/Dy8C,EAAKrlD,MAAMglD,KAAKmB,OAAOrlE,OAAS,EAAG,CACtC,IAAM6iG,EAAQt+B,EAAKrlD,MAAMglD,KAAKmB,OAAOzb,KAAI,SAAA0yC,GACxC,OACC6F,EAAAA,GAAAA,MAAA,OAAAr6E,SAAA,EACCk6E,EAAAA,GAAAA,KAACS,GAAK,CAACtjG,MAAOm9F,EAAKvtB,IAAMutB,EAAK57B,MAAQ,WAAa,KAAK54C,UACvDk6E,EAAAA,GAAAA,KAAC2P,GAAQ,CAACrV,KAAMA,EAAMsV,iBAAkBrtC,EAAKgzC,WAAY1F,SAAUttC,EAAKgvF,uBAExEhvF,EAAKrlD,MAAMngB,QAAQimE,WAAYg9B,EAAAA,GAAAA,KAAA,UAAQh5B,UAAU,YAAYnsB,QAAS,kBAAM0nB,EAAKrlD,MAAM03F,MAAMta,EAAM,KAAK,EAACx0E,SAAC,WAAkB,OAJpHw0E,EAAK1mE,GAOjB,IAEA,OACCusE,EAAAA,GAAAA,MAAA,OAAAr6E,SAAA,CACEitF,GACD/S,EAAAA,GAAAA,KAACY,GAAQ,CAACC,MAAOA,MAGpB,CAEA,OACCb,EAAAA,GAAAA,KAAA,OAAAl6E,UACCk6E,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAAS0H,YAAYliF,UAChCk6E,EAAAA,GAAAA,KAAA,KAAAl6E,SAAG,2BAIP,EAACy8C,EAEDguF,WAAa,WACZ,IAAIpiF,EAAQ,KACZ,GAAI5L,EAAKrlD,MAAMglD,KAAKiM,MAAMhR,QAAO,SAAAw8B,GAAI,OAAIznB,GAAUwnB,kBAAkBC,EAAK,IAAE37F,OAAS,EAAG,CACvF,IAAM6iG,EAAQt+B,EAAKrlD,MAAMglD,KAAKiM,MAC5BhR,QAAO,SAAAw8B,GAAI,OAAIznB,GAAUwnB,kBAAkBC,EAAK,IAChD/xC,KAAI,SAAA7oC,GAAC,OAAIihF,EAAAA,GAAAA,KAACsP,GAAQ,CAAY3V,KAAM56E,EAAG87B,QAAS0nB,EAAK4uF,YAA7BpyI,EAAE6U,GAAyC,IACrEu6C,GACCgyB,EAAAA,GAAAA,MAAA,OAAAr6E,SAAA,EACCk6E,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAAS0H,YAAYliF,UAChCq6E,EAAAA,GAAAA,MAAA,KAAAr6E,SAAA,EAAGk6E,EAAAA,GAAAA,KAAA,KAAAl6E,SAAG,gCAA+B,8CAEtCk6E,EAAAA,GAAAA,KAACY,GAAQ,CAACC,MAAOA,MAGpB,CAEA,IAAInc,EAAQ,KACZ,GAAIniB,EAAKrlD,MAAMglD,KAAKgM,UAAY,EAAG,CAClC,IAAMyjF,EAAcpvF,EAAKrlD,MAAMglD,KAAKmB,OAAOrlE,QAAU6iE,EAAgBoB,aAAaM,EAAKrlD,MAAMglD,MAC7FwiB,GACCsb,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,SAAQlhD,UACtBk6E,EAAAA,GAAAA,KAAC4C,GAAW,CACXjgF,OAAO,EACP0gF,OACCrD,EAAAA,GAAAA,KAAC6O,GAAe,CACfpyE,KAAK,qBACLqyE,QAAS6iD,EAAc,yFAA4F,oCACnH5xJ,SAASigG,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,cAAalhD,SAAEy8C,EAAKrlD,MAAMglD,KAAKgM,cAGzDvoD,SAAUgsI,EACV92G,QAAS,kBAAM0nB,EAAKnL,SAAS,CAAEk6F,aAAc5kF,GAAQC,gBAAgBb,GAAc6c,OAAQ,KAI/F,CAEA,OACCwX,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,UAASlhD,SAAA,EACvBk6E,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAASmE,WAAW3+E,SAAC,eACjCk6E,EAAAA,GAAAA,KAACO,GAAI,CAAAz6E,SAAC,wDACK,OAAVqoD,GAAiB6xB,EAAAA,GAAAA,KAAA,SAAS,KAC1B7xB,EACU,OAAVuW,GAAiBsb,EAAAA,GAAAA,KAAA,SAAS,KAC1Btb,IAGJ,EAACniB,EAEDg/B,UAAY,WACX,GAAIh/B,EAAKp9D,MAAMmsJ,aACd,OAAK/uF,EAAKp9D,MAAMmsJ,aAAat0J,MAwB3BgjG,EAAAA,GAAAA,KAACmB,GAAM,CACNphG,SACCigG,EAAAA,GAAAA,KAACyU,GAAmB,CACnBzxB,UAAWzgB,EAAKp9D,MAAMmsJ,aACtBpvF,KAAMK,EAAKrlD,MAAMglD,KACjBc,UAAWT,EAAKrlD,MAAMngB,QAAQimE,UAC9B6oB,UAAWtpB,EAAKrlD,MAAM2uE,UACtBC,YAAavpB,EAAKrlD,MAAM4uE,YACxBC,WAAYxpB,EAAKrlD,MAAM6uE,WACvBE,SAAU1pB,EAAKrlD,MAAM+uE,SACrB8mB,QAASxwC,EAAKrlD,MAAM61F,QACpB0+C,WAAYlvF,EAAKkvF,WACjB78C,MAAOryC,EAAKrlD,MAAM03F,MAClBxyC,UAAWG,EAAKrlD,MAAMklD,YAGxBi/B,QAAS9+B,EAAKp9D,MAAMmsJ,aAAavkF,IAAMxK,EAAKp9D,MAAMmsJ,aAAa5yF,MAAQ,KAAO,WAC7E6D,EAAKnL,SAAS,CACbk6F,aAAc,MAEhB,KA1CDtxD,EAAAA,GAAAA,KAACmB,GAAM,CACNphG,SACCigG,EAAAA,GAAAA,KAACivD,GAAgB,CAChB30D,KAAM/3B,EAAKp9D,MAAMmsJ,aACjBpvF,KAAMK,EAAKrlD,MAAMglD,KACjBnlE,QAASwlE,EAAKrlD,MAAMngB,QACpBqlE,UAAWG,EAAKrlD,MAAMklD,UACtB+/B,SAAU,SAAA7H,GACT,IAAMp3E,EAAIq/C,EAAKp9D,MAAMmsJ,aACrB/uF,EAAKnL,SAAS,CACbk6F,aAAc,OACZ,WACFh3D,EAAK1mE,GAAK1Q,EAAE0Q,GACZ2uC,EAAKrlD,MAAM00I,QAAQt3D,EACpB,GACD,MAiCN,GAAI/3B,EAAKp9D,MAAMksJ,aAAc,CAC5B,IAAMQ,EAAYtvF,EAAKrlD,MAAMglD,KAAKmB,OAChCzb,KAAI,SAAA1kC,GACJ,OACC88E,EAAAA,GAAAA,KAAC2P,GAAQ,CAERrV,KAAMp3E,EACN23B,QAAS,SAAAy/C,GACR,IAAMX,EAAOp3B,EAAKp9D,MAAMksJ,aACxB9uF,EAAKnL,SAAS,CACbi6F,aAAc,OACZ,WACF9uF,EAAKrlD,MAAMk0I,WAAWz3D,EAAMW,EAAM,KAAM,KAAM,EAC/C,GACD,GATKp3E,EAAE0Q,GAYV,IAED,OACCosE,EAAAA,GAAAA,KAACmB,GAAM,CACNphG,SACCogG,EAAAA,GAAAA,MAAA,OAAAr6E,SAAA,EACCk6E,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAASwG,QAAQhhF,SAAC,mBAC9Bk6E,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAAS0H,YAAYliF,UAChCk6E,EAAAA,GAAAA,KAAA,KAAAl6E,SAAG,6CAEJk6E,EAAAA,GAAAA,KAACY,GAAQ,CAACC,MAAOgxD,OAGnBxwD,QAAS,WACR9+B,EAAKnL,SAAS,CACbi6F,aAAc,MAEhB,GAGH,CAEA,OAAI9uF,EAAKp9D,MAAMqsJ,cAEbxxD,EAAAA,GAAAA,KAACmB,GAAM,CACNphG,SACCogG,EAAAA,GAAAA,MAAA,OAAAr6E,SAAA,EACCk6E,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAASwG,QAAQhhF,SAAC,sBAC9Bq6E,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,mBAAkBlhD,SAAA,EAChCk6E,EAAAA,GAAAA,KAAC2P,GAAQ,CAACrV,KAAM/3B,EAAKp9D,MAAMqsJ,gBAC3BrxD,EAAAA,GAAAA,MAAA,OAAAr6E,SAAA,EACCq6E,EAAAA,GAAAA,MAACI,GAAI,CAACp/F,KAAMm/F,GAAS0H,YAAYliF,SAAA,EAChCq6E,EAAAA,GAAAA,MAAA,KAAAr6E,SAAA,EAAGk6E,EAAAA,GAAAA,KAAA,KAAAl6E,SAAG,8BAA6B,kBACnCq6E,EAAAA,GAAAA,MAAA,MAAAr6E,SAAA,EACCk6E,EAAAA,GAAAA,KAAA,MAAAl6E,SAAI,2DACJk6E,EAAAA,GAAAA,KAAA,MAAAl6E,SAAI,oDACJk6E,EAAAA,GAAAA,KAAA,MAAAl6E,SAAI,uDAELk6E,EAAAA,GAAAA,KAAA,KAAAl6E,SAAG,+BAEJk6E,EAAAA,GAAAA,KAACe,GAAa,CACbJ,MAAM,SACN9lD,QAAS,WACR,IAAM33B,EAAIq/C,EAAKp9D,MAAMqsJ,aACrBjvF,EAAKnL,SAAS,CACbo6F,aAAc,OACZ,WACFjvF,EAAKrlD,MAAMu0I,WAAWvuI,EACvB,GACD,aAMLm+E,QAAS,WACR9+B,EAAKnL,SAAS,CACbo6F,aAAc,MAEhB,IAKI,IACR,EAACjvF,EAEDj/C,OAAS,WACR,IACC,OACC68E,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,cAAalhD,SAAA,EAC3Bk6E,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,iBAAgBlhD,SAC7By8C,EAAKmvF,eAENnvF,EAAKguF,aACLhuF,EAAKg/B,cAGT,CAAE,MAAApa,GACD,OAAO6Y,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,4BACvB,CACD,EA5RCzE,EAAKp9D,MAAQ,CACZmsJ,aAAc,KACdD,aAAc,KACdG,aAAc,MACbjvF,CACH,CAAC,OAAA5H,EAAAu2F,EAAA,CARqB,CAASxkH,EAAAA,WCHnBolH,GAAS,SAAAtyD,GAAAz6B,EAAA+sF,EAAAtyD,GAAA,IAAAC,EAAA/5B,EAAAosF,GACrB,SAAAA,EAAY50I,GAAe,IAADqlD,EAOvB,OAPuB76D,EAAA,KAAAoqJ,IACzBvvF,EAAAk9B,EAAAnjG,KAAA,KAAM4gB,IASPi0I,WAAa,SAACx3D,GACb,OAAQA,EAAKx4F,MACZ,KAAKyqE,GAASguB,UACd,KAAKhuB,GAASquB,UACd,KAAKruB,GAASsuB,MACb33B,EAAKrlD,MAAMk0I,WAAWz3D,EAAM,KAAM,KAAM,KAAM,GAC9C,MAED,KAAK/tB,GAASiuB,QACd,KAAKjuB,GAASkuB,QACd,KAAKluB,GAASouB,YACbz3B,EAAKnL,SAAS,CACbi6F,aAAc13D,IAKlB,EAACp3B,EAEDwvF,WAAa,SAACC,GACbzvF,EAAKnL,SAAS,CACb26F,WAAYC,GAEd,EAACzvF,EAED0vF,YAAc,SAACC,GACd3vF,EAAKnL,SAAS,CACb66F,YAAaC,GAEf,EAAC3vF,EAEDyuC,QAAU,SAAC/6F,GACVssD,EAAKnL,SAAS,CACb26F,WAAY,OACV,WACFxvF,EAAKrlD,MAAM8zF,QAAQ/6F,EACpB,GACD,EAACssD,EAEDyyC,YAAc,SAAC/+F,EAAiBk8I,GAC/B,IAAIx4D,EAAOp3B,EAAKp9D,MAAMksJ,aAClB1mE,EAAO,EACNgP,IACJA,EAAO,CACN/lE,GAAIssC,EAAMC,OACVh/D,KAAMyqE,GAASouB,YACf32F,KAAM,MAEPsnF,EAAO,KAGRpoB,EAAKnL,SAAS,CACbi6F,aAAc,KACdY,aAAa,IACX,WACF1vF,EAAKrlD,MAAMk0I,WAAWz3D,EAAmB,KAAM1jF,EAAMk8I,EAASxnE,EAC/D,GACD,EAACpoB,EAEDspB,UAAY,SAAC51E,EAAiBqkF,GAC7B/3B,EAAKnL,SAAS,CACbg7F,kBAAmB,OACjB,WACF7vF,EAAKrlD,MAAM2uE,UAAU51E,EAAMqkF,EAC5B,GACD,EAAC/3B,EAED8vF,cAAgB,SAACp8I,GAChBssD,EAAKnL,SAAS,CACbg7F,kBAAmB,OACjB,WACF7vF,EAAKrlD,MAAMuyI,SAASx5I,GAAM,EAC3B,GACD,EAACssD,EAEDguF,WAAa,WACZ,IAAM+B,GACLnyD,EAAAA,GAAAA,MAAA,OAAAr6E,SAAA,EACCk6E,EAAAA,GAAAA,KAAC6D,GAAS,CAACjxC,YAAY,WAAW+tC,MAAM,QAAQxjG,OAAO6iG,EAAAA,GAAAA,KAACT,GAAS,CAACp+F,KAAMk+F,GAASnF,MAAO/8F,MAAOolE,EAAKrlD,MAAMglD,KAAKyB,MAAOnuD,KAAM8pF,GAASM,UACpIr9B,EAAKrlD,MAAMngB,QAAQimE,WAAYg9B,EAAAA,GAAAA,KAAA,UAAQh5B,UAAU,YAAYnsB,QAAS,kBAAM0nB,EAAKrlD,MAAMq1I,UAAU,EAACzsI,SAAC,cAAqB,QAIvHqoD,EAAQ,KACZ,GAAI5L,EAAKrlD,MAAMglD,KAAKiM,MAAMhR,QAAO,SAAAw8B,GAAI,OAAIznB,GAAU6nB,kBAAkBJ,EAAK,IAAE37F,OAAS,EAAG,CACvF,IAAM6iG,EAAQt+B,EAAKrlD,MAAMglD,KAAKiM,MAC5BhR,QAAO,SAAAw8B,GAAI,OAAIznB,GAAU6nB,kBAAkBJ,EAAK,IAChD/xC,KAAI,SAAA7oC,GAAC,OAAIihF,EAAAA,GAAAA,KAACsP,GAAQ,CAAY3V,KAAM56E,EAAG87B,QAAS,SAAA8+C,GAAI,OAAIp3B,EAAK4uF,WAAWx3D,EAAK,GAArD56E,EAAE6U,GAAuD,IACnFu6C,GACCgyB,EAAAA,GAAAA,MAAA,OAAAr6E,SAAA,EACCk6E,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAAS0H,YAAYliF,UAACq6E,EAAAA,GAAAA,MAAA,KAAAr6E,SAAA,EAAGk6E,EAAAA,GAAAA,KAAA,KAAAl6E,SAAG,gCAA+B,2CACvEk6E,EAAAA,GAAAA,KAACY,GAAQ,CAACC,MAAOA,MAGpB,CAEA,IAAM2xD,EAAa,GA0BnB,OAzBItgF,GAAUkO,YAAY7d,EAAKrlD,MAAMngB,QAAQomE,SAASnlE,OAAS,GAC9Dw0J,EAAWhyJ,MACV2/F,EAAAA,GAAAA,MAAA,UAAsBx6E,SAAU48C,EAAKrlD,MAAMglD,KAAKyB,MAAQ,EAAG9oB,QAAS,kBAAM0nB,EAAKwvF,WAAW,UAAU,EAACjsI,SAAA,EACpGk6E,EAAAA,GAAAA,KAAA,OAAAl6E,SAAK,mBACLk6E,EAAAA,GAAAA,KAACT,GAAS,CAACp+F,KAAMk+F,GAASnF,MAAO/8F,MAAO,EAAGqY,KAAM8pF,GAASK,WAF/C,YAMVztB,GAAUqc,cAAchsB,EAAKrlD,MAAMngB,QAAQomE,SAASnlE,OAAS,GAChEw0J,EAAWhyJ,MACV2/F,EAAAA,GAAAA,MAAA,UAAqBx6E,SAAU48C,EAAKrlD,MAAMglD,KAAKyB,MAAQ,GAAI9oB,QAAS,kBAAM0nB,EAAKwvF,WAAW,SAAS,EAACjsI,SAAA,EACnGk6E,EAAAA,GAAAA,KAAA,OAAAl6E,SAAK,kBACLk6E,EAAAA,GAAAA,KAACT,GAAS,CAACp+F,KAAMk+F,GAASnF,MAAO/8F,MAAO,GAAIqY,KAAM8pF,GAASK,WAFhD,WAMVztB,GAAUkO,YAAY7d,EAAKrlD,MAAMngB,QAAQomE,SAASnlE,OAAS,GAC9Dw0J,EAAWhyJ,MACV2/F,EAAAA,GAAAA,MAAA,UAAsBx6E,SAAU48C,EAAKrlD,MAAMglD,KAAKyB,MAAQ,IAAK9oB,QAAS,kBAAM0nB,EAAKwvF,WAAW,UAAU,EAACjsI,SAAA,EACtGk6E,EAAAA,GAAAA,KAAA,OAAAl6E,SAAK,sBACLk6E,EAAAA,GAAAA,KAACT,GAAS,CAACp+F,KAAMk+F,GAASnF,MAAO/8F,MAAO,IAAKqY,KAAM8pF,GAASK,WAFjD,aAQbQ,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,UAASlhD,SAAA,EACvBk6E,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAASmE,WAAW3+E,SAAC,oBACjCk6E,EAAAA,GAAAA,KAACO,GAAI,CAAAz6E,SAAC,wEACNk6E,EAAAA,GAAAA,KAAA,SACCsyD,EACU,OAAVnkF,GAAiB6xB,EAAAA,GAAAA,KAAA,SAAS,KAC1B7xB,EACsB,IAAtBqkF,EAAWx0J,QAAegiG,EAAAA,GAAAA,KAAA,SAAS,KACnCwyD,GACDxyD,EAAAA,GAAAA,KAAA,UACAG,EAAAA,GAAAA,MAAA,UAAQx6E,SAAU48C,EAAKrlD,MAAMglD,KAAKyB,MAAQ,IAAK9oB,QAAS,kBAAM0nB,EAAK0vF,aAAY,EAAK,EAACnsI,SAAA,EACpFk6E,EAAAA,GAAAA,KAAA,OAAAl6E,SAAK,qBACLk6E,EAAAA,GAAAA,KAACT,GAAS,CAACp+F,KAAMk+F,GAASnF,MAAO/8F,MAAO,IAAKqY,KAAM8pF,GAASK,cAIhE,EAACp9B,EAEDg/B,UAAY,WACX,MAA8B,YAA1Bh/B,EAAKp9D,MAAM4sJ,YAEb/xD,EAAAA,GAAAA,KAACmB,GAAM,CACNphG,SACCigG,EAAAA,GAAAA,KAACkR,GAAiB,CACjBhvC,KAAMK,EAAKrlD,MAAMglD,KACjBnlE,QAASwlE,EAAKrlD,MAAMngB,QACpBi0G,QAASzuC,EAAKyuC,QACd5uC,UAAWG,EAAKrlD,MAAMklD,cAOG,WAA1BG,EAAKp9D,MAAM4sJ,YAEb/xD,EAAAA,GAAAA,KAACmB,GAAM,CACNphG,SACCigG,EAAAA,GAAAA,KAACqR,GAAc,CACdnvC,KAAMK,EAAKrlD,MAAMglD,KACjBnlE,QAASwlE,EAAKrlD,MAAMngB,QACpBi0G,QAASzuC,EAAKyuC,QACd5uC,UAAWG,EAAKrlD,MAAMklD,cAOG,YAA1BG,EAAKp9D,MAAM4sJ,YAEb/xD,EAAAA,GAAAA,KAACmB,GAAM,CACNphG,SACCigG,EAAAA,GAAAA,KAAC8Q,GAAiB,CACjB5uC,KAAMK,EAAKrlD,MAAMglD,KACjBnlE,QAASwlE,EAAKrlD,MAAMngB,QACpBi0G,QAASzuC,EAAKyuC,UAGhB3P,QAAS,kBAAM9+B,EAAKwvF,WAAW,KAAK,IAKnCxvF,EAAKp9D,MAAMitJ,mBAEbpyD,EAAAA,GAAAA,KAACmB,GAAM,CACNphG,SACCigG,EAAAA,GAAAA,KAACmvD,GAAkB,CAClBl5I,KAAMssD,EAAKp9D,MAAMitJ,kBACjBlwF,KAAMK,EAAKrlD,MAAMglD,KACjB2pB,UAAWtpB,EAAKspB,UAChBI,SAAU1pB,EAAKrlD,MAAM+uE,SACrBwjE,SAAUltF,EAAK8vF,gBAGjBhxD,QAAS,kBAAM9+B,EAAKnL,SAAS,CAAEg7F,kBAAmB,MAAO,IAKxD7vF,EAAKp9D,MAAM8sJ,aAAgB1vF,EAAKp9D,MAAMksJ,cAAiB9uF,EAAKp9D,MAAMksJ,aAAalwJ,OAASyqE,GAASouB,aAEnGgG,EAAAA,GAAAA,KAACmB,GAAM,CACNphG,SACCigG,EAAAA,GAAAA,KAAC6U,GAAgB,CAChB3yC,KAAMK,EAAKrlD,MAAMglD,KACjBnlE,QAASwlE,EAAKrlD,MAAMngB,QACpBi4G,YAAazyC,EAAKyyC,YAClB5yC,UAAWG,EAAKrlD,MAAMklD,YAGxBi/B,QAAS,kBAAM9+B,EAAK0vF,aAAY,EAAM,IAKlC,IACR,EAAC1vF,EAEDj/C,OAAS,WACR,IACC,IAAImvI,EAAmB,KACjB3iD,EAAa1zC,EAAYC,KAAKkG,EAAKrlD,MAAMglD,KAAK+K,MAAM9P,QAAO,SAAAp/D,GAAC,OAAIA,EAAEsiF,KAAK,KAAG,SAAAv+E,GAAC,OAAIA,EAAE9E,IAAI,IAC3F,GAAI8yG,EAAW9xG,OAAS,EAAG,CAC1B,IAAM6iG,EAAQiP,EAAWloD,KAAI,SAAA3xC,GAAI,OAChC+pF,EAAAA,GAAAA,KAAA,OAAAl6E,UACCk6E,EAAAA,GAAAA,KAACiP,GAAQ,CAACh5F,KAAMA,EAAM4kC,QAAS,SAAA98C,GAAC,OAAIwkE,EAAKnL,SAAS,CAAEg7F,kBAAmBr0J,GAAI,KADlEkY,EAAK2d,GAET,IAEP6+H,GACCzyD,EAAAA,GAAAA,KAAA,OAAAl6E,UACCk6E,EAAAA,GAAAA,KAACY,GAAQ,CAACC,MAAOA,KAGpB,CAEA,IAAI6xD,EAAgB,KACd10F,EAAU5B,EAAYC,KAAKkG,EAAKrlD,MAAMglD,KAAK+K,MAAM9P,QAAO,SAAAp/D,GAAC,OAAKA,EAAEsiF,OAAStiF,EAAEmtF,MAAM,KAAG,SAAAppF,GAAC,OAAIA,EAAE9E,IAAI,IACrG,GAAIghE,EAAQhgE,OAAS,EAAG,CACvB,IAAM6iG,EAAQzkC,EAAYa,SAASe,GAAS,SAAAjgE,GAAC,OAAIA,EAAEf,IAAI,IAAE4qD,KAAI,SAAA3xC,GAC5D,IAAMrF,EAAQotD,EAAQb,QAAO,SAAAp/D,GAAC,OAAIA,EAAEf,OAASiZ,EAAKjZ,IAAI,IAAEgB,OAEpD0mG,GACHvE,EAAAA,GAAAA,MAAA,UAAQtlD,QAAS,kBAAM0nB,EAAKrlD,MAAMuyI,SAASx5I,GAAM,EAAK,EAAC6P,SAAA,CAAC,QACnDk6E,EAAAA,GAAAA,KAAA,UAAMA,EAAAA,GAAAA,KAACT,GAAS,CAACp+F,KAAMk+F,GAASnF,MAAO/8F,MAAO,GAAIqY,KAAM8pF,GAASK,YAiBvE,OAbI/uF,EAAQ,IACX8zF,GACCvE,EAAAA,GAAAA,MAAA,OAAAr6E,SAAA,EACCq6E,EAAAA,GAAAA,MAAA,UAAQtlD,QAAS,kBAAM0nB,EAAKrlD,MAAMuyI,SAASx5I,GAAM,EAAM,EAAC6P,SAAA,CAAC,YAChDk6E,EAAAA,GAAAA,KAAA,UAAMA,EAAAA,GAAAA,KAACT,GAAS,CAACp+F,KAAMk+F,GAASnF,MAAO/8F,MAAO,GAAIqY,KAAM8pF,GAASK,aAE1EQ,EAAAA,GAAAA,MAAA,UAAQtlD,QAAS,kBAAM0nB,EAAKrlD,MAAMuyI,SAASx5I,GAAM,EAAK,EAAC6P,SAAA,CAAC,aAC5ClV,EAAM,KAACovF,EAAAA,GAAAA,KAAA,UAAMA,EAAAA,GAAAA,KAACT,GAAS,CAACp+F,KAAMk+F,GAASnF,MAAO/8F,MAAO,GAAKyT,EAAO4E,KAAM8pF,GAASK,iBAO9FQ,EAAAA,GAAAA,MAAA,OAAAr6E,SAAA,EACCk6E,EAAAA,GAAAA,KAACiP,GAAQ,CAACh5F,KAAMA,EAAMrF,MAAOA,IAC5B8zF,IAFQzuF,EAAK2d,GAKjB,IACA8+H,GACC1yD,EAAAA,GAAAA,KAAA,OAAAl6E,UACCk6E,EAAAA,GAAAA,KAACY,GAAQ,CAACC,MAAOA,KAGpB,CAEA,IAAI8xD,EAAqB,KACnBC,EAAex2F,EAAYC,KAAKkG,EAAKrlD,MAAMglD,KAAK+K,MAAM9P,QAAO,SAAAp/D,GAAC,OAAKA,EAAEsiF,QAAUtiF,EAAEmtF,MAAM,KAAG,SAAAppF,GAAC,OAAIA,EAAE9E,IAAI,IAC3G,GAAI41J,EAAa50J,OAAS,EAAG,CAC5B,IAAM6iG,EAAQzkC,EAAYa,SAAS21F,GAAc,SAAA70J,GAAC,OAAIA,EAAEf,IAAI,IAAE4qD,KAAI,SAAA3xC,GACjE,IAAMrF,EAAQgiJ,EAAaz1F,QAAO,SAAAp/D,GAAC,OAAIA,EAAEf,OAASiZ,EAAKjZ,IAAI,IAAEgB,OAEzD0mG,GACH1E,EAAAA,GAAAA,KAAA,UAAQnlD,QAAS,kBAAM0nB,EAAKrlD,MAAMuyI,SAASx5I,GAAM,EAAK,EAAC6P,SAAC,SAYzD,OATIlV,EAAQ,IACX8zF,GACCvE,EAAAA,GAAAA,MAAA,OAAAr6E,SAAA,EACCk6E,EAAAA,GAAAA,KAAA,UAAQnlD,QAAS,kBAAM0nB,EAAKrlD,MAAMuyI,SAASx5I,GAAM,EAAM,EAAC6P,SAAC,cACzDq6E,EAAAA,GAAAA,MAAA,UAAQtlD,QAAS,kBAAM0nB,EAAKrlD,MAAMuyI,SAASx5I,GAAM,EAAK,EAAC6P,SAAA,CAAC,aAAWlV,EAAM,YAM3EuvF,EAAAA,GAAAA,MAAA,OAAAr6E,SAAA,EACCk6E,EAAAA,GAAAA,KAACiP,GAAQ,CAACh5F,KAAMA,EAAMrF,MAAOA,IAC5B8zF,IAFQzuF,EAAK2d,GAKjB,IACA++H,GACC3yD,EAAAA,GAAAA,KAAA,OAAAl6E,UACCk6E,EAAAA,GAAAA,KAACY,GAAQ,CAACC,MAAOA,KAGpB,CAEA,IAAIj/B,EAAQ,KASZ,OARqC,IAAjCW,EAAKrlD,MAAMglD,KAAK+K,MAAMjvE,SACzB4jE,GACCo+B,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAAS0H,YAAYliF,UAChCk6E,EAAAA,GAAAA,KAAA,KAAAl6E,SAAG,sCAMLq6E,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,aAAYlhD,SAAA,EAC1Bq6E,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,gBAAelhD,SAAA,CAC5B2sI,GAAmBzyD,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAASmE,WAAW3+E,SAAC,gBAAqB,KACzE2sI,EACAC,GAAgB1yD,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAASmE,WAAW3+E,SAAC,YAAiB,KAClE4sI,EACAC,GAAqB3yD,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAASmE,WAAW3+E,SAAC,oBAAyB,KAC/E6sI,EACA/wF,KAEDW,EAAKguF,aACLhuF,EAAKg/B,cAGT,CAAE,MAAApa,GACD,OAAO6Y,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,2BACvB,CACD,EA3VCzE,EAAKp9D,MAAQ,CACZ4sJ,WAAY,KACZE,aAAa,EACbG,kBAAmB,KACnBf,aAAc,MACb9uF,CACH,CAAC,OAAA5H,EAAAm3F,EAAA,CAToB,CAASplH,EAAAA,WCxC/BmmH,GAAe31D,GAAqB,UAAW,cAAe,CAC5D,CACE,OACA,CACEr9E,EAAG,gQACHpjB,IAAK,YCLXq2J,GAAe51D,GAAqB,iBAAkB,oBAAqB,CACzE,CACE,OACA,CACEr9E,EAAG,sUACHi9E,KAAM,eACNrgG,IAAK,QACLmtB,YAAa,QCqBNmpI,GAAiB,SAAAvzD,GAAAz6B,EAAAguF,EAAAvzD,GAAA,IAAAC,EAAA/5B,EAAAqtF,GAC7B,SAAAA,EAAY71I,GAAe,IAADqlD,EAKvB,OALuB76D,EAAA,KAAAqrJ,IACzBxwF,EAAAk9B,EAAAnjG,KAAA,KAAM4gB,IAOP81I,cAAgB,WAGf,IAFA,IAAM3wF,EAA+B,GAE9BA,EAAWrkE,OAAS,GAAG,CAC7B,IAAMurF,EAAOrX,GAAUonB,iBAAiB/2B,EAAKrlD,MAAMngB,QAAQomE,SAC3Dd,EAAW7hE,KAAK47D,EAAYY,KAAKusB,GAClC,CAEA,OAAOntB,EAAYC,KAAKgG,GAAY,SAAAvgE,GAAC,OAAIA,EAAE9E,IAAI,GAChD,EAACulE,EAED4uC,OAAS,WACR5uC,EAAKnL,SAAS,CACbiL,WAAYE,EAAKywF,kBACf,WACGzwF,EAAKrlD,MAAMngB,QAAQimE,WACvBT,EAAKrlD,MAAMklD,UAAU/D,EAAcU,MAAO,EAE5C,GACD,EAACwD,EAEDj/C,OAAS,WACR,IACC,IAAMu9E,EAAQt+B,EAAKp9D,MAAMk9D,WAAWza,KAAI,SAAA5lD,GAAC,OACxCg+F,EAAAA,GAAAA,KAACoP,GAAa,CAAYjuC,UAAWn/D,EAAG64C,QAAS0nB,EAAKrlD,MAAM+1I,cAAxCjxJ,EAAE4xB,GAAsD,IAGvEw9E,EAAUvwC,EAAgBsB,oBAAoBI,EAAKrlD,MAAMglD,KAAM7D,EAAcU,OAanF,OAZKqyC,EAAU,GAAM7uC,EAAKrlD,MAAMngB,QAAQimE,YACvC69B,EAAMrgG,MACLw/F,EAAAA,GAAAA,KAACwQ,GAAqB,CAErB7P,MAAM,SACNkQ,UAAWO,EACXpuC,UAAWT,EAAKrlD,MAAMngB,QAAQimE,UAC9BytC,SAAUluC,EAAK4uC,QAJX,YAUNhR,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,sBAAqBlhD,SAAA,EACnCk6E,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAASwG,QAAQhhF,SAAC,wBAC9Bk6E,EAAAA,GAAAA,KAAA,UACAA,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAAS0H,YAAYliF,UAChCk6E,EAAAA,GAAAA,KAAA,KAAAl6E,SAAG,oGAEJk6E,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,qBAAoBlhD,UAClCk6E,EAAAA,GAAAA,KAACY,GAAQ,CAACvxF,KAAK,MAAMwxF,MAAOA,QAIhC,CAAE,MAAA1Z,GACD,OAAO6Y,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,oCACvB,CACD,EA5DCzE,EAAKp9D,MAAQ,CACZk9D,WAAYE,EAAKywF,iBAChBzwF,CACH,CAAC,OAAA5H,EAAAo4F,EAAA,CAP4B,CAASrmH,EAAAA,WCU1BwmH,GAAc,SAAA1zD,GAAAz6B,EAAAmuF,EAAA1zD,GAAA,IAAAC,EAAA/5B,EAAAwtF,GAC1B,SAAAA,EAAYh2I,GAAe,IAADqlD,EAKvB,OALuB76D,EAAA,KAAAwrJ,IACzB3wF,EAAAk9B,EAAAnjG,KAAA,KAAM4gB,IAOPi0I,WAAa,SAACx3D,GACb,GAAQA,EAAKx4F,OACPyqE,GAASwuB,UACb73B,EAAKrlD,MAAMk0I,WAAWz3D,EAAM,KAAM,KAAM,KAAM,EAIjD,EAACp3B,EAED0wF,aAAe,SAAC9xF,GACf,IAAMwpB,EAAsC,SAA/BpoB,EAAKp9D,MAAMguJ,gBAA6B,EAAI,GACzD5wF,EAAKnL,SAAS,CACb+7F,gBAAiB,KACf,WACF5wF,EAAKrlD,MAAM+1I,aAAa9xF,EAAWwpB,EACpC,GACD,EAACpoB,EAED6wF,cAAgB,SAACjyF,GAChBoB,EAAKnL,SAAS,CACbm3C,kBAAmB,OACjB,WACFhsC,EAAKrlD,MAAMk2I,cAAcjyF,EAC1B,GACD,EAACoB,EAED8wF,sBAAwB,WACvB,IAAMC,EAAczyF,EAAgBsB,oBAAoBI,EAAKrlD,MAAMglD,KAAM7D,EAAcY,MACjFs0F,EAAc1yF,EAAgBsB,oBAAoBI,EAAKrlD,MAAMglD,KAAM7D,EAAckB,eACjFi0F,EAAiB3yF,EAAgBsB,oBAAoBI,EAAKrlD,MAAMglD,KAAM7D,EAAcwB,gBACpF4zF,EAAgB5yF,EAAgBsB,oBAAoBI,EAAKrlD,MAAMglD,KAAM7D,EAAcgB,aACnFq0F,EAAe7yF,EAAgBsB,oBAAoBI,EAAKrlD,MAAMglD,KAAM7D,EAAc4B,aAClF0zF,EAAmB9yF,EAAgBsB,oBAAoBI,EAAKrlD,MAAMglD,KAAM7D,EAAcU,OAEtFqyC,EAAUkiD,EAAcC,EAAcC,EAAiBC,EAAgBC,EAAeC,EAEtFC,EAAc/yF,EAAgBsB,oBAAoBI,EAAKrlD,MAAMglD,KAAM7D,EAAcoB,QACjFo0F,EAAgBhzF,EAAgBsB,oBAAoBI,EAAKrlD,MAAMglD,KAAM7D,EAAcc,eACnF20F,EAAoBjzF,EAAgBsB,oBAAoBI,EAAKrlD,MAAMglD,KAAM7D,EAAcsB,cACvFo0F,EAAmBlzF,EAAgBsB,oBAAoBI,EAAKrlD,MAAMglD,KAAM7D,EAAc0B,SACtF8D,EAAa+vF,EAAcC,EAAgBC,EAE3CE,EAASnzF,EAAgBsB,oBAAoBI,EAAKrlD,MAAMglD,KAAM7D,EAAcG,SAC5E87B,EAAO05D,EAEb,OACC7zD,EAAAA,GAAAA,MAACO,GAAG,CAACC,MAAM,sBAAqB76E,SAAA,EAC/Bk6E,EAAAA,GAAAA,KAAC6D,GAAS,CAAClD,MAAM,aAAaxjG,MAAO0jE,EAAgBoB,aAAaM,EAAKrlD,MAAMglD,QAC5EkvC,EAAU,GAAIpR,EAAAA,GAAAA,KAAA,SAAS,KACvBszD,EAAc,GAAItzD,EAAAA,GAAAA,KAAC6D,GAAS,CAAClD,MAAM,oBAAoBxjG,MAAOm2J,IAAkB,KAChFC,EAAc,GAAIvzD,EAAAA,GAAAA,KAAC6D,GAAS,CAAClD,MAAM,oBAAoBxjG,MAAOo2J,IAAkB,KAChFC,EAAiB,GAAIxzD,EAAAA,GAAAA,KAAC6D,GAAS,CAAClD,MAAM,uBAAuBxjG,MAAOq2J,IAAqB,KACzFC,EAAgB,GAAIzzD,EAAAA,GAAAA,KAAC6D,GAAS,CAAClD,MAAM,sBAAsBxjG,MAAOs2J,IAAoB,KACtFC,EAAe,GAAI1zD,EAAAA,GAAAA,KAAC6D,GAAS,CAAClD,MAAM,0BAA0BxjG,MAAOu2J,IAAmB,KACxFC,EAAmB,GAAI3zD,EAAAA,GAAAA,KAAC6D,GAAS,CAAClD,MAAM,yBAAyBxjG,MAAOw2J,IAAuB,KAC/F9vF,EAAa,GAAIm8B,EAAAA,GAAAA,KAAA,SAAS,KAC1B4zD,EAAc,GAAI5zD,EAAAA,GAAAA,KAAC6D,GAAS,CAAClD,MAAM,qBAAqBxjG,MAAOy2J,IAAkB,KACjFC,EAAgB,GAAI7zD,EAAAA,GAAAA,KAAC6D,GAAS,CAAClD,MAAM,uBAAuBxjG,MAAO02J,IAAoB,KACvFC,EAAoB,GAAI9zD,EAAAA,GAAAA,KAAC6D,GAAS,CAAClD,MAAM,qBAAqBxjG,MAAO22J,IAAwB,KAC7FC,EAAmB,GAAI/zD,EAAAA,GAAAA,KAAC6D,GAAS,CAAClD,MAAM,oBAAoBxjG,MAAO42J,IAAuB,KAC1Fz5D,EAAO,GAAI0F,EAAAA,GAAAA,KAAA,SAAS,KACpBg0D,EAAS,GAAIh0D,EAAAA,GAAAA,KAAC6D,GAAS,CAAClD,MAAM,gBAAgBxjG,MAAO62J,IAAa,OAGtE,EAACzxF,EAEDguF,WAAa,WACZ,GAAIhuF,EAAKp9D,MAAMopG,kBAAmB,CACjC,IAAM0lD,EAAcpzF,EAAgBmB,eAAeO,EAAKp9D,MAAMopG,mBAE1D2lD,EAAS,KACb,GAAIrzF,EAAgBS,UAAUiB,EAAKp9D,MAAMopG,mBACxC,GAAIhsC,EAAKp9D,MAAMopG,kBAAkB5vC,QAAU,EAAG,CAE7C,IADA,IAAMw1F,EAAQ,GACLryJ,EAAI,EAAGA,EAAIygE,EAAKp9D,MAAMopG,kBAAkB7vC,QAAS58D,EACzDqyJ,EAAM3zJ,KAAKsB,GAAKygE,EAAKp9D,MAAMopG,kBAAkB5vC,SAAUqhC,EAAAA,GAAAA,KAAC6yD,GAAW,CAASr9I,KAAM,IAAT1T,IAAkBk+F,EAAAA,GAAAA,KAAC8yD,GAAiB,CAASt9I,KAAM,IAAT1T,IAGpHoyJ,GACCl0D,EAAAA,GAAAA,KAAC6D,GAAS,CACTjxC,YAAY,WACZ+tC,MAAM,oBACNxjG,OACC6iG,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,QAAOlhD,SACpBquI,KAKN,MACCD,GACC/zD,EAAAA,GAAAA,MAAA,UAAQx6E,SAAU48C,EAAKrlD,MAAMglD,KAAKyB,MAAQ,IAAK9oB,QAAS,kBAAM0nB,EAAKrlD,MAAMk3I,gBAAgB7xF,EAAKp9D,MAAMopG,kBAAoC,EAACzoF,SAAA,EACxIk6E,EAAAA,GAAAA,KAAA,OAAAl6E,SAAK,wBACLk6E,EAAAA,GAAAA,KAACT,GAAS,CAACp+F,KAAMk+F,GAASnF,MAAO/8F,MAAO,IAAKqY,KAAM8pF,GAASK,YAMhE,OACCQ,EAAAA,GAAAA,MAAA,OAA2Cn5B,UAAU,UAASlhD,SAAA,EAC7Dk6E,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,yBAAwBlhD,UACtCk6E,EAAAA,GAAAA,KAACoP,GAAa,CAACjuC,UAAWoB,EAAKp9D,MAAMopG,uBAEtCvO,EAAAA,GAAAA,KAAA,UACAG,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,kBAAiBlhD,SAAA,EAC/Bk6E,EAAAA,GAAAA,KAAC6D,GAAS,CAACjxC,YAAY,WAAW+tC,MAAM,QAAQxjG,MAAOolE,EAAKp9D,MAAMopG,kBAAkB7vC,SACpFyhC,EAAAA,GAAAA,MAAA,UAAQx6E,SAAU48C,EAAKrlD,MAAMglD,KAAKyB,MAAQswF,EAAap5G,QAAS,kBAAM0nB,EAAKrlD,MAAMm3I,iBAAiB9xF,EAAKp9D,MAAMopG,kBAAoC,EAACzoF,SAAA,EACjJq6E,EAAAA,GAAAA,MAAA,OAAAr6E,SAAA,CAAK,WAAOk6E,EAAAA,GAAAA,KAAA,SAAK,gBACjBA,EAAAA,GAAAA,KAACT,GAAS,CAACp+F,KAAMk+F,GAASnF,MAAO/8F,MAAO82J,EAAaz+I,KAAM8pF,GAASK,gBAGtEQ,EAAAA,GAAAA,MAAA,UAAQtlD,QAAS,kBAAM0nB,EAAK6wF,cAAc7wF,EAAKp9D,MAAMopG,kBAAoC,EAACzoF,SAAA,EACzFk6E,EAAAA,GAAAA,KAAA,OAAAl6E,SAAK,wBACLk6E,EAAAA,GAAAA,KAACT,GAAS,CAACp+F,KAAMk+F,GAASnF,MAAO/8F,MAAO,GAAIqY,KAAM8pF,GAASK,YAEhD,OAAXu0D,GAAkBl0D,EAAAA,GAAAA,KAAA,SAAS,KAC3Bk0D,IAjBQ3xF,EAAKp9D,MAAMopG,kBAAkB36E,GAoBzC,CAEA,IAAIu6C,EAAQ,KACZ,GAAI5L,EAAKrlD,MAAMglD,KAAKiM,MAAMhR,QAAO,SAAAw8B,GAAI,OAAIznB,GAAUioB,wBAAwBR,EAAK,IAAE37F,OAAS,EAAG,CAC7F,IAAM6iG,EAAQt+B,EAAKrlD,MAAMglD,KAAKiM,MAC5BhR,QAAO,SAAAw8B,GAAI,OAAIznB,GAAUioB,wBAAwBR,EAAK,IACtD/xC,KAAI,SAAA7oC,GAAC,OAAIihF,EAAAA,GAAAA,KAACsP,GAAQ,CAAY3V,KAAM56E,EAAG87B,QAAS,SAAA8+C,GAAI,OAAIp3B,EAAK4uF,WAAWx3D,EAAK,GAArD56E,EAAE6U,GAAuD,IACnFu6C,GACCgyB,EAAAA,GAAAA,MAAA,OAAAr6E,SAAA,EACCk6E,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAAS0H,YAAYliF,UAACq6E,EAAAA,GAAAA,MAAA,KAAAr6E,SAAA,EAAGk6E,EAAAA,GAAAA,KAAA,KAAAl6E,SAAG,gCAA+B,2CACvEk6E,EAAAA,GAAAA,KAACY,GAAQ,CAACC,MAAOA,MAGpB,CAEA,IAAInc,EAAQ,KACRniB,EAAKrlD,MAAMglD,KAAKkB,eAAiB,IACpCshB,GACCsb,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,SAAQlhD,UACtBk6E,EAAAA,GAAAA,KAAC4C,GAAW,CACXjgF,OAAO,EACP0gF,OACCrD,EAAAA,GAAAA,KAAC6O,GAAe,CACfpyE,KAAK,4BACLqyE,QAAQ,4CACR/uG,SAASigG,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,cAAalhD,SAAEy8C,EAAKrlD,MAAMglD,KAAKkB,mBAGzDvoB,QAAS,kBAAM0nB,EAAKnL,SAAS,CAAE+7F,gBAAiB,QAAS,OAM7D,IAAImB,EAAa,KAUjB,OATIpiF,GAAUonB,iBAAiB/2B,EAAKrlD,MAAMngB,QAAQomE,SAASnlE,OAAS,IACnEs2J,GACCn0D,EAAAA,GAAAA,MAAA,UAAQx6E,SAAU48C,EAAKrlD,MAAMglD,KAAKyB,MAAQ,GAAI9oB,QAAS,kBAAM0nB,EAAKnL,SAAS,CAAE+7F,gBAAiB,QAAS,EAACrtI,SAAA,EACvGk6E,EAAAA,GAAAA,KAAA,OAAAl6E,SAAK,uBACLk6E,EAAAA,GAAAA,KAACT,GAAS,CAACp+F,KAAMk+F,GAASnF,MAAO/8F,MAAO,GAAIqY,KAAM8pF,GAASK,cAM7DQ,EAAAA,GAAAA,MAAA,OAAen5B,UAAU,UAASlhD,SAAA,EACjCk6E,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAASmE,WAAW3+E,SAAC,qBACjCk6E,EAAAA,GAAAA,KAACO,GAAI,CAAAz6E,SAAC,sCACNk6E,EAAAA,GAAAA,KAACO,GAAI,CAAAz6E,SAAC,+EACNk6E,EAAAA,GAAAA,KAACO,GAAI,CAAAz6E,SAAC,yDAELy8C,EAAKrlD,MAAMngB,QAAQkmE,UAClB+8B,EAAAA,GAAAA,KAACyB,GAAQ,CACRY,QACCrC,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAASE,IAAI16E,SAAC,iDAE3B/lB,SACCogG,EAAAA,GAAAA,MAAA,OAAAr6E,SAAA,EACCk6E,EAAAA,GAAAA,KAAA,KAAAl6E,SAAG,sDACHq6E,EAAAA,GAAAA,MAAA,MAAAr6E,SAAA,EACCk6E,EAAAA,GAAAA,KAAA,MAAAl6E,SAAI,kDACJk6E,EAAAA,GAAAA,KAAA,MAAAl6E,SAAI,gDACJk6E,EAAAA,GAAAA,KAAA,MAAAl6E,SAAI,0DAELk6E,EAAAA,GAAAA,KAAA,KAAAl6E,SAAG,mEACHk6E,EAAAA,GAAAA,KAAA,KAAAl6E,SAAG,wFAIJ,MAEJk6E,EAAAA,GAAAA,KAAA,SACCz9B,EAAK8wF,wBACK,OAAVllF,GAAiB6xB,EAAAA,GAAAA,KAAA,SAAS,KAC1B7xB,EACU,OAAVuW,GAAiBsb,EAAAA,GAAAA,KAAA,SAAS,KAC1Btb,EACe,OAAf4vE,GAAsBt0D,EAAAA,GAAAA,KAAA,SAAS,KAC/Bs0D,IAjCO,MAoCX,EAAC/xF,EAEDg/B,UAAY,WACX,MAAmC,KAA/Bh/B,EAAKp9D,MAAMguJ,iBAEbnzD,EAAAA,GAAAA,KAACmB,GAAM,CACNphG,SACCigG,EAAAA,GAAAA,KAAC+yD,GAAiB,CACjB7wF,KAAMK,EAAKrlD,MAAMglD,KACjBnlE,QAASwlE,EAAKrlD,MAAMngB,QACpBk2J,aAAc1wF,EAAK0wF,aACnB7wF,UAAWG,EAAKrlD,MAAMklD,cAOpB,IACR,EAACG,EAEDj/C,OAAS,WACR,IACC,OACC68E,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,kBAAiBlhD,SAAA,EAC/Bk6E,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,cAAcnsB,QAAS,kBAAM0nB,EAAKnL,SAAS,CAAEm3C,kBAAmB,MAAO,EAACzoF,UACtFk6E,EAAAA,GAAAA,KAACmO,GAAkB,CAClBptC,WAAYwB,EAAKrlD,MAAMglD,KAAKnB,WAC5BwtC,kBAAmBhsC,EAAKp9D,MAAMopG,kBAC9BH,kBAAmB,SAAAjtC,GAAS,OAAIoB,EAAKnL,SAAS,CAAEm3C,kBAAmBptC,GAAY,MAGhFoB,EAAKguF,aACLhuF,EAAKg/B,cAGT,CAAE,MAAApa,GACD,OAAO6Y,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,gCACvB,CACD,EAtPCzE,EAAKp9D,MAAQ,CACZopG,kBAAmB,KACnB4kD,gBAAiB,IAChB5wF,CACH,CAAC,OAAA5H,EAAAu4F,EAAA,CAPyB,CAASxmH,EAAAA,unZCyBvB6nH,GAAc,SAAA/0D,GAAAz6B,EAAAwvF,EAAA/0D,GAAA,IAAAC,EAAA/5B,EAAA6uF,GAC1B,SAAAA,EAAYr3I,GAAe,IAADqlD,EAKvB,OALuB76D,EAAA,KAAA6sJ,IACzBhyF,EAAAk9B,EAAAnjG,KAAA,KAAM4gB,IAOPs3I,UAAY,SAACjiG,GACZgQ,EAAKnL,SAAS,CACb7E,OAAQA,GAEV,EAACgQ,EAEDj/C,OAAS,WACR,IACC,IAAIvjB,EAAU,KACd,OAAQwiE,EAAKp9D,MAAMotD,QAClB,IAAK,SACJxyD,GACCigG,EAAAA,GAAAA,KAACqwD,GAAe,CACfnuF,KAAMK,EAAKrlD,MAAMglD,KACjBnlE,QAASwlE,EAAKrlD,MAAMngB,QACpB04G,eAAgBlzC,EAAKrlD,MAAMu4F,eAC3Bm7C,sBAAuBruF,EAAKrlD,MAAM0zI,sBAClCN,QAAS/tF,EAAKrlD,MAAMozI,UAGtB,MACD,IAAK,aACJvwJ,GACCigG,EAAAA,GAAAA,KAACkzD,GAAc,CACdhxF,KAAMK,EAAKrlD,MAAMglD,KACjBnlE,QAASwlE,EAAKrlD,MAAMngB,QACpBk2J,aAAc1wF,EAAKrlD,MAAM+1I,aACzBG,cAAe7wF,EAAKrlD,MAAMk2I,cAC1BgB,gBAAiB7xF,EAAKrlD,MAAMk3I,gBAC5BC,iBAAkB9xF,EAAKrlD,MAAMm3I,iBAC7BjyF,UAAWG,EAAKrlD,MAAMklD,UACtBgvF,WAAY7uF,EAAKrlD,MAAMk0I,aAGzB,MACD,IAAK,OACJrxJ,GACCigG,EAAAA,GAAAA,KAACkxD,GAAU,CACVhvF,KAAMK,EAAKrlD,MAAMglD,KACjBnlE,QAASwlE,EAAKrlD,MAAMngB,QACpB60J,QAASrvF,EAAKrlD,MAAM00I,QACpBh9C,MAAOryC,EAAKrlD,MAAM03F,MAClB/oB,UAAWtpB,EAAKrlD,MAAM2uE,UACtBC,YAAavpB,EAAKrlD,MAAM4uE,YACxBC,WAAYxpB,EAAKrlD,MAAM6uE,WACvBE,SAAU1pB,EAAKrlD,MAAM+uE,SACrB8mB,QAASxwC,EAAKrlD,MAAM61F,QACpB0+C,WAAYlvF,EAAKrlD,MAAMu0I,WACvBL,WAAY7uF,EAAKrlD,MAAMk0I,WACvBhvF,UAAWG,EAAKrlD,MAAMklD,YAGxB,MACD,IAAK,QACJriE,GACCigG,EAAAA,GAAAA,KAAC8xD,GAAS,CACT5vF,KAAMK,EAAKrlD,MAAMglD,KACjBnlE,QAASwlE,EAAKrlD,MAAMngB,QACpBi0G,QAASzuC,EAAKrlD,MAAM8zF,QACpBy+C,SAAUltF,EAAKrlD,MAAMuyI,SACrB5jE,UAAWtpB,EAAKrlD,MAAM2uE,UACtBI,SAAU1pB,EAAKrlD,MAAM+uE,SACrBmlE,WAAY7uF,EAAKrlD,MAAMk0I,WACvBhvF,UAAWG,EAAKrlD,MAAMklD,UACtBmwF,SAAUhwF,EAAKrlD,MAAMq1I,WAGvB,MACD,IAAK,MACJxyJ,GACCigG,EAAAA,GAAAA,KAAC6wD,GAAO,CAAC9zJ,QAASwlE,EAAKrlD,MAAMngB,QAAS4L,SAAU45D,EAAKrlD,MAAMvU,WAK9D,IAAM5L,EAAU,CACf,CACC62B,GAAI,SACJ0pB,SACC0iD,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,WAAUlhD,SAAC,gBAK5B,CACC8N,GAAI,aACJ0pB,SACC6iD,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,WAAUlhD,SAAA,EACxBk6E,EAAAA,GAAAA,KAAA,OAAAl6E,SAAK,oBACJy8C,EAAKrlD,MAAMglD,KAAKiM,MAAM1nB,MAAK,SAAA1nC,GAAC,OAAImzD,GAAUioB,wBAAwBp7E,EAAE,KAAIihF,EAAAA,GAAAA,KAAA,OAAAl6E,SAAK,WAAU,SAI3F,CACC8N,GAAI,OACJ0pB,SACC6iD,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,WAAUlhD,SAAA,EACxBk6E,EAAAA,GAAAA,KAAA,OAAAl6E,SAAK,cACJy8C,EAAKrlD,MAAMglD,KAAKiM,MAAM1nB,MAAK,SAAA1nC,GAAC,OAAImzD,GAAUwnB,kBAAkB36E,EAAE,KAAKwjD,EAAKrlD,MAAMglD,KAAKmB,OAAO5c,MAAK,SAAAvjC,GAAC,OAAIA,EAAE6pD,IAAM7pD,EAAEw7C,KAAK,KAAIshC,EAAAA,GAAAA,KAAA,OAAAl6E,SAAK,WAAU,SAI1I,CACC8N,GAAI,QACJ0pB,SACC6iD,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,WAAUlhD,SAAA,EACxBk6E,EAAAA,GAAAA,KAAA,OAAAl6E,SAAK,mBACJy8C,EAAKrlD,MAAMglD,KAAKiM,MAAM1nB,MAAK,SAAA1nC,GAAC,OAAImzD,GAAU6nB,kBAAkBh7E,EAAE,KAAIihF,EAAAA,GAAAA,KAAA,OAAAl6E,SAAK,WAAU,UAMlFy8C,EAAKrlD,MAAMngB,QAAQimE,WACtBjmE,EAAQyD,KAAK,CACZozB,GAAI,MACJ0pB,SACC0iD,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,WAAUlhD,SAAC,gBAO7B,IAAM2uI,EAAiBt2D,GAAUj6B,WAAW/G,QAAO,SAAA3pD,GAAC,OAAK+uD,EAAKrlD,MAAMngB,QAAQomE,QAAQrqD,SAAStF,EAAEogB,GAAG,IAAE51B,OAEpG,OACCmiG,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,kBAAiBlhD,SAAA,EAC/Bq6E,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,mBAAkBlhD,SAAA,EAChCk6E,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,OAAOq2C,IAAI,OAAO3/G,IAAKg3J,MACtC10D,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,uBAAsBlhD,SAAC,cACtCk6E,EAAAA,GAAAA,KAACuD,GAAQ,CAACxmG,QAASA,EAAS2mG,WAAYnhC,EAAKp9D,MAAMotD,OAAQoxC,SAAUphC,EAAKiyF,aAC1Er0D,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,UAASlhD,SAAA,EACvBk6E,EAAAA,GAAAA,KAACS,GAAK,CAACtjG,MAAOs3J,EAAe3uI,UAC5Bk6E,EAAAA,GAAAA,KAAA,UAAQh5B,UAAU,WAAWiN,MAAM,QAAQp5B,QAAS,kBAAM0nB,EAAKrlD,MAAMy3I,WAAW,EAAC7uI,UAChFk6E,EAAAA,GAAAA,KAAChC,GAAS,SAGZgC,EAAAA,GAAAA,KAAA,UAAQh5B,UAAU,WAAWiN,MAAM,OAAOp5B,QAAS,kBAAM0nB,EAAKrlD,MAAM03I,SAASryF,EAAKp9D,MAAMotD,OAAO,EAACzsC,SAC9Fy8C,EAAKrlD,MAAMngB,QAAQimE,WAAaT,EAAKrlD,MAAM23I,eAAgB70D,EAAAA,GAAAA,KAAC/B,GAAoB,KAAM+B,EAAAA,GAAAA,KAAC9B,GAAc,aAIzG8B,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,mBAAkBlhD,SAC/B/lB,MAIL,CAAE,MAAAonF,GACD,OAAO6Y,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,gCACvB,CACD,EA5JCzE,EAAKp9D,MAAQ,CACZotD,OAAQ,UACPgQ,CACH,CAAC,OAAA5H,EAAA45F,EAAA,CAPyB,CAAS7nH,EAAAA,WC/DpCooH,GAAe53D,GACb,+BACA,gCACA,CACE,CACE,OACA,CACEr9E,EAAG,kFACHpjB,IAAK,UAGT,CAAC,OAAQ,CAAEojB,EAAG,UAAWpjB,IAAK,UAC9B,CAAC,OAAQ,CAAEojB,EAAG,kBAAmBpjB,IAAK,YCZ1Cs4J,GAAe73D,GACb,6BACA,8BACA,CACE,CACE,OACA,CACEr9E,EAAG,kFACHpjB,IAAK,UAGT,CAAC,OAAQ,CAAEojB,EAAG,UAAWpjB,IAAK,UAC9B,CAAC,OAAQ,CAAEojB,EAAG,kBAAmBpjB,IAAK,YCZ1Cu4J,GAAe93D,GACb,4BACA,8BACA,CACE,CACE,OACA,CACEr9E,EAAG,mFACHpjB,IAAK,UAGT,CAAC,OAAQ,CAAEojB,EAAG,aAAcpjB,IAAK,UACjC,CAAC,OAAQ,CAAEojB,EAAG,mBAAoBpjB,IAAK,YCZ3Cw4J,GAAe/3D,GACb,0BACA,4BACA,CACE,CACE,OACA,CACEr9E,EAAG,mFACHpjB,IAAK,UAGT,CAAC,OAAQ,CAAEojB,EAAG,aAAcpjB,IAAK,UACjC,CAAC,OAAQ,CAAEojB,EAAG,oBAAqBpjB,IAAK,YCZ5Cy4J,GAAeh4D,GAAqB,WAAY,cAAe,CAC7D,CAAC,OAAQ,CAAEr9E,EAAG,0CAA2CpjB,IAAK,UAC9D,CAAC,OAAQ,CAAEojB,EAAG,oBAAqBpjB,IAAK,UACxC,CAAC,OAAQ,CAAEojB,EAAG,kBAAmBpjB,IAAK,UACtC,CAAC,OAAQ,CAAEojB,EAAG,qBAAsBpjB,IAAK,UACzC,CAAC,OAAQ,CAAEojB,EAAG,oBAAqBpjB,IAAK,UACxC,CAAC,OAAQ,CAAEojB,EAAG,kBAAmBpjB,IAAK,YCNxC04J,GAAej4D,GACb,qBACA,uBACA,CACE,CAAC,OAAQ,CAAEr9E,EAAG,uCAAwCpjB,IAAK,UAC3D,CAAC,OAAQ,CAAEojB,EAAG,mBAAoBpjB,IAAK,UACvC,CAAC,OAAQ,CAAEojB,EAAG,iBAAkBpjB,IAAK,UACrC,CAAC,OAAQ,CAAEojB,EAAG,mBAAoBpjB,IAAK,UACvC,CAAC,OAAQ,CAAEojB,EAAG,oBAAqBpjB,IAAK,UACxC,CAAC,OAAQ,CAAEojB,EAAG,kBAAmBpjB,IAAK,YCT1C24J,GAAel4D,GAAqB,WAAY,cAAe,CAC7D,CAAC,OAAQ,CAAEr9E,EAAG,6CAA8CpjB,IAAK,UACjE,CAAC,OAAQ,CAAEojB,EAAG,YAAapjB,IAAK,UAChC,CAAC,OAAQ,CAAEojB,EAAG,eAAgBpjB,IAAK,YCHrC44J,GAAen4D,GAAqB,UAAW,aAAc,CAC3D,CAAC,OAAQ,CAAEr9E,EAAG,6CAA8CpjB,IAAK,UACjE,CAAC,OAAQ,CAAEojB,EAAG,YAAapjB,IAAK,UAChC,CAAC,OAAQ,CAAEojB,EAAG,YAAapjB,IAAK,UAChC,CAAC,OAAQ,CAAEojB,EAAG,eAAgBpjB,IAAK,YCJrC64J,GAAep4D,GACb,uBACA,wBACA,CACE,CAAC,OAAQ,CAAEr9E,EAAG,oBAAqBpjB,IAAK,UACxC,CAAC,OAAQ,CAAEojB,EAAG,mBAAoBpjB,IAAK,UACvC,CAAC,OAAQ,CAAEojB,EAAG,2BAA4BpjB,IAAK,YCNnD84J,GAAer4D,GAAqB,WAAY,eAAgB,CAC9D,CAAC,OAAQ,CAAEr9E,EAAG,SAAUpjB,IAAK,UAC7B,CAAC,OAAQ,CAAEojB,EAAG,SAAUpjB,IAAK,UAC7B,CAAC,OAAQ,CAAEojB,EAAG,gBAAiBpjB,IAAK,UACpC,CAAC,OAAQ,CAAEojB,EAAG,UAAWpjB,IAAK,UAC9B,CAAC,OAAQ,CAAEojB,EAAG,UAAWpjB,IAAK,UAC9B,CAAC,OAAQ,CAAEojB,EAAG,aAAcpjB,IAAK,UACjC,CAAC,OAAQ,CAAEojB,EAAG,eAAgBpjB,IAAK,UACnC,CAAC,OAAQ,CAAEojB,EAAG,WAAYpjB,IAAK,UAC/B,CAAC,OAAQ,CAAEojB,EAAG,WAAYpjB,IAAK,UAC/B,CACE,OACA,CACEojB,EAAG,yEACHpjB,IAAK,YCdX+4J,GAAet4D,GAAqB,WAAY,cAAe,CAC7D,CAAC,OAAQ,CAAEr9E,EAAG,aAAcpjB,IAAK,UACjC,CAAC,OAAQ,CAAEojB,EAAG,eAAgBpjB,IAAK,UACnC,CAAC,OAAQ,CAAEojB,EAAG,aAAcpjB,IAAK,YCHnCg5J,GAAev4D,GAAqB,aAAc,iBAAkB,CAClE,CAAC,OAAQ,CAAEr9E,EAAG,6CAA8CpjB,IAAK,UACjE,CAAC,OAAQ,CAAEojB,EAAG,YAAapjB,IAAK,UAChC,CAAC,OAAQ,CAAEojB,EAAG,cAAepjB,IAAK,UAClC,CAAC,OAAQ,CAAEojB,EAAG,YAAapjB,IAAK,UAChC,CAAC,OAAQ,CAAEojB,EAAG,cAAepjB,IAAK,UAClC,CAAC,OAAQ,CAAEojB,EAAG,eAAgBpjB,IAAK,YCgCxBi5J,GAAc,SAAAl2D,GAAAz6B,EAAA2wF,EAAAl2D,GAAA,IAAAC,EAAA/5B,EAAAgwF,GAAA,SAAAA,IAAA,IAAAnzF,EAAA76D,EAAA,KAAAguJ,GAAA,QAAAr6I,EAAAvd,UAAAE,OAAA4X,EAAA,IAAAvZ,MAAAgf,GAAAnB,EAAA,EAAAA,EAAAmB,EAAAnB,IAAAtE,EAAAsE,GAAApc,UAAAoc,GAkZxB,OAlZwBqoD,EAAAk9B,EAAAnjG,KAAA+J,MAAAo5F,EAAA,OAAA9lF,OAAA/D,KAC1B+/I,eAAiB,WAChB,IAAM9uD,EAA6B,GAC7B+uD,EAA2B,GAEjCrzF,EAAKrlD,MAAM8lE,UAAU7V,OAAOW,QAC1B3Q,QAAO,SAAAr+C,GAAC,OAAI+jE,GAAe6C,oBAAoBnjB,EAAKrlD,MAAM8lE,UAAWlkE,EAAE8U,MAAQgvD,GAASsC,IAAI,IAC5F7oB,MAAK,SAACv9C,EAAGC,GAAC,OAAKD,EAAE9hB,KAAK2/D,cAAc59C,EAAE/hB,KAAK,IAC3CwjB,SAAQ,SAAA1B,GACR,IAAM+xE,EAAmB/xE,EAAEi2D,cAAchuB,OAAM,SAAAvzC,GAAC,OAAIwhE,GAAoBwa,YAAYh8E,EAAG+uD,EAAKrlD,MAAM8lE,UAAU,IAC5G6jB,EAAYrmG,MACXw/F,EAAAA,GAAAA,KAACmE,GAAU,CAEVnyD,OAAQlzB,EACR4lF,OAAQ7hB,GAAe4C,gBAAgBljB,EAAKrlD,MAAM8lE,UAAWlkE,EAAE8U,IAC/DwvE,WAAYvgB,GAAe6C,oBAAoBnjB,EAAKrlD,MAAM8lE,UAAWlkE,EAAE8U,IACvEovD,UAAWzgB,EAAKrlD,MAAM8lE,UACtBzf,UAAWhB,EAAKrlD,MAAMqmD,UACtB59C,UAAWkrE,EACXh2C,QAASg2C,EAAmB,SAAA7+C,GAAM,OAAIuwB,EAAKrlD,MAAMusE,aAAalnB,EAAKrlD,MAAMqmD,UAAWhB,EAAKrlD,MAAM8lE,UAAWhxC,EAAO,EAAG,MAP/GlzB,EAAE8U,IAUV,IAED2uC,EAAKrlD,MAAM8lE,UAAU7V,OAAOW,QAC1B3Q,QAAO,SAAAr+C,GAAC,OAAI+jE,GAAe6C,oBAAoBnjB,EAAKrlD,MAAM8lE,UAAWlkE,EAAE8U,MAAQgvD,GAASsC,IAAI,IAC5F1kE,SAAQ,SAAA1B,GACR,IAAM+xE,EAAmB/xE,EAAEi2D,cAAchuB,OAAM,SAAAvzC,GAAC,OAAIwhE,GAAoBwa,YAAYh8E,EAAG+uD,EAAKrlD,MAAM8lE,UAAU,IACxG6N,GACH+kE,EAAUp1J,MACTw/F,EAAAA,GAAAA,KAACmE,GAAU,CAEVnyD,OAAQlzB,EACR4lF,OAAQ7hB,GAAe4C,gBAAgBljB,EAAKrlD,MAAM8lE,UAAWlkE,EAAE8U,IAC/DwvE,WAAYvgB,GAAe6C,oBAAoBnjB,EAAKrlD,MAAM8lE,UAAWlkE,EAAE8U,IACvEovD,UAAWzgB,EAAKrlD,MAAM8lE,UACtBzf,UAAWhB,EAAKrlD,MAAMqmD,UACtB1oB,QAAS,SAAA7I,GAAM,OAAIuwB,EAAKrlD,MAAMusE,aAAalnB,EAAKrlD,MAAMqmD,UAAWhB,EAAKrlD,MAAM8lE,UAAWhxC,EAAO,GANzFlzB,EAAE8U,IAUX,IAED,IAAIiiI,EAAU,KACRzkD,EAAUvwC,EAAgBsB,oBAAoBI,EAAKrlD,MAAMglD,KAAM7D,EAAcgB,aAYnF,OAXK+xC,EAAU,GAAM7uC,EAAKrlD,MAAM8lD,aAC/B6yF,GACC71D,EAAAA,GAAAA,KAACwQ,GAAqB,CACrB7P,MAAM,SACNkQ,UAAWO,EACXpuC,UAAWT,EAAKrlD,MAAM8lD,UACtBytC,SAAU,kBAAMluC,EAAKrlD,MAAMksE,YAAY7mB,EAAKrlD,MAAMqmD,UAAWhB,EAAKrlD,MAAM8lE,UAAWzgB,EAAKrlD,MAAM8lD,UAAY,KAAO3E,EAAcgB,YAAY,MAM7I8gC,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,0BAAyBlhD,SAAA,CACtC+gF,EACAgvD,GAAU71D,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,cAAiB,KAC1C6uF,EACAD,EAAU53J,OAAS,GAAIgiG,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,cAAiB,KACvD4uF,IAL2C,eAQ/C,EAACrzF,EAEDuzF,cAAgB,SAAC9jH,GAChB,IAAI6+C,GAAmB,EACjB9b,EAA+B,GACrC/iC,EAAO+iC,cAAcv0D,SAAQ,SAACswE,EAAchvF,GACtCkzE,GAAoBwa,YAAYsB,EAAcvuB,EAAKrlD,MAAM8lE,aAC7D6N,GAAmB,EACnB9b,EAAcv0E,MACbw/F,EAAAA,GAAAA,KAAA,OAAah5B,UAAU,sBAAqBlhD,SAAEgrE,EAAav7E,aAAjDzT,IAGb,IAEA,IAAIivF,GAAgB,EACd7b,EAA4B,GA2OlC,OA1OAljC,EAAOkjC,WAAW10D,SAAQ,SAACopE,EAAW9nF,GACrC,GAAKivF,EAAL,CAKA,IAAIglE,GAAe,EACnB,GAAInsE,EAAUzsF,MAAO,CACpB,IAAI64J,GAAgB,EAChBzgJ,EAAsC,GACtC0gJ,EAAe,KACfC,EAAiB,KACrB,OAAQtsE,EAAUh2D,IACjB,IAAK,SACJ,IAAMw/D,EAAcxJ,EACpB,GAAIwJ,EAAYj2F,MAAO,CACtB,IAAMk2F,EAASzJ,EAAUzsF,MACnB8Y,EAAOssD,EAAKrlD,MAAM8lE,UAAU/V,MAAMnL,MAAK,SAAA/jE,GAAC,OAAIA,EAAE61B,KAAOy/D,CAAM,IACjE99E,EAAcU,EAAKjZ,IACpB,MACC+4J,GAAe,EACfxgJ,EAAc,YAEX69E,EAAYxX,WAAW59E,OAAS,EACnCk4J,GACCl2D,EAAAA,GAAAA,KAACuD,GAAQ,CACRxmG,QACCq2F,EAAYxX,WACVh0B,KAAI,SAAAuuG,GAAS,OAAIA,CAAS,IAC1BvuG,KAAI,SAAAh0B,GAAE,OAAI2uC,EAAKrlD,MAAM8lE,UAAU/V,MAAMnL,MAAK,SAAA/jE,GAAC,OAAIA,EAAE61B,KAAOA,CAAE,GAAC,IAC3Dg0B,KAAI,SAAA3xC,GAAI,MAAK,CAAE2d,GAAI3d,EAAK2d,GAAI0pB,QAASrnC,EAAKjZ,KAAM,IAEnD0mG,WAAYtQ,EAAYj2F,MACxBwmG,SAAU,SAAA/vE,GAAE,OAAI2uC,EAAKrlD,MAAMk5I,wBAAwBxsE,EAAWh2D,EAAG,IAInEoiI,GAAgB,EAEjB,MAED,IAAK,SACJ,IAAM/gE,EAAcrL,EACpB,GAAIqL,EAAY93F,MAAO,CACtB,IAAMihE,EAAO62B,EAAY93F,MACzB,GAAIihE,EAAKpgE,OAAS,EAAG,CACpB,IAAM+jE,EAAS3D,EAAK,GACd4pB,EAAmBN,GAAeI,oBAAoBvlB,EAAKrlD,MAAMqmD,UAAWhB,EAAKrlD,MAAM8lE,WACvF2O,EAAWlW,GAAkBU,eAAe6L,EAAkB,CAAEjmB,IAChEs0F,EAAQ56E,GAAkBqB,aAAava,EAAKrlD,MAAM8lE,UAAU7V,OAAO7tE,SAAUyiE,GACnFxsD,EAAc,EACb4qF,EAAAA,GAAAA,MAAA,OAAqCn5B,UAAU,mBAAkBlhD,SAAA,EAChEk6E,EAAAA,GAAAA,KAACw1D,GAAW,CAAC12J,MAAO,CAAE4sE,UAAU,UAAD/xD,OAAY08I,EAAK,YAChDr2D,EAAAA,GAAAA,KAAA,QAAAl6E,SAAO6rE,MAAgB,GAAAh4E,OAFXooD,EAAOppD,EAAC,KAAAgB,OAAIooD,EAAOnpD,IAKlC,MACCm9I,GAAe,EACfxgJ,EAAc,WAEhB,MACCwgJ,GAAe,EACfxgJ,EAAc,YAEX0/E,EAAYrZ,WAAW59E,OAAS,IACnCi4J,GACCj2D,EAAAA,GAAAA,KAAA,UACCh5B,UAAS,oBAAArtD,OAAsB4oD,EAAKrlD,MAAMo5I,yBAA2B1sE,EAAY,UAAY,IAC7F3V,MAAM,uBACNp5B,QAAS,kBAAM0nB,EAAKrlD,MAAMq5I,mBAAmBthE,EAAY,EAACnvE,UAE1Dk6E,EAAAA,GAAAA,KAACy1D,GAAc,OAIlB,MAED,IAAK,UACJ,IAAMhmE,EAAc7F,EACpB,GAAI6F,EAAYC,QACf,OAAQD,EAAYC,QAAQvuF,MAC3B,KAAKkrE,GAAiBoL,WACtB,KAAKpL,GAAiBkJ,QACtB,KAAKlJ,GAAiB6N,OACrB,IAAM9b,EAAOqxB,EAAYtyF,MAIzB,GAHKihE,GAAyB,IAAhBA,EAAKpgE,SAClB+3J,GAAe,GAEZtmE,EAAYC,QAAQ9+E,QAAUs3C,OAAOoV,UAExC/nD,EAAc6oD,EACZxW,KAAI,SAAAh0B,GAAE,OAAI8zD,GAAe+E,aAAalqB,EAAKrlD,MAAMqmD,UAAW3vC,EAAG,IAC/Dg0B,KAAI,SAAA9qD,GAAM,OAAIkjG,EAAAA,GAAAA,KAACkE,GAAG,CAAAp+E,SAAkBhpB,EAAOE,MAAnBF,EAAO82B,GAAuB,IACpC,IAAhBwqC,EAAKpgE,SACRuX,EAAc,eAUf,GANAA,EAAc6oD,EACZxW,KAAI,SAAAh0B,GAAE,OAAI8zD,GAAe+E,aAAalqB,EAAKrlD,MAAMqmD,UAAW3vC,EAAG,IAC/Dg0B,KAAI,SAAA9qD,GAAM,OAAIkjG,EAAAA,GAAAA,KAACkE,GAAG,CAAAp+E,SAAkBhpB,EAAOE,MAAnBF,EAAO82B,GAAuB,IACpC,IAAhBwqC,EAAKpgE,SACRuX,EAAc,UAEXk6E,EAAY7T,WAAW59E,OAASyxF,EAAYC,QAAQ9+E,MAAO,CAC9D,IAAMqjE,EAAK,UAAAt6D,OAAa81E,EAAYC,QAAQvuF,KAAKsf,eACjDw1I,GACCj2D,EAAAA,GAAAA,KAAA,UACCh5B,UAAS,oBAAArtD,OAAsB4oD,EAAKrlD,MAAMo5I,yBAA2B1sE,EAAY,UAAY,IAC7F3V,MAAOA,EACPp5B,QAAS,kBAAM0nB,EAAKrlD,MAAMq5I,mBAAmB9mE,EAAY,EAAC3pE,UAE1Dk6E,EAAAA,GAAAA,KAACy1D,GAAc,KAGlB,CAED,MAED,KAAKppF,GAAiBwjB,QACrB,IAAMzxB,EAAOqxB,EAAYtyF,MACL,IAAhBihE,EAAKpgE,SACR+3J,GAAe,GAEZtmE,EAAYC,QAAQ9+E,QAAUs3C,OAAOoV,UAExC/nD,EAAc6oD,EAAKpgE,OAAS,EAAC,IAAA2b,OAAOykD,EAAKpgE,OAAM,aAAc,UAG7DuX,EAAc6oD,EACZxW,KAAI,SAAAma,GACJ,IAAMimB,EAAmBN,GAAeI,oBAAoBvlB,EAAKrlD,MAAMqmD,UAAWhB,EAAKrlD,MAAM8lE,WACvF2O,EAAWlW,GAAkBU,eAAe6L,EAAkB,CAAEjmB,IAChEs0F,EAAQ56E,GAAkBqB,aAAava,EAAKrlD,MAAM8lE,UAAU7V,OAAO7tE,SAAUyiE,GACnF,OACCo+B,EAAAA,GAAAA,MAAA,OAAqCn5B,UAAU,mBAAkBlhD,SAAA,EAChEk6E,EAAAA,GAAAA,KAACw1D,GAAW,CAAC12J,MAAO,CAAE4sE,UAAU,UAAD/xD,OAAY08I,EAAK,YAChDr2D,EAAAA,GAAAA,KAAA,QAAAl6E,SAAO6rE,MAAgB,GAAAh4E,OAFXooD,EAAOppD,EAAC,KAAAgB,OAAIooD,EAAOnpD,GAKlC,IACG62E,EAAY7T,WAAW59E,OAASyxF,EAAYC,QAAQ9+E,QACvDqlJ,GACCj2D,EAAAA,GAAAA,KAAA,UACCh5B,UAAS,oBAAArtD,OAAsB4oD,EAAKrlD,MAAMo5I,yBAA2B1sE,EAAY,UAAY,IAC7F3V,MAAM,iBACNp5B,QAAS,kBAAM0nB,EAAKrlD,MAAMq5I,mBAAmB9mE,EAAY,EAAC3pE,UAE1Dk6E,EAAAA,GAAAA,KAACy1D,GAAc,QAKnB,MAED,KAAKppF,GAAiB0jB,MACrB,IAAM3xB,EAAOqxB,EAAYtyF,MACL,IAAhBihE,EAAKpgE,SACR+3J,GAAe,GAEZtmE,EAAYC,QAAQ9+E,QAAUs3C,OAAOoV,UAExC/nD,EAAc6oD,EAAKpgE,OAAS,EAAC,IAAA2b,OAAOykD,EAAKpgE,OAAM,WAAY,UAG3DuX,EAAc6oD,EACZxW,KAAI,SAAAma,GACJ,IAAMimB,EAAmBN,GAAeI,oBAAoBvlB,EAAKrlD,MAAMqmD,UAAWhB,EAAKrlD,MAAM8lE,WACvF2O,EAAWlW,GAAkBU,eAAe6L,EAAkB,CAAEjmB,IAChEs0F,EAAQ56E,GAAkBqB,aAAava,EAAKrlD,MAAM8lE,UAAU7V,OAAO7tE,SAAUyiE,GACnF,OACCo+B,EAAAA,GAAAA,MAAA,OAAqCn5B,UAAU,mBAAkBlhD,SAAA,EAChEk6E,EAAAA,GAAAA,KAACw1D,GAAW,CAAC12J,MAAO,CAAE4sE,UAAU,UAAD/xD,OAAY08I,EAAK,YAChDr2D,EAAAA,GAAAA,KAAA,QAAAl6E,SAAO6rE,MAAgB,GAAAh4E,OAFXooD,EAAOppD,EAAC,KAAAgB,OAAIooD,EAAOnpD,GAKlC,IACG62E,EAAY7T,WAAW59E,OAASyxF,EAAYC,QAAQ9+E,QACvDqlJ,GACCj2D,EAAAA,GAAAA,KAAA,UACCh5B,UAAS,oBAAArtD,OAAsB4oD,EAAKrlD,MAAMo5I,yBAA2B1sE,EAAY,UAAY,IAC7F3V,MAAM,eACNp5B,QAAS,kBAAM0nB,EAAKrlD,MAAMq5I,mBAAmB9mE,EAAY,EAAC3pE,UAE1Dk6E,EAAAA,GAAAA,KAACy1D,GAAc,aAUrBO,GAAgB,EAMfA,GACH9gF,EAAW10E,MACVw/F,EAAAA,GAAAA,KAACS,GAAK,CAAStjG,MAAO44J,EAAe,GAAK,IAAIjwI,UAC7Cq6E,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,mBAAkBlhD,SAAA,EAChCq6E,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,4BAA2BlhD,SAAA,EACzCk6E,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,wBAAuBlhD,SACpC+jE,GAAYmL,wBAAwBpL,MAEtCoW,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,yBAAwBlhD,SACrCvQ,IAEgB,OAAjB0gJ,GAAwBj2D,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,0BAAyBlhD,SAAEmwI,IAAsB,QAGzF1zF,EAAKrlD,MAAMo5I,yBAA2B1sE,GACrCoW,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAAS0H,YAAYliF,UAChCq6E,EAAAA,GAAAA,MAAA,KAAAr6E,SAAA,CAAG,8CAA0Ck6E,EAAAA,GAAAA,KAACy1D,GAAc,CAACjgJ,KAAM,KAAM,gDAExE,KAEgB,OAAnB0gJ,GAA0Bl2D,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,0BAAyBlhD,SAAEowI,IAAwB,SAlBnFp0J,GAuBf,MACCi0J,GAAe,EAGXA,IACJhlE,GAAgB,EAlOjB,CAoOD,KAGCoP,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,0BAAyBlhD,SAAA,EACvCk6E,EAAAA,GAAAA,KAACmE,GAAU,CACVnyD,OAAQA,EACR0yD,OAAQ7hB,GAAe4C,gBAAgBljB,EAAKrlD,MAAM8lE,UAAWhxC,EAAOpe,IACpEwvE,WAAYvgB,GAAe6C,oBAAoBnjB,EAAKrlD,MAAM8lE,UAAWhxC,EAAOpe,IAC5EovD,UAAWzgB,EAAKrlD,MAAM8lE,UACtBzf,UAAWhB,EAAKrlD,MAAMqmD,aAEvB48B,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,iBAAgBlhD,SAAA,CAC7BivD,EACAG,GACDirB,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,aAAYlhD,SAAA,EAC1Bk6E,EAAAA,GAAAA,KAAA,UACCh5B,UAAU,UACVrhD,UAAWkrE,IAAqBE,GAAwD,OAAtCxuB,EAAKrlD,MAAMo5I,uBAC7Dz7G,QAAS,kBAAM0nB,EAAKrlD,MAAM+sE,UAAU1nB,EAAKrlD,MAAMqmD,UAAWhB,EAAKrlD,MAAM8lE,UAAU,EAACl9D,SAChF,qBAGDk6E,EAAAA,GAAAA,KAAA,UACCr6E,SAAgD,OAAtC48C,EAAKrlD,MAAMo5I,uBACrBz7G,QAAS,kBAAM0nB,EAAKrlD,MAAMwsE,eAAennB,EAAKrlD,MAAMqmD,UAAWhB,EAAKrlD,MAAM8lE,UAAU,EAACl9D,SACrF,yBAtB0CksB,EAAOpe,GA6BvD,EAAC2uC,EAEDi0F,QAAU,SAACxkH,GACV,IAAI6jH,EAAU,KACRzkD,EAAUvwC,EAAgBsB,oBAAoBI,EAAKrlD,MAAMglD,KAAM7D,EAAcsB,cAYnF,OAXKyxC,EAAU,GAAM7uC,EAAKrlD,MAAM8lD,aAC/B6yF,GACC71D,EAAAA,GAAAA,KAACwQ,GAAqB,CACrB7P,MAAM,YACNkQ,UAAWO,EACXpuC,UAAWT,EAAKrlD,MAAM8lD,UACtB0tC,MAAO,kBAAMnuC,EAAKrlD,MAAMksE,YAAY7mB,EAAKrlD,MAAMqmD,UAAWhB,EAAKrlD,MAAM8lE,UAAWzgB,EAAKrlD,MAAM8lD,UAAY,KAAO3E,EAAcsB,aAAa,MAM3IwgC,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,0BAAyBlhD,SAAA,EACvCk6E,EAAAA,GAAAA,KAACmE,GAAU,CACVnyD,OAAQA,EACR0yD,OAAQ7hB,GAAe4C,gBAAgBljB,EAAKrlD,MAAM8lE,UAAWhxC,EAAOpe,IACpEwvE,WAAYvgB,GAAe6C,oBAAoBnjB,EAAKrlD,MAAM8lE,UAAWhxC,EAAOpe,IAC5EovD,UAAWzgB,EAAKrlD,MAAM8lE,UACtBzf,UAAWhB,EAAKrlD,MAAMqmD,YAEtBsyF,GACD71D,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,iBAAgBlhD,UAC9Bq6E,EAAAA,GAAAA,MAACI,GAAI,CAACp/F,KAAMm/F,GAAS0H,YAAYliF,SAAA,EAChCk6E,EAAAA,GAAAA,KAAA,KAAAl6E,SAAG,6CACFy8C,EAAKrlD,MAAM8lE,UAAU7V,OAAOO,SAAW,GAAIsyB,EAAAA,GAAAA,KAAA,KAAAl6E,SAAG,qDAAuD,YAZ3DksB,EAAOpe,GAAK,QAiB5D,EAAC2uC,EAEDj/C,OAAS,WACR,IACC,IAAIvjB,EAAU,KAWd,OAREA,EAFEwiE,EAAKrlD,MAAM8lE,UAAU7V,OAAOY,eAC3BxL,EAAKrlD,MAAM8lE,UAAU7V,OAAOY,eAAekR,KACpC1c,EAAKi0F,QAAQj0F,EAAKrlD,MAAM8lE,UAAU7V,OAAOY,eAAe/7B,QAExDuwB,EAAKuzF,cAAcvzF,EAAKrlD,MAAM8lE,UAAU7V,OAAOY,eAAe/7B,QAG/DuwB,EAAKozF,kBAIf31D,EAAAA,GAAAA,KAAA,OAAKh5B,UAAS,mBAAArtD,OAAqB4oD,EAAKrlD,MAAMu5I,UAAY,YAAc,YAAa3wI,SACnF/lB,GADyFwiE,EAAKrlD,MAAM8lE,UAAUpvD,GAIlH,CAAE,MAAAuzD,GACD,OAAO6Y,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,gCACvB,CACD,EAACzE,CAAC,CAAD,OAAA5H,EAAA+6F,EAAA,CAlZyB,CAAShpH,EAAAA,WCdvBgqH,GAAiB,SAAAl3D,GAAAz6B,EAAA2xF,EAAAl3D,GAAA,IAAAC,EAAA/5B,EAAAgxF,GAAA,SAAAA,IAAA,IAAAn0F,EAAA76D,EAAA,KAAAgvJ,GAAA,QAAAr7I,EAAAvd,UAAAE,OAAA4X,EAAA,IAAAvZ,MAAAgf,GAAAnB,EAAA,EAAAA,EAAAmB,EAAAnB,IAAAtE,EAAAsE,GAAApc,UAAAoc,GA6F3B,OA7F2BqoD,EAAAk9B,EAAAnjG,KAAA+J,MAAAo5F,EAAA,OAAA9lF,OAAA/D,KAC7B0N,OAAS,WACR,IACC,IAAMiqE,EAAShrB,EAAKrlD,MAAMglD,KAAKta,IAAIgc,QAAQ9B,MAAK,SAAA//D,GAAC,OAAIA,EAAE6xB,KAAO2uC,EAAKrlD,MAAMqmD,UAAUkqB,QAAQ,IAE3F,OAAQlrB,EAAKrlD,MAAM/X,OAClB,KAAK4mE,GAAesgB,QACnB,OAAIkB,EAAO1pB,WAAW7lE,OAAS,GAE7BmiG,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,qBAAoBlhD,SAAA,EAClCk6E,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAASwG,QAAQhhF,SAAC,aAC9Bq6E,EAAAA,GAAAA,MAACI,GAAI,CAACp/F,KAAMm/F,GAASmH,aAAa3hF,SAAA,CAAC,4BAA0BynE,EAAOvwF,KAAK,QACzEgjG,EAAAA,GAAAA,KAAA,UACAG,EAAAA,GAAAA,MAAA,MAAAr6E,SAAA,EACCk6E,EAAAA,GAAAA,KAAA,MAAAl6E,SAAI,qEACJk6E,EAAAA,GAAAA,KAAA,MAAAl6E,SAAI,4CAELk6E,EAAAA,GAAAA,KAAA,UACAA,EAAAA,GAAAA,KAAA,UAAQh5B,UAAU,UAAUnsB,QAAS,kBAAM0nB,EAAKrlD,MAAMy5I,gBAAgB5qF,GAAesgB,QAAQ,EAACvmE,SAAC,OAE9Fy8C,EAAKrlD,MAAM/X,QAAUuiF,GAAeyE,kBAAkB5pB,EAAKrlD,MAAMqmD,YAChEy8B,EAAAA,GAAAA,KAAA,UAAQnlD,QAAS,kBAAM0nB,EAAKrlD,MAAM05I,kBAAkB7qF,GAAeygB,OAAO,EAAC1mE,SAAC,WAC1E,SAMLq6E,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,qBAAoBlhD,SAAA,EAClCk6E,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAASwG,QAAQhhF,SAAC,aAC9Bq6E,EAAAA,GAAAA,MAACI,GAAI,CAACp/F,KAAMm/F,GAASmH,aAAa3hF,SAAA,CAAC,6BAA2BynE,EAAOvwF,KAAK,QAC1EgjG,EAAAA,GAAAA,KAAA,UACAG,EAAAA,GAAAA,MAAA,MAAAr6E,SAAA,EACCk6E,EAAAA,GAAAA,KAAA,MAAAl6E,SAAI,qEACJk6E,EAAAA,GAAAA,KAAA,MAAAl6E,SAAI,yCACJk6E,EAAAA,GAAAA,KAAA,MAAAl6E,SAAI,iCACJk6E,EAAAA,GAAAA,KAAA,MAAAl6E,SAAI,kCAELk6E,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,gBAAelhD,UAC7Bk6E,EAAAA,GAAAA,KAACsP,GAAQ,CAAC3V,KAAMpM,EAAOoM,UAExBqG,EAAAA,GAAAA,KAAA,UACAA,EAAAA,GAAAA,KAAA,UAAQh5B,UAAU,UAAUnsB,QAAS,kBAAM0nB,EAAKrlD,MAAMy5I,gBAAgB5qF,GAAesgB,QAAQ,EAACvmE,SAAC,OAE9Fy8C,EAAKrlD,MAAM/X,QAAUuiF,GAAeyE,kBAAkB5pB,EAAKrlD,MAAMqmD,YAChEy8B,EAAAA,GAAAA,KAAA,UAAQnlD,QAAS,kBAAM0nB,EAAKrlD,MAAM05I,kBAAkB7qF,GAAeygB,OAAO,EAAC1mE,SAAC,WAC1E,QAKR,KAAKimD,GAAewgB,OACnB,OACC4T,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,qBAAoBlhD,SAAA,EAClCk6E,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAASwG,QAAQhhF,SAAC,cAC9Bq6E,EAAAA,GAAAA,MAACI,GAAI,CAACp/F,KAAMm/F,GAASmH,aAAa3hF,SAAA,CAAC,6BAA2BynE,EAAOvwF,KAAK,QAC1EgjG,EAAAA,GAAAA,KAAA,UACAA,EAAAA,GAAAA,KAAA,MAAAl6E,UACCk6E,EAAAA,GAAAA,KAAA,MAAAl6E,SAAI,kFAELk6E,EAAAA,GAAAA,KAAA,UACAA,EAAAA,GAAAA,KAAA,UAAQh5B,UAAU,UAAUnsB,QAAS,kBAAM0nB,EAAKrlD,MAAMy5I,gBAAgB5qF,GAAewgB,OAAO,EAACzmE,SAAC,OAE7Fy8C,EAAKrlD,MAAM/X,QAAUuiF,GAAeyE,kBAAkB5pB,EAAKrlD,MAAMqmD,YAChEy8B,EAAAA,GAAAA,KAAA,UAAQnlD,QAAS,kBAAM0nB,EAAKrlD,MAAM05I,kBAAkB7qF,GAAeygB,OAAO,EAAC1mE,SAAC,WAC1E,QAIP,KAAKimD,GAAe8qF,QACnB,OACC12D,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,qBAAoBlhD,SAAA,EAClCk6E,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAASwG,QAAQhhF,SAAC,aAC9Bq6E,EAAAA,GAAAA,MAACI,GAAI,CAACp/F,KAAMm/F,GAASmH,aAAa3hF,SAAA,CAAC,uCAAqCynE,EAAOvwF,KAAK,QACpFgjG,EAAAA,GAAAA,KAAA,UACAA,EAAAA,GAAAA,KAAA,MAAAl6E,UACCk6E,EAAAA,GAAAA,KAAA,MAAAl6E,SAAI,2EAELk6E,EAAAA,GAAAA,KAAA,UACAA,EAAAA,GAAAA,KAAA,UAAQh5B,UAAU,UAAUnsB,QAAS,kBAAM0nB,EAAKrlD,MAAMy5I,gBAAgB5qF,GAAe8qF,QAAQ,EAAC/wI,SAAC,OAE9Fy8C,EAAKrlD,MAAM/X,QAAUuiF,GAAeyE,kBAAkB5pB,EAAKrlD,MAAMqmD,YAChEy8B,EAAAA,GAAAA,KAAA,UAAQnlD,QAAS,kBAAM0nB,EAAKrlD,MAAM05I,kBAAkB7qF,GAAeygB,OAAO,EAAC1mE,SAAC,WAC1E,QAMR,OAAO,IACR,CAAE,MAAAqhE,GACD,OAAO6Y,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,mCACvB,CACD,EAACzE,CAAC,CAAD,OAAA5H,EAAA+7F,EAAA,CA7F4B,CAAShqH,EAAAA,WCxBvCoqH,GAAe55D,GAAqB,OAAQ,WAAY,CACtD,CAAC,OAAQ,CAAEr9E,EAAG,oCAAqCpjB,IAAK,UACxD,CAAC,OAAQ,CAAEojB,EAAG,4CAA6CpjB,IAAK,YCFlEs6J,GAAe75D,GAAqB,cAAe,iBAAkB,CACnE,CAAC,OAAQ,CAAEr9E,EAAG,iBAAkBpjB,IAAK,UACrC,CAAC,OAAQ,CAAEojB,EAAG,WAAYpjB,IAAK,UAC/B,CAAC,OAAQ,CAAEojB,EAAG,gBAAiBpjB,IAAK,UACpC,CAAC,OAAQ,CAAEojB,EAAG,UAAWpjB,IAAK,UAC9B,CAAC,OAAQ,CAAEojB,EAAG,iBAAkBpjB,IAAK,UACrC,CAAC,OAAQ,CAAEojB,EAAG,WAAYpjB,IAAK,UAC/B,CAAC,OAAQ,CAAEojB,EAAG,mBAAoBpjB,IAAK,UACvC,CAAC,OAAQ,CAAEojB,EAAG,UAAWpjB,IAAK,YCRhCu6J,GAAe95D,GAAqB,eAAgB,kBAAmB,CACrE,CAAC,OAAQ,CAAEr9E,EAAG,6CAA8CpjB,IAAK,UACjE,CAAC,OAAQ,CAAEojB,EAAG,iBAAkBpjB,IAAK,YCFvCw6J,GAAe/5D,GAAqB,UAAW,aAAc,CAC3D,CAAC,OAAQ,CAAEr9E,EAAG,eAAgBpjB,IAAK,UACnC,CACE,OACA,CACEojB,EAAG,4EACHpjB,IAAK,UAGT,CAAC,OAAQ,CAAEojB,EAAG,SAAUpjB,IAAK,YCMlBy6J,GAAW,SAAA13D,GAAAz6B,EAAAmyF,EAAA13D,GAAA,IAAAC,EAAA/5B,EAAAwxF,GAAA,SAAAA,IAAA,IAAA30F,EAAA76D,EAAA,KAAAwvJ,GAAA,QAAA77I,EAAAvd,UAAAE,OAAA4X,EAAA,IAAAvZ,MAAAgf,GAAAnB,EAAA,EAAAA,EAAAmB,EAAAnB,IAAAtE,EAAAsE,GAAApc,UAAAoc,GA2BrB,OA3BqBqoD,EAAAk9B,EAAAnjG,KAAA+J,MAAAo5F,EAAA,OAAA9lF,OAAA/D,KACvB0N,OAAS,WACR,IACC,OACC68E,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,eAAclhD,SAAA,EAC5Bq6E,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,gBAAelhD,SAAA,EAC7Bk6E,EAAAA,GAAAA,KAAC6D,GAAS,CACTjxC,YAAY,WACZ+tC,MAAM,gBACNxjG,OAAO6iG,EAAAA,GAAAA,KAACT,GAAS,CAACp+F,KAAMk+F,GAASU,SAAU5iG,MAAOolE,EAAKrlD,MAAM8lE,UAAU7V,OAAOO,SAAUl4D,KAAM8pF,GAASM,WAExGI,EAAAA,GAAAA,KAAC6D,GAAS,CACTjxC,YAAY,WACZ+tC,MAAM,eACNxjG,MACColE,EAAKrlD,MAAM8lE,UAAU7V,OAAOY,gBAAkBxL,EAAKrlD,MAAM8lE,UAAU7V,OAAOY,eAAekR,MACxF+gB,EAAAA,GAAAA,KAAC8D,GAAqB,CAAC98B,UAAU,UAAUxxD,KAAM,MAEjDwqF,EAAAA,GAAAA,KAACkB,GAAK,CAAC1rF,KAAM,WAGjBwqF,EAAAA,GAAAA,KAAA,UAAQh5B,UAAU,UAAUnsB,QAAS0nB,EAAKrlD,MAAM0rE,QAAQ9iE,SAAC,oBAG5D,CAAE,MAAAqhE,GACD,OAAO6Y,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,6BACvB,CACD,EAACzE,CAAC,CAAD,OAAA5H,EAAAu8F,EAAA,CA3BsB,CAASxqH,EAAAA,WCMpByqH,GAAQ,SAAA33D,GAAAz6B,EAAAoyF,EAAA33D,GAAA,IAAAC,EAAA/5B,EAAAyxF,GAAA,SAAAA,IAAA,IAAA50F,EAAA76D,EAAA,KAAAyvJ,GAAA,QAAA97I,EAAAvd,UAAAE,OAAA4X,EAAA,IAAAvZ,MAAAgf,GAAAnB,EAAA,EAAAA,EAAAmB,EAAAnB,IAAAtE,EAAAsE,GAAApc,UAAAoc,GAyClB,OAzCkBqoD,EAAAk9B,EAAAnjG,KAAA+J,MAAAo5F,EAAA,OAAA9lF,OAAA/D,KACpB0N,OAAS,WACR,IACC,IAAM8zI,EAAoC,CAAC,EAK3C,MAJA,CAAE,IAAK,KAAM,IAAK,KAAM,IAAK,KAAM,IAAK,MAAO52I,SAAQ,SAAAg+D,GACtD44E,EAAU54E,GAAOkJ,GAAe0C,YAAY7nB,EAAKrlD,MAAMqmD,UAAWhB,EAAKrlD,MAAM8lE,UAAWzgB,EAAKrlD,MAAM8lE,UAAU7V,OAAO7tE,SAAUk/E,EAC/H,KAGC2hB,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,YAAWlhD,SAAA,CACxBy8C,EAAKrlD,MAAMngB,QAAQimE,WAAYg9B,EAAAA,GAAAA,KAAA,UAAQh5B,UAAU,YAAYnsB,QAAS,kBAAM0nB,EAAKrlD,MAAMu7D,YAAYlW,EAAKrlD,MAAMqmD,UAAWhB,EAAKrlD,MAAM8lE,UAAW,GAAG,EAACl9D,SAAC,iBAAwB,MAC7Kk6E,EAAAA,GAAAA,KAACuL,GAAc,CAACvoB,UAAWzgB,EAAKrlD,MAAM8lE,UAAW0oB,MAAO0rD,EAAWxrD,OAAQ,SAACptB,EAAKmM,GAAI,OAAKpoB,EAAKrlD,MAAM4tE,KAAKvoB,EAAKrlD,MAAMqmD,UAAWhB,EAAKrlD,MAAM8lE,UAAWxE,EAAKmM,EAAK,IAEtH,IAAzCpoB,EAAKrlD,MAAM8lE,UAAU7V,OAAOO,UAC3ByyB,EAAAA,GAAAA,MAACI,GAAI,CAACp/F,KAAMm/F,GAAS0H,YAAYliF,SAAA,EAChCk6E,EAAAA,GAAAA,KAAA,KAAAl6E,SAAG,mDACDy8C,EAAKrlD,MAAM8lE,UAAU7V,OAAOY,gBAAmBxL,EAAKrlD,MAAM8lE,UAAU7V,OAAOY,eAAekR,KAAgD,MAAzC+gB,EAAAA,GAAAA,KAAA,KAAAl6E,SAAG,uCAErG,KAGHy8C,EAAKrlD,MAAMngB,QAAQkmE,UAClB+8B,EAAAA,GAAAA,KAACyB,GAAQ,CACRY,QACCrC,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAASE,IAAI16E,SAAC,oBAE3B/lB,SACCogG,EAAAA,GAAAA,MAAA,OAAAr6E,SAAA,EACCq6E,EAAAA,GAAAA,MAAA,KAAAr6E,SAAA,CAAG,2DAAuDk6E,EAAAA,GAAAA,KAAC3B,GAA4B,CAAC7oF,KAAM,KAAM,0BACpG2qF,EAAAA,GAAAA,MAAA,KAAAr6E,SAAA,CAAG,4CAAwCk6E,EAAAA,GAAAA,KAAA,KAAAl6E,SAAG,UAAS,mBACvDk6E,EAAAA,GAAAA,KAAA,KAAAl6E,SAAG,uIAIJ,OAIP,CAAE,MAAAqhE,GACD,OAAO6Y,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,0BACvB,CACD,EAACzE,CAAC,CAAD,OAAA5H,EAAAw8F,EAAA,CAzCmB,CAASzqH,EAAAA,WCCjB2qH,GAAY,SAAA73D,GAAAz6B,EAAAsyF,EAAA73D,GAAA,IAAAC,EAAA/5B,EAAA2xF,GAAA,SAAAA,IAAA,IAAA90F,EAAA76D,EAAA,KAAA2vJ,GAAA,QAAAh8I,EAAAvd,UAAAE,OAAA4X,EAAA,IAAAvZ,MAAAgf,GAAAnB,EAAA,EAAAA,EAAAmB,EAAAnB,IAAAtE,EAAAsE,GAAApc,UAAAoc,GAqFtB,OArFsBqoD,EAAAk9B,EAAAnjG,KAAA+J,MAAAo5F,EAAA,OAAA9lF,OAAA/D,KACxB0N,OAAS,WACR,IACC,OACC68E,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,gBAAelhD,SAAA,EAC7Bk6E,EAAAA,GAAAA,KAACwJ,GAAiB,CACjBn6F,KAAK,SACL2zE,UAAWzgB,EAAKrlD,MAAM8lE,UACtBzf,UAAWhB,EAAKrlD,MAAMqmD,UACtBunC,aAAcvoC,EAAKrlD,MAAMo6I,UACzB7tD,UAAWlnC,EAAKrlD,MAAMq6I,sBAEvBv3D,EAAAA,GAAAA,KAAC0H,GAAgB,CAAC1kB,UAAWzgB,EAAKrlD,MAAM8lE,UAAWzf,UAAWhB,EAAKrlD,MAAMqmD,aACzE48B,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,gBAAelhD,SAAA,EAC7Bq6E,EAAAA,GAAAA,MAAA,UAAQx6E,SAAU48C,EAAKrlD,MAAM8lE,UAAU7V,OAAOO,SAAW,EAAG7yB,QAAS,kBAAM0nB,EAAKrlD,MAAMsuE,QAAQjpB,EAAKrlD,MAAMqmD,UAAWhB,EAAKrlD,MAAM8lE,UAAU,EAACl9D,SAAA,CAAC,WACnIk6E,EAAAA,GAAAA,KAAA,UAAMA,EAAAA,GAAAA,KAACT,GAAS,CAACpiG,MAAO,EAAGgE,KAAMk+F,GAASU,SAAUvqF,KAAM8pF,GAASK,aAE3EQ,EAAAA,GAAAA,MAAA,UAAQx6E,SAAU48C,EAAKrlD,MAAM8lE,UAAU7V,OAAOO,SAAW,EAAG7yB,QAAS,kBAAM0nB,EAAKrlD,MAAM21C,KAAK0P,EAAKrlD,MAAMqmD,UAAWhB,EAAKrlD,MAAM8lE,UAAU,EAACl9D,SAAA,CAAC,QACnIk6E,EAAAA,GAAAA,KAAA,UAAMA,EAAAA,GAAAA,KAACT,GAAS,CAACpiG,MAAO,EAAGgE,KAAMk+F,GAASU,SAAUvqF,KAAM8pF,GAASK,aAExEQ,EAAAA,GAAAA,MAAA,UAAQx6E,SAAU48C,EAAKrlD,MAAM8lE,UAAU7V,OAAOO,SAAW,EAAG7yB,QAAS,kBAAM0nB,EAAKrlD,MAAMyuE,KAAKppB,EAAKrlD,MAAMqmD,UAAWhB,EAAKrlD,MAAM8lE,UAAU,EAACl9D,SAAA,CAAC,QACnIk6E,EAAAA,GAAAA,KAAA,UAAMA,EAAAA,GAAAA,KAACT,GAAS,CAACpiG,MAAO,EAAGgE,KAAMk+F,GAASU,SAAUvqF,KAAM8pF,GAASK,gBAGzEK,EAAAA,GAAAA,KAAC+H,GAAgB,CAAC/kB,UAAWzgB,EAAKrlD,MAAM8lE,YACvCzgB,EAAKrlD,MAAMngB,QAAQimE,WAAYg9B,EAAAA,GAAAA,KAAA,UAAQh5B,UAAU,YAAYnsB,QAAS,kBAAM0nB,EAAKrlD,MAAMs6I,iBAAiBj1F,EAAKrlD,MAAM8lE,UAAU,EAACl9D,SAAC,sBAA6B,KAE5Jy8C,EAAKrlD,MAAMngB,QAAQkmE,UAClB+8B,EAAAA,GAAAA,KAACyB,GAAQ,CACRY,QACCrC,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAASE,IAAI16E,SAAC,qBAE3B/lB,SACCogG,EAAAA,GAAAA,MAAA,OAAAr6E,SAAA,EACCk6E,EAAAA,GAAAA,KAAA,KAAAl6E,SAAG,uDACHk6E,EAAAA,GAAAA,KAAA,KAAAl6E,SAAG,oGACHk6E,EAAAA,GAAAA,KAAA,KAAAl6E,SAAG,uDAIJ,KAGHy8C,EAAKrlD,MAAMngB,QAAQkmE,UAClB+8B,EAAAA,GAAAA,KAACyB,GAAQ,CACRY,QACCrC,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAASE,IAAI16E,SAAC,sBAE3B/lB,SACCogG,EAAAA,GAAAA,MAAA,OAAAr6E,SAAA,EACCq6E,EAAAA,GAAAA,MAAA,KAAAr6E,SAAA,CAAG,iGAA6Fk6E,EAAAA,GAAAA,KAAA,KAAAl6E,SAAG,cAAa,cAChHk6E,EAAAA,GAAAA,KAAA,KAAAl6E,SAAG,qHACHq6E,EAAAA,GAAAA,MAAA,KAAAr6E,SAAA,CAAG,sDAAkDk6E,EAAAA,GAAAA,KAAA,KAAAl6E,SAAG,YAAW,+CACnEk6E,EAAAA,GAAAA,KAAA,KAAAl6E,SAAG,sCACHq6E,EAAAA,GAAAA,MAAA,MAAAr6E,SAAA,EACCk6E,EAAAA,GAAAA,KAAA,MAAAl6E,SAAI,qDACJq6E,EAAAA,GAAAA,MAAA,MAAAr6E,SAAA,CAAI,+CAA2Ck6E,EAAAA,GAAAA,KAAA,KAAAl6E,SAAG,YAAW,+CAK/D,KAGHy8C,EAAKrlD,MAAMngB,QAAQkmE,UAClB+8B,EAAAA,GAAAA,KAACyB,GAAQ,CACRY,QACCrC,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAASE,IAAI16E,SAAC,qBAE3B/lB,SACCogG,EAAAA,GAAAA,MAAA,OAAAr6E,SAAA,EACCq6E,EAAAA,GAAAA,MAAA,KAAAr6E,SAAA,CAAG,qFAAsFk6E,EAAAA,GAAAA,KAAA,KAAAl6E,SAAG,eAAc,mBAC1Gk6E,EAAAA,GAAAA,KAAA,KAAAl6E,SAAG,mFACHq6E,EAAAA,GAAAA,MAAA,KAAAr6E,SAAA,CAAG,8DAA0Dk6E,EAAAA,GAAAA,KAAA,KAAAl6E,SAAG,YAAW,mBAC3Eq6E,EAAAA,GAAAA,MAAA,KAAAr6E,SAAA,CAAG,8DAA0Dk6E,EAAAA,GAAAA,KAAA,KAAAl6E,SAAG,eAAc,uBAI/E,OAIP,CAAE,MAAAqhE,GACD,OAAO6Y,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,8BACvB,CACD,EAACzE,CAAC,CAAD,OAAA5H,EAAA08F,EAAA,CArFuB,CAAS3qH,EAAAA,WCCrB+qH,GAAW,SAAAj4D,GAAAz6B,EAAA0yF,EAAAj4D,GAAA,IAAAC,EAAA/5B,EAAA+xF,GAAA,SAAAA,IAAA,IAAAl1F,EAAA76D,EAAA,KAAA+vJ,GAAA,QAAAp8I,EAAAvd,UAAAE,OAAA4X,EAAA,IAAAvZ,MAAAgf,GAAAnB,EAAA,EAAAA,EAAAmB,EAAAnB,IAAAtE,EAAAsE,GAAApc,UAAAoc,GAmDrB,OAnDqBqoD,EAAAk9B,EAAAnjG,KAAA+J,MAAAo5F,EAAA,OAAA9lF,OAAA/D,KACvB0N,OAAS,WACR,IACC,IAAM45D,EAAQzB,GAAkBkC,YAAYpb,EAAKrlD,MAAMqmD,UAAU8kB,YAC3D2E,EAAgBtF,GAAeI,oBAAoBvlB,EAAKrlD,MAAMqmD,UAAWhB,EAAKrlD,MAAM8lE,WACpFzhB,EAAMmmB,GAAeqF,eAAexqB,EAAKrlD,MAAMqmD,UAAWypB,EAAe,GAC7E7vB,QAAO,SAAAp8D,GAAC,OAAIA,EAAE6yB,KAAO2uC,EAAKrlD,MAAM8lE,UAAUpvD,EAAE,IAC5CupC,QAAO,SAAAp8D,GAAC,OAAIA,EAAEosE,OAAOhoE,QAAU0mE,GAAeuc,IAAI,IAClDjrB,QAAO,SAAAp8D,GAAC,OAAIA,EAAEuiE,UAAYf,EAAKrlD,MAAM8lE,UAAU1f,OAAO,IACtDnG,QAAO,SAAAp8D,GAAC,OAAI06E,GAAkBwB,UAAUC,EAAO8P,EAAetF,GAAeI,oBAAoBvlB,EAAKrlD,MAAMqmD,UAAWxiE,GAAG,IAEtH22J,EAAiBt7F,EAAYa,SAASsF,EAAKrlD,MAAM8lE,UAAU9V,QAAQ/P,QAAO,SAAAp/D,GAAC,OAAIA,EAAEmtF,MAAM,KAAG,SAAAntF,GAAC,OAAIA,EAAEf,IAAI,IACzG4qD,KAAI,SAACp0C,EAAG1R,GACR,IAAM8O,EAAQ2xD,EAAKrlD,MAAM8lE,UAAU9V,QAAQ/P,QAAO,SAAAp/D,GAAC,OAAIA,EAAEf,OAASwW,EAAExW,IAAI,IAAEgB,OAC1E,OACCmiG,EAAAA,GAAAA,MAAA,OAAAr6E,SAAA,EACCk6E,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,cAAalhD,UAC3Bk6E,EAAAA,GAAAA,KAACiP,GAAQ,CAACh5F,KAAMzC,EAAG5C,MAAOA,OAE3BuvF,EAAAA,GAAAA,MAAA,UAAQx6E,SAAU48C,EAAKrlD,MAAM8lE,UAAU7V,OAAOO,SAAW,EAAG7yB,QAAS,kBAAM0nB,EAAKrlD,MAAM6tE,YAAYxoB,EAAKrlD,MAAMqmD,UAAWhB,EAAKrlD,MAAM8lE,UAAWzgB,EAAKrlD,MAAM8lE,UAAWxvE,EAAE,EAACsS,SAAA,CAAC,SAClKk6E,EAAAA,GAAAA,KAAA,UAAMA,EAAAA,GAAAA,KAACT,GAAS,CAACp+F,KAAMk+F,GAASU,SAAU5iG,MAAO,EAAGqY,KAAM8pF,GAASK,YAGxEp+B,EAAI3Z,KAAI,SAAA7mD,GAAC,OACRo/F,EAAAA,GAAAA,MAAA,UAAmBx6E,SAAU48C,EAAKrlD,MAAM8lE,UAAU7V,OAAOO,SAAW,EAAG7yB,QAAS,kBAAM0nB,EAAKrlD,MAAM6tE,YAAYxoB,EAAKrlD,MAAMqmD,UAAWhB,EAAKrlD,MAAM8lE,UAAWjiF,EAAGyS,EAAE,EAACsS,SAAA,CAAC,WACtJ/kB,EAAE/D,MAAKgjG,EAAAA,GAAAA,KAAA,UAAMA,EAAAA,GAAAA,KAACT,GAAS,CAACp+F,KAAMk+F,GAASU,SAAU5iG,MAAO,EAAGqY,KAAM8pF,GAASK,WADvE5+F,EAAE6yB,GAEN,MAXF9xB,EAgBZ,IAYD,OAV8B,IAA1B41J,EAAe15J,QAClB05J,EAAel3J,MACdw/F,EAAAA,GAAAA,KAAA,OAAAl6E,UACCk6E,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAAS0H,YAAYliF,UAChCq6E,EAAAA,GAAAA,MAAA,KAAAr6E,SAAA,CAAIy8C,EAAKrlD,MAAM8lE,UAAUhmF,KAAK,oCAFvB,WASVgjG,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,eAAclhD,SAC3B4xI,GAGJ,CAAE,MAAAvwE,GACD,OAAO6Y,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,6BACvB,CACD,EAACzE,CAAC,CAAD,OAAA5H,EAAA88F,EAAA,CAnDsB,CAAS/qH,EAAAA,WCYpBirH,GAAY,SAAAn4D,GAAAz6B,EAAA4yF,EAAAn4D,GAAA,IAAAC,EAAA/5B,EAAAiyF,GACxB,SAAAA,EAAYz6I,GAAe,IAADqlD,EAIvB,OAJuB76D,EAAA,KAAAiwJ,IACzBp1F,EAAAk9B,EAAAnjG,KAAA,KAAM4gB,IAMPm5F,OAAS,SAACC,GACT/zC,EAAKnL,SAAS,CACbk/C,IAAKA,GAEP,EAAC/zC,EAEDqmB,QAAU,WACTrmB,EAAKnL,SAAS,CACbk/C,IAAK,UACH,WACF/zC,EAAKrlD,MAAM0rE,SACZ,GACD,EAACrmB,EAEDj/C,OAAS,WACR,IACC,IAAM6+E,EAAqD,IAAzC5/B,EAAKrlD,MAAM8lE,UAAU7V,OAAOO,UAAmBnL,EAAKrlD,MAAM8lE,UAAU7V,OAAOY,gBAAkBxL,EAAKrlD,MAAM8lE,UAAU7V,OAAOY,eAAekR,KAEpJliF,EAAU,CACf,CAAE62B,GAAI,QAAS0pB,SAAS0iD,EAAAA,GAAAA,KAAC82D,GAAQ,KACjC,CAAEljI,GAAI,OAAQ0pB,SAAS0iD,EAAAA,GAAAA,KAAC+2D,GAAc,KACtC,CAAEnjI,GAAI,UAAW0pB,QAAS6kD,GAAWnC,EAAAA,GAAAA,KAAC8D,GAAqB,CAAC98B,UAAU,aAAeg5B,EAAAA,GAAAA,KAACg3D,GAAe,MAGlGz0F,EAAKrlD,MAAM8lE,UAAU9V,QAAQzmB,MAAK,SAAA1oD,GAAC,OAAIA,EAAEmtF,MAAM,KAClDnuF,EAAQqmD,OAAO,EAAG,EAAG,CAAExvB,GAAI,SAAU0pB,SAAS0iD,EAAAA,GAAAA,KAACi3D,GAAU,MAG1D,IAAIl3J,EAAU,KACd,OAAQwiE,EAAKp9D,MAAMmxG,KAClB,IAAK,QACJv2G,GACCigG,EAAAA,GAAAA,KAACq3D,GAAY,CACZr0E,UAAWzgB,EAAKrlD,MAAM8lE,UACtBzf,UAAWhB,EAAKrlD,MAAMqmD,UACtBxmE,QAASwlE,EAAKrlD,MAAMngB,QACpBu6J,UAAW/0F,EAAKrlD,MAAMo6I,UACtBC,mBAAoBh1F,EAAKrlD,MAAMq6I,mBAC/B/rE,QAASjpB,EAAKrlD,MAAMsuE,QACpB34B,KAAM0P,EAAKrlD,MAAM21C,KACjB84B,KAAMppB,EAAKrlD,MAAMyuE,KACjB6rE,iBAAkBj1F,EAAKrlD,MAAMs6I,mBAG/B,MACD,IAAK,OACJz3J,GACCigG,EAAAA,GAAAA,KAACm3D,GAAQ,CACRn0E,UAAWzgB,EAAKrlD,MAAM8lE,UACtBzf,UAAWhB,EAAKrlD,MAAMqmD,UACtBxmE,QAASwlE,EAAKrlD,MAAMngB,QACpB+tF,KAAMvoB,EAAKrlD,MAAM4tE,KACjBrS,YAAalW,EAAKrlD,MAAMu7D,cAG1B,MACD,IAAK,SACJ14E,GACCigG,EAAAA,GAAAA,KAACy3D,GAAW,CACXz0E,UAAWzgB,EAAKrlD,MAAM8lE,UACtBzf,UAAWhB,EAAKrlD,MAAMqmD,UACtBwnB,YAAaxoB,EAAKrlD,MAAM6tE,cAG1B,MACD,IAAK,UACJhrF,GACCigG,EAAAA,GAAAA,KAACk3D,GAAW,CACXl0E,UAAWzgB,EAAKrlD,MAAM8lE,UACtBzf,UAAWhB,EAAKrlD,MAAMqmD,UACtBqlB,QAASrmB,EAAKqmB,UAMlB,OACCuX,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,gBAAelhD,SAAA,CAE5By8C,EAAKrlD,MAAMngB,QAAQkmE,UAClB+8B,EAAAA,GAAAA,KAACyB,GAAQ,CACRY,QACClC,EAAAA,GAAAA,MAACI,GAAI,CAACp/F,KAAMm/F,GAASE,IAAI16E,SAAA,CAAC,SAAOy8C,EAAKrlD,MAAM8lE,UAAUhmF,KAAK,8DAE5D+C,SACCogG,EAAAA,GAAAA,MAAA,OAAAr6E,SAAA,EACCk6E,EAAAA,GAAAA,KAAA,KAAAl6E,SAAG,4CACHq6E,EAAAA,GAAAA,MAAA,MAAAr6E,SAAA,EACCq6E,EAAAA,GAAAA,MAAA,MAAAr6E,SAAA,CAAI,mDAA+Ck6E,EAAAA,GAAAA,KAAC+2D,GAAc,CAACvhJ,KAAM,KAAM,YAC/EwqF,EAAAA,GAAAA,KAAA,MAAAl6E,SAAI,2GAELq6E,EAAAA,GAAAA,MAAA,KAAAr6E,SAAA,CAAG,iCAAkCk6E,EAAAA,GAAAA,KAAA,KAAAl6E,SAAG,aAAY,YAAQk6E,EAAAA,GAAAA,KAACg3D,GAAe,CAACxhJ,KAAM,KAAM,gBAI1F,MAEJwqF,EAAAA,GAAAA,KAACiE,GAAI,CACJlnG,QAASA,EACT2mG,WAAYnhC,EAAKp9D,MAAMmxG,IACvB3S,SAAUphC,EAAK8zC,UAEhBrW,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,cAAalhD,SAC1B/lB,MA1BiCwiE,EAAKrlD,MAAM8lE,UAAUpvD,GA8B3D,CAAG,MAAAuzD,GACF,OAAO6Y,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,8BACvB,CACD,EAnHCzE,EAAKp9D,MAAQ,CACZmxG,IAAK,SACJ/zC,CACH,CAAC,OAAA5H,EAAAg9F,EAAA,CANuB,CAASjrH,EAAAA,WCjBrBkrH,GAAgB,SAAAp4D,GAAAz6B,EAAA6yF,EAAAp4D,GAAA,IAAAC,EAAA/5B,EAAAkyF,GAAA,SAAAA,IAAA,IAAAr1F,EAAA76D,EAAA,KAAAkwJ,GAAA,QAAAv8I,EAAAvd,UAAAE,OAAA4X,EAAA,IAAAvZ,MAAAgf,GAAAnB,EAAA,EAAAA,EAAAmB,EAAAnB,IAAAtE,EAAAsE,GAAApc,UAAAoc,GAmB1B,OAnB0BqoD,EAAAk9B,EAAAnjG,KAAA+J,MAAAo5F,EAAA,OAAA9lF,OAAA/D,KAC5B0N,OAAS,WACR,IACC,OACC68E,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,oBAAmBlhD,SAAA,EACjCk6E,EAAAA,GAAAA,KAACwJ,GAAiB,CACjBn6F,KAAK,SACL2zE,UAAWzgB,EAAKrlD,MAAM8lE,UACtBzf,UAAWhB,EAAKrlD,MAAMqmD,UACtBunC,aAAcvoC,EAAKrlD,MAAMo6I,UACzB7tD,UAAWlnC,EAAKrlD,MAAMq6I,sBAEvBv3D,EAAAA,GAAAA,KAAC+H,GAAgB,CAAC/kB,UAAWzgB,EAAKrlD,MAAM8lE,aACxCgd,EAAAA,GAAAA,KAAA,UAAQnlD,QAAS0nB,EAAKrlD,MAAM0rE,QAAQ9iE,SAAC,eAGxC,CAAG,MAAAqhE,GACF,OAAO6Y,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,kCACvB,CACD,EAACzE,CAAC,CAAD,OAAA5H,EAAAi9F,EAAA,CAnB2B,CAASlrH,EAAAA,WCUzBmrH,GAAe,SAAAr4D,GAAAz6B,EAAA8yF,EAAAr4D,GAAA,IAAAC,EAAA/5B,EAAAmyF,GAC3B,SAAAA,EAAY36I,GAAe,IAADqlD,EAIvB,OAJuB76D,EAAA,KAAAmwJ,IACzBt1F,EAAAk9B,EAAAnjG,KAAA,KAAM4gB,IAMP46I,YAAc,SAAC36J,GACdolE,EAAKnL,SAAS,CACb2gG,SAAU56J,GAEZ,EAAColE,EAEDy1F,eAAiB,WAChBz1F,EAAKnL,SAAS,CACb2gG,UAAU,IACR,WACFx1F,EAAKrlD,MAAM86I,eAAez1F,EAAKrlD,MAAMqmD,UAAWhB,EAAKrlD,MAAM8lE,WAAW,WACrEzgB,EAAKnL,SAAS,CACb2gG,UAAU,GAEZ,GACD,GACD,EAACx1F,EAEDj/C,OAAS,WACR,IACC,IAAI0uB,EAAS,KAWb,OAVIuwB,EAAKrlD,MAAM8lE,UAAU7V,OAAOY,iBAC/B/7B,GACCguD,EAAAA,GAAAA,KAACmE,GAAU,CACVnyD,OAAQuwB,EAAKrlD,MAAM8lE,UAAU7V,OAAOY,eAAe/7B,OACnD0yD,OAAQ7hB,GAAe4C,gBAAgBljB,EAAKrlD,MAAM8lE,UAAWzgB,EAAKrlD,MAAM8lE,UAAU7V,OAAOY,eAAe/7B,OAAOpe,IAC/GwvE,WAAYvgB,GAAe6C,oBAAoBnjB,EAAKrlD,MAAM8lE,UAAWzgB,EAAKrlD,MAAM8lE,UAAU7V,OAAOY,eAAe/7B,OAAOpe,QAMzHusE,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,mBAAkBlhD,SAAA,EAChCk6E,EAAAA,GAAAA,KAACwJ,GAAiB,CACjBn6F,KAAK,SACL2zE,UAAWzgB,EAAKrlD,MAAM8lE,UACtBzf,UAAWhB,EAAKrlD,MAAMqmD,UACtBunC,aAAcvoC,EAAKrlD,MAAMo6I,UACzB7tD,UAAWlnC,EAAKrlD,MAAMq6I,qBAGtBh1F,EAAKrlD,MAAMngB,QAAQkmE,UAClB+8B,EAAAA,GAAAA,KAACyB,GAAQ,CACRY,QACClC,EAAAA,GAAAA,MAACI,GAAI,CAACp/F,KAAMm/F,GAASE,IAAI16E,SAAA,CAAC,SAAOy8C,EAAKrlD,MAAM8lE,UAAUhmF,KAAK,cAE5D+C,SACCigG,EAAAA,GAAAA,KAAA,OAAAl6E,UACCq6E,EAAAA,GAAAA,MAAA,KAAAr6E,SAAA,CAAG,oDAAqDk6E,EAAAA,GAAAA,KAAA,KAAAl6E,SAAG,OAAM,4CAIlE,MAEJk6E,EAAAA,GAAAA,KAACoH,GAAe,CAACpkB,UAAWzgB,EAAKrlD,MAAM8lE,UAAWzf,UAAWhB,EAAKrlD,MAAMqmD,aACxEy8B,EAAAA,GAAAA,KAAA,UAAQr6E,SAAU48C,EAAKp9D,MAAM4yJ,SAAUl9G,QAAS0nB,EAAKy1F,eAAelyI,SAAEy8C,EAAKp9D,MAAM4yJ,SAAW,WAAa,OAExGx1F,EAAKrlD,MAAMngB,QAAQimE,WAClBg9B,EAAAA,GAAAA,KAAA,UAAQh5B,UAAU,YAAYrhD,SAAU48C,EAAKp9D,MAAM4yJ,SAAUl9G,QAAS,kBAAM0nB,EAAKrlD,MAAMs6I,iBAAiBj1F,EAAKrlD,MAAM8lE,UAAU,EAACl9D,SAAC,sBAC7H,MAEJk6E,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,uBAAsBlhD,SACnCksB,KAEFguD,EAAAA,GAAAA,KAAC+H,GAAgB,CAAC/kB,UAAWzgB,EAAKrlD,MAAM8lE,cAhCFzgB,EAAKrlD,MAAM8lE,UAAUpvD,GAmC9D,CAAG,MAAAuzD,GACF,OAAO6Y,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,iCACvB,CACD,EA3ECzE,EAAKp9D,MAAQ,CACZ4yJ,UAAU,GACTx1F,CACH,CAAC,OAAA5H,EAAAk9F,EAAA,CAN0B,CAASnrH,EAAAA,WCAxBurH,GAAa,SAAAz4D,GAAAz6B,EAAAkzF,EAAAz4D,GAAA,IAAAC,EAAA/5B,EAAAuyF,GAAA,SAAAA,IAAA,IAAA11F,EAAA76D,EAAA,KAAAuwJ,GAAA,QAAA58I,EAAAvd,UAAAE,OAAA4X,EAAA,IAAAvZ,MAAAgf,GAAAnB,EAAA,EAAAA,EAAAmB,EAAAnB,IAAAtE,EAAAsE,GAAApc,UAAAoc,GA2FvB,OA3FuBqoD,EAAAk9B,EAAAnjG,KAAA+J,MAAAo5F,EAAA,OAAA9lF,OAAA/D,KACzBg8I,QAAU,WACT,IAAMt3D,EAAOl+B,EAAYY,KAAKuF,EAAKrlD,MAAMglD,KAAKmB,QAC9Cd,EAAKrlD,MAAMg7I,mBAAmB31F,EAAKrlD,MAAMqmD,UAAW+2B,EAAM/3B,EAAKrlD,MAAMngB,QAAQimE,UAAY,KAAO3E,EAAc0B,QAC/G,EAACwC,EAEDj/C,OAAS,WACR,IACC,IAAM60I,EAAe51F,EAAKrlD,MAAMqmD,UAAUC,WACxCrG,QAAO,SAAAp8D,GAAC,OAAIA,EAAEuiE,UAAYwI,GAAc6c,IAAI,IAC5CxrB,QAAO,SAAAp8D,GAAC,OAAKA,EAAEosE,OAAOhoE,QAAU0mE,GAAeuB,UAAcrsE,EAAEosE,OAAOhoE,QAAU0mE,GAAema,KAAM,IAAEhoF,OACnGo6J,EAAoB71F,EAAKrlD,MAAMqmD,UAAUC,WAC7CrG,QAAO,SAAAp8D,GAAC,OAAIA,EAAEuiE,UAAYwI,GAAc6c,IAAI,IAC5CxrB,QAAO,SAAAp8D,GAAC,OAAIA,EAAEosE,OAAOhoE,QAAU0mE,GAAeod,WAAW,IAAEjrF,OACvDq6J,EAAa91F,EAAKrlD,MAAMqmD,UAAUC,WACtCrG,QAAO,SAAAp8D,GAAC,OAAIA,EAAEuiE,UAAYwI,GAAc6c,IAAI,IAC5CxrB,QAAO,SAAAp8D,GAAC,OAAIA,EAAEosE,OAAOhoE,QAAU0mE,GAAeuc,IAAI,IAAEpqF,OAChDs6J,EAAiB/1F,EAAKrlD,MAAMqmD,UAAUC,WAC1CrG,QAAO,SAAAp8D,GAAC,OAAIA,EAAEuiE,UAAYwI,GAAc8K,OAAO,IAC/CzZ,QAAO,SAAAp8D,GAAC,OAAKA,EAAEosE,OAAOhoE,QAAU0mE,GAAeuB,UAAcrsE,EAAEosE,OAAOhoE,QAAU0mE,GAAema,KAAM,IAAEhoF,OACnGu6J,EAAsBh2F,EAAKrlD,MAAMqmD,UAAUC,WAC/CrG,QAAO,SAAAp8D,GAAC,OAAIA,EAAEuiE,UAAYwI,GAAc8K,OAAO,IAC/CzZ,QAAO,SAAAp8D,GAAC,OAAIA,EAAEosE,OAAOhoE,QAAU0mE,GAAeod,WAAW,IAAEjrF,OACvDw6J,EAAej2F,EAAKrlD,MAAMqmD,UAAUC,WACxCrG,QAAO,SAAAp8D,GAAC,OAAIA,EAAEuiE,UAAYwI,GAAc8K,OAAO,IAC/CzZ,QAAO,SAAAp8D,GAAC,OAAIA,EAAEosE,OAAOhoE,QAAU0mE,GAAeuc,IAAI,IAAEpqF,OAEhDy6J,GACLt4D,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,kBAAiBlhD,SAAA,EAC/Bq6E,EAAAA,GAAAA,MAACO,GAAG,CAACC,MAAM,SAAQ76E,SAAA,EAClBk6E,EAAAA,GAAAA,KAAC6D,GAAS,CAACjxC,YAAY,WAAW+tC,MAAM,SAASxjG,MAAOg7J,KACxDn4D,EAAAA,GAAAA,KAAA,UACAA,EAAAA,GAAAA,KAAC6D,GAAS,CAACjxC,YAAY,WAAW+tC,MAAM,cAAcxjG,MAAOi7J,KAC7Dp4D,EAAAA,GAAAA,KAAA,UACAA,EAAAA,GAAAA,KAAC6D,GAAS,CAACjxC,YAAY,WAAW+tC,MAAM,OAAOxjG,MAAOk7J,QAEvDl4D,EAAAA,GAAAA,MAACO,GAAG,CAACC,MAAM,WAAU76E,SAAA,EACpBk6E,EAAAA,GAAAA,KAAC6D,GAAS,CAACjxC,YAAY,WAAW+tC,MAAM,SAASxjG,MAAOm7J,KACxDt4D,EAAAA,GAAAA,KAAA,UACAA,EAAAA,GAAAA,KAAC6D,GAAS,CAACjxC,YAAY,WAAW+tC,MAAM,cAAcxjG,MAAOo7J,KAC7Dv4D,EAAAA,GAAAA,KAAA,UACAA,EAAAA,GAAAA,KAAC6D,GAAS,CAACjxC,YAAY,WAAW+tC,MAAM,OAAOxjG,MAAOq7J,UAKrD3C,EAAU,KACd,GAAKtzF,EAAKrlD,MAAMqmD,UAAUglB,MAAQ,GAAOhmB,EAAKrlD,MAAMglD,KAAKmB,OAAOrlE,OAAS,EAAI,CAC5E,IAAMozG,EAAUvwC,EAAgBsB,oBAAoBI,EAAKrlD,MAAMglD,KAAM7D,EAAc0B,UAC9EqxC,EAAU,GAAM7uC,EAAKrlD,MAAMngB,QAAQimE,aACvC6yF,GACC71D,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,WAAUlhD,UACxBk6E,EAAAA,GAAAA,KAACwQ,GAAqB,CACrB7P,MAAM,aACNkQ,UAAWO,EACXpuC,UAAWT,EAAKrlD,MAAMngB,QAAQimE,UAC9B0tC,MAAOnuC,EAAKqvF,YAKjB,CAEA,OACCzxD,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,iBAAgBlhD,SAAA,EAC9Bq6E,EAAAA,GAAAA,MAACI,GAAI,CAACp/F,KAAMm/F,GAASwG,QAAQhhF,SAAA,CAAC,SAAOy8C,EAAKrlD,MAAMqmD,UAAUglB,MAAQ,KACjEkwE,EACA5C,GACD71D,EAAAA,GAAAA,KAAA,SAECz9B,EAAKrlD,MAAMngB,QAAQkmE,UAClB+8B,EAAAA,GAAAA,KAACyB,GAAQ,CACRY,QACCrC,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAASE,IAAI16E,SAAC,gEAE3B/lB,SACCogG,EAAAA,GAAAA,MAAA,OAAAr6E,SAAA,EACCk6E,EAAAA,GAAAA,KAAA,KAAAl6E,SAAG,oFACHq6E,EAAAA,GAAAA,MAAA,KAAAr6E,SAAA,CAAG,iDAAkDk6E,EAAAA,GAAAA,KAAA,KAAAl6E,SAAG,cAAa,uBAItE,MAEJk6E,EAAAA,GAAAA,KAAA,UAAQh5B,UAAU,UAAUnsB,QAAS0nB,EAAKrlD,MAAMorE,eAAexiE,SAAC,oBAC/Dy8C,EAAKrlD,MAAMngB,QAAQimE,WAAYg9B,EAAAA,GAAAA,KAAA,UAAQh5B,UAAU,YAAYnsB,QAAS0nB,EAAKrlD,MAAMw7I,uBAAuB5yI,SAAC,mBAA0B,OAGvI,CAAE,MAAAqhE,GACD,OAAO6Y,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,+BACvB,CACD,EAACzE,CAAC,CAAD,OAAA5H,EAAAs9F,EAAA,CA3FwB,CAASvrH,EAAAA,WCmEtBisH,GAAe,SAAAn5D,GAAAz6B,EAAA4zF,EAAAn5D,GAAA,IAAAC,EAAA/5B,EAAAizF,GAC3B,SAAAA,EAAYz7I,GAAe,IAADqlD,EAiBvB,OAjBuB76D,EAAA,KAAAixJ,IACzBp2F,EAAAk9B,EAAAnjG,KAAA,KAAM4gB,IAmBPkxB,kBAAoB,WACnBs5C,GAAeG,iBAAmB,SAACihE,GAClCvhF,GAAMO,QAAO,SAAAjmE,GAIZ,OAHAkC,YAAW,WACVwjE,GAAMW,QAAQrmE,EAAE+xB,GACjB,GAAG,MAEFosE,EAAAA,GAAAA,KAAA,OAAgBh5B,UAAU,wBAAwBnsB,QAAS,SAAAj5C,GAAOA,EAAE4J,kBAAmB+7D,GAAMW,QAAQrmE,EAAE+xB,IAAK2uC,EAAKq2F,iBAAiB/2J,EAAI,EAAEikB,SACtIgjI,EAASlhG,KAAI,SAAChpD,EAAKkD,GAAC,OAAKk+F,EAAAA,GAAAA,KAAA,OAAAl6E,SAAclnB,GAAJkD,EAAc,KADzCD,EAAE+xB,GAId,GACD,CACD,EAAC2uC,EAED1lB,qBAAuB,WACtB6qC,GAAeG,iBAAmB,IACnC,EAACtlB,EAEDs2F,QAASxgG,EAAAA,EAAAA,aAA8BkK,EAEvCiqC,kBAAoB,SAACxpB,GAAuC,IAAD81E,EACvC,QAAnBA,EAAAv2F,EAAKs2F,OAAOlrI,eAAO,IAAAmrI,GAAnBA,EAAqBtsD,kBAAkBxpB,EACxC,EAACzgB,EAEDw2F,aAAe,SAACnoD,GACf,IAAMp7F,EAAO+Z,KAAK4rC,IAAIoH,EAAKp9D,MAAM6zJ,cAAgBpoD,EAAO,GACxDruC,EAAKnL,SAAS,CACb4hG,cAAexjJ,GAEjB,EAAC+sD,EAED02F,gBAAkB,WACjB12F,EAAKnL,SAAS,CACb8hG,eAAgB32F,EAAKp9D,MAAM+zJ,eAE7B,EAAC32F,EAED42F,kBAAoB,WACnB52F,EAAKnL,SAAS,CACbgiG,iBAAkB72F,EAAKp9D,MAAMi0J,iBAE/B,EAAC72F,EAED82F,gBAAkB,SAACr2E,GAClB,IAAM4G,EAAYrnB,EAAKp9D,MAAMm0J,wBAC7B,GAAI1vE,EAAW,CACd,IAAI2vE,GAAmB,EACnB3oJ,EAAQs3C,OAAOoV,UACnB,GACM,YADEssB,EAAUh2D,GACjB,CACC,IAAM67D,EAAc7F,EACpB,GAAI6F,EAAYC,QACf,OAAQD,EAAYC,QAAQvuF,MAC3B,KAAKkrE,GAAiBoL,WACtB,KAAKpL,GAAiBkJ,QACtB,KAAKlJ,GAAiB6N,OACrBq/E,GAAmB,EACnB3oJ,EAAQ6+E,EAAYC,QAAQ9+E,MAIhC,CAGD,GAAI2oJ,EAAkB,CACrB,IAAIC,EAAMj3F,EAAKp9D,MAAMwnG,qBACjB6sD,EAAI1gJ,SAASkqE,EAAUpvD,IAC1B4lI,EAAMA,EAAIr8F,QAAO,SAAAvpC,GAAE,OAAIA,IAAOovD,EAAUpvD,EAAE,IACtB,IAAVhjB,EACV4oJ,EAAM,CAAEx2E,EAAUpvD,IACR4lI,EAAIx7J,OAAS4S,GACvB4oJ,EAAIh5J,KAAKwiF,EAAUpvD,IAGpBg2D,EAAUzsF,MAAQq8J,EAElBj3F,EAAKnL,SAAS,CACbkiG,wBAAyB1vE,EACzB+iB,qBAAsB6sD,EACtBvsD,gBAAiB,GACjBH,gBAAiB,KACf,WACFvqC,EAAKrlD,MAAMk5I,wBAAwBxsE,EAAW4vE,EAC/C,GACD,CACD,MACCj3F,EAAKnL,SAAS,CACbkiG,wBAAyB1vE,EACzB+iB,qBAAsB,CAAE3pB,EAAUpvD,IAClCq5E,gBAAiB,GACjBH,gBAAiB,IAGpB,EAACvqC,EAEDk3F,WAAa,SAACh2F,GACblB,EAAKnL,SAAS,CACbu1C,qBAAsB,GACtBM,gBAAiB,CAAExpC,EAAK7vC,IACxBk5E,gBAAiB,IAEnB,EAACvqC,EAEDm3F,aAAe,SAAC33F,GACf,IAAM6nB,EAAYrnB,EAAKp9D,MAAMm0J,wBAC7B,GAAI1vE,EAAW,CACd,IAAI+vE,GAAc,EACd/oJ,EAAQs3C,OAAOoV,UACnB,OAAQssB,EAAUh2D,IACjB,IAAK,SACJ+lI,GAAc,EACd/oJ,EAAQ,EACR,MACD,IAAK,UACJ,IAAM6+E,EAAc7F,EACpB,GAAI6F,EAAYC,QACf,OAAQD,EAAYC,QAAQvuF,MAC3B,KAAKkrE,GAAiBwjB,QACtB,KAAKxjB,GAAiB0jB,MACrB4pE,GAAc,EACd/oJ,EAAQ6+E,EAAYC,QAAQ9+E,OAOjC,GAAI+oJ,EAAa,CAChB,IAAIh+E,EAAUpZ,EAAKp9D,MAAM2nG,gBAWzB,GAVInxB,EAAQ7Z,MAAK,SAAA9/D,GAAC,OAAKA,EAAE2W,IAAMopD,EAAOppD,GAAO3W,EAAE4W,IAAMmpD,EAAOnpD,CAAE,IAC7D+iE,EAAUA,EAAQxe,QAAO,SAAA0E,GAAE,QAAOA,EAAGlpD,IAAMopD,EAAOppD,GAAOkpD,EAAGjpD,IAAMmpD,EAAOnpD,EAAG,IACxD,IAAVhI,EACV+qE,EAAU,CAAE5Z,GACF4Z,EAAQ39E,OAAS4S,GAC3B+qE,EAAQn7E,KAAKuhE,GAGd6nB,EAAUzsF,MAAQw+E,EAEG,WAAjBiO,EAAUh2D,GAAiB,CAC9B,IAAMovD,EAAYzgB,EAAKrlD,MAAMqmD,UAAUC,WAAW1B,MAAK,SAAA/gE,GAAC,OAAIA,EAAEosE,OAAOx/C,OAAO,IACtEqkB,EAASgxC,EAAU7V,OAAOY,eAAiBiV,EAAU7V,OAAOY,eAAe/7B,OAAS,KAC1F,GAAIA,EAAQ,CACX,IAAMy9C,EAAcz9C,EAAOkjC,WAAWpT,MAAK,SAAAhjD,GAAC,MAAa,YAATA,EAAE8U,EAAgB,IAClEi2D,GAAYG,qBAAqByF,EAAaltB,EAAKrlD,MAAMqmD,UAAWyf,EAAWhxC,GAAQ,EACxF,CACD,CAEAuwB,EAAKnL,SAAS,CACbkiG,wBAAyB1vE,EACzB+iB,qBAAsB,GACtBM,gBAAiB,GACjBH,gBAAiBnxB,IACf,WACFpZ,EAAKrlD,MAAMk5I,wBAAwBxsE,EAAWjO,EAC/C,GACD,CACD,MACCpZ,EAAKnL,SAAS,CACbkiG,wBAAyB1vE,EACzB+iB,qBAAsB,GACtBM,gBAAiB,GACjBH,gBAAiB,CAAE/qC,IAGtB,EAACQ,EAEDq3F,eAAiB,WACZr3F,EAAKp9D,MAAMm0J,wBACd/2F,EAAKnL,SAAS,CACbkiG,wBAAyB,KACzBjsD,uBAAwB,GACxBL,kBAAmB,GACnBH,kBAAmB,KAGpBtqC,EAAKnL,SAAS,CACbu1C,qBAAsB,GACtBM,gBAAiB,GACjBH,gBAAiB,IAGpB,EAACvqC,EAEDs3F,wBAA0B,SAAC10J,GAC1Bo9D,EAAKnL,SAAS,CACb0iG,qBAAsB30J,GAExB,EAACo9D,EAEDw3F,qBAAuB,SAAC/2E,GACvBzgB,EAAKnL,SAAS,CACb4iG,iBAAkBh3E,EAClBi3E,YAAa,KACbC,aAAc,MAEhB,EAAC33F,EAED43F,gBAAkB,SAAC12F,GAClBlB,EAAKnL,SAAS,CACb4iG,iBAAkB,KAClBC,YAAax2F,EACby2F,aAAc,MAEhB,EAAC33F,EAEDq2F,iBAAmB,SAACrxF,GACnBhF,EAAKnL,SAAS,CACb4iG,iBAAkB,KAClBC,YAAa,KACbC,aAAc3yF,GAEhB,EAAChF,EAED63F,aAAe,WACd73F,EAAKnL,SAAS,CACb4iG,iBAAkB,KAClBC,YAAa,KACbC,aAAc,MAEhB,EAAC33F,EAEDuoB,KAAO,SAACvnB,EAA2Byf,EAA2BxE,EAAamM,GAC1EpoB,EAAKnL,SAAS,CACbkiG,wBAAyB,KACzBxsD,gBAAiB,KACf,WACFvqC,EAAKrlD,MAAM4tE,KAAKvnB,EAAWyf,EAAWxE,EAAKmM,EAC5C,GACD,EAACpoB,EAEDknB,aAAe,SAAClmB,EAA2Byf,EAA2BhxC,GACrEuwB,EAAKnL,SAAS,CACbu1C,qBAAsB,GACtBM,gBAAiB,GACjBH,gBAAiB,KACf,WACFvqC,EAAKrlD,MAAMusE,aAAalmB,EAAWyf,EAAWhxC,EAC/C,GACD,EAACuwB,EAEDg0F,mBAAqB,SAAC3sE,GAAqC,IAAD80D,EAAAj0E,EAAAD,EAAAE,EACzD,GAA2C,OAAvCnI,EAAKp9D,MAAMm0J,wBACd/2F,EAAKnL,SAAS,CACbkiG,wBAAyB,KACzBjsD,uBAAwB,GACxBL,kBAAmB,GACnBH,kBAAmB,SAEd,CACN,IAAIQ,EAAmC,GACnCR,EAAgD,GAChDF,EAAiC,GACjCG,EAA8C,GAElD,OAAQljB,EAAUh2D,IACjB,IAAK,SAAW,IAAD40C,EAAA2B,EACR8qB,EAAcrL,EACpBijB,EAA0C,QAAzBrkC,EAAGysB,EAAYrZ,kBAAU,IAAApT,EAAAA,EAAkC,GAC5EskC,EAAmC,QAApB3iC,EAAG8qB,EAAY93F,aAAK,IAAAgtE,EAAAA,EAAkC,GACrE,MAED,IAAK,UACJ,IAAMslB,EAAc7F,EACpB,GAA4B,OAAxB6F,EAAYC,QACf,OAAQD,EAAYC,QAAQvuF,MAC3B,KAAKkrE,GAAiBoL,WACtB,KAAKpL,GAAiBkJ,QACtB,KAAKlJ,GAAiB6N,OACrBmzB,EAAyB5d,EAAY7T,WACrC+wB,EAAuBld,EAAYtyF,MACnC,MACD,KAAKkvE,GAAiBwjB,QACrBgd,EAA0C,QAAzB6xC,EAAGjvD,EAAY7T,kBAAU,IAAA8iE,EAAAA,EAAkC,GAC5E5xC,EAAmC,QAApBriC,EAAGglB,EAAYtyF,aAAK,IAAAstE,EAAAA,EAAkC,GACrE,MACD,KAAK4B,GAAiB0jB,MACrB8c,EAA0C,QAAzBriC,EAAGilB,EAAY7T,kBAAU,IAAApR,EAAAA,EAAkC,GAC5EsiC,EAAmC,QAApBpiC,EAAG+kB,EAAYtyF,aAAK,IAAAutE,EAAAA,EAAkC,IAQ1EnI,EAAKnL,SAAS,CACbkiG,wBAAyB1vE,EACzByjB,uBAAwBA,EACxBL,kBAAmB,GACnBH,kBAAmBA,EACnBF,qBAAsBA,EACtBM,gBAAiB,GACjBH,gBAAiBA,GAEnB,CACD,EAACvqC,EAED0nB,UAAY,SAAC1mB,EAA2Byf,GACvCzgB,EAAKnL,SAAS,CACbkiG,wBAAyB,KACzBjsD,uBAAwB,GACxBL,kBAAmB,GACnBH,kBAAmB,GACnBC,gBAAiB,KACf,WACFvqC,EAAKrlD,MAAM+sE,UAAU1mB,EAAWyf,EACjC,GACD,EAACzgB,EAEDqmB,QAAU,WACTrmB,EAAKnL,SAAS,CACbkiG,wBAAyB,KACzBzsD,kBAAmB,GACnBC,gBAAiB,KACf,WACFvqC,EAAKrlD,MAAM0rE,QAAQrmB,EAAKrlD,MAAMqmD,UAC/B,GACD,EAAChB,EAED83F,gBAAkB,WACjB,OAAI93F,EAAKp9D,MAAM+zJ,eAEbl5D,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,wBAAuBlhD,UACrCk6E,EAAAA,GAAAA,KAAC4N,GAAmB,CACnBrqC,UAAWhB,EAAKrlD,MAAMqmD,UACtB+2F,YAAa/3F,EAAKp9D,MAAMwnG,qBACxBhJ,SAAUphC,EAAK82F,oBAMZ,IACR,EAAC92F,EAEDg4F,eAAiB,WAChB,IAAIp1J,EAAQo9D,EAAKp9D,MAAM20J,qBAKvB,GAJI30J,IAAU4mE,GAAeygB,SAC5BrnF,EAAQuiF,GAAeyE,kBAAkB5pB,EAAKrlD,MAAMqmD,YAGjDp+D,IAAU4mE,GAAeygB,OAC5B,OACCwT,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,wBAIjB,GAA+C,IAA3CzE,EAAKp9D,MAAMwnG,qBAAqB3uG,OAAc,CACjD,IAAMglF,EAAY0E,GAAe+E,aAAalqB,EAAKrlD,MAAMqmD,UAAWhB,EAAKp9D,MAAMwnG,qBAAqB,IACpG,GAAI3pB,EACH,OACCgd,EAAAA,GAAAA,KAACwJ,GAAiB,CACjBn6F,KAAK,WACL2zE,UAAWA,EACXzf,UAAWhB,EAAKrlD,MAAMqmD,UACtBunC,aAAc,kBAAMvoC,EAAKiqC,kBAAkB,WAAW,EACtD/C,UAAWlnC,EAAKw3F,qBAChBrwD,SAAUnnC,EAAKq3F,gBAInB,CAEA,GAA0C,IAAtCr3F,EAAKp9D,MAAM8nG,gBAAgBjvG,OAAc,CAC5C,IAAMylE,EAAOikB,GAAeiF,QAAQpqB,EAAKrlD,MAAMqmD,UAAWhB,EAAKp9D,MAAM8nG,gBAAgB,IACrF,GAAIxpC,EACH,OACCu8B,EAAAA,GAAAA,KAAC2O,GAAgB,CAAClrC,KAAMA,EAAMgmC,UAAWlnC,EAAK43F,gBAAiBzwD,SAAUnnC,EAAKq3F,gBAGjF,CAEA,OACCz5D,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,sBAAqBlhD,SAAA,EACnCq6E,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,eAAclhD,SAAA,EAC5Bk6E,EAAAA,GAAAA,KAAA,UAAQh5B,UAAU,WAAWiN,MAAM,eAAep5B,QAAS,kBAAM0nB,EAAK02F,iBAAiB,EAACnzI,SACtFy8C,EAAKp9D,MAAM+zJ,eAAgBl5D,EAAAA,GAAAA,KAAC80D,GAA6B,KAAM90D,EAAAA,GAAAA,KAAC+0D,GAA2B,OAE7F/0D,EAAAA,GAAAA,KAAA,UAAQh5B,UAAU,WAAWiN,MAAM,eAAep5B,QAAS,kBAAM0nB,EAAK42F,mBAAmB,EAACrzI,SACxFy8C,EAAKp9D,MAAMi0J,iBAAkBp5D,EAAAA,GAAAA,KAACg1D,GAA2B,KAAMh1D,EAAAA,GAAAA,KAACi1D,GAAyB,UAG5F90D,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,eAAclhD,SAAA,EAC5Bk6E,EAAAA,GAAAA,KAAA,UAAQh5B,UAAU,WAAWiN,MAAM,cAAcp5B,QAAS,kBAAM0nB,EAAKrlD,MAAMs9I,UAAUj4F,EAAKrlD,MAAMqmD,UAAW,IAAI,EAACz9C,UAC/Gk6E,EAAAA,GAAAA,KAACk1D,GAAW,OAEbl1D,EAAAA,GAAAA,KAAA,UAAQh5B,UAAU,WAAWiN,MAAM,eAAep5B,QAAS,kBAAM0nB,EAAKrlD,MAAMs9I,UAAUj4F,EAAKrlD,MAAMqmD,UAAW,IAAI,EAACz9C,UAChHk6E,EAAAA,GAAAA,KAACm1D,GAAoB,UAGvBh1D,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,eAAclhD,SAAA,EAC5Bk6E,EAAAA,GAAAA,KAAA,UAAQr6E,SAAU48C,EAAKp9D,MAAM6zJ,eAAiB,EAAGhyF,UAAU,WAAWiN,MAAM,WAAWp5B,QAAS,kBAAM0nB,EAAKw2F,cAAc,EAAE,EAACjzI,UAC3Hk6E,EAAAA,GAAAA,KAACo1D,GAAW,OAEbp1D,EAAAA,GAAAA,KAAA,UAAQr6E,SAAU48C,EAAKp9D,MAAM6zJ,eAAiB,GAAIhyF,UAAU,WAAWiN,MAAM,UAAUp5B,QAAS,kBAAM0nB,EAAKw2F,aAAa,EAAG,EAACjzI,UAC3Hk6E,EAAAA,GAAAA,KAACq1D,GAAU,UAGbl1D,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,eAAclhD,SAAA,EAC5Bk6E,EAAAA,GAAAA,KAAA,UAAQh5B,UAAU,WAAWiN,MAAM,UAAUp5B,QAAS,kBAAM0nB,EAAKs3F,wBAAwB9tF,GAAe8qF,QAAQ,EAAC/wI,UAChHk6E,EAAAA,GAAAA,KAACs1D,GAAqB,MAGtB/yF,EAAKrlD,MAAMngB,QAAQimE,WAClBg9B,EAAAA,GAAAA,KAAA,UAAQh5B,UAAU,qBAAqBiN,MAAM,MAAMp5B,QAAS,kBAAM0nB,EAAKs3F,wBAAwB9tF,GAAesgB,QAAQ,EAACvmE,UACtHk6E,EAAAA,GAAAA,KAACu1D,GAAY,MAEZ,SAGLv1D,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,eAAclhD,UAC5Bk6E,EAAAA,GAAAA,KAAA,UAAQh5B,UAAU,WAAWiN,MAAM,OAAOp5B,QAAS,kBAAM0nB,EAAKrlD,MAAM03I,SAAS,aAAa,EAAC9uI,SACzFy8C,EAAKrlD,MAAMngB,QAAQimE,WAAaT,EAAKrlD,MAAM23I,eAAgB70D,EAAAA,GAAAA,KAAC/B,GAAoB,KAAM+B,EAAAA,GAAAA,KAAC9B,GAAc,UAK3G,EAAC37B,EAEDk4F,kBAAoB,WACnB,IAAIt1J,EAAQo9D,EAAKp9D,MAAM20J,qBAKvB,GAJI30J,IAAU4mE,GAAeygB,SAC5BrnF,EAAQuiF,GAAeyE,kBAAkB5pB,EAAKrlD,MAAMqmD,YAGjDp+D,IAAU4mE,GAAeygB,OAC5B,OAAO,KAGR,IAAM+gB,EAAmB7lB,GAAeqB,oBAAoBxmB,EAAKrlD,MAAMqmD,WAAWzB,MAAK,SAAA/gE,GAAC,OAAIA,EAAEosE,OAAOx/C,OAAO,KAAK,KACjH,OAAI4/E,GAAqBA,EAAiBjqC,UAAYwI,GAAc6c,OAAU4kB,EAAiBpgC,OAAOE,SAEpG2yB,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,yBAAwBlhD,UACtCk6E,EAAAA,GAAAA,KAAC01D,GAAc,CACd1yE,UAAWuqB,EACXhqC,UAAWhB,EAAKrlD,MAAMqmD,UACtBrB,KAAMK,EAAKrlD,MAAMglD,KACjBc,UAAWT,EAAKrlD,MAAMngB,QAAQimE,UAC9BszF,uBAAwB/zF,EAAKp9D,MAAMm0J,wBACnC7C,WAAYl0F,EAAKp9D,MAAMi0J,gBACvBhwE,YAAa7mB,EAAKrlD,MAAMksE,YACxBK,aAAclnB,EAAKknB,aACnBC,eAAgBnnB,EAAKrlD,MAAMwsE,eAC3B6sE,mBAAoBh0F,EAAKg0F,mBACzBH,wBAAyB7zF,EAAKg0F,mBAC9BtsE,UAAW1nB,EAAK0nB,cAMb,IACR,EAAC1nB,EAEDm4F,iBAAmB,WAClB,IAAIv1J,EAAQo9D,EAAKp9D,MAAM20J,qBAIvB,GAHI30J,IAAU4mE,GAAeygB,SAC5BrnF,EAAQuiF,GAAeyE,kBAAkB5pB,EAAKrlD,MAAMqmD,YAEjDp+D,IAAU4mE,GAAeygB,OAC5B,OACCwT,EAAAA,GAAAA,KAAC02D,GAAiB,CACjBnzF,UAAWhB,EAAKrlD,MAAMqmD,UACtBrB,KAAMK,EAAKrlD,MAAMglD,KACjBnlE,QAASwlE,EAAKrlD,MAAMngB,QACpBoI,MAAOA,EACPyxJ,kBAAmBr0F,EAAKs3F,wBACxBlD,gBAAiBp0F,EAAKrlD,MAAMy5I,kBAK/B,IAAMppD,EAAmB7lB,GAAeqB,oBAAoBxmB,EAAKrlD,MAAMqmD,WAAWzB,MAAK,SAAA/gE,GAAC,OAAIA,EAAEosE,OAAOx/C,OAAO,KAAK,KACjH,GAAyB,OAArB4/E,EAA2B,CAC9B,IAAMotD,EAAcptD,EAAiBpgC,OAAOhoE,QAAU0mE,GAAeod,YAC/D2xE,EAAOrtD,EAAiBpgC,OAAOhoE,QAAU0mE,GAAeuc,KACxD/a,EAAUkgC,EAAiBpgC,OAAOE,QACxC,OAAIstF,GAAeC,GAAQvtF,GAEzB2yB,EAAAA,GAAAA,KAAC43D,GAAgB,CAChB50E,UAAWuqB,EACXhqC,UAAWhB,EAAKrlD,MAAMqmD,UACtBxmE,QAASwlE,EAAKrlD,MAAMngB,QACpBu6J,UAAW,kBAAM/0F,EAAKiqC,kBAAkB,UAAU,EAClD+qD,mBAAoBh1F,EAAKw3F,qBACzBnxE,QAASrmB,EAAKqmB,UAKb2kB,EAAiBjqC,UAAYwI,GAAc8K,SAE7CopB,EAAAA,GAAAA,KAAC63D,GAAe,CACf70E,UAAWuqB,EACXhqC,UAAWhB,EAAKrlD,MAAMqmD,UACtBxmE,QAASwlE,EAAKrlD,MAAMngB,QACpBu6J,UAAW,kBAAM/0F,EAAKiqC,kBAAkB,UAAU,EAClD+qD,mBAAoBh1F,EAAKw3F,qBACzBvC,iBAAkBj1F,EAAKrlD,MAAMs6I,iBAC7BQ,eAAgBz1F,EAAKrlD,MAAM86I,kBAM7Bh4D,EAAAA,GAAAA,KAAC23D,GAAY,CACZ30E,UAAWuqB,EACXhqC,UAAWhB,EAAKrlD,MAAMqmD,UACtBxmE,QAASwlE,EAAKrlD,MAAMngB,QACpBu6J,UAAW,kBAAM/0F,EAAKiqC,kBAAkB,UAAU,EAClD+qD,mBAAoBh1F,EAAKw3F,qBACzBjvE,KAAMvoB,EAAKuoB,KACXrS,YAAalW,EAAKrlD,MAAMu7D,YACxB+S,QAASjpB,EAAKrlD,MAAMsuE,QACpB34B,KAAM0P,EAAKrlD,MAAM21C,KACjB84B,KAAMppB,EAAKrlD,MAAMyuE,KACjB6rE,iBAAkBj1F,EAAKrlD,MAAMs6I,iBAC7BzsE,YAAaxoB,EAAKrlD,MAAM6tE,YACxBnC,QAASrmB,EAAKqmB,SAGjB,CAEA,OACCoX,EAAAA,GAAAA,KAACi4D,GAAa,CACb10F,UAAWhB,EAAKrlD,MAAMqmD,UACtBrB,KAAMK,EAAKrlD,MAAMglD,KACjBnlE,QAASwlE,EAAKrlD,MAAMngB,QACpBurF,eAAgB/lB,EAAKrlD,MAAMorE,eAC3BowE,uBAAwBn2F,EAAKrlD,MAAMw7I,uBACnCR,mBAAoB31F,EAAKrlD,MAAMg7I,oBAGlC,EAAC31F,EAEDj/C,OAAS,WACR,IACC,IAAImjF,EAAS,KAuBb,GAtBIlkC,EAAKp9D,MAAM60J,mBACdvzD,GACCzG,EAAAA,GAAAA,KAACmB,GAAM,CACNphG,SACCigG,EAAAA,GAAAA,KAACyU,GAAmB,CACnBzxB,UAAWzgB,EAAKp9D,MAAM60J,iBACtB93F,KAAMK,EAAKrlD,MAAMglD,KACjBc,UAAWT,EAAKrlD,MAAMngB,QAAQimE,UAC9B6oB,UAAWtpB,EAAKrlD,MAAM2uE,UACtBC,YAAavpB,EAAKrlD,MAAM4uE,YACxBC,WAAYxpB,EAAKrlD,MAAM6uE,WACvBE,SAAU1pB,EAAKrlD,MAAM+uE,SACrB8mB,QAAS,kBAAM,IAAI,EACnB0+C,WAAY,kBAAM,IAAI,EACtB78C,MAAO,kBAAM,IAAI,EACjBxyC,UAAWG,EAAKrlD,MAAMklD,YAGxBi/B,QAAS,kBAAM9+B,EAAK63F,cAAc,KAIjC73F,EAAKp9D,MAAM80J,YAAa,CAC3B,IAAMp5D,EAAQt+B,EAAKp9D,MAAM80J,YAAYhtF,MAAMrlB,KAAI,SAAA7pD,GAAC,OAAIiiG,EAAAA,GAAAA,KAACiP,GAAQ,CAAYh5F,KAAMlY,GAAZA,EAAE61B,GAAe,IAChF2uC,EAAKp9D,MAAM80J,YAAYt2F,MAAQ,GAClCk9B,EAAMrgG,MACLw/F,EAAAA,GAAAA,KAAC4C,GAAW,CACXzhG,KAAMyhF,GAAS2C,KACf8d,OACCrD,EAAAA,GAAAA,KAAC6O,GAAe,CACf9uG,SACCigG,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,iBAAgBlhD,UAC9Bk6E,EAAAA,GAAAA,KAACT,GAAS,CACTp+F,KAAMk+F,GAASnF,MACf/8F,MAAOolE,EAAKp9D,MAAM80J,YAAYt2F,MAC9BnuD,KAAM8pF,GAASM,YAMpBsD,WAAW,WAIduD,GACCzG,EAAAA,GAAAA,KAACmB,GAAM,CACNphG,SACCogG,EAAAA,GAAAA,MAAA,OAAAr6E,SAAA,EACCk6E,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAASwG,QAAQhhF,SAAC,cAC9Bk6E,EAAAA,GAAAA,KAAA,UACAA,EAAAA,GAAAA,KAACY,GAAQ,CAACC,MAAOA,OAGnBQ,QAAS,kBAAM9+B,EAAK63F,cAAc,GAGrC,CACA,GAAI73F,EAAKp9D,MAAM+0J,aAAc,CAC5B,IAEM/6J,GAAmBk/E,EAFd9b,EAAKp9D,MAAM+0J,aAAapkH,SAEPysB,EAAKp9D,MAAM+0J,cAAsBh9I,MAAM4I,SAAS8hC,KAAI,SAAC9lD,GAAM,OAAKA,EAAEob,MAAM4I,QAAQ,IAC5G2gF,GACCzG,EAAAA,GAAAA,KAACmB,GAAM,CACNphG,SACCigG,EAAAA,GAAAA,KAAA,OAAAl6E,SACE3mB,EAAMyoD,KAAI,SAACvlD,EAAGP,GAAC,OAAKk+F,EAAAA,GAAAA,KAACO,GAAI,CAAAz6E,SAAUzjB,GAAJP,EAAa,MAG/Cu/F,QAAS,kBAAM9+B,EAAK63F,cAAc,GAGrC,CAEA,OACCj6D,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,mBAAkBlhD,SAAA,CAC/By8C,EAAK83F,mBACNl6D,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,2BAA0BlhD,SAAA,CACvCy8C,EAAKg4F,kBACNv6D,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,yBAAwBlhD,UACtCk6E,EAAAA,GAAAA,KAACqM,GAAiB,CACjB/9D,IAAKi0B,EAAKs2F,OACVt1F,UAAWhB,EAAKrlD,MAAMqmD,UACtBylC,WAAYzmC,EAAKp9D,MAAM6zJ,cACvB3rD,uBAAwB9qC,EAAKp9D,MAAMkoG,uBACnCL,kBAAmBzqC,EAAKp9D,MAAM6nG,kBAC9BH,kBAAmBtqC,EAAKp9D,MAAM0nG,kBAC9BF,qBAAsBpqC,EAAKp9D,MAAMwnG,qBACjCM,gBAAiB1qC,EAAKp9D,MAAM8nG,gBAC5BH,gBAAiBvqC,EAAKp9D,MAAM2nG,gBAC5BQ,iBAAkB/qC,EAAK82F,gBACvBnsD,YAAa3qC,EAAKk3F,WAClB1sD,cAAexqC,EAAKm3F,aACpB/rD,WAAYprC,EAAKq3F,mBAGlBr3F,EAAKk4F,wBAEPz6D,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,yBAAwBlhD,SACrCy8C,EAAKm4F,qBAENj0D,IAGJ,CAAE,MAAAtf,GACD,OAAO6Y,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,iCACvB,CACD,EAzpBCzE,EAAKp9D,MAAQ,CACZ6zJ,cAAe,GACfE,eAAe,EACfE,iBAAiB,EACjBE,wBAAyB,KACzBjsD,uBAAwB,GACxBL,kBAAmB,GACnBH,kBAAmB,GACnBF,qBAAsB,GACtBM,gBAAiB,GACjBH,gBAAiB,GACjBgtD,qBAAsB/tF,GAAeygB,OACrCwtE,iBAAkB,KAClBC,YAAa,KACbC,aAAc,MACb33F,CACH,CAAC,OAAA5H,EAAAg+F,EAAA,CAnB0B,CAASjsH,EAAAA,WCtExBmuH,GAAa,SAAAr7D,GAAAz6B,EAAA81F,EAAAr7D,GAAA,IAAAC,EAAA/5B,EAAAm1F,GAAA,SAAAA,IAAA,IAAAt4F,EAAA76D,EAAA,KAAAmzJ,GAAA,QAAAx/I,EAAAvd,UAAAE,OAAA4X,EAAA,IAAAvZ,MAAAgf,GAAAnB,EAAA,EAAAA,EAAAmB,EAAAnB,IAAAtE,EAAAsE,GAAApc,UAAAoc,GAsFvB,OAtFuBqoD,EAAAk9B,EAAAnjG,KAAA+J,MAAAo5F,EAAA,OAAA9lF,OAAA/D,KACzB0N,OAAS,WACR,IACC,IAAIw3I,EAAU,KAEbA,EADGv4F,EAAKrlD,MAAMglD,MAEb89B,EAAAA,GAAAA,KAAC4C,GAAW,CACXzhG,KAAMyhF,GAASwC,KACfziE,OAAO,EACP0gF,OACCrD,EAAAA,GAAAA,KAAC6O,GAAe,CACfpyE,KAAK,WACLqyE,QAAQ,wCACR/uG,SAASigG,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,OAAOq2C,IAAI,OAAO3/G,IAAKg3J,OAGjD75G,QAAS0nB,EAAKrlD,MAAM69I,oBAKrB/6D,EAAAA,GAAAA,KAAC4C,GAAW,CACXzhG,KAAMyhF,GAASwC,KACfziE,OAAO,EACP0gF,OACCrD,EAAAA,GAAAA,KAAC6O,GAAe,CACfpyE,KAAK,QACLqyE,QAAQ,sCACR/uG,SAASigG,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,OAAOq2C,IAAI,OAAO3/G,IAAKg3J,OAGjD75G,QAAS0nB,EAAKrlD,MAAM89I,gBAKvB,IAAIC,EAAW,KACTxG,EAAiBt2D,GAAUj6B,WAAW/G,QAAO,SAAA3pD,GAAC,OAAK+uD,EAAKrlD,MAAMngB,QAAQomE,QAAQrqD,SAAStF,EAAEogB,GAAG,IAAE51B,OAUpG,OATIy2J,EAAiB,IACpBwG,GACC96D,EAAAA,GAAAA,MAAA,UAAQn5B,UAAU,YAAYnsB,QAAS,kBAAM0nB,EAAKrlD,MAAMy3I,WAAW,EAAC7uI,SAAA,IAAAnM,OAC/D86I,EAAc,cAAA96I,OAAgC,IAAnB86I,EAAuB,GAAK,IAAG,eAC9Dz0D,EAAAA,GAAAA,KAAChC,GAAS,SAMZmC,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,iBAAgBlhD,SAAA,EAC9Bk6E,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,kBAAiBlhD,UAC/Bk6E,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,uBAAsBlhD,SAAC,gBAEvCq6E,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,kBAAiBlhD,SAAA,EAC/Bq6E,EAAAA,GAAAA,MAACI,GAAI,CAAAz6E,SAAA,EACJk6E,EAAAA,GAAAA,KAAA,KAAAl6E,SAAG,qKAIHk6E,EAAAA,GAAAA,KAAA,KAAAl6E,SAAG,sHAGHk6E,EAAAA,GAAAA,KAAA,KAAAl6E,SAAG,2IAGHk6E,EAAAA,GAAAA,KAAA,KAAAl6E,SAAG,mLAIHk6E,EAAAA,GAAAA,KAAA,KAAAl6E,SAAG,mBAIJq6E,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,iBAAgBlhD,SAAA,CAC7Bg1I,EACAG,SAGH96D,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,iBAAgBlhD,SAAA,EAC9Bq6E,EAAAA,GAAAA,MAAC+D,GAAG,CAAAp+E,SAAA,CAAC,WAASqwF,OACdnW,EAAAA,GAAAA,KAACkE,GAAG,CAAAp+E,SAAC,8BAIT,CAAE,MAAAqhE,GACD,OAAO6Y,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,+BACvB,CACD,EAACzE,CAAC,CAAD,OAAA5H,EAAAkgG,EAAA,CAtFwB,CAASnuH,EAAAA,WCqBtBwuH,GAAW,SAAA17D,GAAAz6B,EAAAm2F,EAAA17D,GAAA,IAAAC,EAAA/5B,EAAAw1F,GACvB,SAAAA,EAAYh+I,GAAe,IAADqlD,EAIvB,OAJuB76D,EAAA,KAAAwzJ,IACzB34F,EAAAk9B,EAAAnjG,KAAA,KAAM4gB,IAMPi+I,WAAa,WACZ54F,EAAKnL,SAAS,CACbkjC,KAAM5tB,GAAQC,gBAAgBb,GAAc6c,OAE9C,EAACpmB,EAED64F,aAAe,WAOd,IANA,IAAIC,EAAcnpF,GAAUknB,mBAAmB72B,EAAKrlD,MAAMngB,QAAQomE,SAASvb,KAAI,SAAA5lD,GAAC,OAAIA,EAAE4xB,EAAE,IACpF0nI,EAAWppF,GAAU+b,YAAY1rB,EAAKrlD,MAAMngB,QAAQomE,SAASvb,KAAI,SAAA7lD,GAAC,OAAIA,EAAE6xB,EAAE,IAC1E2nI,EAAiBrpF,GAAUgc,kBAAkB3rB,EAAKrlD,MAAMngB,QAAQomE,SAASvb,KAAI,SAAA7oC,GAAC,OAAIA,EAAE6U,EAAE,IAEpFyvC,EAA2B,GAC3Bm4F,EAAS,EAAIj5F,EAAKrlD,MAAMglD,KAAKmB,OAAOrlE,OAAO8oE,EAAA,WAEhD,IAAM9qC,EAAQ8+B,EAAOW,YAAY,GAAI,KAC/B6+B,EAAO5tB,GAAQC,gBAAgBb,GAAc6c,MACnD2R,EAAKt9F,KAAOuiF,GAAcC,eAC1B8a,EAAKt+D,MAAK,OAAAriB,OAAUqiB,EAAMj6B,EAAC,MAAA4X,OAAKqiB,EAAMlc,EAAC,MAAAnG,OAAKqiB,EAAMjd,EAAC,KAEnD,IAAM6tD,EAAYxQ,EAAYY,KAAKq+F,GACnCA,EAAcA,EAAYl+F,QAAO,SAAAn7D,GAAC,OAAIA,IAAM4qE,CAAS,IACrD,IAAMC,EAASzQ,EAAYY,KAAKs+F,GAChCA,EAAWA,EAASn+F,QAAO,SAAAp7D,GAAC,OAAIA,IAAM8qE,CAAM,IAC5C,IAAMC,EAAe1Q,EAAYY,KAAKu+F,GACtCA,EAAiBA,EAAep+F,QAAO,SAAAp+C,GAAC,OAAIA,IAAM+tD,CAAY,IAE9D+V,GAAeE,oBAAoBuX,EAAM1tB,EAAWC,EAAQC,GAC5D+V,GAAeqB,SAASoW,EAAM/3B,EAAKrlD,MAAMngB,QAAQomE,SAEjDE,EAAO7iE,KAAK85F,EACb,EAjBOj3B,EAAOrlE,OAASw9J,GAAM10F,IAmB7BvE,EAAKrlD,MAAMu+I,UAAUp4F,EACtB,EAACd,EAEDgzC,WAAa,SAACjb,GACb/3B,EAAKnL,SAAS,CACbkjC,KAAMA,GAER,EAAC/3B,EAEDg/B,UAAY,WACX,OAAKh/B,EAAKp9D,MAAMm1F,KAIa,KAAzB/3B,EAAKp9D,MAAMm1F,KAAKt9F,MAElBgjG,EAAAA,GAAAA,KAACmB,GAAM,CACNphG,SACCigG,EAAAA,GAAAA,KAACivD,GAAgB,CAChB30D,KAAM/3B,EAAKp9D,MAAMm1F,KACjBp4B,KAAMK,EAAKrlD,MAAMglD,KACjBnlE,QAASwlE,EAAKrlD,MAAMngB,QACpBqlE,UAAW,kBAAM,IAAI,EACrB+/B,SAAU,SAAA7H,GACT/3B,EAAKnL,SAAS,CACbkjC,KAAM,OACJ,WACF/3B,EAAKrlD,MAAM00I,QAAQt3D,EACpB,GACD,OAQJ0F,EAAAA,GAAAA,KAACmB,GAAM,CACNphG,SACCigG,EAAAA,GAAAA,KAACyU,GAAmB,CACnBzxB,UAAWzgB,EAAKp9D,MAAMm1F,KACtBp4B,KAAMK,EAAKrlD,MAAMglD,KACjBc,UAAWT,EAAKrlD,MAAMngB,QAAQimE,UAC9B6oB,UAAWtpB,EAAKrlD,MAAM2uE,UACtBC,YAAavpB,EAAKrlD,MAAM4uE,YACxBC,WAAYxpB,EAAKrlD,MAAM6uE,WACvBE,SAAU1pB,EAAKrlD,MAAM+uE,SACrB8mB,QAAS,kBAAM,IAAI,EACnB0+C,WAAY,kBAAM,IAAI,EACtB78C,MAAO,kBAAM,IAAI,EACjBxyC,UAAW,kBAAM,IAAI,IAGvBi/B,QAAS,kBAAM9+B,EAAKgzC,WAAW,KAAK,IA1C9B,IA6CT,EAAChzC,EAEDj/C,OAAS,WACR,IACC,IAAM+/C,EAASd,EAAKrlD,MAAMglD,KAAKmB,OAAOzb,KAAI,SAAA1kC,GAAC,OAAI88E,EAAAA,GAAAA,KAACwJ,GAAiB,CAAYxmB,UAAW9/D,EAAGumF,UAAWlnC,EAAKgzC,YAApCryF,EAAE0Q,GAAgD,IAQzH,IAPIyvC,EAAOrlE,OAAS,GACnBqlE,EAAO7iE,MACNw/F,EAAAA,GAAAA,KAAA,OAAeh5B,UAAU,cAAalhD,UACrCk6E,EAAAA,GAAAA,KAAA,UAAQh5B,UAAU,UAAUnsB,QAAS0nB,EAAK44F,WAAWr1I,SAAC,oBAD9C,QAKJu9C,EAAOrlE,OAAS,GACtBqlE,EAAO7iE,MACNw/F,EAAAA,GAAAA,KAAA,OAAyBh5B,UAAU,eAAzB3D,EAAOrlE,SAInB,IAAIi9J,EAAW,KACTxG,EAAiBt2D,GAAUj6B,WAAW/G,QAAO,SAAA3pD,GAAC,OAAK+uD,EAAKrlD,MAAMngB,QAAQomE,QAAQrqD,SAAStF,EAAEogB,GAAG,IAAE51B,OAUpG,OATIy2J,EAAiB,IACpBwG,GACC96D,EAAAA,GAAAA,MAAA,UAAQn5B,UAAU,YAAYnsB,QAAS,kBAAM0nB,EAAKrlD,MAAMy3I,WAAW,EAAC7uI,SAAA,IAAAnM,OAC/D86I,EAAc,cAAA96I,OAAgC,IAAnB86I,EAAuB,GAAK,IAAG,eAC9Dz0D,EAAAA,GAAAA,KAAChC,GAAS,SAMZmC,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,eAAclhD,SAAA,EAC5Bk6E,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,gBAAelhD,UAC7Bk6E,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,uBAAsBlhD,SAAC,gBAEvCq6E,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,gBAAelhD,SAAA,EAC7Bk6E,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,eAAclhD,SAC3Bu9C,KAEF88B,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,cAAalhD,SAAA,CAE1By8C,EAAKrlD,MAAMngB,QAAQkmE,UAClB+8B,EAAAA,GAAAA,KAACyB,GAAQ,CACRY,QACCrC,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAASE,IAAI16E,SAAC,2EAE3B/lB,SACCogG,EAAAA,GAAAA,MAAA,OAAAr6E,SAAA,EACCk6E,EAAAA,GAAAA,KAAA,KAAAl6E,SAAG,4DACHk6E,EAAAA,GAAAA,KAAA,KAAAl6E,SAAG,2CAIJ,KAGHy8C,EAAKrlD,MAAMglD,KAAKmB,OAAOrlE,QAAU,GAChCgiG,EAAAA,GAAAA,KAAC4C,GAAW,CACXzhG,KAAMyhF,GAASwC,KACfziE,OAAO,EACP0gF,OAAOrD,EAAAA,GAAAA,KAAC6O,GAAe,CAACpyE,KAAK,qBAAqB18B,SAASigG,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,OAAOq2C,IAAI,OAAO3/G,IAAKg3J,OACjG75G,QAAS0nB,EAAKrlD,MAAMw+I,iBAGrB17D,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAAS0H,YAAYliF,UAChCq6E,EAAAA,GAAAA,MAAA,KAAAr6E,SAAA,EAAGk6E,EAAAA,GAAAA,KAAA,KAAAl6E,SAAG,uBAAsB,wEAG9By8C,EAAKrlD,MAAMngB,QAAQimE,WAAcT,EAAKrlD,MAAMglD,KAAKmB,OAAOrlE,OAAS,GAAKgiG,EAAAA,GAAAA,KAAA,UAAQnlD,QAAS0nB,EAAK64F,aAAat1I,SAAC,cAAqB,KAC/Hm1I,QAGF14F,EAAKg/B,cAGT,CAAE,MAAApa,GACD,OAAO6Y,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,6BACvB,CACD,EA1KCzE,EAAKp9D,MAAQ,CACZm1F,KAAM,MACL/3B,CACH,CAAC,OAAA5H,EAAAugG,EAAA,CANsB,CAASxuH,EAAAA,6UCU3B5rC,GAAgC,CAAC,EAElC66J,GAAU,SAAVA,GAAU,OAAVA,EAAU,kBAAVA,EAAU,cAAVA,EAAU,oBAAVA,EAAU,sBAAVA,CAAU,EAAVA,IAAU,IAuBFC,GAAI,SAAAp8D,GAAAz6B,EAAA62F,EAAAp8D,GAAA,IAAAC,EAAA/5B,EAAAk2F,GAChB,SAAAA,EAAY1+I,GAAe,IAADqlD,EAiB4B,OAjB5B76D,EAAA,KAAAk0J,IACzBr5F,EAAAk9B,EAAAnjG,KAAA,KAAM4gB,IAmBPkxB,kBAAoB,WACnBvlC,MAAMg7D,IAAYz9D,MAAK,SAAAkB,GAAQ,OAAIA,EAASm1B,MAAM,IAAEr2B,MAAK,SAAAq2B,GACxD37B,GAAkB,WAAI27B,CACvB,IACA5zB,MAAMgzJ,IAAQz1J,MAAK,SAAAkB,GAAQ,OAAIA,EAASm1B,MAAM,IAAEr2B,MAAK,SAAAq2B,GACpD37B,GAAc,OAAI27B,CACnB,IACA5zB,MAAMokE,IAAO7mE,MAAK,SAAAkB,GAAQ,OAAIA,EAASm1B,MAAM,IAAEr2B,MAAK,SAAAq2B,GACnD37B,GAAa,MAAI27B,CAClB,IACA5zB,MAAMk4D,IAAY36D,MAAK,SAAAkB,GAAQ,OAAIA,EAASm1B,MAAM,IAAEr2B,MAAK,SAAAq2B,GACxD37B,GAAkB,WAAI27B,CACvB,IACA5zB,MAAMizJ,IAAM11J,MAAK,SAAAkB,GAAQ,OAAIA,EAASm1B,MAAM,IAAEr2B,MAAK,SAAAq2B,GAClD37B,GAAY,KAAI27B,CACjB,IACA5zB,MAAM69E,IAAMtgF,MAAK,SAAAkB,GAAQ,OAAIA,EAASy0J,aAAa,IAAE31J,MAAK,SAAA21J,GACzDv1E,GAAME,KAAK3tE,MAAQgjJ,CACpB,GACD,EAACx5F,EAEDI,aAAe,SAACx1D,GACflD,QAAQhK,MAAMkN,GAEd,IAAMqgJ,EAAajrF,EAAKp9D,MAAMqoJ,WAC9BA,EAAWhtJ,KAAK,GAADmZ,OAAIxM,IACnBo1D,EAAKnL,SAAS,CACbo2F,WAAYA,GAEd,EAACjrF,EAEDuB,SAAW5D,EAAMG,UAAS,WACzBkC,EAAKrlD,MAAMvU,SAASm7D,UACrB,IAAEvB,EAEFwB,YAAc7D,EAAMG,UAAS,WAC5BkC,EAAKrlD,MAAMvU,SAASo7D,aACrB,IAAExB,EAEFiyF,UAAY,SAACjiG,GACZgQ,EAAKnL,SAAS,CACb7E,OAAQA,EACRk0C,OAAQ,MAEV,EAAClkC,EAEDqyF,SAAW,SAACt0J,GACXiiE,EAAKnL,SAAS,CACbw9F,SAAUt0J,EACVq0J,WAAW,EACXluD,OAAQ,MAEV,EAAClkC,EAEDoyF,UAAY,WACXpyF,EAAKnL,SAAS,CACbw9F,SAAU,KACVD,WAAW,EACXluD,OAAQ,MAEV,EAAClkC,EAEDo0C,iBAAmB,SAACx5G,GACnB,IAAMJ,EAAUwlE,EAAKp9D,MAAMpI,QAC3BA,EAAQimE,UAAY7lE,EAEpBolE,EAAKnL,SAAS,CACbr6D,QAASA,IACP,WACFwlE,EAAKwB,aACN,GACD,EAACxB,EAEDq0C,YAAc,SAACz5G,GACd,IAAMJ,EAAUwlE,EAAKp9D,MAAMpI,QAC3BA,EAAQkmE,SAAW9lE,EAEnBolE,EAAKnL,SAAS,CACbr6D,QAASA,IACP,WACFwlE,EAAKwB,aACN,GACD,EAACxB,EAEDk0C,sBAAwB,SAACt5G,GACxB,IAAMJ,EAAUwlE,EAAKp9D,MAAMpI,QAC3BA,EAAQmmE,mBAAqB/lE,EAE7BqpF,GAAMC,OAAStpF,EAEfolE,EAAKnL,SAAS,CACbr6D,QAASA,IACP,WACFwlE,EAAKwB,aACN,GACD,EAACxB,EAEDyB,aAAe,SAACC,GACf,OAAO1B,EAAKrlD,MAAMvU,SAASq7D,aAAaC,EAAO1B,EAAKp9D,MAAMpI,QAC3D,EAACwlE,EAEDstF,SAAW,SAAC5rF,GACX,IAAMlnE,EAAUwlE,EAAKp9D,MAAMpI,QAE3BwlE,EAAKrlD,MAAMvU,SAASu7D,SAASD,EAAO1B,EAAKp9D,MAAMpI,SAASqJ,MAAK,WAC5D69D,EAAMzjD,SAAQ,SAAAwmF,GACRjqG,EAAQomE,QAAQrqD,SAASkuF,EAAKpzE,KAClC72B,EAAQomE,QAAQ3iE,KAAKwmG,EAAKpzE,GAE5B,IACA72B,EAAQomE,QAAQ9G,OAEhBkG,EAAKnL,SAAS,CACbr6D,QAASA,IACP,WACFwlE,EAAKwB,aACN,GACD,GACD,EAACxB,EAED4tF,WAAa,SAACnpD,GACb,IAAMjqG,EAAUwlE,EAAKp9D,MAAMpI,QAC3BA,EAAQomE,QAAUpmE,EAAQomE,QAAQhG,QAAO,SAAA3pD,GAAC,OAAIA,IAAMwzF,EAAKpzE,EAAE,IAE3D2uC,EAAKnL,SAAS,CACbr6D,QAASA,IACP,WACFwlE,EAAKwB,aACN,GACD,EAEAxB,EAEAy4F,cAAgB,WACf,IACC,IAAM94F,EAAOwK,GAAQuB,WAAW1L,EAAKp9D,MAAMpI,QAAQomE,SAEnDZ,EAAKnL,SAAS,CACb8K,KAAMA,EACN3P,OAAQopG,GAAWK,MACnBpH,SAAU,KACVD,WAAW,EACXluD,OAAQ,OACN,WACFlkC,EAAKuB,UACN,GACD,CAAE,MAAO32D,GACRo1D,EAAKI,aAAax1D,EACnB,CACD,EAACo1D,EAEDm5F,cAAgB,WACf,IACCn5F,EAAKnL,SAAS,CACb7E,OAAQopG,GAAWM,WACjB,WACF15F,EAAKuB,UACN,GACD,CAAE,MAAO32D,GACRo1D,EAAKI,aAAax1D,EACnB,CACD,EAACo1D,EAEDw4F,iBAAmB,WAClB,IAAK,IAADmB,EACH35F,EAAKnL,SAAS,CACb7E,OAAwB,QAAhB2pG,EAAC35F,EAAKp9D,MAAM+8D,YAAI,IAAAg6F,GAAfA,EAAiB34F,UAAkCo4F,GAAWQ,UAAjCR,GAAWM,WAC/C,WACF15F,EAAKuB,UACN,GACD,CAAE,MAAO32D,GACRo1D,EAAKI,aAAax1D,EACnB,CACD,EAACo1D,EAED65F,WAAa,WACZ,IACC,IAAMC,EAAc95F,EAAKp9D,MAAM+8D,KACzBA,EAAOwK,GAAQuB,WAAW1L,EAAKp9D,MAAMpI,QAAQomE,SACnDjB,EAAKmB,OAASg5F,EAAYh5F,OAC1BnB,EAAKgM,UAAY,EAEjB3L,EAAKnL,SAAS,CACb8K,KAAMA,EACN3P,OAAQopG,GAAWM,SACnBrH,SAAU,KACVD,WAAW,EACXluD,OAAQ,OACN,WACFlkC,EAAKuB,UACN,GACD,CAAE,MAAO32D,GACRo1D,EAAKI,aAAax1D,EACnB,CACD,EAACo1D,EAED+5F,gBAAkB,WACjB,IACC,IAAMp6F,EAAOK,EAAKp9D,MAAM+8D,KACxBA,EAAKgM,UAAY,EACjBhM,EAAKmB,OAAS,GACdnB,EAAK+K,MAAQ,GACb/K,EAAKiM,MAAQ,GACbjM,EAAKyB,MAAQ,EAEbpB,EAAKnL,SAAS,CACb8K,KAAMA,EACN3P,OAAQopG,GAAWM,SACnBrH,SAAU,KACVD,WAAW,EACXluD,OAAQ,OACN,WACFlkC,EAAKuB,UACN,GACD,CAAE,MAAO32D,GACRo1D,EAAKI,aAAax1D,EACnB,CACD,EAACo1D,EAEDs0C,YAAc,WACb,IACCt0C,EAAKnL,SAAS,CACb8K,KAAM,KACN3P,OAAQopG,GAAWY,QACnB3H,SAAU,KACVD,WAAW,EACXluD,OAAQ,OACN,WACFlkC,EAAKuB,UACN,GACD,CAAE,MAAO32D,GACRo1D,EAAKI,aAAax1D,EACnB,CACD,EAIAo1D,EAEA0wF,aAAe,SAAC9xF,EAA2BwpB,GAC1C,IACC,IAAMzoB,EAAOK,EAAKp9D,MAAM+8D,KAExBrB,EAAgBO,aAAac,EAAKnB,WAAYI,GAE1CwpB,EAAO,EACVzoB,EAAKyB,MAAQp0C,KAAK4rC,IAAI,EAAG+G,EAAKyB,MAAQgnB,GAEtCzoB,EAAKkB,eAAiB7zC,KAAK4rC,IAAI+G,EAAKkB,eAAiB,EAAG,GAGzDb,EAAKnL,SAAS,CACb8K,KAAMA,IACJ,WACFK,EAAKuB,UACN,GACD,CAAE,MAAO32D,GACRo1D,EAAKI,aAAax1D,EACnB,CACD,EAACo1D,EAED6wF,cAAgB,SAACjyF,GAChB,IACC,IAAMe,EAAOK,EAAKp9D,MAAM+8D,KAExBA,EAAKnB,WAAamB,EAAKnB,WAAW5D,QAAO,SAAAn7D,GAAC,OAAIA,EAAE4xB,KAAOutC,EAAUvtC,EAAE,IACnEsuC,EAAKyB,OAAS,GAEdpB,EAAKnL,SAAS,CACb8K,KAAMA,IACJ,WACFK,EAAKuB,UACN,GACD,CAAE,MAAO32D,GACRo1D,EAAKI,aAAax1D,EACnB,CACD,EAACo1D,EAED6xF,gBAAkB,SAACjzF,GAClB,IACC,IAAMe,EAAOK,EAAKp9D,MAAM+8D,KAGxBA,EAAKyB,MAAQp0C,KAAK4rC,IAAI,EAAG+G,EAAKyB,MADhB,KAGdxC,EAAUxC,SAAWwC,EAAUzC,MAE/B6D,EAAKnL,SAAS,CACb8K,KAAMA,IACJ,WACFK,EAAKuB,UACN,GACD,CAAE,MAAO32D,GACRo1D,EAAKI,aAAax1D,EACnB,CACD,EAACo1D,EAED8xF,iBAAmB,SAAClzF,GACnB,IACC,IAAMe,EAAOK,EAAKp9D,MAAM+8D,KAElByB,EAAQ,GAAKxC,EAAUzC,MAC7BwD,EAAKyB,MAAQp0C,KAAK4rC,IAAI,EAAG+G,EAAKyB,MAAQA,GAEtCxC,EAAUzC,OAAS,EAEnB6D,EAAKnL,SAAS,CACb8K,KAAMA,IACJ,WACFK,EAAKuB,UACN,GACD,CAAE,MAAO32D,GACRo1D,EAAKI,aAAax1D,EACnB,CACD,EAACo1D,EAEDH,UAAY,SAACjhE,EAAqByP,GACjC,IACC,IAAMsxD,EAAOK,EAAKp9D,MAAM+8D,KAExBrB,EAAgBuB,UAAUF,EAAM/gE,EAAMyP,GAEtC2xD,EAAKnL,SAAS,CACb8K,KAAMA,IACJ,WACFK,EAAKuB,UACN,GACD,CAAE,MAAO32D,GACRo1D,EAAKI,aAAax1D,EACnB,CACD,EAIAo1D,EAEAqvF,QAAU,SAACt3D,GACV,IACC,IAAMp4B,EAAOK,EAAKp9D,MAAM+8D,KACxBgQ,GAAUmoB,cAAcn4B,EAAMo4B,GAC9B/3B,EAAKnL,SAAS,CACb8K,KAAMA,IACJ,WACFK,EAAKuB,UACN,GACD,CAAE,MAAO32D,GACRo1D,EAAKI,aAAax1D,EACnB,CACD,EAACo1D,EAEDk5F,UAAY,SAACp4F,GACZ,IACC,IAAMnB,EAAOK,EAAKp9D,MAAM+8D,KACxBmB,EAAO7iD,SAAQ,SAAA85E,GACdpoB,GAAUmoB,cAAcn4B,EAAMo4B,EAC/B,IACA/3B,EAAKnL,SAAS,CACb8K,KAAMA,IACJ,WACFK,EAAKuB,UACN,GACD,CAAE,MAAO32D,GACRo1D,EAAKI,aAAax1D,EACnB,CACD,EAACo1D,EAEDqyC,MAAQ,SAACta,EAAsBl4B,GAC9B,IACC,IAAMF,EAAOK,EAAKp9D,MAAM+8D,KAExBo4B,EAAKvtB,IAAM,EAEP3K,GACHvB,EAAgBuB,UAAUF,EAAME,EAAW,GAG5CG,EAAKnL,SAAS,CACb8K,KAAMA,IACJ,WACFK,EAAKuB,UACN,GACD,CAAE,MAAO32D,GACRo1D,EAAKI,aAAax1D,EACnB,CACD,EAACo1D,EAEDwwC,QAAU,SAAC9rD,EAAuBqzC,GACjC,IACCzX,GAAeS,wBAAwBgX,EAAMrzC,EAASsb,EAAKp9D,MAAMpI,QAAQomE,SAEzEZ,EAAKnL,SAAS,CACb8K,KAAMK,EAAKp9D,MAAM+8D,OACf,WACFK,EAAKuB,UACN,GACD,CAAE,MAAO32D,GACRo1D,EAAKI,aAAax1D,EACnB,CACD,EAACo1D,EAEDkvF,WAAa,SAACn3D,GACb,IACC,IAAMp4B,EAAOK,EAAKp9D,MAAM+8D,KAIlBs6F,EADQliE,EAAK57B,OAAS47B,EAAK57B,MAAQ,GAAK,EACxB47B,EAAKvtB,GACrBA,EAAKx9C,KAAK8pC,MAAMmjG,EAAQ,GAC1BzvF,EAAK,GACR7K,EAAKiM,MAAM3tE,KAAK,CACfozB,GAAIssC,EAAMC,OACVh/D,KAAMyqE,GAASiuB,QACfx2F,KAAM0pE,IAKR7K,EAAKgM,WAAa,EAClBhM,EAAKmB,OAASnB,EAAKmB,OAAOlG,QAAO,SAAAj6C,GAAC,OAAIA,EAAE0Q,KAAO0mE,EAAK1mE,EAAE,IAGtD0mE,EAAKrtB,MAAM9P,QAAO,SAAAp/D,GAAC,OAAIA,EAAEsiF,OAAStiF,EAAEmtF,MAAM,IAAE1qE,SAAQ,SAAAziB,GAAC,OAAImkE,EAAK+K,MAAMzsE,KAAKzC,EAAE,IAC3Eu8F,EAAKptB,QAAQ/P,QAAO,SAAAp/D,GAAC,OAAIA,EAAEsiF,OAAStiF,EAAEmtF,MAAM,IAAE1qE,SAAQ,SAAAziB,GAAC,OAAImkE,EAAK+K,MAAMzsE,KAAKzC,EAAE,IAE7EwkE,EAAKnL,SAAS,CACb8K,KAAMA,IACJ,WACFK,EAAKuB,UACN,GACD,CAAE,MAAO32D,GACRo1D,EAAKI,aAAax1D,EACnB,CACD,EAACo1D,EAED6uF,WAAa,SAACz3D,EAAiBW,EAA6BrkF,EAAwBk8I,EAA2BxnE,GAC9G,IACC,IAAMzoB,EAAOK,EAAKp9D,MAAM+8D,KAGxB,OAFAA,EAAKiM,MAAQjM,EAAKiM,MAAMhR,QAAO,SAAAp+C,GAAC,OAAIA,EAAE6U,KAAO+lE,EAAK/lE,EAAE,IAE5C+lE,EAAKx4F,MACZ,KAAKyqE,GAASguB,UACb13B,EAAKgM,WAAa,EAClB,MACD,KAAKtC,GAASiuB,QACZS,EAAwBvtB,IAAM4sB,EAAKt2F,KACpC,MACD,KAAKuoE,GAASkuB,QACZQ,EAAwBvtB,IAAOutB,EAAwB57B,MACxD,MACD,KAAKkN,GAASquB,UACb/3B,EAAK+K,MAAMzsE,KAAKm5F,EAAKt2F,MACrB,MACD,KAAKuoE,GAASsuB,MACbh4B,EAAKyB,OAASg2B,EAAKt2F,KACnB,MACD,KAAKuoE,GAASouB,YACb,IAAMzT,EAAWtwE,EACXwmJ,EAAUtK,EAChBjwF,EAAKmB,OAAO7iD,SAAQ,SAAA0C,GACnBA,EAAE+pD,MAAMzsD,SAAQ,SAACziB,EAAG+D,GACf/D,EAAE61B,KAAO2yD,EAAS3yD,KACrB1Q,EAAE+pD,MAAMnrE,GAAK26J,EAEf,IACAv5I,EAAEgqD,QAAQ1sD,SAAQ,SAACziB,EAAG+D,GACjB/D,EAAE61B,KAAO2yD,EAAS3yD,KACrB1Q,EAAE+pD,MAAMnrE,GAAK26J,EAEf,GACD,IACAv6F,EAAK+K,MAAMzsD,SAAQ,SAACziB,EAAG+D,GAClB/D,EAAE61B,KAAO2yD,EAAS3yD,KACrBsuC,EAAK+K,MAAMnrE,GAAK26J,EAElB,IACA,MAED,KAAK7wF,GAASwuB,UACbv5B,EAAgBO,aAAac,EAAKnB,WAAY44B,EAAKt2F,MAIrD6+D,EAAKyB,OAASgnB,EAEdpoB,EAAKnL,SAAS,CACb8K,KAAMA,IACJ,WACFK,EAAKuB,UACN,GACD,CAAE,MAAO32D,GACRo1D,EAAKI,aAAax1D,EACnB,CACD,EAIAo1D,EAEAyuC,QAAU,SAAC/6F,GACV,IACC,IAAMisD,EAAOK,EAAKp9D,MAAM+8D,KAExBA,EAAK+K,MAAMzsE,KAAKyV,GAEhB,IAAI0tD,EAAQ,EACR1tD,EAAKi1E,SACRvnB,EAAQ,IAEL1tD,EAAKoqE,QACR1c,EAAQ,KAETzB,EAAKyB,MAAQp0C,KAAK4rC,IAAI,EAAG+G,EAAKyB,MAAQA,GAEtCpB,EAAKnL,SAAS,CACb8K,KAAMA,IACJ,WACFK,EAAKuB,UACN,GACD,CAAE,MAAO32D,GACRo1D,EAAKI,aAAax1D,EACnB,CACD,EAACo1D,EAEDktF,SAAW,SAACx5I,EAAiBnP,GAC5B,IACC,IAAM41J,EAAO,SAACzmJ,GACbisD,EAAK+K,MAAQ/K,EAAK+K,MAAM9P,QAAO,SAAAp/D,GAAC,OAAIA,IAAMkY,CAAI,IAE9C,IAAI0tD,EAAQ,EACR1tD,EAAKi1E,SACRvnB,EAAQ,IAEL1tD,EAAKoqE,QACR1c,EAAQ,IAETzB,EAAKyB,OAASA,CACf,EAEMzB,EAAOK,EAAKp9D,MAAM+8D,KAEpBp7D,EACHo7D,EAAK+K,MACH9P,QAAO,SAAAp/D,GAAC,OAAIA,EAAEf,OAASiZ,EAAKjZ,IAAI,IAChCwjB,SAAQ,SAAAziB,GAAC,OAAI2+J,EAAK3+J,EAAE,IAEtB2+J,EAAKzmJ,GAGNssD,EAAKnL,SAAS,CACb8K,KAAMA,IACJ,WACFK,EAAKuB,UACN,GACD,CAAE,MAAO32D,GACRo1D,EAAKI,aAAax1D,EACnB,CACD,EAACo1D,EAEDgwF,SAAW,WACV,IACC,IAAMrwF,EAAOK,EAAKp9D,MAAM+8D,KAExBA,EAAKyB,OAAS,IAEdpB,EAAKnL,SAAS,CACb8K,KAAMA,IACJ,WACFK,EAAKuB,UACN,GACD,CAAE,MAAO32D,GACRo1D,EAAKI,aAAax1D,EACnB,CACD,EAIAo1D,EAEAkzC,eAAiB,SAACloB,EAAqBlqB,EAA0BqyC,EAAkBC,GAClF,IACC,GAAIpzC,EAAKp9D,MAAM+8D,KAAM,CACpB,IAAMA,EAAOK,EAAKp9D,MAAM+8D,KAExBmB,EAAO7iD,SAAQ,SAAA0C,GAAC,OAAI2/D,GAAe8C,eAAeziE,EAAE,IACpDg/C,EAAKmB,OAASnB,EAAKmB,OAAOlG,QAAO,SAAAj6C,GAAC,OAAKmgD,EAAOvqD,SAASoK,EAAE,IACzDg/C,EAAKqB,UAAY8pB,GAAmBC,gBAAgBC,EAAQlqB,EAAQd,EAAKp9D,MAAMpI,QAAQomE,SAEvF,IAAK,IAAIrhE,EAAI,EAAGA,EAAI4zG,IAAY5zG,EAAG,CAClC,IAAMw4F,EAAOl+B,EAAYY,KAAKkF,EAAKqB,UAAUC,WAAWrG,QAAO,SAAAp8D,GAAC,OAAIA,EAAEuiE,UAAYwI,GAAc6c,IAAI,KACpG2R,EAAKntB,OAAOU,WAAWrtE,KAAK2uE,GAAe8C,kCAC5C,CACK1P,EAAKp9D,MAAMpI,QAAQimE,WACvBnC,EAAgBuB,UAAUF,EAAM7D,EAAcoB,OAAQi2C,GAGvD,IAAK,IAAI5zG,EAAI,EAAGA,EAAI6zG,IAAc7zG,EAAG,CACpC,IAAMw4F,EAAOl+B,EAAYY,KAAKkF,EAAKqB,UAAUC,WAAWrG,QAAO,SAAAp8D,GAAC,OAAIA,EAAEuiE,UAAYwI,GAAc8K,OAAO,KACvG0jB,EAAKntB,OAAOU,WAAWrtE,KAAK2uE,GAAemD,mCAC5C,CACK/P,EAAKp9D,MAAMpI,QAAQimE,WACvBnC,EAAgBuB,UAAUF,EAAM7D,EAAcc,cAAew2C,GAG9Dl6B,GAAkB2B,gBAAgB5B,QAElCjZ,EAAKnL,SAAS,CACb8K,KAAMA,EACN3P,OAAQopG,GAAWQ,YACjB,WACF55F,EAAKuB,UACN,GACD,CACD,CAAE,MAAO32D,GACRo1D,EAAKI,aAAax1D,EACnB,CACD,EAACo1D,EAEDquF,sBAAwB,WACvB,IACC,GAAIruF,EAAKp9D,MAAM+8D,KAAM,CACpB,IAAMA,EAAOK,EAAKp9D,MAAM+8D,KAExBA,EAAKta,IAAMwmB,GAAqBC,oBAAoB9L,EAAKp9D,MAAMpI,QAAQomE,SAEvEZ,EAAKnL,SAAS,CACb8K,KAAMA,IACJ,WACFK,EAAKuB,UACN,GACD,CACD,CAAE,MAAO32D,GACRo1D,EAAKI,aAAax1D,EACnB,CACD,EAACo1D,EAED+tF,QAAU,SAAC/iE,GACV,IACC,GAAIhrB,EAAKp9D,MAAM+8D,KAAM,CACpB,IAAMA,EAAOK,EAAKp9D,MAAM+8D,KAExB6rB,GAAiBwN,cAAcr5B,EAAKta,IAAK2lC,GACzCrrB,EAAKmB,OAAO7iD,SAAQ,SAAA0C,GAAC,OAAIA,EAAE6pD,IAAMwgB,EAAO1pB,WAAW7lE,MAAM,IACzDkkE,EAAKgM,WAAa,EAClBhM,EAAKkB,gBAAkB,EACvBlB,EAAKiM,MAAM3tE,KAAK+sF,EAAOoM,MAEvBp3B,EAAKnL,SAAS,CACb8K,KAAMA,IACJ,WACFK,EAAKuB,UACN,GACD,CACD,CAAE,MAAO32D,GACRo1D,EAAKI,aAAax1D,EACnB,CACD,EAIAo1D,EAEAi4F,UAAY,SAACj3F,EAA2Bib,GACvC,IACC,IAAMsM,EAAO,SAACxrF,EAAoCkW,GACjD,IAAM9O,EAAS,CACdiS,EAAGrZ,EAASqZ,EACZC,EAAGtZ,EAASsZ,GAGb,OAAQ4lE,GACP,IAAK,IACJ93E,EAAOiS,EAAIrZ,EAASsZ,EACpBlS,EAAOkS,GAAKtZ,EAASqZ,EAAInD,EACzB,MACD,IAAK,IACJ9O,EAAOiS,GAAKrZ,EAASsZ,EAAIpD,EACzB9O,EAAOkS,EAAItZ,EAASqZ,EAItB,OAAOjS,CACR,EAEA68D,EAAU8kB,WAAW7nE,SAAQ,SAAAqhD,GAC5B,IAAM5gE,EAAM6pF,EAAKjpB,EAAI,GACrBA,EAAGlpD,EAAI1X,EAAI0X,EACXkpD,EAAGjpD,EAAI3X,EAAI2X,CACZ,IACA2qD,EAAUC,WAAWhjD,SAAQ,SAAAzf,GAC5B,IAAME,EAAM6pF,EAAK/pF,EAAEosE,OAAO7tE,SAAUyB,EAAEyU,MACtCzU,EAAEosE,OAAO7tE,SAASqZ,EAAI1X,EAAI0X,EAC1B5X,EAAEosE,OAAO7tE,SAASsZ,EAAI3X,EAAI2X,EAE1B7X,EAAEosE,OAAOG,MAAM9sD,SAAQ,SAAAysC,GACtB,IAAMhsD,EAAM6pF,EAAK79B,EAAMlsD,EAAEyU,MACzBy3C,EAAKt0C,EAAI1X,EAAI0X,EACbs0C,EAAKr0C,EAAI3X,EAAI2X,CACd,GACD,IACA2qD,EAAUE,KAAKjjD,SAAQ,SAAAkjD,GACtB,IAAMziE,EAAM6pF,EAAKpnB,EAAGpkE,SAAU,GAC9BokE,EAAGpkE,SAASqZ,EAAI1X,EAAI0X,EACpB+qD,EAAGpkE,SAASsZ,EAAI3X,EAAI2X,CACrB,IACA6iE,GAAkB2B,gBAAgB5B,QAElCjZ,EAAKnL,SAAS,CACb8K,KAAMK,EAAKp9D,MAAM+8D,OACf,WACFK,EAAKuB,UACN,GACD,CAAE,MAAO32D,GACRo1D,EAAKI,aAAax1D,EACnB,CACD,EAACo1D,EAED+lB,eAAiB,WAChB,IACC,IAAMpmB,EAAOK,EAAKp9D,MAAM+8D,KAClBqB,EAAYrB,EAAKqB,UACvBmkB,GAAeY,eAAe/kB,GAE9B,IAAMo5F,EAASj1E,GAAeqB,oBAAoBxlB,GAC5C51C,EAAUgvI,EAAO3+J,OAAS,EAAI2+J,EAAO,GAAK,KAC5ChvI,GACH+5D,GAAesB,YAAYzlB,EAAW51C,GAGvC40C,EAAKnL,SAAS,CACb8K,KAAMA,IACJ,WACFK,EAAKuB,UACN,GACD,CAAE,MAAO32D,GACRo1D,EAAKI,aAAax1D,EACnB,CACD,EAACo1D,EAEDm2F,uBAAyB,WACxB,IACC,IAAMx2F,EAAOK,EAAKp9D,MAAM+8D,KAClBqB,EAAYrB,EAAKqB,UAEvBA,EAAU8kB,WAAavK,GAAsBC,qBAAqBxuD,KAAKuT,QAEvEygC,EAAUC,WAAWhjD,SAAQ,SAAAzf,GAAC,OAAIA,EAAEosE,OAAO7tE,SAAW,CAAEqZ,EAAGuvC,OAAOqV,UAAW3kD,EAAGsvC,OAAOqV,UAAW,IAClGgG,EAAUE,KAAKjjD,SAAQ,SAAAkjD,GAAE,OAAIA,EAAGpkE,SAAW,CAAEqZ,EAAGuvC,OAAOqV,UAAW3kD,EAAGsvC,OAAOqV,UAAW,IAEvF8vB,GAAmBiB,gBAAgB/qB,EAAWh0C,KAAKuT,QACnDuqD,GAAmBoB,UAAUlrB,EAAWh0C,KAAKuT,QAE7Cy/B,EAAKnL,SAAS,CACb8K,KAAMA,IACJ,WACFK,EAAKuB,UACN,GACD,CAAE,MAAO32D,GACRo1D,EAAKI,aAAax1D,EACnB,CACD,EAACo1D,EAED21F,mBAAqB,SAAC30F,EAA2B+2B,EAAsBl4B,GACtE,IACC,IAAMF,EAAOK,EAAKp9D,MAAM+8D,KAExB2gB,GAAe8C,eAAe2U,GAC9Bp4B,EAAKmB,OAASnB,EAAKmB,OAAOlG,QAAO,SAAAj6C,GAAC,OAAIA,EAAE0Q,KAAO0mE,EAAK1mE,EAAE,IACtD2vC,EAAUC,WAAWhjE,KAAK85F,GAC1BjN,GAAmBiB,gBAAgB/qB,EAAWh0C,KAAKuT,QAE/Cs/B,GACHvB,EAAgBuB,UAAUF,EAAME,EAAW,GAG5CG,EAAKnL,SAAS,CACb8K,KAAMA,IACJ,WACFK,EAAKuB,UACN,GACD,CAAE,MAAO32D,GACRo1D,EAAKI,aAAax1D,EACnB,CACD,EAACo1D,EAEDuoB,KAAO,SAACvnB,EAA2Byf,EAA2BxE,EAAamM,GAC1E,IACCjD,GAAeoD,KAAKvnB,EAAWyf,EAAWxE,EAAKmM,GAE/CpoB,EAAKnL,SAAS,CACb8K,KAAMK,EAAKp9D,MAAM+8D,OACf,WACFK,EAAKuB,UACN,GACD,CAAE,MAAO32D,GACRo1D,EAAKI,aAAax1D,EACnB,CACD,EAACo1D,EAEDkW,YAAc,SAAClV,EAA0Byf,EAA2B7lF,GACnE,IACC6lF,EAAU7V,OAAOO,UAAYvwE,EAE7BolE,EAAKnL,SAAS,CACb8K,KAAMK,EAAKp9D,MAAM+8D,OACf,WACFK,EAAKuB,UACN,GACD,CAAE,MAAO32D,GACRo1D,EAAKI,aAAax1D,EACnB,CACD,EAACo1D,EAEDipB,QAAU,SAACjoB,EAA2Byf,GACrC,IACC0E,GAAe8D,QAAQjoB,EAAWyf,GAElCzgB,EAAKnL,SAAS,CACb8K,KAAMK,EAAKp9D,MAAM+8D,OACf,WACFK,EAAKuB,UACN,GACD,CAAE,MAAO32D,GACRo1D,EAAKI,aAAax1D,EACnB,CACD,EAACo1D,EAED1P,KAAO,SAAC0Q,EAA2Byf,GAClC,IACC0E,GAAe70B,KAAK0Q,EAAWyf,GAE/BzgB,EAAKnL,SAAS,CACb8K,KAAMK,EAAKp9D,MAAM+8D,OACf,WACFK,EAAKuB,UACN,GACD,CAAE,MAAO32D,GACRo1D,EAAKI,aAAax1D,EACnB,CACD,EAACo1D,EAEDopB,KAAO,SAACpoB,EAA2Byf,GAClC,IACC0E,GAAeiE,KAAKpoB,EAAWyf,GAE/BzgB,EAAKnL,SAAS,CACb8K,KAAMK,EAAKp9D,MAAM+8D,OACf,WACFK,EAAKuB,UACN,GACD,CAAE,MAAO32D,GACRo1D,EAAKI,aAAax1D,EACnB,CACD,EAACo1D,EAEDwoB,YAAc,SAACxnB,EAA2BynB,EAAuBC,EAAyBC,GACzF,IACCxD,GAAeqD,YAAYxnB,EAAWynB,EAAOC,EAASC,GAEtD3oB,EAAKnL,SAAS,CACb8K,KAAMK,EAAKp9D,MAAM+8D,OACf,WACFK,EAAKuB,UACN,GACD,CAAE,MAAO32D,GACRo1D,EAAKI,aAAax1D,EACnB,CACD,EAACo1D,EAED6mB,YAAc,SAAC7lB,EAA2Byf,EAA2B5gB,GACpE,IACCslB,GAAe0B,YAAY7lB,EAAWyf,GAElC5gB,GACHvB,EAAgBuB,UAAUG,EAAKp9D,MAAM+8D,KAAmBE,EAAW,GAGpEG,EAAKnL,SAAS,CACb8K,KAAMK,EAAKp9D,MAAM+8D,OACf,WACFK,EAAKuB,UACN,GACD,CAAE,MAAO32D,GACRo1D,EAAKI,aAAax1D,EACnB,CACD,EAACo1D,EAEDknB,aAAe,SAAClmB,EAA2Byf,EAA2BhxC,GACrE,IACC01C,GAAe+B,aAAalmB,EAAWyf,EAAWhxC,GAElDuwB,EAAKnL,SAAS,CACb8K,KAAMK,EAAKp9D,MAAM+8D,OACf,WACFK,EAAKuB,UACN,GACD,CAAE,MAAO32D,GACRo1D,EAAKI,aAAax1D,EACnB,CACD,EAACo1D,EAEDmnB,eAAiB,SAACnmB,EAA2Byf,GAC5C,IACC0E,GAAegC,eAAenmB,EAAWyf,GAEzCzgB,EAAKnL,SAAS,CACb8K,KAAMK,EAAKp9D,MAAM+8D,OACf,WACFK,EAAKuB,UACN,GACD,CAAE,MAAO32D,GACRo1D,EAAKI,aAAax1D,EACnB,CACD,EAACo1D,EAED6zF,wBAA0B,SAACxsE,EAAiCzsF,GAC3D,IACCysF,EAAUzsF,MAAQA,EAElBolE,EAAKnL,SAAS,CACb8K,KAAMK,EAAKp9D,MAAM+8D,OACf,WACFK,EAAKuB,UACN,GACD,CAAE,MAAO32D,GACRo1D,EAAKI,aAAax1D,EACnB,CACD,EAACo1D,EAED0nB,UAAY,SAAC1mB,EAA2Byf,GACvC,IACC0E,GAAeuC,UAAU1mB,EAAWyf,GAEpCzgB,EAAKnL,SAAS,CACb8K,KAAMK,EAAKp9D,MAAM+8D,OACf,WACFK,EAAKuB,UACN,GACD,CAAE,MAAO32D,GACRo1D,EAAKI,aAAax1D,EACnB,CACD,EAACo1D,EAEDy1F,eAAiB,SAACz0F,EAA2Byf,EAA2B45E,GACvE,IAwBC74J,YAvBgB,SAAV84J,IACL75E,EAAU7V,OAAOa,QAAUshB,GAAaC,WAAWhsB,EAAWyf,GAC1DA,EAAU7V,OAAOa,SACpBshB,GAAa8B,eAAe7tB,EAAWyf,GAEvCzgB,EAAKnL,SAAS,CACb8K,KAAMK,EAAKp9D,MAAM+8D,OACf,WACFK,EAAKuB,WACL//D,WAAW84J,EAAS,IACrB,MAEAn1E,GAAekB,QAAQrlB,GAEvBhB,EAAKnL,SAAS,CACb8K,KAAMK,EAAKp9D,MAAM+8D,OACf,WACFK,EAAKuB,WACL84F,GACD,IAEF,GAEoB,IACrB,CAAE,MAAOzvJ,GACRo1D,EAAKI,aAAax1D,EACnB,CACD,EAACo1D,EAEDqmB,QAAU,SAACrlB,GACV,IACCmkB,GAAekB,QAAQrlB,GAEvBhB,EAAKnL,SAAS,CACb8K,KAAMK,EAAKp9D,MAAM+8D,OACf,WACFK,EAAKuB,UACN,GACD,CAAE,MAAO32D,GACRo1D,EAAKI,aAAax1D,EACnB,CACD,EAACo1D,EAEDspB,UAAY,SAAC51E,EAAiB+sE,GAC7B,IACC,IAAM9gB,EAAOK,EAAKp9D,MAAM+8D,KAEpBA,EAAKqB,UACRmkB,GAAemE,UAAU3pB,EAAKqB,UAAWyf,EAAW/sE,IAEpDisD,EAAK+K,MAAQ/K,EAAK+K,MAAM9P,QAAO,SAAAp/D,GAAC,OAAIA,EAAE61B,KAAO3d,EAAK2d,EAAE,IACpDovD,EAAU9V,QAAU8V,EAAU9V,QAAQ/P,QAAO,SAAAp/D,GAAC,OAAIA,EAAE61B,KAAO3d,EAAK2d,EAAE,IAClEovD,EAAU/V,MAAMzsE,KAAKyV,IAGtBssD,EAAKnL,SAAS,CACb8K,KAAMA,IACJ,WACFK,EAAKuB,UACN,GACD,CAAE,MAAO32D,GACRo1D,EAAKI,aAAax1D,EACnB,CACD,EAACo1D,EAEDupB,YAAc,SAAC71E,EAAiB+sE,GAC/B,IACC,IAAM9gB,EAAOK,EAAKp9D,MAAM+8D,KAEpBA,EAAKqB,UACRmkB,GAAeoE,YAAY5pB,EAAKqB,UAAWyf,EAAW/sE,IAEtD+sE,EAAU/V,MAAQ+V,EAAU/V,MAAM9P,QAAO,SAAAp/D,GAAC,OAAIA,EAAE61B,KAAO3d,EAAK2d,EAAE,IAC9DovD,EAAU9V,QAAQ1sE,KAAKyV,IAGxBssD,EAAKnL,SAAS,CACb8K,KAAMA,IACJ,WACFK,EAAKuB,UACN,GACD,CAAE,MAAO32D,GACRo1D,EAAKI,aAAax1D,EACnB,CACD,EAACo1D,EAEDwpB,WAAa,SAAC91E,EAAiB+sE,GAC9B,IACC,IAAM9gB,EAAOK,EAAKp9D,MAAM+8D,KAEpBA,EAAKqB,UACRmkB,GAAeqE,WAAW7pB,EAAKqB,UAAWyf,EAAW/sE,IAErDisD,EAAK+K,MAAQ/K,EAAK+K,MAAM9P,QAAO,SAAAp/D,GAAC,OAAIA,EAAE61B,KAAO3d,EAAK2d,EAAE,IAChDivD,GAAewB,SAASrB,EAAW/sE,GACtC+sE,EAAU/V,MAAMzsE,KAAKyV,GAErB+sE,EAAU9V,QAAQ1sE,KAAKyV,IAIzBssD,EAAKnL,SAAS,CACb8K,KAAMA,IACJ,WACFK,EAAKuB,UACN,GACD,CAAE,MAAO32D,GACRo1D,EAAKI,aAAax1D,EACnB,CACD,EAACo1D,EAED0pB,SAAW,SAACh2E,EAAiB+sE,GAC5B,IACC,IAAM9gB,EAAOK,EAAKp9D,MAAM+8D,KAEpBA,EAAKqB,UACRmkB,GAAeuE,SAAS/pB,EAAKqB,UAAWyf,EAAW/sE,IAEnD+sE,EAAU/V,MAAQ+V,EAAU/V,MAAM9P,QAAO,SAAAp/D,GAAC,OAAIA,EAAE61B,KAAO3d,EAAK2d,EAAE,IAC9DovD,EAAU9V,QAAU8V,EAAU9V,QAAQ/P,QAAO,SAAAp/D,GAAC,OAAIA,EAAE61B,KAAO3d,EAAK2d,EAAE,IAElEsuC,EAAK+K,MAAMzsE,KAAKyV,IAGjBssD,EAAKnL,SAAS,CACb8K,KAAMA,IACJ,WACFK,EAAKuB,UACN,GACD,CAAE,MAAO32D,GACRo1D,EAAKI,aAAax1D,EACnB,CACD,EAACo1D,EAEDo0F,gBAAkB,SAACxxJ,GAClB,IACC,IAAM+8D,EAAOK,EAAKp9D,MAAM+8D,KACxB,IAAKA,EACJ,OAGD,IAAMqB,EAAYrB,EAAKqB,UACvB,IAAKA,EACJ,OAGD,IAAMgqB,EAASrrB,EAAKta,IAAIgc,QAAQ9B,MAAK,SAAA//D,GAAC,OAAIA,EAAE6xB,KAAO2vC,EAAUkqB,QAAQ,IACrE,IAAKF,EACJ,OAGD,IAAIuvE,EAAgB,KACpB,OAAQ33J,GACP,KAAK4mE,GAAesgB,QAEnB9oB,EAAUE,KAAKjjD,SAAQ,SAAAkjD,GAAO,IAADq5F,GAC5BA,EAAA76F,EAAK+K,OAAMzsE,KAAI6F,MAAA02J,EAAAp4F,EAAIjB,EAAGuJ,QACtB/K,EAAKyB,OAASD,EAAGC,KAClB,IAEAJ,EAAUC,WACRrG,QAAO,SAAAp8D,GAAC,OAAKA,EAAEI,OAAS2qE,GAAc6c,MAAU5nF,EAAEuiE,UAAYwI,GAAc6c,IAAK,IACjFxrB,QAAO,SAAAj6C,GAAC,OAAKA,EAAEiqD,OAAOhoE,QAAU0mE,GAAeuB,UAAclqD,EAAEiqD,OAAOhoE,QAAU0mE,GAAema,KAAM,IACrGxlE,SAAQ,SAAA0C,GAAC,OAAIA,EAAE6pD,IAAM,CAAC,IAExBxJ,EAAUC,WACRrG,QAAO,SAAAp8D,GAAC,OAAKA,EAAEI,OAAS2qE,GAAc6c,MAAU5nF,EAAEuiE,UAAYwI,GAAc6c,IAAK,IACjFxrB,QAAO,SAAAj6C,GAAC,OAAKA,EAAEiqD,OAAOhoE,QAAU0mE,GAAeuB,UAAclqD,EAAEiqD,OAAOhoE,QAAU0mE,GAAema,OAAW9iE,EAAEiqD,OAAOhoE,QAAU0mE,GAAeod,WAAY,IACxJzoE,SAAQ,SAAA0C,GAAC,OAAIg/C,EAAKmB,OAAO7iE,KAAK0iB,EAAE,IAClCg/C,EAAKmB,OAASjH,EAAYC,KAAK6F,EAAKmB,QAAQ,SAAAvhE,GAAC,OAAIA,EAAE9E,IAAI,IAEvDuwF,EAAO1pB,WAAWzgB,OAAO,EAAG,GACK,IAA7BmqC,EAAO1pB,WAAW7lE,SAErB+vF,GAAiBwN,cAAcr5B,EAAKta,IAAK2lC,GACrCrrB,EAAKta,IAAI+zB,QAAQ50B,OAAM,SAAA8a,GAAE,MAAoB,KAAhBA,EAAG4rB,QAAe,IAElDqvE,GACC38D,EAAAA,GAAAA,MAAA,OAAAr6E,SAAA,EACCk6E,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAASwG,QAAQhhF,SAAC,aAC9Bk6E,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAASmE,WAAW3+E,SAAC,6BACjCq6E,EAAAA,GAAAA,MAACI,GAAI,CAAAz6E,SAAA,EACJq6E,EAAAA,GAAAA,MAAA,KAAAr6E,SAAA,EAAGk6E,EAAAA,GAAAA,KAAA,KAAAl6E,SAAG,qBAAoB,6CAC1Bk6E,EAAAA,GAAAA,KAAA,KAAAl6E,SAAG,uGAEJq6E,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,eAAclhD,SAAA,EAC5Bk6E,EAAAA,GAAAA,KAAC4C,GAAW,CAACS,OAAOrD,EAAAA,GAAAA,KAAC6O,GAAe,CAACpyE,KAAK,eAAiBoe,QAAS,kBAAM0nB,EAAK65F,YAAY,KAC3Fp8D,EAAAA,GAAAA,KAAC4C,GAAW,CAACS,OAAOrD,EAAAA,GAAAA,KAAC6O,GAAe,CAACpyE,KAAK,gBAAkBoe,QAAS,kBAAM0nB,EAAKs0C,aAAa,WAMhG30C,EAAKgM,WAAa,EAElBhM,EAAKkB,gBAAkB,EAEvBlB,EAAKiM,MAAM3tE,KAAK+sF,EAAOoM,QAIzBz3B,EAAKqB,UAAY,KACjB,MAED,KAAKwI,GAAewgB,OAEnBrqB,EAAKqB,UAAY,KACjB,IAAMF,EAASnB,EAAKmB,OAAOrlE,OAASkkE,EAAKgM,UAAYhM,EAAKiM,MAAMhR,QAAO,SAAAp+C,GAAC,OAAIA,EAAE5d,OAASyqE,GAASguB,SAAS,IAAE57F,OAC5F,IAAXqlE,IAEHy5F,GACC38D,EAAAA,GAAAA,MAAA,OAAAr6E,SAAA,EACCk6E,EAAAA,GAAAA,KAACO,GAAI,CAACp/F,KAAMm/F,GAASwG,QAAQhhF,SAAC,YAC9Bq6E,EAAAA,GAAAA,MAACI,GAAI,CAACp/F,KAAMm/F,GAASmE,WAAW3+E,SAAA,CAAC,6BAA2BynE,EAAOvwF,KAAK,iCACxEgjG,EAAAA,GAAAA,KAACO,GAAI,CAAAz6E,SAAC,sFACNq6E,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,eAAclhD,SAAA,EAC5Bk6E,EAAAA,GAAAA,KAAC4C,GAAW,CAACS,OAAOrD,EAAAA,GAAAA,KAAC6O,GAAe,CAACpyE,KAAK,aAAeoe,QAAS,kBAAM0nB,EAAK+5F,iBAAiB,KAC9Ft8D,EAAAA,GAAAA,KAAC4C,GAAW,CAACS,OAAOrD,EAAAA,GAAAA,KAAC6O,GAAe,CAACpyE,KAAK,YAAcoe,QAAS,kBAAM0nB,EAAKs0C,aAAa,WAK7F,MAED,KAAK9qC,GAAe8qF,QAEnBtzF,EAAUC,WACRrG,QAAO,SAAAp8D,GAAC,OAAKA,EAAEI,OAAS2qE,GAAc6c,MAAU5nF,EAAEuiE,UAAYwI,GAAc6c,IAAK,IACjFxrB,QAAO,SAAAj6C,GAAC,OAAKA,EAAEiqD,OAAOhoE,QAAU0mE,GAAeuB,UAAclqD,EAAEiqD,OAAOhoE,QAAU0mE,GAAema,KAAM,IACrGxlE,SAAQ,SAAA0C,GAAC,OAAIg/C,EAAKmB,OAAO7iE,KAAK0iB,EAAE,IAClCg/C,EAAKmB,OAASjH,EAAYC,KAAK6F,EAAKmB,QAAQ,SAAAvhE,GAAC,OAAIA,EAAE9E,IAAI,IAEvDklE,EAAKqB,UAAY,KAKnBrB,EAAKmB,OAAO7iD,SAAQ,SAAA0C,GAAC,OAAI2/D,GAAe8C,eAAeziE,EAAE,IACzDu4D,GAAkB2B,gBAAgB5B,QAElCjZ,EAAKnL,SAAS,CACb7E,OAAQopG,GAAWM,SACnB/5F,KAAMA,EACNukC,OAAQq2D,IACN,WACFv6F,EAAKuB,UACN,GACD,CAAE,MAAO32D,GACRo1D,EAAKI,aAAax1D,EACnB,CACD,EAACo1D,EAEDi1F,iBAAmB,SAACx0E,GACnB,IACC,IAAM9gB,EAAOK,EAAKp9D,MAAM+8D,KAExB8gB,EAAU1f,QAAW0f,EAAU1f,UAAYwI,GAAc6c,KAAQ7c,GAAc8K,QAAU9K,GAAc6c,KACvGjB,GAAe0B,YAAYlnB,EAAKqB,UAA6Byf,GAE7DzgB,EAAKnL,SAAS,CACb8K,KAAMA,IACJ,WACFK,EAAKuB,UACN,GACD,CAAE,MAAO32D,GACRo1D,EAAKI,aAAax1D,EACnB,CACD,EAIAo1D,EAEAmvF,WAAa,WAAO,IAADsL,EAClB,OAAQz6F,EAAKp9D,MAAMotD,QAClB,KAAKopG,GAAWY,QACf,OACCv8D,EAAAA,GAAAA,KAAC66D,GAAa,CACb34F,KAAMK,EAAKp9D,MAAM+8D,KACjBnlE,QAASwlE,EAAKp9D,MAAMpI,QACpBi+J,cAAez4F,EAAKy4F,cACpBD,iBAAkBx4F,EAAKw4F,iBACvBpG,UAAWpyF,EAAKoyF,YAGnB,KAAKgH,GAAWK,MACf,OACCh8D,EAAAA,GAAAA,KAACk7D,GAAW,CACXh5F,KAAMK,EAAKp9D,MAAM+8D,KACjBnlE,QAASwlE,EAAKp9D,MAAMpI,QACpB60J,QAASrvF,EAAKqvF,QACd6J,UAAWl5F,EAAKk5F,UAChB5vE,UAAWtpB,EAAKspB,UAChBC,YAAavpB,EAAKupB,YAClBC,WAAYxpB,EAAKwpB,WACjBE,SAAU1pB,EAAK0pB,SACf0oE,UAAWpyF,EAAKoyF,UAChB+G,cAAen5F,EAAKm5F,gBAGvB,KAAKC,GAAWM,SACf,OACCj8D,EAAAA,GAAAA,KAACu0D,GAAc,CACdryF,KAAMK,EAAKp9D,MAAM+8D,KACjBnlE,QAASwlE,EAAKp9D,MAAMpI,QACpB4L,SAAU45D,EAAKrlD,MAAMvU,SACrBksJ,cAAetyF,EAAKp9D,MAAMqoJ,WAAWxvJ,OAAS,EAC9C42J,SAAUryF,EAAKqyF,SACfD,UAAWpyF,EAAKoyF,UAChB1B,aAAc1wF,EAAK0wF,aACnBG,cAAe7wF,EAAK6wF,cACpBgB,gBAAiB7xF,EAAK6xF,gBACtBC,iBAAkB9xF,EAAK8xF,iBACvBjyF,UAAWG,EAAKH,UAChBwvF,QAASrvF,EAAKqvF,QACdh9C,MAAOryC,EAAKqyC,MACZ/oB,UAAWtpB,EAAKspB,UAChBC,YAAavpB,EAAKupB,YAClBC,WAAYxpB,EAAKwpB,WACjBE,SAAU1pB,EAAK0pB,SACf8mB,QAASxwC,EAAKwwC,QACd0+C,WAAYlvF,EAAKkvF,WACjBL,WAAY7uF,EAAK6uF,WACjBpgD,QAASzuC,EAAKyuC,QACdy+C,SAAUltF,EAAKktF,SACf8C,SAAUhwF,EAAKgwF,SACf98C,eAAgBlzC,EAAKkzC,eACrBm7C,sBAAuBruF,EAAKquF,sBAC5BN,QAAS/tF,EAAK+tF,UAGjB,KAAKqL,GAAWQ,UACf,OACCn8D,EAAAA,GAAAA,KAAC24D,GAAe,CACfp1F,UAA0B,QAAjBy5F,EAAEz6F,EAAKp9D,MAAM+8D,YAAI,IAAA86F,OAAA,EAAfA,EAAiBz5F,UAC5BrB,KAAMK,EAAKp9D,MAAM+8D,KACjBnlE,QAASwlE,EAAKp9D,MAAMpI,QACpB83J,cAAetyF,EAAKp9D,MAAMqoJ,WAAWxvJ,OAAS,EAC9C42J,SAAUryF,EAAKqyF,SACf4F,UAAWj4F,EAAKi4F,UAChBlyE,eAAgB/lB,EAAK+lB,eACrBowE,uBAAwBn2F,EAAKm2F,uBAC7BR,mBAAoB31F,EAAK21F,mBACzBtvE,QAASrmB,EAAKqmB,QACdkC,KAAMvoB,EAAKuoB,KACXrS,YAAalW,EAAKkW,YAClB+S,QAASjpB,EAAKipB,QACd34B,KAAM0P,EAAK1P,KACX84B,KAAMppB,EAAKopB,KACXZ,YAAaxoB,EAAKwoB,YAClB3B,YAAa7mB,EAAK6mB,YAClBK,aAAclnB,EAAKknB,aACnBC,eAAgBnnB,EAAKmnB,eACrB0sE,wBAAyB7zF,EAAK6zF,wBAC9BnsE,UAAW1nB,EAAK0nB,UAChB+tE,eAAgBz1F,EAAKy1F,eACrBnsE,UAAWtpB,EAAKspB,UAChBC,YAAavpB,EAAKupB,YAClBC,WAAYxpB,EAAKwpB,WACjBE,SAAU1pB,EAAK0pB,SACf7pB,UAAWG,EAAKH,UAChBo1F,iBAAkBj1F,EAAKi1F,iBACvBb,gBAAiBp0F,EAAKo0F,kBAI3B,EAACp0F,EAEDj/C,OAAS,WACR,IACC,IAAImjF,EAAS,KA2Cb,OA1C4B,OAAxBlkC,EAAKp9D,MAAMyvJ,WACdnuD,GACCzG,EAAAA,GAAAA,KAACmB,GAAM,CACNphG,SACCigG,EAAAA,GAAAA,KAACutD,GAAS,CACTrrF,KAAMK,EAAKp9D,MAAM+8D,KACjBsrF,WAAYjrF,EAAKp9D,MAAMqoJ,WACvB1sJ,MAAOA,GAAMyhE,EAAKp9D,MAAMyvJ,UACxB73J,QAASwlE,EAAKp9D,MAAMpI,QACpB85G,YAAat0C,EAAKs0C,YAClBF,iBAAkBp0C,EAAKo0C,iBACvBC,YAAar0C,EAAKq0C,YAClBH,sBAAuBl0C,EAAKk0C,wBAG9BpV,QAAS,kBAAM9+B,EAAKnL,SAAS,CAAEw9F,SAAU,MAAO,KAI/CryF,EAAKp9D,MAAMwvJ,YACdluD,GACCzG,EAAAA,GAAAA,KAACmB,GAAM,CACNphG,SACCigG,EAAAA,GAAAA,KAAC0vD,GAAU,CACV3yJ,QAASwlE,EAAKp9D,MAAMpI,QACpB+yJ,SAAUvtF,EAAKyB,aACf6rF,SAAUttF,EAAKstF,SACfM,WAAY5tF,EAAK4tF,aAGnB9uD,QAAS,kBAAM9+B,EAAKnL,SAAS,CAAEu9F,WAAW,GAAQ,KAIjDpyF,EAAKp9D,MAAMshG,SACdA,GACCzG,EAAAA,GAAAA,KAACmB,GAAM,CACNphG,QAASwiE,EAAKp9D,MAAMshG,WAMtBtG,EAAAA,GAAAA,MAAA,OAAKn5B,UAAU,WAAUlhD,SAAA,EACxBk6E,EAAAA,GAAAA,KAACi9D,GAAO,CACP39J,SAAS,eACT4rE,aAAc,CACb5C,SAAU,OAGX/F,EAAKmvF,aACLjrD,IAGJ,CAAE,MAAAtf,GACD,OAAO6Y,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,yBACvB,CACD,EA72CCzE,EAAKp9D,MAAQ,CACZ+8D,KAAMhlD,EAAMglD,KACZnlE,QAASmgB,EAAMngB,QACfw1D,OAAQopG,GAAWY,QACnB3H,SAAU,KACVD,WAAW,EACXluD,OAAQ,KACR+mD,WAAY,IAGbjrF,EAAKrlD,MAAMvU,SAAS85D,QAAU,kBAAMF,EAAKp9D,MAAM+8D,IAAK,EACpDK,EAAKrlD,MAAMvU,SAAS+5D,WAAa,kBAAMH,EAAKp9D,MAAMpI,OAAQ,EAC1DwlE,EAAKrlD,MAAMvU,SAASg6D,aAAe,SAAAx1D,GAAE,OAAIo1D,EAAKI,aAAax1D,EAAI,EAE/Dq5E,GAAMC,OAASlkB,EAAKp9D,MAAMpI,QAAQmmE,mBAAmBX,CACtD,CAg2CA,OAAA5H,EAAAihG,EAAA,CAn3CgB,CAASlvH,EAAAA,WCjEbwwH,GAAS,SAAChgJ,GACtB,IAAMigJ,GAAe1rG,EAAAA,EAAAA,eAAc,CAAE/K,MAAO,wBACtC02G,GAAe3rG,EAAAA,EAAAA,eAAc,CAAE/K,MAAO,yBACtC22G,GAAa5rG,EAAAA,EAAAA,eAAc,CAAE/K,MAAO,4BAE1C,OAAIy2G,GAEFn9D,EAAAA,GAAAA,KAAC47D,GAAI,CACJ15F,KAAMhlD,EAAMglD,KACZnlE,QAASmgB,EAAMngB,QACf4L,SAAUuU,EAAMvU,WAKf00J,GAAcD,GAEhBp9D,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,SAAQlhD,SAAC,0DAOzBk6E,EAAAA,GAAAA,KAAA,OAAKh5B,UAAU,SAAQlhD,SAAC,wDAI1B,ECpCMnd,GAAW,IAAI25D,EACrB35D,GACEi6D,QACAx8D,MAAK,SAAA/C,GACL,IAAMi6J,EAAYr6J,SAASs6J,eAAe,QACtCD,IACU93G,EAAAA,EAAAA,GAAW83G,GACnBh6I,QACJ08E,EAAAA,GAAAA,KAACxwC,EAAAA,WAAU,CAAA1pC,UACVk6E,EAAAA,GAAAA,KAACk9D,GAAM,CAACh7F,KAAM7+D,EAAK6+D,KAAMnlE,QAASsG,EAAKtG,QAAS4L,SAAUA,OAI9D","sources":["../node_modules/extend/index.js","../node_modules/inline-style-parser/index.js","../node_modules/localforage/dist/localforage.js","../node_modules/prop-types/factoryWithThrowingShims.js","../node_modules/prop-types/index.js","../node_modules/prop-types/lib/ReactPropTypesSecret.js","../node_modules/react-dom/cjs/react-dom.production.min.js","../node_modules/react-dom/client.js","../node_modules/react-dom/index.js","../MediaQuery/webpack/universalModuleDefinition","../MediaQuery/node_modules/css-mediaquery/index.js","../MediaQuery/node_modules/hyphenate-style-name/index.js","../MediaQuery/node_modules/matchmediaquery/index.js","../MediaQuery/node_modules/object-assign/index.js","../MediaQuery/node_modules/prop-types/checkPropTypes.js","../MediaQuery/node_modules/prop-types/factoryWithTypeCheckers.js","../MediaQuery/node_modules/prop-types/index.js","../MediaQuery/node_modules/prop-types/lib/ReactPropTypesSecret.js","../MediaQuery/node_modules/prop-types/lib/has.js","../MediaQuery/node_modules/react-is/cjs/react-is.development.js","../MediaQuery/node_modules/react-is/index.js","../MediaQuery/node_modules/shallow-equal/dist/index.esm.js","../MediaQuery/src/Component.ts","../MediaQuery/src/Context.ts","../MediaQuery/src/index.ts","../MediaQuery/src/mediaQuery.ts","../MediaQuery/src/toQuery.ts","../MediaQuery/src/useMediaQuery.ts","../MediaQuery/external umd {\"commonjs\":\"react\",\"commonjs2\":\"react\",\"amd\":\"react\",\"root\":\"React\"}","../MediaQuery/webpack/bootstrap","../MediaQuery/webpack/runtime/define property getters","../MediaQuery/webpack/runtime/hasOwnProperty shorthand","../MediaQuery/webpack/runtime/make namespace object","../MediaQuery/webpack/startup","../node_modules/react/cjs/react-jsx-runtime.production.min.js","../node_modules/react/cjs/react.production.min.js","../node_modules/react/index.js","../node_modules/react/jsx-runtime.js","../node_modules/scheduler/cjs/scheduler.production.min.js","../node_modules/scheduler/index.js","../node_modules/style-to-object/index.js","../webpack/bootstrap","../webpack/runtime/compat get default export","../webpack/runtime/define property getters","../webpack/runtime/get javascript chunk filename","../webpack/runtime/global","../webpack/runtime/hasOwnProperty shorthand","../webpack/runtime/make namespace object","../webpack/runtime/publicPath","../webpack/runtime/jsonp chunk loading","../node_modules/@babel/runtime/helpers/esm/typeof.js","../node_modules/@babel/runtime/helpers/esm/toPropertyKey.js","../node_modules/@babel/runtime/helpers/esm/toPrimitive.js","../node_modules/@babel/runtime/helpers/esm/createClass.js","../node_modules/@babel/runtime/helpers/esm/classCallCheck.js","utils/random.ts","utils/collections.ts","data/pack-data.ts","enums/structure-type.ts","data/structure-data.ts","utils/utils.ts","logic/stronghold-logic.ts","platform/platform.ts","../node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","../node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","../node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","../node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","../node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","../node_modules/@babel/runtime/helpers/esm/inherits.js","../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","../node_modules/@babel/runtime/helpers/esm/isNativeReflectConstruct.js","../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","../node_modules/@babel/runtime/helpers/esm/createSuper.js","../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","../node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js","../node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","../node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","../node_modules/@babel/runtime/helpers/esm/slicedToArray.js","../node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","../node_modules/@babel/runtime/helpers/esm/defineProperty.js","../node_modules/@babel/runtime/helpers/esm/objectSpread2.js","../node_modules/goober/dist/goober.modern.js","../node_modules/react-hot-toast/src/core/types.ts","../node_modules/react-hot-toast/src/core/utils.ts","../node_modules/react-hot-toast/src/core/store.ts","../node_modules/react-hot-toast/src/core/toast.ts","../node_modules/react-hot-toast/src/core/use-toaster.ts","../node_modules/react-hot-toast/src/components/error.tsx","../node_modules/react-hot-toast/src/components/loader.tsx","../node_modules/react-hot-toast/src/components/checkmark.tsx","../node_modules/react-hot-toast/src/components/toast-icon.tsx","../node_modules/react-hot-toast/src/components/toast-bar.tsx","../node_modules/react-hot-toast/src/components/toaster.tsx","../node_modules/react-hot-toast/src/index.ts","enums/boon-type.ts","enums/combatant-state.ts","enums/combatant-type.ts","enums/encounter-state.ts","enums/damage-category-type.ts","enums/item-location-type.ts","enums/item-proficiency-type.ts","enums/skill-category-type.ts","enums/trait-type.ts","enums/action-target-type.ts","enums/damage-type.ts","enums/skill-type.ts","enums/condition-type.ts","enums/feature-type.ts","logic/factory.ts","logic/condition-logic.ts","logic/feature-logic.ts","data/base-data.ts","enums/movement-type.ts","enums/quirk-type.ts","data/monster-species-data.ts","enums/action-range-type.ts","enums/encounter-map-square-type.ts","enums/summon-type.ts","utils/hash-table.ts","logic/encounter-map-logic.ts","generators/encounter-map-generator.ts","generators/name-generator.ts","generators/magic-item-generator.ts","enums/card-type.ts","logic/combatant-logic.ts","utils/sound.ts","logic/encounter-logic.ts","generators/encounter-generator.ts","data/intents-data.ts","logic/path-logic.ts","logic/intents-logic.ts","logic/action-logic.ts","data/potion-data.ts","data/background-data.ts","data/hero-species-data.ts","data/item-data.ts","data/role-data.ts","logic/game-logic.ts","logic/campaign-map-logic.ts","generators/boon-generator.ts","generators/campaign-map-generator.ts","../node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js","../node_modules/@tabler/icons-react/src/defaultAttributes.js","../node_modules/@tabler/icons-react/src/createReactComponent.js","../node_modules/@tabler/icons-react/src/icons/IconCards.js","../node_modules/@tabler/icons-react/src/icons/IconHelpCircleFilled.js","../node_modules/@tabler/icons-react/src/icons/IconHelpCircle.js","logic/pack-logic.ts","../node_modules/@tabler/icons-react/src/icons/IconArrowBigRightLinesFilled.js","../node_modules/@tabler/icons-react/src/icons/IconCoins.js","../node_modules/@tabler/icons-react/src/icons/IconAwardFilled.js","../node_modules/@tabler/icons-react/src/icons/IconRefresh.js","../node_modules/@tabler/icons-react/src/icons/IconVaccineBottle.js","../node_modules/@tabler/icons-react/src/icons/IconSnowflake.js","../node_modules/@tabler/icons-react/src/icons/IconSpiral.js","../node_modules/@tabler/icons-react/src/icons/IconSlice.js","../node_modules/@tabler/icons-react/src/icons/IconBolt.js","../node_modules/@tabler/icons-react/src/icons/IconFlame.js","../node_modules/@tabler/icons-react/src/icons/IconHammer.js","../node_modules/@tabler/icons-react/src/icons/IconSun.js","../node_modules/@tabler/icons-react/src/icons/IconTrident.js","../node_modules/@tabler/icons-react/src/icons/IconSkull.js","../node_modules/@tabler/icons-react/src/icons/IconBrain.js","../node_modules/@tabler/icons-react/src/icons/IconAccessPoint.js","components/controls/icon-value/icon-value.tsx","../node_modules/@tabler/icons-react/src/icons/IconInfoCircle.js","components/controls/text/text.tsx","components/controls/badge/badge.tsx","components/controls/box/box.tsx","components/controls/card-list/card-list.tsx","components/controls/confirm-button/confirm-button.tsx","../node_modules/@tabler/icons-react/src/icons/IconX.js","components/controls/dialog/dialog.tsx","components/controls/expander/expander.tsx","components/controls/gauge/gauge.tsx","components/controls/playing-card/playing-card.tsx","components/controls/selector/selector.tsx","components/controls/stat-value/stat-value.tsx","../node_modules/@tabler/icons-react/src/icons/IconCircleCheckFilled.js","../node_modules/@tabler/icons-react/src/icons/IconCircle.js","components/controls/switch/switch.tsx","components/controls/tabs/tabs.tsx","components/controls/tag/tag.tsx","components/cards/action-card/action-card.tsx","../node_modules/@babel/runtime/helpers/esm/wrapRegExp.js","utils/color.ts","components/panels/campaign-map/campaign-map-panel.tsx","components/panels/card-grid/card-grid-panel.tsx","../node_modules/@tabler/icons-react/src/icons/IconHeartOff.js","../node_modules/@tabler/icons-react/src/icons/IconHeartFilled.js","../node_modules/@tabler/icons-react/src/icons/IconNavigationFilled.js","components/panels/conditions/conditions-panel.tsx","components/panels/combat-stats/combat-stats-panel.tsx","components/panels/combatant-notices/combatant-notices.tsx","../node_modules/@tabler/icons-react/src/icons/IconCheck.js","../node_modules/@tabler/icons-react/src/icons/IconId.js","../node_modules/@tabler/icons-react/src/icons/IconArrowBigDownFilled.js","../node_modules/@tabler/icons-react/src/icons/IconStarFilled.js","components/panels/encounter-map/mini-token/mini-token.tsx","components/panels/combatant-row/combatant-row-panel.tsx","../node_modules/@tabler/icons-react/src/icons/IconChevronUpLeft.js","../node_modules/@tabler/icons-react/src/icons/IconChevronUp.js","../node_modules/@tabler/icons-react/src/icons/IconChevronUpRight.js","../node_modules/@tabler/icons-react/src/icons/IconChevronLeft.js","../node_modules/@tabler/icons-react/src/icons/IconChevronRight.js","../node_modules/@tabler/icons-react/src/icons/IconChevronDownLeft.js","../node_modules/@tabler/icons-react/src/icons/IconChevronDown.js","../node_modules/@tabler/icons-react/src/icons/IconChevronDownRight.js","components/panels/direction/direction-panel.tsx","components/panels/encounter-map/aura-token/aura-token.tsx","components/panels/encounter-map/floor/floor.tsx","components/panels/encounter-map/fog/fog.tsx","components/panels/encounter-map/loot-token/loot-token.tsx","components/panels/encounter-map/overlay/overlay.tsx","components/panels/encounter-map/trail-token/trail-token.tsx","components/panels/encounter-map/wall/wall.tsx","components/panels/encounter-map/encounter-map-panel.tsx","components/panels/initiative-list/initiative-list-panel.tsx","components/panels/list-item/list-item-panel.tsx","components/panels/stronghold-map/stronghold-map-panel.tsx","../node_modules/@tabler/icons-react/src/icons/IconList.js","components/panels/treasure-row/treasure-row-panel.tsx","components/cards/placeholder-card/placeholder-card.tsx","components/cards/background-card/background-card.tsx","components/cards/item-card/item-card.tsx","components/cards/structure-card/structure-card.tsx","components/cards/boon-card/boon-card.tsx","components/cards/feature-card/feature-card.tsx","components/cards/hero-card/hero-card.tsx","components/cards/pack-card/pack-card.tsx","components/cards/region-card/region-card.tsx","components/cards/role-card/role-card.tsx","components/cards/species-card/species-card.tsx","../node_modules/@tabler/icons-react/src/icons/IconCircleMinus.js","../node_modules/@tabler/icons-react/src/icons/IconCirclePlus.js","components/cards/stronghold-benefit-card/stronghold-benefit-card.tsx","components/modals/buy-equipment/buy-equipment-modal.tsx","components/modals/buy-magic-item/buy-magic-item-modal.tsx","components/modals/buy-potion/buy-potion-modal.tsx","components/modals/character-sheet/items/items.tsx","components/modals/character-sheet/level-up/choice/choice.tsx","components/modals/character-sheet/level-up/level-up.tsx","components/modals/character-sheet/stats/damage-panel/damage-panel.tsx","components/modals/character-sheet/stats/stats.tsx","components/modals/character-sheet/character-sheet-modal.tsx","components/modals/enchant-item/enchant-item-modal.tsx","components/modals/encounter-start/encounter-start-modal.tsx","utils/format.ts","components/modals/help/about-tab/about-tab.tsx","components/modals/help/decks-tab/decks-tab.tsx","components/modals/help/options-tab/options-tab.tsx","../node_modules/hast-util-whitespace/lib/index.js","../node_modules/property-information/lib/util/schema.js","../node_modules/property-information/lib/util/merge.js","../node_modules/property-information/lib/normalize.js","../node_modules/property-information/lib/util/info.js","../node_modules/property-information/lib/util/types.js","../node_modules/property-information/lib/util/defined-info.js","../node_modules/property-information/lib/util/create.js","../node_modules/property-information/lib/xlink.js","../node_modules/property-information/lib/xml.js","../node_modules/property-information/lib/util/case-sensitive-transform.js","../node_modules/property-information/lib/util/case-insensitive-transform.js","../node_modules/property-information/lib/xmlns.js","../node_modules/property-information/lib/aria.js","../node_modules/property-information/lib/html.js","../node_modules/property-information/lib/svg.js","../node_modules/property-information/index.js","../node_modules/property-information/lib/find.js","../node_modules/property-information/lib/hast-to-react.js","../node_modules/style-to-object/index.mjs","../node_modules/unist-util-position/lib/index.js","../node_modules/@babel/runtime/helpers/esm/construct.js","../node_modules/@babel/runtime/helpers/esm/wrapNativeSuper.js","../node_modules/@babel/runtime/helpers/esm/isNativeFunction.js","../node_modules/unist-util-stringify-position/lib/index.js","../node_modules/vfile-message/lib/index.js","../node_modules/hast-util-to-jsx-runtime/lib/index.js","../node_modules/comma-separated-tokens/index.js","../node_modules/space-separated-tokens/index.js","../node_modules/html-url-attributes/lib/index.js","../node_modules/mdast-util-to-string/lib/index.js","../node_modules/micromark-util-chunked/index.js","../node_modules/micromark-util-subtokenize/index.js","../node_modules/micromark-util-combine-extensions/index.js","../node_modules/micromark-util-character/index.js","../node_modules/micromark-factory-space/index.js","../node_modules/micromark/lib/initialize/content.js","../node_modules/micromark/lib/initialize/document.js","../node_modules/micromark-core-commonmark/lib/blank-line.js","../node_modules/micromark-core-commonmark/lib/content.js","../node_modules/micromark/lib/initialize/flow.js","../node_modules/micromark/lib/initialize/text.js","../node_modules/micromark-util-resolve-all/index.js","../node_modules/micromark/lib/create-tokenizer.js","../node_modules/micromark-core-commonmark/lib/thematic-break.js","../node_modules/micromark-core-commonmark/lib/list.js","../node_modules/micromark-core-commonmark/lib/block-quote.js","../node_modules/micromark-factory-destination/index.js","../node_modules/micromark-factory-label/index.js","../node_modules/micromark-factory-title/index.js","../node_modules/micromark-factory-whitespace/index.js","../node_modules/micromark-util-normalize-identifier/index.js","../node_modules/micromark-core-commonmark/lib/definition.js","../node_modules/micromark-core-commonmark/lib/code-indented.js","../node_modules/micromark-core-commonmark/lib/heading-atx.js","../node_modules/micromark-core-commonmark/lib/setext-underline.js","../node_modules/micromark-util-html-tag-name/index.js","../node_modules/micromark-core-commonmark/lib/html-flow.js","../node_modules/micromark-core-commonmark/lib/code-fenced.js","../node_modules/decode-named-character-reference/index.dom.js","../node_modules/micromark-core-commonmark/lib/character-reference.js","../node_modules/micromark-core-commonmark/lib/character-escape.js","../node_modules/micromark-core-commonmark/lib/line-ending.js","../node_modules/micromark-core-commonmark/lib/label-end.js","../node_modules/micromark-core-commonmark/lib/label-start-image.js","../node_modules/micromark-util-classify-character/index.js","../node_modules/micromark-core-commonmark/lib/attention.js","../node_modules/micromark-core-commonmark/lib/autolink.js","../node_modules/micromark-core-commonmark/lib/html-text.js","../node_modules/micromark-core-commonmark/lib/label-start-link.js","../node_modules/micromark-core-commonmark/lib/hard-break-escape.js","../node_modules/micromark-core-commonmark/lib/code-text.js","../node_modules/micromark/lib/constructs.js","../node_modules/micromark/lib/parse.js","../node_modules/micromark/lib/preprocess.js","../node_modules/micromark-util-decode-numeric-character-reference/index.js","../node_modules/micromark-util-decode-string/index.js","../node_modules/mdast-util-from-markdown/lib/index.js","../node_modules/micromark/lib/postprocess.js","../node_modules/remark-parse/lib/index.js","../node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js","../node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","../node_modules/@ungap/structured-clone/esm/types.js","../node_modules/@ungap/structured-clone/esm/deserialize.js","../node_modules/@ungap/structured-clone/esm/serialize.js","../node_modules/@ungap/structured-clone/esm/index.js","../node_modules/micromark-util-sanitize-uri/index.js","../node_modules/mdast-util-to-hast/lib/footer.js","../node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js","../node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js","../node_modules/unist-util-is/lib/index.js","../node_modules/unist-util-visit-parents/lib/index.js","../node_modules/unist-util-visit/lib/index.js","../node_modules/mdast-util-to-hast/lib/revert.js","../node_modules/mdast-util-to-hast/lib/handlers/list-item.js","../node_modules/trim-lines/index.js","../node_modules/mdast-util-to-hast/lib/handlers/index.js","../node_modules/mdast-util-to-hast/lib/handlers/blockquote.js","../node_modules/mdast-util-to-hast/lib/handlers/break.js","../node_modules/mdast-util-to-hast/lib/handlers/code.js","../node_modules/mdast-util-to-hast/lib/handlers/delete.js","../node_modules/mdast-util-to-hast/lib/handlers/emphasis.js","../node_modules/mdast-util-to-hast/lib/handlers/footnote-reference.js","../node_modules/mdast-util-to-hast/lib/handlers/heading.js","../node_modules/mdast-util-to-hast/lib/handlers/html.js","../node_modules/mdast-util-to-hast/lib/handlers/image-reference.js","../node_modules/mdast-util-to-hast/lib/handlers/image.js","../node_modules/mdast-util-to-hast/lib/handlers/inline-code.js","../node_modules/mdast-util-to-hast/lib/handlers/link-reference.js","../node_modules/mdast-util-to-hast/lib/handlers/link.js","../node_modules/mdast-util-to-hast/lib/handlers/list.js","../node_modules/mdast-util-to-hast/lib/handlers/paragraph.js","../node_modules/mdast-util-to-hast/lib/handlers/root.js","../node_modules/mdast-util-to-hast/lib/handlers/strong.js","../node_modules/mdast-util-to-hast/lib/handlers/table.js","../node_modules/mdast-util-to-hast/lib/handlers/table-cell.js","../node_modules/mdast-util-to-hast/lib/handlers/table-row.js","../node_modules/mdast-util-to-hast/lib/handlers/text.js","../node_modules/mdast-util-to-hast/lib/handlers/thematic-break.js","../node_modules/mdast-util-to-hast/lib/state.js","../node_modules/mdast-util-to-hast/lib/index.js","../node_modules/remark-rehype/lib/index.js","../node_modules/@babel/runtime/helpers/esm/toArray.js","../node_modules/bail/index.js","../node_modules/is-plain-obj/index.js","../node_modules/trough/index.js","../node_modules/vfile/lib/minpath.browser.js","../node_modules/vfile/lib/minproc.browser.js","../node_modules/vfile/lib/minurl.shared.js","../node_modules/vfile/lib/minurl.browser.js","../node_modules/vfile/lib/index.js","../node_modules/unified/lib/callable-instance.js","../node_modules/unified/lib/index.js","../node_modules/react-markdown/lib/index.js","components/modals/help/rules-tab/rules-tab.tsx","components/modals/help/help-modal.tsx","components/modals/hero-builder/card-page/card-page.tsx","components/modals/hero-builder/equipment-page/equipment-page.tsx","components/modals/hero-builder/finish-page/finish-page.tsx","components/modals/hero-builder/hero-builder-modal.tsx","components/modals/magic-item-info/magic-item-info-modal.tsx","components/modals/packs/packs-modal.tsx","components/screens/campaign-screen/campaign-map-page/campaign-map-page.tsx","components/screens/campaign-screen/dev-page/dev-page.tsx","components/screens/campaign-screen/heroes-page/heroes-page.tsx","components/screens/campaign-screen/items-page/items-page.tsx","../node_modules/@tabler/icons-react/src/icons/IconHexagon.js","../node_modules/@tabler/icons-react/src/icons/IconHexagonFilled.js","components/modals/buy-structure/buy-structure-modal.tsx","components/screens/campaign-screen/stronghold-page/stronghold-page.tsx","components/screens/campaign-screen/campaign-screen.tsx","../node_modules/@tabler/icons-react/src/icons/IconLayoutSidebarLeftCollapse.js","../node_modules/@tabler/icons-react/src/icons/IconLayoutSidebarLeftExpand.js","../node_modules/@tabler/icons-react/src/icons/IconLayoutBottombarCollapse.js","../node_modules/@tabler/icons-react/src/icons/IconLayoutBottombarExpand.js","../node_modules/@tabler/icons-react/src/icons/IconRotate2.js","../node_modules/@tabler/icons-react/src/icons/IconRotateClockwise2.js","../node_modules/@tabler/icons-react/src/icons/IconZoomOut.js","../node_modules/@tabler/icons-react/src/icons/IconZoomIn.js","../node_modules/@tabler/icons-react/src/icons/IconArrowBackUpDouble.js","../node_modules/@tabler/icons-react/src/icons/IconConfetti.js","../node_modules/@tabler/icons-react/src/icons/IconArrowUp.js","../node_modules/@tabler/icons-react/src/icons/IconViewfinder.js","components/screens/encounter-screen/action-controls/action-controls.tsx","components/screens/encounter-screen/encounter-controls/encounter-controls.tsx","../node_modules/@tabler/icons-react/src/icons/IconUser.js","../node_modules/@tabler/icons-react/src/icons/IconArrowsMove.js","../node_modules/@tabler/icons-react/src/icons/IconCircleCheck.js","../node_modules/@tabler/icons-react/src/icons/IconFlask2.js","components/screens/encounter-screen/hero-controls/hero-endturn/hero-endturn.tsx","components/screens/encounter-screen/hero-controls/hero-move/hero-move.tsx","components/screens/encounter-screen/hero-controls/hero-overview/hero-overview.tsx","components/screens/encounter-screen/hero-controls/hero-potions/hero-potions.tsx","components/screens/encounter-screen/hero-controls/hero-controls.tsx","components/screens/encounter-screen/inactive-controls/inactive-controls.tsx","components/screens/encounter-screen/monster-controls/monster-controls.tsx","components/screens/encounter-screen/round-controls/round-controls.tsx","components/screens/encounter-screen/encounter-screen.tsx","components/screens/landing-screen/landing-screen.tsx","components/screens/setup-screen/setup-screen.tsx","components/main/main.tsx","components/layout/layout.tsx","index.tsx"],"sourcesContent":["'use strict';\n\nvar hasOwn = Object.prototype.hasOwnProperty;\nvar toStr = Object.prototype.toString;\nvar defineProperty = Object.defineProperty;\nvar gOPD = Object.getOwnPropertyDescriptor;\n\nvar isArray = function isArray(arr) {\n\tif (typeof Array.isArray === 'function') {\n\t\treturn Array.isArray(arr);\n\t}\n\n\treturn toStr.call(arr) === '[object Array]';\n};\n\nvar isPlainObject = function isPlainObject(obj) {\n\tif (!obj || toStr.call(obj) !== '[object Object]') {\n\t\treturn false;\n\t}\n\n\tvar hasOwnConstructor = hasOwn.call(obj, 'constructor');\n\tvar hasIsPrototypeOf = obj.constructor && obj.constructor.prototype && hasOwn.call(obj.constructor.prototype, 'isPrototypeOf');\n\t// Not own constructor property must be Object\n\tif (obj.constructor && !hasOwnConstructor && !hasIsPrototypeOf) {\n\t\treturn false;\n\t}\n\n\t// Own properties are enumerated firstly, so to speed up,\n\t// if last one is own, then all properties are own.\n\tvar key;\n\tfor (key in obj) { /**/ }\n\n\treturn typeof key === 'undefined' || hasOwn.call(obj, key);\n};\n\n// If name is '__proto__', and Object.defineProperty is available, define __proto__ as an own property on target\nvar setProperty = function setProperty(target, options) {\n\tif (defineProperty && options.name === '__proto__') {\n\t\tdefineProperty(target, options.name, {\n\t\t\tenumerable: true,\n\t\t\tconfigurable: true,\n\t\t\tvalue: options.newValue,\n\t\t\twritable: true\n\t\t});\n\t} else {\n\t\ttarget[options.name] = options.newValue;\n\t}\n};\n\n// Return undefined instead of __proto__ if '__proto__' is not an own property\nvar getProperty = function getProperty(obj, name) {\n\tif (name === '__proto__') {\n\t\tif (!hasOwn.call(obj, name)) {\n\t\t\treturn void 0;\n\t\t} else if (gOPD) {\n\t\t\t// In early versions of node, obj['__proto__'] is buggy when obj has\n\t\t\t// __proto__ as an own property. Object.getOwnPropertyDescriptor() works.\n\t\t\treturn gOPD(obj, name).value;\n\t\t}\n\t}\n\n\treturn obj[name];\n};\n\nmodule.exports = function extend() {\n\tvar options, name, src, copy, copyIsArray, clone;\n\tvar target = arguments[0];\n\tvar i = 1;\n\tvar length = arguments.length;\n\tvar deep = false;\n\n\t// Handle a deep copy situation\n\tif (typeof target === 'boolean') {\n\t\tdeep = target;\n\t\ttarget = arguments[1] || {};\n\t\t// skip the boolean and the target\n\t\ti = 2;\n\t}\n\tif (target == null || (typeof target !== 'object' && typeof target !== 'function')) {\n\t\ttarget = {};\n\t}\n\n\tfor (; i < length; ++i) {\n\t\toptions = arguments[i];\n\t\t// Only deal with non-null/undefined values\n\t\tif (options != null) {\n\t\t\t// Extend the base object\n\t\t\tfor (name in options) {\n\t\t\t\tsrc = getProperty(target, name);\n\t\t\t\tcopy = getProperty(options, name);\n\n\t\t\t\t// Prevent never-ending loop\n\t\t\t\tif (target !== copy) {\n\t\t\t\t\t// Recurse if we're merging plain objects or arrays\n\t\t\t\t\tif (deep && copy && (isPlainObject(copy) || (copyIsArray = isArray(copy)))) {\n\t\t\t\t\t\tif (copyIsArray) {\n\t\t\t\t\t\t\tcopyIsArray = false;\n\t\t\t\t\t\t\tclone = src && isArray(src) ? src : [];\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tclone = src && isPlainObject(src) ? src : {};\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Never move original objects, clone them\n\t\t\t\t\t\tsetProperty(target, { name: name, newValue: extend(deep, clone, copy) });\n\n\t\t\t\t\t// Don't bring in undefined values\n\t\t\t\t\t} else if (typeof copy !== 'undefined') {\n\t\t\t\t\t\tsetProperty(target, { name: name, newValue: copy });\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// Return the modified object\n\treturn target;\n};\n","// http://www.w3.org/TR/CSS21/grammar.html\n// https://github.com/visionmedia/css-parse/pull/49#issuecomment-30088027\nvar COMMENT_REGEX = /\\/\\*[^*]*\\*+([^/*][^*]*\\*+)*\\//g;\n\nvar NEWLINE_REGEX = /\\n/g;\nvar WHITESPACE_REGEX = /^\\s*/;\n\n// declaration\nvar PROPERTY_REGEX = /^(\\*?[-#/*\\\\\\w]+(\\[[0-9a-z_-]+\\])?)\\s*/;\nvar COLON_REGEX = /^:\\s*/;\nvar VALUE_REGEX = /^((?:'(?:\\\\'|.)*?'|\"(?:\\\\\"|.)*?\"|\\([^)]*?\\)|[^};])+)/;\nvar SEMICOLON_REGEX = /^[;\\s]*/;\n\n// https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String/Trim#Polyfill\nvar TRIM_REGEX = /^\\s+|\\s+$/g;\n\n// strings\nvar NEWLINE = '\\n';\nvar FORWARD_SLASH = '/';\nvar ASTERISK = '*';\nvar EMPTY_STRING = '';\n\n// types\nvar TYPE_COMMENT = 'comment';\nvar TYPE_DECLARATION = 'declaration';\n\n/**\n * @param {String} style\n * @param {Object} [options]\n * @return {Object[]}\n * @throws {TypeError}\n * @throws {Error}\n */\nmodule.exports = function(style, options) {\n  if (typeof style !== 'string') {\n    throw new TypeError('First argument must be a string');\n  }\n\n  if (!style) return [];\n\n  options = options || {};\n\n  /**\n   * Positional.\n   */\n  var lineno = 1;\n  var column = 1;\n\n  /**\n   * Update lineno and column based on `str`.\n   *\n   * @param {String} str\n   */\n  function updatePosition(str) {\n    var lines = str.match(NEWLINE_REGEX);\n    if (lines) lineno += lines.length;\n    var i = str.lastIndexOf(NEWLINE);\n    column = ~i ? str.length - i : column + str.length;\n  }\n\n  /**\n   * Mark position and patch `node.position`.\n   *\n   * @return {Function}\n   */\n  function position() {\n    var start = { line: lineno, column: column };\n    return function(node) {\n      node.position = new Position(start);\n      whitespace();\n      return node;\n    };\n  }\n\n  /**\n   * Store position information for a node.\n   *\n   * @constructor\n   * @property {Object} start\n   * @property {Object} end\n   * @property {undefined|String} source\n   */\n  function Position(start) {\n    this.start = start;\n    this.end = { line: lineno, column: column };\n    this.source = options.source;\n  }\n\n  /**\n   * Non-enumerable source string.\n   */\n  Position.prototype.content = style;\n\n  var errorsList = [];\n\n  /**\n   * Error `msg`.\n   *\n   * @param {String} msg\n   * @throws {Error}\n   */\n  function error(msg) {\n    var err = new Error(\n      options.source + ':' + lineno + ':' + column + ': ' + msg\n    );\n    err.reason = msg;\n    err.filename = options.source;\n    err.line = lineno;\n    err.column = column;\n    err.source = style;\n\n    if (options.silent) {\n      errorsList.push(err);\n    } else {\n      throw err;\n    }\n  }\n\n  /**\n   * Match `re` and return captures.\n   *\n   * @param {RegExp} re\n   * @return {undefined|Array}\n   */\n  function match(re) {\n    var m = re.exec(style);\n    if (!m) return;\n    var str = m[0];\n    updatePosition(str);\n    style = style.slice(str.length);\n    return m;\n  }\n\n  /**\n   * Parse whitespace.\n   */\n  function whitespace() {\n    match(WHITESPACE_REGEX);\n  }\n\n  /**\n   * Parse comments.\n   *\n   * @param {Object[]} [rules]\n   * @return {Object[]}\n   */\n  function comments(rules) {\n    var c;\n    rules = rules || [];\n    while ((c = comment())) {\n      if (c !== false) {\n        rules.push(c);\n      }\n    }\n    return rules;\n  }\n\n  /**\n   * Parse comment.\n   *\n   * @return {Object}\n   * @throws {Error}\n   */\n  function comment() {\n    var pos = position();\n    if (FORWARD_SLASH != style.charAt(0) || ASTERISK != style.charAt(1)) return;\n\n    var i = 2;\n    while (\n      EMPTY_STRING != style.charAt(i) &&\n      (ASTERISK != style.charAt(i) || FORWARD_SLASH != style.charAt(i + 1))\n    ) {\n      ++i;\n    }\n    i += 2;\n\n    if (EMPTY_STRING === style.charAt(i - 1)) {\n      return error('End of comment missing');\n    }\n\n    var str = style.slice(2, i - 2);\n    column += 2;\n    updatePosition(str);\n    style = style.slice(i);\n    column += 2;\n\n    return pos({\n      type: TYPE_COMMENT,\n      comment: str\n    });\n  }\n\n  /**\n   * Parse declaration.\n   *\n   * @return {Object}\n   * @throws {Error}\n   */\n  function declaration() {\n    var pos = position();\n\n    // prop\n    var prop = match(PROPERTY_REGEX);\n    if (!prop) return;\n    comment();\n\n    // :\n    if (!match(COLON_REGEX)) return error(\"property missing ':'\");\n\n    // val\n    var val = match(VALUE_REGEX);\n\n    var ret = pos({\n      type: TYPE_DECLARATION,\n      property: trim(prop[0].replace(COMMENT_REGEX, EMPTY_STRING)),\n      value: val\n        ? trim(val[0].replace(COMMENT_REGEX, EMPTY_STRING))\n        : EMPTY_STRING\n    });\n\n    // ;\n    match(SEMICOLON_REGEX);\n\n    return ret;\n  }\n\n  /**\n   * Parse declarations.\n   *\n   * @return {Object[]}\n   */\n  function declarations() {\n    var decls = [];\n\n    comments(decls);\n\n    // declarations\n    var decl;\n    while ((decl = declaration())) {\n      if (decl !== false) {\n        decls.push(decl);\n        comments(decls);\n      }\n    }\n\n    return decls;\n  }\n\n  whitespace();\n  return declarations();\n};\n\n/**\n * Trim `str`.\n *\n * @param {String} str\n * @return {String}\n */\nfunction trim(str) {\n  return str ? str.replace(TRIM_REGEX, EMPTY_STRING) : EMPTY_STRING;\n}\n","/*!\n    localForage -- Offline Storage, Improved\n    Version 1.10.0\n    https://localforage.github.io/localForage\n    (c) 2013-2017 Mozilla, Apache License 2.0\n*/\n(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.localforage = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw (f.code=\"MODULE_NOT_FOUND\", f)}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(_dereq_,module,exports){\n(function (global){\n'use strict';\nvar Mutation = global.MutationObserver || global.WebKitMutationObserver;\n\nvar scheduleDrain;\n\n{\n  if (Mutation) {\n    var called = 0;\n    var observer = new Mutation(nextTick);\n    var element = global.document.createTextNode('');\n    observer.observe(element, {\n      characterData: true\n    });\n    scheduleDrain = function () {\n      element.data = (called = ++called % 2);\n    };\n  } else if (!global.setImmediate && typeof global.MessageChannel !== 'undefined') {\n    var channel = new global.MessageChannel();\n    channel.port1.onmessage = nextTick;\n    scheduleDrain = function () {\n      channel.port2.postMessage(0);\n    };\n  } else if ('document' in global && 'onreadystatechange' in global.document.createElement('script')) {\n    scheduleDrain = function () {\n\n      // Create a <script> element; its readystatechange event will be fired asynchronously once it is inserted\n      // into the document. Do so, thus queuing up the task. Remember to clean up once it's been called.\n      var scriptEl = global.document.createElement('script');\n      scriptEl.onreadystatechange = function () {\n        nextTick();\n\n        scriptEl.onreadystatechange = null;\n        scriptEl.parentNode.removeChild(scriptEl);\n        scriptEl = null;\n      };\n      global.document.documentElement.appendChild(scriptEl);\n    };\n  } else {\n    scheduleDrain = function () {\n      setTimeout(nextTick, 0);\n    };\n  }\n}\n\nvar draining;\nvar queue = [];\n//named nextTick for less confusing stack traces\nfunction nextTick() {\n  draining = true;\n  var i, oldQueue;\n  var len = queue.length;\n  while (len) {\n    oldQueue = queue;\n    queue = [];\n    i = -1;\n    while (++i < len) {\n      oldQueue[i]();\n    }\n    len = queue.length;\n  }\n  draining = false;\n}\n\nmodule.exports = immediate;\nfunction immediate(task) {\n  if (queue.push(task) === 1 && !draining) {\n    scheduleDrain();\n  }\n}\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{}],2:[function(_dereq_,module,exports){\n'use strict';\nvar immediate = _dereq_(1);\n\n/* istanbul ignore next */\nfunction INTERNAL() {}\n\nvar handlers = {};\n\nvar REJECTED = ['REJECTED'];\nvar FULFILLED = ['FULFILLED'];\nvar PENDING = ['PENDING'];\n\nmodule.exports = Promise;\n\nfunction Promise(resolver) {\n  if (typeof resolver !== 'function') {\n    throw new TypeError('resolver must be a function');\n  }\n  this.state = PENDING;\n  this.queue = [];\n  this.outcome = void 0;\n  if (resolver !== INTERNAL) {\n    safelyResolveThenable(this, resolver);\n  }\n}\n\nPromise.prototype[\"catch\"] = function (onRejected) {\n  return this.then(null, onRejected);\n};\nPromise.prototype.then = function (onFulfilled, onRejected) {\n  if (typeof onFulfilled !== 'function' && this.state === FULFILLED ||\n    typeof onRejected !== 'function' && this.state === REJECTED) {\n    return this;\n  }\n  var promise = new this.constructor(INTERNAL);\n  if (this.state !== PENDING) {\n    var resolver = this.state === FULFILLED ? onFulfilled : onRejected;\n    unwrap(promise, resolver, this.outcome);\n  } else {\n    this.queue.push(new QueueItem(promise, onFulfilled, onRejected));\n  }\n\n  return promise;\n};\nfunction QueueItem(promise, onFulfilled, onRejected) {\n  this.promise = promise;\n  if (typeof onFulfilled === 'function') {\n    this.onFulfilled = onFulfilled;\n    this.callFulfilled = this.otherCallFulfilled;\n  }\n  if (typeof onRejected === 'function') {\n    this.onRejected = onRejected;\n    this.callRejected = this.otherCallRejected;\n  }\n}\nQueueItem.prototype.callFulfilled = function (value) {\n  handlers.resolve(this.promise, value);\n};\nQueueItem.prototype.otherCallFulfilled = function (value) {\n  unwrap(this.promise, this.onFulfilled, value);\n};\nQueueItem.prototype.callRejected = function (value) {\n  handlers.reject(this.promise, value);\n};\nQueueItem.prototype.otherCallRejected = function (value) {\n  unwrap(this.promise, this.onRejected, value);\n};\n\nfunction unwrap(promise, func, value) {\n  immediate(function () {\n    var returnValue;\n    try {\n      returnValue = func(value);\n    } catch (e) {\n      return handlers.reject(promise, e);\n    }\n    if (returnValue === promise) {\n      handlers.reject(promise, new TypeError('Cannot resolve promise with itself'));\n    } else {\n      handlers.resolve(promise, returnValue);\n    }\n  });\n}\n\nhandlers.resolve = function (self, value) {\n  var result = tryCatch(getThen, value);\n  if (result.status === 'error') {\n    return handlers.reject(self, result.value);\n  }\n  var thenable = result.value;\n\n  if (thenable) {\n    safelyResolveThenable(self, thenable);\n  } else {\n    self.state = FULFILLED;\n    self.outcome = value;\n    var i = -1;\n    var len = self.queue.length;\n    while (++i < len) {\n      self.queue[i].callFulfilled(value);\n    }\n  }\n  return self;\n};\nhandlers.reject = function (self, error) {\n  self.state = REJECTED;\n  self.outcome = error;\n  var i = -1;\n  var len = self.queue.length;\n  while (++i < len) {\n    self.queue[i].callRejected(error);\n  }\n  return self;\n};\n\nfunction getThen(obj) {\n  // Make sure we only access the accessor once as required by the spec\n  var then = obj && obj.then;\n  if (obj && (typeof obj === 'object' || typeof obj === 'function') && typeof then === 'function') {\n    return function appyThen() {\n      then.apply(obj, arguments);\n    };\n  }\n}\n\nfunction safelyResolveThenable(self, thenable) {\n  // Either fulfill, reject or reject with error\n  var called = false;\n  function onError(value) {\n    if (called) {\n      return;\n    }\n    called = true;\n    handlers.reject(self, value);\n  }\n\n  function onSuccess(value) {\n    if (called) {\n      return;\n    }\n    called = true;\n    handlers.resolve(self, value);\n  }\n\n  function tryToUnwrap() {\n    thenable(onSuccess, onError);\n  }\n\n  var result = tryCatch(tryToUnwrap);\n  if (result.status === 'error') {\n    onError(result.value);\n  }\n}\n\nfunction tryCatch(func, value) {\n  var out = {};\n  try {\n    out.value = func(value);\n    out.status = 'success';\n  } catch (e) {\n    out.status = 'error';\n    out.value = e;\n  }\n  return out;\n}\n\nPromise.resolve = resolve;\nfunction resolve(value) {\n  if (value instanceof this) {\n    return value;\n  }\n  return handlers.resolve(new this(INTERNAL), value);\n}\n\nPromise.reject = reject;\nfunction reject(reason) {\n  var promise = new this(INTERNAL);\n  return handlers.reject(promise, reason);\n}\n\nPromise.all = all;\nfunction all(iterable) {\n  var self = this;\n  if (Object.prototype.toString.call(iterable) !== '[object Array]') {\n    return this.reject(new TypeError('must be an array'));\n  }\n\n  var len = iterable.length;\n  var called = false;\n  if (!len) {\n    return this.resolve([]);\n  }\n\n  var values = new Array(len);\n  var resolved = 0;\n  var i = -1;\n  var promise = new this(INTERNAL);\n\n  while (++i < len) {\n    allResolver(iterable[i], i);\n  }\n  return promise;\n  function allResolver(value, i) {\n    self.resolve(value).then(resolveFromAll, function (error) {\n      if (!called) {\n        called = true;\n        handlers.reject(promise, error);\n      }\n    });\n    function resolveFromAll(outValue) {\n      values[i] = outValue;\n      if (++resolved === len && !called) {\n        called = true;\n        handlers.resolve(promise, values);\n      }\n    }\n  }\n}\n\nPromise.race = race;\nfunction race(iterable) {\n  var self = this;\n  if (Object.prototype.toString.call(iterable) !== '[object Array]') {\n    return this.reject(new TypeError('must be an array'));\n  }\n\n  var len = iterable.length;\n  var called = false;\n  if (!len) {\n    return this.resolve([]);\n  }\n\n  var i = -1;\n  var promise = new this(INTERNAL);\n\n  while (++i < len) {\n    resolver(iterable[i]);\n  }\n  return promise;\n  function resolver(value) {\n    self.resolve(value).then(function (response) {\n      if (!called) {\n        called = true;\n        handlers.resolve(promise, response);\n      }\n    }, function (error) {\n      if (!called) {\n        called = true;\n        handlers.reject(promise, error);\n      }\n    });\n  }\n}\n\n},{\"1\":1}],3:[function(_dereq_,module,exports){\n(function (global){\n'use strict';\nif (typeof global.Promise !== 'function') {\n  global.Promise = _dereq_(2);\n}\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"2\":2}],4:[function(_dereq_,module,exports){\n'use strict';\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction getIDB() {\n    /* global indexedDB,webkitIndexedDB,mozIndexedDB,OIndexedDB,msIndexedDB */\n    try {\n        if (typeof indexedDB !== 'undefined') {\n            return indexedDB;\n        }\n        if (typeof webkitIndexedDB !== 'undefined') {\n            return webkitIndexedDB;\n        }\n        if (typeof mozIndexedDB !== 'undefined') {\n            return mozIndexedDB;\n        }\n        if (typeof OIndexedDB !== 'undefined') {\n            return OIndexedDB;\n        }\n        if (typeof msIndexedDB !== 'undefined') {\n            return msIndexedDB;\n        }\n    } catch (e) {\n        return;\n    }\n}\n\nvar idb = getIDB();\n\nfunction isIndexedDBValid() {\n    try {\n        // Initialize IndexedDB; fall back to vendor-prefixed versions\n        // if needed.\n        if (!idb || !idb.open) {\n            return false;\n        }\n        // We mimic PouchDB here;\n        //\n        // We test for openDatabase because IE Mobile identifies itself\n        // as Safari. Oh the lulz...\n        var isSafari = typeof openDatabase !== 'undefined' && /(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent) && !/Chrome/.test(navigator.userAgent) && !/BlackBerry/.test(navigator.platform);\n\n        var hasFetch = typeof fetch === 'function' && fetch.toString().indexOf('[native code') !== -1;\n\n        // Safari <10.1 does not meet our requirements for IDB support\n        // (see: https://github.com/pouchdb/pouchdb/issues/5572).\n        // Safari 10.1 shipped with fetch, we can use that to detect it.\n        // Note: this creates issues with `window.fetch` polyfills and\n        // overrides; see:\n        // https://github.com/localForage/localForage/issues/856\n        return (!isSafari || hasFetch) && typeof indexedDB !== 'undefined' &&\n        // some outdated implementations of IDB that appear on Samsung\n        // and HTC Android devices <4.4 are missing IDBKeyRange\n        // See: https://github.com/mozilla/localForage/issues/128\n        // See: https://github.com/mozilla/localForage/issues/272\n        typeof IDBKeyRange !== 'undefined';\n    } catch (e) {\n        return false;\n    }\n}\n\n// Abstracts constructing a Blob object, so it also works in older\n// browsers that don't support the native Blob constructor. (i.e.\n// old QtWebKit versions, at least).\n// Abstracts constructing a Blob object, so it also works in older\n// browsers that don't support the native Blob constructor. (i.e.\n// old QtWebKit versions, at least).\nfunction createBlob(parts, properties) {\n    /* global BlobBuilder,MSBlobBuilder,MozBlobBuilder,WebKitBlobBuilder */\n    parts = parts || [];\n    properties = properties || {};\n    try {\n        return new Blob(parts, properties);\n    } catch (e) {\n        if (e.name !== 'TypeError') {\n            throw e;\n        }\n        var Builder = typeof BlobBuilder !== 'undefined' ? BlobBuilder : typeof MSBlobBuilder !== 'undefined' ? MSBlobBuilder : typeof MozBlobBuilder !== 'undefined' ? MozBlobBuilder : WebKitBlobBuilder;\n        var builder = new Builder();\n        for (var i = 0; i < parts.length; i += 1) {\n            builder.append(parts[i]);\n        }\n        return builder.getBlob(properties.type);\n    }\n}\n\n// This is CommonJS because lie is an external dependency, so Rollup\n// can just ignore it.\nif (typeof Promise === 'undefined') {\n    // In the \"nopromises\" build this will just throw if you don't have\n    // a global promise object, but it would throw anyway later.\n    _dereq_(3);\n}\nvar Promise$1 = Promise;\n\nfunction executeCallback(promise, callback) {\n    if (callback) {\n        promise.then(function (result) {\n            callback(null, result);\n        }, function (error) {\n            callback(error);\n        });\n    }\n}\n\nfunction executeTwoCallbacks(promise, callback, errorCallback) {\n    if (typeof callback === 'function') {\n        promise.then(callback);\n    }\n\n    if (typeof errorCallback === 'function') {\n        promise[\"catch\"](errorCallback);\n    }\n}\n\nfunction normalizeKey(key) {\n    // Cast the key to a string, as that's all we can set as a key.\n    if (typeof key !== 'string') {\n        console.warn(key + ' used as a key, but it is not a string.');\n        key = String(key);\n    }\n\n    return key;\n}\n\nfunction getCallback() {\n    if (arguments.length && typeof arguments[arguments.length - 1] === 'function') {\n        return arguments[arguments.length - 1];\n    }\n}\n\n// Some code originally from async_storage.js in\n// [Gaia](https://github.com/mozilla-b2g/gaia).\n\nvar DETECT_BLOB_SUPPORT_STORE = 'local-forage-detect-blob-support';\nvar supportsBlobs = void 0;\nvar dbContexts = {};\nvar toString = Object.prototype.toString;\n\n// Transaction Modes\nvar READ_ONLY = 'readonly';\nvar READ_WRITE = 'readwrite';\n\n// Transform a binary string to an array buffer, because otherwise\n// weird stuff happens when you try to work with the binary string directly.\n// It is known.\n// From http://stackoverflow.com/questions/14967647/ (continues on next line)\n// encode-decode-image-with-base64-breaks-image (2013-04-21)\nfunction _binStringToArrayBuffer(bin) {\n    var length = bin.length;\n    var buf = new ArrayBuffer(length);\n    var arr = new Uint8Array(buf);\n    for (var i = 0; i < length; i++) {\n        arr[i] = bin.charCodeAt(i);\n    }\n    return buf;\n}\n\n//\n// Blobs are not supported in all versions of IndexedDB, notably\n// Chrome <37 and Android <5. In those versions, storing a blob will throw.\n//\n// Various other blob bugs exist in Chrome v37-42 (inclusive).\n// Detecting them is expensive and confusing to users, and Chrome 37-42\n// is at very low usage worldwide, so we do a hacky userAgent check instead.\n//\n// content-type bug: https://code.google.com/p/chromium/issues/detail?id=408120\n// 404 bug: https://code.google.com/p/chromium/issues/detail?id=447916\n// FileReader bug: https://code.google.com/p/chromium/issues/detail?id=447836\n//\n// Code borrowed from PouchDB. See:\n// https://github.com/pouchdb/pouchdb/blob/master/packages/node_modules/pouchdb-adapter-idb/src/blobSupport.js\n//\nfunction _checkBlobSupportWithoutCaching(idb) {\n    return new Promise$1(function (resolve) {\n        var txn = idb.transaction(DETECT_BLOB_SUPPORT_STORE, READ_WRITE);\n        var blob = createBlob(['']);\n        txn.objectStore(DETECT_BLOB_SUPPORT_STORE).put(blob, 'key');\n\n        txn.onabort = function (e) {\n            // If the transaction aborts now its due to not being able to\n            // write to the database, likely due to the disk being full\n            e.preventDefault();\n            e.stopPropagation();\n            resolve(false);\n        };\n\n        txn.oncomplete = function () {\n            var matchedChrome = navigator.userAgent.match(/Chrome\\/(\\d+)/);\n            var matchedEdge = navigator.userAgent.match(/Edge\\//);\n            // MS Edge pretends to be Chrome 42:\n            // https://msdn.microsoft.com/en-us/library/hh869301%28v=vs.85%29.aspx\n            resolve(matchedEdge || !matchedChrome || parseInt(matchedChrome[1], 10) >= 43);\n        };\n    })[\"catch\"](function () {\n        return false; // error, so assume unsupported\n    });\n}\n\nfunction _checkBlobSupport(idb) {\n    if (typeof supportsBlobs === 'boolean') {\n        return Promise$1.resolve(supportsBlobs);\n    }\n    return _checkBlobSupportWithoutCaching(idb).then(function (value) {\n        supportsBlobs = value;\n        return supportsBlobs;\n    });\n}\n\nfunction _deferReadiness(dbInfo) {\n    var dbContext = dbContexts[dbInfo.name];\n\n    // Create a deferred object representing the current database operation.\n    var deferredOperation = {};\n\n    deferredOperation.promise = new Promise$1(function (resolve, reject) {\n        deferredOperation.resolve = resolve;\n        deferredOperation.reject = reject;\n    });\n\n    // Enqueue the deferred operation.\n    dbContext.deferredOperations.push(deferredOperation);\n\n    // Chain its promise to the database readiness.\n    if (!dbContext.dbReady) {\n        dbContext.dbReady = deferredOperation.promise;\n    } else {\n        dbContext.dbReady = dbContext.dbReady.then(function () {\n            return deferredOperation.promise;\n        });\n    }\n}\n\nfunction _advanceReadiness(dbInfo) {\n    var dbContext = dbContexts[dbInfo.name];\n\n    // Dequeue a deferred operation.\n    var deferredOperation = dbContext.deferredOperations.pop();\n\n    // Resolve its promise (which is part of the database readiness\n    // chain of promises).\n    if (deferredOperation) {\n        deferredOperation.resolve();\n        return deferredOperation.promise;\n    }\n}\n\nfunction _rejectReadiness(dbInfo, err) {\n    var dbContext = dbContexts[dbInfo.name];\n\n    // Dequeue a deferred operation.\n    var deferredOperation = dbContext.deferredOperations.pop();\n\n    // Reject its promise (which is part of the database readiness\n    // chain of promises).\n    if (deferredOperation) {\n        deferredOperation.reject(err);\n        return deferredOperation.promise;\n    }\n}\n\nfunction _getConnection(dbInfo, upgradeNeeded) {\n    return new Promise$1(function (resolve, reject) {\n        dbContexts[dbInfo.name] = dbContexts[dbInfo.name] || createDbContext();\n\n        if (dbInfo.db) {\n            if (upgradeNeeded) {\n                _deferReadiness(dbInfo);\n                dbInfo.db.close();\n            } else {\n                return resolve(dbInfo.db);\n            }\n        }\n\n        var dbArgs = [dbInfo.name];\n\n        if (upgradeNeeded) {\n            dbArgs.push(dbInfo.version);\n        }\n\n        var openreq = idb.open.apply(idb, dbArgs);\n\n        if (upgradeNeeded) {\n            openreq.onupgradeneeded = function (e) {\n                var db = openreq.result;\n                try {\n                    db.createObjectStore(dbInfo.storeName);\n                    if (e.oldVersion <= 1) {\n                        // Added when support for blob shims was added\n                        db.createObjectStore(DETECT_BLOB_SUPPORT_STORE);\n                    }\n                } catch (ex) {\n                    if (ex.name === 'ConstraintError') {\n                        console.warn('The database \"' + dbInfo.name + '\"' + ' has been upgraded from version ' + e.oldVersion + ' to version ' + e.newVersion + ', but the storage \"' + dbInfo.storeName + '\" already exists.');\n                    } else {\n                        throw ex;\n                    }\n                }\n            };\n        }\n\n        openreq.onerror = function (e) {\n            e.preventDefault();\n            reject(openreq.error);\n        };\n\n        openreq.onsuccess = function () {\n            var db = openreq.result;\n            db.onversionchange = function (e) {\n                // Triggered when the database is modified (e.g. adding an objectStore) or\n                // deleted (even when initiated by other sessions in different tabs).\n                // Closing the connection here prevents those operations from being blocked.\n                // If the database is accessed again later by this instance, the connection\n                // will be reopened or the database recreated as needed.\n                e.target.close();\n            };\n            resolve(db);\n            _advanceReadiness(dbInfo);\n        };\n    });\n}\n\nfunction _getOriginalConnection(dbInfo) {\n    return _getConnection(dbInfo, false);\n}\n\nfunction _getUpgradedConnection(dbInfo) {\n    return _getConnection(dbInfo, true);\n}\n\nfunction _isUpgradeNeeded(dbInfo, defaultVersion) {\n    if (!dbInfo.db) {\n        return true;\n    }\n\n    var isNewStore = !dbInfo.db.objectStoreNames.contains(dbInfo.storeName);\n    var isDowngrade = dbInfo.version < dbInfo.db.version;\n    var isUpgrade = dbInfo.version > dbInfo.db.version;\n\n    if (isDowngrade) {\n        // If the version is not the default one\n        // then warn for impossible downgrade.\n        if (dbInfo.version !== defaultVersion) {\n            console.warn('The database \"' + dbInfo.name + '\"' + \" can't be downgraded from version \" + dbInfo.db.version + ' to version ' + dbInfo.version + '.');\n        }\n        // Align the versions to prevent errors.\n        dbInfo.version = dbInfo.db.version;\n    }\n\n    if (isUpgrade || isNewStore) {\n        // If the store is new then increment the version (if needed).\n        // This will trigger an \"upgradeneeded\" event which is required\n        // for creating a store.\n        if (isNewStore) {\n            var incVersion = dbInfo.db.version + 1;\n            if (incVersion > dbInfo.version) {\n                dbInfo.version = incVersion;\n            }\n        }\n\n        return true;\n    }\n\n    return false;\n}\n\n// encode a blob for indexeddb engines that don't support blobs\nfunction _encodeBlob(blob) {\n    return new Promise$1(function (resolve, reject) {\n        var reader = new FileReader();\n        reader.onerror = reject;\n        reader.onloadend = function (e) {\n            var base64 = btoa(e.target.result || '');\n            resolve({\n                __local_forage_encoded_blob: true,\n                data: base64,\n                type: blob.type\n            });\n        };\n        reader.readAsBinaryString(blob);\n    });\n}\n\n// decode an encoded blob\nfunction _decodeBlob(encodedBlob) {\n    var arrayBuff = _binStringToArrayBuffer(atob(encodedBlob.data));\n    return createBlob([arrayBuff], { type: encodedBlob.type });\n}\n\n// is this one of our fancy encoded blobs?\nfunction _isEncodedBlob(value) {\n    return value && value.__local_forage_encoded_blob;\n}\n\n// Specialize the default `ready()` function by making it dependent\n// on the current database operations. Thus, the driver will be actually\n// ready when it's been initialized (default) *and* there are no pending\n// operations on the database (initiated by some other instances).\nfunction _fullyReady(callback) {\n    var self = this;\n\n    var promise = self._initReady().then(function () {\n        var dbContext = dbContexts[self._dbInfo.name];\n\n        if (dbContext && dbContext.dbReady) {\n            return dbContext.dbReady;\n        }\n    });\n\n    executeTwoCallbacks(promise, callback, callback);\n    return promise;\n}\n\n// Try to establish a new db connection to replace the\n// current one which is broken (i.e. experiencing\n// InvalidStateError while creating a transaction).\nfunction _tryReconnect(dbInfo) {\n    _deferReadiness(dbInfo);\n\n    var dbContext = dbContexts[dbInfo.name];\n    var forages = dbContext.forages;\n\n    for (var i = 0; i < forages.length; i++) {\n        var forage = forages[i];\n        if (forage._dbInfo.db) {\n            forage._dbInfo.db.close();\n            forage._dbInfo.db = null;\n        }\n    }\n    dbInfo.db = null;\n\n    return _getOriginalConnection(dbInfo).then(function (db) {\n        dbInfo.db = db;\n        if (_isUpgradeNeeded(dbInfo)) {\n            // Reopen the database for upgrading.\n            return _getUpgradedConnection(dbInfo);\n        }\n        return db;\n    }).then(function (db) {\n        // store the latest db reference\n        // in case the db was upgraded\n        dbInfo.db = dbContext.db = db;\n        for (var i = 0; i < forages.length; i++) {\n            forages[i]._dbInfo.db = db;\n        }\n    })[\"catch\"](function (err) {\n        _rejectReadiness(dbInfo, err);\n        throw err;\n    });\n}\n\n// FF doesn't like Promises (micro-tasks) and IDDB store operations,\n// so we have to do it with callbacks\nfunction createTransaction(dbInfo, mode, callback, retries) {\n    if (retries === undefined) {\n        retries = 1;\n    }\n\n    try {\n        var tx = dbInfo.db.transaction(dbInfo.storeName, mode);\n        callback(null, tx);\n    } catch (err) {\n        if (retries > 0 && (!dbInfo.db || err.name === 'InvalidStateError' || err.name === 'NotFoundError')) {\n            return Promise$1.resolve().then(function () {\n                if (!dbInfo.db || err.name === 'NotFoundError' && !dbInfo.db.objectStoreNames.contains(dbInfo.storeName) && dbInfo.version <= dbInfo.db.version) {\n                    // increase the db version, to create the new ObjectStore\n                    if (dbInfo.db) {\n                        dbInfo.version = dbInfo.db.version + 1;\n                    }\n                    // Reopen the database for upgrading.\n                    return _getUpgradedConnection(dbInfo);\n                }\n            }).then(function () {\n                return _tryReconnect(dbInfo).then(function () {\n                    createTransaction(dbInfo, mode, callback, retries - 1);\n                });\n            })[\"catch\"](callback);\n        }\n\n        callback(err);\n    }\n}\n\nfunction createDbContext() {\n    return {\n        // Running localForages sharing a database.\n        forages: [],\n        // Shared database.\n        db: null,\n        // Database readiness (promise).\n        dbReady: null,\n        // Deferred operations on the database.\n        deferredOperations: []\n    };\n}\n\n// Open the IndexedDB database (automatically creates one if one didn't\n// previously exist), using any options set in the config.\nfunction _initStorage(options) {\n    var self = this;\n    var dbInfo = {\n        db: null\n    };\n\n    if (options) {\n        for (var i in options) {\n            dbInfo[i] = options[i];\n        }\n    }\n\n    // Get the current context of the database;\n    var dbContext = dbContexts[dbInfo.name];\n\n    // ...or create a new context.\n    if (!dbContext) {\n        dbContext = createDbContext();\n        // Register the new context in the global container.\n        dbContexts[dbInfo.name] = dbContext;\n    }\n\n    // Register itself as a running localForage in the current context.\n    dbContext.forages.push(self);\n\n    // Replace the default `ready()` function with the specialized one.\n    if (!self._initReady) {\n        self._initReady = self.ready;\n        self.ready = _fullyReady;\n    }\n\n    // Create an array of initialization states of the related localForages.\n    var initPromises = [];\n\n    function ignoreErrors() {\n        // Don't handle errors here,\n        // just makes sure related localForages aren't pending.\n        return Promise$1.resolve();\n    }\n\n    for (var j = 0; j < dbContext.forages.length; j++) {\n        var forage = dbContext.forages[j];\n        if (forage !== self) {\n            // Don't wait for itself...\n            initPromises.push(forage._initReady()[\"catch\"](ignoreErrors));\n        }\n    }\n\n    // Take a snapshot of the related localForages.\n    var forages = dbContext.forages.slice(0);\n\n    // Initialize the connection process only when\n    // all the related localForages aren't pending.\n    return Promise$1.all(initPromises).then(function () {\n        dbInfo.db = dbContext.db;\n        // Get the connection or open a new one without upgrade.\n        return _getOriginalConnection(dbInfo);\n    }).then(function (db) {\n        dbInfo.db = db;\n        if (_isUpgradeNeeded(dbInfo, self._defaultConfig.version)) {\n            // Reopen the database for upgrading.\n            return _getUpgradedConnection(dbInfo);\n        }\n        return db;\n    }).then(function (db) {\n        dbInfo.db = dbContext.db = db;\n        self._dbInfo = dbInfo;\n        // Share the final connection amongst related localForages.\n        for (var k = 0; k < forages.length; k++) {\n            var forage = forages[k];\n            if (forage !== self) {\n                // Self is already up-to-date.\n                forage._dbInfo.db = dbInfo.db;\n                forage._dbInfo.version = dbInfo.version;\n            }\n        }\n    });\n}\n\nfunction getItem(key, callback) {\n    var self = this;\n\n    key = normalizeKey(key);\n\n    var promise = new Promise$1(function (resolve, reject) {\n        self.ready().then(function () {\n            createTransaction(self._dbInfo, READ_ONLY, function (err, transaction) {\n                if (err) {\n                    return reject(err);\n                }\n\n                try {\n                    var store = transaction.objectStore(self._dbInfo.storeName);\n                    var req = store.get(key);\n\n                    req.onsuccess = function () {\n                        var value = req.result;\n                        if (value === undefined) {\n                            value = null;\n                        }\n                        if (_isEncodedBlob(value)) {\n                            value = _decodeBlob(value);\n                        }\n                        resolve(value);\n                    };\n\n                    req.onerror = function () {\n                        reject(req.error);\n                    };\n                } catch (e) {\n                    reject(e);\n                }\n            });\n        })[\"catch\"](reject);\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\n// Iterate over all items stored in database.\nfunction iterate(iterator, callback) {\n    var self = this;\n\n    var promise = new Promise$1(function (resolve, reject) {\n        self.ready().then(function () {\n            createTransaction(self._dbInfo, READ_ONLY, function (err, transaction) {\n                if (err) {\n                    return reject(err);\n                }\n\n                try {\n                    var store = transaction.objectStore(self._dbInfo.storeName);\n                    var req = store.openCursor();\n                    var iterationNumber = 1;\n\n                    req.onsuccess = function () {\n                        var cursor = req.result;\n\n                        if (cursor) {\n                            var value = cursor.value;\n                            if (_isEncodedBlob(value)) {\n                                value = _decodeBlob(value);\n                            }\n                            var result = iterator(value, cursor.key, iterationNumber++);\n\n                            // when the iterator callback returns any\n                            // (non-`undefined`) value, then we stop\n                            // the iteration immediately\n                            if (result !== void 0) {\n                                resolve(result);\n                            } else {\n                                cursor[\"continue\"]();\n                            }\n                        } else {\n                            resolve();\n                        }\n                    };\n\n                    req.onerror = function () {\n                        reject(req.error);\n                    };\n                } catch (e) {\n                    reject(e);\n                }\n            });\n        })[\"catch\"](reject);\n    });\n\n    executeCallback(promise, callback);\n\n    return promise;\n}\n\nfunction setItem(key, value, callback) {\n    var self = this;\n\n    key = normalizeKey(key);\n\n    var promise = new Promise$1(function (resolve, reject) {\n        var dbInfo;\n        self.ready().then(function () {\n            dbInfo = self._dbInfo;\n            if (toString.call(value) === '[object Blob]') {\n                return _checkBlobSupport(dbInfo.db).then(function (blobSupport) {\n                    if (blobSupport) {\n                        return value;\n                    }\n                    return _encodeBlob(value);\n                });\n            }\n            return value;\n        }).then(function (value) {\n            createTransaction(self._dbInfo, READ_WRITE, function (err, transaction) {\n                if (err) {\n                    return reject(err);\n                }\n\n                try {\n                    var store = transaction.objectStore(self._dbInfo.storeName);\n\n                    // The reason we don't _save_ null is because IE 10 does\n                    // not support saving the `null` type in IndexedDB. How\n                    // ironic, given the bug below!\n                    // See: https://github.com/mozilla/localForage/issues/161\n                    if (value === null) {\n                        value = undefined;\n                    }\n\n                    var req = store.put(value, key);\n\n                    transaction.oncomplete = function () {\n                        // Cast to undefined so the value passed to\n                        // callback/promise is the same as what one would get out\n                        // of `getItem()` later. This leads to some weirdness\n                        // (setItem('foo', undefined) will return `null`), but\n                        // it's not my fault localStorage is our baseline and that\n                        // it's weird.\n                        if (value === undefined) {\n                            value = null;\n                        }\n\n                        resolve(value);\n                    };\n                    transaction.onabort = transaction.onerror = function () {\n                        var err = req.error ? req.error : req.transaction.error;\n                        reject(err);\n                    };\n                } catch (e) {\n                    reject(e);\n                }\n            });\n        })[\"catch\"](reject);\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\nfunction removeItem(key, callback) {\n    var self = this;\n\n    key = normalizeKey(key);\n\n    var promise = new Promise$1(function (resolve, reject) {\n        self.ready().then(function () {\n            createTransaction(self._dbInfo, READ_WRITE, function (err, transaction) {\n                if (err) {\n                    return reject(err);\n                }\n\n                try {\n                    var store = transaction.objectStore(self._dbInfo.storeName);\n                    // We use a Grunt task to make this safe for IE and some\n                    // versions of Android (including those used by Cordova).\n                    // Normally IE won't like `.delete()` and will insist on\n                    // using `['delete']()`, but we have a build step that\n                    // fixes this for us now.\n                    var req = store[\"delete\"](key);\n                    transaction.oncomplete = function () {\n                        resolve();\n                    };\n\n                    transaction.onerror = function () {\n                        reject(req.error);\n                    };\n\n                    // The request will be also be aborted if we've exceeded our storage\n                    // space.\n                    transaction.onabort = function () {\n                        var err = req.error ? req.error : req.transaction.error;\n                        reject(err);\n                    };\n                } catch (e) {\n                    reject(e);\n                }\n            });\n        })[\"catch\"](reject);\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\nfunction clear(callback) {\n    var self = this;\n\n    var promise = new Promise$1(function (resolve, reject) {\n        self.ready().then(function () {\n            createTransaction(self._dbInfo, READ_WRITE, function (err, transaction) {\n                if (err) {\n                    return reject(err);\n                }\n\n                try {\n                    var store = transaction.objectStore(self._dbInfo.storeName);\n                    var req = store.clear();\n\n                    transaction.oncomplete = function () {\n                        resolve();\n                    };\n\n                    transaction.onabort = transaction.onerror = function () {\n                        var err = req.error ? req.error : req.transaction.error;\n                        reject(err);\n                    };\n                } catch (e) {\n                    reject(e);\n                }\n            });\n        })[\"catch\"](reject);\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\nfunction length(callback) {\n    var self = this;\n\n    var promise = new Promise$1(function (resolve, reject) {\n        self.ready().then(function () {\n            createTransaction(self._dbInfo, READ_ONLY, function (err, transaction) {\n                if (err) {\n                    return reject(err);\n                }\n\n                try {\n                    var store = transaction.objectStore(self._dbInfo.storeName);\n                    var req = store.count();\n\n                    req.onsuccess = function () {\n                        resolve(req.result);\n                    };\n\n                    req.onerror = function () {\n                        reject(req.error);\n                    };\n                } catch (e) {\n                    reject(e);\n                }\n            });\n        })[\"catch\"](reject);\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\nfunction key(n, callback) {\n    var self = this;\n\n    var promise = new Promise$1(function (resolve, reject) {\n        if (n < 0) {\n            resolve(null);\n\n            return;\n        }\n\n        self.ready().then(function () {\n            createTransaction(self._dbInfo, READ_ONLY, function (err, transaction) {\n                if (err) {\n                    return reject(err);\n                }\n\n                try {\n                    var store = transaction.objectStore(self._dbInfo.storeName);\n                    var advanced = false;\n                    var req = store.openKeyCursor();\n\n                    req.onsuccess = function () {\n                        var cursor = req.result;\n                        if (!cursor) {\n                            // this means there weren't enough keys\n                            resolve(null);\n\n                            return;\n                        }\n\n                        if (n === 0) {\n                            // We have the first key, return it if that's what they\n                            // wanted.\n                            resolve(cursor.key);\n                        } else {\n                            if (!advanced) {\n                                // Otherwise, ask the cursor to skip ahead n\n                                // records.\n                                advanced = true;\n                                cursor.advance(n);\n                            } else {\n                                // When we get here, we've got the nth key.\n                                resolve(cursor.key);\n                            }\n                        }\n                    };\n\n                    req.onerror = function () {\n                        reject(req.error);\n                    };\n                } catch (e) {\n                    reject(e);\n                }\n            });\n        })[\"catch\"](reject);\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\nfunction keys(callback) {\n    var self = this;\n\n    var promise = new Promise$1(function (resolve, reject) {\n        self.ready().then(function () {\n            createTransaction(self._dbInfo, READ_ONLY, function (err, transaction) {\n                if (err) {\n                    return reject(err);\n                }\n\n                try {\n                    var store = transaction.objectStore(self._dbInfo.storeName);\n                    var req = store.openKeyCursor();\n                    var keys = [];\n\n                    req.onsuccess = function () {\n                        var cursor = req.result;\n\n                        if (!cursor) {\n                            resolve(keys);\n                            return;\n                        }\n\n                        keys.push(cursor.key);\n                        cursor[\"continue\"]();\n                    };\n\n                    req.onerror = function () {\n                        reject(req.error);\n                    };\n                } catch (e) {\n                    reject(e);\n                }\n            });\n        })[\"catch\"](reject);\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\nfunction dropInstance(options, callback) {\n    callback = getCallback.apply(this, arguments);\n\n    var currentConfig = this.config();\n    options = typeof options !== 'function' && options || {};\n    if (!options.name) {\n        options.name = options.name || currentConfig.name;\n        options.storeName = options.storeName || currentConfig.storeName;\n    }\n\n    var self = this;\n    var promise;\n    if (!options.name) {\n        promise = Promise$1.reject('Invalid arguments');\n    } else {\n        var isCurrentDb = options.name === currentConfig.name && self._dbInfo.db;\n\n        var dbPromise = isCurrentDb ? Promise$1.resolve(self._dbInfo.db) : _getOriginalConnection(options).then(function (db) {\n            var dbContext = dbContexts[options.name];\n            var forages = dbContext.forages;\n            dbContext.db = db;\n            for (var i = 0; i < forages.length; i++) {\n                forages[i]._dbInfo.db = db;\n            }\n            return db;\n        });\n\n        if (!options.storeName) {\n            promise = dbPromise.then(function (db) {\n                _deferReadiness(options);\n\n                var dbContext = dbContexts[options.name];\n                var forages = dbContext.forages;\n\n                db.close();\n                for (var i = 0; i < forages.length; i++) {\n                    var forage = forages[i];\n                    forage._dbInfo.db = null;\n                }\n\n                var dropDBPromise = new Promise$1(function (resolve, reject) {\n                    var req = idb.deleteDatabase(options.name);\n\n                    req.onerror = function () {\n                        var db = req.result;\n                        if (db) {\n                            db.close();\n                        }\n                        reject(req.error);\n                    };\n\n                    req.onblocked = function () {\n                        // Closing all open connections in onversionchange handler should prevent this situation, but if\n                        // we do get here, it just means the request remains pending - eventually it will succeed or error\n                        console.warn('dropInstance blocked for database \"' + options.name + '\" until all open connections are closed');\n                    };\n\n                    req.onsuccess = function () {\n                        var db = req.result;\n                        if (db) {\n                            db.close();\n                        }\n                        resolve(db);\n                    };\n                });\n\n                return dropDBPromise.then(function (db) {\n                    dbContext.db = db;\n                    for (var i = 0; i < forages.length; i++) {\n                        var _forage = forages[i];\n                        _advanceReadiness(_forage._dbInfo);\n                    }\n                })[\"catch\"](function (err) {\n                    (_rejectReadiness(options, err) || Promise$1.resolve())[\"catch\"](function () {});\n                    throw err;\n                });\n            });\n        } else {\n            promise = dbPromise.then(function (db) {\n                if (!db.objectStoreNames.contains(options.storeName)) {\n                    return;\n                }\n\n                var newVersion = db.version + 1;\n\n                _deferReadiness(options);\n\n                var dbContext = dbContexts[options.name];\n                var forages = dbContext.forages;\n\n                db.close();\n                for (var i = 0; i < forages.length; i++) {\n                    var forage = forages[i];\n                    forage._dbInfo.db = null;\n                    forage._dbInfo.version = newVersion;\n                }\n\n                var dropObjectPromise = new Promise$1(function (resolve, reject) {\n                    var req = idb.open(options.name, newVersion);\n\n                    req.onerror = function (err) {\n                        var db = req.result;\n                        db.close();\n                        reject(err);\n                    };\n\n                    req.onupgradeneeded = function () {\n                        var db = req.result;\n                        db.deleteObjectStore(options.storeName);\n                    };\n\n                    req.onsuccess = function () {\n                        var db = req.result;\n                        db.close();\n                        resolve(db);\n                    };\n                });\n\n                return dropObjectPromise.then(function (db) {\n                    dbContext.db = db;\n                    for (var j = 0; j < forages.length; j++) {\n                        var _forage2 = forages[j];\n                        _forage2._dbInfo.db = db;\n                        _advanceReadiness(_forage2._dbInfo);\n                    }\n                })[\"catch\"](function (err) {\n                    (_rejectReadiness(options, err) || Promise$1.resolve())[\"catch\"](function () {});\n                    throw err;\n                });\n            });\n        }\n    }\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\nvar asyncStorage = {\n    _driver: 'asyncStorage',\n    _initStorage: _initStorage,\n    _support: isIndexedDBValid(),\n    iterate: iterate,\n    getItem: getItem,\n    setItem: setItem,\n    removeItem: removeItem,\n    clear: clear,\n    length: length,\n    key: key,\n    keys: keys,\n    dropInstance: dropInstance\n};\n\nfunction isWebSQLValid() {\n    return typeof openDatabase === 'function';\n}\n\n// Sadly, the best way to save binary data in WebSQL/localStorage is serializing\n// it to Base64, so this is how we store it to prevent very strange errors with less\n// verbose ways of binary <-> string data storage.\nvar BASE_CHARS = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n\nvar BLOB_TYPE_PREFIX = '~~local_forage_type~';\nvar BLOB_TYPE_PREFIX_REGEX = /^~~local_forage_type~([^~]+)~/;\n\nvar SERIALIZED_MARKER = '__lfsc__:';\nvar SERIALIZED_MARKER_LENGTH = SERIALIZED_MARKER.length;\n\n// OMG the serializations!\nvar TYPE_ARRAYBUFFER = 'arbf';\nvar TYPE_BLOB = 'blob';\nvar TYPE_INT8ARRAY = 'si08';\nvar TYPE_UINT8ARRAY = 'ui08';\nvar TYPE_UINT8CLAMPEDARRAY = 'uic8';\nvar TYPE_INT16ARRAY = 'si16';\nvar TYPE_INT32ARRAY = 'si32';\nvar TYPE_UINT16ARRAY = 'ur16';\nvar TYPE_UINT32ARRAY = 'ui32';\nvar TYPE_FLOAT32ARRAY = 'fl32';\nvar TYPE_FLOAT64ARRAY = 'fl64';\nvar TYPE_SERIALIZED_MARKER_LENGTH = SERIALIZED_MARKER_LENGTH + TYPE_ARRAYBUFFER.length;\n\nvar toString$1 = Object.prototype.toString;\n\nfunction stringToBuffer(serializedString) {\n    // Fill the string into a ArrayBuffer.\n    var bufferLength = serializedString.length * 0.75;\n    var len = serializedString.length;\n    var i;\n    var p = 0;\n    var encoded1, encoded2, encoded3, encoded4;\n\n    if (serializedString[serializedString.length - 1] === '=') {\n        bufferLength--;\n        if (serializedString[serializedString.length - 2] === '=') {\n            bufferLength--;\n        }\n    }\n\n    var buffer = new ArrayBuffer(bufferLength);\n    var bytes = new Uint8Array(buffer);\n\n    for (i = 0; i < len; i += 4) {\n        encoded1 = BASE_CHARS.indexOf(serializedString[i]);\n        encoded2 = BASE_CHARS.indexOf(serializedString[i + 1]);\n        encoded3 = BASE_CHARS.indexOf(serializedString[i + 2]);\n        encoded4 = BASE_CHARS.indexOf(serializedString[i + 3]);\n\n        /*jslint bitwise: true */\n        bytes[p++] = encoded1 << 2 | encoded2 >> 4;\n        bytes[p++] = (encoded2 & 15) << 4 | encoded3 >> 2;\n        bytes[p++] = (encoded3 & 3) << 6 | encoded4 & 63;\n    }\n    return buffer;\n}\n\n// Converts a buffer to a string to store, serialized, in the backend\n// storage library.\nfunction bufferToString(buffer) {\n    // base64-arraybuffer\n    var bytes = new Uint8Array(buffer);\n    var base64String = '';\n    var i;\n\n    for (i = 0; i < bytes.length; i += 3) {\n        /*jslint bitwise: true */\n        base64String += BASE_CHARS[bytes[i] >> 2];\n        base64String += BASE_CHARS[(bytes[i] & 3) << 4 | bytes[i + 1] >> 4];\n        base64String += BASE_CHARS[(bytes[i + 1] & 15) << 2 | bytes[i + 2] >> 6];\n        base64String += BASE_CHARS[bytes[i + 2] & 63];\n    }\n\n    if (bytes.length % 3 === 2) {\n        base64String = base64String.substring(0, base64String.length - 1) + '=';\n    } else if (bytes.length % 3 === 1) {\n        base64String = base64String.substring(0, base64String.length - 2) + '==';\n    }\n\n    return base64String;\n}\n\n// Serialize a value, afterwards executing a callback (which usually\n// instructs the `setItem()` callback/promise to be executed). This is how\n// we store binary data with localStorage.\nfunction serialize(value, callback) {\n    var valueType = '';\n    if (value) {\n        valueType = toString$1.call(value);\n    }\n\n    // Cannot use `value instanceof ArrayBuffer` or such here, as these\n    // checks fail when running the tests using casper.js...\n    //\n    // TODO: See why those tests fail and use a better solution.\n    if (value && (valueType === '[object ArrayBuffer]' || value.buffer && toString$1.call(value.buffer) === '[object ArrayBuffer]')) {\n        // Convert binary arrays to a string and prefix the string with\n        // a special marker.\n        var buffer;\n        var marker = SERIALIZED_MARKER;\n\n        if (value instanceof ArrayBuffer) {\n            buffer = value;\n            marker += TYPE_ARRAYBUFFER;\n        } else {\n            buffer = value.buffer;\n\n            if (valueType === '[object Int8Array]') {\n                marker += TYPE_INT8ARRAY;\n            } else if (valueType === '[object Uint8Array]') {\n                marker += TYPE_UINT8ARRAY;\n            } else if (valueType === '[object Uint8ClampedArray]') {\n                marker += TYPE_UINT8CLAMPEDARRAY;\n            } else if (valueType === '[object Int16Array]') {\n                marker += TYPE_INT16ARRAY;\n            } else if (valueType === '[object Uint16Array]') {\n                marker += TYPE_UINT16ARRAY;\n            } else if (valueType === '[object Int32Array]') {\n                marker += TYPE_INT32ARRAY;\n            } else if (valueType === '[object Uint32Array]') {\n                marker += TYPE_UINT32ARRAY;\n            } else if (valueType === '[object Float32Array]') {\n                marker += TYPE_FLOAT32ARRAY;\n            } else if (valueType === '[object Float64Array]') {\n                marker += TYPE_FLOAT64ARRAY;\n            } else {\n                callback(new Error('Failed to get type for BinaryArray'));\n            }\n        }\n\n        callback(marker + bufferToString(buffer));\n    } else if (valueType === '[object Blob]') {\n        // Conver the blob to a binaryArray and then to a string.\n        var fileReader = new FileReader();\n\n        fileReader.onload = function () {\n            // Backwards-compatible prefix for the blob type.\n            var str = BLOB_TYPE_PREFIX + value.type + '~' + bufferToString(this.result);\n\n            callback(SERIALIZED_MARKER + TYPE_BLOB + str);\n        };\n\n        fileReader.readAsArrayBuffer(value);\n    } else {\n        try {\n            callback(JSON.stringify(value));\n        } catch (e) {\n            console.error(\"Couldn't convert value into a JSON string: \", value);\n\n            callback(null, e);\n        }\n    }\n}\n\n// Deserialize data we've inserted into a value column/field. We place\n// special markers into our strings to mark them as encoded; this isn't\n// as nice as a meta field, but it's the only sane thing we can do whilst\n// keeping localStorage support intact.\n//\n// Oftentimes this will just deserialize JSON content, but if we have a\n// special marker (SERIALIZED_MARKER, defined above), we will extract\n// some kind of arraybuffer/binary data/typed array out of the string.\nfunction deserialize(value) {\n    // If we haven't marked this string as being specially serialized (i.e.\n    // something other than serialized JSON), we can just return it and be\n    // done with it.\n    if (value.substring(0, SERIALIZED_MARKER_LENGTH) !== SERIALIZED_MARKER) {\n        return JSON.parse(value);\n    }\n\n    // The following code deals with deserializing some kind of Blob or\n    // TypedArray. First we separate out the type of data we're dealing\n    // with from the data itself.\n    var serializedString = value.substring(TYPE_SERIALIZED_MARKER_LENGTH);\n    var type = value.substring(SERIALIZED_MARKER_LENGTH, TYPE_SERIALIZED_MARKER_LENGTH);\n\n    var blobType;\n    // Backwards-compatible blob type serialization strategy.\n    // DBs created with older versions of localForage will simply not have the blob type.\n    if (type === TYPE_BLOB && BLOB_TYPE_PREFIX_REGEX.test(serializedString)) {\n        var matcher = serializedString.match(BLOB_TYPE_PREFIX_REGEX);\n        blobType = matcher[1];\n        serializedString = serializedString.substring(matcher[0].length);\n    }\n    var buffer = stringToBuffer(serializedString);\n\n    // Return the right type based on the code/type set during\n    // serialization.\n    switch (type) {\n        case TYPE_ARRAYBUFFER:\n            return buffer;\n        case TYPE_BLOB:\n            return createBlob([buffer], { type: blobType });\n        case TYPE_INT8ARRAY:\n            return new Int8Array(buffer);\n        case TYPE_UINT8ARRAY:\n            return new Uint8Array(buffer);\n        case TYPE_UINT8CLAMPEDARRAY:\n            return new Uint8ClampedArray(buffer);\n        case TYPE_INT16ARRAY:\n            return new Int16Array(buffer);\n        case TYPE_UINT16ARRAY:\n            return new Uint16Array(buffer);\n        case TYPE_INT32ARRAY:\n            return new Int32Array(buffer);\n        case TYPE_UINT32ARRAY:\n            return new Uint32Array(buffer);\n        case TYPE_FLOAT32ARRAY:\n            return new Float32Array(buffer);\n        case TYPE_FLOAT64ARRAY:\n            return new Float64Array(buffer);\n        default:\n            throw new Error('Unkown type: ' + type);\n    }\n}\n\nvar localforageSerializer = {\n    serialize: serialize,\n    deserialize: deserialize,\n    stringToBuffer: stringToBuffer,\n    bufferToString: bufferToString\n};\n\n/*\n * Includes code from:\n *\n * base64-arraybuffer\n * https://github.com/niklasvh/base64-arraybuffer\n *\n * Copyright (c) 2012 Niklas von Hertzen\n * Licensed under the MIT license.\n */\n\nfunction createDbTable(t, dbInfo, callback, errorCallback) {\n    t.executeSql('CREATE TABLE IF NOT EXISTS ' + dbInfo.storeName + ' ' + '(id INTEGER PRIMARY KEY, key unique, value)', [], callback, errorCallback);\n}\n\n// Open the WebSQL database (automatically creates one if one didn't\n// previously exist), using any options set in the config.\nfunction _initStorage$1(options) {\n    var self = this;\n    var dbInfo = {\n        db: null\n    };\n\n    if (options) {\n        for (var i in options) {\n            dbInfo[i] = typeof options[i] !== 'string' ? options[i].toString() : options[i];\n        }\n    }\n\n    var dbInfoPromise = new Promise$1(function (resolve, reject) {\n        // Open the database; the openDatabase API will automatically\n        // create it for us if it doesn't exist.\n        try {\n            dbInfo.db = openDatabase(dbInfo.name, String(dbInfo.version), dbInfo.description, dbInfo.size);\n        } catch (e) {\n            return reject(e);\n        }\n\n        // Create our key/value table if it doesn't exist.\n        dbInfo.db.transaction(function (t) {\n            createDbTable(t, dbInfo, function () {\n                self._dbInfo = dbInfo;\n                resolve();\n            }, function (t, error) {\n                reject(error);\n            });\n        }, reject);\n    });\n\n    dbInfo.serializer = localforageSerializer;\n    return dbInfoPromise;\n}\n\nfunction tryExecuteSql(t, dbInfo, sqlStatement, args, callback, errorCallback) {\n    t.executeSql(sqlStatement, args, callback, function (t, error) {\n        if (error.code === error.SYNTAX_ERR) {\n            t.executeSql('SELECT name FROM sqlite_master ' + \"WHERE type='table' AND name = ?\", [dbInfo.storeName], function (t, results) {\n                if (!results.rows.length) {\n                    // if the table is missing (was deleted)\n                    // re-create it table and retry\n                    createDbTable(t, dbInfo, function () {\n                        t.executeSql(sqlStatement, args, callback, errorCallback);\n                    }, errorCallback);\n                } else {\n                    errorCallback(t, error);\n                }\n            }, errorCallback);\n        } else {\n            errorCallback(t, error);\n        }\n    }, errorCallback);\n}\n\nfunction getItem$1(key, callback) {\n    var self = this;\n\n    key = normalizeKey(key);\n\n    var promise = new Promise$1(function (resolve, reject) {\n        self.ready().then(function () {\n            var dbInfo = self._dbInfo;\n            dbInfo.db.transaction(function (t) {\n                tryExecuteSql(t, dbInfo, 'SELECT * FROM ' + dbInfo.storeName + ' WHERE key = ? LIMIT 1', [key], function (t, results) {\n                    var result = results.rows.length ? results.rows.item(0).value : null;\n\n                    // Check to see if this is serialized content we need to\n                    // unpack.\n                    if (result) {\n                        result = dbInfo.serializer.deserialize(result);\n                    }\n\n                    resolve(result);\n                }, function (t, error) {\n                    reject(error);\n                });\n            });\n        })[\"catch\"](reject);\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\nfunction iterate$1(iterator, callback) {\n    var self = this;\n\n    var promise = new Promise$1(function (resolve, reject) {\n        self.ready().then(function () {\n            var dbInfo = self._dbInfo;\n\n            dbInfo.db.transaction(function (t) {\n                tryExecuteSql(t, dbInfo, 'SELECT * FROM ' + dbInfo.storeName, [], function (t, results) {\n                    var rows = results.rows;\n                    var length = rows.length;\n\n                    for (var i = 0; i < length; i++) {\n                        var item = rows.item(i);\n                        var result = item.value;\n\n                        // Check to see if this is serialized content\n                        // we need to unpack.\n                        if (result) {\n                            result = dbInfo.serializer.deserialize(result);\n                        }\n\n                        result = iterator(result, item.key, i + 1);\n\n                        // void(0) prevents problems with redefinition\n                        // of `undefined`.\n                        if (result !== void 0) {\n                            resolve(result);\n                            return;\n                        }\n                    }\n\n                    resolve();\n                }, function (t, error) {\n                    reject(error);\n                });\n            });\n        })[\"catch\"](reject);\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\nfunction _setItem(key, value, callback, retriesLeft) {\n    var self = this;\n\n    key = normalizeKey(key);\n\n    var promise = new Promise$1(function (resolve, reject) {\n        self.ready().then(function () {\n            // The localStorage API doesn't return undefined values in an\n            // \"expected\" way, so undefined is always cast to null in all\n            // drivers. See: https://github.com/mozilla/localForage/pull/42\n            if (value === undefined) {\n                value = null;\n            }\n\n            // Save the original value to pass to the callback.\n            var originalValue = value;\n\n            var dbInfo = self._dbInfo;\n            dbInfo.serializer.serialize(value, function (value, error) {\n                if (error) {\n                    reject(error);\n                } else {\n                    dbInfo.db.transaction(function (t) {\n                        tryExecuteSql(t, dbInfo, 'INSERT OR REPLACE INTO ' + dbInfo.storeName + ' ' + '(key, value) VALUES (?, ?)', [key, value], function () {\n                            resolve(originalValue);\n                        }, function (t, error) {\n                            reject(error);\n                        });\n                    }, function (sqlError) {\n                        // The transaction failed; check\n                        // to see if it's a quota error.\n                        if (sqlError.code === sqlError.QUOTA_ERR) {\n                            // We reject the callback outright for now, but\n                            // it's worth trying to re-run the transaction.\n                            // Even if the user accepts the prompt to use\n                            // more storage on Safari, this error will\n                            // be called.\n                            //\n                            // Try to re-run the transaction.\n                            if (retriesLeft > 0) {\n                                resolve(_setItem.apply(self, [key, originalValue, callback, retriesLeft - 1]));\n                                return;\n                            }\n                            reject(sqlError);\n                        }\n                    });\n                }\n            });\n        })[\"catch\"](reject);\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\nfunction setItem$1(key, value, callback) {\n    return _setItem.apply(this, [key, value, callback, 1]);\n}\n\nfunction removeItem$1(key, callback) {\n    var self = this;\n\n    key = normalizeKey(key);\n\n    var promise = new Promise$1(function (resolve, reject) {\n        self.ready().then(function () {\n            var dbInfo = self._dbInfo;\n            dbInfo.db.transaction(function (t) {\n                tryExecuteSql(t, dbInfo, 'DELETE FROM ' + dbInfo.storeName + ' WHERE key = ?', [key], function () {\n                    resolve();\n                }, function (t, error) {\n                    reject(error);\n                });\n            });\n        })[\"catch\"](reject);\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\n// Deletes every item in the table.\n// TODO: Find out if this resets the AUTO_INCREMENT number.\nfunction clear$1(callback) {\n    var self = this;\n\n    var promise = new Promise$1(function (resolve, reject) {\n        self.ready().then(function () {\n            var dbInfo = self._dbInfo;\n            dbInfo.db.transaction(function (t) {\n                tryExecuteSql(t, dbInfo, 'DELETE FROM ' + dbInfo.storeName, [], function () {\n                    resolve();\n                }, function (t, error) {\n                    reject(error);\n                });\n            });\n        })[\"catch\"](reject);\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\n// Does a simple `COUNT(key)` to get the number of items stored in\n// localForage.\nfunction length$1(callback) {\n    var self = this;\n\n    var promise = new Promise$1(function (resolve, reject) {\n        self.ready().then(function () {\n            var dbInfo = self._dbInfo;\n            dbInfo.db.transaction(function (t) {\n                // Ahhh, SQL makes this one soooooo easy.\n                tryExecuteSql(t, dbInfo, 'SELECT COUNT(key) as c FROM ' + dbInfo.storeName, [], function (t, results) {\n                    var result = results.rows.item(0).c;\n                    resolve(result);\n                }, function (t, error) {\n                    reject(error);\n                });\n            });\n        })[\"catch\"](reject);\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\n// Return the key located at key index X; essentially gets the key from a\n// `WHERE id = ?`. This is the most efficient way I can think to implement\n// this rarely-used (in my experience) part of the API, but it can seem\n// inconsistent, because we do `INSERT OR REPLACE INTO` on `setItem()`, so\n// the ID of each key will change every time it's updated. Perhaps a stored\n// procedure for the `setItem()` SQL would solve this problem?\n// TODO: Don't change ID on `setItem()`.\nfunction key$1(n, callback) {\n    var self = this;\n\n    var promise = new Promise$1(function (resolve, reject) {\n        self.ready().then(function () {\n            var dbInfo = self._dbInfo;\n            dbInfo.db.transaction(function (t) {\n                tryExecuteSql(t, dbInfo, 'SELECT key FROM ' + dbInfo.storeName + ' WHERE id = ? LIMIT 1', [n + 1], function (t, results) {\n                    var result = results.rows.length ? results.rows.item(0).key : null;\n                    resolve(result);\n                }, function (t, error) {\n                    reject(error);\n                });\n            });\n        })[\"catch\"](reject);\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\nfunction keys$1(callback) {\n    var self = this;\n\n    var promise = new Promise$1(function (resolve, reject) {\n        self.ready().then(function () {\n            var dbInfo = self._dbInfo;\n            dbInfo.db.transaction(function (t) {\n                tryExecuteSql(t, dbInfo, 'SELECT key FROM ' + dbInfo.storeName, [], function (t, results) {\n                    var keys = [];\n\n                    for (var i = 0; i < results.rows.length; i++) {\n                        keys.push(results.rows.item(i).key);\n                    }\n\n                    resolve(keys);\n                }, function (t, error) {\n                    reject(error);\n                });\n            });\n        })[\"catch\"](reject);\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\n// https://www.w3.org/TR/webdatabase/#databases\n// > There is no way to enumerate or delete the databases available for an origin from this API.\nfunction getAllStoreNames(db) {\n    return new Promise$1(function (resolve, reject) {\n        db.transaction(function (t) {\n            t.executeSql('SELECT name FROM sqlite_master ' + \"WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'\", [], function (t, results) {\n                var storeNames = [];\n\n                for (var i = 0; i < results.rows.length; i++) {\n                    storeNames.push(results.rows.item(i).name);\n                }\n\n                resolve({\n                    db: db,\n                    storeNames: storeNames\n                });\n            }, function (t, error) {\n                reject(error);\n            });\n        }, function (sqlError) {\n            reject(sqlError);\n        });\n    });\n}\n\nfunction dropInstance$1(options, callback) {\n    callback = getCallback.apply(this, arguments);\n\n    var currentConfig = this.config();\n    options = typeof options !== 'function' && options || {};\n    if (!options.name) {\n        options.name = options.name || currentConfig.name;\n        options.storeName = options.storeName || currentConfig.storeName;\n    }\n\n    var self = this;\n    var promise;\n    if (!options.name) {\n        promise = Promise$1.reject('Invalid arguments');\n    } else {\n        promise = new Promise$1(function (resolve) {\n            var db;\n            if (options.name === currentConfig.name) {\n                // use the db reference of the current instance\n                db = self._dbInfo.db;\n            } else {\n                db = openDatabase(options.name, '', '', 0);\n            }\n\n            if (!options.storeName) {\n                // drop all database tables\n                resolve(getAllStoreNames(db));\n            } else {\n                resolve({\n                    db: db,\n                    storeNames: [options.storeName]\n                });\n            }\n        }).then(function (operationInfo) {\n            return new Promise$1(function (resolve, reject) {\n                operationInfo.db.transaction(function (t) {\n                    function dropTable(storeName) {\n                        return new Promise$1(function (resolve, reject) {\n                            t.executeSql('DROP TABLE IF EXISTS ' + storeName, [], function () {\n                                resolve();\n                            }, function (t, error) {\n                                reject(error);\n                            });\n                        });\n                    }\n\n                    var operations = [];\n                    for (var i = 0, len = operationInfo.storeNames.length; i < len; i++) {\n                        operations.push(dropTable(operationInfo.storeNames[i]));\n                    }\n\n                    Promise$1.all(operations).then(function () {\n                        resolve();\n                    })[\"catch\"](function (e) {\n                        reject(e);\n                    });\n                }, function (sqlError) {\n                    reject(sqlError);\n                });\n            });\n        });\n    }\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\nvar webSQLStorage = {\n    _driver: 'webSQLStorage',\n    _initStorage: _initStorage$1,\n    _support: isWebSQLValid(),\n    iterate: iterate$1,\n    getItem: getItem$1,\n    setItem: setItem$1,\n    removeItem: removeItem$1,\n    clear: clear$1,\n    length: length$1,\n    key: key$1,\n    keys: keys$1,\n    dropInstance: dropInstance$1\n};\n\nfunction isLocalStorageValid() {\n    try {\n        return typeof localStorage !== 'undefined' && 'setItem' in localStorage &&\n        // in IE8 typeof localStorage.setItem === 'object'\n        !!localStorage.setItem;\n    } catch (e) {\n        return false;\n    }\n}\n\nfunction _getKeyPrefix(options, defaultConfig) {\n    var keyPrefix = options.name + '/';\n\n    if (options.storeName !== defaultConfig.storeName) {\n        keyPrefix += options.storeName + '/';\n    }\n    return keyPrefix;\n}\n\n// Check if localStorage throws when saving an item\nfunction checkIfLocalStorageThrows() {\n    var localStorageTestKey = '_localforage_support_test';\n\n    try {\n        localStorage.setItem(localStorageTestKey, true);\n        localStorage.removeItem(localStorageTestKey);\n\n        return false;\n    } catch (e) {\n        return true;\n    }\n}\n\n// Check if localStorage is usable and allows to save an item\n// This method checks if localStorage is usable in Safari Private Browsing\n// mode, or in any other case where the available quota for localStorage\n// is 0 and there wasn't any saved items yet.\nfunction _isLocalStorageUsable() {\n    return !checkIfLocalStorageThrows() || localStorage.length > 0;\n}\n\n// Config the localStorage backend, using options set in the config.\nfunction _initStorage$2(options) {\n    var self = this;\n    var dbInfo = {};\n    if (options) {\n        for (var i in options) {\n            dbInfo[i] = options[i];\n        }\n    }\n\n    dbInfo.keyPrefix = _getKeyPrefix(options, self._defaultConfig);\n\n    if (!_isLocalStorageUsable()) {\n        return Promise$1.reject();\n    }\n\n    self._dbInfo = dbInfo;\n    dbInfo.serializer = localforageSerializer;\n\n    return Promise$1.resolve();\n}\n\n// Remove all keys from the datastore, effectively destroying all data in\n// the app's key/value store!\nfunction clear$2(callback) {\n    var self = this;\n    var promise = self.ready().then(function () {\n        var keyPrefix = self._dbInfo.keyPrefix;\n\n        for (var i = localStorage.length - 1; i >= 0; i--) {\n            var key = localStorage.key(i);\n\n            if (key.indexOf(keyPrefix) === 0) {\n                localStorage.removeItem(key);\n            }\n        }\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\n// Retrieve an item from the store. Unlike the original async_storage\n// library in Gaia, we don't modify return values at all. If a key's value\n// is `undefined`, we pass that value to the callback function.\nfunction getItem$2(key, callback) {\n    var self = this;\n\n    key = normalizeKey(key);\n\n    var promise = self.ready().then(function () {\n        var dbInfo = self._dbInfo;\n        var result = localStorage.getItem(dbInfo.keyPrefix + key);\n\n        // If a result was found, parse it from the serialized\n        // string into a JS object. If result isn't truthy, the key\n        // is likely undefined and we'll pass it straight to the\n        // callback.\n        if (result) {\n            result = dbInfo.serializer.deserialize(result);\n        }\n\n        return result;\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\n// Iterate over all items in the store.\nfunction iterate$2(iterator, callback) {\n    var self = this;\n\n    var promise = self.ready().then(function () {\n        var dbInfo = self._dbInfo;\n        var keyPrefix = dbInfo.keyPrefix;\n        var keyPrefixLength = keyPrefix.length;\n        var length = localStorage.length;\n\n        // We use a dedicated iterator instead of the `i` variable below\n        // so other keys we fetch in localStorage aren't counted in\n        // the `iterationNumber` argument passed to the `iterate()`\n        // callback.\n        //\n        // See: github.com/mozilla/localForage/pull/435#discussion_r38061530\n        var iterationNumber = 1;\n\n        for (var i = 0; i < length; i++) {\n            var key = localStorage.key(i);\n            if (key.indexOf(keyPrefix) !== 0) {\n                continue;\n            }\n            var value = localStorage.getItem(key);\n\n            // If a result was found, parse it from the serialized\n            // string into a JS object. If result isn't truthy, the\n            // key is likely undefined and we'll pass it straight\n            // to the iterator.\n            if (value) {\n                value = dbInfo.serializer.deserialize(value);\n            }\n\n            value = iterator(value, key.substring(keyPrefixLength), iterationNumber++);\n\n            if (value !== void 0) {\n                return value;\n            }\n        }\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\n// Same as localStorage's key() method, except takes a callback.\nfunction key$2(n, callback) {\n    var self = this;\n    var promise = self.ready().then(function () {\n        var dbInfo = self._dbInfo;\n        var result;\n        try {\n            result = localStorage.key(n);\n        } catch (error) {\n            result = null;\n        }\n\n        // Remove the prefix from the key, if a key is found.\n        if (result) {\n            result = result.substring(dbInfo.keyPrefix.length);\n        }\n\n        return result;\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\nfunction keys$2(callback) {\n    var self = this;\n    var promise = self.ready().then(function () {\n        var dbInfo = self._dbInfo;\n        var length = localStorage.length;\n        var keys = [];\n\n        for (var i = 0; i < length; i++) {\n            var itemKey = localStorage.key(i);\n            if (itemKey.indexOf(dbInfo.keyPrefix) === 0) {\n                keys.push(itemKey.substring(dbInfo.keyPrefix.length));\n            }\n        }\n\n        return keys;\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\n// Supply the number of keys in the datastore to the callback function.\nfunction length$2(callback) {\n    var self = this;\n    var promise = self.keys().then(function (keys) {\n        return keys.length;\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\n// Remove an item from the store, nice and simple.\nfunction removeItem$2(key, callback) {\n    var self = this;\n\n    key = normalizeKey(key);\n\n    var promise = self.ready().then(function () {\n        var dbInfo = self._dbInfo;\n        localStorage.removeItem(dbInfo.keyPrefix + key);\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\n// Set a key's value and run an optional callback once the value is set.\n// Unlike Gaia's implementation, the callback function is passed the value,\n// in case you want to operate on that value only after you're sure it\n// saved, or something like that.\nfunction setItem$2(key, value, callback) {\n    var self = this;\n\n    key = normalizeKey(key);\n\n    var promise = self.ready().then(function () {\n        // Convert undefined values to null.\n        // https://github.com/mozilla/localForage/pull/42\n        if (value === undefined) {\n            value = null;\n        }\n\n        // Save the original value to pass to the callback.\n        var originalValue = value;\n\n        return new Promise$1(function (resolve, reject) {\n            var dbInfo = self._dbInfo;\n            dbInfo.serializer.serialize(value, function (value, error) {\n                if (error) {\n                    reject(error);\n                } else {\n                    try {\n                        localStorage.setItem(dbInfo.keyPrefix + key, value);\n                        resolve(originalValue);\n                    } catch (e) {\n                        // localStorage capacity exceeded.\n                        // TODO: Make this a specific error/event.\n                        if (e.name === 'QuotaExceededError' || e.name === 'NS_ERROR_DOM_QUOTA_REACHED') {\n                            reject(e);\n                        }\n                        reject(e);\n                    }\n                }\n            });\n        });\n    });\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\nfunction dropInstance$2(options, callback) {\n    callback = getCallback.apply(this, arguments);\n\n    options = typeof options !== 'function' && options || {};\n    if (!options.name) {\n        var currentConfig = this.config();\n        options.name = options.name || currentConfig.name;\n        options.storeName = options.storeName || currentConfig.storeName;\n    }\n\n    var self = this;\n    var promise;\n    if (!options.name) {\n        promise = Promise$1.reject('Invalid arguments');\n    } else {\n        promise = new Promise$1(function (resolve) {\n            if (!options.storeName) {\n                resolve(options.name + '/');\n            } else {\n                resolve(_getKeyPrefix(options, self._defaultConfig));\n            }\n        }).then(function (keyPrefix) {\n            for (var i = localStorage.length - 1; i >= 0; i--) {\n                var key = localStorage.key(i);\n\n                if (key.indexOf(keyPrefix) === 0) {\n                    localStorage.removeItem(key);\n                }\n            }\n        });\n    }\n\n    executeCallback(promise, callback);\n    return promise;\n}\n\nvar localStorageWrapper = {\n    _driver: 'localStorageWrapper',\n    _initStorage: _initStorage$2,\n    _support: isLocalStorageValid(),\n    iterate: iterate$2,\n    getItem: getItem$2,\n    setItem: setItem$2,\n    removeItem: removeItem$2,\n    clear: clear$2,\n    length: length$2,\n    key: key$2,\n    keys: keys$2,\n    dropInstance: dropInstance$2\n};\n\nvar sameValue = function sameValue(x, y) {\n    return x === y || typeof x === 'number' && typeof y === 'number' && isNaN(x) && isNaN(y);\n};\n\nvar includes = function includes(array, searchElement) {\n    var len = array.length;\n    var i = 0;\n    while (i < len) {\n        if (sameValue(array[i], searchElement)) {\n            return true;\n        }\n        i++;\n    }\n\n    return false;\n};\n\nvar isArray = Array.isArray || function (arg) {\n    return Object.prototype.toString.call(arg) === '[object Array]';\n};\n\n// Drivers are stored here when `defineDriver()` is called.\n// They are shared across all instances of localForage.\nvar DefinedDrivers = {};\n\nvar DriverSupport = {};\n\nvar DefaultDrivers = {\n    INDEXEDDB: asyncStorage,\n    WEBSQL: webSQLStorage,\n    LOCALSTORAGE: localStorageWrapper\n};\n\nvar DefaultDriverOrder = [DefaultDrivers.INDEXEDDB._driver, DefaultDrivers.WEBSQL._driver, DefaultDrivers.LOCALSTORAGE._driver];\n\nvar OptionalDriverMethods = ['dropInstance'];\n\nvar LibraryMethods = ['clear', 'getItem', 'iterate', 'key', 'keys', 'length', 'removeItem', 'setItem'].concat(OptionalDriverMethods);\n\nvar DefaultConfig = {\n    description: '',\n    driver: DefaultDriverOrder.slice(),\n    name: 'localforage',\n    // Default DB size is _JUST UNDER_ 5MB, as it's the highest size\n    // we can use without a prompt.\n    size: 4980736,\n    storeName: 'keyvaluepairs',\n    version: 1.0\n};\n\nfunction callWhenReady(localForageInstance, libraryMethod) {\n    localForageInstance[libraryMethod] = function () {\n        var _args = arguments;\n        return localForageInstance.ready().then(function () {\n            return localForageInstance[libraryMethod].apply(localForageInstance, _args);\n        });\n    };\n}\n\nfunction extend() {\n    for (var i = 1; i < arguments.length; i++) {\n        var arg = arguments[i];\n\n        if (arg) {\n            for (var _key in arg) {\n                if (arg.hasOwnProperty(_key)) {\n                    if (isArray(arg[_key])) {\n                        arguments[0][_key] = arg[_key].slice();\n                    } else {\n                        arguments[0][_key] = arg[_key];\n                    }\n                }\n            }\n        }\n    }\n\n    return arguments[0];\n}\n\nvar LocalForage = function () {\n    function LocalForage(options) {\n        _classCallCheck(this, LocalForage);\n\n        for (var driverTypeKey in DefaultDrivers) {\n            if (DefaultDrivers.hasOwnProperty(driverTypeKey)) {\n                var driver = DefaultDrivers[driverTypeKey];\n                var driverName = driver._driver;\n                this[driverTypeKey] = driverName;\n\n                if (!DefinedDrivers[driverName]) {\n                    // we don't need to wait for the promise,\n                    // since the default drivers can be defined\n                    // in a blocking manner\n                    this.defineDriver(driver);\n                }\n            }\n        }\n\n        this._defaultConfig = extend({}, DefaultConfig);\n        this._config = extend({}, this._defaultConfig, options);\n        this._driverSet = null;\n        this._initDriver = null;\n        this._ready = false;\n        this._dbInfo = null;\n\n        this._wrapLibraryMethodsWithReady();\n        this.setDriver(this._config.driver)[\"catch\"](function () {});\n    }\n\n    // Set any config values for localForage; can be called anytime before\n    // the first API call (e.g. `getItem`, `setItem`).\n    // We loop through options so we don't overwrite existing config\n    // values.\n\n\n    LocalForage.prototype.config = function config(options) {\n        // If the options argument is an object, we use it to set values.\n        // Otherwise, we return either a specified config value or all\n        // config values.\n        if ((typeof options === 'undefined' ? 'undefined' : _typeof(options)) === 'object') {\n            // If localforage is ready and fully initialized, we can't set\n            // any new configuration values. Instead, we return an error.\n            if (this._ready) {\n                return new Error(\"Can't call config() after localforage \" + 'has been used.');\n            }\n\n            for (var i in options) {\n                if (i === 'storeName') {\n                    options[i] = options[i].replace(/\\W/g, '_');\n                }\n\n                if (i === 'version' && typeof options[i] !== 'number') {\n                    return new Error('Database version must be a number.');\n                }\n\n                this._config[i] = options[i];\n            }\n\n            // after all config options are set and\n            // the driver option is used, try setting it\n            if ('driver' in options && options.driver) {\n                return this.setDriver(this._config.driver);\n            }\n\n            return true;\n        } else if (typeof options === 'string') {\n            return this._config[options];\n        } else {\n            return this._config;\n        }\n    };\n\n    // Used to define a custom driver, shared across all instances of\n    // localForage.\n\n\n    LocalForage.prototype.defineDriver = function defineDriver(driverObject, callback, errorCallback) {\n        var promise = new Promise$1(function (resolve, reject) {\n            try {\n                var driverName = driverObject._driver;\n                var complianceError = new Error('Custom driver not compliant; see ' + 'https://mozilla.github.io/localForage/#definedriver');\n\n                // A driver name should be defined and not overlap with the\n                // library-defined, default drivers.\n                if (!driverObject._driver) {\n                    reject(complianceError);\n                    return;\n                }\n\n                var driverMethods = LibraryMethods.concat('_initStorage');\n                for (var i = 0, len = driverMethods.length; i < len; i++) {\n                    var driverMethodName = driverMethods[i];\n\n                    // when the property is there,\n                    // it should be a method even when optional\n                    var isRequired = !includes(OptionalDriverMethods, driverMethodName);\n                    if ((isRequired || driverObject[driverMethodName]) && typeof driverObject[driverMethodName] !== 'function') {\n                        reject(complianceError);\n                        return;\n                    }\n                }\n\n                var configureMissingMethods = function configureMissingMethods() {\n                    var methodNotImplementedFactory = function methodNotImplementedFactory(methodName) {\n                        return function () {\n                            var error = new Error('Method ' + methodName + ' is not implemented by the current driver');\n                            var promise = Promise$1.reject(error);\n                            executeCallback(promise, arguments[arguments.length - 1]);\n                            return promise;\n                        };\n                    };\n\n                    for (var _i = 0, _len = OptionalDriverMethods.length; _i < _len; _i++) {\n                        var optionalDriverMethod = OptionalDriverMethods[_i];\n                        if (!driverObject[optionalDriverMethod]) {\n                            driverObject[optionalDriverMethod] = methodNotImplementedFactory(optionalDriverMethod);\n                        }\n                    }\n                };\n\n                configureMissingMethods();\n\n                var setDriverSupport = function setDriverSupport(support) {\n                    if (DefinedDrivers[driverName]) {\n                        console.info('Redefining LocalForage driver: ' + driverName);\n                    }\n                    DefinedDrivers[driverName] = driverObject;\n                    DriverSupport[driverName] = support;\n                    // don't use a then, so that we can define\n                    // drivers that have simple _support methods\n                    // in a blocking manner\n                    resolve();\n                };\n\n                if ('_support' in driverObject) {\n                    if (driverObject._support && typeof driverObject._support === 'function') {\n                        driverObject._support().then(setDriverSupport, reject);\n                    } else {\n                        setDriverSupport(!!driverObject._support);\n                    }\n                } else {\n                    setDriverSupport(true);\n                }\n            } catch (e) {\n                reject(e);\n            }\n        });\n\n        executeTwoCallbacks(promise, callback, errorCallback);\n        return promise;\n    };\n\n    LocalForage.prototype.driver = function driver() {\n        return this._driver || null;\n    };\n\n    LocalForage.prototype.getDriver = function getDriver(driverName, callback, errorCallback) {\n        var getDriverPromise = DefinedDrivers[driverName] ? Promise$1.resolve(DefinedDrivers[driverName]) : Promise$1.reject(new Error('Driver not found.'));\n\n        executeTwoCallbacks(getDriverPromise, callback, errorCallback);\n        return getDriverPromise;\n    };\n\n    LocalForage.prototype.getSerializer = function getSerializer(callback) {\n        var serializerPromise = Promise$1.resolve(localforageSerializer);\n        executeTwoCallbacks(serializerPromise, callback);\n        return serializerPromise;\n    };\n\n    LocalForage.prototype.ready = function ready(callback) {\n        var self = this;\n\n        var promise = self._driverSet.then(function () {\n            if (self._ready === null) {\n                self._ready = self._initDriver();\n            }\n\n            return self._ready;\n        });\n\n        executeTwoCallbacks(promise, callback, callback);\n        return promise;\n    };\n\n    LocalForage.prototype.setDriver = function setDriver(drivers, callback, errorCallback) {\n        var self = this;\n\n        if (!isArray(drivers)) {\n            drivers = [drivers];\n        }\n\n        var supportedDrivers = this._getSupportedDrivers(drivers);\n\n        function setDriverToConfig() {\n            self._config.driver = self.driver();\n        }\n\n        function extendSelfWithDriver(driver) {\n            self._extend(driver);\n            setDriverToConfig();\n\n            self._ready = self._initStorage(self._config);\n            return self._ready;\n        }\n\n        function initDriver(supportedDrivers) {\n            return function () {\n                var currentDriverIndex = 0;\n\n                function driverPromiseLoop() {\n                    while (currentDriverIndex < supportedDrivers.length) {\n                        var driverName = supportedDrivers[currentDriverIndex];\n                        currentDriverIndex++;\n\n                        self._dbInfo = null;\n                        self._ready = null;\n\n                        return self.getDriver(driverName).then(extendSelfWithDriver)[\"catch\"](driverPromiseLoop);\n                    }\n\n                    setDriverToConfig();\n                    var error = new Error('No available storage method found.');\n                    self._driverSet = Promise$1.reject(error);\n                    return self._driverSet;\n                }\n\n                return driverPromiseLoop();\n            };\n        }\n\n        // There might be a driver initialization in progress\n        // so wait for it to finish in order to avoid a possible\n        // race condition to set _dbInfo\n        var oldDriverSetDone = this._driverSet !== null ? this._driverSet[\"catch\"](function () {\n            return Promise$1.resolve();\n        }) : Promise$1.resolve();\n\n        this._driverSet = oldDriverSetDone.then(function () {\n            var driverName = supportedDrivers[0];\n            self._dbInfo = null;\n            self._ready = null;\n\n            return self.getDriver(driverName).then(function (driver) {\n                self._driver = driver._driver;\n                setDriverToConfig();\n                self._wrapLibraryMethodsWithReady();\n                self._initDriver = initDriver(supportedDrivers);\n            });\n        })[\"catch\"](function () {\n            setDriverToConfig();\n            var error = new Error('No available storage method found.');\n            self._driverSet = Promise$1.reject(error);\n            return self._driverSet;\n        });\n\n        executeTwoCallbacks(this._driverSet, callback, errorCallback);\n        return this._driverSet;\n    };\n\n    LocalForage.prototype.supports = function supports(driverName) {\n        return !!DriverSupport[driverName];\n    };\n\n    LocalForage.prototype._extend = function _extend(libraryMethodsAndProperties) {\n        extend(this, libraryMethodsAndProperties);\n    };\n\n    LocalForage.prototype._getSupportedDrivers = function _getSupportedDrivers(drivers) {\n        var supportedDrivers = [];\n        for (var i = 0, len = drivers.length; i < len; i++) {\n            var driverName = drivers[i];\n            if (this.supports(driverName)) {\n                supportedDrivers.push(driverName);\n            }\n        }\n        return supportedDrivers;\n    };\n\n    LocalForage.prototype._wrapLibraryMethodsWithReady = function _wrapLibraryMethodsWithReady() {\n        // Add a stub for each driver API method that delays the call to the\n        // corresponding driver method until localForage is ready. These stubs\n        // will be replaced by the driver methods as soon as the driver is\n        // loaded, so there is no performance impact.\n        for (var i = 0, len = LibraryMethods.length; i < len; i++) {\n            callWhenReady(this, LibraryMethods[i]);\n        }\n    };\n\n    LocalForage.prototype.createInstance = function createInstance(options) {\n        return new LocalForage(options);\n    };\n\n    return LocalForage;\n}();\n\n// The actual localForage object that we expose as a module or via a\n// global. It's extended by pulling in one of our other libraries.\n\n\nvar localforage_js = new LocalForage();\n\nmodule.exports = localforage_js;\n\n},{\"3\":3}]},{},[4])(4)\n});\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = require('./lib/ReactPropTypesSecret');\n\nfunction emptyFunction() {}\nfunction emptyFunctionWithReset() {}\nemptyFunctionWithReset.resetWarningCache = emptyFunction;\n\nmodule.exports = function() {\n  function shim(props, propName, componentName, location, propFullName, secret) {\n    if (secret === ReactPropTypesSecret) {\n      // It is still safe when called from React.\n      return;\n    }\n    var err = new Error(\n      'Calling PropTypes validators directly is not supported by the `prop-types` package. ' +\n      'Use PropTypes.checkPropTypes() to call them. ' +\n      'Read more at http://fb.me/use-check-prop-types'\n    );\n    err.name = 'Invariant Violation';\n    throw err;\n  };\n  shim.isRequired = shim;\n  function getShim() {\n    return shim;\n  };\n  // Important!\n  // Keep this list in sync with production version in `./factoryWithTypeCheckers.js`.\n  var ReactPropTypes = {\n    array: shim,\n    bigint: shim,\n    bool: shim,\n    func: shim,\n    number: shim,\n    object: shim,\n    string: shim,\n    symbol: shim,\n\n    any: shim,\n    arrayOf: getShim,\n    element: shim,\n    elementType: shim,\n    instanceOf: getShim,\n    node: shim,\n    objectOf: getShim,\n    oneOf: getShim,\n    oneOfType: getShim,\n    shape: getShim,\n    exact: getShim,\n\n    checkPropTypes: emptyFunctionWithReset,\n    resetWarningCache: emptyFunction\n  };\n\n  ReactPropTypes.PropTypes = ReactPropTypes;\n\n  return ReactPropTypes;\n};\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nif (process.env.NODE_ENV !== 'production') {\n  var ReactIs = require('react-is');\n\n  // By explicitly using `prop-types` you are opting into new development behavior.\n  // http://fb.me/prop-types-in-prod\n  var throwOnDirectAccess = true;\n  module.exports = require('./factoryWithTypeCheckers')(ReactIs.isElement, throwOnDirectAccess);\n} else {\n  // By explicitly using `prop-types` you are opting into new production behavior.\n  // http://fb.me/prop-types-in-prod\n  module.exports = require('./factoryWithThrowingShims')();\n}\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED';\n\nmodule.exports = ReactPropTypesSecret;\n","/**\n * @license React\n * react-dom.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n/*\n Modernizr 3.0.0pre (Custom Build) | MIT\n*/\n'use strict';var aa=require(\"react\"),ca=require(\"scheduler\");function p(a){for(var b=\"https://reactjs.org/docs/error-decoder.html?invariant=\"+a,c=1;c<arguments.length;c++)b+=\"&args[]=\"+encodeURIComponent(arguments[c]);return\"Minified React error #\"+a+\"; visit \"+b+\" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.\"}var da=new Set,ea={};function fa(a,b){ha(a,b);ha(a+\"Capture\",b)}\nfunction ha(a,b){ea[a]=b;for(a=0;a<b.length;a++)da.add(b[a])}\nvar ia=!(\"undefined\"===typeof window||\"undefined\"===typeof window.document||\"undefined\"===typeof window.document.createElement),ja=Object.prototype.hasOwnProperty,ka=/^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$/,la=\n{},ma={};function oa(a){if(ja.call(ma,a))return!0;if(ja.call(la,a))return!1;if(ka.test(a))return ma[a]=!0;la[a]=!0;return!1}function pa(a,b,c,d){if(null!==c&&0===c.type)return!1;switch(typeof b){case \"function\":case \"symbol\":return!0;case \"boolean\":if(d)return!1;if(null!==c)return!c.acceptsBooleans;a=a.toLowerCase().slice(0,5);return\"data-\"!==a&&\"aria-\"!==a;default:return!1}}\nfunction qa(a,b,c,d){if(null===b||\"undefined\"===typeof b||pa(a,b,c,d))return!0;if(d)return!1;if(null!==c)switch(c.type){case 3:return!b;case 4:return!1===b;case 5:return isNaN(b);case 6:return isNaN(b)||1>b}return!1}function v(a,b,c,d,e,f,g){this.acceptsBooleans=2===b||3===b||4===b;this.attributeName=d;this.attributeNamespace=e;this.mustUseProperty=c;this.propertyName=a;this.type=b;this.sanitizeURL=f;this.removeEmptyString=g}var z={};\n\"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style\".split(\" \").forEach(function(a){z[a]=new v(a,0,!1,a,null,!1,!1)});[[\"acceptCharset\",\"accept-charset\"],[\"className\",\"class\"],[\"htmlFor\",\"for\"],[\"httpEquiv\",\"http-equiv\"]].forEach(function(a){var b=a[0];z[b]=new v(b,1,!1,a[1],null,!1,!1)});[\"contentEditable\",\"draggable\",\"spellCheck\",\"value\"].forEach(function(a){z[a]=new v(a,2,!1,a.toLowerCase(),null,!1,!1)});\n[\"autoReverse\",\"externalResourcesRequired\",\"focusable\",\"preserveAlpha\"].forEach(function(a){z[a]=new v(a,2,!1,a,null,!1,!1)});\"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope\".split(\" \").forEach(function(a){z[a]=new v(a,3,!1,a.toLowerCase(),null,!1,!1)});\n[\"checked\",\"multiple\",\"muted\",\"selected\"].forEach(function(a){z[a]=new v(a,3,!0,a,null,!1,!1)});[\"capture\",\"download\"].forEach(function(a){z[a]=new v(a,4,!1,a,null,!1,!1)});[\"cols\",\"rows\",\"size\",\"span\"].forEach(function(a){z[a]=new v(a,6,!1,a,null,!1,!1)});[\"rowSpan\",\"start\"].forEach(function(a){z[a]=new v(a,5,!1,a.toLowerCase(),null,!1,!1)});var ra=/[\\-:]([a-z])/g;function sa(a){return a[1].toUpperCase()}\n\"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height\".split(\" \").forEach(function(a){var b=a.replace(ra,\nsa);z[b]=new v(b,1,!1,a,null,!1,!1)});\"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type\".split(\" \").forEach(function(a){var b=a.replace(ra,sa);z[b]=new v(b,1,!1,a,\"http://www.w3.org/1999/xlink\",!1,!1)});[\"xml:base\",\"xml:lang\",\"xml:space\"].forEach(function(a){var b=a.replace(ra,sa);z[b]=new v(b,1,!1,a,\"http://www.w3.org/XML/1998/namespace\",!1,!1)});[\"tabIndex\",\"crossOrigin\"].forEach(function(a){z[a]=new v(a,1,!1,a.toLowerCase(),null,!1,!1)});\nz.xlinkHref=new v(\"xlinkHref\",1,!1,\"xlink:href\",\"http://www.w3.org/1999/xlink\",!0,!1);[\"src\",\"href\",\"action\",\"formAction\"].forEach(function(a){z[a]=new v(a,1,!1,a.toLowerCase(),null,!0,!0)});\nfunction ta(a,b,c,d){var e=z.hasOwnProperty(b)?z[b]:null;if(null!==e?0!==e.type:d||!(2<b.length)||\"o\"!==b[0]&&\"O\"!==b[0]||\"n\"!==b[1]&&\"N\"!==b[1])qa(b,c,e,d)&&(c=null),d||null===e?oa(b)&&(null===c?a.removeAttribute(b):a.setAttribute(b,\"\"+c)):e.mustUseProperty?a[e.propertyName]=null===c?3===e.type?!1:\"\":c:(b=e.attributeName,d=e.attributeNamespace,null===c?a.removeAttribute(b):(e=e.type,c=3===e||4===e&&!0===c?\"\":\"\"+c,d?a.setAttributeNS(d,b,c):a.setAttribute(b,c)))}\nvar ua=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for(\"react.element\"),wa=Symbol.for(\"react.portal\"),ya=Symbol.for(\"react.fragment\"),za=Symbol.for(\"react.strict_mode\"),Aa=Symbol.for(\"react.profiler\"),Ba=Symbol.for(\"react.provider\"),Ca=Symbol.for(\"react.context\"),Da=Symbol.for(\"react.forward_ref\"),Ea=Symbol.for(\"react.suspense\"),Fa=Symbol.for(\"react.suspense_list\"),Ga=Symbol.for(\"react.memo\"),Ha=Symbol.for(\"react.lazy\");Symbol.for(\"react.scope\");Symbol.for(\"react.debug_trace_mode\");\nvar Ia=Symbol.for(\"react.offscreen\");Symbol.for(\"react.legacy_hidden\");Symbol.for(\"react.cache\");Symbol.for(\"react.tracing_marker\");var Ja=Symbol.iterator;function Ka(a){if(null===a||\"object\"!==typeof a)return null;a=Ja&&a[Ja]||a[\"@@iterator\"];return\"function\"===typeof a?a:null}var A=Object.assign,La;function Ma(a){if(void 0===La)try{throw Error();}catch(c){var b=c.stack.trim().match(/\\n( *(at )?)/);La=b&&b[1]||\"\"}return\"\\n\"+La+a}var Na=!1;\nfunction Oa(a,b){if(!a||Na)return\"\";Na=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(b)if(b=function(){throw Error();},Object.defineProperty(b.prototype,\"props\",{set:function(){throw Error();}}),\"object\"===typeof Reflect&&Reflect.construct){try{Reflect.construct(b,[])}catch(l){var d=l}Reflect.construct(a,[],b)}else{try{b.call()}catch(l){d=l}a.call(b.prototype)}else{try{throw Error();}catch(l){d=l}a()}}catch(l){if(l&&d&&\"string\"===typeof l.stack){for(var e=l.stack.split(\"\\n\"),\nf=d.stack.split(\"\\n\"),g=e.length-1,h=f.length-1;1<=g&&0<=h&&e[g]!==f[h];)h--;for(;1<=g&&0<=h;g--,h--)if(e[g]!==f[h]){if(1!==g||1!==h){do if(g--,h--,0>h||e[g]!==f[h]){var k=\"\\n\"+e[g].replace(\" at new \",\" at \");a.displayName&&k.includes(\"<anonymous>\")&&(k=k.replace(\"<anonymous>\",a.displayName));return k}while(1<=g&&0<=h)}break}}}finally{Na=!1,Error.prepareStackTrace=c}return(a=a?a.displayName||a.name:\"\")?Ma(a):\"\"}\nfunction Pa(a){switch(a.tag){case 5:return Ma(a.type);case 16:return Ma(\"Lazy\");case 13:return Ma(\"Suspense\");case 19:return Ma(\"SuspenseList\");case 0:case 2:case 15:return a=Oa(a.type,!1),a;case 11:return a=Oa(a.type.render,!1),a;case 1:return a=Oa(a.type,!0),a;default:return\"\"}}\nfunction Qa(a){if(null==a)return null;if(\"function\"===typeof a)return a.displayName||a.name||null;if(\"string\"===typeof a)return a;switch(a){case ya:return\"Fragment\";case wa:return\"Portal\";case Aa:return\"Profiler\";case za:return\"StrictMode\";case Ea:return\"Suspense\";case Fa:return\"SuspenseList\"}if(\"object\"===typeof a)switch(a.$$typeof){case Ca:return(a.displayName||\"Context\")+\".Consumer\";case Ba:return(a._context.displayName||\"Context\")+\".Provider\";case Da:var b=a.render;a=a.displayName;a||(a=b.displayName||\nb.name||\"\",a=\"\"!==a?\"ForwardRef(\"+a+\")\":\"ForwardRef\");return a;case Ga:return b=a.displayName||null,null!==b?b:Qa(a.type)||\"Memo\";case Ha:b=a._payload;a=a._init;try{return Qa(a(b))}catch(c){}}return null}\nfunction Ra(a){var b=a.type;switch(a.tag){case 24:return\"Cache\";case 9:return(b.displayName||\"Context\")+\".Consumer\";case 10:return(b._context.displayName||\"Context\")+\".Provider\";case 18:return\"DehydratedFragment\";case 11:return a=b.render,a=a.displayName||a.name||\"\",b.displayName||(\"\"!==a?\"ForwardRef(\"+a+\")\":\"ForwardRef\");case 7:return\"Fragment\";case 5:return b;case 4:return\"Portal\";case 3:return\"Root\";case 6:return\"Text\";case 16:return Qa(b);case 8:return b===za?\"StrictMode\":\"Mode\";case 22:return\"Offscreen\";\ncase 12:return\"Profiler\";case 21:return\"Scope\";case 13:return\"Suspense\";case 19:return\"SuspenseList\";case 25:return\"TracingMarker\";case 1:case 0:case 17:case 2:case 14:case 15:if(\"function\"===typeof b)return b.displayName||b.name||null;if(\"string\"===typeof b)return b}return null}function Sa(a){switch(typeof a){case \"boolean\":case \"number\":case \"string\":case \"undefined\":return a;case \"object\":return a;default:return\"\"}}\nfunction Ta(a){var b=a.type;return(a=a.nodeName)&&\"input\"===a.toLowerCase()&&(\"checkbox\"===b||\"radio\"===b)}\nfunction Ua(a){var b=Ta(a)?\"checked\":\"value\",c=Object.getOwnPropertyDescriptor(a.constructor.prototype,b),d=\"\"+a[b];if(!a.hasOwnProperty(b)&&\"undefined\"!==typeof c&&\"function\"===typeof c.get&&\"function\"===typeof c.set){var e=c.get,f=c.set;Object.defineProperty(a,b,{configurable:!0,get:function(){return e.call(this)},set:function(a){d=\"\"+a;f.call(this,a)}});Object.defineProperty(a,b,{enumerable:c.enumerable});return{getValue:function(){return d},setValue:function(a){d=\"\"+a},stopTracking:function(){a._valueTracker=\nnull;delete a[b]}}}}function Va(a){a._valueTracker||(a._valueTracker=Ua(a))}function Wa(a){if(!a)return!1;var b=a._valueTracker;if(!b)return!0;var c=b.getValue();var d=\"\";a&&(d=Ta(a)?a.checked?\"true\":\"false\":a.value);a=d;return a!==c?(b.setValue(a),!0):!1}function Xa(a){a=a||(\"undefined\"!==typeof document?document:void 0);if(\"undefined\"===typeof a)return null;try{return a.activeElement||a.body}catch(b){return a.body}}\nfunction Ya(a,b){var c=b.checked;return A({},b,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=c?c:a._wrapperState.initialChecked})}function Za(a,b){var c=null==b.defaultValue?\"\":b.defaultValue,d=null!=b.checked?b.checked:b.defaultChecked;c=Sa(null!=b.value?b.value:c);a._wrapperState={initialChecked:d,initialValue:c,controlled:\"checkbox\"===b.type||\"radio\"===b.type?null!=b.checked:null!=b.value}}function ab(a,b){b=b.checked;null!=b&&ta(a,\"checked\",b,!1)}\nfunction bb(a,b){ab(a,b);var c=Sa(b.value),d=b.type;if(null!=c)if(\"number\"===d){if(0===c&&\"\"===a.value||a.value!=c)a.value=\"\"+c}else a.value!==\"\"+c&&(a.value=\"\"+c);else if(\"submit\"===d||\"reset\"===d){a.removeAttribute(\"value\");return}b.hasOwnProperty(\"value\")?cb(a,b.type,c):b.hasOwnProperty(\"defaultValue\")&&cb(a,b.type,Sa(b.defaultValue));null==b.checked&&null!=b.defaultChecked&&(a.defaultChecked=!!b.defaultChecked)}\nfunction db(a,b,c){if(b.hasOwnProperty(\"value\")||b.hasOwnProperty(\"defaultValue\")){var d=b.type;if(!(\"submit\"!==d&&\"reset\"!==d||void 0!==b.value&&null!==b.value))return;b=\"\"+a._wrapperState.initialValue;c||b===a.value||(a.value=b);a.defaultValue=b}c=a.name;\"\"!==c&&(a.name=\"\");a.defaultChecked=!!a._wrapperState.initialChecked;\"\"!==c&&(a.name=c)}\nfunction cb(a,b,c){if(\"number\"!==b||Xa(a.ownerDocument)!==a)null==c?a.defaultValue=\"\"+a._wrapperState.initialValue:a.defaultValue!==\"\"+c&&(a.defaultValue=\"\"+c)}var eb=Array.isArray;\nfunction fb(a,b,c,d){a=a.options;if(b){b={};for(var e=0;e<c.length;e++)b[\"$\"+c[e]]=!0;for(c=0;c<a.length;c++)e=b.hasOwnProperty(\"$\"+a[c].value),a[c].selected!==e&&(a[c].selected=e),e&&d&&(a[c].defaultSelected=!0)}else{c=\"\"+Sa(c);b=null;for(e=0;e<a.length;e++){if(a[e].value===c){a[e].selected=!0;d&&(a[e].defaultSelected=!0);return}null!==b||a[e].disabled||(b=a[e])}null!==b&&(b.selected=!0)}}\nfunction gb(a,b){if(null!=b.dangerouslySetInnerHTML)throw Error(p(91));return A({},b,{value:void 0,defaultValue:void 0,children:\"\"+a._wrapperState.initialValue})}function hb(a,b){var c=b.value;if(null==c){c=b.children;b=b.defaultValue;if(null!=c){if(null!=b)throw Error(p(92));if(eb(c)){if(1<c.length)throw Error(p(93));c=c[0]}b=c}null==b&&(b=\"\");c=b}a._wrapperState={initialValue:Sa(c)}}\nfunction ib(a,b){var c=Sa(b.value),d=Sa(b.defaultValue);null!=c&&(c=\"\"+c,c!==a.value&&(a.value=c),null==b.defaultValue&&a.defaultValue!==c&&(a.defaultValue=c));null!=d&&(a.defaultValue=\"\"+d)}function jb(a){var b=a.textContent;b===a._wrapperState.initialValue&&\"\"!==b&&null!==b&&(a.value=b)}function kb(a){switch(a){case \"svg\":return\"http://www.w3.org/2000/svg\";case \"math\":return\"http://www.w3.org/1998/Math/MathML\";default:return\"http://www.w3.org/1999/xhtml\"}}\nfunction lb(a,b){return null==a||\"http://www.w3.org/1999/xhtml\"===a?kb(b):\"http://www.w3.org/2000/svg\"===a&&\"foreignObject\"===b?\"http://www.w3.org/1999/xhtml\":a}\nvar mb,nb=function(a){return\"undefined\"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(b,c,d,e){MSApp.execUnsafeLocalFunction(function(){return a(b,c,d,e)})}:a}(function(a,b){if(\"http://www.w3.org/2000/svg\"!==a.namespaceURI||\"innerHTML\"in a)a.innerHTML=b;else{mb=mb||document.createElement(\"div\");mb.innerHTML=\"<svg>\"+b.valueOf().toString()+\"</svg>\";for(b=mb.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;b.firstChild;)a.appendChild(b.firstChild)}});\nfunction ob(a,b){if(b){var c=a.firstChild;if(c&&c===a.lastChild&&3===c.nodeType){c.nodeValue=b;return}}a.textContent=b}\nvar pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,\nzoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=[\"Webkit\",\"ms\",\"Moz\",\"O\"];Object.keys(pb).forEach(function(a){qb.forEach(function(b){b=b+a.charAt(0).toUpperCase()+a.substring(1);pb[b]=pb[a]})});function rb(a,b,c){return null==b||\"boolean\"===typeof b||\"\"===b?\"\":c||\"number\"!==typeof b||0===b||pb.hasOwnProperty(a)&&pb[a]?(\"\"+b).trim():b+\"px\"}\nfunction sb(a,b){a=a.style;for(var c in b)if(b.hasOwnProperty(c)){var d=0===c.indexOf(\"--\"),e=rb(c,b[c],d);\"float\"===c&&(c=\"cssFloat\");d?a.setProperty(c,e):a[c]=e}}var tb=A({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});\nfunction ub(a,b){if(b){if(tb[a]&&(null!=b.children||null!=b.dangerouslySetInnerHTML))throw Error(p(137,a));if(null!=b.dangerouslySetInnerHTML){if(null!=b.children)throw Error(p(60));if(\"object\"!==typeof b.dangerouslySetInnerHTML||!(\"__html\"in b.dangerouslySetInnerHTML))throw Error(p(61));}if(null!=b.style&&\"object\"!==typeof b.style)throw Error(p(62));}}\nfunction vb(a,b){if(-1===a.indexOf(\"-\"))return\"string\"===typeof b.is;switch(a){case \"annotation-xml\":case \"color-profile\":case \"font-face\":case \"font-face-src\":case \"font-face-uri\":case \"font-face-format\":case \"font-face-name\":case \"missing-glyph\":return!1;default:return!0}}var wb=null;function xb(a){a=a.target||a.srcElement||window;a.correspondingUseElement&&(a=a.correspondingUseElement);return 3===a.nodeType?a.parentNode:a}var yb=null,zb=null,Ab=null;\nfunction Bb(a){if(a=Cb(a)){if(\"function\"!==typeof yb)throw Error(p(280));var b=a.stateNode;b&&(b=Db(b),yb(a.stateNode,a.type,b))}}function Eb(a){zb?Ab?Ab.push(a):Ab=[a]:zb=a}function Fb(){if(zb){var a=zb,b=Ab;Ab=zb=null;Bb(a);if(b)for(a=0;a<b.length;a++)Bb(b[a])}}function Gb(a,b){return a(b)}function Hb(){}var Ib=!1;function Jb(a,b,c){if(Ib)return a(b,c);Ib=!0;try{return Gb(a,b,c)}finally{if(Ib=!1,null!==zb||null!==Ab)Hb(),Fb()}}\nfunction Kb(a,b){var c=a.stateNode;if(null===c)return null;var d=Db(c);if(null===d)return null;c=d[b];a:switch(b){case \"onClick\":case \"onClickCapture\":case \"onDoubleClick\":case \"onDoubleClickCapture\":case \"onMouseDown\":case \"onMouseDownCapture\":case \"onMouseMove\":case \"onMouseMoveCapture\":case \"onMouseUp\":case \"onMouseUpCapture\":case \"onMouseEnter\":(d=!d.disabled)||(a=a.type,d=!(\"button\"===a||\"input\"===a||\"select\"===a||\"textarea\"===a));a=!d;break a;default:a=!1}if(a)return null;if(c&&\"function\"!==\ntypeof c)throw Error(p(231,b,typeof c));return c}var Lb=!1;if(ia)try{var Mb={};Object.defineProperty(Mb,\"passive\",{get:function(){Lb=!0}});window.addEventListener(\"test\",Mb,Mb);window.removeEventListener(\"test\",Mb,Mb)}catch(a){Lb=!1}function Nb(a,b,c,d,e,f,g,h,k){var l=Array.prototype.slice.call(arguments,3);try{b.apply(c,l)}catch(m){this.onError(m)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function(a){Ob=!0;Pb=a}};function Tb(a,b,c,d,e,f,g,h,k){Ob=!1;Pb=null;Nb.apply(Sb,arguments)}\nfunction Ub(a,b,c,d,e,f,g,h,k){Tb.apply(this,arguments);if(Ob){if(Ob){var l=Pb;Ob=!1;Pb=null}else throw Error(p(198));Qb||(Qb=!0,Rb=l)}}function Vb(a){var b=a,c=a;if(a.alternate)for(;b.return;)b=b.return;else{a=b;do b=a,0!==(b.flags&4098)&&(c=b.return),a=b.return;while(a)}return 3===b.tag?c:null}function Wb(a){if(13===a.tag){var b=a.memoizedState;null===b&&(a=a.alternate,null!==a&&(b=a.memoizedState));if(null!==b)return b.dehydrated}return null}function Xb(a){if(Vb(a)!==a)throw Error(p(188));}\nfunction Yb(a){var b=a.alternate;if(!b){b=Vb(a);if(null===b)throw Error(p(188));return b!==a?null:a}for(var c=a,d=b;;){var e=c.return;if(null===e)break;var f=e.alternate;if(null===f){d=e.return;if(null!==d){c=d;continue}break}if(e.child===f.child){for(f=e.child;f;){if(f===c)return Xb(e),a;if(f===d)return Xb(e),b;f=f.sibling}throw Error(p(188));}if(c.return!==d.return)c=e,d=f;else{for(var g=!1,h=e.child;h;){if(h===c){g=!0;c=e;d=f;break}if(h===d){g=!0;d=e;c=f;break}h=h.sibling}if(!g){for(h=f.child;h;){if(h===\nc){g=!0;c=f;d=e;break}if(h===d){g=!0;d=f;c=e;break}h=h.sibling}if(!g)throw Error(p(189));}}if(c.alternate!==d)throw Error(p(190));}if(3!==c.tag)throw Error(p(188));return c.stateNode.current===c?a:b}function Zb(a){a=Yb(a);return null!==a?$b(a):null}function $b(a){if(5===a.tag||6===a.tag)return a;for(a=a.child;null!==a;){var b=$b(a);if(null!==b)return b;a=a.sibling}return null}\nvar ac=ca.unstable_scheduleCallback,bc=ca.unstable_cancelCallback,cc=ca.unstable_shouldYield,dc=ca.unstable_requestPaint,B=ca.unstable_now,ec=ca.unstable_getCurrentPriorityLevel,fc=ca.unstable_ImmediatePriority,gc=ca.unstable_UserBlockingPriority,hc=ca.unstable_NormalPriority,ic=ca.unstable_LowPriority,jc=ca.unstable_IdlePriority,kc=null,lc=null;function mc(a){if(lc&&\"function\"===typeof lc.onCommitFiberRoot)try{lc.onCommitFiberRoot(kc,a,void 0,128===(a.current.flags&128))}catch(b){}}\nvar oc=Math.clz32?Math.clz32:nc,pc=Math.log,qc=Math.LN2;function nc(a){a>>>=0;return 0===a?32:31-(pc(a)/qc|0)|0}var rc=64,sc=4194304;\nfunction tc(a){switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return a&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;\ndefault:return a}}function uc(a,b){var c=a.pendingLanes;if(0===c)return 0;var d=0,e=a.suspendedLanes,f=a.pingedLanes,g=c&268435455;if(0!==g){var h=g&~e;0!==h?d=tc(h):(f&=g,0!==f&&(d=tc(f)))}else g=c&~e,0!==g?d=tc(g):0!==f&&(d=tc(f));if(0===d)return 0;if(0!==b&&b!==d&&0===(b&e)&&(e=d&-d,f=b&-b,e>=f||16===e&&0!==(f&4194240)))return b;0!==(d&4)&&(d|=c&16);b=a.entangledLanes;if(0!==b)for(a=a.entanglements,b&=d;0<b;)c=31-oc(b),e=1<<c,d|=a[c],b&=~e;return d}\nfunction vc(a,b){switch(a){case 1:case 2:case 4:return b+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return b+5E3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}\nfunction wc(a,b){for(var c=a.suspendedLanes,d=a.pingedLanes,e=a.expirationTimes,f=a.pendingLanes;0<f;){var g=31-oc(f),h=1<<g,k=e[g];if(-1===k){if(0===(h&c)||0!==(h&d))e[g]=vc(h,b)}else k<=b&&(a.expiredLanes|=h);f&=~h}}function xc(a){a=a.pendingLanes&-1073741825;return 0!==a?a:a&1073741824?1073741824:0}function yc(){var a=rc;rc<<=1;0===(rc&4194240)&&(rc=64);return a}function zc(a){for(var b=[],c=0;31>c;c++)b.push(a);return b}\nfunction Ac(a,b,c){a.pendingLanes|=b;536870912!==b&&(a.suspendedLanes=0,a.pingedLanes=0);a=a.eventTimes;b=31-oc(b);a[b]=c}function Bc(a,b){var c=a.pendingLanes&~b;a.pendingLanes=b;a.suspendedLanes=0;a.pingedLanes=0;a.expiredLanes&=b;a.mutableReadLanes&=b;a.entangledLanes&=b;b=a.entanglements;var d=a.eventTimes;for(a=a.expirationTimes;0<c;){var e=31-oc(c),f=1<<e;b[e]=0;d[e]=-1;a[e]=-1;c&=~f}}\nfunction Cc(a,b){var c=a.entangledLanes|=b;for(a=a.entanglements;c;){var d=31-oc(c),e=1<<d;e&b|a[d]&b&&(a[d]|=b);c&=~e}}var C=0;function Dc(a){a&=-a;return 1<a?4<a?0!==(a&268435455)?16:536870912:4:1}var Ec,Fc,Gc,Hc,Ic,Jc=!1,Kc=[],Lc=null,Mc=null,Nc=null,Oc=new Map,Pc=new Map,Qc=[],Rc=\"mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit\".split(\" \");\nfunction Sc(a,b){switch(a){case \"focusin\":case \"focusout\":Lc=null;break;case \"dragenter\":case \"dragleave\":Mc=null;break;case \"mouseover\":case \"mouseout\":Nc=null;break;case \"pointerover\":case \"pointerout\":Oc.delete(b.pointerId);break;case \"gotpointercapture\":case \"lostpointercapture\":Pc.delete(b.pointerId)}}\nfunction Tc(a,b,c,d,e,f){if(null===a||a.nativeEvent!==f)return a={blockedOn:b,domEventName:c,eventSystemFlags:d,nativeEvent:f,targetContainers:[e]},null!==b&&(b=Cb(b),null!==b&&Fc(b)),a;a.eventSystemFlags|=d;b=a.targetContainers;null!==e&&-1===b.indexOf(e)&&b.push(e);return a}\nfunction Uc(a,b,c,d,e){switch(b){case \"focusin\":return Lc=Tc(Lc,a,b,c,d,e),!0;case \"dragenter\":return Mc=Tc(Mc,a,b,c,d,e),!0;case \"mouseover\":return Nc=Tc(Nc,a,b,c,d,e),!0;case \"pointerover\":var f=e.pointerId;Oc.set(f,Tc(Oc.get(f)||null,a,b,c,d,e));return!0;case \"gotpointercapture\":return f=e.pointerId,Pc.set(f,Tc(Pc.get(f)||null,a,b,c,d,e)),!0}return!1}\nfunction Vc(a){var b=Wc(a.target);if(null!==b){var c=Vb(b);if(null!==c)if(b=c.tag,13===b){if(b=Wb(c),null!==b){a.blockedOn=b;Ic(a.priority,function(){Gc(c)});return}}else if(3===b&&c.stateNode.current.memoizedState.isDehydrated){a.blockedOn=3===c.tag?c.stateNode.containerInfo:null;return}}a.blockedOn=null}\nfunction Xc(a){if(null!==a.blockedOn)return!1;for(var b=a.targetContainers;0<b.length;){var c=Yc(a.domEventName,a.eventSystemFlags,b[0],a.nativeEvent);if(null===c){c=a.nativeEvent;var d=new c.constructor(c.type,c);wb=d;c.target.dispatchEvent(d);wb=null}else return b=Cb(c),null!==b&&Fc(b),a.blockedOn=c,!1;b.shift()}return!0}function Zc(a,b,c){Xc(a)&&c.delete(b)}function $c(){Jc=!1;null!==Lc&&Xc(Lc)&&(Lc=null);null!==Mc&&Xc(Mc)&&(Mc=null);null!==Nc&&Xc(Nc)&&(Nc=null);Oc.forEach(Zc);Pc.forEach(Zc)}\nfunction ad(a,b){a.blockedOn===b&&(a.blockedOn=null,Jc||(Jc=!0,ca.unstable_scheduleCallback(ca.unstable_NormalPriority,$c)))}\nfunction bd(a){function b(b){return ad(b,a)}if(0<Kc.length){ad(Kc[0],a);for(var c=1;c<Kc.length;c++){var d=Kc[c];d.blockedOn===a&&(d.blockedOn=null)}}null!==Lc&&ad(Lc,a);null!==Mc&&ad(Mc,a);null!==Nc&&ad(Nc,a);Oc.forEach(b);Pc.forEach(b);for(c=0;c<Qc.length;c++)d=Qc[c],d.blockedOn===a&&(d.blockedOn=null);for(;0<Qc.length&&(c=Qc[0],null===c.blockedOn);)Vc(c),null===c.blockedOn&&Qc.shift()}var cd=ua.ReactCurrentBatchConfig,dd=!0;\nfunction ed(a,b,c,d){var e=C,f=cd.transition;cd.transition=null;try{C=1,fd(a,b,c,d)}finally{C=e,cd.transition=f}}function gd(a,b,c,d){var e=C,f=cd.transition;cd.transition=null;try{C=4,fd(a,b,c,d)}finally{C=e,cd.transition=f}}\nfunction fd(a,b,c,d){if(dd){var e=Yc(a,b,c,d);if(null===e)hd(a,b,d,id,c),Sc(a,d);else if(Uc(e,a,b,c,d))d.stopPropagation();else if(Sc(a,d),b&4&&-1<Rc.indexOf(a)){for(;null!==e;){var f=Cb(e);null!==f&&Ec(f);f=Yc(a,b,c,d);null===f&&hd(a,b,d,id,c);if(f===e)break;e=f}null!==e&&d.stopPropagation()}else hd(a,b,d,null,c)}}var id=null;\nfunction Yc(a,b,c,d){id=null;a=xb(d);a=Wc(a);if(null!==a)if(b=Vb(a),null===b)a=null;else if(c=b.tag,13===c){a=Wb(b);if(null!==a)return a;a=null}else if(3===c){if(b.stateNode.current.memoizedState.isDehydrated)return 3===b.tag?b.stateNode.containerInfo:null;a=null}else b!==a&&(a=null);id=a;return null}\nfunction jd(a){switch(a){case \"cancel\":case \"click\":case \"close\":case \"contextmenu\":case \"copy\":case \"cut\":case \"auxclick\":case \"dblclick\":case \"dragend\":case \"dragstart\":case \"drop\":case \"focusin\":case \"focusout\":case \"input\":case \"invalid\":case \"keydown\":case \"keypress\":case \"keyup\":case \"mousedown\":case \"mouseup\":case \"paste\":case \"pause\":case \"play\":case \"pointercancel\":case \"pointerdown\":case \"pointerup\":case \"ratechange\":case \"reset\":case \"resize\":case \"seeked\":case \"submit\":case \"touchcancel\":case \"touchend\":case \"touchstart\":case \"volumechange\":case \"change\":case \"selectionchange\":case \"textInput\":case \"compositionstart\":case \"compositionend\":case \"compositionupdate\":case \"beforeblur\":case \"afterblur\":case \"beforeinput\":case \"blur\":case \"fullscreenchange\":case \"focus\":case \"hashchange\":case \"popstate\":case \"select\":case \"selectstart\":return 1;case \"drag\":case \"dragenter\":case \"dragexit\":case \"dragleave\":case \"dragover\":case \"mousemove\":case \"mouseout\":case \"mouseover\":case \"pointermove\":case \"pointerout\":case \"pointerover\":case \"scroll\":case \"toggle\":case \"touchmove\":case \"wheel\":case \"mouseenter\":case \"mouseleave\":case \"pointerenter\":case \"pointerleave\":return 4;\ncase \"message\":switch(ec()){case fc:return 1;case gc:return 4;case hc:case ic:return 16;case jc:return 536870912;default:return 16}default:return 16}}var kd=null,ld=null,md=null;function nd(){if(md)return md;var a,b=ld,c=b.length,d,e=\"value\"in kd?kd.value:kd.textContent,f=e.length;for(a=0;a<c&&b[a]===e[a];a++);var g=c-a;for(d=1;d<=g&&b[c-d]===e[f-d];d++);return md=e.slice(a,1<d?1-d:void 0)}\nfunction od(a){var b=a.keyCode;\"charCode\"in a?(a=a.charCode,0===a&&13===b&&(a=13)):a=b;10===a&&(a=13);return 32<=a||13===a?a:0}function pd(){return!0}function qd(){return!1}\nfunction rd(a){function b(b,d,e,f,g){this._reactName=b;this._targetInst=e;this.type=d;this.nativeEvent=f;this.target=g;this.currentTarget=null;for(var c in a)a.hasOwnProperty(c)&&(b=a[c],this[c]=b?b(f):f[c]);this.isDefaultPrevented=(null!=f.defaultPrevented?f.defaultPrevented:!1===f.returnValue)?pd:qd;this.isPropagationStopped=qd;return this}A(b.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():\"unknown\"!==typeof a.returnValue&&\n(a.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():\"unknown\"!==typeof a.cancelBubble&&(a.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd});return b}\nvar sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=A({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=A({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(a){return void 0===a.relatedTarget?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){if(\"movementX\"in\na)return a.movementX;a!==yd&&(yd&&\"mousemove\"===a.type?(wd=a.screenX-yd.screenX,xd=a.screenY-yd.screenY):xd=wd=0,yd=a);return wd},movementY:function(a){return\"movementY\"in a?a.movementY:xd}}),Bd=rd(Ad),Cd=A({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=A({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=A({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=A({},sd,{clipboardData:function(a){return\"clipboardData\"in a?a.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=A({},sd,{data:0}),Ld=rd(Kd),Md={Esc:\"Escape\",\nSpacebar:\" \",Left:\"ArrowLeft\",Up:\"ArrowUp\",Right:\"ArrowRight\",Down:\"ArrowDown\",Del:\"Delete\",Win:\"OS\",Menu:\"ContextMenu\",Apps:\"ContextMenu\",Scroll:\"ScrollLock\",MozPrintableKey:\"Unidentified\"},Nd={8:\"Backspace\",9:\"Tab\",12:\"Clear\",13:\"Enter\",16:\"Shift\",17:\"Control\",18:\"Alt\",19:\"Pause\",20:\"CapsLock\",27:\"Escape\",32:\" \",33:\"PageUp\",34:\"PageDown\",35:\"End\",36:\"Home\",37:\"ArrowLeft\",38:\"ArrowUp\",39:\"ArrowRight\",40:\"ArrowDown\",45:\"Insert\",46:\"Delete\",112:\"F1\",113:\"F2\",114:\"F3\",115:\"F4\",116:\"F5\",117:\"F6\",118:\"F7\",\n119:\"F8\",120:\"F9\",121:\"F10\",122:\"F11\",123:\"F12\",144:\"NumLock\",145:\"ScrollLock\",224:\"Meta\"},Od={Alt:\"altKey\",Control:\"ctrlKey\",Meta:\"metaKey\",Shift:\"shiftKey\"};function Pd(a){var b=this.nativeEvent;return b.getModifierState?b.getModifierState(a):(a=Od[a])?!!b[a]:!1}function zd(){return Pd}\nvar Qd=A({},ud,{key:function(a){if(a.key){var b=Md[a.key]||a.key;if(\"Unidentified\"!==b)return b}return\"keypress\"===a.type?(a=od(a),13===a?\"Enter\":String.fromCharCode(a)):\"keydown\"===a.type||\"keyup\"===a.type?Nd[a.keyCode]||\"Unidentified\":\"\"},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(a){return\"keypress\"===a.type?od(a):0},keyCode:function(a){return\"keydown\"===a.type||\"keyup\"===a.type?a.keyCode:0},which:function(a){return\"keypress\"===\na.type?od(a):\"keydown\"===a.type||\"keyup\"===a.type?a.keyCode:0}}),Rd=rd(Qd),Sd=A({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=A({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A({},Ad,{deltaX:function(a){return\"deltaX\"in a?a.deltaX:\"wheelDeltaX\"in a?-a.wheelDeltaX:0},\ndeltaY:function(a){return\"deltaY\"in a?a.deltaY:\"wheelDeltaY\"in a?-a.wheelDeltaY:\"wheelDelta\"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae=ia&&\"CompositionEvent\"in window,be=null;ia&&\"documentMode\"in document&&(be=document.documentMode);var ce=ia&&\"TextEvent\"in window&&!be,de=ia&&(!ae||be&&8<be&&11>=be),ee=String.fromCharCode(32),fe=!1;\nfunction ge(a,b){switch(a){case \"keyup\":return-1!==$d.indexOf(b.keyCode);case \"keydown\":return 229!==b.keyCode;case \"keypress\":case \"mousedown\":case \"focusout\":return!0;default:return!1}}function he(a){a=a.detail;return\"object\"===typeof a&&\"data\"in a?a.data:null}var ie=!1;function je(a,b){switch(a){case \"compositionend\":return he(b);case \"keypress\":if(32!==b.which)return null;fe=!0;return ee;case \"textInput\":return a=b.data,a===ee&&fe?null:a;default:return null}}\nfunction ke(a,b){if(ie)return\"compositionend\"===a||!ae&&ge(a,b)?(a=nd(),md=ld=kd=null,ie=!1,a):null;switch(a){case \"paste\":return null;case \"keypress\":if(!(b.ctrlKey||b.altKey||b.metaKey)||b.ctrlKey&&b.altKey){if(b.char&&1<b.char.length)return b.char;if(b.which)return String.fromCharCode(b.which)}return null;case \"compositionend\":return de&&\"ko\"!==b.locale?null:b.data;default:return null}}\nvar le={color:!0,date:!0,datetime:!0,\"datetime-local\":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me(a){var b=a&&a.nodeName&&a.nodeName.toLowerCase();return\"input\"===b?!!le[a.type]:\"textarea\"===b?!0:!1}function ne(a,b,c,d){Eb(d);b=oe(b,\"onChange\");0<b.length&&(c=new td(\"onChange\",\"change\",null,c,d),a.push({event:c,listeners:b}))}var pe=null,qe=null;function re(a){se(a,0)}function te(a){var b=ue(a);if(Wa(b))return a}\nfunction ve(a,b){if(\"change\"===a)return b}var we=!1;if(ia){var xe;if(ia){var ye=\"oninput\"in document;if(!ye){var ze=document.createElement(\"div\");ze.setAttribute(\"oninput\",\"return;\");ye=\"function\"===typeof ze.oninput}xe=ye}else xe=!1;we=xe&&(!document.documentMode||9<document.documentMode)}function Ae(){pe&&(pe.detachEvent(\"onpropertychange\",Be),qe=pe=null)}function Be(a){if(\"value\"===a.propertyName&&te(qe)){var b=[];ne(b,qe,a,xb(a));Jb(re,b)}}\nfunction Ce(a,b,c){\"focusin\"===a?(Ae(),pe=b,qe=c,pe.attachEvent(\"onpropertychange\",Be)):\"focusout\"===a&&Ae()}function De(a){if(\"selectionchange\"===a||\"keyup\"===a||\"keydown\"===a)return te(qe)}function Ee(a,b){if(\"click\"===a)return te(b)}function Fe(a,b){if(\"input\"===a||\"change\"===a)return te(b)}function Ge(a,b){return a===b&&(0!==a||1/a===1/b)||a!==a&&b!==b}var He=\"function\"===typeof Object.is?Object.is:Ge;\nfunction Ie(a,b){if(He(a,b))return!0;if(\"object\"!==typeof a||null===a||\"object\"!==typeof b||null===b)return!1;var c=Object.keys(a),d=Object.keys(b);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++){var e=c[d];if(!ja.call(b,e)||!He(a[e],b[e]))return!1}return!0}function Je(a){for(;a&&a.firstChild;)a=a.firstChild;return a}\nfunction Ke(a,b){var c=Je(a);a=0;for(var d;c;){if(3===c.nodeType){d=a+c.textContent.length;if(a<=b&&d>=b)return{node:c,offset:b-a};a=d}a:{for(;c;){if(c.nextSibling){c=c.nextSibling;break a}c=c.parentNode}c=void 0}c=Je(c)}}function Le(a,b){return a&&b?a===b?!0:a&&3===a.nodeType?!1:b&&3===b.nodeType?Le(a,b.parentNode):\"contains\"in a?a.contains(b):a.compareDocumentPosition?!!(a.compareDocumentPosition(b)&16):!1:!1}\nfunction Me(){for(var a=window,b=Xa();b instanceof a.HTMLIFrameElement;){try{var c=\"string\"===typeof b.contentWindow.location.href}catch(d){c=!1}if(c)a=b.contentWindow;else break;b=Xa(a.document)}return b}function Ne(a){var b=a&&a.nodeName&&a.nodeName.toLowerCase();return b&&(\"input\"===b&&(\"text\"===a.type||\"search\"===a.type||\"tel\"===a.type||\"url\"===a.type||\"password\"===a.type)||\"textarea\"===b||\"true\"===a.contentEditable)}\nfunction Oe(a){var b=Me(),c=a.focusedElem,d=a.selectionRange;if(b!==c&&c&&c.ownerDocument&&Le(c.ownerDocument.documentElement,c)){if(null!==d&&Ne(c))if(b=d.start,a=d.end,void 0===a&&(a=b),\"selectionStart\"in c)c.selectionStart=b,c.selectionEnd=Math.min(a,c.value.length);else if(a=(b=c.ownerDocument||document)&&b.defaultView||window,a.getSelection){a=a.getSelection();var e=c.textContent.length,f=Math.min(d.start,e);d=void 0===d.end?f:Math.min(d.end,e);!a.extend&&f>d&&(e=d,d=f,f=e);e=Ke(c,f);var g=Ke(c,\nd);e&&g&&(1!==a.rangeCount||a.anchorNode!==e.node||a.anchorOffset!==e.offset||a.focusNode!==g.node||a.focusOffset!==g.offset)&&(b=b.createRange(),b.setStart(e.node,e.offset),a.removeAllRanges(),f>d?(a.addRange(b),a.extend(g.node,g.offset)):(b.setEnd(g.node,g.offset),a.addRange(b)))}b=[];for(a=c;a=a.parentNode;)1===a.nodeType&&b.push({element:a,left:a.scrollLeft,top:a.scrollTop});\"function\"===typeof c.focus&&c.focus();for(c=0;c<b.length;c++)a=b[c],a.element.scrollLeft=a.left,a.element.scrollTop=a.top}}\nvar Pe=ia&&\"documentMode\"in document&&11>=document.documentMode,Qe=null,Re=null,Se=null,Te=!1;\nfunction Ue(a,b,c){var d=c.window===c?c.document:9===c.nodeType?c:c.ownerDocument;Te||null==Qe||Qe!==Xa(d)||(d=Qe,\"selectionStart\"in d&&Ne(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Se&&Ie(Se,d)||(Se=d,d=oe(Re,\"onSelect\"),0<d.length&&(b=new td(\"onSelect\",\"select\",null,b,c),a.push({event:b,listeners:d}),b.target=Qe)))}\nfunction Ve(a,b){var c={};c[a.toLowerCase()]=b.toLowerCase();c[\"Webkit\"+a]=\"webkit\"+b;c[\"Moz\"+a]=\"moz\"+b;return c}var We={animationend:Ve(\"Animation\",\"AnimationEnd\"),animationiteration:Ve(\"Animation\",\"AnimationIteration\"),animationstart:Ve(\"Animation\",\"AnimationStart\"),transitionend:Ve(\"Transition\",\"TransitionEnd\")},Xe={},Ye={};\nia&&(Ye=document.createElement(\"div\").style,\"AnimationEvent\"in window||(delete We.animationend.animation,delete We.animationiteration.animation,delete We.animationstart.animation),\"TransitionEvent\"in window||delete We.transitionend.transition);function Ze(a){if(Xe[a])return Xe[a];if(!We[a])return a;var b=We[a],c;for(c in b)if(b.hasOwnProperty(c)&&c in Ye)return Xe[a]=b[c];return a}var $e=Ze(\"animationend\"),af=Ze(\"animationiteration\"),bf=Ze(\"animationstart\"),cf=Ze(\"transitionend\"),df=new Map,ef=\"abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel\".split(\" \");\nfunction ff(a,b){df.set(a,b);fa(b,[a])}for(var gf=0;gf<ef.length;gf++){var hf=ef[gf],jf=hf.toLowerCase(),kf=hf[0].toUpperCase()+hf.slice(1);ff(jf,\"on\"+kf)}ff($e,\"onAnimationEnd\");ff(af,\"onAnimationIteration\");ff(bf,\"onAnimationStart\");ff(\"dblclick\",\"onDoubleClick\");ff(\"focusin\",\"onFocus\");ff(\"focusout\",\"onBlur\");ff(cf,\"onTransitionEnd\");ha(\"onMouseEnter\",[\"mouseout\",\"mouseover\"]);ha(\"onMouseLeave\",[\"mouseout\",\"mouseover\"]);ha(\"onPointerEnter\",[\"pointerout\",\"pointerover\"]);\nha(\"onPointerLeave\",[\"pointerout\",\"pointerover\"]);fa(\"onChange\",\"change click focusin focusout input keydown keyup selectionchange\".split(\" \"));fa(\"onSelect\",\"focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange\".split(\" \"));fa(\"onBeforeInput\",[\"compositionend\",\"keypress\",\"textInput\",\"paste\"]);fa(\"onCompositionEnd\",\"compositionend focusout keydown keypress keyup mousedown\".split(\" \"));fa(\"onCompositionStart\",\"compositionstart focusout keydown keypress keyup mousedown\".split(\" \"));\nfa(\"onCompositionUpdate\",\"compositionupdate focusout keydown keypress keyup mousedown\".split(\" \"));var lf=\"abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting\".split(\" \"),mf=new Set(\"cancel close invalid load scroll toggle\".split(\" \").concat(lf));\nfunction nf(a,b,c){var d=a.type||\"unknown-event\";a.currentTarget=c;Ub(d,b,void 0,a);a.currentTarget=null}\nfunction se(a,b){b=0!==(b&4);for(var c=0;c<a.length;c++){var d=a[c],e=d.event;d=d.listeners;a:{var f=void 0;if(b)for(var g=d.length-1;0<=g;g--){var h=d[g],k=h.instance,l=h.currentTarget;h=h.listener;if(k!==f&&e.isPropagationStopped())break a;nf(e,h,l);f=k}else for(g=0;g<d.length;g++){h=d[g];k=h.instance;l=h.currentTarget;h=h.listener;if(k!==f&&e.isPropagationStopped())break a;nf(e,h,l);f=k}}}if(Qb)throw a=Rb,Qb=!1,Rb=null,a;}\nfunction D(a,b){var c=b[of];void 0===c&&(c=b[of]=new Set);var d=a+\"__bubble\";c.has(d)||(pf(b,a,2,!1),c.add(d))}function qf(a,b,c){var d=0;b&&(d|=4);pf(c,a,d,b)}var rf=\"_reactListening\"+Math.random().toString(36).slice(2);function sf(a){if(!a[rf]){a[rf]=!0;da.forEach(function(b){\"selectionchange\"!==b&&(mf.has(b)||qf(b,!1,a),qf(b,!0,a))});var b=9===a.nodeType?a:a.ownerDocument;null===b||b[rf]||(b[rf]=!0,qf(\"selectionchange\",!1,b))}}\nfunction pf(a,b,c,d){switch(jd(b)){case 1:var e=ed;break;case 4:e=gd;break;default:e=fd}c=e.bind(null,b,c,a);e=void 0;!Lb||\"touchstart\"!==b&&\"touchmove\"!==b&&\"wheel\"!==b||(e=!0);d?void 0!==e?a.addEventListener(b,c,{capture:!0,passive:e}):a.addEventListener(b,c,!0):void 0!==e?a.addEventListener(b,c,{passive:e}):a.addEventListener(b,c,!1)}\nfunction hd(a,b,c,d,e){var f=d;if(0===(b&1)&&0===(b&2)&&null!==d)a:for(;;){if(null===d)return;var g=d.tag;if(3===g||4===g){var h=d.stateNode.containerInfo;if(h===e||8===h.nodeType&&h.parentNode===e)break;if(4===g)for(g=d.return;null!==g;){var k=g.tag;if(3===k||4===k)if(k=g.stateNode.containerInfo,k===e||8===k.nodeType&&k.parentNode===e)return;g=g.return}for(;null!==h;){g=Wc(h);if(null===g)return;k=g.tag;if(5===k||6===k){d=f=g;continue a}h=h.parentNode}}d=d.return}Jb(function(){var d=f,e=xb(c),g=[];\na:{var h=df.get(a);if(void 0!==h){var k=td,n=a;switch(a){case \"keypress\":if(0===od(c))break a;case \"keydown\":case \"keyup\":k=Rd;break;case \"focusin\":n=\"focus\";k=Fd;break;case \"focusout\":n=\"blur\";k=Fd;break;case \"beforeblur\":case \"afterblur\":k=Fd;break;case \"click\":if(2===c.button)break a;case \"auxclick\":case \"dblclick\":case \"mousedown\":case \"mousemove\":case \"mouseup\":case \"mouseout\":case \"mouseover\":case \"contextmenu\":k=Bd;break;case \"drag\":case \"dragend\":case \"dragenter\":case \"dragexit\":case \"dragleave\":case \"dragover\":case \"dragstart\":case \"drop\":k=\nDd;break;case \"touchcancel\":case \"touchend\":case \"touchmove\":case \"touchstart\":k=Vd;break;case $e:case af:case bf:k=Hd;break;case cf:k=Xd;break;case \"scroll\":k=vd;break;case \"wheel\":k=Zd;break;case \"copy\":case \"cut\":case \"paste\":k=Jd;break;case \"gotpointercapture\":case \"lostpointercapture\":case \"pointercancel\":case \"pointerdown\":case \"pointermove\":case \"pointerout\":case \"pointerover\":case \"pointerup\":k=Td}var t=0!==(b&4),J=!t&&\"scroll\"===a,x=t?null!==h?h+\"Capture\":null:h;t=[];for(var w=d,u;null!==\nw;){u=w;var F=u.stateNode;5===u.tag&&null!==F&&(u=F,null!==x&&(F=Kb(w,x),null!=F&&t.push(tf(w,F,u))));if(J)break;w=w.return}0<t.length&&(h=new k(h,n,null,c,e),g.push({event:h,listeners:t}))}}if(0===(b&7)){a:{h=\"mouseover\"===a||\"pointerover\"===a;k=\"mouseout\"===a||\"pointerout\"===a;if(h&&c!==wb&&(n=c.relatedTarget||c.fromElement)&&(Wc(n)||n[uf]))break a;if(k||h){h=e.window===e?e:(h=e.ownerDocument)?h.defaultView||h.parentWindow:window;if(k){if(n=c.relatedTarget||c.toElement,k=d,n=n?Wc(n):null,null!==\nn&&(J=Vb(n),n!==J||5!==n.tag&&6!==n.tag))n=null}else k=null,n=d;if(k!==n){t=Bd;F=\"onMouseLeave\";x=\"onMouseEnter\";w=\"mouse\";if(\"pointerout\"===a||\"pointerover\"===a)t=Td,F=\"onPointerLeave\",x=\"onPointerEnter\",w=\"pointer\";J=null==k?h:ue(k);u=null==n?h:ue(n);h=new t(F,w+\"leave\",k,c,e);h.target=J;h.relatedTarget=u;F=null;Wc(e)===d&&(t=new t(x,w+\"enter\",n,c,e),t.target=u,t.relatedTarget=J,F=t);J=F;if(k&&n)b:{t=k;x=n;w=0;for(u=t;u;u=vf(u))w++;u=0;for(F=x;F;F=vf(F))u++;for(;0<w-u;)t=vf(t),w--;for(;0<u-w;)x=\nvf(x),u--;for(;w--;){if(t===x||null!==x&&t===x.alternate)break b;t=vf(t);x=vf(x)}t=null}else t=null;null!==k&&wf(g,h,k,t,!1);null!==n&&null!==J&&wf(g,J,n,t,!0)}}}a:{h=d?ue(d):window;k=h.nodeName&&h.nodeName.toLowerCase();if(\"select\"===k||\"input\"===k&&\"file\"===h.type)var na=ve;else if(me(h))if(we)na=Fe;else{na=De;var xa=Ce}else(k=h.nodeName)&&\"input\"===k.toLowerCase()&&(\"checkbox\"===h.type||\"radio\"===h.type)&&(na=Ee);if(na&&(na=na(a,d))){ne(g,na,c,e);break a}xa&&xa(a,h,d);\"focusout\"===a&&(xa=h._wrapperState)&&\nxa.controlled&&\"number\"===h.type&&cb(h,\"number\",h.value)}xa=d?ue(d):window;switch(a){case \"focusin\":if(me(xa)||\"true\"===xa.contentEditable)Qe=xa,Re=d,Se=null;break;case \"focusout\":Se=Re=Qe=null;break;case \"mousedown\":Te=!0;break;case \"contextmenu\":case \"mouseup\":case \"dragend\":Te=!1;Ue(g,c,e);break;case \"selectionchange\":if(Pe)break;case \"keydown\":case \"keyup\":Ue(g,c,e)}var $a;if(ae)b:{switch(a){case \"compositionstart\":var ba=\"onCompositionStart\";break b;case \"compositionend\":ba=\"onCompositionEnd\";\nbreak b;case \"compositionupdate\":ba=\"onCompositionUpdate\";break b}ba=void 0}else ie?ge(a,c)&&(ba=\"onCompositionEnd\"):\"keydown\"===a&&229===c.keyCode&&(ba=\"onCompositionStart\");ba&&(de&&\"ko\"!==c.locale&&(ie||\"onCompositionStart\"!==ba?\"onCompositionEnd\"===ba&&ie&&($a=nd()):(kd=e,ld=\"value\"in kd?kd.value:kd.textContent,ie=!0)),xa=oe(d,ba),0<xa.length&&(ba=new Ld(ba,a,null,c,e),g.push({event:ba,listeners:xa}),$a?ba.data=$a:($a=he(c),null!==$a&&(ba.data=$a))));if($a=ce?je(a,c):ke(a,c))d=oe(d,\"onBeforeInput\"),\n0<d.length&&(e=new Ld(\"onBeforeInput\",\"beforeinput\",null,c,e),g.push({event:e,listeners:d}),e.data=$a)}se(g,b)})}function tf(a,b,c){return{instance:a,listener:b,currentTarget:c}}function oe(a,b){for(var c=b+\"Capture\",d=[];null!==a;){var e=a,f=e.stateNode;5===e.tag&&null!==f&&(e=f,f=Kb(a,c),null!=f&&d.unshift(tf(a,f,e)),f=Kb(a,b),null!=f&&d.push(tf(a,f,e)));a=a.return}return d}function vf(a){if(null===a)return null;do a=a.return;while(a&&5!==a.tag);return a?a:null}\nfunction wf(a,b,c,d,e){for(var f=b._reactName,g=[];null!==c&&c!==d;){var h=c,k=h.alternate,l=h.stateNode;if(null!==k&&k===d)break;5===h.tag&&null!==l&&(h=l,e?(k=Kb(c,f),null!=k&&g.unshift(tf(c,k,h))):e||(k=Kb(c,f),null!=k&&g.push(tf(c,k,h))));c=c.return}0!==g.length&&a.push({event:b,listeners:g})}var xf=/\\r\\n?/g,yf=/\\u0000|\\uFFFD/g;function zf(a){return(\"string\"===typeof a?a:\"\"+a).replace(xf,\"\\n\").replace(yf,\"\")}function Af(a,b,c){b=zf(b);if(zf(a)!==b&&c)throw Error(p(425));}function Bf(){}\nvar Cf=null,Df=null;function Ef(a,b){return\"textarea\"===a||\"noscript\"===a||\"string\"===typeof b.children||\"number\"===typeof b.children||\"object\"===typeof b.dangerouslySetInnerHTML&&null!==b.dangerouslySetInnerHTML&&null!=b.dangerouslySetInnerHTML.__html}\nvar Ff=\"function\"===typeof setTimeout?setTimeout:void 0,Gf=\"function\"===typeof clearTimeout?clearTimeout:void 0,Hf=\"function\"===typeof Promise?Promise:void 0,Jf=\"function\"===typeof queueMicrotask?queueMicrotask:\"undefined\"!==typeof Hf?function(a){return Hf.resolve(null).then(a).catch(If)}:Ff;function If(a){setTimeout(function(){throw a;})}\nfunction Kf(a,b){var c=b,d=0;do{var e=c.nextSibling;a.removeChild(c);if(e&&8===e.nodeType)if(c=e.data,\"/$\"===c){if(0===d){a.removeChild(e);bd(b);return}d--}else\"$\"!==c&&\"$?\"!==c&&\"$!\"!==c||d++;c=e}while(c);bd(b)}function Lf(a){for(;null!=a;a=a.nextSibling){var b=a.nodeType;if(1===b||3===b)break;if(8===b){b=a.data;if(\"$\"===b||\"$!\"===b||\"$?\"===b)break;if(\"/$\"===b)return null}}return a}\nfunction Mf(a){a=a.previousSibling;for(var b=0;a;){if(8===a.nodeType){var c=a.data;if(\"$\"===c||\"$!\"===c||\"$?\"===c){if(0===b)return a;b--}else\"/$\"===c&&b++}a=a.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of=\"__reactFiber$\"+Nf,Pf=\"__reactProps$\"+Nf,uf=\"__reactContainer$\"+Nf,of=\"__reactEvents$\"+Nf,Qf=\"__reactListeners$\"+Nf,Rf=\"__reactHandles$\"+Nf;\nfunction Wc(a){var b=a[Of];if(b)return b;for(var c=a.parentNode;c;){if(b=c[uf]||c[Of]){c=b.alternate;if(null!==b.child||null!==c&&null!==c.child)for(a=Mf(a);null!==a;){if(c=a[Of])return c;a=Mf(a)}return b}a=c;c=a.parentNode}return null}function Cb(a){a=a[Of]||a[uf];return!a||5!==a.tag&&6!==a.tag&&13!==a.tag&&3!==a.tag?null:a}function ue(a){if(5===a.tag||6===a.tag)return a.stateNode;throw Error(p(33));}function Db(a){return a[Pf]||null}var Sf=[],Tf=-1;function Uf(a){return{current:a}}\nfunction E(a){0>Tf||(a.current=Sf[Tf],Sf[Tf]=null,Tf--)}function G(a,b){Tf++;Sf[Tf]=a.current;a.current=b}var Vf={},H=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf(a,b){var c=a.type.contextTypes;if(!c)return Vf;var d=a.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===b)return d.__reactInternalMemoizedMaskedChildContext;var e={},f;for(f in c)e[f]=b[f];d&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=b,a.__reactInternalMemoizedMaskedChildContext=e);return e}\nfunction Zf(a){a=a.childContextTypes;return null!==a&&void 0!==a}function $f(){E(Wf);E(H)}function ag(a,b,c){if(H.current!==Vf)throw Error(p(168));G(H,b);G(Wf,c)}function bg(a,b,c){var d=a.stateNode;b=b.childContextTypes;if(\"function\"!==typeof d.getChildContext)return c;d=d.getChildContext();for(var e in d)if(!(e in b))throw Error(p(108,Ra(a)||\"Unknown\",e));return A({},c,d)}\nfunction cg(a){a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||Vf;Xf=H.current;G(H,a);G(Wf,Wf.current);return!0}function dg(a,b,c){var d=a.stateNode;if(!d)throw Error(p(169));c?(a=bg(a,b,Xf),d.__reactInternalMemoizedMergedChildContext=a,E(Wf),E(H),G(H,a)):E(Wf);G(Wf,c)}var eg=null,fg=!1,gg=!1;function hg(a){null===eg?eg=[a]:eg.push(a)}function ig(a){fg=!0;hg(a)}\nfunction jg(){if(!gg&&null!==eg){gg=!0;var a=0,b=C;try{var c=eg;for(C=1;a<c.length;a++){var d=c[a];do d=d(!0);while(null!==d)}eg=null;fg=!1}catch(e){throw null!==eg&&(eg=eg.slice(a+1)),ac(fc,jg),e;}finally{C=b,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg=\"\";function tg(a,b){kg[lg++]=ng;kg[lg++]=mg;mg=a;ng=b}\nfunction ug(a,b,c){og[pg++]=rg;og[pg++]=sg;og[pg++]=qg;qg=a;var d=rg;a=sg;var e=32-oc(d)-1;d&=~(1<<e);c+=1;var f=32-oc(b)+e;if(30<f){var g=e-e%5;f=(d&(1<<g)-1).toString(32);d>>=g;e-=g;rg=1<<32-oc(b)+e|c<<e|d;sg=f+a}else rg=1<<f|c<<e|d,sg=a}function vg(a){null!==a.return&&(tg(a,1),ug(a,1,0))}function wg(a){for(;a===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;a===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I=!1,zg=null;\nfunction Ag(a,b){var c=Bg(5,null,null,0);c.elementType=\"DELETED\";c.stateNode=b;c.return=a;b=a.deletions;null===b?(a.deletions=[c],a.flags|=16):b.push(c)}\nfunction Cg(a,b){switch(a.tag){case 5:var c=a.type;b=1!==b.nodeType||c.toLowerCase()!==b.nodeName.toLowerCase()?null:b;return null!==b?(a.stateNode=b,xg=a,yg=Lf(b.firstChild),!0):!1;case 6:return b=\"\"===a.pendingProps||3!==b.nodeType?null:b,null!==b?(a.stateNode=b,xg=a,yg=null,!0):!1;case 13:return b=8!==b.nodeType?null:b,null!==b?(c=null!==qg?{id:rg,overflow:sg}:null,a.memoizedState={dehydrated:b,treeContext:c,retryLane:1073741824},c=Bg(18,null,null,0),c.stateNode=b,c.return=a,a.child=c,xg=a,yg=\nnull,!0):!1;default:return!1}}function Dg(a){return 0!==(a.mode&1)&&0===(a.flags&128)}function Eg(a){if(I){var b=yg;if(b){var c=b;if(!Cg(a,b)){if(Dg(a))throw Error(p(418));b=Lf(c.nextSibling);var d=xg;b&&Cg(a,b)?Ag(d,c):(a.flags=a.flags&-4097|2,I=!1,xg=a)}}else{if(Dg(a))throw Error(p(418));a.flags=a.flags&-4097|2;I=!1;xg=a}}}function Fg(a){for(a=a.return;null!==a&&5!==a.tag&&3!==a.tag&&13!==a.tag;)a=a.return;xg=a}\nfunction Gg(a){if(a!==xg)return!1;if(!I)return Fg(a),I=!0,!1;var b;(b=3!==a.tag)&&!(b=5!==a.tag)&&(b=a.type,b=\"head\"!==b&&\"body\"!==b&&!Ef(a.type,a.memoizedProps));if(b&&(b=yg)){if(Dg(a))throw Hg(),Error(p(418));for(;b;)Ag(a,b),b=Lf(b.nextSibling)}Fg(a);if(13===a.tag){a=a.memoizedState;a=null!==a?a.dehydrated:null;if(!a)throw Error(p(317));a:{a=a.nextSibling;for(b=0;a;){if(8===a.nodeType){var c=a.data;if(\"/$\"===c){if(0===b){yg=Lf(a.nextSibling);break a}b--}else\"$\"!==c&&\"$!\"!==c&&\"$?\"!==c||b++}a=a.nextSibling}yg=\nnull}}else yg=xg?Lf(a.stateNode.nextSibling):null;return!0}function Hg(){for(var a=yg;a;)a=Lf(a.nextSibling)}function Ig(){yg=xg=null;I=!1}function Jg(a){null===zg?zg=[a]:zg.push(a)}var Kg=ua.ReactCurrentBatchConfig;function Lg(a,b){if(a&&a.defaultProps){b=A({},b);a=a.defaultProps;for(var c in a)void 0===b[c]&&(b[c]=a[c]);return b}return b}var Mg=Uf(null),Ng=null,Og=null,Pg=null;function Qg(){Pg=Og=Ng=null}function Rg(a){var b=Mg.current;E(Mg);a._currentValue=b}\nfunction Sg(a,b,c){for(;null!==a;){var d=a.alternate;(a.childLanes&b)!==b?(a.childLanes|=b,null!==d&&(d.childLanes|=b)):null!==d&&(d.childLanes&b)!==b&&(d.childLanes|=b);if(a===c)break;a=a.return}}function Tg(a,b){Ng=a;Pg=Og=null;a=a.dependencies;null!==a&&null!==a.firstContext&&(0!==(a.lanes&b)&&(Ug=!0),a.firstContext=null)}\nfunction Vg(a){var b=a._currentValue;if(Pg!==a)if(a={context:a,memoizedValue:b,next:null},null===Og){if(null===Ng)throw Error(p(308));Og=a;Ng.dependencies={lanes:0,firstContext:a}}else Og=Og.next=a;return b}var Wg=null;function Xg(a){null===Wg?Wg=[a]:Wg.push(a)}function Yg(a,b,c,d){var e=b.interleaved;null===e?(c.next=c,Xg(b)):(c.next=e.next,e.next=c);b.interleaved=c;return Zg(a,d)}\nfunction Zg(a,b){a.lanes|=b;var c=a.alternate;null!==c&&(c.lanes|=b);c=a;for(a=a.return;null!==a;)a.childLanes|=b,c=a.alternate,null!==c&&(c.childLanes|=b),c=a,a=a.return;return 3===c.tag?c.stateNode:null}var $g=!1;function ah(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}\nfunction bh(a,b){a=a.updateQueue;b.updateQueue===a&&(b.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function ch(a,b){return{eventTime:a,lane:b,tag:0,payload:null,callback:null,next:null}}\nfunction dh(a,b,c){var d=a.updateQueue;if(null===d)return null;d=d.shared;if(0!==(K&2)){var e=d.pending;null===e?b.next=b:(b.next=e.next,e.next=b);d.pending=b;return Zg(a,c)}e=d.interleaved;null===e?(b.next=b,Xg(d)):(b.next=e.next,e.next=b);d.interleaved=b;return Zg(a,c)}function eh(a,b,c){b=b.updateQueue;if(null!==b&&(b=b.shared,0!==(c&4194240))){var d=b.lanes;d&=a.pendingLanes;c|=d;b.lanes=c;Cc(a,c)}}\nfunction fh(a,b){var c=a.updateQueue,d=a.alternate;if(null!==d&&(d=d.updateQueue,c===d)){var e=null,f=null;c=c.firstBaseUpdate;if(null!==c){do{var g={eventTime:c.eventTime,lane:c.lane,tag:c.tag,payload:c.payload,callback:c.callback,next:null};null===f?e=f=g:f=f.next=g;c=c.next}while(null!==c);null===f?e=f=b:f=f.next=b}else e=f=b;c={baseState:d.baseState,firstBaseUpdate:e,lastBaseUpdate:f,shared:d.shared,effects:d.effects};a.updateQueue=c;return}a=c.lastBaseUpdate;null===a?c.firstBaseUpdate=b:a.next=\nb;c.lastBaseUpdate=b}\nfunction gh(a,b,c,d){var e=a.updateQueue;$g=!1;var f=e.firstBaseUpdate,g=e.lastBaseUpdate,h=e.shared.pending;if(null!==h){e.shared.pending=null;var k=h,l=k.next;k.next=null;null===g?f=l:g.next=l;g=k;var m=a.alternate;null!==m&&(m=m.updateQueue,h=m.lastBaseUpdate,h!==g&&(null===h?m.firstBaseUpdate=l:h.next=l,m.lastBaseUpdate=k))}if(null!==f){var q=e.baseState;g=0;m=l=k=null;h=f;do{var r=h.lane,y=h.eventTime;if((d&r)===r){null!==m&&(m=m.next={eventTime:y,lane:0,tag:h.tag,payload:h.payload,callback:h.callback,\nnext:null});a:{var n=a,t=h;r=b;y=c;switch(t.tag){case 1:n=t.payload;if(\"function\"===typeof n){q=n.call(y,q,r);break a}q=n;break a;case 3:n.flags=n.flags&-65537|128;case 0:n=t.payload;r=\"function\"===typeof n?n.call(y,q,r):n;if(null===r||void 0===r)break a;q=A({},q,r);break a;case 2:$g=!0}}null!==h.callback&&0!==h.lane&&(a.flags|=64,r=e.effects,null===r?e.effects=[h]:r.push(h))}else y={eventTime:y,lane:r,tag:h.tag,payload:h.payload,callback:h.callback,next:null},null===m?(l=m=y,k=q):m=m.next=y,g|=r;\nh=h.next;if(null===h)if(h=e.shared.pending,null===h)break;else r=h,h=r.next,r.next=null,e.lastBaseUpdate=r,e.shared.pending=null}while(1);null===m&&(k=q);e.baseState=k;e.firstBaseUpdate=l;e.lastBaseUpdate=m;b=e.shared.interleaved;if(null!==b){e=b;do g|=e.lane,e=e.next;while(e!==b)}else null===f&&(e.shared.lanes=0);hh|=g;a.lanes=g;a.memoizedState=q}}\nfunction ih(a,b,c){a=b.effects;b.effects=null;if(null!==a)for(b=0;b<a.length;b++){var d=a[b],e=d.callback;if(null!==e){d.callback=null;d=c;if(\"function\"!==typeof e)throw Error(p(191,e));e.call(d)}}}var jh=(new aa.Component).refs;function kh(a,b,c,d){b=a.memoizedState;c=c(d,b);c=null===c||void 0===c?b:A({},b,c);a.memoizedState=c;0===a.lanes&&(a.updateQueue.baseState=c)}\nvar nh={isMounted:function(a){return(a=a._reactInternals)?Vb(a)===a:!1},enqueueSetState:function(a,b,c){a=a._reactInternals;var d=L(),e=lh(a),f=ch(d,e);f.payload=b;void 0!==c&&null!==c&&(f.callback=c);b=dh(a,f,e);null!==b&&(mh(b,a,e,d),eh(b,a,e))},enqueueReplaceState:function(a,b,c){a=a._reactInternals;var d=L(),e=lh(a),f=ch(d,e);f.tag=1;f.payload=b;void 0!==c&&null!==c&&(f.callback=c);b=dh(a,f,e);null!==b&&(mh(b,a,e,d),eh(b,a,e))},enqueueForceUpdate:function(a,b){a=a._reactInternals;var c=L(),d=\nlh(a),e=ch(c,d);e.tag=2;void 0!==b&&null!==b&&(e.callback=b);b=dh(a,e,d);null!==b&&(mh(b,a,d,c),eh(b,a,d))}};function oh(a,b,c,d,e,f,g){a=a.stateNode;return\"function\"===typeof a.shouldComponentUpdate?a.shouldComponentUpdate(d,f,g):b.prototype&&b.prototype.isPureReactComponent?!Ie(c,d)||!Ie(e,f):!0}\nfunction ph(a,b,c){var d=!1,e=Vf;var f=b.contextType;\"object\"===typeof f&&null!==f?f=Vg(f):(e=Zf(b)?Xf:H.current,d=b.contextTypes,f=(d=null!==d&&void 0!==d)?Yf(a,e):Vf);b=new b(c,f);a.memoizedState=null!==b.state&&void 0!==b.state?b.state:null;b.updater=nh;a.stateNode=b;b._reactInternals=a;d&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=e,a.__reactInternalMemoizedMaskedChildContext=f);return b}\nfunction qh(a,b,c,d){a=b.state;\"function\"===typeof b.componentWillReceiveProps&&b.componentWillReceiveProps(c,d);\"function\"===typeof b.UNSAFE_componentWillReceiveProps&&b.UNSAFE_componentWillReceiveProps(c,d);b.state!==a&&nh.enqueueReplaceState(b,b.state,null)}\nfunction rh(a,b,c,d){var e=a.stateNode;e.props=c;e.state=a.memoizedState;e.refs=jh;ah(a);var f=b.contextType;\"object\"===typeof f&&null!==f?e.context=Vg(f):(f=Zf(b)?Xf:H.current,e.context=Yf(a,f));e.state=a.memoizedState;f=b.getDerivedStateFromProps;\"function\"===typeof f&&(kh(a,b,f,c),e.state=a.memoizedState);\"function\"===typeof b.getDerivedStateFromProps||\"function\"===typeof e.getSnapshotBeforeUpdate||\"function\"!==typeof e.UNSAFE_componentWillMount&&\"function\"!==typeof e.componentWillMount||(b=e.state,\n\"function\"===typeof e.componentWillMount&&e.componentWillMount(),\"function\"===typeof e.UNSAFE_componentWillMount&&e.UNSAFE_componentWillMount(),b!==e.state&&nh.enqueueReplaceState(e,e.state,null),gh(a,c,e,d),e.state=a.memoizedState);\"function\"===typeof e.componentDidMount&&(a.flags|=4194308)}\nfunction sh(a,b,c){a=c.ref;if(null!==a&&\"function\"!==typeof a&&\"object\"!==typeof a){if(c._owner){c=c._owner;if(c){if(1!==c.tag)throw Error(p(309));var d=c.stateNode}if(!d)throw Error(p(147,a));var e=d,f=\"\"+a;if(null!==b&&null!==b.ref&&\"function\"===typeof b.ref&&b.ref._stringRef===f)return b.ref;b=function(a){var b=e.refs;b===jh&&(b=e.refs={});null===a?delete b[f]:b[f]=a};b._stringRef=f;return b}if(\"string\"!==typeof a)throw Error(p(284));if(!c._owner)throw Error(p(290,a));}return a}\nfunction th(a,b){a=Object.prototype.toString.call(b);throw Error(p(31,\"[object Object]\"===a?\"object with keys {\"+Object.keys(b).join(\", \")+\"}\":a));}function uh(a){var b=a._init;return b(a._payload)}\nfunction vh(a){function b(b,c){if(a){var d=b.deletions;null===d?(b.deletions=[c],b.flags|=16):d.push(c)}}function c(c,d){if(!a)return null;for(;null!==d;)b(c,d),d=d.sibling;return null}function d(a,b){for(a=new Map;null!==b;)null!==b.key?a.set(b.key,b):a.set(b.index,b),b=b.sibling;return a}function e(a,b){a=wh(a,b);a.index=0;a.sibling=null;return a}function f(b,c,d){b.index=d;if(!a)return b.flags|=1048576,c;d=b.alternate;if(null!==d)return d=d.index,d<c?(b.flags|=2,c):d;b.flags|=2;return c}function g(b){a&&\nnull===b.alternate&&(b.flags|=2);return b}function h(a,b,c,d){if(null===b||6!==b.tag)return b=xh(c,a.mode,d),b.return=a,b;b=e(b,c);b.return=a;return b}function k(a,b,c,d){var f=c.type;if(f===ya)return m(a,b,c.props.children,d,c.key);if(null!==b&&(b.elementType===f||\"object\"===typeof f&&null!==f&&f.$$typeof===Ha&&uh(f)===b.type))return d=e(b,c.props),d.ref=sh(a,b,c),d.return=a,d;d=yh(c.type,c.key,c.props,null,a.mode,d);d.ref=sh(a,b,c);d.return=a;return d}function l(a,b,c,d){if(null===b||4!==b.tag||\nb.stateNode.containerInfo!==c.containerInfo||b.stateNode.implementation!==c.implementation)return b=zh(c,a.mode,d),b.return=a,b;b=e(b,c.children||[]);b.return=a;return b}function m(a,b,c,d,f){if(null===b||7!==b.tag)return b=Ah(c,a.mode,d,f),b.return=a,b;b=e(b,c);b.return=a;return b}function q(a,b,c){if(\"string\"===typeof b&&\"\"!==b||\"number\"===typeof b)return b=xh(\"\"+b,a.mode,c),b.return=a,b;if(\"object\"===typeof b&&null!==b){switch(b.$$typeof){case va:return c=yh(b.type,b.key,b.props,null,a.mode,c),\nc.ref=sh(a,null,b),c.return=a,c;case wa:return b=zh(b,a.mode,c),b.return=a,b;case Ha:var d=b._init;return q(a,d(b._payload),c)}if(eb(b)||Ka(b))return b=Ah(b,a.mode,c,null),b.return=a,b;th(a,b)}return null}function r(a,b,c,d){var e=null!==b?b.key:null;if(\"string\"===typeof c&&\"\"!==c||\"number\"===typeof c)return null!==e?null:h(a,b,\"\"+c,d);if(\"object\"===typeof c&&null!==c){switch(c.$$typeof){case va:return c.key===e?k(a,b,c,d):null;case wa:return c.key===e?l(a,b,c,d):null;case Ha:return e=c._init,r(a,\nb,e(c._payload),d)}if(eb(c)||Ka(c))return null!==e?null:m(a,b,c,d,null);th(a,c)}return null}function y(a,b,c,d,e){if(\"string\"===typeof d&&\"\"!==d||\"number\"===typeof d)return a=a.get(c)||null,h(b,a,\"\"+d,e);if(\"object\"===typeof d&&null!==d){switch(d.$$typeof){case va:return a=a.get(null===d.key?c:d.key)||null,k(b,a,d,e);case wa:return a=a.get(null===d.key?c:d.key)||null,l(b,a,d,e);case Ha:var f=d._init;return y(a,b,c,f(d._payload),e)}if(eb(d)||Ka(d))return a=a.get(c)||null,m(b,a,d,e,null);th(b,d)}return null}\nfunction n(e,g,h,k){for(var l=null,m=null,u=g,w=g=0,x=null;null!==u&&w<h.length;w++){u.index>w?(x=u,u=null):x=u.sibling;var n=r(e,u,h[w],k);if(null===n){null===u&&(u=x);break}a&&u&&null===n.alternate&&b(e,u);g=f(n,g,w);null===m?l=n:m.sibling=n;m=n;u=x}if(w===h.length)return c(e,u),I&&tg(e,w),l;if(null===u){for(;w<h.length;w++)u=q(e,h[w],k),null!==u&&(g=f(u,g,w),null===m?l=u:m.sibling=u,m=u);I&&tg(e,w);return l}for(u=d(e,u);w<h.length;w++)x=y(u,e,w,h[w],k),null!==x&&(a&&null!==x.alternate&&u.delete(null===\nx.key?w:x.key),g=f(x,g,w),null===m?l=x:m.sibling=x,m=x);a&&u.forEach(function(a){return b(e,a)});I&&tg(e,w);return l}function t(e,g,h,k){var l=Ka(h);if(\"function\"!==typeof l)throw Error(p(150));h=l.call(h);if(null==h)throw Error(p(151));for(var u=l=null,m=g,w=g=0,x=null,n=h.next();null!==m&&!n.done;w++,n=h.next()){m.index>w?(x=m,m=null):x=m.sibling;var t=r(e,m,n.value,k);if(null===t){null===m&&(m=x);break}a&&m&&null===t.alternate&&b(e,m);g=f(t,g,w);null===u?l=t:u.sibling=t;u=t;m=x}if(n.done)return c(e,\nm),I&&tg(e,w),l;if(null===m){for(;!n.done;w++,n=h.next())n=q(e,n.value,k),null!==n&&(g=f(n,g,w),null===u?l=n:u.sibling=n,u=n);I&&tg(e,w);return l}for(m=d(e,m);!n.done;w++,n=h.next())n=y(m,e,w,n.value,k),null!==n&&(a&&null!==n.alternate&&m.delete(null===n.key?w:n.key),g=f(n,g,w),null===u?l=n:u.sibling=n,u=n);a&&m.forEach(function(a){return b(e,a)});I&&tg(e,w);return l}function J(a,d,f,h){\"object\"===typeof f&&null!==f&&f.type===ya&&null===f.key&&(f=f.props.children);if(\"object\"===typeof f&&null!==f){switch(f.$$typeof){case va:a:{for(var k=\nf.key,l=d;null!==l;){if(l.key===k){k=f.type;if(k===ya){if(7===l.tag){c(a,l.sibling);d=e(l,f.props.children);d.return=a;a=d;break a}}else if(l.elementType===k||\"object\"===typeof k&&null!==k&&k.$$typeof===Ha&&uh(k)===l.type){c(a,l.sibling);d=e(l,f.props);d.ref=sh(a,l,f);d.return=a;a=d;break a}c(a,l);break}else b(a,l);l=l.sibling}f.type===ya?(d=Ah(f.props.children,a.mode,h,f.key),d.return=a,a=d):(h=yh(f.type,f.key,f.props,null,a.mode,h),h.ref=sh(a,d,f),h.return=a,a=h)}return g(a);case wa:a:{for(l=f.key;null!==\nd;){if(d.key===l)if(4===d.tag&&d.stateNode.containerInfo===f.containerInfo&&d.stateNode.implementation===f.implementation){c(a,d.sibling);d=e(d,f.children||[]);d.return=a;a=d;break a}else{c(a,d);break}else b(a,d);d=d.sibling}d=zh(f,a.mode,h);d.return=a;a=d}return g(a);case Ha:return l=f._init,J(a,d,l(f._payload),h)}if(eb(f))return n(a,d,f,h);if(Ka(f))return t(a,d,f,h);th(a,f)}return\"string\"===typeof f&&\"\"!==f||\"number\"===typeof f?(f=\"\"+f,null!==d&&6===d.tag?(c(a,d.sibling),d=e(d,f),d.return=a,a=d):\n(c(a,d),d=xh(f,a.mode,h),d.return=a,a=d),g(a)):c(a,d)}return J}var Bh=vh(!0),Ch=vh(!1),Dh={},Eh=Uf(Dh),Fh=Uf(Dh),Gh=Uf(Dh);function Hh(a){if(a===Dh)throw Error(p(174));return a}function Ih(a,b){G(Gh,b);G(Fh,a);G(Eh,Dh);a=b.nodeType;switch(a){case 9:case 11:b=(b=b.documentElement)?b.namespaceURI:lb(null,\"\");break;default:a=8===a?b.parentNode:b,b=a.namespaceURI||null,a=a.tagName,b=lb(b,a)}E(Eh);G(Eh,b)}function Jh(){E(Eh);E(Fh);E(Gh)}\nfunction Kh(a){Hh(Gh.current);var b=Hh(Eh.current);var c=lb(b,a.type);b!==c&&(G(Fh,a),G(Eh,c))}function Lh(a){Fh.current===a&&(E(Eh),E(Fh))}var M=Uf(0);\nfunction Mh(a){for(var b=a;null!==b;){if(13===b.tag){var c=b.memoizedState;if(null!==c&&(c=c.dehydrated,null===c||\"$?\"===c.data||\"$!\"===c.data))return b}else if(19===b.tag&&void 0!==b.memoizedProps.revealOrder){if(0!==(b.flags&128))return b}else if(null!==b.child){b.child.return=b;b=b.child;continue}if(b===a)break;for(;null===b.sibling;){if(null===b.return||b.return===a)return null;b=b.return}b.sibling.return=b.return;b=b.sibling}return null}var Nh=[];\nfunction Oh(){for(var a=0;a<Nh.length;a++)Nh[a]._workInProgressVersionPrimary=null;Nh.length=0}var Ph=ua.ReactCurrentDispatcher,Qh=ua.ReactCurrentBatchConfig,Rh=0,N=null,O=null,P=null,Sh=!1,Th=!1,Uh=0,Vh=0;function Q(){throw Error(p(321));}function Wh(a,b){if(null===b)return!1;for(var c=0;c<b.length&&c<a.length;c++)if(!He(a[c],b[c]))return!1;return!0}\nfunction Xh(a,b,c,d,e,f){Rh=f;N=b;b.memoizedState=null;b.updateQueue=null;b.lanes=0;Ph.current=null===a||null===a.memoizedState?Yh:Zh;a=c(d,e);if(Th){f=0;do{Th=!1;Uh=0;if(25<=f)throw Error(p(301));f+=1;P=O=null;b.updateQueue=null;Ph.current=$h;a=c(d,e)}while(Th)}Ph.current=ai;b=null!==O&&null!==O.next;Rh=0;P=O=N=null;Sh=!1;if(b)throw Error(p(300));return a}function bi(){var a=0!==Uh;Uh=0;return a}\nfunction ci(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};null===P?N.memoizedState=P=a:P=P.next=a;return P}function di(){if(null===O){var a=N.alternate;a=null!==a?a.memoizedState:null}else a=O.next;var b=null===P?N.memoizedState:P.next;if(null!==b)P=b,O=a;else{if(null===a)throw Error(p(310));O=a;a={memoizedState:O.memoizedState,baseState:O.baseState,baseQueue:O.baseQueue,queue:O.queue,next:null};null===P?N.memoizedState=P=a:P=P.next=a}return P}\nfunction ei(a,b){return\"function\"===typeof b?b(a):b}\nfunction fi(a){var b=di(),c=b.queue;if(null===c)throw Error(p(311));c.lastRenderedReducer=a;var d=O,e=d.baseQueue,f=c.pending;if(null!==f){if(null!==e){var g=e.next;e.next=f.next;f.next=g}d.baseQueue=e=f;c.pending=null}if(null!==e){f=e.next;d=d.baseState;var h=g=null,k=null,l=f;do{var m=l.lane;if((Rh&m)===m)null!==k&&(k=k.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),d=l.hasEagerState?l.eagerState:a(d,l.action);else{var q={lane:m,action:l.action,hasEagerState:l.hasEagerState,\neagerState:l.eagerState,next:null};null===k?(h=k=q,g=d):k=k.next=q;N.lanes|=m;hh|=m}l=l.next}while(null!==l&&l!==f);null===k?g=d:k.next=h;He(d,b.memoizedState)||(Ug=!0);b.memoizedState=d;b.baseState=g;b.baseQueue=k;c.lastRenderedState=d}a=c.interleaved;if(null!==a){e=a;do f=e.lane,N.lanes|=f,hh|=f,e=e.next;while(e!==a)}else null===e&&(c.lanes=0);return[b.memoizedState,c.dispatch]}\nfunction gi(a){var b=di(),c=b.queue;if(null===c)throw Error(p(311));c.lastRenderedReducer=a;var d=c.dispatch,e=c.pending,f=b.memoizedState;if(null!==e){c.pending=null;var g=e=e.next;do f=a(f,g.action),g=g.next;while(g!==e);He(f,b.memoizedState)||(Ug=!0);b.memoizedState=f;null===b.baseQueue&&(b.baseState=f);c.lastRenderedState=f}return[f,d]}function hi(){}\nfunction ii(a,b){var c=N,d=di(),e=b(),f=!He(d.memoizedState,e);f&&(d.memoizedState=e,Ug=!0);d=d.queue;ji(ki.bind(null,c,d,a),[a]);if(d.getSnapshot!==b||f||null!==P&&P.memoizedState.tag&1){c.flags|=2048;li(9,mi.bind(null,c,d,e,b),void 0,null);if(null===R)throw Error(p(349));0!==(Rh&30)||ni(c,b,e)}return e}function ni(a,b,c){a.flags|=16384;a={getSnapshot:b,value:c};b=N.updateQueue;null===b?(b={lastEffect:null,stores:null},N.updateQueue=b,b.stores=[a]):(c=b.stores,null===c?b.stores=[a]:c.push(a))}\nfunction mi(a,b,c,d){b.value=c;b.getSnapshot=d;oi(b)&&pi(a)}function ki(a,b,c){return c(function(){oi(b)&&pi(a)})}function oi(a){var b=a.getSnapshot;a=a.value;try{var c=b();return!He(a,c)}catch(d){return!0}}function pi(a){var b=Zg(a,1);null!==b&&mh(b,a,1,-1)}\nfunction qi(a){var b=ci();\"function\"===typeof a&&(a=a());b.memoizedState=b.baseState=a;a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ei,lastRenderedState:a};b.queue=a;a=a.dispatch=ri.bind(null,N,a);return[b.memoizedState,a]}\nfunction li(a,b,c,d){a={tag:a,create:b,destroy:c,deps:d,next:null};b=N.updateQueue;null===b?(b={lastEffect:null,stores:null},N.updateQueue=b,b.lastEffect=a.next=a):(c=b.lastEffect,null===c?b.lastEffect=a.next=a:(d=c.next,c.next=a,a.next=d,b.lastEffect=a));return a}function si(){return di().memoizedState}function ti(a,b,c,d){var e=ci();N.flags|=a;e.memoizedState=li(1|b,c,void 0,void 0===d?null:d)}\nfunction ui(a,b,c,d){var e=di();d=void 0===d?null:d;var f=void 0;if(null!==O){var g=O.memoizedState;f=g.destroy;if(null!==d&&Wh(d,g.deps)){e.memoizedState=li(b,c,f,d);return}}N.flags|=a;e.memoizedState=li(1|b,c,f,d)}function vi(a,b){return ti(8390656,8,a,b)}function ji(a,b){return ui(2048,8,a,b)}function wi(a,b){return ui(4,2,a,b)}function xi(a,b){return ui(4,4,a,b)}\nfunction yi(a,b){if(\"function\"===typeof b)return a=a(),b(a),function(){b(null)};if(null!==b&&void 0!==b)return a=a(),b.current=a,function(){b.current=null}}function zi(a,b,c){c=null!==c&&void 0!==c?c.concat([a]):null;return ui(4,4,yi.bind(null,b,a),c)}function Ai(){}function Bi(a,b){var c=di();b=void 0===b?null:b;var d=c.memoizedState;if(null!==d&&null!==b&&Wh(b,d[1]))return d[0];c.memoizedState=[a,b];return a}\nfunction Ci(a,b){var c=di();b=void 0===b?null:b;var d=c.memoizedState;if(null!==d&&null!==b&&Wh(b,d[1]))return d[0];a=a();c.memoizedState=[a,b];return a}function Di(a,b,c){if(0===(Rh&21))return a.baseState&&(a.baseState=!1,Ug=!0),a.memoizedState=c;He(c,b)||(c=yc(),N.lanes|=c,hh|=c,a.baseState=!0);return b}function Ei(a,b){var c=C;C=0!==c&&4>c?c:4;a(!0);var d=Qh.transition;Qh.transition={};try{a(!1),b()}finally{C=c,Qh.transition=d}}function Fi(){return di().memoizedState}\nfunction Gi(a,b,c){var d=lh(a);c={lane:d,action:c,hasEagerState:!1,eagerState:null,next:null};if(Hi(a))Ii(b,c);else if(c=Yg(a,b,c,d),null!==c){var e=L();mh(c,a,d,e);Ji(c,b,d)}}\nfunction ri(a,b,c){var d=lh(a),e={lane:d,action:c,hasEagerState:!1,eagerState:null,next:null};if(Hi(a))Ii(b,e);else{var f=a.alternate;if(0===a.lanes&&(null===f||0===f.lanes)&&(f=b.lastRenderedReducer,null!==f))try{var g=b.lastRenderedState,h=f(g,c);e.hasEagerState=!0;e.eagerState=h;if(He(h,g)){var k=b.interleaved;null===k?(e.next=e,Xg(b)):(e.next=k.next,k.next=e);b.interleaved=e;return}}catch(l){}finally{}c=Yg(a,b,e,d);null!==c&&(e=L(),mh(c,a,d,e),Ji(c,b,d))}}\nfunction Hi(a){var b=a.alternate;return a===N||null!==b&&b===N}function Ii(a,b){Th=Sh=!0;var c=a.pending;null===c?b.next=b:(b.next=c.next,c.next=b);a.pending=b}function Ji(a,b,c){if(0!==(c&4194240)){var d=b.lanes;d&=a.pendingLanes;c|=d;b.lanes=c;Cc(a,c)}}\nvar ai={readContext:Vg,useCallback:Q,useContext:Q,useEffect:Q,useImperativeHandle:Q,useInsertionEffect:Q,useLayoutEffect:Q,useMemo:Q,useReducer:Q,useRef:Q,useState:Q,useDebugValue:Q,useDeferredValue:Q,useTransition:Q,useMutableSource:Q,useSyncExternalStore:Q,useId:Q,unstable_isNewReconciler:!1},Yh={readContext:Vg,useCallback:function(a,b){ci().memoizedState=[a,void 0===b?null:b];return a},useContext:Vg,useEffect:vi,useImperativeHandle:function(a,b,c){c=null!==c&&void 0!==c?c.concat([a]):null;return ti(4194308,\n4,yi.bind(null,b,a),c)},useLayoutEffect:function(a,b){return ti(4194308,4,a,b)},useInsertionEffect:function(a,b){return ti(4,2,a,b)},useMemo:function(a,b){var c=ci();b=void 0===b?null:b;a=a();c.memoizedState=[a,b];return a},useReducer:function(a,b,c){var d=ci();b=void 0!==c?c(b):b;d.memoizedState=d.baseState=b;a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:b};d.queue=a;a=a.dispatch=Gi.bind(null,N,a);return[d.memoizedState,a]},useRef:function(a){var b=\nci();a={current:a};return b.memoizedState=a},useState:qi,useDebugValue:Ai,useDeferredValue:function(a){return ci().memoizedState=a},useTransition:function(){var a=qi(!1),b=a[0];a=Ei.bind(null,a[1]);ci().memoizedState=a;return[b,a]},useMutableSource:function(){},useSyncExternalStore:function(a,b,c){var d=N,e=ci();if(I){if(void 0===c)throw Error(p(407));c=c()}else{c=b();if(null===R)throw Error(p(349));0!==(Rh&30)||ni(d,b,c)}e.memoizedState=c;var f={value:c,getSnapshot:b};e.queue=f;vi(ki.bind(null,d,\nf,a),[a]);d.flags|=2048;li(9,mi.bind(null,d,f,c,b),void 0,null);return c},useId:function(){var a=ci(),b=R.identifierPrefix;if(I){var c=sg;var d=rg;c=(d&~(1<<32-oc(d)-1)).toString(32)+c;b=\":\"+b+\"R\"+c;c=Uh++;0<c&&(b+=\"H\"+c.toString(32));b+=\":\"}else c=Vh++,b=\":\"+b+\"r\"+c.toString(32)+\":\";return a.memoizedState=b},unstable_isNewReconciler:!1},Zh={readContext:Vg,useCallback:Bi,useContext:Vg,useEffect:ji,useImperativeHandle:zi,useInsertionEffect:wi,useLayoutEffect:xi,useMemo:Ci,useReducer:fi,useRef:si,useState:function(){return fi(ei)},\nuseDebugValue:Ai,useDeferredValue:function(a){var b=di();return Di(b,O.memoizedState,a)},useTransition:function(){var a=fi(ei)[0],b=di().memoizedState;return[a,b]},useMutableSource:hi,useSyncExternalStore:ii,useId:Fi,unstable_isNewReconciler:!1},$h={readContext:Vg,useCallback:Bi,useContext:Vg,useEffect:ji,useImperativeHandle:zi,useInsertionEffect:wi,useLayoutEffect:xi,useMemo:Ci,useReducer:gi,useRef:si,useState:function(){return gi(ei)},useDebugValue:Ai,useDeferredValue:function(a){var b=di();return null===\nO?b.memoizedState=a:Di(b,O.memoizedState,a)},useTransition:function(){var a=gi(ei)[0],b=di().memoizedState;return[a,b]},useMutableSource:hi,useSyncExternalStore:ii,useId:Fi,unstable_isNewReconciler:!1};function Ki(a,b){try{var c=\"\",d=b;do c+=Pa(d),d=d.return;while(d);var e=c}catch(f){e=\"\\nError generating stack: \"+f.message+\"\\n\"+f.stack}return{value:a,source:b,stack:e,digest:null}}function Li(a,b,c){return{value:a,source:null,stack:null!=c?c:null,digest:null!=b?b:null}}\nfunction Mi(a,b){try{console.error(b.value)}catch(c){setTimeout(function(){throw c;})}}var Ni=\"function\"===typeof WeakMap?WeakMap:Map;function Oi(a,b,c){c=ch(-1,c);c.tag=3;c.payload={element:null};var d=b.value;c.callback=function(){Pi||(Pi=!0,Qi=d);Mi(a,b)};return c}\nfunction Ri(a,b,c){c=ch(-1,c);c.tag=3;var d=a.type.getDerivedStateFromError;if(\"function\"===typeof d){var e=b.value;c.payload=function(){return d(e)};c.callback=function(){Mi(a,b)}}var f=a.stateNode;null!==f&&\"function\"===typeof f.componentDidCatch&&(c.callback=function(){Mi(a,b);\"function\"!==typeof d&&(null===Si?Si=new Set([this]):Si.add(this));var c=b.stack;this.componentDidCatch(b.value,{componentStack:null!==c?c:\"\"})});return c}\nfunction Ti(a,b,c){var d=a.pingCache;if(null===d){d=a.pingCache=new Ni;var e=new Set;d.set(b,e)}else e=d.get(b),void 0===e&&(e=new Set,d.set(b,e));e.has(c)||(e.add(c),a=Ui.bind(null,a,b,c),b.then(a,a))}function Vi(a){do{var b;if(b=13===a.tag)b=a.memoizedState,b=null!==b?null!==b.dehydrated?!0:!1:!0;if(b)return a;a=a.return}while(null!==a);return null}\nfunction Wi(a,b,c,d,e){if(0===(a.mode&1))return a===b?a.flags|=65536:(a.flags|=128,c.flags|=131072,c.flags&=-52805,1===c.tag&&(null===c.alternate?c.tag=17:(b=ch(-1,1),b.tag=2,dh(c,b,1))),c.lanes|=1),a;a.flags|=65536;a.lanes=e;return a}var Xi=ua.ReactCurrentOwner,Ug=!1;function Yi(a,b,c,d){b.child=null===a?Ch(b,null,c,d):Bh(b,a.child,c,d)}\nfunction Zi(a,b,c,d,e){c=c.render;var f=b.ref;Tg(b,e);d=Xh(a,b,c,d,f,e);c=bi();if(null!==a&&!Ug)return b.updateQueue=a.updateQueue,b.flags&=-2053,a.lanes&=~e,$i(a,b,e);I&&c&&vg(b);b.flags|=1;Yi(a,b,d,e);return b.child}\nfunction aj(a,b,c,d,e){if(null===a){var f=c.type;if(\"function\"===typeof f&&!bj(f)&&void 0===f.defaultProps&&null===c.compare&&void 0===c.defaultProps)return b.tag=15,b.type=f,cj(a,b,f,d,e);a=yh(c.type,null,d,b,b.mode,e);a.ref=b.ref;a.return=b;return b.child=a}f=a.child;if(0===(a.lanes&e)){var g=f.memoizedProps;c=c.compare;c=null!==c?c:Ie;if(c(g,d)&&a.ref===b.ref)return $i(a,b,e)}b.flags|=1;a=wh(f,d);a.ref=b.ref;a.return=b;return b.child=a}\nfunction cj(a,b,c,d,e){if(null!==a){var f=a.memoizedProps;if(Ie(f,d)&&a.ref===b.ref)if(Ug=!1,b.pendingProps=d=f,0!==(a.lanes&e))0!==(a.flags&131072)&&(Ug=!0);else return b.lanes=a.lanes,$i(a,b,e)}return dj(a,b,c,d,e)}\nfunction ej(a,b,c){var d=b.pendingProps,e=d.children,f=null!==a?a.memoizedState:null;if(\"hidden\"===d.mode)if(0===(b.mode&1))b.memoizedState={baseLanes:0,cachePool:null,transitions:null},G(fj,gj),gj|=c;else{if(0===(c&1073741824))return a=null!==f?f.baseLanes|c:c,b.lanes=b.childLanes=1073741824,b.memoizedState={baseLanes:a,cachePool:null,transitions:null},b.updateQueue=null,G(fj,gj),gj|=a,null;b.memoizedState={baseLanes:0,cachePool:null,transitions:null};d=null!==f?f.baseLanes:c;G(fj,gj);gj|=d}else null!==\nf?(d=f.baseLanes|c,b.memoizedState=null):d=c,G(fj,gj),gj|=d;Yi(a,b,e,c);return b.child}function hj(a,b){var c=b.ref;if(null===a&&null!==c||null!==a&&a.ref!==c)b.flags|=512,b.flags|=2097152}function dj(a,b,c,d,e){var f=Zf(c)?Xf:H.current;f=Yf(b,f);Tg(b,e);c=Xh(a,b,c,d,f,e);d=bi();if(null!==a&&!Ug)return b.updateQueue=a.updateQueue,b.flags&=-2053,a.lanes&=~e,$i(a,b,e);I&&d&&vg(b);b.flags|=1;Yi(a,b,c,e);return b.child}\nfunction ij(a,b,c,d,e){if(Zf(c)){var f=!0;cg(b)}else f=!1;Tg(b,e);if(null===b.stateNode)jj(a,b),ph(b,c,d),rh(b,c,d,e),d=!0;else if(null===a){var g=b.stateNode,h=b.memoizedProps;g.props=h;var k=g.context,l=c.contextType;\"object\"===typeof l&&null!==l?l=Vg(l):(l=Zf(c)?Xf:H.current,l=Yf(b,l));var m=c.getDerivedStateFromProps,q=\"function\"===typeof m||\"function\"===typeof g.getSnapshotBeforeUpdate;q||\"function\"!==typeof g.UNSAFE_componentWillReceiveProps&&\"function\"!==typeof g.componentWillReceiveProps||\n(h!==d||k!==l)&&qh(b,g,d,l);$g=!1;var r=b.memoizedState;g.state=r;gh(b,d,g,e);k=b.memoizedState;h!==d||r!==k||Wf.current||$g?(\"function\"===typeof m&&(kh(b,c,m,d),k=b.memoizedState),(h=$g||oh(b,c,h,d,r,k,l))?(q||\"function\"!==typeof g.UNSAFE_componentWillMount&&\"function\"!==typeof g.componentWillMount||(\"function\"===typeof g.componentWillMount&&g.componentWillMount(),\"function\"===typeof g.UNSAFE_componentWillMount&&g.UNSAFE_componentWillMount()),\"function\"===typeof g.componentDidMount&&(b.flags|=4194308)):\n(\"function\"===typeof g.componentDidMount&&(b.flags|=4194308),b.memoizedProps=d,b.memoizedState=k),g.props=d,g.state=k,g.context=l,d=h):(\"function\"===typeof g.componentDidMount&&(b.flags|=4194308),d=!1)}else{g=b.stateNode;bh(a,b);h=b.memoizedProps;l=b.type===b.elementType?h:Lg(b.type,h);g.props=l;q=b.pendingProps;r=g.context;k=c.contextType;\"object\"===typeof k&&null!==k?k=Vg(k):(k=Zf(c)?Xf:H.current,k=Yf(b,k));var y=c.getDerivedStateFromProps;(m=\"function\"===typeof y||\"function\"===typeof g.getSnapshotBeforeUpdate)||\n\"function\"!==typeof g.UNSAFE_componentWillReceiveProps&&\"function\"!==typeof g.componentWillReceiveProps||(h!==q||r!==k)&&qh(b,g,d,k);$g=!1;r=b.memoizedState;g.state=r;gh(b,d,g,e);var n=b.memoizedState;h!==q||r!==n||Wf.current||$g?(\"function\"===typeof y&&(kh(b,c,y,d),n=b.memoizedState),(l=$g||oh(b,c,l,d,r,n,k)||!1)?(m||\"function\"!==typeof g.UNSAFE_componentWillUpdate&&\"function\"!==typeof g.componentWillUpdate||(\"function\"===typeof g.componentWillUpdate&&g.componentWillUpdate(d,n,k),\"function\"===typeof g.UNSAFE_componentWillUpdate&&\ng.UNSAFE_componentWillUpdate(d,n,k)),\"function\"===typeof g.componentDidUpdate&&(b.flags|=4),\"function\"===typeof g.getSnapshotBeforeUpdate&&(b.flags|=1024)):(\"function\"!==typeof g.componentDidUpdate||h===a.memoizedProps&&r===a.memoizedState||(b.flags|=4),\"function\"!==typeof g.getSnapshotBeforeUpdate||h===a.memoizedProps&&r===a.memoizedState||(b.flags|=1024),b.memoizedProps=d,b.memoizedState=n),g.props=d,g.state=n,g.context=k,d=l):(\"function\"!==typeof g.componentDidUpdate||h===a.memoizedProps&&r===\na.memoizedState||(b.flags|=4),\"function\"!==typeof g.getSnapshotBeforeUpdate||h===a.memoizedProps&&r===a.memoizedState||(b.flags|=1024),d=!1)}return kj(a,b,c,d,f,e)}\nfunction kj(a,b,c,d,e,f){hj(a,b);var g=0!==(b.flags&128);if(!d&&!g)return e&&dg(b,c,!1),$i(a,b,f);d=b.stateNode;Xi.current=b;var h=g&&\"function\"!==typeof c.getDerivedStateFromError?null:d.render();b.flags|=1;null!==a&&g?(b.child=Bh(b,a.child,null,f),b.child=Bh(b,null,h,f)):Yi(a,b,h,f);b.memoizedState=d.state;e&&dg(b,c,!0);return b.child}function lj(a){var b=a.stateNode;b.pendingContext?ag(a,b.pendingContext,b.pendingContext!==b.context):b.context&&ag(a,b.context,!1);Ih(a,b.containerInfo)}\nfunction mj(a,b,c,d,e){Ig();Jg(e);b.flags|=256;Yi(a,b,c,d);return b.child}var nj={dehydrated:null,treeContext:null,retryLane:0};function oj(a){return{baseLanes:a,cachePool:null,transitions:null}}\nfunction pj(a,b,c){var d=b.pendingProps,e=M.current,f=!1,g=0!==(b.flags&128),h;(h=g)||(h=null!==a&&null===a.memoizedState?!1:0!==(e&2));if(h)f=!0,b.flags&=-129;else if(null===a||null!==a.memoizedState)e|=1;G(M,e&1);if(null===a){Eg(b);a=b.memoizedState;if(null!==a&&(a=a.dehydrated,null!==a))return 0===(b.mode&1)?b.lanes=1:\"$!\"===a.data?b.lanes=8:b.lanes=1073741824,null;g=d.children;a=d.fallback;return f?(d=b.mode,f=b.child,g={mode:\"hidden\",children:g},0===(d&1)&&null!==f?(f.childLanes=0,f.pendingProps=\ng):f=qj(g,d,0,null),a=Ah(a,d,c,null),f.return=b,a.return=b,f.sibling=a,b.child=f,b.child.memoizedState=oj(c),b.memoizedState=nj,a):rj(b,g)}e=a.memoizedState;if(null!==e&&(h=e.dehydrated,null!==h))return sj(a,b,g,d,h,e,c);if(f){f=d.fallback;g=b.mode;e=a.child;h=e.sibling;var k={mode:\"hidden\",children:d.children};0===(g&1)&&b.child!==e?(d=b.child,d.childLanes=0,d.pendingProps=k,b.deletions=null):(d=wh(e,k),d.subtreeFlags=e.subtreeFlags&14680064);null!==h?f=wh(h,f):(f=Ah(f,g,c,null),f.flags|=2);f.return=\nb;d.return=b;d.sibling=f;b.child=d;d=f;f=b.child;g=a.child.memoizedState;g=null===g?oj(c):{baseLanes:g.baseLanes|c,cachePool:null,transitions:g.transitions};f.memoizedState=g;f.childLanes=a.childLanes&~c;b.memoizedState=nj;return d}f=a.child;a=f.sibling;d=wh(f,{mode:\"visible\",children:d.children});0===(b.mode&1)&&(d.lanes=c);d.return=b;d.sibling=null;null!==a&&(c=b.deletions,null===c?(b.deletions=[a],b.flags|=16):c.push(a));b.child=d;b.memoizedState=null;return d}\nfunction rj(a,b){b=qj({mode:\"visible\",children:b},a.mode,0,null);b.return=a;return a.child=b}function tj(a,b,c,d){null!==d&&Jg(d);Bh(b,a.child,null,c);a=rj(b,b.pendingProps.children);a.flags|=2;b.memoizedState=null;return a}\nfunction sj(a,b,c,d,e,f,g){if(c){if(b.flags&256)return b.flags&=-257,d=Li(Error(p(422))),tj(a,b,g,d);if(null!==b.memoizedState)return b.child=a.child,b.flags|=128,null;f=d.fallback;e=b.mode;d=qj({mode:\"visible\",children:d.children},e,0,null);f=Ah(f,e,g,null);f.flags|=2;d.return=b;f.return=b;d.sibling=f;b.child=d;0!==(b.mode&1)&&Bh(b,a.child,null,g);b.child.memoizedState=oj(g);b.memoizedState=nj;return f}if(0===(b.mode&1))return tj(a,b,g,null);if(\"$!\"===e.data){d=e.nextSibling&&e.nextSibling.dataset;\nif(d)var h=d.dgst;d=h;f=Error(p(419));d=Li(f,d,void 0);return tj(a,b,g,d)}h=0!==(g&a.childLanes);if(Ug||h){d=R;if(null!==d){switch(g&-g){case 4:e=2;break;case 16:e=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:e=32;break;case 536870912:e=268435456;break;default:e=0}e=0!==(e&(d.suspendedLanes|g))?0:e;\n0!==e&&e!==f.retryLane&&(f.retryLane=e,Zg(a,e),mh(d,a,e,-1))}uj();d=Li(Error(p(421)));return tj(a,b,g,d)}if(\"$?\"===e.data)return b.flags|=128,b.child=a.child,b=vj.bind(null,a),e._reactRetry=b,null;a=f.treeContext;yg=Lf(e.nextSibling);xg=b;I=!0;zg=null;null!==a&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=a.id,sg=a.overflow,qg=b);b=rj(b,d.children);b.flags|=4096;return b}function wj(a,b,c){a.lanes|=b;var d=a.alternate;null!==d&&(d.lanes|=b);Sg(a.return,b,c)}\nfunction xj(a,b,c,d,e){var f=a.memoizedState;null===f?a.memoizedState={isBackwards:b,rendering:null,renderingStartTime:0,last:d,tail:c,tailMode:e}:(f.isBackwards=b,f.rendering=null,f.renderingStartTime=0,f.last=d,f.tail=c,f.tailMode=e)}\nfunction yj(a,b,c){var d=b.pendingProps,e=d.revealOrder,f=d.tail;Yi(a,b,d.children,c);d=M.current;if(0!==(d&2))d=d&1|2,b.flags|=128;else{if(null!==a&&0!==(a.flags&128))a:for(a=b.child;null!==a;){if(13===a.tag)null!==a.memoizedState&&wj(a,c,b);else if(19===a.tag)wj(a,c,b);else if(null!==a.child){a.child.return=a;a=a.child;continue}if(a===b)break a;for(;null===a.sibling;){if(null===a.return||a.return===b)break a;a=a.return}a.sibling.return=a.return;a=a.sibling}d&=1}G(M,d);if(0===(b.mode&1))b.memoizedState=\nnull;else switch(e){case \"forwards\":c=b.child;for(e=null;null!==c;)a=c.alternate,null!==a&&null===Mh(a)&&(e=c),c=c.sibling;c=e;null===c?(e=b.child,b.child=null):(e=c.sibling,c.sibling=null);xj(b,!1,e,c,f);break;case \"backwards\":c=null;e=b.child;for(b.child=null;null!==e;){a=e.alternate;if(null!==a&&null===Mh(a)){b.child=e;break}a=e.sibling;e.sibling=c;c=e;e=a}xj(b,!0,c,null,f);break;case \"together\":xj(b,!1,null,null,void 0);break;default:b.memoizedState=null}return b.child}\nfunction jj(a,b){0===(b.mode&1)&&null!==a&&(a.alternate=null,b.alternate=null,b.flags|=2)}function $i(a,b,c){null!==a&&(b.dependencies=a.dependencies);hh|=b.lanes;if(0===(c&b.childLanes))return null;if(null!==a&&b.child!==a.child)throw Error(p(153));if(null!==b.child){a=b.child;c=wh(a,a.pendingProps);b.child=c;for(c.return=b;null!==a.sibling;)a=a.sibling,c=c.sibling=wh(a,a.pendingProps),c.return=b;c.sibling=null}return b.child}\nfunction zj(a,b,c){switch(b.tag){case 3:lj(b);Ig();break;case 5:Kh(b);break;case 1:Zf(b.type)&&cg(b);break;case 4:Ih(b,b.stateNode.containerInfo);break;case 10:var d=b.type._context,e=b.memoizedProps.value;G(Mg,d._currentValue);d._currentValue=e;break;case 13:d=b.memoizedState;if(null!==d){if(null!==d.dehydrated)return G(M,M.current&1),b.flags|=128,null;if(0!==(c&b.child.childLanes))return pj(a,b,c);G(M,M.current&1);a=$i(a,b,c);return null!==a?a.sibling:null}G(M,M.current&1);break;case 19:d=0!==(c&\nb.childLanes);if(0!==(a.flags&128)){if(d)return yj(a,b,c);b.flags|=128}e=b.memoizedState;null!==e&&(e.rendering=null,e.tail=null,e.lastEffect=null);G(M,M.current);if(d)break;else return null;case 22:case 23:return b.lanes=0,ej(a,b,c)}return $i(a,b,c)}var Aj,Bj,Cj,Dj;\nAj=function(a,b){for(var c=b.child;null!==c;){if(5===c.tag||6===c.tag)a.appendChild(c.stateNode);else if(4!==c.tag&&null!==c.child){c.child.return=c;c=c.child;continue}if(c===b)break;for(;null===c.sibling;){if(null===c.return||c.return===b)return;c=c.return}c.sibling.return=c.return;c=c.sibling}};Bj=function(){};\nCj=function(a,b,c,d){var e=a.memoizedProps;if(e!==d){a=b.stateNode;Hh(Eh.current);var f=null;switch(c){case \"input\":e=Ya(a,e);d=Ya(a,d);f=[];break;case \"select\":e=A({},e,{value:void 0});d=A({},d,{value:void 0});f=[];break;case \"textarea\":e=gb(a,e);d=gb(a,d);f=[];break;default:\"function\"!==typeof e.onClick&&\"function\"===typeof d.onClick&&(a.onclick=Bf)}ub(c,d);var g;c=null;for(l in e)if(!d.hasOwnProperty(l)&&e.hasOwnProperty(l)&&null!=e[l])if(\"style\"===l){var h=e[l];for(g in h)h.hasOwnProperty(g)&&\n(c||(c={}),c[g]=\"\")}else\"dangerouslySetInnerHTML\"!==l&&\"children\"!==l&&\"suppressContentEditableWarning\"!==l&&\"suppressHydrationWarning\"!==l&&\"autoFocus\"!==l&&(ea.hasOwnProperty(l)?f||(f=[]):(f=f||[]).push(l,null));for(l in d){var k=d[l];h=null!=e?e[l]:void 0;if(d.hasOwnProperty(l)&&k!==h&&(null!=k||null!=h))if(\"style\"===l)if(h){for(g in h)!h.hasOwnProperty(g)||k&&k.hasOwnProperty(g)||(c||(c={}),c[g]=\"\");for(g in k)k.hasOwnProperty(g)&&h[g]!==k[g]&&(c||(c={}),c[g]=k[g])}else c||(f||(f=[]),f.push(l,\nc)),c=k;else\"dangerouslySetInnerHTML\"===l?(k=k?k.__html:void 0,h=h?h.__html:void 0,null!=k&&h!==k&&(f=f||[]).push(l,k)):\"children\"===l?\"string\"!==typeof k&&\"number\"!==typeof k||(f=f||[]).push(l,\"\"+k):\"suppressContentEditableWarning\"!==l&&\"suppressHydrationWarning\"!==l&&(ea.hasOwnProperty(l)?(null!=k&&\"onScroll\"===l&&D(\"scroll\",a),f||h===k||(f=[])):(f=f||[]).push(l,k))}c&&(f=f||[]).push(\"style\",c);var l=f;if(b.updateQueue=l)b.flags|=4}};Dj=function(a,b,c,d){c!==d&&(b.flags|=4)};\nfunction Ej(a,b){if(!I)switch(a.tailMode){case \"hidden\":b=a.tail;for(var c=null;null!==b;)null!==b.alternate&&(c=b),b=b.sibling;null===c?a.tail=null:c.sibling=null;break;case \"collapsed\":c=a.tail;for(var d=null;null!==c;)null!==c.alternate&&(d=c),c=c.sibling;null===d?b||null===a.tail?a.tail=null:a.tail.sibling=null:d.sibling=null}}\nfunction S(a){var b=null!==a.alternate&&a.alternate.child===a.child,c=0,d=0;if(b)for(var e=a.child;null!==e;)c|=e.lanes|e.childLanes,d|=e.subtreeFlags&14680064,d|=e.flags&14680064,e.return=a,e=e.sibling;else for(e=a.child;null!==e;)c|=e.lanes|e.childLanes,d|=e.subtreeFlags,d|=e.flags,e.return=a,e=e.sibling;a.subtreeFlags|=d;a.childLanes=c;return b}\nfunction Fj(a,b,c){var d=b.pendingProps;wg(b);switch(b.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S(b),null;case 1:return Zf(b.type)&&$f(),S(b),null;case 3:d=b.stateNode;Jh();E(Wf);E(H);Oh();d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null);if(null===a||null===a.child)Gg(b)?b.flags|=4:null===a||a.memoizedState.isDehydrated&&0===(b.flags&256)||(b.flags|=1024,null!==zg&&(Gj(zg),zg=null));Bj(a,b);S(b);return null;case 5:Lh(b);var e=Hh(Gh.current);\nc=b.type;if(null!==a&&null!=b.stateNode)Cj(a,b,c,d,e),a.ref!==b.ref&&(b.flags|=512,b.flags|=2097152);else{if(!d){if(null===b.stateNode)throw Error(p(166));S(b);return null}a=Hh(Eh.current);if(Gg(b)){d=b.stateNode;c=b.type;var f=b.memoizedProps;d[Of]=b;d[Pf]=f;a=0!==(b.mode&1);switch(c){case \"dialog\":D(\"cancel\",d);D(\"close\",d);break;case \"iframe\":case \"object\":case \"embed\":D(\"load\",d);break;case \"video\":case \"audio\":for(e=0;e<lf.length;e++)D(lf[e],d);break;case \"source\":D(\"error\",d);break;case \"img\":case \"image\":case \"link\":D(\"error\",\nd);D(\"load\",d);break;case \"details\":D(\"toggle\",d);break;case \"input\":Za(d,f);D(\"invalid\",d);break;case \"select\":d._wrapperState={wasMultiple:!!f.multiple};D(\"invalid\",d);break;case \"textarea\":hb(d,f),D(\"invalid\",d)}ub(c,f);e=null;for(var g in f)if(f.hasOwnProperty(g)){var h=f[g];\"children\"===g?\"string\"===typeof h?d.textContent!==h&&(!0!==f.suppressHydrationWarning&&Af(d.textContent,h,a),e=[\"children\",h]):\"number\"===typeof h&&d.textContent!==\"\"+h&&(!0!==f.suppressHydrationWarning&&Af(d.textContent,\nh,a),e=[\"children\",\"\"+h]):ea.hasOwnProperty(g)&&null!=h&&\"onScroll\"===g&&D(\"scroll\",d)}switch(c){case \"input\":Va(d);db(d,f,!0);break;case \"textarea\":Va(d);jb(d);break;case \"select\":case \"option\":break;default:\"function\"===typeof f.onClick&&(d.onclick=Bf)}d=e;b.updateQueue=d;null!==d&&(b.flags|=4)}else{g=9===e.nodeType?e:e.ownerDocument;\"http://www.w3.org/1999/xhtml\"===a&&(a=kb(c));\"http://www.w3.org/1999/xhtml\"===a?\"script\"===c?(a=g.createElement(\"div\"),a.innerHTML=\"<script>\\x3c/script>\",a=a.removeChild(a.firstChild)):\n\"string\"===typeof d.is?a=g.createElement(c,{is:d.is}):(a=g.createElement(c),\"select\"===c&&(g=a,d.multiple?g.multiple=!0:d.size&&(g.size=d.size))):a=g.createElementNS(a,c);a[Of]=b;a[Pf]=d;Aj(a,b,!1,!1);b.stateNode=a;a:{g=vb(c,d);switch(c){case \"dialog\":D(\"cancel\",a);D(\"close\",a);e=d;break;case \"iframe\":case \"object\":case \"embed\":D(\"load\",a);e=d;break;case \"video\":case \"audio\":for(e=0;e<lf.length;e++)D(lf[e],a);e=d;break;case \"source\":D(\"error\",a);e=d;break;case \"img\":case \"image\":case \"link\":D(\"error\",\na);D(\"load\",a);e=d;break;case \"details\":D(\"toggle\",a);e=d;break;case \"input\":Za(a,d);e=Ya(a,d);D(\"invalid\",a);break;case \"option\":e=d;break;case \"select\":a._wrapperState={wasMultiple:!!d.multiple};e=A({},d,{value:void 0});D(\"invalid\",a);break;case \"textarea\":hb(a,d);e=gb(a,d);D(\"invalid\",a);break;default:e=d}ub(c,e);h=e;for(f in h)if(h.hasOwnProperty(f)){var k=h[f];\"style\"===f?sb(a,k):\"dangerouslySetInnerHTML\"===f?(k=k?k.__html:void 0,null!=k&&nb(a,k)):\"children\"===f?\"string\"===typeof k?(\"textarea\"!==\nc||\"\"!==k)&&ob(a,k):\"number\"===typeof k&&ob(a,\"\"+k):\"suppressContentEditableWarning\"!==f&&\"suppressHydrationWarning\"!==f&&\"autoFocus\"!==f&&(ea.hasOwnProperty(f)?null!=k&&\"onScroll\"===f&&D(\"scroll\",a):null!=k&&ta(a,f,k,g))}switch(c){case \"input\":Va(a);db(a,d,!1);break;case \"textarea\":Va(a);jb(a);break;case \"option\":null!=d.value&&a.setAttribute(\"value\",\"\"+Sa(d.value));break;case \"select\":a.multiple=!!d.multiple;f=d.value;null!=f?fb(a,!!d.multiple,f,!1):null!=d.defaultValue&&fb(a,!!d.multiple,d.defaultValue,\n!0);break;default:\"function\"===typeof e.onClick&&(a.onclick=Bf)}switch(c){case \"button\":case \"input\":case \"select\":case \"textarea\":d=!!d.autoFocus;break a;case \"img\":d=!0;break a;default:d=!1}}d&&(b.flags|=4)}null!==b.ref&&(b.flags|=512,b.flags|=2097152)}S(b);return null;case 6:if(a&&null!=b.stateNode)Dj(a,b,a.memoizedProps,d);else{if(\"string\"!==typeof d&&null===b.stateNode)throw Error(p(166));c=Hh(Gh.current);Hh(Eh.current);if(Gg(b)){d=b.stateNode;c=b.memoizedProps;d[Of]=b;if(f=d.nodeValue!==c)if(a=\nxg,null!==a)switch(a.tag){case 3:Af(d.nodeValue,c,0!==(a.mode&1));break;case 5:!0!==a.memoizedProps.suppressHydrationWarning&&Af(d.nodeValue,c,0!==(a.mode&1))}f&&(b.flags|=4)}else d=(9===c.nodeType?c:c.ownerDocument).createTextNode(d),d[Of]=b,b.stateNode=d}S(b);return null;case 13:E(M);d=b.memoizedState;if(null===a||null!==a.memoizedState&&null!==a.memoizedState.dehydrated){if(I&&null!==yg&&0!==(b.mode&1)&&0===(b.flags&128))Hg(),Ig(),b.flags|=98560,f=!1;else if(f=Gg(b),null!==d&&null!==d.dehydrated){if(null===\na){if(!f)throw Error(p(318));f=b.memoizedState;f=null!==f?f.dehydrated:null;if(!f)throw Error(p(317));f[Of]=b}else Ig(),0===(b.flags&128)&&(b.memoizedState=null),b.flags|=4;S(b);f=!1}else null!==zg&&(Gj(zg),zg=null),f=!0;if(!f)return b.flags&65536?b:null}if(0!==(b.flags&128))return b.lanes=c,b;d=null!==d;d!==(null!==a&&null!==a.memoizedState)&&d&&(b.child.flags|=8192,0!==(b.mode&1)&&(null===a||0!==(M.current&1)?0===T&&(T=3):uj()));null!==b.updateQueue&&(b.flags|=4);S(b);return null;case 4:return Jh(),\nBj(a,b),null===a&&sf(b.stateNode.containerInfo),S(b),null;case 10:return Rg(b.type._context),S(b),null;case 17:return Zf(b.type)&&$f(),S(b),null;case 19:E(M);f=b.memoizedState;if(null===f)return S(b),null;d=0!==(b.flags&128);g=f.rendering;if(null===g)if(d)Ej(f,!1);else{if(0!==T||null!==a&&0!==(a.flags&128))for(a=b.child;null!==a;){g=Mh(a);if(null!==g){b.flags|=128;Ej(f,!1);d=g.updateQueue;null!==d&&(b.updateQueue=d,b.flags|=4);b.subtreeFlags=0;d=c;for(c=b.child;null!==c;)f=c,a=d,f.flags&=14680066,\ng=f.alternate,null===g?(f.childLanes=0,f.lanes=a,f.child=null,f.subtreeFlags=0,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=g.childLanes,f.lanes=g.lanes,f.child=g.child,f.subtreeFlags=0,f.deletions=null,f.memoizedProps=g.memoizedProps,f.memoizedState=g.memoizedState,f.updateQueue=g.updateQueue,f.type=g.type,a=g.dependencies,f.dependencies=null===a?null:{lanes:a.lanes,firstContext:a.firstContext}),c=c.sibling;G(M,M.current&1|2);return b.child}a=\na.sibling}null!==f.tail&&B()>Hj&&(b.flags|=128,d=!0,Ej(f,!1),b.lanes=4194304)}else{if(!d)if(a=Mh(g),null!==a){if(b.flags|=128,d=!0,c=a.updateQueue,null!==c&&(b.updateQueue=c,b.flags|=4),Ej(f,!0),null===f.tail&&\"hidden\"===f.tailMode&&!g.alternate&&!I)return S(b),null}else 2*B()-f.renderingStartTime>Hj&&1073741824!==c&&(b.flags|=128,d=!0,Ej(f,!1),b.lanes=4194304);f.isBackwards?(g.sibling=b.child,b.child=g):(c=f.last,null!==c?c.sibling=g:b.child=g,f.last=g)}if(null!==f.tail)return b=f.tail,f.rendering=\nb,f.tail=b.sibling,f.renderingStartTime=B(),b.sibling=null,c=M.current,G(M,d?c&1|2:c&1),b;S(b);return null;case 22:case 23:return Ij(),d=null!==b.memoizedState,null!==a&&null!==a.memoizedState!==d&&(b.flags|=8192),d&&0!==(b.mode&1)?0!==(gj&1073741824)&&(S(b),b.subtreeFlags&6&&(b.flags|=8192)):S(b),null;case 24:return null;case 25:return null}throw Error(p(156,b.tag));}\nfunction Jj(a,b){wg(b);switch(b.tag){case 1:return Zf(b.type)&&$f(),a=b.flags,a&65536?(b.flags=a&-65537|128,b):null;case 3:return Jh(),E(Wf),E(H),Oh(),a=b.flags,0!==(a&65536)&&0===(a&128)?(b.flags=a&-65537|128,b):null;case 5:return Lh(b),null;case 13:E(M);a=b.memoizedState;if(null!==a&&null!==a.dehydrated){if(null===b.alternate)throw Error(p(340));Ig()}a=b.flags;return a&65536?(b.flags=a&-65537|128,b):null;case 19:return E(M),null;case 4:return Jh(),null;case 10:return Rg(b.type._context),null;case 22:case 23:return Ij(),\nnull;case 24:return null;default:return null}}var Kj=!1,U=!1,Lj=\"function\"===typeof WeakSet?WeakSet:Set,V=null;function Mj(a,b){var c=a.ref;if(null!==c)if(\"function\"===typeof c)try{c(null)}catch(d){W(a,b,d)}else c.current=null}function Nj(a,b,c){try{c()}catch(d){W(a,b,d)}}var Oj=!1;\nfunction Pj(a,b){Cf=dd;a=Me();if(Ne(a)){if(\"selectionStart\"in a)var c={start:a.selectionStart,end:a.selectionEnd};else a:{c=(c=a.ownerDocument)&&c.defaultView||window;var d=c.getSelection&&c.getSelection();if(d&&0!==d.rangeCount){c=d.anchorNode;var e=d.anchorOffset,f=d.focusNode;d=d.focusOffset;try{c.nodeType,f.nodeType}catch(F){c=null;break a}var g=0,h=-1,k=-1,l=0,m=0,q=a,r=null;b:for(;;){for(var y;;){q!==c||0!==e&&3!==q.nodeType||(h=g+e);q!==f||0!==d&&3!==q.nodeType||(k=g+d);3===q.nodeType&&(g+=\nq.nodeValue.length);if(null===(y=q.firstChild))break;r=q;q=y}for(;;){if(q===a)break b;r===c&&++l===e&&(h=g);r===f&&++m===d&&(k=g);if(null!==(y=q.nextSibling))break;q=r;r=q.parentNode}q=y}c=-1===h||-1===k?null:{start:h,end:k}}else c=null}c=c||{start:0,end:0}}else c=null;Df={focusedElem:a,selectionRange:c};dd=!1;for(V=b;null!==V;)if(b=V,a=b.child,0!==(b.subtreeFlags&1028)&&null!==a)a.return=b,V=a;else for(;null!==V;){b=V;try{var n=b.alternate;if(0!==(b.flags&1024))switch(b.tag){case 0:case 11:case 15:break;\ncase 1:if(null!==n){var t=n.memoizedProps,J=n.memoizedState,x=b.stateNode,w=x.getSnapshotBeforeUpdate(b.elementType===b.type?t:Lg(b.type,t),J);x.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var u=b.stateNode.containerInfo;1===u.nodeType?u.textContent=\"\":9===u.nodeType&&u.documentElement&&u.removeChild(u.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p(163));}}catch(F){W(b,b.return,F)}a=b.sibling;if(null!==a){a.return=b.return;V=a;break}V=b.return}n=Oj;Oj=!1;return n}\nfunction Qj(a,b,c){var d=b.updateQueue;d=null!==d?d.lastEffect:null;if(null!==d){var e=d=d.next;do{if((e.tag&a)===a){var f=e.destroy;e.destroy=void 0;void 0!==f&&Nj(b,c,f)}e=e.next}while(e!==d)}}function Rj(a,b){b=b.updateQueue;b=null!==b?b.lastEffect:null;if(null!==b){var c=b=b.next;do{if((c.tag&a)===a){var d=c.create;c.destroy=d()}c=c.next}while(c!==b)}}function Sj(a){var b=a.ref;if(null!==b){var c=a.stateNode;switch(a.tag){case 5:a=c;break;default:a=c}\"function\"===typeof b?b(a):b.current=a}}\nfunction Tj(a){var b=a.alternate;null!==b&&(a.alternate=null,Tj(b));a.child=null;a.deletions=null;a.sibling=null;5===a.tag&&(b=a.stateNode,null!==b&&(delete b[Of],delete b[Pf],delete b[of],delete b[Qf],delete b[Rf]));a.stateNode=null;a.return=null;a.dependencies=null;a.memoizedProps=null;a.memoizedState=null;a.pendingProps=null;a.stateNode=null;a.updateQueue=null}function Uj(a){return 5===a.tag||3===a.tag||4===a.tag}\nfunction Vj(a){a:for(;;){for(;null===a.sibling;){if(null===a.return||Uj(a.return))return null;a=a.return}a.sibling.return=a.return;for(a=a.sibling;5!==a.tag&&6!==a.tag&&18!==a.tag;){if(a.flags&2)continue a;if(null===a.child||4===a.tag)continue a;else a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}\nfunction Wj(a,b,c){var d=a.tag;if(5===d||6===d)a=a.stateNode,b?8===c.nodeType?c.parentNode.insertBefore(a,b):c.insertBefore(a,b):(8===c.nodeType?(b=c.parentNode,b.insertBefore(a,c)):(b=c,b.appendChild(a)),c=c._reactRootContainer,null!==c&&void 0!==c||null!==b.onclick||(b.onclick=Bf));else if(4!==d&&(a=a.child,null!==a))for(Wj(a,b,c),a=a.sibling;null!==a;)Wj(a,b,c),a=a.sibling}\nfunction Xj(a,b,c){var d=a.tag;if(5===d||6===d)a=a.stateNode,b?c.insertBefore(a,b):c.appendChild(a);else if(4!==d&&(a=a.child,null!==a))for(Xj(a,b,c),a=a.sibling;null!==a;)Xj(a,b,c),a=a.sibling}var X=null,Yj=!1;function Zj(a,b,c){for(c=c.child;null!==c;)ak(a,b,c),c=c.sibling}\nfunction ak(a,b,c){if(lc&&\"function\"===typeof lc.onCommitFiberUnmount)try{lc.onCommitFiberUnmount(kc,c)}catch(h){}switch(c.tag){case 5:U||Mj(c,b);case 6:var d=X,e=Yj;X=null;Zj(a,b,c);X=d;Yj=e;null!==X&&(Yj?(a=X,c=c.stateNode,8===a.nodeType?a.parentNode.removeChild(c):a.removeChild(c)):X.removeChild(c.stateNode));break;case 18:null!==X&&(Yj?(a=X,c=c.stateNode,8===a.nodeType?Kf(a.parentNode,c):1===a.nodeType&&Kf(a,c),bd(a)):Kf(X,c.stateNode));break;case 4:d=X;e=Yj;X=c.stateNode.containerInfo;Yj=!0;\nZj(a,b,c);X=d;Yj=e;break;case 0:case 11:case 14:case 15:if(!U&&(d=c.updateQueue,null!==d&&(d=d.lastEffect,null!==d))){e=d=d.next;do{var f=e,g=f.destroy;f=f.tag;void 0!==g&&(0!==(f&2)?Nj(c,b,g):0!==(f&4)&&Nj(c,b,g));e=e.next}while(e!==d)}Zj(a,b,c);break;case 1:if(!U&&(Mj(c,b),d=c.stateNode,\"function\"===typeof d.componentWillUnmount))try{d.props=c.memoizedProps,d.state=c.memoizedState,d.componentWillUnmount()}catch(h){W(c,b,h)}Zj(a,b,c);break;case 21:Zj(a,b,c);break;case 22:c.mode&1?(U=(d=U)||null!==\nc.memoizedState,Zj(a,b,c),U=d):Zj(a,b,c);break;default:Zj(a,b,c)}}function bk(a){var b=a.updateQueue;if(null!==b){a.updateQueue=null;var c=a.stateNode;null===c&&(c=a.stateNode=new Lj);b.forEach(function(b){var d=ck.bind(null,a,b);c.has(b)||(c.add(b),b.then(d,d))})}}\nfunction dk(a,b){var c=b.deletions;if(null!==c)for(var d=0;d<c.length;d++){var e=c[d];try{var f=a,g=b,h=g;a:for(;null!==h;){switch(h.tag){case 5:X=h.stateNode;Yj=!1;break a;case 3:X=h.stateNode.containerInfo;Yj=!0;break a;case 4:X=h.stateNode.containerInfo;Yj=!0;break a}h=h.return}if(null===X)throw Error(p(160));ak(f,g,e);X=null;Yj=!1;var k=e.alternate;null!==k&&(k.return=null);e.return=null}catch(l){W(e,b,l)}}if(b.subtreeFlags&12854)for(b=b.child;null!==b;)ek(b,a),b=b.sibling}\nfunction ek(a,b){var c=a.alternate,d=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:dk(b,a);fk(a);if(d&4){try{Qj(3,a,a.return),Rj(3,a)}catch(t){W(a,a.return,t)}try{Qj(5,a,a.return)}catch(t){W(a,a.return,t)}}break;case 1:dk(b,a);fk(a);d&512&&null!==c&&Mj(c,c.return);break;case 5:dk(b,a);fk(a);d&512&&null!==c&&Mj(c,c.return);if(a.flags&32){var e=a.stateNode;try{ob(e,\"\")}catch(t){W(a,a.return,t)}}if(d&4&&(e=a.stateNode,null!=e)){var f=a.memoizedProps,g=null!==c?c.memoizedProps:f,h=a.type,k=a.updateQueue;\na.updateQueue=null;if(null!==k)try{\"input\"===h&&\"radio\"===f.type&&null!=f.name&&ab(e,f);vb(h,g);var l=vb(h,f);for(g=0;g<k.length;g+=2){var m=k[g],q=k[g+1];\"style\"===m?sb(e,q):\"dangerouslySetInnerHTML\"===m?nb(e,q):\"children\"===m?ob(e,q):ta(e,m,q,l)}switch(h){case \"input\":bb(e,f);break;case \"textarea\":ib(e,f);break;case \"select\":var r=e._wrapperState.wasMultiple;e._wrapperState.wasMultiple=!!f.multiple;var y=f.value;null!=y?fb(e,!!f.multiple,y,!1):r!==!!f.multiple&&(null!=f.defaultValue?fb(e,!!f.multiple,\nf.defaultValue,!0):fb(e,!!f.multiple,f.multiple?[]:\"\",!1))}e[Pf]=f}catch(t){W(a,a.return,t)}}break;case 6:dk(b,a);fk(a);if(d&4){if(null===a.stateNode)throw Error(p(162));e=a.stateNode;f=a.memoizedProps;try{e.nodeValue=f}catch(t){W(a,a.return,t)}}break;case 3:dk(b,a);fk(a);if(d&4&&null!==c&&c.memoizedState.isDehydrated)try{bd(b.containerInfo)}catch(t){W(a,a.return,t)}break;case 4:dk(b,a);fk(a);break;case 13:dk(b,a);fk(a);e=a.child;e.flags&8192&&(f=null!==e.memoizedState,e.stateNode.isHidden=f,!f||\nnull!==e.alternate&&null!==e.alternate.memoizedState||(gk=B()));d&4&&bk(a);break;case 22:m=null!==c&&null!==c.memoizedState;a.mode&1?(U=(l=U)||m,dk(b,a),U=l):dk(b,a);fk(a);if(d&8192){l=null!==a.memoizedState;if((a.stateNode.isHidden=l)&&!m&&0!==(a.mode&1))for(V=a,m=a.child;null!==m;){for(q=V=m;null!==V;){r=V;y=r.child;switch(r.tag){case 0:case 11:case 14:case 15:Qj(4,r,r.return);break;case 1:Mj(r,r.return);var n=r.stateNode;if(\"function\"===typeof n.componentWillUnmount){d=r;c=r.return;try{b=d,n.props=\nb.memoizedProps,n.state=b.memoizedState,n.componentWillUnmount()}catch(t){W(d,c,t)}}break;case 5:Mj(r,r.return);break;case 22:if(null!==r.memoizedState){hk(q);continue}}null!==y?(y.return=r,V=y):hk(q)}m=m.sibling}a:for(m=null,q=a;;){if(5===q.tag){if(null===m){m=q;try{e=q.stateNode,l?(f=e.style,\"function\"===typeof f.setProperty?f.setProperty(\"display\",\"none\",\"important\"):f.display=\"none\"):(h=q.stateNode,k=q.memoizedProps.style,g=void 0!==k&&null!==k&&k.hasOwnProperty(\"display\")?k.display:null,h.style.display=\nrb(\"display\",g))}catch(t){W(a,a.return,t)}}}else if(6===q.tag){if(null===m)try{q.stateNode.nodeValue=l?\"\":q.memoizedProps}catch(t){W(a,a.return,t)}}else if((22!==q.tag&&23!==q.tag||null===q.memoizedState||q===a)&&null!==q.child){q.child.return=q;q=q.child;continue}if(q===a)break a;for(;null===q.sibling;){if(null===q.return||q.return===a)break a;m===q&&(m=null);q=q.return}m===q&&(m=null);q.sibling.return=q.return;q=q.sibling}}break;case 19:dk(b,a);fk(a);d&4&&bk(a);break;case 21:break;default:dk(b,\na),fk(a)}}function fk(a){var b=a.flags;if(b&2){try{a:{for(var c=a.return;null!==c;){if(Uj(c)){var d=c;break a}c=c.return}throw Error(p(160));}switch(d.tag){case 5:var e=d.stateNode;d.flags&32&&(ob(e,\"\"),d.flags&=-33);var f=Vj(a);Xj(a,f,e);break;case 3:case 4:var g=d.stateNode.containerInfo,h=Vj(a);Wj(a,h,g);break;default:throw Error(p(161));}}catch(k){W(a,a.return,k)}a.flags&=-3}b&4096&&(a.flags&=-4097)}function ik(a,b,c){V=a;jk(a,b,c)}\nfunction jk(a,b,c){for(var d=0!==(a.mode&1);null!==V;){var e=V,f=e.child;if(22===e.tag&&d){var g=null!==e.memoizedState||Kj;if(!g){var h=e.alternate,k=null!==h&&null!==h.memoizedState||U;h=Kj;var l=U;Kj=g;if((U=k)&&!l)for(V=e;null!==V;)g=V,k=g.child,22===g.tag&&null!==g.memoizedState?kk(e):null!==k?(k.return=g,V=k):kk(e);for(;null!==f;)V=f,jk(f,b,c),f=f.sibling;V=e;Kj=h;U=l}lk(a,b,c)}else 0!==(e.subtreeFlags&8772)&&null!==f?(f.return=e,V=f):lk(a,b,c)}}\nfunction lk(a){for(;null!==V;){var b=V;if(0!==(b.flags&8772)){var c=b.alternate;try{if(0!==(b.flags&8772))switch(b.tag){case 0:case 11:case 15:U||Rj(5,b);break;case 1:var d=b.stateNode;if(b.flags&4&&!U)if(null===c)d.componentDidMount();else{var e=b.elementType===b.type?c.memoizedProps:Lg(b.type,c.memoizedProps);d.componentDidUpdate(e,c.memoizedState,d.__reactInternalSnapshotBeforeUpdate)}var f=b.updateQueue;null!==f&&ih(b,f,d);break;case 3:var g=b.updateQueue;if(null!==g){c=null;if(null!==b.child)switch(b.child.tag){case 5:c=\nb.child.stateNode;break;case 1:c=b.child.stateNode}ih(b,g,c)}break;case 5:var h=b.stateNode;if(null===c&&b.flags&4){c=h;var k=b.memoizedProps;switch(b.type){case \"button\":case \"input\":case \"select\":case \"textarea\":k.autoFocus&&c.focus();break;case \"img\":k.src&&(c.src=k.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(null===b.memoizedState){var l=b.alternate;if(null!==l){var m=l.memoizedState;if(null!==m){var q=m.dehydrated;null!==q&&bd(q)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;\ndefault:throw Error(p(163));}U||b.flags&512&&Sj(b)}catch(r){W(b,b.return,r)}}if(b===a){V=null;break}c=b.sibling;if(null!==c){c.return=b.return;V=c;break}V=b.return}}function hk(a){for(;null!==V;){var b=V;if(b===a){V=null;break}var c=b.sibling;if(null!==c){c.return=b.return;V=c;break}V=b.return}}\nfunction kk(a){for(;null!==V;){var b=V;try{switch(b.tag){case 0:case 11:case 15:var c=b.return;try{Rj(4,b)}catch(k){W(b,c,k)}break;case 1:var d=b.stateNode;if(\"function\"===typeof d.componentDidMount){var e=b.return;try{d.componentDidMount()}catch(k){W(b,e,k)}}var f=b.return;try{Sj(b)}catch(k){W(b,f,k)}break;case 5:var g=b.return;try{Sj(b)}catch(k){W(b,g,k)}}}catch(k){W(b,b.return,k)}if(b===a){V=null;break}var h=b.sibling;if(null!==h){h.return=b.return;V=h;break}V=b.return}}\nvar mk=Math.ceil,nk=ua.ReactCurrentDispatcher,ok=ua.ReactCurrentOwner,pk=ua.ReactCurrentBatchConfig,K=0,R=null,Y=null,Z=0,gj=0,fj=Uf(0),T=0,qk=null,hh=0,rk=0,sk=0,tk=null,uk=null,gk=0,Hj=Infinity,vk=null,Pi=!1,Qi=null,Si=null,wk=!1,xk=null,yk=0,zk=0,Ak=null,Bk=-1,Ck=0;function L(){return 0!==(K&6)?B():-1!==Bk?Bk:Bk=B()}\nfunction lh(a){if(0===(a.mode&1))return 1;if(0!==(K&2)&&0!==Z)return Z&-Z;if(null!==Kg.transition)return 0===Ck&&(Ck=yc()),Ck;a=C;if(0!==a)return a;a=window.event;a=void 0===a?16:jd(a.type);return a}function mh(a,b,c,d){if(50<zk)throw zk=0,Ak=null,Error(p(185));Ac(a,c,d);if(0===(K&2)||a!==R)a===R&&(0===(K&2)&&(rk|=c),4===T&&Dk(a,Z)),Ek(a,d),1===c&&0===K&&0===(b.mode&1)&&(Hj=B()+500,fg&&jg())}\nfunction Ek(a,b){var c=a.callbackNode;wc(a,b);var d=uc(a,a===R?Z:0);if(0===d)null!==c&&bc(c),a.callbackNode=null,a.callbackPriority=0;else if(b=d&-d,a.callbackPriority!==b){null!=c&&bc(c);if(1===b)0===a.tag?ig(Fk.bind(null,a)):hg(Fk.bind(null,a)),Jf(function(){0===(K&6)&&jg()}),c=null;else{switch(Dc(d)){case 1:c=fc;break;case 4:c=gc;break;case 16:c=hc;break;case 536870912:c=jc;break;default:c=hc}c=Gk(c,Hk.bind(null,a))}a.callbackPriority=b;a.callbackNode=c}}\nfunction Hk(a,b){Bk=-1;Ck=0;if(0!==(K&6))throw Error(p(327));var c=a.callbackNode;if(Ik()&&a.callbackNode!==c)return null;var d=uc(a,a===R?Z:0);if(0===d)return null;if(0!==(d&30)||0!==(d&a.expiredLanes)||b)b=Jk(a,d);else{b=d;var e=K;K|=2;var f=Kk();if(R!==a||Z!==b)vk=null,Hj=B()+500,Lk(a,b);do try{Mk();break}catch(h){Nk(a,h)}while(1);Qg();nk.current=f;K=e;null!==Y?b=0:(R=null,Z=0,b=T)}if(0!==b){2===b&&(e=xc(a),0!==e&&(d=e,b=Ok(a,e)));if(1===b)throw c=qk,Lk(a,0),Dk(a,d),Ek(a,B()),c;if(6===b)Dk(a,d);\nelse{e=a.current.alternate;if(0===(d&30)&&!Pk(e)&&(b=Jk(a,d),2===b&&(f=xc(a),0!==f&&(d=f,b=Ok(a,f))),1===b))throw c=qk,Lk(a,0),Dk(a,d),Ek(a,B()),c;a.finishedWork=e;a.finishedLanes=d;switch(b){case 0:case 1:throw Error(p(345));case 2:Qk(a,uk,vk);break;case 3:Dk(a,d);if((d&130023424)===d&&(b=gk+500-B(),10<b)){if(0!==uc(a,0))break;e=a.suspendedLanes;if((e&d)!==d){L();a.pingedLanes|=a.suspendedLanes&e;break}a.timeoutHandle=Ff(Qk.bind(null,a,uk,vk),b);break}Qk(a,uk,vk);break;case 4:Dk(a,d);if((d&4194240)===\nd)break;b=a.eventTimes;for(e=-1;0<d;){var g=31-oc(d);f=1<<g;g=b[g];g>e&&(e=g);d&=~f}d=e;d=B()-d;d=(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3E3>d?3E3:4320>d?4320:1960*mk(d/1960))-d;if(10<d){a.timeoutHandle=Ff(Qk.bind(null,a,uk,vk),d);break}Qk(a,uk,vk);break;case 5:Qk(a,uk,vk);break;default:throw Error(p(329));}}}Ek(a,B());return a.callbackNode===c?Hk.bind(null,a):null}\nfunction Ok(a,b){var c=tk;a.current.memoizedState.isDehydrated&&(Lk(a,b).flags|=256);a=Jk(a,b);2!==a&&(b=uk,uk=c,null!==b&&Gj(b));return a}function Gj(a){null===uk?uk=a:uk.push.apply(uk,a)}\nfunction Pk(a){for(var b=a;;){if(b.flags&16384){var c=b.updateQueue;if(null!==c&&(c=c.stores,null!==c))for(var d=0;d<c.length;d++){var e=c[d],f=e.getSnapshot;e=e.value;try{if(!He(f(),e))return!1}catch(g){return!1}}}c=b.child;if(b.subtreeFlags&16384&&null!==c)c.return=b,b=c;else{if(b===a)break;for(;null===b.sibling;){if(null===b.return||b.return===a)return!0;b=b.return}b.sibling.return=b.return;b=b.sibling}}return!0}\nfunction Dk(a,b){b&=~sk;b&=~rk;a.suspendedLanes|=b;a.pingedLanes&=~b;for(a=a.expirationTimes;0<b;){var c=31-oc(b),d=1<<c;a[c]=-1;b&=~d}}function Fk(a){if(0!==(K&6))throw Error(p(327));Ik();var b=uc(a,0);if(0===(b&1))return Ek(a,B()),null;var c=Jk(a,b);if(0!==a.tag&&2===c){var d=xc(a);0!==d&&(b=d,c=Ok(a,d))}if(1===c)throw c=qk,Lk(a,0),Dk(a,b),Ek(a,B()),c;if(6===c)throw Error(p(345));a.finishedWork=a.current.alternate;a.finishedLanes=b;Qk(a,uk,vk);Ek(a,B());return null}\nfunction Rk(a,b){var c=K;K|=1;try{return a(b)}finally{K=c,0===K&&(Hj=B()+500,fg&&jg())}}function Sk(a){null!==xk&&0===xk.tag&&0===(K&6)&&Ik();var b=K;K|=1;var c=pk.transition,d=C;try{if(pk.transition=null,C=1,a)return a()}finally{C=d,pk.transition=c,K=b,0===(K&6)&&jg()}}function Ij(){gj=fj.current;E(fj)}\nfunction Lk(a,b){a.finishedWork=null;a.finishedLanes=0;var c=a.timeoutHandle;-1!==c&&(a.timeoutHandle=-1,Gf(c));if(null!==Y)for(c=Y.return;null!==c;){var d=c;wg(d);switch(d.tag){case 1:d=d.type.childContextTypes;null!==d&&void 0!==d&&$f();break;case 3:Jh();E(Wf);E(H);Oh();break;case 5:Lh(d);break;case 4:Jh();break;case 13:E(M);break;case 19:E(M);break;case 10:Rg(d.type._context);break;case 22:case 23:Ij()}c=c.return}R=a;Y=a=wh(a.current,null);Z=gj=b;T=0;qk=null;sk=rk=hh=0;uk=tk=null;if(null!==Wg){for(b=\n0;b<Wg.length;b++)if(c=Wg[b],d=c.interleaved,null!==d){c.interleaved=null;var e=d.next,f=c.pending;if(null!==f){var g=f.next;f.next=e;d.next=g}c.pending=d}Wg=null}return a}\nfunction Nk(a,b){do{var c=Y;try{Qg();Ph.current=ai;if(Sh){for(var d=N.memoizedState;null!==d;){var e=d.queue;null!==e&&(e.pending=null);d=d.next}Sh=!1}Rh=0;P=O=N=null;Th=!1;Uh=0;ok.current=null;if(null===c||null===c.return){T=1;qk=b;Y=null;break}a:{var f=a,g=c.return,h=c,k=b;b=Z;h.flags|=32768;if(null!==k&&\"object\"===typeof k&&\"function\"===typeof k.then){var l=k,m=h,q=m.tag;if(0===(m.mode&1)&&(0===q||11===q||15===q)){var r=m.alternate;r?(m.updateQueue=r.updateQueue,m.memoizedState=r.memoizedState,\nm.lanes=r.lanes):(m.updateQueue=null,m.memoizedState=null)}var y=Vi(g);if(null!==y){y.flags&=-257;Wi(y,g,h,f,b);y.mode&1&&Ti(f,l,b);b=y;k=l;var n=b.updateQueue;if(null===n){var t=new Set;t.add(k);b.updateQueue=t}else n.add(k);break a}else{if(0===(b&1)){Ti(f,l,b);uj();break a}k=Error(p(426))}}else if(I&&h.mode&1){var J=Vi(g);if(null!==J){0===(J.flags&65536)&&(J.flags|=256);Wi(J,g,h,f,b);Jg(Ki(k,h));break a}}f=k=Ki(k,h);4!==T&&(T=2);null===tk?tk=[f]:tk.push(f);f=g;do{switch(f.tag){case 3:f.flags|=65536;\nb&=-b;f.lanes|=b;var x=Oi(f,k,b);fh(f,x);break a;case 1:h=k;var w=f.type,u=f.stateNode;if(0===(f.flags&128)&&(\"function\"===typeof w.getDerivedStateFromError||null!==u&&\"function\"===typeof u.componentDidCatch&&(null===Si||!Si.has(u)))){f.flags|=65536;b&=-b;f.lanes|=b;var F=Ri(f,h,b);fh(f,F);break a}}f=f.return}while(null!==f)}Tk(c)}catch(na){b=na;Y===c&&null!==c&&(Y=c=c.return);continue}break}while(1)}function Kk(){var a=nk.current;nk.current=ai;return null===a?ai:a}\nfunction uj(){if(0===T||3===T||2===T)T=4;null===R||0===(hh&268435455)&&0===(rk&268435455)||Dk(R,Z)}function Jk(a,b){var c=K;K|=2;var d=Kk();if(R!==a||Z!==b)vk=null,Lk(a,b);do try{Uk();break}catch(e){Nk(a,e)}while(1);Qg();K=c;nk.current=d;if(null!==Y)throw Error(p(261));R=null;Z=0;return T}function Uk(){for(;null!==Y;)Vk(Y)}function Mk(){for(;null!==Y&&!cc();)Vk(Y)}function Vk(a){var b=Wk(a.alternate,a,gj);a.memoizedProps=a.pendingProps;null===b?Tk(a):Y=b;ok.current=null}\nfunction Tk(a){var b=a;do{var c=b.alternate;a=b.return;if(0===(b.flags&32768)){if(c=Fj(c,b,gj),null!==c){Y=c;return}}else{c=Jj(c,b);if(null!==c){c.flags&=32767;Y=c;return}if(null!==a)a.flags|=32768,a.subtreeFlags=0,a.deletions=null;else{T=6;Y=null;return}}b=b.sibling;if(null!==b){Y=b;return}Y=b=a}while(null!==b);0===T&&(T=5)}function Qk(a,b,c){var d=C,e=pk.transition;try{pk.transition=null,C=1,Xk(a,b,c,d)}finally{pk.transition=e,C=d}return null}\nfunction Xk(a,b,c,d){do Ik();while(null!==xk);if(0!==(K&6))throw Error(p(327));c=a.finishedWork;var e=a.finishedLanes;if(null===c)return null;a.finishedWork=null;a.finishedLanes=0;if(c===a.current)throw Error(p(177));a.callbackNode=null;a.callbackPriority=0;var f=c.lanes|c.childLanes;Bc(a,f);a===R&&(Y=R=null,Z=0);0===(c.subtreeFlags&2064)&&0===(c.flags&2064)||wk||(wk=!0,Gk(hc,function(){Ik();return null}));f=0!==(c.flags&15990);if(0!==(c.subtreeFlags&15990)||f){f=pk.transition;pk.transition=null;\nvar g=C;C=1;var h=K;K|=4;ok.current=null;Pj(a,c);ek(c,a);Oe(Df);dd=!!Cf;Df=Cf=null;a.current=c;ik(c,a,e);dc();K=h;C=g;pk.transition=f}else a.current=c;wk&&(wk=!1,xk=a,yk=e);f=a.pendingLanes;0===f&&(Si=null);mc(c.stateNode,d);Ek(a,B());if(null!==b)for(d=a.onRecoverableError,c=0;c<b.length;c++)e=b[c],d(e.value,{componentStack:e.stack,digest:e.digest});if(Pi)throw Pi=!1,a=Qi,Qi=null,a;0!==(yk&1)&&0!==a.tag&&Ik();f=a.pendingLanes;0!==(f&1)?a===Ak?zk++:(zk=0,Ak=a):zk=0;jg();return null}\nfunction Ik(){if(null!==xk){var a=Dc(yk),b=pk.transition,c=C;try{pk.transition=null;C=16>a?16:a;if(null===xk)var d=!1;else{a=xk;xk=null;yk=0;if(0!==(K&6))throw Error(p(331));var e=K;K|=4;for(V=a.current;null!==V;){var f=V,g=f.child;if(0!==(V.flags&16)){var h=f.deletions;if(null!==h){for(var k=0;k<h.length;k++){var l=h[k];for(V=l;null!==V;){var m=V;switch(m.tag){case 0:case 11:case 15:Qj(8,m,f)}var q=m.child;if(null!==q)q.return=m,V=q;else for(;null!==V;){m=V;var r=m.sibling,y=m.return;Tj(m);if(m===\nl){V=null;break}if(null!==r){r.return=y;V=r;break}V=y}}}var n=f.alternate;if(null!==n){var t=n.child;if(null!==t){n.child=null;do{var J=t.sibling;t.sibling=null;t=J}while(null!==t)}}V=f}}if(0!==(f.subtreeFlags&2064)&&null!==g)g.return=f,V=g;else b:for(;null!==V;){f=V;if(0!==(f.flags&2048))switch(f.tag){case 0:case 11:case 15:Qj(9,f,f.return)}var x=f.sibling;if(null!==x){x.return=f.return;V=x;break b}V=f.return}}var w=a.current;for(V=w;null!==V;){g=V;var u=g.child;if(0!==(g.subtreeFlags&2064)&&null!==\nu)u.return=g,V=u;else b:for(g=w;null!==V;){h=V;if(0!==(h.flags&2048))try{switch(h.tag){case 0:case 11:case 15:Rj(9,h)}}catch(na){W(h,h.return,na)}if(h===g){V=null;break b}var F=h.sibling;if(null!==F){F.return=h.return;V=F;break b}V=h.return}}K=e;jg();if(lc&&\"function\"===typeof lc.onPostCommitFiberRoot)try{lc.onPostCommitFiberRoot(kc,a)}catch(na){}d=!0}return d}finally{C=c,pk.transition=b}}return!1}function Yk(a,b,c){b=Ki(c,b);b=Oi(a,b,1);a=dh(a,b,1);b=L();null!==a&&(Ac(a,1,b),Ek(a,b))}\nfunction W(a,b,c){if(3===a.tag)Yk(a,a,c);else for(;null!==b;){if(3===b.tag){Yk(b,a,c);break}else if(1===b.tag){var d=b.stateNode;if(\"function\"===typeof b.type.getDerivedStateFromError||\"function\"===typeof d.componentDidCatch&&(null===Si||!Si.has(d))){a=Ki(c,a);a=Ri(b,a,1);b=dh(b,a,1);a=L();null!==b&&(Ac(b,1,a),Ek(b,a));break}}b=b.return}}\nfunction Ui(a,b,c){var d=a.pingCache;null!==d&&d.delete(b);b=L();a.pingedLanes|=a.suspendedLanes&c;R===a&&(Z&c)===c&&(4===T||3===T&&(Z&130023424)===Z&&500>B()-gk?Lk(a,0):sk|=c);Ek(a,b)}function Zk(a,b){0===b&&(0===(a.mode&1)?b=1:(b=sc,sc<<=1,0===(sc&130023424)&&(sc=4194304)));var c=L();a=Zg(a,b);null!==a&&(Ac(a,b,c),Ek(a,c))}function vj(a){var b=a.memoizedState,c=0;null!==b&&(c=b.retryLane);Zk(a,c)}\nfunction ck(a,b){var c=0;switch(a.tag){case 13:var d=a.stateNode;var e=a.memoizedState;null!==e&&(c=e.retryLane);break;case 19:d=a.stateNode;break;default:throw Error(p(314));}null!==d&&d.delete(b);Zk(a,c)}var Wk;\nWk=function(a,b,c){if(null!==a)if(a.memoizedProps!==b.pendingProps||Wf.current)Ug=!0;else{if(0===(a.lanes&c)&&0===(b.flags&128))return Ug=!1,zj(a,b,c);Ug=0!==(a.flags&131072)?!0:!1}else Ug=!1,I&&0!==(b.flags&1048576)&&ug(b,ng,b.index);b.lanes=0;switch(b.tag){case 2:var d=b.type;jj(a,b);a=b.pendingProps;var e=Yf(b,H.current);Tg(b,c);e=Xh(null,b,d,a,e,c);var f=bi();b.flags|=1;\"object\"===typeof e&&null!==e&&\"function\"===typeof e.render&&void 0===e.$$typeof?(b.tag=1,b.memoizedState=null,b.updateQueue=\nnull,Zf(d)?(f=!0,cg(b)):f=!1,b.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,ah(b),e.updater=nh,b.stateNode=e,e._reactInternals=b,rh(b,d,a,c),b=kj(null,b,d,!0,f,c)):(b.tag=0,I&&f&&vg(b),Yi(null,b,e,c),b=b.child);return b;case 16:d=b.elementType;a:{jj(a,b);a=b.pendingProps;e=d._init;d=e(d._payload);b.type=d;e=b.tag=$k(d);a=Lg(d,a);switch(e){case 0:b=dj(null,b,d,a,c);break a;case 1:b=ij(null,b,d,a,c);break a;case 11:b=Zi(null,b,d,a,c);break a;case 14:b=aj(null,b,d,Lg(d.type,a),c);break a}throw Error(p(306,\nd,\"\"));}return b;case 0:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:Lg(d,e),dj(a,b,d,e,c);case 1:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:Lg(d,e),ij(a,b,d,e,c);case 3:a:{lj(b);if(null===a)throw Error(p(387));d=b.pendingProps;f=b.memoizedState;e=f.element;bh(a,b);gh(b,d,null,c);var g=b.memoizedState;d=g.element;if(f.isDehydrated)if(f={element:d,isDehydrated:!1,cache:g.cache,pendingSuspenseBoundaries:g.pendingSuspenseBoundaries,transitions:g.transitions},b.updateQueue.baseState=\nf,b.memoizedState=f,b.flags&256){e=Ki(Error(p(423)),b);b=mj(a,b,d,c,e);break a}else if(d!==e){e=Ki(Error(p(424)),b);b=mj(a,b,d,c,e);break a}else for(yg=Lf(b.stateNode.containerInfo.firstChild),xg=b,I=!0,zg=null,c=Ch(b,null,d,c),b.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{Ig();if(d===e){b=$i(a,b,c);break a}Yi(a,b,d,c)}b=b.child}return b;case 5:return Kh(b),null===a&&Eg(b),d=b.type,e=b.pendingProps,f=null!==a?a.memoizedProps:null,g=e.children,Ef(d,e)?g=null:null!==f&&Ef(d,f)&&(b.flags|=32),\nhj(a,b),Yi(a,b,g,c),b.child;case 6:return null===a&&Eg(b),null;case 13:return pj(a,b,c);case 4:return Ih(b,b.stateNode.containerInfo),d=b.pendingProps,null===a?b.child=Bh(b,null,d,c):Yi(a,b,d,c),b.child;case 11:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:Lg(d,e),Zi(a,b,d,e,c);case 7:return Yi(a,b,b.pendingProps,c),b.child;case 8:return Yi(a,b,b.pendingProps.children,c),b.child;case 12:return Yi(a,b,b.pendingProps.children,c),b.child;case 10:a:{d=b.type._context;e=b.pendingProps;f=b.memoizedProps;\ng=e.value;G(Mg,d._currentValue);d._currentValue=g;if(null!==f)if(He(f.value,g)){if(f.children===e.children&&!Wf.current){b=$i(a,b,c);break a}}else for(f=b.child,null!==f&&(f.return=b);null!==f;){var h=f.dependencies;if(null!==h){g=f.child;for(var k=h.firstContext;null!==k;){if(k.context===d){if(1===f.tag){k=ch(-1,c&-c);k.tag=2;var l=f.updateQueue;if(null!==l){l=l.shared;var m=l.pending;null===m?k.next=k:(k.next=m.next,m.next=k);l.pending=k}}f.lanes|=c;k=f.alternate;null!==k&&(k.lanes|=c);Sg(f.return,\nc,b);h.lanes|=c;break}k=k.next}}else if(10===f.tag)g=f.type===b.type?null:f.child;else if(18===f.tag){g=f.return;if(null===g)throw Error(p(341));g.lanes|=c;h=g.alternate;null!==h&&(h.lanes|=c);Sg(g,c,b);g=f.sibling}else g=f.child;if(null!==g)g.return=f;else for(g=f;null!==g;){if(g===b){g=null;break}f=g.sibling;if(null!==f){f.return=g.return;g=f;break}g=g.return}f=g}Yi(a,b,e.children,c);b=b.child}return b;case 9:return e=b.type,d=b.pendingProps.children,Tg(b,c),e=Vg(e),d=d(e),b.flags|=1,Yi(a,b,d,c),\nb.child;case 14:return d=b.type,e=Lg(d,b.pendingProps),e=Lg(d.type,e),aj(a,b,d,e,c);case 15:return cj(a,b,b.type,b.pendingProps,c);case 17:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:Lg(d,e),jj(a,b),b.tag=1,Zf(d)?(a=!0,cg(b)):a=!1,Tg(b,c),ph(b,d,e),rh(b,d,e,c),kj(null,b,d,!0,a,c);case 19:return yj(a,b,c);case 22:return ej(a,b,c)}throw Error(p(156,b.tag));};function Gk(a,b){return ac(a,b)}\nfunction al(a,b,c,d){this.tag=a;this.key=c;this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null;this.index=0;this.ref=null;this.pendingProps=b;this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null;this.mode=d;this.subtreeFlags=this.flags=0;this.deletions=null;this.childLanes=this.lanes=0;this.alternate=null}function Bg(a,b,c,d){return new al(a,b,c,d)}function bj(a){a=a.prototype;return!(!a||!a.isReactComponent)}\nfunction $k(a){if(\"function\"===typeof a)return bj(a)?1:0;if(void 0!==a&&null!==a){a=a.$$typeof;if(a===Da)return 11;if(a===Ga)return 14}return 2}\nfunction wh(a,b){var c=a.alternate;null===c?(c=Bg(a.tag,b,a.key,a.mode),c.elementType=a.elementType,c.type=a.type,c.stateNode=a.stateNode,c.alternate=a,a.alternate=c):(c.pendingProps=b,c.type=a.type,c.flags=0,c.subtreeFlags=0,c.deletions=null);c.flags=a.flags&14680064;c.childLanes=a.childLanes;c.lanes=a.lanes;c.child=a.child;c.memoizedProps=a.memoizedProps;c.memoizedState=a.memoizedState;c.updateQueue=a.updateQueue;b=a.dependencies;c.dependencies=null===b?null:{lanes:b.lanes,firstContext:b.firstContext};\nc.sibling=a.sibling;c.index=a.index;c.ref=a.ref;return c}\nfunction yh(a,b,c,d,e,f){var g=2;d=a;if(\"function\"===typeof a)bj(a)&&(g=1);else if(\"string\"===typeof a)g=5;else a:switch(a){case ya:return Ah(c.children,e,f,b);case za:g=8;e|=8;break;case Aa:return a=Bg(12,c,b,e|2),a.elementType=Aa,a.lanes=f,a;case Ea:return a=Bg(13,c,b,e),a.elementType=Ea,a.lanes=f,a;case Fa:return a=Bg(19,c,b,e),a.elementType=Fa,a.lanes=f,a;case Ia:return qj(c,e,f,b);default:if(\"object\"===typeof a&&null!==a)switch(a.$$typeof){case Ba:g=10;break a;case Ca:g=9;break a;case Da:g=11;\nbreak a;case Ga:g=14;break a;case Ha:g=16;d=null;break a}throw Error(p(130,null==a?a:typeof a,\"\"));}b=Bg(g,c,b,e);b.elementType=a;b.type=d;b.lanes=f;return b}function Ah(a,b,c,d){a=Bg(7,a,d,b);a.lanes=c;return a}function qj(a,b,c,d){a=Bg(22,a,d,b);a.elementType=Ia;a.lanes=c;a.stateNode={isHidden:!1};return a}function xh(a,b,c){a=Bg(6,a,null,b);a.lanes=c;return a}\nfunction zh(a,b,c){b=Bg(4,null!==a.children?a.children:[],a.key,b);b.lanes=c;b.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation};return b}\nfunction bl(a,b,c,d,e){this.tag=b;this.containerInfo=a;this.finishedWork=this.pingCache=this.current=this.pendingChildren=null;this.timeoutHandle=-1;this.callbackNode=this.pendingContext=this.context=null;this.callbackPriority=0;this.eventTimes=zc(0);this.expirationTimes=zc(-1);this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0;this.entanglements=zc(0);this.identifierPrefix=d;this.onRecoverableError=e;this.mutableSourceEagerHydrationData=\nnull}function cl(a,b,c,d,e,f,g,h,k){a=new bl(a,b,c,h,k);1===b?(b=1,!0===f&&(b|=8)):b=0;f=Bg(3,null,null,b);a.current=f;f.stateNode=a;f.memoizedState={element:d,isDehydrated:c,cache:null,transitions:null,pendingSuspenseBoundaries:null};ah(f);return a}function dl(a,b,c){var d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:wa,key:null==d?null:\"\"+d,children:a,containerInfo:b,implementation:c}}\nfunction el(a){if(!a)return Vf;a=a._reactInternals;a:{if(Vb(a)!==a||1!==a.tag)throw Error(p(170));var b=a;do{switch(b.tag){case 3:b=b.stateNode.context;break a;case 1:if(Zf(b.type)){b=b.stateNode.__reactInternalMemoizedMergedChildContext;break a}}b=b.return}while(null!==b);throw Error(p(171));}if(1===a.tag){var c=a.type;if(Zf(c))return bg(a,c,b)}return b}\nfunction fl(a,b,c,d,e,f,g,h,k){a=cl(c,d,!0,a,e,f,g,h,k);a.context=el(null);c=a.current;d=L();e=lh(c);f=ch(d,e);f.callback=void 0!==b&&null!==b?b:null;dh(c,f,e);a.current.lanes=e;Ac(a,e,d);Ek(a,d);return a}function gl(a,b,c,d){var e=b.current,f=L(),g=lh(e);c=el(c);null===b.context?b.context=c:b.pendingContext=c;b=ch(f,g);b.payload={element:a};d=void 0===d?null:d;null!==d&&(b.callback=d);a=dh(e,b,g);null!==a&&(mh(a,e,g,f),eh(a,e,g));return g}\nfunction hl(a){a=a.current;if(!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function il(a,b){a=a.memoizedState;if(null!==a&&null!==a.dehydrated){var c=a.retryLane;a.retryLane=0!==c&&c<b?c:b}}function jl(a,b){il(a,b);(a=a.alternate)&&il(a,b)}function kl(){return null}var ll=\"function\"===typeof reportError?reportError:function(a){console.error(a)};function ml(a){this._internalRoot=a}\nnl.prototype.render=ml.prototype.render=function(a){var b=this._internalRoot;if(null===b)throw Error(p(409));gl(a,b,null,null)};nl.prototype.unmount=ml.prototype.unmount=function(){var a=this._internalRoot;if(null!==a){this._internalRoot=null;var b=a.containerInfo;Sk(function(){gl(null,a,null,null)});b[uf]=null}};function nl(a){this._internalRoot=a}\nnl.prototype.unstable_scheduleHydration=function(a){if(a){var b=Hc();a={blockedOn:null,target:a,priority:b};for(var c=0;c<Qc.length&&0!==b&&b<Qc[c].priority;c++);Qc.splice(c,0,a);0===c&&Vc(a)}};function ol(a){return!(!a||1!==a.nodeType&&9!==a.nodeType&&11!==a.nodeType)}function pl(a){return!(!a||1!==a.nodeType&&9!==a.nodeType&&11!==a.nodeType&&(8!==a.nodeType||\" react-mount-point-unstable \"!==a.nodeValue))}function ql(){}\nfunction rl(a,b,c,d,e){if(e){if(\"function\"===typeof d){var f=d;d=function(){var a=hl(g);f.call(a)}}var g=fl(b,d,a,0,null,!1,!1,\"\",ql);a._reactRootContainer=g;a[uf]=g.current;sf(8===a.nodeType?a.parentNode:a);Sk();return g}for(;e=a.lastChild;)a.removeChild(e);if(\"function\"===typeof d){var h=d;d=function(){var a=hl(k);h.call(a)}}var k=cl(a,0,!1,null,null,!1,!1,\"\",ql);a._reactRootContainer=k;a[uf]=k.current;sf(8===a.nodeType?a.parentNode:a);Sk(function(){gl(b,k,c,d)});return k}\nfunction sl(a,b,c,d,e){var f=c._reactRootContainer;if(f){var g=f;if(\"function\"===typeof e){var h=e;e=function(){var a=hl(g);h.call(a)}}gl(b,g,a,e)}else g=rl(c,b,a,e,d);return hl(g)}Ec=function(a){switch(a.tag){case 3:var b=a.stateNode;if(b.current.memoizedState.isDehydrated){var c=tc(b.pendingLanes);0!==c&&(Cc(b,c|1),Ek(b,B()),0===(K&6)&&(Hj=B()+500,jg()))}break;case 13:Sk(function(){var b=Zg(a,1);if(null!==b){var c=L();mh(b,a,1,c)}}),jl(a,1)}};\nFc=function(a){if(13===a.tag){var b=Zg(a,134217728);if(null!==b){var c=L();mh(b,a,134217728,c)}jl(a,134217728)}};Gc=function(a){if(13===a.tag){var b=lh(a),c=Zg(a,b);if(null!==c){var d=L();mh(c,a,b,d)}jl(a,b)}};Hc=function(){return C};Ic=function(a,b){var c=C;try{return C=a,b()}finally{C=c}};\nyb=function(a,b,c){switch(b){case \"input\":bb(a,c);b=c.name;if(\"radio\"===c.type&&null!=b){for(c=a;c.parentNode;)c=c.parentNode;c=c.querySelectorAll(\"input[name=\"+JSON.stringify(\"\"+b)+'][type=\"radio\"]');for(b=0;b<c.length;b++){var d=c[b];if(d!==a&&d.form===a.form){var e=Db(d);if(!e)throw Error(p(90));Wa(d);bb(d,e)}}}break;case \"textarea\":ib(a,c);break;case \"select\":b=c.value,null!=b&&fb(a,!!c.multiple,b,!1)}};Gb=Rk;Hb=Sk;\nvar tl={usingClientEntryPoint:!1,Events:[Cb,ue,Db,Eb,Fb,Rk]},ul={findFiberByHostInstance:Wc,bundleType:0,version:\"18.2.0\",rendererPackageName:\"react-dom\"};\nvar vl={bundleType:ul.bundleType,version:ul.version,rendererPackageName:ul.rendererPackageName,rendererConfig:ul.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){a=Zb(a);return null===a?null:a.stateNode},findFiberByHostInstance:ul.findFiberByHostInstance||\nkl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:\"18.2.0-next-9e3b772b8-20220608\"};if(\"undefined\"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var wl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wl.isDisabled&&wl.supportsFiber)try{kc=wl.inject(vl),lc=wl}catch(a){}}exports.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl;\nexports.createPortal=function(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!ol(b))throw Error(p(200));return dl(a,b,null,c)};exports.createRoot=function(a,b){if(!ol(a))throw Error(p(299));var c=!1,d=\"\",e=ll;null!==b&&void 0!==b&&(!0===b.unstable_strictMode&&(c=!0),void 0!==b.identifierPrefix&&(d=b.identifierPrefix),void 0!==b.onRecoverableError&&(e=b.onRecoverableError));b=cl(a,1,!1,null,null,c,!1,d,e);a[uf]=b.current;sf(8===a.nodeType?a.parentNode:a);return new ml(b)};\nexports.findDOMNode=function(a){if(null==a)return null;if(1===a.nodeType)return a;var b=a._reactInternals;if(void 0===b){if(\"function\"===typeof a.render)throw Error(p(188));a=Object.keys(a).join(\",\");throw Error(p(268,a));}a=Zb(b);a=null===a?null:a.stateNode;return a};exports.flushSync=function(a){return Sk(a)};exports.hydrate=function(a,b,c){if(!pl(b))throw Error(p(200));return sl(null,a,b,!0,c)};\nexports.hydrateRoot=function(a,b,c){if(!ol(a))throw Error(p(405));var d=null!=c&&c.hydratedSources||null,e=!1,f=\"\",g=ll;null!==c&&void 0!==c&&(!0===c.unstable_strictMode&&(e=!0),void 0!==c.identifierPrefix&&(f=c.identifierPrefix),void 0!==c.onRecoverableError&&(g=c.onRecoverableError));b=fl(b,null,a,1,null!=c?c:null,e,!1,f,g);a[uf]=b.current;sf(a);if(d)for(a=0;a<d.length;a++)c=d[a],e=c._getVersion,e=e(c._source),null==b.mutableSourceEagerHydrationData?b.mutableSourceEagerHydrationData=[c,e]:b.mutableSourceEagerHydrationData.push(c,\ne);return new nl(b)};exports.render=function(a,b,c){if(!pl(b))throw Error(p(200));return sl(null,a,b,!1,c)};exports.unmountComponentAtNode=function(a){if(!pl(a))throw Error(p(40));return a._reactRootContainer?(Sk(function(){sl(null,null,a,!1,function(){a._reactRootContainer=null;a[uf]=null})}),!0):!1};exports.unstable_batchedUpdates=Rk;\nexports.unstable_renderSubtreeIntoContainer=function(a,b,c,d){if(!pl(c))throw Error(p(200));if(null==a||void 0===a._reactInternals)throw Error(p(38));return sl(a,b,c,!1,d)};exports.version=\"18.2.0-next-9e3b772b8-20220608\";\n","'use strict';\n\nvar m = require('react-dom');\nif (process.env.NODE_ENV === 'production') {\n  exports.createRoot = m.createRoot;\n  exports.hydrateRoot = m.hydrateRoot;\n} else {\n  var i = m.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\n  exports.createRoot = function(c, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.createRoot(c, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n  exports.hydrateRoot = function(c, h, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.hydrateRoot(c, h, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n}\n","'use strict';\n\nfunction checkDCE() {\n  /* global __REACT_DEVTOOLS_GLOBAL_HOOK__ */\n  if (\n    typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ === 'undefined' ||\n    typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE !== 'function'\n  ) {\n    return;\n  }\n  if (process.env.NODE_ENV !== 'production') {\n    // This branch is unreachable because this function is only called\n    // in production, but the condition is true only in development.\n    // Therefore if the branch is still here, dead code elimination wasn't\n    // properly applied.\n    // Don't change the message. React DevTools relies on it. Also make sure\n    // this message doesn't occur elsewhere in this function, or it will cause\n    // a false positive.\n    throw new Error('^_^');\n  }\n  try {\n    // Verify that the code above has been dead code eliminated (DCE'd).\n    __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE);\n  } catch (err) {\n    // DevTools shouldn't crash React, no matter what.\n    // We should still report in case we break this code.\n    console.error(err);\n  }\n}\n\nif (process.env.NODE_ENV === 'production') {\n  // DCE check should happen before ReactDOM bundle executes so that\n  // DevTools can report bad minification during injection.\n  checkDCE();\n  module.exports = require('./cjs/react-dom.production.min.js');\n} else {\n  module.exports = require('./cjs/react-dom.development.js');\n}\n","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"react\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"react\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"MediaQuery\"] = factory(require(\"react\"));\n\telse\n\t\troot[\"MediaQuery\"] = factory(root[\"React\"]);\n})(this, (__WEBPACK_EXTERNAL_MODULE_react__) => {\nreturn ","/*\nCopyright (c) 2014, Yahoo! Inc. All rights reserved.\nCopyrights licensed under the New BSD License.\nSee the accompanying LICENSE file for terms.\n*/\n\n'use strict';\n\nexports.match = matchQuery;\nexports.parse = parseQuery;\n\n// -----------------------------------------------------------------------------\n\nvar RE_MEDIA_QUERY     = /(?:(only|not)?\\s*([^\\s\\(\\)]+)(?:\\s*and)?\\s*)?(.+)?/i,\n    RE_MQ_EXPRESSION   = /\\(\\s*([^\\s\\:\\)]+)\\s*(?:\\:\\s*([^\\s\\)]+))?\\s*\\)/,\n    RE_MQ_FEATURE      = /^(?:(min|max)-)?(.+)/,\n    RE_LENGTH_UNIT     = /(em|rem|px|cm|mm|in|pt|pc)?$/,\n    RE_RESOLUTION_UNIT = /(dpi|dpcm|dppx)?$/;\n\nfunction matchQuery(mediaQuery, values) {\n    return parseQuery(mediaQuery).some(function (query) {\n        var inverse = query.inverse;\n\n        // Either the parsed or specified `type` is \"all\", or the types must be\n        // equal for a match.\n        var typeMatch = query.type === 'all' || values.type === query.type;\n\n        // Quit early when `type` doesn't match, but take \"not\" into account.\n        if ((typeMatch && inverse) || !(typeMatch || inverse)) {\n            return false;\n        }\n\n        var expressionsMatch = query.expressions.every(function (expression) {\n            var feature  = expression.feature,\n                modifier = expression.modifier,\n                expValue = expression.value,\n                value    = values[feature];\n\n            // Missing or falsy values don't match.\n            if (!value) { return false; }\n\n            switch (feature) {\n                case 'orientation':\n                case 'scan':\n                    return value.toLowerCase() === expValue.toLowerCase();\n\n                case 'width':\n                case 'height':\n                case 'device-width':\n                case 'device-height':\n                    expValue = toPx(expValue);\n                    value    = toPx(value);\n                    break;\n\n                case 'resolution':\n                    expValue = toDpi(expValue);\n                    value    = toDpi(value);\n                    break;\n\n                case 'aspect-ratio':\n                case 'device-aspect-ratio':\n                case /* Deprecated */ 'device-pixel-ratio':\n                    expValue = toDecimal(expValue);\n                    value    = toDecimal(value);\n                    break;\n\n                case 'grid':\n                case 'color':\n                case 'color-index':\n                case 'monochrome':\n                    expValue = parseInt(expValue, 10) || 1;\n                    value    = parseInt(value, 10) || 0;\n                    break;\n            }\n\n            switch (modifier) {\n                case 'min': return value >= expValue;\n                case 'max': return value <= expValue;\n                default   : return value === expValue;\n            }\n        });\n\n        return (expressionsMatch && !inverse) || (!expressionsMatch && inverse);\n    });\n}\n\nfunction parseQuery(mediaQuery) {\n    return mediaQuery.split(',').map(function (query) {\n        query = query.trim();\n\n        var captures    = query.match(RE_MEDIA_QUERY),\n            modifier    = captures[1],\n            type        = captures[2],\n            expressions = captures[3] || '',\n            parsed      = {};\n\n        parsed.inverse = !!modifier && modifier.toLowerCase() === 'not';\n        parsed.type    = type ? type.toLowerCase() : 'all';\n\n        // Split expressions into a list.\n        expressions = expressions.match(/\\([^\\)]+\\)/g) || [];\n\n        parsed.expressions = expressions.map(function (expression) {\n            var captures = expression.match(RE_MQ_EXPRESSION),\n                feature  = captures[1].toLowerCase().match(RE_MQ_FEATURE);\n\n            return {\n                modifier: feature[1],\n                feature : feature[2],\n                value   : captures[2]\n            };\n        });\n\n        return parsed;\n    });\n}\n\n// -- Utilities ----------------------------------------------------------------\n\nfunction toDecimal(ratio) {\n    var decimal = Number(ratio),\n        numbers;\n\n    if (!decimal) {\n        numbers = ratio.match(/^(\\d+)\\s*\\/\\s*(\\d+)$/);\n        decimal = numbers[1] / numbers[2];\n    }\n\n    return decimal;\n}\n\nfunction toDpi(resolution) {\n    var value = parseFloat(resolution),\n        units = String(resolution).match(RE_RESOLUTION_UNIT)[1];\n\n    switch (units) {\n        case 'dpcm': return value / 2.54;\n        case 'dppx': return value * 96;\n        default    : return value;\n    }\n}\n\nfunction toPx(length) {\n    var value = parseFloat(length),\n        units = String(length).match(RE_LENGTH_UNIT)[1];\n\n    switch (units) {\n        case 'em' : return value * 16;\n        case 'rem': return value * 16;\n        case 'cm' : return value * 96 / 2.54;\n        case 'mm' : return value * 96 / 2.54 / 10;\n        case 'in' : return value * 96;\n        case 'pt' : return value * 72;\n        case 'pc' : return value * 72 / 12;\n        default   : return value;\n    }\n}\n","/* eslint-disable no-var, prefer-template */\nvar uppercasePattern = /[A-Z]/g\nvar msPattern = /^ms-/\nvar cache = {}\n\nfunction toHyphenLower(match) {\n  return '-' + match.toLowerCase()\n}\n\nfunction hyphenateStyleName(name) {\n  if (cache.hasOwnProperty(name)) {\n    return cache[name]\n  }\n\n  var hName = name.replace(uppercasePattern, toHyphenLower)\n  return (cache[name] = msPattern.test(hName) ? '-' + hName : hName)\n}\n\nexport default hyphenateStyleName\n","'use strict';\n\nvar staticMatch = require('css-mediaquery').match;\nvar dynamicMatch = typeof window !== 'undefined' ? window.matchMedia : null;\n\n// our fake MediaQueryList\nfunction Mql(query, values, forceStatic){\n  var self = this;\n  if(dynamicMatch && !forceStatic){\n    var mql = dynamicMatch.call(window, query);\n    this.matches = mql.matches;\n    this.media = mql.media;\n    // TODO: is there a time it makes sense to remove this listener?\n    mql.addListener(update);\n  } else {\n    this.matches = staticMatch(query, values);\n    this.media = query;\n  }\n\n  this.addListener = addListener;\n  this.removeListener = removeListener;\n  this.dispose = dispose;\n\n  function addListener(listener){\n    if(mql){\n      mql.addListener(listener);\n    }\n  }\n\n  function removeListener(listener){\n    if(mql){\n      mql.removeListener(listener);\n    }\n  }\n\n  // update ourselves!\n  function update(evt){\n    self.matches = evt.matches;\n    self.media = evt.media;\n  }\n\n  function dispose(){\n    if(mql){\n      mql.removeListener(update);\n    }\n  }\n}\n\nfunction matchMedia(query, values, forceStatic){\n  return new Mql(query, values, forceStatic);\n}\n\nmodule.exports = matchMedia;\n","/*\nobject-assign\n(c) Sindre Sorhus\n@license MIT\n*/\n\n'use strict';\n/* eslint-disable no-unused-vars */\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n\tif (val === null || val === undefined) {\n\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nfunction shouldUseNative() {\n\ttry {\n\t\tif (!Object.assign) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Detect buggy property enumeration order in older V8 versions.\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\t\tvar test1 = new String('abc');  // eslint-disable-line no-new-wrappers\n\t\ttest1[5] = 'de';\n\t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test2 = {};\n\t\tfor (var i = 0; i < 10; i++) {\n\t\t\ttest2['_' + String.fromCharCode(i)] = i;\n\t\t}\n\t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n\t\t\treturn test2[n];\n\t\t});\n\t\tif (order2.join('') !== '0123456789') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test3 = {};\n\t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n\t\t\ttest3[letter] = letter;\n\t\t});\n\t\tif (Object.keys(Object.assign({}, test3)).join('') !==\n\t\t\t\t'abcdefghijklmnopqrst') {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t} catch (err) {\n\t\t// We don't expect any of the above to throw, but better to be safe.\n\t\treturn false;\n\t}\n}\n\nmodule.exports = shouldUseNative() ? Object.assign : function (target, source) {\n\tvar from;\n\tvar to = toObject(target);\n\tvar symbols;\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tfrom = Object(arguments[s]);\n\n\t\tfor (var key in from) {\n\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\tto[key] = from[key];\n\t\t\t}\n\t\t}\n\n\t\tif (getOwnPropertySymbols) {\n\t\t\tsymbols = getOwnPropertySymbols(from);\n\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to;\n};\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar printWarning = function() {};\n\nif (process.env.NODE_ENV !== 'production') {\n  var ReactPropTypesSecret = require('./lib/ReactPropTypesSecret');\n  var loggedTypeFailures = {};\n  var has = require('./lib/has');\n\n  printWarning = function(text) {\n    var message = 'Warning: ' + text;\n    if (typeof console !== 'undefined') {\n      console.error(message);\n    }\n    try {\n      // --- Welcome to debugging React ---\n      // This error was thrown as a convenience so that you can use this stack\n      // to find the callsite that caused this warning to fire.\n      throw new Error(message);\n    } catch (x) { /**/ }\n  };\n}\n\n/**\n * Assert that the values match with the type specs.\n * Error messages are memorized and will only be shown once.\n *\n * @param {object} typeSpecs Map of name to a ReactPropType\n * @param {object} values Runtime values that need to be type-checked\n * @param {string} location e.g. \"prop\", \"context\", \"child context\"\n * @param {string} componentName Name of the component for error messages.\n * @param {?Function} getStack Returns the component stack.\n * @private\n */\nfunction checkPropTypes(typeSpecs, values, location, componentName, getStack) {\n  if (process.env.NODE_ENV !== 'production') {\n    for (var typeSpecName in typeSpecs) {\n      if (has(typeSpecs, typeSpecName)) {\n        var error;\n        // Prop type validation may throw. In case they do, we don't want to\n        // fail the render phase where it didn't fail before. So we log it.\n        // After these have been cleaned up, we'll let them throw.\n        try {\n          // This is intentionally an invariant that gets caught. It's the same\n          // behavior as without this statement except with a better message.\n          if (typeof typeSpecs[typeSpecName] !== 'function') {\n            var err = Error(\n              (componentName || 'React class') + ': ' + location + ' type `' + typeSpecName + '` is invalid; ' +\n              'it must be a function, usually from the `prop-types` package, but received `' + typeof typeSpecs[typeSpecName] + '`.' +\n              'This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.'\n            );\n            err.name = 'Invariant Violation';\n            throw err;\n          }\n          error = typeSpecs[typeSpecName](values, typeSpecName, componentName, location, null, ReactPropTypesSecret);\n        } catch (ex) {\n          error = ex;\n        }\n        if (error && !(error instanceof Error)) {\n          printWarning(\n            (componentName || 'React class') + ': type specification of ' +\n            location + ' `' + typeSpecName + '` is invalid; the type checker ' +\n            'function must return `null` or an `Error` but returned a ' + typeof error + '. ' +\n            'You may have forgotten to pass an argument to the type checker ' +\n            'creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and ' +\n            'shape all require an argument).'\n          );\n        }\n        if (error instanceof Error && !(error.message in loggedTypeFailures)) {\n          // Only monitor this failure once because there tends to be a lot of the\n          // same error.\n          loggedTypeFailures[error.message] = true;\n\n          var stack = getStack ? getStack() : '';\n\n          printWarning(\n            'Failed ' + location + ' type: ' + error.message + (stack != null ? stack : '')\n          );\n        }\n      }\n    }\n  }\n}\n\n/**\n * Resets warning cache when testing.\n *\n * @private\n */\ncheckPropTypes.resetWarningCache = function() {\n  if (process.env.NODE_ENV !== 'production') {\n    loggedTypeFailures = {};\n  }\n}\n\nmodule.exports = checkPropTypes;\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactIs = require('react-is');\nvar assign = require('object-assign');\n\nvar ReactPropTypesSecret = require('./lib/ReactPropTypesSecret');\nvar has = require('./lib/has');\nvar checkPropTypes = require('./checkPropTypes');\n\nvar printWarning = function() {};\n\nif (process.env.NODE_ENV !== 'production') {\n  printWarning = function(text) {\n    var message = 'Warning: ' + text;\n    if (typeof console !== 'undefined') {\n      console.error(message);\n    }\n    try {\n      // --- Welcome to debugging React ---\n      // This error was thrown as a convenience so that you can use this stack\n      // to find the callsite that caused this warning to fire.\n      throw new Error(message);\n    } catch (x) {}\n  };\n}\n\nfunction emptyFunctionThatReturnsNull() {\n  return null;\n}\n\nmodule.exports = function(isValidElement, throwOnDirectAccess) {\n  /* global Symbol */\n  var ITERATOR_SYMBOL = typeof Symbol === 'function' && Symbol.iterator;\n  var FAUX_ITERATOR_SYMBOL = '@@iterator'; // Before Symbol spec.\n\n  /**\n   * Returns the iterator method function contained on the iterable object.\n   *\n   * Be sure to invoke the function with the iterable as context:\n   *\n   *     var iteratorFn = getIteratorFn(myIterable);\n   *     if (iteratorFn) {\n   *       var iterator = iteratorFn.call(myIterable);\n   *       ...\n   *     }\n   *\n   * @param {?object} maybeIterable\n   * @return {?function}\n   */\n  function getIteratorFn(maybeIterable) {\n    var iteratorFn = maybeIterable && (ITERATOR_SYMBOL && maybeIterable[ITERATOR_SYMBOL] || maybeIterable[FAUX_ITERATOR_SYMBOL]);\n    if (typeof iteratorFn === 'function') {\n      return iteratorFn;\n    }\n  }\n\n  /**\n   * Collection of methods that allow declaration and validation of props that are\n   * supplied to React components. Example usage:\n   *\n   *   var Props = require('ReactPropTypes');\n   *   var MyArticle = React.createClass({\n   *     propTypes: {\n   *       // An optional string prop named \"description\".\n   *       description: Props.string,\n   *\n   *       // A required enum prop named \"category\".\n   *       category: Props.oneOf(['News','Photos']).isRequired,\n   *\n   *       // A prop named \"dialog\" that requires an instance of Dialog.\n   *       dialog: Props.instanceOf(Dialog).isRequired\n   *     },\n   *     render: function() { ... }\n   *   });\n   *\n   * A more formal specification of how these methods are used:\n   *\n   *   type := array|bool|func|object|number|string|oneOf([...])|instanceOf(...)\n   *   decl := ReactPropTypes.{type}(.isRequired)?\n   *\n   * Each and every declaration produces a function with the same signature. This\n   * allows the creation of custom validation functions. For example:\n   *\n   *  var MyLink = React.createClass({\n   *    propTypes: {\n   *      // An optional string or URI prop named \"href\".\n   *      href: function(props, propName, componentName) {\n   *        var propValue = props[propName];\n   *        if (propValue != null && typeof propValue !== 'string' &&\n   *            !(propValue instanceof URI)) {\n   *          return new Error(\n   *            'Expected a string or an URI for ' + propName + ' in ' +\n   *            componentName\n   *          );\n   *        }\n   *      }\n   *    },\n   *    render: function() {...}\n   *  });\n   *\n   * @internal\n   */\n\n  var ANONYMOUS = '<<anonymous>>';\n\n  // Important!\n  // Keep this list in sync with production version in `./factoryWithThrowingShims.js`.\n  var ReactPropTypes = {\n    array: createPrimitiveTypeChecker('array'),\n    bigint: createPrimitiveTypeChecker('bigint'),\n    bool: createPrimitiveTypeChecker('boolean'),\n    func: createPrimitiveTypeChecker('function'),\n    number: createPrimitiveTypeChecker('number'),\n    object: createPrimitiveTypeChecker('object'),\n    string: createPrimitiveTypeChecker('string'),\n    symbol: createPrimitiveTypeChecker('symbol'),\n\n    any: createAnyTypeChecker(),\n    arrayOf: createArrayOfTypeChecker,\n    element: createElementTypeChecker(),\n    elementType: createElementTypeTypeChecker(),\n    instanceOf: createInstanceTypeChecker,\n    node: createNodeChecker(),\n    objectOf: createObjectOfTypeChecker,\n    oneOf: createEnumTypeChecker,\n    oneOfType: createUnionTypeChecker,\n    shape: createShapeTypeChecker,\n    exact: createStrictShapeTypeChecker,\n  };\n\n  /**\n   * inlined Object.is polyfill to avoid requiring consumers ship their own\n   * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is\n   */\n  /*eslint-disable no-self-compare*/\n  function is(x, y) {\n    // SameValue algorithm\n    if (x === y) {\n      // Steps 1-5, 7-10\n      // Steps 6.b-6.e: +0 != -0\n      return x !== 0 || 1 / x === 1 / y;\n    } else {\n      // Step 6.a: NaN == NaN\n      return x !== x && y !== y;\n    }\n  }\n  /*eslint-enable no-self-compare*/\n\n  /**\n   * We use an Error-like object for backward compatibility as people may call\n   * PropTypes directly and inspect their output. However, we don't use real\n   * Errors anymore. We don't inspect their stack anyway, and creating them\n   * is prohibitively expensive if they are created too often, such as what\n   * happens in oneOfType() for any type before the one that matched.\n   */\n  function PropTypeError(message, data) {\n    this.message = message;\n    this.data = data && typeof data === 'object' ? data: {};\n    this.stack = '';\n  }\n  // Make `instanceof Error` still work for returned errors.\n  PropTypeError.prototype = Error.prototype;\n\n  function createChainableTypeChecker(validate) {\n    if (process.env.NODE_ENV !== 'production') {\n      var manualPropTypeCallCache = {};\n      var manualPropTypeWarningCount = 0;\n    }\n    function checkType(isRequired, props, propName, componentName, location, propFullName, secret) {\n      componentName = componentName || ANONYMOUS;\n      propFullName = propFullName || propName;\n\n      if (secret !== ReactPropTypesSecret) {\n        if (throwOnDirectAccess) {\n          // New behavior only for users of `prop-types` package\n          var err = new Error(\n            'Calling PropTypes validators directly is not supported by the `prop-types` package. ' +\n            'Use `PropTypes.checkPropTypes()` to call them. ' +\n            'Read more at http://fb.me/use-check-prop-types'\n          );\n          err.name = 'Invariant Violation';\n          throw err;\n        } else if (process.env.NODE_ENV !== 'production' && typeof console !== 'undefined') {\n          // Old behavior for people using React.PropTypes\n          var cacheKey = componentName + ':' + propName;\n          if (\n            !manualPropTypeCallCache[cacheKey] &&\n            // Avoid spamming the console because they are often not actionable except for lib authors\n            manualPropTypeWarningCount < 3\n          ) {\n            printWarning(\n              'You are manually calling a React.PropTypes validation ' +\n              'function for the `' + propFullName + '` prop on `' + componentName + '`. This is deprecated ' +\n              'and will throw in the standalone `prop-types` package. ' +\n              'You may be seeing this warning due to a third-party PropTypes ' +\n              'library. See https://fb.me/react-warning-dont-call-proptypes ' + 'for details.'\n            );\n            manualPropTypeCallCache[cacheKey] = true;\n            manualPropTypeWarningCount++;\n          }\n        }\n      }\n      if (props[propName] == null) {\n        if (isRequired) {\n          if (props[propName] === null) {\n            return new PropTypeError('The ' + location + ' `' + propFullName + '` is marked as required ' + ('in `' + componentName + '`, but its value is `null`.'));\n          }\n          return new PropTypeError('The ' + location + ' `' + propFullName + '` is marked as required in ' + ('`' + componentName + '`, but its value is `undefined`.'));\n        }\n        return null;\n      } else {\n        return validate(props, propName, componentName, location, propFullName);\n      }\n    }\n\n    var chainedCheckType = checkType.bind(null, false);\n    chainedCheckType.isRequired = checkType.bind(null, true);\n\n    return chainedCheckType;\n  }\n\n  function createPrimitiveTypeChecker(expectedType) {\n    function validate(props, propName, componentName, location, propFullName, secret) {\n      var propValue = props[propName];\n      var propType = getPropType(propValue);\n      if (propType !== expectedType) {\n        // `propValue` being instance of, say, date/regexp, pass the 'object'\n        // check, but we can offer a more precise error message here rather than\n        // 'of type `object`'.\n        var preciseType = getPreciseType(propValue);\n\n        return new PropTypeError(\n          'Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + preciseType + '` supplied to `' + componentName + '`, expected ') + ('`' + expectedType + '`.'),\n          {expectedType: expectedType}\n        );\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createAnyTypeChecker() {\n    return createChainableTypeChecker(emptyFunctionThatReturnsNull);\n  }\n\n  function createArrayOfTypeChecker(typeChecker) {\n    function validate(props, propName, componentName, location, propFullName) {\n      if (typeof typeChecker !== 'function') {\n        return new PropTypeError('Property `' + propFullName + '` of component `' + componentName + '` has invalid PropType notation inside arrayOf.');\n      }\n      var propValue = props[propName];\n      if (!Array.isArray(propValue)) {\n        var propType = getPropType(propValue);\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + propType + '` supplied to `' + componentName + '`, expected an array.'));\n      }\n      for (var i = 0; i < propValue.length; i++) {\n        var error = typeChecker(propValue, i, componentName, location, propFullName + '[' + i + ']', ReactPropTypesSecret);\n        if (error instanceof Error) {\n          return error;\n        }\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createElementTypeChecker() {\n    function validate(props, propName, componentName, location, propFullName) {\n      var propValue = props[propName];\n      if (!isValidElement(propValue)) {\n        var propType = getPropType(propValue);\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + propType + '` supplied to `' + componentName + '`, expected a single ReactElement.'));\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createElementTypeTypeChecker() {\n    function validate(props, propName, componentName, location, propFullName) {\n      var propValue = props[propName];\n      if (!ReactIs.isValidElementType(propValue)) {\n        var propType = getPropType(propValue);\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + propType + '` supplied to `' + componentName + '`, expected a single ReactElement type.'));\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createInstanceTypeChecker(expectedClass) {\n    function validate(props, propName, componentName, location, propFullName) {\n      if (!(props[propName] instanceof expectedClass)) {\n        var expectedClassName = expectedClass.name || ANONYMOUS;\n        var actualClassName = getClassName(props[propName]);\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + actualClassName + '` supplied to `' + componentName + '`, expected ') + ('instance of `' + expectedClassName + '`.'));\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createEnumTypeChecker(expectedValues) {\n    if (!Array.isArray(expectedValues)) {\n      if (process.env.NODE_ENV !== 'production') {\n        if (arguments.length > 1) {\n          printWarning(\n            'Invalid arguments supplied to oneOf, expected an array, got ' + arguments.length + ' arguments. ' +\n            'A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z]).'\n          );\n        } else {\n          printWarning('Invalid argument supplied to oneOf, expected an array.');\n        }\n      }\n      return emptyFunctionThatReturnsNull;\n    }\n\n    function validate(props, propName, componentName, location, propFullName) {\n      var propValue = props[propName];\n      for (var i = 0; i < expectedValues.length; i++) {\n        if (is(propValue, expectedValues[i])) {\n          return null;\n        }\n      }\n\n      var valuesString = JSON.stringify(expectedValues, function replacer(key, value) {\n        var type = getPreciseType(value);\n        if (type === 'symbol') {\n          return String(value);\n        }\n        return value;\n      });\n      return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of value `' + String(propValue) + '` ' + ('supplied to `' + componentName + '`, expected one of ' + valuesString + '.'));\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createObjectOfTypeChecker(typeChecker) {\n    function validate(props, propName, componentName, location, propFullName) {\n      if (typeof typeChecker !== 'function') {\n        return new PropTypeError('Property `' + propFullName + '` of component `' + componentName + '` has invalid PropType notation inside objectOf.');\n      }\n      var propValue = props[propName];\n      var propType = getPropType(propValue);\n      if (propType !== 'object') {\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + propType + '` supplied to `' + componentName + '`, expected an object.'));\n      }\n      for (var key in propValue) {\n        if (has(propValue, key)) {\n          var error = typeChecker(propValue, key, componentName, location, propFullName + '.' + key, ReactPropTypesSecret);\n          if (error instanceof Error) {\n            return error;\n          }\n        }\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createUnionTypeChecker(arrayOfTypeCheckers) {\n    if (!Array.isArray(arrayOfTypeCheckers)) {\n      process.env.NODE_ENV !== 'production' ? printWarning('Invalid argument supplied to oneOfType, expected an instance of array.') : void 0;\n      return emptyFunctionThatReturnsNull;\n    }\n\n    for (var i = 0; i < arrayOfTypeCheckers.length; i++) {\n      var checker = arrayOfTypeCheckers[i];\n      if (typeof checker !== 'function') {\n        printWarning(\n          'Invalid argument supplied to oneOfType. Expected an array of check functions, but ' +\n          'received ' + getPostfixForTypeWarning(checker) + ' at index ' + i + '.'\n        );\n        return emptyFunctionThatReturnsNull;\n      }\n    }\n\n    function validate(props, propName, componentName, location, propFullName) {\n      var expectedTypes = [];\n      for (var i = 0; i < arrayOfTypeCheckers.length; i++) {\n        var checker = arrayOfTypeCheckers[i];\n        var checkerResult = checker(props, propName, componentName, location, propFullName, ReactPropTypesSecret);\n        if (checkerResult == null) {\n          return null;\n        }\n        if (checkerResult.data && has(checkerResult.data, 'expectedType')) {\n          expectedTypes.push(checkerResult.data.expectedType);\n        }\n      }\n      var expectedTypesMessage = (expectedTypes.length > 0) ? ', expected one of type [' + expectedTypes.join(', ') + ']': '';\n      return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` supplied to ' + ('`' + componentName + '`' + expectedTypesMessage + '.'));\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createNodeChecker() {\n    function validate(props, propName, componentName, location, propFullName) {\n      if (!isNode(props[propName])) {\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` supplied to ' + ('`' + componentName + '`, expected a ReactNode.'));\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function invalidValidatorError(componentName, location, propFullName, key, type) {\n    return new PropTypeError(\n      (componentName || 'React class') + ': ' + location + ' type `' + propFullName + '.' + key + '` is invalid; ' +\n      'it must be a function, usually from the `prop-types` package, but received `' + type + '`.'\n    );\n  }\n\n  function createShapeTypeChecker(shapeTypes) {\n    function validate(props, propName, componentName, location, propFullName) {\n      var propValue = props[propName];\n      var propType = getPropType(propValue);\n      if (propType !== 'object') {\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type `' + propType + '` ' + ('supplied to `' + componentName + '`, expected `object`.'));\n      }\n      for (var key in shapeTypes) {\n        var checker = shapeTypes[key];\n        if (typeof checker !== 'function') {\n          return invalidValidatorError(componentName, location, propFullName, key, getPreciseType(checker));\n        }\n        var error = checker(propValue, key, componentName, location, propFullName + '.' + key, ReactPropTypesSecret);\n        if (error) {\n          return error;\n        }\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createStrictShapeTypeChecker(shapeTypes) {\n    function validate(props, propName, componentName, location, propFullName) {\n      var propValue = props[propName];\n      var propType = getPropType(propValue);\n      if (propType !== 'object') {\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type `' + propType + '` ' + ('supplied to `' + componentName + '`, expected `object`.'));\n      }\n      // We need to check all keys in case some are required but missing from props.\n      var allKeys = assign({}, props[propName], shapeTypes);\n      for (var key in allKeys) {\n        var checker = shapeTypes[key];\n        if (has(shapeTypes, key) && typeof checker !== 'function') {\n          return invalidValidatorError(componentName, location, propFullName, key, getPreciseType(checker));\n        }\n        if (!checker) {\n          return new PropTypeError(\n            'Invalid ' + location + ' `' + propFullName + '` key `' + key + '` supplied to `' + componentName + '`.' +\n            '\\nBad object: ' + JSON.stringify(props[propName], null, '  ') +\n            '\\nValid keys: ' + JSON.stringify(Object.keys(shapeTypes), null, '  ')\n          );\n        }\n        var error = checker(propValue, key, componentName, location, propFullName + '.' + key, ReactPropTypesSecret);\n        if (error) {\n          return error;\n        }\n      }\n      return null;\n    }\n\n    return createChainableTypeChecker(validate);\n  }\n\n  function isNode(propValue) {\n    switch (typeof propValue) {\n      case 'number':\n      case 'string':\n      case 'undefined':\n        return true;\n      case 'boolean':\n        return !propValue;\n      case 'object':\n        if (Array.isArray(propValue)) {\n          return propValue.every(isNode);\n        }\n        if (propValue === null || isValidElement(propValue)) {\n          return true;\n        }\n\n        var iteratorFn = getIteratorFn(propValue);\n        if (iteratorFn) {\n          var iterator = iteratorFn.call(propValue);\n          var step;\n          if (iteratorFn !== propValue.entries) {\n            while (!(step = iterator.next()).done) {\n              if (!isNode(step.value)) {\n                return false;\n              }\n            }\n          } else {\n            // Iterator will provide entry [k,v] tuples rather than values.\n            while (!(step = iterator.next()).done) {\n              var entry = step.value;\n              if (entry) {\n                if (!isNode(entry[1])) {\n                  return false;\n                }\n              }\n            }\n          }\n        } else {\n          return false;\n        }\n\n        return true;\n      default:\n        return false;\n    }\n  }\n\n  function isSymbol(propType, propValue) {\n    // Native Symbol.\n    if (propType === 'symbol') {\n      return true;\n    }\n\n    // falsy value can't be a Symbol\n    if (!propValue) {\n      return false;\n    }\n\n    // 19.4.3.5 Symbol.prototype[@@toStringTag] === 'Symbol'\n    if (propValue['@@toStringTag'] === 'Symbol') {\n      return true;\n    }\n\n    // Fallback for non-spec compliant Symbols which are polyfilled.\n    if (typeof Symbol === 'function' && propValue instanceof Symbol) {\n      return true;\n    }\n\n    return false;\n  }\n\n  // Equivalent of `typeof` but with special handling for array and regexp.\n  function getPropType(propValue) {\n    var propType = typeof propValue;\n    if (Array.isArray(propValue)) {\n      return 'array';\n    }\n    if (propValue instanceof RegExp) {\n      // Old webkits (at least until Android 4.0) return 'function' rather than\n      // 'object' for typeof a RegExp. We'll normalize this here so that /bla/\n      // passes PropTypes.object.\n      return 'object';\n    }\n    if (isSymbol(propType, propValue)) {\n      return 'symbol';\n    }\n    return propType;\n  }\n\n  // This handles more types than `getPropType`. Only used for error messages.\n  // See `createPrimitiveTypeChecker`.\n  function getPreciseType(propValue) {\n    if (typeof propValue === 'undefined' || propValue === null) {\n      return '' + propValue;\n    }\n    var propType = getPropType(propValue);\n    if (propType === 'object') {\n      if (propValue instanceof Date) {\n        return 'date';\n      } else if (propValue instanceof RegExp) {\n        return 'regexp';\n      }\n    }\n    return propType;\n  }\n\n  // Returns a string that is postfixed to a warning about an invalid type.\n  // For example, \"undefined\" or \"of type array\"\n  function getPostfixForTypeWarning(value) {\n    var type = getPreciseType(value);\n    switch (type) {\n      case 'array':\n      case 'object':\n        return 'an ' + type;\n      case 'boolean':\n      case 'date':\n      case 'regexp':\n        return 'a ' + type;\n      default:\n        return type;\n    }\n  }\n\n  // Returns class name of the object, if any.\n  function getClassName(propValue) {\n    if (!propValue.constructor || !propValue.constructor.name) {\n      return ANONYMOUS;\n    }\n    return propValue.constructor.name;\n  }\n\n  ReactPropTypes.checkPropTypes = checkPropTypes;\n  ReactPropTypes.resetWarningCache = checkPropTypes.resetWarningCache;\n  ReactPropTypes.PropTypes = ReactPropTypes;\n\n  return ReactPropTypes;\n};\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nif (process.env.NODE_ENV !== 'production') {\n  var ReactIs = require('react-is');\n\n  // By explicitly using `prop-types` you are opting into new development behavior.\n  // http://fb.me/prop-types-in-prod\n  var throwOnDirectAccess = true;\n  module.exports = require('./factoryWithTypeCheckers')(ReactIs.isElement, throwOnDirectAccess);\n} else {\n  // By explicitly using `prop-types` you are opting into new production behavior.\n  // http://fb.me/prop-types-in-prod\n  module.exports = require('./factoryWithThrowingShims')();\n}\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED';\n\nmodule.exports = ReactPropTypesSecret;\n","module.exports = Function.call.bind(Object.prototype.hasOwnProperty);\n","/** @license React v16.13.1\n * react-is.development.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\n\n\nif (process.env.NODE_ENV !== \"production\") {\n  (function() {\n'use strict';\n\n// The Symbol used to tag the ReactElement-like types. If there is no native Symbol\n// nor polyfill, then a plain number is used for performance.\nvar hasSymbol = typeof Symbol === 'function' && Symbol.for;\nvar REACT_ELEMENT_TYPE = hasSymbol ? Symbol.for('react.element') : 0xeac7;\nvar REACT_PORTAL_TYPE = hasSymbol ? Symbol.for('react.portal') : 0xeaca;\nvar REACT_FRAGMENT_TYPE = hasSymbol ? Symbol.for('react.fragment') : 0xeacb;\nvar REACT_STRICT_MODE_TYPE = hasSymbol ? Symbol.for('react.strict_mode') : 0xeacc;\nvar REACT_PROFILER_TYPE = hasSymbol ? Symbol.for('react.profiler') : 0xead2;\nvar REACT_PROVIDER_TYPE = hasSymbol ? Symbol.for('react.provider') : 0xeacd;\nvar REACT_CONTEXT_TYPE = hasSymbol ? Symbol.for('react.context') : 0xeace; // TODO: We don't use AsyncMode or ConcurrentMode anymore. They were temporary\n// (unstable) APIs that have been removed. Can we remove the symbols?\n\nvar REACT_ASYNC_MODE_TYPE = hasSymbol ? Symbol.for('react.async_mode') : 0xeacf;\nvar REACT_CONCURRENT_MODE_TYPE = hasSymbol ? Symbol.for('react.concurrent_mode') : 0xeacf;\nvar REACT_FORWARD_REF_TYPE = hasSymbol ? Symbol.for('react.forward_ref') : 0xead0;\nvar REACT_SUSPENSE_TYPE = hasSymbol ? Symbol.for('react.suspense') : 0xead1;\nvar REACT_SUSPENSE_LIST_TYPE = hasSymbol ? Symbol.for('react.suspense_list') : 0xead8;\nvar REACT_MEMO_TYPE = hasSymbol ? Symbol.for('react.memo') : 0xead3;\nvar REACT_LAZY_TYPE = hasSymbol ? Symbol.for('react.lazy') : 0xead4;\nvar REACT_BLOCK_TYPE = hasSymbol ? Symbol.for('react.block') : 0xead9;\nvar REACT_FUNDAMENTAL_TYPE = hasSymbol ? Symbol.for('react.fundamental') : 0xead5;\nvar REACT_RESPONDER_TYPE = hasSymbol ? Symbol.for('react.responder') : 0xead6;\nvar REACT_SCOPE_TYPE = hasSymbol ? Symbol.for('react.scope') : 0xead7;\n\nfunction isValidElementType(type) {\n  return typeof type === 'string' || typeof type === 'function' || // Note: its typeof might be other than 'symbol' or 'number' if it's a polyfill.\n  type === REACT_FRAGMENT_TYPE || type === REACT_CONCURRENT_MODE_TYPE || type === REACT_PROFILER_TYPE || type === REACT_STRICT_MODE_TYPE || type === REACT_SUSPENSE_TYPE || type === REACT_SUSPENSE_LIST_TYPE || typeof type === 'object' && type !== null && (type.$$typeof === REACT_LAZY_TYPE || type.$$typeof === REACT_MEMO_TYPE || type.$$typeof === REACT_PROVIDER_TYPE || type.$$typeof === REACT_CONTEXT_TYPE || type.$$typeof === REACT_FORWARD_REF_TYPE || type.$$typeof === REACT_FUNDAMENTAL_TYPE || type.$$typeof === REACT_RESPONDER_TYPE || type.$$typeof === REACT_SCOPE_TYPE || type.$$typeof === REACT_BLOCK_TYPE);\n}\n\nfunction typeOf(object) {\n  if (typeof object === 'object' && object !== null) {\n    var $$typeof = object.$$typeof;\n\n    switch ($$typeof) {\n      case REACT_ELEMENT_TYPE:\n        var type = object.type;\n\n        switch (type) {\n          case REACT_ASYNC_MODE_TYPE:\n          case REACT_CONCURRENT_MODE_TYPE:\n          case REACT_FRAGMENT_TYPE:\n          case REACT_PROFILER_TYPE:\n          case REACT_STRICT_MODE_TYPE:\n          case REACT_SUSPENSE_TYPE:\n            return type;\n\n          default:\n            var $$typeofType = type && type.$$typeof;\n\n            switch ($$typeofType) {\n              case REACT_CONTEXT_TYPE:\n              case REACT_FORWARD_REF_TYPE:\n              case REACT_LAZY_TYPE:\n              case REACT_MEMO_TYPE:\n              case REACT_PROVIDER_TYPE:\n                return $$typeofType;\n\n              default:\n                return $$typeof;\n            }\n\n        }\n\n      case REACT_PORTAL_TYPE:\n        return $$typeof;\n    }\n  }\n\n  return undefined;\n} // AsyncMode is deprecated along with isAsyncMode\n\nvar AsyncMode = REACT_ASYNC_MODE_TYPE;\nvar ConcurrentMode = REACT_CONCURRENT_MODE_TYPE;\nvar ContextConsumer = REACT_CONTEXT_TYPE;\nvar ContextProvider = REACT_PROVIDER_TYPE;\nvar Element = REACT_ELEMENT_TYPE;\nvar ForwardRef = REACT_FORWARD_REF_TYPE;\nvar Fragment = REACT_FRAGMENT_TYPE;\nvar Lazy = REACT_LAZY_TYPE;\nvar Memo = REACT_MEMO_TYPE;\nvar Portal = REACT_PORTAL_TYPE;\nvar Profiler = REACT_PROFILER_TYPE;\nvar StrictMode = REACT_STRICT_MODE_TYPE;\nvar Suspense = REACT_SUSPENSE_TYPE;\nvar hasWarnedAboutDeprecatedIsAsyncMode = false; // AsyncMode should be deprecated\n\nfunction isAsyncMode(object) {\n  {\n    if (!hasWarnedAboutDeprecatedIsAsyncMode) {\n      hasWarnedAboutDeprecatedIsAsyncMode = true; // Using console['warn'] to evade Babel and ESLint\n\n      console['warn']('The ReactIs.isAsyncMode() alias has been deprecated, ' + 'and will be removed in React 17+. Update your code to use ' + 'ReactIs.isConcurrentMode() instead. It has the exact same API.');\n    }\n  }\n\n  return isConcurrentMode(object) || typeOf(object) === REACT_ASYNC_MODE_TYPE;\n}\nfunction isConcurrentMode(object) {\n  return typeOf(object) === REACT_CONCURRENT_MODE_TYPE;\n}\nfunction isContextConsumer(object) {\n  return typeOf(object) === REACT_CONTEXT_TYPE;\n}\nfunction isContextProvider(object) {\n  return typeOf(object) === REACT_PROVIDER_TYPE;\n}\nfunction isElement(object) {\n  return typeof object === 'object' && object !== null && object.$$typeof === REACT_ELEMENT_TYPE;\n}\nfunction isForwardRef(object) {\n  return typeOf(object) === REACT_FORWARD_REF_TYPE;\n}\nfunction isFragment(object) {\n  return typeOf(object) === REACT_FRAGMENT_TYPE;\n}\nfunction isLazy(object) {\n  return typeOf(object) === REACT_LAZY_TYPE;\n}\nfunction isMemo(object) {\n  return typeOf(object) === REACT_MEMO_TYPE;\n}\nfunction isPortal(object) {\n  return typeOf(object) === REACT_PORTAL_TYPE;\n}\nfunction isProfiler(object) {\n  return typeOf(object) === REACT_PROFILER_TYPE;\n}\nfunction isStrictMode(object) {\n  return typeOf(object) === REACT_STRICT_MODE_TYPE;\n}\nfunction isSuspense(object) {\n  return typeOf(object) === REACT_SUSPENSE_TYPE;\n}\n\nexports.AsyncMode = AsyncMode;\nexports.ConcurrentMode = ConcurrentMode;\nexports.ContextConsumer = ContextConsumer;\nexports.ContextProvider = ContextProvider;\nexports.Element = Element;\nexports.ForwardRef = ForwardRef;\nexports.Fragment = Fragment;\nexports.Lazy = Lazy;\nexports.Memo = Memo;\nexports.Portal = Portal;\nexports.Profiler = Profiler;\nexports.StrictMode = StrictMode;\nexports.Suspense = Suspense;\nexports.isAsyncMode = isAsyncMode;\nexports.isConcurrentMode = isConcurrentMode;\nexports.isContextConsumer = isContextConsumer;\nexports.isContextProvider = isContextProvider;\nexports.isElement = isElement;\nexports.isForwardRef = isForwardRef;\nexports.isFragment = isFragment;\nexports.isLazy = isLazy;\nexports.isMemo = isMemo;\nexports.isPortal = isPortal;\nexports.isProfiler = isProfiler;\nexports.isStrictMode = isStrictMode;\nexports.isSuspense = isSuspense;\nexports.isValidElementType = isValidElementType;\nexports.typeOf = typeOf;\n  })();\n}\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-is.production.min.js');\n} else {\n  module.exports = require('./cjs/react-is.development.js');\n}\n","function shallowEqualObjects(objA, objB) {\n  if (objA === objB) {\n    return true;\n  }\n\n  if (!objA || !objB) {\n    return false;\n  }\n\n  var aKeys = Object.keys(objA);\n  var bKeys = Object.keys(objB);\n  var len = aKeys.length;\n\n  if (bKeys.length !== len) {\n    return false;\n  }\n\n  for (var i = 0; i < len; i++) {\n    var key = aKeys[i];\n\n    if (objA[key] !== objB[key] || !Object.prototype.hasOwnProperty.call(objB, key)) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nfunction shallowEqualArrays(arrA, arrB) {\n  if (arrA === arrB) {\n    return true;\n  }\n\n  if (!arrA || !arrB) {\n    return false;\n  }\n\n  var len = arrA.length;\n\n  if (arrB.length !== len) {\n    return false;\n  }\n\n  for (var i = 0; i < len; i++) {\n    if (arrA[i] !== arrB[i]) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nexport { shallowEqualArrays, shallowEqualObjects };\n","import useMediaQuery from './useMediaQuery';\nimport { ReactNode, ReactElement, FC, CSSProperties } from 'react';\nimport { MediaQueryAllQueryable, MediaQueryMatchers } from './types';\n\ninterface MediaQueryProps extends MediaQueryAllQueryable {\n  component?: ReactNode\n  // eslint-disable-next-line @typescript-eslint/ban-types\n  children?: ReactNode | ((matches: boolean) => ReactNode);\n  query?: string;\n  style?: CSSProperties;\n  className?: string;\n  device?: MediaQueryMatchers;\n  values?: Partial<MediaQueryMatchers>;\n  onBeforeChange?: (_matches: boolean) => void;\n  onChange?: (_matches: boolean) => void;\n}\n\n// ReactNode and ReactElement typings are a little funky for functional components, so the ReactElement cast is needed on the return\nconst MediaQuery: FC<MediaQueryProps> = ({\n  children,\n  device,\n  onChange,\n  ...settings\n}) => {\n  const matches = useMediaQuery(settings, device, onChange);\n\n  if (typeof children === 'function') {\n    return children(matches) as ReactElement;\n  }\n  return matches ? children as ReactElement : null;\n};\n\nexport default MediaQuery;\n","import { createContext } from 'react'\nimport { MediaQueryAllQueryable } from './types'\n\nconst Context = createContext<Partial<MediaQueryAllQueryable> | undefined>(undefined)\n\nexport default Context\n","import useMediaQuery from './useMediaQuery'\nimport MediaQuery from './Component'\nimport toQuery from './toQuery'\nimport Context from './Context'\n\nexport {\n  MediaQuery as default,\n  useMediaQuery,\n  toQuery,\n  Context\n}\n\nexport type {\n  MediaQueryTypes,\n  MediaQueryType,\n  MediaQueryFeatures,\n  MediaQueryMatchers,\n  MediaQueryAllQueryable\n} from './types'\n","import PropTypes from 'prop-types'\n\nconst stringOrNumber = PropTypes.oneOfType([\n  PropTypes.string,\n  PropTypes.number\n])\n\n// media types\nconst types = {\n  all: PropTypes.bool,\n  grid: PropTypes.bool,\n  aural: PropTypes.bool,\n  braille: PropTypes.bool,\n  handheld: PropTypes.bool,\n  print: PropTypes.bool,\n  projection: PropTypes.bool,\n  screen: PropTypes.bool,\n  tty: PropTypes.bool,\n  tv: PropTypes.bool,\n  embossed: PropTypes.bool\n}\n\n// properties that match media queries\nconst matchers = {\n  orientation: PropTypes.oneOf([\n    'portrait',\n    'landscape'\n  ]),\n\n  scan: PropTypes.oneOf([\n    'progressive',\n    'interlace'\n  ]),\n\n  aspectRatio: PropTypes.string,\n  deviceAspectRatio: PropTypes.string,\n\n  height: stringOrNumber,\n  deviceHeight: stringOrNumber,\n\n  width: stringOrNumber,\n  deviceWidth: stringOrNumber,\n\n  color: PropTypes.bool,\n\n  colorIndex: PropTypes.bool,\n\n  monochrome: PropTypes.bool,\n  resolution: stringOrNumber,\n  type: Object.keys(types)\n}\n\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nconst { type, ...featureMatchers } = matchers\n\n// media features\nconst features = {\n  minAspectRatio: PropTypes.string,\n  maxAspectRatio: PropTypes.string,\n  minDeviceAspectRatio: PropTypes.string,\n  maxDeviceAspectRatio: PropTypes.string,\n\n  minHeight: stringOrNumber,\n  maxHeight: stringOrNumber,\n  minDeviceHeight: stringOrNumber,\n  maxDeviceHeight: stringOrNumber,\n\n  minWidth: stringOrNumber,\n  maxWidth: stringOrNumber,\n  minDeviceWidth: stringOrNumber,\n  maxDeviceWidth: stringOrNumber,\n\n  minColor: PropTypes.number,\n  maxColor: PropTypes.number,\n\n  minColorIndex: PropTypes.number,\n  maxColorIndex: PropTypes.number,\n\n  minMonochrome: PropTypes.number,\n  maxMonochrome: PropTypes.number,\n\n  minResolution: stringOrNumber,\n  maxResolution: stringOrNumber,\n\n  ...featureMatchers\n}\n\nconst all = { ...types, ...features }\n\nexport default {\n  all: all,\n  types: types,\n  matchers: matchers,\n  features: features\n}\n","import hyphenate from 'hyphenate-style-name'\nimport mq from './mediaQuery'\nimport { MediaQueryAllQueryable } from './types'\n\nconst negate = (cond: string) => `not ${cond}`\n\nconst keyVal = (k: string, v: unknown): string => {\n  const realKey = hyphenate(k)\n\n  // px shorthand\n  if (typeof v === 'number') {\n    v = `${v}px`\n  }\n  if (v === true) {\n    return realKey\n  }\n  if (v === false) {\n    return negate(realKey)\n  }\n  return `(${realKey}: ${v})`\n}\n\nconst join = (conds: string[]): string => conds.join(' and ')\n\nconst toQuery = (obj: Partial<MediaQueryAllQueryable>): string => {\n  const rules: string[] = []\n  Object.keys(mq.all).forEach((k) => {\n    const v = obj[k as keyof MediaQueryAllQueryable]\n    if (v != null) {\n      rules.push(keyVal(k, v))\n    }\n  })\n  return join(rules)\n}\n\nexport default toQuery\n","import { useRef, useEffect, useContext, useState } from 'react'\nimport matchMedia from 'matchmediaquery'\nimport hyphenate from 'hyphenate-style-name'\nimport { shallowEqualObjects } from 'shallow-equal'\nimport toQuery from './toQuery'\nimport Context from './Context'\nimport { MediaQueryAllQueryable, MediaQueryMatchers } from './types'\n\ntype MediaQuerySettings = Partial<MediaQueryAllQueryable & { query?: string }>\ntype HyphenateKeyTypes = MediaQueryMatchers | MediaQueryAllQueryable;\n\nconst makeQuery = (settings: MediaQuerySettings) => settings.query || toQuery(settings)\n\nconst hyphenateKeys = (obj?: HyphenateKeyTypes)  => {\n  type K = keyof HyphenateKeyTypes;\n\n  if (!obj) return undefined\n  const keys = Object.keys(obj) as K[]\n\n  return keys.reduce((result, key) => {\n    result[hyphenate(key)] = obj[key]\n    return result\n  }, {} as Record<string, typeof obj[K]>)\n}\n\nconst useIsUpdate = () => {\n  const ref = useRef(false)\n\n  useEffect(() => {\n    ref.current = true\n  }, [])\n\n  return ref.current\n}\n\nconst useDevice = (deviceFromProps?: MediaQueryMatchers): Partial<MediaQueryAllQueryable> | undefined => {\n  const deviceFromContext = useContext(Context)\n  const getDevice = () =>\n    hyphenateKeys(deviceFromProps) || hyphenateKeys(deviceFromContext)\n  const [ device, setDevice ] = useState(getDevice)\n\n  useEffect(() => {\n    const newDevice = getDevice()\n    if (!shallowEqualObjects(device, newDevice)) {\n      setDevice(newDevice)\n    }\n  }, [ deviceFromProps, deviceFromContext ])\n\n  return device\n}\n\nconst useQuery = (settings: MediaQuerySettings) => {\n  const getQuery = () => makeQuery(settings)\n  const [ query, setQuery ] = useState(getQuery)\n\n  useEffect(() => {\n    const newQuery = getQuery()\n    if (query !== newQuery) {\n      setQuery(newQuery)\n    }\n  }, [ settings ])\n\n  return query\n}\n\nconst useMatchMedia = (query: string, device?: MediaQueryMatchers) => {\n  const getMatchMedia = () => matchMedia(query, device || {}, !!device)\n  const [ mq, setMq ] = useState(getMatchMedia)\n  const isUpdate = useIsUpdate()\n\n  useEffect(() => {\n    if (isUpdate) {\n      // skip on mounting, it has already been set\n      const newMq = getMatchMedia()\n      setMq(newMq)\n\n      return () => {\n        if (newMq) {\n          newMq.dispose()\n        }\n      }\n    }\n  }, [ query, device ])\n\n  return mq\n}\n\nconst useMatches = (mediaQuery: MediaQueryList): boolean => {\n  const [ matches, setMatches ] = useState<boolean>(mediaQuery.matches)\n\n  useEffect(() => {\n    const updateMatches = (ev: MediaQueryListEvent) => {\n      setMatches(ev.matches)\n    }\n    mediaQuery.addListener(updateMatches)\n    setMatches(mediaQuery.matches)\n\n    return () => {\n      mediaQuery.removeListener(updateMatches)\n    }\n  }, [ mediaQuery ])\n\n  return matches\n}\n\nconst useMediaQuery = (settings: MediaQuerySettings, device?: MediaQueryMatchers, onChange?: (_: boolean) => void) => {\n  const deviceSettings = useDevice(device)\n  const query = useQuery(settings)\n  if (!query) throw new Error('Invalid or missing MediaQuery!')\n  const mq = useMatchMedia(query, deviceSettings)\n  const matches = useMatches(mq as unknown as MediaQueryList)\n  const isUpdate = useIsUpdate()\n\n  useEffect(() => {\n    if (isUpdate && onChange) {\n      onChange(matches)\n    }\n  }, [ matches ])\n\n  useEffect(() => () => {\n    if (mq) {\n      mq.dispose()\n    }\n  }, [])\n\n  return matches\n}\n\nexport default useMediaQuery\n","module.exports = __WEBPACK_EXTERNAL_MODULE_react__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(\"./src/index.ts\");\n","/**\n * @license React\n * react-jsx-runtime.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';var f=require(\"react\"),k=Symbol.for(\"react.element\"),l=Symbol.for(\"react.fragment\"),m=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p={key:!0,ref:!0,__self:!0,__source:!0};\nfunction q(c,a,g){var b,d={},e=null,h=null;void 0!==g&&(e=\"\"+g);void 0!==a.key&&(e=\"\"+a.key);void 0!==a.ref&&(h=a.ref);for(b in a)m.call(a,b)&&!p.hasOwnProperty(b)&&(d[b]=a[b]);if(c&&c.defaultProps)for(b in a=c.defaultProps,a)void 0===d[b]&&(d[b]=a[b]);return{$$typeof:k,type:c,key:e,ref:h,props:d,_owner:n.current}}exports.Fragment=l;exports.jsx=q;exports.jsxs=q;\n","/**\n * @license React\n * react.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';var l=Symbol.for(\"react.element\"),n=Symbol.for(\"react.portal\"),p=Symbol.for(\"react.fragment\"),q=Symbol.for(\"react.strict_mode\"),r=Symbol.for(\"react.profiler\"),t=Symbol.for(\"react.provider\"),u=Symbol.for(\"react.context\"),v=Symbol.for(\"react.forward_ref\"),w=Symbol.for(\"react.suspense\"),x=Symbol.for(\"react.memo\"),y=Symbol.for(\"react.lazy\"),z=Symbol.iterator;function A(a){if(null===a||\"object\"!==typeof a)return null;a=z&&a[z]||a[\"@@iterator\"];return\"function\"===typeof a?a:null}\nvar B={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,D={};function E(a,b,e){this.props=a;this.context=b;this.refs=D;this.updater=e||B}E.prototype.isReactComponent={};\nE.prototype.setState=function(a,b){if(\"object\"!==typeof a&&\"function\"!==typeof a&&null!=a)throw Error(\"setState(...): takes an object of state variables to update or a function which returns an object of state variables.\");this.updater.enqueueSetState(this,a,b,\"setState\")};E.prototype.forceUpdate=function(a){this.updater.enqueueForceUpdate(this,a,\"forceUpdate\")};function F(){}F.prototype=E.prototype;function G(a,b,e){this.props=a;this.context=b;this.refs=D;this.updater=e||B}var H=G.prototype=new F;\nH.constructor=G;C(H,E.prototype);H.isPureReactComponent=!0;var I=Array.isArray,J=Object.prototype.hasOwnProperty,K={current:null},L={key:!0,ref:!0,__self:!0,__source:!0};\nfunction M(a,b,e){var d,c={},k=null,h=null;if(null!=b)for(d in void 0!==b.ref&&(h=b.ref),void 0!==b.key&&(k=\"\"+b.key),b)J.call(b,d)&&!L.hasOwnProperty(d)&&(c[d]=b[d]);var g=arguments.length-2;if(1===g)c.children=e;else if(1<g){for(var f=Array(g),m=0;m<g;m++)f[m]=arguments[m+2];c.children=f}if(a&&a.defaultProps)for(d in g=a.defaultProps,g)void 0===c[d]&&(c[d]=g[d]);return{$$typeof:l,type:a,key:k,ref:h,props:c,_owner:K.current}}\nfunction N(a,b){return{$$typeof:l,type:a.type,key:b,ref:a.ref,props:a.props,_owner:a._owner}}function O(a){return\"object\"===typeof a&&null!==a&&a.$$typeof===l}function escape(a){var b={\"=\":\"=0\",\":\":\"=2\"};return\"$\"+a.replace(/[=:]/g,function(a){return b[a]})}var P=/\\/+/g;function Q(a,b){return\"object\"===typeof a&&null!==a&&null!=a.key?escape(\"\"+a.key):b.toString(36)}\nfunction R(a,b,e,d,c){var k=typeof a;if(\"undefined\"===k||\"boolean\"===k)a=null;var h=!1;if(null===a)h=!0;else switch(k){case \"string\":case \"number\":h=!0;break;case \"object\":switch(a.$$typeof){case l:case n:h=!0}}if(h)return h=a,c=c(h),a=\"\"===d?\".\"+Q(h,0):d,I(c)?(e=\"\",null!=a&&(e=a.replace(P,\"$&/\")+\"/\"),R(c,b,e,\"\",function(a){return a})):null!=c&&(O(c)&&(c=N(c,e+(!c.key||h&&h.key===c.key?\"\":(\"\"+c.key).replace(P,\"$&/\")+\"/\")+a)),b.push(c)),1;h=0;d=\"\"===d?\".\":d+\":\";if(I(a))for(var g=0;g<a.length;g++){k=\na[g];var f=d+Q(k,g);h+=R(k,b,e,f,c)}else if(f=A(a),\"function\"===typeof f)for(a=f.call(a),g=0;!(k=a.next()).done;)k=k.value,f=d+Q(k,g++),h+=R(k,b,e,f,c);else if(\"object\"===k)throw b=String(a),Error(\"Objects are not valid as a React child (found: \"+(\"[object Object]\"===b?\"object with keys {\"+Object.keys(a).join(\", \")+\"}\":b)+\"). If you meant to render a collection of children, use an array instead.\");return h}\nfunction S(a,b,e){if(null==a)return a;var d=[],c=0;R(a,d,\"\",\"\",function(a){return b.call(e,a,c++)});return d}function T(a){if(-1===a._status){var b=a._result;b=b();b.then(function(b){if(0===a._status||-1===a._status)a._status=1,a._result=b},function(b){if(0===a._status||-1===a._status)a._status=2,a._result=b});-1===a._status&&(a._status=0,a._result=b)}if(1===a._status)return a._result.default;throw a._result;}\nvar U={current:null},V={transition:null},W={ReactCurrentDispatcher:U,ReactCurrentBatchConfig:V,ReactCurrentOwner:K};exports.Children={map:S,forEach:function(a,b,e){S(a,function(){b.apply(this,arguments)},e)},count:function(a){var b=0;S(a,function(){b++});return b},toArray:function(a){return S(a,function(a){return a})||[]},only:function(a){if(!O(a))throw Error(\"React.Children.only expected to receive a single React element child.\");return a}};exports.Component=E;exports.Fragment=p;\nexports.Profiler=r;exports.PureComponent=G;exports.StrictMode=q;exports.Suspense=w;exports.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W;\nexports.cloneElement=function(a,b,e){if(null===a||void 0===a)throw Error(\"React.cloneElement(...): The argument must be a React element, but you passed \"+a+\".\");var d=C({},a.props),c=a.key,k=a.ref,h=a._owner;if(null!=b){void 0!==b.ref&&(k=b.ref,h=K.current);void 0!==b.key&&(c=\"\"+b.key);if(a.type&&a.type.defaultProps)var g=a.type.defaultProps;for(f in b)J.call(b,f)&&!L.hasOwnProperty(f)&&(d[f]=void 0===b[f]&&void 0!==g?g[f]:b[f])}var f=arguments.length-2;if(1===f)d.children=e;else if(1<f){g=Array(f);\nfor(var m=0;m<f;m++)g[m]=arguments[m+2];d.children=g}return{$$typeof:l,type:a.type,key:c,ref:k,props:d,_owner:h}};exports.createContext=function(a){a={$$typeof:u,_currentValue:a,_currentValue2:a,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null};a.Provider={$$typeof:t,_context:a};return a.Consumer=a};exports.createElement=M;exports.createFactory=function(a){var b=M.bind(null,a);b.type=a;return b};exports.createRef=function(){return{current:null}};\nexports.forwardRef=function(a){return{$$typeof:v,render:a}};exports.isValidElement=O;exports.lazy=function(a){return{$$typeof:y,_payload:{_status:-1,_result:a},_init:T}};exports.memo=function(a,b){return{$$typeof:x,type:a,compare:void 0===b?null:b}};exports.startTransition=function(a){var b=V.transition;V.transition={};try{a()}finally{V.transition=b}};exports.unstable_act=function(){throw Error(\"act(...) is not supported in production builds of React.\");};\nexports.useCallback=function(a,b){return U.current.useCallback(a,b)};exports.useContext=function(a){return U.current.useContext(a)};exports.useDebugValue=function(){};exports.useDeferredValue=function(a){return U.current.useDeferredValue(a)};exports.useEffect=function(a,b){return U.current.useEffect(a,b)};exports.useId=function(){return U.current.useId()};exports.useImperativeHandle=function(a,b,e){return U.current.useImperativeHandle(a,b,e)};\nexports.useInsertionEffect=function(a,b){return U.current.useInsertionEffect(a,b)};exports.useLayoutEffect=function(a,b){return U.current.useLayoutEffect(a,b)};exports.useMemo=function(a,b){return U.current.useMemo(a,b)};exports.useReducer=function(a,b,e){return U.current.useReducer(a,b,e)};exports.useRef=function(a){return U.current.useRef(a)};exports.useState=function(a){return U.current.useState(a)};exports.useSyncExternalStore=function(a,b,e){return U.current.useSyncExternalStore(a,b,e)};\nexports.useTransition=function(){return U.current.useTransition()};exports.version=\"18.2.0\";\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react.production.min.js');\n} else {\n  module.exports = require('./cjs/react.development.js');\n}\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-jsx-runtime.production.min.js');\n} else {\n  module.exports = require('./cjs/react-jsx-runtime.development.js');\n}\n","/**\n * @license React\n * scheduler.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';function f(a,b){var c=a.length;a.push(b);a:for(;0<c;){var d=c-1>>>1,e=a[d];if(0<g(e,b))a[d]=b,a[c]=e,c=d;else break a}}function h(a){return 0===a.length?null:a[0]}function k(a){if(0===a.length)return null;var b=a[0],c=a.pop();if(c!==b){a[0]=c;a:for(var d=0,e=a.length,w=e>>>1;d<w;){var m=2*(d+1)-1,C=a[m],n=m+1,x=a[n];if(0>g(C,c))n<e&&0>g(x,C)?(a[d]=x,a[n]=c,d=n):(a[d]=C,a[m]=c,d=m);else if(n<e&&0>g(x,c))a[d]=x,a[n]=c,d=n;else break a}}return b}\nfunction g(a,b){var c=a.sortIndex-b.sortIndex;return 0!==c?c:a.id-b.id}if(\"object\"===typeof performance&&\"function\"===typeof performance.now){var l=performance;exports.unstable_now=function(){return l.now()}}else{var p=Date,q=p.now();exports.unstable_now=function(){return p.now()-q}}var r=[],t=[],u=1,v=null,y=3,z=!1,A=!1,B=!1,D=\"function\"===typeof setTimeout?setTimeout:null,E=\"function\"===typeof clearTimeout?clearTimeout:null,F=\"undefined\"!==typeof setImmediate?setImmediate:null;\n\"undefined\"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function G(a){for(var b=h(t);null!==b;){if(null===b.callback)k(t);else if(b.startTime<=a)k(t),b.sortIndex=b.expirationTime,f(r,b);else break;b=h(t)}}function H(a){B=!1;G(a);if(!A)if(null!==h(r))A=!0,I(J);else{var b=h(t);null!==b&&K(H,b.startTime-a)}}\nfunction J(a,b){A=!1;B&&(B=!1,E(L),L=-1);z=!0;var c=y;try{G(b);for(v=h(r);null!==v&&(!(v.expirationTime>b)||a&&!M());){var d=v.callback;if(\"function\"===typeof d){v.callback=null;y=v.priorityLevel;var e=d(v.expirationTime<=b);b=exports.unstable_now();\"function\"===typeof e?v.callback=e:v===h(r)&&k(r);G(b)}else k(r);v=h(r)}if(null!==v)var w=!0;else{var m=h(t);null!==m&&K(H,m.startTime-b);w=!1}return w}finally{v=null,y=c,z=!1}}var N=!1,O=null,L=-1,P=5,Q=-1;\nfunction M(){return exports.unstable_now()-Q<P?!1:!0}function R(){if(null!==O){var a=exports.unstable_now();Q=a;var b=!0;try{b=O(!0,a)}finally{b?S():(N=!1,O=null)}}else N=!1}var S;if(\"function\"===typeof F)S=function(){F(R)};else if(\"undefined\"!==typeof MessageChannel){var T=new MessageChannel,U=T.port2;T.port1.onmessage=R;S=function(){U.postMessage(null)}}else S=function(){D(R,0)};function I(a){O=a;N||(N=!0,S())}function K(a,b){L=D(function(){a(exports.unstable_now())},b)}\nexports.unstable_IdlePriority=5;exports.unstable_ImmediatePriority=1;exports.unstable_LowPriority=4;exports.unstable_NormalPriority=3;exports.unstable_Profiling=null;exports.unstable_UserBlockingPriority=2;exports.unstable_cancelCallback=function(a){a.callback=null};exports.unstable_continueExecution=function(){A||z||(A=!0,I(J))};\nexports.unstable_forceFrameRate=function(a){0>a||125<a?console.error(\"forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported\"):P=0<a?Math.floor(1E3/a):5};exports.unstable_getCurrentPriorityLevel=function(){return y};exports.unstable_getFirstCallbackNode=function(){return h(r)};exports.unstable_next=function(a){switch(y){case 1:case 2:case 3:var b=3;break;default:b=y}var c=y;y=b;try{return a()}finally{y=c}};exports.unstable_pauseExecution=function(){};\nexports.unstable_requestPaint=function(){};exports.unstable_runWithPriority=function(a,b){switch(a){case 1:case 2:case 3:case 4:case 5:break;default:a=3}var c=y;y=a;try{return b()}finally{y=c}};\nexports.unstable_scheduleCallback=function(a,b,c){var d=exports.unstable_now();\"object\"===typeof c&&null!==c?(c=c.delay,c=\"number\"===typeof c&&0<c?d+c:d):c=d;switch(a){case 1:var e=-1;break;case 2:e=250;break;case 5:e=1073741823;break;case 4:e=1E4;break;default:e=5E3}e=c+e;a={id:u++,callback:b,priorityLevel:a,startTime:c,expirationTime:e,sortIndex:-1};c>d?(a.sortIndex=c,f(t,a),null===h(r)&&a===h(t)&&(B?(E(L),L=-1):B=!0,K(H,c-d))):(a.sortIndex=e,f(r,a),A||z||(A=!0,I(J)));return a};\nexports.unstable_shouldYield=M;exports.unstable_wrapCallback=function(a){var b=y;return function(){var c=y;y=b;try{return a.apply(this,arguments)}finally{y=c}}};\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/scheduler.production.min.js');\n} else {\n  module.exports = require('./cjs/scheduler.development.js');\n}\n","var parse = require('inline-style-parser');\n\n/**\n * Parses inline style to object.\n *\n * @example\n * // returns { 'line-height': '42' }\n * StyleToObject('line-height: 42;');\n *\n * @param  {String}      style      - The inline style.\n * @param  {Function}    [iterator] - The iterator function.\n * @return {null|Object}\n */\nfunction StyleToObject(style, iterator) {\n  var output = null;\n  if (!style || typeof style !== 'string') {\n    return output;\n  }\n\n  var declaration;\n  var declarations = parse(style);\n  var hasIterator = typeof iterator === 'function';\n  var property;\n  var value;\n\n  for (var i = 0, len = declarations.length; i < len; i++) {\n    declaration = declarations[i];\n    property = declaration.property;\n    value = declaration.value;\n\n    if (hasIterator) {\n      iterator(property, value, declaration);\n    } else if (value) {\n      output || (output = {});\n      output[property] = value;\n    }\n  }\n\n  return output;\n}\n\nmodule.exports = StyleToObject;\nmodule.exports.default = StyleToObject; // ESM support\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","// This function allow to reference async chunks\n__webpack_require__.u = function(chunkId) {\n\t// return url for filenames based on template\n\treturn \"static/js/\" + chunkId + \".\" + \"46bb0831\" + \".chunk.js\";\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.p = \"/skirmish/\";","__webpack_require__.b = document.baseURI || self.location.href;\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t179: 0,\n\t842: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n// no on chunks loaded\n\n// no jsonp function","export default function _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, _typeof(o);\n}","import _typeof from \"./typeof.js\";\nimport toPrimitive from \"./toPrimitive.js\";\nexport default function _toPropertyKey(arg) {\n  var key = toPrimitive(arg, \"string\");\n  return _typeof(key) === \"symbol\" ? key : String(key);\n}","import _typeof from \"./typeof.js\";\nexport default function _toPrimitive(input, hint) {\n  if (_typeof(input) !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (_typeof(res) !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (hint === \"string\" ? String : Number)(input);\n}","import toPropertyKey from \"./toPropertyKey.js\";\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, toPropertyKey(descriptor.key), descriptor);\n  }\n}\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","export class Random {\n\tstatic dice = (count: number, rng: () => number = Math.random) => {\n\t\tconst rolls = [];\n\n\t\twhile (rolls.length < Math.max(count, 1)) {\n\t\t\tlet result = 0;\n\t\t\tlet rollAgain = true;\n\n\t\t\twhile (rollAgain) {\n\t\t\t\tconst n = Random.randomNumber(10, rng) + 1;\n\t\t\t\tresult += n;\n\t\t\t\trollAgain = (n === 10);\n\t\t\t}\n\n\t\t\tif (count < 1) {\n\t\t\t\tresult = Math.floor(result / 2);\n\t\t\t}\n\n\t\t\trolls.push(result);\n\t\t}\n\n\t\treturn Math.max(...rolls);\n\t};\n\n\tstatic randomNumber = (max: number, rng: () => number = Math.random) => {\n\t\tif (max <= 0) {\n\t\t\treturn 0;\n\t\t}\n\n\t\treturn Math.floor(rng() * max);\n\t};\n\n\tstatic randomBoolean = (rng: () => number = Math.random) => {\n\t\treturn Random.randomNumber(2, rng) === 0;\n\t};\n\n\tstatic randomDecimal = (rng: () => number = Math.random) => {\n\t\treturn Random.randomNumber(100, rng) / 100;\n\t};\n\n\tstatic randomBonus = (rng: () => number = Math.random) => {\n\t\tswitch (Random.randomNumber(15, rng)) {\n\t\t\tcase 0:\n\t\t\tcase 1:\n\t\t\tcase 2:\n\t\t\tcase 3:\n\t\t\tcase 4:\n\t\t\t\treturn 1;\n\t\t\tcase 5:\n\t\t\tcase 6:\n\t\t\tcase 7:\n\t\t\tcase 8:\n\t\t\t\treturn 2;\n\t\t\tcase 9:\n\t\t\tcase 10:\n\t\t\tcase 11:\n\t\t\t\treturn 3;\n\t\t\tcase 12:\n\t\t\tcase 13:\n\t\t\t\treturn 4;\n\t\t\tcase 14:\n\t\t\t\treturn 5;\n\t\t}\n\n\t\treturn 1;\n\t};\n\n\tstatic randomColor = (min = 0, max = 256, rng: () => number = Math.random) => {\n\t\tconst r = Random.randomNumber(max - min, rng) + min;\n\t\tconst g = Random.randomNumber(max - min, rng) + min;\n\t\tconst b = Random.randomNumber(max - min, rng) + min;\n\t\treturn {\n\t\t\tr: r,\n\t\t\tg: g,\n\t\t\tb: b\n\t\t};\n\t};\n\n\tstatic getSeededRNG = (seed: string) => {\n\t\tconst getHashes = (str: string) => {\n\t\t\tlet h1 = 1779033703;\n\t\t\tlet h2 = 3144134277;\n\t\t\tlet h3 = 1013904242;\n\t\t\tlet h4 = 2773480762;\n\n\t\t\tfor (let i = 0, k; i < str.length; i++) {\n\t\t\t\tk = str.charCodeAt(i);\n\t\t\t\th1 = h2 ^ Math.imul(h1 ^ k, 597399067);\n\t\t\t\th2 = h3 ^ Math.imul(h2 ^ k, 2869860233);\n\t\t\t\th3 = h4 ^ Math.imul(h3 ^ k, 951274213);\n\t\t\t\th4 = h1 ^ Math.imul(h4 ^ k, 2716044179);\n\t\t\t}\n\n\t\t\th1 = Math.imul(h3 ^ (h1 >>> 18), 597399067);\n\t\t\th2 = Math.imul(h4 ^ (h2 >>> 22), 2869860233);\n\t\t\th3 = Math.imul(h1 ^ (h3 >>> 17), 951274213);\n\t\t\th4 = Math.imul(h2 ^ (h4 >>> 19), 2716044179);\n\n\t\t\treturn [\n\t\t\t\t(h1 ^ h2 ^ h3 ^ h4) >>> 0,\n\t\t\t\t(h2 ^ h1) >>> 0,\n\t\t\t\t(h3 ^ h1) >>> 0,\n\t\t\t\t(h4 ^ h1) >>> 0\n\t\t\t];\n\t\t};\n\n\t\tconst getRNG = (a: number, b: number, c: number, d: number) => {\n\t\t\treturn () => {\n\t\t\t\ta >>>= 0;\n\t\t\t\tb >>>= 0;\n\t\t\t\tc >>>= 0;\n\t\t\t\td >>>= 0;\n\n\t\t\t\tlet t = (a + b) | 0;\n\t\t\t\ta = (b ^ b) >>> 9;\n\t\t\t\tb = c + (c << 3) | 0;\n\t\t\t\tc = (c << 21) | (c >>> 11);\n\t\t\t\td = (d + 1) | 0;\n\t\t\t\tt = (t + d) | 0;\n\t\t\t\tc = (c + t) | 0;\n\n\t\t\t\treturn (t >>> 0) / 4294967296;\n\t\t\t};\n\t\t};\n\n\t\tconst hashes = getHashes(seed);\n\t\treturn getRNG(hashes[0], hashes[1], hashes[2], hashes[3]);\n\t};\n}\n","import { Random } from './random';\n\nexport class Collections {\n\tstatic sort = <T>(collection: T[], key: (item: T) => string) => {\n\t\tconst getText = (item: T) => {\n\t\t\tlet k = key(item);\n\t\t\tconst starts = [ 'a ', 'the ' ];\n\t\t\tstarts.forEach(start => {\n\t\t\t\tif (k.toLowerCase().startsWith(start)) {\n\t\t\t\t\tk = k.substring(start.length);\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn k;\n\t\t};\n\n\t\treturn collection.sort((a, b) => {\n\t\t\tconst strA = getText(a);\n\t\t\tconst strB = getText(b);\n\t\t\treturn strA.localeCompare(strB);\n\t\t});\n\t};\n\n\tstatic shuffle = <T>(collection: T[], rng: () => number = Math.random) => {\n\t\tlet currentIndex = collection.length;\n\t\twhile (currentIndex !== 0) {\n\t\t\tconst randomIndex = Random.randomNumber(currentIndex, rng);\n\t\t\tcurrentIndex -= 1;\n\n\t\t\tconst temporaryValue = collection[currentIndex];\n\t\t\tcollection[currentIndex] = collection[randomIndex];\n\t\t\tcollection[randomIndex] = temporaryValue;\n\t\t}\n\n\t\treturn collection;\n\t};\n\n\tstatic draw = <T>(collection: T[], rng: () => number = Math.random) => {\n\t\tconst index = Random.randomNumber(collection.length, rng);\n\t\treturn collection[index];\n\t};\n\n\tstatic distinct = <T>(collection: T[], key: (item: T) => string) => {\n\t\tconst seen = new Set();\n\t\treturn collection.filter(item => {\n\t\t\tconst k = key(item);\n\t\t\treturn seen.has(k) ? false : seen.add(k);\n\t\t});\n\t};\n\n\tstatic sum = <T>(collection: T[], callback: (item: T) => number): number => {\n\t\treturn collection.reduce((sum, item) => sum + callback(item), 0);\n\t};\n\n\tstatic mean = <T>(collection: T[], callback: (item: T) => number): number => {\n\t\tif (collection.length === 0) {\n\t\t\treturn 0;\n\t\t}\n\n\t\treturn Collections.sum(collection, callback) / collection.length;\n\t};\n\n\tstatic min = <T>(collection: T[], callback: (item: T) => number): T | null => {\n\t\tlet item = null;\n\t\tlet min = Number.MAX_VALUE;\n\n\t\tcollection.forEach(i => {\n\t\t\tconst value = callback(i);\n\t\t\tif (value < min) {\n\t\t\t\titem = i;\n\t\t\t\tmin = value;\n\t\t\t}\n\t\t});\n\n\t\treturn item;\n\t};\n\n\tstatic max = <T>(collection: T[], callback: (item: T) => number): T | null => {\n\t\tlet item = null;\n\t\tlet max = Number.MIN_VALUE;\n\n\t\tcollection.forEach(i => {\n\t\t\tconst value = callback(i);\n\t\t\tif (value > max) {\n\t\t\t\titem = i;\n\t\t\t\tmax = value;\n\t\t\t}\n\t\t});\n\n\t\treturn item;\n\t};\n}\n","import type { PackModel } from '../models/pack';\n\nimport { Collections } from '../utils/collections';\n\nexport class PackData {\n\tstatic arcana = (): PackModel => ({\n\t\tid: 'pack-01',\n\t\tname: 'Codex Arcanum',\n\t\tdescription: 'Discover new ways to channel magic with the cards in this pack.'\n\t});\n\n\tstatic skullduggery = (): PackModel => ({\n\t\tid: 'pack-02',\n\t\tname: 'Guile and Cunning',\n\t\tdescription: 'A collection of cards for those who fight with skullduggery rather than valor.'\n\t});\n\n\tstatic elements = (): PackModel => ({\n\t\tid: 'pack-03',\n\t\tname: 'The Elements',\n\t\tdescription: 'Become the master of the four elements with this pack.'\n\t});\n\n\tstatic beasts = (): PackModel => ({\n\t\tid: 'pack-04',\n\t\tname: 'The Menagerie',\n\t\tdescription: 'This beast-themed collection contains dangerous new species.'\n\t});\n\n\tstatic undead = (): PackModel => ({\n\t\tid: 'pack-05',\n\t\tname: 'Out of the Grave',\n\t\tdescription: 'Add a touch of gothic horror to your game with this pack.'\n\t});\n\n\tstatic technology = (): PackModel => ({\n\t\tid: 'pack-06',\n\t\tname: 'The Workshop',\n\t\tdescription: 'The cards in this pack showcase marvels of engineering and ingenuity.'\n\t});\n\n\tstatic faith = (): PackModel => ({\n\t\tid: 'pack-07',\n\t\tname: 'Power and Glory',\n\t\tdescription: 'These cards bring the majesty of the divine to your game.'\n\t});\n\n\tstatic potions = (): PackModel => ({\n\t\tid: 'pack-08',\n\t\tname: 'Magic in a Glass',\n\t\tdescription: 'These cards add magical potions to the game.'\n\t});\n\n\tstatic fae = (): PackModel => ({\n\t\tid: 'pack-09',\n\t\tname: 'The Fae Realm',\n\t\tdescription: 'Bring the beguiling wonder of the fae into your game with this pack.'\n\t});\n\n\tstatic coldBlood = (): PackModel => ({\n\t\tid: 'pack-10',\n\t\tname: 'Cold Blood',\n\t\tdescription: 'Sinister cold-blooded creatures stalk this pack.'\n\t});\n\n\tstatic getList = (): PackModel[] => {\n\t\tconst list = [\n\t\t\tPackData.arcana(),\n\t\t\tPackData.skullduggery(),\n\t\t\tPackData.elements(),\n\t\t\tPackData.beasts(),\n\t\t\tPackData.undead(),\n\t\t\tPackData.technology(),\n\t\t\tPackData.faith(),\n\t\t\tPackData.potions(),\n\t\t\tPackData.fae(),\n\t\t\tPackData.coldBlood()\n\t\t];\n\n\t\treturn Collections.sort(list, n => n.name);\n\t};\n}\n","export enum StructureType {\n\tAcademy = 'academy',\n\tBarracks = 'barracks',\n\tForge = 'forge',\n\tHall = 'hall',\n\tIntelligencer = 'intelligencer',\n\tObservatory = 'observatory',\n\tQuartermaster = 'quartermaster',\n\tTemple = 'temple',\n\tThievesGuild = 'thieves guild',\n\tTrainingGround = 'training ground',\n\tWarRoom = 'war room',\n\tWizardTower = 'wizard tower'\n}\n","import { PackData } from './pack-data';\n\nimport { StructureType } from '../enums/structure-type';\n\nimport type { StructureModel } from '../models/structure';\n\nimport { Collections } from '../utils/collections';\n\nexport class StructureData {\n\tstatic academy = (): StructureModel => ({\n\t\tid: 'structure-academy',\n\t\ttype: StructureType.Academy,\n\t\tname: 'Academy',\n\t\tpackID: '',\n\t\tdescription: 'The military academy is a place for heroes to become the best they can be.',\n\t\tposition: { x: 0, y: 0 },\n\t\tlevel: 1,\n\t\tcharges: 0\n\t});\n\n\tstatic barracks = (): StructureModel => ({\n\t\tid: 'structure-barracks',\n\t\ttype: StructureType.Barracks,\n\t\tname: 'Barracks',\n\t\tpackID: '',\n\t\tdescription: 'A place for heroes to live.',\n\t\tposition: { x: 0, y: 0 },\n\t\tlevel: 1,\n\t\tcharges: 0\n\t});\n\n\tstatic forge = (): StructureModel => ({\n\t\tid: 'structure-forge',\n\t\ttype: StructureType.Forge,\n\t\tname: 'Forge',\n\t\tpackID: PackData.technology().id,\n\t\tdescription: 'Forges contain materials for building strongholds.',\n\t\tposition: { x: 0, y: 0 },\n\t\tlevel: 1,\n\t\tcharges: 0\n\t});\n\n\tstatic recruitment = (): StructureModel => ({\n\t\tid: 'structure-recruitment',\n\t\ttype: StructureType.Hall,\n\t\tname: 'Recruitment Hall',\n\t\tpackID: '',\n\t\tdescription: 'This building is used to attract new heroes to join the company.',\n\t\tposition: { x: 0, y: 0 },\n\t\tlevel: 1,\n\t\tcharges: 0\n\t});\n\n\tstatic intelligencer = (): StructureModel => ({\n\t\tid: 'structure-intelligencer',\n\t\ttype: StructureType.Intelligencer,\n\t\tname: 'Intelligencer',\n\t\tpackID: PackData.skullduggery().id,\n\t\tdescription: 'In this building, a spymaster devises schemes to undermine the enemy.',\n\t\tposition: { x: 0, y: 0 },\n\t\tlevel: 1,\n\t\tcharges: 0\n\t});\n\n\tstatic observatory = (): StructureModel => ({\n\t\tid: 'structure-observatory',\n\t\ttype: StructureType.Observatory,\n\t\tname: 'Observatory',\n\t\tpackID: PackData.arcana().id,\n\t\tdescription: 'By observing the stars, an astrologer can sometimes manipulate the fates.',\n\t\tposition: { x: 0, y: 0 },\n\t\tlevel: 1,\n\t\tcharges: 0\n\t});\n\n\tstatic quartermaster = (): StructureModel => ({\n\t\tid: 'structure-quartermaster',\n\t\ttype: StructureType.Quartermaster,\n\t\tname: 'Quartermaster',\n\t\tpackID: '',\n\t\tdescription: 'The quartermaster requisitions and maintains equipment.',\n\t\tposition: { x: 0, y: 0 },\n\t\tlevel: 1,\n\t\tcharges: 0\n\t});\n\n\tstatic temple = (): StructureModel => ({\n\t\tid: 'structure-temple',\n\t\ttype: StructureType.Temple,\n\t\tname: 'Temple',\n\t\tpackID: PackData.faith().id,\n\t\tdescription: 'A place for heroes to pray to their gods for good fortune.',\n\t\tposition: { x: 0, y: 0 },\n\t\tlevel: 1,\n\t\tcharges: 0\n\t});\n\n\tstatic thief = (): StructureModel => ({\n\t\tid: 'structure-thief',\n\t\ttype: StructureType.ThievesGuild,\n\t\tname: 'Thieves\\' Guild',\n\t\tpackID: PackData.skullduggery().id,\n\t\tdescription: 'This nondescript structure houses those who utilize every possible advantage.',\n\t\tposition: { x: 0, y: 0 },\n\t\tlevel: 1,\n\t\tcharges: 0\n\t});\n\n\tstatic training = (): StructureModel => ({\n\t\tid: 'structure-training',\n\t\ttype: StructureType.TrainingGround,\n\t\tname: 'Training Ground',\n\t\tpackID: '',\n\t\tdescription: 'A place for heroes of all kinds to improve their abilities.',\n\t\tposition: { x: 0, y: 0 },\n\t\tlevel: 1,\n\t\tcharges: 0\n\t});\n\n\tstatic warRoom = (): StructureModel => ({\n\t\tid: 'structure-war-room',\n\t\ttype: StructureType.WarRoom,\n\t\tname: 'War Room',\n\t\tpackID: '',\n\t\tdescription: 'Inside this heavily-guarded building, strategies are formulated.',\n\t\tposition: { x: 0, y: 0 },\n\t\tlevel: 1,\n\t\tcharges: 0\n\t});\n\n\tstatic wizard = (): StructureModel => ({\n\t\tid: 'structure-wizard',\n\t\ttype: StructureType.WizardTower,\n\t\tname: 'Wizard Tower',\n\t\tpackID: '',\n\t\tdescription: 'A wizard\\'s tower is often full of mysterious items.',\n\t\tposition: { x: 0, y: 0 },\n\t\tlevel: 1,\n\t\tcharges: 0\n\t});\n\n\tstatic getList = (): StructureModel[] => {\n\t\tconst list = [\n\t\t\tStructureData.academy(),\n\t\t\tStructureData.barracks(),\n\t\t\tStructureData.forge(),\n\t\t\tStructureData.recruitment(),\n\t\t\tStructureData.intelligencer(),\n\t\t\tStructureData.observatory(),\n\t\t\tStructureData.quartermaster(),\n\t\t\tStructureData.temple(),\n\t\t\tStructureData.thief(),\n\t\t\tStructureData.training(),\n\t\t\tStructureData.warRoom(),\n\t\t\tStructureData.wizard()\n\t\t];\n\n\t\treturn Collections.sort(list, n => n.name);\n\t};\n}\n","import { Random } from './random';\n\nexport class Utils {\n\tstatic guid = (): string => {\n\t\tconst letters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz1234567890';\n\t\tlet id = '';\n\t\twhile (id.length < 16) {\n\t\t\tconst n = Random.randomNumber(letters.length);\n\t\t\tid += letters[n];\n\t\t}\n\t\treturn id;\n\t};\n\n\tstatic debounce = (func: () => void, delay = 500) => {\n\t\tlet timeout: NodeJS.Timeout;\n\t\treturn () => {\n\t\t\tclearTimeout(timeout);\n\t\t\ttimeout = setTimeout(func, delay);\n\t\t};\n\t};\n\n\tstatic intersects = (light: { a: { x: number, y: number }, b: { x: number, y: number } }, wall: { a: { x: number, y: number }, b: { x: number, y: number } }) => {\n\t\tconst det = (light.b.x - light.a.x) * (wall.b.y - wall.a.y) - (wall.b.x - wall.a.x) * (light.b.y - light.a.y);\n\t\tif (det === 0) {\n\t\t\treturn false;\n\t\t} else {\n\t\t\tconst lambda = ((wall.b.y - wall.a.y) * (wall.b.x - light.a.x) + (wall.a.x - wall.b.x) * (wall.b.y - light.a.y)) / det;\n\t\t\tconst gamma = ((light.a.y - light.b.y) * (wall.b.x - light.a.x) + (light.b.x - light.a.x) * (wall.b.y - light.a.y)) / det;\n\t\t\treturn (0 <= lambda && lambda <= 1) && (0 <= gamma && gamma <= 1);\n\t\t}\n\t};\n}\n","import { StructureType } from '../enums/structure-type';\n\nimport type { GameModel } from '../models/game';\nimport type { StructureModel } from '../models/structure';\n\nimport { Collections } from '../utils/collections';\nimport { Utils } from '../utils/utils';\n\nexport class StrongholdLogic {\n\tstatic getDimensions = (stronghold: StructureModel[]) => {\n\t\tconst dims = {\n\t\t\tleft: Number.MIN_VALUE,\n\t\t\ttop: Number.MIN_VALUE,\n\t\t\tright: Number.MIN_VALUE,\n\t\t\tbottom: Number.MIN_VALUE\n\t\t};\n\n\t\tstronghold.forEach(structure => {\n\t\t\tdims.left = dims.left === Number.MIN_VALUE ? structure.position.x : Math.min(dims.left, structure.position.x);\n\t\t\tdims.top = dims.top === Number.MIN_VALUE ? structure.position.y : Math.min(dims.top, structure.position.y);\n\t\t\tdims.right = dims.right === Number.MIN_VALUE ? structure.position.x : Math.max(dims.right, structure.position.x);\n\t\t\tdims.bottom = dims.bottom === Number.MIN_VALUE ? structure.position.y : Math.max(dims.bottom, structure.position.y);\n\t\t});\n\n\t\treturn dims;\n\t};\n\n\tstatic addStructure = (stronghold: StructureModel[], structure: StructureModel) => {\n\t\tconst copy = JSON.parse(JSON.stringify(structure)) as StructureModel;\n\t\tcopy.id = Utils.guid();\n\t\tcopy.position = StrongholdLogic.getEmptyPosition(stronghold);\n\t\tif (StrongholdLogic.canCharge(copy)) {\n\t\t\tcopy.charges = copy.level;\n\t\t}\n\t\tstronghold.push(copy);\n\t};\n\n\tstatic getEmptyPosition = (stronghold: StructureModel[]) => {\n\t\tconst adj: { x: number, y: number }[] = [];\n\n\t\tstronghold.forEach(s => {\n\t\t\tconst minX = s.position.x - 3;\n\t\t\tconst maxX = s.position.x + 3;\n\t\t\tconst minY = s.position.y - 3;\n\t\t\tconst maxY = s.position.y + 3;\n\t\t\tfor (let x = minX; x < maxX; ++x) {\n\t\t\t\tfor (let y = minY; y < maxY; ++y) {\n\t\t\t\t\tadj.push({ x: x, y: y });\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tconst empty = adj.filter(sq => !stronghold.find(s => (s.position.x === sq.x) && s.position.y === sq.y));\n\t\tif (empty.length === 0) {\n\t\t\treturn {\n\t\t\t\tx: 0,\n\t\t\t\ty: 0\n\t\t\t};\n\t\t}\n\n\t\tconst square = Collections.draw(empty);\n\n\t\treturn {\n\t\t\tx: square.x,\n\t\t\ty: square.y\n\t\t};\n\t};\n\n\tstatic getUpgradeCost = (structure: StructureModel) => {\n\t\treturn structure.level * 50;\n\t};\n\n\tstatic canCharge = (structure: StructureModel) => {\n\t\tswitch (structure.type) {\n\t\t\tcase StructureType.Barracks:\n\t\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t};\n\n\tstatic getHeroLimit = (game: GameModel) => {\n\t\tlet count = 0;\n\n\t\tgame.stronghold\n\t\t\t.filter(s => s.type === StructureType.Barracks)\n\t\t\t.forEach(s => count += s.level * 3);\n\n\t\treturn count;\n\t};\n\n\tstatic getStructureCharges = (game: GameModel, type: StructureType) => {\n\t\treturn Collections.sum(game.stronghold.filter(s => s.type === type), s => s.charges);\n\t};\n\n\tstatic useCharge = (game: GameModel, type: StructureType, count: number) => {\n\t\tfor (let n = 0; n < count; ++n) {\n\t\t\tconst structures = game.stronghold\n\t\t\t\t.filter(s => s.type === type)\n\t\t\t\t.filter(s => s.charges > 0);\n\t\t\tif (structures.length > 0) {\n\t\t\t\tconst structure = Collections.draw(structures);\n\t\t\t\tstructure.charges -= 1;\n\t\t\t}\n\t\t}\n\t};\n}\n","import localforage from 'localforage';\n\nimport { StructureData } from '../data/structure-data';\n\nimport { StrongholdLogic } from '../logic/stronghold-logic';\n\nimport type { GameModel } from '../models/game';\nimport type { OptionsModel } from '../models/options';\nimport type { PackModel } from '../models/pack';\n\nimport { Utils } from '../utils/utils';\n\nexport class Platform {\n\tworker: Worker;\n\n\tgetGame: () => (GameModel | null);\n\tgetOptions: () => (OptionsModel | null);\n\tlogException: (msg: unknown) => void;\n\n\tconstructor() {\n\t\tthis.worker = new Worker(new URL('./worker.ts', import.meta.url));\n\t\tthis.worker.onmessage = message => {\n\t\t\tthis.logException(message);\n\t\t};\n\n\t\tthis.getGame = () => {\n\t\t\treturn null;\n\t\t};\n\n\t\tthis.getOptions = () => {\n\t\t\treturn null;\n\t\t};\n\n\t\tthis.logException = msg => {\n\t\t\tconsole.error(msg);\n\t\t};\n\t}\n\n\tlogIn = () => {\n\t\treturn new Promise<{ game: GameModel | null, options: OptionsModel }>(resolve => {\n\t\t\tlocalforage\n\t\t\t\t.getItem<GameModel>('skirmish-game')\n\t\t\t\t.then(game => {\n\t\t\t\t\tif (game) {\n\t\t\t\t\t\tthis.updateGame(game);\n\t\t\t\t\t}\n\n\t\t\t\t\tlocalforage\n\t\t\t\t\t\t.getItem<OptionsModel>('skirmish-options')\n\t\t\t\t\t\t.then(options => {\n\t\t\t\t\t\t\tif (options) {\n\t\t\t\t\t\t\t\tthis.updateOptions(options);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\toptions = {\n\t\t\t\t\t\t\t\t\tdeveloper: false,\n\t\t\t\t\t\t\t\t\tshowTips: true,\n\t\t\t\t\t\t\t\t\tsoundEffectsVolume: 0.5,\n\t\t\t\t\t\t\t\t\tpackIDs: []\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tresolve({ game: game, options: options });\n\t\t\t\t\t\t});\n\t\t\t\t});\n\t\t});\n\t};\n\n\tprivate updateGame = (game: GameModel) => {\n\t\tif (game.structureSlots === undefined) {\n\t\t\tgame.structureSlots = 0;\n\t\t}\n\n\t\tgame.heroes.forEach(h => {\n\t\t\tif (h.faction === undefined) {\n\t\t\t\th.faction = h.type;\n\t\t\t}\n\t\t});\n\n\t\tif (!game.stronghold) {\n\t\t\tgame.stronghold = [];\n\t\t\tStrongholdLogic.addStructure(game.stronghold, StructureData.barracks());\n\t\t\tStrongholdLogic.addStructure(game.stronghold, StructureData.barracks());\n\t\t}\n\n\t\tif (game.encounter) {\n\t\t\tgame.encounter.combatants.forEach(c => {\n\t\t\t\tif (c.faction === undefined) {\n\t\t\t\t\tc.faction = c.type;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tgame.encounter.loot.forEach(lp => {\n\t\t\t\tif (lp.money === undefined) {\n\t\t\t\t\tlp.money = 0;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tgame.map.regions\n\t\t\t.filter(r => r.encounters.length > 10)\n\t\t\t.forEach(r => {\n\t\t\t\tr.encounters = r.encounters.slice(0, 9);\n\t\t\t});\n\t};\n\n\tprivate updateOptions = (options: OptionsModel) => {\n\t\tif (options.showTips === undefined) {\n\t\t\toptions.showTips = true;\n\t\t}\n\n\t\tif (options.packIDs === undefined) {\n\t\t\toptions.packIDs = [];\n\t\t}\n\t};\n\n\tsaveGame = Utils.debounce(() => {\n\t\tthis.worker.postMessage({ type: 'game', payload: this.getGame() });\n\t});\n\n\tsaveOptions = Utils.debounce(() => {\n\t\tthis.worker.postMessage({ type: 'options', payload: this.getOptions() });\n\t});\n\n\tgetPackPrice = (packs: PackModel[], options: OptionsModel) => {\n\t\treturn 0;\n\n\t\t/*\n\t\treturn Collections.sum(packs, pack => {\n\t\t\tconst cards = PackLogic.getPackCardCount(pack.id);\n\t\t\tconst cents = Math.max((cards - 1) * 50, 100);\n\t\t\treturn (cents - 1) / 100;\n\t\t});\n\t\t*/\n\t};\n\n\tgetPacks = (packs: PackModel[], options: OptionsModel) => {\n\t\treturn Promise.resolve();\n\t};\n}\n","export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n  return arr2;\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}","import arrayWithoutHoles from \"./arrayWithoutHoles.js\";\nimport iterableToArray from \"./iterableToArray.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableSpread from \"./nonIterableSpread.js\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  Object.defineProperty(subClass, \"prototype\", {\n    writable: false\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","export default function _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n  return self;\n}","import getPrototypeOf from \"./getPrototypeOf.js\";\nimport isNativeReflectConstruct from \"./isNativeReflectConstruct.js\";\nimport possibleConstructorReturn from \"./possibleConstructorReturn.js\";\nexport default function _createSuper(Derived) {\n  var hasNativeReflectConstruct = isNativeReflectConstruct();\n  return function _createSuperInternal() {\n    var Super = getPrototypeOf(Derived),\n      result;\n    if (hasNativeReflectConstruct) {\n      var NewTarget = getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n    return possibleConstructorReturn(this, result);\n  };\n}","import _typeof from \"./typeof.js\";\nimport assertThisInitialized from \"./assertThisInitialized.js\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  } else if (call !== void 0) {\n    throw new TypeError(\"Derived constructors may only return object or undefined\");\n  }\n  return assertThisInitialized(self);\n}","export default function _taggedTemplateLiteral(strings, raw) {\n  if (!raw) {\n    raw = strings.slice(0);\n  }\n  return Object.freeze(Object.defineProperties(strings, {\n    raw: {\n      value: Object.freeze(raw)\n    }\n  }));\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import arrayWithHoles from \"./arrayWithHoles.js\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableRest from \"./nonIterableRest.js\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","export default function _iterableToArrayLimit(r, l) {\n  var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"];\n  if (null != t) {\n    var e,\n      n,\n      i,\n      u,\n      a = [],\n      f = !0,\n      o = !1;\n    try {\n      if (i = (t = t.call(r)).next, 0 === l) {\n        if (Object(t) !== t) return;\n        f = !1;\n      } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0);\n    } catch (r) {\n      o = !0, n = r;\n    } finally {\n      try {\n        if (!f && null != t[\"return\"] && (u = t[\"return\"](), Object(u) !== u)) return;\n      } finally {\n        if (o) throw n;\n      }\n    }\n    return a;\n  }\n}","import toPropertyKey from \"./toPropertyKey.js\";\nexport default function _defineProperty(obj, key, value) {\n  key = toPropertyKey(key);\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}","import defineProperty from \"./defineProperty.js\";\nfunction ownKeys(e, r) {\n  var t = Object.keys(e);\n  if (Object.getOwnPropertySymbols) {\n    var o = Object.getOwnPropertySymbols(e);\n    r && (o = o.filter(function (r) {\n      return Object.getOwnPropertyDescriptor(e, r).enumerable;\n    })), t.push.apply(t, o);\n  }\n  return t;\n}\nexport default function _objectSpread2(e) {\n  for (var r = 1; r < arguments.length; r++) {\n    var t = null != arguments[r] ? arguments[r] : {};\n    r % 2 ? ownKeys(Object(t), !0).forEach(function (r) {\n      defineProperty(e, r, t[r]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) {\n      Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r));\n    });\n  }\n  return e;\n}","let e={data:\"\"},t=t=>\"object\"==typeof window?((t?t.querySelector(\"#_goober\"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement(\"style\")),{innerHTML:\" \",id:\"_goober\"})).firstChild:t||e,r=e=>{let r=t(e),l=r.data;return r.data=\"\",l},l=/(?:([\\u0080-\\uFFFF\\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\\s*)/g,a=/\\/\\*[^]*?\\*\\/|  +/g,n=/\\n+/g,o=(e,t)=>{let r=\"\",l=\"\",a=\"\";for(let n in e){let c=e[n];\"@\"==n[0]?\"i\"==n[1]?r=n+\" \"+c+\";\":l+=\"f\"==n[1]?o(c,n):n+\"{\"+o(c,\"k\"==n[1]?\"\":t)+\"}\":\"object\"==typeof c?l+=o(c,t?t.replace(/([^,])+/g,e=>n.replace(/(^:.*)|([^,])+/g,t=>/&/.test(t)?t.replace(/&/g,e):e?e+\" \"+t:t)):n):null!=c&&(n=/^--/.test(n)?n:n.replace(/[A-Z]/g,\"-$&\").toLowerCase(),a+=o.p?o.p(n,c):n+\":\"+c+\";\")}return r+(t&&a?t+\"{\"+a+\"}\":a)+l},c={},s=e=>{if(\"object\"==typeof e){let t=\"\";for(let r in e)t+=r+s(e[r]);return t}return e},i=(e,t,r,i,p)=>{let u=s(e),d=c[u]||(c[u]=(e=>{let t=0,r=11;for(;t<e.length;)r=101*r+e.charCodeAt(t++)>>>0;return\"go\"+r})(u));if(!c[d]){let t=u!==e?e:(e=>{let t,r,o=[{}];for(;t=l.exec(e.replace(a,\"\"));)t[4]?o.shift():t[3]?(r=t[3].replace(n,\" \").trim(),o.unshift(o[0][r]=o[0][r]||{})):o[0][t[1]]=t[2].replace(n,\" \").trim();return o[0]})(e);c[d]=o(p?{[\"@keyframes \"+d]:t}:t,r?\"\":\".\"+d)}let f=r&&c.g?c.g:null;return r&&(c.g=c[d]),((e,t,r,l)=>{l?t.data=t.data.replace(l,e):-1===t.data.indexOf(e)&&(t.data=r?e+t.data:t.data+e)})(c[d],t,i,f),d},p=(e,t,r)=>e.reduce((e,l,a)=>{let n=t[a];if(n&&n.call){let e=n(r),t=e&&e.props&&e.props.className||/^go/.test(e)&&e;n=t?\".\"+t:e&&\"object\"==typeof e?e.props?\"\":o(e,\"\"):!1===e?\"\":e}return e+l+(null==n?\"\":n)},\"\");function u(e){let r=this||{},l=e.call?e(r.p):e;return i(l.unshift?l.raw?p(l,[].slice.call(arguments,1),r.p):l.reduce((e,t)=>Object.assign(e,t&&t.call?t(r.p):t),{}):l,t(r.target),r.g,r.o,r.k)}let d,f,g,b=u.bind({g:1}),h=u.bind({k:1});function m(e,t,r,l){o.p=t,d=e,f=r,g=l}function j(e,t){let r=this||{};return function(){let l=arguments;function a(n,o){let c=Object.assign({},n),s=c.className||a.className;r.p=Object.assign({theme:f&&f()},c),r.o=/ *go\\d+/.test(s),c.className=u.apply(r,l)+(s?\" \"+s:\"\"),t&&(c.ref=o);let i=e;return e[0]&&(i=c.as||e,delete c.as),g&&i[0]&&g(c),d(i,c)}return t?t(a):a}}export{u as css,r as extractCss,b as glob,h as keyframes,m as setup,j as styled};\n","import { CSSProperties } from 'react';\n\nexport type ToastType = 'success' | 'error' | 'loading' | 'blank' | 'custom';\nexport type ToastPosition =\n  | 'top-left'\n  | 'top-center'\n  | 'top-right'\n  | 'bottom-left'\n  | 'bottom-center'\n  | 'bottom-right';\n\nexport type Renderable = JSX.Element | string | null;\n\nexport interface IconTheme {\n  primary: string;\n  secondary: string;\n}\n\nexport type ValueFunction<TValue, TArg> = (arg: TArg) => TValue;\nexport type ValueOrFunction<TValue, TArg> =\n  | TValue\n  | ValueFunction<TValue, TArg>;\n\nconst isFunction = <TValue, TArg>(\n  valOrFunction: ValueOrFunction<TValue, TArg>\n): valOrFunction is ValueFunction<TValue, TArg> =>\n  typeof valOrFunction === 'function';\n\nexport const resolveValue = <TValue, TArg>(\n  valOrFunction: ValueOrFunction<TValue, TArg>,\n  arg: TArg\n): TValue => (isFunction(valOrFunction) ? valOrFunction(arg) : valOrFunction);\n\nexport interface Toast {\n  type: ToastType;\n  id: string;\n  message: ValueOrFunction<Renderable, Toast>;\n  icon?: Renderable;\n  duration?: number;\n  pauseDuration: number;\n  position?: ToastPosition;\n\n  ariaProps: {\n    role: 'status' | 'alert';\n    'aria-live': 'assertive' | 'off' | 'polite';\n  };\n\n  style?: CSSProperties;\n  className?: string;\n  iconTheme?: IconTheme;\n\n  createdAt: number;\n  visible: boolean;\n  height?: number;\n}\n\nexport type ToastOptions = Partial<\n  Pick<\n    Toast,\n    | 'id'\n    | 'icon'\n    | 'duration'\n    | 'ariaProps'\n    | 'className'\n    | 'style'\n    | 'position'\n    | 'iconTheme'\n  >\n>;\n\nexport type DefaultToastOptions = ToastOptions & {\n  [key in ToastType]?: ToastOptions;\n};\n\nexport interface ToasterProps {\n  position?: ToastPosition;\n  toastOptions?: DefaultToastOptions;\n  reverseOrder?: boolean;\n  gutter?: number;\n  containerStyle?: React.CSSProperties;\n  containerClassName?: string;\n  children?: (toast: Toast) => JSX.Element;\n}\n\nexport interface ToastWrapperProps {\n  id: string;\n  className?: string;\n  style?: React.CSSProperties;\n  onHeightUpdate: (id: string, height: number) => void;\n  children?: React.ReactNode;\n}\n","export const genId = (() => {\n  let count = 0;\n  return () => {\n    return (++count).toString();\n  };\n})();\n\nexport const prefersReducedMotion = (() => {\n  // Cache result\n  let shouldReduceMotion: boolean | undefined = undefined;\n\n  return () => {\n    if (shouldReduceMotion === undefined && typeof window !== 'undefined') {\n      const mediaQuery = matchMedia('(prefers-reduced-motion: reduce)');\n      shouldReduceMotion = !mediaQuery || mediaQuery.matches;\n    }\n    return shouldReduceMotion;\n  };\n})();\n","import { useEffect, useState } from 'react';\nimport { DefaultToastOptions, Toast, ToastType } from './types';\n\nconst TOAST_LIMIT = 20;\n\nexport enum ActionType {\n  ADD_TOAST,\n  UPDATE_TOAST,\n  UPSERT_TOAST,\n  DISMISS_TOAST,\n  REMOVE_TOAST,\n  START_PAUSE,\n  END_PAUSE,\n}\n\ntype Action =\n  | {\n      type: ActionType.ADD_TOAST;\n      toast: Toast;\n    }\n  | {\n      type: ActionType.UPSERT_TOAST;\n      toast: Toast;\n    }\n  | {\n      type: ActionType.UPDATE_TOAST;\n      toast: Partial<Toast>;\n    }\n  | {\n      type: ActionType.DISMISS_TOAST;\n      toastId?: string;\n    }\n  | {\n      type: ActionType.REMOVE_TOAST;\n      toastId?: string;\n    }\n  | {\n      type: ActionType.START_PAUSE;\n      time: number;\n    }\n  | {\n      type: ActionType.END_PAUSE;\n      time: number;\n    };\n\ninterface State {\n  toasts: Toast[];\n  pausedAt: number | undefined;\n}\n\nconst toastTimeouts = new Map<Toast['id'], ReturnType<typeof setTimeout>>();\n\nexport const TOAST_EXPIRE_DISMISS_DELAY = 1000;\n\nconst addToRemoveQueue = (toastId: string) => {\n  if (toastTimeouts.has(toastId)) {\n    return;\n  }\n\n  const timeout = setTimeout(() => {\n    toastTimeouts.delete(toastId);\n    dispatch({\n      type: ActionType.REMOVE_TOAST,\n      toastId: toastId,\n    });\n  }, TOAST_EXPIRE_DISMISS_DELAY);\n\n  toastTimeouts.set(toastId, timeout);\n};\n\nconst clearFromRemoveQueue = (toastId: string) => {\n  const timeout = toastTimeouts.get(toastId);\n  if (timeout) {\n    clearTimeout(timeout);\n  }\n};\n\nexport const reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case ActionType.ADD_TOAST:\n      return {\n        ...state,\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\n      };\n\n    case ActionType.UPDATE_TOAST:\n      //  ! Side effects !\n      if (action.toast.id) {\n        clearFromRemoveQueue(action.toast.id);\n      }\n\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === action.toast.id ? { ...t, ...action.toast } : t\n        ),\n      };\n\n    case ActionType.UPSERT_TOAST:\n      const { toast } = action;\n      return state.toasts.find((t) => t.id === toast.id)\n        ? reducer(state, { type: ActionType.UPDATE_TOAST, toast })\n        : reducer(state, { type: ActionType.ADD_TOAST, toast });\n\n    case ActionType.DISMISS_TOAST:\n      const { toastId } = action;\n\n      // ! Side effects ! - This could be execrated into a dismissToast() action, but I'll keep it here for simplicity\n      if (toastId) {\n        addToRemoveQueue(toastId);\n      } else {\n        state.toasts.forEach((toast) => {\n          addToRemoveQueue(toast.id);\n        });\n      }\n\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === toastId || toastId === undefined\n            ? {\n                ...t,\n                visible: false,\n              }\n            : t\n        ),\n      };\n    case ActionType.REMOVE_TOAST:\n      if (action.toastId === undefined) {\n        return {\n          ...state,\n          toasts: [],\n        };\n      }\n      return {\n        ...state,\n        toasts: state.toasts.filter((t) => t.id !== action.toastId),\n      };\n\n    case ActionType.START_PAUSE:\n      return {\n        ...state,\n        pausedAt: action.time,\n      };\n\n    case ActionType.END_PAUSE:\n      const diff = action.time - (state.pausedAt || 0);\n\n      return {\n        ...state,\n        pausedAt: undefined,\n        toasts: state.toasts.map((t) => ({\n          ...t,\n          pauseDuration: t.pauseDuration + diff,\n        })),\n      };\n  }\n};\n\nconst listeners: Array<(state: State) => void> = [];\n\nlet memoryState: State = { toasts: [], pausedAt: undefined };\n\nexport const dispatch = (action: Action) => {\n  memoryState = reducer(memoryState, action);\n  listeners.forEach((listener) => {\n    listener(memoryState);\n  });\n};\n\nexport const defaultTimeouts: {\n  [key in ToastType]: number;\n} = {\n  blank: 4000,\n  error: 4000,\n  success: 2000,\n  loading: Infinity,\n  custom: 4000,\n};\n\nexport const useStore = (toastOptions: DefaultToastOptions = {}): State => {\n  const [state, setState] = useState<State>(memoryState);\n  useEffect(() => {\n    listeners.push(setState);\n    return () => {\n      const index = listeners.indexOf(setState);\n      if (index > -1) {\n        listeners.splice(index, 1);\n      }\n    };\n  }, [state]);\n\n  const mergedToasts = state.toasts.map((t) => ({\n    ...toastOptions,\n    ...toastOptions[t.type],\n    ...t,\n    duration:\n      t.duration ||\n      toastOptions[t.type]?.duration ||\n      toastOptions?.duration ||\n      defaultTimeouts[t.type],\n    style: {\n      ...toastOptions.style,\n      ...toastOptions[t.type]?.style,\n      ...t.style,\n    },\n  }));\n\n  return {\n    ...state,\n    toasts: mergedToasts,\n  };\n};\n","import {\n  Renderable,\n  Toast,\n  ToastOptions,\n  ToastType,\n  DefaultToastOptions,\n  ValueOrFunction,\n  resolveValue,\n} from './types';\nimport { genId } from './utils';\nimport { dispatch, ActionType } from './store';\n\ntype Message = ValueOrFunction<Renderable, Toast>;\n\ntype ToastHandler = (message: Message, options?: ToastOptions) => string;\n\nconst createToast = (\n  message: Message,\n  type: ToastType = 'blank',\n  opts?: ToastOptions\n): Toast => ({\n  createdAt: Date.now(),\n  visible: true,\n  type,\n  ariaProps: {\n    role: 'status',\n    'aria-live': 'polite',\n  },\n  message,\n  pauseDuration: 0,\n  ...opts,\n  id: opts?.id || genId(),\n});\n\nconst createHandler =\n  (type?: ToastType): ToastHandler =>\n  (message, options) => {\n    const toast = createToast(message, type, options);\n    dispatch({ type: ActionType.UPSERT_TOAST, toast });\n    return toast.id;\n  };\n\nconst toast = (message: Message, opts?: ToastOptions) =>\n  createHandler('blank')(message, opts);\n\ntoast.error = createHandler('error');\ntoast.success = createHandler('success');\ntoast.loading = createHandler('loading');\ntoast.custom = createHandler('custom');\n\ntoast.dismiss = (toastId?: string) => {\n  dispatch({\n    type: ActionType.DISMISS_TOAST,\n    toastId,\n  });\n};\n\ntoast.remove = (toastId?: string) =>\n  dispatch({ type: ActionType.REMOVE_TOAST, toastId });\n\ntoast.promise = <T>(\n  promise: Promise<T>,\n  msgs: {\n    loading: Renderable;\n    success: ValueOrFunction<Renderable, T>;\n    error: ValueOrFunction<Renderable, any>;\n  },\n  opts?: DefaultToastOptions\n) => {\n  const id = toast.loading(msgs.loading, { ...opts, ...opts?.loading });\n\n  promise\n    .then((p) => {\n      toast.success(resolveValue(msgs.success, p), {\n        id,\n        ...opts,\n        ...opts?.success,\n      });\n      return p;\n    })\n    .catch((e) => {\n      toast.error(resolveValue(msgs.error, e), {\n        id,\n        ...opts,\n        ...opts?.error,\n      });\n    });\n\n  return promise;\n};\n\nexport { toast };\n","import { useEffect, useCallback } from 'react';\nimport { dispatch, ActionType, useStore } from './store';\nimport { toast } from './toast';\nimport { DefaultToastOptions, Toast, ToastPosition } from './types';\n\nconst updateHeight = (toastId: string, height: number) => {\n  dispatch({\n    type: ActionType.UPDATE_TOAST,\n    toast: { id: toastId, height },\n  });\n};\nconst startPause = () => {\n  dispatch({\n    type: ActionType.START_PAUSE,\n    time: Date.now(),\n  });\n};\n\nexport const useToaster = (toastOptions?: DefaultToastOptions) => {\n  const { toasts, pausedAt } = useStore(toastOptions);\n\n  useEffect(() => {\n    if (pausedAt) {\n      return;\n    }\n\n    const now = Date.now();\n    const timeouts = toasts.map((t) => {\n      if (t.duration === Infinity) {\n        return;\n      }\n\n      const durationLeft =\n        (t.duration || 0) + t.pauseDuration - (now - t.createdAt);\n\n      if (durationLeft < 0) {\n        if (t.visible) {\n          toast.dismiss(t.id);\n        }\n        return;\n      }\n      return setTimeout(() => toast.dismiss(t.id), durationLeft);\n    });\n\n    return () => {\n      timeouts.forEach((timeout) => timeout && clearTimeout(timeout));\n    };\n  }, [toasts, pausedAt]);\n\n  const endPause = useCallback(() => {\n    if (pausedAt) {\n      dispatch({ type: ActionType.END_PAUSE, time: Date.now() });\n    }\n  }, [pausedAt]);\n\n  const calculateOffset = useCallback(\n    (\n      toast: Toast,\n      opts?: {\n        reverseOrder?: boolean;\n        gutter?: number;\n        defaultPosition?: ToastPosition;\n      }\n    ) => {\n      const { reverseOrder = false, gutter = 8, defaultPosition } = opts || {};\n\n      const relevantToasts = toasts.filter(\n        (t) =>\n          (t.position || defaultPosition) ===\n            (toast.position || defaultPosition) && t.height\n      );\n      const toastIndex = relevantToasts.findIndex((t) => t.id === toast.id);\n      const toastsBefore = relevantToasts.filter(\n        (toast, i) => i < toastIndex && toast.visible\n      ).length;\n\n      const offset = relevantToasts\n        .filter((t) => t.visible)\n        .slice(...(reverseOrder ? [toastsBefore + 1] : [0, toastsBefore]))\n        .reduce((acc, t) => acc + (t.height || 0) + gutter, 0);\n\n      return offset;\n    },\n    [toasts]\n  );\n\n  return {\n    toasts,\n    handlers: {\n      updateHeight,\n      startPause,\n      endPause,\n      calculateOffset,\n    },\n  };\n};\n","import { styled, keyframes } from 'goober';\n\nconst circleAnimation = keyframes`\nfrom {\n  transform: scale(0) rotate(45deg);\n\topacity: 0;\n}\nto {\n transform: scale(1) rotate(45deg);\n  opacity: 1;\n}`;\n\nconst firstLineAnimation = keyframes`\nfrom {\n  transform: scale(0);\n  opacity: 0;\n}\nto {\n  transform: scale(1);\n  opacity: 1;\n}`;\n\nconst secondLineAnimation = keyframes`\nfrom {\n  transform: scale(0) rotate(90deg);\n\topacity: 0;\n}\nto {\n  transform: scale(1) rotate(90deg);\n\topacity: 1;\n}`;\n\nexport interface ErrorTheme {\n  primary?: string;\n  secondary?: string;\n}\n\nexport const ErrorIcon = styled('div')<ErrorTheme>`\n  width: 20px;\n  opacity: 0;\n  height: 20px;\n  border-radius: 10px;\n  background: ${(p) => p.primary || '#ff4b4b'};\n  position: relative;\n  transform: rotate(45deg);\n\n  animation: ${circleAnimation} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n  animation-delay: 100ms;\n\n  &:after,\n  &:before {\n    content: '';\n    animation: ${firstLineAnimation} 0.15s ease-out forwards;\n    animation-delay: 150ms;\n    position: absolute;\n    border-radius: 3px;\n    opacity: 0;\n    background: ${(p) => p.secondary || '#fff'};\n    bottom: 9px;\n    left: 4px;\n    height: 2px;\n    width: 12px;\n  }\n\n  &:before {\n    animation: ${secondLineAnimation} 0.15s ease-out forwards;\n    animation-delay: 180ms;\n    transform: rotate(90deg);\n  }\n`;\n","import { styled, keyframes } from 'goober';\n\nconst rotate = keyframes`\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n`;\n\nexport interface LoaderTheme {\n  primary?: string;\n  secondary?: string;\n}\n\nexport const LoaderIcon = styled('div')<LoaderTheme>`\n  width: 12px;\n  height: 12px;\n  box-sizing: border-box;\n  border: 2px solid;\n  border-radius: 100%;\n  border-color: ${(p) => p.secondary || '#e0e0e0'};\n  border-right-color: ${(p) => p.primary || '#616161'};\n  animation: ${rotate} 1s linear infinite;\n`;\n","import { styled, keyframes } from 'goober';\n\nconst circleAnimation = keyframes`\nfrom {\n  transform: scale(0) rotate(45deg);\n\topacity: 0;\n}\nto {\n  transform: scale(1) rotate(45deg);\n\topacity: 1;\n}`;\n\nconst checkmarkAnimation = keyframes`\n0% {\n\theight: 0;\n\twidth: 0;\n\topacity: 0;\n}\n40% {\n  height: 0;\n\twidth: 6px;\n\topacity: 1;\n}\n100% {\n  opacity: 1;\n  height: 10px;\n}`;\n\nexport interface CheckmarkTheme {\n  primary?: string;\n  secondary?: string;\n}\n\nexport const CheckmarkIcon = styled('div')<CheckmarkTheme>`\n  width: 20px;\n  opacity: 0;\n  height: 20px;\n  border-radius: 10px;\n  background: ${(p) => p.primary || '#61d345'};\n  position: relative;\n  transform: rotate(45deg);\n\n  animation: ${circleAnimation} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n  animation-delay: 100ms;\n  &:after {\n    content: '';\n    box-sizing: border-box;\n    animation: ${checkmarkAnimation} 0.2s ease-out forwards;\n    opacity: 0;\n    animation-delay: 200ms;\n    position: absolute;\n    border-right: 2px solid;\n    border-bottom: 2px solid;\n    border-color: ${(p) => p.secondary || '#fff'};\n    bottom: 6px;\n    left: 6px;\n    height: 10px;\n    width: 6px;\n  }\n`;\n","import * as React from 'react';\nimport { styled, keyframes } from 'goober';\n\nimport { Toast } from '../core/types';\nimport { ErrorIcon, ErrorTheme } from './error';\nimport { LoaderIcon, LoaderTheme } from './loader';\nimport { CheckmarkIcon, CheckmarkTheme } from './checkmark';\n\nconst StatusWrapper = styled('div')`\n  position: absolute;\n`;\n\nconst IndicatorWrapper = styled('div')`\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  min-width: 20px;\n  min-height: 20px;\n`;\n\nconst enter = keyframes`\nfrom {\n  transform: scale(0.6);\n  opacity: 0.4;\n}\nto {\n  transform: scale(1);\n  opacity: 1;\n}`;\n\nexport const AnimatedIconWrapper = styled('div')`\n  position: relative;\n  transform: scale(0.6);\n  opacity: 0.4;\n  min-width: 20px;\n  animation: ${enter} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n`;\n\nexport type IconThemes = Partial<{\n  success: CheckmarkTheme;\n  error: ErrorTheme;\n  loading: LoaderTheme;\n}>;\n\nexport const ToastIcon: React.FC<{\n  toast: Toast;\n}> = ({ toast }) => {\n  const { icon, type, iconTheme } = toast;\n  if (icon !== undefined) {\n    if (typeof icon === 'string') {\n      return <AnimatedIconWrapper>{icon}</AnimatedIconWrapper>;\n    } else {\n      return icon;\n    }\n  }\n\n  if (type === 'blank') {\n    return null;\n  }\n\n  return (\n    <IndicatorWrapper>\n      <LoaderIcon {...iconTheme} />\n      {type !== 'loading' && (\n        <StatusWrapper>\n          {type === 'error' ? (\n            <ErrorIcon {...iconTheme} />\n          ) : (\n            <CheckmarkIcon {...iconTheme} />\n          )}\n        </StatusWrapper>\n      )}\n    </IndicatorWrapper>\n  );\n};\n","import * as React from 'react';\nimport { styled, keyframes } from 'goober';\n\nimport { Toast, ToastPosition, resolveValue, Renderable } from '../core/types';\nimport { ToastIcon } from './toast-icon';\nimport { prefersReducedMotion } from '../core/utils';\n\nconst enterAnimation = (factor: number) => `\n0% {transform: translate3d(0,${factor * -200}%,0) scale(.6); opacity:.5;}\n100% {transform: translate3d(0,0,0) scale(1); opacity:1;}\n`;\n\nconst exitAnimation = (factor: number) => `\n0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}\n100% {transform: translate3d(0,${factor * -150}%,-1px) scale(.6); opacity:0;}\n`;\n\nconst fadeInAnimation = `0%{opacity:0;} 100%{opacity:1;}`;\nconst fadeOutAnimation = `0%{opacity:1;} 100%{opacity:0;}`;\n\nconst ToastBarBase = styled('div')`\n  display: flex;\n  align-items: center;\n  background: #fff;\n  color: #363636;\n  line-height: 1.3;\n  will-change: transform;\n  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);\n  max-width: 350px;\n  pointer-events: auto;\n  padding: 8px 10px;\n  border-radius: 8px;\n`;\n\nconst Message = styled('div')`\n  display: flex;\n  justify-content: center;\n  margin: 4px 10px;\n  color: inherit;\n  flex: 1 1 auto;\n  white-space: pre-line;\n`;\n\ninterface ToastBarProps {\n  toast: Toast;\n  position?: ToastPosition;\n  style?: React.CSSProperties;\n  children?: (components: {\n    icon: Renderable;\n    message: Renderable;\n  }) => Renderable;\n}\n\nconst getAnimationStyle = (\n  position: ToastPosition,\n  visible: boolean\n): React.CSSProperties => {\n  const top = position.includes('top');\n  const factor = top ? 1 : -1;\n\n  const [enter, exit] = prefersReducedMotion()\n    ? [fadeInAnimation, fadeOutAnimation]\n    : [enterAnimation(factor), exitAnimation(factor)];\n\n  return {\n    animation: visible\n      ? `${keyframes(enter)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`\n      : `${keyframes(exit)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`,\n  };\n};\n\nexport const ToastBar: React.FC<ToastBarProps> = React.memo(\n  ({ toast, position, style, children }) => {\n    const animationStyle: React.CSSProperties = toast.height\n      ? getAnimationStyle(\n          toast.position || position || 'top-center',\n          toast.visible\n        )\n      : { opacity: 0 };\n\n    const icon = <ToastIcon toast={toast} />;\n    const message = (\n      <Message {...toast.ariaProps}>\n        {resolveValue(toast.message, toast)}\n      </Message>\n    );\n\n    return (\n      <ToastBarBase\n        className={toast.className}\n        style={{\n          ...animationStyle,\n          ...style,\n          ...toast.style,\n        }}\n      >\n        {typeof children === 'function' ? (\n          children({\n            icon,\n            message,\n          })\n        ) : (\n          <>\n            {icon}\n            {message}\n          </>\n        )}\n      </ToastBarBase>\n    );\n  }\n);\n","import { css, setup } from 'goober';\nimport * as React from 'react';\nimport {\n  resolveValue,\n  ToasterProps,\n  ToastPosition,\n  ToastWrapperProps,\n} from '../core/types';\nimport { useToaster } from '../core/use-toaster';\nimport { prefersReducedMotion } from '../core/utils';\nimport { ToastBar } from './toast-bar';\n\nsetup(React.createElement);\n\nconst ToastWrapper = ({\n  id,\n  className,\n  style,\n  onHeightUpdate,\n  children,\n}: ToastWrapperProps) => {\n  const ref = React.useCallback(\n    (el: HTMLElement | null) => {\n      if (el) {\n        const updateHeight = () => {\n          const height = el.getBoundingClientRect().height;\n          onHeightUpdate(id, height);\n        };\n        updateHeight();\n        new MutationObserver(updateHeight).observe(el, {\n          subtree: true,\n          childList: true,\n          characterData: true,\n        });\n      }\n    },\n    [id, onHeightUpdate]\n  );\n\n  return (\n    <div ref={ref} className={className} style={style}>\n      {children}\n    </div>\n  );\n};\n\nconst getPositionStyle = (\n  position: ToastPosition,\n  offset: number\n): React.CSSProperties => {\n  const top = position.includes('top');\n  const verticalStyle: React.CSSProperties = top ? { top: 0 } : { bottom: 0 };\n  const horizontalStyle: React.CSSProperties = position.includes('center')\n    ? {\n        justifyContent: 'center',\n      }\n    : position.includes('right')\n    ? {\n        justifyContent: 'flex-end',\n      }\n    : {};\n  return {\n    left: 0,\n    right: 0,\n    display: 'flex',\n    position: 'absolute',\n    transition: prefersReducedMotion()\n      ? undefined\n      : `all 230ms cubic-bezier(.21,1.02,.73,1)`,\n    transform: `translateY(${offset * (top ? 1 : -1)}px)`,\n    ...verticalStyle,\n    ...horizontalStyle,\n  };\n};\n\nconst activeClass = css`\n  z-index: 9999;\n  > * {\n    pointer-events: auto;\n  }\n`;\n\nconst DEFAULT_OFFSET = 16;\n\nexport const Toaster: React.FC<ToasterProps> = ({\n  reverseOrder,\n  position = 'top-center',\n  toastOptions,\n  gutter,\n  children,\n  containerStyle,\n  containerClassName,\n}) => {\n  const { toasts, handlers } = useToaster(toastOptions);\n\n  return (\n    <div\n      style={{\n        position: 'fixed',\n        zIndex: 9999,\n        top: DEFAULT_OFFSET,\n        left: DEFAULT_OFFSET,\n        right: DEFAULT_OFFSET,\n        bottom: DEFAULT_OFFSET,\n        pointerEvents: 'none',\n        ...containerStyle,\n      }}\n      className={containerClassName}\n      onMouseEnter={handlers.startPause}\n      onMouseLeave={handlers.endPause}\n    >\n      {toasts.map((t) => {\n        const toastPosition = t.position || position;\n        const offset = handlers.calculateOffset(t, {\n          reverseOrder,\n          gutter,\n          defaultPosition: position,\n        });\n        const positionStyle = getPositionStyle(toastPosition, offset);\n\n        return (\n          <ToastWrapper\n            id={t.id}\n            key={t.id}\n            onHeightUpdate={handlers.updateHeight}\n            className={t.visible ? activeClass : ''}\n            style={positionStyle}\n          >\n            {t.type === 'custom' ? (\n              resolveValue(t.message, t)\n            ) : children ? (\n              children(t)\n            ) : (\n              <ToastBar toast={t} position={toastPosition} />\n            )}\n          </ToastWrapper>\n        );\n      })}\n    </div>\n  );\n};\n","import { toast } from './core/toast';\n\nexport * from './headless';\n\nexport { ToastBar } from './components/toast-bar';\nexport { ToastIcon } from './components/toast-icon';\nexport { Toaster } from './components/toaster';\nexport { CheckmarkIcon } from './components/checkmark';\nexport { ErrorIcon } from './components/error';\nexport { LoaderIcon } from './components/loader';\n\nexport { toast };\nexport default toast;\n","export enum BoonType {\n\tExtraHero = 'Extra hero',\n\tExtraXP = 'Extra XP',\n\tLevelUp = 'Level up',\n\tMagicItem = 'Magic item',\n\tMoney = 'Money',\n\tEnchantItem = 'Enchant item',\n\tStructure = 'Structure'\n}\n","export enum CombatantState {\n\tStanding = 'Standing',\n\tProne = 'Prone',\n\tUnconscious = 'Unconscious',\n\tDead = 'Dead'\n}\n","export enum CombatantType {\n\tHero = 'Hero',\n\tMonster = 'Monster'\n}\n","export enum EncounterState {\n\tActive = 'Active',\n\tVictory = 'Victory',\n\tDefeat = 'Defeat',\n\tRetreat = 'Retreat'\n}\n","export enum DamageCategoryType {\n\tNone = 'None',\n\tAny = '[choose one damage category]',\n\tAll = 'All damage categories',\n\tPhysical = 'Physical',\n\tEnergy = 'Energy',\n\tCorruption = 'Corruption'\n}\n","export enum ItemLocationType {\n\tNone = 'None',\n\tAny = '[choose one location]',\n\tHead = 'Head',\n\tNeck = 'Neck',\n\tBody = 'Body',\n\tFeet = 'Feet',\n\tHand = 'Hand',\n\tRing = 'Ring',\n\tCarried = 'Carried'\n}\n","export enum ItemProficiencyType {\n\tNone = 'None',\n\tAny = '[choose one proficiency]',\n\tMilitaryWeapons = 'Military weapons',\n\tLargeWeapons = 'Large weapons',\n\tPairedWeapons = 'Paired weapons',\n\tRangedWeapons = 'Ranged weapons',\n\tPowderWeapons = 'Powder weapons',\n\tImplements = 'Implements',\n\tLightArmor = 'Light armor',\n\tHeavyArmor = 'Heavy armor',\n\tShields = 'Shields'\n}\n","export enum SkillCategoryType {\n\tNone = 'None',\n\tAny = '[choose one skill category]',\n\tAll = 'All skill categories',\n\tPhysical = 'Physical',\n\tMental = 'Mental'\n}\n","export enum TraitType {\n\tNone = 'None',\n\tAny = '[choose one trait]',\n\tAll = 'All traits',\n\tEndurance = 'Endurance',\n\tResolve = 'Resolve',\n\tSpeed = 'Speed'\n}\n","export enum ActionTargetType {\n\tCombatants = 'Combatants',\n\tEnemies = 'Enemies',\n\tAllies = 'Allies',\n\tSquares = 'Squares',\n\tWalls = 'Walls'\n}\n","export enum DamageType {\n\tNone = 'None',\n\tAny = '[choose one damage type]',\n\tAll = 'All damage types',\n\tAcid = 'Acid',\n\tEdged = 'Edged',\n\tImpact = 'Impact',\n\tPiercing = 'Piercing',\n\tCold = 'Cold',\n\tElectricity = 'Electricity',\n\tFire = 'Fire',\n\tLight = 'Light',\n\tSonic = 'Sonic',\n\tDecay = 'Decay',\n\tPoison = 'Poison',\n\tPsychic = 'Psychic'\n}\n","export enum SkillType {\n\tNone = 'None',\n\tAny = '[choose one skill]',\n\tAll = 'All skills',\n\tBrawl = 'Brawl',\n\tPerception = 'Perception',\n\tPresence = 'Presence',\n\tReactions = 'Reactions',\n\tSpellcasting = 'Spellcasting',\n\tStealth = 'Stealth',\n\tWeapon = 'Weapon'\n}\n","export enum ConditionType {\n\tNone = 'None',\n\n\tAutoHeal = 'Automatic Healing',\n\tAutoDamage = 'Automatic Damage',\n\n\tTraitBonus = 'Trait Bonus',\n\tTraitPenalty = 'Trait Penalty',\n\n\tSkillBonus = 'Skill Bonus',\n\tSkillPenalty = 'Skill Penalty',\n\n\tSkillCategoryBonus = 'Skill Category Bonus',\n\tSkillCategoryPenalty = 'Skill Category Penalty',\n\n\tDamageBonus = 'Damage Bonus',\n\tDamagePenalty = 'Damage Penalty',\n\n\tDamageCategoryBonus = 'Damage Category Bonus',\n\tDamageCategoryPenalty = 'Damage Category Penalty',\n\n\tDamageResistance = 'Damage Resistance',\n\tDamageVulnerability = 'Damage Vulnerability',\n\n\tDamageCategoryResistance = 'Damage Category Resistance',\n\tDamageCategoryVulnerability = 'Damage Category Vulnerability',\n\n\tMovementBonus = 'Movement Bonus',\n\tMovementPenalty = 'Movement Penalty',\n}\n","export enum FeatureType {\n\tTrait = 'Trait',\n\tSkill = 'Skill',\n\tSkillCategory = 'Skill category',\n\tProficiency = 'Proficiency',\n\tDamageBonus = 'Damage bonus',\n\tDamageCategoryBonus = 'Damage category bonus',\n\tDamageResist = 'Damage resistance',\n\tDamageCategoryResist = 'Damage category resistance',\n\tAura = 'Aura'\n}\n","import { StructureData } from '../data/structure-data';\n\nimport { CombatantState } from '../enums/combatant-state';\nimport { CombatantType } from '../enums/combatant-type';\nimport { ConditionType } from '../enums/condition-type';\nimport { DamageCategoryType } from '../enums/damage-category-type';\nimport { DamageType } from '../enums/damage-type';\nimport { FeatureType } from '../enums/feature-type';\nimport { ItemProficiencyType } from '../enums/item-proficiency-type';\nimport { SkillCategoryType } from '../enums/skill-category-type';\nimport { SkillType } from '../enums/skill-type';\nimport { TraitType } from '../enums/trait-type';\n\nimport { CampaignMapGenerator } from '../generators/campaign-map-generator';\n\nimport { StrongholdLogic } from './stronghold-logic';\n\nimport type { CombatantModel } from '../models/combatant';\nimport type { ConditionModel } from '../models/condition';\nimport type { FeatureModel } from '../models/feature';\nimport type { GameModel } from '../models/game';\nimport type { LootPileModel } from '../models/encounter';\n\nimport { Utils } from '../utils/utils';\n\nexport class Factory {\n\tstatic createCombatant = (type: CombatantType): CombatantModel => {\n\t\treturn {\n\t\t\tid: Utils.guid(),\n\t\t\ttype: type,\n\t\t\tfaction: type,\n\t\t\tname: '',\n\t\t\tspeciesID: '',\n\t\t\troleID: '',\n\t\t\tbackgroundID: '',\n\t\t\tsize: 1,\n\t\t\tlevel: 1,\n\t\t\txp: 0,\n\t\t\tcolor: 'rgb(15, 15, 15)',\n\t\t\tquirks: [],\n\t\t\tfeatures: [],\n\t\t\titems: [],\n\t\t\tcarried: [],\n\t\t\tcombat: {\n\t\t\t\tcurrent: false,\n\t\t\t\tstate: CombatantState.Standing,\n\t\t\t\tstunned: false,\n\t\t\t\tposition: {\n\t\t\t\t\tx: 0,\n\t\t\t\t\ty: 0\n\t\t\t\t},\n\t\t\t\ttrail: [],\n\t\t\t\tdamage: 0,\n\t\t\t\twounds: 0,\n\t\t\t\tinitiative: Number.MIN_VALUE,\n\t\t\t\tmovement: 0,\n\t\t\t\tsenses: 0,\n\t\t\t\thidden: 0,\n\t\t\t\tconditions: [],\n\t\t\t\tactions: [],\n\t\t\t\tselectedAction: null,\n\t\t\t\tintents: null\n\t\t\t}\n\t\t};\n\t};\n\n\tstatic createGame = (packIDs: string[]): GameModel => {\n\t\tconst game = {\n\t\t\theroSlots: 5,\n\t\t\tstructureSlots: 0,\n\t\t\theroes: [],\n\t\t\titems: [],\n\t\t\tboons: [],\n\t\t\tmoney: 0,\n\t\t\tmap: CampaignMapGenerator.generateCampaignMap(packIDs),\n\t\t\tstronghold: [],\n\t\t\tencounter: null\n\t\t};\n\n\t\tStrongholdLogic.addStructure(game.stronghold, StructureData.barracks());\n\t\tStrongholdLogic.addStructure(game.stronghold, StructureData.barracks());\n\n\t\treturn game;\n\t};\n\n\tstatic createCondition = (type: ConditionType, trait: TraitType, rank: number): ConditionModel => {\n\t\treturn {\n\t\t\tid: Utils.guid(),\n\t\t\ttype: type,\n\t\t\ttrait: trait,\n\t\t\trank: rank,\n\t\t\tdetails: {\n\t\t\t\ttrait: TraitType.None,\n\t\t\t\tskill: SkillType.None,\n\t\t\t\tskillCategory: SkillCategoryType.None,\n\t\t\t\tdamage: DamageType.None,\n\t\t\t\tdamageCategory: DamageCategoryType.None\n\t\t\t}\n\t\t};\n\t};\n\n\tstatic createFeature = (id: string): FeatureModel => {\n\t\treturn {\n\t\t\tid: id,\n\t\t\ttype: FeatureType.Trait,\n\t\t\tdamage: DamageType.None,\n\t\t\tdamageCategory: DamageCategoryType.None,\n\t\t\tproficiency: ItemProficiencyType.None,\n\t\t\tskill: SkillType.None,\n\t\t\tskillCategory: SkillCategoryType.None,\n\t\t\ttrait: TraitType.None,\n\t\t\taura: ConditionType.None,\n\t\t\trank: 1\n\t\t};\n\t};\n\n\tstatic createLootPile = (): LootPileModel => {\n\t\treturn {\n\t\t\tid: Utils.guid(),\n\t\t\titems: [],\n\t\t\tmoney: 0,\n\t\t\tposition: { x: 0, y: 0 }\n\t\t};\n\t};\n}\n","import { ConditionType } from '../enums/condition-type';\nimport { DamageCategoryType } from '../enums/damage-category-type';\nimport { DamageType } from '../enums/damage-type';\nimport { SkillCategoryType } from '../enums/skill-category-type';\nimport { SkillType } from '../enums/skill-type';\nimport { TraitType } from '../enums/trait-type';\n\nimport type { ConditionModel } from '../models/condition';\nimport { Random } from '../utils/random';\n\nimport { Factory } from './factory';\nimport { GameLogic } from './game-logic';\n\nexport class ConditionLogic {\n\tstatic createAutoHealCondition = (root: TraitType, rank: number) => {\n\t\tconst condition = Factory.createCondition(ConditionType.AutoHeal, root, rank);\n\t\treturn condition;\n\t};\n\n\tstatic createAutoDamageCondition = (root: TraitType, rank: number, damage: DamageType) => {\n\t\tconst condition = Factory.createCondition(ConditionType.AutoDamage, root, rank);\n\t\tcondition.details.damage = damage;\n\t\treturn condition;\n\t};\n\n\tstatic createTraitBonusCondition = (root: TraitType, rank: number, trait: TraitType) => {\n\t\tconst condition = Factory.createCondition(ConditionType.TraitBonus, root, rank);\n\t\tcondition.details.trait = trait;\n\t\treturn condition;\n\t};\n\n\tstatic createTraitPenaltyCondition = (root: TraitType, rank: number, trait: TraitType) => {\n\t\tconst condition = Factory.createCondition(ConditionType.TraitPenalty, root, rank);\n\t\tcondition.details.trait = trait;\n\t\treturn condition;\n\t};\n\n\tstatic createSkillBonusCondition = (root: TraitType, rank: number, skill: SkillType) => {\n\t\tconst condition = Factory.createCondition(ConditionType.SkillBonus, root, rank);\n\t\tcondition.details.skill = skill;\n\t\treturn condition;\n\t};\n\n\tstatic createSkillPenaltyCondition = (root: TraitType, rank: number, skill: SkillType) => {\n\t\tconst condition = Factory.createCondition(ConditionType.SkillPenalty, root, rank);\n\t\tcondition.details.skill = skill;\n\t\treturn condition;\n\t};\n\n\tstatic createSkillCategoryBonusCondition = (root: TraitType, rank: number, category: SkillCategoryType) => {\n\t\tconst condition = Factory.createCondition(ConditionType.SkillCategoryBonus, root, rank);\n\t\tcondition.details.skillCategory = category;\n\t\treturn condition;\n\t};\n\n\tstatic createSkillCategoryPenaltyCondition = (root: TraitType, rank: number, category: SkillCategoryType) => {\n\t\tconst condition = Factory.createCondition(ConditionType.SkillCategoryPenalty, root, rank);\n\t\tcondition.details.skillCategory = category;\n\t\treturn condition;\n\t};\n\n\tstatic createDamageBonusCondition = (root: TraitType, rank: number, damage: DamageType) => {\n\t\tconst condition = Factory.createCondition(ConditionType.DamageBonus, root, rank);\n\t\tcondition.details.damage = damage;\n\t\treturn condition;\n\t};\n\n\tstatic createDamagePenaltyCondition = (root: TraitType, rank: number, damage: DamageType) => {\n\t\tconst condition = Factory.createCondition(ConditionType.DamagePenalty, root, rank);\n\t\tcondition.details.damage = damage;\n\t\treturn condition;\n\t};\n\n\tstatic createDamageCategoryBonusCondition = (root: TraitType, rank: number, category: DamageCategoryType) => {\n\t\tconst condition = Factory.createCondition(ConditionType.DamageCategoryBonus, root, rank);\n\t\tcondition.details.damageCategory = category;\n\t\treturn condition;\n\t};\n\n\tstatic createDamageCategoryPenaltyCondition = (root: TraitType, rank: number, category: DamageCategoryType) => {\n\t\tconst condition = Factory.createCondition(ConditionType.DamageCategoryPenalty, root, rank);\n\t\tcondition.details.damageCategory = category;\n\t\treturn condition;\n\t};\n\n\tstatic createDamageResistanceCondition = (root: TraitType, rank: number, damage: DamageType) => {\n\t\tconst condition = Factory.createCondition(ConditionType.DamageResistance, root, rank);\n\t\tcondition.details.damage = damage;\n\t\treturn condition;\n\t};\n\n\tstatic createDamageVulnerabilityCondition = (root: TraitType, rank: number, damage: DamageType) => {\n\t\tconst condition = Factory.createCondition(ConditionType.DamageVulnerability, root, rank);\n\t\tcondition.details.damage = damage;\n\t\treturn condition;\n\t};\n\n\tstatic createDamageCategoryResistanceCondition = (root: TraitType, rank: number, category: DamageCategoryType) => {\n\t\tconst condition = Factory.createCondition(ConditionType.DamageCategoryResistance, root, rank);\n\t\tcondition.details.damageCategory = category;\n\t\treturn condition;\n\t};\n\n\tstatic createDamageCategoryVulnerabilityCondition = (root: TraitType, rank: number, category: DamageCategoryType) => {\n\t\tconst condition = Factory.createCondition(ConditionType.DamageCategoryVulnerability, root, rank);\n\t\tcondition.details.damageCategory = category;\n\t\treturn condition;\n\t};\n\n\tstatic createMovementBonusCondition = (root: TraitType, rank: number) => {\n\t\tconst condition = Factory.createCondition(ConditionType.MovementBonus, root, rank);\n\t\treturn condition;\n\t};\n\n\tstatic createMovementPenaltyCondition = (root: TraitType, rank: number) => {\n\t\tconst condition = Factory.createCondition(ConditionType.MovementPenalty, root, rank);\n\t\treturn condition;\n\t};\n\n\tstatic getConditionDescription = (condition: ConditionModel) => {\n\t\tswitch (condition.type) {\n\t\t\tcase ConditionType.AutoHeal:\n\t\t\t\treturn 'Automatic healing';\n\t\t\tcase ConditionType.AutoDamage:\n\t\t\t\treturn `Automatic damage (${condition.details.damage})`;\n\t\t\tcase ConditionType.TraitBonus:\n\t\t\t\treturn `Trait bonus: ${condition.details.trait}`;\n\t\t\tcase ConditionType.TraitPenalty:\n\t\t\t\treturn `Trait penalty: ${condition.details.trait}`;\n\t\t\tcase ConditionType.SkillBonus:\n\t\t\t\treturn `Skill bonus: ${condition.details.skill}`;\n\t\t\tcase ConditionType.SkillPenalty:\n\t\t\t\treturn `Skill penalty: ${condition.details.skill}`;\n\t\t\tcase ConditionType.SkillCategoryBonus:\n\t\t\t\treturn `Skill bonus: all ${condition.details.skillCategory} skills`;\n\t\t\tcase ConditionType.SkillCategoryPenalty:\n\t\t\t\treturn `Skill penalty: all ${condition.details.skillCategory} skills`;\n\t\t\tcase ConditionType.DamageBonus:\n\t\t\t\treturn `Damage bonus: ${condition.details.damage}`;\n\t\t\tcase ConditionType.DamagePenalty:\n\t\t\t\treturn `Damage penalty: ${condition.details.damage}`;\n\t\t\tcase ConditionType.DamageCategoryBonus:\n\t\t\t\treturn `Damage bonus: all ${condition.details.damageCategory} types`;\n\t\t\tcase ConditionType.DamageCategoryPenalty:\n\t\t\t\treturn `Damage penalty: all ${condition.details.damageCategory} types`;\n\t\t\tcase ConditionType.DamageResistance:\n\t\t\t\treturn `Damage resistance: ${condition.details.damage}`;\n\t\t\tcase ConditionType.DamageVulnerability:\n\t\t\t\treturn `Damage vulnerability: ${condition.details.damage}`;\n\t\t\tcase ConditionType.DamageCategoryResistance:\n\t\t\t\treturn `Damage resistance: all ${condition.details.damageCategory} types`;\n\t\t\tcase ConditionType.DamageCategoryVulnerability:\n\t\t\t\treturn `Damage vulnerability: all ${condition.details.damageCategory} types`;\n\t\t\tcase ConditionType.MovementBonus:\n\t\t\t\treturn 'Movement bonus';\n\t\t\tcase ConditionType.MovementPenalty:\n\t\t\t\treturn 'Movement penalty';\n\t\t}\n\n\t\treturn '';\n\t};\n\n\tstatic getOppositeType = (type: ConditionType) => {\n\t\tconst pairs: { a: ConditionType, b: ConditionType }[] = [\n\t\t\t{ a: ConditionType.AutoHeal, b: ConditionType.AutoDamage },\n\t\t\t{ a: ConditionType.TraitBonus, b: ConditionType.TraitPenalty },\n\t\t\t{ a: ConditionType.SkillBonus, b: ConditionType.SkillPenalty },\n\t\t\t{ a: ConditionType.SkillCategoryBonus, b: ConditionType.SkillCategoryPenalty },\n\t\t\t{ a: ConditionType.DamageBonus, b: ConditionType.DamagePenalty },\n\t\t\t{ a: ConditionType.DamageCategoryBonus, b: ConditionType.DamageCategoryPenalty },\n\t\t\t{ a: ConditionType.DamageResistance, b: ConditionType.DamageVulnerability },\n\t\t\t{ a: ConditionType.DamageCategoryResistance, b: ConditionType.DamageCategoryVulnerability },\n\t\t\t{ a: ConditionType.MovementBonus, b: ConditionType.MovementPenalty }\n\t\t];\n\n\t\tlet opposite = type;\n\t\tpairs.forEach(pair => {\n\t\t\tif (type === pair.a) {\n\t\t\t\topposite = pair.b;\n\t\t\t}\n\t\t\tif (type === pair.b) {\n\t\t\t\topposite = pair.a;\n\t\t\t}\n\t\t});\n\n\t\treturn opposite;\n\t};\n\n\tstatic getConditionIsBeneficial = (condition: ConditionModel) => {\n\t\tswitch (condition.type) {\n\t\t\tcase ConditionType.AutoHeal:\n\t\t\tcase ConditionType.TraitBonus:\n\t\t\tcase ConditionType.SkillBonus:\n\t\t\tcase ConditionType.SkillCategoryBonus:\n\t\t\tcase ConditionType.DamageBonus:\n\t\t\tcase ConditionType.DamageCategoryBonus:\n\t\t\tcase ConditionType.DamageResistance:\n\t\t\tcase ConditionType.DamageCategoryResistance:\n\t\t\tcase ConditionType.MovementBonus:\n\t\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t};\n\n\tstatic createRandomBeneficialCondition = () => {\n\t\tswitch (Random.randomNumber(6)) {\n\t\t\tcase 0:\n\t\t\t\treturn ConditionLogic.createAutoHealCondition(GameLogic.getRandomTrait(), Random.randomBonus());\n\t\t\tcase 1:\n\t\t\t\treturn ConditionLogic.createTraitBonusCondition(GameLogic.getRandomTrait(), Random.randomBonus(), GameLogic.getRandomTrait());\n\t\t\tcase 2:\n\t\t\t\treturn ConditionLogic.createSkillBonusCondition(GameLogic.getRandomTrait(), Random.randomBonus() * 2, GameLogic.getRandomSkill());\n\t\t\tcase 3:\n\t\t\t\treturn ConditionLogic.createDamageBonusCondition(GameLogic.getRandomTrait(), Random.randomBonus() * 3, GameLogic.getRandomDamageType());\n\t\t\tcase 4:\n\t\t\t\treturn ConditionLogic.createDamageResistanceCondition(GameLogic.getRandomTrait(), Random.randomBonus() * 3, GameLogic.getRandomDamageType());\n\t\t\tcase 5:\n\t\t\t\treturn ConditionLogic.createMovementBonusCondition(GameLogic.getRandomTrait(), Random.randomBonus() * 2);\n\t\t}\n\n\t\treturn null;\n\t};\n\n\tstatic createRandomDetrimentalCondition = () => {\n\t\tswitch (Random.randomNumber(6)) {\n\t\t\tcase 0:\n\t\t\t\treturn ConditionLogic.createAutoDamageCondition(GameLogic.getRandomTrait(), Random.randomBonus(), GameLogic.getRandomDamageType());\n\t\t\tcase 1:\n\t\t\t\treturn ConditionLogic.createTraitPenaltyCondition(GameLogic.getRandomTrait(), Random.randomBonus(), GameLogic.getRandomTrait());\n\t\t\tcase 2:\n\t\t\t\treturn ConditionLogic.createSkillPenaltyCondition(GameLogic.getRandomTrait(), Random.randomBonus() * 2, GameLogic.getRandomSkill());\n\t\t\tcase 3:\n\t\t\t\treturn ConditionLogic.createDamagePenaltyCondition(GameLogic.getRandomTrait(), Random.randomBonus() * 3, GameLogic.getRandomDamageType());\n\t\t\tcase 4:\n\t\t\t\treturn ConditionLogic.createDamageVulnerabilityCondition(GameLogic.getRandomTrait(), Random.randomBonus() * 3, GameLogic.getRandomDamageType());\n\t\t\tcase 5:\n\t\t\t\treturn ConditionLogic.createMovementPenaltyCondition(GameLogic.getRandomTrait(), Random.randomBonus() * 2);\n\t\t}\n\n\t\treturn null;\n\t};\n}\n","import { ConditionType } from '../enums/condition-type';\nimport { DamageCategoryType } from '../enums/damage-category-type';\nimport { DamageType } from '../enums/damage-type';\nimport { FeatureType } from '../enums/feature-type';\nimport { ItemProficiencyType } from '../enums/item-proficiency-type';\nimport { SkillCategoryType } from '../enums/skill-category-type';\nimport { SkillType } from '../enums/skill-type';\nimport { TraitType } from '../enums/trait-type';\n\nimport type { FeatureModel } from '../models/feature';\n\nimport { Random } from '../utils/random';\nimport { Utils } from '../utils/utils';\n\nimport { ConditionLogic } from './condition-logic';\nimport { Factory } from './factory';\nimport { GameLogic } from './game-logic';\n\nexport class FeatureLogic {\n\tstatic createDamageBonusFeature = (id: string, damage: DamageType, rank: number): FeatureModel => {\n\t\tconst feature = Factory.createFeature(id);\n\t\tfeature.type = FeatureType.DamageBonus;\n\t\tfeature.damage = damage;\n\t\tfeature.rank = rank;\n\t\treturn feature;\n\t};\n\n\tstatic createDamageCategoryBonusFeature = (id: string, category: DamageCategoryType, rank: number): FeatureModel => {\n\t\tconst feature = Factory.createFeature(id);\n\t\tfeature.type = FeatureType.DamageCategoryBonus;\n\t\tfeature.damageCategory = category;\n\t\tfeature.rank = rank;\n\t\treturn feature;\n\t};\n\n\tstatic createDamageResistFeature = (id: string, damage: DamageType, rank: number): FeatureModel => {\n\t\tconst feature = Factory.createFeature(id);\n\t\tfeature.type = FeatureType.DamageResist;\n\t\tfeature.damage = damage;\n\t\tfeature.rank = rank;\n\t\treturn feature;\n\t};\n\n\tstatic createDamageCategoryResistFeature = (id: string, category: DamageCategoryType, rank: number): FeatureModel => {\n\t\tconst feature = Factory.createFeature(id);\n\t\tfeature.type = FeatureType.DamageCategoryResist;\n\t\tfeature.damageCategory = category;\n\t\tfeature.rank = rank;\n\t\treturn feature;\n\t};\n\n\tstatic createProficiencyFeature = (id: string, proficiency: ItemProficiencyType): FeatureModel => {\n\t\tconst feature = Factory.createFeature(id);\n\t\tfeature.type = FeatureType.Proficiency;\n\t\tfeature.proficiency = proficiency;\n\t\treturn feature;\n\t};\n\n\tstatic createSkillFeature = (id: string, skill: SkillType, rank: number): FeatureModel => {\n\t\tconst feature = Factory.createFeature(id);\n\t\tfeature.type = FeatureType.Skill;\n\t\tfeature.skill = skill;\n\t\tfeature.rank = rank;\n\t\treturn feature;\n\t};\n\n\tstatic createSkillCategoryFeature = (id: string, category: SkillCategoryType, rank: number): FeatureModel => {\n\t\tconst feature = Factory.createFeature(id);\n\t\tfeature.type = FeatureType.SkillCategory;\n\t\tfeature.skillCategory = category;\n\t\tfeature.rank = rank;\n\t\treturn feature;\n\t};\n\n\tstatic createTraitFeature = (id: string, trait: TraitType, rank: number): FeatureModel => {\n\t\tconst feature = Factory.createFeature(id);\n\t\tfeature.type = FeatureType.Trait;\n\t\tfeature.trait = trait;\n\t\tfeature.rank = rank;\n\t\treturn feature;\n\t};\n\n\tstatic createAuraFeature = (id: string, aura: ConditionType, rank: number): FeatureModel => {\n\t\tconst types = [\n\t\t\tConditionType.AutoHeal,\n\t\t\tConditionType.MovementBonus,\n\t\t\tConditionType.MovementPenalty\n\t\t];\n\t\tif (!types.includes(aura)) {\n\t\t\tthrow new Error('Incorrect aura parameters');\n\t\t}\n\n\t\tconst feature = Factory.createFeature(id);\n\t\tfeature.type = FeatureType.Aura;\n\t\tfeature.aura = aura;\n\t\tfeature.rank = rank;\n\t\treturn feature;\n\t};\n\n\tstatic createAuraTraitFeature = (id: string, aura: ConditionType, trait: TraitType, rank: number): FeatureModel => {\n\t\tconst types = [\n\t\t\tConditionType.TraitBonus,\n\t\t\tConditionType.TraitPenalty\n\t\t];\n\t\tif (!types.includes(aura)) {\n\t\t\tthrow new Error('Incorrect aura parameters');\n\t\t}\n\n\t\tconst feature = Factory.createFeature(id);\n\t\tfeature.type = FeatureType.Aura;\n\t\tfeature.aura = aura;\n\t\tfeature.trait = trait;\n\t\tfeature.rank = rank;\n\t\treturn feature;\n\t};\n\n\tstatic createAuraSkillFeature = (id: string, aura: ConditionType, skill: SkillType, rank: number): FeatureModel => {\n\t\tconst types = [\n\t\t\tConditionType.SkillBonus,\n\t\t\tConditionType.SkillPenalty\n\t\t];\n\t\tif (!types.includes(aura)) {\n\t\t\tthrow new Error('Incorrect aura parameters');\n\t\t}\n\n\t\tconst feature = Factory.createFeature(id);\n\t\tfeature.type = FeatureType.Aura;\n\t\tfeature.aura = aura;\n\t\tfeature.skill = skill;\n\t\tfeature.rank = rank;\n\t\treturn feature;\n\t};\n\n\tstatic createAuraSkillCategoryFeature = (id: string, aura: ConditionType, category: SkillCategoryType, rank: number): FeatureModel => {\n\t\tconst types = [\n\t\t\tConditionType.SkillCategoryBonus,\n\t\t\tConditionType.SkillCategoryPenalty\n\t\t];\n\t\tif (!types.includes(aura)) {\n\t\t\tthrow new Error('Incorrect aura parameters');\n\t\t}\n\n\t\tconst feature = Factory.createFeature(id);\n\t\tfeature.type = FeatureType.Aura;\n\t\tfeature.aura = aura;\n\t\tfeature.skillCategory = category;\n\t\tfeature.rank = rank;\n\t\treturn feature;\n\t};\n\n\tstatic createAuraDamageFeature = (id: string, aura: ConditionType, damage: DamageType, rank: number): FeatureModel => {\n\t\tconst types = [\n\t\t\tConditionType.AutoDamage,\n\t\t\tConditionType.DamageBonus,\n\t\t\tConditionType.DamagePenalty,\n\t\t\tConditionType.DamageResistance,\n\t\t\tConditionType.DamageVulnerability\n\t\t];\n\t\tif (!types.includes(aura)) {\n\t\t\tthrow new Error('Incorrect aura parameters');\n\t\t}\n\n\t\tconst feature = Factory.createFeature(id);\n\t\tfeature.type = FeatureType.Aura;\n\t\tfeature.aura = aura;\n\t\tfeature.damage = damage;\n\t\tfeature.rank = rank;\n\t\treturn feature;\n\t};\n\n\tstatic createAuraDamageCategoryFeature = (id: string, aura: ConditionType, category: DamageCategoryType, rank: number): FeatureModel => {\n\t\tconst types = [\n\t\t\tConditionType.DamageCategoryBonus,\n\t\t\tConditionType.DamageCategoryPenalty,\n\t\t\tConditionType.DamageCategoryResistance,\n\t\t\tConditionType.DamageCategoryVulnerability\n\t\t];\n\t\tif (!types.includes(aura)) {\n\t\t\tthrow new Error('Incorrect aura parameters');\n\t\t}\n\n\t\tconst feature = Factory.createFeature(id);\n\t\tfeature.type = FeatureType.Aura;\n\t\tfeature.aura = aura;\n\t\tfeature.damageCategory = category;\n\t\tfeature.rank = rank;\n\t\treturn feature;\n\t};\n\n\tstatic createRandomFeature = () => {\n\t\tswitch (Random.randomNumber(8)) {\n\t\t\tcase 0:\n\t\t\t\treturn FeatureLogic.createDamageBonusFeature(Utils.guid(), GameLogic.getRandomDamageType(), Random.randomBonus());\n\t\t\tcase 1:\n\t\t\t\treturn FeatureLogic.createDamageCategoryBonusFeature(Utils.guid(), GameLogic.getRandomDamageCategoryType(), Random.randomBonus());\n\t\t\tcase 2:\n\t\t\t\treturn FeatureLogic.createDamageResistFeature(Utils.guid(), GameLogic.getRandomDamageType(), Random.randomBonus());\n\t\t\tcase 3:\n\t\t\t\treturn FeatureLogic.createDamageCategoryResistFeature(Utils.guid(), GameLogic.getRandomDamageCategoryType(), Random.randomBonus());\n\t\t\tcase 4:\n\t\t\t\treturn FeatureLogic.createProficiencyFeature(Utils.guid(), GameLogic.getRandomItemProficiency());\n\t\t\tcase 5:\n\t\t\t\treturn FeatureLogic.createTraitFeature(Utils.guid(), GameLogic.getRandomTrait(), Random.randomBonus());\n\t\t\tcase 6:\n\t\t\t\treturn FeatureLogic.createSkillFeature(Utils.guid(), GameLogic.getRandomSkill(), Random.randomBonus());\n\t\t\tdefault:\n\t\t\t\treturn FeatureLogic.createSkillCategoryFeature(Utils.guid(), GameLogic.getRandomSkillCategory(), Random.randomBonus());\n\t\t}\n\t};\n\n\tstatic getFeatureDescription = (feature: FeatureModel) => {\n\t\tconst title = FeatureLogic.getFeatureTitle(feature).toString();\n\t\tconst desc = FeatureLogic.getFeatureInformation(feature).toString();\n\t\treturn `${title}: ${desc}`;\n\t};\n\n\tstatic getFeatureTitle = (feature: FeatureModel) => {\n\t\tswitch (feature.type) {\n\t\t\tcase FeatureType.Trait:\n\t\t\t\treturn 'Trait bonus';\n\t\t\tcase FeatureType.Skill:\n\t\t\tcase FeatureType.SkillCategory:\n\t\t\t\treturn 'Skill bonus';\n\t\t\tcase FeatureType.Proficiency:\n\t\t\t\treturn 'Proficiency';\n\t\t\tcase FeatureType.DamageBonus:\n\t\t\tcase FeatureType.DamageCategoryBonus:\n\t\t\t\treturn 'Damage Bonus';\n\t\t\tcase FeatureType.DamageResist:\n\t\t\tcase FeatureType.DamageCategoryResist:\n\t\t\t\treturn 'Damage Resistance';\n\t\t\tcase FeatureType.Aura:\n\t\t\t\treturn 'Aura';\n\t\t}\n\t};\n\n\tstatic getFeatureInformation = (feature: FeatureModel) => {\n\t\tswitch (feature.type) {\n\t\t\tcase FeatureType.Trait:\n\t\t\tcase FeatureType.Skill:\n\t\t\tcase FeatureType.SkillCategory:\n\t\t\tcase FeatureType.DamageBonus:\n\t\t\tcase FeatureType.DamageCategoryBonus:\n\t\t\tcase FeatureType.DamageResist:\n\t\t\tcase FeatureType.DamageCategoryResist:\n\t\t\tcase FeatureType.Aura:\n\t\t\t\treturn `${FeatureLogic.getFeatureText(feature)} ${feature.rank > 0 ? '+' : ''}${feature.rank}`;\n\t\t\tcase FeatureType.Proficiency:\n\t\t\t\treturn FeatureLogic.getFeatureText(feature);\n\t\t}\n\t};\n\n\tstatic getFeatureText = (feature: FeatureModel) => {\n\t\tswitch (feature.type) {\n\t\t\tcase FeatureType.Trait:\n\t\t\t\treturn `${feature.trait}`;\n\t\t\tcase FeatureType.Skill:\n\t\t\t\treturn `${feature.skill}`;\n\t\t\tcase FeatureType.SkillCategory:\n\t\t\t\treturn `All ${feature.skillCategory} skills`;\n\t\t\tcase FeatureType.Proficiency:\n\t\t\t\treturn `${feature.proficiency}`;\n\t\t\tcase FeatureType.DamageBonus:\n\t\t\t\treturn `${feature.damage}`;\n\t\t\tcase FeatureType.DamageCategoryBonus:\n\t\t\t\treturn `All ${feature.damageCategory} types`;\n\t\t\tcase FeatureType.DamageResist:\n\t\t\t\treturn `${feature.damage}`;\n\t\t\tcase FeatureType.DamageCategoryResist:\n\t\t\t\treturn `All ${feature.damageCategory} types`;\n\t\t\tcase FeatureType.Aura: {\n\t\t\t\tconst aura = Factory.createCondition(feature.aura, TraitType.None, feature.rank);\n\t\t\t\taura.details.trait = feature.trait;\n\t\t\t\taura.details.skill = feature.skill;\n\t\t\t\taura.details.skillCategory = feature.skillCategory;\n\t\t\t\taura.details.damage = feature.damage;\n\t\t\t\taura.details.damageCategory = feature.damageCategory;\n\t\t\t\tconst affects = ConditionLogic.getConditionIsBeneficial(aura) ? 'allies' : 'enemies';\n\t\t\t\treturn `${ConditionLogic.getConditionDescription(aura)} (affects ${affects})`;\n\t\t\t}\n\t\t}\n\t};\n\n\tstatic hasChoice = (feature: FeatureModel) => {\n\t\tswitch (feature.type) {\n\t\t\tcase FeatureType.Trait:\n\t\t\t\treturn feature.trait === TraitType.Any;\n\t\t\tcase FeatureType.Skill:\n\t\t\t\treturn feature.skill === SkillType.Any;\n\t\t\tcase FeatureType.SkillCategory:\n\t\t\t\treturn feature.skillCategory === SkillCategoryType.Any;\n\t\t\tcase FeatureType.Proficiency:\n\t\t\t\treturn feature.proficiency === ItemProficiencyType.Any;\n\t\t\tcase FeatureType.DamageBonus:\n\t\t\tcase FeatureType.DamageResist:\n\t\t\t\treturn feature.damage === DamageType.Any;\n\t\t\tcase FeatureType.DamageCategoryBonus:\n\t\t\tcase FeatureType.DamageCategoryResist:\n\t\t\t\treturn feature.damageCategory === DamageCategoryType.Any;\n\t\t}\n\n\t\treturn false;\n\t};\n\n\tstatic collateFeatures = (features: FeatureModel[]) => {\n\t\tconst collated: FeatureModel[] = [];\n\n\t\tfeatures.forEach(feature => {\n\t\t\tconst existing = collated.find(f => {\n\t\t\t\treturn (FeatureLogic.getFeatureTitle(f) === FeatureLogic.getFeatureTitle(feature)) && (FeatureLogic.getFeatureText(f) === FeatureLogic.getFeatureText(feature));\n\t\t\t});\n\t\t\tif (existing) {\n\t\t\t\texisting.rank += feature.rank;\n\t\t\t} else {\n\t\t\t\tconst copy = JSON.parse(JSON.stringify(feature)) as FeatureModel;\n\t\t\t\tcollated.push(copy);\n\t\t\t}\n\t\t});\n\n\t\treturn collated;\n\t};\n}\n","import { ActionTargetType } from '../enums/action-target-type';\nimport { DamageType } from '../enums/damage-type';\nimport { ItemProficiencyType } from '../enums/item-proficiency-type';\nimport { SkillType } from '../enums/skill-type';\nimport { TraitType } from '../enums/trait-type';\n\nimport type { ActionModel } from '../models/action';\nimport type { FeatureModel } from '../models/feature';\n\nimport { ActionEffects, ActionPrerequisites, ActionTargetParameters, ActionWeaponParameters } from '../logic/action-logic';\nimport { FeatureLogic } from '../logic/feature-logic';\n\nexport class BaseData {\n\tstatic getBaseFeatures = (): FeatureModel[] => {\n\t\treturn [\n\t\t\tFeatureLogic.createTraitFeature('base-trait', TraitType.Any, 1),\n\t\t\tFeatureLogic.createSkillFeature('base-skill', SkillType.Any, 1),\n\t\t\tFeatureLogic.createProficiencyFeature('base-prof', ItemProficiencyType.Any),\n\t\t\tFeatureLogic.createDamageBonusFeature('base-dmg-bonus', DamageType.Any, 1),\n\t\t\tFeatureLogic.createDamageResistFeature('base-dmg-resist', DamageType.Any, 1)\n\t\t];\n\t};\n\n\tstatic getBaseActions = (): ActionModel[] => {\n\t\treturn [\n\t\t\t{\n\t\t\t\tid: 'base-1',\n\t\t\t\tname: 'Melee Weapon Attack',\n\t\t\t\tprerequisites: [\n\t\t\t\t\tActionPrerequisites.meleeWeapon()\n\t\t\t\t],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionWeaponParameters.melee(),\n\t\t\t\t\tActionTargetParameters.weapon(ActionTargetType.Enemies, 1, 0)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: true,\n\t\t\t\t\t\tskill: SkillType.Weapon,\n\t\t\t\t\t\ttrait: TraitType.Speed,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.dealWeaponDamage()\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'base-2',\n\t\t\t\tname: 'Ranged Weapon Attack',\n\t\t\t\tprerequisites: [\n\t\t\t\t\tActionPrerequisites.rangedWeapon()\n\t\t\t\t],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionWeaponParameters.ranged(),\n\t\t\t\t\tActionTargetParameters.weapon(ActionTargetType.Enemies, 1, 0)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: true,\n\t\t\t\t\t\tskill: SkillType.Weapon,\n\t\t\t\t\t\ttrait: TraitType.Speed,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.dealWeaponDamage()\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'base-3',\n\t\t\t\tname: 'Unarmed Attack',\n\t\t\t\tprerequisites: [\n\t\t\t\t\tActionPrerequisites.emptyHand()\n\t\t\t\t],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.adjacent(ActionTargetType.Enemies, 1)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: false,\n\t\t\t\t\t\tskill: SkillType.Brawl,\n\t\t\t\t\t\ttrait: TraitType.Speed,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.dealDamage(DamageType.Impact, 1)\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'base-4',\n\t\t\t\tname: 'Stand Up',\n\t\t\t\tprerequisites: [\n\t\t\t\t\tActionPrerequisites.prone()\n\t\t\t\t],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.self()\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.stand()\n\t\t\t\t]\n\t\t\t}\n\t\t];\n\t};\n}\n","export enum MovementType {\n\tPush = 'push',\n\tPull = 'pull',\n\tSwap = 'swap',\n\tTowardsTarget = 'towards target',\n\tBesideTarget = 'beside target',\n\tRandom = 'random'\n}\n","export enum QuirkType {\n\tBeast = 'Beast',\n\tDrone = 'Drone',\n\tUndead = 'Undead',\n\tMindless = 'Mindless',\n\tSwarm = 'Swarm',\n\tAmorphous = 'Amorphous'\n}\n","import { PackData } from './pack-data';\n\nimport { ActionTargetType } from '../enums/action-target-type';\nimport { CombatantType } from '../enums/combatant-type';\nimport { ConditionType } from '../enums/condition-type';\nimport { DamageCategoryType } from '../enums/damage-category-type';\nimport { DamageType } from '../enums/damage-type';\nimport { ItemProficiencyType } from '../enums/item-proficiency-type';\nimport { MovementType } from '../enums/movement-type';\nimport { QuirkType } from '../enums/quirk-type';\nimport { SkillCategoryType } from '../enums/skill-category-type';\nimport { SkillType } from '../enums/skill-type';\nimport { TraitType } from '../enums/trait-type';\n\nimport { ActionEffects, ActionPrerequisites, ActionTargetParameters, ActionWeaponParameters } from '../logic/action-logic';\nimport { ConditionLogic } from '../logic/condition-logic';\nimport { FeatureLogic } from '../logic/feature-logic';\n\nimport type { SpeciesModel } from '../models/species';\n\nimport { Collections } from '../utils/collections';\n\nexport class MonsterSpeciesData {\n\tstatic colossus = (): SpeciesModel => ({\n\t\tid: 'species-colossus',\n\t\tname: 'Colossus',\n\t\tpackID: '',\n\t\tdescription: 'A huge, monstrously strong creature.',\n\t\ttype: CombatantType.Monster,\n\t\tsize: 3,\n\t\tquirks: [],\n\t\tstartingFeatures: [\n\t\t\tFeatureLogic.createTraitFeature('colossus-start-1', TraitType.Endurance, 2),\n\t\t\tFeatureLogic.createSkillFeature('colossus-start-2', SkillType.Brawl, 2)\n\t\t],\n\t\tfeatures: [\n\t\t\tFeatureLogic.createTraitFeature('colossus-feature-1', TraitType.Endurance, 1),\n\t\t\tFeatureLogic.createTraitFeature('colossus-feature-2', TraitType.Resolve, 1),\n\t\t\tFeatureLogic.createSkillFeature('colossus-feature-3', SkillType.Brawl, 2),\n\t\t\tFeatureLogic.createDamageResistFeature('colossus-feature-4', DamageType.All, 1)\n\t\t],\n\t\tactions: [\n\t\t\t{\n\t\t\t\tid: 'colossus-action-1',\n\t\t\t\tname: 'Hurl Object',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.burst(ActionTargetType.Enemies, 1, 10)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: false,\n\t\t\t\t\t\tskill: SkillType.Brawl,\n\t\t\t\t\t\ttrait: TraitType.Speed,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.dealDamage(DamageType.Impact, 3),\n\t\t\t\t\t\t\tActionEffects.knockDown()\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'colossus-action-2',\n\t\t\t\tname: 'Sweep',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.adjacent(ActionTargetType.Enemies, Number.MAX_VALUE)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: false,\n\t\t\t\t\t\tskill: SkillType.Brawl,\n\t\t\t\t\t\ttrait: TraitType.Speed,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.dealDamage(DamageType.Impact, 2),\n\t\t\t\t\t\t\tActionEffects.knockDown()\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'colossus-action-3',\n\t\t\t\tname: 'Thwack',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.adjacent(ActionTargetType.Enemies, 1)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: false,\n\t\t\t\t\t\tskill: SkillType.Brawl,\n\t\t\t\t\t\ttrait: TraitType.Resolve,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.dealDamage(DamageType.Impact, 4),\n\t\t\t\t\t\t\tActionEffects.forceMovement(MovementType.Push, 2),\n\t\t\t\t\t\t\tActionEffects.knockDown()\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t}\n\t\t]\n\t});\n\n\tstatic gnoll = (): SpeciesModel => ({\n\t\tid: 'species-gnoll',\n\t\tname: 'Gnoll',\n\t\tpackID: '',\n\t\tdescription: 'A humanoid with the head and claws of a hyena.',\n\t\ttype: CombatantType.Monster,\n\t\tsize: 1,\n\t\tquirks: [],\n\t\tstartingFeatures: [\n\t\t\tFeatureLogic.createTraitFeature('gnoll-start-1', TraitType.Endurance, 1),\n\t\t\tFeatureLogic.createTraitFeature('gnoll-start-2', TraitType.Speed, 1),\n\t\t\tFeatureLogic.createSkillFeature('gnoll-start-3', SkillType.Brawl, 2)\n\t\t],\n\t\tfeatures: [\n\t\t\tFeatureLogic.createTraitFeature('gnoll-feature-1', TraitType.Endurance, 1),\n\t\t\tFeatureLogic.createTraitFeature('gnoll-feature-2', TraitType.Speed, 1),\n\t\t\tFeatureLogic.createSkillFeature('gnoll-feature-3', SkillType.Brawl, 2)\n\t\t],\n\t\tactions: [\n\t\t\t{\n\t\t\t\tid: 'gnoll-action-1',\n\t\t\t\tname: 'Frenzied Bite',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.adjacent(ActionTargetType.Enemies, 1)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: false,\n\t\t\t\t\t\tskill: SkillType.Brawl,\n\t\t\t\t\t\ttrait: TraitType.Speed,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.dealDamage(DamageType.Piercing, 3)\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'gnoll-action-2',\n\t\t\t\tname: 'Raking Claws',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.adjacent(ActionTargetType.Enemies, 1)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: false,\n\t\t\t\t\t\tskill: SkillType.Brawl,\n\t\t\t\t\t\ttrait: TraitType.Speed,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.dealDamage(DamageType.Edged, 3)\n\t\t\t\t\t\t]\n\t\t\t\t\t}),\n\t\t\t\t\tActionEffects.takeAnotherAction()\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'gnoll-action-3',\n\t\t\t\tname: 'Rending Claws',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.adjacent(ActionTargetType.Enemies, 1)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: false,\n\t\t\t\t\t\tskill: SkillType.Brawl,\n\t\t\t\t\t\ttrait: TraitType.Speed,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.dealDamage(DamageType.Edged, 3)\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'gnoll-action-4',\n\t\t\t\tname: 'Maniacal Cackle',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.burst(ActionTargetType.Combatants, Number.MAX_VALUE, 3)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: false,\n\t\t\t\t\t\tskill: SkillType.Presence,\n\t\t\t\t\t\ttrait: TraitType.Resolve,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.addCondition(ConditionLogic.createSkillCategoryPenaltyCondition(TraitType.Resolve, 3, SkillCategoryType.Mental))\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t}\n\t\t]\n\t});\n\n\tstatic goblin = (): SpeciesModel => ({\n\t\tid: 'species-goblin',\n\t\tname: 'Goblin',\n\t\tpackID: '',\n\t\tdescription: 'A fleet-footed creature, difficult to pin down.',\n\t\ttype: CombatantType.Monster,\n\t\tsize: 1,\n\t\tquirks: [],\n\t\tstartingFeatures: [\n\t\t\tFeatureLogic.createTraitFeature('goblin-start-1', TraitType.Speed, 1),\n\t\t\tFeatureLogic.createSkillFeature('goblin-start-2', SkillType.Reactions, 2),\n\t\t\tFeatureLogic.createSkillFeature('goblin-start-3', SkillType.Stealth, 2)\n\t\t],\n\t\tfeatures: [\n\t\t\tFeatureLogic.createTraitFeature('goblin-feature-1', TraitType.Speed, 1),\n\t\t\tFeatureLogic.createSkillFeature('goblin-feature-2', SkillType.Reactions, 2),\n\t\t\tFeatureLogic.createSkillFeature('goblin-feature-3', SkillType.Stealth, 2)\n\t\t],\n\t\tactions: [\n\t\t\t{\n\t\t\t\tid: 'goblin-action-1',\n\t\t\t\tname: 'Backstab',\n\t\t\t\tprerequisites: [\n\t\t\t\t\tActionPrerequisites.meleeWeapon(),\n\t\t\t\t\tActionPrerequisites.hidden()\n\t\t\t\t],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionWeaponParameters.melee(),\n\t\t\t\t\tActionTargetParameters.adjacent(ActionTargetType.Enemies, 1)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: true,\n\t\t\t\t\t\tskill: SkillType.Weapon,\n\t\t\t\t\t\ttrait: TraitType.Speed,\n\t\t\t\t\t\tskillBonus: 2,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.dealWeaponDamage()\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'goblin-action-2',\n\t\t\t\tname: 'Skitter',\n\t\t\t\tprerequisites: [\n\t\t\t\t],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.self()\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.forceMovement(MovementType.Random, 1),\n\t\t\t\t\tActionEffects.takeAnotherAction()\n\t\t\t\t]\n\t\t\t}\n\t\t]\n\t});\n\n\tstatic medusa = (): SpeciesModel => ({\n\t\tid: 'species-medusa',\n\t\tname: 'Medusa',\n\t\tpackID: '',\n\t\tdescription: 'A humanoid with snakes for hair and a petrifying gaze.',\n\t\ttype: CombatantType.Monster,\n\t\tsize: 1,\n\t\tquirks: [],\n\t\tstartingFeatures: [\n\t\t\tFeatureLogic.createSkillFeature('medusa-start-1', SkillType.Brawl, 2),\n\t\t\tFeatureLogic.createSkillFeature('medusa-start-2', SkillType.Presence, 2),\n\t\t\tFeatureLogic.createDamageBonusFeature('medusa-start-3', DamageType.Poison, 2),\n\t\t\tFeatureLogic.createDamageResistFeature('medusa-start-4', DamageType.Poison, 2)\n\t\t],\n\t\tfeatures: [\n\t\t\tFeatureLogic.createSkillFeature('medusa-feature-1', SkillType.Brawl, 2),\n\t\t\tFeatureLogic.createSkillFeature('medusa-feature-2', SkillType.Presence, 2),\n\t\t\tFeatureLogic.createDamageBonusFeature('medusa-feature-3', DamageType.Poison, 2),\n\t\t\tFeatureLogic.createDamageResistFeature('medusa-feature-4', DamageType.Poison, 2)\n\t\t],\n\t\tactions: [\n\t\t\t{\n\t\t\t\tid: 'medusa-action-1',\n\t\t\t\tname: 'Spit Venom',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.adjacent(ActionTargetType.Enemies, 1)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: false,\n\t\t\t\t\t\tskill: SkillType.Brawl,\n\t\t\t\t\t\ttrait: TraitType.Endurance,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.dealDamage(DamageType.Poison, 3)\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'medusa-action-2',\n\t\t\t\tname: 'Petrifying Gaze',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.burst(ActionTargetType.Enemies, 1, 6)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: false,\n\t\t\t\t\t\tskill: SkillType.Presence,\n\t\t\t\t\t\ttrait: TraitType.Resolve,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.addCondition(ConditionLogic.createTraitPenaltyCondition(TraitType.Resolve, 5, TraitType.All)),\n\t\t\t\t\t\t\tActionEffects.addCondition(ConditionLogic.createMovementPenaltyCondition(TraitType.Resolve, 3))\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'medusa-action-3',\n\t\t\t\tname: 'Weakening Gaze',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.burst(ActionTargetType.Enemies, 1, 6)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: false,\n\t\t\t\t\t\tskill: SkillType.Presence,\n\t\t\t\t\t\ttrait: TraitType.Resolve,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.addCondition(ConditionLogic.createDamageCategoryPenaltyCondition(TraitType.Resolve, 4, DamageCategoryType.Physical)),\n\t\t\t\t\t\t\tActionEffects.addCondition(ConditionLogic.createDamageCategoryPenaltyCondition(TraitType.Resolve, 4, DamageCategoryType.Energy)),\n\t\t\t\t\t\t\tActionEffects.addCondition(ConditionLogic.createDamageCategoryPenaltyCondition(TraitType.Resolve, 4, DamageCategoryType.Corruption))\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t}\n\t\t]\n\t});\n\n\tstatic orc = (): SpeciesModel => ({\n\t\tid: 'species-orc',\n\t\tname: 'Orc',\n\t\tpackID: '',\n\t\tdescription: 'An evil creature bred for war.',\n\t\ttype: CombatantType.Monster,\n\t\tsize: 1,\n\t\tquirks: [],\n\t\tstartingFeatures: [\n\t\t\tFeatureLogic.createTraitFeature('orc-start-1', TraitType.Endurance, 1),\n\t\t\tFeatureLogic.createSkillFeature('orc-start-2', SkillType.Brawl, 2),\n\t\t\tFeatureLogic.createSkillFeature('orc-start-3', SkillType.Weapon, 2)\n\t\t],\n\t\tfeatures: [\n\t\t\tFeatureLogic.createTraitFeature('orc-feature-1', TraitType.Endurance, 1),\n\t\t\tFeatureLogic.createSkillFeature('orc-feature-2', SkillType.Brawl, 2),\n\t\t\tFeatureLogic.createSkillFeature('orc-feature-3', SkillType.Weapon, 2),\n\t\t\tFeatureLogic.createDamageResistFeature('orc-feature-4', DamageType.All, 1)\n\t\t],\n\t\tactions: [\n\t\t\t{\n\t\t\t\tid: 'orc-action-1',\n\t\t\t\tname: 'Bloodlust',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.self()\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.addCondition(ConditionLogic.createSkillBonusCondition(TraitType.Endurance, 3, SkillType.Brawl)),\n\t\t\t\t\tActionEffects.addCondition(ConditionLogic.createSkillBonusCondition(TraitType.Endurance, 3, SkillType.Weapon)),\n\t\t\t\t\tActionEffects.addCondition(ConditionLogic.createDamageCategoryBonusCondition(TraitType.Endurance, 2, DamageCategoryType.Physical))\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'orc-action-2',\n\t\t\t\tname: 'Bloodfury',\n\t\t\t\tprerequisites: [\n\t\t\t\t\tActionPrerequisites.wound()\n\t\t\t\t],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.adjacent(ActionTargetType.Enemies, 1)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: false,\n\t\t\t\t\t\tskill: SkillType.Brawl,\n\t\t\t\t\t\ttrait: TraitType.Endurance,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.dealDamage(DamageType.Impact, 3)\n\t\t\t\t\t\t]\n\t\t\t\t\t}),\n\t\t\t\t\tActionEffects.takeAnotherAction()\n\t\t\t\t]\n\t\t\t}\n\t\t]\n\t});\n\n\tstatic ratfolk = (): SpeciesModel => ({\n\t\tid: 'species-ratfolk',\n\t\tname: 'Ratfolk',\n\t\tpackID: '',\n\t\tdescription: 'XXXX.',\n\t\ttype: CombatantType.Monster,\n\t\tsize: 1,\n\t\tquirks: [],\n\t\tstartingFeatures: [\n\t\t\tFeatureLogic.createSkillFeature('ratfolk-start-1', SkillType.Brawl, 2),\n\t\t\tFeatureLogic.createTraitFeature('ratfolk-start-2', TraitType.Endurance, 1),\n\t\t\tFeatureLogic.createDamageResistFeature('ratfolk-start-3', DamageType.Decay, 2)\n\t\t],\n\t\tfeatures: [\n\t\t\tFeatureLogic.createSkillFeature('ratfolk-feature-1', SkillType.Brawl, 2),\n\t\t\tFeatureLogic.createTraitFeature('ratfolk-feature-2', TraitType.Endurance, 1),\n\t\t\tFeatureLogic.createDamageResistFeature('ratfolk-feature-3', DamageType.Decay, 2)\n\t\t],\n\t\tactions: [\n\t\t\t{\n\t\t\t\tid: 'ratfolk-action-1',\n\t\t\t\tname: 'Bite',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.adjacent(ActionTargetType.Enemies, Number.MAX_VALUE)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: false,\n\t\t\t\t\t\tskill: SkillType.Brawl,\n\t\t\t\t\t\ttrait: TraitType.Speed,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.dealDamage(DamageType.Piercing, 3),\n\t\t\t\t\t\t\tActionEffects.dealDamage(DamageType.Decay, 1)\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'ratfolk-action-2',\n\t\t\t\tname: 'Scurry',\n\t\t\t\tprerequisites: [\n\t\t\t\t],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.self()\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.addMovement(),\n\t\t\t\t\tActionEffects.takeAnotherAction()\n\t\t\t\t]\n\t\t\t}\n\t\t]\n\t});\n\n\tstatic scarab = (): SpeciesModel => ({\n\t\tid: 'species-scarab',\n\t\tname: 'Scarab',\n\t\tpackID: '',\n\t\tdescription: 'Beetles with an acidic bite.',\n\t\ttype: CombatantType.Monster,\n\t\tsize: 1,\n\t\tquirks: [\n\t\t\tQuirkType.Beast\n\t\t],\n\t\tstartingFeatures: [\n\t\t\tFeatureLogic.createSkillFeature('scarab-start-1', SkillType.Brawl, 2),\n\t\t\tFeatureLogic.createDamageBonusFeature('scarab-start-2', DamageType.Acid, 2),\n\t\t\tFeatureLogic.createTraitFeature('scarab-start-3', TraitType.Endurance, 1)\n\t\t],\n\t\tfeatures: [\n\t\t\tFeatureLogic.createSkillFeature('scarab-feature-1', SkillType.Brawl, 2),\n\t\t\tFeatureLogic.createDamageBonusFeature('scarab-feature-2', DamageType.Acid, 2),\n\t\t\tFeatureLogic.createTraitFeature('scarab-feature-3', TraitType.Endurance, 1)\n\t\t],\n\t\tactions: [\n\t\t\t{\n\t\t\t\tid: 'scarab-action-1',\n\t\t\t\tname: 'Mandible',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.adjacent(ActionTargetType.Enemies, 1)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: false,\n\t\t\t\t\t\tskill: SkillType.Brawl,\n\t\t\t\t\t\ttrait: TraitType.Endurance,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.dealDamage(DamageType.Edged, 2),\n\t\t\t\t\t\t\tActionEffects.dealDamage(DamageType.Acid, 2)\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'scarab-action-2',\n\t\t\t\tname: 'Tail Lash',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.adjacent(ActionTargetType.Enemies, Number.MAX_VALUE)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: false,\n\t\t\t\t\t\tskill: SkillType.Brawl,\n\t\t\t\t\t\ttrait: TraitType.Endurance,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.dealDamage(DamageType.Impact, 2)\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'scarab-action-3',\n\t\t\t\tname: 'Tail Stinger',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.burst(ActionTargetType.Enemies, 1, 2)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: false,\n\t\t\t\t\t\tskill: SkillType.Brawl,\n\t\t\t\t\t\ttrait: TraitType.Speed,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.dealDamage(DamageType.Piercing, 2),\n\t\t\t\t\t\t\tActionEffects.dealDamage(DamageType.Acid, 2)\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t}\n\t\t]\n\t});\n\n\tstatic troll = (): SpeciesModel => ({\n\t\tid: 'species-troll',\n\t\tname: 'Troll',\n\t\tpackID: '',\n\t\tdescription: 'A huge brute of a humanoid.',\n\t\ttype: CombatantType.Monster,\n\t\tsize: 2,\n\t\tquirks: [\n\t\t\tQuirkType.Mindless\n\t\t],\n\t\tstartingFeatures: [\n\t\t\tFeatureLogic.createTraitFeature('troll-start-1', TraitType.Endurance, 2),\n\t\t\tFeatureLogic.createProficiencyFeature('troll-start-2', ItemProficiencyType.LargeWeapons),\n\t\t\tFeatureLogic.createSkillFeature('troll-start-3', SkillType.Brawl, 2)\n\t\t],\n\t\tfeatures: [\n\t\t\tFeatureLogic.createTraitFeature('troll-feature-1', TraitType.Endurance, 1),\n\t\t\tFeatureLogic.createSkillFeature('troll-feature-2', SkillType.Brawl, 2),\n\t\t\tFeatureLogic.createDamageCategoryResistFeature('troll-feature-3', DamageCategoryType.Physical, 1),\n\t\t\tFeatureLogic.createDamageCategoryResistFeature('troll-feature-4', DamageCategoryType.Energy, 1),\n\t\t\tFeatureLogic.createDamageCategoryResistFeature('troll-feature-5', DamageCategoryType.Corruption, 1)\n\t\t],\n\t\tactions: [\n\t\t\t{\n\t\t\t\tid: 'troll-action-1',\n\t\t\t\tname: 'Slam',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.adjacent(ActionTargetType.Enemies, 1)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: false,\n\t\t\t\t\t\tskill: SkillType.Brawl,\n\t\t\t\t\t\ttrait: TraitType.Endurance,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.dealDamage(DamageType.Impact, 2),\n\t\t\t\t\t\t\tActionEffects.knockDown()\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'troll-action-2',\n\t\t\t\tname: 'Regeneration',\n\t\t\t\tprerequisites: [\n\t\t\t\t\tActionPrerequisites.wound()\n\t\t\t\t],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.self()\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.healWounds(1)\n\t\t\t\t]\n\t\t\t}\n\t\t]\n\t});\n\n\t// Elementals\n\n\tstatic airElemental = (): SpeciesModel => ({\n\t\tid: 'species-elemental-air',\n\t\tname: 'Air Elemental',\n\t\tpackID: PackData.elements().id,\n\t\tdescription: 'Air elementals are as changeable as the weather, either calm or tempestuous.',\n\t\ttype: CombatantType.Monster,\n\t\tsize: 1,\n\t\tquirks: [\n\t\t\tQuirkType.Amorphous\n\t\t],\n\t\tstartingFeatures: [\n\t\t\tFeatureLogic.createTraitFeature('elemental-air-start-1', TraitType.Resolve, 1),\n\t\t\tFeatureLogic.createSkillFeature('elemental-air-start-2', SkillType.Brawl, 2),\n\t\t\tFeatureLogic.createDamageBonusFeature('elemental-air-start-3', DamageType.Cold, 2),\n\t\t\tFeatureLogic.createDamageResistFeature('elemental-air-start-4', DamageType.Cold, 5)\n\t\t],\n\t\tfeatures: [\n\t\t\tFeatureLogic.createTraitFeature('elemental-air-start-1', TraitType.Resolve, 1),\n\t\t\tFeatureLogic.createSkillFeature('elemental-air-feature-2', SkillType.Brawl, 2),\n\t\t\tFeatureLogic.createDamageBonusFeature('elemental-air-feature-3', DamageType.Cold, 2),\n\t\t\tFeatureLogic.createAuraDamageFeature('elemental-air-feature-4', ConditionType.AutoDamage, DamageType.Cold, 1)\n\t\t],\n\t\tactions: [\n\t\t\t{\n\t\t\t\tid: 'elemental-air-action-1',\n\t\t\t\tname: 'Thunderclap',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.burst(ActionTargetType.Combatants, Number.MAX_VALUE, 3)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: false,\n\t\t\t\t\t\tskill: SkillType.Brawl,\n\t\t\t\t\t\ttrait: TraitType.Endurance,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.dealDamage(DamageType.Sonic, 1),\n\t\t\t\t\t\t\tActionEffects.dealDamage(DamageType.Electricity, 1)\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'elemental-air-action-2',\n\t\t\t\tname: 'Step Of The Tempest',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.burst(ActionTargetType.Combatants, Number.MAX_VALUE, 5)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.forceMovement(MovementType.BesideTarget, 0),\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: false,\n\t\t\t\t\t\tskill: SkillType.Brawl,\n\t\t\t\t\t\ttrait: TraitType.Endurance,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.dealDamage(DamageType.Cold, 1),\n\t\t\t\t\t\t\tActionEffects.forceMovement(MovementType.Push, 1)\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t}\n\t\t]\n\t});\n\n\tstatic earthElemental = (): SpeciesModel => ({\n\t\tid: 'species-elemental-earth',\n\t\tname: 'Earth Elemental',\n\t\tpackID: PackData.elements().id,\n\t\tdescription: 'Earth elementals are slow but unstoppable.',\n\t\ttype: CombatantType.Monster,\n\t\tsize: 1,\n\t\tquirks: [],\n\t\tstartingFeatures: [\n\t\t\tFeatureLogic.createTraitFeature('elemental-earth-start-1', TraitType.Endurance, 2),\n\t\t\tFeatureLogic.createSkillFeature('elemental-earth-start-2', SkillType.Brawl, 2),\n\t\t\tFeatureLogic.createDamageBonusFeature('elemental-earth-start-3', DamageType.Impact, 2),\n\t\t\tFeatureLogic.createTraitFeature('elemental-earth-start-4', TraitType.Speed, -1),\n\t\t\tFeatureLogic.createDamageResistFeature('elemental-earth-start-5', DamageType.Impact, 5)\n\t\t],\n\t\tfeatures: [\n\t\t\tFeatureLogic.createTraitFeature('elemental-earth-feature-1', TraitType.Endurance, 1),\n\t\t\tFeatureLogic.createSkillFeature('elemental-earth-feature-2', SkillType.Brawl, 2),\n\t\t\tFeatureLogic.createDamageBonusFeature('elemental-earth-feature-3', DamageType.Impact, 2),\n\t\t\tFeatureLogic.createAuraDamageFeature('elemental-earth-feature-4', ConditionType.AutoDamage, DamageType.Impact, 1)\n\t\t],\n\t\tactions: [\n\t\t\t{\n\t\t\t\tid: 'elemental-earth-action-1',\n\t\t\t\tname: 'Earthbind',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.burst(ActionTargetType.Enemies, 1, 10)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: false,\n\t\t\t\t\t\tskill: SkillType.Brawl,\n\t\t\t\t\t\ttrait: TraitType.Endurance,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.addCondition(ConditionLogic.createTraitPenaltyCondition(TraitType.Endurance, 5, TraitType.Speed)),\n\t\t\t\t\t\t\tActionEffects.addCondition(ConditionLogic.createMovementPenaltyCondition(TraitType.Endurance, 5))\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'elemental-earth-action-2',\n\t\t\t\tname: 'Rockblast',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.burst(ActionTargetType.Enemies, 1, 10)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: false,\n\t\t\t\t\t\tskill: SkillType.Brawl,\n\t\t\t\t\t\ttrait: TraitType.Speed,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.dealDamage(DamageType.Impact, 3),\n\t\t\t\t\t\t\tActionEffects.knockDown()\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'elemental-earth-action-3',\n\t\t\t\tname: 'Earthquake',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.adjacent(ActionTargetType.Combatants, Number.MAX_VALUE)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: false,\n\t\t\t\t\t\tskill: SkillType.Brawl,\n\t\t\t\t\t\ttrait: TraitType.Endurance,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.dealDamage(DamageType.Impact, 1),\n\t\t\t\t\t\t\tActionEffects.forceMovement(MovementType.Push, 1),\n\t\t\t\t\t\t\tActionEffects.knockDown()\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t}\n\t\t]\n\t});\n\n\tstatic fireElemental = (): SpeciesModel => ({\n\t\tid: 'species-elemental-fire',\n\t\tname: 'Fire Elemental',\n\t\tpackID: PackData.elements().id,\n\t\tdescription: 'Hot blooded and quick to anger, these humanoids are made of living fire.',\n\t\ttype: CombatantType.Monster,\n\t\tsize: 1,\n\t\tquirks: [\n\t\t\tQuirkType.Amorphous\n\t\t],\n\t\tstartingFeatures: [\n\t\t\tFeatureLogic.createTraitFeature('elemental-fire-start-1', TraitType.Speed, 1),\n\t\t\tFeatureLogic.createSkillFeature('elemental-fire-start-2', SkillType.Brawl, 2),\n\t\t\tFeatureLogic.createDamageBonusFeature('elemental-fire-start-3', DamageType.Fire, 2),\n\t\t\tFeatureLogic.createDamageResistFeature('elemental-fire-start-4', DamageType.Fire, 5)\n\t\t],\n\t\tfeatures: [\n\t\t\tFeatureLogic.createTraitFeature('elemental-fire-feature-1', TraitType.Speed, 1),\n\t\t\tFeatureLogic.createSkillFeature('elemental-fire-feature-2', SkillType.Brawl, 2),\n\t\t\tFeatureLogic.createDamageBonusFeature('elemental-fire-feature-3', DamageType.Fire, 2),\n\t\t\tFeatureLogic.createAuraDamageFeature('elemental-fire-feature-4', ConditionType.AutoDamage, DamageType.Fire, 1)\n\t\t],\n\t\tactions: [\n\t\t\t{\n\t\t\t\tid: 'elemental-fire-action-1',\n\t\t\t\tname: 'Volcanic Flare',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.adjacent(ActionTargetType.Enemies, 1)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: false,\n\t\t\t\t\t\tskill: SkillType.Brawl,\n\t\t\t\t\t\ttrait: TraitType.Endurance,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.dealDamage(DamageType.Fire, 1),\n\t\t\t\t\t\t\tActionEffects.dealDamage(DamageType.Light, 1)\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'elemental-fire-action-2',\n\t\t\t\tname: 'Hurl Fire',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.burst(ActionTargetType.Enemies, 1, 5)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: false,\n\t\t\t\t\t\tskill: SkillType.Brawl,\n\t\t\t\t\t\ttrait: TraitType.Speed,\n\t\t\t\t\t\tskillBonus: 2,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.dealDamage(DamageType.Fire, 2)\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'elemental-fire-action-3',\n\t\t\t\tname: 'Immolation',\n\t\t\t\tprerequisites: [\n\t\t\t\t\tActionPrerequisites.wound()\n\t\t\t\t],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.burst(ActionTargetType.Combatants, Number.MAX_VALUE, 2)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: false,\n\t\t\t\t\t\tskill: SkillType.Brawl,\n\t\t\t\t\t\ttrait: TraitType.Endurance,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.dealDamage(DamageType.Fire, 3)\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t}\n\t\t]\n\t});\n\n\tstatic waterElemental = (): SpeciesModel => ({\n\t\tid: 'species-elemental-water',\n\t\tname: 'Water Elemental',\n\t\tpackID: PackData.elements().id,\n\t\tdescription: 'Humanoids made of flowing, living water.',\n\t\ttype: CombatantType.Monster,\n\t\tsize: 1,\n\t\tquirks: [\n\t\t\tQuirkType.Amorphous\n\t\t],\n\t\tstartingFeatures: [\n\t\t\tFeatureLogic.createTraitFeature('elemental-water-start-1', TraitType.Speed, 1),\n\t\t\tFeatureLogic.createSkillFeature('elemental-water-start-2', SkillType.Brawl, 2),\n\t\t\tFeatureLogic.createDamageBonusFeature('elemental-water-start-3', DamageType.Impact, 2),\n\t\t\tFeatureLogic.createDamageResistFeature('elemental-water-start-4', DamageType.Impact, 5)\n\t\t],\n\t\tfeatures: [\n\t\t\tFeatureLogic.createTraitFeature('elemental-water-feature-1', TraitType.Speed, 1),\n\t\t\tFeatureLogic.createSkillFeature('elemental-water-feature-2', SkillType.Brawl, 2),\n\t\t\tFeatureLogic.createDamageBonusFeature('elemental-water-feature-3', DamageType.Impact, 2)\n\t\t],\n\t\tactions: [\n\t\t\t{\n\t\t\t\tid: 'elemental-water-action-1',\n\t\t\t\tname: 'Tsunami',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.adjacent(ActionTargetType.Combatants, Number.MAX_VALUE)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: false,\n\t\t\t\t\t\tskill: SkillType.Brawl,\n\t\t\t\t\t\ttrait: TraitType.Endurance,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.dealDamage(DamageType.Impact, 2),\n\t\t\t\t\t\t\tActionEffects.forceMovement(MovementType.Push, 1),\n\t\t\t\t\t\t\tActionEffects.knockDown()\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'elemental-water-action-2',\n\t\t\t\tname: 'Waterspout',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.burst(ActionTargetType.Enemies, 1, 5)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: false,\n\t\t\t\t\t\tskill: SkillType.Brawl,\n\t\t\t\t\t\ttrait: TraitType.Speed,\n\t\t\t\t\t\tskillBonus: 2,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.dealDamage(DamageType.Impact, 2),\n\t\t\t\t\t\t\tActionEffects.knockDown()\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t}\n\t\t]\n\t});\n\n\t// Beasts\n\n\tstatic bear = (): SpeciesModel => ({\n\t\tid: 'species-bear',\n\t\tname: 'Bear',\n\t\tpackID: PackData.beasts().id,\n\t\tdescription: 'A huge, powerful mammal.',\n\t\ttype: CombatantType.Monster,\n\t\tsize: 2,\n\t\tquirks: [\n\t\t\tQuirkType.Beast\n\t\t],\n\t\tstartingFeatures: [\n\t\t\tFeatureLogic.createTraitFeature('bear-start-1', TraitType.Endurance, 1),\n\t\t\tFeatureLogic.createSkillFeature('bear-start-2', SkillType.Brawl, 2)\n\t\t],\n\t\tfeatures: [\n\t\t\tFeatureLogic.createTraitFeature('bear-feature-1', TraitType.Endurance, 1),\n\t\t\tFeatureLogic.createSkillFeature('bear-feature-2', SkillType.Brawl, 2),\n\t\t\tFeatureLogic.createDamageCategoryBonusFeature('bear-feature-3', DamageCategoryType.Physical, 1)\n\t\t],\n\t\tactions: [\n\t\t\t{\n\t\t\t\tid: 'bear-action-1',\n\t\t\t\tname: 'Bite',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.adjacent(ActionTargetType.Enemies, 1)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: false,\n\t\t\t\t\t\tskill: SkillType.Brawl,\n\t\t\t\t\t\ttrait: TraitType.Speed,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.dealDamage(DamageType.Piercing, 3)\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'bear-action-2',\n\t\t\t\tname: 'Swipe',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.adjacent(ActionTargetType.Enemies, 1)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: false,\n\t\t\t\t\t\tskill: SkillType.Brawl,\n\t\t\t\t\t\ttrait: TraitType.Speed,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.dealDamage(DamageType.Edged, 4)\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'bear-action-3',\n\t\t\t\tname: 'Hug',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.adjacent(ActionTargetType.Enemies, 1)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: false,\n\t\t\t\t\t\tskill: SkillType.Brawl,\n\t\t\t\t\t\ttrait: TraitType.Endurance,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.dealDamage(DamageType.Impact, 4)\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t}\n\t\t]\n\t});\n\n\tstatic giantSpider = (): SpeciesModel => ({\n\t\tid: 'species-giant-spider',\n\t\tname: 'Giant Spider',\n\t\tpackID: PackData.beasts().id,\n\t\tdescription: 'Venomous insects with eight legs.',\n\t\ttype: CombatantType.Monster,\n\t\tsize: 2,\n\t\tquirks: [\n\t\t\tQuirkType.Beast\n\t\t],\n\t\tstartingFeatures: [\n\t\t\tFeatureLogic.createSkillFeature('giant-spider-start-1', SkillType.Brawl, 2),\n\t\t\tFeatureLogic.createDamageBonusFeature('giant-spider-start-2', DamageType.Poison, 2)\n\t\t],\n\t\tfeatures: [\n\t\t\tFeatureLogic.createSkillFeature('giant-spider-feature-1', SkillType.Brawl, 2),\n\t\t\tFeatureLogic.createDamageBonusFeature('giant-spider-feature-2', DamageType.Poison, 2)\n\t\t],\n\t\tactions: [\n\t\t\t{\n\t\t\t\tid: 'giant-spider-action-1',\n\t\t\t\tname: 'Bite',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.adjacent(ActionTargetType.Enemies, 1)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: false,\n\t\t\t\t\t\tskill: SkillType.Brawl,\n\t\t\t\t\t\ttrait: TraitType.Endurance,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.dealDamage(DamageType.Edged, 2),\n\t\t\t\t\t\t\tActionEffects.dealDamage(DamageType.Poison, 2)\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'giant-spider-action-2',\n\t\t\t\tname: 'Web',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.burst(ActionTargetType.Enemies, Number.MAX_VALUE, 5)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: false,\n\t\t\t\t\t\tskill: SkillType.Brawl,\n\t\t\t\t\t\ttrait: TraitType.Endurance,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.addCondition(ConditionLogic.createTraitPenaltyCondition(TraitType.Endurance, 2, TraitType.Speed)),\n\t\t\t\t\t\t\tActionEffects.addCondition(ConditionLogic.createMovementPenaltyCondition(TraitType.Endurance, 5))\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t}\n\t\t]\n\t});\n\n\tstatic ratSwarm = (): SpeciesModel => ({\n\t\tid: 'species-rat-swarm',\n\t\tname: 'Rat Swarm',\n\t\tpackID: PackData.beasts().id,\n\t\tdescription: 'A swarm of large rodents.',\n\t\ttype: CombatantType.Monster,\n\t\tsize: 2,\n\t\tquirks: [\n\t\t\tQuirkType.Beast,\n\t\t\tQuirkType.Swarm\n\t\t],\n\t\tstartingFeatures: [\n\t\t\tFeatureLogic.createSkillFeature('rat-swarm-start-1', SkillType.Brawl, 2),\n\t\t\tFeatureLogic.createTraitFeature('rat-swarm-start-2', TraitType.Endurance, 1)\n\t\t],\n\t\tfeatures: [\n\t\t\tFeatureLogic.createSkillFeature('rat-swarm-feature-1', SkillType.Brawl, 2),\n\t\t\tFeatureLogic.createTraitFeature('rat-swarm-feature-2', TraitType.Endurance, 1)\n\t\t],\n\t\tactions: [\n\t\t\t{\n\t\t\t\tid: 'rat-swarm-action-1',\n\t\t\t\tname: 'Bite',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.adjacent(ActionTargetType.Enemies, Number.MAX_VALUE)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: false,\n\t\t\t\t\t\tskill: SkillType.Brawl,\n\t\t\t\t\t\ttrait: TraitType.Speed,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.dealDamage(DamageType.Piercing, 3),\n\t\t\t\t\t\t\tActionEffects.dealDamage(DamageType.Poison, 1)\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t}\n\t\t]\n\t});\n\n\tstatic stingerSwarm = (): SpeciesModel => ({\n\t\tid: 'species-stinger-swarm',\n\t\tname: 'Stinger Swarm',\n\t\tpackID: PackData.beasts().id,\n\t\tdescription: 'A swarm of fast-moving flying insects.',\n\t\ttype: CombatantType.Monster,\n\t\tsize: 2,\n\t\tquirks: [\n\t\t\tQuirkType.Beast,\n\t\t\tQuirkType.Swarm\n\t\t],\n\t\tstartingFeatures: [\n\t\t\tFeatureLogic.createSkillFeature('stinger-swarm-start-1', SkillType.Brawl, 2),\n\t\t\tFeatureLogic.createTraitFeature('stinger-swarm-start-2', TraitType.Speed, 1),\n\t\t\tFeatureLogic.createDamageBonusFeature('stinger-swarm-start-3', DamageType.Poison, 1)\n\t\t],\n\t\tfeatures: [\n\t\t\tFeatureLogic.createSkillFeature('stinger-swarm-feature-1', SkillType.Brawl, 2),\n\t\t\tFeatureLogic.createTraitFeature('stinger-swarm-feature-2', TraitType.Speed, 1),\n\t\t\tFeatureLogic.createDamageBonusFeature('stinger-swarm-feature-3', DamageType.Poison, 1)\n\t\t],\n\t\tactions: [\n\t\t\t{\n\t\t\t\tid: 'stinger-swarm-action-1',\n\t\t\t\tname: 'Follow Scent',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.burst(ActionTargetType.Enemies, 1, 3)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.forceMovement(MovementType.BesideTarget, 1),\n\t\t\t\t\tActionEffects.takeAnotherAction()\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'stinger-swarm-action-2',\n\t\t\t\tname: 'Sting',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.adjacent(ActionTargetType.Enemies, Number.MAX_VALUE)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: false,\n\t\t\t\t\t\tskill: SkillType.Brawl,\n\t\t\t\t\t\ttrait: TraitType.Speed,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.dealDamage(DamageType.Poison, 1)\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t}\n\t\t]\n\t});\n\n\tstatic wolf = (): SpeciesModel => ({\n\t\tid: 'species-wolf',\n\t\tname: 'Wolf',\n\t\tpackID: PackData.beasts().id,\n\t\tdescription: 'A large canine that hunts in packs.',\n\t\ttype: CombatantType.Monster,\n\t\tsize: 1,\n\t\tquirks: [\n\t\t\tQuirkType.Beast\n\t\t],\n\t\tstartingFeatures: [\n\t\t\tFeatureLogic.createTraitFeature('wolf-start-1', TraitType.Endurance, 1),\n\t\t\tFeatureLogic.createSkillFeature('wolf-start-2', SkillType.Brawl, 2)\n\t\t],\n\t\tfeatures: [\n\t\t\tFeatureLogic.createTraitFeature('wolf-feature-1', TraitType.Endurance, 1),\n\t\t\tFeatureLogic.createSkillFeature('wolf-feature-2', SkillType.Brawl, 2)\n\t\t],\n\t\tactions: [\n\t\t\t{\n\t\t\t\tid: 'wolf-action-1',\n\t\t\t\tname: 'Bite',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.adjacent(ActionTargetType.Enemies, 1)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: false,\n\t\t\t\t\t\tskill: SkillType.Brawl,\n\t\t\t\t\t\ttrait: TraitType.Speed,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.dealDamage(DamageType.Piercing, 3)\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'wolf-action-2',\n\t\t\t\tname: 'Pounce',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.burst(ActionTargetType.Enemies, 1, 3)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: false,\n\t\t\t\t\t\tskill: SkillType.Brawl,\n\t\t\t\t\t\ttrait: TraitType.Speed,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.dealDamage(DamageType.Piercing, 2),\n\t\t\t\t\t\t\tActionEffects.knockDown()\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'wolf-action-3',\n\t\t\t\tname: 'Pack Tactics',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.burst(ActionTargetType.Allies, 1, 5)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.commandMove(),\n\t\t\t\t\tActionEffects.takeAnotherAction()\n\t\t\t\t]\n\t\t\t}\n\t\t]\n\t});\n\n\t// Undead\n\n\tstatic skeleton = (): SpeciesModel => ({\n\t\tid: 'species-skeleton',\n\t\tname: 'Skeleton',\n\t\tpackID: PackData.undead().id,\n\t\tdescription: 'Re-animated bones.',\n\t\ttype: CombatantType.Monster,\n\t\tsize: 1,\n\t\tquirks: [\n\t\t\tQuirkType.Undead\n\t\t],\n\t\tstartingFeatures: [\n\t\t\tFeatureLogic.createSkillFeature('skeleton-start-1', SkillType.Brawl, 2),\n\t\t\tFeatureLogic.createDamageResistFeature('skeleton-start-2', DamageType.Piercing, 2),\n\t\t\tFeatureLogic.createDamageCategoryResistFeature('skeleton-start-3', DamageCategoryType.Corruption, 1)\n\t\t],\n\t\tfeatures: [\n\t\t\tFeatureLogic.createSkillFeature('skeleton-feature-1', SkillType.Brawl, 2),\n\t\t\tFeatureLogic.createDamageResistFeature('skeleton-feature-2', DamageType.Piercing, 2),\n\t\t\tFeatureLogic.createDamageCategoryResistFeature('skeleton-feature-3', DamageCategoryType.Corruption, 1)\n\t\t],\n\t\tactions: [\n\t\t\t{\n\t\t\t\tid: 'skeleton-action-1',\n\t\t\t\tname: 'Bash',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.adjacent(ActionTargetType.Enemies, 1)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: false,\n\t\t\t\t\t\tskill: SkillType.Brawl,\n\t\t\t\t\t\ttrait: TraitType.Speed,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.dealDamage(DamageType.Impact, 2)\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'skeleton-action-2',\n\t\t\t\tname: 'Reassemble',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.self()\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.healDamage(3),\n\t\t\t\t\tActionEffects.healWounds(1)\n\t\t\t\t]\n\t\t\t}\n\t\t]\n\t});\n\n\tstatic vampire = (): SpeciesModel => ({\n\t\tid: 'species-vampire',\n\t\tname: 'Vampire',\n\t\tpackID: PackData.undead().id,\n\t\tdescription: 'The blood is the life.',\n\t\ttype: CombatantType.Monster,\n\t\tsize: 1,\n\t\tquirks: [\n\t\t\tQuirkType.Undead\n\t\t],\n\t\tstartingFeatures: [\n\t\t\tFeatureLogic.createSkillFeature('vampire-start-1', SkillType.Brawl, 2),\n\t\t\tFeatureLogic.createSkillFeature('vampire-start-2', SkillType.Presence, 2)\n\t\t],\n\t\tfeatures: [\n\t\t\tFeatureLogic.createSkillFeature('vampire-feature-1', SkillType.Brawl, 2),\n\t\t\tFeatureLogic.createSkillFeature('vampire-feature-2', SkillType.Presence, 2),\n\t\t\tFeatureLogic.createDamageCategoryResistFeature('vampire-feature-3', DamageCategoryType.Corruption, 1)\n\t\t],\n\t\tactions: [\n\t\t\t{\n\t\t\t\tid: 'vampire-action-1',\n\t\t\t\tname: 'Speed Of The Grave',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.burst(ActionTargetType.Enemies, 1, 10)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.forceMovement(MovementType.BesideTarget, 0),\n\t\t\t\t\tActionEffects.takeAnotherAction()\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'vampire-action-2',\n\t\t\t\tname: 'Vampiric Bite',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.adjacent(ActionTargetType.Enemies, 1)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: false,\n\t\t\t\t\t\tskill: SkillType.Brawl,\n\t\t\t\t\t\ttrait: TraitType.Resolve,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.dealDamage(DamageType.Piercing, 1),\n\t\t\t\t\t\t\tActionEffects.dealDamage(DamageType.Decay, 1),\n\t\t\t\t\t\t\tActionEffects.toSelf([\n\t\t\t\t\t\t\t\tActionEffects.healDamage(1),\n\t\t\t\t\t\t\t\tActionEffects.healWounds(1)\n\t\t\t\t\t\t\t])\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'vampire-action-3',\n\t\t\t\tname: 'Mesmerize',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.adjacent(ActionTargetType.Enemies, 1)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: false,\n\t\t\t\t\t\tskill: SkillType.Presence,\n\t\t\t\t\t\ttrait: TraitType.Resolve,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.stun()\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t}\n\t\t]\n\t});\n\n\tstatic wraith = (): SpeciesModel => ({\n\t\tid: 'species-wraith',\n\t\tname: 'Wraith',\n\t\tpackID: PackData.undead().id,\n\t\tdescription: 'A floating, spectral apparition.',\n\t\ttype: CombatantType.Monster,\n\t\tsize: 1,\n\t\tquirks: [\n\t\t\tQuirkType.Undead,\n\t\t\tQuirkType.Amorphous\n\t\t],\n\t\tstartingFeatures: [\n\t\t\tFeatureLogic.createSkillFeature('wraith-start-1', SkillType.Presence, 2),\n\t\t\tFeatureLogic.createDamageCategoryResistFeature('wraith-start-2', DamageCategoryType.Corruption, 1),\n\t\t\tFeatureLogic.createTraitFeature('wraith-start-3', TraitType.Resolve, 1)\n\t\t],\n\t\tfeatures: [\n\t\t\tFeatureLogic.createSkillFeature('wraith-feature-1', SkillType.Presence, 2),\n\t\t\tFeatureLogic.createDamageCategoryResistFeature('wraith-feature-2', DamageCategoryType.Corruption, 1),\n\t\t\tFeatureLogic.createTraitFeature('wraith-feature-3', TraitType.Resolve, 1)\n\t\t],\n\t\tactions: [\n\t\t\t{\n\t\t\t\tid: 'wraith-action-1',\n\t\t\t\tname: 'Spectral Visage',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.burst(ActionTargetType.Enemies, 1, 10)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: false,\n\t\t\t\t\t\tskill: SkillType.Presence,\n\t\t\t\t\t\ttrait: TraitType.Resolve,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.forceMovement(MovementType.Push, 1),\n\t\t\t\t\t\t\tActionEffects.stun()\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'wraith-action-2',\n\t\t\t\tname: 'Life Drain',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.adjacent(ActionTargetType.Enemies, 1)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: false,\n\t\t\t\t\t\tskill: SkillType.Presence,\n\t\t\t\t\t\ttrait: TraitType.Resolve,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.dealDamage(DamageType.Decay, 2),\n\t\t\t\t\t\t\tActionEffects.addCondition(ConditionLogic.createSkillCategoryPenaltyCondition(TraitType.Resolve, 3, SkillCategoryType.Mental)),\n\t\t\t\t\t\t\tActionEffects.addCondition(ConditionLogic.createSkillCategoryPenaltyCondition(TraitType.Resolve, 3, SkillCategoryType.Physical))\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t}\n\t\t]\n\t});\n\n\tstatic zombie = (): SpeciesModel => ({\n\t\tid: 'species-zombie',\n\t\tname: 'Zombie',\n\t\tpackID: PackData.undead().id,\n\t\tdescription: 'A re-animated corpse.',\n\t\ttype: CombatantType.Monster,\n\t\tsize: 1,\n\t\tquirks: [\n\t\t\tQuirkType.Mindless,\n\t\t\tQuirkType.Undead\n\t\t],\n\t\tstartingFeatures: [\n\t\t\tFeatureLogic.createSkillFeature('zombie-start-1', SkillType.Brawl, 2),\n\t\t\tFeatureLogic.createDamageCategoryResistFeature('zombie-start-2', DamageCategoryType.Corruption, 1),\n\t\t\tFeatureLogic.createTraitFeature('zombie-start-3', TraitType.Endurance, 1)\n\t\t],\n\t\tfeatures: [\n\t\t\tFeatureLogic.createSkillFeature('zombie-feature-1', SkillType.Brawl, 2),\n\t\t\tFeatureLogic.createDamageCategoryResistFeature('zombie-feature-2', DamageCategoryType.Corruption, 1),\n\t\t\tFeatureLogic.createTraitFeature('zombie-feature-3', TraitType.Endurance, 1)\n\t\t],\n\t\tactions: [\n\t\t\t{\n\t\t\t\tid: 'zombie-action-1',\n\t\t\t\tname: 'Rend',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.adjacent(ActionTargetType.Enemies, 1)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: false,\n\t\t\t\t\t\tskill: SkillType.Brawl,\n\t\t\t\t\t\ttrait: TraitType.Endurance,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.dealDamage(DamageType.Piercing, 2),\n\t\t\t\t\t\t\tActionEffects.dealDamage(DamageType.Decay, 2)\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'zombie-action-2',\n\t\t\t\tname: 'Grave Rot',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.adjacent(ActionTargetType.Combatants, Number.MAX_VALUE)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: false,\n\t\t\t\t\t\tskill: SkillType.Brawl,\n\t\t\t\t\t\ttrait: TraitType.Endurance,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.dealDamage(DamageType.Decay, 3),\n\t\t\t\t\t\t\tActionEffects.toSelf([\n\t\t\t\t\t\t\t\tActionEffects.healDamage(1)\n\t\t\t\t\t\t\t])\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t}\n\t\t]\n\t});\n\n\t// Fae\n\n\tstatic banshee = (): SpeciesModel => ({\n\t\tid: 'species-banshee',\n\t\tname: 'Banshee',\n\t\tpackID: PackData.fae().id,\n\t\tdescription: 'A fae spirit whose unearthly wail presages death.',\n\t\ttype: CombatantType.Monster,\n\t\tsize: 1,\n\t\tquirks: [\n\t\t\tQuirkType.Undead\n\t\t],\n\t\tstartingFeatures: [\n\t\t\tFeatureLogic.createSkillFeature('banshee-start-1', SkillType.Presence, 2),\n\t\t\tFeatureLogic.createDamageBonusFeature('banshee-start-2', DamageType.Sonic, 1),\n\t\t\tFeatureLogic.createTraitFeature('banshee-start-3', TraitType.Resolve, 1)\n\t\t],\n\t\tfeatures: [\n\t\t\tFeatureLogic.createSkillFeature('banshee-feature-1', SkillType.Presence, 2),\n\t\t\tFeatureLogic.createDamageBonusFeature('banshee-feature-2', DamageType.Sonic, 1),\n\t\t\tFeatureLogic.createTraitFeature('banshee-feature-3', TraitType.Resolve, 1)\n\t\t],\n\t\tactions: [\n\t\t\t{\n\t\t\t\tid: 'banshee-action-1',\n\t\t\t\tname: 'Deathly Scream',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.burst(ActionTargetType.Enemies, 1, 5)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: false,\n\t\t\t\t\t\tskill: SkillType.Presence,\n\t\t\t\t\t\ttrait: TraitType.Resolve,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.dealDamage(DamageType.Sonic, 3),\n\t\t\t\t\t\t\tActionEffects.forceMovement(MovementType.Push, 1),\n\t\t\t\t\t\t\tActionEffects.addCondition(ConditionLogic.createMovementPenaltyCondition(TraitType.Resolve, 3))\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'banshee-action-2',\n\t\t\t\tname: 'Keening Wail',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.burst(ActionTargetType.Enemies, Number.MAX_VALUE, 5)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: false,\n\t\t\t\t\t\tskill: SkillType.Presence,\n\t\t\t\t\t\ttrait: TraitType.Resolve,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.dealDamage(DamageType.Sonic, 3)\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t}\n\t\t]\n\t});\n\n\t// Cold blood\n\n\tstatic crocodilian = (): SpeciesModel => ({\n\t\tid: 'species-crocodilian',\n\t\tname: 'Crocodilian',\n\t\tpackID: PackData.coldBlood().id,\n\t\tdescription: 'An ancient species of humanoid crocodiles with armored skin.',\n\t\ttype: CombatantType.Monster,\n\t\tsize: 1,\n\t\tquirks: [],\n\t\tstartingFeatures: [\n\t\t\tFeatureLogic.createSkillFeature('crocodilian-start-1', SkillType.Brawl, 2),\n\t\t\tFeatureLogic.createDamageCategoryResistFeature('crocodilian-start-2', DamageCategoryType.Physical, 2),\n\t\t\tFeatureLogic.createDamageCategoryResistFeature('crocodilian-start-3', DamageCategoryType.Energy, 2)\n\t\t],\n\t\tfeatures: [\n\t\t\tFeatureLogic.createSkillFeature('crocodilian-feature-1', SkillType.Brawl, 2),\n\t\t\tFeatureLogic.createDamageCategoryResistFeature('crocodilian-feature-2', DamageCategoryType.Physical, 2),\n\t\t\tFeatureLogic.createDamageCategoryResistFeature('crocodilian-feature-3', DamageCategoryType.Energy, 2)\n\t\t],\n\t\tactions: [\n\t\t\t{\n\t\t\t\tid: 'crocodilian-action-1',\n\t\t\t\tname: 'Snapjaw',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.adjacent(ActionTargetType.Enemies, 1)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: false,\n\t\t\t\t\t\tskill: SkillType.Brawl,\n\t\t\t\t\t\ttrait: TraitType.Speed,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.dealDamage(DamageType.Piercing, 3)\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'crocodilian-action-2',\n\t\t\t\tname: 'Tail Swipe',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.adjacent(ActionTargetType.Combatants, Number.MAX_VALUE)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: false,\n\t\t\t\t\t\tskill: SkillType.Brawl,\n\t\t\t\t\t\ttrait: TraitType.Speed,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.dealDamage(DamageType.Impact, 3),\n\t\t\t\t\t\t\tActionEffects.forceMovement(MovementType.Push, 1),\n\t\t\t\t\t\t\tActionEffects.knockDown()\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t}\n\t\t]\n\t});\n\n\tstatic naga = (): SpeciesModel => ({\n\t\tid: 'species-naga',\n\t\tname: 'Naga',\n\t\tpackID: PackData.coldBlood().id,\n\t\tdescription: 'A serpentine humanoid.',\n\t\ttype: CombatantType.Monster,\n\t\tsize: 1,\n\t\tquirks: [],\n\t\tstartingFeatures: [\n\t\t\tFeatureLogic.createTraitFeature('naga-start-1', TraitType.Speed, 1),\n\t\t\tFeatureLogic.createSkillFeature('naga-start-2', SkillType.Brawl, 2),\n\t\t\tFeatureLogic.createSkillFeature('naga-start-3', SkillType.Presence, 2)\n\t\t],\n\t\tfeatures: [\n\t\t\tFeatureLogic.createTraitFeature('naga-feature-1', TraitType.Speed, 1),\n\t\t\tFeatureLogic.createSkillFeature('naga-feature-2', SkillType.Brawl, 2),\n\t\t\tFeatureLogic.createSkillFeature('naga-feature-3', SkillType.Presence, 2),\n\t\t\tFeatureLogic.createDamageBonusFeature('naga-feature-4', DamageType.Poison, 2),\n\t\t\tFeatureLogic.createDamageResistFeature('naga-feature-5', DamageType.Poison, 2)\n\t\t],\n\t\tactions: [\n\t\t\t{\n\t\t\t\tid: 'naga-action-1',\n\t\t\t\tname: 'Venomous Bite',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.adjacent(ActionTargetType.Enemies, 1)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: false,\n\t\t\t\t\t\tskill: SkillType.Brawl,\n\t\t\t\t\t\ttrait: TraitType.Speed,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.dealDamage(DamageType.Poison, 4)\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'naga-action-2',\n\t\t\t\tname: 'Constrict',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.adjacent(ActionTargetType.Enemies, 1)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: false,\n\t\t\t\t\t\tskill: SkillType.Brawl,\n\t\t\t\t\t\ttrait: TraitType.Endurance,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.dealDamage(DamageType.Impact, 4)\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'naga-action-3',\n\t\t\t\tname: 'Beguiling Gaze',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.burst(ActionTargetType.Enemies, 1, 8)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: false,\n\t\t\t\t\t\tskill: SkillType.Presence,\n\t\t\t\t\t\ttrait: TraitType.Resolve,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.commandAction()\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t}\n\t\t]\n\t});\n\n\tstatic getList = (): SpeciesModel[] => {\n\t\tconst list = [\n\t\t\tMonsterSpeciesData.colossus(),\n\t\t\tMonsterSpeciesData.gnoll(),\n\t\t\tMonsterSpeciesData.goblin(),\n\t\t\tMonsterSpeciesData.medusa(),\n\t\t\tMonsterSpeciesData.orc(),\n\t\t\tMonsterSpeciesData.ratfolk(),\n\t\t\tMonsterSpeciesData.troll(),\n\t\t\t// Elementals\n\t\t\tMonsterSpeciesData.airElemental(),\n\t\t\tMonsterSpeciesData.earthElemental(),\n\t\t\tMonsterSpeciesData.fireElemental(),\n\t\t\tMonsterSpeciesData.waterElemental(),\n\t\t\t// Beasts\n\t\t\tMonsterSpeciesData.bear(),\n\t\t\tMonsterSpeciesData.giantSpider(),\n\t\t\tMonsterSpeciesData.ratSwarm(),\n\t\t\tMonsterSpeciesData.scarab(),\n\t\t\tMonsterSpeciesData.stingerSwarm(),\n\t\t\tMonsterSpeciesData.wolf(),\n\t\t\t// Undead\n\t\t\tMonsterSpeciesData.skeleton(),\n\t\t\tMonsterSpeciesData.vampire(),\n\t\t\tMonsterSpeciesData.wraith(),\n\t\t\tMonsterSpeciesData.zombie(),\n\t\t\t// Fae\n\t\t\tMonsterSpeciesData.banshee(),\n\t\t\t// Cold blood\n\t\t\tMonsterSpeciesData.crocodilian(),\n\t\t\tMonsterSpeciesData.naga()\n\t\t];\n\n\t\tlist.forEach(n => {\n\t\t\tn.startingFeatures = Collections.sort(n.startingFeatures, f => FeatureLogic.getFeatureTitle(f));\n\t\t\tn.features = Collections.sort(n.features, f => FeatureLogic.getFeatureTitle(f));\n\t\t\tn.actions = Collections.sort(n.actions, a => a.name);\n\t\t});\n\t\treturn Collections.sort(list, n => n.name);\n\t};\n}\n","export enum ActionRangeType {\n\tSelf = 'Self',\n\tAdjacent = 'Adjacent',\n\tBurst = 'Burst',\n\tWeapon = 'Weapon'\n}\n","export enum EncounterMapSquareType {\n\tClear = 'Clear',\n\tObstructed = 'Obstructed'\n}\n","export enum SummonType {\n\tUndead = 'undead',\n\tBeast = 'beast',\n\tElemental = 'elemental'\n}\n","export class HashTable<T> {\n\tprivate size = 199;\n\tprivate data: Record<string, T>[] = [];\n\n\thash = (key: string) => {\n\t\tconst sum = key.split('').reduce((acc: number, char: string) => acc + char.charCodeAt(0), 0);\n\t\treturn sum % this.size;\n\t};\n\n\tinsert = (key: string, value: T) => {\n\t\tconst index = this.hash(key);\n\n\t\tif (!this.data[index]) {\n\t\t\tconst rec: Record<string, T> = {};\n\t\t\tthis.data[index] = rec;\n\t\t}\n\n\t\tthis.data[index][key] = value;\n\t};\n\n\tsearch = (key: string) => {\n\t\tconst index = this.hash(key);\n\t\tconst rec = this.data[index];\n\t\tif (rec) {\n\t\t\tconst value = rec[key];\n\t\t\tif (value !== undefined) {\n\t\t\t\treturn value;\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t};\n\n\treset = () => {\n\t\tthis.data = [];\n\t};\n}\n","import type { EncounterMapEdgeModel, EncounterMapSquareModel } from '../models/encounter';\n\nimport { Collections } from '../utils/collections';\nimport { HashTable } from '../utils/hash-table';\nimport { Random } from '../utils/random';\nimport { Utils } from '../utils/utils';\n\nexport class EncounterMapLogic {\n\tstatic getFloorBlob = (squares: EncounterMapSquareModel[], start: { x: number, y: number }, rng: () => number = Math.random) => {\n\t\tconst blob: EncounterMapSquareModel[] = [];\n\n\t\tconst square = squares.find(sq => (sq.x === start.x) && (sq.y === start.y));\n\t\tif (square) {\n\t\t\tblob.push(square);\n\t\t}\n\n\t\twhile ((blob.length < 5) || (Random.randomNumber(10, rng) !== 0)) {\n\t\t\tlet candidates: EncounterMapSquareModel[] = squares;\n\t\t\tif (blob.length > 0) {\n\t\t\t\tcandidates = EncounterMapLogic.getAdjacentSquares(squares, blob, [ 'n', 'e', 's', 'w' ]);\n\t\t\t}\n\n\t\t\tif (candidates.length === 0) {\n\t\t\t\treturn blob;\n\t\t\t}\n\n\t\t\tconst square = Collections.draw(candidates, rng);\n\t\t\tblob.push(square);\n\t\t}\n\n\t\treturn blob;\n\t};\n\n\tstatic getWallBlob = (squares: EncounterMapSquareModel[], start: { x: number, y: number }, rng: () => number = Math.random) => {\n\t\tconst blob: { x: number, y: number }[] = [ start ];\n\n\t\twhile ((blob.length < 5) || (Random.randomNumber(10, rng) !== 0)) {\n\t\t\tlet candidates: { x: number, y: number }[] = squares;\n\t\t\tif (blob.length > 0) {\n\t\t\t\tcandidates = EncounterMapLogic.getAdjacentWalls(squares, blob, [ 'n', 'e', 's', 'w' ]);\n\t\t\t}\n\n\t\t\tif (candidates.length === 0) {\n\t\t\t\treturn blob;\n\t\t\t}\n\n\t\t\tconst square = Collections.draw(candidates, rng);\n\t\t\tblob.push(square);\n\t\t}\n\n\t\treturn blob;\n\t};\n\n\tstatic getDimensions = (map: EncounterMapSquareModel[]) => {\n\t\tconst dims = {\n\t\t\tleft: Number.MAX_VALUE,\n\t\t\ttop: Number.MAX_VALUE,\n\t\t\tright: Number.MIN_VALUE,\n\t\t\tbottom: Number.MIN_VALUE\n\t\t};\n\n\t\tmap.forEach(sq => {\n\t\t\tdims.left = Math.min(dims.left, sq.x);\n\t\t\tdims.top = Math.min(dims.top, sq.y);\n\t\t\tdims.right = Math.max(dims.right, sq.x);\n\t\t\tdims.bottom = Math.max(dims.bottom, sq.y);\n\t\t});\n\n\t\treturn dims;\n\t};\n\n\tstatic getAdjacentSquares = (map: EncounterMapSquareModel[], squares: { x: number; y: number }[], directions: ('n' | 'ne' | 'e' | 'se' | 's' | 'sw' | 'w' | 'nw')[] = []) => {\n\t\tconst adj: EncounterMapSquareModel[] = [];\n\n\t\tconst checkSquare = (sq: { x: number, y: number }) => {\n\t\t\tif (!squares.find(s => (s.x === sq.x) && (s.y === sq.y)) && !adj.find(s => (s.x === sq.x) && (s.y === sq.y))) {\n\t\t\t\tconst mapSquare = map.find(s => (s.x === sq.x) && (s.y === sq.y));\n\t\t\t\tif (mapSquare) {\n\t\t\t\t\tadj.push(mapSquare);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tsquares.forEach(square => {\n\t\t\tif ((directions.length === 0) || (directions.includes('n'))) {\n\t\t\t\tconst sq = { x: square.x, y: square.y - 1 };\n\t\t\t\tcheckSquare(sq);\n\t\t\t}\n\t\t\tif ((directions.length === 0) || (directions.includes('ne'))) {\n\t\t\t\tconst sq = { x: square.x + 1, y: square.y - 1 };\n\t\t\t\tcheckSquare(sq);\n\t\t\t}\n\t\t\tif ((directions.length === 0) || (directions.includes('e'))) {\n\t\t\t\tconst sq = { x: square.x + 1, y: square.y };\n\t\t\t\tcheckSquare(sq);\n\t\t\t}\n\t\t\tif ((directions.length === 0) || (directions.includes('se'))) {\n\t\t\t\tconst sq = { x: square.x + 1, y: square.y + 1 };\n\t\t\t\tcheckSquare(sq);\n\t\t\t}\n\t\t\tif ((directions.length === 0) || (directions.includes('s'))) {\n\t\t\t\tconst sq = { x: square.x, y: square.y + 1 };\n\t\t\t\tcheckSquare(sq);\n\t\t\t}\n\t\t\tif ((directions.length === 0) || (directions.includes('sw'))) {\n\t\t\t\tconst sq = { x: square.x - 1, y: square.y + 1 };\n\t\t\t\tcheckSquare(sq);\n\t\t\t}\n\t\t\tif ((directions.length === 0) || (directions.includes('w'))) {\n\t\t\t\tconst sq = { x: square.x - 1, y: square.y };\n\t\t\t\tcheckSquare(sq);\n\t\t\t}\n\t\t\tif ((directions.length === 0) || (directions.includes('nw'))) {\n\t\t\t\tconst sq = { x: square.x - 1, y: square.y - 1 };\n\t\t\t\tcheckSquare(sq);\n\t\t\t}\n\t\t});\n\n\t\treturn adj;\n\t};\n\n\tstatic getAdjacentWalls = (map: EncounterMapSquareModel[], squares: { x: number; y: number }[], directions: ('n' | 'ne' | 'e' | 'se' | 's' | 'sw' | 'w' | 'nw')[] = []) => {\n\t\tconst adj: { x: number; y: number }[] = [];\n\n\t\tconst checkSquare = (sq: { x: number, y: number }) => {\n\t\t\tif (!squares.find(s => (s.x === sq.x) && (s.y === sq.y)) && !adj.find(s => (s.x === sq.x) && (s.y === sq.y))) {\n\t\t\t\tif (!map.find(s => (s.x === sq.x) && (s.y === sq.y))) {\n\t\t\t\t\tadj.push(sq);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tsquares.forEach(square => {\n\t\t\tif ((directions.length === 0) || (directions.includes('n'))) {\n\t\t\t\tconst sq = { x: square.x, y: square.y - 1 };\n\t\t\t\tcheckSquare(sq);\n\t\t\t}\n\t\t\tif ((directions.length === 0) || (directions.includes('ne'))) {\n\t\t\t\tconst sq = { x: square.x + 1, y: square.y - 1 };\n\t\t\t\tcheckSquare(sq);\n\t\t\t}\n\t\t\tif ((directions.length === 0) || (directions.includes('e'))) {\n\t\t\t\tconst sq = { x: square.x + 1, y: square.y };\n\t\t\t\tcheckSquare(sq);\n\t\t\t}\n\t\t\tif ((directions.length === 0) || (directions.includes('se'))) {\n\t\t\t\tconst sq = { x: square.x + 1, y: square.y + 1 };\n\t\t\t\tcheckSquare(sq);\n\t\t\t}\n\t\t\tif ((directions.length === 0) || (directions.includes('s'))) {\n\t\t\t\tconst sq = { x: square.x, y: square.y + 1 };\n\t\t\t\tcheckSquare(sq);\n\t\t\t}\n\t\t\tif ((directions.length === 0) || (directions.includes('sw'))) {\n\t\t\t\tconst sq = { x: square.x - 1, y: square.y + 1 };\n\t\t\t\tcheckSquare(sq);\n\t\t\t}\n\t\t\tif ((directions.length === 0) || (directions.includes('w'))) {\n\t\t\t\tconst sq = { x: square.x - 1, y: square.y };\n\t\t\t\tcheckSquare(sq);\n\t\t\t}\n\t\t\tif ((directions.length === 0) || (directions.includes('nw'))) {\n\t\t\t\tconst sq = { x: square.x - 1, y: square.y - 1 };\n\t\t\t\tcheckSquare(sq);\n\t\t\t}\n\t\t});\n\n\t\treturn adj;\n\t};\n\n\tstatic getDistanceAny = (aSquares: { x: number, y: number }[], bSquares: { x: number, y: number }[]) => {\n\t\tconst distances = aSquares.flatMap(a => bSquares.map(b => EncounterMapLogic.getDistance(a, b)));\n\t\treturn Math.min(...distances);\n\t};\n\n\tstatic getDistance = (a: { x: number, y: number }, b: { x: number, y: number }) => {\n\t\tconst x2 = Math.pow(a.x - b.x, 2);\n\t\tconst y2 = Math.pow(a.y - b.y, 2);\n\t\tconst hyp = Math.sqrt(x2 + y2);\n\t\treturn Math.floor(hyp);\n\t};\n\n\tstatic getDirection = (a: { x: number, y: number }, b: { x: number, y: number }) => {\n\t\tconst y = -(b.y) - -(a.y);\n\t\tconst x = b.x - a.x;\n\t\tconst radians = Math.atan2(y, x);\n\t\tconst degrees = radians * 180 / Math.PI;\n\t\treturn 90 - degrees;\n\t};\n\n\tstatic canSeeAny = (edges: EncounterMapEdgeModel, aSquares: { x: number, y: number }[], bSquares: { x: number, y: number }[]) => {\n\t\treturn aSquares.some(a => bSquares.some(b => EncounterMapLogic.canSee(edges, a, b)));\n\t};\n\n\tstatic visibilityCache = new HashTable<boolean>();\n\n\tstatic canSee = (edges: EncounterMapEdgeModel, a: { x: number, y: number }, b: { x: number, y: number }) => {\n\t\t// Check the cache\n\t\tconst cached = EncounterMapLogic.visibilityCache.search(`${a.x} ${a.y} - ${b.x} ${b.y}`);\n\t\tif (cached !== null) {\n\t\t\treturn cached;\n\t\t}\n\n\t\t// Do the calculation\n\t\tconst midA = { x: a.x + 0.5, y: a.y + 0.5 };\n\t\tconst midB = { x: b.x + 0.5, y: b.y + 0.5 };\n\t\tconst visible = !(edges.horizontal.some(edge => Utils.intersects({ a: midA, b: midB }, { a: { x: edge.start, y: edge.y }, b: { x: edge.end, y: edge.y } }))\n\t\t\t|| edges.vertical.some(edge => Utils.intersects({ a: midA, b: midB }, { a: { x: edge.x, y: edge.start }, b: { x: edge.x, y: edge.end } })));\n\n\t\t// Cache this value\n\t\tEncounterMapLogic.visibilityCache.insert(`${a.x} ${a.y} - ${b.x} ${b.y}`, visible);\n\t\tEncounterMapLogic.visibilityCache.insert(`${b.x} ${b.y} - ${a.x} ${a.y}`, visible);\n\n\t\treturn visible;\n\t};\n\n\tstatic getMapEdges = (map: EncounterMapSquareModel[]): EncounterMapEdgeModel => {\n\t\tconst horizontal: { start: number, end: number, y: number }[] = [];\n\t\tEncounterMapLogic.getAdjacentWalls(map, map, [ 'n' ]).forEach(wall => horizontal.push({ start: wall.x, end: wall.x + 1, y: wall.y + 1 }));\n\t\tEncounterMapLogic.getAdjacentWalls(map, map, [ 's' ]).forEach(wall => horizontal.push({ start: wall.x, end: wall.x + 1, y: wall.y }));\n\n\t\tconst vertical: { start: number, end: number, x: number }[] = [];\n\t\tEncounterMapLogic.getAdjacentWalls(map, map, [ 'e' ]).forEach(wall => vertical.push({ start: wall.y, end: wall.y + 1, x: wall.x }));\n\t\tEncounterMapLogic.getAdjacentWalls(map, map, [ 'w' ]).forEach(wall => vertical.push({ start: wall.y, end: wall.y + 1, x: wall.x + 1 }));\n\n\t\tconst horizontalReduced: { start: number, end: number, y: number }[] = [];\n\t\thorizontal.sort((a, b) => a.start - b.start).forEach(edge => {\n\t\t\tconst e = horizontalReduced.find(e => (e.y === edge.y) && (e.end === edge.start));\n\t\t\tif (e) {\n\t\t\t\te.end = edge.end;\n\t\t\t} else {\n\t\t\t\thorizontalReduced.push(edge);\n\t\t\t}\n\t\t});\n\n\t\tconst verticalReduced: { start: number, end: number, x: number }[] = [];\n\t\tvertical.sort((a, b) => a.start - b.start).forEach(edge => {\n\t\t\tconst e = verticalReduced.find(e => (e.x === edge.x) && (e.end === edge.start));\n\t\t\tif (e) {\n\t\t\t\te.end = edge.end;\n\t\t\t} else {\n\t\t\t\tverticalReduced.push(edge);\n\t\t\t}\n\t\t});\n\n\t\treturn {\n\t\t\thorizontal: horizontalReduced,\n\t\t\tvertical: verticalReduced\n\t\t};\n\t};\n}\n","import { EncounterMapSquareType } from '../enums/encounter-map-square-type';\n\nimport type { EncounterMapSquareModel } from '../models/encounter';\n\nimport { Collections } from '../utils/collections';\nimport { Random } from '../utils/random';\n\nimport { EncounterMapLogic } from '../logic/encounter-map-logic';\n\nexport class EncounterMapGenerator {\n\tstatic generateEncounterMap = (rng: () => number): EncounterMapSquareModel[] => {\n\t\tEncounterMapLogic.visibilityCache.reset();\n\n\t\tconst mapTypes = [\n\t\t\tEncounterMapGenerator.generateDungeonMap,\n\t\t\tEncounterMapGenerator.generateRuinMap,\n\t\t\tEncounterMapGenerator.generateCavernMap,\n\t\t\tEncounterMapGenerator.generateStreetMap\n\t\t];\n\t\tconst fn = Collections.draw(mapTypes, rng);\n\t\tconst map = fn(400, rng);\n\n\t\twhile (Random.randomNumber(3, rng) !== 0) {\n\t\t\t// Add a blob of obstructed terrain\n\t\t\tconst start = Collections.draw(map, rng);\n\t\t\tconst blob = EncounterMapLogic.getFloorBlob(map, start, rng);\n\t\t\tblob.forEach(sq => sq.type = EncounterMapSquareType.Obstructed);\n\t\t}\n\n\t\treturn EncounterMapGenerator.simplifyMap(map);\n\t};\n\n\tstatic generateDungeonMap = (size: number, rng: () => number): EncounterMapSquareModel[] => {\n\t\tconst map: EncounterMapSquareModel[] = [];\n\n\t\twhile (map.length < size) {\n\t\t\tconst dirs = [ 'n', 'e', 's', 'w' ];\n\t\t\tconst dir = Collections.draw(dirs, rng);\n\n\t\t\t// 0, 1 = room, 2 = corridor\n\t\t\tconst type = Random.randomNumber(3, rng);\n\n\t\t\tconst size = {\n\t\t\t\twidth: (type === 2) && ((dir === 'n') || (dir === 's')) ? 2 : Random.dice(2, rng),\n\t\t\t\theight: (type === 2) && ((dir === 'e') || (dir === 'w')) ? 2 : Random.dice(2, rng)\n\t\t\t};\n\n\t\t\tconst position = { x: 0, y: 0 };\n\t\t\tif (map.length > 0) {\n\t\t\t\tconst adj = EncounterMapLogic.getAdjacentWalls(map, map, [ dir as 'n' | 'e' | 's' | 'w' ]);\n\t\t\t\tconst sq = Collections.draw(adj, rng);\n\t\t\t\tif (dir === 'n') {\n\t\t\t\t\tsq.y -= (size.height - 1);\n\t\t\t\t}\n\t\t\t\tif (dir === 'w') {\n\t\t\t\t\tsq.x -= (size.width - 1);\n\t\t\t\t}\n\t\t\t\tposition.x = sq.x;\n\t\t\t\tposition.y = sq.y;\n\t\t\t}\n\n\t\t\tfor (let x = position.x; x < position.x + size.width; ++x) {\n\t\t\t\tfor (let y = position.y; y < position.y + size.height; ++y) {\n\t\t\t\t\tif (!map.find(t => (t.x === x) && (t.y === y))) {\n\t\t\t\t\t\tconst square: EncounterMapSquareModel = {\n\t\t\t\t\t\t\tx: x,\n\t\t\t\t\t\t\ty: y,\n\t\t\t\t\t\t\ttype: EncounterMapSquareType.Clear\n\t\t\t\t\t\t};\n\t\t\t\t\t\tmap.push(square);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn map;\n\t};\n\n\tstatic generateRuinMap = (size: number, rng: () => number): EncounterMapSquareModel[] => {\n\t\tconst map: EncounterMapSquareModel[] = [];\n\n\t\twhile (map.length < size) {\n\t\t\tconst dirs = [ 'n', 'e', 's', 'w' ];\n\t\t\tconst dir = Collections.draw(dirs, rng);\n\n\t\t\tif (Random.randomBoolean(rng)) {\n\t\t\t\t// 0, 1 = room, 2 = corridor\n\t\t\t\tconst type = Random.randomNumber(3, rng);\n\n\t\t\t\tconst size = {\n\t\t\t\t\twidth: (type === 2) && ((dir === 'n') || (dir === 's')) ? 2 : Random.dice(2, rng),\n\t\t\t\t\theight: (type === 2) && ((dir === 'e') || (dir === 'w')) ? 2 : Random.dice(2, rng)\n\t\t\t\t};\n\n\t\t\t\tconst position = { x: 0, y: 0 };\n\t\t\t\tif (map.length > 0) {\n\t\t\t\t\tconst adj = EncounterMapLogic.getAdjacentWalls(map, map, [ dir as 'n' | 'e' | 's' | 'w' ]);\n\t\t\t\t\tconst sq = Collections.draw(adj, rng);\n\t\t\t\t\tif (dir === 'n') {\n\t\t\t\t\t\tsq.y -= (size.height - 1);\n\t\t\t\t\t}\n\t\t\t\t\tif (dir === 'w') {\n\t\t\t\t\t\tsq.x -= (size.width - 1);\n\t\t\t\t\t}\n\t\t\t\t\tposition.x = sq.x;\n\t\t\t\t\tposition.y = sq.y;\n\t\t\t\t}\n\n\t\t\t\tfor (let x = position.x; x < position.x + size.width; ++x) {\n\t\t\t\t\tfor (let y = position.y; y < position.y + size.height; ++y) {\n\t\t\t\t\t\tif (!map.find(t => (t.x === x) && (t.y === y))) {\n\t\t\t\t\t\t\tconst square: EncounterMapSquareModel = {\n\t\t\t\t\t\t\t\tx: x,\n\t\t\t\t\t\t\t\ty: y,\n\t\t\t\t\t\t\t\ttype: EncounterMapSquareType.Clear\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tmap.push(square);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconst walls = EncounterMapLogic.getAdjacentWalls(map, map, [ 'n', 'e', 's', 'w' ]);\n\t\t\t\tif (walls.length > 0) {\n\t\t\t\t\tconst wall = Collections.draw(walls, rng);\n\n\t\t\t\t\tconst blob = EncounterMapLogic.getWallBlob(map, wall, rng);\n\t\t\t\t\tblob.forEach(sq => {\n\t\t\t\t\t\tconst square: EncounterMapSquareModel = {\n\t\t\t\t\t\t\tx: sq.x,\n\t\t\t\t\t\t\ty: sq.y,\n\t\t\t\t\t\t\ttype: EncounterMapSquareType.Clear\n\t\t\t\t\t\t};\n\t\t\t\t\t\tmap.push(square);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn map;\n\t};\n\n\tstatic generateCavernMap = (size: number, rng: () => number): EncounterMapSquareModel[] => {\n\t\tconst map: EncounterMapSquareModel[] = [\n\t\t\t{\n\t\t\t\tx: 0,\n\t\t\t\ty: 0,\n\t\t\t\ttype: EncounterMapSquareType.Clear\n\t\t\t}\n\t\t];\n\n\t\twhile (map.length < size) {\n\t\t\tconst walls = EncounterMapLogic.getAdjacentWalls(map, map, [ 'n', 'e', 's', 'w' ]);\n\t\t\tif (walls.length > 0) {\n\t\t\t\tconst wall = Collections.draw(walls, rng);\n\n\t\t\t\tconst blob = EncounterMapLogic.getWallBlob(map, wall, rng);\n\t\t\t\tblob.forEach(sq => {\n\t\t\t\t\tconst square: EncounterMapSquareModel = {\n\t\t\t\t\t\tx: sq.x,\n\t\t\t\t\t\ty: sq.y,\n\t\t\t\t\t\ttype: EncounterMapSquareType.Clear\n\t\t\t\t\t};\n\t\t\t\t\tmap.push(square);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\treturn map;\n\t};\n\n\tstatic generateStreetMap = (size: number, rng: () => number): EncounterMapSquareModel[] => {\n\t\tconst map: EncounterMapSquareModel[] = [];\n\n\t\tconst intersections: { x: number, y: number, used: { n: boolean, e: boolean, s: boolean, w: boolean } }[] = [];\n\n\t\twhile (map.length < size) {\n\t\t\tconst position = { x: 0, y: 0 };\n\t\t\tconst length = 8 + Random.dice(5, rng);\n\n\t\t\tif (intersections.length === 0) {\n\t\t\t\tconst dirs = [ 'n', 'e', 's', 'w' ];\n\t\t\t\tconst dir = Collections.draw(dirs, rng);\n\t\t\t\tconst size = {\n\t\t\t\t\twidth: (dir === 'n') || (dir === 's') ? 3 : length,\n\t\t\t\t\theight: (dir === 'e') || (dir === 'w') ? 3 : length\n\t\t\t\t};\n\t\t\t\tfor (let x = position.x; x < position.x + size.width; ++x) {\n\t\t\t\t\tfor (let y = position.y; y < position.y + size.height; ++y) {\n\t\t\t\t\t\tif (!map.find(t => (t.x === x) && (t.y === y))) {\n\t\t\t\t\t\t\tconst square: EncounterMapSquareModel = {\n\t\t\t\t\t\t\t\tx: x,\n\t\t\t\t\t\t\t\ty: y,\n\t\t\t\t\t\t\t\ttype: EncounterMapSquareType.Clear\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tmap.push(square);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tintersections.push({ x: position.x + 1, y: position.y + 1, used: { n: dir === 'n', e: dir === 'e', s: dir === 's', w: dir === 'w' } });\n\t\t\t\tintersections.push({ x: position.x + size.width - 2, y: position.y + size.height - 2, used: { n: dir === 's', e: dir === 'w', s: dir === 'n', w: dir === 'e' } });\n\t\t\t} else {\n\t\t\t\tconst intersection = Collections.draw(intersections, rng);\n\t\t\t\tconst dirs = [];\n\t\t\t\tif (!intersection.used.n) {\n\t\t\t\t\tdirs.push('n');\n\t\t\t\t}\n\t\t\t\tif (!intersection.used.e) {\n\t\t\t\t\tdirs.push('e');\n\t\t\t\t}\n\t\t\t\tif (!intersection.used.s) {\n\t\t\t\t\tdirs.push('s');\n\t\t\t\t}\n\t\t\t\tif (!intersection.used.w) {\n\t\t\t\t\tdirs.push('w');\n\t\t\t\t}\n\t\t\t\tif (dirs.length > 0) {\n\t\t\t\t\tconst dir = Collections.draw(dirs, rng);\n\t\t\t\t\tif (dir === 'n') {\n\t\t\t\t\t\tposition.x = intersection.x - 1;\n\t\t\t\t\t\tposition.y = intersection.y - (length - 2);\n\t\t\t\t\t}\n\t\t\t\t\tif (dir === 'e') {\n\t\t\t\t\t\tposition.x = intersection.x - 1;\n\t\t\t\t\t\tposition.y = intersection.y - 1;\n\t\t\t\t\t}\n\t\t\t\t\tif (dir === 's') {\n\t\t\t\t\t\tposition.x = intersection.x - 1;\n\t\t\t\t\t\tposition.y = intersection.y - 1;\n\t\t\t\t\t}\n\t\t\t\t\tif (dir === 'w') {\n\t\t\t\t\t\tposition.x = intersection.x - (length - 2);\n\t\t\t\t\t\tposition.y = intersection.y - 1;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst size = {\n\t\t\t\t\t\twidth: (dir === 'n') || (dir === 's') ? 3 : length,\n\t\t\t\t\t\theight: (dir === 'e') || (dir === 'w') ? 3 : length\n\t\t\t\t\t};\n\t\t\t\t\tfor (let x = position.x; x < position.x + size.width; ++x) {\n\t\t\t\t\t\tfor (let y = position.y; y < position.y + size.height; ++y) {\n\t\t\t\t\t\t\tif (!map.find(t => (t.x === x) && (t.y === y))) {\n\t\t\t\t\t\t\t\tconst square: EncounterMapSquareModel = {\n\t\t\t\t\t\t\t\t\tx: x,\n\t\t\t\t\t\t\t\t\ty: y,\n\t\t\t\t\t\t\t\t\ttype: EncounterMapSquareType.Clear\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\tmap.push(square);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (dir === 'n') {\n\t\t\t\t\t\tintersection.used.n = true;\n\t\t\t\t\t\tintersections.push({ x: intersection.x, y: intersection.y - length + 3, used: { n: false, e: false, s: true, w: false } });\n\t\t\t\t\t}\n\t\t\t\t\tif (dir === 'e') {\n\t\t\t\t\t\tintersection.used.e = true;\n\t\t\t\t\t\tintersections.push({ x: intersection.x + length - 3, y: intersection.y, used: { n: false, e: false, s: false, w: true } });\n\t\t\t\t\t}\n\t\t\t\t\tif (dir === 's') {\n\t\t\t\t\t\tintersection.used.s = true;\n\t\t\t\t\t\tintersections.push({ x: intersection.x, y: intersection.y + length - 3, used: { n: true, e: false, s: false, w: false } });\n\t\t\t\t\t}\n\t\t\t\t\tif (dir === 'w') {\n\t\t\t\t\t\tintersection.used.w = true;\n\t\t\t\t\t\tintersections.push({ x: intersection.x - length + 3, y: intersection.y, used: { n: false, e: true, s: false, w: false } });\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn map;\n\t};\n\n\tstatic simplifyMap = (map: EncounterMapSquareModel[]) => {\n\t\treturn Collections.distinct(map, sq => `${sq.x} ${sq.y}`);\n\t};\n}\n","import { Collections } from '../utils/collections';\nimport { Random } from '../utils/random';\n\nexport class NameGenerator {\n\tstatic generateName = () => {\n\t\tlet count = 1;\n\t\tswitch (Random.randomNumber(20)) {\n\t\t\tcase 16:\n\t\t\tcase 17:\n\t\t\tcase 18:\n\t\t\tcase 19:\n\t\t\t\tcount = 2;\n\t\t\t\tbreak;\n\t\t}\n\n\t\tconst names = [];\n\t\twhile (names.length < count) {\n\t\t\tnames.push(NameGenerator.capitalise(NameGenerator.generateWord()));\n\t\t}\n\n\t\treturn names.join(' ');\n\t};\n\n\tstatic generateWord = () => {\n\t\tconst starts = [\n\t\t\t'ac',\n\t\t\t'ad',\n\t\t\t'adr',\n\t\t\t'ak',\n\t\t\t'al',\n\t\t\t'alber',\n\t\t\t'all',\n\t\t\t'alu',\n\t\t\t'an',\n\t\t\t'answ',\n\t\t\t'ar',\n\t\t\t'aram',\n\t\t\t'are',\n\t\t\t'arc',\n\t\t\t'ark',\n\t\t\t'as',\n\t\t\t'at',\n\t\t\t'ba',\n\t\t\t'bal',\n\t\t\t'bala',\n\t\t\t'bar',\n\t\t\t'barer',\n\t\t\t'berri',\n\t\t\t'beth',\n\t\t\t'bhar',\n\t\t\t'bir',\n\t\t\t'burg',\n\t\t\t'c',\n\t\t\t'cal',\n\t\t\t'cam',\n\t\t\t'car',\n\t\t\t'ced',\n\t\t\t'chen',\n\t\t\t'cor',\n\t\t\t'dar',\n\t\t\t'dies',\n\t\t\t'don',\n\t\t\t'eag',\n\t\t\t'eath',\n\t\t\t'eder',\n\t\t\t'el',\n\t\t\t'eld',\n\t\t\t'em',\n\t\t\t'end',\n\t\t\t'enial',\n\t\t\t'er',\n\t\t\t'es',\n\t\t\t'even',\n\t\t\t'fa',\n\t\t\t'farid',\n\t\t\t'finn',\n\t\t\t'fitz',\n\t\t\t'fla',\n\t\t\t'ford',\n\t\t\t'gann',\n\t\t\t'gar',\n\t\t\t'gh',\n\t\t\t'gl',\n\t\t\t'gor',\n\t\t\t'guir',\n\t\t\t'gunn',\n\t\t\t'gurd',\n\t\t\t'ham',\n\t\t\t'har',\n\t\t\t'has',\n\t\t\t'hel',\n\t\t\t'hener',\n\t\t\t'hesk',\n\t\t\t'ig',\n\t\t\t'im',\n\t\t\t'iv',\n\t\t\t'jasm',\n\t\t\t'jelen',\n\t\t\t'jen',\n\t\t\t'joan',\n\t\t\t'ka',\n\t\t\t'kath',\n\t\t\t'ker',\n\t\t\t'keth',\n\t\t\t'key',\n\t\t\t'khe',\n\t\t\t'kildr',\n\t\t\t'kith',\n\t\t\t'ko',\n\t\t\t'kos',\n\t\t\t'l',\n\t\t\t'lav',\n\t\t\t'leo',\n\t\t\t'lesh',\n\t\t\t'lin',\n\t\t\t'mac',\n\t\t\t'mail',\n\t\t\t'mar',\n\t\t\t'med',\n\t\t\t'meh',\n\t\t\t'mer',\n\t\t\t'mia',\n\t\t\t'mish',\n\t\t\t'miv',\n\t\t\t'morg',\n\t\t\t'mum',\n\t\t\t'my',\n\t\t\t'nad',\n\t\t\t'naiv',\n\t\t\t'ned',\n\t\t\t'or',\n\t\t\t'os',\n\t\t\t'ot',\n\t\t\t'oz',\n\t\t\t'pae',\n\t\t\t'pand',\n\t\t\t'patr',\n\t\t\t'pav',\n\t\t\t'pen',\n\t\t\t'per',\n\t\t\t'pey',\n\t\t\t'pol',\n\t\t\t'quel',\n\t\t\t'rand',\n\t\t\t'ravay',\n\t\t\t'ric',\n\t\t\t'ris',\n\t\t\t'ros',\n\t\t\t'row',\n\t\t\t'rur',\n\t\t\t's',\n\t\t\t'sar',\n\t\t\t'ser',\n\t\t\t'seraph',\n\t\t\t'sham',\n\t\t\t'shan',\n\t\t\t'shed',\n\t\t\t'sorvi',\n\t\t\t'sto',\n\t\t\t'stok',\n\t\t\t'stos',\n\t\t\t't',\n\t\t\t'tak',\n\t\t\t'tal',\n\t\t\t'tam',\n\t\t\t'tir',\n\t\t\t'thav',\n\t\t\t'thor',\n\t\t\t'torg',\n\t\t\t'tre',\n\t\t\t'uad',\n\t\t\t'v',\n\t\t\t'var',\n\t\t\t'vic',\n\t\t\t'vis',\n\t\t\t'wrayt',\n\t\t\t'yash',\n\t\t\t'yeng',\n\t\t\t'zash'\n\t\t];\n\n\t\tconst ends = [\n\t\t\t'a',\n\t\t\t'aadi',\n\t\t\t'aar',\n\t\t\t'ade',\n\t\t\t'aea',\n\t\t\t'aela',\n\t\t\t'aella',\n\t\t\t'aena',\n\t\t\t'ahn',\n\t\t\t'al',\n\t\t\t'ala',\n\t\t\t'an',\n\t\t\t'ani',\n\t\t\t'ania',\n\t\t\t'ann',\n\t\t\t'ar',\n\t\t\t'arai',\n\t\t\t'arr',\n\t\t\t'asar',\n\t\t\t'ash',\n\t\t\t'astra',\n\t\t\t'aver',\n\t\t\t'ber',\n\t\t\t'born',\n\t\t\t'brek',\n\t\t\t'by',\n\t\t\t'ceryn',\n\t\t\t'cian',\n\t\t\t'coe',\n\t\t\t'da',\n\t\t\t'dal',\n\t\t\t'dan',\n\t\t\t'de',\n\t\t\t'der',\n\t\t\t'dinn',\n\t\t\t'dis',\n\t\t\t'don',\n\t\t\t'dry',\n\t\t\t'dryn',\n\t\t\t'dur',\n\t\t\t'e',\n\t\t\t'ea',\n\t\t\t'ed',\n\t\t\t'ederei',\n\t\t\t'eed',\n\t\t\t'ef',\n\t\t\t'eh',\n\t\t\t'eid',\n\t\t\t'eila',\n\t\t\t'eir',\n\t\t\t'eiros',\n\t\t\t'el',\n\t\t\t'elia',\n\t\t\t'ella',\n\t\t\t'ellen',\n\t\t\t'elm',\n\t\t\t'emia',\n\t\t\t'en',\n\t\t\t'end',\n\t\t\t'er',\n\t\t\t'ere',\n\t\t\t'ern',\n\t\t\t'erna',\n\t\t\t'erri',\n\t\t\t'esch',\n\t\t\t'eth',\n\t\t\t'eue',\n\t\t\t'ey',\n\t\t\t'fire',\n\t\t\t'for',\n\t\t\t'gar',\n\t\t\t'gen',\n\t\t\t'gran',\n\t\t\t'han',\n\t\t\t'hild',\n\t\t\t'hit',\n\t\t\t'hun',\n\t\t\t'ia',\n\t\t\t'iad',\n\t\t\t'ialis',\n\t\t\t'ian',\n\t\t\t'ich',\n\t\t\t'ie',\n\t\t\t'iel',\n\t\t\t'ik',\n\t\t\t'ikos',\n\t\t\t'il',\n\t\t\t'ilar',\n\t\t\t'ild',\n\t\t\t'ilia',\n\t\t\t'in',\n\t\t\t'ina',\n\t\t\t'inia',\n\t\t\t'inua',\n\t\t\t'ior',\n\t\t\t'ir',\n\t\t\t'is',\n\t\t\t'ja',\n\t\t\t'jed',\n\t\t\t'kain',\n\t\t\t'kaston',\n\t\t\t'la',\n\t\t\t'lannan',\n\t\t\t'lee',\n\t\t\t'leth',\n\t\t\t'lie',\n\t\t\t'lin',\n\t\t\t'linn',\n\t\t\t'loda',\n\t\t\t'lyse',\n\t\t\t'meral',\n\t\t\t'mode',\n\t\t\t'na',\n\t\t\t'nan',\n\t\t\t'neth',\n\t\t\t'nor',\n\t\t\t'oane',\n\t\t\t'or',\n\t\t\t'ora',\n\t\t\t'orel',\n\t\t\t'orn',\n\t\t\t'orna',\n\t\t\t'pet',\n\t\t\t'qui',\n\t\t\t'ra',\n\t\t\t'rak',\n\t\t\t'rasa',\n\t\t\t'rash',\n\t\t\t'rax',\n\t\t\t'ree',\n\t\t\t'rek',\n\t\t\t'ret',\n\t\t\t'retor',\n\t\t\t'ri',\n\t\t\t'rian',\n\t\t\t'ric',\n\t\t\t'rich',\n\t\t\t'rie',\n\t\t\t'rin',\n\t\t\t'rinn',\n\t\t\t'rion',\n\t\t\t'runn',\n\t\t\t'rynna',\n\t\t\t'sen',\n\t\t\t'sik',\n\t\t\t'son',\n\t\t\t'stag',\n\t\t\t'striana',\n\t\t\t'tin',\n\t\t\t'tor',\n\t\t\t'tyr',\n\t\t\t'ur',\n\t\t\t'us',\n\t\t\t'va',\n\t\t\t'vin',\n\t\t\t'vok',\n\t\t\t'vyn',\n\t\t\t'vyre',\n\t\t\t'ya',\n\t\t\t'yas',\n\t\t\t'yle',\n\t\t\t'yne',\n\t\t\t'ynn',\n\t\t\t'za',\n\t\t\t'zar'\n\t\t];\n\n\t\tconst separators = [\n\t\t\t'-',\n\t\t\t'\\''\n\t\t];\n\n\t\tswitch (Random.randomNumber(6)) {\n\t\t\tcase 0:\n\t\t\tcase 1:\n\t\t\tcase 2:\n\t\t\tcase 3:\n\t\t\tcase 4:\n\t\t\t\treturn `${Collections.draw(starts)}${Collections.draw(ends)}`;\n\t\t\tcase 5:\n\t\t\t\treturn `${Collections.draw(starts)}${Collections.draw(separators)}${Collections.draw(ends)}`;\n\t\t}\n\n\t\treturn '';\n\t};\n\n\tstatic capitalise = (str: string) => {\n\t\treturn str\n\t\t\t.split(' ')\n\t\t\t.filter(val => val.length > 0)\n\t\t\t.map(val => {\n\t\t\t\tconst first = val[0].toUpperCase();\n\t\t\t\tconst rest = val.length > 1 ? val.substring(1) : '';\n\t\t\t\treturn first + rest;\n\t\t\t})\n\t\t\t.join(' ');\n\t};\n}\n","import { DamageCategoryType } from '../enums/damage-category-type';\nimport { FeatureType } from '../enums/feature-type';\nimport { ItemLocationType } from '../enums/item-location-type';\nimport { ItemProficiencyType } from '../enums/item-proficiency-type';\nimport { SkillCategoryType } from '../enums/skill-category-type';\nimport { SkillType } from '../enums/skill-type';\nimport { TraitType } from '../enums/trait-type';\n\nimport type { ArmorModel, ItemModel, WeaponModel } from '../models/item';\nimport type { FeatureModel } from '../models/feature';\n\nimport { Collections } from '../utils/collections';\nimport { Random } from '../utils/random';\nimport { Utils } from '../utils/utils';\n\nimport { FeatureLogic } from '../logic/feature-logic';\nimport { GameLogic } from '../logic/game-logic';\nimport { NameGenerator } from './name-generator';\n\nexport class MagicItemGenerator {\n\tstatic generateMagicItem = (baseItem: ItemModel, packIDs: string[]) => {\n\t\tconst item = MagicItemGenerator.convertToMagicItem(baseItem);\n\t\treturn MagicItemGenerator.addMagicItemFeature(item, packIDs);\n\t};\n\n\tstatic generateRandomMagicItem = (packIDs: string[]) => {\n\t\tconst baseItem = Collections.draw(GameLogic.getItemDeck(packIDs));\n\t\tconst item = MagicItemGenerator.convertToMagicItem(baseItem);\n\t\treturn MagicItemGenerator.addMagicItemFeature(item, packIDs);\n\t};\n\n\tstatic convertToMagicItem = (baseItem: ItemModel) => {\n\t\tif (baseItem.magic) {\n\t\t\treturn baseItem;\n\t\t}\n\n\t\tconst item = JSON.parse(JSON.stringify(baseItem)) as ItemModel;\n\t\titem.id = Utils.guid();\n\t\titem.name = NameGenerator.generateName();\n\t\titem.description = `Magical ${baseItem.name.toLowerCase()}`;\n\t\titem.baseItem = baseItem.name;\n\t\titem.magic = true;\n\t\treturn item;\n\t};\n\n\tstatic addMagicItemFeature = (item: ItemModel, packIDs: string[]) => {\n\t\tconst options: ItemModel[] = [];\n\n\t\tif (item.weapon) {\n\t\t\t// Increase damage rank\n\t\t\tconst copyW1 = JSON.parse(JSON.stringify(item)) as ItemModel;\n\t\t\tconst wpn1 = copyW1.weapon as WeaponModel;\n\t\t\tconst dmg = Collections.draw(wpn1.damage);\n\t\t\tdmg.rank += Random.randomBonus();\n\t\t\toptions.push(copyW1);\n\n\t\t\t// Increase range\n\t\t\tconst copyW2 = JSON.parse(JSON.stringify(item)) as ItemModel;\n\t\t\tconst wpn2 = copyW2.weapon as WeaponModel;\n\t\t\tif (wpn2.range <= 1) {\n\t\t\t\twpn2.range += 1;\n\t\t\t} else {\n\t\t\t\twpn2.range += Math.floor(wpn2.range * Random.randomBonus() / 10);\n\t\t\t}\n\t\t\toptions.push(copyW2);\n\n\t\t\t// Add an additional damage type\n\t\t\tconst copyW3 = JSON.parse(JSON.stringify(item)) as ItemModel;\n\t\t\tconst wpn3 = copyW3.weapon as WeaponModel;\n\t\t\twpn3.damage.push({\n\t\t\t\ttype: GameLogic.getRandomDamageType(Random.randomBoolean() ? DamageCategoryType.Energy : DamageCategoryType.Corruption),\n\t\t\t\trank: Random.randomBonus()\n\t\t\t});\n\t\t\toptions.push(copyW3);\n\n\t\t\t// Increase Weapon skill\n\t\t\tconst copyW4 = JSON.parse(JSON.stringify(item)) as ItemModel;\n\t\t\tcopyW4.features.push(FeatureLogic.createSkillFeature(Utils.guid(), SkillType.Weapon, Random.randomBonus()));\n\t\t\toptions.push(copyW4);\n\n\t\t\t// Negate unreliability\n\t\t\tif (item.weapon.unreliable > 0) {\n\t\t\t\tconst copyW5 = JSON.parse(JSON.stringify(item)) as ItemModel;\n\t\t\t\tconst wpn5 = copyW5.weapon as WeaponModel;\n\t\t\t\twpn5.unreliable = 0;\n\t\t\t\toptions.push(copyW5);\n\t\t\t}\n\t\t}\n\n\t\tif (item.armor) {\n\t\t\t// Increase damage resistance rank\n\t\t\tconst copyA1 = JSON.parse(JSON.stringify(item)) as ItemModel;\n\t\t\tconst arm1 = copyA1.armor as ArmorModel;\n\t\t\tconst f1 = arm1.features.find(f => f.type === FeatureType.DamageCategoryResist);\n\t\t\tif (f1) {\n\t\t\t\tf1.rank += Random.randomBonus();\n\t\t\t\toptions.push(copyA1);\n\t\t\t}\n\n\t\t\t// Apply damage resistance to more damage categories\n\t\t\tconst copyA2 = JSON.parse(JSON.stringify(item)) as ItemModel;\n\t\t\tconst arm2 = copyA2.armor as ArmorModel;\n\t\t\tconst f2 = arm2.features.find(f => f.type === FeatureType.DamageCategoryResist);\n\t\t\tif (f2) {\n\t\t\t\tconst f2Copy = JSON.parse(JSON.stringify(f2)) as FeatureModel;\n\t\t\t\tf2Copy.id = Utils.guid();\n\t\t\t\tf2Copy.damageCategory = Random.randomBoolean() ? DamageCategoryType.Energy : DamageCategoryType.Corruption;\n\t\t\t\tarm2.features.push(f2Copy);\n\t\t\t\toptions.push(copyA2);\n\t\t\t}\n\n\t\t\t// Negate skill penalty\n\t\t\tconst copyA3 = JSON.parse(JSON.stringify(item)) as ItemModel;\n\t\t\tconst arm3 = copyA3.armor as ArmorModel;\n\t\t\tconst f3 = arm3.features.find(f => f.type === FeatureType.SkillCategory);\n\t\t\tif (f3) {\n\t\t\t\tarm3.features = arm3.features.filter(f => f.id !== f3.id);\n\t\t\t\toptions.push(copyA3);\n\t\t\t}\n\n\t\t\t// Negate speed penalty\n\t\t\tconst copyA4 = JSON.parse(JSON.stringify(item)) as ItemModel;\n\t\t\tconst arm4 = copyA4.armor as ArmorModel;\n\t\t\tconst f4 = arm4.features.find(f => f.type === FeatureType.Trait);\n\t\t\tif (f4) {\n\t\t\t\tarm4.features = arm4.features.filter(f => f.id !== f4.id);\n\t\t\t\toptions.push(copyA4);\n\t\t\t}\n\t\t}\n\n\t\tif (item.proficiency === ItemProficiencyType.Implements) {\n\t\t\t// Increase Spellcasting skill\n\t\t\tconst copyI1 = JSON.parse(JSON.stringify(item)) as ItemModel;\n\t\t\tcopyI1.features.push(FeatureLogic.createSkillFeature(Utils.guid(), SkillType.Spellcasting, Random.randomBonus()));\n\t\t\toptions.push(copyI1);\n\n\t\t\t// Increase Energy damage\n\t\t\tconst copyI2 = JSON.parse(JSON.stringify(item)) as ItemModel;\n\t\t\tcopyI2.features.push(FeatureLogic.createDamageCategoryBonusFeature(Utils.guid(), DamageCategoryType.Energy, Random.randomBonus()));\n\t\t\toptions.push(copyI2);\n\n\t\t\t// Increase Corruption damage\n\t\t\tconst copyI3 = JSON.parse(JSON.stringify(item)) as ItemModel;\n\t\t\tcopyI3.features.push(FeatureLogic.createDamageCategoryBonusFeature(Utils.guid(), DamageCategoryType.Corruption, Random.randomBonus()));\n\t\t\toptions.push(copyI3);\n\t\t}\n\n\t\titem.features.filter(f => f.rank < 0).forEach(penalty => {\n\t\t\t// Negate the penalty\n\t\t\tconst copy = JSON.parse(JSON.stringify(item)) as ItemModel;\n\t\t\tcopy.features = copy.features.filter(f => f.id !== penalty.id);\n\t\t\toptions.push(copy);\n\t\t});\n\n\t\tif (item.location === ItemLocationType.Head) {\n\t\t\t// Increase a mental skill\n\t\t\tconst copyH1 = JSON.parse(JSON.stringify(item)) as ItemModel;\n\t\t\tcopyH1.features.push(FeatureLogic.createSkillFeature(Utils.guid(), GameLogic.getRandomSkill(SkillCategoryType.Mental), Random.randomBonus()));\n\t\t\toptions.push(copyH1);\n\n\t\t\t// Increase all physical or mental skills\n\t\t\tconst copyH2 = JSON.parse(JSON.stringify(item)) as ItemModel;\n\t\t\tcopyH2.features.push(FeatureLogic.createSkillCategoryFeature(Utils.guid(), Random.randomBoolean() ? SkillCategoryType.Physical : SkillCategoryType.Mental, Random.randomBonus()));\n\t\t\toptions.push(copyH2);\n\n\t\t\t// Increase Resolve\n\t\t\tconst copyH3 = JSON.parse(JSON.stringify(item)) as ItemModel;\n\t\t\tcopyH3.features.push(FeatureLogic.createTraitFeature(Utils.guid(), TraitType.Resolve, Random.randomBonus()));\n\t\t\toptions.push(copyH3);\n\t\t}\n\n\t\tif (item.location === ItemLocationType.Feet) {\n\t\t\t// Increase Speed\n\t\t\tconst copy = JSON.parse(JSON.stringify(item)) as ItemModel;\n\t\t\tcopy.features.push(FeatureLogic.createTraitFeature(Utils.guid(), TraitType.Speed, Random.randomBonus()));\n\t\t\toptions.push(copy);\n\t\t}\n\n\t\tif (item.location === ItemLocationType.Neck) {\n\t\t\t// Increase Endurance\n\t\t\tconst copyN1 = JSON.parse(JSON.stringify(item)) as ItemModel;\n\t\t\tcopyN1.features.push(FeatureLogic.createTraitFeature(Utils.guid(), TraitType.Speed, Random.randomBonus()));\n\t\t\toptions.push(copyN1);\n\n\t\t\t// Increase Resolve\n\t\t\tconst copyN2 = JSON.parse(JSON.stringify(item)) as ItemModel;\n\t\t\tcopyN2.features.push(FeatureLogic.createTraitFeature(Utils.guid(), TraitType.Resolve, Random.randomBonus()));\n\t\t\toptions.push(copyN2);\n\t\t}\n\n\t\t// A random feature\n\t\tconst copyFeature = JSON.parse(JSON.stringify(item)) as ItemModel;\n\t\tcopyFeature.id = Utils.guid();\n\t\tcopyFeature.features.push(FeatureLogic.createRandomFeature());\n\t\toptions.push(copyFeature);\n\n\t\t// A random action\n\t\tconst copyAction = JSON.parse(JSON.stringify(item)) as ItemModel;\n\t\tcopyAction.id = Utils.guid();\n\t\tcopyAction.actions.push(GameLogic.getRandomAction(item, packIDs));\n\t\toptions.push(copyAction);\n\n\t\tif (options.length === 0) {\n\t\t\treturn item;\n\t\t}\n\n\t\treturn Collections.draw(options);\n\t};\n}\n","export enum CardType {\n\tDefault = 'Default',\n\tHero = 'Hero',\n\tSpecies = 'Species',\n\tRole = 'Role',\n\tBackground = 'Background',\n\tItem = 'Item',\n\tPotion = 'Potion',\n\tBoon = 'Boon',\n\tRegion = 'Region',\n\tStructure = 'Structure',\n\tFeature = 'Feature',\n\tAction = 'Action',\n\tPack = 'Pack',\n\tBase = 'Base'\n}\n","import { BaseData } from '../data/base-data';\n\nimport { CardType } from '../enums/card-type';\nimport { CombatantState } from '../enums/combatant-state';\nimport { CombatantType } from '../enums/combatant-type';\nimport { ConditionType } from '../enums/condition-type';\nimport { DamageCategoryType } from '../enums/damage-category-type';\nimport { DamageType } from '../enums/damage-type';\nimport { FeatureType } from '../enums/feature-type';\nimport { ItemLocationType } from '../enums/item-location-type';\nimport { ItemProficiencyType } from '../enums/item-proficiency-type';\nimport { QuirkType } from '../enums/quirk-type';\nimport { SkillCategoryType } from '../enums/skill-category-type';\nimport { SkillType } from '../enums/skill-type';\nimport { TraitType } from '../enums/trait-type';\n\nimport { MagicItemGenerator } from '../generators/magic-item-generator';\n\nimport type { ActionModel } from '../models/action';\nimport type { CombatantModel } from '../models/combatant';\nimport type { ConditionModel } from '../models/condition';\nimport type { FeatureModel } from '../models/feature';\nimport type { ItemModel } from '../models/item';\n\nimport { Collections } from '../utils/collections';\nimport { Random } from '../utils/random';\nimport { Utils } from '../utils/utils';\n\nimport { Factory } from './factory';\nimport { GameLogic } from './game-logic';\n\nexport class CombatantLogic {\n\tstatic CARRY_CAPACITY = 4;\n\n\tstatic applyCombatantCards = (combatant: CombatantModel, speciesID: string, roleID: string, backgroundID: string) => {\n\t\tconst species = GameLogic.getSpecies(speciesID);\n\t\tif (species) {\n\t\t\tcombatant.speciesID = species.id;\n\t\t\tcombatant.type = species.type;\n\t\t\tcombatant.faction = species.type;\n\t\t\tcombatant.size = species.size;\n\t\t\tspecies.quirks.forEach(q => combatant.quirks.push(q));\n\t\t\tspecies.startingFeatures.forEach(f => combatant.features.push(JSON.parse(JSON.stringify(f)) as FeatureModel));\n\n\t\t\tif (combatant.faction === CombatantType.Monster) {\n\t\t\t\tcombatant.name = species.name;\n\t\t\t}\n\t\t}\n\n\t\tif (combatant.quirks.includes(QuirkType.Beast) || combatant.quirks.includes(QuirkType.Mindless)) {\n\t\t\t// Beasts / Mindless monsters don't have a role or background\n\t\t} else {\n\t\t\tconst role = GameLogic.getRole(roleID);\n\t\t\tif (role) {\n\t\t\t\tcombatant.roleID = role.id;\n\t\t\t\trole.startingFeatures.forEach(f => combatant.features.push(JSON.parse(JSON.stringify(f)) as FeatureModel));\n\n\t\t\t\tif (combatant.faction === CombatantType.Monster) {\n\t\t\t\t\tcombatant.name += ` ${role.name}`;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst background = GameLogic.getBackground(backgroundID);\n\t\t\tif (background) {\n\t\t\t\tcombatant.backgroundID = background.id;\n\t\t\t\tbackground.startingFeatures.forEach(f => combatant.features.push(JSON.parse(JSON.stringify(f)) as FeatureModel));\n\t\t\t}\n\t\t}\n\t};\n\n\tstatic incrementCombatantLevel = (combatant: CombatantModel, feature: FeatureModel, packIDs: string[]) => {\n\t\tcombatant.xp = Math.max(combatant.xp - combatant.level, 0);\n\t\tcombatant.level += 1;\n\n\t\t// Add the new feature\n\t\tcombatant.features.push(feature);\n\n\t\t// Make magic items more powerful\n\t\tfor (let n = 0; n !== combatant.items.length; ++n) {\n\t\t\tconst item = combatant.items[n];\n\t\t\tif (item.magic) {\n\t\t\t\tif (Random.randomNumber(5) === 0) {\n\t\t\t\t\tcombatant.items[n] = MagicItemGenerator.generateMagicItem(item, packIDs);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tstatic makeFeatureChoices = (combatant: CombatantModel) => {\n\t\tcombatant.features.forEach(feature => {\n\t\t\tif (feature.trait === TraitType.Any) {\n\t\t\t\tconst options = [\n\t\t\t\t\tTraitType.Endurance,\n\t\t\t\t\tTraitType.Resolve,\n\t\t\t\t\tTraitType.Speed\n\t\t\t\t];\n\t\t\t\tfeature.trait = Collections.draw(options);\n\t\t\t}\n\n\t\t\tif (feature.skill === SkillType.Any) {\n\t\t\t\tconst options = [\n\t\t\t\t\tSkillType.Brawl,\n\t\t\t\t\tSkillType.Perception,\n\t\t\t\t\tSkillType.Presence,\n\t\t\t\t\tSkillType.Reactions,\n\t\t\t\t\tSkillType.Spellcasting,\n\t\t\t\t\tSkillType.Stealth,\n\t\t\t\t\tSkillType.Weapon\n\t\t\t\t];\n\t\t\t\tfeature.skill = Collections.draw(options);\n\t\t\t}\n\n\t\t\tif (feature.skillCategory === SkillCategoryType.Any) {\n\t\t\t\tconst options = [\n\t\t\t\t\tSkillCategoryType.Physical,\n\t\t\t\t\tSkillCategoryType.Mental\n\t\t\t\t];\n\t\t\t\tfeature.skillCategory = Collections.draw(options);\n\t\t\t}\n\n\t\t\tif (feature.proficiency === ItemProficiencyType.Any) {\n\t\t\t\tconst options = [\n\t\t\t\t\tItemProficiencyType.MilitaryWeapons,\n\t\t\t\t\tItemProficiencyType.LargeWeapons,\n\t\t\t\t\tItemProficiencyType.PairedWeapons,\n\t\t\t\t\tItemProficiencyType.RangedWeapons,\n\t\t\t\t\tItemProficiencyType.PowderWeapons,\n\t\t\t\t\tItemProficiencyType.Implements,\n\t\t\t\t\tItemProficiencyType.LightArmor,\n\t\t\t\t\tItemProficiencyType.HeavyArmor,\n\t\t\t\t\tItemProficiencyType.Shields\n\t\t\t\t];\n\t\t\t\tfeature.proficiency = Collections.draw(options.filter(o => !CombatantLogic.getProficiencies(combatant).includes(o)));\n\t\t\t}\n\n\t\t\tif (feature.damage === DamageType.Any) {\n\t\t\t\tconst options = [\n\t\t\t\t\tDamageType.Acid,\n\t\t\t\t\tDamageType.Cold,\n\t\t\t\t\tDamageType.Decay,\n\t\t\t\t\tDamageType.Edged,\n\t\t\t\t\tDamageType.Electricity,\n\t\t\t\t\tDamageType.Fire,\n\t\t\t\t\tDamageType.Impact,\n\t\t\t\t\tDamageType.Light,\n\t\t\t\t\tDamageType.Piercing,\n\t\t\t\t\tDamageType.Poison,\n\t\t\t\t\tDamageType.Psychic,\n\t\t\t\t\tDamageType.Sonic\n\t\t\t\t];\n\t\t\t\tfeature.damage = Collections.draw(options);\n\t\t\t}\n\n\t\t\tif (feature.damageCategory === DamageCategoryType.Any) {\n\t\t\t\tconst options = [\n\t\t\t\t\tDamageCategoryType.Physical,\n\t\t\t\t\tDamageCategoryType.Energy,\n\t\t\t\t\tDamageCategoryType.Corruption\n\t\t\t\t];\n\t\t\t\tfeature.damageCategory = Collections.draw(options);\n\t\t\t}\n\t\t});\n\t};\n\n\tstatic addItems = (combatant: CombatantModel, packIDs: string[]) => {\n\t\tif (combatant.quirks.includes(QuirkType.Beast)) {\n\t\t\t// Beasts can't use items\n\t\t\treturn;\n\t\t}\n\n\t\tCombatantLogic.getProficiencies(combatant).forEach(prof => {\n\t\t\tconst items = GameLogic.getItemsForProficiency(prof, packIDs);\n\t\t\tconst item = JSON.parse(JSON.stringify(Collections.draw(items))) as ItemModel;\n\t\t\titem.id = Utils.guid();\n\t\t\tcombatant.items.push(item);\n\t\t});\n\t};\n\n\tstatic canEquip = (combatant: CombatantModel, item: ItemModel) => {\n\t\tif (combatant.quirks.includes(QuirkType.Beast)) {\n\t\t\t// Beasts can't use items\n\t\t\treturn false;\n\t\t}\n\n\t\tif (item.location === ItemLocationType.None) {\n\t\t\treturn false;\n\t\t}\n\n\t\tlet slotsTotal = 1;\n\t\tswitch (item.location) {\n\t\t\tcase ItemLocationType.Hand:\n\t\t\tcase ItemLocationType.Ring:\n\t\t\t\tslotsTotal = 2;\n\t\t\t\tbreak;\n\t\t}\n\n\t\tconst slotsUsed = Collections.sum(combatant.items.filter(i => i.location === item.location), i => i.slots);\n\t\tconst slotsAvailable = slotsTotal - slotsUsed;\n\n\t\tif (item.slots > slotsAvailable) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst profOK = (item.proficiency === ItemProficiencyType.None) || (CombatantLogic.getProficiencies(combatant).includes(item.proficiency));\n\t\treturn profOK;\n\t};\n\n\tstatic getFeatureDeck = (combatant: CombatantModel) => {\n\t\tconst s = GameLogic.getSpecies(combatant.speciesID);\n\t\tconst r = GameLogic.getRole(combatant.roleID);\n\t\tconst b = GameLogic.getBackground(combatant.backgroundID);\n\n\t\treturn ([] as FeatureModel[])\n\t\t\t.concat(s ? s.features : [])\n\t\t\t.concat(r ? r.features : [])\n\t\t\t.concat(b ? b.features : []);\n\t};\n\n\tstatic getActionDeck = (combatant: CombatantModel) => {\n\t\tconst s = GameLogic.getSpecies(combatant.speciesID);\n\t\tconst r = GameLogic.getRole(combatant.roleID);\n\t\tconst b = GameLogic.getBackground(combatant.backgroundID);\n\n\t\tlet list = ([] as ActionModel[])\n\t\t\t.concat(s ? s.actions : [])\n\t\t\t.concat(r ? r.actions : [])\n\t\t\t.concat(b ? b.actions : []);\n\n\t\tcombatant.items.forEach(i => {\n\t\t\tlist = list.concat(i.actions);\n\t\t});\n\n\t\treturn list;\n\t};\n\n\tstatic getFeatureSource = (combatant: CombatantModel, cardID: string) => {\n\t\tif (BaseData.getBaseFeatures().find(f => f.id === cardID)) {\n\t\t\treturn 'Standard';\n\t\t}\n\n\t\tconst s = GameLogic.getSpecies(combatant.speciesID);\n\t\tif (!!s && s.features.find(c => c.id === cardID)) {\n\t\t\treturn s.name;\n\t\t}\n\n\t\tconst r = GameLogic.getRole(combatant.roleID);\n\t\tif (!!r && r.features.find(c => c.id === cardID)) {\n\t\t\treturn r.name;\n\t\t}\n\n\t\tconst b = GameLogic.getBackground(combatant.backgroundID);\n\t\tif (!!b && b.features.find(c => c.id === cardID)) {\n\t\t\treturn b.name;\n\t\t}\n\n\t\tlet itemName = '';\n\t\tcombatant.items.forEach(item => {\n\t\t\tif (item.armor) {\n\t\t\t\tif (item.armor.features.find(f => f.id === cardID)) {\n\t\t\t\t\titemName = item.name;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (item.features.find(f => f.id === cardID)) {\n\t\t\t\titemName = item.name;\n\t\t\t}\n\t\t});\n\t\tif (itemName !== '') {\n\t\t\treturn itemName;\n\t\t}\n\n\t\treturn '';\n\t};\n\n\tstatic getFeatureSourceType = (combatant: CombatantModel, cardID: string) => {\n\t\tif (BaseData.getBaseFeatures().find(f => f.id === cardID)) {\n\t\t\treturn CardType.Base;\n\t\t}\n\n\t\tconst s = GameLogic.getSpecies(combatant.speciesID);\n\t\tif (!!s && s.features.find(c => c.id === cardID)) {\n\t\t\treturn CardType.Species;\n\t\t}\n\n\t\tconst r = GameLogic.getRole(combatant.roleID);\n\t\tif (!!r && r.features.find(c => c.id === cardID)) {\n\t\t\treturn CardType.Role;\n\t\t}\n\n\t\tconst b = GameLogic.getBackground(combatant.backgroundID);\n\t\tif (!!b && b.features.find(c => c.id === cardID)) {\n\t\t\treturn CardType.Background;\n\t\t}\n\n\t\tlet isItem = false;\n\t\tcombatant.items.forEach(item => {\n\t\t\tif (item.armor) {\n\t\t\t\tif (item.armor.features.find(f => f.id === cardID)) {\n\t\t\t\t\tisItem = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (item.features.find(f => f.id === cardID)) {\n\t\t\t\tisItem = true;\n\t\t\t}\n\t\t});\n\t\tif (isItem) {\n\t\t\treturn CardType.Item;\n\t\t}\n\n\t\treturn CardType.Default;\n\t};\n\n\tstatic getActionSource = (combatant: CombatantModel, cardID: string) => {\n\t\tif (BaseData.getBaseActions().find(a => a.id === cardID)) {\n\t\t\treturn 'Standard';\n\t\t}\n\n\t\tconst s = GameLogic.getSpecies(combatant.speciesID);\n\t\tif (!!s && s.actions.find(c => c.id === cardID)) {\n\t\t\treturn s.name;\n\t\t}\n\n\t\tconst r = GameLogic.getRole(combatant.roleID);\n\t\tif (!!r && r.actions.find(c => c.id === cardID)) {\n\t\t\treturn r.name;\n\t\t}\n\n\t\tconst b = GameLogic.getBackground(combatant.backgroundID);\n\t\tif (!!b && b.actions.find(c => c.id === cardID)) {\n\t\t\treturn b.name;\n\t\t}\n\n\t\tlet itemName = '';\n\t\tcombatant.items.forEach(item => {\n\t\t\tif (item.actions.find(a => a.id === cardID)) {\n\t\t\t\titemName = item.name;\n\t\t\t}\n\t\t});\n\t\tif (itemName !== '') {\n\t\t\treturn itemName;\n\t\t}\n\n\t\treturn '';\n\t};\n\n\tstatic getActionSourceType = (combatant: CombatantModel, cardID: string) => {\n\t\tif (BaseData.getBaseActions().find(a => a.id === cardID)) {\n\t\t\treturn CardType.Base;\n\t\t}\n\n\t\tconst s = GameLogic.getSpecies(combatant.speciesID);\n\t\tif (!!s && s.actions.find(c => c.id === cardID)) {\n\t\t\treturn CardType.Species;\n\t\t}\n\n\t\tconst r = GameLogic.getRole(combatant.roleID);\n\t\tif (!!r && r.actions.find(c => c.id === cardID)) {\n\t\t\treturn CardType.Role;\n\t\t}\n\n\t\tconst b = GameLogic.getBackground(combatant.backgroundID);\n\t\tif (!!b && b.actions.find(c => c.id === cardID)) {\n\t\t\treturn CardType.Background;\n\t\t}\n\n\t\tlet isItem = false;\n\t\tcombatant.items.forEach(item => {\n\t\t\tif (item.actions.find(a => a.id === cardID)) {\n\t\t\t\tisItem = true;\n\t\t\t}\n\t\t});\n\t\tif (isItem) {\n\t\t\treturn CardType.Item;\n\t\t}\n\n\t\treturn CardType.Default;\n\t};\n\n\tstatic resetCombatant = (combatant: CombatantModel) => {\n\t\tcombatant.combat.current = false;\n\t\tcombatant.combat.stunned = false;\n\t\tcombatant.combat.state = CombatantState.Standing;\n\t\tcombatant.combat.position = { x: Number.MIN_VALUE, y: Number.MIN_VALUE };\n\t\tcombatant.combat.trail = [];\n\t\tcombatant.combat.damage = 0;\n\t\tcombatant.combat.wounds = 0;\n\t\tcombatant.combat.initiative = Number.MIN_VALUE;\n\t\tcombatant.combat.movement = 0;\n\t\tcombatant.combat.senses = 0;\n\t\tcombatant.combat.hidden = 0;\n\t\tcombatant.combat.conditions = [];\n\t\tcombatant.combat.actions = [];\n\t\tcombatant.combat.selectedAction = null;\n\t\tcombatant.combat.intents = null;\n\t};\n\n\tstatic getFeatures = (combatant: CombatantModel) => {\n\t\tlet list = ([] as FeatureModel[]).concat(combatant.features);\n\t\tcombatant.items.forEach(i => {\n\t\t\tif (i.armor) {\n\t\t\t\tlist = list.concat(i.armor.features);\n\t\t\t}\n\t\t\tlist = list.concat(i.features);\n\t\t});\n\n\t\treturn list;\n\t};\n\n\tstatic getTraitRank = (combatant: CombatantModel, conditions: ConditionModel[], trait: TraitType) => {\n\t\tlet value = 1;\n\n\t\tCombatantLogic.getFeatures(combatant)\n\t\t\t.filter(f => f.type === FeatureType.Trait)\n\t\t\t.filter(f => (f.trait === trait) || (f.trait === TraitType.All))\n\t\t\t.forEach(f => value += f.rank);\n\n\t\tconditions.filter(c => c.type === ConditionType.TraitBonus)\n\t\t\t.filter(c => (c.details.trait === trait) || (c.details.trait === TraitType.All))\n\t\t\t.forEach(c => value += c.rank);\n\t\tconditions.filter(c => c.type === ConditionType.TraitPenalty)\n\t\t\t.filter(c => (c.details.trait === trait) || (c.details.trait === TraitType.All))\n\t\t\t.forEach(c => value -= c.rank);\n\n\t\t// Minimum 0\n\t\treturn Math.max(value, 0);\n\t};\n\n\tstatic getSkillRank = (combatant: CombatantModel, conditions: ConditionModel[], skill: SkillType) => {\n\t\tlet value = 0;\n\n\t\tCombatantLogic.getFeatures(combatant)\n\t\t\t.filter(f => f.type === FeatureType.Skill)\n\t\t\t.filter(f => (f.skill === skill) || (f.skill === SkillType.All))\n\t\t\t.forEach(f => value += f.rank);\n\t\tCombatantLogic.getFeatures(combatant)\n\t\t\t.filter(f => f.type === FeatureType.SkillCategory)\n\t\t\t.filter(f => (f.skillCategory === GameLogic.getSkillCategory(skill)) || (f.skillCategory === SkillCategoryType.All))\n\t\t\t.forEach(f => value += f.rank);\n\n\t\tconditions.filter(c => c.type === ConditionType.SkillBonus)\n\t\t\t.filter(c => (c.details.skill === skill) || (c.details.skill === SkillType.All))\n\t\t\t.forEach(c => value += c.rank);\n\t\tconditions.filter(c => c.type === ConditionType.SkillCategoryBonus)\n\t\t\t.filter(c => (c.details.skillCategory === GameLogic.getSkillCategory(skill)) || (c.details.skillCategory === SkillCategoryType.All))\n\t\t\t.forEach(c => value += c.rank);\n\t\tconditions.filter(c => c.type === ConditionType.SkillPenalty)\n\t\t\t.filter(c => (c.details.skill === skill) || (c.details.trait === TraitType.All))\n\t\t\t.forEach(c => value -= c.rank);\n\t\tconditions.filter(c => c.type === ConditionType.SkillCategoryPenalty)\n\t\t\t.filter(c => (c.details.skillCategory === GameLogic.getSkillCategory(skill)) || (c.details.skillCategory === SkillCategoryType.All))\n\t\t\t.forEach(c => value -= c.rank);\n\n\t\tif (combatant.combat.state === CombatantState.Prone) {\n\t\t\tvalue = Math.floor(value / 2);\n\t\t}\n\t\t// Minimum 0\n\t\treturn Math.max(value, 0);\n\t};\n\n\tstatic getDamageBonus = (combatant: CombatantModel, conditions: ConditionModel[], damage: DamageType) => {\n\t\tlet value = 0;\n\n\t\tCombatantLogic.getFeatures(combatant)\n\t\t\t.filter(f => f.type === FeatureType.DamageBonus)\n\t\t\t.filter(f => (f.damage === damage) || (f.damage === DamageType.All))\n\t\t\t.forEach(f => value += f.rank);\n\t\tCombatantLogic.getFeatures(combatant)\n\t\t\t.filter(f => f.type === FeatureType.DamageCategoryBonus)\n\t\t\t.filter(f => (f.damageCategory === GameLogic.getDamageCategory(damage)) || (f.damageCategory === DamageCategoryType.All))\n\t\t\t.forEach(f => value += f.rank);\n\n\t\tconditions.filter(c => c.type === ConditionType.DamageBonus)\n\t\t\t.filter(c => (c.details.damage === damage) || (c.details.damage === DamageType.All))\n\t\t\t.forEach(c => value += c.rank);\n\t\tconditions.filter(c => c.type === ConditionType.DamageCategoryBonus)\n\t\t\t.filter(c => (c.details.damageCategory === GameLogic.getDamageCategory(damage)) || (c.details.damageCategory === DamageCategoryType.All))\n\t\t\t.forEach(c => value += c.rank);\n\t\tconditions.filter(c => c.type === ConditionType.DamagePenalty)\n\t\t\t.filter(c => (c.details.damage === damage) || (c.details.damage === DamageType.All))\n\t\t\t.forEach(c => value -= c.rank);\n\t\tconditions.filter(c => c.type === ConditionType.DamageCategoryPenalty)\n\t\t\t.filter(c => (c.details.damageCategory === GameLogic.getDamageCategory(damage)) || (c.details.damageCategory === DamageCategoryType.All))\n\t\t\t.forEach(c => value -= c.rank);\n\n\t\t// No minimum value\n\t\treturn value;\n\t};\n\n\tstatic getDamageResistance = (combatant: CombatantModel, conditions: ConditionModel[], damage: DamageType) => {\n\t\tlet value = 0;\n\n\t\tCombatantLogic.getFeatures(combatant)\n\t\t\t.filter(f => f.type === FeatureType.DamageResist)\n\t\t\t.filter(f => (f.damage === damage) || (f.damage === DamageType.All))\n\t\t\t.forEach(f => value += f.rank);\n\t\tCombatantLogic.getFeatures(combatant)\n\t\t\t.filter(f => f.type === FeatureType.DamageCategoryResist)\n\t\t\t.filter(f => (f.damageCategory === GameLogic.getDamageCategory(damage)) || (f.damageCategory === DamageCategoryType.All))\n\t\t\t.forEach(f => value += f.rank);\n\n\t\tconditions.filter(c => c.type === ConditionType.DamageResistance)\n\t\t\t.filter(c => (c.details.damage === damage) || (c.details.damage === DamageType.All))\n\t\t\t.forEach(c => value += c.rank);\n\t\tconditions.filter(c => c.type === ConditionType.DamageCategoryResistance)\n\t\t\t.filter(c => (c.details.damageCategory === GameLogic.getDamageCategory(damage)) || (c.details.damageCategory === DamageCategoryType.All))\n\t\t\t.forEach(c => value += c.rank);\n\t\tconditions.filter(c => c.type === ConditionType.DamageVulnerability)\n\t\t\t.filter(c => (c.details.damage === damage) || (c.details.damage === DamageType.All))\n\t\t\t.forEach(c => value -= c.rank);\n\t\tconditions.filter(c => c.type === ConditionType.DamageCategoryVulnerability)\n\t\t\t.filter(c => (c.details.damageCategory === GameLogic.getDamageCategory(damage)) || (c.details.damageCategory === DamageCategoryType.All))\n\t\t\t.forEach(c => value -= c.rank);\n\n\t\t// No minimum value\n\t\treturn value;\n\t};\n\n\tstatic getProficiencies = (combatant: CombatantModel) => {\n\t\tconst profs: ItemProficiencyType[] = [];\n\n\t\tCombatantLogic.getFeatures(combatant)\n\t\t\t.filter(f => f.type === FeatureType.Proficiency)\n\t\t\t.forEach(f => profs.push(f.proficiency));\n\n\t\treturn Collections.distinct(profs, p => p.toString());\n\t};\n\n\tstatic getAuras = (combatant: CombatantModel) => {\n\t\tconst auras: ConditionModel[] = [];\n\n\t\tif ((combatant.combat.state === CombatantState.Standing) || (combatant.combat.state === CombatantState.Prone)) {\n\t\t\tCombatantLogic.getFeatures(combatant)\n\t\t\t\t.filter(f => f.type === FeatureType.Aura)\n\t\t\t\t.forEach(f => {\n\t\t\t\t\tconst original = auras.find(a => (a.type === f.aura)\n\t\t\t\t\t\t&& (a.details.trait === f.trait)\n\t\t\t\t\t\t&& (a.details.skill === f.skill)\n\t\t\t\t\t\t&& (a.details.skillCategory === f.skillCategory)\n\t\t\t\t\t\t&& (a.details.damage === f.damage)\n\t\t\t\t\t\t&& (a.details.damageCategory === f.damageCategory));\n\t\t\t\t\tif (original) {\n\t\t\t\t\t\toriginal.rank += 1;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconst aura = Factory.createCondition(f.aura, TraitType.None, f.rank);\n\t\t\t\t\t\taura.details.trait = f.trait;\n\t\t\t\t\t\taura.details.skill = f.skill;\n\t\t\t\t\t\taura.details.skillCategory = f.skillCategory;\n\t\t\t\t\t\taura.details.damage = f.damage;\n\t\t\t\t\t\taura.details.damageCategory = f.damageCategory;\n\t\t\t\t\t\tauras.push(aura);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t}\n\n\t\treturn auras;\n\t};\n}\n","interface SoundEffect {\n\tdecoding: boolean;\n\tarray: ArrayBuffer | null;\n\taudio: AudioBuffer | null;\n}\n\nexport class Sound {\n\tstatic context: AudioContext | null = null;\n\tstatic volume = 0.5;\n\n\tstatic dong: SoundEffect = { decoding: false, array: null, audio: null };\n\n\tstatic play = (sound: SoundEffect) => {\n\t\tif (sound.decoding) {\n\t\t\treturn;\n\t\t}\n\n\t\ttry {\n\t\t\tif (!Sound.context) {\n\t\t\t\tSound.context = new AudioContext();\n\t\t\t}\n\n\t\t\tif (sound.audio) {\n\t\t\t\tSound.playDecoded(sound.audio);\n\t\t\t} else if (sound.array) {\n\t\t\t\tsound.decoding = true;\n\t\t\t\tSound.context.decodeAudioData(sound.array, decoded => {\n\t\t\t\t\tsound.decoding = false;\n\t\t\t\t\tsound.array = null;\n\t\t\t\t\tsound.audio = decoded;\n\t\t\t\t\tSound.playDecoded(sound.audio);\n\t\t\t\t}, () => {\n\t\t\t\t\t// Error\n\t\t\t\t});\n\t\t\t}\n\t\t} catch {\n\t\t\t// Error\n\t\t}\n\t};\n\n\tstatic playDecoded = (audio: AudioBuffer) => {\n\t\tif (!Sound.context) {\n\t\t\treturn;\n\t\t}\n\n\t\ttry {\n\t\t\tconst gain = Sound.context.createGain();\n\t\t\tgain.gain.value = Sound.volume;\n\n\t\t\tconst source = Sound.context.createBufferSource();\n\t\t\tsource.buffer = audio;\n\t\t\tsource.connect(gain).connect(Sound.context.destination);\n\t\t\tsource.start();\n\t\t} catch {\n\t\t\t// Error\n\t\t}\n\t};\n}\n","import { BaseData } from '../data/base-data';\n\nimport { CombatantState } from '../enums/combatant-state';\nimport { CombatantType } from '../enums/combatant-type';\nimport { ConditionType } from '../enums/condition-type';\nimport { DamageCategoryType } from '../enums/damage-category-type';\nimport { DamageType } from '../enums/damage-type';\nimport { EncounterMapSquareType } from '../enums/encounter-map-square-type';\nimport { EncounterState } from '../enums/encounter-state';\nimport { QuirkType } from '../enums/quirk-type';\nimport { SkillType } from '../enums/skill-type';\nimport { TraitType } from '../enums/trait-type';\n\nimport { ActionEffects, ActionLogic, ActionTargetParameters } from './action-logic';\nimport { GameLogic } from './game-logic';\n\nimport type { ActionModel, ActionOriginParameterModel, ActionTargetParameterModel, ActionWeaponParameterModel } from '../models/action';\nimport type { EncounterMapSquareModel, EncounterModel, LootPileModel } from '../models/encounter';\nimport type { CombatantModel } from '../models/combatant';\nimport type { ConditionModel } from '../models/condition';\nimport type { ItemModel } from '../models/item';\n\nimport { Collections } from '../utils/collections';\nimport { Random } from '../utils/random';\n\nimport { CombatantLogic } from './combatant-logic';\nimport { ConditionLogic } from './condition-logic';\nimport { EncounterMapLogic } from './encounter-map-logic';\nimport { Factory } from './factory';\nimport { Sound } from '../utils/sound';\n\nexport class EncounterLogic {\n\tstatic log = (encounter: EncounterModel, message: string) => {\n\t\tEncounterLogic.logMessages.push(message);\n\n\t\tif (EncounterLogic.logTimeout) {\n\t\t\tclearTimeout(EncounterLogic.logTimeout);\n\t\t\tEncounterLogic.logTimeout = null;\n\t\t}\n\t\tEncounterLogic.logTimeout = setTimeout(() => {\n\t\t\tif (EncounterLogic.handleLogMessage) {\n\t\t\t\tEncounterLogic.handleLogMessage(EncounterLogic.logMessages);\n\t\t\t\tEncounterLogic.logMessages = [];\n\t\t\t}\n\t\t}, 200);\n\t};\n\n\tstatic logMessages: string[] = [];\n\tstatic logTimeout: NodeJS.Timeout | null = null;\n\tstatic handleLogMessage: ((messages: string[]) => void) | null = null;\n\n\tstatic getCombatantSquares = (encounter: EncounterModel, combatant: CombatantModel, position: { x: number, y: number } | null = null) => {\n\t\tconst squares = [];\n\n\t\tif (!position) {\n\t\t\tposition = combatant.combat.position;\n\t\t}\n\n\t\tconst left = position.x;\n\t\tconst right = left + combatant.size - 1;\n\t\tconst top = position.y;\n\t\tconst bottom = top + combatant.size - 1;\n\n\t\tfor (let x = left; x <= right; ++x) {\n\t\t\tfor (let y = top; y <= bottom; ++y) {\n\t\t\t\tsquares.push({ x: x, y: y });\n\t\t\t}\n\t\t}\n\n\t\treturn squares;\n\t};\n\n\tstatic getCombatantAuraSquares = (encounter: EncounterModel, combatant: CombatantModel) => {\n\t\tconst squares = [];\n\n\t\tconst left = combatant.combat.position.x - 1;\n\t\tconst right = left + combatant.size + 1;\n\t\tconst top = combatant.combat.position.y - 1;\n\t\tconst bottom = top + combatant.size + 1;\n\n\t\tfor (let x = left; x <= right; ++x) {\n\t\t\tfor (let y = top; y <= bottom; ++y) {\n\t\t\t\tsquares.push({ x: x, y: y });\n\t\t\t}\n\t\t}\n\n\t\tconst combatantSquares = EncounterLogic.getCombatantSquares(encounter, combatant);\n\t\treturn squares.filter(sq => !combatantSquares.find(s => (s.x === sq.x) && (s.y === sq.y)));\n\t};\n\n\tstatic getSquareIsEmpty = (encounter: EncounterModel, square: { x: number, y: number }, ignore: CombatantModel[] = []) => {\n\t\tconst occupied: { x: number; y: number }[] = [];\n\n\t\tencounter.combatants\n\t\t\t.filter(c => !ignore.includes(c))\n\t\t\t.filter(c => c.combat.state !== CombatantState.Dead)\n\t\t\t.forEach(c => {\n\t\t\t\tconst squares = EncounterLogic.getCombatantSquares(encounter, c);\n\t\t\t\toccupied.push(...squares);\n\t\t\t});\n\t\tencounter.loot.forEach(lp => occupied.push(lp.position));\n\n\t\treturn encounter.mapSquares.find(s => (s.x === square.x) && (s.y === square.y)) && !occupied.find(s => (s.x === square.x) && (s.y === square.y));\n\t};\n\n\tstatic rollInitiative = (encounter: EncounterModel) => {\n\t\tencounter.round += 1;\n\n\t\tencounter.combatants.forEach(c => {\n\t\t\tc.combat.initiative = Number.MIN_VALUE;\n\n\t\t\tconst speed = EncounterLogic.getTraitRank(encounter, c, TraitType.Speed);\n\t\t\tc.combat.initiative = Random.dice(speed);\n\t\t});\n\n\t\tencounter.combatants.sort((a, b) => {\n\t\t\t// Sort by Inititive\n\t\t\tlet result: number = b.combat.initiative - a.combat.initiative;\n\n\t\t\tif (result === 0) {\n\t\t\t\t// Sort by Speed\n\t\t\t\tconst speedA = EncounterLogic.getTraitRank(encounter, a, TraitType.Speed);\n\t\t\t\tconst speedB = EncounterLogic.getTraitRank(encounter, b, TraitType.Speed);\n\t\t\t\tresult = speedB - speedA;\n\t\t\t}\n\n\t\t\tif (result === 0) {\n\t\t\t\t// Sort heroes before monsters\n\t\t\t\tconst valueA = (a.faction === CombatantType.Hero ? 1 : 0);\n\t\t\t\tconst valueB = (b.faction === CombatantType.Hero ? 1 : 0);\n\t\t\t\tresult = valueB - valueA;\n\t\t\t}\n\n\t\t\tif (result === 0) {\n\t\t\t\t// Sort alphabetically\n\t\t\t\tresult = (a.name < b.name) ? -1 : +1;\n\t\t\t}\n\n\t\t\treturn result;\n\t\t});\n\t};\n\n\tstatic endTurn = (encounter: EncounterModel) => {\n\t\tencounter.combatants.filter(c => c.combat.current).forEach(c => {\n\t\t\tEncounterLogic.endOfTurn(encounter, c);\n\t\t});\n\n\t\tconst active = EncounterLogic.getActiveCombatants(encounter);\n\t\tif (active.length > 0) {\n\t\t\tEncounterLogic.startOfTurn(encounter, active[0]);\n\t\t}\n\t};\n\n\tstatic startOfTurn = (encounter: EncounterModel, combatant: CombatantModel) => {\n\t\tencounter.combatants.forEach(c => c.combat.current = false);\n\t\tcombatant.combat.current = true;\n\n\t\tcombatant.combat.hidden = 0;\n\t\tcombatant.combat.senses = 0;\n\t\tcombatant.combat.movement = 0;\n\t\tcombatant.combat.trail = [];\n\t\tcombatant.combat.actions = [];\n\t\tcombatant.combat.selectedAction = null;\n\t\tcombatant.combat.intents = null;\n\n\t\tif (combatant.combat.state === CombatantState.Unconscious) {\n\t\t\tconst rank = EncounterLogic.getTraitRank(encounter, combatant, TraitType.Resolve);\n\t\t\tconst result = Random.dice(rank);\n\t\t\tEncounterLogic.log(encounter, `${combatant.name} is unconscious: rolls Resolve (${rank}) and gets ${result}`);\n\t\t\tif (result <= 1) {\n\t\t\t\tEncounterLogic.kill(encounter, combatant);\n\t\t\t} else if ((result >= 10) && (combatant.quirks.includes(QuirkType.Undead))) {\n\t\t\t\tcombatant.combat.wounds = rank - 1;\n\t\t\t\tcombatant.combat.state = CombatantState.Prone;\n\t\t\t\tEncounterLogic.log(encounter, `${combatant.name} is now ${combatant.combat.state}`);\n\t\t\t}\n\t\t}\n\n\t\tconst conditions = ([] as ConditionModel[])\n\t\t\t.concat(combatant.combat.conditions)\n\t\t\t.concat(EncounterLogic.getAuraConditions(encounter, combatant));\n\n\t\tconditions.forEach(condition => {\n\t\t\tEncounterLogic.log(encounter, `${combatant.name} is currently affected by ${ConditionLogic.getConditionDescription(condition)}, rank ${condition.rank}`);\n\t\t});\n\n\t\tif (combatant.combat.stunned) {\n\t\t\tEncounterLogic.log(encounter, `${combatant.name} is stunned`);\n\t\t}\n\n\t\tconditions\n\t\t\t.filter(condition => condition.type === ConditionType.AutoHeal)\n\t\t\t.forEach(condition => {\n\t\t\t\tEncounterLogic.log(encounter, `Healing condition (${condition.rank})`);\n\t\t\t\tEncounterLogic.healDamage(encounter, combatant, condition.rank);\n\t\t\t});\n\n\t\tconditions\n\t\t\t.filter(condition => condition.type === ConditionType.AutoDamage)\n\t\t\t.forEach(condition => {\n\t\t\t\tEncounterLogic.log(encounter, `Damage condition (${condition.details.damage}, ${condition.rank})`);\n\t\t\t\tconst value = Random.dice(condition.rank);\n\t\t\t\tEncounterLogic.damage(encounter, combatant, value, condition.details.damage);\n\t\t\t});\n\n\t\tif ((combatant.combat.state === CombatantState.Standing) || (combatant.combat.state === CombatantState.Prone)) {\n\t\t\tcombatant.combat.senses = Random.dice(EncounterLogic.getSkillRank(encounter, combatant, SkillType.Perception));\n\t\t\tcombatant.combat.movement = Random.dice(EncounterLogic.getTraitRank(encounter, combatant, TraitType.Speed));\n\n\t\t\tconditions\n\t\t\t\t.filter(condition => condition.type === ConditionType.MovementBonus)\n\t\t\t\t.forEach(condition => {\n\t\t\t\t\tEncounterLogic.log(encounter, `Movement bonus condition (${condition.rank})`);\n\t\t\t\t\tcombatant.combat.movement += Random.dice(condition.rank);\n\t\t\t\t});\n\t\t\tconditions\n\t\t\t\t.filter(condition => condition.type === ConditionType.MovementPenalty)\n\t\t\t\t.forEach(condition => {\n\t\t\t\t\tEncounterLogic.log(encounter, `Movement penalty condition (${condition.rank})`);\n\t\t\t\t\tcombatant.combat.movement = Math.max(0, combatant.combat.movement - condition.rank);\n\t\t\t\t});\n\n\t\t\tEncounterLogic.drawActions(encounter, combatant);\n\t\t}\n\n\t\t// Decrement conditions\n\t\tcombatant.combat.conditions.forEach(condition => {\n\t\t\tif (ConditionLogic.getConditionIsBeneficial(condition)) {\n\t\t\t\tcondition.rank -= 1;\n\t\t\t\tEncounterLogic.log(encounter, `Condition '${ConditionLogic.getConditionDescription(condition)}' reduced to rank ${condition.rank}`);\n\t\t\t} else {\n\t\t\t\tconst trait = EncounterLogic.getTraitRank(encounter, combatant, condition.trait);\n\t\t\t\tif (Random.dice(trait) >= Random.dice(condition.rank)) {\n\t\t\t\t\tcondition.rank = 0;\n\t\t\t\t} else {\n\t\t\t\t\tcondition.rank -= 1;\n\t\t\t\t}\n\t\t\t\tEncounterLogic.log(encounter, `Condition '${ConditionLogic.getConditionDescription(condition)}' reduced to rank ${condition.rank}`);\n\t\t\t}\n\t\t});\n\t\tcombatant.combat.conditions = combatant.combat.conditions.filter(c => c.rank > 0);\n\n\t\t// This might have affected our Resolve, so check whether this is a problem\n\t\tconst resolve = EncounterLogic.getTraitRank(encounter, combatant, TraitType.Resolve);\n\t\tif ((combatant.combat.wounds === resolve) && ((combatant.combat.state === CombatantState.Standing) || (combatant.combat.state === CombatantState.Unconscious))) {\n\t\t\tcombatant.combat.state = CombatantState.Unconscious;\n\t\t\tEncounterLogic.log(encounter, `${combatant.name} is now ${combatant.combat.state}`);\n\t\t}\n\t\tif ((combatant.combat.wounds > resolve) && (combatant.combat.state !== CombatantState.Dead)) {\n\t\t\tEncounterLogic.kill(encounter, combatant);\n\t\t}\n\n\t\tif ((combatant.combat.state === CombatantState.Unconscious) || (combatant.combat.state === CombatantState.Dead)) {\n\t\t\tEncounterLogic.endOfTurn(encounter, combatant);\n\n\t\t\tconst active = EncounterLogic.getActiveCombatants(encounter);\n\t\t\tif (active.length > 0) {\n\t\t\t\tEncounterLogic.startOfTurn(encounter, active[0]);\n\t\t\t}\n\t\t}\n\t};\n\n\tstatic endOfTurn = (encounter: EncounterModel, combatant: CombatantModel) => {\n\t\tencounter.combatants.forEach(c => {\n\t\t\tc.combat.current = false;\n\t\t\tc.combat.senses = 0;\n\t\t\tc.combat.movement = 0;\n\t\t\tc.combat.trail = [];\n\t\t\tc.combat.actions = [];\n\t\t\tc.combat.selectedAction = null;\n\t\t\tc.combat.intents = null;\n\t\t});\n\n\t\tcombatant.combat.stunned = false;\n\t\tcombatant.combat.initiative = Number.MIN_VALUE;\n\t};\n\n\tstatic drawActions = (encounter: EncounterModel, combatant: CombatantModel) => {\n\t\tconst deck = CombatantLogic.getActionDeck(combatant);\n\t\tswitch (combatant.faction) {\n\t\t\tcase CombatantType.Hero:\n\t\t\t\tcombatant.combat.actions = Collections.shuffle(deck).splice(0, 3);\n\t\t\t\tcombatant.combat.actions.push(...BaseData.getBaseActions());\n\t\t\t\tcombatant.combat.selectedAction = null;\n\t\t\t\tbreak;\n\t\t\tcase CombatantType.Monster:\n\t\t\t\tcombatant.combat.actions = deck;\n\t\t\t\tcombatant.combat.actions.push(...BaseData.getBaseActions());\n\t\t\t\tEncounterLogic.checkActionParameters(encounter, combatant);\n\t\t\t\tcombatant.combat.selectedAction = null;\n\t\t\t\tbreak;\n\t\t}\n\t};\n\n\tstatic selectAction = (encounter: EncounterModel, combatant: CombatantModel, action: ActionModel) => {\n\t\tcombatant.combat.selectedAction = {\n\t\t\taction: action,\n\t\t\tused: false\n\t\t};\n\t\tEncounterLogic.checkActionParameters(encounter, combatant, false);\n\t};\n\n\tstatic deselectAction = (encounter: EncounterModel, combatant: CombatantModel) => {\n\t\tcombatant.combat.selectedAction = null;\n\t\tEncounterLogic.checkActionParameters(encounter, combatant, false);\n\t};\n\n\tstatic checkActionParameters = (encounter: EncounterModel, combatant: CombatantModel, invertTargets = false) => {\n\t\tcombatant.combat.actions.forEach(action => {\n\t\t\taction.parameters.forEach(parameter => {\n\t\t\t\tswitch (parameter.id) {\n\t\t\t\t\tcase 'weapon':\n\t\t\t\t\t\tActionLogic.checkWeaponParameter(parameter as ActionWeaponParameterModel, combatant);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'origin':\n\t\t\t\t\t\tActionLogic.checkOriginParameter(parameter as ActionOriginParameterModel, encounter, combatant, action);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'targets': {\n\t\t\t\t\t\tActionLogic.checkTargetParameter(parameter as ActionTargetParameterModel, encounter, combatant, action, invertTargets);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t};\n\n\tstatic runAction = (encounter: EncounterModel, combatant: CombatantModel) => {\n\t\tif (combatant.combat.selectedAction !== null) {\n\t\t\tconst action = combatant.combat.selectedAction.action;\n\t\t\tcombatant.combat.selectedAction.used = true;\n\t\t\tEncounterLogic.log(encounter, `${combatant.name} uses ${action.name}`);\n\t\t\taction.effects.forEach(effect => ActionEffects.run(effect, encounter, combatant, action.parameters));\n\t\t}\n\t};\n\n\tstatic getMoveCost = (encounter: EncounterModel, combatant: CombatantModel, position: { x: number, y: number }, dir: string) => {\n\t\tconst movingFrom = EncounterLogic.getCombatantSquares(encounter, combatant, position);\n\t\tconst movingTo = movingFrom.map(sq => {\n\t\t\tconst dest = { x: sq.x, y: sq.y };\n\t\t\tswitch (dir) {\n\t\t\t\tcase 'n':\n\t\t\t\t\tdest.y -= 1;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'ne':\n\t\t\t\t\tdest.x += 1;\n\t\t\t\t\tdest.y -= 1;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'e':\n\t\t\t\t\tdest.x += 1;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'se':\n\t\t\t\t\tdest.x += 1;\n\t\t\t\t\tdest.y += 1;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 's':\n\t\t\t\t\tdest.y += 1;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'sw':\n\t\t\t\t\tdest.x -= 1;\n\t\t\t\t\tdest.y += 1;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'w':\n\t\t\t\t\tdest.x -= 1;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'nw':\n\t\t\t\t\tdest.x -= 1;\n\t\t\t\t\tdest.y -= 1;\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\treturn dest;\n\t\t});\n\n\t\tconst destinationMapSquares = movingTo\n\t\t\t.map(sq => encounter.mapSquares.find(ms => (ms.x === sq.x) && (ms.y === sq.y)) ?? null)\n\t\t\t.filter(ms => ms !== null) as EncounterMapSquareModel[];\n\n\t\t// Can't move off the map\n\t\tif (destinationMapSquares.length !== movingTo.length) {\n\t\t\treturn Number.MAX_VALUE;\n\t\t}\n\n\t\t// Can't move into an occupied square\n\t\tif (movingTo.some(sq => !EncounterLogic.getSquareIsEmpty(encounter, sq, [ combatant ]))) {\n\t\t\treturn Number.MAX_VALUE;\n\t\t}\n\n\t\tlet cost = 1;\n\n\t\t// Obstructed: +1\n\t\tif (destinationMapSquares.some(ms => ms.type === EncounterMapSquareType.Obstructed)) {\n\t\t\tcost += 1;\n\t\t}\n\n\t\t// Moving out of a space adjacent to (standing, not stunned) opponent: +4\n\t\tconst adjacent: { x: number; y: number }[] = [];\n\t\tencounter.combatants\n\t\t\t.filter(c => c.faction !== combatant.faction)\n\t\t\t.filter(c => c.combat.state === CombatantState.Standing)\n\t\t\t.filter(c => !c.combat.stunned)\n\t\t\t.forEach(c => {\n\t\t\t\tconst current = EncounterLogic.getCombatantSquares(encounter, c);\n\t\t\t\tconst squares = EncounterMapLogic.getAdjacentSquares(encounter.mapSquares, current);\n\t\t\t\tadjacent.push(...squares);\n\t\t\t});\n\t\tif (movingFrom.some(sq => adjacent.find(os => (os.x === sq.x) && (os.y === sq.y)))) {\n\t\t\tcost += 4;\n\t\t}\n\n\t\t// Prone or hidden: x2\n\t\tif ((combatant.combat.state === CombatantState.Prone) || (combatant.combat.hidden > 0)) {\n\t\t\tcost *= 2;\n\t\t}\n\n\t\treturn cost;\n\t};\n\n\tstatic getPossibleMoveSquares = (encounter: EncounterModel, combatant: CombatantModel) => {\n\t\tconst squares = [\n\t\t\t{ dir: 'n', x: combatant.combat.position.x, y: combatant.combat.position.y - 1 },\n\t\t\t{ dir: 'ne', x: combatant.combat.position.x + 1, y: combatant.combat.position.y - 1 },\n\t\t\t{ dir: 'e', x: combatant.combat.position.x + 1, y: combatant.combat.position.y },\n\t\t\t{ dir: 'se', x: combatant.combat.position.x + 1, y: combatant.combat.position.y + 1 },\n\t\t\t{ dir: 's', x: combatant.combat.position.x, y: combatant.combat.position.y + 1 },\n\t\t\t{ dir: 'sw', x: combatant.combat.position.x - 1, y: combatant.combat.position.y + 1 },\n\t\t\t{ dir: 'w', x: combatant.combat.position.x - 1, y: combatant.combat.position.y },\n\t\t\t{ dir: 'nw', x: combatant.combat.position.x - 1, y: combatant.combat.position.y - 1 }\n\t\t];\n\n\t\treturn squares.filter(square => {\n\t\t\tconst cost = EncounterLogic.getMoveCost(encounter, combatant, combatant.combat.position, square.dir);\n\t\t\treturn cost !== Number.MAX_VALUE;\n\t\t});\n\t};\n\n\t///////////////////////////////////////////////////////////////////////////\n\n\tstatic move = (encounter: EncounterModel, combatant: CombatantModel, dir: string, cost: number) => {\n\t\tcombatant.combat.movement = Math.max(0, combatant.combat.movement - cost);\n\n\t\tcombatant.combat.trail.push({ x: combatant.combat.position.x, y: combatant.combat.position.y });\n\n\t\tswitch (dir) {\n\t\t\tcase 'n':\n\t\t\t\tcombatant.combat.position.y -= 1;\n\t\t\t\tbreak;\n\t\t\tcase 'ne':\n\t\t\t\tcombatant.combat.position.x += 1;\n\t\t\t\tcombatant.combat.position.y -= 1;\n\t\t\t\tbreak;\n\t\t\tcase 'e':\n\t\t\t\tcombatant.combat.position.x += 1;\n\t\t\t\tbreak;\n\t\t\tcase 'se':\n\t\t\t\tcombatant.combat.position.x += 1;\n\t\t\t\tcombatant.combat.position.y += 1;\n\t\t\t\tbreak;\n\t\t\tcase 's':\n\t\t\t\tcombatant.combat.position.y += 1;\n\t\t\t\tbreak;\n\t\t\tcase 'sw':\n\t\t\t\tcombatant.combat.position.x -= 1;\n\t\t\t\tcombatant.combat.position.y += 1;\n\t\t\t\tbreak;\n\t\t\tcase 'w':\n\t\t\t\tcombatant.combat.position.x -= 1;\n\t\t\t\tbreak;\n\t\t\tcase 'nw':\n\t\t\t\tcombatant.combat.position.x -= 1;\n\t\t\t\tcombatant.combat.position.y -= 1;\n\t\t\t\tbreak;\n\t\t}\n\n\t\tEncounterLogic.checkActionParameters(encounter, combatant);\n\t};\n\n\tstatic drinkPotion = (encounter: EncounterModel, owner: CombatantModel, drinker: CombatantModel, potion: ItemModel) => {\n\t\tif (!potion.potion) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (owner.id === drinker.id) {\n\t\t\tEncounterLogic.log(encounter, `${owner.name} drinks ${potion.name}`);\n\t\t} else {\n\t\t\tEncounterLogic.log(encounter, `${owner.name} gives ${potion.name} to ${drinker.name}`);\n\t\t}\n\n\t\towner.combat.movement -= 2;\n\n\t\towner.items = owner.items.filter(i => i.id !== potion.id);\n\t\towner.carried = owner.carried.filter(i => i.id !== potion.id);\n\n\t\tpotion.potion.effects.forEach(effect => {\n\t\t\tconst param = ActionTargetParameters.self();\n\t\t\tparam.value = [ drinker.id ];\n\t\t\tActionEffects.run(effect, encounter, drinker, [ param ]);\n\t\t});\n\t};\n\n\tstatic healDamage = (encounter: EncounterModel, combatant: CombatantModel, value: number) => {\n\t\tcombatant.combat.damage = Math.max(0, combatant.combat.damage - value);\n\n\t\tEncounterLogic.checkActionParameters(encounter, combatant);\n\n\t\tEncounterLogic.log(encounter, `${combatant.name} heals damage (${value} pts) and is now at ${combatant.combat.damage}`);\n\t};\n\n\tstatic healWounds = (encounter: EncounterModel, combatant: CombatantModel, value: number) => {\n\t\tcombatant.combat.wounds = Math.max(0, combatant.combat.wounds - value);\n\n\t\tEncounterLogic.log(encounter, `${combatant.name} heals wounds (${value}) and is now at ${combatant.combat.wounds}`);\n\n\t\tconst resolve = EncounterLogic.getTraitRank(encounter, combatant, TraitType.Resolve);\n\t\tif ((combatant.combat.wounds < resolve) && (combatant.combat.state === CombatantState.Unconscious)) {\n\t\t\tcombatant.combat.state = CombatantState.Prone;\n\t\t\tEncounterLogic.log(encounter, `${combatant.name} is now ${combatant.combat.state}`);\n\t\t}\n\n\t\tEncounterLogic.checkActionParameters(encounter, combatant);\n\t};\n\n\tstatic damage = (encounter: EncounterModel, combatant: CombatantModel, value: number, type: DamageType) => {\n\t\tif (combatant.combat.state === CombatantState.Dead){\n\t\t\treturn;\n\t\t}\n\n\t\tEncounterLogic.log(encounter, `${combatant.name} suffers damage (${type}, ${value} pts)`);\n\n\t\tif (combatant.quirks.includes(QuirkType.Swarm) || combatant.quirks.includes(QuirkType.Amorphous)) {\n\t\t\tif (GameLogic.getDamageCategory(type) === DamageCategoryType.Physical) {\n\t\t\t\tEncounterLogic.log(encounter, `${combatant.name} takes half physical damage`);\n\t\t\t\tvalue = Math.floor(value / 2);\n\t\t\t}\n\t\t}\n\n\t\tconst resistance = EncounterLogic.getDamageResistance(encounter, combatant, type);\n\t\tif (resistance > 0) {\n\t\t\tEncounterLogic.log(encounter, `${combatant.name} has damage resistance (${type}, ${resistance} pts)`);\n\t\t\tvalue -= resistance;\n\t\t}\n\n\t\tif (value > 0) {\n\t\t\tif (combatant.quirks.includes(QuirkType.Drone)) {\n\t\t\t\t// Drones die if they take any damage\n\t\t\t\tEncounterLogic.kill(encounter, combatant);\n\t\t\t} else {\n\t\t\t\tcombatant.combat.damage += value;\n\t\t\t\tEncounterLogic.log(encounter, `${combatant.name} takes damage (${value} pts) and is now at ${combatant.combat.damage}`);\n\n\t\t\t\tconst rank = EncounterLogic.getTraitRank(encounter, combatant, TraitType.Endurance);\n\t\t\t\tconst result = Random.dice(rank);\n\t\t\t\tEncounterLogic.log(encounter, `${combatant.name} rolls Endurance (${rank}) and gets ${result}`);\n\t\t\t\tif (result < combatant.combat.damage) {\n\t\t\t\t\tEncounterLogic.wound(encounter, combatant, 1);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tEncounterLogic.log(encounter, `${combatant.name} takes no damage`);\n\t\t}\n\n\t\tEncounterLogic.checkActionParameters(encounter, combatant);\n\t};\n\n\tstatic wound = (encounter: EncounterModel, combatant: CombatantModel, value: number) => {\n\t\tif (combatant.combat.state === CombatantState.Dead){\n\t\t\treturn;\n\t\t}\n\n\t\tcombatant.combat.damage = 0;\n\t\tcombatant.combat.wounds += value;\n\t\tEncounterLogic.log(encounter, `${combatant.name} takes wounds (${value}) and is now at ${combatant.combat.damage} damage, ${combatant.combat.wounds} wounds`);\n\n\t\tif (combatant.quirks.includes(QuirkType.Drone)) {\n\t\t\t// Drones die if they take any damage\n\t\t\tEncounterLogic.kill(encounter, combatant);\n\t\t} else {\n\t\t\tconst resolve = EncounterLogic.getTraitRank(encounter, combatant, TraitType.Resolve);\n\t\t\tif (combatant.combat.wounds === resolve) {\n\t\t\t\tcombatant.combat.state = CombatantState.Unconscious;\n\t\t\t\tEncounterLogic.log(encounter, `${combatant.name} is now ${combatant.combat.state}`);\n\t\t\t}\n\t\t\tif (combatant.combat.wounds > resolve) {\n\t\t\t\tEncounterLogic.kill(encounter, combatant);\n\t\t\t}\n\t\t}\n\n\t\tEncounterLogic.checkActionParameters(encounter, combatant);\n\t};\n\n\tstatic kill = (encounter: EncounterModel, combatant: CombatantModel) => {\n\t\tif (combatant.combat.state === CombatantState.Dead){\n\t\t\treturn;\n\t\t}\n\n\t\tcombatant.combat.state = CombatantState.Dead;\n\t\tcombatant.combat.conditions = [];\n\t\tEncounterLogic.log(encounter, `${combatant.name} is now ${combatant.combat.state}`);\n\t\tEncounterLogic.dropAllItems(encounter, combatant);\n\t\tSound.play(Sound.dong);\n\t};\n\n\tstatic goProne = (encounter: EncounterModel, combatant: CombatantModel) => {\n\t\tif (combatant.combat.state === CombatantState.Standing) {\n\t\t\tcombatant.combat.state = CombatantState.Prone;\n\n\t\t\tEncounterLogic.checkActionParameters(encounter, combatant);\n\n\t\t\tEncounterLogic.log(encounter, `${combatant.name} is now ${combatant.combat.state}`);\n\t\t}\n\t};\n\n\tstatic standUp = (encounter: EncounterModel, combatant: CombatantModel) => {\n\t\tif (combatant.combat.state === CombatantState.Prone) {\n\t\t\tcombatant.combat.state = CombatantState.Standing;\n\n\t\t\tEncounterLogic.checkActionParameters(encounter, combatant);\n\n\t\t\tEncounterLogic.log(encounter, `${combatant.name} is now ${combatant.combat.state}`);\n\t\t}\n\t};\n\n\tstatic stun = (encounter: EncounterModel, combatant: CombatantModel) => {\n\t\tif (combatant.combat.state === CombatantState.Dead){\n\t\t\treturn;\n\t\t}\n\n\t\tcombatant.combat.stunned = true;\n\t\tEncounterLogic.log(encounter, `${combatant.name} is stunned`);\n\t};\n\n\tstatic inspire = (encounter: EncounterModel, combatant: CombatantModel) => {\n\t\tconst rank = EncounterLogic.getSkillRank(encounter, combatant, SkillType.Presence);\n\t\tconst result = Random.dice(rank);\n\t\tEncounterLogic.log(encounter, `Inspire: ${combatant.name} rolls Presence (${rank}) and gets ${result}`);\n\n\t\tcombatant.combat.movement -= 4;\n\t\tif (result > 8) {\n\t\t\tconst edges = EncounterMapLogic.getMapEdges(encounter.mapSquares);\n\t\t\tconst combatantSquares = EncounterLogic.getCombatantSquares(encounter, combatant);\n\t\t\tencounter.combatants\n\t\t\t\t.filter(c => c.faction === combatant.faction)\n\t\t\t\t.filter(c => c.combat.stunned)\n\t\t\t\t.forEach(ally => {\n\t\t\t\t\tconst allySquares = EncounterLogic.getCombatantSquares(encounter, ally);\n\t\t\t\t\tif (EncounterMapLogic.canSeeAny(edges, combatantSquares, allySquares)) {\n\t\t\t\t\t\tally.combat.stunned = false;\n\t\t\t\t\t\tEncounterLogic.log(encounter, `${ally.name} is no longer stunned`);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t}\n\n\t\tEncounterLogic.checkActionParameters(encounter, combatant);\n\n\t};\n\n\tstatic scan = (encounter: EncounterModel, combatant: CombatantModel) => {\n\t\tconst rank = EncounterLogic.getSkillRank(encounter, combatant, SkillType.Perception);\n\t\tconst result = Random.dice(rank);\n\n\t\tcombatant.combat.movement -= 4;\n\t\tcombatant.combat.senses += result;\n\n\t\tEncounterLogic.checkActionParameters(encounter, combatant);\n\n\t\tEncounterLogic.log(encounter, `Scan: ${combatant.name} rolls Perception (${rank}) and gets ${result}`);\n\t};\n\n\tstatic hide = (encounter: EncounterModel, combatant: CombatantModel) => {\n\t\tconst rank = EncounterLogic.getSkillRank(encounter, combatant, SkillType.Stealth);\n\t\tconst result = Random.dice(rank);\n\n\t\tcombatant.combat.movement -= 4;\n\t\tcombatant.combat.hidden += result;\n\n\t\tEncounterLogic.checkActionParameters(encounter, combatant);\n\n\t\tEncounterLogic.log(encounter, `Hide: ${combatant.name} rolls Stealth (${rank}) and gets ${result}`);\n\t};\n\n\tstatic reveal = (encounter: EncounterModel, combatant: CombatantModel) => {\n\t\tif (combatant.combat.hidden > 0) {\n\t\t\tcombatant.combat.hidden = 0;\n\n\t\t\tEncounterLogic.checkActionParameters(encounter, combatant);\n\n\t\t\tEncounterLogic.log(encounter, `${combatant.name} is no longer hidden`);\n\t\t}\n\t};\n\n\tstatic equipItem = (encounter: EncounterModel, combatant: CombatantModel, item: ItemModel) => {\n\t\tif (combatant.quirks.includes(QuirkType.Beast)) {\n\t\t\t// Beasts can't use items\n\t\t\treturn;\n\t\t}\n\n\t\tcombatant.combat.movement = Math.max(0, combatant.combat.movement - 1);\n\n\t\tcombatant.carried = combatant.carried.filter(i => i.id !== item.id);\n\n\t\tcombatant.items.push(item);\n\n\t\tEncounterLogic.checkActionParameters(encounter, combatant);\n\n\t\tEncounterLogic.log(encounter, `${combatant.name} equips ${item.name}`);\n\t};\n\n\tstatic unequipItem = (encounter: EncounterModel, combatant: CombatantModel, item: ItemModel) => {\n\t\tif (combatant.quirks.includes(QuirkType.Beast)) {\n\t\t\t// Beasts can't use items\n\t\t\treturn;\n\t\t}\n\n\t\tcombatant.combat.movement = Math.max(0, combatant.combat.movement - 1);\n\n\t\tcombatant.items = combatant.items.filter(i => i.id !== item.id);\n\n\t\tcombatant.carried.push(item);\n\n\t\tEncounterLogic.checkActionParameters(encounter, combatant);\n\n\t\tEncounterLogic.log(encounter, `${combatant.name} unequips ${item.name}`);\n\t};\n\n\tstatic pickUpItem = (encounter: EncounterModel, combatant: CombatantModel, item: ItemModel) => {\n\t\tif (combatant.quirks.includes(QuirkType.Beast)) {\n\t\t\t// Beasts can't use items\n\t\t\treturn;\n\t\t}\n\n\t\tcombatant.combat.movement = Math.max(0, combatant.combat.movement - 1);\n\n\t\tconst adj = EncounterMapLogic.getAdjacentSquares(encounter.mapSquares, [ combatant.combat.position ]);\n\t\tconst piles = encounter.loot.filter(lp => adj.find(sq => (sq.x === lp.position.x) && (sq.y === lp.position.y)));\n\t\tconst lp = piles.find(l => l.items.find(i => i === item));\n\t\tif (lp) {\n\t\t\tlp.items = lp.items.filter(i => i.id !== item.id);\n\t\t\tif (lp.items.length === 0) {\n\t\t\t\tencounter.loot = encounter.loot.filter(l => l.id !== lp.id);\n\t\t\t}\n\t\t}\n\n\t\tcombatant.carried.push(item);\n\n\t\tEncounterLogic.checkActionParameters(encounter, combatant);\n\n\t\tEncounterLogic.log(encounter, `${combatant.name} picks up ${item.name}`);\n\t};\n\n\tstatic dropItem = (encounter: EncounterModel, combatant: CombatantModel, item: ItemModel) => {\n\t\tif (combatant.quirks.includes(QuirkType.Beast)) {\n\t\t\t// Beasts can't use items\n\t\t\treturn;\n\t\t}\n\n\t\tcombatant.items = combatant.items.filter(i => i.id !== item.id);\n\t\tcombatant.carried = combatant.carried.filter(i => i.id !== item.id);\n\n\t\t// See if we're beside any loot piles\n\t\tconst adj = EncounterMapLogic.getAdjacentSquares(encounter.mapSquares, [ combatant.combat.position ]);\n\t\tconst piles = encounter.loot.filter(lp => adj.find(sq => (sq.x === lp.position.x) && (sq.y === lp.position.y)));\n\n\t\tlet lp = null;\n\t\tif (piles.length === 0) {\n\t\t\tlp = Factory.createLootPile();\n\n\t\t\tconst empty = adj.filter(sq => EncounterLogic.getSquareIsEmpty(encounter as EncounterModel, sq));\n\t\t\tif (empty.length > 0) {\n\t\t\t\tconst sq = Collections.draw(empty);\n\t\t\t\tlp.position.x = sq.x;\n\t\t\t\tlp.position.y = sq.y;\n\t\t\t\tencounter.loot.push(lp);\n\t\t\t}\n\t\t} else {\n\t\t\tlp = Collections.draw(piles);\n\t\t}\n\n\t\tlp.items.push(item);\n\n\t\tEncounterLogic.checkActionParameters(encounter, combatant);\n\n\t\tEncounterLogic.log(encounter, `${combatant.name} drops ${item.name}`);\n\t};\n\n\tstatic dropAllItems = (encounter: EncounterModel, combatant: CombatantModel) => {\n\t\tif (combatant.quirks.includes(QuirkType.Beast)) {\n\t\t\t// Beasts can't use items\n\t\t\treturn;\n\t\t}\n\n\t\tconst items = ([] as ItemModel[]).concat(combatant.items).concat(combatant.carried);\n\n\t\tlet money = 0;\n\t\tif (combatant.faction === CombatantType.Monster) {\n\t\t\tif (Random.randomBoolean()) {\n\t\t\t\tmoney = Random.dice(2) + Random.dice(2);\n\t\t\t}\n\t\t}\n\n\t\tif ((items.length > 0) || (money > 0)) {\n\t\t\tconst loot = Factory.createLootPile();\n\t\t\tloot.items.push(...items);\n\t\t\tloot.money = money;\n\n\t\t\tcombatant.items = [];\n\t\t\tcombatant.carried = [];\n\n\t\t\tconst empty = EncounterLogic.getCombatantSquares(encounter, combatant).filter(sq => EncounterLogic.getSquareIsEmpty(encounter as EncounterModel, sq));\n\t\t\tif (empty.length > 0) {\n\t\t\t\tconst sq = Collections.draw(empty);\n\t\t\t\tloot.position.x = sq.x;\n\t\t\t\tloot.position.y = sq.y;\n\t\t\t\tencounter.loot.push(loot);\n\t\t\t}\n\t\t}\n\t};\n\n\t///////////////////////////////////////////////////////////////////////////\n\n\tstatic getEncounterState = (encounter: EncounterModel): EncounterState => {\n\t\tconst allMonstersDead = encounter.combatants\n\t\t\t.filter(c => c.faction === CombatantType.Monster)\n\t\t\t.every(c => (c.combat.state === CombatantState.Dead) || (c.combat.state === CombatantState.Unconscious));\n\t\tif (allMonstersDead) {\n\t\t\treturn EncounterState.Victory;\n\t\t}\n\t\tconst allHeroesDead = encounter.combatants\n\t\t\t.filter(c => c.faction === CombatantType.Hero)\n\t\t\t.every(c => (c.combat.state === CombatantState.Dead) || (c.combat.state === CombatantState.Unconscious));\n\t\tif (allHeroesDead) {\n\t\t\treturn EncounterState.Defeat;\n\t\t}\n\n\t\treturn EncounterState.Active;\n\t};\n\n\tstatic getCombatant = (encounter: EncounterModel, id: string): CombatantModel | null => {\n\t\treturn encounter.combatants.find(c => c.id === id) ?? null;\n\t};\n\n\tstatic getLoot = (encounter: EncounterModel, id: string): LootPileModel | null => {\n\t\treturn encounter.loot.find(lp => lp.id === id) ?? null;\n\t};\n\n\tstatic getAuraConditions = (encounter: EncounterModel, combatant: CombatantModel) => {\n\t\tconst auras: ConditionModel[] = [];\n\n\t\tconst squares = EncounterLogic.getCombatantSquares(encounter, combatant);\n\n\t\t// Get all beneficial aura conditions from adjacent allies\n\t\tencounter.combatants\n\t\t\t.filter(combatant => combatant.combat.state !== CombatantState.Dead)\n\t\t\t.filter(c => c.faction === combatant.faction)\n\t\t\t.filter(c => squares.some(sq => EncounterLogic.getCombatantAuraSquares(encounter, c).find(s => (s.x === sq.x) && (s.y === sq.y))))\n\t\t\t.flatMap(c => CombatantLogic.getAuras(EncounterLogic.getCombatant(encounter, c.id) as CombatantModel))\n\t\t\t.filter(aura => ConditionLogic.getConditionIsBeneficial(aura))\n\t\t\t.forEach(aura => auras.push(aura));\n\n\t\t// Get all non-beneficial aura conditions from adjacent enemies\n\t\tencounter.combatants\n\t\t\t.filter(combatant => combatant.combat.state !== CombatantState.Dead)\n\t\t\t.filter(c => c.faction !== combatant.faction)\n\t\t\t.filter(c => squares.some(sq => EncounterLogic.getCombatantAuraSquares(encounter, c).find(s => (s.x === sq.x) && (s.y === sq.y))))\n\t\t\t.flatMap(c => CombatantLogic.getAuras(EncounterLogic.getCombatant(encounter, c.id) as CombatantModel))\n\t\t\t.filter(aura => !ConditionLogic.getConditionIsBeneficial(aura))\n\t\t\t.forEach(aura => auras.push(aura));\n\n\t\treturn auras;\n\t};\n\n\t///////////////////////////////////////////////////////////////////////////\n\n\tstatic getActiveCombatants = (encounter: EncounterModel) => {\n\t\treturn encounter.combatants\n\t\t\t.filter(c => c.combat.state !== CombatantState.Dead)\n\t\t\t.filter(c => c.combat.initiative !== Number.MIN_VALUE);\n\t};\n\n\tstatic getActedCombatants = (encounter: EncounterModel) => {\n\t\treturn encounter.combatants\n\t\t\t.filter(c => c.combat.state !== CombatantState.Dead)\n\t\t\t.filter(c => c.combat.initiative === Number.MIN_VALUE);\n\t};\n\n\tstatic getDeadCombatants = (encounter: EncounterModel) => {\n\t\treturn encounter.combatants\n\t\t\t.filter(c => c.combat.state === CombatantState.Dead);\n\t};\n\n\t///////////////////////////////////////////////////////////////////////////\n\n\tstatic getTraitRank = (encounter: EncounterModel, combatant: CombatantModel, trait: TraitType) => {\n\t\tconst conditions = ([] as ConditionModel[])\n\t\t\t.concat(combatant.combat.conditions)\n\t\t\t.concat(EncounterLogic.getAuraConditions(encounter, combatant));\n\t\treturn CombatantLogic.getTraitRank(combatant, conditions, trait);\n\t};\n\n\tstatic getSkillRank = (encounter: EncounterModel, combatant: CombatantModel, skill: SkillType) => {\n\t\tconst conditions = ([] as ConditionModel[])\n\t\t\t.concat(combatant.combat.conditions)\n\t\t\t.concat(EncounterLogic.getAuraConditions(encounter, combatant));\n\t\treturn CombatantLogic.getSkillRank(combatant, conditions, skill);\n\t};\n\n\tstatic getDamageBonus = (encounter: EncounterModel, combatant: CombatantModel, damage: DamageType) => {\n\t\tconst conditions = ([] as ConditionModel[])\n\t\t\t.concat(combatant.combat.conditions)\n\t\t\t.concat(EncounterLogic.getAuraConditions(encounter, combatant));\n\t\treturn CombatantLogic.getDamageBonus(combatant, conditions, damage);\n\t};\n\n\tstatic getDamageResistance = (encounter: EncounterModel, combatant: CombatantModel, damage: DamageType) => {\n\t\tconst conditions = ([] as ConditionModel[])\n\t\t\t.concat(combatant.combat.conditions)\n\t\t\t.concat(EncounterLogic.getAuraConditions(encounter, combatant));\n\t\treturn CombatantLogic.getDamageResistance(combatant, conditions, damage);\n\t};\n\n\t///////////////////////////////////////////////////////////////////////////\n\n\tstatic findCombatants = (encounter: EncounterModel, originSquares: { x: number, y: number }[], radius: number) => {\n\t\treturn encounter.combatants.filter(combatant => {\n\t\t\tconst destSquares = EncounterLogic.getCombatantSquares(encounter, combatant);\n\t\t\tconst distance = EncounterMapLogic.getDistanceAny(originSquares, destSquares);\n\t\t\treturn (distance <= radius);\n\t\t});\n\t};\n\n\tstatic findSquares = (encounter: EncounterModel, originSquares: { x: number, y: number }[], radius: number) => {\n\t\treturn encounter.mapSquares.filter(square => {\n\t\t\tconst distance = EncounterMapLogic.getDistanceAny(originSquares, [ square ]);\n\t\t\treturn (distance <= radius);\n\t\t});\n\t};\n\n\tstatic findWalls = (encounter: EncounterModel, originSquares: { x: number, y: number }[], radius: number) => {\n\t\treturn EncounterMapLogic.getAdjacentWalls(encounter.mapSquares, encounter.mapSquares).filter(wall => {\n\t\t\tconst distance = EncounterMapLogic.getDistanceAny(originSquares, [ wall ]);\n\t\t\treturn (distance <= radius);\n\t\t});\n\t};\n}\n","import { CombatantType } from '../enums/combatant-type';\nimport { EncounterMapSquareType } from '../enums/encounter-map-square-type';\nimport { FeatureType } from '../enums/feature-type';\nimport { QuirkType } from '../enums/quirk-type';\n\nimport { EncounterMapGenerator } from './encounter-map-generator';\nimport { MagicItemGenerator } from './magic-item-generator';\n\nimport { CampaignMapLogic } from '../logic/campaign-map-logic';\nimport { CombatantLogic } from '../logic/combatant-logic';\nimport { EncounterLogic } from '../logic/encounter-logic';\nimport { Factory } from '../logic/factory';\nimport { GameLogic } from '../logic/game-logic';\n\nimport type { EncounterModel, LootPileModel } from '../models/encounter';\nimport type { CombatantModel } from '../models/combatant';\nimport type { RegionModel } from '../models/region';\n\nimport { Collections } from '../utils/collections';\nimport { Random } from '../utils/random';\nimport { Utils } from '../utils/utils';\n\nexport class EncounterGenerator {\n\tstatic createEncounter = (region: RegionModel, heroes: CombatantModel[], packIDs: string[]): EncounterModel => {\n\t\tconst seed = region.encounters[0];\n\t\tconst rng = Random.getSeededRNG(seed);\n\n\t\tconst encounter: EncounterModel = {\n\t\t\tregionID: region.id,\n\t\t\tround: 0,\n\t\t\tcombatants: [ ...heroes ],\n\t\t\tloot: [],\n\t\t\tmapSquares: EncounterMapGenerator.generateEncounterMap(rng)\n\t\t};\n\n\t\tconst monsters: CombatantModel[] = [];\n\t\tconst addMonster = (speciesID: string, roleID: string, backgroundID: string) => {\n\t\t\tconst isDrone = Random.dice(2, rng) > 10;\n\t\t\tconst count = isDrone ? 3 : 1;\n\t\t\tfor (let n = 0; n < count; ++n) {\n\t\t\t\tconst monster = Factory.createCombatant(CombatantType.Monster);\n\t\t\t\tif (isDrone) {\n\t\t\t\t\tmonster.quirks.push(QuirkType.Drone);\n\t\t\t\t}\n\t\t\t\tCombatantLogic.applyCombatantCards(monster, speciesID, roleID, backgroundID);\n\t\t\t\tCombatantLogic.makeFeatureChoices(monster);\n\t\t\t\tCombatantLogic.addItems(monster, packIDs);\n\t\t\t\tmonsters.push(monster);\n\t\t\t}\n\t\t};\n\n\t\twhile (Collections.sum(monsters, m => m.level) < Collections.sum(heroes, h => h.level)) {\n\t\t\tswitch (Random.randomNumber(10, rng)) {\n\t\t\t\tcase 0: {\n\t\t\t\t\t// Add a random monster\n\t\t\t\t\tif (monsters.length < (heroes.length * 2)) {\n\t\t\t\t\t\tconst speciesIDs = CampaignMapLogic.getMonsters(region, packIDs).map(s => s.id);\n\t\t\t\t\t\tconst speciesID = Collections.draw(speciesIDs, rng);\n\t\t\t\t\t\tconst roleID = Collections.draw(GameLogic.getRoleDeck(packIDs).map(r => r.id), rng);\n\t\t\t\t\t\tconst backgroundID = Collections.draw(GameLogic.getBackgroundDeck(packIDs).map(b => b.id), rng);\n\t\t\t\t\t\taddMonster(speciesID, roleID, backgroundID);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcase 1: {\n\t\t\t\t\t// Add a monster we already have, keeping the species only\n\t\t\t\t\tif ((monsters.length > 0) && (monsters.length < (heroes.length * 2))) {\n\t\t\t\t\t\tconst original = Collections.draw(monsters, rng);\n\t\t\t\t\t\tconst speciesID = original.speciesID;\n\t\t\t\t\t\tconst roleID = Collections.draw(GameLogic.getRoleDeck(packIDs).map(r => r.id), rng);\n\t\t\t\t\t\tconst backgroundID = Collections.draw(GameLogic.getBackgroundDeck(packIDs).map(b => b.id), rng);\n\t\t\t\t\t\taddMonster(speciesID, roleID, backgroundID);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcase 2:\n\t\t\t\tcase 3: {\n\t\t\t\t\t// Add a monster we already have, keeping the species and role\n\t\t\t\t\tif ((monsters.length > 0) && (monsters.length < (heroes.length * 2))) {\n\t\t\t\t\t\tconst original = Collections.draw(monsters, rng);\n\t\t\t\t\t\tconst speciesID = original.speciesID;\n\t\t\t\t\t\tconst roleID = original.roleID;\n\t\t\t\t\t\tconst backgroundID = Collections.draw(GameLogic.getBackgroundDeck(packIDs).map(b => b.id), rng);\n\t\t\t\t\t\taddMonster(speciesID, roleID, backgroundID);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcase 4:\n\t\t\t\tcase 5:\n\t\t\t\tcase 6:\n\t\t\t\tcase 7:\n\t\t\t\tcase 8:\n\t\t\t\tcase 9: {\n\t\t\t\t\t// Level up a random monster\n\t\t\t\t\tif (monsters.length > 0) {\n\t\t\t\t\t\tconst monster = Collections.draw(monsters, rng);\n\t\t\t\t\t\tconst featureDeck = CombatantLogic.getFeatureDeck(monster).filter(f => f.type !== FeatureType.Proficiency);\n\t\t\t\t\t\tCombatantLogic.incrementCombatantLevel(monster, Collections.draw(featureDeck), packIDs);\n\t\t\t\t\t\tCombatantLogic.makeFeatureChoices(monster);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tconst checkedIDs: string[] = [];\n\t\tmonsters.forEach(monster => {\n\t\t\tif (!checkedIDs.includes(monster.id)) {\n\t\t\t\tconst duplicates = monsters.filter(m => m.name === monster.name);\n\t\t\t\tif (duplicates.length > 1) {\n\t\t\t\t\tlet n = 1;\n\t\t\t\t\tduplicates.forEach(m => {\n\t\t\t\t\t\tm.name = `${m.name} ${n}`;\n\t\t\t\t\t\tn += 1;\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tcheckedIDs.push(...duplicates.map(m => m.id));\n\t\t\t}\n\t\t});\n\n\t\tmonsters.forEach(m => CombatantLogic.resetCombatant(m));\n\t\tencounter.combatants.push(...monsters);\n\n\t\tEncounterGenerator.placeCombatants(encounter, rng);\n\n\t\tconst loot: LootPileModel[] = [];\n\t\tif (Random.randomNumber(5, rng) === 0) {\n\t\t\tconst lp = Factory.createLootPile();\n\t\t\tif (Random.randomNumber(3, rng) === 0) {\n\t\t\t\tlp.items.push(MagicItemGenerator.generateRandomMagicItem(packIDs));\n\t\t\t} else {\n\t\t\t\tconst potions = GameLogic.getPotionDeck(packIDs);\n\t\t\t\tconst item = Collections.draw(potions);\n\t\t\t\titem.id = Utils.guid();\n\t\t\t\tlp.items.push(item);\n\t\t\t}\n\n\t\t\tconst square = Collections.draw(encounter.mapSquares.filter(c => c.type === EncounterMapSquareType.Clear), rng);\n\t\t\tlp.position.x = square.x;\n\t\t\tlp.position.y = square.y;\n\n\t\t\tloot.push(lp);\n\t\t}\n\t\tencounter.loot.push(...loot);\n\n\t\treturn encounter;\n\t};\n\n\tstatic placeCombatants = (encounter: EncounterModel, rng: () => number) => {\n\t\tencounter.combatants.forEach(combatant => {\n\t\t\tif ((combatant.combat.position.x !== Number.MIN_VALUE) && (combatant.combat.position.y !== Number.MIN_VALUE)) {\n\t\t\t\t// Already on the map\n\t\t\t} else {\n\t\t\t\tfor (let i = 0; i < 1000; ++i) {\n\t\t\t\t\tconst square = Collections.draw(encounter.mapSquares, rng);\n\n\t\t\t\t\tconst squares = [];\n\t\t\t\t\tfor (let x = square.x; x <= square.x + combatant.size - 1; ++x) {\n\t\t\t\t\t\tfor (let y = square.y; y <= square.y + combatant.size - 1; ++y) {\n\t\t\t\t\t\t\tsquares.push({ x: x, y: y });\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tconst canPlace = squares.every(sq => EncounterGenerator.canPlaceHere(encounter, sq));\n\t\t\t\t\tif (canPlace) {\n\t\t\t\t\t\tcombatant.combat.position.x = square.x;\n\t\t\t\t\t\tcombatant.combat.position.y = square.y;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t// If any combatants could not be not placed on the map, remove them from the encounter\n\t\tencounter.combatants = encounter.combatants.filter(c => (c.combat.position.x !== Number.MIN_VALUE) && (c.combat.position.y !== Number.MIN_VALUE));\n\t};\n\n\tstatic placeLoot = (encounter: EncounterModel, rng: () => number) => {\n\t\tencounter.loot.forEach(lp => {\n\t\t\tif ((lp.position.x !== Number.MIN_VALUE) && (lp.position.y !== Number.MIN_VALUE)) {\n\t\t\t\t// Already on the map\n\t\t\t} else {\n\t\t\t\tfor (let i = 0; i < 1000; ++i) {\n\t\t\t\t\tconst square = Collections.draw(encounter.mapSquares, rng);\n\t\t\t\t\tif (EncounterGenerator.canPlaceHere(encounter, square)) {\n\t\t\t\t\t\tlp.position.x = square.x;\n\t\t\t\t\t\tlp.position.y = square.y;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t// If any combatants could not be not placed on the map, remove them from the encounter\n\t\tencounter.combatants = encounter.combatants.filter(c => (c.combat.position.x !== Number.MIN_VALUE) && (c.combat.position.y !== Number.MIN_VALUE));\n\t};\n\n\tstatic canPlaceHere = (encounter: EncounterModel, square: { x: number, y: number }) => {\n\t\tconst mapSquare = encounter.mapSquares.find(ms => (ms.x === square.x) && (ms.y === square.y));\n\n\t\tif (!mapSquare) {\n\t\t\t// Off the map\n\t\t\treturn false;\n\t\t}\n\n\t\tif (mapSquare.type !== EncounterMapSquareType.Clear) {\n\t\t\t// Not a clear square\n\t\t\treturn false;\n\t\t}\n\n\t\tconst occupiedSquares: { x: number; y: number }[] = [];\n\t\tencounter.combatants.forEach(combatant => occupiedSquares.push(...EncounterLogic.getCombatantSquares(encounter, combatant)));\n\t\tencounter.loot.forEach(lp => occupiedSquares.push(lp.position));\n\n\t\tif (occupiedSquares.find(os => (os.x === square.x) && (os.y === square.y))) {\n\t\t\t// Someone else is here\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t};\n}\n","import type { ActionModel } from '../models/action';\nimport type { IntentModel } from '../models/intent';\n\nexport class IntentsData {\n\tstatic inspire = (): IntentModel => {\n\t\treturn {\n\t\t\tid: 'inspire',\n\t\t\tdata: null\n\t\t};\n\t};\n\n\tstatic scan = (): IntentModel => {\n\t\treturn {\n\t\t\tid: 'scan',\n\t\t\tdata: null\n\t\t};\n\t};\n\n\tstatic hide = (): IntentModel => {\n\t\treturn {\n\t\t\tid: 'hide',\n\t\t\tdata: null\n\t\t};\n\t};\n\n\tstatic move = (dir: string): IntentModel => {\n\t\treturn {\n\t\t\tid: 'move',\n\t\t\tdata: dir\n\t\t};\n\t};\n\n\tstatic action = (action: ActionModel): IntentModel => {\n\t\treturn {\n\t\t\tid: 'action',\n\t\t\tdata: action\n\t\t};\n\t};\n}\n","import { EncounterLogic } from './encounter-logic';\n\nimport type { CombatantModel } from '../models/combatant';\nimport type { EncounterModel } from '../models/encounter';\nimport type { PathModel } from '../models/path';\n\nexport class PathLogic {\n\tstatic findPaths = (encounter: EncounterModel, combatant: CombatantModel) => {\n\t\tconst paths: PathModel[] = [\n\t\t\t{\n\t\t\t\tx: combatant.combat.position.x,\n\t\t\t\ty: combatant.combat.position.y,\n\t\t\t\tsteps: [],\n\t\t\t\tcost: 0,\n\t\t\t\tworking: true\n\t\t\t}\n\t\t];\n\n\t\twhile (paths.filter(p => p.working).length > 0) {\n\t\t\tPathLogic.findSteps(encounter, combatant, paths);\n\t\t}\n\n\t\treturn paths.filter(path => path.cost <= combatant.combat.movement);\n\t};\n\n\tstatic findSteps = (encounter: EncounterModel, combatant: CombatantModel, paths: PathModel[]) => {\n\t\tconst workingSet = paths.filter(path => path.working).filter(path => path.cost <= combatant.combat.movement);\n\t\tpaths.forEach(path => path.working = false);\n\n\t\tworkingSet.forEach(path => {\n\t\t\t[ 'n', 'ne', 'e', 'se', 's', 'sw', 'w', 'nw' ].forEach(dir => {\n\t\t\t\tconst pos = { x: path.x, y: path.y };\n\t\t\t\tswitch (dir) {\n\t\t\t\t\tcase 'n':\n\t\t\t\t\t\tpos.y -= 1;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'ne':\n\t\t\t\t\t\tpos.x += 1;\n\t\t\t\t\t\tpos.y -= 1;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'e':\n\t\t\t\t\t\tpos.x += 1;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'se':\n\t\t\t\t\t\tpos.x += 1;\n\t\t\t\t\t\tpos.y += 1;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 's':\n\t\t\t\t\t\tpos.y += 1;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'sw':\n\t\t\t\t\t\tpos.x -= 1;\n\t\t\t\t\t\tpos.y += 1;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'w':\n\t\t\t\t\t\tpos.x -= 1;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'nw':\n\t\t\t\t\t\tpos.x -= 1;\n\t\t\t\t\t\tpos.y -= 1;\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tconst cost = EncounterLogic.getMoveCost(encounter, combatant, { x: path.x, y: path.y }, dir);\n\t\t\t\tconst discovered = paths.find(p => (p.x === pos.x) && (p.y === pos.y));\n\t\t\t\tif (!discovered) {\n\t\t\t\t\tif (cost !== Number.MAX_VALUE) {\n\t\t\t\t\t\tconst newPath = {\n\t\t\t\t\t\t\tx: pos.x,\n\t\t\t\t\t\t\ty: pos.y,\n\t\t\t\t\t\t\tsteps: JSON.parse(JSON.stringify(path.steps)) as string[],\n\t\t\t\t\t\t\tcost: path.cost + cost,\n\t\t\t\t\t\t\tworking: true\n\t\t\t\t\t\t};\n\t\t\t\t\t\tnewPath.steps.push(dir);\n\t\t\t\t\t\tif (newPath.cost <= combatant.combat.movement) {\n\t\t\t\t\t\t\tpaths.push(newPath);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t};\n}\n","import { IntentsData } from '../data/intents-data';\n\nimport { ActionTargetType } from '../enums/action-target-type';\nimport { CombatantState } from '../enums/combatant-state';\nimport { CombatantType } from '../enums/combatant-type';\nimport { SkillType } from '../enums/skill-type';\nimport { TraitType } from '../enums/trait-type';\n\nimport { ActionLogic, ActionPrerequisites } from './action-logic';\nimport { EncounterLogic } from './encounter-logic';\nimport { EncounterMapLogic } from './encounter-map-logic';\nimport { PathLogic } from './path-logic';\n\nimport type { ActionModel, ActionTargetParameterModel } from '../models/action';\nimport type { EncounterMapEdgeModel, EncounterModel } from '../models/encounter';\nimport type { IntentModel, IntentsModel } from '../models/intent';\nimport type { CombatantModel } from '../models/combatant';\nimport type { PathModel } from '../models/path';\n\nimport { Collections } from '../utils/collections';\nimport { Random } from '../utils/random';\n\nexport class IntentsLogic {\n\tstatic getIntents = (encounter: EncounterModel, combatant: CombatantModel) => {\n\t\tconst paths = PathLogic.findPaths(encounter, combatant);\n\t\tconst edges = EncounterMapLogic.getMapEdges(encounter.mapSquares);\n\n\t\tconst options: IntentsModel[] = [];\n\n\t\tif (!combatant.combat.selectedAction) {\n\t\t\tcombatant.combat.actions\n\t\t\t\t.filter(a => a.prerequisites.every(p => ActionPrerequisites.isSatisfied(p, combatant)))\n\t\t\t\t.forEach(action => {\n\t\t\t\t\taction.parameters.forEach(param => {\n\t\t\t\t\t\tif (param.id === 'targets') {\n\t\t\t\t\t\t\tconst targetParam = param as ActionTargetParameterModel;\n\t\t\t\t\t\t\tif (targetParam.targets === null) {\n\t\t\t\t\t\t\t\toptions.push({\n\t\t\t\t\t\t\t\t\tdescription: action.name,\n\t\t\t\t\t\t\t\t\tintents: [ IntentsData.action(action) ],\n\t\t\t\t\t\t\t\t\tweight: 2\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tswitch (targetParam.targets.type) {\n\t\t\t\t\t\t\t\t\tcase ActionTargetType.Enemies:\n\t\t\t\t\t\t\t\t\tcase ActionTargetType.Combatants:\n\t\t\t\t\t\t\t\t\t\toptions.push(...IntentsLogic.getCombatantTargetIntents(encounter, combatant, action, CombatantType.Hero, paths, edges));\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\tcase ActionTargetType.Allies:\n\t\t\t\t\t\t\t\t\t\toptions.push(...IntentsLogic.getCombatantTargetIntents(encounter, combatant, action, CombatantType.Monster, paths, edges));\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\tcase ActionTargetType.Squares:\n\t\t\t\t\t\t\t\t\t\toptions.push(...IntentsLogic.getSquareTargetIntents(encounter, combatant, action, paths, edges));\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\tcase ActionTargetType.Walls:\n\t\t\t\t\t\t\t\t\t\toptions.push(...IntentsLogic.getWallTargetIntents(encounter, combatant, action, paths));\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t}\n\n\t\toptions.push(...IntentsLogic.getMovementIntents(encounter, combatant, paths));\n\t\toptions.push(...IntentsLogic.getAttackIntents(encounter, combatant));\n\n\t\tconst presense = EncounterLogic.getSkillRank(encounter, combatant, SkillType.Presence);\n\t\tconst canSeeStunnedAlly = encounter.combatants\n\t\t\t.filter(c => c.faction === combatant.faction)\n\t\t\t.filter(ally => ally.combat.stunned)\n\t\t\t.some(ally => EncounterMapLogic.canSeeAny(edges, EncounterLogic.getCombatantSquares(encounter, combatant), EncounterLogic.getCombatantSquares(encounter, ally)));\n\t\tif ((presense > 0) && (combatant.combat.movement >= 4) && canSeeStunnedAlly) {\n\t\t\toptions.push({\n\t\t\t\tdescription: 'Inspire',\n\t\t\t\tintents: [ IntentsData.inspire() ],\n\t\t\t\tweight: presense\n\t\t\t});\n\t\t}\n\n\t\tconst perception = EncounterLogic.getSkillRank(encounter, combatant, SkillType.Perception);\n\t\tif ((perception > 0) && (combatant.combat.movement >= 4)) {\n\t\t\toptions.push({\n\t\t\t\tdescription: 'Scan',\n\t\t\t\tintents: [ IntentsData.scan() ],\n\t\t\t\tweight: perception\n\t\t\t});\n\t\t}\n\n\t\tconst stealth = EncounterLogic.getSkillRank(encounter, combatant, SkillType.Stealth);\n\t\tif ((stealth > 0) && (combatant.combat.hidden === 0) && (combatant.combat.movement >= 4)) {\n\t\t\toptions.push({\n\t\t\t\tdescription: 'Hide',\n\t\t\t\tintents: [ IntentsData.hide() ],\n\t\t\t\tweight: stealth\n\t\t\t});\n\t\t}\n\n\t\treturn Collections.max(options, o => Random.dice(o.weight));\n\t};\n\n\tstatic getCombatantTargetIntents = (encounter: EncounterModel, combatant: CombatantModel, action: ActionModel, faction: CombatantType, paths: PathModel[], edges: EncounterMapEdgeModel) => {\n\t\tconst range = ActionLogic.getActionRange(action, combatant);\n\n\t\tconst intents: IntentsModel[] = [];\n\n\t\tencounter.combatants\n\t\t\t.filter(c => c.faction === faction)\n\t\t\t.filter(c => combatant.combat.senses >= c.combat.hidden)\n\t\t\t.filter(c => (c.combat.state !== CombatantState.Unconscious) && (c.combat.state !== CombatantState.Dead))\n\t\t\t.forEach(target => {\n\t\t\t\tconst targetSquares = EncounterLogic.getCombatantSquares(encounter, target);\n\t\t\t\tconst candidatePaths = encounter.mapSquares\n\t\t\t\t\t.filter(sq => EncounterMapLogic.canSeeAny(edges, targetSquares, [ sq ]))\n\t\t\t\t\t.filter(sq => {\n\t\t\t\t\t\t// Limit this to squares which would put us within range for this action\n\t\t\t\t\t\treturn EncounterMapLogic.getDistanceAny(targetSquares, [ sq ]) <= range;\n\t\t\t\t\t})\n\t\t\t\t\t.map(sq => {\n\t\t\t\t\t\t// Find the cheapest path to this square\n\t\t\t\t\t\treturn paths.find(path => (sq.x === path.x) && (sq.y === path.y)) || null;\n\t\t\t\t\t})\n\t\t\t\t\t.filter(p => {\n\t\t\t\t\t\t// Limit this to paths we have enough movement for\n\t\t\t\t\t\tconst cost = p ? p.cost : Number.MAX_VALUE;\n\t\t\t\t\t\treturn cost <= combatant.combat.movement;\n\t\t\t\t\t});\n\t\t\t\tif (candidatePaths.length > 0) {\n\t\t\t\t\tconst path = Collections.min(candidatePaths, p => p?.cost || Number.MAX_VALUE);\n\t\t\t\t\tif (path) {\n\t\t\t\t\t\tintents.push({\n\t\t\t\t\t\t\tdescription: action.name,\n\t\t\t\t\t\t\tintents: [\n\t\t\t\t\t\t\t\t...path.steps.map(step => IntentsData.move(step)),\n\t\t\t\t\t\t\t\tIntentsData.action(action)\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\tweight: ActionLogic.getActionType(action) === 'Attack' ? 4 : 2\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\treturn intents;\n\t};\n\n\tstatic getSquareTargetIntents = (encounter: EncounterModel, combatant: CombatantModel, action: ActionModel, paths: PathModel[], edges: EncounterMapEdgeModel) => {\n\t\tconst range = ActionLogic.getActionRange(action, combatant);\n\n\t\tconst intents: IntentsModel[] = [];\n\n\t\tencounter.mapSquares\n\t\t\t.forEach(targetSquare => {\n\t\t\t\tconst candidatePaths = encounter.mapSquares\n\t\t\t\t\t.filter(sq => EncounterMapLogic.canSee(edges, targetSquare, sq))\n\t\t\t\t\t.filter(sq => {\n\t\t\t\t\t\t// Limit this to squares which would put us within range for this action\n\t\t\t\t\t\treturn EncounterMapLogic.getDistance(targetSquare, sq) <= range;\n\t\t\t\t\t})\n\t\t\t\t\t.map(sq => {\n\t\t\t\t\t\t// Find the cheapest path to this square\n\t\t\t\t\t\treturn paths.find(path => (sq.x === path.x) && (sq.y === path.y)) || null;\n\t\t\t\t\t})\n\t\t\t\t\t.filter(p => {\n\t\t\t\t\t\t// Limit this to paths we have enough movement for\n\t\t\t\t\t\tconst cost = p ? p.cost : Number.MAX_VALUE;\n\t\t\t\t\t\treturn cost <= combatant.combat.movement;\n\t\t\t\t\t});\n\t\t\t\tif (candidatePaths.length > 0) {\n\t\t\t\t\tconst path = Collections.min(candidatePaths, p => p?.cost || Number.MAX_VALUE);\n\t\t\t\t\tif (path) {\n\t\t\t\t\t\tlet weight = 1;\n\t\t\t\t\t\tconst param = action.parameters.find(p => p.id === 'targets');\n\t\t\t\t\t\tif (param) {\n\t\t\t\t\t\t\tconst targetParam = param as ActionTargetParameterModel;\n\t\t\t\t\t\t\tif (targetParam.targets) {\n\t\t\t\t\t\t\t\tswitch (targetParam.targets.type) {\n\t\t\t\t\t\t\t\t\tcase ActionTargetType.Allies:\n\t\t\t\t\t\t\t\t\t\tweight = encounter.combatants\n\t\t\t\t\t\t\t\t\t\t\t.filter(c => c.faction === CombatantType.Monster)\n\t\t\t\t\t\t\t\t\t\t\t.filter(c => {\n\t\t\t\t\t\t\t\t\t\t\t\tconst dist = EncounterMapLogic.getDistanceAny(EncounterLogic.getCombatantSquares(encounter, c), [ targetSquare ]);\n\t\t\t\t\t\t\t\t\t\t\t\treturn dist <= targetParam.range.radius;\n\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t.length;\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\tcase ActionTargetType.Combatants:\n\t\t\t\t\t\t\t\t\tcase ActionTargetType.Enemies:\n\t\t\t\t\t\t\t\t\t\tweight = encounter.combatants\n\t\t\t\t\t\t\t\t\t\t\t.filter(c => c.faction === CombatantType.Hero)\n\t\t\t\t\t\t\t\t\t\t\t.filter(c => {\n\t\t\t\t\t\t\t\t\t\t\t\tconst dist = EncounterMapLogic.getDistanceAny(EncounterLogic.getCombatantSquares(encounter, c), [ targetSquare ]);\n\t\t\t\t\t\t\t\t\t\t\t\treturn dist <= targetParam.range.radius;\n\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t.length;\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tintents.push({\n\t\t\t\t\t\t\tdescription: action.name,\n\t\t\t\t\t\t\tintents: [\n\t\t\t\t\t\t\t\t...path.steps.map(step => IntentsData.move(step)),\n\t\t\t\t\t\t\t\tIntentsData.action(action)\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\tweight: weight\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\treturn intents;\n\t};\n\n\tstatic getWallTargetIntents = (encounter: EncounterModel, combatant: CombatantModel, action: ActionModel, paths: PathModel[]) => {\n\t\tconst range = ActionLogic.getActionRange(action, combatant);\n\n\t\tconst intents: IntentsModel[] = [];\n\n\t\tCollections.distinct(EncounterMapLogic.getAdjacentWalls(encounter.mapSquares, encounter.mapSquares), sq => `${sq.x} ${sq.y}`)\n\t\t\t.forEach(targetWall => {\n\t\t\t\tconst candidatePaths = encounter.mapSquares\n\t\t\t\t\t.filter(sq => {\n\t\t\t\t\t\t// Limit this to squares which would put us within range for this action\n\t\t\t\t\t\treturn EncounterMapLogic.getDistance(targetWall, sq) <= range;\n\t\t\t\t\t})\n\t\t\t\t\t.map(sq => {\n\t\t\t\t\t\t// Find the cheapest path to this square\n\t\t\t\t\t\treturn paths.find(path => (sq.x === path.x) && (sq.y === path.y)) || null;\n\t\t\t\t\t})\n\t\t\t\t\t.filter(p => {\n\t\t\t\t\t\t// Limit this to paths we have enough movement for\n\t\t\t\t\t\tconst cost = p ? p.cost : Number.MAX_VALUE;\n\t\t\t\t\t\treturn cost <= combatant.combat.movement;\n\t\t\t\t\t});\n\t\t\t\tif (candidatePaths.length > 0) {\n\t\t\t\t\tconst path = Collections.min(candidatePaths, p => p?.cost || Number.MAX_VALUE);\n\t\t\t\t\tif (path) {\n\t\t\t\t\t\tintents.push({\n\t\t\t\t\t\t\tdescription: action.name,\n\t\t\t\t\t\t\tintents: [\n\t\t\t\t\t\t\t\t...path.steps.map(step => IntentsData.move(step)),\n\t\t\t\t\t\t\t\tIntentsData.action(action)\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\tweight: 1\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\treturn intents;\n\t};\n\n\tstatic getAttackIntents = (encounter: EncounterModel, combatant: CombatantModel, invertTargets = false) => {\n\t\tconst intents: IntentsModel[] = [];\n\n\t\tif (!combatant.combat.selectedAction) {\n\t\t\tcombatant.combat.actions\n\t\t\t\t.filter(action => ActionLogic.getActionType(action) === 'Attack')\n\t\t\t\t.forEach(action => {\n\t\t\t\t\tconst prerequisitesMet = action.prerequisites.every(prerequisite => ActionPrerequisites.isSatisfied(prerequisite, combatant));\n\t\t\t\t\tconst parametersSet = action.parameters.every(param => {\n\t\t\t\t\t\tswitch (param.id) {\n\t\t\t\t\t\t\tcase 'origin':\n\t\t\t\t\t\t\t\treturn (param.value as []).length > 0;\n\t\t\t\t\t\t\tcase 'targets': {\n\t\t\t\t\t\t\t\tconst targetIDs = param.value as string[];\n\t\t\t\t\t\t\t\tconst targets = targetIDs.map(id => EncounterLogic.getCombatant(encounter, id));\n\t\t\t\t\t\t\t\tconst allies = targets.filter(t => (t !== null) && (invertTargets ? (t.faction !== combatant.faction) : (t.faction === combatant.faction)));\n\t\t\t\t\t\t\t\tconst enemies = targets.filter(t => (t !== null) && (invertTargets ? (t.faction === combatant.faction) : (t.faction !== combatant.faction)));\n\t\t\t\t\t\t\t\treturn enemies.length > allies.length;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn param.value !== null;\n\t\t\t\t\t});\n\t\t\t\t\tif (prerequisitesMet && parametersSet) {\n\t\t\t\t\t\tintents.push({\n\t\t\t\t\t\t\tdescription: action.name,\n\t\t\t\t\t\t\tintents: [\n\t\t\t\t\t\t\t\tIntentsData.action(action)\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\tweight: 4\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t}\n\n\t\treturn intents;\n\t};\n\n\tstatic getMovementIntents = (encounter: EncounterModel, combatant: CombatantModel, paths: PathModel[]) => {\n\t\tconst movePaths = paths.filter(p => p.cost > 0);\n\t\tif (movePaths.length === 0) {\n\t\t\treturn [];\n\t\t}\n\n\t\tconst intents: IntentsModel[] = [];\n\n\t\tconst maxWounds = Math.max(EncounterLogic.getTraitRank(encounter, combatant, TraitType.Resolve) - 1, 1);\n\t\tif ((combatant.combat.damage > 0) && (combatant.combat.wounds >= maxWounds)) {\n\t\t\t// Find the path that will take me furthest from any enemy\n\t\t\tconst path = Collections.max(movePaths, p => {\n\t\t\t\tconst distances = encounter.combatants\n\t\t\t\t\t.filter(c => c.faction !== combatant.faction)\n\t\t\t\t\t.filter(c => combatant.combat.senses >= c.combat.hidden)\n\t\t\t\t\t.filter(c => (c.combat.state !== CombatantState.Unconscious) && (c.combat.state !== CombatantState.Dead))\n\t\t\t\t\t.map(c => {\n\t\t\t\t\t\tconst squares = EncounterLogic.getCombatantSquares(encounter, c);\n\t\t\t\t\t\treturn EncounterMapLogic.getDistanceAny(squares, [ p ]);\n\t\t\t\t\t});\n\t\t\t\treturn Math.min(...distances);\n\t\t\t});\n\t\t\tif (path) {\n\t\t\t\tintents.push({\n\t\t\t\t\tdescription: 'Move Away',\n\t\t\t\t\tintents: [\n\t\t\t\t\t\t...path.steps.map(step => IntentsData.move(step))\n\t\t\t\t\t],\n\t\t\t\t\tweight: 0\n\t\t\t\t});\n\t\t\t}\n\t\t} else {\n\t\t\t// Find the path that will take me closest to an enemy\n\t\t\tconst path = Collections.min(movePaths, p => {\n\t\t\t\tconst distances = encounter.combatants\n\t\t\t\t\t.filter(c => c.faction !== combatant.faction)\n\t\t\t\t\t.filter(c => combatant.combat.senses >= c.combat.hidden)\n\t\t\t\t\t.filter(c => (c.combat.state !== CombatantState.Unconscious) && (c.combat.state !== CombatantState.Dead))\n\t\t\t\t\t.map(c => {\n\t\t\t\t\t\tconst squares = EncounterLogic.getCombatantSquares(encounter, c);\n\t\t\t\t\t\treturn EncounterMapLogic.getDistanceAny(squares, [ p ]);\n\t\t\t\t\t});\n\t\t\t\treturn Math.min(...distances);\n\t\t\t});\n\t\t\tif (path) {\n\t\t\t\tintents.push({\n\t\t\t\t\tdescription: 'Move',\n\t\t\t\t\tintents: [\n\t\t\t\t\t\t...path.steps.map(step => IntentsData.move(step))\n\t\t\t\t\t],\n\t\t\t\t\tweight: 0\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\treturn intents;\n\t};\n\n\tstatic performIntents = (encounter: EncounterModel, combatant: CombatantModel): void => {\n\t\tif ((combatant.combat.intents === null) || (combatant.combat.intents.intents.length === 0)) {\n\t\t\tEncounterLogic.endTurn(encounter);\n\t\t\treturn;\n\t\t}\n\n\t\tcombatant.combat.intents.intents.forEach(intent => {\n\t\t\tIntentsLogic.performIntent(encounter, combatant, intent);\n\t\t});\n\t\tcombatant.combat.intents = IntentsLogic.getIntents(encounter, combatant);\n\t};\n\n\tstatic performIntent = (encounter: EncounterModel, combatant: CombatantModel, intent: IntentModel): void => {\n\t\tswitch (intent.id) {\n\t\t\tcase 'inspire': {\n\t\t\t\tif (combatant.combat.movement >= 4) {\n\t\t\t\t\tEncounterLogic.inspire(encounter, combatant);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'scan': {\n\t\t\t\tif (combatant.combat.movement >= 4) {\n\t\t\t\t\tEncounterLogic.scan(encounter, combatant);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'hide': {\n\t\t\t\tif (combatant.combat.movement >= 4) {\n\t\t\t\t\tEncounterLogic.hide(encounter, combatant);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'move': {\n\t\t\t\tconst dir = intent.data as string;\n\t\t\t\tconst cost = EncounterLogic.getMoveCost(encounter, combatant, combatant.combat.position, dir);\n\t\t\t\tif (combatant.combat.movement >= cost) {\n\t\t\t\t\tEncounterLogic.move(encounter, combatant, dir, cost);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'action': {\n\t\t\t\tconst action = intent.data as ActionModel;\n\t\t\t\tEncounterLogic.selectAction(encounter, combatant, action);\n\t\t\t\tEncounterLogic.runAction(encounter, combatant);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t};\n}\n","import { BaseData } from '../data/base-data';\nimport { MonsterSpeciesData } from '../data/monster-species-data';\n\nimport { ActionRangeType } from '../enums/action-range-type';\nimport { ActionTargetType } from '../enums/action-target-type';\nimport { CombatantState } from '../enums/combatant-state';\nimport { CombatantType } from '../enums/combatant-type';\nimport { DamageType } from '../enums/damage-type';\nimport { EncounterMapSquareType } from '../enums/encounter-map-square-type';\nimport { FeatureType } from '../enums/feature-type';\nimport { ItemLocationType } from '../enums/item-location-type';\nimport { ItemProficiencyType } from '../enums/item-proficiency-type';\nimport { MovementType } from '../enums/movement-type';\nimport { QuirkType } from '../enums/quirk-type';\nimport { SkillType } from '../enums/skill-type';\nimport { SummonType } from '../enums/summon-type';\nimport { TraitType } from '../enums/trait-type';\n\nimport { EncounterGenerator } from '../generators/encounter-generator';\n\nimport type {\n\tActionEffectModel,\n\tActionModel,\n\tActionOriginParameterModel,\n\tActionParameterModel,\n\tActionPrerequisiteModel,\n\tActionTargetParameterModel,\n\tActionWeaponParameterModel\n} from '../models/action';\nimport type { EncounterMapSquareModel, EncounterModel } from '../models/encounter';\nimport type { ItemModel, WeaponModel } from '../models/item';\nimport type { CombatantModel } from '../models/combatant';\nimport type { ConditionModel } from '../models/condition';\n\nimport { Collections } from '../utils/collections';\nimport { Random } from '../utils/random';\nimport { Utils } from '../utils/utils';\n\nimport { CombatantLogic } from './combatant-logic';\nimport { ConditionLogic } from './condition-logic';\nimport { EncounterLogic } from './encounter-logic';\nimport { EncounterMapLogic } from './encounter-map-logic';\nimport { Factory } from './factory';\nimport { GameLogic } from './game-logic';\nimport { IntentsLogic } from './intents-logic';\nimport { PathLogic } from './path-logic';\n\nexport class ActionPrerequisites {\n\tstatic meleeWeapon = (): ActionPrerequisiteModel => {\n\t\treturn {\n\t\t\tid: 'item',\n\t\t\tdescription: 'Requires you to have a melee weapon',\n\t\t\tdata: [ ItemProficiencyType.LargeWeapons, ItemProficiencyType.MilitaryWeapons, ItemProficiencyType.PairedWeapons ]\n\t\t};\n\t};\n\n\tstatic rangedWeapon = (): ActionPrerequisiteModel => {\n\t\treturn {\n\t\t\tid: 'item',\n\t\t\tdescription: 'Requires you to have a ranged weapon',\n\t\t\tdata: [ ItemProficiencyType.PowderWeapons, ItemProficiencyType.RangedWeapons ]\n\t\t};\n\t};\n\n\tstatic armor = (): ActionPrerequisiteModel => {\n\t\treturn {\n\t\t\tid: 'item',\n\t\t\tdescription: 'Requires you to be wearing armor',\n\t\t\tdata: [ ItemProficiencyType.LightArmor, ItemProficiencyType.HeavyArmor ]\n\t\t};\n\t};\n\n\tstatic shield = (): ActionPrerequisiteModel => {\n\t\treturn {\n\t\t\tid: 'item',\n\t\t\tdescription: 'Requires you to have a shield',\n\t\t\tdata: [ ItemProficiencyType.Shields ]\n\t\t};\n\t};\n\n\tstatic implement = (): ActionPrerequisiteModel => {\n\t\treturn {\n\t\t\tid: 'item',\n\t\t\tdescription: 'Requires you to have an implement',\n\t\t\tdata: [ ItemProficiencyType.Implements ]\n\t\t};\n\t};\n\n\tstatic emptyHand = (): ActionPrerequisiteModel => {\n\t\treturn {\n\t\t\tid: 'emptyhand',\n\t\t\tdescription: 'Requires you to have a free hand',\n\t\t\tdata: null\n\t\t};\n\t};\n\n\tstatic damage = (): ActionPrerequisiteModel => {\n\t\treturn {\n\t\t\tid: 'damage',\n\t\t\tdescription: 'Requires you to have at least 1 point of damage',\n\t\t\tdata: null\n\t\t};\n\t};\n\n\tstatic wound = (): ActionPrerequisiteModel => {\n\t\treturn {\n\t\t\tid: 'wound',\n\t\t\tdescription: 'Requires you to have at least 1 wound',\n\t\t\tdata: null\n\t\t};\n\t};\n\n\tstatic condition = (trait: TraitType): ActionPrerequisiteModel => {\n\t\treturn {\n\t\t\tid: 'condition',\n\t\t\tdescription: trait === TraitType.Any ? 'Requires you to have a condition': `Requires you to have a ${trait} condition`,\n\t\t\tdata: null\n\t\t};\n\t};\n\n\tstatic carryingCapacity = (): ActionPrerequisiteModel => {\n\t\treturn {\n\t\t\tid: 'carryingcapacity',\n\t\t\tdescription: 'Requires you to have spare carrying capacity',\n\t\t\tdata: null\n\t\t};\n\t};\n\n\tstatic hidden = (): ActionPrerequisiteModel => {\n\t\treturn {\n\t\t\tid: 'hidden',\n\t\t\tdescription: 'Requires you to be hidden',\n\t\t\tdata: null\n\t\t};\n\t};\n\n\tstatic prone = (): ActionPrerequisiteModel => {\n\t\treturn {\n\t\t\tid: 'prone',\n\t\t\tdescription: 'Requires you to be prone',\n\t\t\tdata: null\n\t\t};\n\t};\n\n\tstatic isSatisfied = (prerequisite: ActionPrerequisiteModel, combatant: CombatantModel) => {\n\t\tswitch (prerequisite.id) {\n\t\t\tcase 'item': {\n\t\t\t\tconst proficiencies = prerequisite.data as ItemProficiencyType[];\n\t\t\t\treturn proficiencies.some(prof => {\n\t\t\t\t\treturn combatant.items.some(i => i.proficiency === prof) && CombatantLogic.getProficiencies(combatant).includes(prof);\n\t\t\t\t});\n\t\t\t}\n\t\t\tcase 'emptyhand': {\n\t\t\t\tconst slotsUsed = Collections.sum(combatant.items.filter(i => i.location === ItemLocationType.Hand), i => i.slots);\n\t\t\t\treturn slotsUsed < 2;\n\t\t\t}\n\t\t\tcase 'damage': {\n\t\t\t\treturn combatant.combat.damage > 0;\n\t\t\t}\n\t\t\tcase 'wound': {\n\t\t\t\treturn combatant.combat.wounds > 0;\n\t\t\t}\n\t\t\tcase 'condition': {\n\t\t\t\tconst trait = prerequisite.data as TraitType;\n\t\t\t\tif (trait === TraitType.Any) {\n\t\t\t\t\treturn combatant.combat.conditions.length > 0;\n\t\t\t\t}\n\n\t\t\t\treturn combatant.combat.conditions.filter(c => c.trait === trait).length > 0;\n\t\t\t}\n\t\t\tcase 'carryingcapacity': {\n\t\t\t\treturn combatant.carried.length < CombatantLogic.CARRY_CAPACITY;\n\t\t\t}\n\t\t\tcase 'hidden': {\n\t\t\t\treturn combatant.combat.hidden > 0;\n\t\t\t}\n\t\t\tcase 'prone': {\n\t\t\t\treturn combatant.combat.state === CombatantState.Prone;\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t};\n}\n\nexport class ActionOriginParameters {\n\tstatic distance = (value: number): ActionOriginParameterModel => {\n\t\treturn {\n\t\t\tid: 'origin',\n\t\t\tdistance: value,\n\t\t\tcandidates: [],\n\t\t\tvalue: null\n\t\t};\n\t};\n\n\tstatic weapon = (): ActionOriginParameterModel => {\n\t\treturn {\n\t\t\tid: 'origin',\n\t\t\tdistance: 'weapon',\n\t\t\tcandidates: [],\n\t\t\tvalue: null\n\t\t};\n\t};\n}\n\nexport class ActionTargetParameters {\n\tstatic self = (): ActionTargetParameterModel => {\n\t\treturn {\n\t\t\tid: 'targets',\n\t\t\trange: {\n\t\t\t\ttype: ActionRangeType.Self,\n\t\t\t\tradius: 0\n\t\t\t},\n\t\t\ttargets: null,\n\t\t\tcandidates: [],\n\t\t\tvalue: null\n\t\t};\n\t};\n\n\tstatic adjacent = (type: ActionTargetType, count: number): ActionTargetParameterModel => {\n\t\treturn {\n\t\t\tid: 'targets',\n\t\t\trange: {\n\t\t\t\ttype: ActionRangeType.Adjacent,\n\t\t\t\tradius: 1\n\t\t\t},\n\t\t\ttargets: {\n\t\t\t\ttype: type,\n\t\t\t\tcount: count\n\t\t\t},\n\t\t\tcandidates: [],\n\t\t\tvalue: null\n\t\t};\n\t};\n\n\tstatic burst = (type: ActionTargetType, count: number, radius: number): ActionTargetParameterModel => {\n\t\treturn {\n\t\t\tid: 'targets',\n\t\t\trange: {\n\t\t\t\ttype: ActionRangeType.Burst,\n\t\t\t\tradius: radius\n\t\t\t},\n\t\t\ttargets: {\n\t\t\t\ttype: type,\n\t\t\t\tcount: count\n\t\t\t},\n\t\t\tcandidates: [],\n\t\t\tvalue: null\n\t\t};\n\t};\n\n\tstatic weapon = (type: ActionTargetType, count: number, bonus: number): ActionTargetParameterModel => {\n\t\treturn {\n\t\t\tid: 'targets',\n\t\t\trange: {\n\t\t\t\ttype: ActionRangeType.Weapon,\n\t\t\t\tradius: bonus\n\t\t\t},\n\t\t\ttargets: {\n\t\t\t\ttype: type,\n\t\t\t\tcount: count\n\t\t\t},\n\t\t\tcandidates: [],\n\t\t\tvalue: null\n\t\t};\n\t};\n}\n\nexport class ActionWeaponParameters {\n\tstatic melee = (): ActionWeaponParameterModel => {\n\t\treturn {\n\t\t\tid: 'weapon',\n\t\t\ttype: 'melee',\n\t\t\tcandidates: [],\n\t\t\tvalue: null\n\t\t};\n\t};\n\n\tstatic ranged = (): ActionWeaponParameterModel => {\n\t\treturn {\n\t\t\tid: 'weapon',\n\t\t\ttype: 'ranged',\n\t\t\tcandidates: [],\n\t\t\tvalue: null\n\t\t};\n\t};\n}\n\nexport class ActionEffects {\n\tstatic attack = (\n\t\tdata: {\n\t\t\tweapon: boolean,\n\t\t\tskill: SkillType,\n\t\t\ttrait: TraitType,\n\t\t\tskillBonus: number,\n\t\t\thit: ActionEffectModel[]\n\t\t}\n\t): ActionEffectModel => {\n\t\treturn {\n\t\t\tid: 'attack',\n\t\t\tdata: data,\n\t\t\tchildren: data.hit\n\t\t};\n\t};\n\n\tstatic toSelf = (data: ActionEffectModel[]): ActionEffectModel => {\n\t\treturn {\n\t\t\tid: 'toSelf',\n\t\t\tdata: data,\n\t\t\tchildren: data\n\t\t};\n\t};\n\n\tstatic dealWeaponDamage = (rankModifier = 0): ActionEffectModel => {\n\t\treturn {\n\t\t\tid: 'weapondamage',\n\t\t\tdata: rankModifier,\n\t\t\tchildren: []\n\t\t};\n\t};\n\n\tstatic dealDamage = (type: DamageType, rank: number): ActionEffectModel => {\n\t\treturn {\n\t\t\tid: 'damage',\n\t\t\tdata: { type: type, rank: rank },\n\t\t\tchildren: []\n\t\t};\n\t};\n\n\tstatic inflictWounds = (value: number): ActionEffectModel => {\n\t\treturn {\n\t\t\tid: 'wounds',\n\t\t\tdata: value,\n\t\t\tchildren: []\n\t\t};\n\t};\n\n\tstatic healDamage = (rank: number): ActionEffectModel => {\n\t\treturn {\n\t\t\tid: 'healdamage',\n\t\t\tdata: rank,\n\t\t\tchildren: []\n\t\t};\n\t};\n\n\tstatic healWounds = (value: number): ActionEffectModel => {\n\t\treturn {\n\t\t\tid: 'healwounds',\n\t\t\tdata: value,\n\t\t\tchildren: []\n\t\t};\n\t};\n\n\tstatic addCondition = (condition: ConditionModel): ActionEffectModel => {\n\t\treturn {\n\t\t\tid: 'addcondition',\n\t\t\tdata: condition,\n\t\t\tchildren: []\n\t\t};\n\t};\n\n\tstatic removeCondition = (trait: TraitType): ActionEffectModel => {\n\t\treturn {\n\t\t\tid: 'removecondition',\n\t\t\tdata: trait,\n\t\t\tchildren: []\n\t\t};\n\t};\n\n\tstatic addMovement = (): ActionEffectModel => {\n\t\treturn {\n\t\t\tid: 'addMovement',\n\t\t\tdata: null,\n\t\t\tchildren: []\n\t\t};\n\t};\n\n\tstatic knockDown = (): ActionEffectModel => {\n\t\treturn {\n\t\t\tid: 'knockdown',\n\t\t\tdata: null,\n\t\t\tchildren: []\n\t\t};\n\t};\n\n\tstatic stun = (): ActionEffectModel => {\n\t\treturn {\n\t\t\tid: 'stun',\n\t\t\tdata: null,\n\t\t\tchildren: []\n\t\t};\n\t};\n\n\tstatic stand = (): ActionEffectModel => {\n\t\treturn {\n\t\t\tid: 'stand',\n\t\t\tdata: null,\n\t\t\tchildren: []\n\t\t};\n\t};\n\n\tstatic scan = (): ActionEffectModel => {\n\t\treturn {\n\t\t\tid: 'scan',\n\t\t\tdata: null,\n\t\t\tchildren: []\n\t\t};\n\t};\n\n\tstatic hide = (): ActionEffectModel => {\n\t\treturn {\n\t\t\tid: 'hide',\n\t\t\tdata: null,\n\t\t\tchildren: []\n\t\t};\n\t};\n\n\tstatic reveal = (): ActionEffectModel => {\n\t\treturn {\n\t\t\tid: 'reveal',\n\t\t\tdata: null,\n\t\t\tchildren: []\n\t\t};\n\t};\n\n\tstatic takeAnotherAction = (redraw = false): ActionEffectModel => {\n\t\treturn {\n\t\t\tid: 'takeAnotherAction',\n\t\t\tdata: redraw,\n\t\t\tchildren: []\n\t\t};\n\t};\n\n\tstatic invertConditions = (all: boolean): ActionEffectModel => {\n\t\treturn {\n\t\t\tid: 'invertConditions',\n\t\t\tdata: all,\n\t\t\tchildren: []\n\t\t};\n\t};\n\n\tstatic transferCondition = (): ActionEffectModel => {\n\t\treturn {\n\t\t\tid: 'transferCondition',\n\t\t\tdata: null,\n\t\t\tchildren: []\n\t\t};\n\t};\n\n\tstatic commandAction = (): ActionEffectModel => {\n\t\treturn {\n\t\t\tid: 'commandAction',\n\t\t\tdata: null,\n\t\t\tchildren: []\n\t\t};\n\t};\n\n\tstatic commandMove = (): ActionEffectModel => {\n\t\treturn {\n\t\t\tid: 'commandMove',\n\t\t\tdata: null,\n\t\t\tchildren: []\n\t\t};\n\t};\n\n\tstatic forceMovement = (type: MovementType, rank: number): ActionEffectModel => {\n\t\treturn {\n\t\t\tid: 'forceMovement',\n\t\t\tdata: {\n\t\t\t\ttype: type,\n\t\t\t\trank: rank\n\t\t\t},\n\t\t\tchildren: []\n\t\t};\n\t};\n\n\tstatic moveToTargetSquare = (): ActionEffectModel => {\n\t\treturn {\n\t\t\tid: 'moveSelfTo',\n\t\t\tdata: null,\n\t\t\tchildren: []\n\t\t};\n\t};\n\n\tstatic disarm = (): ActionEffectModel => {\n\t\treturn {\n\t\t\tid: 'disarm',\n\t\t\tdata: null,\n\t\t\tchildren: []\n\t\t};\n\t};\n\n\tstatic steal = (): ActionEffectModel => {\n\t\treturn {\n\t\t\tid: 'steal',\n\t\t\tdata: null,\n\t\t\tchildren: []\n\t\t};\n\t};\n\n\tstatic createTerrain = (type: EncounterMapSquareType): ActionEffectModel => {\n\t\treturn {\n\t\t\tid: 'createTerrain',\n\t\t\tdata: type,\n\t\t\tchildren: []\n\t\t};\n\t};\n\n\tstatic addSquares = (): ActionEffectModel => {\n\t\treturn {\n\t\t\tid: 'addSquares',\n\t\t\tdata: null,\n\t\t\tchildren: []\n\t\t};\n\t};\n\n\tstatic removeSquares = (): ActionEffectModel => {\n\t\treturn {\n\t\t\tid: 'removeSquares',\n\t\t\tdata: null,\n\t\t\tchildren: []\n\t\t};\n\t};\n\n\tstatic destroyWalls = (): ActionEffectModel => {\n\t\treturn {\n\t\t\tid: 'destroyWalls',\n\t\t\tdata: null,\n\t\t\tchildren: []\n\t\t};\n\t};\n\n\tstatic createPotion = (potionID: string): ActionEffectModel => {\n\t\treturn {\n\t\t\tid: 'createPotion',\n\t\t\tdata: potionID,\n\t\t\tchildren: []\n\t\t};\n\t};\n\n\tstatic summon = (type: SummonType): ActionEffectModel => {\n\t\treturn {\n\t\t\tid: 'summon',\n\t\t\tdata: type,\n\t\t\tchildren: []\n\t\t};\n\t};\n\n\tstatic getDescription = (effect: ActionEffectModel, combatant: CombatantModel | null, encounter: EncounterModel | null): string => {\n\t\tswitch (effect.id) {\n\t\t\tcase 'attack': {\n\t\t\t\tconst data = effect.data as {\n\t\t\t\t\tweapon: boolean,\n\t\t\t\t\tskill: SkillType,\n\t\t\t\t\ttrait: TraitType,\n\t\t\t\t\tskillBonus: number,\n\t\t\t\t\thit: ActionEffectModel[]\n\t\t\t\t};\n\t\t\t\tif (combatant) {\n\t\t\t\t\tlet rank = CombatantLogic.getSkillRank(combatant, [], data.skill);\n\t\t\t\t\tif (encounter) {\n\t\t\t\t\t\trank = EncounterLogic.getSkillRank(encounter, combatant, data.skill);\n\t\t\t\t\t}\n\t\t\t\t\tif (data.skillBonus === 0) {\n\t\t\t\t\t\treturn `Attack: ${data.skill} (rank ${rank}) vs ${data.trait}`;\n\t\t\t\t\t}\n\t\t\t\t\treturn `Attack: ${data.skill} ${data.skillBonus >= 0 ? '+' : ''}${data.skillBonus} (rank ${Math.max(rank + data.skillBonus, 0)}) vs ${data.trait}`;\n\t\t\t\t}\n\t\t\t\tif (data.skillBonus === 0) {\n\t\t\t\t\treturn `Attack: ${data.skill} vs ${data.trait}`;\n\t\t\t\t}\n\t\t\t\treturn `Attack: ${data.skill} ${data.skillBonus >= 0 ? '+' : ''}${data.skillBonus} vs ${data.trait}`;\n\t\t\t}\n\t\t\tcase 'toSelf': {\n\t\t\t\treturn 'To self';\n\t\t\t}\n\t\t\tcase 'weapondamage': {\n\t\t\t\tconst rankModifier = effect.data as number;\n\t\t\t\treturn rankModifier === 0 ? 'Deal weapon damage' : `Deal weapon damage ${rankModifier > 0 ? '+' : ''}${rankModifier}`;\n\t\t\t}\n\t\t\tcase 'damage': {\n\t\t\t\tconst data = effect.data as { type: DamageType, rank: number };\n\t\t\t\treturn `Deal ${data.type} damage (rank ${data.rank})`;\n\t\t\t}\n\t\t\tcase 'wounds': {\n\t\t\t\tconst value = effect.data as number;\n\t\t\t\treturn `Inflict ${value} wounds`;\n\t\t\t}\n\t\t\tcase 'healdamage': {\n\t\t\t\tconst rank = effect.data as number;\n\t\t\t\treturn `Heal damage (rank ${rank})`;\n\t\t\t}\n\t\t\tcase 'healwounds': {\n\t\t\t\tconst value = effect.data as number;\n\t\t\t\treturn `Heal ${value} wound(s)`;\n\t\t\t}\n\t\t\tcase 'addcondition': {\n\t\t\t\tconst condition = effect.data as ConditionModel;\n\t\t\t\treturn `Add a condition (${ConditionLogic.getConditionDescription(condition)}, rank ${condition.rank})`;\n\t\t\t}\n\t\t\tcase 'removecondition': {\n\t\t\t\tconst trait = effect.data as TraitType;\n\t\t\t\treturn trait === TraitType.Any ? 'Remove a condition' : `Remove a ${trait} condition`;\n\t\t\t}\n\t\t\tcase 'addMovement': {\n\t\t\t\treturn 'Add movement points';\n\t\t\t}\n\t\t\tcase 'knockdown': {\n\t\t\t\treturn 'Knock down';\n\t\t\t}\n\t\t\tcase 'stun': {\n\t\t\t\treturn 'Stun';\n\t\t\t}\n\t\t\tcase 'scan': {\n\t\t\t\treturn 'Scan';\n\t\t\t}\n\t\t\tcase 'hide': {\n\t\t\t\treturn 'Hide';\n\t\t\t}\n\t\t\tcase 'reveal': {\n\t\t\t\treturn 'Reveal';\n\t\t\t}\n\t\t\tcase 'stand': {\n\t\t\t\treturn 'Stand Up';\n\t\t\t}\n\t\t\tcase 'takeAnotherAction': {\n\t\t\t\tconst redraw = effect.data as boolean;\n\t\t\t\treturn redraw ? 'Redraw action cards' : 'Take another action';\n\t\t\t}\n\t\t\tcase 'invertConditions': {\n\t\t\t\tconst all = effect.data as boolean;\n\t\t\t\treturn all ? 'Invert conditions' : 'Invert a condition';\n\t\t\t}\n\t\t\tcase 'transferCondition': {\n\t\t\t\treturn 'Transfer a condition';\n\t\t\t}\n\t\t\tcase 'commandAction': {\n\t\t\t\treturn 'Command target to attack';\n\t\t\t}\n\t\t\tcase 'commandMove': {\n\t\t\t\treturn 'Command target to move';\n\t\t\t}\n\t\t\tcase 'forceMovement': {\n\t\t\t\tconst data = effect.data as { type: MovementType, rank: number };\n\t\t\t\tif (data.rank === 0) {\n\t\t\t\t\treturn `Move (${data.type})`;\n\t\t\t\t}\n\t\t\t\treturn `Move (${data.type}), rank ${data.rank}`;\n\t\t\t}\n\t\t\tcase 'moveSelfTo': {\n\t\t\t\treturn 'Move to square';\n\t\t\t}\n\t\t\tcase 'disarm': {\n\t\t\t\treturn 'Disarm';\n\t\t\t}\n\t\t\tcase 'steal': {\n\t\t\t\treturn 'Steal';\n\t\t\t}\n\t\t\tcase 'createTerrain': {\n\t\t\t\tconst type = effect.data as EncounterMapSquareType;\n\t\t\t\treturn `Create ${type.toLowerCase()} terrain`;\n\t\t\t}\n\t\t\tcase 'addSquares': {\n\t\t\t\treturn 'Create map squares';\n\t\t\t}\n\t\t\tcase 'removeSquares': {\n\t\t\t\treturn 'Destroy map squares';\n\t\t\t}\n\t\t\tcase 'destroyWalls': {\n\t\t\t\treturn 'Destroy walls';\n\t\t\t}\n\t\t\tcase 'createPotion': {\n\t\t\t\tconst potionID = effect.data as string;\n\t\t\t\tconst potion = GameLogic.getPotion(potionID) as ItemModel;\n\t\t\t\treturn `Create a ${potion.name}`;\n\t\t\t}\n\t\t\tcase 'summon': {\n\t\t\t\tconst type = effect.data as SummonType;\n\t\t\t\treturn `Summon ${type}`;\n\t\t\t}\n\t\t}\n\n\t\treturn '';\n\t};\n\n\tstatic run = (effect: ActionEffectModel, encounter: EncounterModel, combatant: CombatantModel, parameters: ActionParameterModel[]) => {\n\t\tswitch (effect.id) {\n\t\t\tcase 'attack': {\n\t\t\t\tconst data = effect.data as {\n\t\t\t\t\tweapon: boolean,\n\t\t\t\t\tskill: SkillType,\n\t\t\t\t\ttrait: TraitType,\n\t\t\t\t\tskillBonus: number,\n\t\t\t\t\thit: ActionEffectModel[]\n\t\t\t\t};\n\n\t\t\t\tconst targetsSucceeded: string[] = [];\n\n\t\t\t\tconst targetParameter = parameters.find(p => p.id === 'targets');\n\t\t\t\tif (targetParameter) {\n\t\t\t\t\tconst targetIDs = targetParameter.value as string[];\n\t\t\t\t\ttargetIDs.forEach(id => {\n\t\t\t\t\t\tconst target = EncounterLogic.getCombatant(encounter, id) as CombatantModel;\n\n\t\t\t\t\t\tlet success = true;\n\t\t\t\t\t\tconst weaponParam = parameters.find(p => p.id === 'weapon');\n\t\t\t\t\t\tif (weaponParam) {\n\t\t\t\t\t\t\tconst itemID = weaponParam.value as string;\n\t\t\t\t\t\t\tconst item = combatant.items.find(i => i.id === itemID);\n\t\t\t\t\t\t\tif (item) {\n\t\t\t\t\t\t\t\tconst weapon = item.weapon as WeaponModel;\n\t\t\t\t\t\t\t\tif (weapon.unreliable > 0) {\n\t\t\t\t\t\t\t\t\tconst roll = Random.dice(weapon.unreliable);\n\t\t\t\t\t\t\t\t\tif (roll >= 10) {\n\t\t\t\t\t\t\t\t\t\tsuccess = false;\n\t\t\t\t\t\t\t\t\t\tEncounterLogic.log(encounter, `${item.name} is Unreliable (rank ${weapon.unreliable}); it fails (rolled ${roll})`);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (success) {\n\t\t\t\t\t\t\tif ((target.combat.state === CombatantState.Unconscious) || (target.combat.state === CombatantState.Dead)) {\n\t\t\t\t\t\t\t\t// Automatic hit\n\t\t\t\t\t\t\t\tEncounterLogic.log(encounter, 'Coup de grâce: no attack roll required');\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tconst atkRank = EncounterLogic.getSkillRank(encounter, combatant, data.skill) + data.skillBonus;\n\t\t\t\t\t\t\t\tconst defRank = EncounterLogic.getTraitRank(encounter, target, data.trait);\n\n\t\t\t\t\t\t\t\tconst atkRoll = Random.dice(atkRank);\n\t\t\t\t\t\t\t\tconst defRoll = Random.dice(defRank);\n\t\t\t\t\t\t\t\tsuccess = atkRoll >= defRoll;\n\n\t\t\t\t\t\t\t\tEncounterLogic.log(\n\t\t\t\t\t\t\t\t\tencounter,\n\t\t\t\t\t\t\t\t\t`${combatant.name} rolls ${data.skill} (rank ${atkRank}): ${atkRoll}; ${target.name} rolls ${data.trait} (rank ${defRank}): ${defRoll}; ${success ? 'hit' : 'miss'}`\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (success) {\n\t\t\t\t\t\t\ttargetsSucceeded.push(target.id);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tlet copy = JSON.parse(JSON.stringify(parameters)) as ActionParameterModel[];\n\t\t\t\tcopy = copy.filter(p => p.id !== 'targets');\n\t\t\t\tcopy.push({ id: 'targets', candidates: [], value: targetsSucceeded });\n\t\t\t\tdata.hit.forEach(effect => {\n\t\t\t\t\tActionEffects.run(effect, encounter, combatant, copy);\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'toSelf': {\n\t\t\t\tlet copy = JSON.parse(JSON.stringify(parameters)) as ActionParameterModel[];\n\t\t\t\tcopy = copy.filter(p => p.id !== 'targets');\n\t\t\t\tcopy.push({ id: 'targets', candidates: [], value: [ combatant.id ] });\n\t\t\t\tconst effects = effect.data as ActionEffectModel[];\n\t\t\t\teffects.forEach(effect => {\n\t\t\t\t\tActionEffects.run(effect, encounter, combatant, copy);\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'weapondamage': {\n\t\t\t\tconst rankModifier = effect.data as number;\n\t\t\t\tconst weaponParameter = parameters.find(p => p.id === 'weapon');\n\t\t\t\tconst targetParameter = parameters.find(p => p.id === 'targets');\n\t\t\t\tif (weaponParameter && targetParameter) {\n\t\t\t\t\tconst itemID = weaponParameter.value as string;\n\t\t\t\t\tconst item = combatant.items.find(i => i.id === itemID);\n\t\t\t\t\tif (item) {\n\t\t\t\t\t\tconst weapon = item.weapon as WeaponModel;\n\t\t\t\t\t\tconst targetIDs = targetParameter.value as string[];\n\t\t\t\t\t\ttargetIDs.forEach(id => {\n\t\t\t\t\t\t\tconst target = EncounterLogic.getCombatant(encounter, id) as CombatantModel;\n\t\t\t\t\t\t\tweapon.damage.forEach(dmg => {\n\t\t\t\t\t\t\t\tconst rank = dmg.rank + rankModifier;\n\t\t\t\t\t\t\t\tconst result = Random.dice(rank);\n\t\t\t\t\t\t\t\tEncounterLogic.log(encounter, `${combatant.name} rolls weapon damage (${dmg.type}) for ${target.name} (rank ${rank}) and gets ${result}`);\n\t\t\t\t\t\t\t\tconst bonus = EncounterLogic.getDamageBonus(encounter, combatant, dmg.type);\n\t\t\t\t\t\t\t\tif (bonus > 0) {\n\t\t\t\t\t\t\t\t\tEncounterLogic.log(encounter, `${combatant.name} deals ${bonus} additional ${dmg.type} damage`);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (bonus < 0) {\n\t\t\t\t\t\t\t\t\tEncounterLogic.log(encounter, `${combatant.name} deals ${bonus} less ${dmg.type} damage`);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tEncounterLogic.damage(encounter, target, result + bonus, dmg.type);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'damage': {\n\t\t\t\tconst data = effect.data as { type: DamageType, rank: number };\n\t\t\t\tif (data.type === DamageType.Any) {\n\t\t\t\t\tdata.type = GameLogic.getRandomDamageType();\n\t\t\t\t}\n\t\t\t\tconst targetParameter = parameters.find(p => p.id === 'targets');\n\t\t\t\tif (targetParameter) {\n\t\t\t\t\tconst targetIDs = targetParameter.value as string[];\n\t\t\t\t\ttargetIDs.forEach(id => {\n\t\t\t\t\t\tconst target = EncounterLogic.getCombatant(encounter, id) as CombatantModel;\n\t\t\t\t\t\tconst result = Random.dice(data.rank);\n\t\t\t\t\t\tEncounterLogic.log(encounter, `${combatant.name} rolls damage for ${target.name} (rank ${data.rank}) and gets ${result}`);\n\t\t\t\t\t\tconst bonus = EncounterLogic.getDamageBonus(encounter, combatant, data.type);\n\t\t\t\t\t\tif (bonus > 0) {\n\t\t\t\t\t\t\tEncounterLogic.log(encounter, `${combatant.name} deals ${bonus} additional ${data.type} damage`);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (bonus < 0) {\n\t\t\t\t\t\t\tEncounterLogic.log(encounter, `${combatant.name} deals ${bonus} less ${data.type} damage`);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tEncounterLogic.damage(encounter, target, result + bonus, data.type);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'wounds': {\n\t\t\t\tconst value = effect.data as number;\n\t\t\t\tconst targetParameter = parameters.find(p => p.id === 'targets');\n\t\t\t\tif (targetParameter) {\n\t\t\t\t\tconst targetIDs = targetParameter.value as string[];\n\t\t\t\t\ttargetIDs.forEach(id => {\n\t\t\t\t\t\tconst target = EncounterLogic.getCombatant(encounter, id) as CombatantModel;\n\t\t\t\t\t\tEncounterLogic.wound(encounter, target, value);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'healdamage': {\n\t\t\t\tconst rank = effect.data as number;\n\t\t\t\tconst targetParameter = parameters.find(p => p.id === 'targets');\n\t\t\t\tif (targetParameter) {\n\t\t\t\t\tconst targetIDs = targetParameter.value as string[];\n\t\t\t\t\ttargetIDs.forEach(id => {\n\t\t\t\t\t\tconst target = EncounterLogic.getCombatant(encounter, id) as CombatantModel;\n\t\t\t\t\t\tconst value = Random.dice(rank);\n\t\t\t\t\t\tEncounterLogic.healDamage(encounter, target, value);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'healwounds': {\n\t\t\t\tconst value = effect.data as number;\n\t\t\t\tconst targetParameter = parameters.find(p => p.id === 'targets');\n\t\t\t\tif (targetParameter) {\n\t\t\t\t\tconst targetIDs = targetParameter.value as string[];\n\t\t\t\t\ttargetIDs.forEach(id => {\n\t\t\t\t\t\tconst target = EncounterLogic.getCombatant(encounter, id) as CombatantModel;\n\t\t\t\t\t\tEncounterLogic.healWounds(encounter, target, value);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'addcondition': {\n\t\t\t\tconst condition = effect.data as ConditionModel;\n\t\t\t\tconst targetParameter = parameters.find(p => p.id === 'targets');\n\t\t\t\tif (targetParameter) {\n\t\t\t\t\tconst targetIDs = targetParameter.value as string[];\n\t\t\t\t\ttargetIDs.forEach(id => {\n\t\t\t\t\t\tconst target = EncounterLogic.getCombatant(encounter, id) as CombatantModel;\n\t\t\t\t\t\tif (target.combat.state !== CombatantState.Dead) {\n\t\t\t\t\t\t\tconst existing = target.combat.conditions\n\t\t\t\t\t\t\t\t.find(c => (c.trait === condition.trait) && (ConditionLogic.getConditionDescription(c) === ConditionLogic.getConditionDescription(condition)));\n\t\t\t\t\t\t\tif (existing) {\n\t\t\t\t\t\t\t\texisting.rank += condition.rank;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tconst copy = JSON.parse(JSON.stringify(condition)) as ConditionModel;\n\t\t\t\t\t\t\t\tcopy.id = Utils.guid();\n\t\t\t\t\t\t\t\ttarget.combat.conditions.push(copy);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tEncounterLogic.log(encounter, `${target.name} is now affected by ${ConditionLogic.getConditionDescription(condition)}, rank ${condition.rank}`);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'removecondition': {\n\t\t\t\tconst trait = effect.data as TraitType;\n\t\t\t\tconst targetParameter = parameters.find(p => p.id === 'targets');\n\t\t\t\tif (targetParameter) {\n\t\t\t\t\tconst targetIDs = targetParameter.value as string[];\n\t\t\t\t\ttargetIDs.forEach(id => {\n\t\t\t\t\t\tconst target = EncounterLogic.getCombatant(encounter, id) as CombatantModel;\n\t\t\t\t\t\tconst t = trait === TraitType.Any ? Collections.draw([ TraitType.Endurance, TraitType.Resolve, TraitType.Speed ]) : trait;\n\t\t\t\t\t\tconst conditions = target.combat.conditions\n\t\t\t\t\t\t\t.filter(condition => condition.trait === t)\n\t\t\t\t\t\t\t.filter(condition => ConditionLogic.getConditionIsBeneficial(condition) === (combatant.faction !== target.faction));\n\t\t\t\t\t\tif (conditions.length !== 0) {\n\t\t\t\t\t\t\tconst maxRank = Math.max(...conditions.map(c => c.rank));\n\t\t\t\t\t\t\tconst condition = conditions.find(c => c.rank === maxRank) as ConditionModel;\n\t\t\t\t\t\t\ttarget.combat.conditions = target.combat.conditions.filter(c => c.id !== condition.id);\n\t\t\t\t\t\t\tEncounterLogic.log(encounter, `${target.name} is no longer affected by ${ConditionLogic.getConditionDescription(condition)}`);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'addMovement': {\n\t\t\t\tconst targetParameter = parameters.find(p => p.id === 'targets');\n\t\t\t\tif (targetParameter) {\n\t\t\t\t\tconst targetIDs = targetParameter.value as string[];\n\t\t\t\t\ttargetIDs.forEach(id => {\n\t\t\t\t\t\tconst target = EncounterLogic.getCombatant(encounter, id) as CombatantModel;\n\t\t\t\t\t\tconst rank = EncounterLogic.getTraitRank(encounter, target, TraitType.Speed);\n\t\t\t\t\t\tconst result = Random.dice(rank);\n\t\t\t\t\t\ttarget.combat.movement += result;\n\t\t\t\t\t\tEncounterLogic.log(encounter, `${target.name} rolls Speed (rank ${rank}) and gets ${result} additional movement`);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'knockdown': {\n\t\t\t\tconst targetParameter = parameters.find(p => p.id === 'targets');\n\t\t\t\tif (targetParameter) {\n\t\t\t\t\tconst targetIDs = targetParameter.value as string[];\n\t\t\t\t\ttargetIDs.forEach(id => {\n\t\t\t\t\t\tconst target = EncounterLogic.getCombatant(encounter, id) as CombatantModel;\n\t\t\t\t\t\tEncounterLogic.goProne(encounter, target);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'stun': {\n\t\t\t\tconst targetParameter = parameters.find(p => p.id === 'targets');\n\t\t\t\tif (targetParameter) {\n\t\t\t\t\tconst targetIDs = targetParameter.value as string[];\n\t\t\t\t\ttargetIDs.forEach(id => {\n\t\t\t\t\t\tconst target = EncounterLogic.getCombatant(encounter, id) as CombatantModel;\n\t\t\t\t\t\tEncounterLogic.stun(encounter, target);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'scan': {\n\t\t\t\tconst targetParameter = parameters.find(p => p.id === 'targets');\n\t\t\t\tif (targetParameter) {\n\t\t\t\t\tconst targetIDs = targetParameter.value as string[];\n\t\t\t\t\ttargetIDs.forEach(id => {\n\t\t\t\t\t\tconst target = EncounterLogic.getCombatant(encounter, id) as CombatantModel;\n\t\t\t\t\t\ttarget.combat.movement += 4;\n\t\t\t\t\t\tEncounterLogic.scan(encounter, target);\n\t\t\t\t\t\tEncounterLogic.log(encounter, `${target.name} scans`);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'hide': {\n\t\t\t\tconst targetParameter = parameters.find(p => p.id === 'targets');\n\t\t\t\tif (targetParameter) {\n\t\t\t\t\tconst targetIDs = targetParameter.value as string[];\n\t\t\t\t\ttargetIDs.forEach(id => {\n\t\t\t\t\t\tconst target = EncounterLogic.getCombatant(encounter, id) as CombatantModel;\n\t\t\t\t\t\ttarget.combat.movement += 4;\n\t\t\t\t\t\tEncounterLogic.hide(encounter, target);\n\t\t\t\t\t\tEncounterLogic.log(encounter, `${target.name} hides`);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'reveal': {\n\t\t\t\tconst targetParameter = parameters.find(p => p.id === 'targets');\n\t\t\t\tif (targetParameter) {\n\t\t\t\t\tconst targetIDs = targetParameter.value as string[];\n\t\t\t\t\ttargetIDs.forEach(id => {\n\t\t\t\t\t\tconst target = EncounterLogic.getCombatant(encounter, id) as CombatantModel;\n\t\t\t\t\t\tEncounterLogic.reveal(encounter, target);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'stand': {\n\t\t\t\tconst targetParameter = parameters.find(p => p.id === 'targets');\n\t\t\t\tif (targetParameter) {\n\t\t\t\t\tconst targetIDs = targetParameter.value as string[];\n\t\t\t\t\ttargetIDs.forEach(id => {\n\t\t\t\t\t\tconst target = EncounterLogic.getCombatant(encounter, id) as CombatantModel;\n\t\t\t\t\t\tEncounterLogic.standUp(encounter, target);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'takeAnotherAction': {\n\t\t\t\t// This only applies to the current combatant\n\t\t\t\tconst redraw = effect.data as boolean;\n\t\t\t\tif (redraw) {\n\t\t\t\t\t// Get a new set of action cards\n\t\t\t\t\tEncounterLogic.drawActions(encounter, combatant);\n\t\t\t\t\tcombatant.combat.selectedAction = null;\n\t\t\t\t} else {\n\t\t\t\t\t// Remove this action card from the set\n\t\t\t\t\tconst currentActionID = combatant.combat.selectedAction ? combatant.combat.selectedAction.action.id : null;\n\t\t\t\t\tif (currentActionID) {\n\t\t\t\t\t\tcombatant.combat.actions = combatant.combat.actions.filter(a => a.id !== currentActionID);\n\t\t\t\t\t}\n\t\t\t\t\tcombatant.combat.selectedAction = null;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'invertConditions': {\n\t\t\t\tconst all = effect.data as boolean;\n\t\t\t\tconst invert = (target: CombatantModel, condition: ConditionModel) => {\n\t\t\t\t\tcondition.type = ConditionLogic.getOppositeType(condition.type);\n\t\t\t\t\tEncounterLogic.log(encounter, `${target.name} is now affected by ${ConditionLogic.getConditionDescription(condition)}`);\n\t\t\t\t};\n\t\t\t\tconst targetParameter = parameters.find(p => p.id === 'targets');\n\t\t\t\tif (targetParameter) {\n\t\t\t\t\tconst targetIDs = targetParameter.value as string[];\n\t\t\t\t\ttargetIDs.forEach(id => {\n\t\t\t\t\t\tconst target = EncounterLogic.getCombatant(encounter, id) as CombatantModel;\n\t\t\t\t\t\tconst conditions = target.combat.conditions.filter(c => (combatant.faction === target.faction) !== ConditionLogic.getConditionIsBeneficial(c));\n\t\t\t\t\t\tif (all) {\n\t\t\t\t\t\t\tconditions.forEach(condition => invert(target, condition));\n\t\t\t\t\t\t} else if (conditions.length > 0) {\n\t\t\t\t\t\t\tconst condition = Collections.draw(conditions);\n\t\t\t\t\t\t\tinvert(target, condition);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'transferCondition': {\n\t\t\t\tconst targetParameter = parameters.find(p => p.id === 'targets');\n\t\t\t\tif (targetParameter) {\n\t\t\t\t\tconst targetIDs = targetParameter.value as string[];\n\t\t\t\t\ttargetIDs.forEach(id => {\n\t\t\t\t\t\tconst target = EncounterLogic.getCombatant(encounter, id) as CombatantModel;\n\t\t\t\t\t\tconst conditions = combatant.combat.conditions.filter(c => (combatant.faction === target.faction) === ConditionLogic.getConditionIsBeneficial(c));\n\t\t\t\t\t\tif (conditions.length > 0) {\n\t\t\t\t\t\t\tconst condition = Collections.draw(conditions);\n\t\t\t\t\t\t\tcombatant.combat.conditions = combatant.combat.conditions.filter(c => c !== condition);\n\t\t\t\t\t\t\tconst copy = JSON.parse(JSON.stringify(condition)) as ConditionModel;\n\t\t\t\t\t\t\ttarget.combat.conditions.push(copy);\n\t\t\t\t\t\t\tEncounterLogic.log(encounter, `${combatant.name} is no longer affected by ${ConditionLogic.getConditionDescription(condition)}`);\n\t\t\t\t\t\t\tEncounterLogic.log(encounter, `${target.name} is now affected by ${ConditionLogic.getConditionDescription(copy)}`);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'commandAction': {\n\t\t\t\tconst targetParameter = parameters.find(p => p.id === 'targets');\n\t\t\t\tif (targetParameter) {\n\t\t\t\t\tconst targetIDs = targetParameter.value as string[];\n\t\t\t\t\ttargetIDs.forEach(id => {\n\t\t\t\t\t\tconst target = EncounterLogic.getCombatant(encounter, id) as CombatantModel;\n\t\t\t\t\t\tEncounterLogic.log(encounter, `${combatant.name} commands ${target.name} to attack`);\n\t\t\t\t\t\ttarget.combat.selectedAction = null;\n\t\t\t\t\t\ttarget.combat.actions = CombatantLogic.getActionDeck(target).filter(action => ActionLogic.getActionType(action) === 'Attack');\n\t\t\t\t\t\ttarget.combat.actions.push(...BaseData.getBaseActions().filter(action => ActionLogic.getActionType(action) === 'Attack'));\n\t\t\t\t\t\tEncounterLogic.checkActionParameters(encounter, target, (combatant.faction !== target.faction));\n\t\t\t\t\t\tconst intents = IntentsLogic.getAttackIntents(encounter, target, (combatant.faction !== target.faction));\n\t\t\t\t\t\tif (intents.length > 0) {\n\t\t\t\t\t\t\ttarget.combat.intents = Collections.draw(intents);\n\t\t\t\t\t\t\tIntentsLogic.performIntents(encounter, target);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tEncounterLogic.log(encounter, `${target.name} cannot attack`);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'commandMove': {\n\t\t\t\tconst targetParameter = parameters.find(p => p.id === 'targets');\n\t\t\t\tif (targetParameter) {\n\t\t\t\t\tconst targetIDs = targetParameter.value as string[];\n\t\t\t\t\ttargetIDs.forEach(id => {\n\t\t\t\t\t\tconst target = EncounterLogic.getCombatant(encounter, id) as CombatantModel;\n\t\t\t\t\t\tEncounterLogic.log(encounter, `${combatant.name} commands ${target.name} to move`);\n\t\t\t\t\t\ttarget.combat.movement = Random.dice(EncounterLogic.getTraitRank(encounter, target, TraitType.Speed));\n\t\t\t\t\t\tconst paths = PathLogic.findPaths(encounter, target);\n\t\t\t\t\t\tconst intents = IntentsLogic.getMovementIntents(encounter, target, paths);\n\t\t\t\t\t\tif (intents.length > 0) {\n\t\t\t\t\t\t\ttarget.combat.intents = Collections.draw(intents);\n\t\t\t\t\t\t\tIntentsLogic.performIntents(encounter, target);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tEncounterLogic.log(encounter, `${target.name} cannot move`);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'forceMovement': {\n\t\t\t\tconst data = effect.data as { type: MovementType, rank: number };\n\t\t\t\tconst targetParameter = parameters.find(p => p.id === 'targets');\n\t\t\t\tif (targetParameter) {\n\t\t\t\t\tconst targetIDs = targetParameter.value as string[];\n\t\t\t\t\ttargetIDs.forEach(id => {\n\t\t\t\t\t\tconst target = EncounterLogic.getCombatant(encounter, id) as CombatantModel;\n\t\t\t\t\t\tswitch (data.type) {\n\t\t\t\t\t\t\tcase MovementType.Pull: {\n\t\t\t\t\t\t\t\tlet origin = combatant.combat.position;\n\t\t\t\t\t\t\t\tconst originParameter = parameters.find(p => p.id === 'origin');\n\t\t\t\t\t\t\t\tif (originParameter && originParameter.value) {\n\t\t\t\t\t\t\t\t\tconst originSquares = originParameter.value as { x: number, y: number }[];\n\t\t\t\t\t\t\t\t\tif (originSquares.length > 0) {\n\t\t\t\t\t\t\t\t\t\torigin = originSquares[0];\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tconst moveDistance = Random.dice(data.rank);\n\t\t\t\t\t\t\t\tfor (let n = 0; n < moveDistance; ++n) {\n\t\t\t\t\t\t\t\t\tconst distance = EncounterMapLogic.getDistance(origin, target.combat.position);\n\t\t\t\t\t\t\t\t\tconst squares = EncounterLogic.getPossibleMoveSquares(encounter, target).filter(square => {\n\t\t\t\t\t\t\t\t\t\treturn EncounterMapLogic.getDistance(origin, square) < distance;\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\tif (squares.length > 0) {\n\t\t\t\t\t\t\t\t\t\tconst square = Collections.draw(squares);\n\t\t\t\t\t\t\t\t\t\ttarget.combat.trail.push({ x: target.combat.position.x, y: target.combat.position.y });\n\t\t\t\t\t\t\t\t\t\ttarget.combat.position.x = square.x;\n\t\t\t\t\t\t\t\t\t\ttarget.combat.position.y = square.y;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tEncounterLogic.log(encounter, `${target.name} has been pulled`);\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tcase MovementType.Push: {\n\t\t\t\t\t\t\t\tlet origin = combatant.combat.position;\n\t\t\t\t\t\t\t\tconst originParameter = parameters.find(p => p.id === 'origin');\n\t\t\t\t\t\t\t\tif (originParameter && originParameter.value) {\n\t\t\t\t\t\t\t\t\tconst originSquares = originParameter.value as { x: number, y: number }[];\n\t\t\t\t\t\t\t\t\tif (originSquares.length > 0) {\n\t\t\t\t\t\t\t\t\t\torigin = originSquares[0];\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tconst moveDistance = Random.dice(data.rank);\n\t\t\t\t\t\t\t\tfor (let n = 0; n < moveDistance; ++n) {\n\t\t\t\t\t\t\t\t\tconst distance = EncounterMapLogic.getDistance(origin, target.combat.position);\n\t\t\t\t\t\t\t\t\tconst squares = EncounterLogic.getPossibleMoveSquares(encounter, target).filter(square => {\n\t\t\t\t\t\t\t\t\t\treturn EncounterMapLogic.getDistance(origin, square) > distance;\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\tif (squares.length > 0) {\n\t\t\t\t\t\t\t\t\t\tconst square = Collections.draw(squares);\n\t\t\t\t\t\t\t\t\t\ttarget.combat.trail.push({ x: target.combat.position.x, y: target.combat.position.y });\n\t\t\t\t\t\t\t\t\t\ttarget.combat.position.x = square.x;\n\t\t\t\t\t\t\t\t\t\ttarget.combat.position.y = square.y;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tEncounterLogic.log(encounter, `${target.name} has been pushed`);\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tcase MovementType.Swap: {\n\t\t\t\t\t\t\t\tconst currentX = combatant.combat.position.x;\n\t\t\t\t\t\t\t\tconst currentY = combatant.combat.position.y;\n\t\t\t\t\t\t\t\tcombatant.combat.position.x = target.combat.position.x;\n\t\t\t\t\t\t\t\tcombatant.combat.position.y = target.combat.position.y;\n\t\t\t\t\t\t\t\ttarget.combat.position.x = currentX;\n\t\t\t\t\t\t\t\ttarget.combat.position.y = currentY;\n\t\t\t\t\t\t\t\tEncounterLogic.log(encounter, `${combatant.name} and ${target.name} have swapped positions`);\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tcase MovementType.TowardsTarget: {\n\t\t\t\t\t\t\t\tconst moveDistance = Random.dice(data.rank);\n\t\t\t\t\t\t\t\tfor (let n = 0; n < moveDistance; ++n) {\n\t\t\t\t\t\t\t\t\tconst distance = EncounterMapLogic.getDistance(combatant.combat.position, target.combat.position);\n\t\t\t\t\t\t\t\t\tconst squares = EncounterLogic.getPossibleMoveSquares(encounter, combatant).filter(square => {\n\t\t\t\t\t\t\t\t\t\treturn EncounterMapLogic.getDistance(target.combat.position, square) < distance;\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\tif (squares.length > 0) {\n\t\t\t\t\t\t\t\t\t\tconst square = Collections.draw(squares);\n\t\t\t\t\t\t\t\t\t\tcombatant.combat.trail.push({ x: combatant.combat.position.x, y: combatant.combat.position.y });\n\t\t\t\t\t\t\t\t\t\tcombatant.combat.position.x = square.x;\n\t\t\t\t\t\t\t\t\t\tcombatant.combat.position.y = square.y;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tEncounterLogic.log(encounter, `${combatant.name} has moved towards ${target.name}`);\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tcase MovementType.BesideTarget: {\n\t\t\t\t\t\t\t\tconst combatantSquares = EncounterLogic.getCombatantSquares(encounter, combatant);\n\t\t\t\t\t\t\t\tconst targetSquares = EncounterLogic.getCombatantSquares(encounter, target);\n\t\t\t\t\t\t\t\tconst targetAdjacentSquares = EncounterMapLogic.getAdjacentSquares(encounter.mapSquares, targetSquares);\n\t\t\t\t\t\t\t\tif (combatantSquares.some(square => targetAdjacentSquares.find(s => (s.x === square.x) && (s.y === square.y)))) {\n\t\t\t\t\t\t\t\t\tEncounterLogic.log(encounter, `${combatant.name} is already beside ${target.name}`);\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tconst candidates = encounter.mapSquares.filter(square => {\n\t\t\t\t\t\t\t\t\t\tconst squares = EncounterLogic.getCombatantSquares(encounter, combatant, square);\n\t\t\t\t\t\t\t\t\t\tconst canMoveHere = squares.every(sq => EncounterLogic.getSquareIsEmpty(encounter, sq, [ combatant ]));\n\t\t\t\t\t\t\t\t\t\tconst wouldBeAdjacent = squares.some(sq => targetAdjacentSquares.find(s => (s.x === sq.x) && (s.y === sq.y)));\n\t\t\t\t\t\t\t\t\t\treturn canMoveHere && wouldBeAdjacent;\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\tif (candidates.length > 0) {\n\t\t\t\t\t\t\t\t\t\tconst square = Collections.draw(candidates);\n\t\t\t\t\t\t\t\t\t\tcombatant.combat.trail.push({ x: target.combat.position.x, y: target.combat.position.y });\n\t\t\t\t\t\t\t\t\t\tcombatant.combat.position.x = square.x;\n\t\t\t\t\t\t\t\t\t\tcombatant.combat.position.y = square.y;\n\t\t\t\t\t\t\t\t\t\tEncounterLogic.log(encounter, `${combatant.name} has moved to ${target.name}`);\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tEncounterLogic.log(encounter, `${combatant.name} can't move to ${target.name}`);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tcase MovementType.Random: {\n\t\t\t\t\t\t\t\tconst moveDistance = Random.dice(data.rank);\n\t\t\t\t\t\t\t\tconst squares = encounter.mapSquares\n\t\t\t\t\t\t\t\t\t.filter(square => EncounterMapLogic.getDistance(target.combat.position, square) <= moveDistance)\n\t\t\t\t\t\t\t\t\t.filter(square => EncounterLogic.getCombatantSquares(encounter, target, square).every(sq => EncounterLogic.getSquareIsEmpty(encounter, sq, [ target ])));\n\t\t\t\t\t\t\t\tif (squares.length > 0) {\n\t\t\t\t\t\t\t\t\tconst square = Collections.draw(squares);\n\t\t\t\t\t\t\t\t\ttarget.combat.trail.push({ x: target.combat.position.x, y: target.combat.position.y });\n\t\t\t\t\t\t\t\t\ttarget.combat.position.x = square.x;\n\t\t\t\t\t\t\t\t\ttarget.combat.position.y = square.y;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tEncounterLogic.log(encounter, `${target.name} has been moved to a random square`);\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'moveSelfTo': {\n\t\t\t\tconst targetParameter = parameters.find(p => p.id === 'targets');\n\t\t\t\tif (targetParameter) {\n\t\t\t\t\tconst targetSquares = targetParameter.value as { x: number, y: number }[];\n\t\t\t\t\tconst candidates = targetSquares.filter(square => {\n\t\t\t\t\t\treturn EncounterLogic.getCombatantSquares(encounter, combatant, square).every(sq => EncounterLogic.getSquareIsEmpty(encounter, sq, [ combatant ]));\n\t\t\t\t\t});\n\t\t\t\t\tif (candidates.length > 0) {\n\t\t\t\t\t\tconst square = Collections.draw(candidates);\n\t\t\t\t\t\tcombatant.combat.trail.push({ x: combatant.combat.position.x, y: combatant.combat.position.y });\n\t\t\t\t\t\tcombatant.combat.position.x = square.x;\n\t\t\t\t\t\tcombatant.combat.position.y = square.y;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tEncounterLogic.log(encounter, `${combatant.name} can't move`);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'disarm': {\n\t\t\t\tconst targetParameter = parameters.find(p => p.id === 'targets');\n\t\t\t\tif (targetParameter) {\n\t\t\t\t\tconst targetIDs = targetParameter.value as string[];\n\t\t\t\t\ttargetIDs.forEach(id => {\n\t\t\t\t\t\tconst target = EncounterLogic.getCombatant(encounter, id) as CombatantModel;\n\t\t\t\t\t\tconst items = target.items.filter(i => i.location === ItemLocationType.Hand);\n\t\t\t\t\t\tif (items.length > 0) {\n\t\t\t\t\t\t\tconst item = Collections.draw(items);\n\t\t\t\t\t\t\ttarget.items = target.items.filter(i => i.id !== item.id);\n\t\t\t\t\t\t\tconst squares = EncounterMapLogic.getAdjacentSquares(encounter.mapSquares, EncounterLogic.getCombatantSquares(encounter, target))\n\t\t\t\t\t\t\t\t.filter(square => EncounterLogic.getSquareIsEmpty(encounter, square));\n\t\t\t\t\t\t\tif (squares.length > 0) {\n\t\t\t\t\t\t\t\tconst square = Collections.draw(squares);\n\t\t\t\t\t\t\t\tconst loot = Factory.createLootPile();\n\t\t\t\t\t\t\t\tloot.items.push(item);\n\t\t\t\t\t\t\t\tloot.position.x = square.x;\n\t\t\t\t\t\t\t\tloot.position.y = square.y;\n\t\t\t\t\t\t\t\tencounter.loot.push(loot);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tEncounterLogic.log(encounter, `${target.name} has lost ${item.name}`);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tEncounterLogic.log(encounter, `${target.name} is not holding anything`);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'steal': {\n\t\t\t\tconst targetParameter = parameters.find(p => p.id === 'targets');\n\t\t\t\tif (targetParameter) {\n\t\t\t\t\tconst targetIDs = targetParameter.value as string[];\n\t\t\t\t\ttargetIDs.forEach(id => {\n\t\t\t\t\t\tconst target = EncounterLogic.getCombatant(encounter, id) as CombatantModel;\n\t\t\t\t\t\tconst items = ([] as ItemModel[]).concat(target.items).concat(target.carried);\n\t\t\t\t\t\tif (items.length > 0) {\n\t\t\t\t\t\t\tconst item = Collections.draw(items);\n\t\t\t\t\t\t\ttarget.items = target.items.filter(i => i.id !== item.id);\n\t\t\t\t\t\t\ttarget.carried = target.carried.filter(i => i.id !== item.id);\n\t\t\t\t\t\t\tcombatant.carried.push(item);\n\t\t\t\t\t\t\tEncounterLogic.log(encounter, `${combatant.name} has stolen ${item.name} from ${target.name}`);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'createTerrain': {\n\t\t\t\tconst type = effect.data as EncounterMapSquareType;\n\t\t\t\tconst targetParameter = parameters.find(p => p.id === 'targets');\n\t\t\t\tif (targetParameter) {\n\t\t\t\t\tconst squares = targetParameter.value as { x: number, y: number }[];\n\t\t\t\t\tsquares.forEach(square => {\n\t\t\t\t\t\tconst blob = EncounterMapLogic.getFloorBlob(encounter.mapSquares, square);\n\t\t\t\t\t\tblob.forEach(sq => sq.type = type);\n\t\t\t\t\t});\n\t\t\t\t\tEncounterLogic.log(encounter, `${combatant.name} has created an area of ${type.toLowerCase()} terrain`);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'addSquares': {\n\t\t\t\tconst targetParameter = parameters.find(p => p.id === 'targets');\n\t\t\t\tif (targetParameter) {\n\t\t\t\t\tconst walls = targetParameter.value as { x: number, y: number }[];\n\t\t\t\t\twalls.forEach(wall => {\n\t\t\t\t\t\tconst blob = EncounterMapLogic.getWallBlob(encounter.mapSquares, wall);\n\t\t\t\t\t\tblob.forEach(sq => {\n\t\t\t\t\t\t\tconst square: EncounterMapSquareModel = {\n\t\t\t\t\t\t\t\tx: sq.x,\n\t\t\t\t\t\t\t\ty: sq.y,\n\t\t\t\t\t\t\t\ttype: EncounterMapSquareType.Clear\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tencounter.mapSquares.push(square);\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t\tEncounterMapLogic.visibilityCache.reset();\n\t\t\t\t\tEncounterLogic.log(encounter, `${combatant.name} has created map squares`);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'removeSquares': {\n\t\t\t\tconst targetParameter = parameters.find(p => p.id === 'targets');\n\t\t\t\tif (targetParameter) {\n\t\t\t\t\tconst squares = targetParameter.value as { x: number, y: number }[];\n\t\t\t\t\tsquares.forEach(square => {\n\t\t\t\t\t\tconst blob = EncounterMapLogic.getFloorBlob(encounter.mapSquares, square).filter(sq => EncounterLogic.getSquareIsEmpty(encounter, sq));\n\t\t\t\t\t\tencounter.mapSquares = encounter.mapSquares.filter(sq => !blob.includes(sq));\n\t\t\t\t\t});\n\t\t\t\t\tEncounterMapLogic.visibilityCache.reset();\n\t\t\t\t\tEncounterLogic.log(encounter, `${combatant.name} has destroyed map squares`);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'destroyWalls': {\n\t\t\t\tconst targetParameter = parameters.find(p => p.id === 'targets');\n\t\t\t\tif (targetParameter) {\n\t\t\t\t\tconst walls = targetParameter.value as { x: number, y: number }[];\n\t\t\t\t\twalls.forEach(wall => {\n\t\t\t\t\t\tconst square: EncounterMapSquareModel = {\n\t\t\t\t\t\t\tx: wall.x,\n\t\t\t\t\t\t\ty: wall.y,\n\t\t\t\t\t\t\ttype: EncounterMapSquareType.Obstructed\n\t\t\t\t\t\t};\n\t\t\t\t\t\tencounter.mapSquares.push(square);\n\t\t\t\t\t});\n\t\t\t\t\tEncounterMapLogic.visibilityCache.reset();\n\t\t\t\t\tEncounterLogic.log(encounter, `${combatant.name} has destroyed walls`);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'createPotion': {\n\t\t\t\tconst potionID = effect.data as string;\n\t\t\t\tconst targetParameter = parameters.find(p => p.id === 'targets');\n\t\t\t\tif (targetParameter) {\n\t\t\t\t\tconst targetIDs = targetParameter.value as string[];\n\t\t\t\t\ttargetIDs.forEach(id => {\n\t\t\t\t\t\tconst target = EncounterLogic.getCombatant(encounter, id) as CombatantModel;\n\t\t\t\t\t\tconst potion = GameLogic.getPotion(potionID) as ItemModel;\n\t\t\t\t\t\tconst copy = JSON.parse(JSON.stringify(potion)) as ItemModel;\n\t\t\t\t\t\tcopy.id = Utils.guid();\n\t\t\t\t\t\ttarget.carried.push(copy);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'summon': {\n\t\t\t\tconst type = effect.data as SummonType;\n\t\t\t\tconst list = [];\n\t\t\t\tswitch (type) {\n\t\t\t\t\tcase SummonType.Undead: {\n\t\t\t\t\t\tlist.push(...MonsterSpeciesData.getList().filter(s => s.quirks.includes(QuirkType.Undead)).map(s => s.id));\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tcase SummonType.Beast: {\n\t\t\t\t\t\tlist.push(...MonsterSpeciesData.getList().filter(s => s.quirks.includes(QuirkType.Beast)).map(s => s.id));\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tcase SummonType.Elemental: {\n\t\t\t\t\t\tlist.push(...MonsterSpeciesData.getList().filter(s => s.name.toLowerCase().includes('elemental')).map(s => s.id));\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (list.length > 0) {\n\t\t\t\t\tconst speciesID = Collections.draw(list);\n\t\t\t\t\tconst monster = Factory.createCombatant(CombatantType.Monster);\n\t\t\t\t\tCombatantLogic.applyCombatantCards(monster, speciesID, '', '');\n\t\t\t\t\tCombatantLogic.makeFeatureChoices(monster);\n\t\t\t\t\tCombatantLogic.addItems(monster, []);\n\n\t\t\t\t\twhile (monster.level < combatant.level) {\n\t\t\t\t\t\tconst featureDeck = CombatantLogic.getFeatureDeck(monster).filter(f => f.type !== FeatureType.Proficiency);\n\t\t\t\t\t\tCombatantLogic.incrementCombatantLevel(monster, Collections.draw(featureDeck), []);\n\t\t\t\t\t\tCombatantLogic.makeFeatureChoices(monster);\n\t\t\t\t\t}\n\n\t\t\t\t\tmonster.faction = combatant.faction;\n\t\t\t\t\tmonster.quirks.push(QuirkType.Drone);\n\t\t\t\t\tCombatantLogic.resetCombatant(monster);\n\t\t\t\t\tencounter.combatants.push(monster);\n\t\t\t\t\tEncounterGenerator.placeCombatants(encounter, Math.random);\n\t\t\t\t\tEncounterLogic.log(encounter, `${combatant.name} has summoned ${monster.name}`);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t};\n}\n\nexport class ActionLogic {\n\tstatic getActionType = (action: ActionModel) => {\n\t\treturn action.effects.some(e => e.id === 'attack') ? 'Attack' : 'Utility';\n\t};\n\n\tstatic getActionSpeed = (action: ActionModel) => {\n\t\treturn action.effects.some(e => e.id === 'takeAnotherAction') ? 'Quick' : 'Full';\n\t};\n\n\tstatic getActionDescription = (action: ActionModel) => {\n\t\treturn action.name;\n\t};\n\n\tstatic getParameterDescription = (parameter: ActionParameterModel) => {\n\t\tswitch (parameter.id) {\n\t\t\tcase 'origin': {\n\t\t\t\tconst originParam = parameter as ActionOriginParameterModel;\n\t\t\t\tif (originParam.distance === 'weapon') {\n\t\t\t\t\treturn 'Origin: within weapon range';\n\t\t\t\t}\n\t\t\t\treturn `Origin: within ${originParam.distance} squares`;\n\t\t\t}\n\t\t\tcase 'weapon': {\n\t\t\t\tconst weaponParam = parameter as ActionWeaponParameterModel;\n\t\t\t\treturn `Uses weapon: ${weaponParam.type}`;\n\t\t\t}\n\t\t\tcase 'targets': {\n\t\t\t\tconst targetParam = parameter as ActionTargetParameterModel;\n\t\t\t\treturn `Target(s): ${ActionLogic.getTargetDescription(targetParam)}`;\n\t\t\t}\n\t\t}\n\n\t\treturn '';\n\t};\n\n\tstatic getTargetDescription = (target: ActionTargetParameterModel): string => {\n\t\tlet count = '';\n\t\tlet type = '';\n\t\tif (target.targets) {\n\t\t\tlet plural = false;\n\n\t\t\tif (target.targets.count === 1) {\n\t\t\t\tcount = 'one';\n\t\t\t} else if (target.targets.count === Number.MAX_VALUE) {\n\t\t\t\tcount = 'all';\n\t\t\t\tplural = true;\n\t\t\t} else {\n\t\t\t\tcount = `up to ${target.targets.count}`;\n\t\t\t\tplural = true;\n\t\t\t}\n\n\t\t\tswitch (target.targets.type) {\n\t\t\t\tcase ActionTargetType.Combatants:\n\t\t\t\t\ttype = plural ? 'combatants' : 'combatant';\n\t\t\t\t\tbreak;\n\t\t\t\tcase ActionTargetType.Enemies:\n\t\t\t\t\ttype = plural ? 'enemies' : 'enemy';\n\t\t\t\t\tbreak;\n\t\t\t\tcase ActionTargetType.Allies:\n\t\t\t\t\ttype = plural ? 'allies' : 'ally';\n\t\t\t\t\tbreak;\n\t\t\t\tcase ActionTargetType.Squares:\n\t\t\t\t\ttype = plural ? 'squares' : 'square';\n\t\t\t\t\tbreak;\n\t\t\t\tcase ActionTargetType.Walls:\n\t\t\t\t\ttype = plural ? 'walls' : 'wall';\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tlet str = '';\n\t\tswitch (target.range.type) {\n\t\t\tcase ActionRangeType.Self:\n\t\t\t\tstr = 'self';\n\t\t\t\tbreak;\n\t\t\tcase ActionRangeType.Adjacent:\n\t\t\t\tstr = `${count} adjacent ${type}`;\n\t\t\t\tbreak;\n\t\t\tcase ActionRangeType.Burst:\n\t\t\t\tstr = `${count} ${type} within ${target.range.radius} squares`;\n\t\t\t\tbreak;\n\t\t\tcase ActionRangeType.Weapon:\n\t\t\t\tif (target.range.radius > 0) {\n\t\t\t\t\tstr = `${count} ${type} within weapon range +${target.range.radius}`;\n\t\t\t\t} else {\n\t\t\t\t\tstr = `${count} ${type} within weapon range`;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn str;\n\t};\n\n\tstatic getActionRange = (action: ActionModel, combatant: CombatantModel) => {\n\t\tlet range = 0;\n\n\t\taction.parameters.forEach(param => {\n\t\t\tif (param.id === 'targets') {\n\t\t\t\tconst targetParam = param as ActionTargetParameterModel;\n\t\t\t\tswitch (targetParam.range.type) {\n\t\t\t\t\tcase ActionRangeType.Self: {\n\t\t\t\t\t\trange = 0;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tcase ActionRangeType.Adjacent: {\n\t\t\t\t\t\trange = 1;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tcase ActionRangeType.Burst: {\n\t\t\t\t\t\trange = targetParam.range.radius;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tcase ActionRangeType.Weapon: {\n\t\t\t\t\t\tconst wpnParam = action.parameters.find(p => p.id === 'weapon') as ActionWeaponParameterModel;\n\t\t\t\t\t\tif (wpnParam && (wpnParam.value !== null)) {\n\t\t\t\t\t\t\tconst itemID = wpnParam.value as string;\n\t\t\t\t\t\t\tconst item = combatant.items.find(i => i.id === itemID);\n\t\t\t\t\t\t\tif (item && item.weapon) {\n\t\t\t\t\t\t\t\trange = item.weapon.range + targetParam.range.radius;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn range;\n\t};\n\n\tstatic checkWeaponParameter = (parameter: ActionWeaponParameterModel, combatant: CombatantModel) => {\n\t\tconst candidates: string[] = [];\n\t\tlet value = parameter.value as string | null;\n\n\t\tconst proficiencies: ItemProficiencyType[] = [];\n\t\tswitch (parameter.type) {\n\t\t\tcase 'melee':\n\t\t\t\tproficiencies.push(ItemProficiencyType.LargeWeapons);\n\t\t\t\tproficiencies.push(ItemProficiencyType.PairedWeapons);\n\t\t\t\tproficiencies.push(ItemProficiencyType.MilitaryWeapons);\n\t\t\t\tbreak;\n\t\t\tcase 'ranged':\n\t\t\t\tproficiencies.push(ItemProficiencyType.RangedWeapons);\n\t\t\t\tproficiencies.push(ItemProficiencyType.PowderWeapons);\n\t\t\t\tbreak;\n\t\t}\n\n\t\tcombatant.items\n\t\t\t.filter(i => proficiencies.includes(i.proficiency))\n\t\t\t.forEach(i => candidates.push(i.id));\n\n\t\tif ((value === null) || !candidates.includes(value)) {\n\t\t\tif (candidates.length > 0) {\n\t\t\t\tvalue = candidates[0];\n\t\t\t} else {\n\t\t\t\tvalue = null;\n\t\t\t}\n\t\t}\n\n\t\tparameter.candidates = candidates;\n\t\tparameter.value = value;\n\t};\n\n\tstatic checkOriginParameter = (parameter: ActionOriginParameterModel, encounter: EncounterModel, combatant: CombatantModel, action: ActionModel) => {\n\t\tconst candidates: { x: number, y: number }[] = [];\n\t\tlet value = parameter.value as { x: number, y: number }[];\n\n\t\tlet radius = 0;\n\t\tif (parameter.distance === 'weapon') {\n\t\t\tconst wpnParam = action.parameters.find(p => p.id === 'weapon') as ActionWeaponParameterModel;\n\t\t\tif (wpnParam && (wpnParam.value !== null)) {\n\t\t\t\tconst itemID = wpnParam.value as string;\n\t\t\t\tconst item = combatant.items.find(i => i.id === itemID);\n\t\t\t\tif (item && item.weapon) {\n\t\t\t\t\tradius = item.weapon.range;\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tradius = parameter.distance;\n\t\t}\n\n\t\tconst edges = EncounterMapLogic.getMapEdges(encounter.mapSquares);\n\t\tconst originSquares = EncounterLogic.getCombatantSquares(encounter, combatant);\n\t\tcandidates.push(\n\t\t\t...EncounterLogic.findSquares(encounter, EncounterLogic.getCombatantSquares(encounter, combatant), radius)\n\t\t\t\t.filter(sq => EncounterMapLogic.canSeeAny(edges, originSquares, [ sq ]))\n\t\t);\n\t\tif ((value === null) || (value.length === 0) || value.some(v => !candidates.includes(v))) {\n\t\t\tif (candidates.length > 0) {\n\t\t\t\tvalue = [ candidates[0] ];\n\t\t\t} else {\n\t\t\t\tvalue = [];\n\t\t\t}\n\t\t}\n\n\t\tparameter.candidates = candidates;\n\t\tparameter.value = value;\n\t};\n\n\tstatic checkTargetParameter = (parameter: ActionTargetParameterModel, encounter: EncounterModel, combatant: CombatantModel, action: ActionModel, invertTargets: boolean) => {\n\t\tconst candidates: (string | { x: number, y: number })[] = [];\n\t\tlet value = parameter.value as (string | { x: number, y: number })[] ?? [];\n\n\t\tif (parameter.range.type === ActionRangeType.Self) {\n\t\t\tcandidates.push(combatant.id);\n\t\t\tvalue = [ combatant.id ];\n\t\t} else {\n\t\t\tconst radius = ActionLogic.getActionRange(action, combatant);\n\n\t\t\tlet originSquares = EncounterLogic.getCombatantSquares(encounter, combatant);\n\t\t\tconst originParam = action.parameters.find(p => p.id === 'origin');\n\t\t\tif (originParam) {\n\t\t\t\toriginSquares = originParam.value as { x: number, y: number }[];\n\t\t\t}\n\n\t\t\tif (parameter.targets) {\n\t\t\t\tconst edges = EncounterMapLogic.getMapEdges(encounter.mapSquares);\n\t\t\t\tswitch (parameter.targets.type) {\n\t\t\t\t\tcase ActionTargetType.Combatants:\n\t\t\t\t\t\tcandidates.push(\n\t\t\t\t\t\t\t...EncounterLogic.findCombatants(encounter, originSquares, radius)\n\t\t\t\t\t\t\t\t.filter(c => c.id !== combatant.id)\n\t\t\t\t\t\t\t\t.filter(c => c.combat.state !== CombatantState.Dead)\n\t\t\t\t\t\t\t\t.filter(c => combatant.combat.senses >= c.combat.hidden)\n\t\t\t\t\t\t\t\t.filter(c => EncounterMapLogic.canSeeAny(edges, originSquares, EncounterLogic.getCombatantSquares(encounter, c)))\n\t\t\t\t\t\t\t\t.sort((a, b) => {\n\t\t\t\t\t\t\t\t\tconst squaresCombatant = EncounterLogic.getCombatantSquares(encounter, combatant);\n\t\t\t\t\t\t\t\t\tconst squaresA = EncounterLogic.getCombatantSquares(encounter, a);\n\t\t\t\t\t\t\t\t\tconst squaresB = EncounterLogic.getCombatantSquares(encounter, b);\n\t\t\t\t\t\t\t\t\tconst distanceA = EncounterMapLogic.getDistanceAny(squaresA, squaresCombatant);\n\t\t\t\t\t\t\t\t\tconst distanceB = EncounterMapLogic.getDistanceAny(squaresB, squaresCombatant);\n\t\t\t\t\t\t\t\t\treturn distanceA - distanceB;\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.map(c => c.id)\n\t\t\t\t\t\t);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase ActionTargetType.Enemies:\n\t\t\t\t\t\tcandidates.push(\n\t\t\t\t\t\t\t...EncounterLogic.findCombatants(encounter, originSquares, radius)\n\t\t\t\t\t\t\t\t.filter(c => c.id !== combatant.id)\n\t\t\t\t\t\t\t\t.filter(c => c.combat.state !== CombatantState.Dead)\n\t\t\t\t\t\t\t\t.filter(c => combatant.combat.senses >= c.combat.hidden)\n\t\t\t\t\t\t\t\t.filter(c => invertTargets ? (c.faction === combatant.faction) : (c.faction !== combatant.faction))\n\t\t\t\t\t\t\t\t.filter(c => EncounterMapLogic.canSeeAny(edges, originSquares, EncounterLogic.getCombatantSquares(encounter, c)))\n\t\t\t\t\t\t\t\t.sort((a, b) => {\n\t\t\t\t\t\t\t\t\tconst squaresCombatant = EncounterLogic.getCombatantSquares(encounter, combatant);\n\t\t\t\t\t\t\t\t\tconst squaresA = EncounterLogic.getCombatantSquares(encounter, a);\n\t\t\t\t\t\t\t\t\tconst squaresB = EncounterLogic.getCombatantSquares(encounter, b);\n\t\t\t\t\t\t\t\t\tconst distanceA = EncounterMapLogic.getDistanceAny(squaresA, squaresCombatant);\n\t\t\t\t\t\t\t\t\tconst distanceB = EncounterMapLogic.getDistanceAny(squaresB, squaresCombatant);\n\t\t\t\t\t\t\t\t\treturn distanceA - distanceB;\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.map(c => c.id)\n\t\t\t\t\t\t);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase ActionTargetType.Allies:\n\t\t\t\t\t\tcandidates.push(\n\t\t\t\t\t\t\t...EncounterLogic.findCombatants(encounter, originSquares, radius)\n\t\t\t\t\t\t\t\t.filter(c => c.id !== combatant.id)\n\t\t\t\t\t\t\t\t.filter(c => c.combat.state !== CombatantState.Dead)\n\t\t\t\t\t\t\t\t.filter(c => invertTargets ? (c.faction !== combatant.faction) : (c.faction === combatant.faction))\n\t\t\t\t\t\t\t\t.filter(c => EncounterMapLogic.canSeeAny(edges, originSquares, EncounterLogic.getCombatantSquares(encounter, c)))\n\t\t\t\t\t\t\t\t.sort((a, b) => {\n\t\t\t\t\t\t\t\t\tconst squaresCombatant = EncounterLogic.getCombatantSquares(encounter, combatant);\n\t\t\t\t\t\t\t\t\tconst squaresA = EncounterLogic.getCombatantSquares(encounter, a);\n\t\t\t\t\t\t\t\t\tconst squaresB = EncounterLogic.getCombatantSquares(encounter, b);\n\t\t\t\t\t\t\t\t\tconst distanceA = EncounterMapLogic.getDistanceAny(squaresA, squaresCombatant);\n\t\t\t\t\t\t\t\t\tconst distanceB = EncounterMapLogic.getDistanceAny(squaresB, squaresCombatant);\n\t\t\t\t\t\t\t\t\treturn distanceA - distanceB;\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.map(c => c.id)\n\t\t\t\t\t\t);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase ActionTargetType.Squares:\n\t\t\t\t\t\tcandidates.push(\n\t\t\t\t\t\t\t...EncounterLogic.findSquares(encounter, originSquares, radius)\n\t\t\t\t\t\t\t\t.filter(sq => EncounterMapLogic.canSeeAny(edges, originSquares, [ sq ]))\n\t\t\t\t\t\t\t\t.sort((a, b) => {\n\t\t\t\t\t\t\t\t\tconst distanceA = EncounterMapLogic.getDistance(a, combatant.combat.position);\n\t\t\t\t\t\t\t\t\tconst distanceB = EncounterMapLogic.getDistance(b, combatant.combat.position);\n\t\t\t\t\t\t\t\t\treturn distanceA - distanceB;\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase ActionTargetType.Walls:\n\t\t\t\t\t\tcandidates.push(\n\t\t\t\t\t\t\t...EncounterLogic.findWalls(encounter, originSquares, radius)\n\t\t\t\t\t\t\t\t.sort((a, b) => {\n\t\t\t\t\t\t\t\t\tconst distanceA = EncounterMapLogic.getDistance(a, combatant.combat.position);\n\t\t\t\t\t\t\t\t\tconst distanceB = EncounterMapLogic.getDistance(b, combatant.combat.position);\n\t\t\t\t\t\t\t\t\treturn distanceA - distanceB;\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t);\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tif (parameter.targets.count === Number.MAX_VALUE) {\n\t\t\t\t\tvalue = [ ...candidates ];\n\t\t\t\t} else {\n\t\t\t\t\tif ((value.length === 0) || value.some(v => !candidates.includes(v))) {\n\t\t\t\t\t\tvalue = [ ...candidates.slice(0, parameter.targets.count) ];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tparameter.candidates = candidates;\n\t\tparameter.value = value;\n\t};\n}\n","import { PackData } from './pack-data';\n\nimport { DamageCategoryType } from '../enums/damage-category-type';\nimport { ItemLocationType } from '../enums/item-location-type';\nimport { ItemProficiencyType } from '../enums/item-proficiency-type';\nimport { SkillCategoryType } from '../enums/skill-category-type';\nimport { TraitType } from '../enums/trait-type';\n\nimport { ActionEffects } from '../logic/action-logic';\nimport { ConditionLogic } from '../logic/condition-logic';\n\nimport type { ItemModel } from '../models/item';\n\nimport { Collections } from '../utils/collections';\n\nexport class PotionData {\n\tstatic aptitude = (): ItemModel => ({\n\t\tid: 'potion-aptitude',\n\t\tname: 'Tonic of Aptitude',\n\t\tpackID: PackData.potions().id,\n\t\tdescription: 'A glass vial filled with a viscous orange liquid.',\n\t\tbaseItem: '',\n\t\tmagic: false,\n\t\tproficiency: ItemProficiencyType.None,\n\t\tlocation: ItemLocationType.None,\n\t\tslots: 1,\n\t\tweapon: null,\n\t\tarmor: null,\n\t\tpotion: {\n\t\t\teffects: [\n\t\t\t\tActionEffects.addCondition(ConditionLogic.createSkillCategoryBonusCondition(TraitType.Resolve, 8, SkillCategoryType.Physical))\n\t\t\t]\n\t\t},\n\t\tfeatures: [],\n\t\tactions: []\n\t});\n\n\tstatic brilliance = (): ItemModel => ({\n\t\tid: 'potion-brilliance',\n\t\tname: 'Tincture of Brilliance',\n\t\tpackID: PackData.potions().id,\n\t\tdescription: 'A glass vial filled with a still purple liquid.',\n\t\tbaseItem: '',\n\t\tmagic: false,\n\t\tproficiency: ItemProficiencyType.None,\n\t\tlocation: ItemLocationType.None,\n\t\tslots: 1,\n\t\tweapon: null,\n\t\tarmor: null,\n\t\tpotion: {\n\t\t\teffects: [\n\t\t\t\tActionEffects.addCondition(ConditionLogic.createSkillCategoryBonusCondition(TraitType.Resolve, 8, SkillCategoryType.Mental))\n\t\t\t]\n\t\t},\n\t\tfeatures: [],\n\t\tactions: []\n\t});\n\n\tstatic health = (): ItemModel => ({\n\t\tid: 'potion-health',\n\t\tname: 'Potion of Health',\n\t\tpackID: PackData.potions().id,\n\t\tdescription: 'A glass vial filled with a sparkling red liquid.',\n\t\tbaseItem: '',\n\t\tmagic: false,\n\t\tproficiency: ItemProficiencyType.None,\n\t\tlocation: ItemLocationType.None,\n\t\tslots: 1,\n\t\tweapon: null,\n\t\tarmor: null,\n\t\tpotion: {\n\t\t\teffects: [\n\t\t\t\tActionEffects.healWounds(1)\n\t\t\t]\n\t\t},\n\t\tfeatures: [],\n\t\tactions: []\n\t});\n\n\tstatic luck = (): ItemModel => ({\n\t\tid: 'potion-luck',\n\t\tname: 'Philtre of Luck',\n\t\tpackID: PackData.potions().id,\n\t\tdescription: 'A glass vial filled with a scintillating green liquid.',\n\t\tbaseItem: '',\n\t\tmagic: false,\n\t\tproficiency: ItemProficiencyType.None,\n\t\tlocation: ItemLocationType.None,\n\t\tslots: 1,\n\t\tweapon: null,\n\t\tarmor: null,\n\t\tpotion: {\n\t\t\teffects: [\n\t\t\t\tActionEffects.addCondition(ConditionLogic.createSkillCategoryBonusCondition(TraitType.Resolve, 3, SkillCategoryType.Mental)),\n\t\t\t\tActionEffects.addCondition(ConditionLogic.createSkillCategoryBonusCondition(TraitType.Resolve, 3, SkillCategoryType.Physical)),\n\t\t\t\tActionEffects.addCondition(ConditionLogic.createTraitBonusCondition(TraitType.Resolve, 2, TraitType.Endurance)),\n\t\t\t\tActionEffects.addCondition(ConditionLogic.createTraitBonusCondition(TraitType.Resolve, 2, TraitType.Resolve)),\n\t\t\t\tActionEffects.addCondition(ConditionLogic.createTraitBonusCondition(TraitType.Resolve, 2, TraitType.Speed))\n\t\t\t]\n\t\t},\n\t\tfeatures: [],\n\t\tactions: []\n\t});\n\n\tstatic might = (): ItemModel => ({\n\t\tid: 'potion-might',\n\t\tname: 'Elixir of Might',\n\t\tpackID: PackData.potions().id,\n\t\tdescription: 'A glass vial filled with an effervescent blue liquid.',\n\t\tbaseItem: '',\n\t\tmagic: false,\n\t\tproficiency: ItemProficiencyType.None,\n\t\tlocation: ItemLocationType.None,\n\t\tslots: 1,\n\t\tweapon: null,\n\t\tarmor: null,\n\t\tpotion: {\n\t\t\teffects: [\n\t\t\t\tActionEffects.addCondition(ConditionLogic.createDamageCategoryBonusCondition(TraitType.Resolve, 5, DamageCategoryType.Physical)),\n\t\t\t\tActionEffects.addCondition(ConditionLogic.createDamageCategoryBonusCondition(TraitType.Resolve, 5, DamageCategoryType.Energy)),\n\t\t\t\tActionEffects.addCondition(ConditionLogic.createDamageCategoryBonusCondition(TraitType.Resolve, 5, DamageCategoryType.Corruption))\n\t\t\t]\n\t\t},\n\t\tfeatures: [],\n\t\tactions: []\n\t});\n\n\tstatic resistance = (): ItemModel => ({\n\t\tid: 'potion-resistance',\n\t\tname: 'Potion of Resistance',\n\t\tpackID: PackData.potions().id,\n\t\tdescription: 'A glass vial filled with an iridescent yellow liquid.',\n\t\tbaseItem: '',\n\t\tmagic: false,\n\t\tproficiency: ItemProficiencyType.None,\n\t\tlocation: ItemLocationType.None,\n\t\tslots: 1,\n\t\tweapon: null,\n\t\tarmor: null,\n\t\tpotion: {\n\t\t\teffects: [\n\t\t\t\tActionEffects.addCondition(ConditionLogic.createDamageCategoryResistanceCondition(TraitType.Resolve, 5, DamageCategoryType.Physical)),\n\t\t\t\tActionEffects.addCondition(ConditionLogic.createDamageCategoryResistanceCondition(TraitType.Resolve, 5, DamageCategoryType.Energy)),\n\t\t\t\tActionEffects.addCondition(ConditionLogic.createDamageCategoryResistanceCondition(TraitType.Resolve, 5, DamageCategoryType.Corruption))\n\t\t\t]\n\t\t},\n\t\tfeatures: [],\n\t\tactions: []\n\t});\n\n\tstatic strength = (): ItemModel => ({\n\t\tid: 'potion-strength',\n\t\tname: 'Brew of Strength',\n\t\tpackID: PackData.potions().id,\n\t\tdescription: 'A glass vial filled with a vaprous brown liquid.',\n\t\tbaseItem: '',\n\t\tmagic: false,\n\t\tproficiency: ItemProficiencyType.None,\n\t\tlocation: ItemLocationType.None,\n\t\tslots: 1,\n\t\tweapon: null,\n\t\tarmor: null,\n\t\tpotion: {\n\t\t\teffects: [\n\t\t\t\tActionEffects.addCondition(ConditionLogic.createTraitBonusCondition(TraitType.Resolve, 5, TraitType.Endurance))\n\t\t\t]\n\t\t},\n\t\tfeatures: [],\n\t\tactions: []\n\t});\n\n\tstatic will = (): ItemModel => ({\n\t\tid: 'potion-will',\n\t\tname: 'Brew of Will',\n\t\tpackID: PackData.potions().id,\n\t\tdescription: 'A glass vial filled with a bubbling black liquid.',\n\t\tbaseItem: '',\n\t\tmagic: false,\n\t\tproficiency: ItemProficiencyType.None,\n\t\tlocation: ItemLocationType.None,\n\t\tslots: 1,\n\t\tweapon: null,\n\t\tarmor: null,\n\t\tpotion: {\n\t\t\teffects: [\n\t\t\t\tActionEffects.addCondition(ConditionLogic.createTraitBonusCondition(TraitType.Resolve, 5, TraitType.Resolve))\n\t\t\t]\n\t\t},\n\t\tfeatures: [],\n\t\tactions: []\n\t});\n\n\tstatic quickness = (): ItemModel => ({\n\t\tid: 'potion-quickness',\n\t\tname: 'Brew of Quickness',\n\t\tpackID: PackData.potions().id,\n\t\tdescription: 'A glass vial filled with a churning pink liquid.',\n\t\tbaseItem: '',\n\t\tmagic: false,\n\t\tproficiency: ItemProficiencyType.None,\n\t\tlocation: ItemLocationType.None,\n\t\tslots: 1,\n\t\tweapon: null,\n\t\tarmor: null,\n\t\tpotion: {\n\t\t\teffects: [\n\t\t\t\tActionEffects.addCondition(ConditionLogic.createTraitBonusCondition(TraitType.Resolve, 5, TraitType.Speed))\n\t\t\t]\n\t\t},\n\t\tfeatures: [],\n\t\tactions: []\n\t});\n\n\tstatic getList = (): ItemModel[] => {\n\t\tconst list: ItemModel[] = [\n\t\t\tPotionData.aptitude(),\n\t\t\tPotionData.brilliance(),\n\t\t\tPotionData.health(),\n\t\t\tPotionData.luck(),\n\t\t\tPotionData.might(),\n\t\t\tPotionData.resistance(),\n\t\t\tPotionData.strength(),\n\t\t\tPotionData.will(),\n\t\t\tPotionData.quickness()\n\t\t];\n\n\t\treturn Collections.sort(list, n => n.name);\n\t};\n}\n","import { PackData } from './pack-data';\nimport { PotionData } from './potion-data';\n\nimport { ActionTargetType } from '../enums/action-target-type';\nimport { ConditionType } from '../enums/condition-type';\nimport { DamageCategoryType } from '../enums/damage-category-type';\nimport { DamageType } from '../enums/damage-type';\nimport { ItemProficiencyType } from '../enums/item-proficiency-type';\nimport { MovementType } from '../enums/movement-type';\nimport { SkillCategoryType } from '../enums/skill-category-type';\nimport { SkillType } from '../enums/skill-type';\nimport { TraitType } from '../enums/trait-type';\n\nimport { ActionEffects, ActionOriginParameters, ActionPrerequisites, ActionTargetParameters } from '../logic/action-logic';\nimport { ConditionLogic } from '../logic/condition-logic';\nimport { FeatureLogic } from '../logic/feature-logic';\n\nimport type { BackgroundModel } from '../models/background';\n\nimport { Collections } from '../utils/collections';\n\nexport class BackgroundData {\n\tstatic acrobat = (): BackgroundModel => ({\n\t\tid: 'background-acrobat',\n\t\tname: 'Acrobat',\n\t\tpackID: '',\n\t\tdescription: 'Quick and lithe, acrobats are difficult to pin down.',\n\t\tstartingFeatures: [],\n\t\tfeatures: [\n\t\t\tFeatureLogic.createTraitFeature('acrobat-feature-2', TraitType.Speed, 1),\n\t\t\tFeatureLogic.createSkillFeature('acrobat-feature-3', SkillType.Reactions, 2)\n\t\t],\n\t\tactions: [\n\t\t\t{\n\t\t\t\tid: 'acrobat-action-1',\n\t\t\t\tname: 'Jump Up',\n\t\t\t\tprerequisites: [\n\t\t\t\t\tActionPrerequisites.prone()\n\t\t\t\t],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.self()\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.stand(),\n\t\t\t\t\tActionEffects.takeAnotherAction()\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'acrobat-action-2',\n\t\t\t\tname: 'Burst of Speed',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.self()\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.addMovement(),\n\t\t\t\t\tActionEffects.takeAnotherAction()\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'acrobat-action-3',\n\t\t\t\tname: 'Quickness',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.self()\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.addCondition(ConditionLogic.createMovementBonusCondition(TraitType.Endurance, 3)),\n\t\t\t\t\tActionEffects.takeAnotherAction()\n\t\t\t\t]\n\t\t\t}\n\t\t]\n\t});\n\n\tstatic apothecary = (): BackgroundModel => ({\n\t\tid: 'background-apothecary',\n\t\tname: 'Apothecary',\n\t\tpackID: PackData.potions().id,\n\t\tdescription: 'The apothecary creates potions.',\n\t\tstartingFeatures: [],\n\t\tfeatures: [\n\t\t\tFeatureLogic.createSkillCategoryFeature('apothecary-feature-1', SkillCategoryType.Mental, 1)\n\t\t],\n\t\tactions: [\n\t\t\t{\n\t\t\t\tid: 'apothecary-action-1',\n\t\t\t\tname: 'Create Tonic of Aptitude',\n\t\t\t\tprerequisites: [\n\t\t\t\t\tActionPrerequisites.carryingCapacity()\n\t\t\t\t],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.self()\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.createPotion(PotionData.aptitude().id)\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'apothecary-action-2',\n\t\t\t\tname: 'Create Tincture of Brilliance',\n\t\t\t\tprerequisites: [\n\t\t\t\t\tActionPrerequisites.carryingCapacity()\n\t\t\t\t],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.self()\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.createPotion(PotionData.brilliance().id)\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'apothecary-action-3',\n\t\t\t\tname: 'Create Potion of Health',\n\t\t\t\tprerequisites: [\n\t\t\t\t\tActionPrerequisites.carryingCapacity()\n\t\t\t\t],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.self()\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.createPotion(PotionData.health().id)\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'apothecary-action-4',\n\t\t\t\tname: 'Create Philtre of Luck',\n\t\t\t\tprerequisites: [\n\t\t\t\t\tActionPrerequisites.carryingCapacity()\n\t\t\t\t],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.self()\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.createPotion(PotionData.luck().id)\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'apothecary-action-5',\n\t\t\t\tname: 'Create Elixir of Might',\n\t\t\t\tprerequisites: [\n\t\t\t\t\tActionPrerequisites.carryingCapacity()\n\t\t\t\t],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.self()\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.createPotion(PotionData.might().id)\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'apothecary-action-6',\n\t\t\t\tname: 'Create Potion of Resistance',\n\t\t\t\tprerequisites: [\n\t\t\t\t\tActionPrerequisites.carryingCapacity()\n\t\t\t\t],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.self()\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.createPotion(PotionData.resistance().id)\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'apothecary-action-7',\n\t\t\t\tname: 'Create Brew of Strength',\n\t\t\t\tprerequisites: [\n\t\t\t\t\tActionPrerequisites.carryingCapacity()\n\t\t\t\t],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.self()\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.createPotion(PotionData.strength().id)\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'apothecary-action-8',\n\t\t\t\tname: 'Create Brew of Will',\n\t\t\t\tprerequisites: [\n\t\t\t\t\tActionPrerequisites.carryingCapacity()\n\t\t\t\t],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.self()\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.createPotion(PotionData.will().id)\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'apothecary-action-9',\n\t\t\t\tname: 'Create Brew of Quickness',\n\t\t\t\tprerequisites: [\n\t\t\t\t\tActionPrerequisites.carryingCapacity()\n\t\t\t\t],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.self()\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.createPotion(PotionData.quickness().id)\n\t\t\t\t]\n\t\t\t}\n\t\t]\n\t});\n\n\tstatic bard = (): BackgroundModel => ({\n\t\tid: 'background-bard',\n\t\tname: 'Bard',\n\t\tpackID: '',\n\t\tdescription: 'The charismatic bard inspires their allies to greatness.',\n\t\tstartingFeatures: [],\n\t\tfeatures: [\n\t\t\tFeatureLogic.createSkillFeature('bard-feature-1', SkillType.Presence, 2),\n\t\t\tFeatureLogic.createSkillCategoryFeature('bard-feature-2', SkillCategoryType.Mental, 1),\n\t\t\tFeatureLogic.createProficiencyFeature('bard-feature-3', ItemProficiencyType.Any)\n\t\t],\n\t\tactions: [\n\t\t\t{\n\t\t\t\tid: 'bard-action-1',\n\t\t\t\tname: 'Song of Health',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.burst(ActionTargetType.Allies, Number.MAX_VALUE, 10)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.healDamage(3)\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'bard-action-2',\n\t\t\t\tname: 'Anthem of Inspiration',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.burst(ActionTargetType.Allies, Number.MAX_VALUE, 10)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.addCondition(ConditionLogic.createSkillCategoryBonusCondition(TraitType.Resolve, 3, SkillCategoryType.Physical))\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'bard-action-3',\n\t\t\t\tname: 'Melody of Courage',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.burst(ActionTargetType.Allies, Number.MAX_VALUE, 10)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.addCondition(ConditionLogic.createSkillCategoryBonusCondition(TraitType.Resolve, 3, SkillCategoryType.Mental))\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'bard-action-4',\n\t\t\t\tname: 'Threnody of Lamentation',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.burst(ActionTargetType.Enemies, Number.MAX_VALUE, 10)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: false,\n\t\t\t\t\t\tskill: SkillType.Presence,\n\t\t\t\t\t\ttrait: TraitType.Resolve,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.addCondition(ConditionLogic.createTraitPenaltyCondition(TraitType.Resolve, 2, TraitType.Endurance)),\n\t\t\t\t\t\t\tActionEffects.addCondition(ConditionLogic.createTraitPenaltyCondition(TraitType.Resolve, 2, TraitType.Resolve)),\n\t\t\t\t\t\t\tActionEffects.addCondition(ConditionLogic.createTraitPenaltyCondition(TraitType.Resolve, 2, TraitType.Speed))\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t}\n\t\t]\n\t});\n\n\tstatic commander = (): BackgroundModel => ({\n\t\tid: 'background-commander',\n\t\tname: 'Commander',\n\t\tpackID: '',\n\t\tdescription: 'A commander uses tactical analysis to make the most of any situation.',\n\t\tstartingFeatures: [],\n\t\tfeatures: [\n\t\t\tFeatureLogic.createSkillFeature('commander-feature-1', SkillType.Presence, 2),\n\t\t\tFeatureLogic.createAuraDamageCategoryFeature('commander-feature-2', ConditionType.DamageCategoryBonus, DamageCategoryType.Corruption, 1),\n\t\t\tFeatureLogic.createAuraDamageCategoryFeature('commander-feature-3', ConditionType.DamageCategoryBonus, DamageCategoryType.Energy, 1),\n\t\t\tFeatureLogic.createAuraDamageCategoryFeature('commander-feature-4', ConditionType.DamageCategoryBonus, DamageCategoryType.Physical, 1),\n\t\t\tFeatureLogic.createAuraSkillCategoryFeature('commander-feature-5', ConditionType.SkillCategoryBonus, SkillCategoryType.Physical, 1)\n\t\t],\n\t\tactions: [\n\t\t\t{\n\t\t\t\tid: 'commander-action-1',\n\t\t\t\tname: 'Direct the Attack',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.burst(ActionTargetType.Allies, 1, 10)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.commandAction()\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'commander-action-2',\n\t\t\t\tname: 'Tactical Positioning',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.burst(ActionTargetType.Allies, Number.MAX_VALUE, 10)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.commandMove()\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'commander-action-3',\n\t\t\t\tname: 'Rally',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.burst(ActionTargetType.Allies, Number.MAX_VALUE, 10)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.healDamage(3),\n\t\t\t\t\tActionEffects.stand()\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'commander-action-4',\n\t\t\t\tname: 'Battlefield Sense',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.burst(ActionTargetType.Enemies, Number.MAX_VALUE, 10)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.toSelf([\n\t\t\t\t\t\tActionEffects.scan()\n\t\t\t\t\t]),\n\t\t\t\t\tActionEffects.reveal(),\n\t\t\t\t\tActionEffects.takeAnotherAction()\n\t\t\t\t]\n\t\t\t}\n\t\t]\n\t});\n\n\tstatic grenadier = (): BackgroundModel => ({\n\t\tid: 'background-grenadier',\n\t\tname: 'Grenadier',\n\t\tpackID: PackData.technology().id,\n\t\tdescription: 'Grenadiers use explosives, which are dangerous and difficult to master.',\n\t\tstartingFeatures: [],\n\t\tfeatures: [\n\t\t\tFeatureLogic.createSkillFeature('grenadier-feature-1', SkillType.Perception, 2)\n\t\t],\n\t\tactions: [\n\t\t\t{\n\t\t\t\tid: 'grenadier-action-1',\n\t\t\t\tname: 'Demolitions',\n\t\t\t\tprerequisites: [\n\t\t\t\t\tActionPrerequisites.emptyHand()\n\t\t\t\t],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.burst(ActionTargetType.Walls, 1, 10)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.addSquares()\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'grenadier-action-2',\n\t\t\t\tname: 'Grenade',\n\t\t\t\tprerequisites: [\n\t\t\t\t\tActionPrerequisites.emptyHand()\n\t\t\t\t],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionOriginParameters.distance(8),\n\t\t\t\t\tActionTargetParameters.burst(ActionTargetType.Combatants, Number.MAX_VALUE, 4)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.dealDamage(DamageType.Impact, 3),\n\t\t\t\t\tActionEffects.knockDown()\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'grenadier-action-3',\n\t\t\t\tname: 'Molotov',\n\t\t\t\tprerequisites: [\n\t\t\t\t\tActionPrerequisites.emptyHand()\n\t\t\t\t],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionOriginParameters.distance(8),\n\t\t\t\t\tActionTargetParameters.burst(ActionTargetType.Combatants, Number.MAX_VALUE, 4)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.dealDamage(DamageType.Fire, 3),\n\t\t\t\t\tActionEffects.addCondition(ConditionLogic.createAutoDamageCondition(TraitType.Endurance, 1, DamageType.Fire))\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'grenadier-action-4',\n\t\t\t\tname: 'Flashbang',\n\t\t\t\tprerequisites: [\n\t\t\t\t\tActionPrerequisites.emptyHand()\n\t\t\t\t],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionOriginParameters.distance(8),\n\t\t\t\t\tActionTargetParameters.burst(ActionTargetType.Combatants, Number.MAX_VALUE, 4)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.stun()\n\t\t\t\t]\n\t\t\t}\n\t\t]\n\t});\n\n\tstatic mountebank = (): BackgroundModel => ({\n\t\tid: 'background-mountebank',\n\t\tname: 'Mountebank',\n\t\tpackID: PackData.skullduggery().id,\n\t\tdescription: 'Tricksters and con artists, mountebanks make valuable allies and frustrating foes.',\n\t\tstartingFeatures: [],\n\t\tfeatures: [\n\t\t\tFeatureLogic.createSkillFeature('mountebank-feature-1', SkillType.Presence, 2),\n\t\t\tFeatureLogic.createAuraDamageCategoryFeature('mountebank-feature-2', ConditionType.DamageCategoryVulnerability, DamageCategoryType.Corruption, 1),\n\t\t\tFeatureLogic.createAuraDamageCategoryFeature('mountebank-feature-3', ConditionType.DamageCategoryVulnerability, DamageCategoryType.Energy, 1),\n\t\t\tFeatureLogic.createAuraDamageCategoryFeature('mountebank-feature-4', ConditionType.DamageCategoryVulnerability, DamageCategoryType.Physical, 1)\n\t\t],\n\t\tactions: [\n\t\t\t{\n\t\t\t\tid: 'mountebank-action-1',\n\t\t\t\tname: 'Jinx',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.burst(ActionTargetType.Enemies, 1, 5)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.addCondition(ConditionLogic.createSkillPenaltyCondition(TraitType.Resolve, 5, SkillType.All))\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'mountebank-action-2',\n\t\t\t\tname: 'Expose Weakness',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.burst(ActionTargetType.Enemies, 1, 5)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.addCondition(ConditionLogic.createDamageVulnerabilityCondition(TraitType.Resolve, 5, DamageType.All))\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'mountebank-action-3',\n\t\t\t\tname: 'Roll the Dice',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.self()\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.invertConditions(true)\n\t\t\t\t]\n\t\t\t}\n\t\t]\n\t});\n\n\tstatic mystic = (): BackgroundModel => ({\n\t\tid: 'background-mystic',\n\t\tname: 'Mystic',\n\t\tpackID: PackData.arcana().id,\n\t\tdescription: 'Mystics are the masters of the arcane arts.',\n\t\tstartingFeatures: [],\n\t\tfeatures: [\n\t\t\tFeatureLogic.createSkillFeature('mystic-feature-1', SkillType.Spellcasting, 2),\n\t\t\tFeatureLogic.createDamageCategoryBonusFeature('mystic-feature-2', DamageCategoryType.Energy, 1),\n\t\t\tFeatureLogic.createDamageCategoryResistFeature('mystic-feature-3', DamageCategoryType.Energy, 1),\n\t\t\tFeatureLogic.createDamageCategoryBonusFeature('mystic-feature-4', DamageCategoryType.Corruption, 1),\n\t\t\tFeatureLogic.createDamageCategoryResistFeature('mystic-feature-5', DamageCategoryType.Corruption, 1)\n\t\t],\n\t\tactions: [\n\t\t\t{\n\t\t\t\tid: 'mystic-action-1',\n\t\t\t\tname: 'Confusion',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.burst(ActionTargetType.Enemies, 1, 5)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.commandAction()\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'mystic-action-2',\n\t\t\t\tname: 'Sympathetic Affliction',\n\t\t\t\tprerequisites: [\n\t\t\t\t\tActionPrerequisites.condition(TraitType.Any)\n\t\t\t\t],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.burst(ActionTargetType.Enemies, 1, 5)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.transferCondition()\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'mystic-action-3',\n\t\t\t\tname: 'Eldritch Reversal',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.burst(ActionTargetType.Combatants, 1, 5)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.invertConditions(false)\n\t\t\t\t]\n\t\t\t}\n\t\t]\n\t});\n\n\tstatic noble = (): BackgroundModel => ({\n\t\tid: 'background-noble',\n\t\tname: 'Noble',\n\t\tpackID: '',\n\t\tdescription: 'Though they can be haughty, nobles bring an imposing presence to a battlefield.',\n\t\tstartingFeatures: [],\n\t\tfeatures: [\n\t\t\tFeatureLogic.createSkillFeature('noble-feature-1', SkillType.Presence, 2),\n\t\t\tFeatureLogic.createAuraFeature('noble-feature-2', ConditionType.MovementBonus, 1),\n\t\t\tFeatureLogic.createAuraTraitFeature('noble-feature-3', ConditionType.TraitBonus, TraitType.Endurance, 1),\n\t\t\tFeatureLogic.createAuraTraitFeature('noble-feature-4', ConditionType.TraitBonus, TraitType.Resolve, 1),\n\t\t\tFeatureLogic.createAuraTraitFeature('noble-feature-5', ConditionType.TraitBonus, TraitType.Speed, 1)\n\t\t],\n\t\tactions: [\n\t\t\t{\n\t\t\t\tid: 'noble-action-1',\n\t\t\t\tname: 'Boost Morale',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.burst(ActionTargetType.Allies, Number.MAX_VALUE, 5)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.addCondition(ConditionLogic.createSkillBonusCondition(TraitType.Resolve, 3, SkillType.All))\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'noble-action-2',\n\t\t\t\tname: 'Dishearten',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.burst(ActionTargetType.Enemies, Number.MAX_VALUE, 5)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.addCondition(ConditionLogic.createSkillPenaltyCondition(TraitType.Resolve, 3, SkillType.All))\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'noble-action-3',\n\t\t\t\tname: 'Taunt',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.burst(ActionTargetType.Enemies, Number.MAX_VALUE, 5)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: false,\n\t\t\t\t\t\tskill: SkillType.Presence,\n\t\t\t\t\t\ttrait: TraitType.Resolve,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.stun()\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t}\n\t\t]\n\t});\n\n\tstatic physician = (): BackgroundModel => ({\n\t\tid: 'background-physician',\n\t\tname: 'Physician',\n\t\tpackID: '',\n\t\tdescription: 'For many groups, a physician is the difference between life and death.',\n\t\tstartingFeatures: [],\n\t\tfeatures: [\n\t\t\tFeatureLogic.createAuraFeature('physician-feature-1', ConditionType.AutoHeal, 1)\n\t\t],\n\t\tactions: [\n\t\t\t{\n\t\t\t\tid: 'physician-action-1',\n\t\t\t\tname: 'Remove Affliction',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.burst(ActionTargetType.Allies, Number.MAX_VALUE, 5)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.removeCondition(TraitType.Any)\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'physician-action-2',\n\t\t\t\tname: 'First Aid',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.adjacent(ActionTargetType.Allies, 1)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.healDamage(5),\n\t\t\t\t\tActionEffects.healWounds(2)\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'physician-action-3',\n\t\t\t\tname: 'Heal Thyself',\n\t\t\t\tprerequisites: [\n\t\t\t\t\tActionPrerequisites.wound()\n\t\t\t\t],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.self()\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.healWounds(2)\n\t\t\t\t]\n\t\t\t}\n\t\t]\n\t});\n\n\tstatic reaver = (): BackgroundModel => ({\n\t\tid: 'background-reaver',\n\t\tname: 'Reaver',\n\t\tpackID: '',\n\t\tdescription: 'Reavers are rarely satisfied with anything other than carnage.',\n\t\tstartingFeatures: [],\n\t\tfeatures: [\n\t\t\tFeatureLogic.createSkillFeature('reaver-feature-1', SkillType.Brawl, 2),\n\t\t\tFeatureLogic.createSkillFeature('reaver-feature-2', SkillType.Weapon, 2),\n\t\t\tFeatureLogic.createDamageCategoryResistFeature('reaver-feature-3', DamageCategoryType.Any, 1),\n\t\t\tFeatureLogic.createDamageCategoryBonusFeature('reaver-feature-4', DamageCategoryType.Physical, 1),\n\t\t\tFeatureLogic.createAuraDamageFeature('reaver-feature-5', ConditionType.AutoDamage, DamageType.Edged, 1),\n\t\t\tFeatureLogic.createAuraDamageFeature('reaver-feature-6', ConditionType.AutoDamage, DamageType.Impact, 1),\n\t\t\tFeatureLogic.createAuraDamageFeature('reaver-feature-7', ConditionType.AutoDamage, DamageType.Piercing, 1)\n\t\t],\n\t\tactions: [\n\t\t\t{\n\t\t\t\tid: 'reaver-action-1',\n\t\t\t\tname: 'Frenzy',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.self()\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.addCondition(ConditionLogic.createDamageCategoryBonusCondition(TraitType.Resolve, 5, DamageCategoryType.Physical))\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'reaver-action-2',\n\t\t\t\tname: 'Adrenaline',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.self()\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.addCondition(ConditionLogic.createMovementBonusCondition(TraitType.Endurance, 5)),\n\t\t\t\t\tActionEffects.addCondition(ConditionLogic.createTraitBonusCondition(TraitType.Endurance, 3, TraitType.Speed))\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'reaver-action-3',\n\t\t\t\tname: 'Fortitude',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.self()\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.addCondition(ConditionLogic.createTraitBonusCondition(TraitType.Endurance, 3, TraitType.Endurance)),\n\t\t\t\t\tActionEffects.addCondition(ConditionLogic.createTraitBonusCondition(TraitType.Endurance, 3, TraitType.Resolve))\n\t\t\t\t]\n\t\t\t}\n\t\t]\n\t});\n\n\tstatic sentinel = (): BackgroundModel => ({\n\t\tid: 'background-sentinel',\n\t\tname: 'Sentinel',\n\t\tpackID: '',\n\t\tdescription: 'Nothing gets past a sentinel unless they allow it.',\n\t\tstartingFeatures: [],\n\t\tfeatures: [\n\t\t\tFeatureLogic.createTraitFeature('sentinel-feature-1', TraitType.Endurance, 1),\n\t\t\tFeatureLogic.createTraitFeature('sentinel-feature-2', TraitType.Resolve, 1),\n\t\t\tFeatureLogic.createDamageResistFeature('sentinel-feature-3', DamageType.All, 1),\n\t\t\tFeatureLogic.createAuraFeature('sentinel-feature-4', ConditionType.MovementPenalty, 1)\n\t\t],\n\t\tactions: [\n\t\t\t{\n\t\t\t\tid: 'sentinel-action-1',\n\t\t\t\tname: 'Mark Enemy',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.adjacent(ActionTargetType.Enemies, 1)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.addCondition(ConditionLogic.createMovementPenaltyCondition(TraitType.Speed, 4)),\n\t\t\t\t\tActionEffects.takeAnotherAction()\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'sentinel-action-2',\n\t\t\t\tname: 'Unyielding Stance',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.self()\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.addCondition(ConditionLogic.createTraitBonusCondition(TraitType.Endurance, 3, TraitType.Endurance)),\n\t\t\t\t\tActionEffects.addCondition(ConditionLogic.createTraitBonusCondition(TraitType.Endurance, 3, TraitType.Resolve))\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'sentinel-action-3',\n\t\t\t\tname: 'Keep Close',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.burst(ActionTargetType.Enemies, 1, 5)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.forceMovement(MovementType.Pull, 3)\n\t\t\t\t]\n\t\t\t}\n\t\t]\n\t});\n\n\tstatic thief = (): BackgroundModel => ({\n\t\tid: 'background-thief',\n\t\tname: 'Thief',\n\t\tpackID: PackData.skullduggery().id,\n\t\tdescription: 'Never put your trust in a thief, even when they\\'re on your side.',\n\t\tstartingFeatures: [],\n\t\tfeatures: [\n\t\t\tFeatureLogic.createSkillFeature('thief-feature-1', SkillType.Reactions, 2),\n\t\t\tFeatureLogic.createSkillFeature('thief-feature-2', SkillType.Stealth, 2),\n\t\t\tFeatureLogic.createTraitFeature('thief-feature-3', TraitType.Speed, 1)\n\t\t],\n\t\tactions: [\n\t\t\t{\n\t\t\t\tid: 'thief-action-1',\n\t\t\t\tname: 'Steal',\n\t\t\t\tprerequisites: [\n\t\t\t\t\tActionPrerequisites.carryingCapacity()\n\t\t\t\t],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.adjacent(ActionTargetType.Enemies, 1)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: false,\n\t\t\t\t\t\tskill: SkillType.Reactions,\n\t\t\t\t\t\ttrait: TraitType.Speed,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.steal()\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'thief-action-2',\n\t\t\t\tname: 'Stake Out',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.burst(ActionTargetType.Enemies, 1, 5)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.addCondition(ConditionLogic.createDamageVulnerabilityCondition(TraitType.Resolve, 5, DamageType.All))\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'thief-action-3',\n\t\t\t\tname: 'Hide',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.self()\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.hide(),\n\t\t\t\t\tActionEffects.takeAnotherAction()\n\t\t\t\t]\n\t\t\t}\n\t\t]\n\t});\n\n\tstatic zealot = (): BackgroundModel => ({\n\t\tid: 'background-zealot',\n\t\tname: 'Zealot',\n\t\tpackID: PackData.faith().id,\n\t\tdescription: 'A religious fanatic, empowered by the strength of their convictions.',\n\t\tstartingFeatures: [],\n\t\tfeatures: [\n\t\t\tFeatureLogic.createSkillFeature('reaver-feature-1', SkillType.Brawl, 2),\n\t\t\tFeatureLogic.createSkillFeature('reaver-feature-2', SkillType.Weapon, 2),\n\t\t\tFeatureLogic.createDamageCategoryBonusFeature('reaver-feature-4', DamageCategoryType.Any, 1)\n\t\t],\n\t\tactions: [\n\t\t\t{\n\t\t\t\tid: 'zealot-action-1',\n\t\t\t\tname: 'Fanatic\\'s Strength',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.self()\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.addCondition(ConditionLogic.createDamageCategoryBonusCondition(TraitType.Resolve, 2, DamageCategoryType.Physical)),\n\t\t\t\t\tActionEffects.addCondition(ConditionLogic.createDamageCategoryBonusCondition(TraitType.Resolve, 2, DamageCategoryType.Energy)),\n\t\t\t\t\tActionEffects.addCondition(ConditionLogic.createDamageCategoryBonusCondition(TraitType.Resolve, 2, DamageCategoryType.Corruption))\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'zealot-action-2',\n\t\t\t\tname: 'Fanatic\\'s Speed',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.self()\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.addCondition(ConditionLogic.createMovementBonusCondition(TraitType.Endurance, 2)),\n\t\t\t\t\tActionEffects.takeAnotherAction()\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'zealot-action-3',\n\t\t\t\tname: 'Righteous Will',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.self()\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.invertConditions(false),\n\t\t\t\t\tActionEffects.addCondition(ConditionLogic.createTraitBonusCondition(TraitType.Endurance, 2, TraitType.Endurance)),\n\t\t\t\t\tActionEffects.addCondition(ConditionLogic.createTraitBonusCondition(TraitType.Endurance, 2, TraitType.Resolve)),\n\t\t\t\t\tActionEffects.addCondition(ConditionLogic.createTraitBonusCondition(TraitType.Endurance, 2, TraitType.Resolve))\n\t\t\t\t]\n\t\t\t}\n\t\t]\n\t});\n\n\tstatic getList = (): BackgroundModel[] => {\n\t\tconst list = [\n\t\t\tBackgroundData.acrobat(),\n\t\t\tBackgroundData.apothecary(),\n\t\t\tBackgroundData.bard(),\n\t\t\tBackgroundData.commander(),\n\t\t\tBackgroundData.grenadier(),\n\t\t\tBackgroundData.mountebank(),\n\t\t\tBackgroundData.mystic(),\n\t\t\tBackgroundData.noble(),\n\t\t\tBackgroundData.physician(),\n\t\t\tBackgroundData.reaver(),\n\t\t\tBackgroundData.sentinel(),\n\t\t\tBackgroundData.thief(),\n\t\t\tBackgroundData.zealot()\n\t\t];\n\n\t\tlist.forEach(n => {\n\t\t\tn.startingFeatures = Collections.sort(n.startingFeatures, f => FeatureLogic.getFeatureTitle(f));\n\t\t\tn.features = Collections.sort(n.features, f => FeatureLogic.getFeatureTitle(f));\n\t\t\tn.actions = Collections.sort(n.actions, a => a.name);\n\t\t});\n\t\treturn Collections.sort(list, n => n.name);\n\t};\n}\n","import { PackData } from './pack-data';\n\nimport { ActionTargetType } from '../enums/action-target-type';\nimport { CombatantType } from '../enums/combatant-type';\nimport { ConditionType } from '../enums/condition-type';\nimport { DamageCategoryType } from '../enums/damage-category-type';\nimport { DamageType } from '../enums/damage-type';\nimport { MovementType } from '../enums/movement-type';\nimport { SkillType } from '../enums/skill-type';\nimport { TraitType } from '../enums/trait-type';\n\nimport { ActionEffects, ActionPrerequisites, ActionTargetParameters } from '../logic/action-logic';\nimport { ConditionLogic } from '../logic/condition-logic';\nimport { FeatureLogic } from '../logic/feature-logic';\n\nimport type { SpeciesModel } from '../models/species';\n\nimport { Collections } from '../utils/collections';\n\nexport class HeroSpeciesData {\n\tstatic human = (): SpeciesModel => ({\n\t\tid: 'species-human',\n\t\tname: 'Human',\n\t\tpackID: '',\n\t\tdescription: 'Humans are resourceful and adaptable.',\n\t\ttype: CombatantType.Hero,\n\t\tsize: 1,\n\t\tquirks: [],\n\t\tstartingFeatures: [\n\t\t\tFeatureLogic.createTraitFeature('human-start-1', TraitType.Endurance, 1),\n\t\t\tFeatureLogic.createTraitFeature('human-start-2', TraitType.Resolve, 1),\n\t\t\tFeatureLogic.createTraitFeature('human-start-3', TraitType.Speed, 1)\n\t\t],\n\t\tfeatures: [\n\t\t\tFeatureLogic.createTraitFeature('human-feature-1', TraitType.Any, 1),\n\t\t\tFeatureLogic.createSkillFeature('human-feature-2', SkillType.Any, 2)\n\t\t],\n\t\tactions: [\n\t\t\t{\n\t\t\t\tid: 'human-action-1',\n\t\t\t\tname: 'Resilient',\n\t\t\t\tprerequisites: [\n\t\t\t\t\tActionPrerequisites.condition(TraitType.Any)\n\t\t\t\t],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.self()\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.removeCondition(TraitType.Any)\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'human-action-2',\n\t\t\t\tname: 'Resourceful',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.self()\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.takeAnotherAction(true)\n\t\t\t\t]\n\t\t\t}\n\t\t]\n\t});\n\n\tstatic construct = (): SpeciesModel => ({\n\t\tid: 'species-construct',\n\t\tname: 'Construct',\n\t\tpackID: PackData.technology().id,\n\t\tdescription: 'A living automaton.',\n\t\ttype: CombatantType.Hero,\n\t\tsize: 1,\n\t\tquirks: [],\n\t\tstartingFeatures: [\n\t\t\tFeatureLogic.createTraitFeature('construct-start-1', TraitType.Endurance, 1),\n\t\t\tFeatureLogic.createSkillFeature('construct-start-2', SkillType.Brawl, 2),\n\t\t\tFeatureLogic.createDamageResistFeature('construct-start-3', DamageType.Poison, 2),\n\t\t\tFeatureLogic.createDamageResistFeature('construct-start-4', DamageType.Psychic, 2)\n\t\t],\n\t\tfeatures: [\n\t\t\tFeatureLogic.createTraitFeature('construct-feature-1', TraitType.Endurance, 1),\n\t\t\tFeatureLogic.createSkillFeature('construct-start-2', SkillType.Brawl, 2),\n\t\t\tFeatureLogic.createDamageResistFeature('construct-feature-3', DamageType.Poison, 2),\n\t\t\tFeatureLogic.createDamageResistFeature('construct-feature-4', DamageType.Psychic, 2)\n\t\t],\n\t\tactions: [\n\t\t\t{\n\t\t\t\tid: 'construct-action-1',\n\t\t\t\tname: 'Knockdown',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.adjacent(ActionTargetType.Enemies, 1)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: false,\n\t\t\t\t\t\tskill: SkillType.Brawl,\n\t\t\t\t\t\ttrait: TraitType.Endurance,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.dealDamage(DamageType.Impact, 2),\n\t\t\t\t\t\t\tActionEffects.knockDown()\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'construct-action-2',\n\t\t\t\tname: 'Repair',\n\t\t\t\tprerequisites: [\n\t\t\t\t\tActionPrerequisites.damage()\n\t\t\t\t],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.self()\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.healDamage(1),\n\t\t\t\t\tActionEffects.takeAnotherAction()\n\t\t\t\t]\n\t\t\t}\n\t\t]\n\t});\n\n\tstatic deva = (): SpeciesModel => ({\n\t\tid: 'species-deva',\n\t\tname: 'Deva',\n\t\tpackID: PackData.faith().id,\n\t\tdescription: 'A humanoid with angelic ancestry.',\n\t\ttype: CombatantType.Hero,\n\t\tsize: 1,\n\t\tquirks: [],\n\t\tstartingFeatures: [\n\t\t\tFeatureLogic.createTraitFeature('deva-start-1', TraitType.Resolve, 1),\n\t\t\tFeatureLogic.createSkillFeature('deva-start-2', SkillType.Presence, 2),\n\t\t\tFeatureLogic.createDamageCategoryResistFeature('deva-start-3', DamageCategoryType.Corruption, 1)\n\t\t],\n\t\tfeatures: [\n\t\t\tFeatureLogic.createTraitFeature('deva-feature-1', TraitType.Resolve, 1),\n\t\t\tFeatureLogic.createSkillFeature('deva-feature-2', SkillType.Presence, 2),\n\t\t\tFeatureLogic.createDamageCategoryResistFeature('deva-feature-3', DamageCategoryType.Corruption, 1),\n\t\t\tFeatureLogic.createAuraDamageFeature('deva-feature-4', ConditionType.AutoDamage, DamageType.Light, 1)\n\t\t],\n\t\tactions: [\n\t\t\t{\n\t\t\t\tid: 'deva-action-1',\n\t\t\t\tname: 'Divine Radiance',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.burst(ActionTargetType.Enemies, Number.MAX_VALUE, 2)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: false,\n\t\t\t\t\t\tskill: SkillType.Presence,\n\t\t\t\t\t\ttrait: TraitType.Endurance,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.stun()\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'deva-action-2',\n\t\t\t\tname: 'Divine Light',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.burst(ActionTargetType.Enemies, Number.MAX_VALUE, 2)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: false,\n\t\t\t\t\t\tskill: SkillType.Presence,\n\t\t\t\t\t\ttrait: TraitType.Endurance,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.dealDamage(DamageType.Light, 2)\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t}\n\t\t]\n\t});\n\n\tstatic dwarf = (): SpeciesModel => ({\n\t\tid: 'species-dwarf',\n\t\tname: 'Dwarf',\n\t\tpackID: '',\n\t\tdescription: 'A short, sturdy creature, fond of drink and industry.',\n\t\ttype: CombatantType.Hero,\n\t\tsize: 1,\n\t\tquirks: [],\n\t\tstartingFeatures: [\n\t\t\tFeatureLogic.createTraitFeature('dwarf-start-1', TraitType.Endurance, 1),\n\t\t\tFeatureLogic.createTraitFeature('dwarf-start-2', TraitType.Resolve, 1)\n\t\t],\n\t\tfeatures: [\n\t\t\tFeatureLogic.createTraitFeature('dwarf-feature-1', TraitType.Endurance, 1),\n\t\t\tFeatureLogic.createTraitFeature('dwarf-feature-2', TraitType.Resolve, 1),\n\t\t\tFeatureLogic.createDamageResistFeature('dwarf-feature-3', DamageType.Poison, 2),\n\t\t\tFeatureLogic.createDamageResistFeature('dwarf-feature-4', DamageType.Psychic, 2)\n\t\t],\n\t\tactions: [\n\t\t\t{\n\t\t\t\tid: 'dwarf-action-1',\n\t\t\t\tname: 'Dwarven Constitution',\n\t\t\t\tprerequisites: [\n\t\t\t\t\tActionPrerequisites.condition(TraitType.Endurance)\n\t\t\t\t],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.self()\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.removeCondition(TraitType.Endurance),\n\t\t\t\t\tActionEffects.takeAnotherAction()\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'dwarf-action-2',\n\t\t\t\tname: 'Dwarven Discipline',\n\t\t\t\tprerequisites: [\n\t\t\t\t\tActionPrerequisites.condition(TraitType.Resolve)\n\t\t\t\t],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.self()\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.removeCondition(TraitType.Resolve),\n\t\t\t\t\tActionEffects.takeAnotherAction()\n\t\t\t\t]\n\t\t\t}\n\t\t]\n\t});\n\n\tstatic elf = (): SpeciesModel => ({\n\t\tid: 'species-elf',\n\t\tname: 'Elf',\n\t\tpackID: '',\n\t\tdescription: 'An elegant forest-dwelling creature.',\n\t\ttype: CombatantType.Hero,\n\t\tsize: 1,\n\t\tquirks: [],\n\t\tstartingFeatures: [\n\t\t\tFeatureLogic.createTraitFeature('elf-start-1', TraitType.Speed, 1),\n\t\t\tFeatureLogic.createSkillFeature('elf-start-2', SkillType.Perception, 2),\n\t\t\tFeatureLogic.createSkillFeature('elf-start-3', SkillType.Reactions, 2),\n\t\t\tFeatureLogic.createSkillFeature('elf-start-4', SkillType.Stealth, 2)\n\t\t],\n\t\tfeatures: [\n\t\t\tFeatureLogic.createTraitFeature('elf-feature-1', TraitType.Speed, 1),\n\t\t\tFeatureLogic.createSkillFeature('elf-feature-2', SkillType.Perception, 2),\n\t\t\tFeatureLogic.createSkillFeature('elf-feature-3', SkillType.Reactions, 2),\n\t\t\tFeatureLogic.createSkillFeature('elf-feature-4', SkillType.Stealth, 2)\n\t\t],\n\t\tactions: [\n\t\t\t{\n\t\t\t\tid: 'elf-action-1',\n\t\t\t\tname: 'Seelie Step',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.burst(ActionTargetType.Squares, 1, 10)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.moveToTargetSquare()\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'elf-action-2',\n\t\t\t\tname: 'Elven Senses',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.self()\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.scan(),\n\t\t\t\t\tActionEffects.takeAnotherAction()\n\t\t\t\t]\n\t\t\t}\n\t\t]\n\t});\n\n\tstatic faun = (): SpeciesModel => ({\n\t\tid: 'species-faun',\n\t\tname: 'Faun',\n\t\tpackID: PackData.fae().id,\n\t\tdescription: 'A humanoid with powerful goat-like legs.',\n\t\ttype: CombatantType.Hero,\n\t\tsize: 1,\n\t\tquirks: [],\n\t\tstartingFeatures: [\n\t\t\tFeatureLogic.createTraitFeature('faun-start-1', TraitType.Speed, 1),\n\t\t\tFeatureLogic.createSkillFeature('faun-start-2', SkillType.Reactions, 2)\n\t\t],\n\t\tfeatures: [\n\t\t\tFeatureLogic.createTraitFeature('faun-feature-1', TraitType.Speed, 1),\n\t\t\tFeatureLogic.createSkillFeature('faun-feature-2', SkillType.Reactions, 2)\n\t\t],\n\t\tactions: [\n\t\t\t{\n\t\t\t\tid: 'faun-action-1',\n\t\t\t\tname: 'Quick Leap',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.burst(ActionTargetType.Enemies, 1, 4)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.forceMovement(MovementType.BesideTarget, 1),\n\t\t\t\t\tActionEffects.takeAnotherAction()\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'faun-action-2',\n\t\t\t\tname: 'Knockdown Jump',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.burst(ActionTargetType.Enemies, 1, 4)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.forceMovement(MovementType.BesideTarget, 1),\n\t\t\t\t\tActionEffects.knockDown()\n\t\t\t\t]\n\t\t\t}\n\t\t]\n\t});\n\n\tstatic gnome = (): SpeciesModel => ({\n\t\tid: 'species-gnome',\n\t\tname: 'Gnome',\n\t\tpackID: '',\n\t\tdescription: 'A short creature who often prefers to be unseen.',\n\t\ttype: CombatantType.Hero,\n\t\tsize: 1,\n\t\tquirks: [],\n\t\tstartingFeatures: [\n\t\t\tFeatureLogic.createTraitFeature('gnome-start-1', TraitType.Speed, 1),\n\t\t\tFeatureLogic.createSkillFeature('gnome-start-2', SkillType.Reactions, 2),\n\t\t\tFeatureLogic.createSkillFeature('gnome-start-3', SkillType.Stealth, 2)\n\t\t],\n\t\tfeatures: [\n\t\t\tFeatureLogic.createTraitFeature('gnome-feature-1', TraitType.Speed, 1),\n\t\t\tFeatureLogic.createSkillFeature('gnome-feature-2', SkillType.Reactions, 2),\n\t\t\tFeatureLogic.createSkillFeature('gnome-feature-3', SkillType.Stealth, 2)\n\t\t],\n\t\tactions: [\n\t\t\t{\n\t\t\t\tid: 'gnome-action-1',\n\t\t\t\tname: 'Trip',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.adjacent(ActionTargetType.Enemies, 1)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: false,\n\t\t\t\t\t\tskill: SkillType.Brawl,\n\t\t\t\t\t\ttrait: TraitType.Endurance,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.knockDown()\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'gnome-action-2',\n\t\t\t\tname: 'Fade Away',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.self()\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.hide(),\n\t\t\t\t\tActionEffects.takeAnotherAction()\n\t\t\t\t]\n\t\t\t}\n\t\t]\n\t});\n\n\tstatic minotaur = (): SpeciesModel => ({\n\t\tid: 'species-minotaur',\n\t\tname: 'Minotaur',\n\t\tpackID: PackData.beasts().id,\n\t\tdescription: 'A muscular humanoid with the head of a bull.',\n\t\ttype: CombatantType.Hero,\n\t\tsize: 1,\n\t\tquirks: [],\n\t\tstartingFeatures: [\n\t\t\tFeatureLogic.createTraitFeature('minotaur-start-1', TraitType.Endurance, 1),\n\t\t\tFeatureLogic.createSkillFeature('minotaur-start-2', SkillType.Brawl, 2),\n\t\t\tFeatureLogic.createSkillFeature('minotaur-start-3', SkillType.Presence, 2),\n\t\t\tFeatureLogic.createDamageCategoryBonusFeature('minotaur-start-4', DamageCategoryType.Physical, 1)\n\t\t],\n\t\tfeatures: [\n\t\t\tFeatureLogic.createTraitFeature('minotaur-feature-1', TraitType.Endurance, 1),\n\t\t\tFeatureLogic.createSkillFeature('minotaur-feature-2', SkillType.Brawl, 2),\n\t\t\tFeatureLogic.createSkillFeature('minotaur-feature-3', SkillType.Presence, 2),\n\t\t\tFeatureLogic.createDamageCategoryBonusFeature('minotaur-feature-4', DamageCategoryType.Physical, 1)\n\t\t],\n\t\tactions: [\n\t\t\t{\n\t\t\t\tid: 'minotaur-action-1',\n\t\t\t\tname: 'Gore',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.adjacent(ActionTargetType.Enemies, 1)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: false,\n\t\t\t\t\t\tskill: SkillType.Brawl,\n\t\t\t\t\t\ttrait: TraitType.Speed,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.dealDamage(DamageType.Piercing, 3)\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'minotaur-action-2',\n\t\t\t\tname: 'Bull Rush',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.burst(ActionTargetType.Enemies, 1, 5)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.forceMovement(MovementType.TowardsTarget, 2),\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: false,\n\t\t\t\t\t\tskill: SkillType.Brawl,\n\t\t\t\t\t\ttrait: TraitType.Speed,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.dealDamage(DamageType.Piercing, 2)\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'minotaur-action-3',\n\t\t\t\tname: 'Bellow',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.burst(ActionTargetType.Combatants, Number.MAX_VALUE, 5)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: false,\n\t\t\t\t\t\tskill: SkillType.Brawl,\n\t\t\t\t\t\ttrait: TraitType.Endurance,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.dealDamage(DamageType.Sonic, 1)\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'minotaur-action-4',\n\t\t\t\tname: 'Intimidate',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.burst(ActionTargetType.Enemies, 1, 5)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: false,\n\t\t\t\t\t\tskill: SkillType.Presence,\n\t\t\t\t\t\ttrait: TraitType.Resolve,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.forceMovement(MovementType.Push, 1),\n\t\t\t\t\t\t\tActionEffects.stun()\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t}\n\t\t]\n\t});\n\n\tstatic pixie = (): SpeciesModel => ({\n\t\tid: 'species-pixie',\n\t\tname: 'Pixie',\n\t\tpackID: PackData.fae().id,\n\t\tdescription: 'A tiny fairy-like creature.',\n\t\ttype: CombatantType.Hero,\n\t\tsize: 1,\n\t\tquirks: [],\n\t\tstartingFeatures: [\n\t\t\tFeatureLogic.createTraitFeature('pixie-start-1', TraitType.Speed, 1),\n\t\t\tFeatureLogic.createSkillFeature('pixie-start-2', SkillType.Stealth, 2),\n\t\t\tFeatureLogic.createDamageCategoryResistFeature('pixie-start-3', DamageCategoryType.Corruption, 1)\n\t\t],\n\t\tfeatures: [\n\t\t\tFeatureLogic.createTraitFeature('pixie-feature-1', TraitType.Speed, 1),\n\t\t\tFeatureLogic.createSkillFeature('pixie-feature-2', SkillType.Stealth, 2),\n\t\t\tFeatureLogic.createDamageCategoryResistFeature('pixie-feature-3', DamageCategoryType.Corruption, 1)\n\t\t],\n\t\tactions: [\n\t\t\t{\n\t\t\t\tid: 'pixie-action-1',\n\t\t\t\tname: 'Confound',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.burst(ActionTargetType.Enemies, 1, 5)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.commandAction()\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'pixie-action-2',\n\t\t\t\tname: 'Blink',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.burst(ActionTargetType.Squares, 1, 3)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.moveToTargetSquare(),\n\t\t\t\t\tActionEffects.takeAnotherAction()\n\t\t\t\t]\n\t\t\t}\n\t\t]\n\t});\n\n\tstatic reptilian = (): SpeciesModel => ({\n\t\tid: 'species-reptilian',\n\t\tname: 'Reptilian',\n\t\tpackID: PackData.coldBlood().id,\n\t\tdescription: 'A scaly humanoid with draconic ancestry.',\n\t\ttype: CombatantType.Hero,\n\t\tsize: 1,\n\t\tquirks: [],\n\t\tstartingFeatures: [\n\t\t\tFeatureLogic.createTraitFeature('reptilian-start-1', TraitType.Speed, 1),\n\t\t\tFeatureLogic.createSkillFeature('reptilian-start-2', SkillType.Brawl, 2),\n\t\t\tFeatureLogic.createSkillFeature('reptilian-start-3', SkillType.Presence, 2)\n\t\t],\n\t\tfeatures: [\n\t\t\tFeatureLogic.createTraitFeature('reptilian-feature-1', TraitType.Speed, 1),\n\t\t\tFeatureLogic.createSkillFeature('reptilian-feature-2', SkillType.Brawl, 2),\n\t\t\tFeatureLogic.createSkillFeature('reptilian-feature-3', SkillType.Presence, 2),\n\t\t\tFeatureLogic.createDamageCategoryResistFeature('reptilian-feature-4', DamageCategoryType.Physical, 1),\n\t\t\tFeatureLogic.createDamageResistFeature('reptilian-feature-5', DamageType.Psychic, 2)\n\t\t],\n\t\tactions: [\n\t\t\t{\n\t\t\t\tid: 'reptilian-action-1',\n\t\t\t\tname: 'Breathe Fire',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.burst(ActionTargetType.Enemies, 1, 3)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: false,\n\t\t\t\t\t\tskill: SkillType.Brawl,\n\t\t\t\t\t\ttrait: TraitType.Speed,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.dealDamage(DamageType.Fire, 3)\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'reptilian-action-2',\n\t\t\t\tname: 'Regeneration',\n\t\t\t\tprerequisites: [\n\t\t\t\t\tActionPrerequisites.wound()\n\t\t\t\t],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.self()\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.healWounds(1)\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'reptilian-action-3',\n\t\t\t\tname: 'Intimidating Presence',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.burst(ActionTargetType.Enemies, Number.MAX_VALUE, 5)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: false,\n\t\t\t\t\t\tskill: SkillType.Presence,\n\t\t\t\t\t\ttrait: TraitType.Resolve,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.forceMovement(MovementType.Push, 1),\n\t\t\t\t\t\t\tActionEffects.stun()\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t}\n\t\t]\n\t});\n\n\tstatic shadowborn = (): SpeciesModel => ({\n\t\tid: 'species-shadowborn',\n\t\tname: 'Shadowborn',\n\t\tpackID: '',\n\t\tdescription: 'A humanoid with demonic heritage.',\n\t\ttype: CombatantType.Hero,\n\t\tsize: 1,\n\t\tquirks: [],\n\t\tstartingFeatures: [\n\t\t\tFeatureLogic.createTraitFeature('shadowborn-start-1', TraitType.Resolve, 1),\n\t\t\tFeatureLogic.createSkillFeature('shadowborn-start-2', SkillType.Brawl, 2),\n\t\t\tFeatureLogic.createSkillFeature('shadowborn-start-3', SkillType.Presence, 2),\n\t\t\tFeatureLogic.createSkillFeature('shadowborn-start-4', SkillType.Stealth, 2)\n\t\t],\n\t\tfeatures: [\n\t\t\tFeatureLogic.createTraitFeature('shadowborn-feature-1', TraitType.Resolve, 1),\n\t\t\tFeatureLogic.createSkillFeature('shadowborn-feature-2', SkillType.Brawl, 2),\n\t\t\tFeatureLogic.createSkillFeature('shadowborn-feature-3', SkillType.Presence, 2),\n\t\t\tFeatureLogic.createSkillFeature('shadowborn-feature-4', SkillType.Stealth, 2),\n\t\t\tFeatureLogic.createDamageCategoryResistFeature('shadowborn-feature-5', DamageCategoryType.Corruption, 1),\n\t\t\tFeatureLogic.createAuraDamageFeature('shadowborn-feature-6', ConditionType.AutoDamage, DamageType.Decay, 1)\n\t\t],\n\t\tactions: [\n\t\t\t{\n\t\t\t\tid: 'shadowborn-action-1',\n\t\t\t\tname: 'Transference',\n\t\t\t\tprerequisites: [\n\t\t\t\t\tActionPrerequisites.condition(TraitType.Any)\n\t\t\t\t],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.adjacent(ActionTargetType.Enemies, 1)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.transferCondition()\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'shadowborn-action-2',\n\t\t\t\tname: 'Drain Energy',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.adjacent(ActionTargetType.Enemies, 1)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: false,\n\t\t\t\t\t\tskill: SkillType.Presence,\n\t\t\t\t\t\ttrait: TraitType.Resolve,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.addCondition(ConditionLogic.createMovementPenaltyCondition(TraitType.Resolve, 5)),\n\t\t\t\t\t\t\tActionEffects.addCondition(ConditionLogic.createTraitPenaltyCondition(TraitType.Resolve, 2, TraitType.All)),\n\t\t\t\t\t\t\tActionEffects.addCondition(ConditionLogic.createSkillPenaltyCondition(TraitType.Resolve, 2, SkillType.All))\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'shadowborn-action-3',\n\t\t\t\tname: 'Intimidate',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.burst(ActionTargetType.Enemies, 1, 5)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: false,\n\t\t\t\t\t\tskill: SkillType.Presence,\n\t\t\t\t\t\ttrait: TraitType.Resolve,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.forceMovement(MovementType.Push, 1),\n\t\t\t\t\t\t\tActionEffects.stun()\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t}\n\t\t]\n\t});\n\n\tstatic werewolf = (): SpeciesModel => ({\n\t\tid: 'species-werewolf',\n\t\tname: 'Werewolf',\n\t\tpackID: PackData.beasts().id,\n\t\tdescription: 'A creature cursed with a wolf form.',\n\t\ttype: CombatantType.Hero,\n\t\tsize: 1,\n\t\tquirks: [],\n\t\tstartingFeatures: [\n\t\t\tFeatureLogic.createTraitFeature('werewolf-start-1', TraitType.Resolve, 1),\n\t\t\tFeatureLogic.createSkillFeature('werewolf-start-2', SkillType.Brawl, 2),\n\t\t\tFeatureLogic.createSkillFeature('werewolf-start-3', SkillType.Perception, 2),\n\t\t\tFeatureLogic.createSkillFeature('werewolf-start-4', SkillType.Stealth, 2)\n\t\t],\n\t\tfeatures: [\n\t\t\tFeatureLogic.createTraitFeature('werewolf-feature-1', TraitType.Resolve, 1),\n\t\t\tFeatureLogic.createSkillFeature('werewolf-feature-2', SkillType.Brawl, 2),\n\t\t\tFeatureLogic.createSkillFeature('werewolf-feature-3', SkillType.Perception, 2),\n\t\t\tFeatureLogic.createSkillFeature('werewolf-feature-4', SkillType.Stealth, 2)\n\t\t],\n\t\tactions: [\n\t\t\t{\n\t\t\t\tid: 'werewolf-action-1',\n\t\t\t\tname: 'Regeneration',\n\t\t\t\tprerequisites: [\n\t\t\t\t\tActionPrerequisites.damage()\n\t\t\t\t],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.self()\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.addCondition(ConditionLogic.createAutoHealCondition(TraitType.Endurance, 2))\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'werewolf-action-2',\n\t\t\t\tname: 'Bite',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.adjacent(ActionTargetType.Enemies, 1)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: false,\n\t\t\t\t\t\tskill: SkillType.Brawl,\n\t\t\t\t\t\ttrait: TraitType.Speed,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.dealDamage(DamageType.Piercing, 3)\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'werewolf-action-3',\n\t\t\t\tname: 'Rending Claws',\n\t\t\t\tprerequisites: [\n\t\t\t\t\tActionPrerequisites.emptyHand()\n\t\t\t\t],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.adjacent(ActionTargetType.Enemies, 1)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: false,\n\t\t\t\t\t\tskill: SkillType.Brawl,\n\t\t\t\t\t\ttrait: TraitType.Speed,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.dealDamage(DamageType.Edged, 3)\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t}\n\t\t]\n\t});\n\n\tstatic getList = (): SpeciesModel[] => {\n\t\tconst list = [\n\t\t\tHeroSpeciesData.human(),\n\t\t\tHeroSpeciesData.construct(),\n\t\t\tHeroSpeciesData.deva(),\n\t\t\tHeroSpeciesData.dwarf(),\n\t\t\tHeroSpeciesData.elf(),\n\t\t\tHeroSpeciesData.faun(),\n\t\t\tHeroSpeciesData.gnome(),\n\t\t\tHeroSpeciesData.minotaur(),\n\t\t\tHeroSpeciesData.pixie(),\n\t\t\tHeroSpeciesData.reptilian(),\n\t\t\tHeroSpeciesData.shadowborn(),\n\t\t\tHeroSpeciesData.werewolf()\n\t\t];\n\n\t\tlist.forEach(n => {\n\t\t\tn.startingFeatures = Collections.sort(n.startingFeatures, f => FeatureLogic.getFeatureTitle(f));\n\t\t\tn.features = Collections.sort(n.features, f => FeatureLogic.getFeatureTitle(f));\n\t\t\tn.actions = Collections.sort(n.actions, a => a.name);\n\t\t});\n\t\treturn Collections.sort(list, n => n.name);\n\t};\n}\n","import { PackData } from './pack-data';\n\nimport { DamageCategoryType } from '../enums/damage-category-type';\nimport { DamageType } from '../enums/damage-type';\nimport { ItemLocationType } from '../enums/item-location-type';\nimport { ItemProficiencyType } from '../enums/item-proficiency-type';\nimport { SkillCategoryType } from '../enums/skill-category-type';\nimport { TraitType } from '../enums/trait-type';\n\nimport { FeatureLogic } from '../logic/feature-logic';\n\nimport type { ItemModel } from '../models/item';\n\nimport { Collections } from '../utils/collections';\n\nexport class ItemData {\n\tstatic getList = (): ItemModel[] => {\n\t\tconst list: ItemModel[] = [\n\t\t\t{\n\t\t\t\tid: 'item-sword',\n\t\t\t\tname: 'Sword',\n\t\t\t\tpackID: '',\n\t\t\t\tdescription: 'Three feet long and sharp on both sides.',\n\t\t\t\tbaseItem: '',\n\t\t\t\tmagic: false,\n\t\t\t\tproficiency: ItemProficiencyType.MilitaryWeapons,\n\t\t\t\tlocation: ItemLocationType.Hand,\n\t\t\t\tslots: 1,\n\t\t\t\tweapon: {\n\t\t\t\t\tdamage: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttype: DamageType.Edged,\n\t\t\t\t\t\t\trank: 3\n\t\t\t\t\t\t}\n\t\t\t\t\t],\n\t\t\t\t\trange: 1,\n\t\t\t\t\tunreliable: 0\n\t\t\t\t},\n\t\t\t\tarmor: null,\n\t\t\t\tpotion: null,\n\t\t\t\tfeatures: [],\n\t\t\t\tactions: []\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'item-katana',\n\t\t\t\tname: 'Katana',\n\t\t\t\tpackID: '',\n\t\t\t\tdescription: 'An elegant single-edged blade with a slight curve.',\n\t\t\t\tbaseItem: '',\n\t\t\t\tmagic: false,\n\t\t\t\tproficiency: ItemProficiencyType.MilitaryWeapons,\n\t\t\t\tlocation: ItemLocationType.Hand,\n\t\t\t\tslots: 1,\n\t\t\t\tweapon: {\n\t\t\t\t\tdamage: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttype: DamageType.Edged,\n\t\t\t\t\t\t\trank: 3\n\t\t\t\t\t\t}\n\t\t\t\t\t],\n\t\t\t\t\trange: 1,\n\t\t\t\t\tunreliable: 0\n\t\t\t\t},\n\t\t\t\tarmor: null,\n\t\t\t\tpotion: null,\n\t\t\t\tfeatures: [],\n\t\t\t\tactions: []\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'item-scimitar',\n\t\t\t\tname: 'Scimitar',\n\t\t\t\tpackID: '',\n\t\t\t\tdescription: 'A wickedly-curved blade.',\n\t\t\t\tbaseItem: '',\n\t\t\t\tmagic: false,\n\t\t\t\tproficiency: ItemProficiencyType.MilitaryWeapons,\n\t\t\t\tlocation: ItemLocationType.Hand,\n\t\t\t\tslots: 1,\n\t\t\t\tweapon: {\n\t\t\t\t\tdamage: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttype: DamageType.Edged,\n\t\t\t\t\t\t\trank: 3\n\t\t\t\t\t\t}\n\t\t\t\t\t],\n\t\t\t\t\trange: 1,\n\t\t\t\t\tunreliable: 0\n\t\t\t\t},\n\t\t\t\tarmor: null,\n\t\t\t\tpotion: null,\n\t\t\t\tfeatures: [],\n\t\t\t\tactions: []\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'item-handaxe',\n\t\t\t\tname: 'Handaxe',\n\t\t\t\tpackID: '',\n\t\t\t\tdescription: 'A chopping blade at the end of a wooden haft.',\n\t\t\t\tbaseItem: '',\n\t\t\t\tmagic: false,\n\t\t\t\tproficiency: ItemProficiencyType.MilitaryWeapons,\n\t\t\t\tlocation: ItemLocationType.Hand,\n\t\t\t\tslots: 1,\n\t\t\t\tweapon: {\n\t\t\t\t\tdamage: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttype: DamageType.Edged,\n\t\t\t\t\t\t\trank: 3\n\t\t\t\t\t\t}\n\t\t\t\t\t],\n\t\t\t\t\trange: 1,\n\t\t\t\t\tunreliable: 0\n\t\t\t\t},\n\t\t\t\tarmor: null,\n\t\t\t\tpotion: null,\n\t\t\t\tfeatures: [],\n\t\t\t\tactions: []\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'item-khopesh',\n\t\t\t\tname: 'Khopesh',\n\t\t\t\tpackID: '',\n\t\t\t\tdescription: 'An intimidatingly-hooked sword.',\n\t\t\t\tbaseItem: '',\n\t\t\t\tmagic: false,\n\t\t\t\tproficiency: ItemProficiencyType.MilitaryWeapons,\n\t\t\t\tlocation: ItemLocationType.Hand,\n\t\t\t\tslots: 1,\n\t\t\t\tweapon: {\n\t\t\t\t\tdamage: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttype: DamageType.Edged,\n\t\t\t\t\t\t\trank: 3\n\t\t\t\t\t\t}\n\t\t\t\t\t],\n\t\t\t\t\trange: 1,\n\t\t\t\t\tunreliable: 0\n\t\t\t\t},\n\t\t\t\tarmor: null,\n\t\t\t\tpotion: null,\n\t\t\t\tfeatures: [],\n\t\t\t\tactions: []\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'item-mace',\n\t\t\t\tname: 'Mace',\n\t\t\t\tpackID: '',\n\t\t\t\tdescription: 'A simple bludgeoning weapon.',\n\t\t\t\tbaseItem: '',\n\t\t\t\tmagic: false,\n\t\t\t\tproficiency: ItemProficiencyType.MilitaryWeapons,\n\t\t\t\tlocation: ItemLocationType.Hand,\n\t\t\t\tslots: 1,\n\t\t\t\tweapon: {\n\t\t\t\t\tdamage: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttype: DamageType.Impact,\n\t\t\t\t\t\t\trank: 3\n\t\t\t\t\t\t}\n\t\t\t\t\t],\n\t\t\t\t\trange: 1,\n\t\t\t\t\tunreliable: 0\n\t\t\t\t},\n\t\t\t\tarmor: null,\n\t\t\t\tpotion: null,\n\t\t\t\tfeatures: [],\n\t\t\t\tactions: []\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'item-flail',\n\t\t\t\tname: 'Flail',\n\t\t\t\tpackID: '',\n\t\t\t\tdescription: 'A length of metal chain at the end of a wooden haft.',\n\t\t\t\tbaseItem: '',\n\t\t\t\tmagic: false,\n\t\t\t\tproficiency: ItemProficiencyType.MilitaryWeapons,\n\t\t\t\tlocation: ItemLocationType.Hand,\n\t\t\t\tslots: 1,\n\t\t\t\tweapon: {\n\t\t\t\t\tdamage: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttype: DamageType.Impact,\n\t\t\t\t\t\t\trank: 4\n\t\t\t\t\t\t}\n\t\t\t\t\t],\n\t\t\t\t\trange: 1,\n\t\t\t\t\tunreliable: 1\n\t\t\t\t},\n\t\t\t\tarmor: null,\n\t\t\t\tpotion: null,\n\t\t\t\tfeatures: [],\n\t\t\t\tactions: []\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'item-spear',\n\t\t\t\tname: 'Spear',\n\t\t\t\tpackID: '',\n\t\t\t\tdescription: 'A long haft, topped with a sharp metal point.',\n\t\t\t\tbaseItem: '',\n\t\t\t\tmagic: false,\n\t\t\t\tproficiency: ItemProficiencyType.MilitaryWeapons,\n\t\t\t\tlocation: ItemLocationType.Hand,\n\t\t\t\tslots: 1,\n\t\t\t\tweapon: {\n\t\t\t\t\tdamage: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttype: DamageType.Piercing,\n\t\t\t\t\t\t\trank: 2\n\t\t\t\t\t\t}\n\t\t\t\t\t],\n\t\t\t\t\trange: 2,\n\t\t\t\t\tunreliable: 0\n\t\t\t\t},\n\t\t\t\tarmor: null,\n\t\t\t\tpotion: null,\n\t\t\t\tfeatures: [],\n\t\t\t\tactions: []\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'item-mattock',\n\t\t\t\tname: 'Mattock',\n\t\t\t\tpackID: '',\n\t\t\t\tdescription: 'A smaller, one-handed warhammer.',\n\t\t\t\tbaseItem: '',\n\t\t\t\tmagic: false,\n\t\t\t\tproficiency: ItemProficiencyType.MilitaryWeapons,\n\t\t\t\tlocation: ItemLocationType.Hand,\n\t\t\t\tslots: 1,\n\t\t\t\tweapon: {\n\t\t\t\t\tdamage: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttype: DamageType.Piercing,\n\t\t\t\t\t\t\trank: 3\n\t\t\t\t\t\t}\n\t\t\t\t\t],\n\t\t\t\t\trange: 1,\n\t\t\t\t\tunreliable: 0\n\t\t\t\t},\n\t\t\t\tarmor: null,\n\t\t\t\tpotion: null,\n\t\t\t\tfeatures: [],\n\t\t\t\tactions: []\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'item-rapier',\n\t\t\t\tname: 'Rapier',\n\t\t\t\tpackID: '',\n\t\t\t\tdescription: 'A sword with a thin, pointed blade.',\n\t\t\t\tbaseItem: '',\n\t\t\t\tmagic: false,\n\t\t\t\tproficiency: ItemProficiencyType.MilitaryWeapons,\n\t\t\t\tlocation: ItemLocationType.Hand,\n\t\t\t\tslots: 1,\n\t\t\t\tweapon: {\n\t\t\t\t\tdamage: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttype: DamageType.Piercing,\n\t\t\t\t\t\t\trank: 3\n\t\t\t\t\t\t}\n\t\t\t\t\t],\n\t\t\t\t\trange: 1,\n\t\t\t\t\tunreliable: 0\n\t\t\t\t},\n\t\t\t\tarmor: null,\n\t\t\t\tpotion: null,\n\t\t\t\tfeatures: [],\n\t\t\t\tactions: []\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'item-greatsword',\n\t\t\t\tname: 'Greatsword',\n\t\t\t\tpackID: '',\n\t\t\t\tdescription: 'A large, two-handed sword.',\n\t\t\t\tbaseItem: '',\n\t\t\t\tmagic: false,\n\t\t\t\tproficiency: ItemProficiencyType.LargeWeapons,\n\t\t\t\tlocation: ItemLocationType.Hand,\n\t\t\t\tslots: 2,\n\t\t\t\tweapon: {\n\t\t\t\t\tdamage: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttype: DamageType.Edged,\n\t\t\t\t\t\t\trank: 5\n\t\t\t\t\t\t}\n\t\t\t\t\t],\n\t\t\t\t\trange: 1,\n\t\t\t\t\tunreliable: 0\n\t\t\t\t},\n\t\t\t\tarmor: null,\n\t\t\t\tpotion: null,\n\t\t\t\tfeatures: [],\n\t\t\t\tactions: []\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'item-battleaxe',\n\t\t\t\tname: 'Battleaxe',\n\t\t\t\tpackID: '',\n\t\t\t\tdescription: 'A heavy axe that requires two hands to wield it.',\n\t\t\t\tbaseItem: '',\n\t\t\t\tmagic: false,\n\t\t\t\tproficiency: ItemProficiencyType.LargeWeapons,\n\t\t\t\tlocation: ItemLocationType.Hand,\n\t\t\t\tslots: 2,\n\t\t\t\tweapon: {\n\t\t\t\t\tdamage: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttype: DamageType.Edged,\n\t\t\t\t\t\t\trank: 5\n\t\t\t\t\t\t}\n\t\t\t\t\t],\n\t\t\t\t\trange: 1,\n\t\t\t\t\tunreliable: 0\n\t\t\t\t},\n\t\t\t\tarmor: null,\n\t\t\t\tpotion: null,\n\t\t\t\tfeatures: [],\n\t\t\t\tactions: []\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'item-glaive',\n\t\t\t\tname: 'Glaive',\n\t\t\t\tpackID: '',\n\t\t\t\tdescription: 'A sword blade mounted at the end of a long haft.',\n\t\t\t\tbaseItem: '',\n\t\t\t\tmagic: false,\n\t\t\t\tproficiency: ItemProficiencyType.LargeWeapons,\n\t\t\t\tlocation: ItemLocationType.Hand,\n\t\t\t\tslots: 2,\n\t\t\t\tweapon: {\n\t\t\t\t\tdamage: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttype: DamageType.Edged,\n\t\t\t\t\t\t\trank: 4\n\t\t\t\t\t\t}\n\t\t\t\t\t],\n\t\t\t\t\trange: 2,\n\t\t\t\t\tunreliable: 0\n\t\t\t\t},\n\t\t\t\tarmor: null,\n\t\t\t\tpotion: null,\n\t\t\t\tfeatures: [],\n\t\t\t\tactions: []\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'item-warhammer',\n\t\t\t\tname: 'Warhammer',\n\t\t\t\tpackID: '',\n\t\t\t\tdescription: 'A heavy, blunt-faced crushing weapon.',\n\t\t\t\tbaseItem: '',\n\t\t\t\tmagic: false,\n\t\t\t\tproficiency: ItemProficiencyType.LargeWeapons,\n\t\t\t\tlocation: ItemLocationType.Hand,\n\t\t\t\tslots: 2,\n\t\t\t\tweapon: {\n\t\t\t\t\tdamage: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttype: DamageType.Impact,\n\t\t\t\t\t\t\trank: 5\n\t\t\t\t\t\t}\n\t\t\t\t\t],\n\t\t\t\t\trange: 1,\n\t\t\t\t\tunreliable: 0\n\t\t\t\t},\n\t\t\t\tarmor: null,\n\t\t\t\tpotion: null,\n\t\t\t\tfeatures: [],\n\t\t\t\tactions: []\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'item-quarterstaff',\n\t\t\t\tname: 'Quarterstaff',\n\t\t\t\tpackID: '',\n\t\t\t\tdescription: 'A sturdy wooden stick, as tall as a person.',\n\t\t\t\tbaseItem: '',\n\t\t\t\tmagic: false,\n\t\t\t\tproficiency: ItemProficiencyType.LargeWeapons,\n\t\t\t\tlocation: ItemLocationType.Hand,\n\t\t\t\tslots: 2,\n\t\t\t\tweapon: {\n\t\t\t\t\tdamage: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttype: DamageType.Impact,\n\t\t\t\t\t\t\trank: 5\n\t\t\t\t\t\t}\n\t\t\t\t\t],\n\t\t\t\t\trange: 1,\n\t\t\t\t\tunreliable: 0\n\t\t\t\t},\n\t\t\t\tarmor: null,\n\t\t\t\tpotion: null,\n\t\t\t\tfeatures: [],\n\t\t\t\tactions: []\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'item-pike',\n\t\t\t\tname: 'Pike',\n\t\t\t\tpackID: '',\n\t\t\t\tdescription: 'A spear point mounted at the end of a long haft.',\n\t\t\t\tbaseItem: '',\n\t\t\t\tmagic: false,\n\t\t\t\tproficiency: ItemProficiencyType.LargeWeapons,\n\t\t\t\tlocation: ItemLocationType.Hand,\n\t\t\t\tslots: 2,\n\t\t\t\tweapon: {\n\t\t\t\t\tdamage: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttype: DamageType.Piercing,\n\t\t\t\t\t\t\trank: 4\n\t\t\t\t\t\t}\n\t\t\t\t\t],\n\t\t\t\t\trange: 2,\n\t\t\t\t\tunreliable: 0\n\t\t\t\t},\n\t\t\t\tarmor: null,\n\t\t\t\tpotion: null,\n\t\t\t\tfeatures: [],\n\t\t\t\tactions: []\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'item-halberd',\n\t\t\t\tname: 'Halberd',\n\t\t\t\tpackID: '',\n\t\t\t\tdescription: 'An axe blade mounted at the end of a long haft.',\n\t\t\t\tbaseItem: '',\n\t\t\t\tmagic: false,\n\t\t\t\tproficiency: ItemProficiencyType.LargeWeapons,\n\t\t\t\tlocation: ItemLocationType.Hand,\n\t\t\t\tslots: 2,\n\t\t\t\tweapon: {\n\t\t\t\t\tdamage: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttype: DamageType.Edged,\n\t\t\t\t\t\t\trank: 4\n\t\t\t\t\t\t}\n\t\t\t\t\t],\n\t\t\t\t\trange: 2,\n\t\t\t\t\tunreliable: 0\n\t\t\t\t},\n\t\t\t\tarmor: null,\n\t\t\t\tpotion: null,\n\t\t\t\tfeatures: [],\n\t\t\t\tactions: []\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'item-trident',\n\t\t\t\tname: 'Trident',\n\t\t\t\tpackID: '',\n\t\t\t\tdescription: 'A three-pronged spear.',\n\t\t\t\tbaseItem: '',\n\t\t\t\tmagic: false,\n\t\t\t\tproficiency: ItemProficiencyType.LargeWeapons,\n\t\t\t\tlocation: ItemLocationType.Hand,\n\t\t\t\tslots: 2,\n\t\t\t\tweapon: {\n\t\t\t\t\tdamage: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttype: DamageType.Piercing,\n\t\t\t\t\t\t\trank: 5\n\t\t\t\t\t\t}\n\t\t\t\t\t],\n\t\t\t\t\trange: 1,\n\t\t\t\t\tunreliable: 0\n\t\t\t\t},\n\t\t\t\tarmor: null,\n\t\t\t\tpotion: null,\n\t\t\t\tfeatures: [],\n\t\t\t\tactions: []\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'item-dagger',\n\t\t\t\tname: 'Daggers',\n\t\t\t\tpackID: '',\n\t\t\t\tdescription: 'Simple small blades, easily hidden.',\n\t\t\t\tbaseItem: '',\n\t\t\t\tmagic: false,\n\t\t\t\tproficiency: ItemProficiencyType.PairedWeapons,\n\t\t\t\tlocation: ItemLocationType.Hand,\n\t\t\t\tslots: 2,\n\t\t\t\tweapon: {\n\t\t\t\t\tdamage: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttype: DamageType.Edged,\n\t\t\t\t\t\t\trank: 2\n\t\t\t\t\t\t}\n\t\t\t\t\t],\n\t\t\t\t\trange: 1,\n\t\t\t\t\tunreliable: 0\n\t\t\t\t},\n\t\t\t\tarmor: null,\n\t\t\t\tpotion: null,\n\t\t\t\tfeatures: [],\n\t\t\t\tactions: []\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'item-sai',\n\t\t\t\tname: 'Sais',\n\t\t\t\tpackID: '',\n\t\t\t\tdescription: 'Pointed daggers with sharp side-prongs.',\n\t\t\t\tbaseItem: '',\n\t\t\t\tmagic: false,\n\t\t\t\tproficiency: ItemProficiencyType.PairedWeapons,\n\t\t\t\tlocation: ItemLocationType.Hand,\n\t\t\t\tslots: 2,\n\t\t\t\tweapon: {\n\t\t\t\t\tdamage: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttype: DamageType.Piercing,\n\t\t\t\t\t\t\trank: 2\n\t\t\t\t\t\t}\n\t\t\t\t\t],\n\t\t\t\t\trange: 1,\n\t\t\t\t\tunreliable: 0\n\t\t\t\t},\n\t\t\t\tarmor: null,\n\t\t\t\tpotion: null,\n\t\t\t\tfeatures: [],\n\t\t\t\tactions: []\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'item-tonfas',\n\t\t\t\tname: 'Tonfas',\n\t\t\t\tpackID: '',\n\t\t\t\tdescription: 'Wooden batons with a perpendicular handle.',\n\t\t\t\tbaseItem: '',\n\t\t\t\tmagic: false,\n\t\t\t\tproficiency: ItemProficiencyType.PairedWeapons,\n\t\t\t\tlocation: ItemLocationType.Hand,\n\t\t\t\tslots: 2,\n\t\t\t\tweapon: {\n\t\t\t\t\tdamage: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttype: DamageType.Impact,\n\t\t\t\t\t\t\trank: 2\n\t\t\t\t\t\t}\n\t\t\t\t\t],\n\t\t\t\t\trange: 1,\n\t\t\t\t\tunreliable: 0\n\t\t\t\t},\n\t\t\t\tarmor: null,\n\t\t\t\tpotion: null,\n\t\t\t\tfeatures: [],\n\t\t\t\tactions: []\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'item-longbow',\n\t\t\t\tname: 'Longbow',\n\t\t\t\tpackID: '',\n\t\t\t\tdescription: 'Longbows loose arrows with great accuracy.',\n\t\t\t\tbaseItem: '',\n\t\t\t\tmagic: false,\n\t\t\t\tproficiency: ItemProficiencyType.RangedWeapons,\n\t\t\t\tlocation: ItemLocationType.Hand,\n\t\t\t\tslots: 2,\n\t\t\t\tweapon: {\n\t\t\t\t\tdamage: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttype: DamageType.Piercing,\n\t\t\t\t\t\t\trank: 3\n\t\t\t\t\t\t}\n\t\t\t\t\t],\n\t\t\t\t\trange: 15,\n\t\t\t\t\tunreliable: 0\n\t\t\t\t},\n\t\t\t\tarmor: null,\n\t\t\t\tpotion: null,\n\t\t\t\tfeatures: [],\n\t\t\t\tactions: []\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'item-crossbow',\n\t\t\t\tname: 'Crossbow',\n\t\t\t\tpackID: '',\n\t\t\t\tdescription: 'A device which can launch wooden bolts hundreds of feet.',\n\t\t\t\tbaseItem: '',\n\t\t\t\tmagic: false,\n\t\t\t\tproficiency: ItemProficiencyType.RangedWeapons,\n\t\t\t\tlocation: ItemLocationType.Hand,\n\t\t\t\tslots: 2,\n\t\t\t\tweapon: {\n\t\t\t\t\tdamage: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttype: DamageType.Piercing,\n\t\t\t\t\t\t\trank: 4\n\t\t\t\t\t\t}\n\t\t\t\t\t],\n\t\t\t\t\trange: 20,\n\t\t\t\t\tunreliable: 1\n\t\t\t\t},\n\t\t\t\tarmor: null,\n\t\t\t\tpotion: null,\n\t\t\t\tfeatures: [],\n\t\t\t\tactions: []\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'item-catapult',\n\t\t\t\tname: 'Catapult',\n\t\t\t\tpackID: '',\n\t\t\t\tdescription: 'A simple device for launching rocks and other small blunt projectiles.',\n\t\t\t\tbaseItem: '',\n\t\t\t\tmagic: false,\n\t\t\t\tproficiency: ItemProficiencyType.RangedWeapons,\n\t\t\t\tlocation: ItemLocationType.Hand,\n\t\t\t\tslots: 2,\n\t\t\t\tweapon: {\n\t\t\t\t\tdamage: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttype: DamageType.Impact,\n\t\t\t\t\t\t\trank: 3\n\t\t\t\t\t\t}\n\t\t\t\t\t],\n\t\t\t\t\trange: 10,\n\t\t\t\t\tunreliable: 1\n\t\t\t\t},\n\t\t\t\tarmor: null,\n\t\t\t\tpotion: null,\n\t\t\t\tfeatures: [],\n\t\t\t\tactions: []\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'item-rifle',\n\t\t\t\tname: 'Rifle',\n\t\t\t\tpackID: PackData.technology().id,\n\t\t\t\tdescription: 'A large gun that requires two hands to use.',\n\t\t\t\tbaseItem: '',\n\t\t\t\tmagic: false,\n\t\t\t\tproficiency: ItemProficiencyType.PowderWeapons,\n\t\t\t\tlocation: ItemLocationType.Hand,\n\t\t\t\tslots: 2,\n\t\t\t\tweapon: {\n\t\t\t\t\tdamage: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttype: DamageType.Piercing,\n\t\t\t\t\t\t\trank: 8\n\t\t\t\t\t\t}\n\t\t\t\t\t],\n\t\t\t\t\trange: 20,\n\t\t\t\t\tunreliable: 2\n\t\t\t\t},\n\t\t\t\tarmor: null,\n\t\t\t\tpotion: null,\n\t\t\t\tfeatures: [],\n\t\t\t\tactions: []\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'item-carbine',\n\t\t\t\tname: 'Carbine',\n\t\t\t\tpackID: PackData.technology().id,\n\t\t\t\tdescription: 'Smaller than a rifle, larger than a pistol.',\n\t\t\t\tbaseItem: '',\n\t\t\t\tmagic: false,\n\t\t\t\tproficiency: ItemProficiencyType.PowderWeapons,\n\t\t\t\tlocation: ItemLocationType.Hand,\n\t\t\t\tslots: 2,\n\t\t\t\tweapon: {\n\t\t\t\t\tdamage: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttype: DamageType.Piercing,\n\t\t\t\t\t\t\trank: 7\n\t\t\t\t\t\t}\n\t\t\t\t\t],\n\t\t\t\t\trange: 15,\n\t\t\t\t\tunreliable: 2\n\t\t\t\t},\n\t\t\t\tarmor: null,\n\t\t\t\tpotion: null,\n\t\t\t\tfeatures: [],\n\t\t\t\tactions: []\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'item-pistol',\n\t\t\t\tname: 'Pistol',\n\t\t\t\tpackID: '',\n\t\t\t\tdescription: 'A less powerful hand-held gun.',\n\t\t\t\tbaseItem: '',\n\t\t\t\tmagic: false,\n\t\t\t\tproficiency: ItemProficiencyType.PowderWeapons,\n\t\t\t\tlocation: ItemLocationType.Hand,\n\t\t\t\tslots: 1,\n\t\t\t\tweapon: {\n\t\t\t\t\tdamage: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttype: DamageType.Piercing,\n\t\t\t\t\t\t\trank: 6\n\t\t\t\t\t\t}\n\t\t\t\t\t],\n\t\t\t\t\trange: 10,\n\t\t\t\t\tunreliable: 2\n\t\t\t\t},\n\t\t\t\tarmor: null,\n\t\t\t\tpotion: null,\n\t\t\t\tfeatures: [],\n\t\t\t\tactions: []\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'item-orb',\n\t\t\t\tname: 'Orb',\n\t\t\t\tpackID: '',\n\t\t\t\tdescription: 'A crystal ball.',\n\t\t\t\tbaseItem: '',\n\t\t\t\tmagic: false,\n\t\t\t\tproficiency: ItemProficiencyType.Implements,\n\t\t\t\tlocation: ItemLocationType.Hand,\n\t\t\t\tslots: 1,\n\t\t\t\tweapon: null,\n\t\t\t\tarmor: null,\n\t\t\t\tpotion: null,\n\t\t\t\tfeatures: [],\n\t\t\t\tactions: []\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'item-wand',\n\t\t\t\tname: 'Wand',\n\t\t\t\tpackID: '',\n\t\t\t\tdescription: 'A small wooden rod.',\n\t\t\t\tbaseItem: '',\n\t\t\t\tmagic: false,\n\t\t\t\tproficiency: ItemProficiencyType.Implements,\n\t\t\t\tlocation: ItemLocationType.Hand,\n\t\t\t\tslots: 1,\n\t\t\t\tweapon: null,\n\t\t\t\tarmor: null,\n\t\t\t\tpotion: null,\n\t\t\t\tfeatures: [],\n\t\t\t\tactions: []\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'item-tome',\n\t\t\t\tname: 'Tome',\n\t\t\t\tpackID: '',\n\t\t\t\tdescription: 'A spellbook or grimoire.',\n\t\t\t\tbaseItem: '',\n\t\t\t\tmagic: false,\n\t\t\t\tproficiency: ItemProficiencyType.Implements,\n\t\t\t\tlocation: ItemLocationType.Hand,\n\t\t\t\tslots: 2,\n\t\t\t\tweapon: null,\n\t\t\t\tarmor: null,\n\t\t\t\tpotion: null,\n\t\t\t\tfeatures: [],\n\t\t\t\tactions: []\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'item-amulet',\n\t\t\t\tname: 'Amulet',\n\t\t\t\tpackID: '',\n\t\t\t\tdescription: 'A magical symbol worn around the neck.',\n\t\t\t\tbaseItem: '',\n\t\t\t\tmagic: false,\n\t\t\t\tproficiency: ItemProficiencyType.Implements,\n\t\t\t\tlocation: ItemLocationType.Neck,\n\t\t\t\tslots: 1,\n\t\t\t\tweapon: null,\n\t\t\t\tarmor: null,\n\t\t\t\tpotion: null,\n\t\t\t\tfeatures: [],\n\t\t\t\tactions: []\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'item-staff',\n\t\t\t\tname: 'Staff',\n\t\t\t\tpackID: '',\n\t\t\t\tdescription: 'A magical walking stick.',\n\t\t\t\tbaseItem: '',\n\t\t\t\tmagic: false,\n\t\t\t\tproficiency: ItemProficiencyType.Implements,\n\t\t\t\tlocation: ItemLocationType.Hand,\n\t\t\t\tslots: 2,\n\t\t\t\tweapon: null,\n\t\t\t\tarmor: null,\n\t\t\t\tpotion: null,\n\t\t\t\tfeatures: [],\n\t\t\t\tactions: []\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'item-leather-armor',\n\t\t\t\tname: 'Leather Armor',\n\t\t\t\tpackID: '',\n\t\t\t\tdescription: 'Armor made of tanned animal skin.',\n\t\t\t\tbaseItem: '',\n\t\t\t\tmagic: false,\n\t\t\t\tproficiency: ItemProficiencyType.LightArmor,\n\t\t\t\tlocation: ItemLocationType.Body,\n\t\t\t\tslots: 1,\n\t\t\t\tweapon: null,\n\t\t\t\tarmor: {\n\t\t\t\t\tfeatures: [\n\t\t\t\t\t\tFeatureLogic.createDamageCategoryResistFeature('leatherarmour-1', DamageCategoryType.Physical, 1)\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\tpotion: null,\n\t\t\t\tfeatures: [],\n\t\t\t\tactions: []\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'item-hide-armor',\n\t\t\t\tname: 'Hide Armor',\n\t\t\t\tpackID: '',\n\t\t\t\tdescription: 'The thick hide of a beast, used as armor.',\n\t\t\t\tbaseItem: '',\n\t\t\t\tmagic: false,\n\t\t\t\tproficiency: ItemProficiencyType.LightArmor,\n\t\t\t\tlocation: ItemLocationType.Body,\n\t\t\t\tslots: 1,\n\t\t\t\tweapon: null,\n\t\t\t\tarmor: {\n\t\t\t\t\tfeatures: [\n\t\t\t\t\t\tFeatureLogic.createDamageCategoryResistFeature('hidearmour-1', DamageCategoryType.Physical, 2),\n\t\t\t\t\t\tFeatureLogic.createSkillCategoryFeature('hidearmour-2', SkillCategoryType.Physical, -1)\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\tpotion: null,\n\t\t\t\tfeatures: [],\n\t\t\t\tactions: []\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'item-brigandine-armor',\n\t\t\t\tname: 'Brigandine Armor',\n\t\t\t\tpackID: '',\n\t\t\t\tdescription: 'Armor made of small metal plates sewn into fabric.',\n\t\t\t\tbaseItem: '',\n\t\t\t\tmagic: false,\n\t\t\t\tproficiency: ItemProficiencyType.LightArmor,\n\t\t\t\tlocation: ItemLocationType.Body,\n\t\t\t\tslots: 1,\n\t\t\t\tweapon: null,\n\t\t\t\tarmor: {\n\t\t\t\t\tfeatures: [\n\t\t\t\t\t\tFeatureLogic.createDamageCategoryResistFeature('brigandinearmour-1', DamageCategoryType.Physical, 3),\n\t\t\t\t\t\tFeatureLogic.createSkillCategoryFeature('brigandinearmour-2', SkillCategoryType.Physical, -1),\n\t\t\t\t\t\tFeatureLogic.createTraitFeature('brigandinearmour-3', TraitType.Speed, -1)\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\tpotion: null,\n\t\t\t\tfeatures: [],\n\t\t\t\tactions: []\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'item-breastplate',\n\t\t\t\tname: 'Breastplate',\n\t\t\t\tpackID: '',\n\t\t\t\tdescription: 'Armor for the torso, made of leather or metal.',\n\t\t\t\tbaseItem: '',\n\t\t\t\tmagic: false,\n\t\t\t\tproficiency: ItemProficiencyType.LightArmor,\n\t\t\t\tlocation: ItemLocationType.Body,\n\t\t\t\tslots: 1,\n\t\t\t\tweapon: null,\n\t\t\t\tarmor: {\n\t\t\t\t\tfeatures: [\n\t\t\t\t\t\tFeatureLogic.createDamageCategoryResistFeature('brigandinearmour-1', DamageCategoryType.Physical, 3),\n\t\t\t\t\t\tFeatureLogic.createSkillCategoryFeature('brigandinearmour-2', SkillCategoryType.Physical, -2)\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\tpotion: null,\n\t\t\t\tfeatures: [],\n\t\t\t\tactions: []\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'item-chain-armor',\n\t\t\t\tname: 'Chain Armor',\n\t\t\t\tpackID: '',\n\t\t\t\tdescription: 'Armor made of tiny interwoven metal rings.',\n\t\t\t\tbaseItem: '',\n\t\t\t\tmagic: false,\n\t\t\t\tproficiency: ItemProficiencyType.HeavyArmor,\n\t\t\t\tlocation: ItemLocationType.Body,\n\t\t\t\tslots: 1,\n\t\t\t\tweapon: null,\n\t\t\t\tarmor: {\n\t\t\t\t\tfeatures: [\n\t\t\t\t\t\tFeatureLogic.createDamageCategoryResistFeature('chainarmour-1', DamageCategoryType.Physical, 4),\n\t\t\t\t\t\tFeatureLogic.createSkillCategoryFeature('chainarmour-2', SkillCategoryType.Physical, -2),\n\t\t\t\t\t\tFeatureLogic.createTraitFeature('chainarmour-3', TraitType.Speed, -1)\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\tpotion: null,\n\t\t\t\tfeatures: [],\n\t\t\t\tactions: []\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'item-plate-armor',\n\t\t\t\tname: 'Plate Armor',\n\t\t\t\tpackID: '',\n\t\t\t\tdescription: 'Armor made of jointed sheets of metal.',\n\t\t\t\tbaseItem: '',\n\t\t\t\tmagic: false,\n\t\t\t\tproficiency: ItemProficiencyType.HeavyArmor,\n\t\t\t\tlocation: ItemLocationType.Body,\n\t\t\t\tslots: 1,\n\t\t\t\tweapon: null,\n\t\t\t\tarmor: {\n\t\t\t\t\tfeatures: [\n\t\t\t\t\t\tFeatureLogic.createDamageCategoryResistFeature('platearmor-1', DamageCategoryType.Physical, 5),\n\t\t\t\t\t\tFeatureLogic.createSkillCategoryFeature('platearmor-2', SkillCategoryType.Physical, -2),\n\t\t\t\t\t\tFeatureLogic.createTraitFeature('platearmor-3', TraitType.Speed, -2)\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\tpotion: null,\n\t\t\t\tfeatures: [],\n\t\t\t\tactions: []\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'item-shield',\n\t\t\t\tname: 'Shield',\n\t\t\t\tpackID: '',\n\t\t\t\tdescription: 'A small shield, often worn strapped to the arm.',\n\t\t\t\tbaseItem: '',\n\t\t\t\tmagic: false,\n\t\t\t\tproficiency: ItemProficiencyType.Shields,\n\t\t\t\tlocation: ItemLocationType.Hand,\n\t\t\t\tslots: 1,\n\t\t\t\tweapon: null,\n\t\t\t\tarmor: {\n\t\t\t\t\tfeatures: [\n\t\t\t\t\t\tFeatureLogic.createDamageCategoryResistFeature('shield-1', DamageCategoryType.Physical, 1)\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\tpotion: null,\n\t\t\t\tfeatures: [],\n\t\t\t\tactions: []\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'item-tower-shield',\n\t\t\t\tname: 'Tower shield',\n\t\t\t\tpackID: '',\n\t\t\t\tdescription: 'A larger shield, more protective but cumbersome.',\n\t\t\t\tbaseItem: '',\n\t\t\t\tmagic: false,\n\t\t\t\tproficiency: ItemProficiencyType.Shields,\n\t\t\t\tlocation: ItemLocationType.Hand,\n\t\t\t\tslots: 1,\n\t\t\t\tweapon: null,\n\t\t\t\tarmor: {\n\t\t\t\t\tfeatures: [\n\t\t\t\t\t\tFeatureLogic.createDamageCategoryResistFeature('towershield-1', DamageCategoryType.Physical, 2),\n\t\t\t\t\t\tFeatureLogic.createSkillCategoryFeature('towershield-2', SkillCategoryType.Physical, -1)\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\tpotion: null,\n\t\t\t\tfeatures: [],\n\t\t\t\tactions: []\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'item-helm',\n\t\t\t\tname: 'Helm',\n\t\t\t\tpackID: '',\n\t\t\t\tdescription: 'Ornamental headware.',\n\t\t\t\tbaseItem: '',\n\t\t\t\tmagic: false,\n\t\t\t\tproficiency: ItemProficiencyType.None,\n\t\t\t\tlocation: ItemLocationType.Head,\n\t\t\t\tslots: 1,\n\t\t\t\tweapon: null,\n\t\t\t\tarmor: null,\n\t\t\t\tpotion: null,\n\t\t\t\tfeatures: [],\n\t\t\t\tactions: []\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'item-circlet',\n\t\t\t\tname: 'Circlet',\n\t\t\t\tpackID: '',\n\t\t\t\tdescription: 'Ornamental headware.',\n\t\t\t\tbaseItem: '',\n\t\t\t\tmagic: false,\n\t\t\t\tproficiency: ItemProficiencyType.None,\n\t\t\t\tlocation: ItemLocationType.Head,\n\t\t\t\tslots: 1,\n\t\t\t\tweapon: null,\n\t\t\t\tarmor: null,\n\t\t\t\tpotion: null,\n\t\t\t\tfeatures: [],\n\t\t\t\tactions: []\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'item-crown',\n\t\t\t\tname: 'Crown',\n\t\t\t\tpackID: '',\n\t\t\t\tdescription: 'Ornamental headware.',\n\t\t\t\tbaseItem: '',\n\t\t\t\tmagic: false,\n\t\t\t\tproficiency: ItemProficiencyType.None,\n\t\t\t\tlocation: ItemLocationType.Head,\n\t\t\t\tslots: 1,\n\t\t\t\tweapon: null,\n\t\t\t\tarmor: null,\n\t\t\t\tpotion: null,\n\t\t\t\tfeatures: [],\n\t\t\t\tactions: []\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'item-tiara',\n\t\t\t\tname: 'Tiara',\n\t\t\t\tpackID: '',\n\t\t\t\tdescription: 'Ornamental headware.',\n\t\t\t\tbaseItem: '',\n\t\t\t\tmagic: false,\n\t\t\t\tproficiency: ItemProficiencyType.None,\n\t\t\t\tlocation: ItemLocationType.Head,\n\t\t\t\tslots: 1,\n\t\t\t\tweapon: null,\n\t\t\t\tarmor: null,\n\t\t\t\tpotion: null,\n\t\t\t\tfeatures: [],\n\t\t\t\tactions: []\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'item-diadem',\n\t\t\t\tname: 'Diadem',\n\t\t\t\tpackID: '',\n\t\t\t\tdescription: 'Ornamental headware.',\n\t\t\t\tbaseItem: '',\n\t\t\t\tmagic: false,\n\t\t\t\tproficiency: ItemProficiencyType.None,\n\t\t\t\tlocation: ItemLocationType.Head,\n\t\t\t\tslots: 1,\n\t\t\t\tweapon: null,\n\t\t\t\tarmor: null,\n\t\t\t\tpotion: null,\n\t\t\t\tfeatures: [],\n\t\t\t\tactions: []\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'item-belt',\n\t\t\t\tname: 'Belt',\n\t\t\t\tpackID: '',\n\t\t\t\tdescription: 'Leather strip worn around the waist.',\n\t\t\t\tbaseItem: '',\n\t\t\t\tmagic: false,\n\t\t\t\tproficiency: ItemProficiencyType.None,\n\t\t\t\tlocation: ItemLocationType.Body,\n\t\t\t\tslots: 1,\n\t\t\t\tweapon: null,\n\t\t\t\tarmor: null,\n\t\t\t\tpotion: null,\n\t\t\t\tfeatures: [],\n\t\t\t\tactions: []\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'item-sash',\n\t\t\t\tname: 'Sash',\n\t\t\t\tpackID: '',\n\t\t\t\tdescription: 'Strip of fabric worn across the body.',\n\t\t\t\tbaseItem: '',\n\t\t\t\tmagic: false,\n\t\t\t\tproficiency: ItemProficiencyType.None,\n\t\t\t\tlocation: ItemLocationType.Body,\n\t\t\t\tslots: 1,\n\t\t\t\tweapon: null,\n\t\t\t\tarmor: null,\n\t\t\t\tpotion: null,\n\t\t\t\tfeatures: [],\n\t\t\t\tactions: []\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'item-bandolier',\n\t\t\t\tname: 'Bandolier',\n\t\t\t\tpackID: '',\n\t\t\t\tdescription: 'A belt or sash with pockets.',\n\t\t\t\tbaseItem: '',\n\t\t\t\tmagic: false,\n\t\t\t\tproficiency: ItemProficiencyType.None,\n\t\t\t\tlocation: ItemLocationType.Body,\n\t\t\t\tslots: 1,\n\t\t\t\tweapon: null,\n\t\t\t\tarmor: null,\n\t\t\t\tpotion: null,\n\t\t\t\tfeatures: [],\n\t\t\t\tactions: []\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'item-cloak',\n\t\t\t\tname: 'Cloak',\n\t\t\t\tpackID: '',\n\t\t\t\tdescription: 'Garment which is fastened around the shoulders, sometimes magical.',\n\t\t\t\tbaseItem: '',\n\t\t\t\tmagic: false,\n\t\t\t\tproficiency: ItemProficiencyType.None,\n\t\t\t\tlocation: ItemLocationType.Neck,\n\t\t\t\tslots: 1,\n\t\t\t\tweapon: null,\n\t\t\t\tarmor: null,\n\t\t\t\tpotion: null,\n\t\t\t\tfeatures: [],\n\t\t\t\tactions: []\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'item-torc',\n\t\t\t\tname: 'Torc',\n\t\t\t\tpackID: '',\n\t\t\t\tdescription: 'Ornamental neckwear.',\n\t\t\t\tbaseItem: '',\n\t\t\t\tmagic: false,\n\t\t\t\tproficiency: ItemProficiencyType.None,\n\t\t\t\tlocation: ItemLocationType.Neck,\n\t\t\t\tslots: 1,\n\t\t\t\tweapon: null,\n\t\t\t\tarmor: null,\n\t\t\t\tpotion: null,\n\t\t\t\tfeatures: [],\n\t\t\t\tactions: []\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'item-necklace',\n\t\t\t\tname: 'Necklace',\n\t\t\t\tpackID: '',\n\t\t\t\tdescription: 'Ornamental neckwear.',\n\t\t\t\tbaseItem: '',\n\t\t\t\tmagic: false,\n\t\t\t\tproficiency: ItemProficiencyType.None,\n\t\t\t\tlocation: ItemLocationType.Neck,\n\t\t\t\tslots: 1,\n\t\t\t\tweapon: null,\n\t\t\t\tarmor: null,\n\t\t\t\tpotion: null,\n\t\t\t\tfeatures: [],\n\t\t\t\tactions: []\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'item-ring',\n\t\t\t\tname: 'Ring',\n\t\t\t\tpackID: '',\n\t\t\t\tdescription: 'Worn on the fingers.',\n\t\t\t\tbaseItem: '',\n\t\t\t\tmagic: false,\n\t\t\t\tproficiency: ItemProficiencyType.None,\n\t\t\t\tlocation: ItemLocationType.Ring,\n\t\t\t\tslots: 1,\n\t\t\t\tweapon: null,\n\t\t\t\tarmor: null,\n\t\t\t\tpotion: null,\n\t\t\t\tfeatures: [],\n\t\t\t\tactions: []\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'item-boots',\n\t\t\t\tname: 'Boots',\n\t\t\t\tpackID: '',\n\t\t\t\tdescription: 'Footwear.',\n\t\t\t\tbaseItem: '',\n\t\t\t\tmagic: false,\n\t\t\t\tproficiency: ItemProficiencyType.None,\n\t\t\t\tlocation: ItemLocationType.Feet,\n\t\t\t\tslots: 1,\n\t\t\t\tweapon: null,\n\t\t\t\tarmor: null,\n\t\t\t\tpotion: null,\n\t\t\t\tfeatures: [],\n\t\t\t\tactions: []\n\t\t\t}\n\t\t];\n\n\t\treturn Collections.sort(list, n => n.name);\n\t};\n}\n","import { PackData } from './pack-data';\n\nimport { ActionTargetType } from '../enums/action-target-type';\nimport { ConditionType } from '../enums/condition-type';\nimport { DamageCategoryType } from '../enums/damage-category-type';\nimport { DamageType } from '../enums/damage-type';\nimport { EncounterMapSquareType } from '../enums/encounter-map-square-type';\nimport { ItemProficiencyType } from '../enums/item-proficiency-type';\nimport { MovementType } from '../enums/movement-type';\nimport { SkillCategoryType } from '../enums/skill-category-type';\nimport { SkillType } from '../enums/skill-type';\nimport { SummonType } from '../enums/summon-type';\nimport { TraitType } from '../enums/trait-type';\n\nimport { ActionEffects, ActionOriginParameters, ActionPrerequisites, ActionTargetParameters, ActionWeaponParameters } from '../logic/action-logic';\nimport { ConditionLogic } from '../logic/condition-logic';\nimport { FeatureLogic } from '../logic/feature-logic';\n\nimport type { RoleModel } from '../models/role';\n\nimport { Collections } from '../utils/collections';\n\nexport class RoleData {\n\tstatic arcanist = (): RoleModel => ({\n\t\tid: 'role-arcanist',\n\t\tname: 'Arcanist',\n\t\tpackID: '',\n\t\tdescription: 'Arcanists are magical generalists, able to create a wide range of effects.',\n\t\tstartingFeatures: [\n\t\t\tFeatureLogic.createTraitFeature('arcanist-start-1', TraitType.Resolve, 1),\n\t\t\tFeatureLogic.createSkillFeature('arcanist-start-2', SkillType.Spellcasting, 2),\n\t\t\tFeatureLogic.createProficiencyFeature('arcanist-start-3', ItemProficiencyType.Implements)\n\t\t],\n\t\tfeatures: [\n\t\t\tFeatureLogic.createTraitFeature('arcanist-feature-1', TraitType.Resolve, 1),\n\t\t\tFeatureLogic.createSkillFeature('arcanist-feature-2', SkillType.Spellcasting, 2),\n\t\t\tFeatureLogic.createDamageCategoryBonusFeature('arcanist-feature-3', DamageCategoryType.Energy, 1)\n\t\t],\n\t\tactions: [\n\t\t\t{\n\t\t\t\tid: 'arcanist-action-1',\n\t\t\t\tname: 'Arcane Shield',\n\t\t\t\tprerequisites: [\n\t\t\t\t\tActionPrerequisites.implement()\n\t\t\t\t],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.self()\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.addCondition(ConditionLogic.createDamageResistanceCondition(TraitType.Resolve, 5, DamageType.All))\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'arcanist-action-2',\n\t\t\t\tname: 'Arcane Armor',\n\t\t\t\tprerequisites: [\n\t\t\t\t\tActionPrerequisites.implement()\n\t\t\t\t],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.burst(ActionTargetType.Allies, 1, 10)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.addCondition(ConditionLogic.createDamageResistanceCondition(TraitType.Resolve, 5, DamageType.All))\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'arcanist-action-3',\n\t\t\t\tname: 'Arcane Force',\n\t\t\t\tprerequisites: [\n\t\t\t\t\tActionPrerequisites.implement()\n\t\t\t\t],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.burst(ActionTargetType.Enemies, 1, 10)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: false,\n\t\t\t\t\t\tskill: SkillType.Spellcasting,\n\t\t\t\t\t\ttrait: TraitType.Speed,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.dealDamage(DamageType.Impact, 2),\n\t\t\t\t\t\t\tActionEffects.forceMovement(MovementType.Push, 3)\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'arcanist-action-4',\n\t\t\t\tname: 'Arcane Arrow',\n\t\t\t\tprerequisites: [\n\t\t\t\t\tActionPrerequisites.implement()\n\t\t\t\t],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.burst(ActionTargetType.Enemies, 1, 10)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: false,\n\t\t\t\t\t\tskill: SkillType.Spellcasting,\n\t\t\t\t\t\ttrait: TraitType.Speed,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.dealDamage(DamageType.Electricity, 2),\n\t\t\t\t\t\t\tActionEffects.dealDamage(DamageType.Piercing, 2)\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'arcanist-action-5',\n\t\t\t\tname: 'Arcane Displacement',\n\t\t\t\tprerequisites: [\n\t\t\t\t\tActionPrerequisites.implement()\n\t\t\t\t],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.burst(ActionTargetType.Combatants, 1, 10)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.forceMovement(MovementType.Swap, 0),\n\t\t\t\t\tActionEffects.takeAnotherAction()\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'arcanist-action-6',\n\t\t\t\tname: 'Arcane Escape',\n\t\t\t\tprerequisites: [\n\t\t\t\t\tActionPrerequisites.implement()\n\t\t\t\t],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.self()\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.forceMovement(MovementType.Random, 10),\n\t\t\t\t\tActionEffects.takeAnotherAction()\n\t\t\t\t]\n\t\t\t}\n\t\t]\n\t});\n\n\tstatic artificer = (): RoleModel => ({\n\t\tid: 'role-artificer',\n\t\tname: 'Artificer',\n\t\tpackID: PackData.technology().id,\n\t\tdescription: 'A creator of magically-powered inventions.',\n\t\tstartingFeatures: [\n\t\t\tFeatureLogic.createTraitFeature('artificer-start-1', TraitType.Resolve, 1),\n\t\t\tFeatureLogic.createSkillFeature('artificer-start-2', SkillType.Spellcasting, 2)\n\t\t],\n\t\tfeatures: [\n\t\t\tFeatureLogic.createTraitFeature('artificer-feature-1', TraitType.Resolve, 1),\n\t\t\tFeatureLogic.createSkillFeature('artificer-feature-2', SkillType.Spellcasting, 2),\n\t\t\tFeatureLogic.createDamageCategoryBonusFeature('artificer-feature-3', DamageCategoryType.Energy, 1)\n\t\t],\n\t\tactions: [\n\t\t\t{\n\t\t\t\tid: 'artificer-action-1',\n\t\t\t\tname: 'Aetheric Gauntlet',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.adjacent(ActionTargetType.Enemies, 1)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: false,\n\t\t\t\t\t\tskill: SkillType.Spellcasting,\n\t\t\t\t\t\ttrait: TraitType.Speed,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.dealDamage(DamageType.Electricity, 3)\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'artificer-action-2',\n\t\t\t\tname: 'Voltaic Flux',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.adjacent(ActionTargetType.Enemies, Number.MAX_VALUE)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: false,\n\t\t\t\t\t\tskill: SkillType.Spellcasting,\n\t\t\t\t\t\ttrait: TraitType.Resolve,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.dealDamage(DamageType.Electricity, 3)\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'artificer-action-3',\n\t\t\t\tname: 'Supercharge',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.burst(ActionTargetType.Allies, 1, 5)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.addCondition(ConditionLogic.createDamageCategoryBonusCondition(TraitType.Endurance, 3, DamageCategoryType.Corruption)),\n\t\t\t\t\tActionEffects.addCondition(ConditionLogic.createDamageCategoryBonusCondition(TraitType.Endurance, 3, DamageCategoryType.Energy)),\n\t\t\t\t\tActionEffects.addCondition(ConditionLogic.createDamageCategoryBonusCondition(TraitType.Endurance, 3, DamageCategoryType.Physical))\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'artificer-action-4',\n\t\t\t\tname: 'Gravity Bomb',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionOriginParameters.distance(8),\n\t\t\t\t\tActionTargetParameters.burst(ActionTargetType.Combatants, Number.MAX_VALUE, 3)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: false,\n\t\t\t\t\t\tskill: SkillType.Spellcasting,\n\t\t\t\t\t\ttrait: TraitType.Endurance,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.forceMovement(MovementType.Pull, 3),\n\t\t\t\t\t\t\tActionEffects.knockDown()\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'artificer-action-5',\n\t\t\t\tname: 'Vitriolic Jet',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.burst(ActionTargetType.Enemies, 1, 3)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: false,\n\t\t\t\t\t\tskill: SkillType.Spellcasting,\n\t\t\t\t\t\ttrait: TraitType.Endurance,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.dealDamage(DamageType.Acid, 3)\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t}\n\t\t]\n\t});\n\n\tstatic assassin = (): RoleModel => ({\n\t\tid: 'role-assassin',\n\t\tname: 'Assassin',\n\t\tpackID: PackData.skullduggery().id,\n\t\tdescription: 'Assassins operate from the shadows, using poison to kill.',\n\t\tstartingFeatures: [\n\t\t\tFeatureLogic.createTraitFeature('assassin-start-1', TraitType.Speed, 1),\n\t\t\tFeatureLogic.createSkillFeature('assassin-start-2', SkillType.Stealth, 2),\n\t\t\tFeatureLogic.createSkillFeature('assassin-start-3', SkillType.Weapon, 2),\n\t\t\tFeatureLogic.createProficiencyFeature('assassin-start-4', ItemProficiencyType.PairedWeapons)\n\t\t],\n\t\tfeatures: [\n\t\t\tFeatureLogic.createTraitFeature('assassin-feature-1', TraitType.Speed, 1),\n\t\t\tFeatureLogic.createSkillFeature('assassin-feature-2', SkillType.Stealth, 2),\n\t\t\tFeatureLogic.createSkillFeature('assassin-feature-3', SkillType.Weapon, 2),\n\t\t\tFeatureLogic.createDamageBonusFeature('assassin-feature-4', DamageType.Poison, 2)\n\t\t],\n\t\tactions: [\n\t\t\t{\n\t\t\t\tid: 'assassin-action-1',\n\t\t\t\tname: 'Poison Strike',\n\t\t\t\tprerequisites: [\n\t\t\t\t\tActionPrerequisites.meleeWeapon()\n\t\t\t\t],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionWeaponParameters.melee(),\n\t\t\t\t\tActionTargetParameters.weapon(ActionTargetType.Enemies, 1, 0)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: true,\n\t\t\t\t\t\tskill: SkillType.Weapon,\n\t\t\t\t\t\ttrait: TraitType.Speed,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.dealWeaponDamage(),\n\t\t\t\t\t\t\tActionEffects.dealDamage(DamageType.Poison, 2),\n\t\t\t\t\t\t\tActionEffects.addCondition(ConditionLogic.createAutoDamageCondition(TraitType.Endurance, 3, DamageType.Poison))\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'assassin-action-2',\n\t\t\t\tname: 'Vanish',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.self()\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.hide(),\n\t\t\t\t\tActionEffects.takeAnotherAction()\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'assassin-action-3',\n\t\t\t\tname: 'Sneak Attack',\n\t\t\t\tprerequisites: [\n\t\t\t\t\tActionPrerequisites.meleeWeapon(),\n\t\t\t\t\tActionPrerequisites.hidden()\n\t\t\t\t],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionWeaponParameters.melee(),\n\t\t\t\t\tActionTargetParameters.weapon(ActionTargetType.Enemies, 1, 0)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: true,\n\t\t\t\t\t\tskill: SkillType.Weapon,\n\t\t\t\t\t\ttrait: TraitType.Speed,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.dealWeaponDamage(2),\n\t\t\t\t\t\t\tActionEffects.dealDamage(DamageType.Poison, 2)\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t}\n\t\t]\n\t});\n\n\tstatic barbarian = (): RoleModel => ({\n\t\tid: 'role-barbarian',\n\t\tname: 'Barbarian',\n\t\tpackID: '',\n\t\tdescription: 'Barbarians are warriors who attack recklessly, with no sense of self-preservation.',\n\t\tstartingFeatures: [\n\t\t\tFeatureLogic.createTraitFeature('barbarian-start-1', TraitType.Endurance, 1),\n\t\t\tFeatureLogic.createSkillFeature('barbarian-start-2', SkillType.Weapon, 2),\n\t\t\tFeatureLogic.createProficiencyFeature('barbarian-start-3', ItemProficiencyType.LargeWeapons),\n\t\t\tFeatureLogic.createProficiencyFeature('barbarian-start-4', ItemProficiencyType.LightArmor)\n\t\t],\n\t\tfeatures: [\n\t\t\tFeatureLogic.createTraitFeature('barbarian-feature-1', TraitType.Endurance, 1),\n\t\t\tFeatureLogic.createSkillFeature('barbarian-feature-2', SkillType.Weapon, 2),\n\t\t\tFeatureLogic.createDamageCategoryBonusFeature('barbarian-feature-3', DamageCategoryType.Physical, 1),\n\t\t\tFeatureLogic.createDamageCategoryResistFeature('barbarian-feature-4', DamageCategoryType.Physical, 1)\n\t\t],\n\t\tactions: [\n\t\t\t{\n\t\t\t\tid: 'barbarian-action-1',\n\t\t\t\tname: 'Overhead Strike',\n\t\t\t\tprerequisites: [\n\t\t\t\t\tActionPrerequisites.meleeWeapon()\n\t\t\t\t],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionWeaponParameters.melee(),\n\t\t\t\t\tActionTargetParameters.weapon(ActionTargetType.Enemies, 1, 0)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: true,\n\t\t\t\t\t\tskill: SkillType.Weapon,\n\t\t\t\t\t\ttrait: TraitType.Speed,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.dealWeaponDamage(),\n\t\t\t\t\t\t\tActionEffects.dealWeaponDamage()\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'barbarian-action-2',\n\t\t\t\tname: 'Knockdown Strike',\n\t\t\t\tprerequisites: [\n\t\t\t\t\tActionPrerequisites.meleeWeapon()\n\t\t\t\t],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionWeaponParameters.melee(),\n\t\t\t\t\tActionTargetParameters.weapon(ActionTargetType.Enemies, 1, 0)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: true,\n\t\t\t\t\t\tskill: SkillType.Weapon,\n\t\t\t\t\t\ttrait: TraitType.Speed,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.dealWeaponDamage(),\n\t\t\t\t\t\t\tActionEffects.knockDown()\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'barbarian-action-3',\n\t\t\t\tname: 'Stunning Strike',\n\t\t\t\tprerequisites: [\n\t\t\t\t\tActionPrerequisites.meleeWeapon()\n\t\t\t\t],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionWeaponParameters.melee(),\n\t\t\t\t\tActionTargetParameters.weapon(ActionTargetType.Enemies, 1, 0)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: true,\n\t\t\t\t\t\tskill: SkillType.Weapon,\n\t\t\t\t\t\ttrait: TraitType.Speed,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.dealWeaponDamage(),\n\t\t\t\t\t\t\tActionEffects.stun()\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'barbarian-action-4',\n\t\t\t\tname: 'Haymaker',\n\t\t\t\tprerequisites: [\n\t\t\t\t\tActionPrerequisites.meleeWeapon()\n\t\t\t\t],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionWeaponParameters.melee(),\n\t\t\t\t\tActionTargetParameters.weapon(ActionTargetType.Enemies, Number.MAX_VALUE, 0)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: true,\n\t\t\t\t\t\tskill: SkillType.Weapon,\n\t\t\t\t\t\ttrait: TraitType.Speed,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.dealWeaponDamage()\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'barbarian-action-5',\n\t\t\t\tname: 'Burst Through',\n\t\t\t\tprerequisites: [\n\t\t\t\t\tActionPrerequisites.meleeWeapon()\n\t\t\t\t],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionWeaponParameters.melee(),\n\t\t\t\t\tActionTargetParameters.weapon(ActionTargetType.Walls, Number.MAX_VALUE, 0)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.destroyWalls()\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'barbarian-action-6',\n\t\t\t\tname: 'Fury',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.self()\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.addCondition(ConditionLogic.createDamageCategoryBonusCondition(TraitType.Resolve, 5, DamageCategoryType.Physical))\n\t\t\t\t]\n\t\t\t}\n\t\t]\n\t});\n\n\tstatic centurion = (): RoleModel => ({\n\t\tid: 'role-centurion',\n\t\tname: 'Centurion',\n\t\tpackID: '',\n\t\tdescription: 'A master of the battlefield.',\n\t\tstartingFeatures: [\n\t\t\tFeatureLogic.createTraitFeature('centurion-start-1', TraitType.Endurance, 1),\n\t\t\tFeatureLogic.createSkillFeature('centurion-start-2', SkillType.Weapon, 2),\n\t\t\tFeatureLogic.createProficiencyFeature('centurion-start-3', ItemProficiencyType.MilitaryWeapons),\n\t\t\tFeatureLogic.createProficiencyFeature('centurion-start-4', ItemProficiencyType.HeavyArmor),\n\t\t\tFeatureLogic.createProficiencyFeature('centurion-start-5', ItemProficiencyType.Shields)\n\t\t],\n\t\tfeatures: [\n\t\t\tFeatureLogic.createTraitFeature('centurion-feature-1', TraitType.Endurance, 1),\n\t\t\tFeatureLogic.createSkillFeature('centurion-feature-2', SkillType.Weapon, 2),\n\t\t\tFeatureLogic.createDamageCategoryBonusFeature('centurion-feature-3', DamageCategoryType.Physical, 1)\n\t\t],\n\t\tactions: [\n\t\t\t{\n\t\t\t\tid: 'centurion-action-1',\n\t\t\t\tname: 'Charge',\n\t\t\t\tprerequisites: [\n\t\t\t\t\tActionPrerequisites.meleeWeapon()\n\t\t\t\t],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionWeaponParameters.melee(),\n\t\t\t\t\tActionTargetParameters.burst(ActionTargetType.Enemies, 1, 5)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.forceMovement(MovementType.TowardsTarget, 2),\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: true,\n\t\t\t\t\t\tskill: SkillType.Weapon,\n\t\t\t\t\t\ttrait: TraitType.Speed,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.dealWeaponDamage()\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'centurion-action-2',\n\t\t\t\tname: 'Precise Attack',\n\t\t\t\tprerequisites: [\n\t\t\t\t\tActionPrerequisites.meleeWeapon()\n\t\t\t\t],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionWeaponParameters.melee(),\n\t\t\t\t\tActionTargetParameters.weapon(ActionTargetType.Enemies, 1, 0)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: true,\n\t\t\t\t\t\tskill: SkillType.Weapon,\n\t\t\t\t\t\ttrait: TraitType.Speed,\n\t\t\t\t\t\tskillBonus: 2,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.dealWeaponDamage()\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'centurion-action-3',\n\t\t\t\tname: 'Disarm',\n\t\t\t\tprerequisites: [\n\t\t\t\t\tActionPrerequisites.meleeWeapon()\n\t\t\t\t],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionWeaponParameters.melee(),\n\t\t\t\t\tActionTargetParameters.weapon(ActionTargetType.Enemies, 1, 0)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: true,\n\t\t\t\t\t\tskill: SkillType.Weapon,\n\t\t\t\t\t\ttrait: TraitType.Speed,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.disarm()\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'centurion-action-4',\n\t\t\t\tname: 'Parrying Stance',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.self()\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.addCondition(ConditionLogic.createDamageResistanceCondition(TraitType.Endurance, 5, DamageType.All))\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'centurion-action-5',\n\t\t\t\tname: 'Shield Bash',\n\t\t\t\tprerequisites: [\n\t\t\t\t\tActionPrerequisites.shield()\n\t\t\t\t],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.adjacent(ActionTargetType.Enemies, 1)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: false,\n\t\t\t\t\t\tskill: SkillType.Weapon,\n\t\t\t\t\t\ttrait: TraitType.Speed,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.dealDamage(DamageType.Impact, 3),\n\t\t\t\t\t\t\tActionEffects.forceMovement(MovementType.Push, 1)\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'centurion-action-6',\n\t\t\t\tname: 'Sweeping Attack',\n\t\t\t\tprerequisites: [\n\t\t\t\t\tActionPrerequisites.meleeWeapon()\n\t\t\t\t],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionWeaponParameters.melee(),\n\t\t\t\t\tActionTargetParameters.weapon(ActionTargetType.Enemies, Number.MAX_VALUE, 0)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: true,\n\t\t\t\t\t\tskill: SkillType.Weapon,\n\t\t\t\t\t\ttrait: TraitType.Speed,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.dealWeaponDamage()\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t}\n\t\t]\n\t});\n\n\tstatic cleric = (): RoleModel => ({\n\t\tid: 'role-cleric',\n\t\tname: 'Cleric',\n\t\tpackID: PackData.faith().id,\n\t\tdescription: 'Clerics devote their lives to the gods, and receive power in return.',\n\t\tstartingFeatures: [\n\t\t\tFeatureLogic.createTraitFeature('cleric-start-1', TraitType.Resolve, 1),\n\t\t\tFeatureLogic.createSkillFeature('cleric-start-2', SkillType.Presence, 2)\n\t\t],\n\t\tfeatures: [\n\t\t\tFeatureLogic.createTraitFeature('cleric-feature-1', TraitType.Resolve, 1),\n\t\t\tFeatureLogic.createSkillFeature('cleric-feature-2', SkillType.Presence, 2),\n\t\t\tFeatureLogic.createDamageBonusFeature('cleric-feature-3', DamageType.Light, 2)\n\t\t],\n\t\tactions: [\n\t\t\t{\n\t\t\t\tid: 'cleric-action-1',\n\t\t\t\tname: 'Lay On Hands',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.adjacent(ActionTargetType.Allies, 1)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.healDamage(5),\n\t\t\t\t\tActionEffects.healWounds(1)\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'cleric-action-2',\n\t\t\t\tname: 'Sacrament',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.adjacent(ActionTargetType.Allies, Number.MAX_VALUE)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.removeCondition(TraitType.Any),\n\t\t\t\t\tActionEffects.healDamage(1),\n\t\t\t\t\tActionEffects.addCondition(ConditionLogic.createDamageResistanceCondition(TraitType.Resolve, 3, DamageType.All))\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'cleric-action-3',\n\t\t\t\tname: 'Holy Light',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.burst(ActionTargetType.Allies, Number.MAX_VALUE, 5)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.addCondition(ConditionLogic.createDamageResistanceCondition(TraitType.Resolve, 3, DamageType.All))\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'cleric-action-4',\n\t\t\t\tname: 'Bless',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.burst(ActionTargetType.Allies, 1, 5)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.addCondition(ConditionLogic.createTraitBonusCondition(TraitType.Resolve, 3, TraitType.Endurance)),\n\t\t\t\t\tActionEffects.addCondition(ConditionLogic.createTraitBonusCondition(TraitType.Resolve, 3, TraitType.Resolve)),\n\t\t\t\t\tActionEffects.addCondition(ConditionLogic.createTraitBonusCondition(TraitType.Resolve, 3, TraitType.Speed))\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'cleric-action-5',\n\t\t\t\tname: 'Divine Retribution',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.burst(ActionTargetType.Enemies, 1, 5)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: false,\n\t\t\t\t\t\tskill: SkillType.Presence,\n\t\t\t\t\t\ttrait: TraitType.Endurance,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.dealDamage(DamageType.Light, 3),\n\t\t\t\t\t\t\tActionEffects.dealDamage(DamageType.Fire, 3)\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t}\n\t\t]\n\t});\n\n\tstatic dervish = (): RoleModel => ({\n\t\tid: 'role-dervish',\n\t\tname: 'Dervish',\n\t\tpackID: '',\n\t\tdescription: 'Acrobatic warriors who leap and spin around the battlefield.',\n\t\tstartingFeatures: [\n\t\t\tFeatureLogic.createTraitFeature('dervish-start-1', TraitType.Speed, 1),\n\t\t\tFeatureLogic.createSkillFeature('dervish-start-2', SkillType.Weapon, 2),\n\t\t\tFeatureLogic.createProficiencyFeature('dervish-start-3', ItemProficiencyType.PairedWeapons),\n\t\t\tFeatureLogic.createProficiencyFeature('dervish-start-4', ItemProficiencyType.LightArmor)\n\t\t],\n\t\tfeatures: [\n\t\t\tFeatureLogic.createTraitFeature('dervish-feature-1', TraitType.Speed, 1),\n\t\t\tFeatureLogic.createSkillFeature('dervish-feature-2', SkillType.Weapon, 2)\n\t\t],\n\t\tactions: [\n\t\t\t{\n\t\t\t\tid: 'dervish-action-1',\n\t\t\t\tname: 'Dual Strike',\n\t\t\t\tprerequisites: [\n\t\t\t\t\tActionPrerequisites.meleeWeapon()\n\t\t\t\t],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionWeaponParameters.melee(),\n\t\t\t\t\tActionTargetParameters.weapon(ActionTargetType.Enemies, 1, 0)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: true,\n\t\t\t\t\t\tskill: SkillType.Weapon,\n\t\t\t\t\t\ttrait: TraitType.Speed,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.dealWeaponDamage()\n\t\t\t\t\t\t]\n\t\t\t\t\t}),\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: true,\n\t\t\t\t\t\tskill: SkillType.Weapon,\n\t\t\t\t\t\ttrait: TraitType.Speed,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.dealWeaponDamage()\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'dervish-action-2',\n\t\t\t\tname: 'Twin Attack',\n\t\t\t\tprerequisites: [\n\t\t\t\t\tActionPrerequisites.meleeWeapon()\n\t\t\t\t],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionWeaponParameters.melee(),\n\t\t\t\t\tActionTargetParameters.weapon(ActionTargetType.Enemies, 2, 0)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: true,\n\t\t\t\t\t\tskill: SkillType.Weapon,\n\t\t\t\t\t\ttrait: TraitType.Speed,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.dealWeaponDamage()\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'dervish-action-3',\n\t\t\t\tname: 'Whirlwind Strike',\n\t\t\t\tprerequisites: [\n\t\t\t\t\tActionPrerequisites.meleeWeapon()\n\t\t\t\t],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionWeaponParameters.melee(),\n\t\t\t\t\tActionTargetParameters.weapon(ActionTargetType.Enemies, Number.MAX_VALUE, 0)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: true,\n\t\t\t\t\t\tskill: SkillType.Weapon,\n\t\t\t\t\t\ttrait: TraitType.Speed,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.dealWeaponDamage()\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'dervish-action-4',\n\t\t\t\tname: 'Leaping Strike',\n\t\t\t\tprerequisites: [\n\t\t\t\t\tActionPrerequisites.meleeWeapon()\n\t\t\t\t],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionWeaponParameters.melee(),\n\t\t\t\t\tActionTargetParameters.weapon(ActionTargetType.Enemies, 1, 2)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.forceMovement(MovementType.TowardsTarget, 1),\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: true,\n\t\t\t\t\t\tskill: SkillType.Weapon,\n\t\t\t\t\t\ttrait: TraitType.Speed,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.dealWeaponDamage()\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'dervish-action-5',\n\t\t\t\tname: 'Dodging Stance',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.self()\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.addCondition(ConditionLogic.createTraitBonusCondition(TraitType.Endurance, 5, TraitType.Speed)),\n\t\t\t\t\tActionEffects.addCondition(ConditionLogic.createDamageResistanceCondition(TraitType.Endurance, 5, DamageType.All))\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'dervish-action-6',\n\t\t\t\tname: 'Off-Hand Strike',\n\t\t\t\tprerequisites: [\n\t\t\t\t\tActionPrerequisites.meleeWeapon()\n\t\t\t\t],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionWeaponParameters.melee(),\n\t\t\t\t\tActionTargetParameters.weapon(ActionTargetType.Enemies, 1, 0)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: true,\n\t\t\t\t\t\tskill: SkillType.Weapon,\n\t\t\t\t\t\ttrait: TraitType.Speed,\n\t\t\t\t\t\tskillBonus: -2,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.dealWeaponDamage()\n\t\t\t\t\t\t]\n\t\t\t\t\t}),\n\t\t\t\t\tActionEffects.takeAnotherAction()\n\t\t\t\t]\n\t\t\t}\n\t\t]\n\t});\n\n\tstatic druid = (): RoleModel => ({\n\t\tid: 'role-druid',\n\t\tname: 'Druid',\n\t\tpackID: PackData.fae().id,\n\t\tdescription: 'A wielder of the magic of the natural world.',\n\t\tstartingFeatures: [\n\t\t\tFeatureLogic.createTraitFeature('druid-start-1', TraitType.Resolve, 1),\n\t\t\tFeatureLogic.createSkillFeature('druid-start-2', SkillType.Spellcasting, 2)\n\t\t],\n\t\tfeatures: [\n\t\t\tFeatureLogic.createTraitFeature('druid-feature-1', TraitType.Resolve, 1),\n\t\t\tFeatureLogic.createSkillFeature('druid-feature-2', SkillType.Spellcasting, 2)\n\t\t],\n\t\tactions: [\n\t\t\t{\n\t\t\t\tid: 'druid-action-1',\n\t\t\t\tname: 'Animal Companion',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.self()\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.summon(SummonType.Beast)\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'druid-action-2',\n\t\t\t\tname: 'Stone to Dust',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.burst(ActionTargetType.Walls, 1, 10)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.addSquares()\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'druid-action-3',\n\t\t\t\tname: 'Sunlight',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.burst(ActionTargetType.Combatants, Number.MAX_VALUE, 5)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: false,\n\t\t\t\t\t\tskill: SkillType.Spellcasting,\n\t\t\t\t\t\ttrait: TraitType.Endurance,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.dealDamage(DamageType.Light, 2),\n\t\t\t\t\t\t\tActionEffects.stun()\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'druid-action-4',\n\t\t\t\tname: 'Nature\\'s Balm',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.burst(ActionTargetType.Allies, Number.MAX_VALUE, 5)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.healDamage(1),\n\t\t\t\t\tActionEffects.removeCondition(TraitType.Any)\n\t\t\t\t]\n\t\t\t}\n\t\t]\n\t});\n\n\tstatic elementalist = (): RoleModel => ({\n\t\tid: 'role-elementalist',\n\t\tname: 'Elementalist',\n\t\tpackID: PackData.elements().id,\n\t\tdescription: 'A master of manipulating the four elements.',\n\t\tstartingFeatures: [\n\t\t\tFeatureLogic.createTraitFeature('elementalist-start-1', TraitType.Resolve, 1),\n\t\t\tFeatureLogic.createSkillFeature('elementalist-start-2', SkillType.Spellcasting, 2),\n\t\t\tFeatureLogic.createProficiencyFeature('elementalist-start-3', ItemProficiencyType.Implements)\n\t\t],\n\t\tfeatures: [\n\t\t\tFeatureLogic.createTraitFeature('elementalist-feature-1', TraitType.Resolve, 1),\n\t\t\tFeatureLogic.createSkillFeature('elementalist-feature-2', SkillType.Spellcasting, 2),\n\t\t\tFeatureLogic.createDamageCategoryBonusFeature('elementalist-feature-3', DamageCategoryType.Energy, 1),\n\t\t\tFeatureLogic.createDamageCategoryResistFeature('elementalist-feature-4', DamageCategoryType.Energy, 1)\n\t\t],\n\t\tactions: [\n\t\t\t{\n\t\t\t\tid: 'elementalist-action-1',\n\t\t\t\tname: 'Summon Elemental',\n\t\t\t\tprerequisites: [\n\t\t\t\t\tActionPrerequisites.implement()\n\t\t\t\t],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.self()\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.summon(SummonType.Elemental)\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'elementalist-action-2',\n\t\t\t\tname: 'Ember',\n\t\t\t\tprerequisites: [\n\t\t\t\t\tActionPrerequisites.implement()\n\t\t\t\t],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.burst(ActionTargetType.Enemies, 1, 10)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: false,\n\t\t\t\t\t\tskill: SkillType.Spellcasting,\n\t\t\t\t\t\ttrait: TraitType.Speed,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.dealDamage(DamageType.Fire, 3),\n\t\t\t\t\t\t\tActionEffects.addCondition(ConditionLogic.createAutoDamageCondition(TraitType.Endurance, 2, DamageType.Fire))\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'elementalist-action-3',\n\t\t\t\tname: 'Rime',\n\t\t\t\tprerequisites: [\n\t\t\t\t\tActionPrerequisites.implement()\n\t\t\t\t],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.burst(ActionTargetType.Enemies, 1, 10)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: false,\n\t\t\t\t\t\tskill: SkillType.Spellcasting,\n\t\t\t\t\t\ttrait: TraitType.Speed,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.dealDamage(DamageType.Cold, 3),\n\t\t\t\t\t\t\tActionEffects.addCondition(ConditionLogic.createMovementPenaltyCondition(TraitType.Endurance, 3))\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'elementalist-action-4',\n\t\t\t\tname: 'Thunderbolt',\n\t\t\t\tprerequisites: [\n\t\t\t\t\tActionPrerequisites.implement()\n\t\t\t\t],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.burst(ActionTargetType.Enemies, 1, 10)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: false,\n\t\t\t\t\t\tskill: SkillType.Spellcasting,\n\t\t\t\t\t\ttrait: TraitType.Speed,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.dealDamage(DamageType.Electricity, 3),\n\t\t\t\t\t\t\tActionEffects.stun()\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'elementalist-action-5',\n\t\t\t\tname: 'Elemental Resistance',\n\t\t\t\tprerequisites: [\n\t\t\t\t\tActionPrerequisites.implement()\n\t\t\t\t],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.self()\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.addCondition(ConditionLogic.createDamageCategoryResistanceCondition(TraitType.Resolve, 5, DamageCategoryType.Energy))\n\t\t\t\t]\n\t\t\t}\n\t\t]\n\t});\n\n\tstatic enchanter = (): RoleModel => ({\n\t\tid: 'role-enchanter',\n\t\tname: 'Enchanter',\n\t\tpackID: PackData.arcana().id,\n\t\tdescription: 'Spellcasters who specialize in magic that confuses the senses.',\n\t\tstartingFeatures: [\n\t\t\tFeatureLogic.createTraitFeature('enchanter-start-1', TraitType.Resolve, 1),\n\t\t\tFeatureLogic.createSkillFeature('enchanter-start-2', SkillType.Spellcasting, 2),\n\t\t\tFeatureLogic.createProficiencyFeature('enchanter-start-3', ItemProficiencyType.Implements)\n\t\t],\n\t\tfeatures: [\n\t\t\tFeatureLogic.createTraitFeature('enchanter-feature-1', TraitType.Resolve, 1),\n\t\t\tFeatureLogic.createSkillFeature('enchanter-feature-2', SkillType.Spellcasting, 2),\n\t\t\tFeatureLogic.createDamageBonusFeature('enchanter-feature-3', DamageType.Psychic, 2),\n\t\t\tFeatureLogic.createDamageResistFeature('enchanter-feature-4', DamageType.Psychic, 2)\n\t\t],\n\t\tactions: [\n\t\t\t{\n\t\t\t\tid: 'enchanter-action-1',\n\t\t\t\tname: 'Hypnotic Suggestion',\n\t\t\t\tprerequisites: [\n\t\t\t\t\tActionPrerequisites.implement()\n\t\t\t\t],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.burst(ActionTargetType.Enemies, 1, 10)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: false,\n\t\t\t\t\t\tskill: SkillType.Spellcasting,\n\t\t\t\t\t\ttrait: TraitType.Resolve,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.commandAction()\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'enchanter-action-2',\n\t\t\t\tname: 'Bewilder',\n\t\t\t\tprerequisites: [\n\t\t\t\t\tActionPrerequisites.implement()\n\t\t\t\t],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.burst(ActionTargetType.Enemies, 1, 10)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: false,\n\t\t\t\t\t\tskill: SkillType.Spellcasting,\n\t\t\t\t\t\ttrait: TraitType.Resolve,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.stun()\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'enchanter-action-3',\n\t\t\t\tname: 'Induce Fear',\n\t\t\t\tprerequisites: [\n\t\t\t\t\tActionPrerequisites.implement()\n\t\t\t\t],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.burst(ActionTargetType.Enemies, 1, 10)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: false,\n\t\t\t\t\t\tskill: SkillType.Spellcasting,\n\t\t\t\t\t\ttrait: TraitType.Resolve,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.addCondition(ConditionLogic.createTraitPenaltyCondition(TraitType.Resolve, 5, TraitType.Speed))\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'enchanter-action-4',\n\t\t\t\tname: 'Intellect Shield',\n\t\t\t\tprerequisites: [\n\t\t\t\t\tActionPrerequisites.implement()\n\t\t\t\t],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.self()\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.addCondition(ConditionLogic.createDamageCategoryResistanceCondition(TraitType.Resolve, 5, DamageCategoryType.Corruption))\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'enchanter-action-5',\n\t\t\t\tname: 'Weaken',\n\t\t\t\tprerequisites: [\n\t\t\t\t\tActionPrerequisites.implement()\n\t\t\t\t],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.burst(ActionTargetType.Enemies, 1, 10)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: false,\n\t\t\t\t\t\tskill: SkillType.Spellcasting,\n\t\t\t\t\t\ttrait: TraitType.Resolve,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.addCondition(ConditionLogic.createDamagePenaltyCondition(TraitType.Endurance, 5, DamageType.All))\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'enchanter-action-6',\n\t\t\t\tname: 'Cloak',\n\t\t\t\tprerequisites: [\n\t\t\t\t\tActionPrerequisites.implement()\n\t\t\t\t],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.burst(ActionTargetType.Allies, Number.MAX_VALUE, 5)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.hide()\n\t\t\t\t]\n\t\t\t}\n\t\t]\n\t});\n\n\tstatic geomancer = (): RoleModel => ({\n\t\tid: 'role-geomancer',\n\t\tname: 'Geomancer',\n\t\tpackID: PackData.arcana().id,\n\t\tdescription: 'Spellcasters whose magic affects the battlefield itself.',\n\t\tstartingFeatures: [\n\t\t\tFeatureLogic.createTraitFeature('geomancer-start-1', TraitType.Endurance, 1),\n\t\t\tFeatureLogic.createSkillFeature('geomancer-start-2', SkillType.Spellcasting, 2),\n\t\t\tFeatureLogic.createProficiencyFeature('geomancer-start-3', ItemProficiencyType.Implements)\n\t\t],\n\t\tfeatures: [\n\t\t\tFeatureLogic.createTraitFeature('geomancer-feature-1', TraitType.Endurance, 1),\n\t\t\tFeatureLogic.createSkillFeature('geomancer-feature-2', SkillType.Spellcasting, 2),\n\t\t\tFeatureLogic.createAuraFeature('geomancer-feature-3', ConditionType.MovementBonus, 1),\n\t\t\tFeatureLogic.createAuraFeature('geomancer-feature-4', ConditionType.MovementPenalty, 1)\n\t\t],\n\t\tactions: [\n\t\t\t{\n\t\t\t\tid: 'geomancer-action-1',\n\t\t\t\tname: 'Obstruct Terrain',\n\t\t\t\tprerequisites: [\n\t\t\t\t\tActionPrerequisites.implement()\n\t\t\t\t],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.burst(ActionTargetType.Squares, 1, 10)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.createTerrain(EncounterMapSquareType.Obstructed)\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'geomancer-action-2',\n\t\t\t\tname: 'Clear Terrain',\n\t\t\t\tprerequisites: [\n\t\t\t\t\tActionPrerequisites.implement()\n\t\t\t\t],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.burst(ActionTargetType.Squares, 1, 10)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.createTerrain(EncounterMapSquareType.Clear)\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'geomancer-action-3',\n\t\t\t\tname: 'Destroy Ground',\n\t\t\t\tprerequisites: [\n\t\t\t\t\tActionPrerequisites.implement()\n\t\t\t\t],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.burst(ActionTargetType.Squares, 1, 10)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.removeSquares()\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'geomancer-action-4',\n\t\t\t\tname: 'Raze',\n\t\t\t\tprerequisites: [\n\t\t\t\t\tActionPrerequisites.implement()\n\t\t\t\t],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.burst(ActionTargetType.Walls, Number.MAX_VALUE, 3)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.addSquares()\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'geomancer-action-5',\n\t\t\t\tname: 'Earthbind',\n\t\t\t\tprerequisites: [\n\t\t\t\t\tActionPrerequisites.implement()\n\t\t\t\t],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.burst(ActionTargetType.Enemies, 1, 10)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: false,\n\t\t\t\t\t\tskill: SkillType.Spellcasting,\n\t\t\t\t\t\ttrait: TraitType.Endurance,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.addCondition(ConditionLogic.createTraitPenaltyCondition(TraitType.Endurance, 5, TraitType.Speed)),\n\t\t\t\t\t\t\tActionEffects.addCondition(ConditionLogic.createMovementPenaltyCondition(TraitType.Endurance, 5))\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'geomancer-action-6',\n\t\t\t\tname: 'Rockblast',\n\t\t\t\tprerequisites: [\n\t\t\t\t\tActionPrerequisites.implement()\n\t\t\t\t],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.burst(ActionTargetType.Enemies, 1, 10)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: false,\n\t\t\t\t\t\tskill: SkillType.Spellcasting,\n\t\t\t\t\t\ttrait: TraitType.Speed,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.dealDamage(DamageType.Impact, 3),\n\t\t\t\t\t\t\tActionEffects.knockDown()\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t}\n\t\t]\n\t});\n\n\tstatic gunslinger = (): RoleModel => ({\n\t\tid: 'role-gunslinger',\n\t\tname: 'Gunslinger',\n\t\tpackID: PackData.technology().id,\n\t\tdescription: 'A fighter who uses gunpowder weapons.',\n\t\tstartingFeatures: [\n\t\t\tFeatureLogic.createTraitFeature('gunslinger-start-1', TraitType.Speed, 1),\n\t\t\tFeatureLogic.createSkillFeature('gunslinger-start-2', SkillType.Weapon, 2),\n\t\t\tFeatureLogic.createProficiencyFeature('gunslinger-start-3', ItemProficiencyType.PowderWeapons)\n\t\t],\n\t\tfeatures: [\n\t\t\tFeatureLogic.createTraitFeature('gunslinger-feature-1', TraitType.Speed, 1),\n\t\t\tFeatureLogic.createSkillFeature('gunslinger-feature-2', SkillType.Weapon, 2)\n\t\t],\n\t\tactions: [\n\t\t\t{\n\t\t\t\tid: 'gunslinger-action-1',\n\t\t\t\tname: 'Fusilade',\n\t\t\t\tprerequisites: [\n\t\t\t\t\tActionPrerequisites.rangedWeapon()\n\t\t\t\t],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionWeaponParameters.ranged(),\n\t\t\t\t\tActionOriginParameters.weapon(),\n\t\t\t\t\tActionTargetParameters.burst(ActionTargetType.Combatants, Number.MAX_VALUE, 3)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: true,\n\t\t\t\t\t\tskill: SkillType.Weapon,\n\t\t\t\t\t\ttrait: TraitType.Speed,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.dealWeaponDamage(-2)\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'gunslinger-action-2',\n\t\t\t\tname: 'Overcharged Round',\n\t\t\t\tprerequisites: [\n\t\t\t\t\tActionPrerequisites.rangedWeapon()\n\t\t\t\t],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionWeaponParameters.ranged(),\n\t\t\t\t\tActionTargetParameters.weapon(ActionTargetType.Enemies, 1, 0)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: true,\n\t\t\t\t\t\tskill: SkillType.Weapon,\n\t\t\t\t\t\ttrait: TraitType.Speed,\n\t\t\t\t\t\tskillBonus: -1,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.dealWeaponDamage(2)\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'gunslinger-action-3',\n\t\t\t\tname: 'Pommel Strike',\n\t\t\t\tprerequisites: [\n\t\t\t\t\tActionPrerequisites.rangedWeapon()\n\t\t\t\t],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.adjacent(ActionTargetType.Enemies, 1)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: false,\n\t\t\t\t\t\tskill: SkillType.Weapon,\n\t\t\t\t\t\ttrait: TraitType.Speed,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.dealDamage(DamageType.Impact, 2)\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'gunslinger-action-4',\n\t\t\t\tname: 'Quickfire',\n\t\t\t\tprerequisites: [\n\t\t\t\t\tActionPrerequisites.rangedWeapon()\n\t\t\t\t],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionWeaponParameters.ranged(),\n\t\t\t\t\tActionTargetParameters.weapon(ActionTargetType.Enemies, 1, 0)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: true,\n\t\t\t\t\t\tskill: SkillType.Weapon,\n\t\t\t\t\t\ttrait: TraitType.Speed,\n\t\t\t\t\t\tskillBonus: -2,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.dealWeaponDamage()\n\t\t\t\t\t\t]\n\t\t\t\t\t}),\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: true,\n\t\t\t\t\t\tskill: SkillType.Weapon,\n\t\t\t\t\t\ttrait: TraitType.Speed,\n\t\t\t\t\t\tskillBonus: -2,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.dealWeaponDamage()\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'gunslinger-action-5',\n\t\t\t\tname: 'Sharpshooter',\n\t\t\t\tprerequisites: [\n\t\t\t\t\tActionPrerequisites.rangedWeapon()\n\t\t\t\t],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionWeaponParameters.ranged(),\n\t\t\t\t\tActionTargetParameters.weapon(ActionTargetType.Enemies, 1, 0)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: true,\n\t\t\t\t\t\tskill: SkillType.Weapon,\n\t\t\t\t\t\ttrait: TraitType.Speed,\n\t\t\t\t\t\tskillBonus: 2,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.dealWeaponDamage()\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t}\n\t\t]\n\t});\n\n\tstatic luckweaver = (): RoleModel => ({\n\t\tid: 'role-luckweaver',\n\t\tname: 'Luckweaver',\n\t\tpackID: PackData.fae().id,\n\t\tdescription: 'One who can manipulate the laws of chance.',\n\t\tstartingFeatures: [\n\t\t\tFeatureLogic.createSkillFeature('luckweaver-start-1', SkillType.Spellcasting, 2)\n\t\t],\n\t\tfeatures: [\n\t\t\tFeatureLogic.createSkillFeature('luckweaver-feature-1', SkillType.Spellcasting, 2),\n\t\t\tFeatureLogic.createSkillCategoryFeature('luckweaver-feature-2', SkillCategoryType.Any, 1),\n\t\t\tFeatureLogic.createDamageCategoryBonusFeature('luckweaver-feature-3', DamageCategoryType.Any, 1),\n\t\t\tFeatureLogic.createDamageCategoryResistFeature('luckweaver-feature-4', DamageCategoryType.Any, 1)\n\t\t],\n\t\tactions: [\n\t\t\t{\n\t\t\t\tid: 'luckweaver-action-1',\n\t\t\t\tname: 'Chaos Bolt',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.burst(ActionTargetType.Enemies, 1, 10)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: false,\n\t\t\t\t\t\tskill: SkillType.Spellcasting,\n\t\t\t\t\t\ttrait: TraitType.Speed,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.dealDamage(DamageType.Any, 3)\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'luckweaver-action-2',\n\t\t\t\tname: 'Warp Space',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.burst(ActionTargetType.Combatants, Number.MAX_VALUE, 10)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.forceMovement(MovementType.Random, 3)\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'luckweaver-action-3',\n\t\t\t\tname: 'Probability Wave',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.burst(ActionTargetType.Combatants, Number.MAX_VALUE, 10)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.invertConditions(true)\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'luckweaver-action-4',\n\t\t\t\tname: 'Banish',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.burst(ActionTargetType.Combatants, 1, 5)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.forceMovement(MovementType.Random, 20),\n\t\t\t\t\tActionEffects.stun()\n\t\t\t\t]\n\t\t\t}\n\t\t]\n\t});\n\n\tstatic necromancer = (): RoleModel => ({\n\t\tid: 'role-necromancer',\n\t\tname: 'Necromancer',\n\t\tpackID: PackData.undead().id,\n\t\tdescription: 'A spellcaster whose magic deals with life and death.',\n\t\tstartingFeatures: [\n\t\t\tFeatureLogic.createTraitFeature('necromancer-start-1', TraitType.Resolve, 1),\n\t\t\tFeatureLogic.createSkillFeature('necromancer-start-2', SkillType.Spellcasting, 2),\n\t\t\tFeatureLogic.createProficiencyFeature('necromancer-start-3', ItemProficiencyType.Implements)\n\t\t],\n\t\tfeatures: [\n\t\t\tFeatureLogic.createTraitFeature('necromancer-feature-1', TraitType.Resolve, 1),\n\t\t\tFeatureLogic.createSkillFeature('necromancer-feature-2', SkillType.Spellcasting, 2),\n\t\t\tFeatureLogic.createAuraDamageFeature('necromancer-feature-3', ConditionType.AutoDamage, DamageType.Decay, 1),\n\t\t\tFeatureLogic.createDamageBonusFeature('necromancer-feature-4', DamageType.Decay, 2)\n\t\t],\n\t\tactions: [\n\t\t\t{\n\t\t\t\tid: 'necromancer-action-1',\n\t\t\t\tname: 'Transfer Damage',\n\t\t\t\tprerequisites: [\n\t\t\t\t\tActionPrerequisites.implement(),\n\t\t\t\t\tActionPrerequisites.damage()\n\t\t\t\t],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.burst(ActionTargetType.Enemies, 1, 5)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.dealDamage(DamageType.Decay, 3),\n\t\t\t\t\tActionEffects.toSelf([\n\t\t\t\t\t\tActionEffects.healDamage(3)\n\t\t\t\t\t])\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'necromancer-action-2',\n\t\t\t\tname: 'Transfer Wounds',\n\t\t\t\tprerequisites: [\n\t\t\t\t\tActionPrerequisites.implement(),\n\t\t\t\t\tActionPrerequisites.wound()\n\t\t\t\t],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.burst(ActionTargetType.Enemies, 1, 5)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.inflictWounds(1),\n\t\t\t\t\tActionEffects.toSelf([\n\t\t\t\t\t\tActionEffects.healWounds(1)\n\t\t\t\t\t])\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'necromancer-action-3',\n\t\t\t\tname: 'Accept Damage',\n\t\t\t\tprerequisites: [\n\t\t\t\t\tActionPrerequisites.implement()\n\t\t\t\t],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.burst(ActionTargetType.Allies, 1, 5)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.healDamage(3),\n\t\t\t\t\tActionEffects.toSelf([\n\t\t\t\t\t\tActionEffects.dealDamage(DamageType.Decay, 3)\n\t\t\t\t\t])\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'necromancer-action-4',\n\t\t\t\tname: 'Accept Wounds',\n\t\t\t\tprerequisites: [\n\t\t\t\t\tActionPrerequisites.implement()\n\t\t\t\t],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.burst(ActionTargetType.Allies, 1, 5)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.healWounds(1),\n\t\t\t\t\tActionEffects.toSelf([\n\t\t\t\t\t\tActionEffects.inflictWounds(1)\n\t\t\t\t\t])\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'necromancer-action-5',\n\t\t\t\tname: 'Strength from Pain',\n\t\t\t\tprerequisites: [\n\t\t\t\t\tActionPrerequisites.implement(),\n\t\t\t\t\tActionPrerequisites.damage()\n\t\t\t\t],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.burst(ActionTargetType.Allies, 1, 5)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.healDamage(3),\n\t\t\t\t\tActionEffects.addCondition(ConditionLogic.createTraitBonusCondition(TraitType.Resolve, 3, TraitType.Endurance)),\n\t\t\t\t\tActionEffects.addCondition(ConditionLogic.createTraitBonusCondition(TraitType.Resolve, 3, TraitType.Resolve))\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'necromancer-action-6',\n\t\t\t\tname: 'Grave Bolt',\n\t\t\t\tprerequisites: [\n\t\t\t\t\tActionPrerequisites.implement()\n\t\t\t\t],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.burst(ActionTargetType.Enemies, 1, 5)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: false,\n\t\t\t\t\t\tskill: SkillType.Spellcasting,\n\t\t\t\t\t\ttrait: TraitType.Resolve,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.dealDamage(DamageType.Decay, 3),\n\t\t\t\t\t\t\tActionEffects.toSelf([\n\t\t\t\t\t\t\t\tActionEffects.healWounds(1)\n\t\t\t\t\t\t\t])\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'necromancer-action-7',\n\t\t\t\tname: 'Raise the Dead',\n\t\t\t\tprerequisites: [\n\t\t\t\t\tActionPrerequisites.implement()\n\t\t\t\t],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.self()\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.summon(SummonType.Undead)\n\t\t\t\t]\n\t\t\t}\n\t\t]\n\t});\n\n\tstatic ninja = (): RoleModel => ({\n\t\tid: 'role-ninja',\n\t\tname: 'Ninja',\n\t\tpackID: PackData.skullduggery().id,\n\t\tdescription: 'A martial artist who hones their abilities with extreme training and self-discipline.',\n\t\tstartingFeatures: [\n\t\t\tFeatureLogic.createTraitFeature('ninja-start-1', TraitType.Speed, 1),\n\t\t\tFeatureLogic.createSkillFeature('ninja-start-2', SkillType.Brawl, 2),\n\t\t\tFeatureLogic.createSkillFeature('ninja-start-3', SkillType.Stealth, 2)\n\t\t],\n\t\tfeatures: [\n\t\t\tFeatureLogic.createTraitFeature('ninja-feature-1', TraitType.Speed, 1),\n\t\t\tFeatureLogic.createSkillFeature('ninja-feature-2', SkillType.Brawl, 2),\n\t\t\tFeatureLogic.createSkillFeature('ninja-feature-3', SkillType.Stealth, 2),\n\t\t\tFeatureLogic.createDamageCategoryBonusFeature('ninja-feature-4', DamageCategoryType.Physical, 1)\n\t\t],\n\t\tactions: [\n\t\t\t{\n\t\t\t\tid: 'ninja-action-1',\n\t\t\t\tname: 'Roundhouse kick',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.adjacent(ActionTargetType.Enemies, 1)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: false,\n\t\t\t\t\t\tskill: SkillType.Brawl,\n\t\t\t\t\t\ttrait: TraitType.Speed,\n\t\t\t\t\t\tskillBonus: 2,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.dealDamage(DamageType.Impact, 3)\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'ninja-action-2',\n\t\t\t\tname: 'Flurry',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.adjacent(ActionTargetType.Enemies, 1)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: false,\n\t\t\t\t\t\tskill: SkillType.Brawl,\n\t\t\t\t\t\ttrait: TraitType.Speed,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.dealDamage(DamageType.Impact, 1)\n\t\t\t\t\t\t]\n\t\t\t\t\t}),\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: false,\n\t\t\t\t\t\tskill: SkillType.Brawl,\n\t\t\t\t\t\ttrait: TraitType.Speed,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.dealDamage(DamageType.Impact, 1)\n\t\t\t\t\t\t]\n\t\t\t\t\t}),\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: false,\n\t\t\t\t\t\tskill: SkillType.Brawl,\n\t\t\t\t\t\ttrait: TraitType.Speed,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.dealDamage(DamageType.Impact, 1)\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'ninja-action-3',\n\t\t\t\tname: 'Split Kick',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.adjacent(ActionTargetType.Enemies, 2)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: false,\n\t\t\t\t\t\tskill: SkillType.Brawl,\n\t\t\t\t\t\ttrait: TraitType.Speed,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.dealDamage(DamageType.Impact, 3)\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'ninja-action-4',\n\t\t\t\tname: 'Adrenal Boost',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.self()\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.addCondition(ConditionLogic.createTraitBonusCondition(TraitType.Endurance, 2, TraitType.Speed)),\n\t\t\t\t\tActionEffects.addCondition(ConditionLogic.createMovementBonusCondition(TraitType.Endurance, 2)),\n\t\t\t\t\tActionEffects.addCondition(ConditionLogic.createSkillBonusCondition(TraitType.Endurance, 2, SkillType.Brawl)),\n\t\t\t\t\tActionEffects.addCondition(ConditionLogic.createDamageCategoryBonusCondition(TraitType.Endurance, 2, DamageCategoryType.Physical))\n\t\t\t\t]\n\t\t\t}\n\t\t]\n\t});\n\n\tstatic paladin = (): RoleModel => ({\n\t\tid: 'role-paladin',\n\t\tname: 'Paladin',\n\t\tpackID: PackData.faith().id,\n\t\tdescription: 'A holy warrior, driven by unwavering faith.',\n\t\tstartingFeatures: [\n\t\t\tFeatureLogic.createTraitFeature('paladin-start-1', TraitType.Resolve, 1),\n\t\t\tFeatureLogic.createSkillFeature('paladin-start-2', SkillType.Presence, 2),\n\t\t\tFeatureLogic.createSkillFeature('paladin-start-3', SkillType.Weapon, 2),\n\t\t\tFeatureLogic.createProficiencyFeature('paladin-start-4', ItemProficiencyType.MilitaryWeapons),\n\t\t\tFeatureLogic.createProficiencyFeature('paladin-start-5', ItemProficiencyType.HeavyArmor),\n\t\t\tFeatureLogic.createProficiencyFeature('paladin-start-6', ItemProficiencyType.Shields)\n\t\t],\n\t\tfeatures: [\n\t\t\tFeatureLogic.createTraitFeature('paladin-feature-1', TraitType.Resolve, 1),\n\t\t\tFeatureLogic.createSkillFeature('paladin-feature-2', SkillType.Presence, 2),\n\t\t\tFeatureLogic.createSkillFeature('paladin-feature-3', SkillType.Weapon, 2)\n\t\t],\n\t\tactions: [\n\t\t\t{\n\t\t\t\tid: 'paladin-action-1',\n\t\t\t\tname: 'Radiant Smite',\n\t\t\t\tprerequisites: [\n\t\t\t\t\tActionPrerequisites.meleeWeapon()\n\t\t\t\t],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.adjacent(ActionTargetType.Enemies, 1)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: true,\n\t\t\t\t\t\tskill: SkillType.Weapon,\n\t\t\t\t\t\ttrait: TraitType.Resolve,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.dealWeaponDamage(),\n\t\t\t\t\t\t\tActionEffects.dealDamage(DamageType.Light, 2)\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'paladin-action-2',\n\t\t\t\tname: 'Flame of Valor',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.adjacent(ActionTargetType.Enemies, Number.MAX_VALUE)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: false,\n\t\t\t\t\t\tskill: SkillType.Presence,\n\t\t\t\t\t\ttrait: TraitType.Resolve,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.dealDamage(DamageType.Light, 2)\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'paladin-action-3',\n\t\t\t\tname: 'Shield of Justice',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.burst(ActionTargetType.Allies, Number.MAX_VALUE, 3)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.addCondition(ConditionLogic.createDamageResistanceCondition(TraitType.Resolve, 3, DamageType.All))\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'paladin-action-4',\n\t\t\t\tname: 'Templar\\'s Strength',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.self()\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.healDamage(1),\n\t\t\t\t\tActionEffects.healWounds(1)\n\t\t\t\t]\n\t\t\t}\n\t\t]\n\t});\n\n\tstatic psion = (): RoleModel => ({\n\t\tid: 'role-psion',\n\t\tname: 'Psion',\n\t\tpackID: PackData.arcana().id,\n\t\tdescription: 'A master of the power of the mind.',\n\t\tstartingFeatures: [\n\t\t\tFeatureLogic.createTraitFeature('psion-start-1', TraitType.Resolve, 1),\n\t\t\tFeatureLogic.createSkillFeature('psion-start-2', SkillType.Presence, 2)\n\t\t],\n\t\tfeatures: [\n\t\t\tFeatureLogic.createTraitFeature('psion-feature-1', TraitType.Resolve, 1),\n\t\t\tFeatureLogic.createSkillFeature('psion-feature-2', SkillType.Presence, 2),\n\t\t\tFeatureLogic.createDamageBonusFeature('psion-feature-3', DamageType.Psychic, 2),\n\t\t\tFeatureLogic.createDamageResistFeature('psion-feature-4', DamageType.Psychic, 2)\n\t\t],\n\t\tactions: [\n\t\t\t{\n\t\t\t\tid: 'psion-action-1',\n\t\t\t\tname: 'Bend Allegiance',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.burst(ActionTargetType.Enemies, 1, 8)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.commandAction()\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'psion-action-2',\n\t\t\t\tname: 'Psychic Feedback',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.adjacent(ActionTargetType.Combatants, Number.MAX_VALUE)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: false,\n\t\t\t\t\t\tskill: SkillType.Presence,\n\t\t\t\t\t\ttrait: TraitType.Resolve,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.stun()\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'psion-action-3',\n\t\t\t\tname: 'Psychic Barrage',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.burst(ActionTargetType.Combatants, Number.MAX_VALUE, 5)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: false,\n\t\t\t\t\t\tskill: SkillType.Presence,\n\t\t\t\t\t\ttrait: TraitType.Resolve,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.dealDamage(DamageType.Psychic, 3)\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'psion-action-4',\n\t\t\t\tname: 'Dishearten',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.burst(ActionTargetType.Enemies, 1, 8)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: false,\n\t\t\t\t\t\tskill: SkillType.Presence,\n\t\t\t\t\t\ttrait: TraitType.Resolve,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.addCondition(ConditionLogic.createDamagePenaltyCondition(TraitType.Resolve, 5, DamageType.All))\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'psion-action-5',\n\t\t\t\tname: 'Mental Assault',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.burst(ActionTargetType.Enemies, 1, 8)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: false,\n\t\t\t\t\t\tskill: SkillType.Presence,\n\t\t\t\t\t\ttrait: TraitType.Resolve,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.dealDamage(DamageType.Psychic, 4)\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'psion-action-6',\n\t\t\t\tname: 'Mind Over Body',\n\t\t\t\tprerequisites: [\n\t\t\t\t\tActionPrerequisites.wound()\n\t\t\t\t],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.self()\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.healWounds(1)\n\t\t\t\t]\n\t\t\t}\n\t\t]\n\t});\n\n\tstatic ranger = (): RoleModel => ({\n\t\tid: 'role-ranger',\n\t\tname: 'Ranger',\n\t\tpackID: '',\n\t\tdescription: 'A fighter who specializes in ranged weaponry.',\n\t\tstartingFeatures: [\n\t\t\tFeatureLogic.createTraitFeature('ranger-start-1', TraitType.Endurance, 1),\n\t\t\tFeatureLogic.createSkillFeature('ranger-start-2', SkillType.Perception, 2),\n\t\t\tFeatureLogic.createSkillFeature('ranger-start-3', SkillType.Weapon, 2),\n\t\t\tFeatureLogic.createProficiencyFeature('ranger-start-4', ItemProficiencyType.RangedWeapons),\n\t\t\tFeatureLogic.createProficiencyFeature('ranger-start-5', ItemProficiencyType.LightArmor)\n\t\t],\n\t\tfeatures: [\n\t\t\tFeatureLogic.createTraitFeature('ranger-feature-1', TraitType.Endurance, 1),\n\t\t\tFeatureLogic.createSkillFeature('ranger-feature-2', SkillType.Perception, 2),\n\t\t\tFeatureLogic.createSkillFeature('ranger-feature-3', SkillType.Weapon, 2)\n\t\t],\n\t\tactions: [\n\t\t\t{\n\t\t\t\tid: 'ranger-action-1',\n\t\t\t\tname: 'Deadeye',\n\t\t\t\tprerequisites: [\n\t\t\t\t\tActionPrerequisites.rangedWeapon()\n\t\t\t\t],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.self()\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.addCondition(ConditionLogic.createSkillBonusCondition(TraitType.Resolve, 5, SkillType.Weapon))\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'ranger-action-2',\n\t\t\t\tname: 'Sure Shot',\n\t\t\t\tprerequisites: [\n\t\t\t\t\tActionPrerequisites.rangedWeapon()\n\t\t\t\t],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionWeaponParameters.ranged(),\n\t\t\t\t\tActionTargetParameters.weapon(ActionTargetType.Enemies, 1, 0)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: true,\n\t\t\t\t\t\tskill: SkillType.Weapon,\n\t\t\t\t\t\ttrait: TraitType.Speed,\n\t\t\t\t\t\tskillBonus: 2,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.dealWeaponDamage()\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'ranger-action-3',\n\t\t\t\tname: 'Pinning Shot',\n\t\t\t\tprerequisites: [\n\t\t\t\t\tActionPrerequisites.rangedWeapon()\n\t\t\t\t],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionWeaponParameters.ranged(),\n\t\t\t\t\tActionTargetParameters.weapon(ActionTargetType.Enemies, 1, 0)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: true,\n\t\t\t\t\t\tskill: SkillType.Weapon,\n\t\t\t\t\t\ttrait: TraitType.Speed,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.dealWeaponDamage(),\n\t\t\t\t\t\t\tActionEffects.addCondition(ConditionLogic.createTraitPenaltyCondition(TraitType.Endurance, 5, TraitType.Speed))\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'ranger-action-4',\n\t\t\t\tname: 'Barrage',\n\t\t\t\tprerequisites: [\n\t\t\t\t\tActionPrerequisites.rangedWeapon()\n\t\t\t\t],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionWeaponParameters.ranged(),\n\t\t\t\t\tActionOriginParameters.weapon(),\n\t\t\t\t\tActionTargetParameters.burst(ActionTargetType.Enemies, Number.MAX_VALUE, 3)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: true,\n\t\t\t\t\t\tskill: SkillType.Weapon,\n\t\t\t\t\t\ttrait: TraitType.Speed,\n\t\t\t\t\t\tskillBonus: -1,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.dealWeaponDamage()\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'ranger-action-5',\n\t\t\t\tname: 'Quick Shot',\n\t\t\t\tprerequisites: [\n\t\t\t\t\tActionPrerequisites.rangedWeapon()\n\t\t\t\t],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionWeaponParameters.ranged(),\n\t\t\t\t\tActionTargetParameters.weapon(ActionTargetType.Enemies, 1, 0)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: true,\n\t\t\t\t\t\tskill: SkillType.Weapon,\n\t\t\t\t\t\ttrait: TraitType.Speed,\n\t\t\t\t\t\tskillBonus: -1,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.dealWeaponDamage(-1)\n\t\t\t\t\t\t]\n\t\t\t\t\t}),\n\t\t\t\t\tActionEffects.takeAnotherAction()\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'ranger-action-6',\n\t\t\t\tname: 'Called Shot',\n\t\t\t\tprerequisites: [\n\t\t\t\t\tActionPrerequisites.rangedWeapon()\n\t\t\t\t],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionWeaponParameters.ranged(),\n\t\t\t\t\tActionTargetParameters.weapon(ActionTargetType.Enemies, 1, 0)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: true,\n\t\t\t\t\t\tskill: SkillType.Weapon,\n\t\t\t\t\t\ttrait: TraitType.Speed,\n\t\t\t\t\t\tskillBonus: -2,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.dealWeaponDamage(2)\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t}\n\t\t]\n\t});\n\n\tstatic sensei = (): RoleModel => ({\n\t\tid: 'role-sensei',\n\t\tname: 'Sensei',\n\t\tpackID: '',\n\t\tdescription: 'A martial artist who uses magically-enhanced fighting techniques.',\n\t\tstartingFeatures: [\n\t\t\tFeatureLogic.createTraitFeature('sensei-start-1', TraitType.Speed, 1),\n\t\t\tFeatureLogic.createSkillFeature('sensei-start-2', SkillType.Brawl, 2)\n\t\t],\n\t\tfeatures: [\n\t\t\tFeatureLogic.createTraitFeature('sensei-feature-1', TraitType.Speed, 1),\n\t\t\tFeatureLogic.createSkillFeature('sensei-feature-2', SkillType.Brawl, 2),\n\t\t\tFeatureLogic.createDamageCategoryBonusFeature('sensei-feature-4', DamageCategoryType.Energy, 1)\n\t\t],\n\t\tactions: [\n\t\t\t{\n\t\t\t\tid: 'sensei-action-1',\n\t\t\t\tname: 'Typhoon Step',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.burst(ActionTargetType.Combatants, Number.MAX_VALUE, 3)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: false,\n\t\t\t\t\t\tskill: SkillType.Brawl,\n\t\t\t\t\t\ttrait: TraitType.Endurance,\n\t\t\t\t\t\tskillBonus: 2,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.dealDamage(DamageType.Impact, 1),\n\t\t\t\t\t\t\tActionEffects.forceMovement(MovementType.Push, 1),\n\t\t\t\t\t\t\tActionEffects.knockDown()\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'sensei-action-2',\n\t\t\t\tname: 'Dragon Palm Technique',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.adjacent(ActionTargetType.Enemies, 1)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: false,\n\t\t\t\t\t\tskill: SkillType.Brawl,\n\t\t\t\t\t\ttrait: TraitType.Speed,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.dealDamage(DamageType.Fire, 3)\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'sensei-action-3',\n\t\t\t\tname: 'Kinetic Flow',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.burst(ActionTargetType.Enemies, Number.MAX_VALUE, 3)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: false,\n\t\t\t\t\t\tskill: SkillType.Brawl,\n\t\t\t\t\t\ttrait: TraitType.Endurance,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.dealDamage(DamageType.Impact, 2),\n\t\t\t\t\t\t\tActionEffects.forceMovement(MovementType.Swap, 0)\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'sensei-action-4',\n\t\t\t\tname: 'Lightning Speed',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.self()\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.addMovement()\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'sensei-action-5',\n\t\t\t\tname: 'Focus Chi',\n\t\t\t\tprerequisites: [\n\t\t\t\t\tActionPrerequisites.condition(TraitType.Any)\n\t\t\t\t],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.self()\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.removeCondition(TraitType.Any)\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'sensei-action-6',\n\t\t\t\tname: 'Chi Punch',\n\t\t\t\tprerequisites: [],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.adjacent(ActionTargetType.Enemies, 1)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: false,\n\t\t\t\t\t\tskill: SkillType.Brawl,\n\t\t\t\t\t\ttrait: TraitType.Speed,\n\t\t\t\t\t\tskillBonus: 2,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.dealDamage(DamageType.Impact, 3)\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t}\n\t\t]\n\t});\n\n\tstatic sorcerer = (): RoleModel => ({\n\t\tid: 'role-sorcerer',\n\t\tname: 'Sorcerer',\n\t\tpackID: PackData.elements().id,\n\t\tdescription: 'A magic-user whose spells are elemental and destructive.',\n\t\tstartingFeatures: [\n\t\t\tFeatureLogic.createTraitFeature('sorcerer-start-1', TraitType.Resolve, 1),\n\t\t\tFeatureLogic.createSkillFeature('sorcerer-start-2', SkillType.Spellcasting, 2),\n\t\t\tFeatureLogic.createProficiencyFeature('sorcerer-start-3', ItemProficiencyType.Implements)\n\t\t],\n\t\tfeatures: [\n\t\t\tFeatureLogic.createTraitFeature('sorcerer-feature-1', TraitType.Resolve, 1),\n\t\t\tFeatureLogic.createSkillFeature('sorcerer-feature-2', SkillType.Spellcasting, 2),\n\t\t\tFeatureLogic.createDamageCategoryBonusFeature('sorcerer-feature-3', DamageCategoryType.Energy, 1),\n\t\t\tFeatureLogic.createDamageCategoryResistFeature('sorcerer-feature-4', DamageCategoryType.Energy, 1),\n\t\t\tFeatureLogic.createAuraDamageFeature('sorcerer-feature-5', ConditionType.AutoDamage, DamageType.Fire, 1),\n\t\t\tFeatureLogic.createAuraDamageFeature('sorcerer-feature-6', ConditionType.AutoDamage, DamageType.Cold, 1),\n\t\t\tFeatureLogic.createAuraDamageFeature('sorcerer-feature-7', ConditionType.AutoDamage, DamageType.Electricity, 1)\n\t\t],\n\t\tactions: [\n\t\t\t{\n\t\t\t\tid: 'sorcerer-action-1',\n\t\t\t\tname: 'Thunderstorm',\n\t\t\t\tprerequisites: [\n\t\t\t\t\tActionPrerequisites.implement()\n\t\t\t\t],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionOriginParameters.distance(10),\n\t\t\t\t\tActionTargetParameters.burst(ActionTargetType.Combatants, Number.MAX_VALUE, 3)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: false,\n\t\t\t\t\t\tskill: SkillType.Spellcasting,\n\t\t\t\t\t\ttrait: TraitType.Speed,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.dealDamage(DamageType.Electricity, 3),\n\t\t\t\t\t\t\tActionEffects.stun()\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'sorcerer-action-2',\n\t\t\t\tname: 'Inferno',\n\t\t\t\tprerequisites: [\n\t\t\t\t\tActionPrerequisites.implement()\n\t\t\t\t],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionOriginParameters.distance(10),\n\t\t\t\t\tActionTargetParameters.burst(ActionTargetType.Combatants, Number.MAX_VALUE, 3)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: false,\n\t\t\t\t\t\tskill: SkillType.Spellcasting,\n\t\t\t\t\t\ttrait: TraitType.Speed,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.dealDamage(DamageType.Fire, 3),\n\t\t\t\t\t\t\tActionEffects.addCondition(ConditionLogic.createAutoDamageCondition(TraitType.Endurance, 5, DamageType.Fire))\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'sorcerer-action-3',\n\t\t\t\tname: 'Ice Storm',\n\t\t\t\tprerequisites: [\n\t\t\t\t\tActionPrerequisites.implement()\n\t\t\t\t],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionOriginParameters.distance(10),\n\t\t\t\t\tActionTargetParameters.burst(ActionTargetType.Combatants, Number.MAX_VALUE, 3)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: false,\n\t\t\t\t\t\tskill: SkillType.Spellcasting,\n\t\t\t\t\t\ttrait: TraitType.Endurance,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.dealDamage(DamageType.Cold, 3),\n\t\t\t\t\t\t\tActionEffects.addCondition(ConditionLogic.createTraitPenaltyCondition(TraitType.Endurance, 5, TraitType.Speed))\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t}\n\t\t]\n\t});\n\n\tstatic warmage = (): RoleModel => ({\n\t\tid: 'role-warmage',\n\t\tname: 'Warmage',\n\t\tpackID: PackData.arcana().id,\n\t\tdescription: 'A warrior who bridges martial discipline and arcane power.',\n\t\tstartingFeatures: [\n\t\t\tFeatureLogic.createTraitFeature('warmage-start-1', TraitType.Resolve, 1),\n\t\t\tFeatureLogic.createSkillFeature('warmage-start-2', SkillType.Weapon, 2),\n\t\t\tFeatureLogic.createProficiencyFeature('warmage-start-3', ItemProficiencyType.MilitaryWeapons),\n\t\t\tFeatureLogic.createProficiencyFeature('warmage-start-4', ItemProficiencyType.LightArmor)\n\t\t],\n\t\tfeatures: [\n\t\t\tFeatureLogic.createTraitFeature('warmage-feature-1', TraitType.Resolve, 1),\n\t\t\tFeatureLogic.createSkillFeature('warmage-feature-2', SkillType.Weapon, 2),\n\t\t\tFeatureLogic.createDamageCategoryBonusFeature('warmage-feature-3', DamageCategoryType.Energy, 1),\n\t\t\tFeatureLogic.createDamageCategoryBonusFeature('warmage-feature-4', DamageCategoryType.Physical, 1)\n\t\t],\n\t\tactions: [\n\t\t\t{\n\t\t\t\tid: 'warmage-action-1',\n\t\t\t\tname: 'Flaming Blade',\n\t\t\t\tprerequisites: [\n\t\t\t\t\tActionPrerequisites.meleeWeapon()\n\t\t\t\t],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionWeaponParameters.melee(),\n\t\t\t\t\tActionTargetParameters.weapon(ActionTargetType.Enemies, 1, 0)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: true,\n\t\t\t\t\t\tskill: SkillType.Weapon,\n\t\t\t\t\t\ttrait: TraitType.Speed,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.dealWeaponDamage(),\n\t\t\t\t\t\t\tActionEffects.dealDamage(DamageType.Fire, 2),\n\t\t\t\t\t\t\tActionEffects.addCondition(ConditionLogic.createAutoDamageCondition(TraitType.Endurance, 5, DamageType.Fire))\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'warmage-action-2',\n\t\t\t\tname: 'Frost Blade',\n\t\t\t\tprerequisites: [\n\t\t\t\t\tActionPrerequisites.meleeWeapon()\n\t\t\t\t],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionWeaponParameters.melee(),\n\t\t\t\t\tActionTargetParameters.weapon(ActionTargetType.Enemies, 1, 0)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: true,\n\t\t\t\t\t\tskill: SkillType.Weapon,\n\t\t\t\t\t\ttrait: TraitType.Speed,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.dealWeaponDamage(),\n\t\t\t\t\t\t\tActionEffects.dealDamage(DamageType.Cold, 2),\n\t\t\t\t\t\t\tActionEffects.addCondition(ConditionLogic.createTraitPenaltyCondition(TraitType.Endurance, 5, TraitType.Speed))\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'warmage-action-3',\n\t\t\t\tname: 'Shocking Blade',\n\t\t\t\tprerequisites: [\n\t\t\t\t\tActionPrerequisites.meleeWeapon()\n\t\t\t\t],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionWeaponParameters.melee(),\n\t\t\t\t\tActionTargetParameters.weapon(ActionTargetType.Enemies, 1, 0)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: true,\n\t\t\t\t\t\tskill: SkillType.Weapon,\n\t\t\t\t\t\ttrait: TraitType.Speed,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.dealWeaponDamage(),\n\t\t\t\t\t\t\tActionEffects.dealDamage(DamageType.Electricity, 2),\n\t\t\t\t\t\t\tActionEffects.stun()\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'warmage-action-4',\n\t\t\t\tname: 'Armor Enhancement',\n\t\t\t\tprerequisites: [\n\t\t\t\t\tActionPrerequisites.armor()\n\t\t\t\t],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionTargetParameters.self()\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.addCondition(ConditionLogic.createDamageCategoryResistanceCondition(TraitType.Resolve, 5, DamageCategoryType.Physical)),\n\t\t\t\t\tActionEffects.addCondition(ConditionLogic.createDamageCategoryResistanceCondition(TraitType.Resolve, 5, DamageCategoryType.Energy))\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'warmage-action-5',\n\t\t\t\tname: 'Arcane Whip',\n\t\t\t\tprerequisites: [\n\t\t\t\t\tActionPrerequisites.meleeWeapon()\n\t\t\t\t],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionWeaponParameters.melee(),\n\t\t\t\t\tActionTargetParameters.weapon(ActionTargetType.Enemies, 1, 2)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: true,\n\t\t\t\t\t\tskill: SkillType.Weapon,\n\t\t\t\t\t\ttrait: TraitType.Speed,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.dealWeaponDamage(),\n\t\t\t\t\t\t\tActionEffects.forceMovement(MovementType.Pull, 3)\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t}\n\t\t]\n\t});\n\n\tstatic valkyrie = (): RoleModel => ({\n\t\tid: 'role-valkyrie',\n\t\tname: 'Valkyrie',\n\t\tpackID: '',\n\t\tdescription: 'Heavily armed and armored, valkyries are a force to be reckoned with.',\n\t\tstartingFeatures: [\n\t\t\tFeatureLogic.createTraitFeature('valkyrie-start-1', TraitType.Endurance, 1),\n\t\t\tFeatureLogic.createTraitFeature('valkyrie-start-2', TraitType.Resolve, 1),\n\t\t\tFeatureLogic.createSkillFeature('valkyrie-start-3', SkillType.Weapon, 2),\n\t\t\tFeatureLogic.createProficiencyFeature('valkyrie-start-4', ItemProficiencyType.LargeWeapons),\n\t\t\tFeatureLogic.createProficiencyFeature('valkyrie-start-5', ItemProficiencyType.HeavyArmor)\n\t\t],\n\t\tfeatures: [\n\t\t\tFeatureLogic.createTraitFeature('valkyrie-feature-1', TraitType.Endurance, 1),\n\t\t\tFeatureLogic.createTraitFeature('valkyrie-feature-2', TraitType.Resolve, 1),\n\t\t\tFeatureLogic.createSkillFeature('valkyrie-feature-3', SkillType.Weapon, 2)\n\t\t],\n\t\tactions: [\n\t\t\t{\n\t\t\t\tid: 'valkyrie-action-1',\n\t\t\t\tname: 'Valhalla Charge',\n\t\t\t\tprerequisites: [\n\t\t\t\t\tActionPrerequisites.meleeWeapon()\n\t\t\t\t],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionWeaponParameters.melee(),\n\t\t\t\t\tActionTargetParameters.burst(ActionTargetType.Enemies, 1, 8)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.moveToTargetSquare(),\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: true,\n\t\t\t\t\t\tskill: SkillType.Weapon,\n\t\t\t\t\t\ttrait: TraitType.Endurance,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.dealWeaponDamage(2)\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'valkyrie-action-2',\n\t\t\t\tname: 'Onslaught',\n\t\t\t\tprerequisites: [\n\t\t\t\t\tActionPrerequisites.meleeWeapon()\n\t\t\t\t],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionWeaponParameters.melee(),\n\t\t\t\t\tActionTargetParameters.weapon(ActionTargetType.Enemies, 1, 0)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: true,\n\t\t\t\t\t\tskill: SkillType.Weapon,\n\t\t\t\t\t\ttrait: TraitType.Endurance,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.dealWeaponDamage(),\n\t\t\t\t\t\t\tActionEffects.knockDown()\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'valkyrie-action-3',\n\t\t\t\tname: 'Weakening Thrust',\n\t\t\t\tprerequisites: [\n\t\t\t\t\tActionPrerequisites.meleeWeapon()\n\t\t\t\t],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionWeaponParameters.melee(),\n\t\t\t\t\tActionTargetParameters.weapon(ActionTargetType.Enemies, 1, 0)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: true,\n\t\t\t\t\t\tskill: SkillType.Weapon,\n\t\t\t\t\t\ttrait: TraitType.Endurance,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.dealWeaponDamage(-1),\n\t\t\t\t\t\t\tActionEffects.addCondition(ConditionLogic.createDamageCategoryPenaltyCondition(TraitType.Endurance, 3, DamageCategoryType.Physical)),\n\t\t\t\t\t\t\tActionEffects.addCondition(ConditionLogic.createDamageCategoryPenaltyCondition(TraitType.Endurance, 3, DamageCategoryType.Energy)),\n\t\t\t\t\t\t\tActionEffects.addCondition(ConditionLogic.createDamageCategoryPenaltyCondition(TraitType.Endurance, 3, DamageCategoryType.Corruption))\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'valkyrie-action-4',\n\t\t\t\tname: 'Swirling Storm',\n\t\t\t\tprerequisites: [\n\t\t\t\t\tActionPrerequisites.meleeWeapon()\n\t\t\t\t],\n\t\t\t\tparameters: [\n\t\t\t\t\tActionWeaponParameters.melee(),\n\t\t\t\t\tActionTargetParameters.weapon(ActionTargetType.Enemies, Number.MAX_VALUE, 0)\n\t\t\t\t],\n\t\t\t\teffects: [\n\t\t\t\t\tActionEffects.attack({\n\t\t\t\t\t\tweapon: true,\n\t\t\t\t\t\tskill: SkillType.Weapon,\n\t\t\t\t\t\ttrait: TraitType.Endurance,\n\t\t\t\t\t\tskillBonus: 0,\n\t\t\t\t\t\thit: [\n\t\t\t\t\t\t\tActionEffects.dealWeaponDamage(),\n\t\t\t\t\t\t\tActionEffects.dealDamage(DamageType.Electricity, 1)\n\t\t\t\t\t\t]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t}\n\t\t]\n\t});\n\n\tstatic getList = (): RoleModel[] => {\n\t\tconst list = [\n\t\t\tRoleData.arcanist(),\n\t\t\tRoleData.artificer(),\n\t\t\tRoleData.assassin(),\n\t\t\tRoleData.barbarian(),\n\t\t\tRoleData.centurion(),\n\t\t\tRoleData.cleric(),\n\t\t\tRoleData.dervish(),\n\t\t\tRoleData.druid(),\n\t\t\tRoleData.elementalist(),\n\t\t\tRoleData.enchanter(),\n\t\t\tRoleData.geomancer(),\n\t\t\tRoleData.gunslinger(),\n\t\t\tRoleData.luckweaver(),\n\t\t\tRoleData.necromancer(),\n\t\t\tRoleData.ninja(),\n\t\t\tRoleData.paladin(),\n\t\t\tRoleData.psion(),\n\t\t\tRoleData.ranger(),\n\t\t\tRoleData.sensei(),\n\t\t\tRoleData.sorcerer(),\n\t\t\tRoleData.warmage(),\n\t\t\tRoleData.valkyrie()\n\t\t];\n\n\t\tlist.forEach(n => {\n\t\t\tn.startingFeatures = Collections.sort(n.startingFeatures, f => FeatureLogic.getFeatureTitle(f));\n\t\t\tn.features = Collections.sort(n.features, f => FeatureLogic.getFeatureTitle(f));\n\t\t\tn.actions = Collections.sort(n.actions, a => a.name);\n\t\t});\n\t\treturn Collections.sort(list, n => n.name);\n\t};\n}\n","import { BackgroundData } from '../data/background-data';\nimport { HeroSpeciesData } from '../data/hero-species-data';\nimport { ItemData } from '../data/item-data';\nimport { MonsterSpeciesData } from '../data/monster-species-data';\nimport { PackData } from '../data/pack-data';\nimport { PotionData } from '../data/potion-data';\nimport { RoleData } from '../data/role-data';\nimport { StructureData } from '../data/structure-data';\n\nimport { ActionTargetType } from '../enums/action-target-type';\nimport { BoonType } from '../enums/boon-type';\nimport { DamageCategoryType } from '../enums/damage-category-type';\nimport { DamageType } from '../enums/damage-type';\nimport { FeatureType } from '../enums/feature-type';\nimport { ItemProficiencyType } from '../enums/item-proficiency-type';\nimport { SkillCategoryType } from '../enums/skill-category-type';\nimport { SkillType } from '../enums/skill-type';\nimport { TraitType } from '../enums/trait-type';\n\nimport type { ActionEffectModel, ActionModel, ActionTargetParameterModel } from '../models/action';\nimport type { BackgroundModel } from '../models/background';\nimport type { BoonModel } from '../models/boon';\nimport type { CombatantModel } from '../models/combatant';\nimport type { ConditionModel } from '../models/condition';\nimport type { FeatureModel } from '../models/feature';\nimport type { GameModel } from '../models/game';\nimport type { ItemModel } from '../models/item';\nimport type { RoleModel } from '../models/role';\nimport type { SpeciesModel } from '../models/species';\n\nimport { Collections } from '../utils/collections';\nimport { Utils } from '../utils/utils';\n\nimport { ActionLogic } from './action-logic';\n\nexport class GameLogic {\n\tstatic getHeroSpeciesDeck = (packIDs: string[]) => {\n\t\treturn HeroSpeciesData.getList().filter(s => (s.packID === '') || packIDs.includes(s.packID));\n\t};\n\n\tstatic getMonsterSpeciesDeck = (packIDs: string[]) => {\n\t\treturn MonsterSpeciesData.getList().filter(s => (s.packID === '') || packIDs.includes(s.packID));\n\t};\n\n\tstatic getRoleDeck = (packIDs: string[]) => {\n\t\treturn RoleData.getList().filter(r => (r.packID === '') || packIDs.includes(r.packID));\n\t};\n\n\tstatic getBackgroundDeck = (packIDs: string[]) => {\n\t\treturn BackgroundData.getList().filter(b => (b.packID === '') || packIDs.includes(b.packID));\n\t};\n\n\tstatic getItemDeck = (packIDs: string[]) => {\n\t\treturn ItemData.getList().filter(i => (i.packID === '') || packIDs.includes(i.packID));\n\t};\n\n\tstatic getPotionDeck = (packIDs: string[]) => {\n\t\treturn PotionData.getList().filter(i => (i.packID === '') || packIDs.includes(i.packID));\n\t};\n\n\tstatic getStructureDeck = (packIDs: string[]) => {\n\t\treturn StructureData.getList().filter(s => (s.packID === '') || packIDs.includes(s.packID));\n\t};\n\n\t///////////////////////////////////////////////////////////////////////////\n\n\tstatic getSpecies = (id: string) => {\n\t\tconst allSpecies = ([] as SpeciesModel[])\n\t\t\t.concat(HeroSpeciesData.getList())\n\t\t\t.concat(MonsterSpeciesData.getList());\n\n\t\treturn allSpecies.find(s => s.id === id) || null;\n\t};\n\n\tstatic getRole = (id: string) => {\n\t\treturn RoleData.getList().find(r => r.id === id) || null;\n\t};\n\n\tstatic getBackground = (id: string) => {\n\t\treturn BackgroundData.getList().find(b => b.id === id) || null;\n\t};\n\n\tstatic getItem = (id: string) => {\n\t\treturn ItemData.getList().find(i => i.id === id) || null;\n\t};\n\n\tstatic getPotion = (id: string) => {\n\t\treturn PotionData.getList().find(i => i.id === id) || null;\n\t};\n\n\tstatic getStructure = (id: string) => {\n\t\treturn StructureData.getList().find(s => s.id === id) || null;\n\t};\n\n\tstatic getPack = (id: string) => {\n\t\treturn PackData.getList().find(p => p.id === id) || null;\n\t};\n\n\t///////////////////////////////////////////////////////////////////////////\n\n\tstatic getAllActions = (packIDs: string[]) => {\n\t\tconst actions: ActionModel[] = [];\n\n\t\tGameLogic.getHeroSpeciesDeck(packIDs).forEach(s => actions.push(...s.actions));\n\t\tGameLogic.getMonsterSpeciesDeck(packIDs).forEach(s => actions.push(...s.actions));\n\t\tGameLogic.getRoleDeck(packIDs).forEach(r => actions.push(...r.actions));\n\t\tGameLogic.getBackgroundDeck(packIDs).forEach(b => actions.push(...b.actions));\n\n\t\treturn actions;\n\t};\n\n\tstatic getRandomAction = (item: ItemModel, packIDs: string[]) => {\n\t\tconst actions = GameLogic.getAllActions(packIDs).filter(a => {\n\t\t\t// Ignore actions that require a different sort of item\n\t\t\tconst prerequisite = a.prerequisites.find(p => p.id === 'item');\n\t\t\tif (prerequisite) {\n\t\t\t\tconst types = prerequisite.data as ItemProficiencyType[];\n\t\t\t\tif (!types.includes(item.proficiency)) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn true;\n\t\t});\n\n\t\tconst action = Collections.draw(actions);\n\t\tconst copy = JSON.parse(JSON.stringify(action)) as ActionModel;\n\t\tcopy.id = Utils.guid();\n\n\t\treturn copy;\n\t};\n\n\tstatic getRandomDamageType = (category: DamageCategoryType = DamageCategoryType.Any) => {\n\t\tconst options = [];\n\n\t\tswitch (category) {\n\t\t\tcase DamageCategoryType.Any:\n\t\t\t\toptions.push(DamageType.Acid);\n\t\t\t\toptions.push(DamageType.Cold);\n\t\t\t\toptions.push(DamageType.Decay);\n\t\t\t\toptions.push(DamageType.Edged);\n\t\t\t\toptions.push(DamageType.Electricity);\n\t\t\t\toptions.push(DamageType.Fire);\n\t\t\t\toptions.push(DamageType.Impact);\n\t\t\t\toptions.push(DamageType.Light);\n\t\t\t\toptions.push(DamageType.Piercing);\n\t\t\t\toptions.push(DamageType.Poison);\n\t\t\t\toptions.push(DamageType.Psychic);\n\t\t\t\toptions.push(DamageType.Sonic);\n\t\t\t\tbreak;\n\t\t\tcase DamageCategoryType.Physical:\n\t\t\t\toptions.push(DamageType.Edged);\n\t\t\t\toptions.push(DamageType.Impact);\n\t\t\t\toptions.push(DamageType.Piercing);\n\t\t\t\tbreak;\n\t\t\tcase DamageCategoryType.Energy:\n\t\t\t\toptions.push(DamageType.Cold);\n\t\t\t\toptions.push(DamageType.Electricity);\n\t\t\t\toptions.push(DamageType.Fire);\n\t\t\t\toptions.push(DamageType.Light);\n\t\t\t\toptions.push(DamageType.Sonic);\n\t\t\t\tbreak;\n\t\t\tcase DamageCategoryType.Corruption:\n\t\t\t\toptions.push(DamageType.Acid);\n\t\t\t\toptions.push(DamageType.Decay);\n\t\t\t\toptions.push(DamageType.Poison);\n\t\t\t\toptions.push(DamageType.Psychic);\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn Collections.draw(options);\n\t};\n\n\tstatic getRandomDamageCategoryType = () => {\n\t\tconst options = [\n\t\t\tDamageCategoryType.Physical,\n\t\t\tDamageCategoryType.Energy,\n\t\t\tDamageCategoryType.Corruption\n\t\t];\n\n\t\treturn Collections.draw(options);\n\t};\n\n\tstatic getRandomItemProficiency = () => {\n\t\tconst options = [\n\t\t\tItemProficiencyType.MilitaryWeapons,\n\t\t\tItemProficiencyType.LargeWeapons,\n\t\t\tItemProficiencyType.PairedWeapons,\n\t\t\tItemProficiencyType.RangedWeapons,\n\t\t\tItemProficiencyType.PowderWeapons,\n\t\t\tItemProficiencyType.Implements,\n\t\t\tItemProficiencyType.LightArmor,\n\t\t\tItemProficiencyType.HeavyArmor,\n\t\t\tItemProficiencyType.Shields\n\t\t];\n\n\t\treturn Collections.draw(options);\n\t};\n\n\tstatic getRandomSkill = (category: SkillCategoryType = SkillCategoryType.Any) => {\n\t\tconst options = [];\n\n\t\tswitch (category) {\n\t\t\tcase SkillCategoryType.Any:\n\t\t\t\toptions.push(SkillType.Brawl);\n\t\t\t\toptions.push(SkillType.Perception);\n\t\t\t\toptions.push(SkillType.Presence);\n\t\t\t\toptions.push(SkillType.Reactions);\n\t\t\t\toptions.push(SkillType.Spellcasting);\n\t\t\t\toptions.push(SkillType.Stealth);\n\t\t\t\toptions.push(SkillType.Weapon);\n\t\t\t\tbreak;\n\t\t\tcase SkillCategoryType.Physical:\n\t\t\t\toptions.push(SkillType.Brawl);\n\t\t\t\toptions.push(SkillType.Stealth);\n\t\t\t\toptions.push(SkillType.Weapon);\n\t\t\t\tbreak;\n\t\t\tcase SkillCategoryType.Mental:\n\t\t\t\toptions.push(SkillType.Perception);\n\t\t\t\toptions.push(SkillType.Presence);\n\t\t\t\toptions.push(SkillType.Reactions);\n\t\t\t\toptions.push(SkillType.Spellcasting);\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn Collections.draw(options);\n\t};\n\n\tstatic getRandomSkillCategory = () => {\n\t\tconst options = [\n\t\t\tSkillCategoryType.Physical,\n\t\t\tSkillCategoryType.Mental\n\t\t];\n\n\t\treturn Collections.draw(options);\n\t};\n\n\tstatic getRandomTrait = () => {\n\t\tconst options = [\n\t\t\tTraitType.Endurance,\n\t\t\tTraitType.Resolve,\n\t\t\tTraitType.Speed\n\t\t];\n\n\t\treturn Collections.draw(options);\n\t};\n\n\t///////////////////////////////////////////////////////////////////////////\n\n\tstatic getBoonIsHeroType = (boon: BoonModel) => {\n\t\tswitch (boon.type) {\n\t\t\tcase BoonType.ExtraHero:\n\t\t\tcase BoonType.ExtraXP:\n\t\t\tcase BoonType.LevelUp:\n\t\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t};\n\n\tstatic getBoonIsItemType = (boon: BoonModel) => {\n\t\tswitch (boon.type) {\n\t\t\tcase BoonType.EnchantItem:\n\t\t\tcase BoonType.MagicItem:\n\t\t\tcase BoonType.Money:\n\t\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t};\n\n\tstatic getBoonIsStrongholdType = (boon: BoonModel) => {\n\t\tswitch (boon.type) {\n\t\t\tcase BoonType.Structure:\n\t\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t};\n\n\tstatic getDamageCategory = (type: DamageType) => {\n\t\tswitch (type) {\n\t\t\tcase DamageType.All:\n\t\t\t\treturn DamageCategoryType.All;\n\t\t\tcase DamageType.Edged:\n\t\t\tcase DamageType.Impact:\n\t\t\tcase DamageType.Piercing:\n\t\t\t\treturn DamageCategoryType.Physical;\n\t\t\tcase DamageType.Cold:\n\t\t\tcase DamageType.Electricity:\n\t\t\tcase DamageType.Fire:\n\t\t\tcase DamageType.Light:\n\t\t\tcase DamageType.Sonic:\n\t\t\t\treturn DamageCategoryType.Energy;\n\t\t\tcase DamageType.Acid:\n\t\t\tcase DamageType.Decay:\n\t\t\tcase DamageType.Poison:\n\t\t\tcase DamageType.Psychic:\n\t\t\t\treturn DamageCategoryType.Corruption;\n\t\t}\n\n\t\treturn DamageCategoryType.None;\n\t};\n\n\tstatic getSkillCategory = (skill: SkillType) => {\n\t\tswitch (skill) {\n\t\t\tcase SkillType.All:\n\t\t\t\treturn SkillCategoryType.All;\n\t\t\tcase SkillType.Brawl:\n\t\t\tcase SkillType.Stealth:\n\t\t\tcase SkillType.Weapon:\n\t\t\t\treturn SkillCategoryType.Physical;\n\t\t\tcase SkillType.Perception:\n\t\t\tcase SkillType.Presence:\n\t\t\tcase SkillType.Reactions:\n\t\t\tcase SkillType.Spellcasting:\n\t\t\t\treturn SkillCategoryType.Mental;\n\t\t}\n\n\t\treturn SkillCategoryType.None;\n\t};\n\n\tstatic getItemsForProficiency = (proficiency: ItemProficiencyType, packIDs: string[]) => {\n\t\treturn GameLogic.getItemDeck(packIDs).filter(i => i.proficiency === proficiency);\n\t};\n\n\tstatic addHeroToGame = (game: GameModel, hero: CombatantModel) => {\n\t\tgame.heroSlots = Math.max(game.heroSlots - 1, 0);\n\t\tgame.heroes.push(hero);\n\t\tgame.heroes = Collections.sort(game.heroes, n => n.name);\n\t};\n\n\t///////////////////////////////////////////////////////////////////////////\n\n\tstatic getSpeciesStrength = (species: SpeciesModel) => {\n\t\tlet value = 0;\n\n\t\tvalue += Collections.sum(species.startingFeatures, feature => GameLogic.getFeatureStrength(feature)) + species.startingFeatures.length;\n\t\tvalue += Collections.mean(species.features, feature => GameLogic.getFeatureStrength(feature)) + species.features.length;\n\t\tvalue += Collections.mean(species.actions, action => GameLogic.getActionStrength(action)) + species.actions.length;\n\n\t\treturn Math.round(value / 5);\n\t};\n\n\tstatic getRoleStrength = (role: RoleModel) => {\n\t\tlet value = 0;\n\n\t\tvalue += Collections.sum(role.startingFeatures, feature => GameLogic.getFeatureStrength(feature)) + role.startingFeatures.length;\n\t\tvalue += Collections.mean(role.features, feature => GameLogic.getFeatureStrength(feature)) + role.features.length;\n\t\tvalue += Collections.mean(role.actions, action => GameLogic.getActionStrength(action)) + role.actions.length;\n\n\t\treturn Math.round(value / 5);\n\t};\n\n\tstatic getBackgroundStrength = (background: BackgroundModel) => {\n\t\tlet value = 0;\n\n\t\tvalue += Collections.sum(background.startingFeatures, feature => GameLogic.getFeatureStrength(feature)) + background.startingFeatures.length;\n\t\tvalue += Collections.mean(background.features, feature => GameLogic.getFeatureStrength(feature)) + background.features.length;\n\t\tvalue += Collections.mean(background.actions, action => GameLogic.getActionStrength(action)) + background.actions.length;\n\n\t\treturn Math.round(value / 5);\n\t};\n\n\tstatic getFeatureStrength = (feature: FeatureModel) => {\n\t\tlet factor = 1;\n\n\t\tswitch (feature.type) {\n\t\t\tcase FeatureType.Aura:\n\t\t\t\tfactor = 3;\n\t\t\t\tbreak;\n\t\t\tcase FeatureType.DamageBonus:\n\t\t\tcase FeatureType.DamageResist:\n\t\t\t\tfactor = (feature.damage === DamageType.Any) ? 3 : 1;\n\t\t\t\tbreak;\n\t\t\tcase FeatureType.DamageCategoryBonus:\n\t\t\tcase FeatureType.DamageCategoryResist:\n\t\t\t\tfactor = (feature.damageCategory === DamageCategoryType.Any) ? 5 : 3;\n\t\t\t\tbreak;\n\t\t\tcase FeatureType.Skill:\n\t\t\t\tfactor = (feature.skill === SkillType.Any) ? 3 : 1;\n\t\t\t\tbreak;\n\t\t\tcase FeatureType.SkillCategory:\n\t\t\t\tfactor = (feature.skillCategory === SkillCategoryType.Any) ? 5 : 3;\n\t\t\t\tbreak;\n\t\t\tcase FeatureType.Trait:\n\t\t\t\tfactor = (feature.trait === TraitType.Any) ? 8 : 5;\n\t\t\t\tbreak;\n\t\t\tcase FeatureType.Proficiency:\n\t\t\t\tfactor = 0;\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn feature.rank * factor;\n\t};\n\n\tstatic getActionStrength = (action: ActionModel) => {\n\t\tconst targetParam = action.parameters.find(a => a.id === 'targets') as ActionTargetParameterModel;\n\t\tconst targetStrength = targetParam ? GameLogic.getActionTargetStrength(targetParam, action) : 1;\n\n\t\tconst effectStrength = Collections.sum(action.effects, e => GameLogic.getActionEffectStrength(e));\n\n\t\tlet strength = Math.round(targetStrength * effectStrength);\n\t\tif (ActionLogic.getActionSpeed(action) === 'Quick') {\n\t\t\tstrength += 4;\n\t\t}\n\n\t\treturn strength;\n\t};\n\n\tstatic getActionTargetStrength = (targetParam: ActionTargetParameterModel, action: ActionModel) => {\n\t\t// Calculate the likely number of useful targets\n\t\tif (targetParam.targets) {\n\t\t\tconst mockCombatant = { items: [] as ItemModel[] } as CombatantModel;\n\t\t\tconst range = Math.max(ActionLogic.getActionRange(action, mockCombatant), 1);\n\n\t\t\tlet targetsInRange = 1;\n\t\t\tswitch (range) {\n\t\t\t\tcase 1:\n\t\t\t\tcase 2:\n\t\t\t\tcase 3:\n\t\t\t\t\ttargetsInRange = 2;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 4:\n\t\t\t\tcase 5:\n\t\t\t\tcase 6:\n\t\t\t\t\ttargetsInRange = 3;\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\ttargetsInRange = 4;\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tlet targets = Math.min(targetParam.targets.count, targetsInRange);\n\n\t\t\tif (targetParam.targets.type === ActionTargetType.Combatants) {\n\t\t\t\ttargets = Math.max(targets - 1, 1);\n\t\t\t}\n\n\t\t\treturn targets;\n\t\t}\n\n\t\t// Targets self\n\t\treturn 1;\n\t};\n\n\tstatic getActionEffectStrength = (effect: ActionEffectModel): number => {\n\t\tswitch (effect.id) {\n\t\t\tcase 'attack':\n\t\t\t\treturn Collections.sum(effect.children, e => GameLogic.getActionEffectStrength(e)) / 2;\n\t\t\tcase 'toSelf':\n\t\t\t\treturn Collections.sum(effect.children, e => GameLogic.getActionEffectStrength(e));\n\t\t\tcase 'damage':\n\t\t\t\treturn (effect.data as { type: DamageType, rank: number }).rank;\n\t\t\tcase 'weapondamage':\n\t\t\t\treturn 3 + (effect.data as number);\n\t\t\tcase 'wound':\n\t\t\t\treturn 5 * (effect.data as number);\n\t\t\tcase 'addcondition' :\n\t\t\t\treturn (effect.data as ConditionModel).rank;\n\t\t\tcase 'stun':\n\t\t\t\treturn 5;\n\t\t\tcase 'knockdown':\n\t\t\t\treturn 2;\n\t\t\tcase 'disarm':\n\t\t\tcase 'steal':\n\t\t\t\treturn 10;\n\t\t\tcase 'createPotion':\n\t\t\t\treturn 7;\n\t\t\tcase 'commandAction':\n\t\t\t\treturn 5;\n\t\t\tcase 'healdamage':\n\t\t\t\treturn 2;\n\t\t\tcase 'healwounds':\n\t\t\t\treturn 5 * (effect.data as number);\n\t\t\tcase 'summon':\n\t\t\t\treturn 5;\n\t\t\tcase 'takeAnotherAction':\n\t\t\t\treturn 0;\n\t\t}\n\n\t\treturn 1;\n\t};\n}\n","import { GameLogic } from './game-logic';\n\nimport type { CampaignMapModel, CampaignMapSquareModel } from '../models/campaign-map';\nimport type { RegionModel } from '../models/region';\n\nimport { Collections } from '../utils/collections';\nimport { Random } from '../utils/random';\n\nexport class CampaignMapLogic {\n\tstatic getAdjacentSquares = (map: CampaignMapModel, x: number, y: number) => {\n\t\tconst adj: CampaignMapSquareModel[] = [];\n\n\t\tconst n = map.squares.find(sq => (sq.x === x) && (sq.y === y - 1));\n\t\tif (n) {\n\t\t\tadj.push(n);\n\t\t}\n\t\tif (x % 2 === 0) {\n\t\t\tconst ne = map.squares.find(sq => (sq.x === x + 1) && (sq.y === y));\n\t\t\tif (ne) {\n\t\t\t\tadj.push(ne);\n\t\t\t}\n\t\t\tconst se = map.squares.find(sq => (sq.x === x + 1) && (sq.y === y + 1));\n\t\t\tif (se) {\n\t\t\t\tadj.push(se);\n\t\t\t}\n\t\t} else {\n\t\t\tconst ne = map.squares.find(sq => (sq.x === x + 1) && (sq.y === y - 1));\n\t\t\tif (ne) {\n\t\t\t\tadj.push(ne);\n\t\t\t}\n\t\t\tconst se = map.squares.find(sq => (sq.x === x + 1) && (sq.y === y));\n\t\t\tif (se) {\n\t\t\t\tadj.push(se);\n\t\t\t}\n\t\t}\n\t\tconst s = map.squares.find(sq => (sq.x === x) && (sq.y === y + 1));\n\t\tif (s) {\n\t\t\tadj.push(s);\n\t\t}\n\t\tif (x % 2 === 0) {\n\t\t\tconst sw = map.squares.find(sq => (sq.x === x - 1) && (sq.y === y + 1));\n\t\t\tif (sw) {\n\t\t\t\tadj.push(sw);\n\t\t\t}\n\t\t\tconst nw = map.squares.find(sq => (sq.x === x - 1) && (sq.y === y));\n\t\t\tif (nw) {\n\t\t\t\tadj.push(nw);\n\t\t\t}\n\t\t} else {\n\t\t\tconst sw = map.squares.find(sq => (sq.x === x - 1) && (sq.y === y));\n\t\t\tif (sw) {\n\t\t\t\tadj.push(sw);\n\t\t\t}\n\t\t\tconst nw = map.squares.find(sq => (sq.x === x - 1) && (sq.y === y - 1));\n\t\t\tif (nw) {\n\t\t\t\tadj.push(nw);\n\t\t\t}\n\t\t}\n\n\t\treturn adj;\n\t};\n\n\tstatic getDimensions = (squares: CampaignMapSquareModel[]) => {\n\t\tconst dims = {\n\t\t\tleft: Number.MIN_VALUE,\n\t\t\ttop: Number.MIN_VALUE,\n\t\t\tright: Number.MIN_VALUE,\n\t\t\tbottom: Number.MIN_VALUE\n\t\t};\n\n\t\tsquares.forEach(sq => {\n\t\t\tdims.left = dims.left === Number.MIN_VALUE ? sq.x : Math.min(dims.left, sq.x);\n\t\t\tdims.top = dims.top === Number.MIN_VALUE ? sq.y : Math.min(dims.top, sq.y);\n\t\t\tdims.right = dims.right === Number.MIN_VALUE ? sq.x : Math.max(dims.right, sq.x);\n\t\t\tdims.bottom = dims.bottom === Number.MIN_VALUE ? sq.y : Math.max(dims.bottom, sq.y);\n\t\t});\n\n\t\treturn dims;\n\t};\n\n\tstatic getSquares = (map: CampaignMapModel, region: RegionModel) => {\n\t\treturn map.squares.filter(sq => sq.regionID === region.id);\n\t};\n\n\tstatic getCentralSquare = (map: CampaignMapModel, region: RegionModel) => {\n\t\tconst squares = CampaignMapLogic.getSquares(map, region);\n\t\tconst x = Collections.mean(squares, s => s.x);\n\t\tconst y = Collections.mean(squares, s => s.y);\n\t\treturn Collections.min(squares, s => {\n\t\t\tconst x2 = Math.pow(s.x - x, 2);\n\t\t\tconst y2 = Math.pow(s.y - y, 2);\n\t\t\treturn Math.sqrt(x2 + y2);\n\t\t});\n\t};\n\n\tstatic canAttackRegion = (map: CampaignMapModel, region: RegionModel) => {\n\t\tconst squares = CampaignMapLogic.getSquares(map, region);\n\t\treturn squares.some(sq => CampaignMapLogic.getAdjacentSquares(map, sq.x, sq.y).some(a => a.regionID === ''));\n\t};\n\n\tstatic conquerRegion = (map: CampaignMapModel, region: RegionModel) => {\n\t\tmap.squares.forEach(sq => {\n\t\t\tif (sq.regionID === region.id) {\n\t\t\t\tsq.regionID = '';\n\t\t\t}\n\t\t});\n\n\t\tmap.regions = map.regions.filter(r => map.squares.some(sq => sq.regionID === r.id));\n\t};\n\n\tstatic isConquered = (map: CampaignMapModel) => {\n\t\treturn map.squares.every(sq => sq.regionID === '');\n\t};\n\n\tstatic getMonsters = (region: RegionModel, packIDs: string[]) => {\n\t\tconst monsterIDs = GameLogic.getMonsterSpeciesDeck(packIDs);\n\n\t\tconst rng = Random.getSeededRNG(region.id);\n\t\tconst count = Random.randomNumber(2, rng) + 2;\n\t\treturn Collections.shuffle(monsterIDs, rng).slice(0, count);\n\t};\n}\n","import { BoonType } from '../enums/boon-type';\n\nimport { GameLogic } from '../logic/game-logic';\n\nimport { BoonModel } from '../models/boon';\n\nimport { Collections } from '../utils/collections';\nimport { Random } from '../utils/random';\nimport { Utils } from '../utils/utils';\n\nimport { MagicItemGenerator } from './magic-item-generator';\n\nexport class BoonGenerator {\n\tstatic generateBoon = (packIDs: string[]): BoonModel => {\n\t\tlet type = BoonType.ExtraHero;\n\t\tswitch (Random.randomNumber(7)) {\n\t\t\tcase 0:\n\t\t\t\ttype = BoonType.ExtraHero;\n\t\t\t\tbreak;\n\t\t\tcase 1:\n\t\t\t\ttype = BoonType.ExtraXP;\n\t\t\t\tbreak;\n\t\t\tcase 2:\n\t\t\t\ttype = BoonType.LevelUp;\n\t\t\t\tbreak;\n\t\t\tcase 3:\n\t\t\t\ttype = BoonType.MagicItem;\n\t\t\t\tbreak;\n\t\t\tcase 4:\n\t\t\t\ttype = BoonType.Money;\n\t\t\t\tbreak;\n\t\t\tcase 5:\n\t\t\t\ttype = BoonType.EnchantItem;\n\t\t\t\tbreak;\n\t\t\tcase 6:\n\t\t\t\ttype = BoonType.Structure;\n\t\t\t\tbreak;\n\t\t}\n\n\t\tlet data = null;\n\t\tswitch (type) {\n\t\t\tcase BoonType.MagicItem:\n\t\t\t\tdata = MagicItemGenerator.generateRandomMagicItem(packIDs);\n\t\t\t\tbreak;\n\t\t\tcase BoonType.ExtraXP:\n\t\t\t\tdata = Random.dice(5);\n\t\t\t\tbreak;\n\t\t\tcase BoonType.Money:\n\t\t\t\tdata = Random.dice(5) * 5;\n\t\t\t\tbreak;\n\t\t\tcase BoonType.Structure:\n\t\t\t\tdata = Collections.draw(GameLogic.getStructureDeck(packIDs));\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn {\n\t\t\tid: Utils.guid(),\n\t\t\ttype: type,\n\t\t\tdata: data\n\t\t};\n\t};\n}\n","import { CampaignMapLogic } from '../logic/campaign-map-logic';\n\nimport type { CampaignMapModel, CampaignMapSquareModel } from '../models/campaign-map';\n\nimport { Collections } from '../utils/collections';\nimport { Random } from '../utils/random';\nimport { Utils } from '../utils/utils';\n\nimport { BoonGenerator } from './boon-generator';\nimport { NameGenerator } from './name-generator';\n\nexport class CampaignMapGenerator {\n\tstatic generateCampaignMap = (packIDs: string[]): CampaignMapModel => {\n\t\tconst map: CampaignMapModel = {\n\t\t\tsquares: [ {\n\t\t\t\tx: 0,\n\t\t\t\ty: 0,\n\t\t\t\tregionID: ''\n\t\t\t} ],\n\t\t\tregions: []\n\t\t};\n\n\t\twhile (map.squares.length < 1000) {\n\t\t\tconst parent = Collections.draw(map.squares);\n\n\t\t\tlet adjacent = [];\n\t\t\tif (parent.x % 2 === 0) {\n\t\t\t\tadjacent = [\n\t\t\t\t\t{ x: parent.x, y: parent.y - 1, regionID: '' },\n\t\t\t\t\t{ x: parent.x + 1, y: parent.y, regionID: '' },\n\t\t\t\t\t{ x: parent.x + 1, y: parent.y + 1, regionID: '' },\n\t\t\t\t\t{ x: parent.x, y: parent.y + 1, regionID: '' },\n\t\t\t\t\t{ x: parent.x - 1, y: parent.y + 1, regionID: '' },\n\t\t\t\t\t{ x: parent.x - 1, y: parent.y, regionID: '' }\n\t\t\t\t];\n\t\t\t} else {\n\t\t\t\tadjacent = [\n\t\t\t\t\t{ x: parent.x, y: parent.y - 1, regionID: '' },\n\t\t\t\t\t{ x: parent.x + 1, y: parent.y - 1, regionID: '' },\n\t\t\t\t\t{ x: parent.x + 1, y: parent.y, regionID: '' },\n\t\t\t\t\t{ x: parent.x, y: parent.y + 1, regionID: '' },\n\t\t\t\t\t{ x: parent.x - 1, y: parent.y, regionID: '' },\n\t\t\t\t\t{ x: parent.x - 1, y: parent.y - 1, regionID: '' }\n\t\t\t\t];\n\t\t\t}\n\n\t\t\tconst empty = adjacent.filter(e => !map.squares.find(sq => (sq.x === e.x) && (sq.y === e.y)));\n\t\t\tif (empty.length > 0) {\n\t\t\t\tconst sq = Collections.draw(empty);\n\t\t\t\tmap.squares.push(sq);\n\t\t\t}\n\t\t}\n\n\t\tconst regionCount = 1 + (map.squares.length / 20);\n\t\twhile (map.regions.length !== regionCount) {\n\t\t\t// The lightest colour we will allow is rgb(229, 229, 229)\n\t\t\t// This is so that the player (white) stands out\n\t\t\tconst color = Random.randomColor(20, 230);\n\n\t\t\tmap.regions.push({\n\t\t\t\tid: Utils.guid(),\n\t\t\t\tname: NameGenerator.generateName(),\n\t\t\t\tcolor: `rgb(${color.r}, ${color.g}, ${color.b})`,\n\t\t\t\tencounters: [],\n\t\t\t\tboon: BoonGenerator.generateBoon(packIDs),\n\t\t\t\tdemographics: {\n\t\t\t\t\tsize: 0,\n\t\t\t\t\tpopulation: 0,\n\t\t\t\t\tterrain: ''\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tmap.regions.forEach(region => {\n\t\t\tconst unclaimed = map.squares.filter(sq => sq.regionID === '');\n\t\t\tconst square = Collections.draw(unclaimed);\n\t\t\tsquare.regionID = region.id;\n\t\t});\n\n\t\tdo {\n\t\t\t// Pick a region\n\t\t\tmap.regions.forEach(region => {\n\t\t\t\t// Find all adjacent squares\n\t\t\t\tconst candidates: CampaignMapSquareModel[] = [];\n\t\t\t\tmap.squares\n\t\t\t\t\t.filter(sq => sq.regionID === region.id)\n\t\t\t\t\t.forEach(sq => {\n\t\t\t\t\t\tCampaignMapLogic.getAdjacentSquares(map, sq.x, sq.y)\n\t\t\t\t\t\t\t.filter(s => s.regionID === '')\n\t\t\t\t\t\t\t.forEach(s => candidates.push(s));\n\t\t\t\t\t});\n\n\t\t\t\t// Pick a square and claim it\n\t\t\t\tif (candidates.length > 0) {\n\t\t\t\t\tconst square = Collections.draw(candidates);\n\t\t\t\t\tsquare.regionID = region.id;\n\t\t\t\t}\n\t\t\t});\n\t\t} while (map.squares.filter(sq => sq.regionID === '').length !== 0);\n\n\t\tmap.regions.forEach(region => {\n\t\t\tconst size = CampaignMapLogic.getSquares(map, region).length;\n\t\t\tregion.demographics.size = size;\n\t\t\tregion.demographics.population = Random.dice(size);\n\n\t\t\tconst terrains = [\n\t\t\t\t'Badlands',\n\t\t\t\t'Canyons',\n\t\t\t\t'Desert',\n\t\t\t\t'Fens',\n\t\t\t\t'Forest',\n\t\t\t\t'Jungle',\n\t\t\t\t'Lakes',\n\t\t\t\t'Marshland',\n\t\t\t\t'Mountains',\n\t\t\t\t'Plains',\n\t\t\t\t'Plateaus',\n\t\t\t\t'Rainforest',\n\t\t\t\t'Riverlands',\n\t\t\t\t'Salt flats',\n\t\t\t\t'Scrubland',\n\t\t\t\t'Steppe',\n\t\t\t\t'Taiga',\n\t\t\t\t'Valleys',\n\t\t\t\t'Volcanic',\n\t\t\t\t'Wetlands'\n\t\t\t];\n\t\t\tregion.demographics.terrain = Collections.draw(terrains);\n\n\t\t\tconst count = Random.randomNumber(9) + 1;\n\t\t\twhile (region.encounters.length < count) {\n\t\t\t\tregion.encounters.push(Utils.guid());\n\t\t\t}\n\t\t});\n\n\t\t// Find a coastal region and conquer it\n\t\tconst coastalRegions = map.regions.filter(region => {\n\t\t\tconst squares = CampaignMapLogic.getSquares(map, region);\n\t\t\treturn squares.some(sq => CampaignMapLogic.getAdjacentSquares(map, sq.x, sq.y).length !== 6);\n\t\t});\n\t\tconst startingRegion = Collections.draw(coastalRegions);\n\t\tCampaignMapLogic.conquerRegion(map, startingRegion);\n\n\t\treturn map;\n\t};\n}\n","import unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nexport default function _createForOfIteratorHelper(o, allowArrayLike) {\n  var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"];\n  if (!it) {\n    if (Array.isArray(o) || (it = unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n      var F = function F() {};\n      return {\n        s: F,\n        n: function n() {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function e(_e) {\n          throw _e;\n        },\n        f: F\n      };\n    }\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n  var normalCompletion = true,\n    didErr = false,\n    err;\n  return {\n    s: function s() {\n      it = it.call(o);\n    },\n    n: function n() {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function e(_e2) {\n      didErr = true;\n      err = _e2;\n    },\n    f: function f() {\n      try {\n        if (!normalCompletion && it[\"return\"] != null) it[\"return\"]();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}","export default {\n  xmlns: 'http://www.w3.org/2000/svg',\n  width: 24,\n  height: 24,\n  viewBox: '0 0 24 24',\n  fill: 'none',\n  stroke: 'currentColor',\n  strokeWidth: 2,\n  strokeLinecap: 'round',\n  strokeLinejoin: 'round',\n};\n","import { forwardRef, createElement } from 'react';\nimport PropTypes from 'prop-types';\nimport defaultAttributes from './defaultAttributes';\n\nexport default (iconName, iconNamePascal, iconNode) => {\n  const Component = forwardRef(\n      ({ color = 'currentColor', size = 24, stroke = 2, children, ...rest }, ref) =>\n          createElement(\n              'svg',\n              {\n                ref,\n                ...defaultAttributes,\n                width: size,\n                height: size,\n                stroke: color,\n                strokeWidth: stroke,\n                className: `tabler-icon tabler-icon-${iconName}`,\n                ...rest,\n              },\n              [...iconNode.map(([tag, attrs]) => createElement(tag, attrs)), ...(children || [])],\n          ),\n  );\n\n  Component.propTypes = {\n    color: PropTypes.string,\n    size: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n    stroke: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  };\n\n  Component.displayName = `${iconNamePascal}`;\n\n  return Component;\n};\n","import createReactComponent from '../createReactComponent';\nexport default createReactComponent('cards', 'IconCards', [\n  [\n    'path',\n    {\n      d: 'M3.604 7.197l7.138 -3.109a.96 .96 0 0 1 1.27 .527l4.924 11.902a1 1 0 0 1 -.514 1.304l-7.137 3.109a.96 .96 0 0 1 -1.271 -.527l-4.924 -11.903a1 1 0 0 1 .514 -1.304z',\n      key: 'svg-0',\n    },\n  ],\n  ['path', { d: 'M15 4h1a1 1 0 0 1 1 1v3.5', key: 'svg-1' }],\n  [\n    'path',\n    {\n      d: 'M20 6c.264 .112 .52 .217 .768 .315a1 1 0 0 1 .53 1.311l-2.298 5.374',\n      key: 'svg-2',\n    },\n  ],\n]);\n","import createReactComponent from '../createReactComponent';\nexport default createReactComponent(\n  'help-circle-filled',\n  'IconHelpCircleFilled',\n  [\n    [\n      'path',\n      {\n        d: 'M12 2c5.523 0 10 4.477 10 10a10 10 0 0 1 -19.995 .324l-.005 -.324l.004 -.28c.148 -5.393 4.566 -9.72 9.996 -9.72zm0 13a1 1 0 0 0 -.993 .883l-.007 .117l.007 .127a1 1 0 0 0 1.986 0l.007 -.117l-.007 -.127a1 1 0 0 0 -.993 -.883zm1.368 -6.673a2.98 2.98 0 0 0 -3.631 .728a1 1 0 0 0 1.44 1.383l.171 -.18a.98 .98 0 0 1 1.11 -.15a1 1 0 0 1 -.34 1.886l-.232 .012a1 1 0 0 0 .111 1.994a3 3 0 0 0 1.371 -5.673z',\n        fill: 'currentColor',\n        key: 'svg-0',\n        strokeWidth: '0',\n      },\n    ],\n  ],\n);\n","import createReactComponent from '../createReactComponent';\nexport default createReactComponent('help-circle', 'IconHelpCircle', [\n  ['path', { d: 'M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0', key: 'svg-0' }],\n  ['path', { d: 'M12 16v.01', key: 'svg-1' }],\n  [\n    'path',\n    {\n      d: 'M12 13a2 2 0 0 0 .914 -3.782a1.98 1.98 0 0 0 -2.414 .483',\n      key: 'svg-2',\n    },\n  ],\n]);\n","import { BackgroundData } from '../data/background-data';\nimport { HeroSpeciesData } from '../data/hero-species-data';\nimport { ItemData } from '../data/item-data';\nimport { MonsterSpeciesData } from '../data/monster-species-data';\nimport { PackData } from '../data/pack-data';\nimport { PotionData } from '../data/potion-data';\nimport { RoleData } from '../data/role-data';\nimport { StructureData } from '../data/structure-data';\n\nexport class PackLogic {\n\tstatic getPacks = () => {\n\t\treturn PackData.getList();\n\t};\n\n\tstatic getPackCardCount = (packID: string) => {\n\t\tlet count = 0;\n\n\t\tcount += HeroSpeciesData.getList().filter(s => s.packID === packID).length;\n\t\tcount += MonsterSpeciesData.getList().filter(s => s.packID === packID).length;\n\t\tcount += RoleData.getList().filter(r => r.packID === packID).length;\n\t\tcount += BackgroundData.getList().filter(b => b.packID === packID).length;\n\t\tcount += ItemData.getList().filter(i => i.packID === packID).length;\n\t\tcount += PotionData.getList().filter(i => i.packID === packID).length;\n\t\tcount += StructureData.getList().filter(s => s.packID === packID).length;\n\n\t\treturn count;\n\t};\n}\n","import createReactComponent from '../createReactComponent';\nexport default createReactComponent(\n  'arrow-big-right-lines-filled',\n  'IconArrowBigRightLinesFilled',\n  [\n    [\n      'path',\n      {\n        d: 'M12.089 3.634a2 2 0 0 0 -1.089 1.78l-.001 2.585l-1.999 .001a1 1 0 0 0 -1 1v6l.007 .117a1 1 0 0 0 .993 .883l1.999 -.001l.001 2.587a2 2 0 0 0 3.414 1.414l6.586 -6.586a2 2 0 0 0 0 -2.828l-6.586 -6.586a2 2 0 0 0 -2.18 -.434l-.145 .068z',\n        fill: 'currentColor',\n        key: 'svg-0',\n        strokeWidth: '0',\n      },\n    ],\n    [\n      'path',\n      {\n        d: 'M3 8a1 1 0 0 1 .993 .883l.007 .117v6a1 1 0 0 1 -1.993 .117l-.007 -.117v-6a1 1 0 0 1 1 -1z',\n        fill: 'currentColor',\n        key: 'svg-1',\n        strokeWidth: '0',\n      },\n    ],\n    [\n      'path',\n      {\n        d: 'M6 8a1 1 0 0 1 .993 .883l.007 .117v6a1 1 0 0 1 -1.993 .117l-.007 -.117v-6a1 1 0 0 1 1 -1z',\n        fill: 'currentColor',\n        key: 'svg-2',\n        strokeWidth: '0',\n      },\n    ],\n  ],\n);\n","import createReactComponent from '../createReactComponent';\nexport default createReactComponent('coins', 'IconCoins', [\n  [\n    'path',\n    {\n      d: 'M9 14c0 1.657 2.686 3 6 3s6 -1.343 6 -3s-2.686 -3 -6 -3s-6 1.343 -6 3z',\n      key: 'svg-0',\n    },\n  ],\n  ['path', { d: 'M9 14v4c0 1.656 2.686 3 6 3s6 -1.344 6 -3v-4', key: 'svg-1' }],\n  [\n    'path',\n    {\n      d: 'M3 6c0 1.072 1.144 2.062 3 2.598s4.144 .536 6 0c1.856 -.536 3 -1.526 3 -2.598c0 -1.072 -1.144 -2.062 -3 -2.598s-4.144 -.536 -6 0c-1.856 .536 -3 1.526 -3 2.598z',\n      key: 'svg-2',\n    },\n  ],\n  ['path', { d: 'M3 6v10c0 .888 .772 1.45 2 2', key: 'svg-3' }],\n  ['path', { d: 'M3 11c0 .888 .772 1.45 2 2', key: 'svg-4' }],\n]);\n","import createReactComponent from '../createReactComponent';\nexport default createReactComponent('award-filled', 'IconAwardFilled', [\n  [\n    'path',\n    {\n      d: 'M19.496 13.983l1.966 3.406a1.001 1.001 0 0 1 -.705 1.488l-.113 .011l-.112 -.001l-2.933 -.19l-1.303 2.636a1.001 1.001 0 0 1 -1.608 .26l-.082 -.094l-.072 -.11l-1.968 -3.407a8.994 8.994 0 0 0 6.93 -3.999z',\n      fill: 'currentColor',\n      key: 'svg-0',\n      strokeWidth: '0',\n    },\n  ],\n  [\n    'path',\n    {\n      d: 'M11.43 17.982l-1.966 3.408a1.001 1.001 0 0 1 -1.622 .157l-.076 -.1l-.064 -.114l-1.304 -2.635l-2.931 .19a1.001 1.001 0 0 1 -1.022 -1.29l.04 -.107l.05 -.1l1.968 -3.409a8.994 8.994 0 0 0 6.927 4.001z',\n      fill: 'currentColor',\n      key: 'svg-1',\n      strokeWidth: '0',\n    },\n  ],\n  [\n    'path',\n    {\n      d: 'M12 2l.24 .004a7 7 0 0 1 6.76 6.996l-.003 .193l-.007 .192l-.018 .245l-.026 .242l-.024 .178a6.985 6.985 0 0 1 -.317 1.268l-.116 .308l-.153 .348a7.001 7.001 0 0 1 -12.688 -.028l-.13 -.297l-.052 -.133l-.08 -.217l-.095 -.294a6.96 6.96 0 0 1 -.093 -.344l-.06 -.271l-.049 -.271l-.02 -.139l-.039 -.323l-.024 -.365l-.006 -.292a7 7 0 0 1 6.76 -6.996l.24 -.004z',\n      fill: 'currentColor',\n      key: 'svg-2',\n      strokeWidth: '0',\n    },\n  ],\n]);\n","import createReactComponent from '../createReactComponent';\nexport default createReactComponent('refresh', 'IconRefresh', [\n  ['path', { d: 'M20 11a8.1 8.1 0 0 0 -15.5 -2m-.5 -4v4h4', key: 'svg-0' }],\n  ['path', { d: 'M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4', key: 'svg-1' }],\n]);\n","import createReactComponent from '../createReactComponent';\nexport default createReactComponent('vaccine-bottle', 'IconVaccineBottle', [\n  [\n    'path',\n    {\n      d: 'M9 3m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v1a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z',\n      key: 'svg-0',\n    },\n  ],\n  [\n    'path',\n    {\n      d: 'M10 6v.98c0 .877 -.634 1.626 -1.5 1.77c-.866 .144 -1.5 .893 -1.5 1.77v8.48a2 2 0 0 0 2 2h6a2 2 0 0 0 2 -2v-8.48c0 -.877 -.634 -1.626 -1.5 -1.77a1.795 1.795 0 0 1 -1.5 -1.77v-.98',\n      key: 'svg-1',\n    },\n  ],\n  ['path', { d: 'M7 12h10', key: 'svg-2' }],\n  ['path', { d: 'M7 18h10', key: 'svg-3' }],\n  ['path', { d: 'M11 15h2', key: 'svg-4' }],\n]);\n","import createReactComponent from '../createReactComponent';\nexport default createReactComponent('snowflake', 'IconSnowflake', [\n  ['path', { d: 'M10 4l2 1l2 -1', key: 'svg-0' }],\n  ['path', { d: 'M12 2v6.5l3 1.72', key: 'svg-1' }],\n  ['path', { d: 'M17.928 6.268l.134 2.232l1.866 1.232', key: 'svg-2' }],\n  ['path', { d: 'M20.66 7l-5.629 3.25l.01 3.458', key: 'svg-3' }],\n  ['path', { d: 'M19.928 14.268l-1.866 1.232l-.134 2.232', key: 'svg-4' }],\n  ['path', { d: 'M20.66 17l-5.629 -3.25l-2.99 1.738', key: 'svg-5' }],\n  ['path', { d: 'M14 20l-2 -1l-2 1', key: 'svg-6' }],\n  ['path', { d: 'M12 22v-6.5l-3 -1.72', key: 'svg-7' }],\n  ['path', { d: 'M6.072 17.732l-.134 -2.232l-1.866 -1.232', key: 'svg-8' }],\n  ['path', { d: 'M3.34 17l5.629 -3.25l-.01 -3.458', key: 'svg-9' }],\n  ['path', { d: 'M4.072 9.732l1.866 -1.232l.134 -2.232', key: 'svg-10' }],\n  ['path', { d: 'M3.34 7l5.629 3.25l2.99 -1.738', key: 'svg-11' }],\n]);\n","import createReactComponent from '../createReactComponent';\nexport default createReactComponent('spiral', 'IconSpiral', [\n  [\n    'path',\n    {\n      d: 'M10 12.057a1.9 1.9 0 0 0 .614 .743c1.06 .713 2.472 .112 3.043 -.919c.839 -1.513 -.022 -3.368 -1.525 -4.08c-2 -.95 -4.371 .154 -5.24 2.086c-1.095 2.432 .29 5.248 2.71 6.246c2.931 1.208 6.283 -.418 7.438 -3.255c1.36 -3.343 -.557 -7.134 -3.896 -8.41c-3.855 -1.474 -8.2 .68 -9.636 4.422c-1.63 4.253 .823 9.024 5.082 10.576c4.778 1.74 10.118 -.941 11.833 -5.59a9.354 9.354 0 0 0 .577 -2.813',\n      key: 'svg-0',\n    },\n  ],\n]);\n","import createReactComponent from '../createReactComponent';\nexport default createReactComponent('slice', 'IconSlice', [\n  ['path', { d: 'M3 19l15 -15l3 3l-6 6l2 2a14 14 0 0 1 -14 4', key: 'svg-0' }],\n]);\n","import createReactComponent from '../createReactComponent';\nexport default createReactComponent('bolt', 'IconBolt', [\n  ['path', { d: 'M13 3l0 7l6 0l-8 11l0 -7l-6 0l8 -11', key: 'svg-0' }],\n]);\n","import createReactComponent from '../createReactComponent';\nexport default createReactComponent('flame', 'IconFlame', [\n  [\n    'path',\n    {\n      d: 'M12 12c2 -2.96 0 -7 -1 -8c0 3.038 -1.773 4.741 -3 6c-1.226 1.26 -2 3.24 -2 5a6 6 0 1 0 12 0c0 -1.532 -1.056 -3.94 -2 -5c-1.786 3 -2.791 3 -4 2z',\n      key: 'svg-0',\n    },\n  ],\n]);\n","import createReactComponent from '../createReactComponent';\nexport default createReactComponent('hammer', 'IconHammer', [\n  [\n    'path',\n    {\n      d: 'M11.414 10l-7.383 7.418a2.091 2.091 0 0 0 0 2.967a2.11 2.11 0 0 0 2.976 0l7.407 -7.385',\n      key: 'svg-0',\n    },\n  ],\n  [\n    'path',\n    {\n      d: 'M18.121 15.293l2.586 -2.586a1 1 0 0 0 0 -1.414l-7.586 -7.586a1 1 0 0 0 -1.414 0l-2.586 2.586a1 1 0 0 0 0 1.414l7.586 7.586a1 1 0 0 0 1.414 0z',\n      key: 'svg-1',\n    },\n  ],\n]);\n","import createReactComponent from '../createReactComponent';\nexport default createReactComponent('sun', 'IconSun', [\n  ['path', { d: 'M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0', key: 'svg-0' }],\n  [\n    'path',\n    {\n      d: 'M3 12h1m8 -9v1m8 8h1m-9 8v1m-6.4 -15.4l.7 .7m12.1 -.7l-.7 .7m0 11.4l.7 .7m-12.1 -.7l-.7 .7',\n      key: 'svg-1',\n    },\n  ],\n]);\n","import createReactComponent from '../createReactComponent';\nexport default createReactComponent('trident', 'IconTrident', [\n  ['path', { d: 'M3 6l2 -2v3a7 7 0 0 0 14 0v-3l2 2', key: 'svg-0' }],\n  ['path', { d: 'M12 21v-18l-2 2m4 0l-2 -2', key: 'svg-1' }],\n]);\n","import createReactComponent from '../createReactComponent';\nexport default createReactComponent('skull', 'IconSkull', [\n  [\n    'path',\n    {\n      d: 'M12 4c4.418 0 8 3.358 8 7.5c0 1.901 -.755 3.637 -2 4.96l0 2.54a1 1 0 0 1 -1 1h-10a1 1 0 0 1 -1 -1v-2.54c-1.245 -1.322 -2 -3.058 -2 -4.96c0 -4.142 3.582 -7.5 8 -7.5z',\n      key: 'svg-0',\n    },\n  ],\n  ['path', { d: 'M10 17v3', key: 'svg-1' }],\n  ['path', { d: 'M14 17v3', key: 'svg-2' }],\n  ['path', { d: 'M9 11m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0', key: 'svg-3' }],\n  ['path', { d: 'M15 11m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0', key: 'svg-4' }],\n]);\n","import createReactComponent from '../createReactComponent';\nexport default createReactComponent('brain', 'IconBrain', [\n  [\n    'path',\n    {\n      d: 'M15.5 13a3.5 3.5 0 0 0 -3.5 3.5v1a3.5 3.5 0 0 0 7 0v-1.8',\n      key: 'svg-0',\n    },\n  ],\n  [\n    'path',\n    {\n      d: 'M8.5 13a3.5 3.5 0 0 1 3.5 3.5v1a3.5 3.5 0 0 1 -7 0v-1.8',\n      key: 'svg-1',\n    },\n  ],\n  ['path', { d: 'M17.5 16a3.5 3.5 0 0 0 0 -7h-.5', key: 'svg-2' }],\n  ['path', { d: 'M19 9.3v-2.8a3.5 3.5 0 0 0 -7 0', key: 'svg-3' }],\n  ['path', { d: 'M6.5 16a3.5 3.5 0 0 1 0 -7h.5', key: 'svg-4' }],\n  ['path', { d: 'M5 9.3v-2.8a3.5 3.5 0 0 1 7 0v10', key: 'svg-5' }],\n]);\n","import createReactComponent from '../createReactComponent';\nexport default createReactComponent('access-point', 'IconAccessPoint', [\n  ['path', { d: 'M12 12l0 .01', key: 'svg-0' }],\n  ['path', { d: 'M14.828 9.172a4 4 0 0 1 0 5.656', key: 'svg-1' }],\n  ['path', { d: 'M17.657 6.343a8 8 0 0 1 0 11.314', key: 'svg-2' }],\n  ['path', { d: 'M9.168 14.828a4 4 0 0 1 0 -5.656', key: 'svg-3' }],\n  ['path', { d: 'M6.337 17.657a8 8 0 0 1 0 -11.314', key: 'svg-4' }],\n]);\n","import {\n\tIconAccessPoint, IconArrowBigRightLinesFilled, IconAwardFilled, IconBolt, IconBrain, IconCoins, IconFlame,\n\tIconHammer, IconRefresh, IconSkull, IconSlice, IconSnowflake, IconSpiral, IconSun, IconTrident, IconVaccineBottle\n} from '@tabler/icons-react';\nimport { Component } from 'react';\n\nimport { DamageType } from '../../../enums/damage-type';\n\nimport './icon-value.scss';\n\nexport enum IconType {\n\tMovement = 'Movement',\n\tMoney = 'Money',\n\tXP = 'XP',\n\tRedraw = 'Redraw'\n}\n\nexport enum IconSize {\n\tDefault = 'default',\n\tButton = 'button',\n\tLarge = 'large'\n}\n\ninterface Props {\n\tvalue: number | string;\n\ttype: DamageType | IconType;\n\tsize: IconSize;\n}\n\nexport class IconValue extends Component<Props> {\n\tstatic defaultProps = {\n\t\tsize: IconSize.Default\n\t};\n\n\tgetTextSize = () => {\n\t\tswitch (this.props.size) {\n\t\t\tcase IconSize.Button:\n\t\t\t\treturn 15;\n\t\t\tcase IconSize.Large:\n\t\t\t\treturn 40;\n\t\t}\n\n\t\treturn 15;\n\t};\n\n\tgetIconSize = () => {\n\t\tswitch (this.props.size) {\n\t\t\tcase IconSize.Button:\n\t\t\t\treturn 15;\n\t\t\tcase IconSize.Large:\n\t\t\t\treturn 24;\n\t\t}\n\n\t\treturn 12;\n\t};\n\n\tgetTextWeight = () => {\n\t\tswitch (this.props.size) {\n\t\t\tcase IconSize.Button:\n\t\t\tcase IconSize.Large:\n\t\t\t\treturn 600;\n\t\t}\n\n\t\treturn 400;\n\t};\n\n\trender = () => {\n\t\ttry {\n\t\t\tconst size = this.getIconSize();\n\n\t\t\tlet icon = null;\n\t\t\tswitch (this.props.type) {\n\t\t\t\tcase IconType.Movement:\n\t\t\t\t\ticon = <IconArrowBigRightLinesFilled size={size} />;\n\t\t\t\t\tbreak;\n\t\t\t\tcase IconType.Money:\n\t\t\t\t\ticon = <IconCoins size={size} />;\n\t\t\t\t\tbreak;\n\t\t\t\tcase IconType.XP:\n\t\t\t\t\ticon = <IconAwardFilled size={size} />;\n\t\t\t\t\tbreak;\n\t\t\t\tcase IconType.Redraw:\n\t\t\t\t\ticon = <IconRefresh size={size} />;\n\t\t\t\t\tbreak;\n\t\t\t\tcase DamageType.Acid:\n\t\t\t\t\ticon = <IconVaccineBottle size={size} />;\n\t\t\t\t\tbreak;\n\t\t\t\tcase DamageType.Cold:\n\t\t\t\t\ticon = <IconSnowflake size={size} />;\n\t\t\t\t\tbreak;\n\t\t\t\tcase DamageType.Decay:\n\t\t\t\t\ticon = <IconSpiral size={size} />;\n\t\t\t\t\tbreak;\n\t\t\t\tcase DamageType.Edged:\n\t\t\t\t\ticon = <IconSlice size={size} />;\n\t\t\t\t\tbreak;\n\t\t\t\tcase DamageType.Electricity:\n\t\t\t\t\ticon = <IconBolt size={size} />;\n\t\t\t\t\tbreak;\n\t\t\t\tcase DamageType.Fire:\n\t\t\t\t\ticon = <IconFlame size={size} />;\n\t\t\t\t\tbreak;\n\t\t\t\tcase DamageType.Impact:\n\t\t\t\t\ticon = <IconHammer size={size} />;\n\t\t\t\t\tbreak;\n\t\t\t\tcase DamageType.Light:\n\t\t\t\t\ticon = <IconSun size={size} />;\n\t\t\t\t\tbreak;\n\t\t\t\tcase DamageType.Piercing:\n\t\t\t\t\ticon = <IconTrident size={size} />;\n\t\t\t\t\tbreak;\n\t\t\t\tcase DamageType.Poison:\n\t\t\t\t\ticon = <IconSkull size={size} />;\n\t\t\t\t\tbreak;\n\t\t\t\tcase DamageType.Psychic:\n\t\t\t\t\ticon = <IconBrain size={size} />;\n\t\t\t\t\tbreak;\n\t\t\t\tcase DamageType.Sonic:\n\t\t\t\t\ticon = <IconAccessPoint size={size} />;\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\treturn (\n\t\t\t\t<div className='icon-value' title={`${this.props.value} ${this.props.type}`} style={{ fontSize: `${this.getTextSize()}px`, fontWeight: `${this.getTextWeight()}` }}>\n\t\t\t\t\t{this.props.value} {icon}\n\t\t\t\t</div>\n\t\t\t);\n\t\t} catch {\n\t\t\treturn <div className='icon-value render-error' />;\n\t\t}\n\t};\n}\n","import createReactComponent from '../createReactComponent';\nexport default createReactComponent('info-circle', 'IconInfoCircle', [\n  ['path', { d: 'M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0', key: 'svg-0' }],\n  ['path', { d: 'M12 9h.01', key: 'svg-1' }],\n  ['path', { d: 'M11 12h1v4h1', key: 'svg-2' }],\n]);\n","import { Component } from 'react';\nimport { IconInfoCircle } from '@tabler/icons-react';\n\nimport './text.scss';\n\nexport enum TextType {\n\tDefault = 'default',\n\tDimmed = 'dimmed',\n\tHeading = 'heading',\n\tSubHeading = 'subheading',\n\tMinorHeading = 'minorheading',\n\tListItem = 'listitem',\n\tInformation = 'information',\n\tTip = 'tip',\n\tSmall = 'small'\n}\n\ninterface Props {\n\ttype: TextType;\n\tchildren: (JSX.Element | number | string | null)[] | JSX.Element | number | string | null;\n}\n\nexport class Text extends Component<Props> {\n\tstatic defaultProps = {\n\t\ttype: TextType.Default\n\t};\n\n\trender = () => {\n\t\ttry {\n\t\t\tlet icon = null;\n\t\t\tswitch (this.props.type) {\n\t\t\t\tcase TextType.Tip:\n\t\t\t\t\ticon = (\n\t\t\t\t\t\t<div className='skirmish-text-icon'>\n\t\t\t\t\t\t\t<IconInfoCircle />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\treturn (\n\t\t\t\t<div className={`skirmish-text ${this.props.type}`}>\n\t\t\t\t\t{icon}\n\t\t\t\t\t<div className={`skirmish-text-content ${this.props.type}`}>\n\t\t\t\t\t\t{this.props.children}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t);\n\t\t} catch {\n\t\t\treturn <div className='skirmish-text render-error' />;\n\t\t}\n\t};\n}\n","import { Component } from 'react';\n\nimport './badge.scss';\n\ninterface Props {\n\tvalue: number | string | null;\n\tchildren: JSX.Element;\n}\n\nexport class Badge extends Component<Props> {\n\tstatic defaultProps = {\n\t\tvalue: null\n\t};\n\n\trender = () => {\n\t\ttry {\n\t\t\tif (!this.props.value) {\n\t\t\t\treturn this.props.children;\n\t\t\t}\n\n\t\t\treturn (\n\t\t\t\t<div className='badge'>\n\t\t\t\t\t{this.props.children}\n\t\t\t\t\t<div className='badge-value'>\n\t\t\t\t\t\t{this.props.value}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t);\n\t\t} catch {\n\t\t\treturn <div className='badge render-error' />;\n\t\t}\n\t};\n}\n","import './box.scss';\n\ninterface Props {\n\tlabel: string;\n\tchildren: JSX.Element | null | (JSX.Element | null)[];\n}\n\nexport const Box = (props: Props) => {\n\ttry {\n\t\treturn (\n\t\t\t<div className='box'>\n\t\t\t\t<div className='box-content'>\n\t\t\t\t\t{props.children}\n\t\t\t\t</div>\n\t\t\t\t<div className='box-label'>\n\t\t\t\t\t{props.label}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t} catch {\n\t\treturn <div className='box render-error' />;\n\t}\n};\n","import { Component } from 'react';\n\nimport './card-list.scss';\n\ninterface Props {\n\tmode: 'grid' | 'row';\n\tcards: (JSX.Element | null)[];\n}\n\nexport class CardList extends Component<Props> {\n\tstatic defaultProps = {\n\t\tmode: 'grid'\n\t};\n\n\trender = () => {\n\t\ttry {\n\t\t\treturn (\n\t\t\t\t<div className={`card-list ${this.props.mode}`}>\n\t\t\t\t\t{this.props.cards.map((card, n) => <div key={n} className='card-container'>{ card }</div>)}\n\t\t\t\t</div>\n\t\t\t);\n\t\t} catch {\n\t\t\treturn <div className='card-list render-error' />;\n\t\t}\n\t};\n}\n","import { useState } from 'react';\n\nimport { Text } from '../../controls';\n\nimport './confirm-button.scss';\n\ninterface Props {\n\tlabel: string;\n\tonClick: () => void;\n}\n\nexport const ConfirmButton = (props: Props) => {\n\tconst [ view, setView ] = useState<'button' | 'query'>('button');\n\n\tconst showDialog = () => {\n\t\tsetView('query');\n\t};\n\n\tconst onConfirm = () => {\n\t\tsetView('button');\n\t\tprops.onClick();\n\t};\n\n\tconst onCancel = () => {\n\t\tsetView('button');\n\t};\n\n\tif (view === 'button') {\n\t\treturn (\n\t\t\t<button className='danger' onClick={showDialog}>{props.label}</button>\n\t\t);\n\t}\n\n\ttry {\n\t\treturn (\n\t\t\t<div className='confirm-query'>\n\t\t\t\t<Text>\n\t\t\t\t\t<b>{`${props.label} - are you sure?`}</b>\n\t\t\t\t</Text>\n\t\t\t\t<div className='button-row'>\n\t\t\t\t\t<button onClick={onConfirm}>OK</button>\n\t\t\t\t\t<button onClick={onCancel}>Cancel</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t} catch {\n\t\treturn <div className='confirm-query render-error' />;\n\t}\n};\n","import createReactComponent from '../createReactComponent';\nexport default createReactComponent('x', 'IconX', [\n  ['path', { d: 'M18 6l-12 12', key: 'svg-0' }],\n  ['path', { d: 'M6 6l12 12', key: 'svg-1' }],\n]);\n","import { Component } from 'react';\nimport { IconX } from '@tabler/icons-react';\n\nimport './dialog.scss';\n\ninterface Props {\n\tcontent: JSX.Element;\n\tlevel: number;\n\tonClose: (() => void) | null;\n}\n\nexport class Dialog extends Component<Props> {\n\tstatic defaultProps = {\n\t\tlevel: 1,\n\t\tonClose: null\n\t};\n\n\tcloseClick = (e: React.MouseEvent) => {\n\t\te.stopPropagation();\n\n\t\tif (this.props.onClose) {\n\t\t\tthis.props.onClose();\n\t\t}\n\t};\n\n\tdialogClick = (e: React.MouseEvent) => {\n\t\te.stopPropagation();\n\t};\n\n\tgetDialog = () => {\n\t\ttry {\n\t\t\tlet closeBtn = null;\n\t\t\tif (this.props.onClose) {\n\t\t\t\tcloseBtn = (\n\t\t\t\t\t<button className='icon-btn close-btn' onClick={this.closeClick}>\n\t\t\t\t\t\t<IconX />\n\t\t\t\t\t</button>\n\t\t\t\t);\n\t\t\t}\n\n\t\t\treturn (\n\t\t\t\t<div className={`dialog level-${this.props.level}`} onClick={this.dialogClick}>\n\t\t\t\t\t{closeBtn}\n\t\t\t\t\t<div className='dialog-content'>\n\t\t\t\t\t\t{this.props.content}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t);\n\t\t} catch {\n\t\t\treturn <div className='dialog render-error' />;\n\t\t}\n\t};\n\n\trender = () => {\n\t\ttry {\n\t\t\treturn (\n\t\t\t\t<div className='dialog-backdrop' onClick={this.closeClick}>\n\t\t\t\t\t{this.getDialog()}\n\t\t\t\t</div>\n\t\t\t);\n\t\t} catch {\n\t\t\treturn (\n\t\t\t\t<div className='dialog-backdrop render-error' />\n\t\t\t);\n\t\t}\n\t};\n}\n","import { MouseEvent, useEffect, useRef, useState } from 'react';\n\nimport './expander.scss';\n\ninterface Props {\n\theader: string | JSX.Element;\n\tcontent: string | JSX.Element;\n}\n\nexport const Expander = (props: Props) => {\n\tconst [ opened, setOpened ] = useState<boolean>(false);\n\n\tconst containerRef = useRef<HTMLDivElement>(null);\n\tconst contentRef = useRef<HTMLDivElement>(null);\n\n\tuseEffect(() => {\n\t\tif (!containerRef.current) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst observer = new MutationObserver(onMutation);\n\t\tobserver.observe(containerRef.current, {\n\t\t\tchildList: true,\n\t\t\tsubtree: true\n\t\t});\n\n\t\treturn () => {\n\t\t\tobserver.disconnect();\n\t\t};\n\t}, []);\n\n\tconst onMutation = () => {\n\t\tconst content = contentRef.current;\n\t\tif (!content) {\n\t\t\treturn;\n\t\t}\n\n\t\tcontent\n\t\t\t.animate(\n\t\t\t\t{ maxHeight: `${content.scrollHeight}px`, opacity: 1 },\n\t\t\t\t{ duration: 200, easing: 'ease-in', fill: 'forwards' }\n\t\t\t);\n\t};\n\n\tconst openExpander = () => {\n\t\tsetOpened(true);\n\t};\n\n\tconst closeExpander = () => {\n\t\tconst content = contentRef.current;\n\t\tif (!content) {\n\t\t\treturn;\n\t\t}\n\n\t\tcontent\n\t\t\t.animate(\n\t\t\t\t{ maxHeight: 0, opacity: 0 },\n\t\t\t\t{ duration: 200, easing: 'ease-out' }\n\t\t\t)\n\t\t\t.finished.then(() => {\n\t\t\t\tcontent.style.display = 'none';\n\t\t\t\tsetOpened(false);\n\t\t\t});\n\t};\n\n\tconst onClick = (e: MouseEvent) => {\n\t\te.stopPropagation();\n\n\t\tif (opened) {\n\t\t\tcloseExpander();\n\t\t} else {\n\t\t\topenExpander();\n\t\t}\n\t};\n\n\treturn (\n\t\t<div className='expander' ref={containerRef} onClick={onClick}>\n\t\t\t<div className='expander-header'>\n\t\t\t\t{props.header}\n\t\t\t</div>\n\t\t\t{opened ? <div className='expander-content' ref={contentRef}>{props.content}</div> : null}\n\t\t</div>\n\t);\n};\n","import './gauge.scss';\n\ninterface Props {\n\tprogress: number;\n\tcontent: string | JSX.Element | null;\n}\n\nexport const Gauge = (props: Props) => {\n\tconst width = 92;\n\tconst circumference = 80 * Math.PI;\n\tconst strokeLength = circumference * 2 / 3;\n\n\treturn (\n\t\t<div className='gauge'>\n\t\t\t<svg\n\t\t\t\twidth={width}\n\t\t\t\theight={width}\n\t\t\t\tviewBox={`0 0 ${width} ${width}`}\n\t\t\t\tstyle={{ transform: 'rotate(-210deg)' }}\n\t\t\t>\n\t\t\t\t<circle\n\t\t\t\t\tcx={width / 2}\n\t\t\t\t\tcy={width / 2}\n\t\t\t\t\tr={40}\n\t\t\t\t\tfill='none'\n\t\t\t\t\tstroke='rgb(220, 220, 220)'\n\t\t\t\t\tstrokeWidth={5}\n\t\t\t\t\tstrokeDasharray={`${strokeLength}, ${circumference}`}\n\t\t\t\t\tstrokeLinecap='round'\n\t\t\t\t/>\n\t\t\t\t<circle\n\t\t\t\t\tcx={width / 2}\n\t\t\t\t\tcy={width / 2}\n\t\t\t\t\tr={40}\n\t\t\t\t\tfill='none'\n\t\t\t\t\tstroke='rgb(60, 170, 255)'\n\t\t\t\t\tstrokeWidth={6}\n\t\t\t\t\tstrokeDasharray={`${strokeLength}, ${circumference}`}\n\t\t\t\t\tstrokeDashoffset={strokeLength * (1 - Math.min(props.progress, 1))}\n\t\t\t\t\tstrokeLinecap='round'\n\t\t\t\t/>\n\t\t\t</svg>\n\t\t\t<div className='gauge-content'>\n\t\t\t\t{props.content}\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n","import { Component, MouseEvent } from 'react';\n\nimport { CardType } from '../../../enums/card-type';\nimport { Random } from '../../../utils/random';\n\nimport './playing-card.scss';\n\ninterface Props {\n\tstack: boolean;\n\ttype: CardType;\n\tfront: JSX.Element;\n\tback: JSX.Element | null;\n\tfooterText: string;\n\tfooterContent: JSX.Element[];\n\tfooterType: CardType | null;\n\tflipped: boolean;\n\tdisabled: boolean;\n\tonClick: ((e: MouseEvent) => void) | null;\n}\n\nexport class PlayingCard extends Component<Props> {\n\tstatic defaultProps = {\n\t\tstack: false,\n\t\ttype: CardType.Default,\n\t\tback: null,\n\t\tfooterText: '',\n\t\tfooterContent: [],\n\t\tfooterType: null,\n\t\tflipped: false,\n\t\tdisabled: false,\n\t\tonClick: null\n\t};\n\n\tonClick = (e: MouseEvent) => {\n\t\te.stopPropagation();\n\n\t\tif (this.props.onClick) {\n\t\t\tthis.props.onClick(e);\n\t\t}\n\t};\n\n\trender = () => {\n\t\ttry {\n\t\t\tlet className = 'playing-card';\n\t\t\tif ((this.props.onClick !== null) && !this.props.disabled) {\n\t\t\t\tclassName += ' clickable';\n\t\t\t}\n\t\t\tif (this.props.flipped) {\n\t\t\t\tclassName += ' flipped';\n\t\t\t}\n\t\t\tif (this.props.disabled) {\n\t\t\t\tclassName += ' disabled';\n\t\t\t}\n\n\t\t\tconst stack = [];\n\t\t\tif (this.props.stack) {\n\t\t\t\tfor (let n = 0; n !== 10; ++n) {\n\t\t\t\t\tconst degrees = (Random.randomDecimal() * 10) - 5;\n\t\t\t\t\tconst offsetX = (Random.randomDecimal() * 10) - 5;\n\t\t\t\t\tconst offsetY = (Random.randomDecimal() * 10) - 5;\n\t\t\t\t\tstack.push(\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tkey={n}\n\t\t\t\t\t\t\tclassName={`stack-card ${this.props.type.toLowerCase()}`}\n\t\t\t\t\t\t\tstyle={\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttransform: `rotate(${degrees}deg)`,\n\t\t\t\t\t\t\t\t\tleft: `${offsetX}px`,\n\t\t\t\t\t\t\t\t\ttop: `${offsetY}px`\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t/>\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst hasFooter = (this.props.footerText !== '') || (this.props.footerContent.length !== 0);\n\t\t\tconst footerType = (this.props.footerType || this.props.type).toLowerCase();\n\n\t\t\treturn (\n\t\t\t\t<div className={className} onClick={this.onClick}>\n\t\t\t\t\t{stack}\n\t\t\t\t\t<div className='playing-card-inner'>\n\t\t\t\t\t\t<div className={`playing-card-front ${this.props.type.toLowerCase()}`}>\n\t\t\t\t\t\t\t<div className='card-content'>{this.props.front}</div>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\thasFooter ?\n\t\t\t\t\t\t\t\t\t<div className={`card-footer ${footerType}`}>\n\t\t\t\t\t\t\t\t\t\t<div className={this.props.footerContent.length === 0 ? 'card-footer-text card-footer-text-full' : 'card-footer-text card-footer-text-left'}>\n\t\t\t\t\t\t\t\t\t\t\t{this.props.footerText}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div className='card-footer-content'>\n\t\t\t\t\t\t\t\t\t\t\t{this.props.disabled ? null : this.props.footerContent}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t: null\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className={`playing-card-back ${this.props.type.toLowerCase()}`}>\n\t\t\t\t\t\t\t<div className='card-content'>{this.props.back}</div>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\thasFooter ?\n\t\t\t\t\t\t\t\t\t<div className={`card-footer ${footerType}`}>\n\t\t\t\t\t\t\t\t\t\t<div className={this.props.footerContent.length === 0 ? 'card-footer-text card-footer-text-full' : 'card-footer-text card-footer-text-left'}>\n\t\t\t\t\t\t\t\t\t\t\t{this.props.footerText}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div className='card-footer-content'>\n\t\t\t\t\t\t\t\t\t\t\t{this.props.disabled ? null : this.props.footerContent}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t: null\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t);\n\t\t} catch {\n\t\t\treturn <div className='playing-card render-error' />;\n\t\t}\n\t};\n}\n","import { Component } from 'react';\n\nimport './selector.scss';\n\ninterface Props {\n\toptions: { id: string; display?: JSX.Element | string }[];\n\tcolumnCount: number;\n\tselectedID: string;\n\tonSelect: (id: string) => void;\n}\n\nexport class Selector extends Component<Props> {\n\tstatic defaultProps = {\n\t\tcolumnCount: 0,\n\t\tselectedID: ''\n\t};\n\n\trender = () => {\n\t\ttry {\n\t\t\tconst columns = `repeat(${this.props.columnCount > 0 ? this.props.columnCount : this.props.options.length}, 1fr)`;\n\n\t\t\tconst options = this.props.options.map(option => {\n\t\t\t\tconst className = option.id === this.props.selectedID ? 'option selected' : 'option';\n\t\t\t\treturn (\n\t\t\t\t\t<div key={option.id} className={className} onClick={() => this.props.onSelect(option.id)}>\n\t\t\t\t\t\t{ option.display ?? option.id }\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t});\n\n\t\t\treturn (\n\t\t\t\t<div className='selector' style={{ gridTemplateColumns: columns }}>\n\t\t\t\t\t{ options }\n\t\t\t\t</div>\n\t\t\t);\n\t\t} catch {\n\t\t\treturn <div className='selector render-error' />;\n\t\t}\n\t};\n}\n","import { Component } from 'react';\n\nimport './stat-value.scss';\n\ninterface Props {\n\torientation: 'horizontal' | 'vertical' | 'compact';\n\tlabel: JSX.Element | number | string;\n\tvalue: (JSX.Element | number | string)[] | JSX.Element | number | string;\n}\n\nexport class StatValue extends Component<Props> {\n\tstatic defaultProps = {\n\t\torientation: 'horizontal'\n\t};\n\n\trender = () => {\n\t\ttry {\n\t\t\tconst label = (\n\t\t\t\t<div className='stat-value-label'>\n\t\t\t\t\t{this.props.label}\n\t\t\t\t</div>\n\t\t\t);\n\n\t\t\tlet value = null;\n\t\t\tif (Array.isArray(this.props.value)) {\n\t\t\t\tvalue = (\n\t\t\t\t\t<div className='stat-value-list'>\n\t\t\t\t\t\t{this.props.value.map((v, n) => (<div key={n} className='stat-value-value'>{v}</div>))}\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tvalue = (\n\t\t\t\t\t<div className='stat-value-value'>\n\t\t\t\t\t\t{this.props.value}\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif (this.props.orientation === 'vertical') {\n\t\t\t\treturn (\n\t\t\t\t\t<div className='stat-value vertical'>\n\t\t\t\t\t\t{value}\n\t\t\t\t\t\t{label}\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tlet className = `stat-value ${this.props.orientation}`;\n\t\t\tif (!this.props.value) {\n\t\t\t\tclassName += ' zero';\n\t\t\t}\n\n\t\t\treturn (\n\t\t\t\t<div className={className}>\n\t\t\t\t\t{label}\n\t\t\t\t\t{value}\n\t\t\t\t</div>\n\t\t\t);\n\t\t} catch {\n\t\t\treturn <div className='stat-value render-error' />;\n\t\t}\n\t};\n}\n","import createReactComponent from '../createReactComponent';\nexport default createReactComponent(\n  'circle-check-filled',\n  'IconCircleCheckFilled',\n  [\n    [\n      'path',\n      {\n        d: 'M17 3.34a10 10 0 1 1 -14.995 8.984l-.005 -.324l.005 -.324a10 10 0 0 1 14.995 -8.336zm-1.293 5.953a1 1 0 0 0 -1.32 -.083l-.094 .083l-3.293 3.292l-1.293 -1.292l-.094 -.083a1 1 0 0 0 -1.403 1.403l.083 .094l2 2l.094 .083a1 1 0 0 0 1.226 0l.094 -.083l4 -4l.083 -.094a1 1 0 0 0 -.083 -1.32z',\n        fill: 'currentColor',\n        key: 'svg-0',\n        strokeWidth: '0',\n      },\n    ],\n  ],\n);\n","import createReactComponent from '../createReactComponent';\nexport default createReactComponent('circle', 'IconCircle', [\n  ['path', { d: 'M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0', key: 'svg-0' }],\n]);\n","import { IconCircle, IconCircleCheckFilled } from '@tabler/icons-react';\nimport { MouseEvent } from 'react';\n\nimport './switch.scss';\n\ninterface Props {\n\tlabel: string;\n\tchecked: boolean;\n\tonChange: (value: boolean) => void;\n}\n\nexport const Switch = (props: Props) => {\n\tconst onClick = (e: MouseEvent) => {\n\t\te.stopPropagation();\n\t\tprops.onChange(!props.checked);\n\t};\n\n\ttry {\n\t\treturn (\n\t\t\t<div className='switch' onClick={onClick}>\n\t\t\t\t<div className='switch-label'>{props.label}</div>\n\t\t\t\t{props.checked ? <IconCircleCheckFilled className='switch-icon checked' /> : <IconCircle className='switch-icon' />}\n\t\t\t</div>\n\t\t);\n\t} catch {\n\t\treturn <div className='switch render-error' />;\n\t}\n};\n","import { Component } from 'react';\n\nimport './tabs.scss';\n\ninterface Props {\n\toptions: { id: string; display?: JSX.Element | string }[];\n\tselectedID: string;\n\tonSelect: (id: string) => void;\n}\n\nexport class Tabs extends Component<Props> {\n\tstatic defaultProps = {\n\t\tselectedID: ''\n\t};\n\n\trender = () => {\n\t\ttry {\n\t\t\tconst options = this.props.options.map(option => {\n\t\t\t\tconst className = option.id === this.props.selectedID ? 'option selected' : 'option';\n\t\t\t\treturn (\n\t\t\t\t\t<div key={option.id} className={className} onClick={() => this.props.onSelect(option.id)}>\n\t\t\t\t\t\t{ option.display ?? option.id }\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t});\n\n\t\t\treturn (\n\t\t\t\t<div className='tabs'>\n\t\t\t\t\t<div className='spacer' />\n\t\t\t\t\t{ options }\n\t\t\t\t\t<div className='spacer' />\n\t\t\t\t</div>\n\t\t\t);\n\t\t} catch {\n\t\t\treturn <div className='tabs render-error' />;\n\t\t}\n\t};\n}\n","import './tag.scss';\n\ninterface Props {\n\tchildren: (JSX.Element | number | string | null)[] | JSX.Element | number | string | null;\n}\n\nexport const Tag = (props: Props) => {\n\ttry {\n\t\treturn (\n\t\t\t<div className='tag'>\n\t\t\t\t{props.children}\n\t\t\t</div>\n\t\t);\n\t} catch {\n\t\treturn <div className='tag render-error' />;\n\t}\n};\n","import { Component, MouseEvent } from 'react';\n\nimport { CardType } from '../../../enums/card-type';\n\nimport { ActionEffects, ActionLogic, ActionPrerequisites } from '../../../logic/action-logic';\nimport { GameLogic } from '../../../logic/game-logic';\n\nimport type { ActionEffectModel, ActionModel, ActionTargetParameterModel } from '../../../models/action';\nimport type { CombatantModel } from '../../../models/combatant';\nimport type { EncounterModel } from '../../../models/encounter';\n\nimport { Badge, PlayingCard, Tag, Text, TextType } from '../../controls';\n\nimport './action-card.scss';\n\ninterface Props {\n\taction: ActionModel;\n\tdeveloper: boolean;\n\tfooter: string;\n\tfooterType: CardType;\n\tcombatant: CombatantModel | null;\n\tencounter: EncounterModel | null;\n\tdisabled: boolean;\n\tonClick: ((action: ActionModel) => void) | null;\n}\n\nexport class ActionCard extends Component<Props> {\n\tstatic defaultProps = {\n\t\tdeveloper: false,\n\t\tcombatant: null,\n\t\tencounter: null,\n\t\tdisabled: false,\n\t\tonClick: null\n\t};\n\n\tonClick = (e: MouseEvent) => {\n\t\te.stopPropagation();\n\n\t\tif (this.props.onClick) {\n\t\t\tthis.props.onClick(this.props.action);\n\t\t}\n\t};\n\n\tgetPrerequisites = () => {\n\t\tif (this.props.combatant === null) {\n\t\t\treturn [];\n\t\t}\n\n\t\treturn this.props.action.prerequisites\n\t\t\t.filter(p => !ActionPrerequisites.isSatisfied(p, this.props.combatant as CombatantModel))\n\t\t\t.map((p, n) => <div key={n} className='prerequisite highlighted'>{p.description}</div>);\n\t};\n\n\tgetParameters = () => {\n\t\treturn this.props.action.parameters.map((p, n) => {\n\t\t\tif (p.id === 'targets') {\n\t\t\t\treturn (\n\t\t\t\t\t<Badge key={n} value={this.props.developer ? GameLogic.getActionTargetStrength(p as ActionTargetParameterModel, this.props.action) : 0}>\n\t\t\t\t\t\t<div className='parameter'>{ActionLogic.getParameterDescription(p)}</div>\n\t\t\t\t\t</Badge>\n\t\t\t\t);\n\t\t\t}\n\n\t\t\treturn (\n\t\t\t\t<div key={n} className='parameter'>{ActionLogic.getParameterDescription(p)}</div>\n\t\t\t);\n\t\t});\n\t};\n\n\tgetEffects = () => {\n\t\tconst getEffectDescription = (effect: ActionEffectModel) => {\n\t\t\tlet children = null;\n\t\t\tif (effect.children.length > 0) {\n\t\t\t\tchildren = effect.children.map((child, n) => <div key={n}>{getEffectDescription(child)}</div>);\n\t\t\t}\n\n\t\t\treturn (\n\t\t\t\t<div>\n\t\t\t\t\t<Badge value={this.props.developer ? GameLogic.getActionEffectStrength(effect) : 0}>\n\t\t\t\t\t\t<div className='effect'>{ActionEffects.getDescription(effect, this.props.combatant, this.props.encounter)}</div>\n\t\t\t\t\t</Badge>\n\t\t\t\t\t{children ? <div className='indent'>{children}</div> : null}\n\t\t\t\t</div>\n\t\t\t);\n\t\t};\n\n\t\treturn this.props.action.effects.map((e, n) => <div key={n}>{getEffectDescription(e)}</div>);\n\t};\n\n\trender = () => {\n\t\treturn (\n\t\t\t<PlayingCard\n\t\t\t\ttype={CardType.Action}\n\t\t\t\tfront={(\n\t\t\t\t\t<div className='action-card-front'>\n\t\t\t\t\t\t<div className='action-title'>\n\t\t\t\t\t\t\t<Text type={TextType.SubHeading}>{this.props.action.name}</Text>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className='tags'>\n\t\t\t\t\t\t\t<Tag>{ActionLogic.getActionType(this.props.action)}</Tag>\n\t\t\t\t\t\t\t{ActionLogic.getActionSpeed(this.props.action) === 'Quick' ? <Tag>Quick</Tag> : null}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{this.getPrerequisites()}\n\t\t\t\t\t\t{this.getParameters()}\n\t\t\t\t\t\t{this.getEffects()}\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t\tfooterText={this.props.footer || 'Action'}\n\t\t\t\tfooterType={this.props.footerType}\n\t\t\t\tdisabled={this.props.disabled}\n\t\t\t\tonClick={this.props.onClick ? this.onClick : null}\n\t\t\t/>\n\t\t);\n\t};\n}\n","import _typeof from \"./typeof.js\";\nimport setPrototypeOf from \"./setPrototypeOf.js\";\nimport inherits from \"./inherits.js\";\nexport default function _wrapRegExp() {\n  _wrapRegExp = function _wrapRegExp(e, r) {\n    return new BabelRegExp(e, void 0, r);\n  };\n  var e = RegExp.prototype,\n    r = new WeakMap();\n  function BabelRegExp(e, t, p) {\n    var o = new RegExp(e, t);\n    return r.set(o, p || r.get(e)), setPrototypeOf(o, BabelRegExp.prototype);\n  }\n  function buildGroups(e, t) {\n    var p = r.get(t);\n    return Object.keys(p).reduce(function (r, t) {\n      var o = p[t];\n      if (\"number\" == typeof o) r[t] = e[o];else {\n        for (var i = 0; void 0 === e[o[i]] && i + 1 < o.length;) i++;\n        r[t] = e[o[i]];\n      }\n      return r;\n    }, Object.create(null));\n  }\n  return inherits(BabelRegExp, RegExp), BabelRegExp.prototype.exec = function (r) {\n    var t = e.exec.call(this, r);\n    if (t) {\n      t.groups = buildGroups(t, this);\n      var p = t.indices;\n      p && (p.groups = buildGroups(p, this));\n    }\n    return t;\n  }, BabelRegExp.prototype[Symbol.replace] = function (t, p) {\n    if (\"string\" == typeof p) {\n      var o = r.get(this);\n      return e[Symbol.replace].call(this, t, p.replace(/\\$<([^>]+)>/g, function (e, r) {\n        var t = o[r];\n        return \"$\" + (Array.isArray(t) ? t.join(\"$\") : t);\n      }));\n    }\n    if (\"function\" == typeof p) {\n      var i = this;\n      return e[Symbol.replace].call(this, t, function () {\n        var e = arguments;\n        return \"object\" != _typeof(e[e.length - 1]) && (e = [].slice.call(e)).push(buildGroups(e, i)), p.apply(this, e);\n      });\n    }\n    return e[Symbol.replace].call(this, t, p);\n  }, _wrapRegExp.apply(this, arguments);\n}","interface RGB {\n\tr: number;\n\tg: number;\n\tb: number;\n}\n\nexport class Color {\n\tstatic toString = (color: RGB): string => {\n\t\treturn `rgb(${color.r}, ${color.g}, ${color.b})`;\n\t};\n\n\tstatic parse = (str: string): RGB | null => {\n\t\tconst regex = /rgb\\((?<r>\\d{1,3}), (?<g>\\d{1,3}), (?<b>\\d{1,3})\\)/;\n\n\t\tconst x = regex.exec(str);\n\t\tif (x && x.groups) {\n\t\t\tconst r = parseInt(x.groups['r']);\n\t\t\tconst g = parseInt(x.groups['g']);\n\t\t\tconst b = parseInt(x.groups['b']);\n\n\t\t\treturn {\n\t\t\t\tr: r,\n\t\t\t\tg: g,\n\t\t\t\tb: b\n\t\t\t};\n\t\t}\n\n\t\treturn null;\n\t};\n\n\tstatic lighten = (color: RGB, factor = 0.3): RGB => {\n\t\treturn {\n\t\t\tr: color.r + ((255 - color.r) * factor),\n\t\t\tg: color.g + ((255 - color.g) * factor),\n\t\t\tb: color.b + ((255 - color.b) * factor)\n\t\t};\n\t};\n\n\tstatic darken = (color: RGB, factor = 0.7): RGB => {\n\t\treturn {\n\t\t\tr: color.r * factor,\n\t\t\tg: color.g * factor,\n\t\t\tb: color.b * factor\n\t\t};\n\t};\n}\n","import { Component } from 'react';\n\nimport { CampaignMapLogic } from '../../../logic/campaign-map-logic';\n\nimport type { CampaignMapModel, CampaignMapSquareModel } from '../../../models/campaign-map';\nimport type { RegionModel } from '../../../models/region';\n\nimport { Color } from '../../../utils/color';\n\nimport './campaign-map-panel.scss';\n\ninterface Props {\n\tmap: CampaignMapModel;\n\tmode: 'map' | 'region';\n\tselectedRegion: RegionModel | null;\n\tonSelectRegion: (region: RegionModel | null) => void;\n}\n\nexport class CampaignMapPanel extends Component<Props> {\n\tpublic static defaultProps = {\n\t\tmode: 'map',\n\t\tonSelectRegion: () => null\n\t};\n\n\tonClick = (e: React.MouseEvent, region: RegionModel | null) => {\n\t\te.stopPropagation();\n\t\tthis.props.onSelectRegion(region);\n\t};\n\n\tgetHex = (square: CampaignMapSquareModel) => {\n\t\tlet backgroundColor = 'rgb(255, 255, 255)';\n\t\tlet borderColor = 'rgb(240, 240, 240)';\n\n\t\tconst region = this.props.map.regions.find(r => r.id === square.regionID) || null;\n\t\tif (region) {\n\t\t\tconst color = Color.parse(region.color);\n\t\t\tif (color) {\n\t\t\t\tbackgroundColor = region.color;\n\t\t\t\tborderColor = Color.toString(Color.darken(color, 0.95));\n\n\t\t\t\tif (this.props.selectedRegion && (this.props.selectedRegion.id === region.id)) {\n\t\t\t\t\tbackgroundColor = Color.toString(Color.lighten(color, 0.7));\n\t\t\t\t\tborderColor = region.color;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tconst padding = 0.024;\n\t\tconst dx = 0.1;\n\t\tconst points = [\n\t\t\t{ x: square.x + padding + dx, y: square.y + padding },\n\t\t\t{ x: square.x + 1 - padding - dx, y: square.y + padding },\n\t\t\t{ x: square.x + 1 + dx - padding, y: square.y + 0.5 },\n\t\t\t{ x: square.x + 1 - padding - dx, y: square.y + 1 - padding },\n\t\t\t{ x: square.x + padding + dx, y: square.y + 1 - padding },\n\t\t\t{ x: square.x + padding - dx, y: square.y + 0.5 }\n\t\t];\n\n\t\tif (square.x % 2 === 0) {\n\t\t\tpoints.forEach(pt => pt.y += 0.25);\n\t\t} else {\n\t\t\tpoints.forEach(pt => pt.y -= 0.25);\n\t\t}\n\n\t\treturn (\n\t\t\t<polygon\n\t\t\t\tkey={`${square.x} ${square.y}`}\n\t\t\t\tclassName='campaign-map-hex'\n\t\t\t\tpoints={\n\t\t\t\t\tpoints\n\t\t\t\t\t\t.map(pt => `${pt.x},${pt.y}`)\n\t\t\t\t\t\t.join(' ')\n\t\t\t\t}\n\t\t\t\tstyle={{\n\t\t\t\t\tfill: backgroundColor,\n\t\t\t\t\tstroke: borderColor\n\t\t\t\t}}\n\t\t\t\tonClick={e => this.onClick(e, region)}\n\t\t\t/>\n\t\t);\n\t};\n\n\tgetLabel = (region: RegionModel) => {\n\t\tconst square = CampaignMapLogic.getCentralSquare(this.props.map, region);\n\t\tif (square) {\n\n\t\t\tlet y = square.y;\n\t\t\tif (square.x % 2 === 0) {\n\t\t\t\ty += 0.25;\n\t\t\t} else {\n\t\t\t\ty -= 0.25;\n\t\t\t}\n\n\t\t\treturn (\n\t\t\t\t<g key={region.id} onClick={e => this.onClick(e, region)}>\n\t\t\t\t\t<circle\n\t\t\t\t\t\tclassName='campaign-map-label-container'\n\t\t\t\t\t\tcx={square.x + 0.5}\n\t\t\t\t\t\tcy={y + 0.5}\n\t\t\t\t\t\tr={0.4}\n\t\t\t\t\t/>\n\t\t\t\t\t<text\n\t\t\t\t\t\tclassName='campaign-map-label-text'\n\t\t\t\t\t\tx={square.x + 0.51}\n\t\t\t\t\t\ty={y + 0.55}\n\t\t\t\t\t\ttextLength={0.5}\n\t\t\t\t\t\tdominantBaseline='middle'\n\t\t\t\t\t\ttextAnchor='middle'\n\t\t\t\t\t>\n\t\t\t\t\t\t{region.encounters.length}\n\t\t\t\t\t</text>\n\t\t\t\t</g>\n\t\t\t);\n\t\t}\n\n\t\treturn null;\n\t};\n\n\trender = () => {\n\t\ttry {\n\t\t\tlet mapSquares = this.props.map.squares;\n\t\t\tif ((this.props.mode === 'region') && (this.props.selectedRegion !== null)) {\n\t\t\t\tconst regionID = this.props.selectedRegion.id;\n\t\t\t\tmapSquares = mapSquares.filter(square => square.regionID === regionID);\n\t\t\t}\n\n\t\t\t// Get dimensions, adding a 1-square border\n\t\t\tconst dims = CampaignMapLogic.getDimensions(mapSquares);\n\t\t\tdims.left -= 1;\n\t\t\tdims.top -= 1;\n\t\t\tdims.right += 1;\n\t\t\tdims.bottom += 1;\n\n\t\t\tconst width = 1 + (dims.right - dims.left);\n\t\t\tconst height = 1 + (dims.bottom - dims.top);\n\n\t\t\treturn (\n\t\t\t\t<svg className='campaign-map' viewBox={`${dims.left} ${dims.top} ${width} ${height}`} onClick={e => this.onClick(e, null)}>\n\t\t\t\t\t{mapSquares.map(this.getHex)}\n\t\t\t\t\t{this.props.mode === 'map' ? this.props.map.regions.map(this.getLabel) : null}\n\t\t\t\t</svg>\n\t\t\t);\n\t\t} catch {\n\t\t\treturn <div className='campaign-map render-error' />;\n\t\t}\n\t};\n}\n","import { Component } from 'react';\n\nimport { BackgroundData } from '../../../data/background-data';\nimport { HeroSpeciesData } from '../../../data/hero-species-data';\nimport { ItemData } from '../../../data/item-data';\nimport { MonsterSpeciesData } from '../../../data/monster-species-data';\nimport { PackData } from '../../../data/pack-data';\nimport { PotionData } from '../../../data/potion-data';\nimport { RoleData } from '../../../data/role-data';\nimport { StructureData } from '../../../data/structure-data';\n\nimport { CardType } from '../../../enums/card-type';\n\nimport { GameLogic } from '../../../logic/game-logic';\n\nimport type { ActionModel } from '../../../models/action';\nimport type { FeatureModel } from '../../../models/feature';\nimport type { OptionsModel } from '../../../models/options';\n\nimport type { Platform } from '../../../platform/platform';\n\nimport { ActionCard, FeatureCard } from '../../cards';\nimport { Badge, CardList, Dialog, StatValue, Text, TextType } from '../../controls';\n\nimport './card-grid-panel.scss';\n\ninterface Props {\n\toptions: OptionsModel\n\tplatform: Platform;\n}\n\ninterface State {\n\tselected: { name: string, description: string, type: CardType, starting: FeatureModel[], features: FeatureModel[], actions: ActionModel[] } | null;\n}\n\nexport class CardGridPanel extends Component<Props, State> {\n\tconstructor(props: Props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tselected: null\n\t\t};\n\t}\n\n\tsetActions = (name: string, description: string, type: CardType, starting: FeatureModel[], features: FeatureModel[], actions: ActionModel[]) => {\n\t\tthis.setState({\n\t\t\tselected: {\n\t\t\t\tname: name,\n\t\t\t\tdescription: description,\n\t\t\t\ttype: type,\n\t\t\t\tstarting: starting,\n\t\t\t\tfeatures: features,\n\t\t\t\tactions: actions\n\t\t\t}\n\t\t});\n\t};\n\n\tclearActions = () => {\n\t\tthis.setState({\n\t\t\tselected: null\n\t\t});\n\t};\n\n\tgetMarked = (card: { name: string, features: FeatureModel[], actions: ActionModel[] }, strength: number,  min: number, max: number) => {\n\t\tif ((strength < min) || (strength > max)) {\n\t\t\treturn true;\n\t\t}\n\n\t\tif (card.actions.some(a => (GameLogic.getActionStrength(a) < 1) || (GameLogic.getActionStrength(a) > 12))) {\n\t\t\treturn true;\n\t\t}\n\n\t\t/*\n\t\t// Check if any attack action uses a skill we don't have a feature bonus for\n\t\tconst usedSkills: SkillType[] = [];\n\t\tcard.actions.forEach(a => {\n\t\t\ta.effects\n\t\t\t\t.filter(e => e.id === 'attack')\n\t\t\t\t.forEach(e => {\n\t\t\t\t\tconst attack = e.data as { skill: SkillType };\n\t\t\t\t\tif (!usedSkills.includes(attack.skill)) {\n\t\t\t\t\t\tusedSkills.push(attack.skill);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t});\n\t\tconst bonusSkills: SkillType[] = [];\n\t\tcard.features.filter(f => f.type === FeatureType.Skill).forEach(f => {\n\t\t\tif (!bonusSkills.includes(f.skill)) {\n\t\t\t\tbonusSkills.push(f.skill);\n\t\t\t}\n\t\t});\n\t\tconst missingSkills: SkillType[] = usedSkills.filter(skill => !bonusSkills.includes(skill));\n\t\tif (missingSkills.length > 0) {\n\t\t\tconsole.log(card.name, missingSkills.join(', '));\n\t\t\treturn true;\n\t\t}\n\t\t*/\n\n\t\treturn false;\n\t};\n\n\tgetCards = (type: string, packID: string) => {\n\t\tswitch (type) {\n\t\t\tcase 'hero species':\n\t\t\t\treturn HeroSpeciesData.getList()\n\t\t\t\t\t.filter(s => s.packID === packID)\n\t\t\t\t\t.map(s => {\n\t\t\t\t\t\tconst strength = GameLogic.getSpeciesStrength(s);\n\t\t\t\t\t\tconst className = this.getMarked(s, strength, 4, 6) ? 'danger' : '';\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<button key={s.id} className={className} onClick={() => this.setActions(s.name, s.description, CardType.Species, s.startingFeatures, s.features, s.actions)}>\n\t\t\t\t\t\t\t\t<StatValue label={s.name} value={strength} />\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t);\n\t\t\t\t\t});\n\t\t\tcase 'monster species':\n\t\t\t\treturn MonsterSpeciesData.getList()\n\t\t\t\t\t.filter(s => s.packID === packID)\n\t\t\t\t\t.map(s => {\n\t\t\t\t\t\tconst strength = GameLogic.getSpeciesStrength(s);\n\t\t\t\t\t\tconst className = this.getMarked(s, strength, 4, 6) ? 'danger' : '';\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<button key={s.id} className={className} onClick={() => this.setActions(s.name, s.description, CardType.Species, s.startingFeatures, s.features, s.actions)}>\n\t\t\t\t\t\t\t\t<StatValue label={s.name} value={strength} />\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t);\n\t\t\t\t\t});\n\t\t\tcase 'roles':\n\t\t\t\treturn RoleData.getList()\n\t\t\t\t\t.filter(r => r.packID === packID)\n\t\t\t\t\t.map(r => {\n\t\t\t\t\t\tconst strength = GameLogic.getRoleStrength(r);\n\t\t\t\t\t\tconst className = this.getMarked(r, strength, 4, 6) ? 'danger' : '';\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<button key={r.id} className={className} onClick={() => this.setActions(r.name, r.description, CardType.Species, r.startingFeatures, r.features, r.actions)}>\n\t\t\t\t\t\t\t\t<StatValue label={r.name} value={strength} />\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t);\n\t\t\t\t\t});\n\t\t\tcase 'backgrounds':\n\t\t\t\treturn BackgroundData.getList()\n\t\t\t\t\t.filter(b => b.packID === packID)\n\t\t\t\t\t.map(b => {\n\t\t\t\t\t\tconst strength = GameLogic.getBackgroundStrength(b);\n\t\t\t\t\t\tconst className = this.getMarked(b, strength, 3, 4) ? 'danger' : '';\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<button key={b.id} className={className} onClick={() => this.setActions(b.name, b.description, CardType.Species, b.startingFeatures, b.features, b.actions)}>\n\t\t\t\t\t\t\t\t<StatValue label={b.name} value={strength} />\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t);\n\t\t\t\t\t});\n\t\t\tcase 'structures':\n\t\t\t\treturn StructureData.getList()\n\t\t\t\t\t.filter(s => s.packID === packID)\n\t\t\t\t\t.map(s => <Text key={s.id} type={TextType.Small}>{s.name}</Text>);\n\t\t\tcase 'potions':\n\t\t\t\treturn PotionData.getList()\n\t\t\t\t\t.filter(p => p.packID === packID)\n\t\t\t\t\t.map(p => <Text key={p.id} type={TextType.Small}>{p.name}</Text>);\n\t\t\tcase 'items':\n\t\t\t\treturn ItemData.getList()\n\t\t\t\t\t.filter(i => i.packID === packID)\n\t\t\t\t\t.map(i => <Text key={i.id} type={TextType.Small}>{i.name}</Text>);\n\t\t}\n\n\t\treturn null;\n\t};\n\n\tgetCardCount = (type: string) => {\n\t\tswitch (type) {\n\t\t\tcase 'hero species':\n\t\t\t\treturn HeroSpeciesData.getList().length;\n\t\t\tcase 'monster species':\n\t\t\t\treturn MonsterSpeciesData.getList().length;\n\t\t\tcase 'roles':\n\t\t\t\treturn RoleData.getList().length;\n\t\t\tcase 'backgrounds':\n\t\t\t\treturn BackgroundData.getList().length;\n\t\t\tcase 'structures':\n\t\t\t\treturn StructureData.getList().length;\n\t\t\tcase 'potions':\n\t\t\t\treturn PotionData.getList().length;\n\t\t\tcase 'items':\n\t\t\t\treturn ItemData.getList().length;\n\t\t}\n\n\t\treturn 0;\n\t};\n\n\trender = () => {\n\t\ttry {\n\t\t\tconst types = [\n\t\t\t\t'hero species',\n\t\t\t\t'monster species',\n\t\t\t\t'roles',\n\t\t\t\t'backgrounds',\n\t\t\t\t'structures',\n\t\t\t\t'potions',\n\t\t\t\t'items'\n\t\t\t];\n\n\t\t\tconst packIDs = [ '' ].concat(PackData.getList().map(p => p.id));\n\n\t\t\tconst rows = types.map(type => {\n\t\t\t\treturn (\n\t\t\t\t\t<div key={type}>\n\t\t\t\t\t\t<Text type={TextType.SubHeading}>{type} ({this.getCardCount(type)})</Text>\n\t\t\t\t\t\t<div className='row'>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tpackIDs.map(id => {\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<div key={id} className='cell'>\n\t\t\t\t\t\t\t\t\t\t\t{this.getCards(type, id)}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t});\n\n\t\t\tlet dialog = null;\n\t\t\tif (this.state.selected) {\n\t\t\t\tconst source = this.state.selected.name;\n\t\t\t\tconst type = this.state.selected.type;\n\n\t\t\t\tconst startingCards = this.state.selected.starting.map(f => {\n\t\t\t\t\tconst strength = GameLogic.getFeatureStrength(f);\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<Badge key={f.id} value={strength}>\n\t\t\t\t\t\t\t<FeatureCard\n\t\t\t\t\t\t\t\tfeature={f}\n\t\t\t\t\t\t\t\tfooter={source}\n\t\t\t\t\t\t\t\tfooterType={type}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Badge>\n\t\t\t\t\t);\n\t\t\t\t});\n\t\t\t\tconst featureCards = this.state.selected.features.map(f => {\n\t\t\t\t\tconst strength = GameLogic.getFeatureStrength(f);\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<Badge key={f.id} value={strength}>\n\t\t\t\t\t\t\t<FeatureCard\n\t\t\t\t\t\t\t\tfeature={f}\n\t\t\t\t\t\t\t\tfooter={source}\n\t\t\t\t\t\t\t\tfooterType={type}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Badge>\n\t\t\t\t\t);\n\t\t\t\t});\n\t\t\t\tconst actionCards = this.state.selected.actions.map(a => {\n\t\t\t\t\tconst strength = GameLogic.getActionStrength(a);\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<Badge key={a.id} value={strength}>\n\t\t\t\t\t\t\t<ActionCard\n\t\t\t\t\t\t\t\taction={a}\n\t\t\t\t\t\t\t\tdeveloper={true}\n\t\t\t\t\t\t\t\tfooter={source}\n\t\t\t\t\t\t\t\tfooterType={type}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Badge>\n\t\t\t\t\t);\n\t\t\t\t});\n\t\t\t\tconst content = (\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<Text type={TextType.Heading}>{this.state.selected.name}</Text>\n\t\t\t\t\t\t<hr />\n\t\t\t\t\t\t<Text>\n\t\t\t\t\t\t\t<p style={{ textAlign: 'center' }}>{this.state.selected.description}</p>\n\t\t\t\t\t\t</Text>\n\t\t\t\t\t\t{startingCards.length > 0 ? <hr /> : null}\n\t\t\t\t\t\t{startingCards.length > 0 ? <Text type={TextType.SubHeading}>Starting Cards</Text> : null}\n\t\t\t\t\t\t{startingCards.length > 0 ? <CardList cards={startingCards} /> : null}\n\t\t\t\t\t\t{featureCards.length > 0 ? <hr /> : null}\n\t\t\t\t\t\t{featureCards.length > 0 ? <Text type={TextType.SubHeading}>Feature Cards</Text> : null}\n\t\t\t\t\t\t{featureCards.length > 0 ? <CardList cards={featureCards} /> : null}\n\t\t\t\t\t\t{actionCards.length > 0 ? <hr /> : null}\n\t\t\t\t\t\t{actionCards.length > 0 ? <Text type={TextType.SubHeading}>Action Cards</Text> : null}\n\t\t\t\t\t\t{actionCards.length > 0 ? <CardList cards={actionCards} /> : null}\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t\tdialog = (\n\t\t\t\t\t<Dialog\n\t\t\t\t\t\tcontent={content}\n\t\t\t\t\t\tonClose={this.clearActions}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t}\n\n\t\t\treturn (\n\t\t\t\t<div className='card-grid-panel'>\n\t\t\t\t\t<div className='row'>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tpackIDs.map(id => {\n\t\t\t\t\t\t\t\tconst pack = GameLogic.getPack(id);\n\t\t\t\t\t\t\t\tconst name = pack ? pack.name : 'Skirmish';\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<div key={id} className='cell column-heading'>\n\t\t\t\t\t\t\t\t\t\t{name}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t</div>\n\t\t\t\t\t{rows}\n\t\t\t\t\t{dialog}\n\t\t\t\t</div>\n\t\t\t);\n\t\t} catch {\n\t\t\treturn <div className='card-grid-panel render-error' />;\n\t\t}\n\t};\n}\n","import createReactComponent from '../createReactComponent';\nexport default createReactComponent('heart-off', 'IconHeartOff', [\n  ['path', { d: 'M3 3l18 18', key: 'svg-0' }],\n  [\n    'path',\n    {\n      d: 'M19.5 12.572l-1.5 1.428m-2 2l-4 4l-7.5 -7.428a5 5 0 0 1 -1.288 -5.068a4.976 4.976 0 0 1 1.788 -2.504m3 -1c1.56 0 3.05 .727 4 2a5 5 0 1 1 7.5 6.572',\n      key: 'svg-1',\n    },\n  ],\n]);\n","import createReactComponent from '../createReactComponent';\nexport default createReactComponent('heart-filled', 'IconHeartFilled', [\n  [\n    'path',\n    {\n      d: 'M6.979 3.074a6 6 0 0 1 4.988 1.425l.037 .033l.034 -.03a6 6 0 0 1 4.733 -1.44l.246 .036a6 6 0 0 1 3.364 10.008l-.18 .185l-.048 .041l-7.45 7.379a1 1 0 0 1 -1.313 .082l-.094 -.082l-7.493 -7.422a6 6 0 0 1 3.176 -10.215z',\n      fill: 'currentColor',\n      key: 'svg-0',\n      strokeWidth: '0',\n    },\n  ],\n]);\n","import createReactComponent from '../createReactComponent';\nexport default createReactComponent(\n  'navigation-filled',\n  'IconNavigationFilled',\n  [\n    [\n      'path',\n      {\n        d: 'M11.092 2.581a1 1 0 0 1 1.754 -.116l.062 .116l8.005 17.365c.198 .566 .05 1.196 -.378 1.615a1.53 1.53 0 0 1 -1.459 .393l-7.077 -2.398l-6.899 2.338a1.535 1.535 0 0 1 -1.52 -.231l-.112 -.1c-.398 -.386 -.556 -.954 -.393 -1.556l.047 -.15l7.97 -17.276z',\n        fill: 'currentColor',\n        key: 'svg-0',\n        strokeWidth: '0',\n      },\n    ],\n  ],\n);\n","import { Component } from 'react';\nimport { IconNavigationFilled } from '@tabler/icons-react';\n\nimport { TraitType } from '../../../enums/trait-type';\n\nimport { ConditionLogic } from '../../../logic/condition-logic';\nimport { EncounterLogic } from '../../../logic/encounter-logic';\n\nimport type { CombatantModel } from '../../../models/combatant';\nimport type { EncounterModel } from '../../../models/encounter';\n\nimport { Collections } from '../../../utils/collections';\n\nimport { Box, StatValue, Text, TextType } from '../../controls';\n\nimport './conditions-panel.scss';\n\ninterface Props {\n\tcombatant: CombatantModel;\n\tencounter: EncounterModel;\n}\n\nexport class ConditionsPanel extends Component<Props> {\n\tgetConditions = (trait: TraitType) => {\n\t\tconst conditions = this.props.combatant.combat.conditions.filter(c => c.trait === trait);\n\t\treturn Collections.distinct(conditions, c => ConditionLogic.getConditionDescription(c))\n\t\t\t.map(c => {\n\t\t\t\tconst set = this.props.combatant.combat.conditions.filter(con => ConditionLogic.getConditionDescription(con) === ConditionLogic.getConditionDescription(c));\n\t\t\t\tconst color = ConditionLogic.getConditionIsBeneficial(c) ? 'darkgreen' : 'darkred';\n\t\t\t\tconst rotate = ConditionLogic.getConditionIsBeneficial(c) ? '0deg': '180deg';\n\t\t\t\treturn (\n\t\t\t\t\t<div key={c.id} className='condition-row'>\n\t\t\t\t\t\t<IconNavigationFilled size={15} style={{ color: color, rotate: rotate }}/>\n\t\t\t\t\t\t<div className='details'>\n\t\t\t\t\t\t\t<StatValue\n\t\t\t\t\t\t\t\torientation='compact'\n\t\t\t\t\t\t\t\tlabel={ConditionLogic.getConditionDescription(c)}\n\t\t\t\t\t\t\t\tvalue={Collections.sum(set, c => c.rank)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t});\n\t};\n\n\tgetAuras = () => {\n\t\treturn EncounterLogic.getAuraConditions(this.props.encounter, this.props.combatant)\n\t\t\t.map(c => (\n\t\t\t\t<StatValue key={c.id} orientation='compact' label={ConditionLogic.getConditionDescription(c)} value={c.rank} />\n\t\t\t));\n\t};\n\n\trender = () => {\n\t\ttry {\n\t\t\tconst endurance = this.getConditions(TraitType.Endurance);\n\t\t\tconst resolve = this.getConditions(TraitType.Resolve);\n\t\t\tconst speed = this.getConditions(TraitType.Speed);\n\t\t\tconst auras = this.getAuras();\n\n\t\t\tlet conditions = null;\n\t\t\tif (endurance.length + resolve.length + speed.length + auras.length > 0) {\n\t\t\t\tconditions = (\n\t\t\t\t\t<Box label='Conditions'>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t{ endurance.length > 0 ? <Text type={TextType.MinorHeading}>Endurance Conditions</Text> : null }\n\t\t\t\t\t\t\t{endurance}\n\t\t\t\t\t\t\t{ resolve.length > 0 ? <Text type={TextType.MinorHeading}>Resolve Conditions</Text> : null }\n\t\t\t\t\t\t\t{resolve}\n\t\t\t\t\t\t\t{ speed.length > 0 ? <Text type={TextType.MinorHeading}>Speed Conditions</Text> : null }\n\t\t\t\t\t\t\t{speed}\n\t\t\t\t\t\t\t{ auras.length > 0 ? <Text type={TextType.MinorHeading}>In Auras</Text> : null }\n\t\t\t\t\t\t\t{auras}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Box>\n\t\t\t\t);\n\t\t\t}\n\n\t\t\treturn (\n\t\t\t\t<div className='conditions-panel'>\n\t\t\t\t\t{conditions}\n\t\t\t\t</div>\n\t\t\t);\n\t\t} catch {\n\t\t\treturn <div className='conditions-panel render-error' />;\n\t\t}\n\t};\n}\n","import { IconHeartFilled, IconHeartOff } from '@tabler/icons-react';\nimport { Component } from 'react';\n\nimport { TraitType } from '../../../enums/trait-type';\n\nimport { EncounterLogic } from '../../../logic/encounter-logic';\n\nimport type { CombatantModel } from '../../../models/combatant';\nimport type { EncounterModel } from '../../../models/encounter';\n\nimport { Box, IconSize, IconType, IconValue, StatValue } from '../../controls';\nimport { ConditionsPanel } from '../conditions/conditions-panel';\n\nimport './combat-stats-panel.scss';\n\ninterface Props {\n\tcombatant: CombatantModel;\n\tencounter: EncounterModel;\n}\n\nexport class CombatStatsPanel extends Component<Props> {\n\trender = () => {\n\t\ttry {\n\t\t\tlet wounds: JSX.Element[] = [];\n\t\t\tconst resolveRank = EncounterLogic.getTraitRank(this.props.encounter, this.props.combatant, TraitType.Resolve);\n\t\t\tfor (let n = 0; n < resolveRank; ++n) {\n\t\t\t\twounds.push(n < this.props.combatant.combat.wounds ? <IconHeartOff key={n} size={30} /> : <IconHeartFilled key={n} className='heartbeat' size={30} />);\n\t\t\t}\n\t\t\twounds.reverse();\n\n\t\t\tconst woundsPerRow = (wounds.length === 4) ? 2 : 3;\n\t\t\tconst woundsInRows: JSX.Element[] = [];\n\t\t\twhile (wounds.length > woundsPerRow) {\n\t\t\t\twoundsInRows.push(<div key={woundsInRows.length} className='wounds'>{wounds.slice(0, woundsPerRow)}</div>);\n\t\t\t\twounds = wounds.slice(woundsPerRow);\n\t\t\t}\n\t\t\tif (wounds.length !== 0) {\n\t\t\t\twoundsInRows.push(<div key={woundsInRows.length} className='wounds'>{wounds}</div>);\n\t\t\t}\n\n\t\t\treturn (\n\t\t\t\t<div className='combat-stats-panel'>\n\t\t\t\t\t<Box label='This Round'>\n\t\t\t\t\t\t<div className='combat-stats-row'>\n\t\t\t\t\t\t\t<StatValue orientation='vertical' label='Movement' value={<IconValue value={this.props.combatant.combat.movement} type={IconType.Movement} size={IconSize.Large} />} />\n\t\t\t\t\t\t\t<StatValue orientation='vertical' label='Senses' value={this.props.combatant.combat.senses} />\n\t\t\t\t\t\t\t<StatValue orientation='vertical' label='Hidden' value={this.props.combatant.combat.hidden} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Box>\n\t\t\t\t\t<Box label='Health'>\n\t\t\t\t\t\t<div className='combat-stats-row'>\n\t\t\t\t\t\t\t<StatValue orientation='vertical' label='Damage' value={this.props.combatant.combat.damage} />\n\t\t\t\t\t\t\t<StatValue orientation='vertical' label='Wounds' value={<div className='wounds-section'>{woundsInRows}</div>} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Box>\n\t\t\t\t\t<ConditionsPanel combatant={this.props.combatant} encounter={this.props.encounter} />\n\t\t\t\t</div>\n\t\t\t);\n\t\t} catch {\n\t\t\treturn <div className='combat-stats-panel render-error' />;\n\t\t}\n\t};\n}\n","import { Component } from 'react';\n\nimport { CombatantState } from '../../../enums/combatant-state';\n\nimport type { CombatantModel } from '../../../models/combatant';\n\nimport { Text, TextType } from '../../controls';\n\nimport './combatant-notices.scss';\n\ninterface Props {\n\tcombatant: CombatantModel;\n}\n\nexport class CombatantNotices extends Component<Props> {\n\trender = () => {\n\t\ttry {\n\t\t\treturn (\n\t\t\t\t<div className='combatant-notices'>\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.props.combatant.combat.state === CombatantState.Prone ?\n\t\t\t\t\t\t\t<Text type={TextType.Information}>\n\t\t\t\t\t\t\t\t<p><b>{this.props.combatant.name} is Prone.</b> Their skill ranks are halved and moving costs are doubled.</p>\n\t\t\t\t\t\t\t</Text>\n\t\t\t\t\t\t\t: null\n\t\t\t\t\t}\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.props.combatant.combat.state === CombatantState.Unconscious ?\n\t\t\t\t\t\t\t<Text type={TextType.Information}>\n\t\t\t\t\t\t\t\t<p><b>{this.props.combatant.name} is Unconscious.</b> They cannot spend movement points or take any actions until their wounds are healed.</p>\n\t\t\t\t\t\t\t</Text>\n\t\t\t\t\t\t\t: null\n\t\t\t\t\t}\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.props.combatant.combat.state === CombatantState.Dead ?\n\t\t\t\t\t\t\t<Text type={TextType.Information}>\n\t\t\t\t\t\t\t\t<p><b>{this.props.combatant.name} is Dead.</b> They cannot spend movement points or take any actions.</p>\n\t\t\t\t\t\t\t</Text>\n\t\t\t\t\t\t\t: null\n\t\t\t\t\t}\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.props.combatant.combat.stunned ?\n\t\t\t\t\t\t\t<Text type={TextType.Information}>\n\t\t\t\t\t\t\t\t<p><b>{this.props.combatant.name} is Stunned.</b> They cannot spend movement points or take any actions this round.</p>\n\t\t\t\t\t\t\t</Text>\n\t\t\t\t\t\t\t: null\n\t\t\t\t\t}\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.props.combatant.combat.hidden > 0 ?\n\t\t\t\t\t\t\t<Text type={TextType.Information}>\n\t\t\t\t\t\t\t\t<p><b>{this.props.combatant.name} is Hidden.</b> Their moving costs are doubled.</p>\n\t\t\t\t\t\t\t</Text>\n\t\t\t\t\t\t\t: null\n\t\t\t\t\t}\n\t\t\t\t</div>\n\t\t\t);\n\t\t} catch {\n\t\t\treturn <div className='combatant-notices render-error' />;\n\t\t}\n\t};\n}\n","import createReactComponent from '../createReactComponent';\nexport default createReactComponent('check', 'IconCheck', [\n  ['path', { d: 'M5 12l5 5l10 -10', key: 'svg-0' }],\n]);\n","import createReactComponent from '../createReactComponent';\nexport default createReactComponent('id', 'IconId', [\n  [\n    'path',\n    {\n      d: 'M3 4m0 3a3 3 0 0 1 3 -3h12a3 3 0 0 1 3 3v10a3 3 0 0 1 -3 3h-12a3 3 0 0 1 -3 -3z',\n      key: 'svg-0',\n    },\n  ],\n  ['path', { d: 'M9 10m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0', key: 'svg-1' }],\n  ['path', { d: 'M15 8l2 0', key: 'svg-2' }],\n  ['path', { d: 'M15 12l2 0', key: 'svg-3' }],\n  ['path', { d: 'M7 16l10 0', key: 'svg-4' }],\n]);\n","import createReactComponent from '../createReactComponent';\nexport default createReactComponent(\n  'arrow-big-down-filled',\n  'IconArrowBigDownFilled',\n  [\n    [\n      'path',\n      {\n        d: 'M10 2l-.15 .005a2 2 0 0 0 -1.85 1.995v6.999l-2.586 .001a2 2 0 0 0 -1.414 3.414l6.586 6.586a2 2 0 0 0 2.828 0l6.586 -6.586a2 2 0 0 0 .434 -2.18l-.068 -.145a2 2 0 0 0 -1.78 -1.089l-2.586 -.001v-6.999a2 2 0 0 0 -2 -2h-4z',\n        fill: 'currentColor',\n        key: 'svg-0',\n        strokeWidth: '0',\n      },\n    ],\n  ],\n);\n","import createReactComponent from '../createReactComponent';\nexport default createReactComponent('star-filled', 'IconStarFilled', [\n  [\n    'path',\n    {\n      d: 'M8.243 7.34l-6.38 .925l-.113 .023a1 1 0 0 0 -.44 1.684l4.622 4.499l-1.09 6.355l-.013 .11a1 1 0 0 0 1.464 .944l5.706 -3l5.693 3l.1 .046a1 1 0 0 0 1.352 -1.1l-1.091 -6.355l4.624 -4.5l.078 -.085a1 1 0 0 0 -.633 -1.62l-6.38 -.926l-2.852 -5.78a1 1 0 0 0 -1.794 0l-2.853 5.78z',\n      fill: 'currentColor',\n      key: 'svg-0',\n      strokeWidth: '0',\n    },\n  ],\n]);\n","import { Component, createRef } from 'react';\nimport { IconArrowBigDownFilled, IconStarFilled } from '@tabler/icons-react';\n\nimport { CombatantState } from '../../../../enums/combatant-state';\nimport { TraitType } from '../../../../enums/trait-type';\n\nimport { EncounterLogic } from '../../../../logic/encounter-logic';\n\nimport type { CombatantModel } from '../../../../models/combatant';\nimport type { EncounterModel } from '../../../../models/encounter';\n\nimport { Color } from '../../../../utils/color';\n\nimport './mini-token.scss';\n\ninterface Props {\n\tcombatant: CombatantModel;\n\tencounter: EncounterModel | null;\n\tsquareSize: number;\n\tmapDimensions: { left: number, top: number };\n\tselectable: boolean;\n\tselected: boolean;\n\tonClick: (combatant: CombatantModel) => void;\n}\n\ninterface State {\n\tmouseOver: boolean;\n}\n\nexport class MiniToken extends Component<Props, State> {\n\tconstructor(props: Props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tmouseOver: false\n\t\t};\n\t}\n\n\ttokenRef = createRef<HTMLDivElement>();\n\n\tscrollIntoView = () => {\n\t\tthis.tokenRef.current?.scrollIntoView({ behavior: 'smooth' });\n\t};\n\n\tonClick = (e: React.MouseEvent) => {\n\t\tif (this.props.selectable) {\n\t\t\te.stopPropagation();\n\t\t\tthis.props.onClick(this.props.combatant);\n\t\t}\n\t};\n\n\tsetMouseOver = (value: boolean) => {\n\t\tthis.setState({\n\t\t\tmouseOver: value\n\t\t});\n\t};\n\n\tgetMonogram = () => {\n\t\treturn this.props.combatant.name\n\t\t\t.split(' ')\n\t\t\t.filter(token => token.length > 0)\n\t\t\t.map(token => {\n\t\t\t\tif (/^\\d+$/.test(token)) {\n\t\t\t\t\treturn token;\n\t\t\t\t}\n\t\t\t\treturn token[0];\n\t\t\t})\n\t\t\t.join('');\n\t};\n\n\trender = () => {\n\t\ttry {\n\t\t\tconst onMap = this.props.encounter ? 'on-map' : '';\n\t\t\tconst current = this.props.combatant.combat.current ? 'current' : '';\n\t\t\tconst selectable = this.props.selectable ? 'selectable' : '';\n\t\t\tconst selected = this.props.selected ? 'selected' : '';\n\t\t\tconst hidden = !!this.props.encounter && (this.props.combatant.combat.hidden > 0) ? 'hidden' : '';\n\t\t\tconst mouseOver = this.state.mouseOver ? 'mouse-over' : '';\n\t\t\tconst className = `encounter-map-mini-token ${onMap} ${current} ${selectable} ${selected} ${hidden} ${mouseOver}`;\n\n\t\t\tlet prone = null;\n\t\t\tif (this.props.encounter && (this.props.combatant.combat.state === CombatantState.Prone)) {\n\t\t\t\tconst size = this.props.combatant.size * this.props.squareSize / 3;\n\t\t\t\tconst iconSize = this.props.combatant.size * this.props.squareSize / 4;\n\t\t\t\tprone = (\n\t\t\t\t\t<div className='icon-prone' style={{ width: `${size}px`, height: `${size}px` }}>\n\t\t\t\t\t\t<IconArrowBigDownFilled size={iconSize} />\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tlet stunned = null;\n\t\t\tif (this.props.encounter && this.props.combatant.combat.stunned) {\n\t\t\t\tconst size = this.props.combatant.size * this.props.squareSize / 3;\n\t\t\t\tconst iconSize = this.props.combatant.size * this.props.squareSize / 4;\n\t\t\t\tstunned = (\n\t\t\t\t\t<div className='icon-stunned' style={{ width: `${size}px`, height: `${size}px` }}>\n\t\t\t\t\t\t<IconStarFilled size={iconSize} />\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tlet healthBar = null;\n\t\t\tif (this.props.encounter && (this.props.combatant.combat.wounds > 0)) {\n\t\t\t\tconst resolve = EncounterLogic.getTraitRank(this.props.encounter, this.props.combatant, TraitType.Resolve);\n\t\t\t\tconst barWidth = 1 - (this.props.combatant.combat.wounds / resolve);\n\t\t\t\thealthBar = (\n\t\t\t\t\t<div className='health-bar' style={{ height: `${this.props.squareSize / 5}px` }}>\n\t\t\t\t\t\t<div className='health-bar-gauge' style={{ width: `${100 * barWidth}%` }} />\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tlet colorDark = this.props.combatant.color;\n\t\t\tlet colorLight = this.props.combatant.color;\n\t\t\tconst color = Color.parse(this.props.combatant.color);\n\t\t\tif (color) {\n\t\t\t\tcolorDark = Color.toString(Color.darken(color));\n\t\t\t\tcolorLight = Color.toString(Color.lighten(color));\n\t\t\t}\n\n\t\t\treturn (\n\t\t\t\t<div\n\t\t\t\t\tref={this.tokenRef}\n\t\t\t\t\tclassName={className}\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\twidth: this.props.encounter ? `${this.props.squareSize * this.props.combatant.size}px` : `${this.props.squareSize}px`,\n\t\t\t\t\t\tleft: this.props.encounter ? `${((this.props.combatant.combat.position.x - this.props.mapDimensions.left) * this.props.squareSize)}px` : '0',\n\t\t\t\t\t\ttop: this.props.encounter ? `${((this.props.combatant.combat.position.y - this.props.mapDimensions.top) * this.props.squareSize)}px` : '0',\n\t\t\t\t\t\tfontSize: this.props.encounter ? `${this.props.squareSize * this.props.combatant.size * 0.35}px` : `${this.props.squareSize * 0.35}px`,\n\t\t\t\t\t\tbackgroundImage: `linear-gradient(135deg, ${this.props.combatant.color}, ${colorDark})`\n\t\t\t\t\t}}\n\t\t\t\t\tonClick={e => this.onClick(e)}\n\t\t\t\t\tonMouseEnter={() => this.setMouseOver(true)}\n\t\t\t\t\tonMouseLeave={() => this.setMouseOver(false)}\n\t\t\t\t>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={this.props.combatant.combat.current ? 'mini-token-face current' : 'mini-token-face'}\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tbackgroundImage: `linear-gradient(135deg, ${colorLight}, ${this.props.combatant.color})`\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{this.getMonogram()}\n\t\t\t\t\t</div>\n\t\t\t\t\t{prone}\n\t\t\t\t\t{stunned}\n\t\t\t\t\t{healthBar}\n\t\t\t\t\t{!!this.props.encounter && this.props.combatant.combat.current ? <div className='pulse pulse-one' /> : null}\n\t\t\t\t\t{!!this.props.encounter && this.props.combatant.combat.current ? <div className='pulse pulse-two' /> : null}\n\t\t\t\t\t{!!this.props.encounter && this.props.combatant.combat.current ? <div className='pulse pulse-three' /> : null}\n\t\t\t\t</div>\n\t\t\t);\n\t\t} catch {\n\t\t\treturn <div className='encounter-map-mini-token render-error' />;\n\t\t}\n\t};\n}\n","import { Component, MouseEvent } from 'react';\nimport { IconCheck, IconHeartFilled, IconHeartOff, IconId, IconX } from '@tabler/icons-react';\n\nimport { CombatantState } from '../../../enums/combatant-state';\nimport { QuirkType } from '../../../enums/quirk-type';\nimport { TraitType } from '../../../enums/trait-type';\n\nimport { ConditionLogic } from '../../../logic/condition-logic';\nimport { EncounterLogic } from '../../../logic/encounter-logic';\nimport { GameLogic } from '../../../logic/game-logic';\n\nimport type { CombatantModel } from '../../../models/combatant';\nimport type { EncounterModel } from '../../../models/encounter';\n\nimport { Collections } from '../../../utils/collections';\n\nimport { StatValue, Tag, Text, TextType } from '../../controls';\nimport { MiniToken } from '../encounter-map/mini-token/mini-token';\n\nimport './combatant-row-panel.scss';\n\ninterface Props {\n\tmode: 'list' | 'initiative' | 'detailed' | 'header';\n\tcombatant: CombatantModel;\n\tencounter: EncounterModel | null;\n\tonClick: ((combatant: CombatantModel) => void) | null;\n\tonTokenClick: ((combatant: CombatantModel) => void) | null;\n\tonSelect: ((combatant: CombatantModel) => void) | null;\n\tonDetails: ((combatant: CombatantModel) => void) | null;\n\tonCancel: ((combatant: CombatantModel) => void) | null;\n}\n\nexport class CombatantRowPanel extends Component<Props> {\n\tstatic defaultProps = {\n\t\tmode: 'list',\n\t\tencounter: null,\n\t\tonClick: null,\n\t\tonTokenClick: null,\n\t\tonSelect: null,\n\t\tonDetails: null,\n\t\tonCancel: null\n\t};\n\n\tonClick = (e: MouseEvent) => {\n\t\te.stopPropagation();\n\t\tif (this.props.onClick) {\n\t\t\tthis.props.onClick(this.props.combatant);\n\t\t}\n\t};\n\n\tonSelect = (e: MouseEvent) => {\n\t\te.stopPropagation();\n\t\tif (this.props.onSelect) {\n\t\t\tthis.props.onSelect(this.props.combatant);\n\t\t}\n\t};\n\n\tonDetails = (e: MouseEvent) => {\n\t\te.stopPropagation();\n\t\tif (this.props.onDetails) {\n\t\t\tthis.props.onDetails(this.props.combatant);\n\t\t}\n\t};\n\n\tonCancel = (e: MouseEvent) => {\n\t\te.stopPropagation();\n\t\tif (this.props.onCancel) {\n\t\t\tthis.props.onCancel(this.props.combatant);\n\t\t}\n\t};\n\n\tgetListInfo = () => {\n\t\treturn (\n\t\t\t<div className='info right'>\n\t\t\t\t{this.getCardTags(true)}\n\t\t\t</div>\n\t\t);\n\t};\n\n\tgetInitiativeInfo = () => {\n\t\tconst conditions = Collections.distinct(this.props.combatant.combat.conditions, c => ConditionLogic.getConditionDescription(c))\n\t\t\t.map(c => {\n\t\t\t\tconst set = this.props.combatant.combat.conditions.filter(con => ConditionLogic.getConditionDescription(con) === ConditionLogic.getConditionDescription(c));\n\t\t\t\treturn (\n\t\t\t\t\t<StatValue\n\t\t\t\t\t\tkey={c.id}\n\t\t\t\t\t\torientation='compact'\n\t\t\t\t\t\tlabel={ConditionLogic.getConditionDescription(c)}\n\t\t\t\t\t\tvalue={Collections.sum(set, c => c.rank)}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t});\n\n\t\treturn (\n\t\t\t<div className='info below'>\n\t\t\t\t<div className='tags'>\n\t\t\t\t\t{this.getCombatTags(true)}\n\t\t\t\t</div>\n\t\t\t\t{this.props.combatant.combat.damage > 0 ? this.getDamage() : null}\n\t\t\t\t{this.getWounds()}\n\t\t\t\t{this.props.combatant.combat.conditions.length > 0 ? <hr /> : null}\n\t\t\t\t{conditions}\n\t\t\t</div>\n\t\t);\n\t};\n\n\tgetDetailedInfoBelow = () => {\n\t\treturn (\n\t\t\t<div className='info below'>\n\t\t\t\t<div className='tags'>\n\t\t\t\t\t{this.getCombatTags(true)}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t};\n\n\tgetDetailedInfoEnd = () => {\n\t\treturn (\n\t\t\t<div className='info end'>\n\t\t\t\t{this.getDamage()}\n\t\t\t\t{this.getWounds()}\n\t\t\t</div>\n\t\t);\n\t};\n\n\tgetHeaderInfoBelow = () => {\n\t\treturn (\n\t\t\t<div className='info below'>\n\t\t\t\t<div className='tags'>\n\t\t\t\t\t{this.getCardTags(true)}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t};\n\n\tgetCardTags = (includeQuirks: boolean) => {\n\t\tconst species = GameLogic.getSpecies(this.props.combatant.speciesID);\n\t\tconst role = GameLogic.getRole(this.props.combatant.roleID);\n\t\tconst background = GameLogic.getBackground(this.props.combatant.backgroundID);\n\n\t\treturn [\n\t\t\tspecies ? <Tag key='species'>{species.name}</Tag> : null,\n\t\t\trole ? <Tag key='role'>{role.name}</Tag> : null,\n\t\t\tbackground ? <Tag key='background'>{background.name}</Tag> : null,\n\t\t\t<Tag key='level'>Level {this.props.combatant.level}</Tag>,\n\t\t\t...(includeQuirks ? this.props.combatant.quirks.map((q, n) => <Tag key={n}>{q}</Tag>) : [])\n\t\t];\n\t};\n\n\tgetCombatTags = (includeQuirks: boolean) => {\n\t\treturn [\n\t\t\t...(includeQuirks ? this.props.combatant.quirks.map((q, n) => <Tag key={n}>{q}</Tag>) : []),\n\t\t\tthis.props.combatant.combat.hidden > 0 ? <Tag key='hidden'>Hidden</Tag> : null,\n\t\t\tthis.props.combatant.combat.stunned ? <Tag key='stunned'>Stunned</Tag> : null,\n\t\t\tthis.props.combatant.combat.state !== CombatantState.Standing ? <Tag key='state'>{this.props.combatant.combat.state}</Tag> : null\n\t\t];\n\t};\n\n\tgetDamage = () => {\n\t\tif (this.props.combatant.quirks.includes(QuirkType.Drone)) {\n\t\t\treturn null;\n\t\t}\n\n\t\tif (this.props.combatant.combat.state === CombatantState.Dead) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn (\n\t\t\t<StatValue\n\t\t\t\torientation='compact'\n\t\t\t\tlabel='Damage'\n\t\t\t\tvalue={this.props.combatant.combat.damage}\n\t\t\t/>\n\t\t);\n\t};\n\n\tgetWounds = () => {\n\t\tif (this.props.combatant.quirks.includes(QuirkType.Drone)) {\n\t\t\treturn null;\n\t\t}\n\n\t\tif (this.props.combatant.combat.state === CombatantState.Unconscious) {\n\t\t\treturn null;\n\t\t}\n\n\t\tif (this.props.combatant.combat.state === CombatantState.Dead) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst resolve = this.props.encounter ? EncounterLogic.getTraitRank(this.props.encounter as EncounterModel, this.props.combatant, TraitType.Resolve) : 0;\n\t\tconst rows = [];\n\t\tlet hearts = [];\n\t\tfor (let n = 0; n < resolve; ++n) {\n\t\t\thearts.push(n < this.props.combatant.combat.wounds ? <IconHeartOff key={n} size={12} /> : <IconHeartFilled key={n} size={12} />);\n\t\t\tif (hearts.length >= 5) {\n\t\t\t\trows.push(\n\t\t\t\t\t<div key={rows.length}>{hearts}</div>\n\t\t\t\t);\n\t\t\t\thearts = [];\n\t\t\t}\n\t\t}\n\t\tif (hearts.length > 0) {\n\t\t\trows.push(\n\t\t\t\t<div key={rows.length}>{hearts}</div>\n\t\t\t);\n\t\t\thearts = [];\n\t\t}\n\n\t\treturn (\n\t\t\t<StatValue\n\t\t\t\torientation='compact'\n\t\t\t\tlabel='Wounds'\n\t\t\t\tvalue={<div className='hearts'>{rows}</div>}\n\t\t\t/>\n\t\t);\n\t};\n\n\trender = () => {\n\t\ttry {\n\t\t\tconst clickable = this.props.onClick !== null ? 'clickable' : '';\n\t\t\tconst current = (this.props.mode === 'initiative') && this.props.combatant.combat.current ? 'current' : '';\n\t\t\tconst dimmed = (this.props.mode === 'initiative')\n\t\t\t\t&& (\n\t\t\t\t\t(!!this.props.encounter && this.props.encounter.combatants.some(c => c.combat.current) && (this.props.combatant.combat.initiative === Number.MIN_VALUE))\n\t\t\t\t\t|| (this.props.combatant.combat.state === CombatantState.Unconscious)\n\t\t\t\t\t|| (this.props.combatant.combat.state === CombatantState.Dead)\n\t\t\t\t) ? 'dimmed' : '';\n\t\t\tconst className = `combatant-row-panel ${this.props.mode} ${clickable} ${current} ${dimmed}`;\n\n\t\t\tlet infoBelow: JSX.Element | null = null;\n\t\t\tlet infoRight: JSX.Element | null = null;\n\t\t\tlet infoEnd: JSX.Element | null = null;\n\t\t\tswitch (this.props.mode) {\n\t\t\t\tcase 'list':\n\t\t\t\t\tinfoRight = this.getListInfo();\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'initiative':\n\t\t\t\t\tinfoBelow = this.getInitiativeInfo();\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'detailed':\n\t\t\t\t\tinfoBelow = this.getDetailedInfoBelow();\n\t\t\t\t\tinfoEnd = this.getDetailedInfoEnd();\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'header':\n\t\t\t\t\tinfoBelow = this.getHeaderInfoBelow();\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tlet selectBtn = null;\n\t\t\tif (this.props.onSelect) {\n\t\t\t\tselectBtn = (\n\t\t\t\t\t<button className='icon-btn' onClick={e => this.onSelect(e)}>\n\t\t\t\t\t\t<IconCheck />\n\t\t\t\t\t</button>\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tlet detailsBtn = null;\n\t\t\tif (this.props.onDetails) {\n\t\t\t\tdetailsBtn = (\n\t\t\t\t\t<button className='icon-btn' onClick={e => this.onDetails(e)}>\n\t\t\t\t\t\t<IconId />\n\t\t\t\t\t</button>\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tlet cancelBtn = null;\n\t\t\tif (this.props.onCancel) {\n\t\t\t\tcancelBtn = (\n\t\t\t\t\t<button className='icon-btn' onClick={e => this.onCancel(e)}>\n\t\t\t\t\t\t<IconX />\n\t\t\t\t\t</button>\n\t\t\t\t);\n\t\t\t}\n\n\t\t\treturn (\n\t\t\t\t<div className={className} onClick={e => this.onClick(e)}>\n\t\t\t\t\t<MiniToken\n\t\t\t\t\t\tcombatant={this.props.combatant}\n\t\t\t\t\t\tencounter={null}\n\t\t\t\t\t\tsquareSize={40}\n\t\t\t\t\t\tmapDimensions={{ left: 0, top: 0 }}\n\t\t\t\t\t\tselectable={true}\n\t\t\t\t\t\tselected={false}\n\t\t\t\t\t\tonClick={c => this.props.onTokenClick ? this.props.onTokenClick(c) : null}\n\t\t\t\t\t/>\n\t\t\t\t\t<div className='name'>\n\t\t\t\t\t\t<Text type={TextType.MinorHeading}>{this.props.combatant.name}</Text>\n\t\t\t\t\t\t{infoBelow}\n\t\t\t\t\t</div>\n\t\t\t\t\t{infoRight}\n\t\t\t\t\t{infoEnd}\n\t\t\t\t\t{\n\t\t\t\t\t\tselectBtn || detailsBtn || cancelBtn ?\n\t\t\t\t\t\t\t<div className='buttons'>\n\t\t\t\t\t\t\t\t{selectBtn}\n\t\t\t\t\t\t\t\t{detailsBtn}\n\t\t\t\t\t\t\t\t{cancelBtn}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t: null\n\t\t\t\t\t}\n\t\t\t\t</div>\n\t\t\t);\n\t\t} catch {\n\t\t\treturn <div className='combatant-row-panel render-error' />;\n\t\t}\n\t};\n}\n","import createReactComponent from '../createReactComponent';\nexport default createReactComponent('chevron-up-left', 'IconChevronUpLeft', [\n  ['path', { d: 'M8 16v-8h8', key: 'svg-0' }],\n]);\n","import createReactComponent from '../createReactComponent';\nexport default createReactComponent('chevron-up', 'IconChevronUp', [\n  ['path', { d: 'M6 15l6 -6l6 6', key: 'svg-0' }],\n]);\n","import createReactComponent from '../createReactComponent';\nexport default createReactComponent('chevron-up-right', 'IconChevronUpRight', [\n  ['path', { d: 'M8 8h8v8', key: 'svg-0' }],\n]);\n","import createReactComponent from '../createReactComponent';\nexport default createReactComponent('chevron-left', 'IconChevronLeft', [\n  ['path', { d: 'M15 6l-6 6l6 6', key: 'svg-0' }],\n]);\n","import createReactComponent from '../createReactComponent';\nexport default createReactComponent('chevron-right', 'IconChevronRight', [\n  ['path', { d: 'M9 6l6 6l-6 6', key: 'svg-0' }],\n]);\n","import createReactComponent from '../createReactComponent';\nexport default createReactComponent(\n  'chevron-down-left',\n  'IconChevronDownLeft',\n  [['path', { d: 'M8 8v8h8', key: 'svg-0' }]],\n);\n","import createReactComponent from '../createReactComponent';\nexport default createReactComponent('chevron-down', 'IconChevronDown', [\n  ['path', { d: 'M6 9l6 6l6 -6', key: 'svg-0' }],\n]);\n","import createReactComponent from '../createReactComponent';\nexport default createReactComponent(\n  'chevron-down-right',\n  'IconChevronDownRight',\n  [['path', { d: 'M16 8v8h-8', key: 'svg-0' }]],\n);\n","import { Component, MouseEvent } from 'react';\nimport { IconChevronDown, IconChevronDownLeft, IconChevronDownRight, IconChevronLeft, IconChevronRight, IconChevronUp, IconChevronUpLeft, IconChevronUpRight } from '@tabler/icons-react';\n\nimport type { CombatantModel } from '../../../models/combatant';\n\nimport { IconSize, IconType, IconValue } from '../../controls';\n\nimport './direction-panel.scss';\n\ninterface Props {\n\tcombatant: CombatantModel;\n\tcosts: Record<string, number>;\n\tonMove: (dir: string, cost: number) => void;\n}\n\nexport class DirectionPanel extends Component<Props> {\n\tgetClassName = (dir: string) => {\n\t\treturn `dir ${dir} ${this.canMove(dir) ? 'enabled' : 'disabled'}`;\n\t};\n\n\tcanMove = (dir: string) => {\n\t\tconst cost = this.props.costs[dir];\n\t\treturn (cost !== Number.MAX_VALUE) && (cost <= this.props.combatant.combat.movement);\n\t};\n\n\tgetCostLabel = (value: number) => {\n\t\tif (value === Number.MAX_VALUE) {\n\t\t\treturn '-';\n\t\t}\n\n\t\treturn value;\n\t};\n\n\tonClick = (e: MouseEvent, dir: string, cost: number) => {\n\t\te.stopPropagation();\n\t\tthis.props.onMove(dir, cost);\n\t};\n\n\tonDoubleClick = (e: MouseEvent) => {\n\t\te.stopPropagation();\n\t};\n\n\trender = () => {\n\t\ttry {\n\t\t\treturn (\n\t\t\t\t<div className='direction-panel'>\n\t\t\t\t\t<div className={this.getClassName('nw')} onClick={e => this.onClick(e, 'nw', this.props.costs.nw)} onDoubleClick={this.onDoubleClick}>\n\t\t\t\t\t\t<div className='arrow'><IconChevronUpLeft size={70} /></div>\n\t\t\t\t\t\t<div className='cost'><IconValue type={IconType.Movement} value={this.getCostLabel(this.props.costs.nw)} /></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className={this.getClassName('n')} onClick={e => this.onClick(e, 'n', this.props.costs.n)} onDoubleClick={this.onDoubleClick}>\n\t\t\t\t\t\t<div className='arrow'><IconChevronUp size={70} /></div>\n\t\t\t\t\t\t<div className='cost'><IconValue type={IconType.Movement} value={this.getCostLabel(this.props.costs.n)} /></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className={this.getClassName('ne')} onClick={e => this.onClick(e, 'ne', this.props.costs.ne)} onDoubleClick={this.onDoubleClick}>\n\t\t\t\t\t\t<div className='arrow'><IconChevronUpRight size={70} /></div>\n\t\t\t\t\t\t<div className='cost'><IconValue type={IconType.Movement} value={this.getCostLabel(this.props.costs.ne)} /></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className={this.getClassName('w')} onClick={e => this.onClick(e, 'w', this.props.costs.w)} onDoubleClick={this.onDoubleClick}>\n\t\t\t\t\t\t<div className='arrow'><IconChevronLeft size={70} /></div>\n\t\t\t\t\t\t<div className='cost'><IconValue type={IconType.Movement} value={this.getCostLabel(this.props.costs.w)} /></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className='center'>\n\t\t\t\t\t\t<div className='cost big'><IconValue type={IconType.Movement} value={this.props.combatant.combat.movement} size={IconSize.Large} /></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className={this.getClassName('e')} onClick={e => this.onClick(e, 'e', this.props.costs.e)} onDoubleClick={this.onDoubleClick}>\n\t\t\t\t\t\t<div className='arrow'><IconChevronRight size={70} /></div>\n\t\t\t\t\t\t<div className='cost'><IconValue type={IconType.Movement} value={this.getCostLabel(this.props.costs.e)} /></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className={this.getClassName('sw')} onClick={e => this.onClick(e, 'sw', this.props.costs.sw)} onDoubleClick={this.onDoubleClick}>\n\t\t\t\t\t\t<div className='arrow'><IconChevronDownLeft size={70} /></div>\n\t\t\t\t\t\t<div className='cost'><IconValue type={IconType.Movement} value={this.getCostLabel(this.props.costs.sw)} /></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className={this.getClassName('s')} onClick={e => this.onClick(e, 's', this.props.costs.s)} onDoubleClick={this.onDoubleClick}>\n\t\t\t\t\t\t<div className='arrow'><IconChevronDown size={70} /></div>\n\t\t\t\t\t\t<div className='cost'><IconValue type={IconType.Movement} value={this.getCostLabel(this.props.costs.s)} /></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className={this.getClassName('se')} onClick={e => this.onClick(e, 'se', this.props.costs.se)} onDoubleClick={this.onDoubleClick}>\n\t\t\t\t\t\t<div className='arrow'><IconChevronDownRight size={70} /></div>\n\t\t\t\t\t\t<div className='cost'><IconValue type={IconType.Movement} value={this.getCostLabel(this.props.costs.se)} /></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t);\n\t\t} catch {\n\t\t\treturn <div className='direction-panel render-error' />;\n\t\t}\n\t};\n}\n","import { Component } from 'react';\n\nimport type { CombatantModel } from '../../../../models/combatant';\n\nimport './aura-token.scss';\n\ninterface Props {\n\tcombatant: CombatantModel;\n\tsquareSize: number;\n\tmapDimensions: { left: number, top: number };\n}\n\nexport class AuraToken extends Component<Props> {\n\trender = () => {\n\t\ttry {\n\t\t\treturn (\n\t\t\t\t<div\n\t\t\t\t\tclassName='encounter-map-aura-token'\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\twidth: `${this.props.squareSize * (this.props.combatant.size + 2)}px`,\n\t\t\t\t\t\tleft: `${((this.props.combatant.combat.position.x - this.props.mapDimensions.left - 1) * this.props.squareSize)}px`,\n\t\t\t\t\t\ttop: `${((this.props.combatant.combat.position.y - this.props.mapDimensions.top - 1) * this.props.squareSize)}px`\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t</div>\n\t\t\t);\n\t\t} catch {\n\t\t\treturn <div className='encounter-map-aura-token render-error' />;\n\t\t}\n\t};\n}\n","import { Component } from 'react';\n\nimport type { EncounterMapSquareModel } from '../../../../models/encounter';\n\nimport './floor.scss';\n\ninterface Props {\n\tsquare: EncounterMapSquareModel;\n\tsquareSize: number;\n\tmapDimensions: { left: number, top: number };\n\tselectable: boolean;\n\tselected: boolean;\n\tonClick: (square: { x: number, y: number }) => void;\n}\n\nexport class Floor extends Component<Props> {\n\tonClick = (e: React.MouseEvent) => {\n\t\tif (this.props.selectable) {\n\t\t\te.stopPropagation();\n\t\t\tthis.props.onClick(this.props.square);\n\t\t}\n\t};\n\n\trender = () => {\n\t\ttry {\n\t\t\tconst type = this.props.square.type.toLowerCase();\n\t\t\tconst selectable = this.props.selectable ? 'selectable' : '';\n\t\t\tconst selected = this.props.selected ? 'selected' : '';\n\t\t\tconst className = `encounter-map-floor ${type} ${selectable} ${selected}`;\n\n\t\t\treturn (\n\t\t\t\t<div\n\t\t\t\t\tkey={`square ${this.props.square.x} ${this.props.square.y}`}\n\t\t\t\t\tclassName={className}\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\twidth: `${this.props.squareSize}px`,\n\t\t\t\t\t\tleft: `${((this.props.square.x - this.props.mapDimensions.left) * this.props.squareSize)}px`,\n\t\t\t\t\t\ttop: `${((this.props.square.y - this.props.mapDimensions.top) * this.props.squareSize)}px`\n\t\t\t\t\t}}\n\t\t\t\t\tonClick={e => this.onClick(e)}\n\t\t\t\t/>\n\t\t\t);\n\t\t} catch {\n\t\t\treturn <div className='encounter-map-floor render-error' />;\n\t\t}\n\t};\n}\n","import { Component } from 'react';\n\nimport type { EncounterMapSquareModel } from '../../../../models/encounter';\n\nimport './fog.scss';\n\ninterface Props {\n\tsquare: EncounterMapSquareModel;\n\tsquareSize: number;\n\tmapDimensions: { left: number, top: number };\n}\n\nexport class Fog extends Component<Props> {\n\trender = () => {\n\t\ttry {\n\t\t\treturn (\n\t\t\t\t<div\n\t\t\t\t\tkey={`square ${this.props.square.x} ${this.props.square.y}`}\n\t\t\t\t\tclassName='encounter-map-fog'\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\twidth: `${this.props.squareSize}px`,\n\t\t\t\t\t\tleft: `${((this.props.square.x - this.props.mapDimensions.left) * this.props.squareSize)}px`,\n\t\t\t\t\t\ttop: `${((this.props.square.y - this.props.mapDimensions.top) * this.props.squareSize)}px`\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t);\n\t\t} catch {\n\t\t\treturn <div className='encounter-map-fog render-error' />;\n\t\t}\n\t};\n}\n","import { Component } from 'react';\n\nimport type { EncounterModel, LootPileModel } from '../../../../models/encounter';\n\nimport './loot-token.scss';\n\ninterface Props {\n\tloot: LootPileModel;\n\tencounter: EncounterModel | null;\n\tsquareSize: number;\n\tmapDimensions: { left: number, top: number };\n\tselectable: boolean;\n\tselected: boolean;\n\tonClick: (loot: LootPileModel) => void;\n}\n\ninterface State {\n\tmouseOver: boolean;\n}\n\nexport class LootToken extends Component<Props, State> {\n\tconstructor(props: Props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tmouseOver: false\n\t\t};\n\t}\n\n\tonClick = (e: React.MouseEvent) => {\n\t\tif (this.props.selectable) {\n\t\t\te.stopPropagation();\n\t\t\tthis.props.onClick(this.props.loot);\n\t\t}\n\t};\n\n\tsetMouseOver = (value: boolean) => {\n\t\tthis.setState({\n\t\t\tmouseOver: value\n\t\t});\n\t};\n\n\trender = () => {\n\t\ttry {\n\t\t\tconst onMap = this.props.encounter ? 'on-map' : '';\n\t\t\tconst selected = this.props.selected ? 'selected' : '';\n\t\t\tconst selectable = this.props.selectable ? 'selectable' : '';\n\t\t\tconst className = `encounter-map-loot-token ${onMap} ${selected} ${selectable}`;\n\n\t\t\treturn (\n\t\t\t\t<div\n\t\t\t\t\tclassName={className}\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\twidth: `${this.props.squareSize}px`,\n\t\t\t\t\t\tleft: this.props.encounter ? `${((this.props.loot.position.x - this.props.mapDimensions.left) * this.props.squareSize)}px` : '0',\n\t\t\t\t\t\ttop: this.props.encounter ? `${((this.props.loot.position.y - this.props.mapDimensions.top) * this.props.squareSize)}px` : '0'\n\t\t\t\t\t}}\n\t\t\t\t\ttitle='Treasure'\n\t\t\t\t\tonClick={e => this.onClick(e)}\n\t\t\t\t\tonMouseEnter={() => this.setMouseOver(true)}\n\t\t\t\t\tonMouseLeave={() => this.setMouseOver(false)}\n\t\t\t\t>\n\t\t\t\t\t<div className='loot-token-face' />\n\t\t\t\t</div>\n\t\t\t);\n\t\t} catch {\n\t\t\treturn <div className='encounter-map-loot-token render-error' />;\n\t\t}\n\t};\n}\n","import { Component } from 'react';\n\nimport './overlay.scss';\n\ninterface Props {\n\tx: number;\n\ty: number;\n\tsize: number;\n\tradius: number;\n\tsquareSize: number;\n\tmapDimensions: { left: number, top: number };\n}\n\nexport class Overlay extends Component<Props> {\n\trender = () => {\n\t\ttry {\n\t\t\treturn (\n\t\t\t\t<div\n\t\t\t\t\tclassName='encounter-map-overlay'\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\twidth: `${this.props.squareSize * (this.props.size + (2 * this.props.radius))}px`,\n\t\t\t\t\t\tleft: `${((this.props.x - this.props.mapDimensions.left - this.props.radius) * this.props.squareSize)}px`,\n\t\t\t\t\t\ttop: `${((this.props.y - this.props.mapDimensions.top - this.props.radius) * this.props.squareSize)}px`\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t</div>\n\t\t\t);\n\t\t} catch {\n\t\t\treturn <div className='encounter-map-overlay render-error' />;\n\t\t}\n\t};\n}\n","import { Component } from 'react';\n\nimport './trail-token.scss';\n\ninterface Props {\n\tposition: { x: number, y: number };\n\tsize: number;\n\tsquareSize: number;\n\tmapDimensions: { left: number, top: number };\n}\n\nexport class TrailToken extends Component<Props> {\n\trender = () => {\n\t\ttry {\n\t\t\treturn (\n\t\t\t\t<div\n\t\t\t\t\tclassName='encounter-map-trail-token'\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\twidth: `${this.props.squareSize * this.props.size}px`,\n\t\t\t\t\t\tleft: `${((this.props.position.x - this.props.mapDimensions.left) * this.props.squareSize)}px`,\n\t\t\t\t\t\ttop: `${((this.props.position.y - this.props.mapDimensions.top) * this.props.squareSize)}px`\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t</div>\n\t\t\t);\n\t\t} catch {\n\t\t\treturn <div className='encounter-map-trail-token render-error' />;\n\t\t}\n\t};\n}\n","import { Component } from 'react';\n\nimport './wall.scss';\n\ninterface Props {\n\twall: { x: number, y: number };\n\tsquareSize: number;\n\tmapDimensions: { left: number, top: number };\n\tselectable: boolean;\n\tselected: boolean;\n\tonClick: (square: { x: number, y: number }) => void;\n}\n\nexport class Wall extends Component<Props> {\n\tonClick = (e: React.MouseEvent) => {\n\t\tif (this.props.selectable) {\n\t\t\te.stopPropagation();\n\t\t\tthis.props.onClick(this.props.wall);\n\t\t}\n\t};\n\n\trender = () => {\n\t\ttry {\n\t\t\tconst selectable = this.props.selectable ? 'selectable' : '';\n\t\t\tconst selected = this.props.selected ? 'selected' : '';\n\t\t\tconst className = `encounter-map-wall ${selectable} ${selected}`;\n\n\t\t\treturn (\n\t\t\t\t<div\n\t\t\t\t\tkey={`square ${this.props.wall.x} ${this.props.wall.y}`}\n\t\t\t\t\tclassName={className}\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\twidth: `${this.props.squareSize}px`,\n\t\t\t\t\t\tleft: `${((this.props.wall.x - this.props.mapDimensions.left) * this.props.squareSize)}px`,\n\t\t\t\t\t\ttop: `${((this.props.wall.y - this.props.mapDimensions.top) * this.props.squareSize)}px`\n\t\t\t\t\t}}\n\t\t\t\t\tonClick={e => this.onClick(e)}\n\t\t\t\t/>\n\t\t\t);\n\t\t} catch {\n\t\t\treturn <div className='encounter-map-wall render-error' />;\n\t\t}\n\t};\n}\n","import { Component, createRef } from 'react';\n\nimport { CombatantState } from '../../../enums/combatant-state';\n\nimport { ActionLogic } from '../../../logic/action-logic';\nimport { CombatantLogic } from '../../../logic/combatant-logic';\nimport { EncounterLogic } from '../../../logic/encounter-logic';\nimport { EncounterMapLogic } from '../../../logic/encounter-map-logic';\n\nimport type { EncounterModel, LootPileModel } from '../../../models/encounter';\nimport type { ActionOriginParameterModel } from '../../../models/action';\nimport type { CombatantModel } from '../../../models/combatant';\n\nimport { Collections } from '../../../utils/collections';\n\nimport { AuraToken } from './aura-token/aura-token';\nimport { Floor } from './floor/floor';\nimport { Fog } from './fog/fog';\nimport { LootToken } from './loot-token/loot-token';\nimport { MiniToken } from './mini-token/mini-token';\nimport { Overlay } from './overlay/overlay';\nimport { TrailToken } from './trail-token/trail-token';\nimport { Wall } from './wall/wall';\n\nimport './encounter-map-panel.scss';\n\ninterface Props {\n\tencounter: EncounterModel;\n\tsquareSize: number;\n\tselectableCombatantIDs: string[];\n\tselectableLootIDs: string[];\n\tselectableSquares: { x: number, y: number }[];\n\tselectedCombatantIDs: string[];\n\tselectedLootIDs: string[];\n\tselectedSquares: { x: number, y: number }[];\n\tonClickCombatant: (combatant: CombatantModel) => void;\n\tonClickLoot: (loot: LootPileModel) => void;\n\tonClickSquare: (square: { x: number, y: number }) => void;\n\tonClickOff: () => void;\n}\n\nexport class EncounterMapPanel extends Component<Props> {\n\n\tcurrentCombatantRef = createRef<MiniToken>();\n\tselectedCombatantRef = createRef<MiniToken>();\n\n\tscrollToCombatant = (combatant: 'current' | 'selected') => {\n\t\tif (combatant === 'selected') {\n\t\t\t// If they're the same combatant, switch to 'current'\n\t\t\tconst current = this.props.encounter.combatants.find(c => c.combat.current);\n\t\t\tif (current && (this.props.selectedCombatantIDs.length > 0) && (this.props.selectedCombatantIDs[0] === current.id)) {\n\t\t\t\tcombatant = 'current';\n\t\t\t}\n\t\t}\n\n\t\tswitch (combatant) {\n\t\t\tcase 'current':\n\t\t\t\tthis.currentCombatantRef.current?.scrollIntoView();\n\t\t\t\tbreak;\n\t\t\tcase 'selected':\n\t\t\t\tthis.selectedCombatantRef.current?.scrollIntoView();\n\t\t\t\tbreak;\n\t\t}\n\t};\n\n\tgetEffect = () => {\n\t\tlet effect = null;\n\n\t\tconst combatant = this.props.encounter.combatants.find(c => c.combat.current);\n\t\tif (combatant) {\n\t\t\tif (combatant.combat.selectedAction && !combatant.combat.selectedAction.used) {\n\t\t\t\tconst action = combatant.combat.selectedAction.action;\n\n\t\t\t\tconst range = ActionLogic.getActionRange(action, combatant);\n\t\t\t\tconst param = action.parameters.find(p => p.id === 'origin');\n\t\t\t\tif (param) {\n\t\t\t\t\tif (range > 0) {\n\t\t\t\t\t\tconst originParam = param as ActionOriginParameterModel;\n\t\t\t\t\t\tif (originParam.value) {\n\t\t\t\t\t\t\tconst originSquares = (originParam.value as { x: number, y: number }[]);\n\t\t\t\t\t\t\tif (originSquares.length > 0)\n\t\t\t\t\t\t\t\teffect = {\n\t\t\t\t\t\t\t\t\tx: originSquares[0].x,\n\t\t\t\t\t\t\t\t\ty: originSquares[0].y,\n\t\t\t\t\t\t\t\t\tsize: 1,\n\t\t\t\t\t\t\t\t\tradius: range\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (range > 1) {\n\t\t\t\t\t\teffect = {\n\t\t\t\t\t\t\tx: combatant.combat.position.x,\n\t\t\t\t\t\t\ty: combatant.combat.position.y,\n\t\t\t\t\t\t\tsize: combatant.size,\n\t\t\t\t\t\t\tradius: range\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn effect;\n\t};\n\n\trender = () => {\n\t\ttry {\n\t\t\t// Get dimensions, adding a 1-square border\n\t\t\tconst dims = EncounterMapLogic.getDimensions(this.props.encounter.mapSquares);\n\t\t\tdims.left -= 1;\n\t\t\tdims.top -= 1;\n\t\t\tdims.right += 1;\n\t\t\tdims.bottom += 1;\n\n\t\t\tlet combatants = this.props.encounter.combatants.filter(combatant => combatant.combat.state !== CombatantState.Dead);\n\t\t\tconst current = combatants.find(c => c.combat.current);\n\t\t\tif (current) {\n\t\t\t\tcombatants = combatants.filter(c => (c === current) || (c.faction === current.faction) || (current.combat.senses >= c.combat.hidden));\n\t\t\t}\n\n\t\t\tconst walls = Collections.distinct(EncounterMapLogic.getAdjacentWalls(this.props.encounter.mapSquares, this.props.encounter.mapSquares), sq => `${sq.x} ${sq.y}`)\n\t\t\t\t.sort((a, b) => {\n\t\t\t\t\tlet result: number = a.y - b.y;\n\t\t\t\t\tif (result === 0) {\n\t\t\t\t\t\tresult = a.x - b.x;\n\t\t\t\t\t}\n\t\t\t\t\treturn result;\n\t\t\t\t})\n\t\t\t\t.map(wall => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<Wall\n\t\t\t\t\t\t\tkey={`wall ${wall.x} ${wall.y}`}\n\t\t\t\t\t\t\twall={wall}\n\t\t\t\t\t\t\tsquareSize={this.props.squareSize}\n\t\t\t\t\t\t\tmapDimensions={dims}\n\t\t\t\t\t\t\tselectable={!!this.props.selectableSquares.find(s => (s.x === wall.x) && (s.y === wall.y))}\n\t\t\t\t\t\t\tselected={!!this.props.selectedSquares.find(s => (s.x === wall.x) && (s.y === wall.y))}\n\t\t\t\t\t\t\tonClick={this.props.onClickSquare}\n\t\t\t\t\t\t/>\n\t\t\t\t\t);\n\t\t\t\t});\n\n\t\t\tconst floor = Collections.distinct(this.props.encounter.mapSquares, sq => `${sq.x} ${sq.y}`)\n\t\t\t\t.sort((a, b) => {\n\t\t\t\t\tlet result = a.y - b.y;\n\t\t\t\t\tif (result === 0) {\n\t\t\t\t\t\tresult = a.x - b.x;\n\t\t\t\t\t}\n\t\t\t\t\treturn result;\n\t\t\t\t})\n\t\t\t\t.map(sq => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<Floor\n\t\t\t\t\t\t\tkey={`square ${sq.x} ${sq.y}`}\n\t\t\t\t\t\t\tsquare={sq}\n\t\t\t\t\t\t\tsquareSize={this.props.squareSize}\n\t\t\t\t\t\t\tmapDimensions={dims}\n\t\t\t\t\t\t\tselectable={!!this.props.selectableSquares.find(s => (s.x === sq.x) && (s.y === sq.y))}\n\t\t\t\t\t\t\tselected={!!this.props.selectedSquares.find(s => (s.x === sq.x) && (s.y === sq.y))}\n\t\t\t\t\t\t\tonClick={this.props.onClickSquare}\n\t\t\t\t\t\t/>\n\t\t\t\t\t);\n\t\t\t\t});\n\n\t\t\tconst loot = this.props.encounter.loot.map(lp => {\n\t\t\t\treturn (\n\t\t\t\t\t<LootToken\n\t\t\t\t\t\tkey={lp.id}\n\t\t\t\t\t\tloot={lp}\n\t\t\t\t\t\tencounter={this.props.encounter}\n\t\t\t\t\t\tsquareSize={this.props.squareSize}\n\t\t\t\t\t\tmapDimensions={dims}\n\t\t\t\t\t\tselectable={(this.props.selectableLootIDs.length === 0) || this.props.selectableLootIDs.includes(lp.id)}\n\t\t\t\t\t\tselected={this.props.selectedLootIDs.includes(lp.id)}\n\t\t\t\t\t\tonClick={this.props.onClickLoot}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t});\n\n\t\t\tconst auras = combatants.map(combatant => {\n\t\t\t\tif (CombatantLogic.getAuras(combatant).length > 0) {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<AuraToken\n\t\t\t\t\t\t\tkey={combatant.id}\n\t\t\t\t\t\t\tcombatant={combatant}\n\t\t\t\t\t\t\tsquareSize={this.props.squareSize}\n\t\t\t\t\t\t\tmapDimensions={dims}\n\t\t\t\t\t\t/>\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\treturn null;\n\t\t\t});\n\n\t\t\tconst trails = combatants.flatMap(combatant => {\n\t\t\t\treturn combatant.combat.trail.map((pos, n) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<TrailToken\n\t\t\t\t\t\t\tkey={`trail ${combatant.id} ${n}`}\n\t\t\t\t\t\t\tposition={pos}\n\t\t\t\t\t\t\tsize={combatant.size}\n\t\t\t\t\t\t\tsquareSize={this.props.squareSize}\n\t\t\t\t\t\t\tmapDimensions={dims}\n\t\t\t\t\t\t/>\n\t\t\t\t\t);\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tconst minis = combatants.map(combatant => {\n\t\t\t\tlet ref = null;\n\t\t\t\tif (combatant.combat.current) {\n\t\t\t\t\tref = this.currentCombatantRef;\n\t\t\t\t} else if ((this.props.selectedCombatantIDs.length > 0) && (this.props.selectedCombatantIDs[0] === combatant.id)) {\n\t\t\t\t\tref = this.selectedCombatantRef;\n\t\t\t\t}\n\t\t\t\treturn (\n\t\t\t\t\t<MiniToken\n\t\t\t\t\t\tkey={combatant.id}\n\t\t\t\t\t\tref={ref}\n\t\t\t\t\t\tcombatant={combatant}\n\t\t\t\t\t\tencounter={this.props.encounter}\n\t\t\t\t\t\tsquareSize={this.props.squareSize}\n\t\t\t\t\t\tmapDimensions={dims}\n\t\t\t\t\t\tselectable={(this.props.selectableCombatantIDs.length === 0) || this.props.selectableCombatantIDs.includes(combatant.id)}\n\t\t\t\t\t\tselected={this.props.selectedCombatantIDs.includes(combatant.id)}\n\t\t\t\t\t\tonClick={this.props.onClickCombatant}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t});\n\n\t\t\tconst currentCombatant = this.props.encounter.combatants.find(c => c.combat.current);\n\t\t\tconst currentCombatantSquares = currentCombatant ? EncounterLogic.getCombatantSquares(this.props.encounter, currentCombatant) : [];\n\t\t\tconst edges = EncounterMapLogic.getMapEdges(this.props.encounter.mapSquares);\n\t\t\tconst fog = Collections.distinct(this.props.encounter.mapSquares, sq => `${sq.x} ${sq.y}`)\n\t\t\t\t.filter(sq => {\n\t\t\t\t\tif (currentCombatant) {\n\t\t\t\t\t\treturn !EncounterMapLogic.canSeeAny(edges, currentCombatantSquares, [ sq ]);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn false;\n\t\t\t\t})\n\t\t\t\t.map(sq => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<Fog\n\t\t\t\t\t\t\tkey={`square ${sq.x} ${sq.y}`}\n\t\t\t\t\t\t\tsquare={sq}\n\t\t\t\t\t\t\tsquareSize={this.props.squareSize}\n\t\t\t\t\t\t\tmapDimensions={dims}\n\t\t\t\t\t\t/>\n\t\t\t\t\t);\n\t\t\t\t});\n\n\t\t\tconst overlays = [];\n\t\t\tconst effect = this.getEffect();\n\t\t\tif (effect) {\n\t\t\t\toverlays.push(\n\t\t\t\t\t<Overlay\n\t\t\t\t\t\tkey='effect'\n\t\t\t\t\t\tx={effect.x}\n\t\t\t\t\t\ty={effect.y}\n\t\t\t\t\t\tsize={effect.size}\n\t\t\t\t\t\tradius={effect.radius}\n\t\t\t\t\t\tsquareSize={this.props.squareSize}\n\t\t\t\t\t\tmapDimensions={dims}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tconst width = dims.right - dims.left + 1;\n\t\t\tconst height = dims.bottom - dims.top + 1;\n\n\t\t\treturn (\n\t\t\t\t<div className='encounter-map' onClick={() => this.props.onClickOff()}>\n\t\t\t\t\t<div className='encounter-map-square-container' style={{ maxWidth: `${this.props.squareSize * width}px`, maxHeight: `${this.props.squareSize * height}px` }}>\n\t\t\t\t\t\t{floor}\n\t\t\t\t\t\t{auras}\n\t\t\t\t\t\t{trails}\n\t\t\t\t\t\t{walls}\n\t\t\t\t\t\t{loot}\n\t\t\t\t\t\t{minis}\n\t\t\t\t\t\t{fog}\n\t\t\t\t\t\t{overlays}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t);\n\t\t} catch {\n\t\t\treturn <div className='encounter-map render-error' />;\n\t\t}\n\t};\n}\n","import { Component } from 'react';\n\nimport { EncounterLogic } from '../../../logic/encounter-logic';\n\nimport type { CombatantModel } from '../../../models/combatant';\nimport type { EncounterModel } from '../../../models/encounter';\n\nimport { Text, TextType } from '../../controls';\nimport { CombatantRowPanel } from '../../panels';\n\nimport './initiative-list-panel.scss';\n\ninterface Props {\n\tencounter: EncounterModel;\n\tselectedIDs: string[];\n\tonSelect: (combatant: CombatantModel) => void;\n}\n\nexport class InitiativeListPanel extends Component<Props> {\n\trender = () => {\n\t\ttry {\n\t\t\tconst currentEntries = EncounterLogic.getActiveCombatants(this.props.encounter)\n\t\t\t\t.filter(c => c.combat.current)\n\t\t\t\t.map(combatant => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<CombatantRowPanel\n\t\t\t\t\t\t\tkey={combatant.id}\n\t\t\t\t\t\t\tmode='initiative'\n\t\t\t\t\t\t\tcombatant={combatant}\n\t\t\t\t\t\t\tencounter={this.props.encounter}\n\t\t\t\t\t\t\tonClick={this.props.onSelect}\n\t\t\t\t\t\t\tonTokenClick={this.props.onSelect}\n\t\t\t\t\t\t/>\n\t\t\t\t\t);\n\t\t\t\t});\n\n\t\t\tconst activeEntries = EncounterLogic.getActiveCombatants(this.props.encounter)\n\t\t\t\t.filter(c => !c.combat.current)\n\t\t\t\t.map(combatant => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<CombatantRowPanel\n\t\t\t\t\t\t\tkey={combatant.id}\n\t\t\t\t\t\t\tmode='initiative'\n\t\t\t\t\t\t\tcombatant={combatant}\n\t\t\t\t\t\t\tencounter={this.props.encounter}\n\t\t\t\t\t\t\tonClick={this.props.onSelect}\n\t\t\t\t\t\t\tonTokenClick={this.props.onSelect}\n\t\t\t\t\t\t/>\n\t\t\t\t\t);\n\t\t\t\t});\n\n\t\t\tconst actedEntries = EncounterLogic.getActedCombatants(this.props.encounter)\n\t\t\t\t.map(combatant => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<CombatantRowPanel\n\t\t\t\t\t\t\tkey={combatant.id}\n\t\t\t\t\t\t\tmode='initiative'\n\t\t\t\t\t\t\tcombatant={combatant}\n\t\t\t\t\t\t\tencounter={this.props.encounter}\n\t\t\t\t\t\t\tonClick={this.props.onSelect}\n\t\t\t\t\t\t\tonTokenClick={this.props.onSelect}\n\t\t\t\t\t\t/>\n\t\t\t\t\t);\n\t\t\t\t});\n\n\t\t\tconst deadEntries = EncounterLogic.getDeadCombatants(this.props.encounter)\n\t\t\t\t.map(combatant => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<CombatantRowPanel\n\t\t\t\t\t\t\tkey={combatant.id}\n\t\t\t\t\t\t\tmode='initiative'\n\t\t\t\t\t\t\tcombatant={combatant}\n\t\t\t\t\t\t\tencounter={this.props.encounter}\n\t\t\t\t\t\t\tonClick={this.props.onSelect}\n\t\t\t\t\t\t\tonTokenClick={this.props.onSelect}\n\t\t\t\t\t\t/>\n\t\t\t\t\t);\n\t\t\t\t});\n\n\t\t\tlet actedHeading = 'Acted';\n\t\t\tif (currentEntries.length === 0) {\n\t\t\t\tactedHeading = 'Combatants';\n\t\t\t}\n\n\t\t\treturn (\n\t\t\t\t<div className='initiative-list-panel'>\n\t\t\t\t\t{currentEntries.length > 0 ? <Text type={TextType.SubHeading}>Current Combatant</Text> : null}\n\t\t\t\t\t{currentEntries}\n\t\t\t\t\t{activeEntries.length > 0 ? <Text type={TextType.SubHeading}>Waiting</Text> : null}\n\t\t\t\t\t{activeEntries}\n\t\t\t\t\t{actedEntries.length > 0 ? <Text type={TextType.SubHeading}>{actedHeading}</Text> : null}\n\t\t\t\t\t{actedEntries}\n\t\t\t\t\t{deadEntries.length > 0 ? <Text type={TextType.SubHeading}>Dead</Text> : null}\n\t\t\t\t\t{deadEntries}\n\t\t\t\t</div>\n\t\t\t);\n\t\t} catch {\n\t\t\treturn <div className='initiative-list-panel render-error' />;\n\t\t}\n\t};\n}\n","import { Component } from 'react';\n\nimport './list-item-panel.scss';\n\ninterface Props {\n\titem: string;\n}\n\nexport class ListItemPanel extends Component<Props> {\n\trender = () => {\n\t\ttry {\n\t\t\treturn (\n\t\t\t\t<div className='list-item-panel'>\n\t\t\t\t\t{this.props.item}\n\t\t\t\t</div>\n\t\t\t);\n\t\t} catch {\n\t\t\treturn <div className='list-item-panel render-error' />;\n\t\t}\n\t};\n}\n","import { Component } from 'react';\n\nimport { StrongholdLogic } from '../../../logic/stronghold-logic';\n\nimport type { StructureModel } from '../../../models/structure';\n\nimport { Random } from '../../../utils/random';\n\nimport './stronghold-map-panel.scss';\n\ninterface Props {\n\tstronghold: StructureModel[];\n\tmode: 'map' | 'structure';\n\tselectedStructure: StructureModel | null;\n\tonSelectStructure: (structure: StructureModel | null) => void;\n}\n\nexport class StrongholdMapPanel extends Component<Props> {\n\tpublic static defaultProps = {\n\t\tmode: 'map',\n\t\tonSelectStructure: () => null\n\t};\n\n\tonClick = (e: React.MouseEvent, structure: StructureModel | null) => {\n\t\te.stopPropagation();\n\t\tthis.props.onSelectStructure(structure);\n\t};\n\n\tgetStructure = (structure: StructureModel) => {\n\t\tconst rng = Random.getSeededRNG(structure.id);\n\n\t\tconst width = (Random.randomDecimal(rng) * 40) + 50;\n\t\tconst height = (Random.randomDecimal(rng) * 40) + 50;\n\t\tconst degrees = (Random.randomDecimal(rng) * 360);\n\t\tconst color = Random.randomColor(80, 120, rng);\n\n\t\tlet points: { x: number, y: number }[] = [];\n\t\tswitch (Random.randomNumber(4, rng)) {\n\t\t\tcase 0:\n\t\t\t\t// Square\n\t\t\t\tpoints = [\n\t\t\t\t\t{ x: 0, y: 0 },\n\t\t\t\t\t{ x: width, y: 0 },\n\t\t\t\t\t{ x: width, y: height },\n\t\t\t\t\t{ x: 0, y: height }\n\t\t\t\t];\n\t\t\t\tbreak;\n\t\t\tcase 1: {\n\t\t\t\t// L-shape\n\t\t\t\tconst x = Random.randomNumber(width / 3, rng) + (width / 3);\n\t\t\t\tconst y = Random.randomNumber(height / 3, rng) + (height / 3);\n\t\t\t\tpoints = [\n\t\t\t\t\t{ x: 0, y: 0 },\n\t\t\t\t\t{ x: x, y: 0 },\n\t\t\t\t\t{ x: x, y: y },\n\t\t\t\t\t{ x: width, y: y },\n\t\t\t\t\t{ x: width, y: height },\n\t\t\t\t\t{ x: 0, y: height }\n\t\t\t\t];\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 2: {\n\t\t\t\t// C-shape\n\t\t\t\tconst x = Random.randomNumber(width / 4, rng) + (width / 2);\n\t\t\t\tconst y1 = Random.randomNumber(height / 6, rng) + (height / 6);\n\t\t\t\tconst y2 = Random.randomNumber(height / 6, rng) + (height / 6) + (height / 2);\n\t\t\t\tpoints = [\n\t\t\t\t\t{ x: 0, y: 0 },\n\t\t\t\t\t{ x: width, y: 0 },\n\t\t\t\t\t{ x: width, y: y1 },\n\t\t\t\t\t{ x: x, y: y1 },\n\t\t\t\t\t{ x: x, y: y2 },\n\t\t\t\t\t{ x: width, y: y2 },\n\t\t\t\t\t{ x: width, y: height },\n\t\t\t\t\t{ x: 0, y: height }\n\t\t\t\t];\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 3: {\n\t\t\t\t// T-shape\n\t\t\t\tconst x1 = Random.randomNumber(width / 6, rng) + (width / 6) + (width / 2);\n\t\t\t\tconst x2 = Random.randomNumber(width / 6, rng) + (width / 6);\n\t\t\t\tconst y1 = Random.randomNumber(height / 3, rng) + (height / 3);\n\t\t\t\tconst y2 = Random.randomNumber(height / 3, rng) + (height / 3);\n\t\t\t\tpoints = [\n\t\t\t\t\t{ x: 0, y: 0 },\n\t\t\t\t\t{ x: width, y: 0 },\n\t\t\t\t\t{ x: width, y: y1 },\n\t\t\t\t\t{ x: x1, y: y1 },\n\t\t\t\t\t{ x: x1, y: height },\n\t\t\t\t\t{ x: x2, y: height },\n\t\t\t\t\t{ x: x2, y: y2 },\n\t\t\t\t\t{ x: 0, y: y2 }\n\t\t\t\t];\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tconst offsetX = (100 - width) / 2;\n\t\tconst offsetY = (100 - height) / 2;\n\n\t\tif (structure === this.props.selectedStructure) {\n\t\t\tcolor.r = 255;\n\t\t\tcolor.g = 255;\n\t\t\tcolor.b = 255;\n\t\t}\n\n\t\treturn (\n\t\t\t<g key={structure.id}>\n\t\t\t\t<polygon\n\t\t\t\t\tclassName={StrongholdLogic.canCharge(structure) && (structure.charges === 0) ? 'structure uncharged' : 'structure'}\n\t\t\t\t\tpoints={\n\t\t\t\t\t\tpoints\n\t\t\t\t\t\t\t.map(pt => {\n\t\t\t\t\t\t\t\tconst dx = (pt.x + offsetX) / 100;\n\t\t\t\t\t\t\t\tconst dy = (pt.y + offsetY) / 100;\n\t\t\t\t\t\t\t\treturn `${structure.position.x + dx},${structure.position.y + dy}`;\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.join(' ')\n\t\t\t\t\t}\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tfill: `rgb(${color.r}, ${color.g}, ${color.b})`,\n\t\t\t\t\t\trotate: `${degrees}deg`\n\t\t\t\t\t}}\n\t\t\t\t\tonClick={e => this.onClick(e, structure)}\n\t\t\t\t>\n\t\t\t\t\t<title>{structure.name}</title>\n\t\t\t\t</polygon>\n\t\t\t</g>\n\t\t);\n\t};\n\n\trender = () => {\n\t\ttry {\n\t\t\tlet structures = this.props.stronghold;\n\t\t\tif ((this.props.mode === 'structure') && (this.props.selectedStructure !== null)) {\n\t\t\t\tconst structureID = this.props.selectedStructure.id;\n\t\t\t\tstructures = structures.filter(s => s.id === structureID);\n\t\t\t}\n\n\t\t\t// Get dimensions, adding a 1-square border\n\t\t\tconst dims = StrongholdLogic.getDimensions(structures);\n\t\t\tdims.left -= 1;\n\t\t\tdims.top -= 1;\n\t\t\tdims.right += 1;\n\t\t\tdims.bottom += 1;\n\n\t\t\tconst width = 1 + (dims.right - dims.left);\n\t\t\tconst height = 1 + (dims.bottom - dims.top);\n\n\t\t\treturn (\n\t\t\t\t<svg className='stronghold-map' viewBox={`${dims.left} ${dims.top} ${width} ${height}`} onClick={e => this.onClick(e, null)}>\n\t\t\t\t\t{structures.map(this.getStructure)}\n\t\t\t\t</svg>\n\t\t\t);\n\t\t} catch {\n\t\t\treturn <div className='stronghold-map render-error' />;\n\t\t}\n\t};\n}\n","import createReactComponent from '../createReactComponent';\nexport default createReactComponent('list', 'IconList', [\n  ['path', { d: 'M9 6l11 0', key: 'svg-0' }],\n  ['path', { d: 'M9 12l11 0', key: 'svg-1' }],\n  ['path', { d: 'M9 18l11 0', key: 'svg-2' }],\n  ['path', { d: 'M5 6l0 .01', key: 'svg-3' }],\n  ['path', { d: 'M5 12l0 .01', key: 'svg-4' }],\n  ['path', { d: 'M5 18l0 .01', key: 'svg-5' }],\n]);\n","import { Component, MouseEvent } from 'react';\nimport { IconList, IconX } from '@tabler/icons-react';\n\nimport type { LootPileModel } from '../../../models/encounter';\n\nimport { Tag, Text, TextType } from '../../controls';\nimport { LootToken } from '../encounter-map/loot-token/loot-token';\n\nimport './treasure-row-panel.scss';\n\ninterface Props {\n\tloot: LootPileModel;\n\tonDetails: (loot: LootPileModel) => void;\n\tonCancel: (loot: LootPileModel) => void;\n}\n\nexport class TreasureRowPanel extends Component<Props> {\n\tonDetails = (e: MouseEvent) => {\n\t\te.stopPropagation();\n\t\tif (this.props.onDetails) {\n\t\t\tthis.props.onDetails(this.props.loot);\n\t\t}\n\t};\n\n\tonCancel = (e: MouseEvent) => {\n\t\te.stopPropagation();\n\t\tif (this.props.onCancel) {\n\t\t\tthis.props.onCancel(this.props.loot);\n\t\t}\n\t};\n\n\trender = () => {\n\t\ttry {\n\t\t\tlet name = '';\n\t\t\tlet tags: JSX.Element | null = null;\n\t\t\tif (this.props.loot.items.length === 1) {\n\t\t\t\tconst item = this.props.loot.items[0];\n\t\t\t\tname = item.name;\n\t\t\t\tif (item.magic) {\n\t\t\t\t\ttags = (\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<Tag>{item.description}</Tag>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tname = `${this.props.loot.items.length} items`;\n\t\t\t}\n\t\t\tif (this.props.loot.money > 0) {\n\t\t\t\tif (name === '') {\n\t\t\t\t\tname = 'Money';\n\t\t\t\t} else {\n\t\t\t\t\tname += '; money';\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn (\n\t\t\t\t<div className='treasure-row-panel'>\n\t\t\t\t\t<div className='token-container'>\n\t\t\t\t\t\t<LootToken\n\t\t\t\t\t\t\tloot={this.props.loot}\n\t\t\t\t\t\t\tencounter={null}\n\t\t\t\t\t\t\tsquareSize={40}\n\t\t\t\t\t\t\tmapDimensions={{ left: 0, top: 0 }}\n\t\t\t\t\t\t\tselectable={true}\n\t\t\t\t\t\t\tselected={false}\n\t\t\t\t\t\t\tonClick={() => null}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className='name'>\n\t\t\t\t\t\t<Text type={TextType.MinorHeading}>{name}</Text>\n\t\t\t\t\t\t{tags}\n\t\t\t\t\t</div>\n\t\t\t\t\t<button className='icon-btn' onClick={e => this.onDetails(e)}>\n\t\t\t\t\t\t<IconList />\n\t\t\t\t\t</button>\n\t\t\t\t\t<button className='icon-btn' onClick={e => this.onCancel(e)}>\n\t\t\t\t\t\t<IconX />\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t);\n\t\t} catch {\n\t\t\treturn <div className='treasure-row-panel render-error' />;\n\t\t}\n\t};\n}\n","import { Component } from 'react';\n\nimport './placeholder-card.scss';\n\ninterface Props {\n\ttext: string | null;\n\tsubtext: string | null;\n\tcontent: JSX.Element | null;\n}\n\nexport class PlaceholderCard extends Component<Props> {\n\tstatic defaultProps = {\n\t\ttext: null,\n\t\tsubtext: null,\n\t\tcontent: null\n\t};\n\n\trender = () => {\n\t\t// Text only\n\t\tif (this.props.text && !this.props.subtext && !this.props.content) {\n\t\t\treturn (\n\t\t\t\t<div className='placeholder-card centered'>\n\t\t\t\t\t<div className='main-text'>{this.props.text}</div>\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\n\t\t// Subtext only\n\t\tif (!this.props.text && this.props.subtext && !this.props.content) {\n\t\t\treturn (\n\t\t\t\t<div className='placeholder-card centered'>\n\t\t\t\t\t<div className='sub-text'>{this.props.subtext}</div>\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\n\t\t// Content only\n\t\tif (!this.props.text && !this.props.subtext && this.props.content) {\n\t\t\treturn (\n\t\t\t\t<div className='placeholder-card centered'>\n\t\t\t\t\t{this.props.content}\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\n\t\treturn (\n\t\t\t<div className='placeholder-card'>\n\t\t\t\t{this.props.text ? <div className='main-text'>{this.props.text}</div> : null}\n\t\t\t\t{this.props.subtext ? <div className='sub-text'>{this.props.subtext}</div> : null}\n\t\t\t\t{this.props.content}\n\t\t\t</div>\n\t\t);\n\t};\n}\n","import { Component, MouseEvent } from 'react';\nimport { IconRefresh } from '@tabler/icons-react';\n\nimport { CardType } from '../../../enums/card-type';\n\nimport type { BackgroundModel } from '../../../models/background';\n\nimport { PlayingCard, Text, TextType } from '../../controls';\n\nimport { ActionLogic } from '../../../logic/action-logic';\nimport { FeatureLogic } from '../../../logic/feature-logic';\n\nimport { ListItemPanel } from '../../panels';\nimport { PlaceholderCard } from '../placeholder-card/placeholder-card';\n\nimport './background-card.scss';\n\ninterface Props {\n\tbackground: BackgroundModel;\n\tdisabled: boolean;\n\tonClick: ((background: BackgroundModel) => void) | null;\n}\n\ninterface State {\n\tflipped: boolean;\n}\n\nexport class BackgroundCard extends Component<Props, State> {\n\tstatic defaultProps = {\n\t\tdisabled: false,\n\t\tonClick: null\n\t};\n\n\tconstructor(props: Props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tflipped: false\n\t\t};\n\t}\n\n\tonFlip = (e: MouseEvent) => {\n\t\te.stopPropagation();\n\n\t\tthis.setState({\n\t\t\tflipped: !this.state.flipped\n\t\t});\n\t};\n\n\tonClick = (e: MouseEvent) => {\n\t\te.stopPropagation();\n\n\t\tif (this.props.onClick) {\n\t\t\tthis.props.onClick(this.props.background);\n\t\t}\n\t};\n\n\trender = () => {\n\t\tlet startingFeatures = null;\n\t\tif (this.props.background.startingFeatures.length > 0) {\n\t\t\tstartingFeatures = (\n\t\t\t\t<div>\n\t\t\t\t\t<Text type={TextType.MinorHeading}>Start With</Text>\n\t\t\t\t\t{this.props.background.startingFeatures.map(f => <ListItemPanel key={f.id} item={FeatureLogic.getFeatureDescription(f)} />)}\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\n\t\tlet features = null;\n\t\tif (this.props.background.features.length > 0) {\n\t\t\tfeatures = (\n\t\t\t\t<div>\n\t\t\t\t\t<Text type={TextType.MinorHeading}>Features</Text>\n\t\t\t\t\t{this.props.background.features.map(f => <ListItemPanel key={f.id} item={FeatureLogic.getFeatureDescription(f)} />)}\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\n\t\tlet actions = null;\n\t\tif (this.props.background.actions.length > 0) {\n\t\t\tactions = (\n\t\t\t\t<div>\n\t\t\t\t\t<Text type={TextType.MinorHeading}>Actions</Text>\n\t\t\t\t\t{this.props.background.actions.map(a => <ListItemPanel key={a.id} item={ActionLogic.getActionDescription(a)} />)}\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\n\t\tconst buttons: JSX.Element[] = [];\n\t\tbuttons.push(\n\t\t\t<button key='flip' className='icon-btn' title='Flip' onClick={this.onFlip}><IconRefresh /></button>\n\t\t);\n\n\t\treturn (\n\t\t\t<PlayingCard\n\t\t\t\ttype={CardType.Background}\n\t\t\t\tfront={\n\t\t\t\t\t<PlaceholderCard\n\t\t\t\t\t\ttext={this.props.background.name}\n\t\t\t\t\t\tsubtext={this.props.background.description}\n\t\t\t\t\t/>\n\t\t\t\t}\n\t\t\t\tback={(\n\t\t\t\t\t<div className='background-card-back'>\n\t\t\t\t\t\t{startingFeatures}\n\t\t\t\t\t\t{features}\n\t\t\t\t\t\t{actions}\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t\tfooterText='Background'\n\t\t\t\tfooterContent={buttons}\n\t\t\t\tflipped={this.state.flipped}\n\t\t\t\tdisabled={this.props.disabled}\n\t\t\t\tonClick={this.props.onClick ? this.onClick : this.onFlip}\n\t\t\t/>\n\t\t);\n\t};\n}\n","import { Component, MouseEvent } from 'react';\nimport { IconRefresh } from '@tabler/icons-react';\n\nimport { CardType } from '../../../enums/card-type';\nimport { ItemLocationType } from '../../../enums/item-location-type';\nimport { ItemProficiencyType } from '../../../enums/item-proficiency-type';\n\nimport { ActionEffects, ActionLogic } from '../../../logic/action-logic';\nimport { FeatureLogic } from '../../../logic/feature-logic';\n\nimport type { ItemModel } from '../../../models/item';\n\nimport { ListItemPanel } from '../../panels';\n\nimport { IconValue, PlayingCard, StatValue, Tag, Text, TextType } from '../../controls';\nimport { PlaceholderCard } from '../placeholder-card/placeholder-card';\n\nimport './item-card.scss';\n\ninterface Props {\n\titem: ItemModel;\n\tcount: number;\n\tdisabled: boolean;\n\tonClick: ((item: ItemModel) => void) | null;\n}\n\ninterface State {\n\tflipped: boolean;\n}\n\nexport class ItemCard extends Component<Props, State> {\n\tstatic defaultProps = {\n\t\tcount: 1,\n\t\tdisabled: false,\n\t\tonClick: null\n\t};\n\n\tconstructor(props: Props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tflipped: false\n\t\t};\n\t}\n\n\tonFlip = (e: MouseEvent) => {\n\t\te.stopPropagation();\n\n\t\tthis.setState({\n\t\t\tflipped: !this.state.flipped\n\t\t});\n\t};\n\n\tonClick = (e: MouseEvent) => {\n\t\te.stopPropagation();\n\n\t\tif (this.props.onClick) {\n\t\t\tthis.props.onClick(this.props.item);\n\t\t}\n\t};\n\n\trender = () => {\n\t\tlet location = this.props.item.location.toString();\n\t\tif (this.props.item.slots > 1) {\n\t\t\tlocation = `${this.props.item.slots} ${location}s`;\n\t\t}\n\t\tif (this.props.item.location === ItemLocationType.None) {\n\t\t\tlocation = '';\n\t\t}\n\n\t\tlet weapon = null;\n\t\tif (this.props.item.weapon) {\n\t\t\tweapon = (\n\t\t\t\t<div>\n\t\t\t\t\t<Text type={TextType.MinorHeading}>Weapon</Text>\n\t\t\t\t\t{this.props.item.weapon ?<StatValue orientation='compact' label='Damage' value={\n\t\t\t\t\t\tthis.props.item.weapon.damage.map((dmg, n) => (\n\t\t\t\t\t\t\t<IconValue key={n} type={dmg.type} value={dmg.rank} />\n\t\t\t\t\t\t))\n\t\t\t\t\t}/> : null}\n\t\t\t\t\t{this.props.item.weapon && (this.props.item.weapon.range > 1) ? <StatValue orientation='compact' label='Range' value={this.props.item.weapon.range}/> : null}\n\t\t\t\t\t{this.props.item.weapon && (this.props.item.weapon.unreliable > 0) ? <StatValue orientation='compact' label='Unreliable' value={this.props.item.weapon.unreliable}/> : null}\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\n\t\tlet armor = null;\n\t\tif (this.props.item.armor) {\n\t\t\tarmor = (\n\t\t\t\t<div>\n\t\t\t\t\t<Text type={TextType.MinorHeading}>Armor</Text>\n\t\t\t\t\t{this.props.item.armor.features.map(f => <ListItemPanel key={f.id} item={FeatureLogic.getFeatureDescription(f)} />)}\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\n\t\tlet potion = null;\n\t\tif (this.props.item.potion) {\n\t\t\tpotion = (\n\t\t\t\t<div>\n\t\t\t\t\t<Text type={TextType.MinorHeading}>Potion</Text>\n\t\t\t\t\t{this.props.item.potion.effects.map((e, n) => <ListItemPanel key={n} item={ActionEffects.getDescription(e, null, null)} />)}\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\n\t\tlet features = null;\n\t\tconst collatedFeatures = FeatureLogic.collateFeatures(this.props.item.features);\n\t\tif (collatedFeatures.length > 0) {\n\t\t\tfeatures = (\n\t\t\t\t<div>\n\t\t\t\t\t<Text type={TextType.MinorHeading}>Features</Text>\n\t\t\t\t\t{collatedFeatures.map(f => <ListItemPanel key={f.id} item={FeatureLogic.getFeatureDescription(f)} />)}\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\n\t\tlet actions = null;\n\t\tif (this.props.item.actions.length > 0) {\n\t\t\tactions = (\n\t\t\t\t<div>\n\t\t\t\t\t<Text type={TextType.MinorHeading}>Actions</Text>\n\t\t\t\t\t{this.props.item.actions.map(a => <ListItemPanel key={a.id} item={ActionLogic.getActionDescription(a)} />)}\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\n\t\tlet empty = null;\n\t\tif (!weapon && !armor && !potion && !features && !actions) {\n\t\t\tempty = (\n\t\t\t\t<div>\n\t\t\t\t\t<Text type={TextType.Small}>This item has no additional statistics.</Text>\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\n\t\tconst buttons: JSX.Element[] = [];\n\t\tbuttons.push(\n\t\t\t<button key='flip' className='icon-btn' title='Flip' onClick={this.onFlip}><IconRefresh /></button>\n\t\t);\n\n\t\treturn (\n\t\t\t<PlayingCard\n\t\t\t\ttype={this.props.item.potion ? CardType.Potion : CardType.Item}\n\t\t\t\tfront={(\n\t\t\t\t\t<PlaceholderCard\n\t\t\t\t\t\ttext={this.props.count === 1 ? this.props.item.name : `${this.props.item.name} (x${this.props.count})`}\n\t\t\t\t\t\tsubtext={this.props.item.description}\n\t\t\t\t\t\tcontent={(\n\t\t\t\t\t\t\t<div className='item-card-front'>\n\t\t\t\t\t\t\t\t<div className='tags'>\n\t\t\t\t\t\t\t\t\t{this.props.item.proficiency !== ItemProficiencyType.None ? <Tag>{this.props.item.proficiency}</Tag> : null}\n\t\t\t\t\t\t\t\t\t{location !== '' ? <Tag>{location}</Tag> : null}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t\tback={(\n\t\t\t\t\t<div className='item-card-back'>\n\t\t\t\t\t\t{weapon}\n\t\t\t\t\t\t{armor}\n\t\t\t\t\t\t{potion}\n\t\t\t\t\t\t{features}\n\t\t\t\t\t\t{actions}\n\t\t\t\t\t\t{empty}\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t\tfooterText={this.props.item.potion ? 'Potion' : 'Item'}\n\t\t\t\tfooterContent={buttons}\n\t\t\t\tflipped={this.state.flipped}\n\t\t\t\tdisabled={this.props.disabled}\n\t\t\t\tonClick={this.props.onClick ? this.onClick : this.onFlip}\n\t\t\t/>\n\t\t);\n\t};\n}\n","import { Component, MouseEvent } from 'react';\nimport { IconRefresh } from '@tabler/icons-react';\n\nimport { CardType } from '../../../enums/card-type';\nimport { StructureType } from '../../../enums/structure-type';\n\nimport type { StructureModel } from '../../../models/structure';\n\nimport { PlayingCard, Text } from '../../controls';\n\nimport { PlaceholderCard } from '../placeholder-card/placeholder-card';\n\nimport './structure-card.scss';\n\ninterface Props {\n\tstructure: StructureModel;\n\tdisabled: boolean;\n\tonClick: ((structure: StructureModel) => void) | null;\n}\n\ninterface State {\n\tflipped: boolean;\n}\n\nexport class StructureCard extends Component<Props, State> {\n\tstatic defaultProps = {\n\t\tdisabled: false,\n\t\tonClick: null\n\t};\n\n\tconstructor(props: Props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tflipped: false\n\t\t};\n\t}\n\n\tonFlip = (e: MouseEvent) => {\n\t\te.stopPropagation();\n\n\t\tthis.setState({\n\t\t\tflipped: !this.state.flipped\n\t\t});\n\t};\n\n\tonClick = (e: MouseEvent) => {\n\t\te.stopPropagation();\n\n\t\tif (this.props.onClick) {\n\t\t\tthis.props.onClick(this.props.structure);\n\t\t}\n\t};\n\n\tgetStructureDetails = () => {\n\t\tswitch (this.props.structure.type) {\n\t\t\tcase StructureType.Academy:\n\t\t\t\treturn (\n\t\t\t\t\t<Text>\n\t\t\t\t\t\t<p>This structure allows you to add bonus XP to your heroes.</p>\n\t\t\t\t\t\t<p>You gain {this.props.structure.level} XP when the structure is charged.</p>\n\t\t\t\t\t</Text>\n\t\t\t\t);\n\t\t\tcase StructureType.Barracks:\n\t\t\t\treturn (\n\t\t\t\t\t<Text>\n\t\t\t\t\t\t<p>This structure provides living space for up to {this.props.structure.level * 3} heroes.</p>\n\t\t\t\t\t</Text>\n\t\t\t\t);\n\t\t\tcase StructureType.Forge:\n\t\t\t\treturn (\n\t\t\t\t\t<Text>\n\t\t\t\t\t\t<p>When adding a new structure to your stronghold, this allows you to redraw structure cards.</p>\n\t\t\t\t\t\t<p>You gain {this.props.structure.level} redraw(s) when the structure is charged.</p>\n\t\t\t\t\t</Text>\n\t\t\t\t);\n\t\t\tcase StructureType.Hall:\n\t\t\t\treturn (\n\t\t\t\t\t<Text>\n\t\t\t\t\t\t<p>When recruiting a new hero, this structure allows you to redraw species, role, or background cards.</p>\n\t\t\t\t\t\t<p>You gain {this.props.structure.level} redraw(s) when the structure is charged.</p>\n\t\t\t\t\t</Text>\n\t\t\t\t);\n\t\t\tcase StructureType.Intelligencer:\n\t\t\t\treturn (\n\t\t\t\t\t<Text>\n\t\t\t\t\t\t<p>This structure forces monsters to begin an encounter with detrimental conditions.</p>\n\t\t\t\t\t\t<p>You gain {this.props.structure.level} conditions(s) when the structure is charged.</p>\n\t\t\t\t\t</Text>\n\t\t\t\t);\n\t\t\tcase StructureType.Observatory:\n\t\t\t\treturn (\n\t\t\t\t\t<Text>\n\t\t\t\t\t\t<p>In an encounter, this structure allows you to redraw action cards.</p>\n\t\t\t\t\t\t<p>You gain {this.props.structure.level} redraw(s) when the structure is charged.</p>\n\t\t\t\t\t</Text>\n\t\t\t\t);\n\t\t\tcase StructureType.Quartermaster:\n\t\t\t\treturn (\n\t\t\t\t\t<Text>\n\t\t\t\t\t\t<p>When recruiting a new hero, this structure allows you to redraw item cards.</p>\n\t\t\t\t\t\t<p>You gain {this.props.structure.level} redraw(s) when the structure is charged.</p>\n\t\t\t\t\t</Text>\n\t\t\t\t);\n\t\t\tcase StructureType.Temple:\n\t\t\t\treturn (\n\t\t\t\t\t<Text>\n\t\t\t\t\t\t<p>This structure allows your heroes to begin an encounter with beneficial conditions.</p>\n\t\t\t\t\t\t<p>You gain {this.props.structure.level} conditions(s) when the structure is charged.</p>\n\t\t\t\t\t</Text>\n\t\t\t\t);\n\t\t\tcase StructureType.ThievesGuild:\n\t\t\t\treturn (\n\t\t\t\t\t<Text>\n\t\t\t\t\t\t<p>This structure allows your heroes to take additional actions in an encounter.</p>\n\t\t\t\t\t\t<p>You gain {this.props.structure.level} action(s) when the structure is charged.</p>\n\t\t\t\t\t</Text>\n\t\t\t\t);\n\t\t\tcase StructureType.TrainingGround:\n\t\t\t\treturn (\n\t\t\t\t\t<Text>\n\t\t\t\t\t\t<p>When levelling-up a hero, this structure allows you to redraw feature cards.</p>\n\t\t\t\t\t\t<p>You gain {this.props.structure.level} redraw(s) when the structure is charged.</p>\n\t\t\t\t\t</Text>\n\t\t\t\t);\n\t\t\tcase StructureType.WarRoom:\n\t\t\t\treturn (\n\t\t\t\t\t<Text>\n\t\t\t\t\t\t<p>This structure allows you to add additional heroes to an encounter.</p>\n\t\t\t\t\t\t<p>You gain {this.props.structure.level} action(s) when the structure is charged.</p>\n\t\t\t\t\t</Text>\n\t\t\t\t);\n\t\t\tcase StructureType.WizardTower:\n\t\t\t\treturn (\n\t\t\t\t\t<Text>\n\t\t\t\t\t\t<p>When buying a magic item or potion, this structure allows you to redraw item cards.</p>\n\t\t\t\t\t\t<p>You gain {this.props.structure.level} redraws when the structure is charged.</p>\n\t\t\t\t\t</Text>\n\t\t\t\t);\n\t\t}\n\n\t\treturn null;\n\t};\n\n\trender = () => {\n\t\tconst buttons: JSX.Element[] = [];\n\t\tbuttons.push(\n\t\t\t<button key='flip' className='icon-btn' title='Flip' onClick={this.onFlip}><IconRefresh /></button>\n\t\t);\n\n\t\treturn (\n\t\t\t<PlayingCard\n\t\t\t\ttype={CardType.Structure}\n\t\t\t\tfront={\n\t\t\t\t\t<PlaceholderCard\n\t\t\t\t\t\ttext={this.props.structure.name}\n\t\t\t\t\t\tsubtext={this.props.structure.description}\n\t\t\t\t\t/>\n\t\t\t\t}\n\t\t\t\tback={\n\t\t\t\t\t<div className='structure-card-back'>\n\t\t\t\t\t\t{this.getStructureDetails()}\n\t\t\t\t\t</div>\n\t\t\t\t}\n\t\t\t\tfooterText='Structure'\n\t\t\t\tfooterContent={buttons}\n\t\t\t\tflipped={this.state.flipped}\n\t\t\t\tdisabled={this.props.disabled}\n\t\t\t\tonClick={this.props.onClick ? this.onClick : this.onFlip}\n\t\t\t/>\n\t\t);\n\t};\n}\n","import { Component, MouseEvent } from 'react';\n\nimport { BoonType } from '../../../enums/boon-type';\nimport { CardType } from '../../../enums/card-type';\n\nimport type { BoonModel } from '../../../models/boon';\nimport type { ItemModel } from '../../../models/item';\nimport type { StructureModel } from '../../../models/structure';\n\nimport { IconSize, IconType, IconValue, PlayingCard } from '../../controls';\nimport { ItemCard } from '../item-card/item-card';\nimport { PlaceholderCard } from '../placeholder-card/placeholder-card';\nimport { StructureCard } from '../structure-card/structure-card';\n\nimport './boon-card.scss';\n\ninterface Props {\n\tboon: BoonModel;\n\tdisabled: boolean;\n\tonClick: ((boon: BoonModel) => void) | null;\n}\n\nexport class BoonCard extends Component<Props> {\n\tstatic defaultProps = {\n\t\tdisabled: false,\n\t\tonClick: null\n\t};\n\n\tonClick = (e: MouseEvent) => {\n\t\te.stopPropagation();\n\n\t\tif (this.props.onClick) {\n\t\t\tthis.props.onClick(this.props.boon);\n\t\t}\n\t};\n\n\tonSelectItem = (item: ItemModel) => {\n\t\tif (this.props.onClick) {\n\t\t\tthis.props.onClick(this.props.boon);\n\t\t}\n\t};\n\n\tonSelectStructure = (structure: StructureModel) => {\n\t\tif (this.props.onClick) {\n\t\t\tthis.props.onClick(this.props.boon);\n\t\t}\n\t};\n\n\trender = () => {\n\t\tif (this.props.boon.type === BoonType.MagicItem) {\n\t\t\treturn (\n\t\t\t\t<ItemCard\n\t\t\t\t\titem={this.props.boon.data as ItemModel}\n\t\t\t\t\tonClick={this.props.onClick ? this.onSelectItem : null}\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\n\t\tif (this.props.boon.type === BoonType.Structure) {\n\t\t\treturn (\n\t\t\t\t<StructureCard\n\t\t\t\t\tstructure={this.props.boon.data as StructureModel}\n\t\t\t\t\tonClick={this.props.onClick ? this.onSelectStructure : null}\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\n\t\tlet desc = '';\n\t\tlet extra = null;\n\t\tswitch (this.props.boon.type) {\n\t\t\tcase BoonType.ExtraHero:\n\t\t\t\tdesc = 'Recruit an additional hero.';\n\t\t\t\tbreak;\n\t\t\tcase BoonType.ExtraXP:\n\t\t\t\tdesc = 'Choose one of your heroes to gain bonus XP.';\n\t\t\t\textra = <IconValue type={IconType.XP} value={this.props.boon.data as number} size={IconSize.Large} />;\n\t\t\t\tbreak;\n\t\t\tcase BoonType.LevelUp:\n\t\t\t\tdesc = 'Choose one of your heroes to level up.';\n\t\t\t\tbreak;\n\t\t\tcase BoonType.Money:\n\t\t\t\textra = <IconValue type={IconType.Money} value={this.props.boon.data as number} size={IconSize.Large} />;\n\t\t\t\tbreak;\n\t\t\tcase BoonType.EnchantItem:\n\t\t\t\textra = 'Enchant one of your items.';\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn (\n\t\t\t<PlayingCard\n\t\t\t\ttype={CardType.Boon}\n\t\t\t\tfront={(\n\t\t\t\t\t<PlaceholderCard\n\t\t\t\t\t\ttext={this.props.boon.type}\n\t\t\t\t\t\tsubtext={desc}\n\t\t\t\t\t\tcontent={(\n\t\t\t\t\t\t\t<div className='boon-card-front'>\n\t\t\t\t\t\t\t\t{extra ? <div className='extra'>{extra}</div> : null}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t\tfooterText='Reward'\n\t\t\t\tdisabled={this.props.disabled}\n\t\t\t\tonClick={this.props.onClick ? this.onClick : null}\n\t\t\t/>\n\t\t);\n\t};\n}\n","import { Component, MouseEvent } from 'react';\n\nimport { CardType } from '../../../enums/card-type';\n\nimport { FeatureLogic } from '../../../logic/feature-logic';\n\nimport type { FeatureModel } from '../../../models/feature';\n\nimport { PlaceholderCard } from '../placeholder-card/placeholder-card';\nimport { PlayingCard } from '../../controls';\n\nimport './feature-card.scss';\n\ninterface Props {\n\tfeature: FeatureModel;\n\tfooter: string;\n\tfooterType: CardType;\n\tdisabled: boolean;\n\tonClick: ((feature: FeatureModel) => void) | null;\n}\n\nexport class FeatureCard extends Component<Props> {\n\tstatic defaultProps = {\n\t\tdisabled: false,\n\t\tonClick: null\n\t};\n\n\tonClick = (e: MouseEvent) => {\n\t\te.stopPropagation();\n\n\t\tif (this.props.onClick) {\n\t\t\tthis.props.onClick(this.props.feature);\n\t\t}\n\t};\n\n\trender = () => {\n\t\treturn (\n\t\t\t<PlayingCard\n\t\t\t\ttype={CardType.Feature}\n\t\t\t\tfront={(\n\t\t\t\t\t<PlaceholderCard text={FeatureLogic.getFeatureTitle(this.props.feature)} subtext={FeatureLogic.getFeatureInformation(this.props.feature)} />\n\t\t\t\t)}\n\t\t\t\tfooterText={this.props.footer || 'Feature'}\n\t\t\t\tfooterType={this.props.footerType}\n\t\t\t\tdisabled={this.props.disabled}\n\t\t\t\tonClick={this.props.onClick ? this.onClick : null}\n\t\t\t/>\n\t\t);\n\t};\n}\n","import { Component, MouseEvent } from 'react';\nimport { IconId, IconRefresh, IconX } from '@tabler/icons-react';\n\nimport { CardType } from '../../../enums/card-type';\nimport { TraitType } from '../../../enums/trait-type';\n\nimport { CombatantLogic } from '../../../logic/combatant-logic';\nimport { GameLogic } from '../../../logic/game-logic';\n\nimport type { CombatantModel } from '../../../models/combatant';\n\nimport { Gauge, PlayingCard, StatValue, Tag, Text, TextType } from '../../controls';\nimport { ListItemPanel } from '../../panels';\nimport { MiniToken } from '../../panels/encounter-map/mini-token/mini-token';\nimport { PlaceholderCard } from '../placeholder-card/placeholder-card';\n\nimport './hero-card.scss';\n\ninterface Props {\n\thero: CombatantModel;\n\tdisabled: boolean;\n\tonClick: ((hero: CombatantModel) => void) | null;\n\tonCharacterSheet: ((hero: CombatantModel) => void) | null;\n\tonRetire: ((hero: CombatantModel) => void) | null;\n}\n\ninterface State {\n\tflipped: boolean;\n}\n\nexport class HeroCard extends Component<Props, State> {\n\tstatic defaultProps = {\n\t\tdisabled: false,\n\t\tonClick: null,\n\t\tonCharacterSheet: null,\n\t\tonRetire: null\n\t};\n\n\tconstructor(props: Props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tflipped: false\n\t\t};\n\t}\n\n\tonFlip = (e: MouseEvent) => {\n\t\te.stopPropagation();\n\n\t\tthis.setState({\n\t\t\tflipped: !this.state.flipped\n\t\t});\n\t};\n\n\tonClick = (e: MouseEvent) => {\n\t\te.stopPropagation();\n\n\t\tif (this.props.onClick) {\n\t\t\tthis.props.onClick(this.props.hero);\n\t\t}\n\t};\n\n\tonCharacterSheet = (e: MouseEvent) => {\n\t\te.stopPropagation();\n\n\t\tif (this.props.onCharacterSheet) {\n\t\t\tthis.props.onCharacterSheet(this.props.hero);\n\t\t}\n\t};\n\n\tonRetire = (e: MouseEvent) => {\n\t\te.stopPropagation();\n\n\t\tif (this.props.onRetire) {\n\t\t\tthis.props.onRetire(this.props.hero);\n\t\t}\n\t};\n\n\trender = () => {\n\t\tlet items = null;\n\t\tconst magicItems = this.props.hero.items.filter(i => i.magic);\n\t\tif (magicItems.length > 0) {\n\t\t\titems = (\n\t\t\t\t<div className='items'>\n\t\t\t\t\t<hr />\n\t\t\t\t\t<Text type={TextType.MinorHeading}>Magic Items</Text>\n\t\t\t\t\t{magicItems.map(i => (<ListItemPanel key={i.id} item={`${i.name} (${i.baseItem})`} />))}\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\n\t\tconst buttons: JSX.Element[] = [];\n\t\tbuttons.push(\n\t\t\t<button key='flip' className='icon-btn' title='Flip' onClick={this.onFlip}><IconRefresh /></button>\n\t\t);\n\t\tif (this.props.onCharacterSheet) {\n\t\t\tbuttons.push(\n\t\t\t\t<button key='character-sheet' className='icon-btn' title='Character Sheet' onClick={this.onCharacterSheet}><IconId /></button>\n\t\t\t);\n\t\t}\n\t\tif (this.props.onRetire) {\n\t\t\tbuttons.push(\n\t\t\t\t<button key='retire' className='icon-btn' title='Retire' onClick={this.onRetire}><IconX /></button>\n\t\t\t);\n\t\t}\n\n\t\tconst species = GameLogic.getSpecies(this.props.hero.speciesID);\n\t\tconst role = GameLogic.getRole(this.props.hero.roleID);\n\t\tconst background = GameLogic.getBackground(this.props.hero.backgroundID);\n\n\t\treturn (\n\t\t\t<PlayingCard\n\t\t\t\ttype={CardType.Hero}\n\t\t\t\tfront={(\n\t\t\t\t\t<PlaceholderCard\n\t\t\t\t\t\ttext={this.props.hero.name}\n\t\t\t\t\t\tcontent={(\n\t\t\t\t\t\t\t<div className='hero-card-front'>\n\t\t\t\t\t\t\t\t<div className='token-container'>\n\t\t\t\t\t\t\t\t\t<MiniToken\n\t\t\t\t\t\t\t\t\t\tcombatant={this.props.hero}\n\t\t\t\t\t\t\t\t\t\tencounter={null}\n\t\t\t\t\t\t\t\t\t\tsquareSize={70}\n\t\t\t\t\t\t\t\t\t\tmapDimensions={{ left: 0, top: 0 }}\n\t\t\t\t\t\t\t\t\t\tselectable={true}\n\t\t\t\t\t\t\t\t\t\tselected={false}\n\t\t\t\t\t\t\t\t\t\tonClick={() => null}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className='tags'>\n\t\t\t\t\t\t\t\t\t{species ? <Tag>{species.name}</Tag> : null}\n\t\t\t\t\t\t\t\t\t{role ? <Tag>{role.name}</Tag> : null}\n\t\t\t\t\t\t\t\t\t{background ? <Tag>{background.name}</Tag> : null}\n\t\t\t\t\t\t\t\t\t<Tag>Level {this.props.hero.level}</Tag>\n\t\t\t\t\t\t\t\t\t{this.props.hero.quirks.map((q, n) => <Tag key={n}>{q}</Tag>)}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t\tback={(\n\t\t\t\t\t<div className='hero-card-back'>\n\t\t\t\t\t\t<div className='xp'>\n\t\t\t\t\t\t\t<Gauge\n\t\t\t\t\t\t\t\tprogress={this.props.hero.xp / this.props.hero.level}\n\t\t\t\t\t\t\t\tcontent={(\n\t\t\t\t\t\t\t\t\t<div><b>{this.props.hero.xp} XP</b> / {this.props.hero.level}</div>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<hr />\n\t\t\t\t\t\t<div className='traits'>\n\t\t\t\t\t\t\t<StatValue orientation='vertical' label='End' value={CombatantLogic.getTraitRank(this.props.hero, [], TraitType.Endurance)} />\n\t\t\t\t\t\t\t<StatValue orientation='vertical' label='Res' value={CombatantLogic.getTraitRank(this.props.hero, [], TraitType.Resolve)} />\n\t\t\t\t\t\t\t<StatValue orientation='vertical' label='Spd' value={CombatantLogic.getTraitRank(this.props.hero, [], TraitType.Speed)} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{items}\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t\tfooterText='Hero'\n\t\t\t\tfooterContent={buttons}\n\t\t\t\tflipped={this.state.flipped}\n\t\t\t\tdisabled={this.props.disabled}\n\t\t\t\tonClick={this.props.onClick ? this.onClick : this.onFlip}\n\t\t\t/>\n\t\t);\n\t};\n}\n","import { Component, MouseEvent } from 'react';\nimport { IconX } from '@tabler/icons-react';\n\nimport { CardType } from '../../../enums/card-type';\n\nimport { PackLogic } from '../../../logic/pack-logic';\n\nimport type { PackModel } from '../../../models/pack';\n\nimport { PlayingCard, StatValue } from '../../controls';\n\nimport { PlaceholderCard } from '../placeholder-card/placeholder-card';\n\nimport './pack-card.scss';\n\ninterface Props {\n\tpack: PackModel;\n\tdisabled: boolean;\n\tonClick: ((pack: PackModel) => void) | null;\n\tonRemove: ((pack: PackModel) => void) | null;\n}\n\nexport class PackCard extends Component<Props> {\n\tstatic defaultProps = {\n\t\tdisabled: false,\n\t\tonClick: null,\n\t\tonRemove: null\n\t};\n\n\tonClick = (e: MouseEvent) => {\n\t\te.stopPropagation();\n\n\t\tif (this.props.onClick) {\n\t\t\tthis.props.onClick(this.props.pack);\n\t\t}\n\t};\n\n\tonRemove = (e: MouseEvent) => {\n\t\te.stopPropagation();\n\n\t\tif (this.props.onRemove) {\n\t\t\tthis.props.onRemove(this.props.pack);\n\t\t}\n\t};\n\n\trender = () => {\n\t\tconst buttons: JSX.Element[] = [];\n\t\tif (this.props.onRemove) {\n\t\t\tbuttons.push(\n\t\t\t\t<button key='retire' className='icon-btn' title='Remove' onClick={this.onRemove}><IconX /></button>\n\t\t\t);\n\t\t}\n\n\t\tlet content = null;\n\t\tif (this.props.pack.id) {\n\t\t\tcontent = (\n\t\t\t\t<div className='pack-card-front'>\n\t\t\t\t\t<StatValue label='Cards' value={PackLogic.getPackCardCount(this.props.pack.id)} />\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\n\t\treturn (\n\t\t\t<PlayingCard\n\t\t\t\ttype={CardType.Pack}\n\t\t\t\tstack={true}\n\t\t\t\tfront={\n\t\t\t\t\t<PlaceholderCard\n\t\t\t\t\t\ttext={this.props.pack.name}\n\t\t\t\t\t\tsubtext={this.props.pack.description}\n\t\t\t\t\t\tcontent={content}\n\t\t\t\t\t/>\n\t\t\t\t}\n\t\t\t\tfooterText='Pack'\n\t\t\t\tfooterContent={buttons}\n\t\t\t\tdisabled={this.props.disabled}\n\t\t\t\tonClick={this.props.onClick ? this.onClick : null}\n\t\t\t/>\n\t\t);\n\t};\n}\n","import { Component, MouseEvent } from 'react';\nimport { IconRefresh } from '@tabler/icons-react';\n\nimport { CardType } from '../../../enums/card-type';\n\nimport { CampaignMapLogic } from '../../../logic/campaign-map-logic';\n\nimport type { CampaignMapModel } from '../../../models/campaign-map';\nimport type { OptionsModel } from '../../../models/options';\nimport type { RegionModel } from '../../../models/region';\n\nimport { PlayingCard, StatValue, Tag } from '../../controls';\nimport { CampaignMapPanel } from '../../panels';\nimport { PlaceholderCard } from '../placeholder-card/placeholder-card';\n\nimport './region-card.scss';\n\ninterface Props {\n\tmap: CampaignMapModel;\n\tregion: RegionModel;\n\toptions: OptionsModel;\n\tdisabled: boolean;\n\tonClick: ((region: RegionModel) => void) | null;\n}\n\ninterface State {\n\tflipped: boolean;\n}\n\nexport class RegionCard extends Component<Props, State> {\n\tstatic defaultProps = {\n\t\tdisabled: false,\n\t\tonClick: null\n\t};\n\n\tconstructor(props: Props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tflipped: false\n\t\t};\n\t}\n\n\tonFlip = (e: MouseEvent) => {\n\t\te.stopPropagation();\n\n\t\tthis.setState({\n\t\t\tflipped: !this.state.flipped\n\t\t});\n\t};\n\n\tonClick = (e: MouseEvent) => {\n\t\te.stopPropagation();\n\n\t\tif (this.props.onClick) {\n\t\t\tthis.props.onClick(this.props.region);\n\t\t}\n\t};\n\n\trender = () => {\n\t\tconst monsters = CampaignMapLogic.getMonsters(this.props.region, this.props.options.packIDs)\n\t\t\t.map(species => species.name)\n\t\t\t.sort()\n\t\t\t.map((m, n) => <Tag key={n}>{m}</Tag>);\n\n\n\t\tconst buttons: JSX.Element[] = [];\n\t\tbuttons.push(\n\t\t\t<button key='flip' className='icon-btn' title='Flip' onClick={this.onFlip}><IconRefresh /></button>\n\t\t);\n\n\t\treturn (\n\t\t\t<PlayingCard\n\t\t\t\ttype={CardType.Region}\n\t\t\t\tfront={(\n\t\t\t\t\t<PlaceholderCard\n\t\t\t\t\t\ttext={this.props.region.name}\n\t\t\t\t\t\tcontent={(\n\t\t\t\t\t\t\t<div className='region-card-front'>\n\t\t\t\t\t\t\t\t<div className='map-container'>\n\t\t\t\t\t\t\t\t\t<CampaignMapPanel\n\t\t\t\t\t\t\t\t\t\tmap={this.props.map}\n\t\t\t\t\t\t\t\t\t\tmode='region'\n\t\t\t\t\t\t\t\t\t\tselectedRegion={this.props.region}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className='stat-container'>\n\t\t\t\t\t\t\t\t\t<StatValue\n\t\t\t\t\t\t\t\t\t\torientation='vertical'\n\t\t\t\t\t\t\t\t\t\tlabel={this.props.region.encounters.length === 1 ? 'Encounter' : 'Encounters'}\n\t\t\t\t\t\t\t\t\t\tvalue={this.props.region.encounters.length}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t\tback={(\n\t\t\t\t\t<div className='region-card-back'>\n\t\t\t\t\t\t<StatValue label='Population' value={`${this.props.region.demographics.population},000`} />\n\t\t\t\t\t\t<StatValue label='Area' value={`${this.props.region.demographics.size} sq mi`} />\n\t\t\t\t\t\t<StatValue label='Terrain' value={this.props.region.demographics.terrain} />\n\t\t\t\t\t\t<hr />\n\t\t\t\t\t\t<StatValue label='Denizens' value={monsters} />\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t\tfooterText='Region'\n\t\t\t\tfooterContent={buttons}\n\t\t\t\tflipped={this.state.flipped}\n\t\t\t\tdisabled={this.props.disabled}\n\t\t\t\tonClick={this.props.onClick ? this.onClick : this.onFlip}\n\t\t\t/>\n\t\t);\n\t};\n}\n","import { Component, MouseEvent } from 'react';\nimport { IconRefresh } from '@tabler/icons-react';\n\nimport { CardType } from '../../../enums/card-type';\n\nimport { ActionLogic } from '../../../logic/action-logic';\nimport { FeatureLogic } from '../../../logic/feature-logic';\n\nimport type { RoleModel } from '../../../models/role';\n\nimport { ListItemPanel } from '../../panels';\n\nimport { PlayingCard, Text, TextType } from '../../controls';\nimport { PlaceholderCard } from '../placeholder-card/placeholder-card';\n\nimport './role-card.scss';\n\ninterface Props {\n\trole: RoleModel;\n\tdisabled: boolean;\n\tonClick: ((role: RoleModel) => void) | null;\n}\n\ninterface State {\n\tflipped: boolean;\n}\n\nexport class RoleCard extends Component<Props, State> {\n\tstatic defaultProps = {\n\t\tdisabled: false,\n\t\tonClick: null\n\t};\n\n\tconstructor(props: Props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tflipped: false\n\t\t};\n\t}\n\n\tonFlip = (e: MouseEvent) => {\n\t\te.stopPropagation();\n\n\t\tthis.setState({\n\t\t\tflipped: !this.state.flipped\n\t\t});\n\t};\n\n\tonClick = (e: MouseEvent) => {\n\t\te.stopPropagation();\n\n\t\tif (this.props.onClick) {\n\t\t\tthis.props.onClick(this.props.role);\n\t\t}\n\t};\n\n\trender = () => {\n\t\tlet startingFeatures = null;\n\t\tif (this.props.role.startingFeatures.length > 0) {\n\t\t\tstartingFeatures = (\n\t\t\t\t<div>\n\t\t\t\t\t<Text type={TextType.MinorHeading}>Start With</Text>\n\t\t\t\t\t{this.props.role.startingFeatures.map(f => <ListItemPanel key={f.id} item={FeatureLogic.getFeatureDescription(f)} />)}\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\n\t\tlet features = null;\n\t\tif (this.props.role.features.length > 0) {\n\t\t\tfeatures = (\n\t\t\t\t<div>\n\t\t\t\t\t<Text type={TextType.MinorHeading}>Features</Text>\n\t\t\t\t\t{this.props.role.features.map(f => <ListItemPanel key={f.id} item={FeatureLogic.getFeatureDescription(f)} />)}\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\n\t\tlet actions = null;\n\t\tif (this.props.role.actions.length > 0) {\n\t\t\tactions = (\n\t\t\t\t<div>\n\t\t\t\t\t<Text type={TextType.MinorHeading}>Actions</Text>\n\t\t\t\t\t{this.props.role.actions.map(a => <ListItemPanel key={a.id} item={ActionLogic.getActionDescription(a)} />)}\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\n\t\tconst buttons: JSX.Element[] = [];\n\t\tbuttons.push(\n\t\t\t<button key='flip' className='icon-btn' title='Flip' onClick={this.onFlip}><IconRefresh /></button>\n\t\t);\n\n\t\treturn (\n\t\t\t<PlayingCard\n\t\t\t\ttype={CardType.Role}\n\t\t\t\tfront={\n\t\t\t\t\t<PlaceholderCard\n\t\t\t\t\t\ttext={this.props.role.name}\n\t\t\t\t\t\tsubtext={this.props.role.description}\n\t\t\t\t\t/>\n\t\t\t\t}\n\t\t\t\tback={(\n\t\t\t\t\t<div className='role-card-back'>\n\t\t\t\t\t\t{startingFeatures}\n\t\t\t\t\t\t{features}\n\t\t\t\t\t\t{actions}\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t\tfooterText='Role'\n\t\t\t\tfooterContent={buttons}\n\t\t\t\tflipped={this.state.flipped}\n\t\t\t\tdisabled={this.props.disabled}\n\t\t\t\tonClick={this.props.onClick ? this.onClick : this.onFlip}\n\t\t\t/>\n\t\t);\n\t};\n}\n","import { Component, MouseEvent } from 'react';\nimport { IconRefresh } from '@tabler/icons-react';\n\nimport { CardType } from '../../../enums/card-type';\nimport { CombatantType } from '../../../enums/combatant-type';\n\nimport { ActionLogic } from '../../../logic/action-logic';\nimport { FeatureLogic } from '../../../logic/feature-logic';\n\nimport type { SpeciesModel } from '../../../models/species';\n\nimport { ListItemPanel } from '../../panels';\n\nimport { PlayingCard, Tag, Text, TextType } from '../../controls';\nimport { PlaceholderCard } from '../placeholder-card/placeholder-card';\n\nimport './species-card.scss';\n\ninterface Props {\n\tspecies: SpeciesModel;\n\tdisabled: boolean;\n\tonClick: ((species: SpeciesModel) => void) | null;\n}\n\ninterface State {\n\tflipped: boolean;\n}\n\nexport class SpeciesCard extends Component<Props, State> {\n\tstatic defaultProps = {\n\t\tdisabled: false,\n\t\tonClick: null\n\t};\n\n\tconstructor(props: Props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tflipped: false\n\t\t};\n\t}\n\n\tonFlip = (e: MouseEvent) => {\n\t\te.stopPropagation();\n\n\t\tthis.setState({\n\t\t\tflipped: !this.state.flipped\n\t\t});\n\t};\n\n\tonClick = (e: MouseEvent) => {\n\t\te.stopPropagation();\n\n\t\tif (this.props.onClick) {\n\t\t\tthis.props.onClick(this.props.species);\n\t\t}\n\t};\n\n\trender = () => {\n\t\tconst tags = this.props.species.quirks.map((q, n) => <Tag key={n}>{q}</Tag>);\n\n\t\tlet size = null;\n\t\tif (this.props.species.size !== 1) {\n\t\t\tsize = (\n\t\t\t\t<div>\n\t\t\t\t\t<Text type={TextType.MinorHeading}>Size</Text>\n\t\t\t\t\t<ListItemPanel item={`${this.props.species.size}`} />\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\n\t\tlet startingFeatures = null;\n\t\tif (this.props.species.startingFeatures.length > 0) {\n\t\t\tstartingFeatures = (\n\t\t\t\t<div>\n\t\t\t\t\t<Text type={TextType.MinorHeading}>Start With</Text>\n\t\t\t\t\t{this.props.species.startingFeatures.map(f => <ListItemPanel key={f.id} item={FeatureLogic.getFeatureDescription(f)} />)}\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\n\t\tlet features = null;\n\t\tif (this.props.species.features.length > 0) {\n\t\t\tfeatures = (\n\t\t\t\t<div>\n\t\t\t\t\t<Text type={TextType.MinorHeading}>Features</Text>\n\t\t\t\t\t{this.props.species.features.map(f => <ListItemPanel key={f.id} item={FeatureLogic.getFeatureDescription(f)} />)}\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\n\t\tlet actions = null;\n\t\tif (this.props.species.actions.length > 0) {\n\t\t\tactions = (\n\t\t\t\t<div>\n\t\t\t\t\t<Text type={TextType.MinorHeading}>Actions</Text>\n\t\t\t\t\t{this.props.species.actions.map(a => <ListItemPanel key={a.id} item={ActionLogic.getActionDescription(a)} />)}\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\n\t\tconst buttons: JSX.Element[] = [];\n\t\tbuttons.push(\n\t\t\t<button key='flip' className='icon-btn' title='Flip' onClick={this.onFlip}><IconRefresh /></button>\n\t\t);\n\n\t\treturn (\n\t\t\t<PlayingCard\n\t\t\t\ttype={CardType.Species}\n\t\t\t\tfront={\n\t\t\t\t\t<PlaceholderCard\n\t\t\t\t\t\ttext={this.props.species.name}\n\t\t\t\t\t\tsubtext={this.props.species.description}\n\t\t\t\t\t\tcontent={(\n\t\t\t\t\t\t\t<div className='species-card-front'>\n\t\t\t\t\t\t\t\t{ tags.length > 0 ? <div className='tags'>{tags}</div> : null }\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t/>\n\t\t\t\t}\n\t\t\t\tback={(\n\t\t\t\t\t<div className='species-card-back'>\n\t\t\t\t\t\t{size}\n\t\t\t\t\t\t{startingFeatures}\n\t\t\t\t\t\t{features}\n\t\t\t\t\t\t{actions}\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t\tfooterText={this.props.species.type === CombatantType.Hero ? 'Species' : 'Monster'}\n\t\t\t\tfooterContent={buttons}\n\t\t\t\tflipped={this.state.flipped}\n\t\t\t\tdisabled={this.props.disabled}\n\t\t\t\tonClick={this.props.onClick ? this.onClick : this.onFlip}\n\t\t\t/>\n\t\t);\n\t};\n}\n","import createReactComponent from '../createReactComponent';\nexport default createReactComponent('circle-minus', 'IconCircleMinus', [\n  ['path', { d: 'M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0', key: 'svg-0' }],\n  ['path', { d: 'M9 12l6 0', key: 'svg-1' }],\n]);\n","import createReactComponent from '../createReactComponent';\nexport default createReactComponent('circle-plus', 'IconCirclePlus', [\n  ['path', { d: 'M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0', key: 'svg-0' }],\n  ['path', { d: 'M9 12h6', key: 'svg-1' }],\n  ['path', { d: 'M12 9v6', key: 'svg-2' }],\n]);\n","import { IconCircleMinus, IconCirclePlus } from '@tabler/icons-react';\nimport { Component } from 'react';\n\nimport { CardType } from '../../../enums/card-type';\n\nimport { IconSize, IconType, IconValue, PlayingCard, StatValue, Text, TextType } from '../../controls';\nimport { PlaceholderCard } from '..';\n\nimport './stronghold-benefit-card.scss';\n\ninterface Props {\n\tlabel: string;\n\tavailable: number;\n\tused: number;\n\tdeveloper: boolean;\n\tonRedraw: null | (() => void);\n\tonUse: null | (() => void);\n\tonChange: null | ((value: number) => void);\n}\n\nexport class StrongholdBenefitCard extends Component<Props> {\n\tstatic defaultProps = {\n\t\tused: 0,\n\t\tonRedraw: null,\n\t\tonUse: null,\n\t\tonChange: null\n\t};\n\n\tonClick = () => {\n\t\tif (this.props.onRedraw) {\n\t\t\tthis.props.onRedraw();\n\t\t}\n\n\t\tif (this.props.onUse) {\n\t\t\tthis.props.onUse();\n\t\t}\n\t};\n\n\tonNudge = (delta: number) => {\n\t\tif (this.props.onChange) {\n\t\t\tthis.props.onChange(this.props.used + delta);\n\t\t}\n\t};\n\n\trender = () => {\n\t\ttry {\n\t\t\tlet content = null;\n\n\t\t\tif (this.props.onRedraw) {\n\t\t\t\tcontent = (\n\t\t\t\t\t<IconValue\n\t\t\t\t\t\ttype={IconType.Redraw}\n\t\t\t\t\t\tvalue={this.props.available}\n\t\t\t\t\t\tsize={IconSize.Large}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif (this.props.onUse) {\n\t\t\t\tcontent = (\n\t\t\t\t\t<StatValue\n\t\t\t\t\t\torientation='vertical'\n\t\t\t\t\t\tlabel='Uses'\n\t\t\t\t\t\tvalue={this.props.available}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif (this.props.onChange) {\n\t\t\t\tcontent = (\n\t\t\t\t\t<div className='spin'>\n\t\t\t\t\t\t<StatValue orientation='vertical' label='Available' value={this.props.developer ? this.props.available : this.props.available - this.props.used} />\n\t\t\t\t\t\t<div className='spin-buttons'>\n\t\t\t\t\t\t\t<button className='icon-btn' disabled={this.props.used === 0} onClick={() => this.onNudge(-1)}>\n\t\t\t\t\t\t\t\t<IconCircleMinus />\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t<StatValue orientation='vertical' label='Used' value={this.props.used} />\n\t\t\t\t\t\t\t<button className='icon-btn' disabled={(this.props.used === this.props.available) && !this.props.developer} onClick={() => this.onNudge(1)}>\n\t\t\t\t\t\t\t\t<IconCirclePlus />\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t}\n\n\t\t\treturn (\n\t\t\t\t<PlayingCard\n\t\t\t\t\ttype={CardType.Structure}\n\t\t\t\t\tfront={\n\t\t\t\t\t\t<PlaceholderCard\n\t\t\t\t\t\t\tcontent={\n\t\t\t\t\t\t\t\t<div className={this.props.developer ? 'stronghold-benefit-card developer' : 'stronghold-benefit-card'}>\n\t\t\t\t\t\t\t\t\t<Text type={TextType.SubHeading}>{this.props.label}</Text>\n\t\t\t\t\t\t\t\t\t{content}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t/>\n\t\t\t\t\t}\n\t\t\t\t\tfooterText='Stronghold Benefit'\n\t\t\t\t\tonClick={this.onClick}\n\t\t\t\t/>\n\t\t\t);\n\t\t} catch {\n\t\t\treturn <div className='stronghold-benefit-card render-error' />;\n\t\t}\n\t};\n}\n","import { Component } from 'react';\n\nimport { ItemLocationType } from '../../../enums/item-location-type';\nimport { ItemProficiencyType } from '../../../enums/item-proficiency-type';\n\nimport { GameLogic } from '../../../logic/game-logic';\n\nimport type { GameModel } from '../../../models/game';\nimport type { ItemModel } from '../../../models/item';\nimport type { OptionsModel } from '../../../models/options';\n\nimport { Collections } from '../../../utils/collections';\n\nimport { CardList, Selector, Text, TextType } from '../../controls';\nimport { ItemCard } from '../../cards';\n\nimport './buy-equipment-modal.scss';\n\ninterface Props {\n\tgame: GameModel;\n\toptions: OptionsModel;\n\tbuyItem: (item: ItemModel) => void;\n}\n\ninterface State {\n\tproficiency: ItemProficiencyType;\n\tlocation: ItemLocationType;\n}\n\nexport class BuyEquipmentModal extends Component<Props, State> {\n\tconstructor(props: Props) {\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tproficiency: ItemProficiencyType.Any,\n\t\t\tlocation: ItemLocationType.Any\n\t\t};\n\t}\n\n\tgetItems = () => {\n\t\tconst items = GameLogic.getItemDeck(this.props.options.packIDs)\n\t\t\t.filter(i => (i.proficiency === this.state.proficiency) || (this.state.proficiency === ItemProficiencyType.Any))\n\t\t\t.filter(i => (i.location === this.state.location) || (this.state.location === ItemLocationType.Any));\n\n\t\treturn Collections.sort(items, n => n.name);\n\t};\n\n\trender = () => {\n\t\ttry {\n\t\t\tconst cards = this.getItems()\n\t\t\t\t.map(item => (\n\t\t\t\t\t<ItemCard key={item.id} item={item} onClick={this.props.buyItem} />\n\t\t\t\t));\n\n\t\t\treturn (\n\t\t\t\t<div className='buy-equipment-modal'>\n\t\t\t\t\t<Text type={TextType.Heading}>Buy Equipment</Text>\n\t\t\t\t\t<hr />\n\t\t\t\t\t<div className='card-selection-row'>\n\t\t\t\t\t\t<Text type={TextType.SubHeading}>Filter by proficiency</Text>\n\t\t\t\t\t\t<Selector\n\t\t\t\t\t\t\toptions={[\n\t\t\t\t\t\t\t\t{ id: ItemProficiencyType.Any, display: 'Any proficiency' },\n\t\t\t\t\t\t\t\t{ id: ItemProficiencyType.None, display: 'No proficiency' },\n\t\t\t\t\t\t\t\t{ id: ItemProficiencyType.MilitaryWeapons },\n\t\t\t\t\t\t\t\t{ id: ItemProficiencyType.LargeWeapons },\n\t\t\t\t\t\t\t\t{ id: ItemProficiencyType.PairedWeapons },\n\t\t\t\t\t\t\t\t{ id: ItemProficiencyType.RangedWeapons },\n\t\t\t\t\t\t\t\t{ id: ItemProficiencyType.PowderWeapons },\n\t\t\t\t\t\t\t\t{ id: ItemProficiencyType.Implements },\n\t\t\t\t\t\t\t\t{ id: ItemProficiencyType.LightArmor },\n\t\t\t\t\t\t\t\t{ id: ItemProficiencyType.HeavyArmor },\n\t\t\t\t\t\t\t\t{ id: ItemProficiencyType.Shields }\n\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\tcolumnCount={4}\n\t\t\t\t\t\t\tselectedID={this.state.proficiency}\n\t\t\t\t\t\t\tonSelect={prof => this.setState({ proficiency: prof as ItemProficiencyType })}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<Text type={TextType.SubHeading}>Filter by location</Text>\n\t\t\t\t\t\t<Selector\n\t\t\t\t\t\t\toptions={[\n\t\t\t\t\t\t\t\t{ id: ItemLocationType.Any, display: 'Any location' },\n\t\t\t\t\t\t\t\t{ id: ItemLocationType.Head },\n\t\t\t\t\t\t\t\t{ id: ItemLocationType.Neck },\n\t\t\t\t\t\t\t\t{ id: ItemLocationType.Body },\n\t\t\t\t\t\t\t\t{ id: ItemLocationType.Feet },\n\t\t\t\t\t\t\t\t{ id: ItemLocationType.Hand },\n\t\t\t\t\t\t\t\t{ id: ItemLocationType.Ring }\n\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\tselectedID={this.state.location}\n\t\t\t\t\t\t\tonSelect={loc => this.setState({ location: loc as ItemLocationType })}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<hr />\n\t\t\t\t\t\t<CardList cards={cards} />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t);\n\t\t} catch {\n\t\t\treturn <div className='buy-equipment-modal render-error' />;\n\t\t}\n\t};\n}\n","import { Component } from 'react';\n\nimport { ItemProficiencyType } from '../../../enums/item-proficiency-type';\nimport { StructureType } from '../../../enums/structure-type';\n\nimport { MagicItemGenerator } from '../../../generators/magic-item-generator';\n\nimport { CombatantLogic } from '../../../logic/combatant-logic';\nimport { StrongholdLogic } from '../../../logic/stronghold-logic';\n\nimport type { GameModel } from '../../../models/game';\nimport type { ItemModel } from '../../../models/item';\nimport type { OptionsModel } from '../../../models/options';\n\nimport { Collections } from '../../../utils/collections';\n\nimport { CardList, Text, TextType } from '../../controls';\nimport { ItemCard, StrongholdBenefitCard } from '../../cards';\n\nimport './buy-magic-item-modal.scss';\n\ninterface Props {\n\tgame: GameModel;\n\toptions: OptionsModel;\n\tbuyItem: (item: ItemModel) => void;\n\tuseCharge: (type: StructureType, count: number) => void;\n}\n\ninterface State {\n\tmagicItems: ItemModel[];\n}\n\nexport class BuyMagicItemModal extends Component<Props, State> {\n\tconstructor(props: Props) {\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tmagicItems: this.getItems()\n\t\t};\n\t}\n\n\tgetItems = () => {\n\t\tconst items: ItemModel[] = [];\n\n\t\twhile (items.length < 3) {\n\t\t\tconst item = MagicItemGenerator.generateRandomMagicItem(this.props.options.packIDs);\n\n\t\t\tlet ok = true;\n\n\t\t\t// Make sure at least one hero can use this item\n\t\t\tconst heroes = this.props.game.heroes\n\t\t\t\t.filter(h => (item.proficiency === ItemProficiencyType.None) || CombatantLogic.getProficiencies(h).includes(item.proficiency));\n\t\t\tif (heroes.length === 0) {\n\t\t\t\tok = false;\n\t\t\t}\n\n\t\t\t// Make sure we don't suggest more than one weapon\n\t\t\tif (item.weapon) {\n\t\t\t\tif (items.filter(i => i.weapon).length > 0) {\n\t\t\t\t\tok = false;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Make sure we don't suggest more than one armor\n\t\t\tif (item.armor) {\n\t\t\t\tif (items.filter(i => i.armor).length > 0) {\n\t\t\t\t\tok = false;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (ok) {\n\t\t\t\titems.push(item);\n\t\t\t}\n\t\t}\n\n\t\treturn Collections.sort(items, n => n.name);\n\t};\n\n\tredraw = () => {\n\t\tthis.setState({\n\t\t\tmagicItems: this.getItems()\n\t\t}, () => {\n\t\t\tif (!this.props.options.developer) {\n\t\t\t\tthis.props.useCharge(StructureType.WizardTower, 1);\n\t\t\t}\n\t\t});\n\t};\n\n\trender = () => {\n\t\ttry {\n\t\t\tconst cards = this.state.magicItems.map(item => (\n\t\t\t\t<ItemCard key={item.id} item={item} onClick={this.props.buyItem} />\n\t\t\t));\n\n\t\t\tconst redraws = StrongholdLogic.getStructureCharges(this.props.game, StructureType.WizardTower);\n\t\t\tif ((redraws > 0) || this.props.options.developer) {\n\t\t\t\tcards.push(\n\t\t\t\t\t<StrongholdBenefitCard\n\t\t\t\t\t\tkey='redraw'\n\t\t\t\t\t\tlabel='Redraw'\n\t\t\t\t\t\tavailable={redraws}\n\t\t\t\t\t\tdeveloper={this.props.options.developer}\n\t\t\t\t\t\tonRedraw={this.redraw}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t}\n\n\t\t\treturn (\n\t\t\t\t<div className='buy-magic-item-modal'>\n\t\t\t\t\t<Text type={TextType.Heading}>Choose a Magic Item</Text>\n\t\t\t\t\t<hr />\n\t\t\t\t\t<Text type={TextType.Information}>\n\t\t\t\t\t\t<p>Three magic items have been drawn for you. Choose one card to buy that item.</p>\n\t\t\t\t\t</Text>\n\t\t\t\t\t<div className='card-selection-row'>\n\t\t\t\t\t\t<CardList mode='row' cards={cards} />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t);\n\t\t} catch {\n\t\t\treturn <div className='buy-magic-item-modal render-error' />;\n\t\t}\n\t};\n}\n","import { Component } from 'react';\n\nimport { StructureType } from '../../../enums/structure-type';\n\nimport { GameLogic } from '../../../logic/game-logic';\nimport { StrongholdLogic } from '../../../logic/stronghold-logic';\n\nimport type { GameModel } from '../../../models/game';\nimport type { ItemModel } from '../../../models/item';\nimport type { OptionsModel } from '../../../models/options';\n\nimport { Collections } from '../../../utils/collections';\nimport { Utils } from '../../../utils/utils';\n\nimport { CardList, Text, TextType } from '../../controls';\nimport { ItemCard, StrongholdBenefitCard } from '../../cards';\n\nimport './buy-potion-modal.scss';\n\ninterface Props {\n\tgame: GameModel;\n\toptions: OptionsModel;\n\tbuyItem: (item: ItemModel) => void;\n\tuseCharge: (type: StructureType, count: number) => void;\n}\n\ninterface State {\n\tpotions: ItemModel[];\n}\n\nexport class BuyPotionModal extends Component<Props, State> {\n\tconstructor(props: Props) {\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tpotions: this.getItems()\n\t\t};\n\t}\n\n\tgetItems = () => {\n\t\tconst items: ItemModel[] = [];\n\n\t\twhile (items.length < 3) {\n\t\t\tconst potions = GameLogic.getPotionDeck(this.props.options.packIDs);\n\t\t\tconst item = Collections.draw(potions);\n\t\t\tif (!items.map(i => i.name).includes(item.name)) {\n\t\t\t\titem.id = Utils.guid();\n\t\t\t\titems.push(item);\n\t\t\t}\n\t\t}\n\n\t\treturn Collections.sort(items, n => n.name);\n\t};\n\n\tredraw = () => {\n\t\tthis.setState({\n\t\t\tpotions: this.getItems()\n\t\t}, () => {\n\t\t\tif (!this.props.options.developer) {\n\t\t\t\tthis.props.useCharge(StructureType.WizardTower, 1);\n\t\t\t}\n\t\t});\n\t};\n\n\trender = () => {\n\t\ttry {\n\t\t\tconst cards = this.state.potions.map(item => (\n\t\t\t\t<ItemCard key={item.id} item={item} onClick={this.props.buyItem} />\n\t\t\t));\n\n\t\t\tconst redraws = StrongholdLogic.getStructureCharges(this.props.game, StructureType.WizardTower);\n\t\t\tif ((redraws > 0) || this.props.options.developer) {\n\t\t\t\tcards.push(\n\t\t\t\t\t<StrongholdBenefitCard\n\t\t\t\t\t\tkey='redraw'\n\t\t\t\t\t\tlabel='Redraw'\n\t\t\t\t\t\tavailable={redraws}\n\t\t\t\t\t\tdeveloper={this.props.options.developer}\n\t\t\t\t\t\tonRedraw={this.redraw}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t}\n\n\t\t\treturn (\n\t\t\t\t<div className='buy-potion-modal'>\n\t\t\t\t\t<Text type={TextType.Heading}>Choose a Potion</Text>\n\t\t\t\t\t<hr />\n\t\t\t\t\t<Text type={TextType.Information}>\n\t\t\t\t\t\t<p>Three potion cards have been drawn for you. Choose one card to buy that potion.</p>\n\t\t\t\t\t</Text>\n\t\t\t\t\t<div className='card-selection-row'>\n\t\t\t\t\t\t<CardList mode='row' cards={cards} />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t);\n\t\t} catch {\n\t\t\treturn <div className='buy-potion-modal render-error' />;\n\t\t}\n\t};\n}\n","import { Component } from 'react';\n\nimport { CombatantType } from '../../../../enums/combatant-type';\nimport { ItemLocationType } from '../../../../enums/item-location-type';\n\nimport { CombatantLogic } from '../../../../logic/combatant-logic';\nimport { EncounterMapLogic } from '../../../../logic/encounter-map-logic';\n\nimport type { CombatantModel } from '../../../../models/combatant';\nimport type { GameModel } from '../../../../models/game';\nimport type { ItemModel } from '../../../../models/item';\n\nimport { Collections } from '../../../../utils/collections';\n\nimport { Box, CardList, IconSize, IconType, IconValue, PlayingCard, Text, TextType } from '../../../controls';\nimport { ItemCard, PlaceholderCard } from '../../../cards';\n\nimport './items.scss';\n\ninterface Props {\n\tcombatant: CombatantModel;\n\tgame: GameModel;\n\tequipItem: (item: ItemModel) => void;\n\tunequipItem: (item: ItemModel) => void;\n\tpickUpItem: (item: ItemModel) => void;\n\tdropItem: (item: ItemModel) => void;\n}\n\nexport class Items extends Component<Props> {\n\tgetLocationSection = (location: ItemLocationType) => {\n\t\tlet className = 'location-section';\n\t\tlet label = location.toString();\n\t\tswitch (location) {\n\t\t\tcase ItemLocationType.Hand:\n\t\t\tcase ItemLocationType.Ring:\n\t\t\t\tclassName += ' double';\n\t\t\t\tlabel += 's';\n\t\t}\n\n\t\tconst cards = this.props.combatant.items\n\t\t\t.filter(item => location === item.location)\n\t\t\t.map(item => {\n\t\t\t\tlet unequip: JSX.Element | string = 'Carry';\n\t\t\t\tif (this.props.game.encounter && (this.props.combatant.faction === CombatantType.Hero)) {\n\t\t\t\t\tunequip = (\n\t\t\t\t\t\t<div>Carry<br /><IconValue type={IconType.Movement} value={1} size={IconSize.Button} /></div>\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tlet options: JSX.Element | null = (\n\t\t\t\t\t<div className='item-options'>\n\t\t\t\t\t\t<button disabled={this.props.combatant.carried.length >= CombatantLogic.CARRY_CAPACITY} onClick={() => this.props.unequipItem(item)}>\n\t\t\t\t\t\t\t{unequip}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<button onClick={() => this.props.dropItem(item)}>\n\t\t\t\t\t\t\tDrop\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t\tif (this.props.combatant.faction !== CombatantType.Hero) {\n\t\t\t\t\toptions = null;\n\t\t\t\t}\n\t\t\t\tif (!!this.props.game.encounter && !this.props.combatant.combat.current) {\n\t\t\t\t\toptions = null;\n\t\t\t\t}\n\n\t\t\t\treturn (\n\t\t\t\t\t<div key={item.id} className='item'>\n\t\t\t\t\t\t<ItemCard item={item} />\n\t\t\t\t\t\t{options}\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t});\n\n\t\tif (cards.length === 0) {\n\t\t\tcards.push(\n\t\t\t\t<div key='empty' className='item'>\n\t\t\t\t\t<PlayingCard front={<PlaceholderCard subtext='No item' />} />\n\t\t\t\t\t<div className='item-options' />\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\n\t\treturn (\n\t\t\t<div className={className}>\n\t\t\t\t<Box label={label}>\n\t\t\t\t\t<div className='cards'>\n\t\t\t\t\t\t{cards}\n\t\t\t\t\t</div>\n\t\t\t\t</Box>\n\t\t\t</div>\n\t\t);\n\t};\n\n\tgetCarriedItemSection = () => {\n\t\tconst cards = this.props.combatant.carried\n\t\t\t.sort((a, b) => a.name.localeCompare(b.name))\n\t\t\t.map(item => {\n\t\t\t\tlet equip: JSX.Element | string = 'Equip';\n\t\t\t\tif (this.props.game.encounter && (this.props.combatant.faction === CombatantType.Hero)) {\n\t\t\t\t\tequip = (\n\t\t\t\t\t\t<div>Equip<br /><IconValue type={IconType.Movement} value={1} size={IconSize.Button} /></div>\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tlet options: JSX.Element | null = (\n\t\t\t\t\t<div className='item-options'>\n\t\t\t\t\t\t<button disabled={!CombatantLogic.canEquip(this.props.combatant, item)} onClick={() => this.props.equipItem(item)}>\n\t\t\t\t\t\t\t{equip}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<button onClick={() => this.props.dropItem(item)}>\n\t\t\t\t\t\t\tDrop\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t\tif (this.props.combatant.faction !== CombatantType.Hero) {\n\t\t\t\t\toptions = null;\n\t\t\t\t}\n\t\t\t\tif (!!this.props.game.encounter && !this.props.combatant.combat.current) {\n\t\t\t\t\toptions = null;\n\t\t\t\t}\n\n\t\t\t\treturn (\n\t\t\t\t\t<div key={item.id} className='item'>\n\t\t\t\t\t\t<ItemCard item={item} />\n\t\t\t\t\t\t{options}\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t});\n\n\t\tif (this.props.combatant.carried.length === 0) {\n\t\t\tcards.push(\n\t\t\t\t<div key='empty' className='item'>\n\t\t\t\t\t<PlayingCard front={<PlaceholderCard subtext='No Item' />} />\n\t\t\t\t\t<div className='item-options' />\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\n\t\treturn (\n\t\t\t<CardList cards={cards} />\n\t\t);\n\t};\n\n\tgetPartyItemSection = () => {\n\t\tif (this.props.game.encounter !== null) {\n\t\t\treturn null;\n\t\t}\n\n\t\tif (this.props.combatant.faction !== CombatantType.Hero) {\n\t\t\treturn null;\n\t\t}\n\n\t\tif (this.props.game.items.length === 0) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst cards = Collections.distinct(this.props.game.items, i => i.name)\n\t\t\t.sort((a, b) => a.name.localeCompare(b.name))\n\t\t\t.map(item => {\n\t\t\t\tconst count = this.props.game.items.filter(i => i.name === item.name).length;\n\n\t\t\t\tconst options = (\n\t\t\t\t\t<div className='item-options'>\n\t\t\t\t\t\t<button disabled={!CombatantLogic.canEquip(this.props.combatant, item)} onClick={() => this.props.equipItem(item)}>\n\t\t\t\t\t\t\tEquip\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<button disabled={this.props.combatant.carried.length >= CombatantLogic.CARRY_CAPACITY} onClick={() => this.props.pickUpItem(item)}>\n\t\t\t\t\t\t\tPick Up\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t);\n\n\t\t\t\treturn (\n\t\t\t\t\t<div key={item.id} className='item'>\n\t\t\t\t\t\t<ItemCard item={item} count={count} />\n\t\t\t\t\t\t{options}\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t});\n\n\t\treturn (\n\t\t\t<CardList cards={cards} />\n\t\t);\n\t};\n\n\tgetNearbyItemSection = () => {\n\t\tif (this.props.game.encounter === null) {\n\t\t\treturn null;\n\t\t}\n\n\t\tif (!this.props.combatant.combat.current) {\n\t\t\treturn null;\n\t\t}\n\n\t\tif (this.props.combatant.faction !== CombatantType.Hero) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst adj = EncounterMapLogic.getAdjacentSquares(this.props.game.encounter.mapSquares, [ this.props.combatant.combat.position ]);\n\t\tconst piles = this.props.game.encounter.loot.filter(lp => adj.find(sq => (sq.x === lp.position.x) && (sq.y === lp.position.y)));\n\t\tconst items = Collections.sort(Collections.distinct(piles.flatMap(pile => pile.items), i => i.name), i => i.name);\n\n\t\tif (items.length === 0) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst cards = items\n\t\t\t.map(item => {\n\t\t\t\tconst options = (\n\t\t\t\t\t<div className='item-options'>\n\t\t\t\t\t\t<button disabled={this.props.combatant.carried.length >= CombatantLogic.CARRY_CAPACITY} onClick={() => this.props.pickUpItem(item)}>\n\t\t\t\t\t\t\t<div>Pick Up<br /><IconValue type={IconType.Movement} value={1} size={IconSize.Button} /></div>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t);\n\n\t\t\t\treturn (\n\t\t\t\t\t<div key={item.id} className='item'>\n\t\t\t\t\t\t<ItemCard item={item} />\n\t\t\t\t\t\t{options}\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t});\n\n\t\treturn (\n\t\t\t<CardList cards={cards} />\n\t\t);\n\t};\n\n\trender = () => {\n\t\ttry {\n\t\t\tconst carried = this.getCarriedItemSection();\n\t\t\tconst party = this.getPartyItemSection();\n\t\t\tconst nearby = this.getNearbyItemSection();\n\n\t\t\treturn (\n\t\t\t\t<div className='items'>\n\t\t\t\t\t<Text type={TextType.SubHeading}>Equipped Items</Text>\n\t\t\t\t\t<div className='equipped'>\n\t\t\t\t\t\t<div className='grid-cell'>\n\t\t\t\t\t\t\t{this.getLocationSection(ItemLocationType.Hand)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className='grid-cell'>\n\t\t\t\t\t\t\t{this.getLocationSection(ItemLocationType.Body)}\n\t\t\t\t\t\t\t{this.getLocationSection(ItemLocationType.Feet)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className='grid-cell'>\n\t\t\t\t\t\t\t{this.getLocationSection(ItemLocationType.Head)}\n\t\t\t\t\t\t\t{this.getLocationSection(ItemLocationType.Neck)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className='grid-cell'>\n\t\t\t\t\t\t\t{this.getLocationSection(ItemLocationType.Ring)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<hr />\n\t\t\t\t\t<Text type={TextType.SubHeading}>Carried Items ({this.props.combatant.carried.length} / {CombatantLogic.CARRY_CAPACITY})</Text>\n\t\t\t\t\t{carried}\n\t\t\t\t\t<hr />\n\t\t\t\t\t{party !== null ? <Text type={TextType.SubHeading}>Party Items</Text> : null}\n\t\t\t\t\t{nearby !== null ? <Text type={TextType.SubHeading}>Nearby Items</Text> : null}\n\t\t\t\t\t{party}\n\t\t\t\t\t{nearby}\n\t\t\t\t</div>\n\t\t\t);\n\t\t} catch {\n\t\t\treturn <div className='items render-error' />;\n\t\t}\n\t};\n}\n","import { Component } from 'react';\n\nimport { DamageCategoryType } from '../../../../../enums/damage-category-type';\nimport { DamageType } from '../../../../../enums/damage-type';\nimport { FeatureType } from '../../../../../enums/feature-type';\nimport { ItemProficiencyType } from '../../../../../enums/item-proficiency-type';\nimport { SkillCategoryType } from '../../../../../enums/skill-category-type';\nimport { SkillType } from '../../../../../enums/skill-type';\nimport { TraitType } from '../../../../../enums/trait-type';\n\nimport { CombatantLogic } from '../../../../../logic/combatant-logic';\n\nimport type { CombatantModel } from '../../../../../models/combatant';\nimport type { FeatureModel } from '../../../../../models/feature';\n\nimport { IconValue, Selector } from '../../../../controls';\n\nimport './choice.scss';\n\ninterface Props {\n\tfeature: FeatureModel;\n\thero: CombatantModel;\n\tonChange: (feature: FeatureModel) => void;\n}\n\ninterface State {\n\tfeature: FeatureModel;\n}\n\nexport class ChoicePanel extends Component<Props, State> {\n\tconstructor(props: Props) {\n\t\tsuper(props);\n\n\t\tconst feature = JSON.parse(JSON.stringify(props.feature)) as FeatureModel;\n\t\tthis.state = {\n\t\t\tfeature: feature\n\t\t};\n\t}\n\n\tselectTrait = (trait: TraitType) => {\n\t\tconst feature = this.state.feature;\n\t\tfeature.trait = trait;\n\t\tthis.setState({\n\t\t\tfeature: feature\n\t\t}, () => {\n\t\t\tthis.props.onChange(this.state.feature);\n\t\t});\n\t};\n\n\tselectSkill = (skill: SkillType) => {\n\t\tconst feature = this.state.feature;\n\t\tfeature.skill = skill;\n\t\tthis.setState({\n\t\t\tfeature: feature\n\t\t}, () => {\n\t\t\tthis.props.onChange(this.state.feature);\n\t\t});\n\t};\n\n\tselectSkillCategory = (category: SkillCategoryType) => {\n\t\tconst feature = this.state.feature;\n\t\tfeature.skillCategory = category;\n\t\tthis.setState({\n\t\t\tfeature: feature\n\t\t}, () => {\n\t\t\tthis.props.onChange(this.state.feature);\n\t\t});\n\t};\n\n\tselectProficiency = (proficiency: ItemProficiencyType) => {\n\t\tconst feature = this.state.feature;\n\t\tfeature.proficiency = proficiency;\n\t\tthis.setState({\n\t\t\tfeature: feature\n\t\t}, () => {\n\t\t\tthis.props.onChange(this.state.feature);\n\t\t});\n\t};\n\n\tselectDamage = (damage: DamageType) => {\n\t\tconst feature = this.state.feature;\n\t\tfeature.damage = damage;\n\t\tthis.setState({\n\t\t\tfeature: feature\n\t\t}, () => {\n\t\t\tthis.props.onChange(this.state.feature);\n\t\t});\n\t};\n\n\tselectDamageCategoryType = (category: DamageCategoryType) => {\n\t\tconst feature = this.state.feature;\n\t\tfeature.damageCategory = category;\n\t\tthis.setState({\n\t\t\tfeature: feature\n\t\t}, () => {\n\t\t\tthis.props.onChange(this.state.feature);\n\t\t});\n\t};\n\n\trender = () => {\n\t\tlet choice = null;\n\t\tswitch (this.state.feature.type) {\n\t\t\tcase FeatureType.Trait:\n\t\t\t\tchoice = (\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<Selector\n\t\t\t\t\t\t\toptions={[\n\t\t\t\t\t\t\t\t{ id: TraitType.Endurance },\n\t\t\t\t\t\t\t\t{ id: TraitType.Resolve },\n\t\t\t\t\t\t\t\t{ id: TraitType.Speed }\n\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\tselectedID={this.state.feature.trait}\n\t\t\t\t\t\t\tonSelect={id => this.selectTrait(id as TraitType)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t\tcase FeatureType.Skill:\n\t\t\t\tchoice = (\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<Selector\n\t\t\t\t\t\t\toptions={[\n\t\t\t\t\t\t\t\t{ id: SkillType.Brawl },\n\t\t\t\t\t\t\t\t{ id: SkillType.Perception },\n\t\t\t\t\t\t\t\t{ id: SkillType.Presence },\n\t\t\t\t\t\t\t\t{ id: SkillType.Reactions },\n\t\t\t\t\t\t\t\t{ id: SkillType.Spellcasting },\n\t\t\t\t\t\t\t\t{ id: SkillType.Stealth },\n\t\t\t\t\t\t\t\t{ id: SkillType.Weapon }\n\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\tcolumnCount={4}\n\t\t\t\t\t\t\tselectedID={this.state.feature.skill}\n\t\t\t\t\t\t\tonSelect={id => this.selectSkill(id as SkillType)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t\tcase FeatureType.SkillCategory:\n\t\t\t\tchoice = (\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<Selector\n\t\t\t\t\t\t\toptions={[\n\t\t\t\t\t\t\t\t{ id: SkillCategoryType.Physical },\n\t\t\t\t\t\t\t\t{ id: SkillCategoryType.Mental }\n\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\tselectedID={this.state.feature.skillCategory}\n\t\t\t\t\t\t\tonSelect={id => this.selectSkillCategory(id as SkillCategoryType)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t\tcase FeatureType.Proficiency: {\n\t\t\t\tconst got = CombatantLogic.getProficiencies(this.props.hero);\n\t\t\t\tchoice = (\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<Selector\n\t\t\t\t\t\t\toptions={[\n\t\t\t\t\t\t\t\t{ id: ItemProficiencyType.MilitaryWeapons },\n\t\t\t\t\t\t\t\t{ id: ItemProficiencyType.LargeWeapons },\n\t\t\t\t\t\t\t\t{ id: ItemProficiencyType.PairedWeapons },\n\t\t\t\t\t\t\t\t{ id: ItemProficiencyType.RangedWeapons },\n\t\t\t\t\t\t\t\t{ id: ItemProficiencyType.PowderWeapons },\n\t\t\t\t\t\t\t\t{ id: ItemProficiencyType.Implements },\n\t\t\t\t\t\t\t\t{ id: ItemProficiencyType.LightArmor },\n\t\t\t\t\t\t\t\t{ id: ItemProficiencyType.HeavyArmor },\n\t\t\t\t\t\t\t\t{ id: ItemProficiencyType.Shields }\n\t\t\t\t\t\t\t].filter(o => !got.includes(o.id))}\n\t\t\t\t\t\t\tcolumnCount={5}\n\t\t\t\t\t\t\tselectedID={this.state.feature.proficiency}\n\t\t\t\t\t\t\tonSelect={id => this.selectProficiency(id as ItemProficiencyType)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase FeatureType.DamageBonus:\n\t\t\tcase FeatureType.DamageResist:\n\t\t\t\tchoice = (\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<Selector\n\t\t\t\t\t\t\toptions={[\n\t\t\t\t\t\t\t\t{ id: DamageType.Acid, display: <IconValue type={DamageType.Acid} value='Acid' /> },\n\t\t\t\t\t\t\t\t{ id: DamageType.Edged, display: <IconValue type={DamageType.Edged} value='Edged' /> },\n\t\t\t\t\t\t\t\t{ id: DamageType.Impact, display: <IconValue type={DamageType.Impact} value='Impact' /> },\n\t\t\t\t\t\t\t\t{ id: DamageType.Piercing, display: <IconValue type={DamageType.Piercing} value='Piercing' /> },\n\t\t\t\t\t\t\t\t{ id: DamageType.Cold, display: <IconValue type={DamageType.Cold} value='Cold' /> },\n\t\t\t\t\t\t\t\t{ id: DamageType.Electricity, display: <IconValue type={DamageType.Electricity} value='Electricity' /> },\n\t\t\t\t\t\t\t\t{ id: DamageType.Fire, display: <IconValue type={DamageType.Fire} value='Fire' /> },\n\t\t\t\t\t\t\t\t{ id: DamageType.Light, display: <IconValue type={DamageType.Light} value='Light' /> },\n\t\t\t\t\t\t\t\t{ id: DamageType.Sonic, display: <IconValue type={DamageType.Sonic} value='Sonic' /> },\n\t\t\t\t\t\t\t\t{ id: DamageType.Decay, display: <IconValue type={DamageType.Decay} value='Decay' /> },\n\t\t\t\t\t\t\t\t{ id: DamageType.Poison, display: <IconValue type={DamageType.Poison} value='Poison' /> },\n\t\t\t\t\t\t\t\t{ id: DamageType.Psychic, display: <IconValue type={DamageType.Psychic} value='Psychic' /> }\n\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\tcolumnCount={6}\n\t\t\t\t\t\t\tselectedID={this.state.feature.damage}\n\t\t\t\t\t\t\tonSelect={id => this.selectDamage(id as DamageType)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t\tcase FeatureType.DamageCategoryBonus:\n\t\t\tcase FeatureType.DamageCategoryResist:\n\t\t\t\tchoice = (\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<Selector\n\t\t\t\t\t\t\toptions={[\n\t\t\t\t\t\t\t\t{ id: DamageCategoryType.Physical },\n\t\t\t\t\t\t\t\t{ id: DamageCategoryType.Energy },\n\t\t\t\t\t\t\t\t{ id: DamageCategoryType.Corruption }\n\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\tselectedID={this.state.feature.damageCategory}\n\t\t\t\t\t\t\tonSelect={id => this.selectDamageCategoryType(id as DamageCategoryType)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn (\n\t\t\t<div className='choice-page'>\n\t\t\t\t{choice}\n\t\t\t</div>\n\t\t);\n\t};\n}\n","import { Component } from 'react';\n\nimport { BaseData } from '../../../../data/base-data';\n\nimport { FeatureType } from '../../../../enums/feature-type';\nimport { StructureType } from '../../../../enums/structure-type';\n\nimport { CombatantLogic } from '../../../../logic/combatant-logic';\nimport { FeatureLogic } from '../../../../logic/feature-logic';\nimport { StrongholdLogic } from '../../../../logic/stronghold-logic';\n\nimport type { CombatantModel } from '../../../../models/combatant';\nimport type { FeatureModel } from '../../../../models/feature';\nimport type { GameModel } from '../../../../models/game';\n\nimport { Collections } from '../../../../utils/collections';\n\nimport { FeatureCard, StrongholdBenefitCard } from '../../../cards';\nimport { ChoicePanel } from './choice/choice';\n\nimport './level-up.scss';\n\ninterface Props {\n\tcombatant: CombatantModel;\n\tgame: GameModel;\n\tdeveloper: boolean;\n\tuseCharge: (type: StructureType, count: number) => void;\n\tlevelUp: (feature: FeatureModel) => void;\n}\n\ninterface State {\n\tfeatures: FeatureModel[];\n\tselectedFeature: FeatureModel | null;\n}\n\nexport class LevelUp extends Component<Props, State> {\n\tconstructor(props: Props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tfeatures: this.drawFeatures(props.combatant),\n\t\t\tselectedFeature: null\n\t\t};\n\t}\n\n\tdrawFeatures = (combatant: CombatantModel) => {\n\t\tlet features: FeatureModel[] = [];\n\t\tfeatures.push(...CombatantLogic.getFeatureDeck(combatant));\n\t\tfeatures.push(...BaseData.getBaseFeatures());\n\n\t\tfeatures = features.filter(feature => {\n\t\t\t// Make sure we can select this feature\n\t\t\tif (feature.type === FeatureType.Proficiency) {\n\t\t\t\tconst profs = CombatantLogic.getProficiencies(combatant);\n\t\t\t\tif (profs.length >= 9) {\n\t\t\t\t\t// We already have all proficiencies\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tif (profs.includes(feature.proficiency)) {\n\t\t\t\t\t// We already have this proficiency\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn true;\n\t\t});\n\n\t\treturn Collections.shuffle(features).splice(0, 3);\n\t};\n\n\tsetFeatures = () => {\n\t\tthis.setState({\n\t\t\tfeatures: this.drawFeatures(this.props.combatant),\n\t\t\tselectedFeature: null\n\t\t}, () => {\n\t\t\tif (!this.props.developer) {\n\t\t\t\tthis.props.useCharge(StructureType.TrainingGround, 1);\n\t\t\t}\n\t\t});\n\t};\n\n\tsetSelectedFeature = (feature: FeatureModel) => {\n\t\tthis.setState({\n\t\t\tselectedFeature: feature\n\t\t}, () => {\n\t\t\tif (!FeatureLogic.hasChoice(this.state.selectedFeature as FeatureModel)) {\n\t\t\t\t// We can just select this\n\t\t\t\tthis.setState({\n\t\t\t\t\tfeatures: this.drawFeatures(this.props.combatant),\n\t\t\t\t\tselectedFeature: null\n\t\t\t\t}, () => {\n\t\t\t\t\tthis.props.levelUp(feature);\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t};\n\n\trender = () => {\n\t\ttry {\n\t\t\tif (this.state.selectedFeature) {\n\t\t\t\treturn (\n\t\t\t\t\t<div className='level-up selection-made'>\n\t\t\t\t\t\t<div className='selected-feature'>\n\t\t\t\t\t\t\t<FeatureCard feature={this.state.selectedFeature}\n\t\t\t\t\t\t\t\tfooter={CombatantLogic.getFeatureSource(this.props.combatant, this.state.selectedFeature.id) || 'Feature'}\n\t\t\t\t\t\t\t\tfooterType={CombatantLogic.getFeatureSourceType(this.props.combatant, this.state.selectedFeature.id)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className='level-up-additional'>\n\t\t\t\t\t\t\t<ChoicePanel feature={this.state.selectedFeature} hero={this.props.combatant} onChange={this.setSelectedFeature} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tconst featureCards = this.state.features.map(feature => {\n\t\t\t\treturn (\n\t\t\t\t\t<FeatureCard\n\t\t\t\t\t\tkey={feature.id}\n\t\t\t\t\t\tfeature={feature}\n\t\t\t\t\t\tfooter={CombatantLogic.getFeatureSource(this.props.combatant, feature.id) || 'Feature'}\n\t\t\t\t\t\tfooterType={CombatantLogic.getFeatureSourceType(this.props.combatant, feature.id)}\n\t\t\t\t\t\tonClick={this.setSelectedFeature}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t});\n\n\t\t\tconst redraws = StrongholdLogic.getStructureCharges(this.props.game, StructureType.TrainingGround);\n\t\t\tif ((redraws > 0) || this.props.developer) {\n\t\t\t\tfeatureCards.push(\n\t\t\t\t\t<div key='separator' className='separator' />\n\t\t\t\t);\n\t\t\t\tfeatureCards.push(\n\t\t\t\t\t<StrongholdBenefitCard\n\t\t\t\t\t\tkey='redraw'\n\t\t\t\t\t\tlabel='Redraw'\n\t\t\t\t\t\tavailable={redraws}\n\t\t\t\t\t\tdeveloper={this.props.developer}\n\t\t\t\t\t\tonRedraw={this.setFeatures}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t}\n\n\t\t\treturn (\n\t\t\t\t<div className='level-up selecting'>\n\t\t\t\t\t{featureCards}\n\t\t\t\t</div>\n\t\t\t);\n\t\t} catch {\n\t\t\treturn <div className='level-up render-error' />;\n\t\t}\n\t};\n}\n","import { Component } from 'react';\n\nimport { DamageType } from '../../../../../enums/damage-type';\n\nimport { Box, StatValue, Text, TextType } from '../../../../controls';\n\nimport { Collections } from '../../../../../utils/collections';\n\nimport './damage-panel.scss';\n\ninterface Props {\n\tlabel: string;\n\tgetValue: (type: DamageType) => number;\n}\n\nexport class DamagePanel extends Component<Props> {\n\trender = () => {\n\t\tconst types = [\n\t\t\tDamageType.Acid,\n\t\t\tDamageType.Cold,\n\t\t\tDamageType.Decay,\n\t\t\tDamageType.Edged,\n\t\t\tDamageType.Electricity,\n\t\t\tDamageType.Fire,\n\t\t\tDamageType.Impact,\n\t\t\tDamageType.Light,\n\t\t\tDamageType.Piercing,\n\t\t\tDamageType.Poison,\n\t\t\tDamageType.Psychic,\n\t\t\tDamageType.Sonic\n\t\t];\n\n\t\tconst values = [ ...types.map(type => ({ type: type, value: this.props.getValue(type) })) ];\n\n\t\tif (values.every(pair => pair.value === 0)) {\n\t\t\treturn (\n\t\t\t\t<Box label={this.props.label}>\n\t\t\t\t\t<Text type={TextType.Dimmed}>None</Text>\n\t\t\t\t</Box>\n\t\t\t);\n\t\t}\n\n\t\tif (Collections.min(values, pair => pair.value) === Collections.max(values, pair => pair.value)) {\n\t\t\treturn (\n\t\t\t\t<Box label={this.props.label}>\n\t\t\t\t\t<StatValue label='All damage types' value={values[0].value}/>\n\t\t\t\t</Box>\n\t\t\t);\n\t\t}\n\n\t\tconst physicalTypes = [ DamageType.Edged, DamageType.Impact, DamageType.Piercing ];\n\t\tconst physicalValues = [ ...physicalTypes.map(type => ({ type: type, value: this.props.getValue(type) })) ];\n\t\tlet physical = null;\n\t\tif (physicalValues.every(pair => pair.value === 0)) {\n\t\t\tphysical = (\n\t\t\t\t<StatValue label='Physical damage' value={0}/>\n\t\t\t);\n\t\t} else if (Collections.min(physicalValues, pair => pair.value) === Collections.max(physicalValues, pair => pair.value)) {\n\t\t\tphysical = (\n\t\t\t\t<StatValue label='Physical damage' value={physicalValues[0].value}/>\n\t\t\t);\n\t\t} else {\n\t\t\tphysical = (\n\t\t\t\t<div>\n\t\t\t\t\t{physicalTypes.map(type => <StatValue key={type} label={'Physical: ' + type} value={values.find(p => p.type === type)?.value || 0}/>)}\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\n\t\tconst energyTypes = [ DamageType.Cold, DamageType.Electricity, DamageType.Fire, DamageType.Light, DamageType.Sonic ];\n\t\tconst energyValues = [ ...energyTypes.map(type => ({ type: type, value: this.props.getValue(type) })) ];\n\t\tlet energy = null;\n\t\tif (energyValues.every(pair => pair.value === 0)) {\n\t\t\tenergy = (\n\t\t\t\t<StatValue label='Energy damage' value={0}/>\n\t\t\t);\n\t\t} else if (Collections.min(energyValues, pair => pair.value) === Collections.max(energyValues, pair => pair.value)) {\n\t\t\tenergy = (\n\t\t\t\t<StatValue label='Energy damage' value={energyValues[0].value}/>\n\t\t\t);\n\t\t} else {\n\t\t\tenergy = (\n\t\t\t\t<div>\n\t\t\t\t\t{energyTypes.map(type => <StatValue key={type} label={'Energy: ' + type} value={values.find(p => p.type === type)?.value || 0}/>)}\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\n\t\tconst corruptionTypes = [ DamageType.Acid, DamageType.Decay, DamageType.Poison, DamageType.Psychic ];\n\t\tconst corruptionValues = [ ...corruptionTypes.map(type => ({ type: type, value: this.props.getValue(type) })) ];\n\t\tlet corruption = null;\n\t\tif (corruptionValues.every(pair => pair.value === 0)) {\n\t\t\tcorruption = (\n\t\t\t\t<StatValue label='Corruption damage' value={0}/>\n\t\t\t);\n\t\t} else if (Collections.min(corruptionValues, pair => pair.value) === Collections.max(corruptionValues, pair => pair.value)) {\n\t\t\tcorruption = (\n\t\t\t\t<StatValue label='Corruption damage' value={corruptionValues[0].value}/>\n\t\t\t);\n\t\t} else {\n\t\t\tcorruption = (\n\t\t\t\t<div>\n\t\t\t\t\t{corruptionTypes.map(type => <StatValue key={type} label={'Corruption: ' + type} value={values.find(p => p.type === type)?.value || 0}/>)}\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\n\t\treturn (\n\t\t\t<Box label={this.props.label}>\n\t\t\t\t{physical}\n\t\t\t\t<hr />\n\t\t\t\t{energy}\n\t\t\t\t<hr />\n\t\t\t\t{corruption}\n\t\t\t</Box>\n\t\t);\n\t};\n}\n","import { Component } from 'react';\n\nimport { CombatantType } from '../../../../enums/combatant-type';\nimport { DamageType } from '../../../../enums/damage-type';\nimport { SkillType } from '../../../../enums/skill-type';\nimport { TraitType } from '../../../../enums/trait-type';\n\nimport { CombatantLogic } from '../../../../logic/combatant-logic';\nimport { ConditionLogic } from '../../../../logic/condition-logic';\nimport { EncounterLogic } from '../../../../logic/encounter-logic';\n\nimport type { CombatantModel } from '../../../../models/combatant';\nimport type { EncounterModel } from '../../../../models/encounter';\n\nimport { Box, Gauge, StatValue, Tag, Text, TextType } from '../../../controls';\nimport { CombatStatsPanel } from '../../../panels/combat-stats/combat-stats-panel';\nimport { DamagePanel } from './damage-panel/damage-panel';\n\nimport './stats.scss';\n\ninterface Props {\n\tcombatant: CombatantModel;\n\tencounter: EncounterModel | null;\n\tdeveloper: boolean;\n}\n\nexport class Stats extends Component<Props> {\n\tgetTraitRank = (trait: TraitType) => {\n\t\tif (this.props.encounter) {\n\t\t\treturn EncounterLogic.getTraitRank(this.props.encounter, this.props.combatant, trait);\n\t\t}\n\n\t\treturn CombatantLogic.getTraitRank(this.props.combatant, [], trait);\n\t};\n\n\tgetSkillRank = (skill: SkillType) => {\n\t\tif (this.props.encounter) {\n\t\t\treturn EncounterLogic.getSkillRank(this.props.encounter, this.props.combatant, skill);\n\t\t}\n\n\t\treturn CombatantLogic.getSkillRank(this.props.combatant, [], skill);\n\t};\n\n\tgetDamageBonusValue = (damage: DamageType) => {\n\t\tif (this.props.encounter) {\n\t\t\treturn EncounterLogic.getDamageBonus(this.props.encounter, this.props.combatant, damage);\n\t\t}\n\n\t\treturn CombatantLogic.getDamageBonus(this.props.combatant, [], damage);\n\t};\n\n\tgetDamageResistanceValue = (damage: DamageType) => {\n\t\tif (this.props.encounter) {\n\t\t\treturn EncounterLogic.getDamageResistance(this.props.encounter, this.props.combatant, damage);\n\t\t}\n\n\t\treturn CombatantLogic.getDamageResistance(this.props.combatant, [], damage);\n\t};\n\n\tgetTraitsSection = () => {\n\t\treturn (\n\t\t\t<Box label='Traits'>\n\t\t\t\t<div className='stats-row'>\n\t\t\t\t\t<StatValue orientation='vertical' label='Endurance' value={this.getTraitRank(TraitType.Endurance)}/>\n\t\t\t\t\t<StatValue orientation='vertical' label='Resolve' value={this.getTraitRank(TraitType.Resolve)}/>\n\t\t\t\t\t<StatValue orientation='vertical' label='Speed' value={this.getTraitRank(TraitType.Speed)}/>\n\t\t\t\t</div>\n\t\t\t</Box>\n\t\t);\n\t};\n\n\tgetSkillsSection = () => {\n\t\treturn (\n\t\t\t<Box label='Skills'>\n\t\t\t\t<StatValue label='Brawl' value={this.getSkillRank(SkillType.Brawl)}/>\n\t\t\t\t<StatValue label='Perception' value={this.getSkillRank(SkillType.Perception)}/>\n\t\t\t\t<StatValue label='Presence' value={this.getSkillRank(SkillType.Presence)}/>\n\t\t\t\t<StatValue label='Reactions' value={this.getSkillRank(SkillType.Reactions)}/>\n\t\t\t\t<StatValue label='Spellcasting' value={this.getSkillRank(SkillType.Spellcasting)}/>\n\t\t\t\t<StatValue label='Stealth' value={this.getSkillRank(SkillType.Stealth)}/>\n\t\t\t\t<StatValue label='Weapon' value={this.getSkillRank(SkillType.Weapon)}/>\n\t\t\t</Box>\n\t\t);\n\t};\n\n\tgetProficienciesSection = () => {\n\t\tlet proficiencySection = (\n\t\t\t<Box label='Proficiencies'>\n\t\t\t\t<Text type={TextType.Dimmed}>None</Text>\n\t\t\t</Box>\n\t\t);\n\n\t\tconst profs = CombatantLogic.getProficiencies(this.props.combatant);\n\t\tif (profs.length > 0) {\n\t\t\tproficiencySection = (\n\t\t\t\t<Box label='Proficiencies'>\n\t\t\t\t\t{profs.map((p, n) => (<Tag key={n}>{p}</Tag>))}\n\t\t\t\t</Box>\n\t\t\t);\n\t\t}\n\n\t\treturn proficiencySection;\n\t};\n\n\tgetAurasSection = () => {\n\t\tlet auraSection = (\n\t\t\t<Box label='Auras'>\n\t\t\t\t<Text type={TextType.Dimmed}>None</Text>\n\t\t\t</Box>\n\t\t);\n\n\t\tconst auras = CombatantLogic.getAuras(this.props.combatant);\n\t\tif (auras.length > 0) {\n\t\t\tauraSection = (\n\t\t\t\t<Box label='Auras'>\n\t\t\t\t\t{\n\t\t\t\t\t\tauras.map(aura => {\n\t\t\t\t\t\t\tconst affects = ConditionLogic.getConditionIsBeneficial(aura) ? 'allies' : 'enemies';\n\t\t\t\t\t\t\tconst desc = `${ConditionLogic.getConditionDescription(aura)} (affects ${affects})`;\n\t\t\t\t\t\t\treturn <StatValue key={aura.id} label={desc} value={aura.rank} />;\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t</Box>\n\t\t\t);\n\t\t}\n\n\t\treturn auraSection;\n\t};\n\n\tgetXPSection = () => {\n\t\treturn (\n\t\t\t<Box label='XP'>\n\t\t\t\t<div className='xp-gauge'>\n\t\t\t\t\t<Gauge\n\t\t\t\t\t\tprogress={this.props.combatant.xp / this.props.combatant.level}\n\t\t\t\t\t\tcontent={(\n\t\t\t\t\t\t\t<div><b>{this.props.combatant.xp} XP</b> / {this.props.combatant.level}</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</Box>\n\t\t);\n\t};\n\n\trender = () => {\n\t\ttry {\n\t\t\tlet combatColumn = null;\n\t\t\tif (this.props.encounter) {\n\t\t\t\tcombatColumn = (\n\t\t\t\t\t<div className='column'>\n\t\t\t\t\t\t<CombatStatsPanel combatant={this.props.combatant} encounter={this.props.encounter} />\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t}\n\n\t\t\treturn (\n\t\t\t\t<div className='stats'>\n\t\t\t\t\t{combatColumn}\n\t\t\t\t\t<div className='column'>\n\t\t\t\t\t\t{this.getTraitsSection()}\n\t\t\t\t\t\t{this.getSkillsSection()}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className='column'>\n\t\t\t\t\t\t<DamagePanel label='Damage Bonuses' getValue={this.getDamageBonusValue} />\n\t\t\t\t\t\t<DamagePanel label='Damage Resistances' getValue={this.getDamageResistanceValue} />\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className='column'>\n\t\t\t\t\t\t{(this.props.combatant.type === CombatantType.Hero) && (this.props.combatant.faction === CombatantType.Hero) ? this.getXPSection() : null}\n\t\t\t\t\t\t{this.getProficienciesSection()}\n\t\t\t\t\t\t{this.getAurasSection()}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t);\n\t\t} catch {\n\t\t\treturn <div className='stats render-error' />;\n\t\t}\n\t};\n}\n","import { Component } from 'react';\n\nimport { QuirkType } from '../../../enums/quirk-type';\nimport { StructureType } from '../../../enums/structure-type';\n\nimport { CombatantLogic } from '../../../logic/combatant-logic';\nimport { GameLogic } from '../../../logic/game-logic';\nimport { StrongholdLogic } from '../../../logic/stronghold-logic';\n\nimport type { CombatantModel } from '../../../models/combatant';\nimport type { FeatureModel } from '../../../models/feature';\nimport type { GameModel } from '../../../models/game';\nimport type { ItemModel } from '../../../models/item';\n\nimport { Utils } from '../../../utils/utils';\n\nimport { ActionCard, FeatureCard, StrongholdBenefitCard } from '../../cards';\nimport { Badge, CardList, Tabs, Tag, Text, TextType } from '../../controls';\nimport { Items } from './items/items';\nimport { LevelUp } from './level-up/level-up';\nimport { Stats } from './stats/stats';\n\nimport './character-sheet-modal.scss';\n\ninterface Props {\n\tcombatant: CombatantModel;\n\tgame: GameModel;\n\tdeveloper: boolean;\n\tequipItem: (item: ItemModel, combatant: CombatantModel) => void;\n\tunequipItem: (item: ItemModel, combatant: CombatantModel) => void;\n\tpickUpItem: (item: ItemModel, combatant: CombatantModel) => void;\n\tdropItem: (item: ItemModel, combatant: CombatantModel) => void;\n\tlevelUp: (feature: FeatureModel, combatant: CombatantModel) => void;\n\tretireHero: (combatant: CombatantModel) => void;\n\taddXP: (combatant: CombatantModel, useCharge: StructureType | null) => void;\n\tuseCharge: (type: StructureType, count: number) => void;\n}\n\ninterface State {\n\tview: string;\n}\n\nexport class CharacterSheetModal extends Component<Props, State> {\n\tconstructor(props: Props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tview: 'stats'\n\t\t};\n\t}\n\n\tequipItem = (item: ItemModel) => {\n\t\tthis.props.equipItem(item, this.props.combatant);\n\t};\n\n\tunequipItem = (item: ItemModel) => {\n\t\tthis.props.unequipItem(item, this.props.combatant);\n\t};\n\n\tdropItem = (item: ItemModel) => {\n\t\tthis.props.dropItem(item, this.props.combatant);\n\t};\n\n\tpickUpItem = (item: ItemModel) => {\n\t\tthis.props.pickUpItem(item, this.props.combatant);\n\t};\n\n\tlevelUp = (feature: FeatureModel) => {\n\t\tconst copy = JSON.parse(JSON.stringify(feature)) as FeatureModel;\n\t\tcopy.id = Utils.guid();\n\t\tthis.props.levelUp(copy, this.props.combatant);\n\t};\n\n\trender = () => {\n\t\ttry {\n\t\t\tlet view = this.state.view;\n\t\t\tlet selector = null;\n\t\t\tif (this.props.combatant.quirks.includes(QuirkType.Beast)) {\n\t\t\t\tselector = null;\n\t\t\t} else {\n\t\t\t\tconst options = [\n\t\t\t\t\t{ id: 'stats', display: 'Statistics' },\n\t\t\t\t\t{ id: 'items', display: 'Equipment' },\n\t\t\t\t\t{ id: 'features', display: 'Features' },\n\t\t\t\t\t{ id: 'actions', display: 'Actions' }\n\t\t\t\t];\n\n\t\t\t\tconst hasXP = StrongholdLogic.getStructureCharges(this.props.game, StructureType.Academy) > 0;\n\t\t\t\tif ((this.props.game.encounter === null) && (hasXP || this.props.developer)) {\n\t\t\t\t\toptions.push({\n\t\t\t\t\t\tid: 'benefits',\n\t\t\t\t\t\tdisplay: 'Benefits'\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tif (view === 'benefits') {\n\t\t\t\t\t\tview = 'stats';\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tselector = (\n\t\t\t\t\t<Tabs\n\t\t\t\t\t\toptions={options}\n\t\t\t\t\t\tselectedID={view}\n\t\t\t\t\t\tonSelect={id => this.setState({ view: id })}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tlet content = null;\n\t\t\tswitch (view) {\n\t\t\t\tcase 'stats':\n\t\t\t\t\tcontent = (\n\t\t\t\t\t\t<Stats\n\t\t\t\t\t\t\tcombatant={this.props.combatant}\n\t\t\t\t\t\t\tencounter={this.props.game.encounter}\n\t\t\t\t\t\t\tdeveloper={this.props.developer}\n\t\t\t\t\t\t/>\n\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'items':\n\t\t\t\t\tcontent = (\n\t\t\t\t\t\t<Items\n\t\t\t\t\t\t\tcombatant={this.props.combatant}\n\t\t\t\t\t\t\tgame={this.props.game}\n\t\t\t\t\t\t\tequipItem={this.equipItem}\n\t\t\t\t\t\t\tunequipItem={this.unequipItem}\n\t\t\t\t\t\t\tpickUpItem={this.pickUpItem}\n\t\t\t\t\t\t\tdropItem={this.dropItem}\n\t\t\t\t\t\t/>\n\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'features': {\n\t\t\t\t\tconst cards = CombatantLogic.getFeatureDeck(this.props.combatant).map(f => (\n\t\t\t\t\t\t<FeatureCard\n\t\t\t\t\t\t\tkey={f.id}\n\t\t\t\t\t\t\tfeature={f}\n\t\t\t\t\t\t\tfooter={CombatantLogic.getFeatureSource(this.props.combatant, f.id)}\n\t\t\t\t\t\t\tfooterType={CombatantLogic.getFeatureSourceType(this.props.combatant, f.id)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t));\n\t\t\t\t\tcontent = (\n\t\t\t\t\t\t<CardList cards={cards} />\n\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcase 'actions':{\n\t\t\t\t\tconst cards = CombatantLogic.getActionDeck(this.props.combatant).map(a => (\n\t\t\t\t\t\t<ActionCard\n\t\t\t\t\t\t\tkey={a.id}\n\t\t\t\t\t\t\taction={a}\n\t\t\t\t\t\t\tfooter={CombatantLogic.getActionSource(this.props.combatant, a.id)}\n\t\t\t\t\t\t\tfooterType={CombatantLogic.getActionSourceType(this.props.combatant, a.id)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t));\n\t\t\t\t\tcontent = (\n\t\t\t\t\t\t<CardList cards={cards} />\n\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcase 'benefits': {\n\t\t\t\t\tconst cards = [];\n\n\t\t\t\t\tconst xp = StrongholdLogic.getStructureCharges(this.props.game, StructureType.Academy);\n\t\t\t\t\tif ((xp > 0) || this.props.developer) {\n\t\t\t\t\t\tcards.push(\n\t\t\t\t\t\t\t<StrongholdBenefitCard\n\t\t\t\t\t\t\t\tkey='xp'\n\t\t\t\t\t\t\t\tlabel='Bonus XP'\n\t\t\t\t\t\t\t\tavailable={xp}\n\t\t\t\t\t\t\t\tdeveloper={this.props.developer}\n\t\t\t\t\t\t\t\tonUse={() => this.props.addXP(this.props.combatant, this.props.developer ? null : StructureType.Academy)}\n\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\n\t\t\t\t\tcontent = (\n\t\t\t\t\t\t<CardList cards={cards} />\n\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlet levelUp = null;\n\t\t\tif ((this.props.game.encounter === null) && (this.props.combatant.xp >= this.props.combatant.level)) {\n\t\t\t\tlevelUp = (\n\t\t\t\t\t<Badge value={`Choose a feature for level ${this.props.combatant.level + 1}`}>\n\t\t\t\t\t\t<LevelUp\n\t\t\t\t\t\t\tcombatant={this.props.combatant}\n\t\t\t\t\t\t\tgame={this.props.game}\n\t\t\t\t\t\t\tdeveloper={this.props.developer}\n\t\t\t\t\t\t\tuseCharge={this.props.useCharge}\n\t\t\t\t\t\t\tlevelUp={this.levelUp}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Badge>\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tconst species = GameLogic.getSpecies(this.props.combatant.speciesID);\n\t\t\tconst role = GameLogic.getRole(this.props.combatant.roleID);\n\t\t\tconst background = GameLogic.getBackground(this.props.combatant.backgroundID);\n\n\t\t\treturn (\n\t\t\t\t<div className='character-sheet-modal'>\n\t\t\t\t\t<div className='main-section'>\n\t\t\t\t\t\t<div className='header'>\n\t\t\t\t\t\t\t<Text type={TextType.Heading}>{this.props.combatant.name || 'unnamed hero'}</Text>\n\t\t\t\t\t\t\t<div className='tags'>\n\t\t\t\t\t\t\t\t{species ? <Tag>{species.name}</Tag> : null}\n\t\t\t\t\t\t\t\t{role ? <Tag>{role.name}</Tag> : null}\n\t\t\t\t\t\t\t\t{background ? <Tag>{background.name}</Tag> : null}\n\t\t\t\t\t\t\t\t<Tag>Level {this.props.combatant.level}</Tag>\n\t\t\t\t\t\t\t\t{this.props.combatant.quirks.map((q, n) => (<Tag key={n}>{q}</Tag>))}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{selector}\n\t\t\t\t\t\t<div className='content'>\n\t\t\t\t\t\t\t{content}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t{levelUp}\n\t\t\t\t</div>\n\t\t\t);\n\t\t} catch {\n\t\t\treturn <div className='character-sheet-modal render-error' />;\n\t\t}\n\t};\n}\n","import { Component } from 'react';\n\nimport { StructureType } from '../../../enums/structure-type';\n\nimport { MagicItemGenerator } from '../../../generators/magic-item-generator';\n\nimport { StrongholdLogic } from '../../../logic/stronghold-logic';\n\nimport type { GameModel } from '../../../models/game';\nimport type { ItemModel } from '../../../models/item';\nimport type { OptionsModel } from '../../../models/options';\n\nimport { Collections } from '../../../utils/collections';\n\nimport { CardList, Dialog, Text, TextType } from '../../controls';\nimport { ItemCard, StrongholdBenefitCard } from '../../cards';\n\nimport './enchant-item-modal.scss';\n\ninterface Props {\n\tgame: GameModel;\n\toptions: OptionsModel;\n\tenchantItem: (item: ItemModel, newItem: ItemModel) => void;\n\tuseCharge: (type: StructureType, count: number) => void;\n}\n\ninterface State {\n\tselectedItem: ItemModel | null;\n\tmagicItems: ItemModel[];\n}\n\nexport class EnchantItemModal extends Component<Props, State> {\n\tconstructor(props: Props) {\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tselectedItem: null,\n\t\t\tmagicItems: []\n\t\t};\n\t}\n\n\tselectItem = (item: ItemModel) => {\n\t\tthis.setState({\n\t\t\tselectedItem: item,\n\t\t\tmagicItems: this.getItems(item)\n\t\t});\n\t};\n\n\tgetItems = (baseItem: ItemModel) => {\n\t\tconst items: ItemModel[] = [];\n\n\t\twhile (items.length < 3) {\n\t\t\titems.push(MagicItemGenerator.generateMagicItem(baseItem, this.props.options.packIDs));\n\t\t}\n\n\t\treturn Collections.sort(items, n => n.name);\n\t};\n\n\tredraw = () => {\n\t\tthis.setState({\n\t\t\tmagicItems: this.getItems(this.state.selectedItem as ItemModel)\n\t\t}, () => {\n\t\t\tif (!this.props.options.developer) {\n\t\t\t\tthis.props.useCharge(StructureType.WizardTower, 1);\n\t\t\t}\n\t\t});\n\t};\n\n\trender = () => {\n\t\ttry {\n\t\t\tlet dialog = null;\n\t\t\tif (this.state.selectedItem) {\n\t\t\t\tconst cards = this.state.magicItems.map(item => (\n\t\t\t\t\t<div key={item.id}>\n\t\t\t\t\t\t<ItemCard item={item} onClick={item => this.props.enchantItem(this.state.selectedItem as ItemModel, item)} />\n\t\t\t\t\t</div>\n\t\t\t\t));\n\n\t\t\t\tconst redraws = StrongholdLogic.getStructureCharges(this.props.game, StructureType.WizardTower);\n\t\t\t\tif ((redraws > 0) || this.props.options.developer) {\n\t\t\t\t\tcards.push(\n\t\t\t\t\t\t<StrongholdBenefitCard\n\t\t\t\t\t\t\tkey='redraw'\n\t\t\t\t\t\t\tlabel='Redraw'\n\t\t\t\t\t\t\tavailable={redraws}\n\t\t\t\t\t\t\tdeveloper={this.props.options.developer}\n\t\t\t\t\t\t\tonRedraw={this.redraw}\n\t\t\t\t\t\t/>\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tdialog = (\n\t\t\t\t\t<Dialog\n\t\t\t\t\t\tcontent={\n\t\t\t\t\t\t\t<div className='enchant-item-modal'>\n\t\t\t\t\t\t\t\t<Text type={TextType.Heading}>Choose an Enchantment</Text>\n\t\t\t\t\t\t\t\t<hr />\n\t\t\t\t\t\t\t\t<Text type={TextType.Information}>\n\t\t\t\t\t\t\t\t\t<p>Here are three ways in which this item can be enchanted. Choose one of them.</p>\n\t\t\t\t\t\t\t\t</Text>\n\t\t\t\t\t\t\t\t<div className='card-selection-row'>\n\t\t\t\t\t\t\t\t\t<CardList mode='row' cards={cards} />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tconst heroes = this.props.game.heroes.map(h => {\n\t\t\t\tconst items = ([] as ItemModel[]).concat(h.items).concat(h.carried).filter(i => !i.potion);\n\t\t\t\tif (items.length > 0) {\n\t\t\t\t\tconst cards = items.map(item => (\n\t\t\t\t\t\t<div key={item.id}>\n\t\t\t\t\t\t\t<ItemCard item={item} onClick={this.selectItem} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t));\n\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div key={h.id} className='card-selection-row'>\n\t\t\t\t\t\t\t<Text type={TextType.SubHeading}>{h.name}</Text>\n\t\t\t\t\t\t\t<CardList cards={cards} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\treturn null;\n\t\t\t});\n\n\t\t\tlet other = null;\n\t\t\tif (this.props.game.items.length > 0) {\n\t\t\t\tconst cards = this.props.game.items.filter(i => !i.potion).map(item => (\n\t\t\t\t\t<div key={item.id}>\n\t\t\t\t\t\t<ItemCard item={item} onClick={this.selectItem} />\n\t\t\t\t\t</div>\n\t\t\t\t));\n\n\t\t\t\tother = (\n\t\t\t\t\t<div className='card-selection-row'>\n\t\t\t\t\t\t<Text type={TextType.SubHeading}>Other Items</Text>\n\t\t\t\t\t\t<CardList cards={cards} />\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t}\n\n\t\t\treturn (\n\t\t\t\t<div className='enchant-item-modal'>\n\t\t\t\t\t<Text type={TextType.Heading}>Choose an Item</Text>\n\t\t\t\t\t<hr />\n\t\t\t\t\t<Text type={TextType.Information}>\n\t\t\t\t\t\t<p>Select one of the following items to be enchanted.</p>\n\t\t\t\t\t</Text>\n\t\t\t\t\t{heroes}\n\t\t\t\t\t{other}\n\t\t\t\t\t{dialog}\n\t\t\t\t</div>\n\t\t\t);\n\t\t} catch {\n\t\t\treturn <div className='enchant-item-modal render-error' />;\n\t\t}\n\t};\n}\n","import { Component } from 'react';\n\nimport { StructureType } from '../../../enums/structure-type';\n\nimport { CampaignMapLogic } from '../../../logic/campaign-map-logic';\nimport { StrongholdLogic } from '../../../logic/stronghold-logic';\n\nimport type { CombatantModel } from '../../../models/combatant';\nimport type { GameModel } from '../../../models/game';\nimport type { OptionsModel } from '../../../models/options';\nimport type { RegionModel } from '../../../models/region';\n\nimport { Collections } from '../../../utils/collections';\n\nimport { CardList, Tabs, Text, TextType } from '../../controls';\nimport { HeroCard, SpeciesCard, StrongholdBenefitCard } from '../../cards';\nimport { CombatantRowPanel } from '../../panels/combatant-row/combatant-row-panel';\n\nimport './encounter-start-modal.scss';\n\ninterface Props {\n\tregion: RegionModel;\n\tgame: GameModel;\n\toptions: OptionsModel;\n\tstartEncounter: (region: RegionModel, heroes: CombatantModel[], benefits: number, detriments: number) => void;\n}\n\ninterface State {\n\tviewMode: string;\n\tselectedHeroes: CombatantModel[];\n\tbenefits: number;\n\tdetriments: number;\n}\n\nexport class EncounterStartModal extends Component<Props, State> {\n\tconstructor(props: Props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tviewMode: 'heroes',\n\t\t\tselectedHeroes: [],\n\t\t\tbenefits: 0,\n\t\t\tdetriments: 0\n\t\t};\n\t}\n\n\tselectAllHeroes = () => {\n\t\tconst heroes = this.props.game.heroes.filter(h => !this.state.selectedHeroes.includes(h));\n\n\t\tlet selected = this.state.selectedHeroes;\n\t\tselected.push(...heroes);\n\t\tselected = Collections.sort(selected, n => n.name);\n\n\t\tthis.setState({\n\t\t\tviewMode: 'heroes',\n\t\t\tselectedHeroes: selected\n\t\t});\n\t};\n\n\tselectHero = (hero: CombatantModel) => {\n\t\tlet selected = this.state.selectedHeroes;\n\t\tselected.push(hero);\n\t\tselected = Collections.sort(selected, n => n.name);\n\n\t\tthis.setState({\n\t\t\tviewMode: 'heroes',\n\t\t\tselectedHeroes: selected\n\t\t});\n\t};\n\n\tdeselectHero = (hero: CombatantModel) => {\n\t\tconst selected = this.state.selectedHeroes.filter(h => h.id !== hero.id);\n\t\tthis.setState({\n\t\t\tselectedHeroes: selected\n\t\t});\n\t};\n\n\tstartEncounter = () => {\n\t\tthis.props.startEncounter(this.props.region, this.state.selectedHeroes, this.state.benefits, this.state.detriments);\n\t};\n\n\trender = () => {\n\t\tconst candidates = this.props.game.heroes\n\t\t\t.filter(h => !this.state.selectedHeroes.includes(h))\n\t\t\t.map(h => {\n\t\t\t\treturn (\n\t\t\t\t\t<HeroCard key={h.id} hero={h} onClick={this.state.selectedHeroes.length < 5 ? hero => this.selectHero(hero) : null} />\n\t\t\t\t);\n\t\t\t});\n\n\t\tconst options = [\n\t\t\t{ id: 'heroes', display: 'Selected Heroes' },\n\t\t\t{ id: 'monsters', display: 'Monsters' }\n\t\t];\n\t\tconst charges = StrongholdLogic.getStructureCharges(this.props.game, StructureType.Temple) + StrongholdLogic.getStructureCharges(this.props.game, StructureType.Intelligencer);\n\t\tif ((charges > 0) || this.props.options.developer) {\n\t\t\toptions.push({\n\t\t\t\tid: 'advanced',\n\t\t\t\tdisplay: 'Advanced'\n\t\t\t});\n\t\t}\n\n\t\tlet rightContent = null;\n\t\tswitch (this.state.viewMode) {\n\t\t\tcase 'heroes': {\n\t\t\t\tconst selected = this.state.selectedHeroes.map(h => <CombatantRowPanel key={h.id} mode='list' combatant={h} onCancel={hero => this.deselectHero(hero)} />);\n\t\t\t\twhile (selected.length < 5) {\n\t\t\t\t\tselected.push(\n\t\t\t\t\t\t<div key={selected.length} className='empty-hero-slot'>\n\t\t\t\t\t\t\t[No hero selected]\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\trightContent = (\n\t\t\t\t\t<div className='selected-hero-list'>\n\t\t\t\t\t\t{(candidates.length <=5) && (this.state.selectedHeroes.length === 0) ? <button className='primary' onClick={this.selectAllHeroes}>Add All Heroes</button> : null}\n\t\t\t\t\t\t{selected}\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'monsters': {\n\t\t\t\tconst monsters = CampaignMapLogic.getMonsters(this.props.region, this.props.options.packIDs)\n\t\t\t\t\t.map(species => (\n\t\t\t\t\t\t<SpeciesCard key={species.id} species={species} />\n\t\t\t\t\t));\n\n\t\t\t\trightContent = (\n\t\t\t\t\t<div className='monster-list'>\n\t\t\t\t\t\t<Text type={TextType.SubHeading}>Monsters in this region</Text>\n\t\t\t\t\t\t<CardList cards={monsters} />\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'advanced': {\n\t\t\t\tconst cards = [];\n\n\t\t\t\tconst ben = StrongholdLogic.getStructureCharges(this.props.game, StructureType.Temple);\n\t\t\t\tif ((ben > 0) || this.props.options.developer) {\n\t\t\t\t\tcards.push(\n\t\t\t\t\t\t<div key='bonuses' className='stronghold-benefit'>\n\t\t\t\t\t\t\t<StrongholdBenefitCard\n\t\t\t\t\t\t\t\tlabel='Bonuses'\n\t\t\t\t\t\t\t\tavailable={ben}\n\t\t\t\t\t\t\t\tused={this.state.benefits}\n\t\t\t\t\t\t\t\tdeveloper={this.props.options.developer}\n\t\t\t\t\t\t\t\tonChange={value => this.setState({ benefits: value })}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<Text>Allow some of your heroes to start with a random beneficial condition.</Text>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tconst det = StrongholdLogic.getStructureCharges(this.props.game, StructureType.Intelligencer);\n\t\t\t\tif ((det > 0) || this.props.options.developer) {\n\t\t\t\t\tcards.push(\n\t\t\t\t\t\t<div key='penalties' className='stronghold-benefit'>\n\t\t\t\t\t\t\t<StrongholdBenefitCard\n\t\t\t\t\t\t\t\tlabel='Penalties'\n\t\t\t\t\t\t\t\tavailable={det}\n\t\t\t\t\t\t\t\tused={this.state.detriments}\n\t\t\t\t\t\t\t\tdeveloper={this.props.options.developer}\n\t\t\t\t\t\t\t\tonChange={value => this.setState({ detriments: value })}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<Text>Force some of your opponents to start with a random detrimental condition.</Text>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\trightContent = (\n\t\t\t\t\t<div className='advanced-options'>\n\t\t\t\t\t\t<Text type={TextType.SubHeading}>Advanced Options</Text>\n\t\t\t\t\t\t<CardList cards={cards} />\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn (\n\t\t\t<div className='encounter-start-modal'>\n\t\t\t\t<div className='header'>\n\t\t\t\t\t<Text type={TextType.Heading}>Choose your Heroes</Text>\n\t\t\t\t</div>\n\t\t\t\t<div className='hero-lists'>\n\t\t\t\t\t<div className={(candidates.length === 0) || (this.state.selectedHeroes.length >= 5) ? 'hero-list-column narrow' : 'hero-list-column'}>\n\t\t\t\t\t\t<Text type={TextType.Information}>\n\t\t\t\t\t\t\t<p>Select <b>up to 5 heroes</b> from this list to take part in this encounter.</p>\n\t\t\t\t\t\t</Text>\n\t\t\t\t\t\t<CardList cards={candidates} />\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className='divider' />\n\t\t\t\t\t<div className='hero-list-column'>\n\t\t\t\t\t\t<Tabs\n\t\t\t\t\t\t\toptions={options}\n\t\t\t\t\t\t\tselectedID={this.state.viewMode}\n\t\t\t\t\t\t\tonSelect={id => this.setState({ viewMode: id })}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t{rightContent}\n\t\t\t\t\t\t<hr />\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName='primary'\n\t\t\t\t\t\t\tdisabled={(this.state.selectedHeroes.length < 1) || (this.state.selectedHeroes.length > 5)}\n\t\t\t\t\t\t\tonClick={this.startEncounter}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tStart the Encounter\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t};\n}\n","export class Format {\n\tstatic toSize = (value: number) => {\n\t\tlet str = `${value} B`;\n\n\t\tif (value > 1024) {\n\t\t\tvalue /= 1024;\n\t\t\tstr = `${value.toFixed(2)} kB`;\n\t\t}\n\n\t\tif (value > 1024) {\n\t\t\tvalue /= 1024;\n\t\t\tstr = `${value.toFixed(2)} MB`;\n\t\t}\n\n\t\tif (value > 1024) {\n\t\t\tvalue /= 1024;\n\t\t\tstr = `${value.toFixed(2)} GB`;\n\t\t}\n\n\t\treturn str;\n\t};\n\n\tstatic toCurrency = (value: number, symbol: string) => {\n\t\tif (value <= 0) {\n\t\t\treturn 'FREE';\n\t\t}\n\n\t\treturn `${symbol}${value.toFixed(2)}`;\n\t};\n}\n","import { Component } from 'react';\n\nimport type { GameModel } from '../../../../models/game';\nimport type { OptionsModel } from '../../../../models/options';\n\nimport { Format } from '../../../../utils/format';\n\nimport { StatValue, Text } from '../../../controls';\n\nimport './about-tab.scss';\n\nimport pkg from '../../../../../package.json';\n\ninterface Props {\n\tgame: GameModel | null;\n\toptions: OptionsModel;\n}\n\nexport class AboutTab extends Component<Props> {\n\trender = () => {\n\t\ttry {\n\t\t\treturn (\n\t\t\t\t<div className='about-tab'>\n\t\t\t\t\t<Text>Skirmish designed by <a href='mailto:andy.aiken@live.co.uk'>Andy Aiken</a>; © Andy Aiken 2023</Text>\n\t\t\t\t\t<hr />\n\t\t\t\t\t<StatValue label='Version' value={pkg.version} />\n\t\t\t\t\t<hr />\n\t\t\t\t\t<StatValue label='Data size' value={this.props.game ? Format.toSize(JSON.stringify(this.props.game).length) : 0} />\n\t\t\t\t\t<StatValue label='Options size' value={Format.toSize(JSON.stringify(this.props.options).length)} />\n\t\t\t\t</div>\n\t\t\t);\n\t\t} catch {\n\t\t\treturn <div className='about-tab render-error' />;\n\t\t}\n\t};\n}\n","import { Component } from 'react';\n\nimport { CardType } from '../../../../enums/card-type';\n\nimport { GameLogic } from '../../../../logic/game-logic';\n\nimport type { ActionModel } from '../../../../models/action';\nimport type { FeatureModel } from '../../../../models/feature';\nimport type { OptionsModel } from '../../../../models/options';\n\nimport { ActionCard, BackgroundCard, FeatureCard, ItemCard, RoleCard, SpeciesCard, StructureCard } from '../../../cards';\nimport { Badge, CardList, Dialog, Selector, Text, TextType } from '../../../controls';\n\nimport './decks-tab.scss';\n\ninterface Props {\n\toptions: OptionsModel;\n}\n\ninterface State {\n\ttab: string;\n\tselected: { name: string, description: string, type: CardType, starting: FeatureModel[], features: FeatureModel[], actions: ActionModel[] } | null;\n}\n\nexport class DecksTab extends Component<Props, State> {\n\tconstructor(props: Props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\ttab: 'heroes',\n\t\t\tselected: null\n\t\t};\n\t}\n\n\tsetTab = (tab: string) => {\n\t\tthis.setState({\n\t\t\ttab: tab\n\t\t});\n\t};\n\n\tsetActions = (name: string, description: string, type: CardType, starting: FeatureModel[], features: FeatureModel[], actions: ActionModel[]) => {\n\t\tthis.setState({\n\t\t\tselected: {\n\t\t\t\tname: name,\n\t\t\t\tdescription: description,\n\t\t\t\ttype: type,\n\t\t\t\tstarting: starting,\n\t\t\t\tfeatures: features,\n\t\t\t\tactions: actions\n\t\t\t}\n\t\t});\n\t};\n\n\tclearActions = () => {\n\t\tthis.setState({\n\t\t\tselected: null\n\t\t});\n\t};\n\n\tgetBadge = (packID: string) => {\n\t\tconst pack = GameLogic.getPack(packID);\n\t\tif (pack) {\n\t\t\treturn pack.name;\n\t\t}\n\n\t\treturn '';\n\t};\n\n\trender = () => {\n\t\ttry {\n\t\t\tconst cards: JSX.Element[] = [];\n\n\t\t\tswitch (this.state.tab) {\n\t\t\t\tcase 'heroes':\n\t\t\t\t\tGameLogic.getHeroSpeciesDeck(this.props.options.packIDs)\n\t\t\t\t\t\t.forEach(s => {\n\t\t\t\t\t\t\tcards.push(\n\t\t\t\t\t\t\t\t<Badge key={s.id} value={this.getBadge(s.packID)}>\n\t\t\t\t\t\t\t\t\t<SpeciesCard species={s} onClick={s => this.setActions(s.name, s.description, CardType.Species, s.startingFeatures, s.features, s.actions)} />\n\t\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'monsters':\n\t\t\t\t\tGameLogic.getMonsterSpeciesDeck(this.props.options.packIDs)\n\t\t\t\t\t\t.forEach(s => {\n\t\t\t\t\t\t\tcards.push(\n\t\t\t\t\t\t\t\t<Badge key={s.id} value={this.getBadge(s.packID)}>\n\t\t\t\t\t\t\t\t\t<SpeciesCard species={s} onClick={s => this.setActions(s.name, s.description, CardType.Species, s.startingFeatures, s.features, s.actions)} />\n\t\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'roles':\n\t\t\t\t\tGameLogic.getRoleDeck(this.props.options.packIDs)\n\t\t\t\t\t\t.forEach(r => {\n\t\t\t\t\t\t\tcards.push(\n\t\t\t\t\t\t\t\t<Badge key={r.id} value={this.getBadge(r.packID)}>\n\t\t\t\t\t\t\t\t\t<RoleCard role={r} onClick={r => this.setActions(r.name, r.description, CardType.Role, r.startingFeatures, r.features, r.actions)} />\n\t\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'backgrounds':\n\t\t\t\t\tGameLogic.getBackgroundDeck(this.props.options.packIDs)\n\t\t\t\t\t\t.forEach(b => {\n\t\t\t\t\t\t\tcards.push(\n\t\t\t\t\t\t\t\t<Badge key={b.id} value={this.getBadge(b.packID)}>\n\t\t\t\t\t\t\t\t\t<BackgroundCard background={b} onClick={b => this.setActions(b.name, b.description, CardType.Background, b.startingFeatures, b.features, b.actions)} />\n\t\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'structures':\n\t\t\t\t\tGameLogic.getStructureDeck(this.props.options.packIDs)\n\t\t\t\t\t\t.forEach(s => {\n\t\t\t\t\t\t\tcards.push(\n\t\t\t\t\t\t\t\t<Badge key={s.id} value={this.getBadge(s.packID)}>\n\t\t\t\t\t\t\t\t\t<StructureCard structure={s} />\n\t\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'items':\n\t\t\t\t\tGameLogic.getItemDeck(this.props.options.packIDs)\n\t\t\t\t\t\t.forEach(i => {\n\t\t\t\t\t\t\tcards.push(\n\t\t\t\t\t\t\t\t<Badge key={i.id} value={this.getBadge(i.packID)}>\n\t\t\t\t\t\t\t\t\t<ItemCard item={i} />\n\t\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'potions':\n\t\t\t\t\tGameLogic.getPotionDeck(this.props.options.packIDs)\n\t\t\t\t\t\t.forEach(p => {\n\t\t\t\t\t\t\tcards.push(\n\t\t\t\t\t\t\t\t<Badge key={p.id} value={this.getBadge(p.packID)}>\n\t\t\t\t\t\t\t\t\t<ItemCard item={p} />\n\t\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tlet dialog = null;\n\t\t\tif (this.state.selected) {\n\t\t\t\tconst source = this.state.selected.name;\n\t\t\t\tconst type = this.state.selected.type;\n\n\t\t\t\tconst startingCards = this.state.selected.starting.map(f => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<Badge key={f.id} value=''>\n\t\t\t\t\t\t\t<FeatureCard\n\t\t\t\t\t\t\t\tfeature={f}\n\t\t\t\t\t\t\t\tfooter={source}\n\t\t\t\t\t\t\t\tfooterType={type}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Badge>\n\t\t\t\t\t);\n\t\t\t\t});\n\t\t\t\tconst featureCards = this.state.selected.features.map(f => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<Badge key={f.id} value=''>\n\t\t\t\t\t\t\t<FeatureCard\n\t\t\t\t\t\t\t\tfeature={f}\n\t\t\t\t\t\t\t\tfooter={source}\n\t\t\t\t\t\t\t\tfooterType={type}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Badge>\n\t\t\t\t\t);\n\t\t\t\t});\n\t\t\t\tconst actionCards = this.state.selected.actions.map(a => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<Badge key={a.id} value=''>\n\t\t\t\t\t\t\t<ActionCard\n\t\t\t\t\t\t\t\taction={a}\n\t\t\t\t\t\t\t\tfooter={source}\n\t\t\t\t\t\t\t\tfooterType={type}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Badge>\n\t\t\t\t\t);\n\t\t\t\t});\n\t\t\t\tconst content = (\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<Text type={TextType.Heading}>{this.state.selected.name}</Text>\n\t\t\t\t\t\t<hr />\n\t\t\t\t\t\t<Text>\n\t\t\t\t\t\t\t<p style={{ textAlign: 'center' }}>{this.state.selected.description}</p>\n\t\t\t\t\t\t</Text>\n\t\t\t\t\t\t{startingCards.length > 0 ? <hr /> : null}\n\t\t\t\t\t\t{startingCards.length > 0 ? <Text type={TextType.SubHeading}>Starting Cards</Text> : null}\n\t\t\t\t\t\t{startingCards.length > 0 ? <CardList cards={startingCards} /> : null}\n\t\t\t\t\t\t{featureCards.length > 0 ? <hr /> : null}\n\t\t\t\t\t\t{featureCards.length > 0 ? <Text type={TextType.SubHeading}>Feature Cards</Text> : null}\n\t\t\t\t\t\t{featureCards.length > 0 ? <CardList cards={featureCards} /> : null}\n\t\t\t\t\t\t{actionCards.length > 0 ? <hr /> : null}\n\t\t\t\t\t\t{actionCards.length > 0 ? <Text type={TextType.SubHeading}>Action Cards</Text> : null}\n\t\t\t\t\t\t{actionCards.length > 0 ? <CardList cards={actionCards} /> : null}\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t\tdialog = (\n\t\t\t\t\t<Dialog\n\t\t\t\t\t\tcontent={content}\n\t\t\t\t\t\tlevel={2}\n\t\t\t\t\t\tonClose={this.clearActions}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t}\n\n\t\t\treturn (\n\t\t\t\t<div className='decks-tab'>\n\t\t\t\t\t<Selector\n\t\t\t\t\t\toptions={[\n\t\t\t\t\t\t\t{ id: 'heroes', display: 'Heroes' },\n\t\t\t\t\t\t\t{ id: 'monsters', display: 'Monsters' },\n\t\t\t\t\t\t\t{ id: 'roles', display: 'Roles' },\n\t\t\t\t\t\t\t{ id: 'backgrounds', display: 'Backgrounds' },\n\t\t\t\t\t\t\t{ id: 'structures', display: 'Structures' },\n\t\t\t\t\t\t\t{ id: 'items', display: 'Items' },\n\t\t\t\t\t\t\t{ id: 'potions', display: 'Potions' }\n\t\t\t\t\t\t]}\n\t\t\t\t\t\tselectedID={this.state.tab}\n\t\t\t\t\t\tonSelect={this.setTab}\n\t\t\t\t\t/>\n\t\t\t\t\t{cards.length > 0 ? <CardList cards={cards} /> : null}\n\t\t\t\t\t{cards.length > 0 ? null : <Text type={TextType.Small}>None.</Text>}\n\t\t\t\t\t{dialog}\n\t\t\t\t</div>\n\t\t\t);\n\t\t} catch {\n\t\t\treturn <div className='decks-tab render-error' />;\n\t\t}\n\t};\n}\n","import { Component } from 'react';\n\nimport type { GameModel } from '../../../../models/game';\nimport type { OptionsModel } from '../../../../models/options';\n\nimport { Sound } from '../../../../utils/sound';\n\nimport { ConfirmButton, StatValue, Switch, Text, TextType } from '../../../controls';\n\nimport './options-tab.scss';\n\ninterface Props {\n\tgame: GameModel | null;\n\toptions: OptionsModel;\n\tendCampaign: () => void;\n\tsetDeveloperMode: (value: boolean) => void;\n\tsetShowTips: (value: boolean) => void;\n\tsetSoundEffectsVolume: (value: number) => void;\n}\n\nexport class OptionsTab extends Component<Props> {\n\tsetSoundEffectsVolume = (value: number) => {\n\t\tthis.props.setSoundEffectsVolume(value);\n\t\tSound.play(Sound.dong);\n\t};\n\n\trender = () => {\n\t\ttry {\n\t\t\tconst local = window.location.href.includes('localhost');\n\n\t\t\treturn (\n\t\t\t\t<div className='options-tab'>\n\t\t\t\t\t<Text type={TextType.SubHeading}>Sound</Text>\n\t\t\t\t\t<StatValue label='Sound effects volume' value={`${this.props.options.soundEffectsVolume * 100}%`} />\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype='range'\n\t\t\t\t\t\tmin={0}\n\t\t\t\t\t\tmax={1}\n\t\t\t\t\t\tstep={0.05}\n\t\t\t\t\t\tvalue={this.props.options.soundEffectsVolume}\n\t\t\t\t\t\tonChange={e => this.setSoundEffectsVolume(parseFloat(e.target.value))}\n\t\t\t\t\t/>\n\t\t\t\t\t<hr />\n\t\t\t\t\t{local ? <Switch label='Developer Mode' checked={this.props.options.developer} onChange={this.props.setDeveloperMode} /> : null}\n\t\t\t\t\t<Switch label='Show Tips' checked={this.props.options.showTips} onChange={this.props.setShowTips} />\n\t\t\t\t\t<hr />\n\t\t\t\t\t{this.props.game ? <ConfirmButton label='Abandon this campaign' onClick={() => this.props.endCampaign()} /> : null}\n\t\t\t\t</div>\n\t\t\t);\n\t\t} catch {\n\t\t\treturn <div className='options-tab render-error' />;\n\t\t}\n\t};\n}\n","/**\n * @typedef {import('hast').Nodes} Nodes\n */\n\n// HTML whitespace expression.\n// See <https://infra.spec.whatwg.org/#ascii-whitespace>.\nconst re = /[ \\t\\n\\f\\r]/g\n\n/**\n * Check if the given value is *inter-element whitespace*.\n *\n * @param {Nodes | string} thing\n *   Thing to check (`Node` or `string`).\n * @returns {boolean}\n *   Whether the `value` is inter-element whitespace (`boolean`): consisting of\n *   zero or more of space, tab (`\\t`), line feed (`\\n`), carriage return\n *   (`\\r`), or form feed (`\\f`); if a node is passed it must be a `Text` node,\n *   whose `value` field is checked.\n */\nexport function whitespace(thing) {\n  return typeof thing === 'object'\n    ? thing.type === 'text'\n      ? empty(thing.value)\n      : false\n    : empty(thing)\n}\n\n/**\n * @param {string} value\n * @returns {boolean}\n */\nfunction empty(value) {\n  return value.replace(re, '') === ''\n}\n","/**\n * @typedef {import('./info.js').Info} Info\n * @typedef {Record<string, Info>} Properties\n * @typedef {Record<string, string>} Normal\n */\n\nexport class Schema {\n  /**\n   * @constructor\n   * @param {Properties} property\n   * @param {Normal} normal\n   * @param {string} [space]\n   */\n  constructor(property, normal, space) {\n    this.property = property\n    this.normal = normal\n    if (space) {\n      this.space = space\n    }\n  }\n}\n\n/** @type {Properties} */\nSchema.prototype.property = {}\n/** @type {Normal} */\nSchema.prototype.normal = {}\n/** @type {string|null} */\nSchema.prototype.space = null\n","/**\n * @typedef {import('./schema.js').Properties} Properties\n * @typedef {import('./schema.js').Normal} Normal\n */\n\nimport {Schema} from './schema.js'\n\n/**\n * @param {Schema[]} definitions\n * @param {string} [space]\n * @returns {Schema}\n */\nexport function merge(definitions, space) {\n  /** @type {Properties} */\n  const property = {}\n  /** @type {Normal} */\n  const normal = {}\n  let index = -1\n\n  while (++index < definitions.length) {\n    Object.assign(property, definitions[index].property)\n    Object.assign(normal, definitions[index].normal)\n  }\n\n  return new Schema(property, normal, space)\n}\n","/**\n * @param {string} value\n * @returns {string}\n */\nexport function normalize(value) {\n  return value.toLowerCase()\n}\n","export class Info {\n  /**\n   * @constructor\n   * @param {string} property\n   * @param {string} attribute\n   */\n  constructor(property, attribute) {\n    /** @type {string} */\n    this.property = property\n    /** @type {string} */\n    this.attribute = attribute\n  }\n}\n\n/** @type {string|null} */\nInfo.prototype.space = null\nInfo.prototype.boolean = false\nInfo.prototype.booleanish = false\nInfo.prototype.overloadedBoolean = false\nInfo.prototype.number = false\nInfo.prototype.commaSeparated = false\nInfo.prototype.spaceSeparated = false\nInfo.prototype.commaOrSpaceSeparated = false\nInfo.prototype.mustUseProperty = false\nInfo.prototype.defined = false\n","let powers = 0\n\nexport const boolean = increment()\nexport const booleanish = increment()\nexport const overloadedBoolean = increment()\nexport const number = increment()\nexport const spaceSeparated = increment()\nexport const commaSeparated = increment()\nexport const commaOrSpaceSeparated = increment()\n\nfunction increment() {\n  return 2 ** ++powers\n}\n","import {Info} from './info.js'\nimport * as types from './types.js'\n\n/** @type {Array<keyof types>} */\n// @ts-expect-error: hush.\nconst checks = Object.keys(types)\n\nexport class DefinedInfo extends Info {\n  /**\n   * @constructor\n   * @param {string} property\n   * @param {string} attribute\n   * @param {number|null} [mask]\n   * @param {string} [space]\n   */\n  constructor(property, attribute, mask, space) {\n    let index = -1\n\n    super(property, attribute)\n\n    mark(this, 'space', space)\n\n    if (typeof mask === 'number') {\n      while (++index < checks.length) {\n        const check = checks[index]\n        mark(this, checks[index], (mask & types[check]) === types[check])\n      }\n    }\n  }\n}\n\nDefinedInfo.prototype.defined = true\n\n/**\n * @param {DefinedInfo} values\n * @param {string} key\n * @param {unknown} value\n */\nfunction mark(values, key, value) {\n  if (value) {\n    // @ts-expect-error: assume `value` matches the expected value of `key`.\n    values[key] = value\n  }\n}\n","/**\n * @typedef {import('./schema.js').Properties} Properties\n * @typedef {import('./schema.js').Normal} Normal\n *\n * @typedef {Record<string, string>} Attributes\n *\n * @typedef {Object} Definition\n * @property {Record<string, number|null>} properties\n * @property {(attributes: Attributes, property: string) => string} transform\n * @property {string} [space]\n * @property {Attributes} [attributes]\n * @property {Array<string>} [mustUseProperty]\n */\n\nimport {normalize} from '../normalize.js'\nimport {Schema} from './schema.js'\nimport {DefinedInfo} from './defined-info.js'\n\nconst own = {}.hasOwnProperty\n\n/**\n * @param {Definition} definition\n * @returns {Schema}\n */\nexport function create(definition) {\n  /** @type {Properties} */\n  const property = {}\n  /** @type {Normal} */\n  const normal = {}\n  /** @type {string} */\n  let prop\n\n  for (prop in definition.properties) {\n    if (own.call(definition.properties, prop)) {\n      const value = definition.properties[prop]\n      const info = new DefinedInfo(\n        prop,\n        definition.transform(definition.attributes || {}, prop),\n        value,\n        definition.space\n      )\n\n      if (\n        definition.mustUseProperty &&\n        definition.mustUseProperty.includes(prop)\n      ) {\n        info.mustUseProperty = true\n      }\n\n      property[prop] = info\n\n      normal[normalize(prop)] = prop\n      normal[normalize(info.attribute)] = prop\n    }\n  }\n\n  return new Schema(property, normal, definition.space)\n}\n","import {create} from './util/create.js'\n\nexport const xlink = create({\n  space: 'xlink',\n  transform(_, prop) {\n    return 'xlink:' + prop.slice(5).toLowerCase()\n  },\n  properties: {\n    xLinkActuate: null,\n    xLinkArcRole: null,\n    xLinkHref: null,\n    xLinkRole: null,\n    xLinkShow: null,\n    xLinkTitle: null,\n    xLinkType: null\n  }\n})\n","import {create} from './util/create.js'\n\nexport const xml = create({\n  space: 'xml',\n  transform(_, prop) {\n    return 'xml:' + prop.slice(3).toLowerCase()\n  },\n  properties: {xmlLang: null, xmlBase: null, xmlSpace: null}\n})\n","/**\n * @param {Record<string, string>} attributes\n * @param {string} attribute\n * @returns {string}\n */\nexport function caseSensitiveTransform(attributes, attribute) {\n  return attribute in attributes ? attributes[attribute] : attribute\n}\n","import {caseSensitiveTransform} from './case-sensitive-transform.js'\n\n/**\n * @param {Record<string, string>} attributes\n * @param {string} property\n * @returns {string}\n */\nexport function caseInsensitiveTransform(attributes, property) {\n  return caseSensitiveTransform(attributes, property.toLowerCase())\n}\n","import {create} from './util/create.js'\nimport {caseInsensitiveTransform} from './util/case-insensitive-transform.js'\n\nexport const xmlns = create({\n  space: 'xmlns',\n  attributes: {xmlnsxlink: 'xmlns:xlink'},\n  transform: caseInsensitiveTransform,\n  properties: {xmlns: null, xmlnsXLink: null}\n})\n","import {booleanish, number, spaceSeparated} from './util/types.js'\nimport {create} from './util/create.js'\n\nexport const aria = create({\n  transform(_, prop) {\n    return prop === 'role' ? prop : 'aria-' + prop.slice(4).toLowerCase()\n  },\n  properties: {\n    ariaActiveDescendant: null,\n    ariaAtomic: booleanish,\n    ariaAutoComplete: null,\n    ariaBusy: booleanish,\n    ariaChecked: booleanish,\n    ariaColCount: number,\n    ariaColIndex: number,\n    ariaColSpan: number,\n    ariaControls: spaceSeparated,\n    ariaCurrent: null,\n    ariaDescribedBy: spaceSeparated,\n    ariaDetails: null,\n    ariaDisabled: booleanish,\n    ariaDropEffect: spaceSeparated,\n    ariaErrorMessage: null,\n    ariaExpanded: booleanish,\n    ariaFlowTo: spaceSeparated,\n    ariaGrabbed: booleanish,\n    ariaHasPopup: null,\n    ariaHidden: booleanish,\n    ariaInvalid: null,\n    ariaKeyShortcuts: null,\n    ariaLabel: null,\n    ariaLabelledBy: spaceSeparated,\n    ariaLevel: number,\n    ariaLive: null,\n    ariaModal: booleanish,\n    ariaMultiLine: booleanish,\n    ariaMultiSelectable: booleanish,\n    ariaOrientation: null,\n    ariaOwns: spaceSeparated,\n    ariaPlaceholder: null,\n    ariaPosInSet: number,\n    ariaPressed: booleanish,\n    ariaReadOnly: booleanish,\n    ariaRelevant: null,\n    ariaRequired: booleanish,\n    ariaRoleDescription: spaceSeparated,\n    ariaRowCount: number,\n    ariaRowIndex: number,\n    ariaRowSpan: number,\n    ariaSelected: booleanish,\n    ariaSetSize: number,\n    ariaSort: null,\n    ariaValueMax: number,\n    ariaValueMin: number,\n    ariaValueNow: number,\n    ariaValueText: null,\n    role: null\n  }\n})\n","import {\n  boolean,\n  overloadedBoolean,\n  booleanish,\n  number,\n  spaceSeparated,\n  commaSeparated\n} from './util/types.js'\nimport {create} from './util/create.js'\nimport {caseInsensitiveTransform} from './util/case-insensitive-transform.js'\n\nexport const html = create({\n  space: 'html',\n  attributes: {\n    acceptcharset: 'accept-charset',\n    classname: 'class',\n    htmlfor: 'for',\n    httpequiv: 'http-equiv'\n  },\n  transform: caseInsensitiveTransform,\n  mustUseProperty: ['checked', 'multiple', 'muted', 'selected'],\n  properties: {\n    // Standard Properties.\n    abbr: null,\n    accept: commaSeparated,\n    acceptCharset: spaceSeparated,\n    accessKey: spaceSeparated,\n    action: null,\n    allow: null,\n    allowFullScreen: boolean,\n    allowPaymentRequest: boolean,\n    allowUserMedia: boolean,\n    alt: null,\n    as: null,\n    async: boolean,\n    autoCapitalize: null,\n    autoComplete: spaceSeparated,\n    autoFocus: boolean,\n    autoPlay: boolean,\n    blocking: spaceSeparated,\n    capture: boolean,\n    charSet: null,\n    checked: boolean,\n    cite: null,\n    className: spaceSeparated,\n    cols: number,\n    colSpan: null,\n    content: null,\n    contentEditable: booleanish,\n    controls: boolean,\n    controlsList: spaceSeparated,\n    coords: number | commaSeparated,\n    crossOrigin: null,\n    data: null,\n    dateTime: null,\n    decoding: null,\n    default: boolean,\n    defer: boolean,\n    dir: null,\n    dirName: null,\n    disabled: boolean,\n    download: overloadedBoolean,\n    draggable: booleanish,\n    encType: null,\n    enterKeyHint: null,\n    fetchPriority: null,\n    form: null,\n    formAction: null,\n    formEncType: null,\n    formMethod: null,\n    formNoValidate: boolean,\n    formTarget: null,\n    headers: spaceSeparated,\n    height: number,\n    hidden: boolean,\n    high: number,\n    href: null,\n    hrefLang: null,\n    htmlFor: spaceSeparated,\n    httpEquiv: spaceSeparated,\n    id: null,\n    imageSizes: null,\n    imageSrcSet: null,\n    inert: boolean,\n    inputMode: null,\n    integrity: null,\n    is: null,\n    isMap: boolean,\n    itemId: null,\n    itemProp: spaceSeparated,\n    itemRef: spaceSeparated,\n    itemScope: boolean,\n    itemType: spaceSeparated,\n    kind: null,\n    label: null,\n    lang: null,\n    language: null,\n    list: null,\n    loading: null,\n    loop: boolean,\n    low: number,\n    manifest: null,\n    max: null,\n    maxLength: number,\n    media: null,\n    method: null,\n    min: null,\n    minLength: number,\n    multiple: boolean,\n    muted: boolean,\n    name: null,\n    nonce: null,\n    noModule: boolean,\n    noValidate: boolean,\n    onAbort: null,\n    onAfterPrint: null,\n    onAuxClick: null,\n    onBeforeMatch: null,\n    onBeforePrint: null,\n    onBeforeUnload: null,\n    onBlur: null,\n    onCancel: null,\n    onCanPlay: null,\n    onCanPlayThrough: null,\n    onChange: null,\n    onClick: null,\n    onClose: null,\n    onContextLost: null,\n    onContextMenu: null,\n    onContextRestored: null,\n    onCopy: null,\n    onCueChange: null,\n    onCut: null,\n    onDblClick: null,\n    onDrag: null,\n    onDragEnd: null,\n    onDragEnter: null,\n    onDragExit: null,\n    onDragLeave: null,\n    onDragOver: null,\n    onDragStart: null,\n    onDrop: null,\n    onDurationChange: null,\n    onEmptied: null,\n    onEnded: null,\n    onError: null,\n    onFocus: null,\n    onFormData: null,\n    onHashChange: null,\n    onInput: null,\n    onInvalid: null,\n    onKeyDown: null,\n    onKeyPress: null,\n    onKeyUp: null,\n    onLanguageChange: null,\n    onLoad: null,\n    onLoadedData: null,\n    onLoadedMetadata: null,\n    onLoadEnd: null,\n    onLoadStart: null,\n    onMessage: null,\n    onMessageError: null,\n    onMouseDown: null,\n    onMouseEnter: null,\n    onMouseLeave: null,\n    onMouseMove: null,\n    onMouseOut: null,\n    onMouseOver: null,\n    onMouseUp: null,\n    onOffline: null,\n    onOnline: null,\n    onPageHide: null,\n    onPageShow: null,\n    onPaste: null,\n    onPause: null,\n    onPlay: null,\n    onPlaying: null,\n    onPopState: null,\n    onProgress: null,\n    onRateChange: null,\n    onRejectionHandled: null,\n    onReset: null,\n    onResize: null,\n    onScroll: null,\n    onScrollEnd: null,\n    onSecurityPolicyViolation: null,\n    onSeeked: null,\n    onSeeking: null,\n    onSelect: null,\n    onSlotChange: null,\n    onStalled: null,\n    onStorage: null,\n    onSubmit: null,\n    onSuspend: null,\n    onTimeUpdate: null,\n    onToggle: null,\n    onUnhandledRejection: null,\n    onUnload: null,\n    onVolumeChange: null,\n    onWaiting: null,\n    onWheel: null,\n    open: boolean,\n    optimum: number,\n    pattern: null,\n    ping: spaceSeparated,\n    placeholder: null,\n    playsInline: boolean,\n    popover: null,\n    popoverTarget: null,\n    popoverTargetAction: null,\n    poster: null,\n    preload: null,\n    readOnly: boolean,\n    referrerPolicy: null,\n    rel: spaceSeparated,\n    required: boolean,\n    reversed: boolean,\n    rows: number,\n    rowSpan: number,\n    sandbox: spaceSeparated,\n    scope: null,\n    scoped: boolean,\n    seamless: boolean,\n    selected: boolean,\n    shape: null,\n    size: number,\n    sizes: null,\n    slot: null,\n    span: number,\n    spellCheck: booleanish,\n    src: null,\n    srcDoc: null,\n    srcLang: null,\n    srcSet: null,\n    start: number,\n    step: null,\n    style: null,\n    tabIndex: number,\n    target: null,\n    title: null,\n    translate: null,\n    type: null,\n    typeMustMatch: boolean,\n    useMap: null,\n    value: booleanish,\n    width: number,\n    wrap: null,\n\n    // Legacy.\n    // See: https://html.spec.whatwg.org/#other-elements,-attributes-and-apis\n    align: null, // Several. Use CSS `text-align` instead,\n    aLink: null, // `<body>`. Use CSS `a:active {color}` instead\n    archive: spaceSeparated, // `<object>`. List of URIs to archives\n    axis: null, // `<td>` and `<th>`. Use `scope` on `<th>`\n    background: null, // `<body>`. Use CSS `background-image` instead\n    bgColor: null, // `<body>` and table elements. Use CSS `background-color` instead\n    border: number, // `<table>`. Use CSS `border-width` instead,\n    borderColor: null, // `<table>`. Use CSS `border-color` instead,\n    bottomMargin: number, // `<body>`\n    cellPadding: null, // `<table>`\n    cellSpacing: null, // `<table>`\n    char: null, // Several table elements. When `align=char`, sets the character to align on\n    charOff: null, // Several table elements. When `char`, offsets the alignment\n    classId: null, // `<object>`\n    clear: null, // `<br>`. Use CSS `clear` instead\n    code: null, // `<object>`\n    codeBase: null, // `<object>`\n    codeType: null, // `<object>`\n    color: null, // `<font>` and `<hr>`. Use CSS instead\n    compact: boolean, // Lists. Use CSS to reduce space between items instead\n    declare: boolean, // `<object>`\n    event: null, // `<script>`\n    face: null, // `<font>`. Use CSS instead\n    frame: null, // `<table>`\n    frameBorder: null, // `<iframe>`. Use CSS `border` instead\n    hSpace: number, // `<img>` and `<object>`\n    leftMargin: number, // `<body>`\n    link: null, // `<body>`. Use CSS `a:link {color: *}` instead\n    longDesc: null, // `<frame>`, `<iframe>`, and `<img>`. Use an `<a>`\n    lowSrc: null, // `<img>`. Use a `<picture>`\n    marginHeight: number, // `<body>`\n    marginWidth: number, // `<body>`\n    noResize: boolean, // `<frame>`\n    noHref: boolean, // `<area>`. Use no href instead of an explicit `nohref`\n    noShade: boolean, // `<hr>`. Use background-color and height instead of borders\n    noWrap: boolean, // `<td>` and `<th>`\n    object: null, // `<applet>`\n    profile: null, // `<head>`\n    prompt: null, // `<isindex>`\n    rev: null, // `<link>`\n    rightMargin: number, // `<body>`\n    rules: null, // `<table>`\n    scheme: null, // `<meta>`\n    scrolling: booleanish, // `<frame>`. Use overflow in the child context\n    standby: null, // `<object>`\n    summary: null, // `<table>`\n    text: null, // `<body>`. Use CSS `color` instead\n    topMargin: number, // `<body>`\n    valueType: null, // `<param>`\n    version: null, // `<html>`. Use a doctype.\n    vAlign: null, // Several. Use CSS `vertical-align` instead\n    vLink: null, // `<body>`. Use CSS `a:visited {color}` instead\n    vSpace: number, // `<img>` and `<object>`\n\n    // Non-standard Properties.\n    allowTransparency: null,\n    autoCorrect: null,\n    autoSave: null,\n    disablePictureInPicture: boolean,\n    disableRemotePlayback: boolean,\n    prefix: null,\n    property: null,\n    results: number,\n    security: null,\n    unselectable: null\n  }\n})\n","import {\n  boolean,\n  number,\n  spaceSeparated,\n  commaSeparated,\n  commaOrSpaceSeparated\n} from './util/types.js'\nimport {create} from './util/create.js'\nimport {caseSensitiveTransform} from './util/case-sensitive-transform.js'\n\nexport const svg = create({\n  space: 'svg',\n  attributes: {\n    accentHeight: 'accent-height',\n    alignmentBaseline: 'alignment-baseline',\n    arabicForm: 'arabic-form',\n    baselineShift: 'baseline-shift',\n    capHeight: 'cap-height',\n    className: 'class',\n    clipPath: 'clip-path',\n    clipRule: 'clip-rule',\n    colorInterpolation: 'color-interpolation',\n    colorInterpolationFilters: 'color-interpolation-filters',\n    colorProfile: 'color-profile',\n    colorRendering: 'color-rendering',\n    crossOrigin: 'crossorigin',\n    dataType: 'datatype',\n    dominantBaseline: 'dominant-baseline',\n    enableBackground: 'enable-background',\n    fillOpacity: 'fill-opacity',\n    fillRule: 'fill-rule',\n    floodColor: 'flood-color',\n    floodOpacity: 'flood-opacity',\n    fontFamily: 'font-family',\n    fontSize: 'font-size',\n    fontSizeAdjust: 'font-size-adjust',\n    fontStretch: 'font-stretch',\n    fontStyle: 'font-style',\n    fontVariant: 'font-variant',\n    fontWeight: 'font-weight',\n    glyphName: 'glyph-name',\n    glyphOrientationHorizontal: 'glyph-orientation-horizontal',\n    glyphOrientationVertical: 'glyph-orientation-vertical',\n    hrefLang: 'hreflang',\n    horizAdvX: 'horiz-adv-x',\n    horizOriginX: 'horiz-origin-x',\n    horizOriginY: 'horiz-origin-y',\n    imageRendering: 'image-rendering',\n    letterSpacing: 'letter-spacing',\n    lightingColor: 'lighting-color',\n    markerEnd: 'marker-end',\n    markerMid: 'marker-mid',\n    markerStart: 'marker-start',\n    navDown: 'nav-down',\n    navDownLeft: 'nav-down-left',\n    navDownRight: 'nav-down-right',\n    navLeft: 'nav-left',\n    navNext: 'nav-next',\n    navPrev: 'nav-prev',\n    navRight: 'nav-right',\n    navUp: 'nav-up',\n    navUpLeft: 'nav-up-left',\n    navUpRight: 'nav-up-right',\n    onAbort: 'onabort',\n    onActivate: 'onactivate',\n    onAfterPrint: 'onafterprint',\n    onBeforePrint: 'onbeforeprint',\n    onBegin: 'onbegin',\n    onCancel: 'oncancel',\n    onCanPlay: 'oncanplay',\n    onCanPlayThrough: 'oncanplaythrough',\n    onChange: 'onchange',\n    onClick: 'onclick',\n    onClose: 'onclose',\n    onCopy: 'oncopy',\n    onCueChange: 'oncuechange',\n    onCut: 'oncut',\n    onDblClick: 'ondblclick',\n    onDrag: 'ondrag',\n    onDragEnd: 'ondragend',\n    onDragEnter: 'ondragenter',\n    onDragExit: 'ondragexit',\n    onDragLeave: 'ondragleave',\n    onDragOver: 'ondragover',\n    onDragStart: 'ondragstart',\n    onDrop: 'ondrop',\n    onDurationChange: 'ondurationchange',\n    onEmptied: 'onemptied',\n    onEnd: 'onend',\n    onEnded: 'onended',\n    onError: 'onerror',\n    onFocus: 'onfocus',\n    onFocusIn: 'onfocusin',\n    onFocusOut: 'onfocusout',\n    onHashChange: 'onhashchange',\n    onInput: 'oninput',\n    onInvalid: 'oninvalid',\n    onKeyDown: 'onkeydown',\n    onKeyPress: 'onkeypress',\n    onKeyUp: 'onkeyup',\n    onLoad: 'onload',\n    onLoadedData: 'onloadeddata',\n    onLoadedMetadata: 'onloadedmetadata',\n    onLoadStart: 'onloadstart',\n    onMessage: 'onmessage',\n    onMouseDown: 'onmousedown',\n    onMouseEnter: 'onmouseenter',\n    onMouseLeave: 'onmouseleave',\n    onMouseMove: 'onmousemove',\n    onMouseOut: 'onmouseout',\n    onMouseOver: 'onmouseover',\n    onMouseUp: 'onmouseup',\n    onMouseWheel: 'onmousewheel',\n    onOffline: 'onoffline',\n    onOnline: 'ononline',\n    onPageHide: 'onpagehide',\n    onPageShow: 'onpageshow',\n    onPaste: 'onpaste',\n    onPause: 'onpause',\n    onPlay: 'onplay',\n    onPlaying: 'onplaying',\n    onPopState: 'onpopstate',\n    onProgress: 'onprogress',\n    onRateChange: 'onratechange',\n    onRepeat: 'onrepeat',\n    onReset: 'onreset',\n    onResize: 'onresize',\n    onScroll: 'onscroll',\n    onSeeked: 'onseeked',\n    onSeeking: 'onseeking',\n    onSelect: 'onselect',\n    onShow: 'onshow',\n    onStalled: 'onstalled',\n    onStorage: 'onstorage',\n    onSubmit: 'onsubmit',\n    onSuspend: 'onsuspend',\n    onTimeUpdate: 'ontimeupdate',\n    onToggle: 'ontoggle',\n    onUnload: 'onunload',\n    onVolumeChange: 'onvolumechange',\n    onWaiting: 'onwaiting',\n    onZoom: 'onzoom',\n    overlinePosition: 'overline-position',\n    overlineThickness: 'overline-thickness',\n    paintOrder: 'paint-order',\n    panose1: 'panose-1',\n    pointerEvents: 'pointer-events',\n    referrerPolicy: 'referrerpolicy',\n    renderingIntent: 'rendering-intent',\n    shapeRendering: 'shape-rendering',\n    stopColor: 'stop-color',\n    stopOpacity: 'stop-opacity',\n    strikethroughPosition: 'strikethrough-position',\n    strikethroughThickness: 'strikethrough-thickness',\n    strokeDashArray: 'stroke-dasharray',\n    strokeDashOffset: 'stroke-dashoffset',\n    strokeLineCap: 'stroke-linecap',\n    strokeLineJoin: 'stroke-linejoin',\n    strokeMiterLimit: 'stroke-miterlimit',\n    strokeOpacity: 'stroke-opacity',\n    strokeWidth: 'stroke-width',\n    tabIndex: 'tabindex',\n    textAnchor: 'text-anchor',\n    textDecoration: 'text-decoration',\n    textRendering: 'text-rendering',\n    transformOrigin: 'transform-origin',\n    typeOf: 'typeof',\n    underlinePosition: 'underline-position',\n    underlineThickness: 'underline-thickness',\n    unicodeBidi: 'unicode-bidi',\n    unicodeRange: 'unicode-range',\n    unitsPerEm: 'units-per-em',\n    vAlphabetic: 'v-alphabetic',\n    vHanging: 'v-hanging',\n    vIdeographic: 'v-ideographic',\n    vMathematical: 'v-mathematical',\n    vectorEffect: 'vector-effect',\n    vertAdvY: 'vert-adv-y',\n    vertOriginX: 'vert-origin-x',\n    vertOriginY: 'vert-origin-y',\n    wordSpacing: 'word-spacing',\n    writingMode: 'writing-mode',\n    xHeight: 'x-height',\n    // These were camelcased in Tiny. Now lowercased in SVG 2\n    playbackOrder: 'playbackorder',\n    timelineBegin: 'timelinebegin'\n  },\n  transform: caseSensitiveTransform,\n  properties: {\n    about: commaOrSpaceSeparated,\n    accentHeight: number,\n    accumulate: null,\n    additive: null,\n    alignmentBaseline: null,\n    alphabetic: number,\n    amplitude: number,\n    arabicForm: null,\n    ascent: number,\n    attributeName: null,\n    attributeType: null,\n    azimuth: number,\n    bandwidth: null,\n    baselineShift: null,\n    baseFrequency: null,\n    baseProfile: null,\n    bbox: null,\n    begin: null,\n    bias: number,\n    by: null,\n    calcMode: null,\n    capHeight: number,\n    className: spaceSeparated,\n    clip: null,\n    clipPath: null,\n    clipPathUnits: null,\n    clipRule: null,\n    color: null,\n    colorInterpolation: null,\n    colorInterpolationFilters: null,\n    colorProfile: null,\n    colorRendering: null,\n    content: null,\n    contentScriptType: null,\n    contentStyleType: null,\n    crossOrigin: null,\n    cursor: null,\n    cx: null,\n    cy: null,\n    d: null,\n    dataType: null,\n    defaultAction: null,\n    descent: number,\n    diffuseConstant: number,\n    direction: null,\n    display: null,\n    dur: null,\n    divisor: number,\n    dominantBaseline: null,\n    download: boolean,\n    dx: null,\n    dy: null,\n    edgeMode: null,\n    editable: null,\n    elevation: number,\n    enableBackground: null,\n    end: null,\n    event: null,\n    exponent: number,\n    externalResourcesRequired: null,\n    fill: null,\n    fillOpacity: number,\n    fillRule: null,\n    filter: null,\n    filterRes: null,\n    filterUnits: null,\n    floodColor: null,\n    floodOpacity: null,\n    focusable: null,\n    focusHighlight: null,\n    fontFamily: null,\n    fontSize: null,\n    fontSizeAdjust: null,\n    fontStretch: null,\n    fontStyle: null,\n    fontVariant: null,\n    fontWeight: null,\n    format: null,\n    fr: null,\n    from: null,\n    fx: null,\n    fy: null,\n    g1: commaSeparated,\n    g2: commaSeparated,\n    glyphName: commaSeparated,\n    glyphOrientationHorizontal: null,\n    glyphOrientationVertical: null,\n    glyphRef: null,\n    gradientTransform: null,\n    gradientUnits: null,\n    handler: null,\n    hanging: number,\n    hatchContentUnits: null,\n    hatchUnits: null,\n    height: null,\n    href: null,\n    hrefLang: null,\n    horizAdvX: number,\n    horizOriginX: number,\n    horizOriginY: number,\n    id: null,\n    ideographic: number,\n    imageRendering: null,\n    initialVisibility: null,\n    in: null,\n    in2: null,\n    intercept: number,\n    k: number,\n    k1: number,\n    k2: number,\n    k3: number,\n    k4: number,\n    kernelMatrix: commaOrSpaceSeparated,\n    kernelUnitLength: null,\n    keyPoints: null, // SEMI_COLON_SEPARATED\n    keySplines: null, // SEMI_COLON_SEPARATED\n    keyTimes: null, // SEMI_COLON_SEPARATED\n    kerning: null,\n    lang: null,\n    lengthAdjust: null,\n    letterSpacing: null,\n    lightingColor: null,\n    limitingConeAngle: number,\n    local: null,\n    markerEnd: null,\n    markerMid: null,\n    markerStart: null,\n    markerHeight: null,\n    markerUnits: null,\n    markerWidth: null,\n    mask: null,\n    maskContentUnits: null,\n    maskUnits: null,\n    mathematical: null,\n    max: null,\n    media: null,\n    mediaCharacterEncoding: null,\n    mediaContentEncodings: null,\n    mediaSize: number,\n    mediaTime: null,\n    method: null,\n    min: null,\n    mode: null,\n    name: null,\n    navDown: null,\n    navDownLeft: null,\n    navDownRight: null,\n    navLeft: null,\n    navNext: null,\n    navPrev: null,\n    navRight: null,\n    navUp: null,\n    navUpLeft: null,\n    navUpRight: null,\n    numOctaves: null,\n    observer: null,\n    offset: null,\n    onAbort: null,\n    onActivate: null,\n    onAfterPrint: null,\n    onBeforePrint: null,\n    onBegin: null,\n    onCancel: null,\n    onCanPlay: null,\n    onCanPlayThrough: null,\n    onChange: null,\n    onClick: null,\n    onClose: null,\n    onCopy: null,\n    onCueChange: null,\n    onCut: null,\n    onDblClick: null,\n    onDrag: null,\n    onDragEnd: null,\n    onDragEnter: null,\n    onDragExit: null,\n    onDragLeave: null,\n    onDragOver: null,\n    onDragStart: null,\n    onDrop: null,\n    onDurationChange: null,\n    onEmptied: null,\n    onEnd: null,\n    onEnded: null,\n    onError: null,\n    onFocus: null,\n    onFocusIn: null,\n    onFocusOut: null,\n    onHashChange: null,\n    onInput: null,\n    onInvalid: null,\n    onKeyDown: null,\n    onKeyPress: null,\n    onKeyUp: null,\n    onLoad: null,\n    onLoadedData: null,\n    onLoadedMetadata: null,\n    onLoadStart: null,\n    onMessage: null,\n    onMouseDown: null,\n    onMouseEnter: null,\n    onMouseLeave: null,\n    onMouseMove: null,\n    onMouseOut: null,\n    onMouseOver: null,\n    onMouseUp: null,\n    onMouseWheel: null,\n    onOffline: null,\n    onOnline: null,\n    onPageHide: null,\n    onPageShow: null,\n    onPaste: null,\n    onPause: null,\n    onPlay: null,\n    onPlaying: null,\n    onPopState: null,\n    onProgress: null,\n    onRateChange: null,\n    onRepeat: null,\n    onReset: null,\n    onResize: null,\n    onScroll: null,\n    onSeeked: null,\n    onSeeking: null,\n    onSelect: null,\n    onShow: null,\n    onStalled: null,\n    onStorage: null,\n    onSubmit: null,\n    onSuspend: null,\n    onTimeUpdate: null,\n    onToggle: null,\n    onUnload: null,\n    onVolumeChange: null,\n    onWaiting: null,\n    onZoom: null,\n    opacity: null,\n    operator: null,\n    order: null,\n    orient: null,\n    orientation: null,\n    origin: null,\n    overflow: null,\n    overlay: null,\n    overlinePosition: number,\n    overlineThickness: number,\n    paintOrder: null,\n    panose1: null,\n    path: null,\n    pathLength: number,\n    patternContentUnits: null,\n    patternTransform: null,\n    patternUnits: null,\n    phase: null,\n    ping: spaceSeparated,\n    pitch: null,\n    playbackOrder: null,\n    pointerEvents: null,\n    points: null,\n    pointsAtX: number,\n    pointsAtY: number,\n    pointsAtZ: number,\n    preserveAlpha: null,\n    preserveAspectRatio: null,\n    primitiveUnits: null,\n    propagate: null,\n    property: commaOrSpaceSeparated,\n    r: null,\n    radius: null,\n    referrerPolicy: null,\n    refX: null,\n    refY: null,\n    rel: commaOrSpaceSeparated,\n    rev: commaOrSpaceSeparated,\n    renderingIntent: null,\n    repeatCount: null,\n    repeatDur: null,\n    requiredExtensions: commaOrSpaceSeparated,\n    requiredFeatures: commaOrSpaceSeparated,\n    requiredFonts: commaOrSpaceSeparated,\n    requiredFormats: commaOrSpaceSeparated,\n    resource: null,\n    restart: null,\n    result: null,\n    rotate: null,\n    rx: null,\n    ry: null,\n    scale: null,\n    seed: null,\n    shapeRendering: null,\n    side: null,\n    slope: null,\n    snapshotTime: null,\n    specularConstant: number,\n    specularExponent: number,\n    spreadMethod: null,\n    spacing: null,\n    startOffset: null,\n    stdDeviation: null,\n    stemh: null,\n    stemv: null,\n    stitchTiles: null,\n    stopColor: null,\n    stopOpacity: null,\n    strikethroughPosition: number,\n    strikethroughThickness: number,\n    string: null,\n    stroke: null,\n    strokeDashArray: commaOrSpaceSeparated,\n    strokeDashOffset: null,\n    strokeLineCap: null,\n    strokeLineJoin: null,\n    strokeMiterLimit: number,\n    strokeOpacity: number,\n    strokeWidth: null,\n    style: null,\n    surfaceScale: number,\n    syncBehavior: null,\n    syncBehaviorDefault: null,\n    syncMaster: null,\n    syncTolerance: null,\n    syncToleranceDefault: null,\n    systemLanguage: commaOrSpaceSeparated,\n    tabIndex: number,\n    tableValues: null,\n    target: null,\n    targetX: number,\n    targetY: number,\n    textAnchor: null,\n    textDecoration: null,\n    textRendering: null,\n    textLength: null,\n    timelineBegin: null,\n    title: null,\n    transformBehavior: null,\n    type: null,\n    typeOf: commaOrSpaceSeparated,\n    to: null,\n    transform: null,\n    transformOrigin: null,\n    u1: null,\n    u2: null,\n    underlinePosition: number,\n    underlineThickness: number,\n    unicode: null,\n    unicodeBidi: null,\n    unicodeRange: null,\n    unitsPerEm: number,\n    values: null,\n    vAlphabetic: number,\n    vMathematical: number,\n    vectorEffect: null,\n    vHanging: number,\n    vIdeographic: number,\n    version: null,\n    vertAdvY: number,\n    vertOriginX: number,\n    vertOriginY: number,\n    viewBox: null,\n    viewTarget: null,\n    visibility: null,\n    width: null,\n    widths: null,\n    wordSpacing: null,\n    writingMode: null,\n    x: null,\n    x1: null,\n    x2: null,\n    xChannelSelector: null,\n    xHeight: number,\n    y: null,\n    y1: null,\n    y2: null,\n    yChannelSelector: null,\n    z: null,\n    zoomAndPan: null\n  }\n})\n","/**\n * @typedef {import('./lib/util/info.js').Info} Info\n * @typedef {import('./lib/util/schema.js').Schema} Schema\n */\n\nimport {merge} from './lib/util/merge.js'\nimport {xlink} from './lib/xlink.js'\nimport {xml} from './lib/xml.js'\nimport {xmlns} from './lib/xmlns.js'\nimport {aria} from './lib/aria.js'\nimport {html as htmlBase} from './lib/html.js'\nimport {svg as svgBase} from './lib/svg.js'\n\nexport {find} from './lib/find.js'\nexport {hastToReact} from './lib/hast-to-react.js'\nexport {normalize} from './lib/normalize.js'\nexport const html = merge([xml, xlink, xmlns, aria, htmlBase], 'html')\nexport const svg = merge([xml, xlink, xmlns, aria, svgBase], 'svg')\n","/**\n * @typedef {import('./util/schema.js').Schema} Schema\n */\n\nimport {normalize} from './normalize.js'\nimport {DefinedInfo} from './util/defined-info.js'\nimport {Info} from './util/info.js'\n\nconst valid = /^data[-\\w.:]+$/i\nconst dash = /-[a-z]/g\nconst cap = /[A-Z]/g\n\n/**\n * @param {Schema} schema\n * @param {string} value\n * @returns {Info}\n */\nexport function find(schema, value) {\n  const normal = normalize(value)\n  let prop = value\n  let Type = Info\n\n  if (normal in schema.normal) {\n    return schema.property[schema.normal[normal]]\n  }\n\n  if (normal.length > 4 && normal.slice(0, 4) === 'data' && valid.test(value)) {\n    // Attribute or property.\n    if (value.charAt(4) === '-') {\n      // Turn it into a property.\n      const rest = value.slice(5).replace(dash, camelcase)\n      prop = 'data' + rest.charAt(0).toUpperCase() + rest.slice(1)\n    } else {\n      // Turn it into an attribute.\n      const rest = value.slice(4)\n\n      if (!dash.test(rest)) {\n        let dashes = rest.replace(cap, kebab)\n\n        if (dashes.charAt(0) !== '-') {\n          dashes = '-' + dashes\n        }\n\n        value = 'data' + dashes\n      }\n    }\n\n    Type = DefinedInfo\n  }\n\n  return new Type(prop, value)\n}\n\n/**\n * @param {string} $0\n * @returns {string}\n */\nfunction kebab($0) {\n  return '-' + $0.toLowerCase()\n}\n\n/**\n * @param {string} $0\n * @returns {string}\n */\nfunction camelcase($0) {\n  return $0.charAt(1).toUpperCase()\n}\n","/**\n * `hast` is close to `React`, but differs in a couple of cases.\n *\n * To get a React property from a hast property, check if it is in\n * `hastToReact`, if it is, then use the corresponding value,\n * otherwise, use the hast property.\n *\n * @type {Record<string, string>}\n */\nexport const hastToReact = {\n  classId: 'classID',\n  dataType: 'datatype',\n  itemId: 'itemID',\n  strokeDashArray: 'strokeDasharray',\n  strokeDashOffset: 'strokeDashoffset',\n  strokeLineCap: 'strokeLinecap',\n  strokeLineJoin: 'strokeLinejoin',\n  strokeMiterLimit: 'strokeMiterlimit',\n  typeOf: 'typeof',\n  xLinkActuate: 'xlinkActuate',\n  xLinkArcRole: 'xlinkArcrole',\n  xLinkHref: 'xlinkHref',\n  xLinkRole: 'xlinkRole',\n  xLinkShow: 'xlinkShow',\n  xLinkTitle: 'xlinkTitle',\n  xLinkType: 'xlinkType',\n  xmlnsXLink: 'xmlnsXlink'\n}\n","import StyleToObject from './index.js';\n\nexport default StyleToObject;\n","/**\n * @typedef {import('unist').Node} Node\n * @typedef {import('unist').Point} Point\n * @typedef {import('unist').Position} Position\n */\n\n/**\n * @typedef NodeLike\n * @property {string} type\n * @property {PositionLike | null | undefined} [position]\n *\n * @typedef PositionLike\n * @property {PointLike | null | undefined} [start]\n * @property {PointLike | null | undefined} [end]\n *\n * @typedef PointLike\n * @property {number | null | undefined} [line]\n * @property {number | null | undefined} [column]\n * @property {number | null | undefined} [offset]\n */\n\n/**\n * Get the ending point of `node`.\n *\n * @param node\n *   Node.\n * @returns\n *   Point.\n */\nexport const pointEnd = point('end')\n\n/**\n * Get the starting point of `node`.\n *\n * @param node\n *   Node.\n * @returns\n *   Point.\n */\nexport const pointStart = point('start')\n\n/**\n * Get the positional info of `node`.\n *\n * @param {'end' | 'start'} type\n *   Side.\n * @returns\n *   Getter.\n */\nfunction point(type) {\n  return point\n\n  /**\n   * Get the point info of `node` at a bound side.\n   *\n   * @param {Node | NodeLike | null | undefined} [node]\n   * @returns {Point | undefined}\n   */\n  function point(node) {\n    const point = (node && node.position && node.position[type]) || {}\n\n    if (\n      typeof point.line === 'number' &&\n      point.line > 0 &&\n      typeof point.column === 'number' &&\n      point.column > 0\n    ) {\n      return {\n        line: point.line,\n        column: point.column,\n        offset:\n          typeof point.offset === 'number' && point.offset > -1\n            ? point.offset\n            : undefined\n      }\n    }\n  }\n}\n\n/**\n * Get the positional info of `node`.\n *\n * @param {Node | NodeLike | null | undefined} [node]\n *   Node.\n * @returns {Position | undefined}\n *   Position.\n */\nexport function position(node) {\n  const start = pointStart(node)\n  const end = pointEnd(node)\n\n  if (start && end) {\n    return {start, end}\n  }\n}\n","import setPrototypeOf from \"./setPrototypeOf.js\";\nimport isNativeReflectConstruct from \"./isNativeReflectConstruct.js\";\nexport default function _construct(Parent, args, Class) {\n  if (isNativeReflectConstruct()) {\n    _construct = Reflect.construct.bind();\n  } else {\n    _construct = function _construct(Parent, args, Class) {\n      var a = [null];\n      a.push.apply(a, args);\n      var Constructor = Function.bind.apply(Parent, a);\n      var instance = new Constructor();\n      if (Class) setPrototypeOf(instance, Class.prototype);\n      return instance;\n    };\n  }\n  return _construct.apply(null, arguments);\n}","import getPrototypeOf from \"./getPrototypeOf.js\";\nimport setPrototypeOf from \"./setPrototypeOf.js\";\nimport isNativeFunction from \"./isNativeFunction.js\";\nimport construct from \"./construct.js\";\nexport default function _wrapNativeSuper(Class) {\n  var _cache = typeof Map === \"function\" ? new Map() : undefined;\n  _wrapNativeSuper = function _wrapNativeSuper(Class) {\n    if (Class === null || !isNativeFunction(Class)) return Class;\n    if (typeof Class !== \"function\") {\n      throw new TypeError(\"Super expression must either be null or a function\");\n    }\n    if (typeof _cache !== \"undefined\") {\n      if (_cache.has(Class)) return _cache.get(Class);\n      _cache.set(Class, Wrapper);\n    }\n    function Wrapper() {\n      return construct(Class, arguments, getPrototypeOf(this).constructor);\n    }\n    Wrapper.prototype = Object.create(Class.prototype, {\n      constructor: {\n        value: Wrapper,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    return setPrototypeOf(Wrapper, Class);\n  };\n  return _wrapNativeSuper(Class);\n}","export default function _isNativeFunction(fn) {\n  try {\n    return Function.toString.call(fn).indexOf(\"[native code]\") !== -1;\n  } catch (e) {\n    return typeof fn === \"function\";\n  }\n}","/**\n * @typedef {import('unist').Node} Node\n * @typedef {import('unist').Point} Point\n * @typedef {import('unist').Position} Position\n */\n\n/**\n * @typedef NodeLike\n * @property {string} type\n * @property {PositionLike | null | undefined} [position]\n *\n * @typedef PointLike\n * @property {number | null | undefined} [line]\n * @property {number | null | undefined} [column]\n * @property {number | null | undefined} [offset]\n *\n * @typedef PositionLike\n * @property {PointLike | null | undefined} [start]\n * @property {PointLike | null | undefined} [end]\n */\n\n/**\n * Serialize the positional info of a point, position (start and end points),\n * or node.\n *\n * @param {Node | NodeLike | Point | PointLike | Position | PositionLike | null | undefined} [value]\n *   Node, position, or point.\n * @returns {string}\n *   Pretty printed positional info of a node (`string`).\n *\n *   In the format of a range `ls:cs-le:ce` (when given `node` or `position`)\n *   or a point `l:c` (when given `point`), where `l` stands for line, `c` for\n *   column, `s` for `start`, and `e` for end.\n *   An empty string (`''`) is returned if the given value is neither `node`,\n *   `position`, nor `point`.\n */\nexport function stringifyPosition(value) {\n  // Nothing.\n  if (!value || typeof value !== 'object') {\n    return ''\n  }\n\n  // Node.\n  if ('position' in value || 'type' in value) {\n    return position(value.position)\n  }\n\n  // Position.\n  if ('start' in value || 'end' in value) {\n    return position(value)\n  }\n\n  // Point.\n  if ('line' in value || 'column' in value) {\n    return point(value)\n  }\n\n  // ?\n  return ''\n}\n\n/**\n * @param {Point | PointLike | null | undefined} point\n * @returns {string}\n */\nfunction point(point) {\n  return index(point && point.line) + ':' + index(point && point.column)\n}\n\n/**\n * @param {Position | PositionLike | null | undefined} pos\n * @returns {string}\n */\nfunction position(pos) {\n  return point(pos && pos.start) + '-' + point(pos && pos.end)\n}\n\n/**\n * @param {number | null | undefined} value\n * @returns {number}\n */\nfunction index(value) {\n  return value && typeof value === 'number' ? value : 1\n}\n","/**\n * @typedef {import('unist').Node} Node\n * @typedef {import('unist').Point} Point\n * @typedef {import('unist').Position} Position\n */\n\n/**\n * @typedef {object & {type: string, position?: Position | undefined}} NodeLike\n *\n * @typedef Options\n *   Configuration.\n * @property {Array<Node> | null | undefined} [ancestors]\n *   Stack of (inclusive) ancestor nodes surrounding the message (optional).\n * @property {Error | null | undefined} [cause]\n *   Original error cause of the message (optional).\n * @property {Point | Position | null | undefined} [place]\n *   Place of message (optional).\n * @property {string | null | undefined} [ruleId]\n *   Category of message (optional, example: `'my-rule'`).\n * @property {string | null | undefined} [source]\n *   Namespace of who sent the message (optional, example: `'my-package'`).\n */\n\nimport {stringifyPosition} from 'unist-util-stringify-position'\n\n/**\n * Message.\n */\nexport class VFileMessage extends Error {\n  /**\n   * Create a message for `reason`.\n   *\n   * > 🪦 **Note**: also has obsolete signatures.\n   *\n   * @overload\n   * @param {string} reason\n   * @param {Options | null | undefined} [options]\n   * @returns\n   *\n   * @overload\n   * @param {string} reason\n   * @param {Node | NodeLike | null | undefined} parent\n   * @param {string | null | undefined} [origin]\n   * @returns\n   *\n   * @overload\n   * @param {string} reason\n   * @param {Point | Position | null | undefined} place\n   * @param {string | null | undefined} [origin]\n   * @returns\n   *\n   * @overload\n   * @param {string} reason\n   * @param {string | null | undefined} [origin]\n   * @returns\n   *\n   * @overload\n   * @param {Error | VFileMessage} cause\n   * @param {Node | NodeLike | null | undefined} parent\n   * @param {string | null | undefined} [origin]\n   * @returns\n   *\n   * @overload\n   * @param {Error | VFileMessage} cause\n   * @param {Point | Position | null | undefined} place\n   * @param {string | null | undefined} [origin]\n   * @returns\n   *\n   * @overload\n   * @param {Error | VFileMessage} cause\n   * @param {string | null | undefined} [origin]\n   * @returns\n   *\n   * @param {Error | VFileMessage | string} causeOrReason\n   *   Reason for message, should use markdown.\n   * @param {Node | NodeLike | Options | Point | Position | string | null | undefined} [optionsOrParentOrPlace]\n   *   Configuration (optional).\n   * @param {string | null | undefined} [origin]\n   *   Place in code where the message originates (example:\n   *   `'my-package:my-rule'` or `'my-rule'`).\n   * @returns\n   *   Instance of `VFileMessage`.\n   */\n  // eslint-disable-next-line complexity\n  constructor(causeOrReason, optionsOrParentOrPlace, origin) {\n    super()\n\n    if (typeof optionsOrParentOrPlace === 'string') {\n      origin = optionsOrParentOrPlace\n      optionsOrParentOrPlace = undefined\n    }\n\n    /** @type {string} */\n    let reason = ''\n    /** @type {Options} */\n    let options = {}\n    let legacyCause = false\n\n    if (optionsOrParentOrPlace) {\n      // Point.\n      if (\n        'line' in optionsOrParentOrPlace &&\n        'column' in optionsOrParentOrPlace\n      ) {\n        options = {place: optionsOrParentOrPlace}\n      }\n      // Position.\n      else if (\n        'start' in optionsOrParentOrPlace &&\n        'end' in optionsOrParentOrPlace\n      ) {\n        options = {place: optionsOrParentOrPlace}\n      }\n      // Node.\n      else if ('type' in optionsOrParentOrPlace) {\n        options = {\n          ancestors: [optionsOrParentOrPlace],\n          place: optionsOrParentOrPlace.position\n        }\n      }\n      // Options.\n      else {\n        options = {...optionsOrParentOrPlace}\n      }\n    }\n\n    if (typeof causeOrReason === 'string') {\n      reason = causeOrReason\n    }\n    // Error.\n    else if (!options.cause && causeOrReason) {\n      legacyCause = true\n      reason = causeOrReason.message\n      options.cause = causeOrReason\n    }\n\n    if (!options.ruleId && !options.source && typeof origin === 'string') {\n      const index = origin.indexOf(':')\n\n      if (index === -1) {\n        options.ruleId = origin\n      } else {\n        options.source = origin.slice(0, index)\n        options.ruleId = origin.slice(index + 1)\n      }\n    }\n\n    if (!options.place && options.ancestors && options.ancestors) {\n      const parent = options.ancestors[options.ancestors.length - 1]\n\n      if (parent) {\n        options.place = parent.position\n      }\n    }\n\n    const start =\n      options.place && 'start' in options.place\n        ? options.place.start\n        : options.place\n\n    /* eslint-disable no-unused-expressions */\n    /**\n     * Stack of ancestor nodes surrounding the message.\n     *\n     * @type {Array<Node> | undefined}\n     */\n    this.ancestors = options.ancestors || undefined\n\n    /**\n     * Original error cause of the message.\n     *\n     * @type {Error | undefined}\n     */\n    this.cause = options.cause || undefined\n\n    /**\n     * Starting column of message.\n     *\n     * @type {number | undefined}\n     */\n    this.column = start ? start.column : undefined\n\n    /**\n     * State of problem.\n     *\n     * * `true` — error, file not usable\n     * * `false` — warning, change may be needed\n     * * `undefined` — change likely not needed\n     *\n     * @type {boolean | null | undefined}\n     */\n    this.fatal = undefined\n\n    /**\n     * Path of a file (used throughout the `VFile` ecosystem).\n     *\n     * @type {string | undefined}\n     */\n    this.file\n\n    // Field from `Error`.\n    /**\n     * Reason for message.\n     *\n     * @type {string}\n     */\n    this.message = reason\n\n    /**\n     * Starting line of error.\n     *\n     * @type {number | undefined}\n     */\n    this.line = start ? start.line : undefined\n\n    // Field from `Error`.\n    /**\n     * Serialized positional info of message.\n     *\n     * On normal errors, this would be something like `ParseError`, buit in\n     * `VFile` messages we use this space to show where an error happened.\n     */\n    this.name = stringifyPosition(options.place) || '1:1'\n\n    /**\n     * Place of message.\n     *\n     * @type {Point | Position | undefined}\n     */\n    this.place = options.place || undefined\n\n    /**\n     * Reason for message, should use markdown.\n     *\n     * @type {string}\n     */\n    this.reason = this.message\n\n    /**\n     * Category of message (example: `'my-rule'`).\n     *\n     * @type {string | undefined}\n     */\n    this.ruleId = options.ruleId || undefined\n\n    /**\n     * Namespace of message (example: `'my-package'`).\n     *\n     * @type {string | undefined}\n     */\n    this.source = options.source || undefined\n\n    // Field from `Error`.\n    /**\n     * Stack of message.\n     *\n     * This is used by normal errors to show where something happened in\n     * programming code, irrelevant for `VFile` messages,\n     *\n     * @type {string}\n     */\n    this.stack =\n      legacyCause && options.cause && typeof options.cause.stack === 'string'\n        ? options.cause.stack\n        : ''\n\n    // The following fields are “well known”.\n    // Not standard.\n    // Feel free to add other non-standard fields to your messages.\n\n    /**\n     * Specify the source value that’s being reported, which is deemed\n     * incorrect.\n     *\n     * @type {string | undefined}\n     */\n    this.actual\n\n    /**\n     * Suggest acceptable values that can be used instead of `actual`.\n     *\n     * @type {Array<string> | undefined}\n     */\n    this.expected\n\n    /**\n     * Long form description of the message (you should use markdown).\n     *\n     * @type {string | undefined}\n     */\n    this.note\n\n    /**\n     * Link to docs for the message.\n     *\n     * > 👉 **Note**: this must be an absolute URL that can be passed as `x`\n     * > to `new URL(x)`.\n     *\n     * @type {string | undefined}\n     */\n    this.url\n    /* eslint-enable no-unused-expressions */\n  }\n}\n\nVFileMessage.prototype.file = ''\nVFileMessage.prototype.name = ''\nVFileMessage.prototype.reason = ''\nVFileMessage.prototype.message = ''\nVFileMessage.prototype.stack = ''\nVFileMessage.prototype.column = undefined\nVFileMessage.prototype.line = undefined\nVFileMessage.prototype.ancestors = undefined\nVFileMessage.prototype.cause = undefined\nVFileMessage.prototype.fatal = undefined\nVFileMessage.prototype.place = undefined\nVFileMessage.prototype.ruleId = undefined\nVFileMessage.prototype.source = undefined\n","/**\n * @typedef {import('hast').Element} Element\n * @typedef {import('hast').Nodes} Nodes\n * @typedef {import('hast').Parents} Parents\n *\n * @typedef {import('property-information').Schema} Schema\n *\n * @typedef {import('./components.js').Components} Components\n */\n\n/**\n * @typedef {JSX.Element | string | null | undefined} Child\n *   Child.\n *\n * @callback Create\n *   Create something in development or production.\n * @param {Nodes} node\n *   hast node.\n * @param {unknown} type\n *   Fragment symbol or tag name.\n * @param {Props} props\n *   Properties and children.\n * @param {string | undefined} key\n *   Key.\n * @returns {JSX.Element}\n *   Result.\n *\n * @typedef {'html' | 'react'} ElementAttributeNameCase\n *   Casing to use for attribute names.\n *\n *   HTML casing is for example `class`, `stroke-linecap`, `xml:lang`.\n *   React casing is for example `className`, `strokeLinecap`, `xmlLang`.\n *\n * @typedef {[string, Value]} Field\n *   Property field.\n *\n * @typedef {unknown} Fragment\n *   Represent the children, typically a symbol.\n *\n * @callback Jsx\n *   Create a production element.\n * @param {unknown} type\n *   Element type: `Fragment` symbol, tag name (`string`), component.\n * @param {Props} props\n *   Element props, `children`, and maybe `node`.\n * @param {string | undefined} [key]\n *   Dynamicly generated key to use.\n * @returns {JSX.Element}\n *   An element from your framework.\n *\n * @callback JsxDev\n *   Create a development element.\n * @param {unknown} type\n *   Element type: `Fragment` symbol, tag name (`string`), component.\n * @param {Props} props\n *   Element props, `children`, and maybe `node`.\n * @param {string | undefined} key\n *   Dynamicly generated key to use.\n * @param {boolean} isStaticChildren\n *   Whether two or more children are passed (in an array), which is whether\n *   `jsxs` or `jsx` would be used.\n * @param {Source} source\n *   Info about source.\n * @param {undefined} self\n *   Nothing (this is used by frameworks that have components, we don’t).\n * @returns {JSX.Element}\n *   An element from your framework.\n *\n * @typedef {{children?: Array<Child> | Child, node?: Element | undefined, [prop: string]: Array<Child> | Child | Element | Value | undefined}} Props\n *   Properties and children.\n *\n * @typedef RegularFields\n *   Configuration.\n * @property {Partial<Components> | null | undefined} [components]\n *   Components to use (optional).\n * @property {ElementAttributeNameCase | null | undefined} [elementAttributeNameCase='react']\n *   Specify casing to use for attribute names (default: `'react'`).\n * @property {string | null | undefined} [filePath]\n *   File path to the original source file (optional).\n *\n *   Passed in source info to `jsxDEV` when using the automatic runtime with\n *   `development: true`.\n * @property {boolean | null | undefined} [ignoreInvalidStyle=false]\n *   Ignore invalid CSS in `style` props (default: `false`);\n *   the default behavior is to throw an error.\n * @property {boolean | null | undefined} [passKeys=true]\n *   Generate keys to optimize frameworks that support them (default: `true`).\n *\n *   > 👉 **Note**: Solid currently fails if keys are passed.\n * @property {boolean | null | undefined} [passNode=false]\n *   Pass the hast element node to components (default: `false`).\n * @property {Space | null | undefined} [space='html']\n *   Whether `tree` is in the `'html'` or `'svg'` space (default: `'html'`).\n *\n *   When an `<svg>` element is found in the HTML space, this package already\n *   automatically switches to and from the SVG space when entering and exiting\n *   it.\n * @property {StylePropertyNameCase | null | undefined} [stylePropertyNameCase='dom']\n *   Specify casing to use for property names in `style` objects (default:\n *   `'dom'`).\n * @property {boolean | null | undefined} [tableCellAlignToStyle=true]\n *   Turn obsolete `align` props on `td` and `th` into CSS `style` props\n *   (default: `true`).\n *\n * @typedef RuntimeDevelopment\n *   Runtime fields when development is on.\n * @property {Fragment} Fragment\n *   Fragment.\n * @property {true} development\n *   Whether to use `jsxDEV` (when on) or `jsx` and `jsxs` (when off).\n * @property {Jsx | null | undefined} [jsx]\n *   Dynamic JSX (optional).\n * @property {JsxDev} jsxDEV\n *   Development JSX.\n * @property {Jsx | null | undefined} [jsxs]\n *   Static JSX (optional).\n *\n * @typedef RuntimeProduction\n *   Runtime fields when development is off.\n * @property {Fragment} Fragment\n *   Fragment.\n * @property {false | null | undefined} [development]\n *   Whether to use `jsxDEV` (when on) or `jsx` and `jsxs` (when off) (optional).\n * @property {Jsx} jsx\n *   Dynamic JSX.\n * @property {JsxDev | null | undefined} [jsxDEV]\n *   Development JSX (optional).\n * @property {Jsx} jsxs\n *   Static JSX.\n *\n * @typedef RuntimeUnknown\n *   Runtime fields when development might be on or off.\n * @property {Fragment} Fragment\n *   Fragment.\n * @property {boolean} development\n *   Whether to use `jsxDEV` (when on) or `jsx` and `jsxs` (when off).\n * @property {Jsx | null | undefined} [jsx]\n *   Dynamic JSX (optional).\n * @property {JsxDev | null | undefined} [jsxDEV]\n *   Development JSX (optional).\n * @property {Jsx | null | undefined} [jsxs]\n *   Static JSX (optional).\n *\n * @typedef Source\n *   Info about source.\n * @property {number | undefined} columnNumber\n *   Column where thing starts (0-indexed).\n * @property {string | undefined} fileName\n *   Name of source file.\n * @property {number | undefined} lineNumber\n *   Line where thing starts (1-indexed).\n *\n * @typedef {'html' | 'svg'} Space\n *   Namespace.\n *\n *   > 👉 **Note**: hast is not XML.\n *   > It supports SVG as embedded in HTML.\n *   > It does not support the features available in XML.\n *   > Passing SVG might break but fragments of modern SVG should be fine.\n *   > Use `xast` if you need to support SVG as XML.\n *\n * @typedef State\n *   Info passed around.\n * @property {unknown} Fragment\n *   Fragment symbol.\n * @property {Array<Parents>} ancestors\n *   Stack of parents.\n * @property {Partial<Components>} components\n *   Components to swap.\n * @property {Create} create\n *   Create something in development or production.\n * @property {ElementAttributeNameCase} elementAttributeNameCase\n *   Casing to use for attribute names.\n * @property {string | undefined} filePath\n *   File path.\n * @property {boolean} ignoreInvalidStyle\n *   Ignore invalid CSS in `style` props.\n * @property {boolean} passKeys\n *   Generate keys to optimize frameworks that support them.\n * @property {boolean} passNode\n *   Pass `node` to components.\n * @property {Schema} schema\n *   Current schema.\n * @property {StylePropertyNameCase} stylePropertyNameCase\n *   Casing to use for property names in `style` objects.\n * @property {boolean} tableCellAlignToStyle\n *   Turn obsolete `align` props on `td` and `th` into CSS `style` props.\n *\n * @typedef {Record<string, string>} Style\n *   Style map.\n *\n * @typedef {'css' | 'dom'} StylePropertyNameCase\n *   Casing to use for property names in `style` objects.\n *\n *   CSS casing is for example `background-color` and `-webkit-line-clamp`.\n *   DOM casing is for example `backgroundColor` and `WebkitLineClamp`.\n *\n * @typedef {Style | boolean | number | string} Value\n *   Primitive property value and `Style` map.\n */\n\n/**\n * @typedef {RuntimeDevelopment & RegularFields} Development\n *   Configuration (development).\n * @typedef {Development | Production | Unknown} Options\n *   Configuration.\n * @typedef {RegularFields & RuntimeProduction} Production\n *   Configuration (production).\n * @typedef {RegularFields & RuntimeUnknown} Unknown\n *   Configuration (production or development).\n */\n\nimport {stringify as commas} from 'comma-separated-tokens'\nimport {whitespace} from 'hast-util-whitespace'\nimport {find, hastToReact, html, svg} from 'property-information'\nimport {stringify as spaces} from 'space-separated-tokens'\nimport styleToObject from 'style-to-object'\nimport {pointStart} from 'unist-util-position'\nimport {VFileMessage} from 'vfile-message'\n\nconst own = {}.hasOwnProperty\n\n/** @type {Map<string, number>} */\nconst emptyMap = new Map()\n\nconst cap = /[A-Z]/g\nconst dashSomething = /-([a-z])/g\n\n// `react-dom` triggers a warning for *any* white space in tables.\n// To follow GFM, `mdast-util-to-hast` injects line endings between elements.\n// Other tools might do so too, but they don’t do here, so we remove all of\n// that.\n\n// See: <https://github.com/facebook/react/pull/7081>.\n// See: <https://github.com/facebook/react/pull/7515>.\n// See: <https://github.com/remarkjs/remark-react/issues/64>.\n// See: <https://github.com/rehypejs/rehype-react/pull/29>.\n// See: <https://github.com/rehypejs/rehype-react/pull/32>.\n// See: <https://github.com/rehypejs/rehype-react/pull/45>.\nconst tableElements = new Set(['table', 'tbody', 'thead', 'tfoot', 'tr'])\n\nconst tableCellElement = new Set(['td', 'th'])\n\n/**\n * Transform a hast tree to preact, react, solid, svelte, vue, etc.,\n * with an automatic JSX runtime.\n *\n * @param {Nodes} tree\n *   Tree to transform.\n * @param {Options} options\n *   Configuration (required).\n * @returns {JSX.Element}\n *   JSX element.\n */\n\nexport function toJsxRuntime(tree, options) {\n  if (!options || options.Fragment === undefined) {\n    throw new TypeError('Expected `Fragment` in options')\n  }\n\n  const filePath = options.filePath || undefined\n  /** @type {Create} */\n  let create\n\n  if (options.development) {\n    if (typeof options.jsxDEV !== 'function') {\n      throw new TypeError(\n        'Expected `jsxDEV` in options when `development: true`'\n      )\n    }\n\n    create = developmentCreate(filePath, options.jsxDEV)\n  } else {\n    if (typeof options.jsx !== 'function') {\n      throw new TypeError('Expected `jsx` in production options')\n    }\n\n    if (typeof options.jsxs !== 'function') {\n      throw new TypeError('Expected `jsxs` in production options')\n    }\n\n    create = productionCreate(filePath, options.jsx, options.jsxs)\n  }\n\n  /** @type {State} */\n  const state = {\n    Fragment: options.Fragment,\n    ancestors: [],\n    components: options.components || {},\n    create,\n    elementAttributeNameCase: options.elementAttributeNameCase || 'react',\n    filePath,\n    ignoreInvalidStyle: options.ignoreInvalidStyle || false,\n    passKeys: options.passKeys !== false,\n    passNode: options.passNode || false,\n    schema: options.space === 'svg' ? svg : html,\n    stylePropertyNameCase: options.stylePropertyNameCase || 'dom',\n    tableCellAlignToStyle: options.tableCellAlignToStyle !== false\n  }\n\n  const result = one(state, tree, undefined)\n\n  // JSX element.\n  if (result && typeof result !== 'string') {\n    return result\n  }\n\n  // Text node or something that turned into nothing.\n  return state.create(\n    tree,\n    state.Fragment,\n    {children: result || undefined},\n    undefined\n  )\n}\n\n/**\n * Transform a node.\n *\n * @param {State} state\n *   Info passed around.\n * @param {Nodes} node\n *   Current node.\n * @param {string | undefined} key\n *   Key.\n * @returns {Child | undefined}\n *   Child, optional.\n */\nfunction one(state, node, key) {\n  if (node.type === 'element' || node.type === 'root') {\n    const parentSchema = state.schema\n    let schema = parentSchema\n\n    if (\n      node.type === 'element' &&\n      node.tagName.toLowerCase() === 'svg' &&\n      parentSchema.space === 'html'\n    ) {\n      schema = svg\n      state.schema = schema\n    }\n\n    state.ancestors.push(node)\n\n    let children = createChildren(state, node)\n    const props = createProperties(state, state.ancestors)\n    let type = state.Fragment\n\n    state.ancestors.pop()\n\n    if (node.type === 'element') {\n      if (children && tableElements.has(node.tagName)) {\n        children = children.filter(function (child) {\n          return typeof child === 'string' ? !whitespace(child) : true\n        })\n      }\n\n      if (own.call(state.components, node.tagName)) {\n        const key = /** @type {keyof JSX.IntrinsicElements} */ (node.tagName)\n        type = state.components[key]\n\n        // If this is swapped out for a component:\n        if (\n          typeof type !== 'string' &&\n          type !== state.Fragment &&\n          state.passNode\n        ) {\n          props.node = node\n        }\n      } else {\n        type = node.tagName\n      }\n    }\n\n    if (children.length > 0) {\n      const value = children.length > 1 ? children : children[0]\n\n      if (value) {\n        props.children = value\n      }\n    }\n\n    // Restore parent schema.\n    state.schema = parentSchema\n\n    return state.create(node, type, props, key)\n  }\n\n  if (node.type === 'text') {\n    return node.value\n  }\n}\n\n/**\n * @param {string | undefined} _\n *   Path to file.\n * @param {Jsx} jsx\n *   Dynamic.\n * @param {Jsx} jsxs\n *   Static.\n * @returns {Create}\n *   Create a production element.\n */\nfunction productionCreate(_, jsx, jsxs) {\n  return create\n  /** @type {Create} */\n  function create(_, type, props, key) {\n    // Only an array when there are 2 or more children.\n    const isStaticChildren = Array.isArray(props.children)\n    const fn = isStaticChildren ? jsxs : jsx\n    return key ? fn(type, props, key) : fn(type, props)\n  }\n}\n\n/**\n * @param {string | undefined} filePath\n *   Path to file.\n * @param {JsxDev} jsxDEV\n *   Development.\n * @returns {Create}\n *   Create a development element.\n */\nfunction developmentCreate(filePath, jsxDEV) {\n  return create\n  /** @type {Create} */\n  function create(node, type, props, key) {\n    // Only an array when there are 2 or more children.\n    const isStaticChildren = Array.isArray(props.children)\n    const point = pointStart(node)\n    return jsxDEV(\n      type,\n      props,\n      key,\n      isStaticChildren,\n      {\n        columnNumber: point ? point.column - 1 : undefined,\n        fileName: filePath,\n        lineNumber: point ? point.line : undefined\n      },\n      undefined\n    )\n  }\n}\n\n/**\n * Create children.\n *\n * @param {State} state\n *   Info passed around.\n * @param {Parents} node\n *   Current element.\n * @returns {Array<Child>}\n *   Children.\n */\nfunction createChildren(state, node) {\n  /** @type {Array<Child>} */\n  const children = []\n  let index = -1\n  /** @type {Map<string, number>} */\n  // Note: test this when Solid doesn’t want to merge my upcoming PR.\n  /* c8 ignore next */\n  const countsByTagName = state.passKeys ? new Map() : emptyMap\n\n  while (++index < node.children.length) {\n    const child = node.children[index]\n    /** @type {string | undefined} */\n    let key\n\n    if (state.passKeys && child.type === 'element') {\n      const count = countsByTagName.get(child.tagName) || 0\n      key = child.tagName + '-' + count\n      countsByTagName.set(child.tagName, count + 1)\n    }\n\n    const result = one(state, child, key)\n    if (result !== undefined) children.push(result)\n  }\n\n  return children\n}\n\n/**\n * Handle properties.\n *\n * @param {State} state\n *   Info passed around.\n * @param {Array<Parents>} ancestors\n *   Stack of parents.\n * @returns {Props}\n *   Props for runtime.\n */\nfunction createProperties(state, ancestors) {\n  const node = ancestors[ancestors.length - 1]\n  /** @type {Props} */\n  const props = {}\n  /** @type {string} */\n  let prop\n\n  if ('properties' in node && node.properties) {\n    /** @type {string | undefined} */\n    let alignValue\n\n    for (prop in node.properties) {\n      if (prop !== 'children' && own.call(node.properties, prop)) {\n        const result = createProperty(\n          state,\n          ancestors,\n          prop,\n          node.properties[prop]\n        )\n\n        if (result) {\n          const [key, value] = result\n\n          if (\n            state.tableCellAlignToStyle &&\n            key === 'align' &&\n            typeof value === 'string' &&\n            tableCellElement.has(node.tagName)\n          ) {\n            alignValue = value\n          } else {\n            props[key] = value\n          }\n        }\n      }\n    }\n\n    if (alignValue) {\n      // Assume style is an object.\n      const style = /** @type {Style} */ (props.style || (props.style = {}))\n      style[\n        state.stylePropertyNameCase === 'css' ? 'text-align' : 'textAlign'\n      ] = alignValue\n    }\n  }\n\n  return props\n}\n\n/**\n * Handle a property.\n *\n * @param {State} state\n *   Info passed around.\n * @param {Array<Parents>} ancestors\n *   Stack of parents.\n * @param {string} prop\n *   Key.\n * @param {Array<number | string> | boolean | number | string | null | undefined} value\n *   hast property value.\n * @returns {Field | undefined}\n *   Field for runtime, optional.\n */\nfunction createProperty(state, ancestors, prop, value) {\n  const info = find(state.schema, prop)\n\n  // Ignore nullish and `NaN` values.\n  if (\n    value === null ||\n    value === undefined ||\n    (typeof value === 'number' && Number.isNaN(value))\n  ) {\n    return\n  }\n\n  if (Array.isArray(value)) {\n    // Accept `array`.\n    // Most props are space-separated.\n    value = info.commaSeparated ? commas(value) : spaces(value)\n  }\n\n  // React only accepts `style` as object.\n  if (info.property === 'style') {\n    let styleObject =\n      typeof value === 'object'\n        ? value\n        : parseStyle(state, ancestors, String(value))\n\n    if (state.stylePropertyNameCase === 'css') {\n      styleObject = transformStylesToCssCasing(styleObject)\n    }\n\n    return ['style', styleObject]\n  }\n\n  return [\n    state.elementAttributeNameCase === 'react' && info.space\n      ? hastToReact[info.property] || info.property\n      : info.attribute,\n    value\n  ]\n}\n\n/**\n * Parse a CSS declaration to an object.\n *\n * @param {State} state\n *   Info passed around.\n * @param {Array<Nodes>} ancestors\n *   Stack of nodes.\n * @param {string} value\n *   CSS declarations.\n * @returns {Style}\n *   Properties.\n * @throws\n *   Throws `VFileMessage` when CSS cannot be parsed.\n */\nfunction parseStyle(state, ancestors, value) {\n  /** @type {Style} */\n  const result = {}\n\n  try {\n    styleToObject(value, replacer)\n  } catch (error) {\n    if (!state.ignoreInvalidStyle) {\n      const cause = /** @type {Error} */ (error)\n      const message = new VFileMessage('Cannot parse `style` attribute', {\n        ancestors,\n        cause,\n        source: 'hast-util-to-jsx-runtime',\n        ruleId: 'style'\n      })\n      message.file = state.filePath || undefined\n      message.url =\n        'https://github.com/syntax-tree/hast-util-to-jsx-runtime#cannot-parse-style-attribute'\n\n      throw message\n    }\n  }\n\n  return result\n\n  /**\n   * Add a CSS property (normal, so with dashes) to `result` as a DOM CSS\n   * property.\n   *\n   * @param {string} name\n   *   Key.\n   * @param {string} value\n   *   Value\n   * @returns {undefined}\n   *   Nothing.\n   */\n  function replacer(name, value) {\n    let key = name\n\n    if (key.slice(0, 2) !== '--') {\n      if (key.slice(0, 4) === '-ms-') key = 'ms-' + key.slice(4)\n      key = key.replace(dashSomething, toCamel)\n    }\n\n    result[key] = value\n  }\n}\n\n/**\n * Transform a DOM casing style object to a CSS casing style object.\n *\n * @param {Style} domCasing\n * @returns {Style}\n */\nfunction transformStylesToCssCasing(domCasing) {\n  /** @type {Style} */\n  const cssCasing = {}\n  /** @type {string} */\n  let from\n\n  for (from in domCasing) {\n    if (own.call(domCasing, from)) {\n      cssCasing[transformStyleToCssCasing(from)] = domCasing[from]\n    }\n  }\n\n  return cssCasing\n}\n\n/**\n * Transform a DOM casing style field to a CSS casing style field.\n *\n * @param {string} from\n * @returns {string}\n */\nfunction transformStyleToCssCasing(from) {\n  let to = from.replace(cap, toDash)\n  // Handle `ms-xxx` -> `-ms-xxx`.\n  if (to.slice(0, 3) === 'ms-') to = '-' + to\n  return to\n}\n\n/**\n * Make `$1` capitalized.\n *\n * @param {string} _\n *   Whatever.\n * @param {string} $1\n *   Single ASCII alphabetical.\n * @returns {string}\n *   Capitalized `$1`.\n */\nfunction toCamel(_, $1) {\n  return $1.toUpperCase()\n}\n\n/**\n * Make `$0` dash cased.\n *\n * @param {string} $0\n *   Capitalized ASCII leter.\n * @returns {string}\n *   Dash and lower letter.\n */\nfunction toDash($0) {\n  return '-' + $0.toLowerCase()\n}\n","/**\n * @typedef Options\n *   Configuration for `stringify`.\n * @property {boolean} [padLeft=true]\n *   Whether to pad a space before a token.\n * @property {boolean} [padRight=false]\n *   Whether to pad a space after a token.\n */\n\n/**\n * @typedef {Options} StringifyOptions\n *   Please use `StringifyOptions` instead.\n */\n\n/**\n * Parse comma-separated tokens to an array.\n *\n * @param {string} value\n *   Comma-separated tokens.\n * @returns {Array<string>}\n *   List of tokens.\n */\nexport function parse(value) {\n  /** @type {Array<string>} */\n  const tokens = []\n  const input = String(value || '')\n  let index = input.indexOf(',')\n  let start = 0\n  /** @type {boolean} */\n  let end = false\n\n  while (!end) {\n    if (index === -1) {\n      index = input.length\n      end = true\n    }\n\n    const token = input.slice(start, index).trim()\n\n    if (token || !end) {\n      tokens.push(token)\n    }\n\n    start = index + 1\n    index = input.indexOf(',', start)\n  }\n\n  return tokens\n}\n\n/**\n * Serialize an array of strings or numbers to comma-separated tokens.\n *\n * @param {Array<string|number>} values\n *   List of tokens.\n * @param {Options} [options]\n *   Configuration for `stringify` (optional).\n * @returns {string}\n *   Comma-separated tokens.\n */\nexport function stringify(values, options) {\n  const settings = options || {}\n\n  // Ensure the last empty entry is seen.\n  const input = values[values.length - 1] === '' ? [...values, ''] : values\n\n  return input\n    .join(\n      (settings.padRight ? ' ' : '') +\n        ',' +\n        (settings.padLeft === false ? '' : ' ')\n    )\n    .trim()\n}\n","/**\n * Parse space-separated tokens to an array of strings.\n *\n * @param {string} value\n *   Space-separated tokens.\n * @returns {Array<string>}\n *   List of tokens.\n */\nexport function parse(value) {\n  const input = String(value || '').trim()\n  return input ? input.split(/[ \\t\\n\\r\\f]+/g) : []\n}\n\n/**\n * Serialize an array of strings as space separated-tokens.\n *\n * @param {Array<string|number>} values\n *   List of tokens.\n * @returns {string}\n *   Space-separated tokens.\n */\nexport function stringify(values) {\n  return values.join(' ').trim()\n}\n","/**\n * HTML URL properties.\n *\n * Each key is a property name and each value is a list of tag names it applies\n * to or `null` if it applies to all elements.\n *\n * @type {Record<string, Array<string> | null>}\n */\nexport const urlAttributes = {\n  action: ['form'],\n  cite: ['blockquote', 'del', 'ins', 'q'],\n  data: ['object'],\n  formAction: ['button', 'input'],\n  href: ['a', 'area', 'base', 'link'],\n  icon: ['menuitem'],\n  itemId: null,\n  manifest: ['html'],\n  ping: ['a', 'area'],\n  poster: ['video'],\n  src: [\n    'audio',\n    'embed',\n    'iframe',\n    'img',\n    'input',\n    'script',\n    'source',\n    'track',\n    'video'\n  ]\n}\n","/**\n * @typedef {import('mdast').Nodes} Nodes\n *\n * @typedef Options\n *   Configuration (optional).\n * @property {boolean | null | undefined} [includeImageAlt=true]\n *   Whether to use `alt` for `image`s (default: `true`).\n * @property {boolean | null | undefined} [includeHtml=true]\n *   Whether to use `value` of HTML (default: `true`).\n */\n\n/** @type {Options} */\nconst emptyOptions = {}\n\n/**\n * Get the text content of a node or list of nodes.\n *\n * Prefers the node’s plain-text fields, otherwise serializes its children,\n * and if the given value is an array, serialize the nodes in it.\n *\n * @param {unknown} [value]\n *   Thing to serialize, typically `Node`.\n * @param {Options | null | undefined} [options]\n *   Configuration (optional).\n * @returns {string}\n *   Serialized `value`.\n */\nexport function toString(value, options) {\n  const settings = options || emptyOptions\n  const includeImageAlt =\n    typeof settings.includeImageAlt === 'boolean'\n      ? settings.includeImageAlt\n      : true\n  const includeHtml =\n    typeof settings.includeHtml === 'boolean' ? settings.includeHtml : true\n\n  return one(value, includeImageAlt, includeHtml)\n}\n\n/**\n * One node or several nodes.\n *\n * @param {unknown} value\n *   Thing to serialize.\n * @param {boolean} includeImageAlt\n *   Include image `alt`s.\n * @param {boolean} includeHtml\n *   Include HTML.\n * @returns {string}\n *   Serialized node.\n */\nfunction one(value, includeImageAlt, includeHtml) {\n  if (node(value)) {\n    if ('value' in value) {\n      return value.type === 'html' && !includeHtml ? '' : value.value\n    }\n\n    if (includeImageAlt && 'alt' in value && value.alt) {\n      return value.alt\n    }\n\n    if ('children' in value) {\n      return all(value.children, includeImageAlt, includeHtml)\n    }\n  }\n\n  if (Array.isArray(value)) {\n    return all(value, includeImageAlt, includeHtml)\n  }\n\n  return ''\n}\n\n/**\n * Serialize a list of nodes.\n *\n * @param {Array<unknown>} values\n *   Thing to serialize.\n * @param {boolean} includeImageAlt\n *   Include image `alt`s.\n * @param {boolean} includeHtml\n *   Include HTML.\n * @returns {string}\n *   Serialized nodes.\n */\nfunction all(values, includeImageAlt, includeHtml) {\n  /** @type {Array<string>} */\n  const result = []\n  let index = -1\n\n  while (++index < values.length) {\n    result[index] = one(values[index], includeImageAlt, includeHtml)\n  }\n\n  return result.join('')\n}\n\n/**\n * Check if `value` looks like a node.\n *\n * @param {unknown} value\n *   Thing.\n * @returns {value is Nodes}\n *   Whether `value` is a node.\n */\nfunction node(value) {\n  return Boolean(value && typeof value === 'object')\n}\n","/**\n * Like `Array#splice`, but smarter for giant arrays.\n *\n * `Array#splice` takes all items to be inserted as individual argument which\n * causes a stack overflow in V8 when trying to insert 100k items for instance.\n *\n * Otherwise, this does not return the removed items, and takes `items` as an\n * array instead of rest parameters.\n *\n * @template {unknown} T\n *   Item type.\n * @param {Array<T>} list\n *   List to operate on.\n * @param {number} start\n *   Index to remove/insert at (can be negative).\n * @param {number} remove\n *   Number of items to remove.\n * @param {Array<T>} items\n *   Items to inject into `list`.\n * @returns {undefined}\n *   Nothing.\n */\nexport function splice(list, start, remove, items) {\n  const end = list.length\n  let chunkStart = 0\n  /** @type {Array<unknown>} */\n  let parameters\n\n  // Make start between zero and `end` (included).\n  if (start < 0) {\n    start = -start > end ? 0 : end + start\n  } else {\n    start = start > end ? end : start\n  }\n  remove = remove > 0 ? remove : 0\n\n  // No need to chunk the items if there’s only a couple (10k) items.\n  if (items.length < 10000) {\n    parameters = Array.from(items)\n    parameters.unshift(start, remove)\n    // @ts-expect-error Hush, it’s fine.\n    list.splice(...parameters)\n  } else {\n    // Delete `remove` items starting from `start`\n    if (remove) list.splice(start, remove)\n\n    // Insert the items in chunks to not cause stack overflows.\n    while (chunkStart < items.length) {\n      parameters = items.slice(chunkStart, chunkStart + 10000)\n      parameters.unshift(start, 0)\n      // @ts-expect-error Hush, it’s fine.\n      list.splice(...parameters)\n      chunkStart += 10000\n      start += 10000\n    }\n  }\n}\n\n/**\n * Append `items` (an array) at the end of `list` (another array).\n * When `list` was empty, returns `items` instead.\n *\n * This prevents a potentially expensive operation when `list` is empty,\n * and adds items in batches to prevent V8 from hanging.\n *\n * @template {unknown} T\n *   Item type.\n * @param {Array<T>} list\n *   List to operate on.\n * @param {Array<T>} items\n *   Items to add to `list`.\n * @returns {Array<T>}\n *   Either `list` or `items`.\n */\nexport function push(list, items) {\n  if (list.length > 0) {\n    splice(list, list.length, 0, items)\n    return list\n  }\n  return items\n}\n","/**\n * @typedef {import('micromark-util-types').Chunk} Chunk\n * @typedef {import('micromark-util-types').Event} Event\n * @typedef {import('micromark-util-types').Token} Token\n */\n\nimport {splice} from 'micromark-util-chunked'\n/**\n * Tokenize subcontent.\n *\n * @param {Array<Event>} events\n *   List of events.\n * @returns {boolean}\n *   Whether subtokens were found.\n */ // eslint-disable-next-line complexity\nexport function subtokenize(events) {\n  /** @type {Record<string, number>} */\n  const jumps = {}\n  let index = -1\n  /** @type {Event} */\n  let event\n  /** @type {number | undefined} */\n  let lineIndex\n  /** @type {number} */\n  let otherIndex\n  /** @type {Event} */\n  let otherEvent\n  /** @type {Array<Event>} */\n  let parameters\n  /** @type {Array<Event>} */\n  let subevents\n  /** @type {boolean | undefined} */\n  let more\n  while (++index < events.length) {\n    while (index in jumps) {\n      index = jumps[index]\n    }\n    event = events[index]\n\n    // Add a hook for the GFM tasklist extension, which needs to know if text\n    // is in the first content of a list item.\n    if (\n      index &&\n      event[1].type === 'chunkFlow' &&\n      events[index - 1][1].type === 'listItemPrefix'\n    ) {\n      subevents = event[1]._tokenizer.events\n      otherIndex = 0\n      if (\n        otherIndex < subevents.length &&\n        subevents[otherIndex][1].type === 'lineEndingBlank'\n      ) {\n        otherIndex += 2\n      }\n      if (\n        otherIndex < subevents.length &&\n        subevents[otherIndex][1].type === 'content'\n      ) {\n        while (++otherIndex < subevents.length) {\n          if (subevents[otherIndex][1].type === 'content') {\n            break\n          }\n          if (subevents[otherIndex][1].type === 'chunkText') {\n            subevents[otherIndex][1]._isInFirstContentOfListItem = true\n            otherIndex++\n          }\n        }\n      }\n    }\n\n    // Enter.\n    if (event[0] === 'enter') {\n      if (event[1].contentType) {\n        Object.assign(jumps, subcontent(events, index))\n        index = jumps[index]\n        more = true\n      }\n    }\n    // Exit.\n    else if (event[1]._container) {\n      otherIndex = index\n      lineIndex = undefined\n      while (otherIndex--) {\n        otherEvent = events[otherIndex]\n        if (\n          otherEvent[1].type === 'lineEnding' ||\n          otherEvent[1].type === 'lineEndingBlank'\n        ) {\n          if (otherEvent[0] === 'enter') {\n            if (lineIndex) {\n              events[lineIndex][1].type = 'lineEndingBlank'\n            }\n            otherEvent[1].type = 'lineEnding'\n            lineIndex = otherIndex\n          }\n        } else {\n          break\n        }\n      }\n      if (lineIndex) {\n        // Fix position.\n        event[1].end = Object.assign({}, events[lineIndex][1].start)\n\n        // Switch container exit w/ line endings.\n        parameters = events.slice(lineIndex, index)\n        parameters.unshift(event)\n        splice(events, lineIndex, index - lineIndex + 1, parameters)\n      }\n    }\n  }\n  return !more\n}\n\n/**\n * Tokenize embedded tokens.\n *\n * @param {Array<Event>} events\n * @param {number} eventIndex\n * @returns {Record<string, number>}\n */\nfunction subcontent(events, eventIndex) {\n  const token = events[eventIndex][1]\n  const context = events[eventIndex][2]\n  let startPosition = eventIndex - 1\n  /** @type {Array<number>} */\n  const startPositions = []\n  const tokenizer =\n    token._tokenizer || context.parser[token.contentType](token.start)\n  const childEvents = tokenizer.events\n  /** @type {Array<[number, number]>} */\n  const jumps = []\n  /** @type {Record<string, number>} */\n  const gaps = {}\n  /** @type {Array<Chunk>} */\n  let stream\n  /** @type {Token | undefined} */\n  let previous\n  let index = -1\n  /** @type {Token | undefined} */\n  let current = token\n  let adjust = 0\n  let start = 0\n  const breaks = [start]\n\n  // Loop forward through the linked tokens to pass them in order to the\n  // subtokenizer.\n  while (current) {\n    // Find the position of the event for this token.\n    while (events[++startPosition][1] !== current) {\n      // Empty.\n    }\n    startPositions.push(startPosition)\n    if (!current._tokenizer) {\n      stream = context.sliceStream(current)\n      if (!current.next) {\n        stream.push(null)\n      }\n      if (previous) {\n        tokenizer.defineSkip(current.start)\n      }\n      if (current._isInFirstContentOfListItem) {\n        tokenizer._gfmTasklistFirstContentOfListItem = true\n      }\n      tokenizer.write(stream)\n      if (current._isInFirstContentOfListItem) {\n        tokenizer._gfmTasklistFirstContentOfListItem = undefined\n      }\n    }\n\n    // Unravel the next token.\n    previous = current\n    current = current.next\n  }\n\n  // Now, loop back through all events (and linked tokens), to figure out which\n  // parts belong where.\n  current = token\n  while (++index < childEvents.length) {\n    if (\n      // Find a void token that includes a break.\n      childEvents[index][0] === 'exit' &&\n      childEvents[index - 1][0] === 'enter' &&\n      childEvents[index][1].type === childEvents[index - 1][1].type &&\n      childEvents[index][1].start.line !== childEvents[index][1].end.line\n    ) {\n      start = index + 1\n      breaks.push(start)\n      // Help GC.\n      current._tokenizer = undefined\n      current.previous = undefined\n      current = current.next\n    }\n  }\n\n  // Help GC.\n  tokenizer.events = []\n\n  // If there’s one more token (which is the cases for lines that end in an\n  // EOF), that’s perfect: the last point we found starts it.\n  // If there isn’t then make sure any remaining content is added to it.\n  if (current) {\n    // Help GC.\n    current._tokenizer = undefined\n    current.previous = undefined\n  } else {\n    breaks.pop()\n  }\n\n  // Now splice the events from the subtokenizer into the current events,\n  // moving back to front so that splice indices aren’t affected.\n  index = breaks.length\n  while (index--) {\n    const slice = childEvents.slice(breaks[index], breaks[index + 1])\n    const start = startPositions.pop()\n    jumps.unshift([start, start + slice.length - 1])\n    splice(events, start, 2, slice)\n  }\n  index = -1\n  while (++index < jumps.length) {\n    gaps[adjust + jumps[index][0]] = adjust + jumps[index][1]\n    adjust += jumps[index][1] - jumps[index][0] - 1\n  }\n  return gaps\n}\n","/**\n * @typedef {import('micromark-util-types').Extension} Extension\n * @typedef {import('micromark-util-types').Handles} Handles\n * @typedef {import('micromark-util-types').HtmlExtension} HtmlExtension\n * @typedef {import('micromark-util-types').NormalizedExtension} NormalizedExtension\n */\n\nimport {splice} from 'micromark-util-chunked'\n\nconst hasOwnProperty = {}.hasOwnProperty\n\n/**\n * Combine multiple syntax extensions into one.\n *\n * @param {Array<Extension>} extensions\n *   List of syntax extensions.\n * @returns {NormalizedExtension}\n *   A single combined extension.\n */\nexport function combineExtensions(extensions) {\n  /** @type {NormalizedExtension} */\n  const all = {}\n  let index = -1\n\n  while (++index < extensions.length) {\n    syntaxExtension(all, extensions[index])\n  }\n\n  return all\n}\n\n/**\n * Merge `extension` into `all`.\n *\n * @param {NormalizedExtension} all\n *   Extension to merge into.\n * @param {Extension} extension\n *   Extension to merge.\n * @returns {undefined}\n */\nfunction syntaxExtension(all, extension) {\n  /** @type {keyof Extension} */\n  let hook\n\n  for (hook in extension) {\n    const maybe = hasOwnProperty.call(all, hook) ? all[hook] : undefined\n    /** @type {Record<string, unknown>} */\n    const left = maybe || (all[hook] = {})\n    /** @type {Record<string, unknown> | undefined} */\n    const right = extension[hook]\n    /** @type {string} */\n    let code\n\n    if (right) {\n      for (code in right) {\n        if (!hasOwnProperty.call(left, code)) left[code] = []\n        const value = right[code]\n        constructs(\n          // @ts-expect-error Looks like a list.\n          left[code],\n          Array.isArray(value) ? value : value ? [value] : []\n        )\n      }\n    }\n  }\n}\n\n/**\n * Merge `list` into `existing` (both lists of constructs).\n * Mutates `existing`.\n *\n * @param {Array<unknown>} existing\n * @param {Array<unknown>} list\n * @returns {undefined}\n */\nfunction constructs(existing, list) {\n  let index = -1\n  /** @type {Array<unknown>} */\n  const before = []\n\n  while (++index < list.length) {\n    // @ts-expect-error Looks like an object.\n    ;(list[index].add === 'after' ? existing : before).push(list[index])\n  }\n\n  splice(existing, 0, 0, before)\n}\n\n/**\n * Combine multiple HTML extensions into one.\n *\n * @param {Array<HtmlExtension>} htmlExtensions\n *   List of HTML extensions.\n * @returns {HtmlExtension}\n *   A single combined HTML extension.\n */\nexport function combineHtmlExtensions(htmlExtensions) {\n  /** @type {HtmlExtension} */\n  const handlers = {}\n  let index = -1\n\n  while (++index < htmlExtensions.length) {\n    htmlExtension(handlers, htmlExtensions[index])\n  }\n\n  return handlers\n}\n\n/**\n * Merge `extension` into `all`.\n *\n * @param {HtmlExtension} all\n *   Extension to merge into.\n * @param {HtmlExtension} extension\n *   Extension to merge.\n * @returns {undefined}\n */\nfunction htmlExtension(all, extension) {\n  /** @type {keyof HtmlExtension} */\n  let hook\n\n  for (hook in extension) {\n    const maybe = hasOwnProperty.call(all, hook) ? all[hook] : undefined\n    const left = maybe || (all[hook] = {})\n    const right = extension[hook]\n    /** @type {keyof Handles} */\n    let type\n\n    if (right) {\n      for (type in right) {\n        // @ts-expect-error assume document vs regular handler are managed correctly.\n        left[type] = right[type]\n      }\n    }\n  }\n}\n","/**\n * @typedef {import('micromark-util-types').Code} Code\n */\n\nconst unicodePunctuationInternal = regexCheck(/\\p{P}/u)\n\n/**\n * Check whether the character code represents an ASCII alpha (`a` through `z`,\n * case insensitive).\n *\n * An **ASCII alpha** is an ASCII upper alpha or ASCII lower alpha.\n *\n * An **ASCII upper alpha** is a character in the inclusive range U+0041 (`A`)\n * to U+005A (`Z`).\n *\n * An **ASCII lower alpha** is a character in the inclusive range U+0061 (`a`)\n * to U+007A (`z`).\n *\n * @param code\n *   Code.\n * @returns {boolean}\n *   Whether it matches.\n */\nexport const asciiAlpha = regexCheck(/[A-Za-z]/)\n\n/**\n * Check whether the character code represents an ASCII alphanumeric (`a`\n * through `z`, case insensitive, or `0` through `9`).\n *\n * An **ASCII alphanumeric** is an ASCII digit (see `asciiDigit`) or ASCII alpha\n * (see `asciiAlpha`).\n *\n * @param code\n *   Code.\n * @returns {boolean}\n *   Whether it matches.\n */\nexport const asciiAlphanumeric = regexCheck(/[\\dA-Za-z]/)\n\n/**\n * Check whether the character code represents an ASCII atext.\n *\n * atext is an ASCII alphanumeric (see `asciiAlphanumeric`), or a character in\n * the inclusive ranges U+0023 NUMBER SIGN (`#`) to U+0027 APOSTROPHE (`'`),\n * U+002A ASTERISK (`*`), U+002B PLUS SIGN (`+`), U+002D DASH (`-`), U+002F\n * SLASH (`/`), U+003D EQUALS TO (`=`), U+003F QUESTION MARK (`?`), U+005E\n * CARET (`^`) to U+0060 GRAVE ACCENT (`` ` ``), or U+007B LEFT CURLY BRACE\n * (`{`) to U+007E TILDE (`~`).\n *\n * See:\n * **\\[RFC5322]**:\n * [Internet Message Format](https://tools.ietf.org/html/rfc5322).\n * P. Resnick.\n * IETF.\n *\n * @param code\n *   Code.\n * @returns {boolean}\n *   Whether it matches.\n */\nexport const asciiAtext = regexCheck(/[#-'*+\\--9=?A-Z^-~]/)\n\n/**\n * Check whether a character code is an ASCII control character.\n *\n * An **ASCII control** is a character in the inclusive range U+0000 NULL (NUL)\n * to U+001F (US), or U+007F (DEL).\n *\n * @param {Code} code\n *   Code.\n * @returns {boolean}\n *   Whether it matches.\n */\nexport function asciiControl(code) {\n  return (\n    // Special whitespace codes (which have negative values), C0 and Control\n    // character DEL\n    code !== null && (code < 32 || code === 127)\n  )\n}\n\n/**\n * Check whether the character code represents an ASCII digit (`0` through `9`).\n *\n * An **ASCII digit** is a character in the inclusive range U+0030 (`0`) to\n * U+0039 (`9`).\n *\n * @param code\n *   Code.\n * @returns {boolean}\n *   Whether it matches.\n */\nexport const asciiDigit = regexCheck(/\\d/)\n\n/**\n * Check whether the character code represents an ASCII hex digit (`a` through\n * `f`, case insensitive, or `0` through `9`).\n *\n * An **ASCII hex digit** is an ASCII digit (see `asciiDigit`), ASCII upper hex\n * digit, or an ASCII lower hex digit.\n *\n * An **ASCII upper hex digit** is a character in the inclusive range U+0041\n * (`A`) to U+0046 (`F`).\n *\n * An **ASCII lower hex digit** is a character in the inclusive range U+0061\n * (`a`) to U+0066 (`f`).\n *\n * @param code\n *   Code.\n * @returns {boolean}\n *   Whether it matches.\n */\nexport const asciiHexDigit = regexCheck(/[\\dA-Fa-f]/)\n\n/**\n * Check whether the character code represents ASCII punctuation.\n *\n * An **ASCII punctuation** is a character in the inclusive ranges U+0021\n * EXCLAMATION MARK (`!`) to U+002F SLASH (`/`), U+003A COLON (`:`) to U+0040 AT\n * SIGN (`@`), U+005B LEFT SQUARE BRACKET (`[`) to U+0060 GRAVE ACCENT\n * (`` ` ``), or U+007B LEFT CURLY BRACE (`{`) to U+007E TILDE (`~`).\n *\n * @param code\n *   Code.\n * @returns {boolean}\n *   Whether it matches.\n */\nexport const asciiPunctuation = regexCheck(/[!-/:-@[-`{-~]/)\n\n/**\n * Check whether a character code is a markdown line ending.\n *\n * A **markdown line ending** is the virtual characters M-0003 CARRIAGE RETURN\n * LINE FEED (CRLF), M-0004 LINE FEED (LF) and M-0005 CARRIAGE RETURN (CR).\n *\n * In micromark, the actual character U+000A LINE FEED (LF) and U+000D CARRIAGE\n * RETURN (CR) are replaced by these virtual characters depending on whether\n * they occurred together.\n *\n * @param {Code} code\n *   Code.\n * @returns {boolean}\n *   Whether it matches.\n */\nexport function markdownLineEnding(code) {\n  return code !== null && code < -2\n}\n\n/**\n * Check whether a character code is a markdown line ending (see\n * `markdownLineEnding`) or markdown space (see `markdownSpace`).\n *\n * @param {Code} code\n *   Code.\n * @returns {boolean}\n *   Whether it matches.\n */\nexport function markdownLineEndingOrSpace(code) {\n  return code !== null && (code < 0 || code === 32)\n}\n\n/**\n * Check whether a character code is a markdown space.\n *\n * A **markdown space** is the concrete character U+0020 SPACE (SP) and the\n * virtual characters M-0001 VIRTUAL SPACE (VS) and M-0002 HORIZONTAL TAB (HT).\n *\n * In micromark, the actual character U+0009 CHARACTER TABULATION (HT) is\n * replaced by one M-0002 HORIZONTAL TAB (HT) and between 0 and 3 M-0001 VIRTUAL\n * SPACE (VS) characters, depending on the column at which the tab occurred.\n *\n * @param {Code} code\n *   Code.\n * @returns {boolean}\n *   Whether it matches.\n */\nexport function markdownSpace(code) {\n  return code === -2 || code === -1 || code === 32\n}\n\n// Size note: removing ASCII from the regex and using `asciiPunctuation` here\n// In fact adds to the bundle size.\n/**\n * Check whether the character code represents Unicode punctuation.\n *\n * A **Unicode punctuation** is a character in the Unicode `Pc` (Punctuation,\n * Connector), `Pd` (Punctuation, Dash), `Pe` (Punctuation, Close), `Pf`\n * (Punctuation, Final quote), `Pi` (Punctuation, Initial quote), `Po`\n * (Punctuation, Other), or `Ps` (Punctuation, Open) categories, or an ASCII\n * punctuation (see `asciiPunctuation`).\n *\n * See:\n * **\\[UNICODE]**:\n * [The Unicode Standard](https://www.unicode.org/versions/).\n * Unicode Consortium.\n *\n * @param {Code} code\n *   Code.\n * @returns {boolean}\n *   Whether it matches.\n */\nexport function unicodePunctuation(code) {\n  return asciiPunctuation(code) || unicodePunctuationInternal(code)\n}\n\n/**\n * Check whether the character code represents Unicode whitespace.\n *\n * Note that this does handle micromark specific markdown whitespace characters.\n * See `markdownLineEndingOrSpace` to check that.\n *\n * A **Unicode whitespace** is a character in the Unicode `Zs` (Separator,\n * Space) category, or U+0009 CHARACTER TABULATION (HT), U+000A LINE FEED (LF),\n * U+000C (FF), or U+000D CARRIAGE RETURN (CR) (**\\[UNICODE]**).\n *\n * See:\n * **\\[UNICODE]**:\n * [The Unicode Standard](https://www.unicode.org/versions/).\n * Unicode Consortium.\n *\n * @param code\n *   Code.\n * @returns {boolean}\n *   Whether it matches.\n */\nexport const unicodeWhitespace = regexCheck(/\\s/)\n\n/**\n * Create a code check from a regex.\n *\n * @param {RegExp} regex\n * @returns {(code: Code) => boolean}\n */\nfunction regexCheck(regex) {\n  return check\n\n  /**\n   * Check whether a code matches the bound regex.\n   *\n   * @param {Code} code\n   *   Character code.\n   * @returns {boolean}\n   *   Whether the character code matches the bound regex.\n   */\n  function check(code) {\n    return code !== null && code > -1 && regex.test(String.fromCharCode(code))\n  }\n}\n","/**\n * @typedef {import('micromark-util-types').Effects} Effects\n * @typedef {import('micromark-util-types').State} State\n * @typedef {import('micromark-util-types').TokenType} TokenType\n */\n\nimport {markdownSpace} from 'micromark-util-character'\n\n// To do: implement `spaceOrTab`, `spaceOrTabMinMax`, `spaceOrTabWithOptions`.\n\n/**\n * Parse spaces and tabs.\n *\n * There is no `nok` parameter:\n *\n * *   spaces in markdown are often optional, in which case this factory can be\n *     used and `ok` will be switched to whether spaces were found or not\n * *   one line ending or space can be detected with `markdownSpace(code)` right\n *     before using `factorySpace`\n *\n * ###### Examples\n *\n * Where `␉` represents a tab (plus how much it expands) and `␠` represents a\n * single space.\n *\n * ```markdown\n * ␉\n * ␠␠␠␠\n * ␉␠\n * ```\n *\n * @param {Effects} effects\n *   Context.\n * @param {State} ok\n *   State switched to when successful.\n * @param {TokenType} type\n *   Type (`' \\t'`).\n * @param {number | undefined} [max=Infinity]\n *   Max (exclusive).\n * @returns {State}\n *   Start state.\n */\nexport function factorySpace(effects, ok, type, max) {\n  const limit = max ? max - 1 : Number.POSITIVE_INFINITY\n  let size = 0\n  return start\n\n  /** @type {State} */\n  function start(code) {\n    if (markdownSpace(code)) {\n      effects.enter(type)\n      return prefix(code)\n    }\n    return ok(code)\n  }\n\n  /** @type {State} */\n  function prefix(code) {\n    if (markdownSpace(code) && size++ < limit) {\n      effects.consume(code)\n      return prefix\n    }\n    effects.exit(type)\n    return ok(code)\n  }\n}\n","/**\n * @typedef {import('micromark-util-types').InitialConstruct} InitialConstruct\n * @typedef {import('micromark-util-types').Initializer} Initializer\n * @typedef {import('micromark-util-types').State} State\n * @typedef {import('micromark-util-types').Token} Token\n * @typedef {import('micromark-util-types').TokenizeContext} TokenizeContext\n */\n\nimport {factorySpace} from 'micromark-factory-space'\nimport {markdownLineEnding} from 'micromark-util-character'\n/** @type {InitialConstruct} */\nexport const content = {\n  tokenize: initializeContent\n}\n\n/**\n * @this {TokenizeContext}\n * @type {Initializer}\n */\nfunction initializeContent(effects) {\n  const contentStart = effects.attempt(\n    this.parser.constructs.contentInitial,\n    afterContentStartConstruct,\n    paragraphInitial\n  )\n  /** @type {Token} */\n  let previous\n  return contentStart\n\n  /** @type {State} */\n  function afterContentStartConstruct(code) {\n    if (code === null) {\n      effects.consume(code)\n      return\n    }\n    effects.enter('lineEnding')\n    effects.consume(code)\n    effects.exit('lineEnding')\n    return factorySpace(effects, contentStart, 'linePrefix')\n  }\n\n  /** @type {State} */\n  function paragraphInitial(code) {\n    effects.enter('paragraph')\n    return lineStart(code)\n  }\n\n  /** @type {State} */\n  function lineStart(code) {\n    const token = effects.enter('chunkText', {\n      contentType: 'text',\n      previous\n    })\n    if (previous) {\n      previous.next = token\n    }\n    previous = token\n    return data(code)\n  }\n\n  /** @type {State} */\n  function data(code) {\n    if (code === null) {\n      effects.exit('chunkText')\n      effects.exit('paragraph')\n      effects.consume(code)\n      return\n    }\n    if (markdownLineEnding(code)) {\n      effects.consume(code)\n      effects.exit('chunkText')\n      return lineStart\n    }\n\n    // Data.\n    effects.consume(code)\n    return data\n  }\n}\n","/**\n * @typedef {import('micromark-util-types').Construct} Construct\n * @typedef {import('micromark-util-types').ContainerState} ContainerState\n * @typedef {import('micromark-util-types').InitialConstruct} InitialConstruct\n * @typedef {import('micromark-util-types').Initializer} Initializer\n * @typedef {import('micromark-util-types').Point} Point\n * @typedef {import('micromark-util-types').State} State\n * @typedef {import('micromark-util-types').Token} Token\n * @typedef {import('micromark-util-types').TokenizeContext} TokenizeContext\n * @typedef {import('micromark-util-types').Tokenizer} Tokenizer\n */\n\n/**\n * @typedef {[Construct, ContainerState]} StackItem\n */\n\nimport {factorySpace} from 'micromark-factory-space'\nimport {markdownLineEnding} from 'micromark-util-character'\nimport {splice} from 'micromark-util-chunked'\n/** @type {InitialConstruct} */\nexport const document = {\n  tokenize: initializeDocument\n}\n\n/** @type {Construct} */\nconst containerConstruct = {\n  tokenize: tokenizeContainer\n}\n\n/**\n * @this {TokenizeContext}\n * @type {Initializer}\n */\nfunction initializeDocument(effects) {\n  const self = this\n  /** @type {Array<StackItem>} */\n  const stack = []\n  let continued = 0\n  /** @type {TokenizeContext | undefined} */\n  let childFlow\n  /** @type {Token | undefined} */\n  let childToken\n  /** @type {number} */\n  let lineStartOffset\n  return start\n\n  /** @type {State} */\n  function start(code) {\n    // First we iterate through the open blocks, starting with the root\n    // document, and descending through last children down to the last open\n    // block.\n    // Each block imposes a condition that the line must satisfy if the block is\n    // to remain open.\n    // For example, a block quote requires a `>` character.\n    // A paragraph requires a non-blank line.\n    // In this phase we may match all or just some of the open blocks.\n    // But we cannot close unmatched blocks yet, because we may have a lazy\n    // continuation line.\n    if (continued < stack.length) {\n      const item = stack[continued]\n      self.containerState = item[1]\n      return effects.attempt(\n        item[0].continuation,\n        documentContinue,\n        checkNewContainers\n      )(code)\n    }\n\n    // Done.\n    return checkNewContainers(code)\n  }\n\n  /** @type {State} */\n  function documentContinue(code) {\n    continued++\n\n    // Note: this field is called `_closeFlow` but it also closes containers.\n    // Perhaps a good idea to rename it but it’s already used in the wild by\n    // extensions.\n    if (self.containerState._closeFlow) {\n      self.containerState._closeFlow = undefined\n      if (childFlow) {\n        closeFlow()\n      }\n\n      // Note: this algorithm for moving events around is similar to the\n      // algorithm when dealing with lazy lines in `writeToChild`.\n      const indexBeforeExits = self.events.length\n      let indexBeforeFlow = indexBeforeExits\n      /** @type {Point | undefined} */\n      let point\n\n      // Find the flow chunk.\n      while (indexBeforeFlow--) {\n        if (\n          self.events[indexBeforeFlow][0] === 'exit' &&\n          self.events[indexBeforeFlow][1].type === 'chunkFlow'\n        ) {\n          point = self.events[indexBeforeFlow][1].end\n          break\n        }\n      }\n      exitContainers(continued)\n\n      // Fix positions.\n      let index = indexBeforeExits\n      while (index < self.events.length) {\n        self.events[index][1].end = Object.assign({}, point)\n        index++\n      }\n\n      // Inject the exits earlier (they’re still also at the end).\n      splice(\n        self.events,\n        indexBeforeFlow + 1,\n        0,\n        self.events.slice(indexBeforeExits)\n      )\n\n      // Discard the duplicate exits.\n      self.events.length = index\n      return checkNewContainers(code)\n    }\n    return start(code)\n  }\n\n  /** @type {State} */\n  function checkNewContainers(code) {\n    // Next, after consuming the continuation markers for existing blocks, we\n    // look for new block starts (e.g. `>` for a block quote).\n    // If we encounter a new block start, we close any blocks unmatched in\n    // step 1 before creating the new block as a child of the last matched\n    // block.\n    if (continued === stack.length) {\n      // No need to `check` whether there’s a container, of `exitContainers`\n      // would be moot.\n      // We can instead immediately `attempt` to parse one.\n      if (!childFlow) {\n        return documentContinued(code)\n      }\n\n      // If we have concrete content, such as block HTML or fenced code,\n      // we can’t have containers “pierce” into them, so we can immediately\n      // start.\n      if (childFlow.currentConstruct && childFlow.currentConstruct.concrete) {\n        return flowStart(code)\n      }\n\n      // If we do have flow, it could still be a blank line,\n      // but we’d be interrupting it w/ a new container if there’s a current\n      // construct.\n      // To do: next major: remove `_gfmTableDynamicInterruptHack` (no longer\n      // needed in micromark-extension-gfm-table@1.0.6).\n      self.interrupt = Boolean(\n        childFlow.currentConstruct && !childFlow._gfmTableDynamicInterruptHack\n      )\n    }\n\n    // Check if there is a new container.\n    self.containerState = {}\n    return effects.check(\n      containerConstruct,\n      thereIsANewContainer,\n      thereIsNoNewContainer\n    )(code)\n  }\n\n  /** @type {State} */\n  function thereIsANewContainer(code) {\n    if (childFlow) closeFlow()\n    exitContainers(continued)\n    return documentContinued(code)\n  }\n\n  /** @type {State} */\n  function thereIsNoNewContainer(code) {\n    self.parser.lazy[self.now().line] = continued !== stack.length\n    lineStartOffset = self.now().offset\n    return flowStart(code)\n  }\n\n  /** @type {State} */\n  function documentContinued(code) {\n    // Try new containers.\n    self.containerState = {}\n    return effects.attempt(\n      containerConstruct,\n      containerContinue,\n      flowStart\n    )(code)\n  }\n\n  /** @type {State} */\n  function containerContinue(code) {\n    continued++\n    stack.push([self.currentConstruct, self.containerState])\n    // Try another.\n    return documentContinued(code)\n  }\n\n  /** @type {State} */\n  function flowStart(code) {\n    if (code === null) {\n      if (childFlow) closeFlow()\n      exitContainers(0)\n      effects.consume(code)\n      return\n    }\n    childFlow = childFlow || self.parser.flow(self.now())\n    effects.enter('chunkFlow', {\n      contentType: 'flow',\n      previous: childToken,\n      _tokenizer: childFlow\n    })\n    return flowContinue(code)\n  }\n\n  /** @type {State} */\n  function flowContinue(code) {\n    if (code === null) {\n      writeToChild(effects.exit('chunkFlow'), true)\n      exitContainers(0)\n      effects.consume(code)\n      return\n    }\n    if (markdownLineEnding(code)) {\n      effects.consume(code)\n      writeToChild(effects.exit('chunkFlow'))\n      // Get ready for the next line.\n      continued = 0\n      self.interrupt = undefined\n      return start\n    }\n    effects.consume(code)\n    return flowContinue\n  }\n\n  /**\n   * @param {Token} token\n   * @param {boolean | undefined} [eof]\n   * @returns {undefined}\n   */\n  function writeToChild(token, eof) {\n    const stream = self.sliceStream(token)\n    if (eof) stream.push(null)\n    token.previous = childToken\n    if (childToken) childToken.next = token\n    childToken = token\n    childFlow.defineSkip(token.start)\n    childFlow.write(stream)\n\n    // Alright, so we just added a lazy line:\n    //\n    // ```markdown\n    // > a\n    // b.\n    //\n    // Or:\n    //\n    // > ~~~c\n    // d\n    //\n    // Or:\n    //\n    // > | e |\n    // f\n    // ```\n    //\n    // The construct in the second example (fenced code) does not accept lazy\n    // lines, so it marked itself as done at the end of its first line, and\n    // then the content construct parses `d`.\n    // Most constructs in markdown match on the first line: if the first line\n    // forms a construct, a non-lazy line can’t “unmake” it.\n    //\n    // The construct in the third example is potentially a GFM table, and\n    // those are *weird*.\n    // It *could* be a table, from the first line, if the following line\n    // matches a condition.\n    // In this case, that second line is lazy, which “unmakes” the first line\n    // and turns the whole into one content block.\n    //\n    // We’ve now parsed the non-lazy and the lazy line, and can figure out\n    // whether the lazy line started a new flow block.\n    // If it did, we exit the current containers between the two flow blocks.\n    if (self.parser.lazy[token.start.line]) {\n      let index = childFlow.events.length\n      while (index--) {\n        if (\n          // The token starts before the line ending…\n          childFlow.events[index][1].start.offset < lineStartOffset &&\n          // …and either is not ended yet…\n          (!childFlow.events[index][1].end ||\n            // …or ends after it.\n            childFlow.events[index][1].end.offset > lineStartOffset)\n        ) {\n          // Exit: there’s still something open, which means it’s a lazy line\n          // part of something.\n          return\n        }\n      }\n\n      // Note: this algorithm for moving events around is similar to the\n      // algorithm when closing flow in `documentContinue`.\n      const indexBeforeExits = self.events.length\n      let indexBeforeFlow = indexBeforeExits\n      /** @type {boolean | undefined} */\n      let seen\n      /** @type {Point | undefined} */\n      let point\n\n      // Find the previous chunk (the one before the lazy line).\n      while (indexBeforeFlow--) {\n        if (\n          self.events[indexBeforeFlow][0] === 'exit' &&\n          self.events[indexBeforeFlow][1].type === 'chunkFlow'\n        ) {\n          if (seen) {\n            point = self.events[indexBeforeFlow][1].end\n            break\n          }\n          seen = true\n        }\n      }\n      exitContainers(continued)\n\n      // Fix positions.\n      index = indexBeforeExits\n      while (index < self.events.length) {\n        self.events[index][1].end = Object.assign({}, point)\n        index++\n      }\n\n      // Inject the exits earlier (they’re still also at the end).\n      splice(\n        self.events,\n        indexBeforeFlow + 1,\n        0,\n        self.events.slice(indexBeforeExits)\n      )\n\n      // Discard the duplicate exits.\n      self.events.length = index\n    }\n  }\n\n  /**\n   * @param {number} size\n   * @returns {undefined}\n   */\n  function exitContainers(size) {\n    let index = stack.length\n\n    // Exit open containers.\n    while (index-- > size) {\n      const entry = stack[index]\n      self.containerState = entry[1]\n      entry[0].exit.call(self, effects)\n    }\n    stack.length = size\n  }\n  function closeFlow() {\n    childFlow.write([null])\n    childToken = undefined\n    childFlow = undefined\n    self.containerState._closeFlow = undefined\n  }\n}\n\n/**\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeContainer(effects, ok, nok) {\n  // Always populated by defaults.\n\n  return factorySpace(\n    effects,\n    effects.attempt(this.parser.constructs.document, ok, nok),\n    'linePrefix',\n    this.parser.constructs.disable.null.includes('codeIndented') ? undefined : 4\n  )\n}\n","/**\n * @typedef {import('micromark-util-types').Construct} Construct\n * @typedef {import('micromark-util-types').State} State\n * @typedef {import('micromark-util-types').TokenizeContext} TokenizeContext\n * @typedef {import('micromark-util-types').Tokenizer} Tokenizer\n */\n\nimport {factorySpace} from 'micromark-factory-space'\nimport {markdownLineEnding, markdownSpace} from 'micromark-util-character'\n/** @type {Construct} */\nexport const blankLine = {\n  tokenize: tokenizeBlankLine,\n  partial: true\n}\n\n/**\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeBlankLine(effects, ok, nok) {\n  return start\n\n  /**\n   * Start of blank line.\n   *\n   * > 👉 **Note**: `␠` represents a space character.\n   *\n   * ```markdown\n   * > | ␠␠␊\n   *     ^\n   * > | ␊\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function start(code) {\n    return markdownSpace(code)\n      ? factorySpace(effects, after, 'linePrefix')(code)\n      : after(code)\n  }\n\n  /**\n   * At eof/eol, after optional whitespace.\n   *\n   * > 👉 **Note**: `␠` represents a space character.\n   *\n   * ```markdown\n   * > | ␠␠␊\n   *       ^\n   * > | ␊\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function after(code) {\n    return code === null || markdownLineEnding(code) ? ok(code) : nok(code)\n  }\n}\n","/**\n * @typedef {import('micromark-util-types').Construct} Construct\n * @typedef {import('micromark-util-types').Resolver} Resolver\n * @typedef {import('micromark-util-types').State} State\n * @typedef {import('micromark-util-types').Token} Token\n * @typedef {import('micromark-util-types').TokenizeContext} TokenizeContext\n * @typedef {import('micromark-util-types').Tokenizer} Tokenizer\n */\n\nimport {factorySpace} from 'micromark-factory-space'\nimport {markdownLineEnding} from 'micromark-util-character'\nimport {subtokenize} from 'micromark-util-subtokenize'\n/**\n * No name because it must not be turned off.\n * @type {Construct}\n */\nexport const content = {\n  tokenize: tokenizeContent,\n  resolve: resolveContent\n}\n\n/** @type {Construct} */\nconst continuationConstruct = {\n  tokenize: tokenizeContinuation,\n  partial: true\n}\n\n/**\n * Content is transparent: it’s parsed right now. That way, definitions are also\n * parsed right now: before text in paragraphs (specifically, media) are parsed.\n *\n * @type {Resolver}\n */\nfunction resolveContent(events) {\n  subtokenize(events)\n  return events\n}\n\n/**\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeContent(effects, ok) {\n  /** @type {Token | undefined} */\n  let previous\n  return chunkStart\n\n  /**\n   * Before a content chunk.\n   *\n   * ```markdown\n   * > | abc\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function chunkStart(code) {\n    effects.enter('content')\n    previous = effects.enter('chunkContent', {\n      contentType: 'content'\n    })\n    return chunkInside(code)\n  }\n\n  /**\n   * In a content chunk.\n   *\n   * ```markdown\n   * > | abc\n   *     ^^^\n   * ```\n   *\n   * @type {State}\n   */\n  function chunkInside(code) {\n    if (code === null) {\n      return contentEnd(code)\n    }\n\n    // To do: in `markdown-rs`, each line is parsed on its own, and everything\n    // is stitched together resolving.\n    if (markdownLineEnding(code)) {\n      return effects.check(\n        continuationConstruct,\n        contentContinue,\n        contentEnd\n      )(code)\n    }\n\n    // Data.\n    effects.consume(code)\n    return chunkInside\n  }\n\n  /**\n   *\n   *\n   * @type {State}\n   */\n  function contentEnd(code) {\n    effects.exit('chunkContent')\n    effects.exit('content')\n    return ok(code)\n  }\n\n  /**\n   *\n   *\n   * @type {State}\n   */\n  function contentContinue(code) {\n    effects.consume(code)\n    effects.exit('chunkContent')\n    previous.next = effects.enter('chunkContent', {\n      contentType: 'content',\n      previous\n    })\n    previous = previous.next\n    return chunkInside\n  }\n}\n\n/**\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeContinuation(effects, ok, nok) {\n  const self = this\n  return startLookahead\n\n  /**\n   *\n   *\n   * @type {State}\n   */\n  function startLookahead(code) {\n    effects.exit('chunkContent')\n    effects.enter('lineEnding')\n    effects.consume(code)\n    effects.exit('lineEnding')\n    return factorySpace(effects, prefixed, 'linePrefix')\n  }\n\n  /**\n   *\n   *\n   * @type {State}\n   */\n  function prefixed(code) {\n    if (code === null || markdownLineEnding(code)) {\n      return nok(code)\n    }\n\n    // Always populated by defaults.\n\n    const tail = self.events[self.events.length - 1]\n    if (\n      !self.parser.constructs.disable.null.includes('codeIndented') &&\n      tail &&\n      tail[1].type === 'linePrefix' &&\n      tail[2].sliceSerialize(tail[1], true).length >= 4\n    ) {\n      return ok(code)\n    }\n    return effects.interrupt(self.parser.constructs.flow, nok, ok)(code)\n  }\n}\n","/**\n * @typedef {import('micromark-util-types').InitialConstruct} InitialConstruct\n * @typedef {import('micromark-util-types').Initializer} Initializer\n * @typedef {import('micromark-util-types').State} State\n * @typedef {import('micromark-util-types').TokenizeContext} TokenizeContext\n */\n\nimport {blankLine, content} from 'micromark-core-commonmark'\nimport {factorySpace} from 'micromark-factory-space'\nimport {markdownLineEnding} from 'micromark-util-character'\n/** @type {InitialConstruct} */\nexport const flow = {\n  tokenize: initializeFlow\n}\n\n/**\n * @this {TokenizeContext}\n * @type {Initializer}\n */\nfunction initializeFlow(effects) {\n  const self = this\n  const initial = effects.attempt(\n    // Try to parse a blank line.\n    blankLine,\n    atBlankEnding,\n    // Try to parse initial flow (essentially, only code).\n    effects.attempt(\n      this.parser.constructs.flowInitial,\n      afterConstruct,\n      factorySpace(\n        effects,\n        effects.attempt(\n          this.parser.constructs.flow,\n          afterConstruct,\n          effects.attempt(content, afterConstruct)\n        ),\n        'linePrefix'\n      )\n    )\n  )\n  return initial\n\n  /** @type {State} */\n  function atBlankEnding(code) {\n    if (code === null) {\n      effects.consume(code)\n      return\n    }\n    effects.enter('lineEndingBlank')\n    effects.consume(code)\n    effects.exit('lineEndingBlank')\n    self.currentConstruct = undefined\n    return initial\n  }\n\n  /** @type {State} */\n  function afterConstruct(code) {\n    if (code === null) {\n      effects.consume(code)\n      return\n    }\n    effects.enter('lineEnding')\n    effects.consume(code)\n    effects.exit('lineEnding')\n    self.currentConstruct = undefined\n    return initial\n  }\n}\n","/**\n * @typedef {import('micromark-util-types').Code} Code\n * @typedef {import('micromark-util-types').InitialConstruct} InitialConstruct\n * @typedef {import('micromark-util-types').Initializer} Initializer\n * @typedef {import('micromark-util-types').Resolver} Resolver\n * @typedef {import('micromark-util-types').State} State\n * @typedef {import('micromark-util-types').TokenizeContext} TokenizeContext\n */\n\nexport const resolver = {\n  resolveAll: createResolver()\n}\nexport const string = initializeFactory('string')\nexport const text = initializeFactory('text')\n\n/**\n * @param {'string' | 'text'} field\n * @returns {InitialConstruct}\n */\nfunction initializeFactory(field) {\n  return {\n    tokenize: initializeText,\n    resolveAll: createResolver(\n      field === 'text' ? resolveAllLineSuffixes : undefined\n    )\n  }\n\n  /**\n   * @this {TokenizeContext}\n   * @type {Initializer}\n   */\n  function initializeText(effects) {\n    const self = this\n    const constructs = this.parser.constructs[field]\n    const text = effects.attempt(constructs, start, notText)\n    return start\n\n    /** @type {State} */\n    function start(code) {\n      return atBreak(code) ? text(code) : notText(code)\n    }\n\n    /** @type {State} */\n    function notText(code) {\n      if (code === null) {\n        effects.consume(code)\n        return\n      }\n      effects.enter('data')\n      effects.consume(code)\n      return data\n    }\n\n    /** @type {State} */\n    function data(code) {\n      if (atBreak(code)) {\n        effects.exit('data')\n        return text(code)\n      }\n\n      // Data.\n      effects.consume(code)\n      return data\n    }\n\n    /**\n     * @param {Code} code\n     * @returns {boolean}\n     */\n    function atBreak(code) {\n      if (code === null) {\n        return true\n      }\n      const list = constructs[code]\n      let index = -1\n      if (list) {\n        // Always populated by defaults.\n\n        while (++index < list.length) {\n          const item = list[index]\n          if (!item.previous || item.previous.call(self, self.previous)) {\n            return true\n          }\n        }\n      }\n      return false\n    }\n  }\n}\n\n/**\n * @param {Resolver | undefined} [extraResolver]\n * @returns {Resolver}\n */\nfunction createResolver(extraResolver) {\n  return resolveAllText\n\n  /** @type {Resolver} */\n  function resolveAllText(events, context) {\n    let index = -1\n    /** @type {number | undefined} */\n    let enter\n\n    // A rather boring computation (to merge adjacent `data` events) which\n    // improves mm performance by 29%.\n    while (++index <= events.length) {\n      if (enter === undefined) {\n        if (events[index] && events[index][1].type === 'data') {\n          enter = index\n          index++\n        }\n      } else if (!events[index] || events[index][1].type !== 'data') {\n        // Don’t do anything if there is one data token.\n        if (index !== enter + 2) {\n          events[enter][1].end = events[index - 1][1].end\n          events.splice(enter + 2, index - enter - 2)\n          index = enter + 2\n        }\n        enter = undefined\n      }\n    }\n    return extraResolver ? extraResolver(events, context) : events\n  }\n}\n\n/**\n * A rather ugly set of instructions which again looks at chunks in the input\n * stream.\n * The reason to do this here is that it is *much* faster to parse in reverse.\n * And that we can’t hook into `null` to split the line suffix before an EOF.\n * To do: figure out if we can make this into a clean utility, or even in core.\n * As it will be useful for GFMs literal autolink extension (and maybe even\n * tables?)\n *\n * @type {Resolver}\n */\nfunction resolveAllLineSuffixes(events, context) {\n  let eventIndex = 0 // Skip first.\n\n  while (++eventIndex <= events.length) {\n    if (\n      (eventIndex === events.length ||\n        events[eventIndex][1].type === 'lineEnding') &&\n      events[eventIndex - 1][1].type === 'data'\n    ) {\n      const data = events[eventIndex - 1][1]\n      const chunks = context.sliceStream(data)\n      let index = chunks.length\n      let bufferIndex = -1\n      let size = 0\n      /** @type {boolean | undefined} */\n      let tabs\n      while (index--) {\n        const chunk = chunks[index]\n        if (typeof chunk === 'string') {\n          bufferIndex = chunk.length\n          while (chunk.charCodeAt(bufferIndex - 1) === 32) {\n            size++\n            bufferIndex--\n          }\n          if (bufferIndex) break\n          bufferIndex = -1\n        }\n        // Number\n        else if (chunk === -2) {\n          tabs = true\n          size++\n        } else if (chunk === -1) {\n          // Empty\n        } else {\n          // Replacement character, exit.\n          index++\n          break\n        }\n      }\n      if (size) {\n        const token = {\n          type:\n            eventIndex === events.length || tabs || size < 2\n              ? 'lineSuffix'\n              : 'hardBreakTrailing',\n          start: {\n            line: data.end.line,\n            column: data.end.column - size,\n            offset: data.end.offset - size,\n            _index: data.start._index + index,\n            _bufferIndex: index\n              ? bufferIndex\n              : data.start._bufferIndex + bufferIndex\n          },\n          end: Object.assign({}, data.end)\n        }\n        data.end = Object.assign({}, token.start)\n        if (data.start.offset === data.end.offset) {\n          Object.assign(data, token)\n        } else {\n          events.splice(\n            eventIndex,\n            0,\n            ['enter', token, context],\n            ['exit', token, context]\n          )\n          eventIndex += 2\n        }\n      }\n      eventIndex++\n    }\n  }\n  return events\n}\n","/**\n * @typedef {import('micromark-util-types').Event} Event\n * @typedef {import('micromark-util-types').Resolver} Resolver\n * @typedef {import('micromark-util-types').TokenizeContext} TokenizeContext\n */\n\n/**\n * Call all `resolveAll`s.\n *\n * @param {Array<{resolveAll?: Resolver | undefined}>} constructs\n *   List of constructs, optionally with `resolveAll`s.\n * @param {Array<Event>} events\n *   List of events.\n * @param {TokenizeContext} context\n *   Context used by `tokenize`.\n * @returns {Array<Event>}\n *   Changed events.\n */\nexport function resolveAll(constructs, events, context) {\n  /** @type {Array<Resolver>} */\n  const called = []\n  let index = -1\n\n  while (++index < constructs.length) {\n    const resolve = constructs[index].resolveAll\n\n    if (resolve && !called.includes(resolve)) {\n      events = resolve(events, context)\n      called.push(resolve)\n    }\n  }\n\n  return events\n}\n","/**\n * @typedef {import('micromark-util-types').Chunk} Chunk\n * @typedef {import('micromark-util-types').Code} Code\n * @typedef {import('micromark-util-types').Construct} Construct\n * @typedef {import('micromark-util-types').ConstructRecord} ConstructRecord\n * @typedef {import('micromark-util-types').Effects} Effects\n * @typedef {import('micromark-util-types').InitialConstruct} InitialConstruct\n * @typedef {import('micromark-util-types').ParseContext} ParseContext\n * @typedef {import('micromark-util-types').Point} Point\n * @typedef {import('micromark-util-types').State} State\n * @typedef {import('micromark-util-types').Token} Token\n * @typedef {import('micromark-util-types').TokenType} TokenType\n * @typedef {import('micromark-util-types').TokenizeContext} TokenizeContext\n */\n\n/**\n * @callback Restore\n * @returns {undefined}\n *\n * @typedef Info\n * @property {Restore} restore\n * @property {number} from\n *\n * @callback ReturnHandle\n *   Handle a successful run.\n * @param {Construct} construct\n * @param {Info} info\n * @returns {undefined}\n */\n\nimport {markdownLineEnding} from 'micromark-util-character'\nimport {push, splice} from 'micromark-util-chunked'\nimport {resolveAll} from 'micromark-util-resolve-all'\n/**\n * Create a tokenizer.\n * Tokenizers deal with one type of data (e.g., containers, flow, text).\n * The parser is the object dealing with it all.\n * `initialize` works like other constructs, except that only its `tokenize`\n * function is used, in which case it doesn’t receive an `ok` or `nok`.\n * `from` can be given to set the point before the first character, although\n * when further lines are indented, they must be set with `defineSkip`.\n *\n * @param {ParseContext} parser\n * @param {InitialConstruct} initialize\n * @param {Omit<Point, '_bufferIndex' | '_index'> | undefined} [from]\n * @returns {TokenizeContext}\n */\nexport function createTokenizer(parser, initialize, from) {\n  /** @type {Point} */\n  let point = Object.assign(\n    from\n      ? Object.assign({}, from)\n      : {\n          line: 1,\n          column: 1,\n          offset: 0\n        },\n    {\n      _index: 0,\n      _bufferIndex: -1\n    }\n  )\n  /** @type {Record<string, number>} */\n  const columnStart = {}\n  /** @type {Array<Construct>} */\n  const resolveAllConstructs = []\n  /** @type {Array<Chunk>} */\n  let chunks = []\n  /** @type {Array<Token>} */\n  let stack = []\n  /** @type {boolean | undefined} */\n  let consumed = true\n\n  /**\n   * Tools used for tokenizing.\n   *\n   * @type {Effects}\n   */\n  const effects = {\n    consume,\n    enter,\n    exit,\n    attempt: constructFactory(onsuccessfulconstruct),\n    check: constructFactory(onsuccessfulcheck),\n    interrupt: constructFactory(onsuccessfulcheck, {\n      interrupt: true\n    })\n  }\n\n  /**\n   * State and tools for resolving and serializing.\n   *\n   * @type {TokenizeContext}\n   */\n  const context = {\n    previous: null,\n    code: null,\n    containerState: {},\n    events: [],\n    parser,\n    sliceStream,\n    sliceSerialize,\n    now,\n    defineSkip,\n    write\n  }\n\n  /**\n   * The state function.\n   *\n   * @type {State | undefined}\n   */\n  let state = initialize.tokenize.call(context, effects)\n\n  /**\n   * Track which character we expect to be consumed, to catch bugs.\n   *\n   * @type {Code}\n   */\n  let expectedCode\n  if (initialize.resolveAll) {\n    resolveAllConstructs.push(initialize)\n  }\n  return context\n\n  /** @type {TokenizeContext['write']} */\n  function write(slice) {\n    chunks = push(chunks, slice)\n    main()\n\n    // Exit if we’re not done, resolve might change stuff.\n    if (chunks[chunks.length - 1] !== null) {\n      return []\n    }\n    addResult(initialize, 0)\n\n    // Otherwise, resolve, and exit.\n    context.events = resolveAll(resolveAllConstructs, context.events, context)\n    return context.events\n  }\n\n  //\n  // Tools.\n  //\n\n  /** @type {TokenizeContext['sliceSerialize']} */\n  function sliceSerialize(token, expandTabs) {\n    return serializeChunks(sliceStream(token), expandTabs)\n  }\n\n  /** @type {TokenizeContext['sliceStream']} */\n  function sliceStream(token) {\n    return sliceChunks(chunks, token)\n  }\n\n  /** @type {TokenizeContext['now']} */\n  function now() {\n    // This is a hot path, so we clone manually instead of `Object.assign({}, point)`\n    const {line, column, offset, _index, _bufferIndex} = point\n    return {\n      line,\n      column,\n      offset,\n      _index,\n      _bufferIndex\n    }\n  }\n\n  /** @type {TokenizeContext['defineSkip']} */\n  function defineSkip(value) {\n    columnStart[value.line] = value.column\n    accountForPotentialSkip()\n  }\n\n  //\n  // State management.\n  //\n\n  /**\n   * Main loop (note that `_index` and `_bufferIndex` in `point` are modified by\n   * `consume`).\n   * Here is where we walk through the chunks, which either include strings of\n   * several characters, or numerical character codes.\n   * The reason to do this in a loop instead of a call is so the stack can\n   * drain.\n   *\n   * @returns {undefined}\n   */\n  function main() {\n    /** @type {number} */\n    let chunkIndex\n    while (point._index < chunks.length) {\n      const chunk = chunks[point._index]\n\n      // If we’re in a buffer chunk, loop through it.\n      if (typeof chunk === 'string') {\n        chunkIndex = point._index\n        if (point._bufferIndex < 0) {\n          point._bufferIndex = 0\n        }\n        while (\n          point._index === chunkIndex &&\n          point._bufferIndex < chunk.length\n        ) {\n          go(chunk.charCodeAt(point._bufferIndex))\n        }\n      } else {\n        go(chunk)\n      }\n    }\n  }\n\n  /**\n   * Deal with one code.\n   *\n   * @param {Code} code\n   * @returns {undefined}\n   */\n  function go(code) {\n    consumed = undefined\n    expectedCode = code\n    state = state(code)\n  }\n\n  /** @type {Effects['consume']} */\n  function consume(code) {\n    if (markdownLineEnding(code)) {\n      point.line++\n      point.column = 1\n      point.offset += code === -3 ? 2 : 1\n      accountForPotentialSkip()\n    } else if (code !== -1) {\n      point.column++\n      point.offset++\n    }\n\n    // Not in a string chunk.\n    if (point._bufferIndex < 0) {\n      point._index++\n    } else {\n      point._bufferIndex++\n\n      // At end of string chunk.\n      // @ts-expect-error Points w/ non-negative `_bufferIndex` reference\n      // strings.\n      if (point._bufferIndex === chunks[point._index].length) {\n        point._bufferIndex = -1\n        point._index++\n      }\n    }\n\n    // Expose the previous character.\n    context.previous = code\n\n    // Mark as consumed.\n    consumed = true\n  }\n\n  /** @type {Effects['enter']} */\n  function enter(type, fields) {\n    /** @type {Token} */\n    // @ts-expect-error Patch instead of assign required fields to help GC.\n    const token = fields || {}\n    token.type = type\n    token.start = now()\n    context.events.push(['enter', token, context])\n    stack.push(token)\n    return token\n  }\n\n  /** @type {Effects['exit']} */\n  function exit(type) {\n    const token = stack.pop()\n    token.end = now()\n    context.events.push(['exit', token, context])\n    return token\n  }\n\n  /**\n   * Use results.\n   *\n   * @type {ReturnHandle}\n   */\n  function onsuccessfulconstruct(construct, info) {\n    addResult(construct, info.from)\n  }\n\n  /**\n   * Discard results.\n   *\n   * @type {ReturnHandle}\n   */\n  function onsuccessfulcheck(_, info) {\n    info.restore()\n  }\n\n  /**\n   * Factory to attempt/check/interrupt.\n   *\n   * @param {ReturnHandle} onreturn\n   * @param {{interrupt?: boolean | undefined} | undefined} [fields]\n   */\n  function constructFactory(onreturn, fields) {\n    return hook\n\n    /**\n     * Handle either an object mapping codes to constructs, a list of\n     * constructs, or a single construct.\n     *\n     * @param {Array<Construct> | Construct | ConstructRecord} constructs\n     * @param {State} returnState\n     * @param {State | undefined} [bogusState]\n     * @returns {State}\n     */\n    function hook(constructs, returnState, bogusState) {\n      /** @type {Array<Construct>} */\n      let listOfConstructs\n      /** @type {number} */\n      let constructIndex\n      /** @type {Construct} */\n      let currentConstruct\n      /** @type {Info} */\n      let info\n      return Array.isArray(constructs) /* c8 ignore next 1 */\n        ? handleListOfConstructs(constructs)\n        : 'tokenize' in constructs\n        ? // @ts-expect-error Looks like a construct.\n          handleListOfConstructs([constructs])\n        : handleMapOfConstructs(constructs)\n\n      /**\n       * Handle a list of construct.\n       *\n       * @param {ConstructRecord} map\n       * @returns {State}\n       */\n      function handleMapOfConstructs(map) {\n        return start\n\n        /** @type {State} */\n        function start(code) {\n          const def = code !== null && map[code]\n          const all = code !== null && map.null\n          const list = [\n            // To do: add more extension tests.\n            /* c8 ignore next 2 */\n            ...(Array.isArray(def) ? def : def ? [def] : []),\n            ...(Array.isArray(all) ? all : all ? [all] : [])\n          ]\n          return handleListOfConstructs(list)(code)\n        }\n      }\n\n      /**\n       * Handle a list of construct.\n       *\n       * @param {Array<Construct>} list\n       * @returns {State}\n       */\n      function handleListOfConstructs(list) {\n        listOfConstructs = list\n        constructIndex = 0\n        if (list.length === 0) {\n          return bogusState\n        }\n        return handleConstruct(list[constructIndex])\n      }\n\n      /**\n       * Handle a single construct.\n       *\n       * @param {Construct} construct\n       * @returns {State}\n       */\n      function handleConstruct(construct) {\n        return start\n\n        /** @type {State} */\n        function start(code) {\n          // To do: not needed to store if there is no bogus state, probably?\n          // Currently doesn’t work because `inspect` in document does a check\n          // w/o a bogus, which doesn’t make sense. But it does seem to help perf\n          // by not storing.\n          info = store()\n          currentConstruct = construct\n          if (!construct.partial) {\n            context.currentConstruct = construct\n          }\n\n          // Always populated by defaults.\n\n          if (\n            construct.name &&\n            context.parser.constructs.disable.null.includes(construct.name)\n          ) {\n            return nok(code)\n          }\n          return construct.tokenize.call(\n            // If we do have fields, create an object w/ `context` as its\n            // prototype.\n            // This allows a “live binding”, which is needed for `interrupt`.\n            fields ? Object.assign(Object.create(context), fields) : context,\n            effects,\n            ok,\n            nok\n          )(code)\n        }\n      }\n\n      /** @type {State} */\n      function ok(code) {\n        consumed = true\n        onreturn(currentConstruct, info)\n        return returnState\n      }\n\n      /** @type {State} */\n      function nok(code) {\n        consumed = true\n        info.restore()\n        if (++constructIndex < listOfConstructs.length) {\n          return handleConstruct(listOfConstructs[constructIndex])\n        }\n        return bogusState\n      }\n    }\n  }\n\n  /**\n   * @param {Construct} construct\n   * @param {number} from\n   * @returns {undefined}\n   */\n  function addResult(construct, from) {\n    if (construct.resolveAll && !resolveAllConstructs.includes(construct)) {\n      resolveAllConstructs.push(construct)\n    }\n    if (construct.resolve) {\n      splice(\n        context.events,\n        from,\n        context.events.length - from,\n        construct.resolve(context.events.slice(from), context)\n      )\n    }\n    if (construct.resolveTo) {\n      context.events = construct.resolveTo(context.events, context)\n    }\n  }\n\n  /**\n   * Store state.\n   *\n   * @returns {Info}\n   */\n  function store() {\n    const startPoint = now()\n    const startPrevious = context.previous\n    const startCurrentConstruct = context.currentConstruct\n    const startEventsIndex = context.events.length\n    const startStack = Array.from(stack)\n    return {\n      restore,\n      from: startEventsIndex\n    }\n\n    /**\n     * Restore state.\n     *\n     * @returns {undefined}\n     */\n    function restore() {\n      point = startPoint\n      context.previous = startPrevious\n      context.currentConstruct = startCurrentConstruct\n      context.events.length = startEventsIndex\n      stack = startStack\n      accountForPotentialSkip()\n    }\n  }\n\n  /**\n   * Move the current point a bit forward in the line when it’s on a column\n   * skip.\n   *\n   * @returns {undefined}\n   */\n  function accountForPotentialSkip() {\n    if (point.line in columnStart && point.column < 2) {\n      point.column = columnStart[point.line]\n      point.offset += columnStart[point.line] - 1\n    }\n  }\n}\n\n/**\n * Get the chunks from a slice of chunks in the range of a token.\n *\n * @param {Array<Chunk>} chunks\n * @param {Pick<Token, 'end' | 'start'>} token\n * @returns {Array<Chunk>}\n */\nfunction sliceChunks(chunks, token) {\n  const startIndex = token.start._index\n  const startBufferIndex = token.start._bufferIndex\n  const endIndex = token.end._index\n  const endBufferIndex = token.end._bufferIndex\n  /** @type {Array<Chunk>} */\n  let view\n  if (startIndex === endIndex) {\n    // @ts-expect-error `_bufferIndex` is used on string chunks.\n    view = [chunks[startIndex].slice(startBufferIndex, endBufferIndex)]\n  } else {\n    view = chunks.slice(startIndex, endIndex)\n    if (startBufferIndex > -1) {\n      const head = view[0]\n      if (typeof head === 'string') {\n        view[0] = head.slice(startBufferIndex)\n      } else {\n        view.shift()\n      }\n    }\n    if (endBufferIndex > 0) {\n      // @ts-expect-error `_bufferIndex` is used on string chunks.\n      view.push(chunks[endIndex].slice(0, endBufferIndex))\n    }\n  }\n  return view\n}\n\n/**\n * Get the string value of a slice of chunks.\n *\n * @param {Array<Chunk>} chunks\n * @param {boolean | undefined} [expandTabs=false]\n * @returns {string}\n */\nfunction serializeChunks(chunks, expandTabs) {\n  let index = -1\n  /** @type {Array<string>} */\n  const result = []\n  /** @type {boolean | undefined} */\n  let atTab\n  while (++index < chunks.length) {\n    const chunk = chunks[index]\n    /** @type {string} */\n    let value\n    if (typeof chunk === 'string') {\n      value = chunk\n    } else\n      switch (chunk) {\n        case -5: {\n          value = '\\r'\n          break\n        }\n        case -4: {\n          value = '\\n'\n          break\n        }\n        case -3: {\n          value = '\\r' + '\\n'\n          break\n        }\n        case -2: {\n          value = expandTabs ? ' ' : '\\t'\n          break\n        }\n        case -1: {\n          if (!expandTabs && atTab) continue\n          value = ' '\n          break\n        }\n        default: {\n          // Currently only replacement character.\n          value = String.fromCharCode(chunk)\n        }\n      }\n    atTab = chunk === -2\n    result.push(value)\n  }\n  return result.join('')\n}\n","/**\n * @typedef {import('micromark-util-types').Code} Code\n * @typedef {import('micromark-util-types').Construct} Construct\n * @typedef {import('micromark-util-types').State} State\n * @typedef {import('micromark-util-types').TokenizeContext} TokenizeContext\n * @typedef {import('micromark-util-types').Tokenizer} Tokenizer\n */\n\nimport {factorySpace} from 'micromark-factory-space'\nimport {markdownLineEnding, markdownSpace} from 'micromark-util-character'\n/** @type {Construct} */\nexport const thematicBreak = {\n  name: 'thematicBreak',\n  tokenize: tokenizeThematicBreak\n}\n\n/**\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeThematicBreak(effects, ok, nok) {\n  let size = 0\n  /** @type {NonNullable<Code>} */\n  let marker\n  return start\n\n  /**\n   * Start of thematic break.\n   *\n   * ```markdown\n   * > | ***\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function start(code) {\n    effects.enter('thematicBreak')\n    // To do: parse indent like `markdown-rs`.\n    return before(code)\n  }\n\n  /**\n   * After optional whitespace, at marker.\n   *\n   * ```markdown\n   * > | ***\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function before(code) {\n    marker = code\n    return atBreak(code)\n  }\n\n  /**\n   * After something, before something else.\n   *\n   * ```markdown\n   * > | ***\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function atBreak(code) {\n    if (code === marker) {\n      effects.enter('thematicBreakSequence')\n      return sequence(code)\n    }\n    if (size >= 3 && (code === null || markdownLineEnding(code))) {\n      effects.exit('thematicBreak')\n      return ok(code)\n    }\n    return nok(code)\n  }\n\n  /**\n   * In sequence.\n   *\n   * ```markdown\n   * > | ***\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function sequence(code) {\n    if (code === marker) {\n      effects.consume(code)\n      size++\n      return sequence\n    }\n    effects.exit('thematicBreakSequence')\n    return markdownSpace(code)\n      ? factorySpace(effects, atBreak, 'whitespace')(code)\n      : atBreak(code)\n  }\n}\n","/**\n * @typedef {import('micromark-util-types').Code} Code\n * @typedef {import('micromark-util-types').Construct} Construct\n * @typedef {import('micromark-util-types').ContainerState} ContainerState\n * @typedef {import('micromark-util-types').Exiter} Exiter\n * @typedef {import('micromark-util-types').State} State\n * @typedef {import('micromark-util-types').TokenizeContext} TokenizeContext\n * @typedef {import('micromark-util-types').Tokenizer} Tokenizer\n */\n\nimport {factorySpace} from 'micromark-factory-space'\nimport {asciiDigit, markdownSpace} from 'micromark-util-character'\nimport {blankLine} from './blank-line.js'\nimport {thematicBreak} from './thematic-break.js'\n\n/** @type {Construct} */\nexport const list = {\n  name: 'list',\n  tokenize: tokenizeListStart,\n  continuation: {\n    tokenize: tokenizeListContinuation\n  },\n  exit: tokenizeListEnd\n}\n\n/** @type {Construct} */\nconst listItemPrefixWhitespaceConstruct = {\n  tokenize: tokenizeListItemPrefixWhitespace,\n  partial: true\n}\n\n/** @type {Construct} */\nconst indentConstruct = {\n  tokenize: tokenizeIndent,\n  partial: true\n}\n\n// To do: `markdown-rs` parses list items on their own and later stitches them\n// together.\n\n/**\n * @type {Tokenizer}\n * @this {TokenizeContext}\n */\nfunction tokenizeListStart(effects, ok, nok) {\n  const self = this\n  const tail = self.events[self.events.length - 1]\n  let initialSize =\n    tail && tail[1].type === 'linePrefix'\n      ? tail[2].sliceSerialize(tail[1], true).length\n      : 0\n  let size = 0\n  return start\n\n  /** @type {State} */\n  function start(code) {\n    const kind =\n      self.containerState.type ||\n      (code === 42 || code === 43 || code === 45\n        ? 'listUnordered'\n        : 'listOrdered')\n    if (\n      kind === 'listUnordered'\n        ? !self.containerState.marker || code === self.containerState.marker\n        : asciiDigit(code)\n    ) {\n      if (!self.containerState.type) {\n        self.containerState.type = kind\n        effects.enter(kind, {\n          _container: true\n        })\n      }\n      if (kind === 'listUnordered') {\n        effects.enter('listItemPrefix')\n        return code === 42 || code === 45\n          ? effects.check(thematicBreak, nok, atMarker)(code)\n          : atMarker(code)\n      }\n      if (!self.interrupt || code === 49) {\n        effects.enter('listItemPrefix')\n        effects.enter('listItemValue')\n        return inside(code)\n      }\n    }\n    return nok(code)\n  }\n\n  /** @type {State} */\n  function inside(code) {\n    if (asciiDigit(code) && ++size < 10) {\n      effects.consume(code)\n      return inside\n    }\n    if (\n      (!self.interrupt || size < 2) &&\n      (self.containerState.marker\n        ? code === self.containerState.marker\n        : code === 41 || code === 46)\n    ) {\n      effects.exit('listItemValue')\n      return atMarker(code)\n    }\n    return nok(code)\n  }\n\n  /**\n   * @type {State}\n   **/\n  function atMarker(code) {\n    effects.enter('listItemMarker')\n    effects.consume(code)\n    effects.exit('listItemMarker')\n    self.containerState.marker = self.containerState.marker || code\n    return effects.check(\n      blankLine,\n      // Can’t be empty when interrupting.\n      self.interrupt ? nok : onBlank,\n      effects.attempt(\n        listItemPrefixWhitespaceConstruct,\n        endOfPrefix,\n        otherPrefix\n      )\n    )\n  }\n\n  /** @type {State} */\n  function onBlank(code) {\n    self.containerState.initialBlankLine = true\n    initialSize++\n    return endOfPrefix(code)\n  }\n\n  /** @type {State} */\n  function otherPrefix(code) {\n    if (markdownSpace(code)) {\n      effects.enter('listItemPrefixWhitespace')\n      effects.consume(code)\n      effects.exit('listItemPrefixWhitespace')\n      return endOfPrefix\n    }\n    return nok(code)\n  }\n\n  /** @type {State} */\n  function endOfPrefix(code) {\n    self.containerState.size =\n      initialSize +\n      self.sliceSerialize(effects.exit('listItemPrefix'), true).length\n    return ok(code)\n  }\n}\n\n/**\n * @type {Tokenizer}\n * @this {TokenizeContext}\n */\nfunction tokenizeListContinuation(effects, ok, nok) {\n  const self = this\n  self.containerState._closeFlow = undefined\n  return effects.check(blankLine, onBlank, notBlank)\n\n  /** @type {State} */\n  function onBlank(code) {\n    self.containerState.furtherBlankLines =\n      self.containerState.furtherBlankLines ||\n      self.containerState.initialBlankLine\n\n    // We have a blank line.\n    // Still, try to consume at most the items size.\n    return factorySpace(\n      effects,\n      ok,\n      'listItemIndent',\n      self.containerState.size + 1\n    )(code)\n  }\n\n  /** @type {State} */\n  function notBlank(code) {\n    if (self.containerState.furtherBlankLines || !markdownSpace(code)) {\n      self.containerState.furtherBlankLines = undefined\n      self.containerState.initialBlankLine = undefined\n      return notInCurrentItem(code)\n    }\n    self.containerState.furtherBlankLines = undefined\n    self.containerState.initialBlankLine = undefined\n    return effects.attempt(indentConstruct, ok, notInCurrentItem)(code)\n  }\n\n  /** @type {State} */\n  function notInCurrentItem(code) {\n    // While we do continue, we signal that the flow should be closed.\n    self.containerState._closeFlow = true\n    // As we’re closing flow, we’re no longer interrupting.\n    self.interrupt = undefined\n    // Always populated by defaults.\n\n    return factorySpace(\n      effects,\n      effects.attempt(list, ok, nok),\n      'linePrefix',\n      self.parser.constructs.disable.null.includes('codeIndented')\n        ? undefined\n        : 4\n    )(code)\n  }\n}\n\n/**\n * @type {Tokenizer}\n * @this {TokenizeContext}\n */\nfunction tokenizeIndent(effects, ok, nok) {\n  const self = this\n  return factorySpace(\n    effects,\n    afterPrefix,\n    'listItemIndent',\n    self.containerState.size + 1\n  )\n\n  /** @type {State} */\n  function afterPrefix(code) {\n    const tail = self.events[self.events.length - 1]\n    return tail &&\n      tail[1].type === 'listItemIndent' &&\n      tail[2].sliceSerialize(tail[1], true).length === self.containerState.size\n      ? ok(code)\n      : nok(code)\n  }\n}\n\n/**\n * @type {Exiter}\n * @this {TokenizeContext}\n */\nfunction tokenizeListEnd(effects) {\n  effects.exit(this.containerState.type)\n}\n\n/**\n * @type {Tokenizer}\n * @this {TokenizeContext}\n */\nfunction tokenizeListItemPrefixWhitespace(effects, ok, nok) {\n  const self = this\n\n  // Always populated by defaults.\n\n  return factorySpace(\n    effects,\n    afterPrefix,\n    'listItemPrefixWhitespace',\n    self.parser.constructs.disable.null.includes('codeIndented')\n      ? undefined\n      : 4 + 1\n  )\n\n  /** @type {State} */\n  function afterPrefix(code) {\n    const tail = self.events[self.events.length - 1]\n    return !markdownSpace(code) &&\n      tail &&\n      tail[1].type === 'listItemPrefixWhitespace'\n      ? ok(code)\n      : nok(code)\n  }\n}\n","/**\n * @typedef {import('micromark-util-types').Construct} Construct\n * @typedef {import('micromark-util-types').Exiter} Exiter\n * @typedef {import('micromark-util-types').State} State\n * @typedef {import('micromark-util-types').TokenizeContext} TokenizeContext\n * @typedef {import('micromark-util-types').Tokenizer} Tokenizer\n */\n\nimport {factorySpace} from 'micromark-factory-space'\nimport {markdownSpace} from 'micromark-util-character'\n/** @type {Construct} */\nexport const blockQuote = {\n  name: 'blockQuote',\n  tokenize: tokenizeBlockQuoteStart,\n  continuation: {\n    tokenize: tokenizeBlockQuoteContinuation\n  },\n  exit\n}\n\n/**\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeBlockQuoteStart(effects, ok, nok) {\n  const self = this\n  return start\n\n  /**\n   * Start of block quote.\n   *\n   * ```markdown\n   * > | > a\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function start(code) {\n    if (code === 62) {\n      const state = self.containerState\n      if (!state.open) {\n        effects.enter('blockQuote', {\n          _container: true\n        })\n        state.open = true\n      }\n      effects.enter('blockQuotePrefix')\n      effects.enter('blockQuoteMarker')\n      effects.consume(code)\n      effects.exit('blockQuoteMarker')\n      return after\n    }\n    return nok(code)\n  }\n\n  /**\n   * After `>`, before optional whitespace.\n   *\n   * ```markdown\n   * > | > a\n   *      ^\n   * ```\n   *\n   * @type {State}\n   */\n  function after(code) {\n    if (markdownSpace(code)) {\n      effects.enter('blockQuotePrefixWhitespace')\n      effects.consume(code)\n      effects.exit('blockQuotePrefixWhitespace')\n      effects.exit('blockQuotePrefix')\n      return ok\n    }\n    effects.exit('blockQuotePrefix')\n    return ok(code)\n  }\n}\n\n/**\n * Start of block quote continuation.\n *\n * ```markdown\n *   | > a\n * > | > b\n *     ^\n * ```\n *\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeBlockQuoteContinuation(effects, ok, nok) {\n  const self = this\n  return contStart\n\n  /**\n   * Start of block quote continuation.\n   *\n   * Also used to parse the first block quote opening.\n   *\n   * ```markdown\n   *   | > a\n   * > | > b\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function contStart(code) {\n    if (markdownSpace(code)) {\n      // Always populated by defaults.\n\n      return factorySpace(\n        effects,\n        contBefore,\n        'linePrefix',\n        self.parser.constructs.disable.null.includes('codeIndented')\n          ? undefined\n          : 4\n      )(code)\n    }\n    return contBefore(code)\n  }\n\n  /**\n   * At `>`, after optional whitespace.\n   *\n   * Also used to parse the first block quote opening.\n   *\n   * ```markdown\n   *   | > a\n   * > | > b\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function contBefore(code) {\n    return effects.attempt(blockQuote, ok, nok)(code)\n  }\n}\n\n/** @type {Exiter} */\nfunction exit(effects) {\n  effects.exit('blockQuote')\n}\n","/**\n * @typedef {import('micromark-util-types').Effects} Effects\n * @typedef {import('micromark-util-types').State} State\n * @typedef {import('micromark-util-types').TokenType} TokenType\n */\n\nimport {\n  asciiControl,\n  markdownLineEndingOrSpace,\n  markdownLineEnding\n} from 'micromark-util-character'\n/**\n * Parse destinations.\n *\n * ###### Examples\n *\n * ```markdown\n * <a>\n * <a\\>b>\n * <a b>\n * <a)>\n * a\n * a\\)b\n * a(b)c\n * a(b)\n * ```\n *\n * @param {Effects} effects\n *   Context.\n * @param {State} ok\n *   State switched to when successful.\n * @param {State} nok\n *   State switched to when unsuccessful.\n * @param {TokenType} type\n *   Type for whole (`<a>` or `b`).\n * @param {TokenType} literalType\n *   Type when enclosed (`<a>`).\n * @param {TokenType} literalMarkerType\n *   Type for enclosing (`<` and `>`).\n * @param {TokenType} rawType\n *   Type when not enclosed (`b`).\n * @param {TokenType} stringType\n *   Type for the value (`a` or `b`).\n * @param {number | undefined} [max=Infinity]\n *   Depth of nested parens (inclusive).\n * @returns {State}\n *   Start state.\n */ // eslint-disable-next-line max-params\nexport function factoryDestination(\n  effects,\n  ok,\n  nok,\n  type,\n  literalType,\n  literalMarkerType,\n  rawType,\n  stringType,\n  max\n) {\n  const limit = max || Number.POSITIVE_INFINITY\n  let balance = 0\n  return start\n\n  /**\n   * Start of destination.\n   *\n   * ```markdown\n   * > | <aa>\n   *     ^\n   * > | aa\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function start(code) {\n    if (code === 60) {\n      effects.enter(type)\n      effects.enter(literalType)\n      effects.enter(literalMarkerType)\n      effects.consume(code)\n      effects.exit(literalMarkerType)\n      return enclosedBefore\n    }\n\n    // ASCII control, space, closing paren.\n    if (code === null || code === 32 || code === 41 || asciiControl(code)) {\n      return nok(code)\n    }\n    effects.enter(type)\n    effects.enter(rawType)\n    effects.enter(stringType)\n    effects.enter('chunkString', {\n      contentType: 'string'\n    })\n    return raw(code)\n  }\n\n  /**\n   * After `<`, at an enclosed destination.\n   *\n   * ```markdown\n   * > | <aa>\n   *      ^\n   * ```\n   *\n   * @type {State}\n   */\n  function enclosedBefore(code) {\n    if (code === 62) {\n      effects.enter(literalMarkerType)\n      effects.consume(code)\n      effects.exit(literalMarkerType)\n      effects.exit(literalType)\n      effects.exit(type)\n      return ok\n    }\n    effects.enter(stringType)\n    effects.enter('chunkString', {\n      contentType: 'string'\n    })\n    return enclosed(code)\n  }\n\n  /**\n   * In enclosed destination.\n   *\n   * ```markdown\n   * > | <aa>\n   *      ^\n   * ```\n   *\n   * @type {State}\n   */\n  function enclosed(code) {\n    if (code === 62) {\n      effects.exit('chunkString')\n      effects.exit(stringType)\n      return enclosedBefore(code)\n    }\n    if (code === null || code === 60 || markdownLineEnding(code)) {\n      return nok(code)\n    }\n    effects.consume(code)\n    return code === 92 ? enclosedEscape : enclosed\n  }\n\n  /**\n   * After `\\`, at a special character.\n   *\n   * ```markdown\n   * > | <a\\*a>\n   *        ^\n   * ```\n   *\n   * @type {State}\n   */\n  function enclosedEscape(code) {\n    if (code === 60 || code === 62 || code === 92) {\n      effects.consume(code)\n      return enclosed\n    }\n    return enclosed(code)\n  }\n\n  /**\n   * In raw destination.\n   *\n   * ```markdown\n   * > | aa\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function raw(code) {\n    if (\n      !balance &&\n      (code === null || code === 41 || markdownLineEndingOrSpace(code))\n    ) {\n      effects.exit('chunkString')\n      effects.exit(stringType)\n      effects.exit(rawType)\n      effects.exit(type)\n      return ok(code)\n    }\n    if (balance < limit && code === 40) {\n      effects.consume(code)\n      balance++\n      return raw\n    }\n    if (code === 41) {\n      effects.consume(code)\n      balance--\n      return raw\n    }\n\n    // ASCII control (but *not* `\\0`) and space and `(`.\n    // Note: in `markdown-rs`, `\\0` exists in codes, in `micromark-js` it\n    // doesn’t.\n    if (code === null || code === 32 || code === 40 || asciiControl(code)) {\n      return nok(code)\n    }\n    effects.consume(code)\n    return code === 92 ? rawEscape : raw\n  }\n\n  /**\n   * After `\\`, at special character.\n   *\n   * ```markdown\n   * > | a\\*a\n   *       ^\n   * ```\n   *\n   * @type {State}\n   */\n  function rawEscape(code) {\n    if (code === 40 || code === 41 || code === 92) {\n      effects.consume(code)\n      return raw\n    }\n    return raw(code)\n  }\n}\n","/**\n * @typedef {import('micromark-util-types').Effects} Effects\n * @typedef {import('micromark-util-types').State} State\n * @typedef {import('micromark-util-types').TokenizeContext} TokenizeContext\n * @typedef {import('micromark-util-types').TokenType} TokenType\n */\n\nimport {markdownLineEnding, markdownSpace} from 'micromark-util-character'\n/**\n * Parse labels.\n *\n * > 👉 **Note**: labels in markdown are capped at 999 characters in the string.\n *\n * ###### Examples\n *\n * ```markdown\n * [a]\n * [a\n * b]\n * [a\\]b]\n * ```\n *\n * @this {TokenizeContext}\n *   Tokenize context.\n * @param {Effects} effects\n *   Context.\n * @param {State} ok\n *   State switched to when successful.\n * @param {State} nok\n *   State switched to when unsuccessful.\n * @param {TokenType} type\n *   Type of the whole label (`[a]`).\n * @param {TokenType} markerType\n *   Type for the markers (`[` and `]`).\n * @param {TokenType} stringType\n *   Type for the identifier (`a`).\n * @returns {State}\n *   Start state.\n */ // eslint-disable-next-line max-params\nexport function factoryLabel(effects, ok, nok, type, markerType, stringType) {\n  const self = this\n  let size = 0\n  /** @type {boolean} */\n  let seen\n  return start\n\n  /**\n   * Start of label.\n   *\n   * ```markdown\n   * > | [a]\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function start(code) {\n    effects.enter(type)\n    effects.enter(markerType)\n    effects.consume(code)\n    effects.exit(markerType)\n    effects.enter(stringType)\n    return atBreak\n  }\n\n  /**\n   * In label, at something, before something else.\n   *\n   * ```markdown\n   * > | [a]\n   *      ^\n   * ```\n   *\n   * @type {State}\n   */\n  function atBreak(code) {\n    if (\n      size > 999 ||\n      code === null ||\n      code === 91 ||\n      (code === 93 && !seen) ||\n      // To do: remove in the future once we’ve switched from\n      // `micromark-extension-footnote` to `micromark-extension-gfm-footnote`,\n      // which doesn’t need this.\n      // Hidden footnotes hook.\n      /* c8 ignore next 3 */\n      (code === 94 &&\n        !size &&\n        '_hiddenFootnoteSupport' in self.parser.constructs)\n    ) {\n      return nok(code)\n    }\n    if (code === 93) {\n      effects.exit(stringType)\n      effects.enter(markerType)\n      effects.consume(code)\n      effects.exit(markerType)\n      effects.exit(type)\n      return ok\n    }\n\n    // To do: indent? Link chunks and EOLs together?\n    if (markdownLineEnding(code)) {\n      effects.enter('lineEnding')\n      effects.consume(code)\n      effects.exit('lineEnding')\n      return atBreak\n    }\n    effects.enter('chunkString', {\n      contentType: 'string'\n    })\n    return labelInside(code)\n  }\n\n  /**\n   * In label, in text.\n   *\n   * ```markdown\n   * > | [a]\n   *      ^\n   * ```\n   *\n   * @type {State}\n   */\n  function labelInside(code) {\n    if (\n      code === null ||\n      code === 91 ||\n      code === 93 ||\n      markdownLineEnding(code) ||\n      size++ > 999\n    ) {\n      effects.exit('chunkString')\n      return atBreak(code)\n    }\n    effects.consume(code)\n    if (!seen) seen = !markdownSpace(code)\n    return code === 92 ? labelEscape : labelInside\n  }\n\n  /**\n   * After `\\`, at a special character.\n   *\n   * ```markdown\n   * > | [a\\*a]\n   *        ^\n   * ```\n   *\n   * @type {State}\n   */\n  function labelEscape(code) {\n    if (code === 91 || code === 92 || code === 93) {\n      effects.consume(code)\n      size++\n      return labelInside\n    }\n    return labelInside(code)\n  }\n}\n","/**\n * @typedef {import('micromark-util-types').Code} Code\n * @typedef {import('micromark-util-types').Effects} Effects\n * @typedef {import('micromark-util-types').State} State\n * @typedef {import('micromark-util-types').TokenType} TokenType\n */\n\nimport {factorySpace} from 'micromark-factory-space'\nimport {markdownLineEnding} from 'micromark-util-character'\n/**\n * Parse titles.\n *\n * ###### Examples\n *\n * ```markdown\n * \"a\"\n * 'b'\n * (c)\n * \"a\n * b\"\n * 'a\n *     b'\n * (a\\)b)\n * ```\n *\n * @param {Effects} effects\n *   Context.\n * @param {State} ok\n *   State switched to when successful.\n * @param {State} nok\n *   State switched to when unsuccessful.\n * @param {TokenType} type\n *   Type of the whole title (`\"a\"`, `'b'`, `(c)`).\n * @param {TokenType} markerType\n *   Type for the markers (`\"`, `'`, `(`, and `)`).\n * @param {TokenType} stringType\n *   Type for the value (`a`).\n * @returns {State}\n *   Start state.\n */ // eslint-disable-next-line max-params\nexport function factoryTitle(effects, ok, nok, type, markerType, stringType) {\n  /** @type {NonNullable<Code>} */\n  let marker\n  return start\n\n  /**\n   * Start of title.\n   *\n   * ```markdown\n   * > | \"a\"\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function start(code) {\n    if (code === 34 || code === 39 || code === 40) {\n      effects.enter(type)\n      effects.enter(markerType)\n      effects.consume(code)\n      effects.exit(markerType)\n      marker = code === 40 ? 41 : code\n      return begin\n    }\n    return nok(code)\n  }\n\n  /**\n   * After opening marker.\n   *\n   * This is also used at the closing marker.\n   *\n   * ```markdown\n   * > | \"a\"\n   *      ^\n   * ```\n   *\n   * @type {State}\n   */\n  function begin(code) {\n    if (code === marker) {\n      effects.enter(markerType)\n      effects.consume(code)\n      effects.exit(markerType)\n      effects.exit(type)\n      return ok\n    }\n    effects.enter(stringType)\n    return atBreak(code)\n  }\n\n  /**\n   * At something, before something else.\n   *\n   * ```markdown\n   * > | \"a\"\n   *      ^\n   * ```\n   *\n   * @type {State}\n   */\n  function atBreak(code) {\n    if (code === marker) {\n      effects.exit(stringType)\n      return begin(marker)\n    }\n    if (code === null) {\n      return nok(code)\n    }\n\n    // Note: blank lines can’t exist in content.\n    if (markdownLineEnding(code)) {\n      // To do: use `space_or_tab_eol_with_options`, connect.\n      effects.enter('lineEnding')\n      effects.consume(code)\n      effects.exit('lineEnding')\n      return factorySpace(effects, atBreak, 'linePrefix')\n    }\n    effects.enter('chunkString', {\n      contentType: 'string'\n    })\n    return inside(code)\n  }\n\n  /**\n   *\n   *\n   * @type {State}\n   */\n  function inside(code) {\n    if (code === marker || code === null || markdownLineEnding(code)) {\n      effects.exit('chunkString')\n      return atBreak(code)\n    }\n    effects.consume(code)\n    return code === 92 ? escape : inside\n  }\n\n  /**\n   * After `\\`, at a special character.\n   *\n   * ```markdown\n   * > | \"a\\*b\"\n   *      ^\n   * ```\n   *\n   * @type {State}\n   */\n  function escape(code) {\n    if (code === marker || code === 92) {\n      effects.consume(code)\n      return inside\n    }\n    return inside(code)\n  }\n}\n","/**\n * @typedef {import('micromark-util-types').Effects} Effects\n * @typedef {import('micromark-util-types').State} State\n */\n\nimport {factorySpace} from 'micromark-factory-space'\nimport {markdownLineEnding, markdownSpace} from 'micromark-util-character'\n/**\n * Parse spaces and tabs.\n *\n * There is no `nok` parameter:\n *\n * *   line endings or spaces in markdown are often optional, in which case this\n *     factory can be used and `ok` will be switched to whether spaces were found\n *     or not\n * *   one line ending or space can be detected with\n *     `markdownLineEndingOrSpace(code)` right before using `factoryWhitespace`\n *\n * @param {Effects} effects\n *   Context.\n * @param {State} ok\n *   State switched to when successful.\n * @returns {State}\n *   Start state.\n */\nexport function factoryWhitespace(effects, ok) {\n  /** @type {boolean} */\n  let seen\n  return start\n\n  /** @type {State} */\n  function start(code) {\n    if (markdownLineEnding(code)) {\n      effects.enter('lineEnding')\n      effects.consume(code)\n      effects.exit('lineEnding')\n      seen = true\n      return start\n    }\n    if (markdownSpace(code)) {\n      return factorySpace(\n        effects,\n        start,\n        seen ? 'linePrefix' : 'lineSuffix'\n      )(code)\n    }\n    return ok(code)\n  }\n}\n","/**\n * Normalize an identifier (as found in references, definitions).\n *\n * Collapses markdown whitespace, trim, and then lower- and uppercase.\n *\n * Some characters are considered “uppercase”, such as U+03F4 (`ϴ`), but if their\n * lowercase counterpart (U+03B8 (`θ`)) is uppercased will result in a different\n * uppercase character (U+0398 (`Θ`)).\n * So, to get a canonical form, we perform both lower- and uppercase.\n *\n * Using uppercase last makes sure keys will never interact with default\n * prototypal values (such as `constructor`): nothing in the prototype of\n * `Object` is uppercase.\n *\n * @param {string} value\n *   Identifier to normalize.\n * @returns {string}\n *   Normalized identifier.\n */\nexport function normalizeIdentifier(value) {\n  return (\n    value\n      // Collapse markdown whitespace.\n      .replace(/[\\t\\n\\r ]+/g, ' ')\n      // Trim.\n      .replace(/^ | $/g, '')\n      // Some characters are considered “uppercase”, but if their lowercase\n      // counterpart is uppercased will result in a different uppercase\n      // character.\n      // Hence, to get that form, we perform both lower- and uppercase.\n      // Upper case makes sure keys will not interact with default prototypal\n      // methods: no method is uppercase.\n      .toLowerCase()\n      .toUpperCase()\n  )\n}\n","/**\n * @typedef {import('micromark-util-types').Construct} Construct\n * @typedef {import('micromark-util-types').State} State\n * @typedef {import('micromark-util-types').TokenizeContext} TokenizeContext\n * @typedef {import('micromark-util-types').Tokenizer} Tokenizer\n */\n\nimport {factoryDestination} from 'micromark-factory-destination'\nimport {factoryLabel} from 'micromark-factory-label'\nimport {factorySpace} from 'micromark-factory-space'\nimport {factoryTitle} from 'micromark-factory-title'\nimport {factoryWhitespace} from 'micromark-factory-whitespace'\nimport {\n  markdownLineEnding,\n  markdownLineEndingOrSpace,\n  markdownSpace\n} from 'micromark-util-character'\nimport {normalizeIdentifier} from 'micromark-util-normalize-identifier'\n/** @type {Construct} */\nexport const definition = {\n  name: 'definition',\n  tokenize: tokenizeDefinition\n}\n\n/** @type {Construct} */\nconst titleBefore = {\n  tokenize: tokenizeTitleBefore,\n  partial: true\n}\n\n/**\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeDefinition(effects, ok, nok) {\n  const self = this\n  /** @type {string} */\n  let identifier\n  return start\n\n  /**\n   * At start of a definition.\n   *\n   * ```markdown\n   * > | [a]: b \"c\"\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function start(code) {\n    // Do not interrupt paragraphs (but do follow definitions).\n    // To do: do `interrupt` the way `markdown-rs` does.\n    // To do: parse whitespace the way `markdown-rs` does.\n    effects.enter('definition')\n    return before(code)\n  }\n\n  /**\n   * After optional whitespace, at `[`.\n   *\n   * ```markdown\n   * > | [a]: b \"c\"\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function before(code) {\n    // To do: parse whitespace the way `markdown-rs` does.\n\n    return factoryLabel.call(\n      self,\n      effects,\n      labelAfter,\n      // Note: we don’t need to reset the way `markdown-rs` does.\n      nok,\n      'definitionLabel',\n      'definitionLabelMarker',\n      'definitionLabelString'\n    )(code)\n  }\n\n  /**\n   * After label.\n   *\n   * ```markdown\n   * > | [a]: b \"c\"\n   *        ^\n   * ```\n   *\n   * @type {State}\n   */\n  function labelAfter(code) {\n    identifier = normalizeIdentifier(\n      self.sliceSerialize(self.events[self.events.length - 1][1]).slice(1, -1)\n    )\n    if (code === 58) {\n      effects.enter('definitionMarker')\n      effects.consume(code)\n      effects.exit('definitionMarker')\n      return markerAfter\n    }\n    return nok(code)\n  }\n\n  /**\n   * After marker.\n   *\n   * ```markdown\n   * > | [a]: b \"c\"\n   *         ^\n   * ```\n   *\n   * @type {State}\n   */\n  function markerAfter(code) {\n    // Note: whitespace is optional.\n    return markdownLineEndingOrSpace(code)\n      ? factoryWhitespace(effects, destinationBefore)(code)\n      : destinationBefore(code)\n  }\n\n  /**\n   * Before destination.\n   *\n   * ```markdown\n   * > | [a]: b \"c\"\n   *          ^\n   * ```\n   *\n   * @type {State}\n   */\n  function destinationBefore(code) {\n    return factoryDestination(\n      effects,\n      destinationAfter,\n      // Note: we don’t need to reset the way `markdown-rs` does.\n      nok,\n      'definitionDestination',\n      'definitionDestinationLiteral',\n      'definitionDestinationLiteralMarker',\n      'definitionDestinationRaw',\n      'definitionDestinationString'\n    )(code)\n  }\n\n  /**\n   * After destination.\n   *\n   * ```markdown\n   * > | [a]: b \"c\"\n   *           ^\n   * ```\n   *\n   * @type {State}\n   */\n  function destinationAfter(code) {\n    return effects.attempt(titleBefore, after, after)(code)\n  }\n\n  /**\n   * After definition.\n   *\n   * ```markdown\n   * > | [a]: b\n   *           ^\n   * > | [a]: b \"c\"\n   *               ^\n   * ```\n   *\n   * @type {State}\n   */\n  function after(code) {\n    return markdownSpace(code)\n      ? factorySpace(effects, afterWhitespace, 'whitespace')(code)\n      : afterWhitespace(code)\n  }\n\n  /**\n   * After definition, after optional whitespace.\n   *\n   * ```markdown\n   * > | [a]: b\n   *           ^\n   * > | [a]: b \"c\"\n   *               ^\n   * ```\n   *\n   * @type {State}\n   */\n  function afterWhitespace(code) {\n    if (code === null || markdownLineEnding(code)) {\n      effects.exit('definition')\n\n      // Note: we don’t care about uniqueness.\n      // It’s likely that that doesn’t happen very frequently.\n      // It is more likely that it wastes precious time.\n      self.parser.defined.push(identifier)\n\n      // To do: `markdown-rs` interrupt.\n      // // You’d be interrupting.\n      // tokenizer.interrupt = true\n      return ok(code)\n    }\n    return nok(code)\n  }\n}\n\n/**\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeTitleBefore(effects, ok, nok) {\n  return titleBefore\n\n  /**\n   * After destination, at whitespace.\n   *\n   * ```markdown\n   * > | [a]: b\n   *           ^\n   * > | [a]: b \"c\"\n   *           ^\n   * ```\n   *\n   * @type {State}\n   */\n  function titleBefore(code) {\n    return markdownLineEndingOrSpace(code)\n      ? factoryWhitespace(effects, beforeMarker)(code)\n      : nok(code)\n  }\n\n  /**\n   * At title.\n   *\n   * ```markdown\n   *   | [a]: b\n   * > | \"c\"\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function beforeMarker(code) {\n    return factoryTitle(\n      effects,\n      titleAfter,\n      nok,\n      'definitionTitle',\n      'definitionTitleMarker',\n      'definitionTitleString'\n    )(code)\n  }\n\n  /**\n   * After title.\n   *\n   * ```markdown\n   * > | [a]: b \"c\"\n   *               ^\n   * ```\n   *\n   * @type {State}\n   */\n  function titleAfter(code) {\n    return markdownSpace(code)\n      ? factorySpace(effects, titleAfterOptionalWhitespace, 'whitespace')(code)\n      : titleAfterOptionalWhitespace(code)\n  }\n\n  /**\n   * After title, after optional whitespace.\n   *\n   * ```markdown\n   * > | [a]: b \"c\"\n   *               ^\n   * ```\n   *\n   * @type {State}\n   */\n  function titleAfterOptionalWhitespace(code) {\n    return code === null || markdownLineEnding(code) ? ok(code) : nok(code)\n  }\n}\n","/**\n * @typedef {import('micromark-util-types').Construct} Construct\n * @typedef {import('micromark-util-types').State} State\n * @typedef {import('micromark-util-types').TokenizeContext} TokenizeContext\n * @typedef {import('micromark-util-types').Tokenizer} Tokenizer\n */\n\nimport {factorySpace} from 'micromark-factory-space'\nimport {markdownLineEnding, markdownSpace} from 'micromark-util-character'\n/** @type {Construct} */\nexport const codeIndented = {\n  name: 'codeIndented',\n  tokenize: tokenizeCodeIndented\n}\n\n/** @type {Construct} */\nconst furtherStart = {\n  tokenize: tokenizeFurtherStart,\n  partial: true\n}\n\n/**\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeCodeIndented(effects, ok, nok) {\n  const self = this\n  return start\n\n  /**\n   * Start of code (indented).\n   *\n   * > **Parsing note**: it is not needed to check if this first line is a\n   * > filled line (that it has a non-whitespace character), because blank lines\n   * > are parsed already, so we never run into that.\n   *\n   * ```markdown\n   * > |     aaa\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function start(code) {\n    // To do: manually check if interrupting like `markdown-rs`.\n\n    effects.enter('codeIndented')\n    // To do: use an improved `space_or_tab` function like `markdown-rs`,\n    // so that we can drop the next state.\n    return factorySpace(effects, afterPrefix, 'linePrefix', 4 + 1)(code)\n  }\n\n  /**\n   * At start, after 1 or 4 spaces.\n   *\n   * ```markdown\n   * > |     aaa\n   *         ^\n   * ```\n   *\n   * @type {State}\n   */\n  function afterPrefix(code) {\n    const tail = self.events[self.events.length - 1]\n    return tail &&\n      tail[1].type === 'linePrefix' &&\n      tail[2].sliceSerialize(tail[1], true).length >= 4\n      ? atBreak(code)\n      : nok(code)\n  }\n\n  /**\n   * At a break.\n   *\n   * ```markdown\n   * > |     aaa\n   *         ^  ^\n   * ```\n   *\n   * @type {State}\n   */\n  function atBreak(code) {\n    if (code === null) {\n      return after(code)\n    }\n    if (markdownLineEnding(code)) {\n      return effects.attempt(furtherStart, atBreak, after)(code)\n    }\n    effects.enter('codeFlowValue')\n    return inside(code)\n  }\n\n  /**\n   * In code content.\n   *\n   * ```markdown\n   * > |     aaa\n   *         ^^^^\n   * ```\n   *\n   * @type {State}\n   */\n  function inside(code) {\n    if (code === null || markdownLineEnding(code)) {\n      effects.exit('codeFlowValue')\n      return atBreak(code)\n    }\n    effects.consume(code)\n    return inside\n  }\n\n  /** @type {State} */\n  function after(code) {\n    effects.exit('codeIndented')\n    // To do: allow interrupting like `markdown-rs`.\n    // Feel free to interrupt.\n    // tokenizer.interrupt = false\n    return ok(code)\n  }\n}\n\n/**\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeFurtherStart(effects, ok, nok) {\n  const self = this\n  return furtherStart\n\n  /**\n   * At eol, trying to parse another indent.\n   *\n   * ```markdown\n   * > |     aaa\n   *            ^\n   *   |     bbb\n   * ```\n   *\n   * @type {State}\n   */\n  function furtherStart(code) {\n    // To do: improve `lazy` / `pierce` handling.\n    // If this is a lazy line, it can’t be code.\n    if (self.parser.lazy[self.now().line]) {\n      return nok(code)\n    }\n    if (markdownLineEnding(code)) {\n      effects.enter('lineEnding')\n      effects.consume(code)\n      effects.exit('lineEnding')\n      return furtherStart\n    }\n\n    // To do: the code here in `micromark-js` is a bit different from\n    // `markdown-rs` because there it can attempt spaces.\n    // We can’t yet.\n    //\n    // To do: use an improved `space_or_tab` function like `markdown-rs`,\n    // so that we can drop the next state.\n    return factorySpace(effects, afterPrefix, 'linePrefix', 4 + 1)(code)\n  }\n\n  /**\n   * At start, after 1 or 4 spaces.\n   *\n   * ```markdown\n   * > |     aaa\n   *         ^\n   * ```\n   *\n   * @type {State}\n   */\n  function afterPrefix(code) {\n    const tail = self.events[self.events.length - 1]\n    return tail &&\n      tail[1].type === 'linePrefix' &&\n      tail[2].sliceSerialize(tail[1], true).length >= 4\n      ? ok(code)\n      : markdownLineEnding(code)\n      ? furtherStart(code)\n      : nok(code)\n  }\n}\n","/**\n * @typedef {import('micromark-util-types').Construct} Construct\n * @typedef {import('micromark-util-types').Resolver} Resolver\n * @typedef {import('micromark-util-types').State} State\n * @typedef {import('micromark-util-types').Token} Token\n * @typedef {import('micromark-util-types').TokenizeContext} TokenizeContext\n * @typedef {import('micromark-util-types').Tokenizer} Tokenizer\n */\n\nimport {factorySpace} from 'micromark-factory-space'\nimport {\n  markdownLineEnding,\n  markdownLineEndingOrSpace,\n  markdownSpace\n} from 'micromark-util-character'\nimport {splice} from 'micromark-util-chunked'\n/** @type {Construct} */\nexport const headingAtx = {\n  name: 'headingAtx',\n  tokenize: tokenizeHeadingAtx,\n  resolve: resolveHeadingAtx\n}\n\n/** @type {Resolver} */\nfunction resolveHeadingAtx(events, context) {\n  let contentEnd = events.length - 2\n  let contentStart = 3\n  /** @type {Token} */\n  let content\n  /** @type {Token} */\n  let text\n\n  // Prefix whitespace, part of the opening.\n  if (events[contentStart][1].type === 'whitespace') {\n    contentStart += 2\n  }\n\n  // Suffix whitespace, part of the closing.\n  if (\n    contentEnd - 2 > contentStart &&\n    events[contentEnd][1].type === 'whitespace'\n  ) {\n    contentEnd -= 2\n  }\n  if (\n    events[contentEnd][1].type === 'atxHeadingSequence' &&\n    (contentStart === contentEnd - 1 ||\n      (contentEnd - 4 > contentStart &&\n        events[contentEnd - 2][1].type === 'whitespace'))\n  ) {\n    contentEnd -= contentStart + 1 === contentEnd ? 2 : 4\n  }\n  if (contentEnd > contentStart) {\n    content = {\n      type: 'atxHeadingText',\n      start: events[contentStart][1].start,\n      end: events[contentEnd][1].end\n    }\n    text = {\n      type: 'chunkText',\n      start: events[contentStart][1].start,\n      end: events[contentEnd][1].end,\n      contentType: 'text'\n    }\n    splice(events, contentStart, contentEnd - contentStart + 1, [\n      ['enter', content, context],\n      ['enter', text, context],\n      ['exit', text, context],\n      ['exit', content, context]\n    ])\n  }\n  return events\n}\n\n/**\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeHeadingAtx(effects, ok, nok) {\n  let size = 0\n  return start\n\n  /**\n   * Start of a heading (atx).\n   *\n   * ```markdown\n   * > | ## aa\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function start(code) {\n    // To do: parse indent like `markdown-rs`.\n    effects.enter('atxHeading')\n    return before(code)\n  }\n\n  /**\n   * After optional whitespace, at `#`.\n   *\n   * ```markdown\n   * > | ## aa\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function before(code) {\n    effects.enter('atxHeadingSequence')\n    return sequenceOpen(code)\n  }\n\n  /**\n   * In opening sequence.\n   *\n   * ```markdown\n   * > | ## aa\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function sequenceOpen(code) {\n    if (code === 35 && size++ < 6) {\n      effects.consume(code)\n      return sequenceOpen\n    }\n\n    // Always at least one `#`.\n    if (code === null || markdownLineEndingOrSpace(code)) {\n      effects.exit('atxHeadingSequence')\n      return atBreak(code)\n    }\n    return nok(code)\n  }\n\n  /**\n   * After something, before something else.\n   *\n   * ```markdown\n   * > | ## aa\n   *       ^\n   * ```\n   *\n   * @type {State}\n   */\n  function atBreak(code) {\n    if (code === 35) {\n      effects.enter('atxHeadingSequence')\n      return sequenceFurther(code)\n    }\n    if (code === null || markdownLineEnding(code)) {\n      effects.exit('atxHeading')\n      // To do: interrupt like `markdown-rs`.\n      // // Feel free to interrupt.\n      // tokenizer.interrupt = false\n      return ok(code)\n    }\n    if (markdownSpace(code)) {\n      return factorySpace(effects, atBreak, 'whitespace')(code)\n    }\n\n    // To do: generate `data` tokens, add the `text` token later.\n    // Needs edit map, see: `markdown.rs`.\n    effects.enter('atxHeadingText')\n    return data(code)\n  }\n\n  /**\n   * In further sequence (after whitespace).\n   *\n   * Could be normal “visible” hashes in the heading or a final sequence.\n   *\n   * ```markdown\n   * > | ## aa ##\n   *           ^\n   * ```\n   *\n   * @type {State}\n   */\n  function sequenceFurther(code) {\n    if (code === 35) {\n      effects.consume(code)\n      return sequenceFurther\n    }\n    effects.exit('atxHeadingSequence')\n    return atBreak(code)\n  }\n\n  /**\n   * In text.\n   *\n   * ```markdown\n   * > | ## aa\n   *        ^\n   * ```\n   *\n   * @type {State}\n   */\n  function data(code) {\n    if (code === null || code === 35 || markdownLineEndingOrSpace(code)) {\n      effects.exit('atxHeadingText')\n      return atBreak(code)\n    }\n    effects.consume(code)\n    return data\n  }\n}\n","/**\n * @typedef {import('micromark-util-types').Code} Code\n * @typedef {import('micromark-util-types').Construct} Construct\n * @typedef {import('micromark-util-types').Resolver} Resolver\n * @typedef {import('micromark-util-types').State} State\n * @typedef {import('micromark-util-types').TokenizeContext} TokenizeContext\n * @typedef {import('micromark-util-types').Tokenizer} Tokenizer\n */\n\nimport {factorySpace} from 'micromark-factory-space'\nimport {markdownLineEnding, markdownSpace} from 'micromark-util-character'\n/** @type {Construct} */\nexport const setextUnderline = {\n  name: 'setextUnderline',\n  tokenize: tokenizeSetextUnderline,\n  resolveTo: resolveToSetextUnderline\n}\n\n/** @type {Resolver} */\nfunction resolveToSetextUnderline(events, context) {\n  // To do: resolve like `markdown-rs`.\n  let index = events.length\n  /** @type {number | undefined} */\n  let content\n  /** @type {number | undefined} */\n  let text\n  /** @type {number | undefined} */\n  let definition\n\n  // Find the opening of the content.\n  // It’ll always exist: we don’t tokenize if it isn’t there.\n  while (index--) {\n    if (events[index][0] === 'enter') {\n      if (events[index][1].type === 'content') {\n        content = index\n        break\n      }\n      if (events[index][1].type === 'paragraph') {\n        text = index\n      }\n    }\n    // Exit\n    else {\n      if (events[index][1].type === 'content') {\n        // Remove the content end (if needed we’ll add it later)\n        events.splice(index, 1)\n      }\n      if (!definition && events[index][1].type === 'definition') {\n        definition = index\n      }\n    }\n  }\n  const heading = {\n    type: 'setextHeading',\n    start: Object.assign({}, events[text][1].start),\n    end: Object.assign({}, events[events.length - 1][1].end)\n  }\n\n  // Change the paragraph to setext heading text.\n  events[text][1].type = 'setextHeadingText'\n\n  // If we have definitions in the content, we’ll keep on having content,\n  // but we need move it.\n  if (definition) {\n    events.splice(text, 0, ['enter', heading, context])\n    events.splice(definition + 1, 0, ['exit', events[content][1], context])\n    events[content][1].end = Object.assign({}, events[definition][1].end)\n  } else {\n    events[content][1] = heading\n  }\n\n  // Add the heading exit at the end.\n  events.push(['exit', heading, context])\n  return events\n}\n\n/**\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeSetextUnderline(effects, ok, nok) {\n  const self = this\n  /** @type {NonNullable<Code>} */\n  let marker\n  return start\n\n  /**\n   * At start of heading (setext) underline.\n   *\n   * ```markdown\n   *   | aa\n   * > | ==\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function start(code) {\n    let index = self.events.length\n    /** @type {boolean | undefined} */\n    let paragraph\n    // Find an opening.\n    while (index--) {\n      // Skip enter/exit of line ending, line prefix, and content.\n      // We can now either have a definition or a paragraph.\n      if (\n        self.events[index][1].type !== 'lineEnding' &&\n        self.events[index][1].type !== 'linePrefix' &&\n        self.events[index][1].type !== 'content'\n      ) {\n        paragraph = self.events[index][1].type === 'paragraph'\n        break\n      }\n    }\n\n    // To do: handle lazy/pierce like `markdown-rs`.\n    // To do: parse indent like `markdown-rs`.\n    if (!self.parser.lazy[self.now().line] && (self.interrupt || paragraph)) {\n      effects.enter('setextHeadingLine')\n      marker = code\n      return before(code)\n    }\n    return nok(code)\n  }\n\n  /**\n   * After optional whitespace, at `-` or `=`.\n   *\n   * ```markdown\n   *   | aa\n   * > | ==\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function before(code) {\n    effects.enter('setextHeadingLineSequence')\n    return inside(code)\n  }\n\n  /**\n   * In sequence.\n   *\n   * ```markdown\n   *   | aa\n   * > | ==\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function inside(code) {\n    if (code === marker) {\n      effects.consume(code)\n      return inside\n    }\n    effects.exit('setextHeadingLineSequence')\n    return markdownSpace(code)\n      ? factorySpace(effects, after, 'lineSuffix')(code)\n      : after(code)\n  }\n\n  /**\n   * After sequence, after optional whitespace.\n   *\n   * ```markdown\n   *   | aa\n   * > | ==\n   *       ^\n   * ```\n   *\n   * @type {State}\n   */\n  function after(code) {\n    if (code === null || markdownLineEnding(code)) {\n      effects.exit('setextHeadingLine')\n      return ok(code)\n    }\n    return nok(code)\n  }\n}\n","/**\n * List of lowercase HTML “block” tag names.\n *\n * The list, when parsing HTML (flow), results in more relaxed rules (condition\n * 6).\n * Because they are known blocks, the HTML-like syntax doesn’t have to be\n * strictly parsed.\n * For tag names not in this list, a more strict algorithm (condition 7) is used\n * to detect whether the HTML-like syntax is seen as HTML (flow) or not.\n *\n * This is copied from:\n * <https://spec.commonmark.org/0.30/#html-blocks>.\n *\n * > 👉 **Note**: `search` was added in `CommonMark@0.31`.\n */\nexport const htmlBlockNames = [\n  'address',\n  'article',\n  'aside',\n  'base',\n  'basefont',\n  'blockquote',\n  'body',\n  'caption',\n  'center',\n  'col',\n  'colgroup',\n  'dd',\n  'details',\n  'dialog',\n  'dir',\n  'div',\n  'dl',\n  'dt',\n  'fieldset',\n  'figcaption',\n  'figure',\n  'footer',\n  'form',\n  'frame',\n  'frameset',\n  'h1',\n  'h2',\n  'h3',\n  'h4',\n  'h5',\n  'h6',\n  'head',\n  'header',\n  'hr',\n  'html',\n  'iframe',\n  'legend',\n  'li',\n  'link',\n  'main',\n  'menu',\n  'menuitem',\n  'nav',\n  'noframes',\n  'ol',\n  'optgroup',\n  'option',\n  'p',\n  'param',\n  'search',\n  'section',\n  'summary',\n  'table',\n  'tbody',\n  'td',\n  'tfoot',\n  'th',\n  'thead',\n  'title',\n  'tr',\n  'track',\n  'ul'\n]\n\n/**\n * List of lowercase HTML “raw” tag names.\n *\n * The list, when parsing HTML (flow), results in HTML that can include lines\n * without exiting, until a closing tag also in this list is found (condition\n * 1).\n *\n * This module is copied from:\n * <https://spec.commonmark.org/0.30/#html-blocks>.\n *\n * > 👉 **Note**: `textarea` was added in `CommonMark@0.30`.\n */\nexport const htmlRawNames = ['pre', 'script', 'style', 'textarea']\n","/**\n * @typedef {import('micromark-util-types').Code} Code\n * @typedef {import('micromark-util-types').Construct} Construct\n * @typedef {import('micromark-util-types').Resolver} Resolver\n * @typedef {import('micromark-util-types').State} State\n * @typedef {import('micromark-util-types').TokenizeContext} TokenizeContext\n * @typedef {import('micromark-util-types').Tokenizer} Tokenizer\n */\n\nimport {\n  asciiAlpha,\n  asciiAlphanumeric,\n  markdownLineEnding,\n  markdownLineEndingOrSpace,\n  markdownSpace\n} from 'micromark-util-character'\nimport {htmlBlockNames, htmlRawNames} from 'micromark-util-html-tag-name'\nimport {blankLine} from './blank-line.js'\n\n/** @type {Construct} */\nexport const htmlFlow = {\n  name: 'htmlFlow',\n  tokenize: tokenizeHtmlFlow,\n  resolveTo: resolveToHtmlFlow,\n  concrete: true\n}\n\n/** @type {Construct} */\nconst blankLineBefore = {\n  tokenize: tokenizeBlankLineBefore,\n  partial: true\n}\nconst nonLazyContinuationStart = {\n  tokenize: tokenizeNonLazyContinuationStart,\n  partial: true\n}\n\n/** @type {Resolver} */\nfunction resolveToHtmlFlow(events) {\n  let index = events.length\n  while (index--) {\n    if (events[index][0] === 'enter' && events[index][1].type === 'htmlFlow') {\n      break\n    }\n  }\n  if (index > 1 && events[index - 2][1].type === 'linePrefix') {\n    // Add the prefix start to the HTML token.\n    events[index][1].start = events[index - 2][1].start\n    // Add the prefix start to the HTML line token.\n    events[index + 1][1].start = events[index - 2][1].start\n    // Remove the line prefix.\n    events.splice(index - 2, 2)\n  }\n  return events\n}\n\n/**\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeHtmlFlow(effects, ok, nok) {\n  const self = this\n  /** @type {number} */\n  let marker\n  /** @type {boolean} */\n  let closingTag\n  /** @type {string} */\n  let buffer\n  /** @type {number} */\n  let index\n  /** @type {Code} */\n  let markerB\n  return start\n\n  /**\n   * Start of HTML (flow).\n   *\n   * ```markdown\n   * > | <x />\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function start(code) {\n    // To do: parse indent like `markdown-rs`.\n    return before(code)\n  }\n\n  /**\n   * At `<`, after optional whitespace.\n   *\n   * ```markdown\n   * > | <x />\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function before(code) {\n    effects.enter('htmlFlow')\n    effects.enter('htmlFlowData')\n    effects.consume(code)\n    return open\n  }\n\n  /**\n   * After `<`, at tag name or other stuff.\n   *\n   * ```markdown\n   * > | <x />\n   *      ^\n   * > | <!doctype>\n   *      ^\n   * > | <!--xxx-->\n   *      ^\n   * ```\n   *\n   * @type {State}\n   */\n  function open(code) {\n    if (code === 33) {\n      effects.consume(code)\n      return declarationOpen\n    }\n    if (code === 47) {\n      effects.consume(code)\n      closingTag = true\n      return tagCloseStart\n    }\n    if (code === 63) {\n      effects.consume(code)\n      marker = 3\n      // To do:\n      // tokenizer.concrete = true\n      // To do: use `markdown-rs` style interrupt.\n      // While we’re in an instruction instead of a declaration, we’re on a `?`\n      // right now, so we do need to search for `>`, similar to declarations.\n      return self.interrupt ? ok : continuationDeclarationInside\n    }\n\n    // ASCII alphabetical.\n    if (asciiAlpha(code)) {\n      effects.consume(code)\n      // @ts-expect-error: not null.\n      buffer = String.fromCharCode(code)\n      return tagName\n    }\n    return nok(code)\n  }\n\n  /**\n   * After `<!`, at declaration, comment, or CDATA.\n   *\n   * ```markdown\n   * > | <!doctype>\n   *       ^\n   * > | <!--xxx-->\n   *       ^\n   * > | <![CDATA[>&<]]>\n   *       ^\n   * ```\n   *\n   * @type {State}\n   */\n  function declarationOpen(code) {\n    if (code === 45) {\n      effects.consume(code)\n      marker = 2\n      return commentOpenInside\n    }\n    if (code === 91) {\n      effects.consume(code)\n      marker = 5\n      index = 0\n      return cdataOpenInside\n    }\n\n    // ASCII alphabetical.\n    if (asciiAlpha(code)) {\n      effects.consume(code)\n      marker = 4\n      // // Do not form containers.\n      // tokenizer.concrete = true\n      return self.interrupt ? ok : continuationDeclarationInside\n    }\n    return nok(code)\n  }\n\n  /**\n   * After `<!-`, inside a comment, at another `-`.\n   *\n   * ```markdown\n   * > | <!--xxx-->\n   *        ^\n   * ```\n   *\n   * @type {State}\n   */\n  function commentOpenInside(code) {\n    if (code === 45) {\n      effects.consume(code)\n      // // Do not form containers.\n      // tokenizer.concrete = true\n      return self.interrupt ? ok : continuationDeclarationInside\n    }\n    return nok(code)\n  }\n\n  /**\n   * After `<![`, inside CDATA, expecting `CDATA[`.\n   *\n   * ```markdown\n   * > | <![CDATA[>&<]]>\n   *        ^^^^^^\n   * ```\n   *\n   * @type {State}\n   */\n  function cdataOpenInside(code) {\n    const value = 'CDATA['\n    if (code === value.charCodeAt(index++)) {\n      effects.consume(code)\n      if (index === value.length) {\n        // // Do not form containers.\n        // tokenizer.concrete = true\n        return self.interrupt ? ok : continuation\n      }\n      return cdataOpenInside\n    }\n    return nok(code)\n  }\n\n  /**\n   * After `</`, in closing tag, at tag name.\n   *\n   * ```markdown\n   * > | </x>\n   *       ^\n   * ```\n   *\n   * @type {State}\n   */\n  function tagCloseStart(code) {\n    if (asciiAlpha(code)) {\n      effects.consume(code)\n      // @ts-expect-error: not null.\n      buffer = String.fromCharCode(code)\n      return tagName\n    }\n    return nok(code)\n  }\n\n  /**\n   * In tag name.\n   *\n   * ```markdown\n   * > | <ab>\n   *      ^^\n   * > | </ab>\n   *       ^^\n   * ```\n   *\n   * @type {State}\n   */\n  function tagName(code) {\n    if (\n      code === null ||\n      code === 47 ||\n      code === 62 ||\n      markdownLineEndingOrSpace(code)\n    ) {\n      const slash = code === 47\n      const name = buffer.toLowerCase()\n      if (!slash && !closingTag && htmlRawNames.includes(name)) {\n        marker = 1\n        // // Do not form containers.\n        // tokenizer.concrete = true\n        return self.interrupt ? ok(code) : continuation(code)\n      }\n      if (htmlBlockNames.includes(buffer.toLowerCase())) {\n        marker = 6\n        if (slash) {\n          effects.consume(code)\n          return basicSelfClosing\n        }\n\n        // // Do not form containers.\n        // tokenizer.concrete = true\n        return self.interrupt ? ok(code) : continuation(code)\n      }\n      marker = 7\n      // Do not support complete HTML when interrupting.\n      return self.interrupt && !self.parser.lazy[self.now().line]\n        ? nok(code)\n        : closingTag\n        ? completeClosingTagAfter(code)\n        : completeAttributeNameBefore(code)\n    }\n\n    // ASCII alphanumerical and `-`.\n    if (code === 45 || asciiAlphanumeric(code)) {\n      effects.consume(code)\n      buffer += String.fromCharCode(code)\n      return tagName\n    }\n    return nok(code)\n  }\n\n  /**\n   * After closing slash of a basic tag name.\n   *\n   * ```markdown\n   * > | <div/>\n   *          ^\n   * ```\n   *\n   * @type {State}\n   */\n  function basicSelfClosing(code) {\n    if (code === 62) {\n      effects.consume(code)\n      // // Do not form containers.\n      // tokenizer.concrete = true\n      return self.interrupt ? ok : continuation\n    }\n    return nok(code)\n  }\n\n  /**\n   * After closing slash of a complete tag name.\n   *\n   * ```markdown\n   * > | <x/>\n   *        ^\n   * ```\n   *\n   * @type {State}\n   */\n  function completeClosingTagAfter(code) {\n    if (markdownSpace(code)) {\n      effects.consume(code)\n      return completeClosingTagAfter\n    }\n    return completeEnd(code)\n  }\n\n  /**\n   * At an attribute name.\n   *\n   * At first, this state is used after a complete tag name, after whitespace,\n   * where it expects optional attributes or the end of the tag.\n   * It is also reused after attributes, when expecting more optional\n   * attributes.\n   *\n   * ```markdown\n   * > | <a />\n   *        ^\n   * > | <a :b>\n   *        ^\n   * > | <a _b>\n   *        ^\n   * > | <a b>\n   *        ^\n   * > | <a >\n   *        ^\n   * ```\n   *\n   * @type {State}\n   */\n  function completeAttributeNameBefore(code) {\n    if (code === 47) {\n      effects.consume(code)\n      return completeEnd\n    }\n\n    // ASCII alphanumerical and `:` and `_`.\n    if (code === 58 || code === 95 || asciiAlpha(code)) {\n      effects.consume(code)\n      return completeAttributeName\n    }\n    if (markdownSpace(code)) {\n      effects.consume(code)\n      return completeAttributeNameBefore\n    }\n    return completeEnd(code)\n  }\n\n  /**\n   * In attribute name.\n   *\n   * ```markdown\n   * > | <a :b>\n   *         ^\n   * > | <a _b>\n   *         ^\n   * > | <a b>\n   *         ^\n   * ```\n   *\n   * @type {State}\n   */\n  function completeAttributeName(code) {\n    // ASCII alphanumerical and `-`, `.`, `:`, and `_`.\n    if (\n      code === 45 ||\n      code === 46 ||\n      code === 58 ||\n      code === 95 ||\n      asciiAlphanumeric(code)\n    ) {\n      effects.consume(code)\n      return completeAttributeName\n    }\n    return completeAttributeNameAfter(code)\n  }\n\n  /**\n   * After attribute name, at an optional initializer, the end of the tag, or\n   * whitespace.\n   *\n   * ```markdown\n   * > | <a b>\n   *         ^\n   * > | <a b=c>\n   *         ^\n   * ```\n   *\n   * @type {State}\n   */\n  function completeAttributeNameAfter(code) {\n    if (code === 61) {\n      effects.consume(code)\n      return completeAttributeValueBefore\n    }\n    if (markdownSpace(code)) {\n      effects.consume(code)\n      return completeAttributeNameAfter\n    }\n    return completeAttributeNameBefore(code)\n  }\n\n  /**\n   * Before unquoted, double quoted, or single quoted attribute value, allowing\n   * whitespace.\n   *\n   * ```markdown\n   * > | <a b=c>\n   *          ^\n   * > | <a b=\"c\">\n   *          ^\n   * ```\n   *\n   * @type {State}\n   */\n  function completeAttributeValueBefore(code) {\n    if (\n      code === null ||\n      code === 60 ||\n      code === 61 ||\n      code === 62 ||\n      code === 96\n    ) {\n      return nok(code)\n    }\n    if (code === 34 || code === 39) {\n      effects.consume(code)\n      markerB = code\n      return completeAttributeValueQuoted\n    }\n    if (markdownSpace(code)) {\n      effects.consume(code)\n      return completeAttributeValueBefore\n    }\n    return completeAttributeValueUnquoted(code)\n  }\n\n  /**\n   * In double or single quoted attribute value.\n   *\n   * ```markdown\n   * > | <a b=\"c\">\n   *           ^\n   * > | <a b='c'>\n   *           ^\n   * ```\n   *\n   * @type {State}\n   */\n  function completeAttributeValueQuoted(code) {\n    if (code === markerB) {\n      effects.consume(code)\n      markerB = null\n      return completeAttributeValueQuotedAfter\n    }\n    if (code === null || markdownLineEnding(code)) {\n      return nok(code)\n    }\n    effects.consume(code)\n    return completeAttributeValueQuoted\n  }\n\n  /**\n   * In unquoted attribute value.\n   *\n   * ```markdown\n   * > | <a b=c>\n   *          ^\n   * ```\n   *\n   * @type {State}\n   */\n  function completeAttributeValueUnquoted(code) {\n    if (\n      code === null ||\n      code === 34 ||\n      code === 39 ||\n      code === 47 ||\n      code === 60 ||\n      code === 61 ||\n      code === 62 ||\n      code === 96 ||\n      markdownLineEndingOrSpace(code)\n    ) {\n      return completeAttributeNameAfter(code)\n    }\n    effects.consume(code)\n    return completeAttributeValueUnquoted\n  }\n\n  /**\n   * After double or single quoted attribute value, before whitespace or the\n   * end of the tag.\n   *\n   * ```markdown\n   * > | <a b=\"c\">\n   *            ^\n   * ```\n   *\n   * @type {State}\n   */\n  function completeAttributeValueQuotedAfter(code) {\n    if (code === 47 || code === 62 || markdownSpace(code)) {\n      return completeAttributeNameBefore(code)\n    }\n    return nok(code)\n  }\n\n  /**\n   * In certain circumstances of a complete tag where only an `>` is allowed.\n   *\n   * ```markdown\n   * > | <a b=\"c\">\n   *             ^\n   * ```\n   *\n   * @type {State}\n   */\n  function completeEnd(code) {\n    if (code === 62) {\n      effects.consume(code)\n      return completeAfter\n    }\n    return nok(code)\n  }\n\n  /**\n   * After `>` in a complete tag.\n   *\n   * ```markdown\n   * > | <x>\n   *        ^\n   * ```\n   *\n   * @type {State}\n   */\n  function completeAfter(code) {\n    if (code === null || markdownLineEnding(code)) {\n      // // Do not form containers.\n      // tokenizer.concrete = true\n      return continuation(code)\n    }\n    if (markdownSpace(code)) {\n      effects.consume(code)\n      return completeAfter\n    }\n    return nok(code)\n  }\n\n  /**\n   * In continuation of any HTML kind.\n   *\n   * ```markdown\n   * > | <!--xxx-->\n   *          ^\n   * ```\n   *\n   * @type {State}\n   */\n  function continuation(code) {\n    if (code === 45 && marker === 2) {\n      effects.consume(code)\n      return continuationCommentInside\n    }\n    if (code === 60 && marker === 1) {\n      effects.consume(code)\n      return continuationRawTagOpen\n    }\n    if (code === 62 && marker === 4) {\n      effects.consume(code)\n      return continuationClose\n    }\n    if (code === 63 && marker === 3) {\n      effects.consume(code)\n      return continuationDeclarationInside\n    }\n    if (code === 93 && marker === 5) {\n      effects.consume(code)\n      return continuationCdataInside\n    }\n    if (markdownLineEnding(code) && (marker === 6 || marker === 7)) {\n      effects.exit('htmlFlowData')\n      return effects.check(\n        blankLineBefore,\n        continuationAfter,\n        continuationStart\n      )(code)\n    }\n    if (code === null || markdownLineEnding(code)) {\n      effects.exit('htmlFlowData')\n      return continuationStart(code)\n    }\n    effects.consume(code)\n    return continuation\n  }\n\n  /**\n   * In continuation, at eol.\n   *\n   * ```markdown\n   * > | <x>\n   *        ^\n   *   | asd\n   * ```\n   *\n   * @type {State}\n   */\n  function continuationStart(code) {\n    return effects.check(\n      nonLazyContinuationStart,\n      continuationStartNonLazy,\n      continuationAfter\n    )(code)\n  }\n\n  /**\n   * In continuation, at eol, before non-lazy content.\n   *\n   * ```markdown\n   * > | <x>\n   *        ^\n   *   | asd\n   * ```\n   *\n   * @type {State}\n   */\n  function continuationStartNonLazy(code) {\n    effects.enter('lineEnding')\n    effects.consume(code)\n    effects.exit('lineEnding')\n    return continuationBefore\n  }\n\n  /**\n   * In continuation, before non-lazy content.\n   *\n   * ```markdown\n   *   | <x>\n   * > | asd\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function continuationBefore(code) {\n    if (code === null || markdownLineEnding(code)) {\n      return continuationStart(code)\n    }\n    effects.enter('htmlFlowData')\n    return continuation(code)\n  }\n\n  /**\n   * In comment continuation, after one `-`, expecting another.\n   *\n   * ```markdown\n   * > | <!--xxx-->\n   *             ^\n   * ```\n   *\n   * @type {State}\n   */\n  function continuationCommentInside(code) {\n    if (code === 45) {\n      effects.consume(code)\n      return continuationDeclarationInside\n    }\n    return continuation(code)\n  }\n\n  /**\n   * In raw continuation, after `<`, at `/`.\n   *\n   * ```markdown\n   * > | <script>console.log(1)</script>\n   *                            ^\n   * ```\n   *\n   * @type {State}\n   */\n  function continuationRawTagOpen(code) {\n    if (code === 47) {\n      effects.consume(code)\n      buffer = ''\n      return continuationRawEndTag\n    }\n    return continuation(code)\n  }\n\n  /**\n   * In raw continuation, after `</`, in a raw tag name.\n   *\n   * ```markdown\n   * > | <script>console.log(1)</script>\n   *                             ^^^^^^\n   * ```\n   *\n   * @type {State}\n   */\n  function continuationRawEndTag(code) {\n    if (code === 62) {\n      const name = buffer.toLowerCase()\n      if (htmlRawNames.includes(name)) {\n        effects.consume(code)\n        return continuationClose\n      }\n      return continuation(code)\n    }\n    if (asciiAlpha(code) && buffer.length < 8) {\n      effects.consume(code)\n      // @ts-expect-error: not null.\n      buffer += String.fromCharCode(code)\n      return continuationRawEndTag\n    }\n    return continuation(code)\n  }\n\n  /**\n   * In cdata continuation, after `]`, expecting `]>`.\n   *\n   * ```markdown\n   * > | <![CDATA[>&<]]>\n   *                  ^\n   * ```\n   *\n   * @type {State}\n   */\n  function continuationCdataInside(code) {\n    if (code === 93) {\n      effects.consume(code)\n      return continuationDeclarationInside\n    }\n    return continuation(code)\n  }\n\n  /**\n   * In declaration or instruction continuation, at `>`.\n   *\n   * ```markdown\n   * > | <!-->\n   *         ^\n   * > | <?>\n   *       ^\n   * > | <!q>\n   *        ^\n   * > | <!--ab-->\n   *             ^\n   * > | <![CDATA[>&<]]>\n   *                   ^\n   * ```\n   *\n   * @type {State}\n   */\n  function continuationDeclarationInside(code) {\n    if (code === 62) {\n      effects.consume(code)\n      return continuationClose\n    }\n\n    // More dashes.\n    if (code === 45 && marker === 2) {\n      effects.consume(code)\n      return continuationDeclarationInside\n    }\n    return continuation(code)\n  }\n\n  /**\n   * In closed continuation: everything we get until the eol/eof is part of it.\n   *\n   * ```markdown\n   * > | <!doctype>\n   *               ^\n   * ```\n   *\n   * @type {State}\n   */\n  function continuationClose(code) {\n    if (code === null || markdownLineEnding(code)) {\n      effects.exit('htmlFlowData')\n      return continuationAfter(code)\n    }\n    effects.consume(code)\n    return continuationClose\n  }\n\n  /**\n   * Done.\n   *\n   * ```markdown\n   * > | <!doctype>\n   *               ^\n   * ```\n   *\n   * @type {State}\n   */\n  function continuationAfter(code) {\n    effects.exit('htmlFlow')\n    // // Feel free to interrupt.\n    // tokenizer.interrupt = false\n    // // No longer concrete.\n    // tokenizer.concrete = false\n    return ok(code)\n  }\n}\n\n/**\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeNonLazyContinuationStart(effects, ok, nok) {\n  const self = this\n  return start\n\n  /**\n   * At eol, before continuation.\n   *\n   * ```markdown\n   * > | * ```js\n   *            ^\n   *   | b\n   * ```\n   *\n   * @type {State}\n   */\n  function start(code) {\n    if (markdownLineEnding(code)) {\n      effects.enter('lineEnding')\n      effects.consume(code)\n      effects.exit('lineEnding')\n      return after\n    }\n    return nok(code)\n  }\n\n  /**\n   * A continuation.\n   *\n   * ```markdown\n   *   | * ```js\n   * > | b\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function after(code) {\n    return self.parser.lazy[self.now().line] ? nok(code) : ok(code)\n  }\n}\n\n/**\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeBlankLineBefore(effects, ok, nok) {\n  return start\n\n  /**\n   * Before eol, expecting blank line.\n   *\n   * ```markdown\n   * > | <div>\n   *          ^\n   *   |\n   * ```\n   *\n   * @type {State}\n   */\n  function start(code) {\n    effects.enter('lineEnding')\n    effects.consume(code)\n    effects.exit('lineEnding')\n    return effects.attempt(blankLine, ok, nok)\n  }\n}\n","/**\n * @typedef {import('micromark-util-types').Code} Code\n * @typedef {import('micromark-util-types').Construct} Construct\n * @typedef {import('micromark-util-types').State} State\n * @typedef {import('micromark-util-types').TokenizeContext} TokenizeContext\n * @typedef {import('micromark-util-types').Tokenizer} Tokenizer\n */\n\nimport {factorySpace} from 'micromark-factory-space'\nimport {markdownLineEnding, markdownSpace} from 'micromark-util-character'\n/** @type {Construct} */\nconst nonLazyContinuation = {\n  tokenize: tokenizeNonLazyContinuation,\n  partial: true\n}\n\n/** @type {Construct} */\nexport const codeFenced = {\n  name: 'codeFenced',\n  tokenize: tokenizeCodeFenced,\n  concrete: true\n}\n\n/**\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeCodeFenced(effects, ok, nok) {\n  const self = this\n  /** @type {Construct} */\n  const closeStart = {\n    tokenize: tokenizeCloseStart,\n    partial: true\n  }\n  let initialPrefix = 0\n  let sizeOpen = 0\n  /** @type {NonNullable<Code>} */\n  let marker\n  return start\n\n  /**\n   * Start of code.\n   *\n   * ```markdown\n   * > | ~~~js\n   *     ^\n   *   | alert(1)\n   *   | ~~~\n   * ```\n   *\n   * @type {State}\n   */\n  function start(code) {\n    // To do: parse whitespace like `markdown-rs`.\n    return beforeSequenceOpen(code)\n  }\n\n  /**\n   * In opening fence, after prefix, at sequence.\n   *\n   * ```markdown\n   * > | ~~~js\n   *     ^\n   *   | alert(1)\n   *   | ~~~\n   * ```\n   *\n   * @type {State}\n   */\n  function beforeSequenceOpen(code) {\n    const tail = self.events[self.events.length - 1]\n    initialPrefix =\n      tail && tail[1].type === 'linePrefix'\n        ? tail[2].sliceSerialize(tail[1], true).length\n        : 0\n    marker = code\n    effects.enter('codeFenced')\n    effects.enter('codeFencedFence')\n    effects.enter('codeFencedFenceSequence')\n    return sequenceOpen(code)\n  }\n\n  /**\n   * In opening fence sequence.\n   *\n   * ```markdown\n   * > | ~~~js\n   *      ^\n   *   | alert(1)\n   *   | ~~~\n   * ```\n   *\n   * @type {State}\n   */\n  function sequenceOpen(code) {\n    if (code === marker) {\n      sizeOpen++\n      effects.consume(code)\n      return sequenceOpen\n    }\n    if (sizeOpen < 3) {\n      return nok(code)\n    }\n    effects.exit('codeFencedFenceSequence')\n    return markdownSpace(code)\n      ? factorySpace(effects, infoBefore, 'whitespace')(code)\n      : infoBefore(code)\n  }\n\n  /**\n   * In opening fence, after the sequence (and optional whitespace), before info.\n   *\n   * ```markdown\n   * > | ~~~js\n   *        ^\n   *   | alert(1)\n   *   | ~~~\n   * ```\n   *\n   * @type {State}\n   */\n  function infoBefore(code) {\n    if (code === null || markdownLineEnding(code)) {\n      effects.exit('codeFencedFence')\n      return self.interrupt\n        ? ok(code)\n        : effects.check(nonLazyContinuation, atNonLazyBreak, after)(code)\n    }\n    effects.enter('codeFencedFenceInfo')\n    effects.enter('chunkString', {\n      contentType: 'string'\n    })\n    return info(code)\n  }\n\n  /**\n   * In info.\n   *\n   * ```markdown\n   * > | ~~~js\n   *        ^\n   *   | alert(1)\n   *   | ~~~\n   * ```\n   *\n   * @type {State}\n   */\n  function info(code) {\n    if (code === null || markdownLineEnding(code)) {\n      effects.exit('chunkString')\n      effects.exit('codeFencedFenceInfo')\n      return infoBefore(code)\n    }\n    if (markdownSpace(code)) {\n      effects.exit('chunkString')\n      effects.exit('codeFencedFenceInfo')\n      return factorySpace(effects, metaBefore, 'whitespace')(code)\n    }\n    if (code === 96 && code === marker) {\n      return nok(code)\n    }\n    effects.consume(code)\n    return info\n  }\n\n  /**\n   * In opening fence, after info and whitespace, before meta.\n   *\n   * ```markdown\n   * > | ~~~js eval\n   *           ^\n   *   | alert(1)\n   *   | ~~~\n   * ```\n   *\n   * @type {State}\n   */\n  function metaBefore(code) {\n    if (code === null || markdownLineEnding(code)) {\n      return infoBefore(code)\n    }\n    effects.enter('codeFencedFenceMeta')\n    effects.enter('chunkString', {\n      contentType: 'string'\n    })\n    return meta(code)\n  }\n\n  /**\n   * In meta.\n   *\n   * ```markdown\n   * > | ~~~js eval\n   *           ^\n   *   | alert(1)\n   *   | ~~~\n   * ```\n   *\n   * @type {State}\n   */\n  function meta(code) {\n    if (code === null || markdownLineEnding(code)) {\n      effects.exit('chunkString')\n      effects.exit('codeFencedFenceMeta')\n      return infoBefore(code)\n    }\n    if (code === 96 && code === marker) {\n      return nok(code)\n    }\n    effects.consume(code)\n    return meta\n  }\n\n  /**\n   * At eol/eof in code, before a non-lazy closing fence or content.\n   *\n   * ```markdown\n   * > | ~~~js\n   *          ^\n   * > | alert(1)\n   *             ^\n   *   | ~~~\n   * ```\n   *\n   * @type {State}\n   */\n  function atNonLazyBreak(code) {\n    return effects.attempt(closeStart, after, contentBefore)(code)\n  }\n\n  /**\n   * Before code content, not a closing fence, at eol.\n   *\n   * ```markdown\n   *   | ~~~js\n   * > | alert(1)\n   *             ^\n   *   | ~~~\n   * ```\n   *\n   * @type {State}\n   */\n  function contentBefore(code) {\n    effects.enter('lineEnding')\n    effects.consume(code)\n    effects.exit('lineEnding')\n    return contentStart\n  }\n\n  /**\n   * Before code content, not a closing fence.\n   *\n   * ```markdown\n   *   | ~~~js\n   * > | alert(1)\n   *     ^\n   *   | ~~~\n   * ```\n   *\n   * @type {State}\n   */\n  function contentStart(code) {\n    return initialPrefix > 0 && markdownSpace(code)\n      ? factorySpace(\n          effects,\n          beforeContentChunk,\n          'linePrefix',\n          initialPrefix + 1\n        )(code)\n      : beforeContentChunk(code)\n  }\n\n  /**\n   * Before code content, after optional prefix.\n   *\n   * ```markdown\n   *   | ~~~js\n   * > | alert(1)\n   *     ^\n   *   | ~~~\n   * ```\n   *\n   * @type {State}\n   */\n  function beforeContentChunk(code) {\n    if (code === null || markdownLineEnding(code)) {\n      return effects.check(nonLazyContinuation, atNonLazyBreak, after)(code)\n    }\n    effects.enter('codeFlowValue')\n    return contentChunk(code)\n  }\n\n  /**\n   * In code content.\n   *\n   * ```markdown\n   *   | ~~~js\n   * > | alert(1)\n   *     ^^^^^^^^\n   *   | ~~~\n   * ```\n   *\n   * @type {State}\n   */\n  function contentChunk(code) {\n    if (code === null || markdownLineEnding(code)) {\n      effects.exit('codeFlowValue')\n      return beforeContentChunk(code)\n    }\n    effects.consume(code)\n    return contentChunk\n  }\n\n  /**\n   * After code.\n   *\n   * ```markdown\n   *   | ~~~js\n   *   | alert(1)\n   * > | ~~~\n   *        ^\n   * ```\n   *\n   * @type {State}\n   */\n  function after(code) {\n    effects.exit('codeFenced')\n    return ok(code)\n  }\n\n  /**\n   * @this {TokenizeContext}\n   * @type {Tokenizer}\n   */\n  function tokenizeCloseStart(effects, ok, nok) {\n    let size = 0\n    return startBefore\n\n    /**\n     *\n     *\n     * @type {State}\n     */\n    function startBefore(code) {\n      effects.enter('lineEnding')\n      effects.consume(code)\n      effects.exit('lineEnding')\n      return start\n    }\n\n    /**\n     * Before closing fence, at optional whitespace.\n     *\n     * ```markdown\n     *   | ~~~js\n     *   | alert(1)\n     * > | ~~~\n     *     ^\n     * ```\n     *\n     * @type {State}\n     */\n    function start(code) {\n      // Always populated by defaults.\n\n      // To do: `enter` here or in next state?\n      effects.enter('codeFencedFence')\n      return markdownSpace(code)\n        ? factorySpace(\n            effects,\n            beforeSequenceClose,\n            'linePrefix',\n            self.parser.constructs.disable.null.includes('codeIndented')\n              ? undefined\n              : 4\n          )(code)\n        : beforeSequenceClose(code)\n    }\n\n    /**\n     * In closing fence, after optional whitespace, at sequence.\n     *\n     * ```markdown\n     *   | ~~~js\n     *   | alert(1)\n     * > | ~~~\n     *     ^\n     * ```\n     *\n     * @type {State}\n     */\n    function beforeSequenceClose(code) {\n      if (code === marker) {\n        effects.enter('codeFencedFenceSequence')\n        return sequenceClose(code)\n      }\n      return nok(code)\n    }\n\n    /**\n     * In closing fence sequence.\n     *\n     * ```markdown\n     *   | ~~~js\n     *   | alert(1)\n     * > | ~~~\n     *     ^\n     * ```\n     *\n     * @type {State}\n     */\n    function sequenceClose(code) {\n      if (code === marker) {\n        size++\n        effects.consume(code)\n        return sequenceClose\n      }\n      if (size >= sizeOpen) {\n        effects.exit('codeFencedFenceSequence')\n        return markdownSpace(code)\n          ? factorySpace(effects, sequenceCloseAfter, 'whitespace')(code)\n          : sequenceCloseAfter(code)\n      }\n      return nok(code)\n    }\n\n    /**\n     * After closing fence sequence, after optional whitespace.\n     *\n     * ```markdown\n     *   | ~~~js\n     *   | alert(1)\n     * > | ~~~\n     *        ^\n     * ```\n     *\n     * @type {State}\n     */\n    function sequenceCloseAfter(code) {\n      if (code === null || markdownLineEnding(code)) {\n        effects.exit('codeFencedFence')\n        return ok(code)\n      }\n      return nok(code)\n    }\n  }\n}\n\n/**\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeNonLazyContinuation(effects, ok, nok) {\n  const self = this\n  return start\n\n  /**\n   *\n   *\n   * @type {State}\n   */\n  function start(code) {\n    if (code === null) {\n      return nok(code)\n    }\n    effects.enter('lineEnding')\n    effects.consume(code)\n    effects.exit('lineEnding')\n    return lineStart\n  }\n\n  /**\n   *\n   *\n   * @type {State}\n   */\n  function lineStart(code) {\n    return self.parser.lazy[self.now().line] ? nok(code) : ok(code)\n  }\n}\n","/// <reference lib=\"dom\" />\n\n/* eslint-env browser */\n\nconst element = document.createElement('i')\n\n/**\n * @param {string} value\n * @returns {string|false}\n */\nexport function decodeNamedCharacterReference(value) {\n  const characterReference = '&' + value + ';'\n  element.innerHTML = characterReference\n  const char = element.textContent\n\n  // Some named character references do not require the closing semicolon\n  // (`&not`, for instance), which leads to situations where parsing the assumed\n  // named reference of `&notit;` will result in the string `¬it;`.\n  // When we encounter a trailing semicolon after parsing, and the character\n  // reference to decode was not a semicolon (`&semi;`), we can assume that the\n  // matching was not complete.\n  // @ts-expect-error: TypeScript is wrong that `textContent` on elements can\n  // yield `null`.\n  if (char.charCodeAt(char.length - 1) === 59 /* `;` */ && value !== 'semi') {\n    return false\n  }\n\n  // If the decoded string is equal to the input, the character reference was\n  // not valid.\n  // @ts-expect-error: TypeScript is wrong that `textContent` on elements can\n  // yield `null`.\n  return char === characterReference ? false : char\n}\n","/**\n * @typedef {import('micromark-util-types').Code} Code\n * @typedef {import('micromark-util-types').Construct} Construct\n * @typedef {import('micromark-util-types').State} State\n * @typedef {import('micromark-util-types').TokenizeContext} TokenizeContext\n * @typedef {import('micromark-util-types').Tokenizer} Tokenizer\n */\n\nimport {decodeNamedCharacterReference} from 'decode-named-character-reference'\nimport {\n  asciiAlphanumeric,\n  asciiDigit,\n  asciiHexDigit\n} from 'micromark-util-character'\n/** @type {Construct} */\nexport const characterReference = {\n  name: 'characterReference',\n  tokenize: tokenizeCharacterReference\n}\n\n/**\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeCharacterReference(effects, ok, nok) {\n  const self = this\n  let size = 0\n  /** @type {number} */\n  let max\n  /** @type {(code: Code) => boolean} */\n  let test\n  return start\n\n  /**\n   * Start of character reference.\n   *\n   * ```markdown\n   * > | a&amp;b\n   *      ^\n   * > | a&#123;b\n   *      ^\n   * > | a&#x9;b\n   *      ^\n   * ```\n   *\n   * @type {State}\n   */\n  function start(code) {\n    effects.enter('characterReference')\n    effects.enter('characterReferenceMarker')\n    effects.consume(code)\n    effects.exit('characterReferenceMarker')\n    return open\n  }\n\n  /**\n   * After `&`, at `#` for numeric references or alphanumeric for named\n   * references.\n   *\n   * ```markdown\n   * > | a&amp;b\n   *       ^\n   * > | a&#123;b\n   *       ^\n   * > | a&#x9;b\n   *       ^\n   * ```\n   *\n   * @type {State}\n   */\n  function open(code) {\n    if (code === 35) {\n      effects.enter('characterReferenceMarkerNumeric')\n      effects.consume(code)\n      effects.exit('characterReferenceMarkerNumeric')\n      return numeric\n    }\n    effects.enter('characterReferenceValue')\n    max = 31\n    test = asciiAlphanumeric\n    return value(code)\n  }\n\n  /**\n   * After `#`, at `x` for hexadecimals or digit for decimals.\n   *\n   * ```markdown\n   * > | a&#123;b\n   *        ^\n   * > | a&#x9;b\n   *        ^\n   * ```\n   *\n   * @type {State}\n   */\n  function numeric(code) {\n    if (code === 88 || code === 120) {\n      effects.enter('characterReferenceMarkerHexadecimal')\n      effects.consume(code)\n      effects.exit('characterReferenceMarkerHexadecimal')\n      effects.enter('characterReferenceValue')\n      max = 6\n      test = asciiHexDigit\n      return value\n    }\n    effects.enter('characterReferenceValue')\n    max = 7\n    test = asciiDigit\n    return value(code)\n  }\n\n  /**\n   * After markers (`&#x`, `&#`, or `&`), in value, before `;`.\n   *\n   * The character reference kind defines what and how many characters are\n   * allowed.\n   *\n   * ```markdown\n   * > | a&amp;b\n   *       ^^^\n   * > | a&#123;b\n   *        ^^^\n   * > | a&#x9;b\n   *         ^\n   * ```\n   *\n   * @type {State}\n   */\n  function value(code) {\n    if (code === 59 && size) {\n      const token = effects.exit('characterReferenceValue')\n      if (\n        test === asciiAlphanumeric &&\n        !decodeNamedCharacterReference(self.sliceSerialize(token))\n      ) {\n        return nok(code)\n      }\n\n      // To do: `markdown-rs` uses a different name:\n      // `CharacterReferenceMarkerSemi`.\n      effects.enter('characterReferenceMarker')\n      effects.consume(code)\n      effects.exit('characterReferenceMarker')\n      effects.exit('characterReference')\n      return ok\n    }\n    if (test(code) && size++ < max) {\n      effects.consume(code)\n      return value\n    }\n    return nok(code)\n  }\n}\n","/**\n * @typedef {import('micromark-util-types').Construct} Construct\n * @typedef {import('micromark-util-types').State} State\n * @typedef {import('micromark-util-types').TokenizeContext} TokenizeContext\n * @typedef {import('micromark-util-types').Tokenizer} Tokenizer\n */\n\nimport {asciiPunctuation} from 'micromark-util-character'\n/** @type {Construct} */\nexport const characterEscape = {\n  name: 'characterEscape',\n  tokenize: tokenizeCharacterEscape\n}\n\n/**\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeCharacterEscape(effects, ok, nok) {\n  return start\n\n  /**\n   * Start of character escape.\n   *\n   * ```markdown\n   * > | a\\*b\n   *      ^\n   * ```\n   *\n   * @type {State}\n   */\n  function start(code) {\n    effects.enter('characterEscape')\n    effects.enter('escapeMarker')\n    effects.consume(code)\n    effects.exit('escapeMarker')\n    return inside\n  }\n\n  /**\n   * After `\\`, at punctuation.\n   *\n   * ```markdown\n   * > | a\\*b\n   *       ^\n   * ```\n   *\n   * @type {State}\n   */\n  function inside(code) {\n    // ASCII punctuation.\n    if (asciiPunctuation(code)) {\n      effects.enter('characterEscapeValue')\n      effects.consume(code)\n      effects.exit('characterEscapeValue')\n      effects.exit('characterEscape')\n      return ok\n    }\n    return nok(code)\n  }\n}\n","/**\n * @typedef {import('micromark-util-types').Construct} Construct\n * @typedef {import('micromark-util-types').State} State\n * @typedef {import('micromark-util-types').TokenizeContext} TokenizeContext\n * @typedef {import('micromark-util-types').Tokenizer} Tokenizer\n */\n\nimport {factorySpace} from 'micromark-factory-space'\nimport {markdownLineEnding} from 'micromark-util-character'\n/** @type {Construct} */\nexport const lineEnding = {\n  name: 'lineEnding',\n  tokenize: tokenizeLineEnding\n}\n\n/**\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeLineEnding(effects, ok) {\n  return start\n\n  /** @type {State} */\n  function start(code) {\n    effects.enter('lineEnding')\n    effects.consume(code)\n    effects.exit('lineEnding')\n    return factorySpace(effects, ok, 'linePrefix')\n  }\n}\n","/**\n * @typedef {import('micromark-util-types').Construct} Construct\n * @typedef {import('micromark-util-types').Event} Event\n * @typedef {import('micromark-util-types').Resolver} Resolver\n * @typedef {import('micromark-util-types').State} State\n * @typedef {import('micromark-util-types').Token} Token\n * @typedef {import('micromark-util-types').TokenizeContext} TokenizeContext\n * @typedef {import('micromark-util-types').Tokenizer} Tokenizer\n */\n\nimport {factoryDestination} from 'micromark-factory-destination'\nimport {factoryLabel} from 'micromark-factory-label'\nimport {factoryTitle} from 'micromark-factory-title'\nimport {factoryWhitespace} from 'micromark-factory-whitespace'\nimport {markdownLineEndingOrSpace} from 'micromark-util-character'\nimport {push, splice} from 'micromark-util-chunked'\nimport {normalizeIdentifier} from 'micromark-util-normalize-identifier'\nimport {resolveAll} from 'micromark-util-resolve-all'\n/** @type {Construct} */\nexport const labelEnd = {\n  name: 'labelEnd',\n  tokenize: tokenizeLabelEnd,\n  resolveTo: resolveToLabelEnd,\n  resolveAll: resolveAllLabelEnd\n}\n\n/** @type {Construct} */\nconst resourceConstruct = {\n  tokenize: tokenizeResource\n}\n/** @type {Construct} */\nconst referenceFullConstruct = {\n  tokenize: tokenizeReferenceFull\n}\n/** @type {Construct} */\nconst referenceCollapsedConstruct = {\n  tokenize: tokenizeReferenceCollapsed\n}\n\n/** @type {Resolver} */\nfunction resolveAllLabelEnd(events) {\n  let index = -1\n  while (++index < events.length) {\n    const token = events[index][1]\n    if (\n      token.type === 'labelImage' ||\n      token.type === 'labelLink' ||\n      token.type === 'labelEnd'\n    ) {\n      // Remove the marker.\n      events.splice(index + 1, token.type === 'labelImage' ? 4 : 2)\n      token.type = 'data'\n      index++\n    }\n  }\n  return events\n}\n\n/** @type {Resolver} */\nfunction resolveToLabelEnd(events, context) {\n  let index = events.length\n  let offset = 0\n  /** @type {Token} */\n  let token\n  /** @type {number | undefined} */\n  let open\n  /** @type {number | undefined} */\n  let close\n  /** @type {Array<Event>} */\n  let media\n\n  // Find an opening.\n  while (index--) {\n    token = events[index][1]\n    if (open) {\n      // If we see another link, or inactive link label, we’ve been here before.\n      if (\n        token.type === 'link' ||\n        (token.type === 'labelLink' && token._inactive)\n      ) {\n        break\n      }\n\n      // Mark other link openings as inactive, as we can’t have links in\n      // links.\n      if (events[index][0] === 'enter' && token.type === 'labelLink') {\n        token._inactive = true\n      }\n    } else if (close) {\n      if (\n        events[index][0] === 'enter' &&\n        (token.type === 'labelImage' || token.type === 'labelLink') &&\n        !token._balanced\n      ) {\n        open = index\n        if (token.type !== 'labelLink') {\n          offset = 2\n          break\n        }\n      }\n    } else if (token.type === 'labelEnd') {\n      close = index\n    }\n  }\n  const group = {\n    type: events[open][1].type === 'labelLink' ? 'link' : 'image',\n    start: Object.assign({}, events[open][1].start),\n    end: Object.assign({}, events[events.length - 1][1].end)\n  }\n  const label = {\n    type: 'label',\n    start: Object.assign({}, events[open][1].start),\n    end: Object.assign({}, events[close][1].end)\n  }\n  const text = {\n    type: 'labelText',\n    start: Object.assign({}, events[open + offset + 2][1].end),\n    end: Object.assign({}, events[close - 2][1].start)\n  }\n  media = [\n    ['enter', group, context],\n    ['enter', label, context]\n  ]\n\n  // Opening marker.\n  media = push(media, events.slice(open + 1, open + offset + 3))\n\n  // Text open.\n  media = push(media, [['enter', text, context]])\n\n  // Always populated by defaults.\n\n  // Between.\n  media = push(\n    media,\n    resolveAll(\n      context.parser.constructs.insideSpan.null,\n      events.slice(open + offset + 4, close - 3),\n      context\n    )\n  )\n\n  // Text close, marker close, label close.\n  media = push(media, [\n    ['exit', text, context],\n    events[close - 2],\n    events[close - 1],\n    ['exit', label, context]\n  ])\n\n  // Reference, resource, or so.\n  media = push(media, events.slice(close + 1))\n\n  // Media close.\n  media = push(media, [['exit', group, context]])\n  splice(events, open, events.length, media)\n  return events\n}\n\n/**\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeLabelEnd(effects, ok, nok) {\n  const self = this\n  let index = self.events.length\n  /** @type {Token} */\n  let labelStart\n  /** @type {boolean} */\n  let defined\n\n  // Find an opening.\n  while (index--) {\n    if (\n      (self.events[index][1].type === 'labelImage' ||\n        self.events[index][1].type === 'labelLink') &&\n      !self.events[index][1]._balanced\n    ) {\n      labelStart = self.events[index][1]\n      break\n    }\n  }\n  return start\n\n  /**\n   * Start of label end.\n   *\n   * ```markdown\n   * > | [a](b) c\n   *       ^\n   * > | [a][b] c\n   *       ^\n   * > | [a][] b\n   *       ^\n   * > | [a] b\n   * ```\n   *\n   * @type {State}\n   */\n  function start(code) {\n    // If there is not an okay opening.\n    if (!labelStart) {\n      return nok(code)\n    }\n\n    // If the corresponding label (link) start is marked as inactive,\n    // it means we’d be wrapping a link, like this:\n    //\n    // ```markdown\n    // > | a [b [c](d) e](f) g.\n    //                  ^\n    // ```\n    //\n    // We can’t have that, so it’s just balanced brackets.\n    if (labelStart._inactive) {\n      return labelEndNok(code)\n    }\n    defined = self.parser.defined.includes(\n      normalizeIdentifier(\n        self.sliceSerialize({\n          start: labelStart.end,\n          end: self.now()\n        })\n      )\n    )\n    effects.enter('labelEnd')\n    effects.enter('labelMarker')\n    effects.consume(code)\n    effects.exit('labelMarker')\n    effects.exit('labelEnd')\n    return after\n  }\n\n  /**\n   * After `]`.\n   *\n   * ```markdown\n   * > | [a](b) c\n   *       ^\n   * > | [a][b] c\n   *       ^\n   * > | [a][] b\n   *       ^\n   * > | [a] b\n   *       ^\n   * ```\n   *\n   * @type {State}\n   */\n  function after(code) {\n    // Note: `markdown-rs` also parses GFM footnotes here, which for us is in\n    // an extension.\n\n    // Resource (`[asd](fgh)`)?\n    if (code === 40) {\n      return effects.attempt(\n        resourceConstruct,\n        labelEndOk,\n        defined ? labelEndOk : labelEndNok\n      )(code)\n    }\n\n    // Full (`[asd][fgh]`) or collapsed (`[asd][]`) reference?\n    if (code === 91) {\n      return effects.attempt(\n        referenceFullConstruct,\n        labelEndOk,\n        defined ? referenceNotFull : labelEndNok\n      )(code)\n    }\n\n    // Shortcut (`[asd]`) reference?\n    return defined ? labelEndOk(code) : labelEndNok(code)\n  }\n\n  /**\n   * After `]`, at `[`, but not at a full reference.\n   *\n   * > 👉 **Note**: we only get here if the label is defined.\n   *\n   * ```markdown\n   * > | [a][] b\n   *        ^\n   * > | [a] b\n   *        ^\n   * ```\n   *\n   * @type {State}\n   */\n  function referenceNotFull(code) {\n    return effects.attempt(\n      referenceCollapsedConstruct,\n      labelEndOk,\n      labelEndNok\n    )(code)\n  }\n\n  /**\n   * Done, we found something.\n   *\n   * ```markdown\n   * > | [a](b) c\n   *           ^\n   * > | [a][b] c\n   *           ^\n   * > | [a][] b\n   *          ^\n   * > | [a] b\n   *        ^\n   * ```\n   *\n   * @type {State}\n   */\n  function labelEndOk(code) {\n    // Note: `markdown-rs` does a bunch of stuff here.\n    return ok(code)\n  }\n\n  /**\n   * Done, it’s nothing.\n   *\n   * There was an okay opening, but we didn’t match anything.\n   *\n   * ```markdown\n   * > | [a](b c\n   *        ^\n   * > | [a][b c\n   *        ^\n   * > | [a] b\n   *        ^\n   * ```\n   *\n   * @type {State}\n   */\n  function labelEndNok(code) {\n    labelStart._balanced = true\n    return nok(code)\n  }\n}\n\n/**\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeResource(effects, ok, nok) {\n  return resourceStart\n\n  /**\n   * At a resource.\n   *\n   * ```markdown\n   * > | [a](b) c\n   *        ^\n   * ```\n   *\n   * @type {State}\n   */\n  function resourceStart(code) {\n    effects.enter('resource')\n    effects.enter('resourceMarker')\n    effects.consume(code)\n    effects.exit('resourceMarker')\n    return resourceBefore\n  }\n\n  /**\n   * In resource, after `(`, at optional whitespace.\n   *\n   * ```markdown\n   * > | [a](b) c\n   *         ^\n   * ```\n   *\n   * @type {State}\n   */\n  function resourceBefore(code) {\n    return markdownLineEndingOrSpace(code)\n      ? factoryWhitespace(effects, resourceOpen)(code)\n      : resourceOpen(code)\n  }\n\n  /**\n   * In resource, after optional whitespace, at `)` or a destination.\n   *\n   * ```markdown\n   * > | [a](b) c\n   *         ^\n   * ```\n   *\n   * @type {State}\n   */\n  function resourceOpen(code) {\n    if (code === 41) {\n      return resourceEnd(code)\n    }\n    return factoryDestination(\n      effects,\n      resourceDestinationAfter,\n      resourceDestinationMissing,\n      'resourceDestination',\n      'resourceDestinationLiteral',\n      'resourceDestinationLiteralMarker',\n      'resourceDestinationRaw',\n      'resourceDestinationString',\n      32\n    )(code)\n  }\n\n  /**\n   * In resource, after destination, at optional whitespace.\n   *\n   * ```markdown\n   * > | [a](b) c\n   *          ^\n   * ```\n   *\n   * @type {State}\n   */\n  function resourceDestinationAfter(code) {\n    return markdownLineEndingOrSpace(code)\n      ? factoryWhitespace(effects, resourceBetween)(code)\n      : resourceEnd(code)\n  }\n\n  /**\n   * At invalid destination.\n   *\n   * ```markdown\n   * > | [a](<<) b\n   *         ^\n   * ```\n   *\n   * @type {State}\n   */\n  function resourceDestinationMissing(code) {\n    return nok(code)\n  }\n\n  /**\n   * In resource, after destination and whitespace, at `(` or title.\n   *\n   * ```markdown\n   * > | [a](b ) c\n   *           ^\n   * ```\n   *\n   * @type {State}\n   */\n  function resourceBetween(code) {\n    if (code === 34 || code === 39 || code === 40) {\n      return factoryTitle(\n        effects,\n        resourceTitleAfter,\n        nok,\n        'resourceTitle',\n        'resourceTitleMarker',\n        'resourceTitleString'\n      )(code)\n    }\n    return resourceEnd(code)\n  }\n\n  /**\n   * In resource, after title, at optional whitespace.\n   *\n   * ```markdown\n   * > | [a](b \"c\") d\n   *              ^\n   * ```\n   *\n   * @type {State}\n   */\n  function resourceTitleAfter(code) {\n    return markdownLineEndingOrSpace(code)\n      ? factoryWhitespace(effects, resourceEnd)(code)\n      : resourceEnd(code)\n  }\n\n  /**\n   * In resource, at `)`.\n   *\n   * ```markdown\n   * > | [a](b) d\n   *          ^\n   * ```\n   *\n   * @type {State}\n   */\n  function resourceEnd(code) {\n    if (code === 41) {\n      effects.enter('resourceMarker')\n      effects.consume(code)\n      effects.exit('resourceMarker')\n      effects.exit('resource')\n      return ok\n    }\n    return nok(code)\n  }\n}\n\n/**\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeReferenceFull(effects, ok, nok) {\n  const self = this\n  return referenceFull\n\n  /**\n   * In a reference (full), at the `[`.\n   *\n   * ```markdown\n   * > | [a][b] d\n   *        ^\n   * ```\n   *\n   * @type {State}\n   */\n  function referenceFull(code) {\n    return factoryLabel.call(\n      self,\n      effects,\n      referenceFullAfter,\n      referenceFullMissing,\n      'reference',\n      'referenceMarker',\n      'referenceString'\n    )(code)\n  }\n\n  /**\n   * In a reference (full), after `]`.\n   *\n   * ```markdown\n   * > | [a][b] d\n   *          ^\n   * ```\n   *\n   * @type {State}\n   */\n  function referenceFullAfter(code) {\n    return self.parser.defined.includes(\n      normalizeIdentifier(\n        self.sliceSerialize(self.events[self.events.length - 1][1]).slice(1, -1)\n      )\n    )\n      ? ok(code)\n      : nok(code)\n  }\n\n  /**\n   * In reference (full) that was missing.\n   *\n   * ```markdown\n   * > | [a][b d\n   *        ^\n   * ```\n   *\n   * @type {State}\n   */\n  function referenceFullMissing(code) {\n    return nok(code)\n  }\n}\n\n/**\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeReferenceCollapsed(effects, ok, nok) {\n  return referenceCollapsedStart\n\n  /**\n   * In reference (collapsed), at `[`.\n   *\n   * > 👉 **Note**: we only get here if the label is defined.\n   *\n   * ```markdown\n   * > | [a][] d\n   *        ^\n   * ```\n   *\n   * @type {State}\n   */\n  function referenceCollapsedStart(code) {\n    // We only attempt a collapsed label if there’s a `[`.\n\n    effects.enter('reference')\n    effects.enter('referenceMarker')\n    effects.consume(code)\n    effects.exit('referenceMarker')\n    return referenceCollapsedOpen\n  }\n\n  /**\n   * In reference (collapsed), at `]`.\n   *\n   * > 👉 **Note**: we only get here if the label is defined.\n   *\n   * ```markdown\n   * > | [a][] d\n   *         ^\n   * ```\n   *\n   *  @type {State}\n   */\n  function referenceCollapsedOpen(code) {\n    if (code === 93) {\n      effects.enter('referenceMarker')\n      effects.consume(code)\n      effects.exit('referenceMarker')\n      effects.exit('reference')\n      return ok\n    }\n    return nok(code)\n  }\n}\n","/**\n * @typedef {import('micromark-util-types').Construct} Construct\n * @typedef {import('micromark-util-types').State} State\n * @typedef {import('micromark-util-types').TokenizeContext} TokenizeContext\n * @typedef {import('micromark-util-types').Tokenizer} Tokenizer\n */\n\nimport {labelEnd} from './label-end.js'\n\n/** @type {Construct} */\nexport const labelStartImage = {\n  name: 'labelStartImage',\n  tokenize: tokenizeLabelStartImage,\n  resolveAll: labelEnd.resolveAll\n}\n\n/**\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeLabelStartImage(effects, ok, nok) {\n  const self = this\n  return start\n\n  /**\n   * Start of label (image) start.\n   *\n   * ```markdown\n   * > | a ![b] c\n   *       ^\n   * ```\n   *\n   * @type {State}\n   */\n  function start(code) {\n    effects.enter('labelImage')\n    effects.enter('labelImageMarker')\n    effects.consume(code)\n    effects.exit('labelImageMarker')\n    return open\n  }\n\n  /**\n   * After `!`, at `[`.\n   *\n   * ```markdown\n   * > | a ![b] c\n   *        ^\n   * ```\n   *\n   * @type {State}\n   */\n  function open(code) {\n    if (code === 91) {\n      effects.enter('labelMarker')\n      effects.consume(code)\n      effects.exit('labelMarker')\n      effects.exit('labelImage')\n      return after\n    }\n    return nok(code)\n  }\n\n  /**\n   * After `![`.\n   *\n   * ```markdown\n   * > | a ![b] c\n   *         ^\n   * ```\n   *\n   * This is needed in because, when GFM footnotes are enabled, images never\n   * form when started with a `^`.\n   * Instead, links form:\n   *\n   * ```markdown\n   * ![^a](b)\n   *\n   * ![^a][b]\n   *\n   * [b]: c\n   * ```\n   *\n   * ```html\n   * <p>!<a href=\\\"b\\\">^a</a></p>\n   * <p>!<a href=\\\"c\\\">^a</a></p>\n   * ```\n   *\n   * @type {State}\n   */\n  function after(code) {\n    // To do: use a new field to do this, this is still needed for\n    // `micromark-extension-gfm-footnote`, but the `label-start-link`\n    // behavior isn’t.\n    // Hidden footnotes hook.\n    /* c8 ignore next 3 */\n    return code === 94 && '_hiddenFootnoteSupport' in self.parser.constructs\n      ? nok(code)\n      : ok(code)\n  }\n}\n","/**\n * @typedef {import('micromark-util-types').Code} Code\n */\n\nimport {\n  markdownLineEndingOrSpace,\n  unicodePunctuation,\n  unicodeWhitespace\n} from 'micromark-util-character'\n/**\n * Classify whether a code represents whitespace, punctuation, or something\n * else.\n *\n * Used for attention (emphasis, strong), whose sequences can open or close\n * based on the class of surrounding characters.\n *\n * > 👉 **Note**: eof (`null`) is seen as whitespace.\n *\n * @param {Code} code\n *   Code.\n * @returns {typeof constants.characterGroupWhitespace | typeof constants.characterGroupPunctuation | undefined}\n *   Group.\n */\nexport function classifyCharacter(code) {\n  if (\n    code === null ||\n    markdownLineEndingOrSpace(code) ||\n    unicodeWhitespace(code)\n  ) {\n    return 1\n  }\n  if (unicodePunctuation(code)) {\n    return 2\n  }\n}\n","/**\n * @typedef {import('micromark-util-types').Code} Code\n * @typedef {import('micromark-util-types').Construct} Construct\n * @typedef {import('micromark-util-types').Event} Event\n * @typedef {import('micromark-util-types').Point} Point\n * @typedef {import('micromark-util-types').Resolver} Resolver\n * @typedef {import('micromark-util-types').State} State\n * @typedef {import('micromark-util-types').Token} Token\n * @typedef {import('micromark-util-types').TokenizeContext} TokenizeContext\n * @typedef {import('micromark-util-types').Tokenizer} Tokenizer\n */\n\nimport {push, splice} from 'micromark-util-chunked'\nimport {classifyCharacter} from 'micromark-util-classify-character'\nimport {resolveAll} from 'micromark-util-resolve-all'\n/** @type {Construct} */\nexport const attention = {\n  name: 'attention',\n  tokenize: tokenizeAttention,\n  resolveAll: resolveAllAttention\n}\n\n/**\n * Take all events and resolve attention to emphasis or strong.\n *\n * @type {Resolver}\n */\n// eslint-disable-next-line complexity\nfunction resolveAllAttention(events, context) {\n  let index = -1\n  /** @type {number} */\n  let open\n  /** @type {Token} */\n  let group\n  /** @type {Token} */\n  let text\n  /** @type {Token} */\n  let openingSequence\n  /** @type {Token} */\n  let closingSequence\n  /** @type {number} */\n  let use\n  /** @type {Array<Event>} */\n  let nextEvents\n  /** @type {number} */\n  let offset\n\n  // Walk through all events.\n  //\n  // Note: performance of this is fine on an mb of normal markdown, but it’s\n  // a bottleneck for malicious stuff.\n  while (++index < events.length) {\n    // Find a token that can close.\n    if (\n      events[index][0] === 'enter' &&\n      events[index][1].type === 'attentionSequence' &&\n      events[index][1]._close\n    ) {\n      open = index\n\n      // Now walk back to find an opener.\n      while (open--) {\n        // Find a token that can open the closer.\n        if (\n          events[open][0] === 'exit' &&\n          events[open][1].type === 'attentionSequence' &&\n          events[open][1]._open &&\n          // If the markers are the same:\n          context.sliceSerialize(events[open][1]).charCodeAt(0) ===\n            context.sliceSerialize(events[index][1]).charCodeAt(0)\n        ) {\n          // If the opening can close or the closing can open,\n          // and the close size *is not* a multiple of three,\n          // but the sum of the opening and closing size *is* multiple of three,\n          // then don’t match.\n          if (\n            (events[open][1]._close || events[index][1]._open) &&\n            (events[index][1].end.offset - events[index][1].start.offset) % 3 &&\n            !(\n              (events[open][1].end.offset -\n                events[open][1].start.offset +\n                events[index][1].end.offset -\n                events[index][1].start.offset) %\n              3\n            )\n          ) {\n            continue\n          }\n\n          // Number of markers to use from the sequence.\n          use =\n            events[open][1].end.offset - events[open][1].start.offset > 1 &&\n            events[index][1].end.offset - events[index][1].start.offset > 1\n              ? 2\n              : 1\n          const start = Object.assign({}, events[open][1].end)\n          const end = Object.assign({}, events[index][1].start)\n          movePoint(start, -use)\n          movePoint(end, use)\n          openingSequence = {\n            type: use > 1 ? 'strongSequence' : 'emphasisSequence',\n            start,\n            end: Object.assign({}, events[open][1].end)\n          }\n          closingSequence = {\n            type: use > 1 ? 'strongSequence' : 'emphasisSequence',\n            start: Object.assign({}, events[index][1].start),\n            end\n          }\n          text = {\n            type: use > 1 ? 'strongText' : 'emphasisText',\n            start: Object.assign({}, events[open][1].end),\n            end: Object.assign({}, events[index][1].start)\n          }\n          group = {\n            type: use > 1 ? 'strong' : 'emphasis',\n            start: Object.assign({}, openingSequence.start),\n            end: Object.assign({}, closingSequence.end)\n          }\n          events[open][1].end = Object.assign({}, openingSequence.start)\n          events[index][1].start = Object.assign({}, closingSequence.end)\n          nextEvents = []\n\n          // If there are more markers in the opening, add them before.\n          if (events[open][1].end.offset - events[open][1].start.offset) {\n            nextEvents = push(nextEvents, [\n              ['enter', events[open][1], context],\n              ['exit', events[open][1], context]\n            ])\n          }\n\n          // Opening.\n          nextEvents = push(nextEvents, [\n            ['enter', group, context],\n            ['enter', openingSequence, context],\n            ['exit', openingSequence, context],\n            ['enter', text, context]\n          ])\n\n          // Always populated by defaults.\n\n          // Between.\n          nextEvents = push(\n            nextEvents,\n            resolveAll(\n              context.parser.constructs.insideSpan.null,\n              events.slice(open + 1, index),\n              context\n            )\n          )\n\n          // Closing.\n          nextEvents = push(nextEvents, [\n            ['exit', text, context],\n            ['enter', closingSequence, context],\n            ['exit', closingSequence, context],\n            ['exit', group, context]\n          ])\n\n          // If there are more markers in the closing, add them after.\n          if (events[index][1].end.offset - events[index][1].start.offset) {\n            offset = 2\n            nextEvents = push(nextEvents, [\n              ['enter', events[index][1], context],\n              ['exit', events[index][1], context]\n            ])\n          } else {\n            offset = 0\n          }\n          splice(events, open - 1, index - open + 3, nextEvents)\n          index = open + nextEvents.length - offset - 2\n          break\n        }\n      }\n    }\n  }\n\n  // Remove remaining sequences.\n  index = -1\n  while (++index < events.length) {\n    if (events[index][1].type === 'attentionSequence') {\n      events[index][1].type = 'data'\n    }\n  }\n  return events\n}\n\n/**\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeAttention(effects, ok) {\n  const attentionMarkers = this.parser.constructs.attentionMarkers.null\n  const previous = this.previous\n  const before = classifyCharacter(previous)\n\n  /** @type {NonNullable<Code>} */\n  let marker\n  return start\n\n  /**\n   * Before a sequence.\n   *\n   * ```markdown\n   * > | **\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function start(code) {\n    marker = code\n    effects.enter('attentionSequence')\n    return inside(code)\n  }\n\n  /**\n   * In a sequence.\n   *\n   * ```markdown\n   * > | **\n   *     ^^\n   * ```\n   *\n   * @type {State}\n   */\n  function inside(code) {\n    if (code === marker) {\n      effects.consume(code)\n      return inside\n    }\n    const token = effects.exit('attentionSequence')\n\n    // To do: next major: move this to resolver, just like `markdown-rs`.\n    const after = classifyCharacter(code)\n\n    // Always populated by defaults.\n\n    const open =\n      !after || (after === 2 && before) || attentionMarkers.includes(code)\n    const close =\n      !before || (before === 2 && after) || attentionMarkers.includes(previous)\n    token._open = Boolean(marker === 42 ? open : open && (before || !close))\n    token._close = Boolean(marker === 42 ? close : close && (after || !open))\n    return ok(code)\n  }\n}\n\n/**\n * Move a point a bit.\n *\n * Note: `move` only works inside lines! It’s not possible to move past other\n * chunks (replacement characters, tabs, or line endings).\n *\n * @param {Point} point\n * @param {number} offset\n * @returns {undefined}\n */\nfunction movePoint(point, offset) {\n  point.column += offset\n  point.offset += offset\n  point._bufferIndex += offset\n}\n","/**\n * @typedef {import('micromark-util-types').Construct} Construct\n * @typedef {import('micromark-util-types').State} State\n * @typedef {import('micromark-util-types').TokenizeContext} TokenizeContext\n * @typedef {import('micromark-util-types').Tokenizer} Tokenizer\n */\n\nimport {\n  asciiAlpha,\n  asciiAlphanumeric,\n  asciiAtext,\n  asciiControl\n} from 'micromark-util-character'\n/** @type {Construct} */\nexport const autolink = {\n  name: 'autolink',\n  tokenize: tokenizeAutolink\n}\n\n/**\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeAutolink(effects, ok, nok) {\n  let size = 0\n  return start\n\n  /**\n   * Start of an autolink.\n   *\n   * ```markdown\n   * > | a<https://example.com>b\n   *      ^\n   * > | a<user@example.com>b\n   *      ^\n   * ```\n   *\n   * @type {State}\n   */\n  function start(code) {\n    effects.enter('autolink')\n    effects.enter('autolinkMarker')\n    effects.consume(code)\n    effects.exit('autolinkMarker')\n    effects.enter('autolinkProtocol')\n    return open\n  }\n\n  /**\n   * After `<`, at protocol or atext.\n   *\n   * ```markdown\n   * > | a<https://example.com>b\n   *       ^\n   * > | a<user@example.com>b\n   *       ^\n   * ```\n   *\n   * @type {State}\n   */\n  function open(code) {\n    if (asciiAlpha(code)) {\n      effects.consume(code)\n      return schemeOrEmailAtext\n    }\n    return emailAtext(code)\n  }\n\n  /**\n   * At second byte of protocol or atext.\n   *\n   * ```markdown\n   * > | a<https://example.com>b\n   *        ^\n   * > | a<user@example.com>b\n   *        ^\n   * ```\n   *\n   * @type {State}\n   */\n  function schemeOrEmailAtext(code) {\n    // ASCII alphanumeric and `+`, `-`, and `.`.\n    if (code === 43 || code === 45 || code === 46 || asciiAlphanumeric(code)) {\n      // Count the previous alphabetical from `open` too.\n      size = 1\n      return schemeInsideOrEmailAtext(code)\n    }\n    return emailAtext(code)\n  }\n\n  /**\n   * In ambiguous protocol or atext.\n   *\n   * ```markdown\n   * > | a<https://example.com>b\n   *        ^\n   * > | a<user@example.com>b\n   *        ^\n   * ```\n   *\n   * @type {State}\n   */\n  function schemeInsideOrEmailAtext(code) {\n    if (code === 58) {\n      effects.consume(code)\n      size = 0\n      return urlInside\n    }\n\n    // ASCII alphanumeric and `+`, `-`, and `.`.\n    if (\n      (code === 43 || code === 45 || code === 46 || asciiAlphanumeric(code)) &&\n      size++ < 32\n    ) {\n      effects.consume(code)\n      return schemeInsideOrEmailAtext\n    }\n    size = 0\n    return emailAtext(code)\n  }\n\n  /**\n   * After protocol, in URL.\n   *\n   * ```markdown\n   * > | a<https://example.com>b\n   *             ^\n   * ```\n   *\n   * @type {State}\n   */\n  function urlInside(code) {\n    if (code === 62) {\n      effects.exit('autolinkProtocol')\n      effects.enter('autolinkMarker')\n      effects.consume(code)\n      effects.exit('autolinkMarker')\n      effects.exit('autolink')\n      return ok\n    }\n\n    // ASCII control, space, or `<`.\n    if (code === null || code === 32 || code === 60 || asciiControl(code)) {\n      return nok(code)\n    }\n    effects.consume(code)\n    return urlInside\n  }\n\n  /**\n   * In email atext.\n   *\n   * ```markdown\n   * > | a<user.name@example.com>b\n   *              ^\n   * ```\n   *\n   * @type {State}\n   */\n  function emailAtext(code) {\n    if (code === 64) {\n      effects.consume(code)\n      return emailAtSignOrDot\n    }\n    if (asciiAtext(code)) {\n      effects.consume(code)\n      return emailAtext\n    }\n    return nok(code)\n  }\n\n  /**\n   * In label, after at-sign or dot.\n   *\n   * ```markdown\n   * > | a<user.name@example.com>b\n   *                 ^       ^\n   * ```\n   *\n   * @type {State}\n   */\n  function emailAtSignOrDot(code) {\n    return asciiAlphanumeric(code) ? emailLabel(code) : nok(code)\n  }\n\n  /**\n   * In label, where `.` and `>` are allowed.\n   *\n   * ```markdown\n   * > | a<user.name@example.com>b\n   *                   ^\n   * ```\n   *\n   * @type {State}\n   */\n  function emailLabel(code) {\n    if (code === 46) {\n      effects.consume(code)\n      size = 0\n      return emailAtSignOrDot\n    }\n    if (code === 62) {\n      // Exit, then change the token type.\n      effects.exit('autolinkProtocol').type = 'autolinkEmail'\n      effects.enter('autolinkMarker')\n      effects.consume(code)\n      effects.exit('autolinkMarker')\n      effects.exit('autolink')\n      return ok\n    }\n    return emailValue(code)\n  }\n\n  /**\n   * In label, where `.` and `>` are *not* allowed.\n   *\n   * Though, this is also used in `emailLabel` to parse other values.\n   *\n   * ```markdown\n   * > | a<user.name@ex-ample.com>b\n   *                    ^\n   * ```\n   *\n   * @type {State}\n   */\n  function emailValue(code) {\n    // ASCII alphanumeric or `-`.\n    if ((code === 45 || asciiAlphanumeric(code)) && size++ < 63) {\n      const next = code === 45 ? emailValue : emailLabel\n      effects.consume(code)\n      return next\n    }\n    return nok(code)\n  }\n}\n","/**\n * @typedef {import('micromark-util-types').Code} Code\n * @typedef {import('micromark-util-types').Construct} Construct\n * @typedef {import('micromark-util-types').State} State\n * @typedef {import('micromark-util-types').TokenizeContext} TokenizeContext\n * @typedef {import('micromark-util-types').Tokenizer} Tokenizer\n */\n\nimport {factorySpace} from 'micromark-factory-space'\nimport {\n  asciiAlpha,\n  asciiAlphanumeric,\n  markdownLineEnding,\n  markdownLineEndingOrSpace,\n  markdownSpace\n} from 'micromark-util-character'\n/** @type {Construct} */\nexport const htmlText = {\n  name: 'htmlText',\n  tokenize: tokenizeHtmlText\n}\n\n/**\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeHtmlText(effects, ok, nok) {\n  const self = this\n  /** @type {NonNullable<Code> | undefined} */\n  let marker\n  /** @type {number} */\n  let index\n  /** @type {State} */\n  let returnState\n  return start\n\n  /**\n   * Start of HTML (text).\n   *\n   * ```markdown\n   * > | a <b> c\n   *       ^\n   * ```\n   *\n   * @type {State}\n   */\n  function start(code) {\n    effects.enter('htmlText')\n    effects.enter('htmlTextData')\n    effects.consume(code)\n    return open\n  }\n\n  /**\n   * After `<`, at tag name or other stuff.\n   *\n   * ```markdown\n   * > | a <b> c\n   *        ^\n   * > | a <!doctype> c\n   *        ^\n   * > | a <!--b--> c\n   *        ^\n   * ```\n   *\n   * @type {State}\n   */\n  function open(code) {\n    if (code === 33) {\n      effects.consume(code)\n      return declarationOpen\n    }\n    if (code === 47) {\n      effects.consume(code)\n      return tagCloseStart\n    }\n    if (code === 63) {\n      effects.consume(code)\n      return instruction\n    }\n\n    // ASCII alphabetical.\n    if (asciiAlpha(code)) {\n      effects.consume(code)\n      return tagOpen\n    }\n    return nok(code)\n  }\n\n  /**\n   * After `<!`, at declaration, comment, or CDATA.\n   *\n   * ```markdown\n   * > | a <!doctype> c\n   *         ^\n   * > | a <!--b--> c\n   *         ^\n   * > | a <![CDATA[>&<]]> c\n   *         ^\n   * ```\n   *\n   * @type {State}\n   */\n  function declarationOpen(code) {\n    if (code === 45) {\n      effects.consume(code)\n      return commentOpenInside\n    }\n    if (code === 91) {\n      effects.consume(code)\n      index = 0\n      return cdataOpenInside\n    }\n    if (asciiAlpha(code)) {\n      effects.consume(code)\n      return declaration\n    }\n    return nok(code)\n  }\n\n  /**\n   * In a comment, after `<!-`, at another `-`.\n   *\n   * ```markdown\n   * > | a <!--b--> c\n   *          ^\n   * ```\n   *\n   * @type {State}\n   */\n  function commentOpenInside(code) {\n    if (code === 45) {\n      effects.consume(code)\n      return commentEnd\n    }\n    return nok(code)\n  }\n\n  /**\n   * In comment.\n   *\n   * ```markdown\n   * > | a <!--b--> c\n   *           ^\n   * ```\n   *\n   * @type {State}\n   */\n  function comment(code) {\n    if (code === null) {\n      return nok(code)\n    }\n    if (code === 45) {\n      effects.consume(code)\n      return commentClose\n    }\n    if (markdownLineEnding(code)) {\n      returnState = comment\n      return lineEndingBefore(code)\n    }\n    effects.consume(code)\n    return comment\n  }\n\n  /**\n   * In comment, after `-`.\n   *\n   * ```markdown\n   * > | a <!--b--> c\n   *             ^\n   * ```\n   *\n   * @type {State}\n   */\n  function commentClose(code) {\n    if (code === 45) {\n      effects.consume(code)\n      return commentEnd\n    }\n    return comment(code)\n  }\n\n  /**\n   * In comment, after `--`.\n   *\n   * ```markdown\n   * > | a <!--b--> c\n   *              ^\n   * ```\n   *\n   * @type {State}\n   */\n  function commentEnd(code) {\n    return code === 62\n      ? end(code)\n      : code === 45\n      ? commentClose(code)\n      : comment(code)\n  }\n\n  /**\n   * After `<![`, in CDATA, expecting `CDATA[`.\n   *\n   * ```markdown\n   * > | a <![CDATA[>&<]]> b\n   *          ^^^^^^\n   * ```\n   *\n   * @type {State}\n   */\n  function cdataOpenInside(code) {\n    const value = 'CDATA['\n    if (code === value.charCodeAt(index++)) {\n      effects.consume(code)\n      return index === value.length ? cdata : cdataOpenInside\n    }\n    return nok(code)\n  }\n\n  /**\n   * In CDATA.\n   *\n   * ```markdown\n   * > | a <![CDATA[>&<]]> b\n   *                ^^^\n   * ```\n   *\n   * @type {State}\n   */\n  function cdata(code) {\n    if (code === null) {\n      return nok(code)\n    }\n    if (code === 93) {\n      effects.consume(code)\n      return cdataClose\n    }\n    if (markdownLineEnding(code)) {\n      returnState = cdata\n      return lineEndingBefore(code)\n    }\n    effects.consume(code)\n    return cdata\n  }\n\n  /**\n   * In CDATA, after `]`, at another `]`.\n   *\n   * ```markdown\n   * > | a <![CDATA[>&<]]> b\n   *                    ^\n   * ```\n   *\n   * @type {State}\n   */\n  function cdataClose(code) {\n    if (code === 93) {\n      effects.consume(code)\n      return cdataEnd\n    }\n    return cdata(code)\n  }\n\n  /**\n   * In CDATA, after `]]`, at `>`.\n   *\n   * ```markdown\n   * > | a <![CDATA[>&<]]> b\n   *                     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function cdataEnd(code) {\n    if (code === 62) {\n      return end(code)\n    }\n    if (code === 93) {\n      effects.consume(code)\n      return cdataEnd\n    }\n    return cdata(code)\n  }\n\n  /**\n   * In declaration.\n   *\n   * ```markdown\n   * > | a <!b> c\n   *          ^\n   * ```\n   *\n   * @type {State}\n   */\n  function declaration(code) {\n    if (code === null || code === 62) {\n      return end(code)\n    }\n    if (markdownLineEnding(code)) {\n      returnState = declaration\n      return lineEndingBefore(code)\n    }\n    effects.consume(code)\n    return declaration\n  }\n\n  /**\n   * In instruction.\n   *\n   * ```markdown\n   * > | a <?b?> c\n   *         ^\n   * ```\n   *\n   * @type {State}\n   */\n  function instruction(code) {\n    if (code === null) {\n      return nok(code)\n    }\n    if (code === 63) {\n      effects.consume(code)\n      return instructionClose\n    }\n    if (markdownLineEnding(code)) {\n      returnState = instruction\n      return lineEndingBefore(code)\n    }\n    effects.consume(code)\n    return instruction\n  }\n\n  /**\n   * In instruction, after `?`, at `>`.\n   *\n   * ```markdown\n   * > | a <?b?> c\n   *           ^\n   * ```\n   *\n   * @type {State}\n   */\n  function instructionClose(code) {\n    return code === 62 ? end(code) : instruction(code)\n  }\n\n  /**\n   * After `</`, in closing tag, at tag name.\n   *\n   * ```markdown\n   * > | a </b> c\n   *         ^\n   * ```\n   *\n   * @type {State}\n   */\n  function tagCloseStart(code) {\n    // ASCII alphabetical.\n    if (asciiAlpha(code)) {\n      effects.consume(code)\n      return tagClose\n    }\n    return nok(code)\n  }\n\n  /**\n   * After `</x`, in a tag name.\n   *\n   * ```markdown\n   * > | a </b> c\n   *          ^\n   * ```\n   *\n   * @type {State}\n   */\n  function tagClose(code) {\n    // ASCII alphanumerical and `-`.\n    if (code === 45 || asciiAlphanumeric(code)) {\n      effects.consume(code)\n      return tagClose\n    }\n    return tagCloseBetween(code)\n  }\n\n  /**\n   * In closing tag, after tag name.\n   *\n   * ```markdown\n   * > | a </b> c\n   *          ^\n   * ```\n   *\n   * @type {State}\n   */\n  function tagCloseBetween(code) {\n    if (markdownLineEnding(code)) {\n      returnState = tagCloseBetween\n      return lineEndingBefore(code)\n    }\n    if (markdownSpace(code)) {\n      effects.consume(code)\n      return tagCloseBetween\n    }\n    return end(code)\n  }\n\n  /**\n   * After `<x`, in opening tag name.\n   *\n   * ```markdown\n   * > | a <b> c\n   *         ^\n   * ```\n   *\n   * @type {State}\n   */\n  function tagOpen(code) {\n    // ASCII alphanumerical and `-`.\n    if (code === 45 || asciiAlphanumeric(code)) {\n      effects.consume(code)\n      return tagOpen\n    }\n    if (code === 47 || code === 62 || markdownLineEndingOrSpace(code)) {\n      return tagOpenBetween(code)\n    }\n    return nok(code)\n  }\n\n  /**\n   * In opening tag, after tag name.\n   *\n   * ```markdown\n   * > | a <b> c\n   *         ^\n   * ```\n   *\n   * @type {State}\n   */\n  function tagOpenBetween(code) {\n    if (code === 47) {\n      effects.consume(code)\n      return end\n    }\n\n    // ASCII alphabetical and `:` and `_`.\n    if (code === 58 || code === 95 || asciiAlpha(code)) {\n      effects.consume(code)\n      return tagOpenAttributeName\n    }\n    if (markdownLineEnding(code)) {\n      returnState = tagOpenBetween\n      return lineEndingBefore(code)\n    }\n    if (markdownSpace(code)) {\n      effects.consume(code)\n      return tagOpenBetween\n    }\n    return end(code)\n  }\n\n  /**\n   * In attribute name.\n   *\n   * ```markdown\n   * > | a <b c> d\n   *          ^\n   * ```\n   *\n   * @type {State}\n   */\n  function tagOpenAttributeName(code) {\n    // ASCII alphabetical and `-`, `.`, `:`, and `_`.\n    if (\n      code === 45 ||\n      code === 46 ||\n      code === 58 ||\n      code === 95 ||\n      asciiAlphanumeric(code)\n    ) {\n      effects.consume(code)\n      return tagOpenAttributeName\n    }\n    return tagOpenAttributeNameAfter(code)\n  }\n\n  /**\n   * After attribute name, before initializer, the end of the tag, or\n   * whitespace.\n   *\n   * ```markdown\n   * > | a <b c> d\n   *           ^\n   * ```\n   *\n   * @type {State}\n   */\n  function tagOpenAttributeNameAfter(code) {\n    if (code === 61) {\n      effects.consume(code)\n      return tagOpenAttributeValueBefore\n    }\n    if (markdownLineEnding(code)) {\n      returnState = tagOpenAttributeNameAfter\n      return lineEndingBefore(code)\n    }\n    if (markdownSpace(code)) {\n      effects.consume(code)\n      return tagOpenAttributeNameAfter\n    }\n    return tagOpenBetween(code)\n  }\n\n  /**\n   * Before unquoted, double quoted, or single quoted attribute value, allowing\n   * whitespace.\n   *\n   * ```markdown\n   * > | a <b c=d> e\n   *            ^\n   * ```\n   *\n   * @type {State}\n   */\n  function tagOpenAttributeValueBefore(code) {\n    if (\n      code === null ||\n      code === 60 ||\n      code === 61 ||\n      code === 62 ||\n      code === 96\n    ) {\n      return nok(code)\n    }\n    if (code === 34 || code === 39) {\n      effects.consume(code)\n      marker = code\n      return tagOpenAttributeValueQuoted\n    }\n    if (markdownLineEnding(code)) {\n      returnState = tagOpenAttributeValueBefore\n      return lineEndingBefore(code)\n    }\n    if (markdownSpace(code)) {\n      effects.consume(code)\n      return tagOpenAttributeValueBefore\n    }\n    effects.consume(code)\n    return tagOpenAttributeValueUnquoted\n  }\n\n  /**\n   * In double or single quoted attribute value.\n   *\n   * ```markdown\n   * > | a <b c=\"d\"> e\n   *             ^\n   * ```\n   *\n   * @type {State}\n   */\n  function tagOpenAttributeValueQuoted(code) {\n    if (code === marker) {\n      effects.consume(code)\n      marker = undefined\n      return tagOpenAttributeValueQuotedAfter\n    }\n    if (code === null) {\n      return nok(code)\n    }\n    if (markdownLineEnding(code)) {\n      returnState = tagOpenAttributeValueQuoted\n      return lineEndingBefore(code)\n    }\n    effects.consume(code)\n    return tagOpenAttributeValueQuoted\n  }\n\n  /**\n   * In unquoted attribute value.\n   *\n   * ```markdown\n   * > | a <b c=d> e\n   *            ^\n   * ```\n   *\n   * @type {State}\n   */\n  function tagOpenAttributeValueUnquoted(code) {\n    if (\n      code === null ||\n      code === 34 ||\n      code === 39 ||\n      code === 60 ||\n      code === 61 ||\n      code === 96\n    ) {\n      return nok(code)\n    }\n    if (code === 47 || code === 62 || markdownLineEndingOrSpace(code)) {\n      return tagOpenBetween(code)\n    }\n    effects.consume(code)\n    return tagOpenAttributeValueUnquoted\n  }\n\n  /**\n   * After double or single quoted attribute value, before whitespace or the end\n   * of the tag.\n   *\n   * ```markdown\n   * > | a <b c=\"d\"> e\n   *               ^\n   * ```\n   *\n   * @type {State}\n   */\n  function tagOpenAttributeValueQuotedAfter(code) {\n    if (code === 47 || code === 62 || markdownLineEndingOrSpace(code)) {\n      return tagOpenBetween(code)\n    }\n    return nok(code)\n  }\n\n  /**\n   * In certain circumstances of a tag where only an `>` is allowed.\n   *\n   * ```markdown\n   * > | a <b c=\"d\"> e\n   *               ^\n   * ```\n   *\n   * @type {State}\n   */\n  function end(code) {\n    if (code === 62) {\n      effects.consume(code)\n      effects.exit('htmlTextData')\n      effects.exit('htmlText')\n      return ok\n    }\n    return nok(code)\n  }\n\n  /**\n   * At eol.\n   *\n   * > 👉 **Note**: we can’t have blank lines in text, so no need to worry about\n   * > empty tokens.\n   *\n   * ```markdown\n   * > | a <!--a\n   *            ^\n   *   | b-->\n   * ```\n   *\n   * @type {State}\n   */\n  function lineEndingBefore(code) {\n    effects.exit('htmlTextData')\n    effects.enter('lineEnding')\n    effects.consume(code)\n    effects.exit('lineEnding')\n    return lineEndingAfter\n  }\n\n  /**\n   * After eol, at optional whitespace.\n   *\n   * > 👉 **Note**: we can’t have blank lines in text, so no need to worry about\n   * > empty tokens.\n   *\n   * ```markdown\n   *   | a <!--a\n   * > | b-->\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function lineEndingAfter(code) {\n    // Always populated by defaults.\n\n    return markdownSpace(code)\n      ? factorySpace(\n          effects,\n          lineEndingAfterPrefix,\n          'linePrefix',\n          self.parser.constructs.disable.null.includes('codeIndented')\n            ? undefined\n            : 4\n        )(code)\n      : lineEndingAfterPrefix(code)\n  }\n\n  /**\n   * After eol, after optional whitespace.\n   *\n   * > 👉 **Note**: we can’t have blank lines in text, so no need to worry about\n   * > empty tokens.\n   *\n   * ```markdown\n   *   | a <!--a\n   * > | b-->\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function lineEndingAfterPrefix(code) {\n    effects.enter('htmlTextData')\n    return returnState(code)\n  }\n}\n","/**\n * @typedef {import('micromark-util-types').Construct} Construct\n * @typedef {import('micromark-util-types').State} State\n * @typedef {import('micromark-util-types').TokenizeContext} TokenizeContext\n * @typedef {import('micromark-util-types').Tokenizer} Tokenizer\n */\n\nimport {labelEnd} from './label-end.js'\n\n/** @type {Construct} */\nexport const labelStartLink = {\n  name: 'labelStartLink',\n  tokenize: tokenizeLabelStartLink,\n  resolveAll: labelEnd.resolveAll\n}\n\n/**\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeLabelStartLink(effects, ok, nok) {\n  const self = this\n  return start\n\n  /**\n   * Start of label (link) start.\n   *\n   * ```markdown\n   * > | a [b] c\n   *       ^\n   * ```\n   *\n   * @type {State}\n   */\n  function start(code) {\n    effects.enter('labelLink')\n    effects.enter('labelMarker')\n    effects.consume(code)\n    effects.exit('labelMarker')\n    effects.exit('labelLink')\n    return after\n  }\n\n  /** @type {State} */\n  function after(code) {\n    // To do: this isn’t needed in `micromark-extension-gfm-footnote`,\n    // remove.\n    // Hidden footnotes hook.\n    /* c8 ignore next 3 */\n    return code === 94 && '_hiddenFootnoteSupport' in self.parser.constructs\n      ? nok(code)\n      : ok(code)\n  }\n}\n","/**\n * @typedef {import('micromark-util-types').Construct} Construct\n * @typedef {import('micromark-util-types').State} State\n * @typedef {import('micromark-util-types').TokenizeContext} TokenizeContext\n * @typedef {import('micromark-util-types').Tokenizer} Tokenizer\n */\n\nimport {markdownLineEnding} from 'micromark-util-character'\n/** @type {Construct} */\nexport const hardBreakEscape = {\n  name: 'hardBreakEscape',\n  tokenize: tokenizeHardBreakEscape\n}\n\n/**\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeHardBreakEscape(effects, ok, nok) {\n  return start\n\n  /**\n   * Start of a hard break (escape).\n   *\n   * ```markdown\n   * > | a\\\n   *      ^\n   *   | b\n   * ```\n   *\n   * @type {State}\n   */\n  function start(code) {\n    effects.enter('hardBreakEscape')\n    effects.consume(code)\n    return after\n  }\n\n  /**\n   * After `\\`, at eol.\n   *\n   * ```markdown\n   * > | a\\\n   *       ^\n   *   | b\n   * ```\n   *\n   *  @type {State}\n   */\n  function after(code) {\n    if (markdownLineEnding(code)) {\n      effects.exit('hardBreakEscape')\n      return ok(code)\n    }\n    return nok(code)\n  }\n}\n","/**\n * @typedef {import('micromark-util-types').Construct} Construct\n * @typedef {import('micromark-util-types').Previous} Previous\n * @typedef {import('micromark-util-types').Resolver} Resolver\n * @typedef {import('micromark-util-types').State} State\n * @typedef {import('micromark-util-types').Token} Token\n * @typedef {import('micromark-util-types').TokenizeContext} TokenizeContext\n * @typedef {import('micromark-util-types').Tokenizer} Tokenizer\n */\n\nimport {markdownLineEnding} from 'micromark-util-character'\n/** @type {Construct} */\nexport const codeText = {\n  name: 'codeText',\n  tokenize: tokenizeCodeText,\n  resolve: resolveCodeText,\n  previous\n}\n\n// To do: next major: don’t resolve, like `markdown-rs`.\n/** @type {Resolver} */\nfunction resolveCodeText(events) {\n  let tailExitIndex = events.length - 4\n  let headEnterIndex = 3\n  /** @type {number} */\n  let index\n  /** @type {number | undefined} */\n  let enter\n\n  // If we start and end with an EOL or a space.\n  if (\n    (events[headEnterIndex][1].type === 'lineEnding' ||\n      events[headEnterIndex][1].type === 'space') &&\n    (events[tailExitIndex][1].type === 'lineEnding' ||\n      events[tailExitIndex][1].type === 'space')\n  ) {\n    index = headEnterIndex\n\n    // And we have data.\n    while (++index < tailExitIndex) {\n      if (events[index][1].type === 'codeTextData') {\n        // Then we have padding.\n        events[headEnterIndex][1].type = 'codeTextPadding'\n        events[tailExitIndex][1].type = 'codeTextPadding'\n        headEnterIndex += 2\n        tailExitIndex -= 2\n        break\n      }\n    }\n  }\n\n  // Merge adjacent spaces and data.\n  index = headEnterIndex - 1\n  tailExitIndex++\n  while (++index <= tailExitIndex) {\n    if (enter === undefined) {\n      if (index !== tailExitIndex && events[index][1].type !== 'lineEnding') {\n        enter = index\n      }\n    } else if (\n      index === tailExitIndex ||\n      events[index][1].type === 'lineEnding'\n    ) {\n      events[enter][1].type = 'codeTextData'\n      if (index !== enter + 2) {\n        events[enter][1].end = events[index - 1][1].end\n        events.splice(enter + 2, index - enter - 2)\n        tailExitIndex -= index - enter - 2\n        index = enter + 2\n      }\n      enter = undefined\n    }\n  }\n  return events\n}\n\n/**\n * @this {TokenizeContext}\n * @type {Previous}\n */\nfunction previous(code) {\n  // If there is a previous code, there will always be a tail.\n  return (\n    code !== 96 ||\n    this.events[this.events.length - 1][1].type === 'characterEscape'\n  )\n}\n\n/**\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeCodeText(effects, ok, nok) {\n  const self = this\n  let sizeOpen = 0\n  /** @type {number} */\n  let size\n  /** @type {Token} */\n  let token\n  return start\n\n  /**\n   * Start of code (text).\n   *\n   * ```markdown\n   * > | `a`\n   *     ^\n   * > | \\`a`\n   *      ^\n   * ```\n   *\n   * @type {State}\n   */\n  function start(code) {\n    effects.enter('codeText')\n    effects.enter('codeTextSequence')\n    return sequenceOpen(code)\n  }\n\n  /**\n   * In opening sequence.\n   *\n   * ```markdown\n   * > | `a`\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function sequenceOpen(code) {\n    if (code === 96) {\n      effects.consume(code)\n      sizeOpen++\n      return sequenceOpen\n    }\n    effects.exit('codeTextSequence')\n    return between(code)\n  }\n\n  /**\n   * Between something and something else.\n   *\n   * ```markdown\n   * > | `a`\n   *      ^^\n   * ```\n   *\n   * @type {State}\n   */\n  function between(code) {\n    // EOF.\n    if (code === null) {\n      return nok(code)\n    }\n\n    // To do: next major: don’t do spaces in resolve, but when compiling,\n    // like `markdown-rs`.\n    // Tabs don’t work, and virtual spaces don’t make sense.\n    if (code === 32) {\n      effects.enter('space')\n      effects.consume(code)\n      effects.exit('space')\n      return between\n    }\n\n    // Closing fence? Could also be data.\n    if (code === 96) {\n      token = effects.enter('codeTextSequence')\n      size = 0\n      return sequenceClose(code)\n    }\n    if (markdownLineEnding(code)) {\n      effects.enter('lineEnding')\n      effects.consume(code)\n      effects.exit('lineEnding')\n      return between\n    }\n\n    // Data.\n    effects.enter('codeTextData')\n    return data(code)\n  }\n\n  /**\n   * In data.\n   *\n   * ```markdown\n   * > | `a`\n   *      ^\n   * ```\n   *\n   * @type {State}\n   */\n  function data(code) {\n    if (\n      code === null ||\n      code === 32 ||\n      code === 96 ||\n      markdownLineEnding(code)\n    ) {\n      effects.exit('codeTextData')\n      return between(code)\n    }\n    effects.consume(code)\n    return data\n  }\n\n  /**\n   * In closing sequence.\n   *\n   * ```markdown\n   * > | `a`\n   *       ^\n   * ```\n   *\n   * @type {State}\n   */\n  function sequenceClose(code) {\n    // More.\n    if (code === 96) {\n      effects.consume(code)\n      size++\n      return sequenceClose\n    }\n\n    // Done!\n    if (size === sizeOpen) {\n      effects.exit('codeTextSequence')\n      effects.exit('codeText')\n      return ok(code)\n    }\n\n    // More or less accents: mark as data.\n    token.type = 'codeTextData'\n    return data(code)\n  }\n}\n","/**\n * @typedef {import('micromark-util-types').Extension} Extension\n */\n\nimport {\n  attention,\n  autolink,\n  blockQuote,\n  characterEscape,\n  characterReference,\n  codeFenced,\n  codeIndented,\n  codeText,\n  definition,\n  hardBreakEscape,\n  headingAtx,\n  htmlFlow,\n  htmlText,\n  labelEnd,\n  labelStartImage,\n  labelStartLink,\n  lineEnding,\n  list,\n  setextUnderline,\n  thematicBreak\n} from 'micromark-core-commonmark'\nimport {resolver as resolveText} from './initialize/text.js'\n\n/** @satisfies {Extension['document']} */\nexport const document = {\n  [42]: list,\n  [43]: list,\n  [45]: list,\n  [48]: list,\n  [49]: list,\n  [50]: list,\n  [51]: list,\n  [52]: list,\n  [53]: list,\n  [54]: list,\n  [55]: list,\n  [56]: list,\n  [57]: list,\n  [62]: blockQuote\n}\n\n/** @satisfies {Extension['contentInitial']} */\nexport const contentInitial = {\n  [91]: definition\n}\n\n/** @satisfies {Extension['flowInitial']} */\nexport const flowInitial = {\n  [-2]: codeIndented,\n  [-1]: codeIndented,\n  [32]: codeIndented\n}\n\n/** @satisfies {Extension['flow']} */\nexport const flow = {\n  [35]: headingAtx,\n  [42]: thematicBreak,\n  [45]: [setextUnderline, thematicBreak],\n  [60]: htmlFlow,\n  [61]: setextUnderline,\n  [95]: thematicBreak,\n  [96]: codeFenced,\n  [126]: codeFenced\n}\n\n/** @satisfies {Extension['string']} */\nexport const string = {\n  [38]: characterReference,\n  [92]: characterEscape\n}\n\n/** @satisfies {Extension['text']} */\nexport const text = {\n  [-5]: lineEnding,\n  [-4]: lineEnding,\n  [-3]: lineEnding,\n  [33]: labelStartImage,\n  [38]: characterReference,\n  [42]: attention,\n  [60]: [autolink, htmlText],\n  [91]: labelStartLink,\n  [92]: [hardBreakEscape, characterEscape],\n  [93]: labelEnd,\n  [95]: attention,\n  [96]: codeText\n}\n\n/** @satisfies {Extension['insideSpan']} */\nexport const insideSpan = {\n  null: [attention, resolveText]\n}\n\n/** @satisfies {Extension['attentionMarkers']} */\nexport const attentionMarkers = {\n  null: [42, 95]\n}\n\n/** @satisfies {Extension['disable']} */\nexport const disable = {\n  null: []\n}\n","/**\n * @typedef {import('micromark-util-types').Create} Create\n * @typedef {import('micromark-util-types').FullNormalizedExtension} FullNormalizedExtension\n * @typedef {import('micromark-util-types').InitialConstruct} InitialConstruct\n * @typedef {import('micromark-util-types').ParseContext} ParseContext\n * @typedef {import('micromark-util-types').ParseOptions} ParseOptions\n */\n\nimport {combineExtensions} from 'micromark-util-combine-extensions'\nimport {content} from './initialize/content.js'\nimport {document} from './initialize/document.js'\nimport {flow} from './initialize/flow.js'\nimport {string, text} from './initialize/text.js'\nimport {createTokenizer} from './create-tokenizer.js'\nimport * as defaultConstructs from './constructs.js'\n\n/**\n * @param {ParseOptions | null | undefined} [options]\n * @returns {ParseContext}\n */\nexport function parse(options) {\n  const settings = options || {}\n  const constructs =\n    /** @type {FullNormalizedExtension} */\n    combineExtensions([defaultConstructs, ...(settings.extensions || [])])\n\n  /** @type {ParseContext} */\n  const parser = {\n    defined: [],\n    lazy: {},\n    constructs,\n    content: create(content),\n    document: create(document),\n    flow: create(flow),\n    string: create(string),\n    text: create(text)\n  }\n  return parser\n\n  /**\n   * @param {InitialConstruct} initial\n   */\n  function create(initial) {\n    return creator\n    /** @type {Create} */\n    function creator(from) {\n      return createTokenizer(parser, initial, from)\n    }\n  }\n}\n","/**\n * @typedef {import('micromark-util-types').Chunk} Chunk\n * @typedef {import('micromark-util-types').Code} Code\n * @typedef {import('micromark-util-types').Encoding} Encoding\n * @typedef {import('micromark-util-types').Value} Value\n */\n\n/**\n * @callback Preprocessor\n * @param {Value} value\n * @param {Encoding | null | undefined} [encoding]\n * @param {boolean | null | undefined} [end=false]\n * @returns {Array<Chunk>}\n */\n\nconst search = /[\\0\\t\\n\\r]/g\n\n/**\n * @returns {Preprocessor}\n */\nexport function preprocess() {\n  let column = 1\n  let buffer = ''\n  /** @type {boolean | undefined} */\n  let start = true\n  /** @type {boolean | undefined} */\n  let atCarriageReturn\n  return preprocessor\n\n  /** @type {Preprocessor} */\n  // eslint-disable-next-line complexity\n  function preprocessor(value, encoding, end) {\n    /** @type {Array<Chunk>} */\n    const chunks = []\n    /** @type {RegExpMatchArray | null} */\n    let match\n    /** @type {number} */\n    let next\n    /** @type {number} */\n    let startPosition\n    /** @type {number} */\n    let endPosition\n    /** @type {Code} */\n    let code\n    value =\n      buffer +\n      (typeof value === 'string'\n        ? value.toString()\n        : new TextDecoder(encoding || undefined).decode(value))\n    startPosition = 0\n    buffer = ''\n    if (start) {\n      // To do: `markdown-rs` actually parses BOMs (byte order mark).\n      if (value.charCodeAt(0) === 65279) {\n        startPosition++\n      }\n      start = undefined\n    }\n    while (startPosition < value.length) {\n      search.lastIndex = startPosition\n      match = search.exec(value)\n      endPosition =\n        match && match.index !== undefined ? match.index : value.length\n      code = value.charCodeAt(endPosition)\n      if (!match) {\n        buffer = value.slice(startPosition)\n        break\n      }\n      if (code === 10 && startPosition === endPosition && atCarriageReturn) {\n        chunks.push(-3)\n        atCarriageReturn = undefined\n      } else {\n        if (atCarriageReturn) {\n          chunks.push(-5)\n          atCarriageReturn = undefined\n        }\n        if (startPosition < endPosition) {\n          chunks.push(value.slice(startPosition, endPosition))\n          column += endPosition - startPosition\n        }\n        switch (code) {\n          case 0: {\n            chunks.push(65533)\n            column++\n            break\n          }\n          case 9: {\n            next = Math.ceil(column / 4) * 4\n            chunks.push(-2)\n            while (column++ < next) chunks.push(-1)\n            break\n          }\n          case 10: {\n            chunks.push(-4)\n            column = 1\n            break\n          }\n          default: {\n            atCarriageReturn = true\n            column = 1\n          }\n        }\n      }\n      startPosition = endPosition + 1\n    }\n    if (end) {\n      if (atCarriageReturn) chunks.push(-5)\n      if (buffer) chunks.push(buffer)\n      chunks.push(null)\n    }\n    return chunks\n  }\n}\n","/**\n * Turn the number (in string form as either hexa- or plain decimal) coming from\n * a numeric character reference into a character.\n *\n * Sort of like `String.fromCharCode(Number.parseInt(value, base))`, but makes\n * non-characters and control characters safe.\n *\n * @param {string} value\n *   Value to decode.\n * @param {number} base\n *   Numeric base.\n * @returns {string}\n *   Character.\n */\nexport function decodeNumericCharacterReference(value, base) {\n  const code = Number.parseInt(value, base)\n  if (\n    // C0 except for HT, LF, FF, CR, space.\n    code < 9 ||\n    code === 11 ||\n    (code > 13 && code < 32) ||\n    // Control character (DEL) of C0, and C1 controls.\n    (code > 126 && code < 160) ||\n    // Lone high surrogates and low surrogates.\n    (code > 55_295 && code < 57_344) ||\n    // Noncharacters.\n    (code > 64_975 && code < 65_008) /* eslint-disable no-bitwise */ ||\n    (code & 65_535) === 65_535 ||\n    (code & 65_535) === 65_534 /* eslint-enable no-bitwise */ ||\n    // Out of range\n    code > 1_114_111\n  ) {\n    return '\\uFFFD'\n  }\n  return String.fromCharCode(code)\n}\n","import {decodeNamedCharacterReference} from 'decode-named-character-reference'\nimport {decodeNumericCharacterReference} from 'micromark-util-decode-numeric-character-reference'\nconst characterEscapeOrReference =\n  /\\\\([!-/:-@[-`{-~])|&(#(?:\\d{1,7}|x[\\da-f]{1,6})|[\\da-z]{1,31});/gi\n\n/**\n * Decode markdown strings (which occur in places such as fenced code info\n * strings, destinations, labels, and titles).\n *\n * The “string” content type allows character escapes and -references.\n * This decodes those.\n *\n * @param {string} value\n *   Value to decode.\n * @returns {string}\n *   Decoded value.\n */\nexport function decodeString(value) {\n  return value.replace(characterEscapeOrReference, decode)\n}\n\n/**\n * @param {string} $0\n * @param {string} $1\n * @param {string} $2\n * @returns {string}\n */\nfunction decode($0, $1, $2) {\n  if ($1) {\n    // Escape.\n    return $1\n  }\n\n  // Reference.\n  const head = $2.charCodeAt(0)\n  if (head === 35) {\n    const head = $2.charCodeAt(1)\n    const hex = head === 120 || head === 88\n    return decodeNumericCharacterReference($2.slice(hex ? 2 : 1), hex ? 16 : 10)\n  }\n  return decodeNamedCharacterReference($2) || $0\n}\n","/**\n * @typedef {import('mdast').Break} Break\n * @typedef {import('mdast').Blockquote} Blockquote\n * @typedef {import('mdast').Code} Code\n * @typedef {import('mdast').Definition} Definition\n * @typedef {import('mdast').Emphasis} Emphasis\n * @typedef {import('mdast').Heading} Heading\n * @typedef {import('mdast').Html} Html\n * @typedef {import('mdast').Image} Image\n * @typedef {import('mdast').InlineCode} InlineCode\n * @typedef {import('mdast').Link} Link\n * @typedef {import('mdast').List} List\n * @typedef {import('mdast').ListItem} ListItem\n * @typedef {import('mdast').Nodes} Nodes\n * @typedef {import('mdast').Paragraph} Paragraph\n * @typedef {import('mdast').Parent} Parent\n * @typedef {import('mdast').PhrasingContent} PhrasingContent\n * @typedef {import('mdast').ReferenceType} ReferenceType\n * @typedef {import('mdast').Root} Root\n * @typedef {import('mdast').Strong} Strong\n * @typedef {import('mdast').Text} Text\n * @typedef {import('mdast').ThematicBreak} ThematicBreak\n *\n * @typedef {import('micromark-util-types').Encoding} Encoding\n * @typedef {import('micromark-util-types').Event} Event\n * @typedef {import('micromark-util-types').ParseOptions} ParseOptions\n * @typedef {import('micromark-util-types').Token} Token\n * @typedef {import('micromark-util-types').TokenizeContext} TokenizeContext\n * @typedef {import('micromark-util-types').Value} Value\n *\n * @typedef {import('unist').Point} Point\n *\n * @typedef {import('../index.js').CompileData} CompileData\n */\n\n/**\n * @typedef {Omit<Parent, 'children' | 'type'> & {type: 'fragment', children: Array<PhrasingContent>}} Fragment\n */\n\n/**\n * @callback Transform\n *   Extra transform, to change the AST afterwards.\n * @param {Root} tree\n *   Tree to transform.\n * @returns {Root | null | undefined | void}\n *   New tree or nothing (in which case the current tree is used).\n *\n * @callback Handle\n *   Handle a token.\n * @param {CompileContext} this\n *   Context.\n * @param {Token} token\n *   Current token.\n * @returns {undefined | void}\n *   Nothing.\n *\n * @typedef {Record<string, Handle>} Handles\n *   Token types mapping to handles\n *\n * @callback OnEnterError\n *   Handle the case where the `right` token is open, but it is closed (by the\n *   `left` token) or because we reached the end of the document.\n * @param {Omit<CompileContext, 'sliceSerialize'>} this\n *   Context.\n * @param {Token | undefined} left\n *   Left token.\n * @param {Token} right\n *   Right token.\n * @returns {undefined}\n *   Nothing.\n *\n * @callback OnExitError\n *   Handle the case where the `right` token is open but it is closed by\n *   exiting the `left` token.\n * @param {Omit<CompileContext, 'sliceSerialize'>} this\n *   Context.\n * @param {Token} left\n *   Left token.\n * @param {Token} right\n *   Right token.\n * @returns {undefined}\n *   Nothing.\n *\n * @typedef {[Token, OnEnterError | undefined]} TokenTuple\n *   Open token on the stack, with an optional error handler for when\n *   that token isn’t closed properly.\n */\n\n/**\n * @typedef Config\n *   Configuration.\n *\n *   We have our defaults, but extensions will add more.\n * @property {Array<string>} canContainEols\n *   Token types where line endings are used.\n * @property {Handles} enter\n *   Opening handles.\n * @property {Handles} exit\n *   Closing handles.\n * @property {Array<Transform>} transforms\n *   Tree transforms.\n *\n * @typedef {Partial<Config>} Extension\n *   Change how markdown tokens from micromark are turned into mdast.\n *\n * @typedef CompileContext\n *   mdast compiler context.\n * @property {Array<Fragment | Nodes>} stack\n *   Stack of nodes.\n * @property {Array<TokenTuple>} tokenStack\n *   Stack of tokens.\n * @property {(this: CompileContext) => undefined} buffer\n *   Capture some of the output data.\n * @property {(this: CompileContext) => string} resume\n *   Stop capturing and access the output data.\n * @property {(this: CompileContext, node: Nodes, token: Token, onError?: OnEnterError) => undefined} enter\n *   Enter a node.\n * @property {(this: CompileContext, token: Token, onError?: OnExitError) => undefined} exit\n *   Exit a node.\n * @property {TokenizeContext['sliceSerialize']} sliceSerialize\n *   Get the string value of a token.\n * @property {Config} config\n *   Configuration.\n * @property {CompileData} data\n *   Info passed around; key/value store.\n *\n * @typedef FromMarkdownOptions\n *   Configuration for how to build mdast.\n * @property {Array<Extension | Array<Extension>> | null | undefined} [mdastExtensions]\n *   Extensions for this utility to change how tokens are turned into a tree.\n *\n * @typedef {ParseOptions & FromMarkdownOptions} Options\n *   Configuration.\n */\n\nimport {toString} from 'mdast-util-to-string'\nimport {parse, postprocess, preprocess} from 'micromark'\nimport {decodeNumericCharacterReference} from 'micromark-util-decode-numeric-character-reference'\nimport {decodeString} from 'micromark-util-decode-string'\nimport {normalizeIdentifier} from 'micromark-util-normalize-identifier'\nimport {decodeNamedCharacterReference} from 'decode-named-character-reference'\nimport {stringifyPosition} from 'unist-util-stringify-position'\nconst own = {}.hasOwnProperty\n\n/**\n * Turn markdown into a syntax tree.\n *\n * @overload\n * @param {Value} value\n * @param {Encoding | null | undefined} [encoding]\n * @param {Options | null | undefined} [options]\n * @returns {Root}\n *\n * @overload\n * @param {Value} value\n * @param {Options | null | undefined} [options]\n * @returns {Root}\n *\n * @param {Value} value\n *   Markdown to parse.\n * @param {Encoding | Options | null | undefined} [encoding]\n *   Character encoding for when `value` is `Buffer`.\n * @param {Options | null | undefined} [options]\n *   Configuration.\n * @returns {Root}\n *   mdast tree.\n */\nexport function fromMarkdown(value, encoding, options) {\n  if (typeof encoding !== 'string') {\n    options = encoding\n    encoding = undefined\n  }\n  return compiler(options)(\n    postprocess(\n      parse(options).document().write(preprocess()(value, encoding, true))\n    )\n  )\n}\n\n/**\n * Note this compiler only understand complete buffering, not streaming.\n *\n * @param {Options | null | undefined} [options]\n */\nfunction compiler(options) {\n  /** @type {Config} */\n  const config = {\n    transforms: [],\n    canContainEols: ['emphasis', 'fragment', 'heading', 'paragraph', 'strong'],\n    enter: {\n      autolink: opener(link),\n      autolinkProtocol: onenterdata,\n      autolinkEmail: onenterdata,\n      atxHeading: opener(heading),\n      blockQuote: opener(blockQuote),\n      characterEscape: onenterdata,\n      characterReference: onenterdata,\n      codeFenced: opener(codeFlow),\n      codeFencedFenceInfo: buffer,\n      codeFencedFenceMeta: buffer,\n      codeIndented: opener(codeFlow, buffer),\n      codeText: opener(codeText, buffer),\n      codeTextData: onenterdata,\n      data: onenterdata,\n      codeFlowValue: onenterdata,\n      definition: opener(definition),\n      definitionDestinationString: buffer,\n      definitionLabelString: buffer,\n      definitionTitleString: buffer,\n      emphasis: opener(emphasis),\n      hardBreakEscape: opener(hardBreak),\n      hardBreakTrailing: opener(hardBreak),\n      htmlFlow: opener(html, buffer),\n      htmlFlowData: onenterdata,\n      htmlText: opener(html, buffer),\n      htmlTextData: onenterdata,\n      image: opener(image),\n      label: buffer,\n      link: opener(link),\n      listItem: opener(listItem),\n      listItemValue: onenterlistitemvalue,\n      listOrdered: opener(list, onenterlistordered),\n      listUnordered: opener(list),\n      paragraph: opener(paragraph),\n      reference: onenterreference,\n      referenceString: buffer,\n      resourceDestinationString: buffer,\n      resourceTitleString: buffer,\n      setextHeading: opener(heading),\n      strong: opener(strong),\n      thematicBreak: opener(thematicBreak)\n    },\n    exit: {\n      atxHeading: closer(),\n      atxHeadingSequence: onexitatxheadingsequence,\n      autolink: closer(),\n      autolinkEmail: onexitautolinkemail,\n      autolinkProtocol: onexitautolinkprotocol,\n      blockQuote: closer(),\n      characterEscapeValue: onexitdata,\n      characterReferenceMarkerHexadecimal: onexitcharacterreferencemarker,\n      characterReferenceMarkerNumeric: onexitcharacterreferencemarker,\n      characterReferenceValue: onexitcharacterreferencevalue,\n      codeFenced: closer(onexitcodefenced),\n      codeFencedFence: onexitcodefencedfence,\n      codeFencedFenceInfo: onexitcodefencedfenceinfo,\n      codeFencedFenceMeta: onexitcodefencedfencemeta,\n      codeFlowValue: onexitdata,\n      codeIndented: closer(onexitcodeindented),\n      codeText: closer(onexitcodetext),\n      codeTextData: onexitdata,\n      data: onexitdata,\n      definition: closer(),\n      definitionDestinationString: onexitdefinitiondestinationstring,\n      definitionLabelString: onexitdefinitionlabelstring,\n      definitionTitleString: onexitdefinitiontitlestring,\n      emphasis: closer(),\n      hardBreakEscape: closer(onexithardbreak),\n      hardBreakTrailing: closer(onexithardbreak),\n      htmlFlow: closer(onexithtmlflow),\n      htmlFlowData: onexitdata,\n      htmlText: closer(onexithtmltext),\n      htmlTextData: onexitdata,\n      image: closer(onexitimage),\n      label: onexitlabel,\n      labelText: onexitlabeltext,\n      lineEnding: onexitlineending,\n      link: closer(onexitlink),\n      listItem: closer(),\n      listOrdered: closer(),\n      listUnordered: closer(),\n      paragraph: closer(),\n      referenceString: onexitreferencestring,\n      resourceDestinationString: onexitresourcedestinationstring,\n      resourceTitleString: onexitresourcetitlestring,\n      resource: onexitresource,\n      setextHeading: closer(onexitsetextheading),\n      setextHeadingLineSequence: onexitsetextheadinglinesequence,\n      setextHeadingText: onexitsetextheadingtext,\n      strong: closer(),\n      thematicBreak: closer()\n    }\n  }\n  configure(config, (options || {}).mdastExtensions || [])\n\n  /** @type {CompileData} */\n  const data = {}\n  return compile\n\n  /**\n   * Turn micromark events into an mdast tree.\n   *\n   * @param {Array<Event>} events\n   *   Events.\n   * @returns {Root}\n   *   mdast tree.\n   */\n  function compile(events) {\n    /** @type {Root} */\n    let tree = {\n      type: 'root',\n      children: []\n    }\n    /** @type {Omit<CompileContext, 'sliceSerialize'>} */\n    const context = {\n      stack: [tree],\n      tokenStack: [],\n      config,\n      enter,\n      exit,\n      buffer,\n      resume,\n      data\n    }\n    /** @type {Array<number>} */\n    const listStack = []\n    let index = -1\n    while (++index < events.length) {\n      // We preprocess lists to add `listItem` tokens, and to infer whether\n      // items the list itself are spread out.\n      if (\n        events[index][1].type === 'listOrdered' ||\n        events[index][1].type === 'listUnordered'\n      ) {\n        if (events[index][0] === 'enter') {\n          listStack.push(index)\n        } else {\n          const tail = listStack.pop()\n          index = prepareList(events, tail, index)\n        }\n      }\n    }\n    index = -1\n    while (++index < events.length) {\n      const handler = config[events[index][0]]\n      if (own.call(handler, events[index][1].type)) {\n        handler[events[index][1].type].call(\n          Object.assign(\n            {\n              sliceSerialize: events[index][2].sliceSerialize\n            },\n            context\n          ),\n          events[index][1]\n        )\n      }\n    }\n\n    // Handle tokens still being open.\n    if (context.tokenStack.length > 0) {\n      const tail = context.tokenStack[context.tokenStack.length - 1]\n      const handler = tail[1] || defaultOnError\n      handler.call(context, undefined, tail[0])\n    }\n\n    // Figure out `root` position.\n    tree.position = {\n      start: point(\n        events.length > 0\n          ? events[0][1].start\n          : {\n              line: 1,\n              column: 1,\n              offset: 0\n            }\n      ),\n      end: point(\n        events.length > 0\n          ? events[events.length - 2][1].end\n          : {\n              line: 1,\n              column: 1,\n              offset: 0\n            }\n      )\n    }\n\n    // Call transforms.\n    index = -1\n    while (++index < config.transforms.length) {\n      tree = config.transforms[index](tree) || tree\n    }\n    return tree\n  }\n\n  /**\n   * @param {Array<Event>} events\n   * @param {number} start\n   * @param {number} length\n   * @returns {number}\n   */\n  function prepareList(events, start, length) {\n    let index = start - 1\n    let containerBalance = -1\n    let listSpread = false\n    /** @type {Token | undefined} */\n    let listItem\n    /** @type {number | undefined} */\n    let lineIndex\n    /** @type {number | undefined} */\n    let firstBlankLineIndex\n    /** @type {boolean | undefined} */\n    let atMarker\n    while (++index <= length) {\n      const event = events[index]\n      switch (event[1].type) {\n        case 'listUnordered':\n        case 'listOrdered':\n        case 'blockQuote': {\n          if (event[0] === 'enter') {\n            containerBalance++\n          } else {\n            containerBalance--\n          }\n          atMarker = undefined\n          break\n        }\n        case 'lineEndingBlank': {\n          if (event[0] === 'enter') {\n            if (\n              listItem &&\n              !atMarker &&\n              !containerBalance &&\n              !firstBlankLineIndex\n            ) {\n              firstBlankLineIndex = index\n            }\n            atMarker = undefined\n          }\n          break\n        }\n        case 'linePrefix':\n        case 'listItemValue':\n        case 'listItemMarker':\n        case 'listItemPrefix':\n        case 'listItemPrefixWhitespace': {\n          // Empty.\n\n          break\n        }\n        default: {\n          atMarker = undefined\n        }\n      }\n      if (\n        (!containerBalance &&\n          event[0] === 'enter' &&\n          event[1].type === 'listItemPrefix') ||\n        (containerBalance === -1 &&\n          event[0] === 'exit' &&\n          (event[1].type === 'listUnordered' ||\n            event[1].type === 'listOrdered'))\n      ) {\n        if (listItem) {\n          let tailIndex = index\n          lineIndex = undefined\n          while (tailIndex--) {\n            const tailEvent = events[tailIndex]\n            if (\n              tailEvent[1].type === 'lineEnding' ||\n              tailEvent[1].type === 'lineEndingBlank'\n            ) {\n              if (tailEvent[0] === 'exit') continue\n              if (lineIndex) {\n                events[lineIndex][1].type = 'lineEndingBlank'\n                listSpread = true\n              }\n              tailEvent[1].type = 'lineEnding'\n              lineIndex = tailIndex\n            } else if (\n              tailEvent[1].type === 'linePrefix' ||\n              tailEvent[1].type === 'blockQuotePrefix' ||\n              tailEvent[1].type === 'blockQuotePrefixWhitespace' ||\n              tailEvent[1].type === 'blockQuoteMarker' ||\n              tailEvent[1].type === 'listItemIndent'\n            ) {\n              // Empty\n            } else {\n              break\n            }\n          }\n          if (\n            firstBlankLineIndex &&\n            (!lineIndex || firstBlankLineIndex < lineIndex)\n          ) {\n            listItem._spread = true\n          }\n\n          // Fix position.\n          listItem.end = Object.assign(\n            {},\n            lineIndex ? events[lineIndex][1].start : event[1].end\n          )\n          events.splice(lineIndex || index, 0, ['exit', listItem, event[2]])\n          index++\n          length++\n        }\n\n        // Create a new list item.\n        if (event[1].type === 'listItemPrefix') {\n          /** @type {Token} */\n          const item = {\n            type: 'listItem',\n            _spread: false,\n            start: Object.assign({}, event[1].start),\n            // @ts-expect-error: we’ll add `end` in a second.\n            end: undefined\n          }\n          listItem = item\n          events.splice(index, 0, ['enter', item, event[2]])\n          index++\n          length++\n          firstBlankLineIndex = undefined\n          atMarker = true\n        }\n      }\n    }\n    events[start][1]._spread = listSpread\n    return length\n  }\n\n  /**\n   * Create an opener handle.\n   *\n   * @param {(token: Token) => Nodes} create\n   *   Create a node.\n   * @param {Handle | undefined} [and]\n   *   Optional function to also run.\n   * @returns {Handle}\n   *   Handle.\n   */\n  function opener(create, and) {\n    return open\n\n    /**\n     * @this {CompileContext}\n     * @param {Token} token\n     * @returns {undefined}\n     */\n    function open(token) {\n      enter.call(this, create(token), token)\n      if (and) and.call(this, token)\n    }\n  }\n\n  /**\n   * @this {CompileContext}\n   * @returns {undefined}\n   */\n  function buffer() {\n    this.stack.push({\n      type: 'fragment',\n      children: []\n    })\n  }\n\n  /**\n   * @this {CompileContext}\n   *   Context.\n   * @param {Nodes} node\n   *   Node to enter.\n   * @param {Token} token\n   *   Corresponding token.\n   * @param {OnEnterError | undefined} [errorHandler]\n   *   Handle the case where this token is open, but it is closed by something else.\n   * @returns {undefined}\n   *   Nothing.\n   */\n  function enter(node, token, errorHandler) {\n    const parent = this.stack[this.stack.length - 1]\n    /** @type {Array<Nodes>} */\n    const siblings = parent.children\n    siblings.push(node)\n    this.stack.push(node)\n    this.tokenStack.push([token, errorHandler])\n    node.position = {\n      start: point(token.start),\n      // @ts-expect-error: `end` will be patched later.\n      end: undefined\n    }\n  }\n\n  /**\n   * Create a closer handle.\n   *\n   * @param {Handle | undefined} [and]\n   *   Optional function to also run.\n   * @returns {Handle}\n   *   Handle.\n   */\n  function closer(and) {\n    return close\n\n    /**\n     * @this {CompileContext}\n     * @param {Token} token\n     * @returns {undefined}\n     */\n    function close(token) {\n      if (and) and.call(this, token)\n      exit.call(this, token)\n    }\n  }\n\n  /**\n   * @this {CompileContext}\n   *   Context.\n   * @param {Token} token\n   *   Corresponding token.\n   * @param {OnExitError | undefined} [onExitError]\n   *   Handle the case where another token is open.\n   * @returns {undefined}\n   *   Nothing.\n   */\n  function exit(token, onExitError) {\n    const node = this.stack.pop()\n    const open = this.tokenStack.pop()\n    if (!open) {\n      throw new Error(\n        'Cannot close `' +\n          token.type +\n          '` (' +\n          stringifyPosition({\n            start: token.start,\n            end: token.end\n          }) +\n          '): it’s not open'\n      )\n    } else if (open[0].type !== token.type) {\n      if (onExitError) {\n        onExitError.call(this, token, open[0])\n      } else {\n        const handler = open[1] || defaultOnError\n        handler.call(this, token, open[0])\n      }\n    }\n    node.position.end = point(token.end)\n  }\n\n  /**\n   * @this {CompileContext}\n   * @returns {string}\n   */\n  function resume() {\n    return toString(this.stack.pop())\n  }\n\n  //\n  // Handlers.\n  //\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n  function onenterlistordered() {\n    this.data.expectingFirstListItemValue = true\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n  function onenterlistitemvalue(token) {\n    if (this.data.expectingFirstListItemValue) {\n      const ancestor = this.stack[this.stack.length - 2]\n      ancestor.start = Number.parseInt(this.sliceSerialize(token), 10)\n      this.data.expectingFirstListItemValue = undefined\n    }\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n  function onexitcodefencedfenceinfo() {\n    const data = this.resume()\n    const node = this.stack[this.stack.length - 1]\n    node.lang = data\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n  function onexitcodefencedfencemeta() {\n    const data = this.resume()\n    const node = this.stack[this.stack.length - 1]\n    node.meta = data\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n  function onexitcodefencedfence() {\n    // Exit if this is the closing fence.\n    if (this.data.flowCodeInside) return\n    this.buffer()\n    this.data.flowCodeInside = true\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n  function onexitcodefenced() {\n    const data = this.resume()\n    const node = this.stack[this.stack.length - 1]\n    node.value = data.replace(/^(\\r?\\n|\\r)|(\\r?\\n|\\r)$/g, '')\n    this.data.flowCodeInside = undefined\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n  function onexitcodeindented() {\n    const data = this.resume()\n    const node = this.stack[this.stack.length - 1]\n    node.value = data.replace(/(\\r?\\n|\\r)$/g, '')\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n  function onexitdefinitionlabelstring(token) {\n    const label = this.resume()\n    const node = this.stack[this.stack.length - 1]\n    node.label = label\n    node.identifier = normalizeIdentifier(\n      this.sliceSerialize(token)\n    ).toLowerCase()\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n  function onexitdefinitiontitlestring() {\n    const data = this.resume()\n    const node = this.stack[this.stack.length - 1]\n    node.title = data\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n  function onexitdefinitiondestinationstring() {\n    const data = this.resume()\n    const node = this.stack[this.stack.length - 1]\n    node.url = data\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n  function onexitatxheadingsequence(token) {\n    const node = this.stack[this.stack.length - 1]\n    if (!node.depth) {\n      const depth = this.sliceSerialize(token).length\n      node.depth = depth\n    }\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n  function onexitsetextheadingtext() {\n    this.data.setextHeadingSlurpLineEnding = true\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n  function onexitsetextheadinglinesequence(token) {\n    const node = this.stack[this.stack.length - 1]\n    node.depth = this.sliceSerialize(token).codePointAt(0) === 61 ? 1 : 2\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n  function onexitsetextheading() {\n    this.data.setextHeadingSlurpLineEnding = undefined\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n\n  function onenterdata(token) {\n    const node = this.stack[this.stack.length - 1]\n    /** @type {Array<Nodes>} */\n    const siblings = node.children\n    let tail = siblings[siblings.length - 1]\n    if (!tail || tail.type !== 'text') {\n      // Add a new text node.\n      tail = text()\n      tail.position = {\n        start: point(token.start),\n        // @ts-expect-error: we’ll add `end` later.\n        end: undefined\n      }\n      siblings.push(tail)\n    }\n    this.stack.push(tail)\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n\n  function onexitdata(token) {\n    const tail = this.stack.pop()\n    tail.value += this.sliceSerialize(token)\n    tail.position.end = point(token.end)\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n\n  function onexitlineending(token) {\n    const context = this.stack[this.stack.length - 1]\n    // If we’re at a hard break, include the line ending in there.\n    if (this.data.atHardBreak) {\n      const tail = context.children[context.children.length - 1]\n      tail.position.end = point(token.end)\n      this.data.atHardBreak = undefined\n      return\n    }\n    if (\n      !this.data.setextHeadingSlurpLineEnding &&\n      config.canContainEols.includes(context.type)\n    ) {\n      onenterdata.call(this, token)\n      onexitdata.call(this, token)\n    }\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n\n  function onexithardbreak() {\n    this.data.atHardBreak = true\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n\n  function onexithtmlflow() {\n    const data = this.resume()\n    const node = this.stack[this.stack.length - 1]\n    node.value = data\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n\n  function onexithtmltext() {\n    const data = this.resume()\n    const node = this.stack[this.stack.length - 1]\n    node.value = data\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n\n  function onexitcodetext() {\n    const data = this.resume()\n    const node = this.stack[this.stack.length - 1]\n    node.value = data\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n\n  function onexitlink() {\n    const node = this.stack[this.stack.length - 1]\n    // Note: there are also `identifier` and `label` fields on this link node!\n    // These are used / cleaned here.\n    // To do: clean.\n    if (this.data.inReference) {\n      /** @type {ReferenceType} */\n      const referenceType = this.data.referenceType || 'shortcut'\n      node.type += 'Reference'\n      // @ts-expect-error: mutate.\n      node.referenceType = referenceType\n      // @ts-expect-error: mutate.\n      delete node.url\n      delete node.title\n    } else {\n      // @ts-expect-error: mutate.\n      delete node.identifier\n      // @ts-expect-error: mutate.\n      delete node.label\n    }\n    this.data.referenceType = undefined\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n\n  function onexitimage() {\n    const node = this.stack[this.stack.length - 1]\n    // Note: there are also `identifier` and `label` fields on this link node!\n    // These are used / cleaned here.\n    // To do: clean.\n    if (this.data.inReference) {\n      /** @type {ReferenceType} */\n      const referenceType = this.data.referenceType || 'shortcut'\n      node.type += 'Reference'\n      // @ts-expect-error: mutate.\n      node.referenceType = referenceType\n      // @ts-expect-error: mutate.\n      delete node.url\n      delete node.title\n    } else {\n      // @ts-expect-error: mutate.\n      delete node.identifier\n      // @ts-expect-error: mutate.\n      delete node.label\n    }\n    this.data.referenceType = undefined\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n\n  function onexitlabeltext(token) {\n    const string = this.sliceSerialize(token)\n    const ancestor = this.stack[this.stack.length - 2]\n    // @ts-expect-error: stash this on the node, as it might become a reference\n    // later.\n    ancestor.label = decodeString(string)\n    // @ts-expect-error: same as above.\n    ancestor.identifier = normalizeIdentifier(string).toLowerCase()\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n\n  function onexitlabel() {\n    const fragment = this.stack[this.stack.length - 1]\n    const value = this.resume()\n    const node = this.stack[this.stack.length - 1]\n    // Assume a reference.\n    this.data.inReference = true\n    if (node.type === 'link') {\n      /** @type {Array<PhrasingContent>} */\n      const children = fragment.children\n      node.children = children\n    } else {\n      node.alt = value\n    }\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n\n  function onexitresourcedestinationstring() {\n    const data = this.resume()\n    const node = this.stack[this.stack.length - 1]\n    node.url = data\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n\n  function onexitresourcetitlestring() {\n    const data = this.resume()\n    const node = this.stack[this.stack.length - 1]\n    node.title = data\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n\n  function onexitresource() {\n    this.data.inReference = undefined\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n\n  function onenterreference() {\n    this.data.referenceType = 'collapsed'\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n\n  function onexitreferencestring(token) {\n    const label = this.resume()\n    const node = this.stack[this.stack.length - 1]\n    // @ts-expect-error: stash this on the node, as it might become a reference\n    // later.\n    node.label = label\n    // @ts-expect-error: same as above.\n    node.identifier = normalizeIdentifier(\n      this.sliceSerialize(token)\n    ).toLowerCase()\n    this.data.referenceType = 'full'\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n\n  function onexitcharacterreferencemarker(token) {\n    this.data.characterReferenceType = token.type\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n  function onexitcharacterreferencevalue(token) {\n    const data = this.sliceSerialize(token)\n    const type = this.data.characterReferenceType\n    /** @type {string} */\n    let value\n    if (type) {\n      value = decodeNumericCharacterReference(\n        data,\n        type === 'characterReferenceMarkerNumeric' ? 10 : 16\n      )\n      this.data.characterReferenceType = undefined\n    } else {\n      const result = decodeNamedCharacterReference(data)\n      value = result\n    }\n    const tail = this.stack.pop()\n    tail.value += value\n    tail.position.end = point(token.end)\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n  function onexitautolinkprotocol(token) {\n    onexitdata.call(this, token)\n    const node = this.stack[this.stack.length - 1]\n    node.url = this.sliceSerialize(token)\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n  function onexitautolinkemail(token) {\n    onexitdata.call(this, token)\n    const node = this.stack[this.stack.length - 1]\n    node.url = 'mailto:' + this.sliceSerialize(token)\n  }\n\n  //\n  // Creaters.\n  //\n\n  /** @returns {Blockquote} */\n  function blockQuote() {\n    return {\n      type: 'blockquote',\n      children: []\n    }\n  }\n\n  /** @returns {Code} */\n  function codeFlow() {\n    return {\n      type: 'code',\n      lang: null,\n      meta: null,\n      value: ''\n    }\n  }\n\n  /** @returns {InlineCode} */\n  function codeText() {\n    return {\n      type: 'inlineCode',\n      value: ''\n    }\n  }\n\n  /** @returns {Definition} */\n  function definition() {\n    return {\n      type: 'definition',\n      identifier: '',\n      label: null,\n      title: null,\n      url: ''\n    }\n  }\n\n  /** @returns {Emphasis} */\n  function emphasis() {\n    return {\n      type: 'emphasis',\n      children: []\n    }\n  }\n\n  /** @returns {Heading} */\n  function heading() {\n    return {\n      type: 'heading',\n      // @ts-expect-error `depth` will be set later.\n      depth: 0,\n      children: []\n    }\n  }\n\n  /** @returns {Break} */\n  function hardBreak() {\n    return {\n      type: 'break'\n    }\n  }\n\n  /** @returns {Html} */\n  function html() {\n    return {\n      type: 'html',\n      value: ''\n    }\n  }\n\n  /** @returns {Image} */\n  function image() {\n    return {\n      type: 'image',\n      title: null,\n      url: '',\n      alt: null\n    }\n  }\n\n  /** @returns {Link} */\n  function link() {\n    return {\n      type: 'link',\n      title: null,\n      url: '',\n      children: []\n    }\n  }\n\n  /**\n   * @param {Token} token\n   * @returns {List}\n   */\n  function list(token) {\n    return {\n      type: 'list',\n      ordered: token.type === 'listOrdered',\n      start: null,\n      spread: token._spread,\n      children: []\n    }\n  }\n\n  /**\n   * @param {Token} token\n   * @returns {ListItem}\n   */\n  function listItem(token) {\n    return {\n      type: 'listItem',\n      spread: token._spread,\n      checked: null,\n      children: []\n    }\n  }\n\n  /** @returns {Paragraph} */\n  function paragraph() {\n    return {\n      type: 'paragraph',\n      children: []\n    }\n  }\n\n  /** @returns {Strong} */\n  function strong() {\n    return {\n      type: 'strong',\n      children: []\n    }\n  }\n\n  /** @returns {Text} */\n  function text() {\n    return {\n      type: 'text',\n      value: ''\n    }\n  }\n\n  /** @returns {ThematicBreak} */\n  function thematicBreak() {\n    return {\n      type: 'thematicBreak'\n    }\n  }\n}\n\n/**\n * Copy a point-like value.\n *\n * @param {Point} d\n *   Point-like value.\n * @returns {Point}\n *   unist point.\n */\nfunction point(d) {\n  return {\n    line: d.line,\n    column: d.column,\n    offset: d.offset\n  }\n}\n\n/**\n * @param {Config} combined\n * @param {Array<Array<Extension> | Extension>} extensions\n * @returns {undefined}\n */\nfunction configure(combined, extensions) {\n  let index = -1\n  while (++index < extensions.length) {\n    const value = extensions[index]\n    if (Array.isArray(value)) {\n      configure(combined, value)\n    } else {\n      extension(combined, value)\n    }\n  }\n}\n\n/**\n * @param {Config} combined\n * @param {Extension} extension\n * @returns {undefined}\n */\nfunction extension(combined, extension) {\n  /** @type {keyof Extension} */\n  let key\n  for (key in extension) {\n    if (own.call(extension, key)) {\n      switch (key) {\n        case 'canContainEols': {\n          const right = extension[key]\n          if (right) {\n            combined[key].push(...right)\n          }\n          break\n        }\n        case 'transforms': {\n          const right = extension[key]\n          if (right) {\n            combined[key].push(...right)\n          }\n          break\n        }\n        case 'enter':\n        case 'exit': {\n          const right = extension[key]\n          if (right) {\n            Object.assign(combined[key], right)\n          }\n          break\n        }\n        // No default\n      }\n    }\n  }\n}\n\n/** @type {OnEnterError} */\nfunction defaultOnError(left, right) {\n  if (left) {\n    throw new Error(\n      'Cannot close `' +\n        left.type +\n        '` (' +\n        stringifyPosition({\n          start: left.start,\n          end: left.end\n        }) +\n        '): a different token (`' +\n        right.type +\n        '`, ' +\n        stringifyPosition({\n          start: right.start,\n          end: right.end\n        }) +\n        ') is open'\n    )\n  } else {\n    throw new Error(\n      'Cannot close document, a token (`' +\n        right.type +\n        '`, ' +\n        stringifyPosition({\n          start: right.start,\n          end: right.end\n        }) +\n        ') is still open'\n    )\n  }\n}\n","/**\n * @typedef {import('micromark-util-types').Event} Event\n */\n\nimport {subtokenize} from 'micromark-util-subtokenize'\n\n/**\n * @param {Array<Event>} events\n * @returns {Array<Event>}\n */\nexport function postprocess(events) {\n  while (!subtokenize(events)) {\n    // Empty\n  }\n  return events\n}\n","/**\n * @typedef {import('mdast').Root} Root\n * @typedef {import('mdast-util-from-markdown').Options} FromMarkdownOptions\n * @typedef {import('unified').Parser<Root>} Parser\n * @typedef {import('unified').Processor<Root>} Processor\n */\n\n/**\n * @typedef {Omit<FromMarkdownOptions, 'extensions' | 'mdastExtensions'>} Options\n */\n\nimport {fromMarkdown} from 'mdast-util-from-markdown'\n\n/**\n * Aadd support for parsing from markdown.\n *\n * @param {Readonly<Options> | null | undefined} [options]\n *   Configuration (optional).\n * @returns {undefined}\n *   Nothing.\n */\nexport default function remarkParse(options) {\n  /** @type {Processor} */\n  // @ts-expect-error: TS in JSDoc generates wrong types if `this` is typed regularly.\n  const self = this\n\n  self.parser = parser\n\n  /**\n   * @type {Parser}\n   */\n  function parser(doc) {\n    return fromMarkdown(doc, {\n      ...self.data('settings'),\n      ...options,\n      // Note: these options are not in the readme.\n      // The goal is for them to be set by plugins on `data` instead of being\n      // passed by users.\n      extensions: self.data('micromarkExtensions') || [],\n      mdastExtensions: self.data('fromMarkdownExtensions') || []\n    })\n  }\n}\n","import _typeof from \"./typeof.js\";\nexport default function _regeneratorRuntime() {\n  \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */\n  _regeneratorRuntime = function _regeneratorRuntime() {\n    return e;\n  };\n  var t,\n    e = {},\n    r = Object.prototype,\n    n = r.hasOwnProperty,\n    o = Object.defineProperty || function (t, e, r) {\n      t[e] = r.value;\n    },\n    i = \"function\" == typeof Symbol ? Symbol : {},\n    a = i.iterator || \"@@iterator\",\n    c = i.asyncIterator || \"@@asyncIterator\",\n    u = i.toStringTag || \"@@toStringTag\";\n  function define(t, e, r) {\n    return Object.defineProperty(t, e, {\n      value: r,\n      enumerable: !0,\n      configurable: !0,\n      writable: !0\n    }), t[e];\n  }\n  try {\n    define({}, \"\");\n  } catch (t) {\n    define = function define(t, e, r) {\n      return t[e] = r;\n    };\n  }\n  function wrap(t, e, r, n) {\n    var i = e && e.prototype instanceof Generator ? e : Generator,\n      a = Object.create(i.prototype),\n      c = new Context(n || []);\n    return o(a, \"_invoke\", {\n      value: makeInvokeMethod(t, r, c)\n    }), a;\n  }\n  function tryCatch(t, e, r) {\n    try {\n      return {\n        type: \"normal\",\n        arg: t.call(e, r)\n      };\n    } catch (t) {\n      return {\n        type: \"throw\",\n        arg: t\n      };\n    }\n  }\n  e.wrap = wrap;\n  var h = \"suspendedStart\",\n    l = \"suspendedYield\",\n    f = \"executing\",\n    s = \"completed\",\n    y = {};\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n  var p = {};\n  define(p, a, function () {\n    return this;\n  });\n  var d = Object.getPrototypeOf,\n    v = d && d(d(values([])));\n  v && v !== r && n.call(v, a) && (p = v);\n  var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p);\n  function defineIteratorMethods(t) {\n    [\"next\", \"throw\", \"return\"].forEach(function (e) {\n      define(t, e, function (t) {\n        return this._invoke(e, t);\n      });\n    });\n  }\n  function AsyncIterator(t, e) {\n    function invoke(r, o, i, a) {\n      var c = tryCatch(t[r], t, o);\n      if (\"throw\" !== c.type) {\n        var u = c.arg,\n          h = u.value;\n        return h && \"object\" == _typeof(h) && n.call(h, \"__await\") ? e.resolve(h.__await).then(function (t) {\n          invoke(\"next\", t, i, a);\n        }, function (t) {\n          invoke(\"throw\", t, i, a);\n        }) : e.resolve(h).then(function (t) {\n          u.value = t, i(u);\n        }, function (t) {\n          return invoke(\"throw\", t, i, a);\n        });\n      }\n      a(c.arg);\n    }\n    var r;\n    o(this, \"_invoke\", {\n      value: function value(t, n) {\n        function callInvokeWithMethodAndArg() {\n          return new e(function (e, r) {\n            invoke(t, n, e, r);\n          });\n        }\n        return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg();\n      }\n    });\n  }\n  function makeInvokeMethod(e, r, n) {\n    var o = h;\n    return function (i, a) {\n      if (o === f) throw new Error(\"Generator is already running\");\n      if (o === s) {\n        if (\"throw\" === i) throw a;\n        return {\n          value: t,\n          done: !0\n        };\n      }\n      for (n.method = i, n.arg = a;;) {\n        var c = n.delegate;\n        if (c) {\n          var u = maybeInvokeDelegate(c, n);\n          if (u) {\n            if (u === y) continue;\n            return u;\n          }\n        }\n        if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) {\n          if (o === h) throw o = s, n.arg;\n          n.dispatchException(n.arg);\n        } else \"return\" === n.method && n.abrupt(\"return\", n.arg);\n        o = f;\n        var p = tryCatch(e, r, n);\n        if (\"normal\" === p.type) {\n          if (o = n.done ? s : l, p.arg === y) continue;\n          return {\n            value: p.arg,\n            done: n.done\n          };\n        }\n        \"throw\" === p.type && (o = s, n.method = \"throw\", n.arg = p.arg);\n      }\n    };\n  }\n  function maybeInvokeDelegate(e, r) {\n    var n = r.method,\n      o = e.iterator[n];\n    if (o === t) return r.delegate = null, \"throw\" === n && e.iterator[\"return\"] && (r.method = \"return\", r.arg = t, maybeInvokeDelegate(e, r), \"throw\" === r.method) || \"return\" !== n && (r.method = \"throw\", r.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), y;\n    var i = tryCatch(o, e.iterator, r.arg);\n    if (\"throw\" === i.type) return r.method = \"throw\", r.arg = i.arg, r.delegate = null, y;\n    var a = i.arg;\n    return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, \"return\" !== r.method && (r.method = \"next\", r.arg = t), r.delegate = null, y) : a : (r.method = \"throw\", r.arg = new TypeError(\"iterator result is not an object\"), r.delegate = null, y);\n  }\n  function pushTryEntry(t) {\n    var e = {\n      tryLoc: t[0]\n    };\n    1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e);\n  }\n  function resetTryEntry(t) {\n    var e = t.completion || {};\n    e.type = \"normal\", delete e.arg, t.completion = e;\n  }\n  function Context(t) {\n    this.tryEntries = [{\n      tryLoc: \"root\"\n    }], t.forEach(pushTryEntry, this), this.reset(!0);\n  }\n  function values(e) {\n    if (e || \"\" === e) {\n      var r = e[a];\n      if (r) return r.call(e);\n      if (\"function\" == typeof e.next) return e;\n      if (!isNaN(e.length)) {\n        var o = -1,\n          i = function next() {\n            for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next;\n            return next.value = t, next.done = !0, next;\n          };\n        return i.next = i;\n      }\n    }\n    throw new TypeError(_typeof(e) + \" is not iterable\");\n  }\n  return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, \"constructor\", {\n    value: GeneratorFunctionPrototype,\n    configurable: !0\n  }), o(GeneratorFunctionPrototype, \"constructor\", {\n    value: GeneratorFunction,\n    configurable: !0\n  }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), e.isGeneratorFunction = function (t) {\n    var e = \"function\" == typeof t && t.constructor;\n    return !!e && (e === GeneratorFunction || \"GeneratorFunction\" === (e.displayName || e.name));\n  }, e.mark = function (t) {\n    return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, \"GeneratorFunction\")), t.prototype = Object.create(g), t;\n  }, e.awrap = function (t) {\n    return {\n      __await: t\n    };\n  }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () {\n    return this;\n  }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) {\n    void 0 === i && (i = Promise);\n    var a = new AsyncIterator(wrap(t, r, n, o), i);\n    return e.isGeneratorFunction(r) ? a : a.next().then(function (t) {\n      return t.done ? t.value : a.next();\n    });\n  }, defineIteratorMethods(g), define(g, u, \"Generator\"), define(g, a, function () {\n    return this;\n  }), define(g, \"toString\", function () {\n    return \"[object Generator]\";\n  }), e.keys = function (t) {\n    var e = Object(t),\n      r = [];\n    for (var n in e) r.push(n);\n    return r.reverse(), function next() {\n      for (; r.length;) {\n        var t = r.pop();\n        if (t in e) return next.value = t, next.done = !1, next;\n      }\n      return next.done = !0, next;\n    };\n  }, e.values = values, Context.prototype = {\n    constructor: Context,\n    reset: function reset(e) {\n      if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) \"t\" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t);\n    },\n    stop: function stop() {\n      this.done = !0;\n      var t = this.tryEntries[0].completion;\n      if (\"throw\" === t.type) throw t.arg;\n      return this.rval;\n    },\n    dispatchException: function dispatchException(e) {\n      if (this.done) throw e;\n      var r = this;\n      function handle(n, o) {\n        return a.type = \"throw\", a.arg = e, r.next = n, o && (r.method = \"next\", r.arg = t), !!o;\n      }\n      for (var o = this.tryEntries.length - 1; o >= 0; --o) {\n        var i = this.tryEntries[o],\n          a = i.completion;\n        if (\"root\" === i.tryLoc) return handle(\"end\");\n        if (i.tryLoc <= this.prev) {\n          var c = n.call(i, \"catchLoc\"),\n            u = n.call(i, \"finallyLoc\");\n          if (c && u) {\n            if (this.prev < i.catchLoc) return handle(i.catchLoc, !0);\n            if (this.prev < i.finallyLoc) return handle(i.finallyLoc);\n          } else if (c) {\n            if (this.prev < i.catchLoc) return handle(i.catchLoc, !0);\n          } else {\n            if (!u) throw new Error(\"try statement without catch or finally\");\n            if (this.prev < i.finallyLoc) return handle(i.finallyLoc);\n          }\n        }\n      }\n    },\n    abrupt: function abrupt(t, e) {\n      for (var r = this.tryEntries.length - 1; r >= 0; --r) {\n        var o = this.tryEntries[r];\n        if (o.tryLoc <= this.prev && n.call(o, \"finallyLoc\") && this.prev < o.finallyLoc) {\n          var i = o;\n          break;\n        }\n      }\n      i && (\"break\" === t || \"continue\" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null);\n      var a = i ? i.completion : {};\n      return a.type = t, a.arg = e, i ? (this.method = \"next\", this.next = i.finallyLoc, y) : this.complete(a);\n    },\n    complete: function complete(t, e) {\n      if (\"throw\" === t.type) throw t.arg;\n      return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && e && (this.next = e), y;\n    },\n    finish: function finish(t) {\n      for (var e = this.tryEntries.length - 1; e >= 0; --e) {\n        var r = this.tryEntries[e];\n        if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y;\n      }\n    },\n    \"catch\": function _catch(t) {\n      for (var e = this.tryEntries.length - 1; e >= 0; --e) {\n        var r = this.tryEntries[e];\n        if (r.tryLoc === t) {\n          var n = r.completion;\n          if (\"throw\" === n.type) {\n            var o = n.arg;\n            resetTryEntry(r);\n          }\n          return o;\n        }\n      }\n      throw new Error(\"illegal catch attempt\");\n    },\n    delegateYield: function delegateYield(e, r, n) {\n      return this.delegate = {\n        iterator: values(e),\n        resultName: r,\n        nextLoc: n\n      }, \"next\" === this.method && (this.arg = t), y;\n    }\n  }, e;\n}","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n      args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n      _next(undefined);\n    });\n  };\n}","export const VOID       = -1;\nexport const PRIMITIVE  = 0;\nexport const ARRAY      = 1;\nexport const OBJECT     = 2;\nexport const DATE       = 3;\nexport const REGEXP     = 4;\nexport const MAP        = 5;\nexport const SET        = 6;\nexport const ERROR      = 7;\nexport const BIGINT     = 8;\n// export const SYMBOL = 9;\n","import {\n  VOID, PRIMITIVE,\n  ARRAY, OBJECT,\n  DATE, REGEXP, MAP, SET,\n  ERROR, BIGINT\n} from './types.js';\n\nconst env = typeof self === 'object' ? self : globalThis;\n\nconst deserializer = ($, _) => {\n  const as = (out, index) => {\n    $.set(index, out);\n    return out;\n  };\n\n  const unpair = index => {\n    if ($.has(index))\n      return $.get(index);\n\n    const [type, value] = _[index];\n    switch (type) {\n      case PRIMITIVE:\n      case VOID:\n        return as(value, index);\n      case ARRAY: {\n        const arr = as([], index);\n        for (const index of value)\n          arr.push(unpair(index));\n        return arr;\n      }\n      case OBJECT: {\n        const object = as({}, index);\n        for (const [key, index] of value)\n          object[unpair(key)] = unpair(index);\n        return object;\n      }\n      case DATE:\n        return as(new Date(value), index);\n      case REGEXP: {\n        const {source, flags} = value;\n        return as(new RegExp(source, flags), index);\n      }\n      case MAP: {\n        const map = as(new Map, index);\n        for (const [key, index] of value)\n          map.set(unpair(key), unpair(index));\n        return map;\n      }\n      case SET: {\n        const set = as(new Set, index);\n        for (const index of value)\n          set.add(unpair(index));\n        return set;\n      }\n      case ERROR: {\n        const {name, message} = value;\n        return as(new env[name](message), index);\n      }\n      case BIGINT:\n        return as(BigInt(value), index);\n      case 'BigInt':\n        return as(Object(BigInt(value)), index);\n    }\n    return as(new env[type](value), index);\n  };\n\n  return unpair;\n};\n\n/**\n * @typedef {Array<string,any>} Record a type representation\n */\n\n/**\n * Returns a deserialized value from a serialized array of Records.\n * @param {Record[]} serialized a previously serialized value.\n * @returns {any}\n */\nexport const deserialize = serialized => deserializer(new Map, serialized)(0);\n","import {\n  VOID, PRIMITIVE,\n  ARRAY, OBJECT,\n  DATE, REGEXP, MAP, SET,\n  ERROR, BIGINT\n} from './types.js';\n\nconst EMPTY = '';\n\nconst {toString} = {};\nconst {keys} = Object;\n\nconst typeOf = value => {\n  const type = typeof value;\n  if (type !== 'object' || !value)\n    return [PRIMITIVE, type];\n\n  const asString = toString.call(value).slice(8, -1);\n  switch (asString) {\n    case 'Array':\n      return [ARRAY, EMPTY];\n    case 'Object':\n      return [OBJECT, EMPTY];\n    case 'Date':\n      return [DATE, EMPTY];\n    case 'RegExp':\n      return [REGEXP, EMPTY];\n    case 'Map':\n      return [MAP, EMPTY];\n    case 'Set':\n      return [SET, EMPTY];\n  }\n\n  if (asString.includes('Array'))\n    return [ARRAY, asString];\n\n  if (asString.includes('Error'))\n    return [ERROR, asString];\n\n  return [OBJECT, asString];\n};\n\nconst shouldSkip = ([TYPE, type]) => (\n  TYPE === PRIMITIVE &&\n  (type === 'function' || type === 'symbol')\n);\n\nconst serializer = (strict, json, $, _) => {\n\n  const as = (out, value) => {\n    const index = _.push(out) - 1;\n    $.set(value, index);\n    return index;\n  };\n\n  const pair = value => {\n    if ($.has(value))\n      return $.get(value);\n\n    let [TYPE, type] = typeOf(value);\n    switch (TYPE) {\n      case PRIMITIVE: {\n        let entry = value;\n        switch (type) {\n          case 'bigint':\n            TYPE = BIGINT;\n            entry = value.toString();\n            break;\n          case 'function':\n          case 'symbol':\n            if (strict)\n              throw new TypeError('unable to serialize ' + type);\n            entry = null;\n            break;\n          case 'undefined':\n            return as([VOID], value);\n        }\n        return as([TYPE, entry], value);\n      }\n      case ARRAY: {\n        if (type)\n          return as([type, [...value]], value);\n  \n        const arr = [];\n        const index = as([TYPE, arr], value);\n        for (const entry of value)\n          arr.push(pair(entry));\n        return index;\n      }\n      case OBJECT: {\n        if (type) {\n          switch (type) {\n            case 'BigInt':\n              return as([type, value.toString()], value);\n            case 'Boolean':\n            case 'Number':\n            case 'String':\n              return as([type, value.valueOf()], value);\n          }\n        }\n\n        if (json && ('toJSON' in value))\n          return pair(value.toJSON());\n\n        const entries = [];\n        const index = as([TYPE, entries], value);\n        for (const key of keys(value)) {\n          if (strict || !shouldSkip(typeOf(value[key])))\n            entries.push([pair(key), pair(value[key])]);\n        }\n        return index;\n      }\n      case DATE:\n        return as([TYPE, value.toISOString()], value);\n      case REGEXP: {\n        const {source, flags} = value;\n        return as([TYPE, {source, flags}], value);\n      }\n      case MAP: {\n        const entries = [];\n        const index = as([TYPE, entries], value);\n        for (const [key, entry] of value) {\n          if (strict || !(shouldSkip(typeOf(key)) || shouldSkip(typeOf(entry))))\n            entries.push([pair(key), pair(entry)]);\n        }\n        return index;\n      }\n      case SET: {\n        const entries = [];\n        const index = as([TYPE, entries], value);\n        for (const entry of value) {\n          if (strict || !shouldSkip(typeOf(entry)))\n            entries.push(pair(entry));\n        }\n        return index;\n      }\n    }\n\n    const {message} = value;\n    return as([TYPE, {name: type, message}], value);\n  };\n\n  return pair;\n};\n\n/**\n * @typedef {Array<string,any>} Record a type representation\n */\n\n/**\n * Returns an array of serialized Records.\n * @param {any} value a serializable value.\n * @param {{json?: boolean, lossy?: boolean}?} options an object with a `lossy` or `json` property that,\n *  if `true`, will not throw errors on incompatible types, and behave more\n *  like JSON stringify would behave. Symbol and Function will be discarded.\n * @returns {Record[]}\n */\n export const serialize = (value, {json, lossy} = {}) => {\n  const _ = [];\n  return serializer(!(json || lossy), !!json, new Map, _)(value), _;\n};\n","import {deserialize} from './deserialize.js';\nimport {serialize} from './serialize.js';\n\n/**\n * @typedef {Array<string,any>} Record a type representation\n */\n\n/**\n * Returns an array of serialized Records.\n * @param {any} any a serializable value.\n * @param {{transfer?: any[], json?: boolean, lossy?: boolean}?} options an object with\n * a transfer option (ignored when polyfilled) and/or non standard fields that\n * fallback to the polyfill if present.\n * @returns {Record[]}\n */\nexport default typeof structuredClone === \"function\" ?\n  /* c8 ignore start */\n  (any, options) => (\n    options && ('json' in options || 'lossy' in options) ?\n      deserialize(serialize(any, options)) : structuredClone(any)\n  ) :\n  (any, options) => deserialize(serialize(any, options));\n  /* c8 ignore stop */\n\nexport {deserialize, serialize};\n","import {asciiAlphanumeric} from 'micromark-util-character'\nimport {encode} from 'micromark-util-encode'\n/**\n * Make a value safe for injection as a URL.\n *\n * This encodes unsafe characters with percent-encoding and skips already\n * encoded sequences (see `normalizeUri`).\n * Further unsafe characters are encoded as character references (see\n * `micromark-util-encode`).\n *\n * A regex of allowed protocols can be given, in which case the URL is\n * sanitized.\n * For example, `/^(https?|ircs?|mailto|xmpp)$/i` can be used for `a[href]`, or\n * `/^https?$/i` for `img[src]` (this is what `github.com` allows).\n * If the URL includes an unknown protocol (one not matched by `protocol`, such\n * as a dangerous example, `javascript:`), the value is ignored.\n *\n * @param {string | null | undefined} url\n *   URI to sanitize.\n * @param {RegExp | null | undefined} [protocol]\n *   Allowed protocols.\n * @returns {string}\n *   Sanitized URI.\n */\nexport function sanitizeUri(url, protocol) {\n  const value = encode(normalizeUri(url || ''))\n  if (!protocol) {\n    return value\n  }\n  const colon = value.indexOf(':')\n  const questionMark = value.indexOf('?')\n  const numberSign = value.indexOf('#')\n  const slash = value.indexOf('/')\n  if (\n    // If there is no protocol, it’s relative.\n    colon < 0 ||\n    // If the first colon is after a `?`, `#`, or `/`, it’s not a protocol.\n    (slash > -1 && colon > slash) ||\n    (questionMark > -1 && colon > questionMark) ||\n    (numberSign > -1 && colon > numberSign) ||\n    // It is a protocol, it should be allowed.\n    protocol.test(value.slice(0, colon))\n  ) {\n    return value\n  }\n  return ''\n}\n\n/**\n * Normalize a URL.\n *\n * Encode unsafe characters with percent-encoding, skipping already encoded\n * sequences.\n *\n * @param {string} value\n *   URI to normalize.\n * @returns {string}\n *   Normalized URI.\n */\nexport function normalizeUri(value) {\n  /** @type {Array<string>} */\n  const result = []\n  let index = -1\n  let start = 0\n  let skip = 0\n  while (++index < value.length) {\n    const code = value.charCodeAt(index)\n    /** @type {string} */\n    let replace = ''\n\n    // A correct percent encoded value.\n    if (\n      code === 37 &&\n      asciiAlphanumeric(value.charCodeAt(index + 1)) &&\n      asciiAlphanumeric(value.charCodeAt(index + 2))\n    ) {\n      skip = 2\n    }\n    // ASCII.\n    else if (code < 128) {\n      if (!/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(code))) {\n        replace = String.fromCharCode(code)\n      }\n    }\n    // Astral.\n    else if (code > 55_295 && code < 57_344) {\n      const next = value.charCodeAt(index + 1)\n\n      // A correct surrogate pair.\n      if (code < 56_320 && next > 56_319 && next < 57_344) {\n        replace = String.fromCharCode(code, next)\n        skip = 1\n      }\n      // Lone surrogate.\n      else {\n        replace = '\\uFFFD'\n      }\n    }\n    // Unicode.\n    else {\n      replace = String.fromCharCode(code)\n    }\n    if (replace) {\n      result.push(value.slice(start, index), encodeURIComponent(replace))\n      start = index + skip + 1\n      replace = ''\n    }\n    if (skip) {\n      index += skip\n      skip = 0\n    }\n  }\n  return result.join('') + value.slice(start)\n}\n","/**\n * @typedef {import('hast').Element} Element\n * @typedef {import('hast').ElementContent} ElementContent\n *\n * @typedef {import('./state.js').State} State\n */\n\n/**\n * @callback FootnoteBackContentTemplate\n *   Generate content for the backreference dynamically.\n *\n *   For the following markdown:\n *\n *   ```markdown\n *   Alpha[^micromark], bravo[^micromark], and charlie[^remark].\n *\n *   [^remark]: things about remark\n *   [^micromark]: things about micromark\n *   ```\n *\n *   This function will be called with:\n *\n *   *  `0` and `0` for the backreference from `things about micromark` to\n *      `alpha`, as it is the first used definition, and the first call to it\n *   *  `0` and `1` for the backreference from `things about micromark` to\n *      `bravo`, as it is the first used definition, and the second call to it\n *   *  `1` and `0` for the backreference from `things about remark` to\n *      `charlie`, as it is the second used definition\n * @param {number} referenceIndex\n *   Index of the definition in the order that they are first referenced,\n *   0-indexed.\n * @param {number} rereferenceIndex\n *   Index of calls to the same definition, 0-indexed.\n * @returns {Array<ElementContent> | ElementContent | string}\n *   Content for the backreference when linking back from definitions to their\n *   reference.\n *\n * @callback FootnoteBackLabelTemplate\n *   Generate a back label dynamically.\n *\n *   For the following markdown:\n *\n *   ```markdown\n *   Alpha[^micromark], bravo[^micromark], and charlie[^remark].\n *\n *   [^remark]: things about remark\n *   [^micromark]: things about micromark\n *   ```\n *\n *   This function will be called with:\n *\n *   *  `0` and `0` for the backreference from `things about micromark` to\n *      `alpha`, as it is the first used definition, and the first call to it\n *   *  `0` and `1` for the backreference from `things about micromark` to\n *      `bravo`, as it is the first used definition, and the second call to it\n *   *  `1` and `0` for the backreference from `things about remark` to\n *      `charlie`, as it is the second used definition\n * @param {number} referenceIndex\n *   Index of the definition in the order that they are first referenced,\n *   0-indexed.\n * @param {number} rereferenceIndex\n *   Index of calls to the same definition, 0-indexed.\n * @returns {string}\n *   Back label to use when linking back from definitions to their reference.\n */\n\nimport structuredClone from '@ungap/structured-clone'\nimport {normalizeUri} from 'micromark-util-sanitize-uri'\n\n/**\n * Generate the default content that GitHub uses on backreferences.\n *\n * @param {number} _\n *   Index of the definition in the order that they are first referenced,\n *   0-indexed.\n * @param {number} rereferenceIndex\n *   Index of calls to the same definition, 0-indexed.\n * @returns {Array<ElementContent>}\n *   Content.\n */\nexport function defaultFootnoteBackContent(_, rereferenceIndex) {\n  /** @type {Array<ElementContent>} */\n  const result = [{type: 'text', value: '↩'}]\n\n  if (rereferenceIndex > 1) {\n    result.push({\n      type: 'element',\n      tagName: 'sup',\n      properties: {},\n      children: [{type: 'text', value: String(rereferenceIndex)}]\n    })\n  }\n\n  return result\n}\n\n/**\n * Generate the default label that GitHub uses on backreferences.\n *\n * @param {number} referenceIndex\n *   Index of the definition in the order that they are first referenced,\n *   0-indexed.\n * @param {number} rereferenceIndex\n *   Index of calls to the same definition, 0-indexed.\n * @returns {string}\n *   Label.\n */\nexport function defaultFootnoteBackLabel(referenceIndex, rereferenceIndex) {\n  return (\n    'Back to reference ' +\n    (referenceIndex + 1) +\n    (rereferenceIndex > 1 ? '-' + rereferenceIndex : '')\n  )\n}\n\n/**\n * Generate a hast footer for called footnote definitions.\n *\n * @param {State} state\n *   Info passed around.\n * @returns {Element | undefined}\n *   `section` element or `undefined`.\n */\n// eslint-disable-next-line complexity\nexport function footer(state) {\n  const clobberPrefix =\n    typeof state.options.clobberPrefix === 'string'\n      ? state.options.clobberPrefix\n      : 'user-content-'\n  const footnoteBackContent =\n    state.options.footnoteBackContent || defaultFootnoteBackContent\n  const footnoteBackLabel =\n    state.options.footnoteBackLabel || defaultFootnoteBackLabel\n  const footnoteLabel = state.options.footnoteLabel || 'Footnotes'\n  const footnoteLabelTagName = state.options.footnoteLabelTagName || 'h2'\n  const footnoteLabelProperties = state.options.footnoteLabelProperties || {\n    className: ['sr-only']\n  }\n  /** @type {Array<ElementContent>} */\n  const listItems = []\n  let referenceIndex = -1\n\n  while (++referenceIndex < state.footnoteOrder.length) {\n    const def = state.footnoteById.get(state.footnoteOrder[referenceIndex])\n\n    if (!def) {\n      continue\n    }\n\n    const content = state.all(def)\n    const id = String(def.identifier).toUpperCase()\n    const safeId = normalizeUri(id.toLowerCase())\n    let rereferenceIndex = 0\n    /** @type {Array<ElementContent>} */\n    const backReferences = []\n    const counts = state.footnoteCounts.get(id)\n\n    // eslint-disable-next-line no-unmodified-loop-condition\n    while (counts !== undefined && ++rereferenceIndex <= counts) {\n      if (backReferences.length > 0) {\n        backReferences.push({type: 'text', value: ' '})\n      }\n\n      let children =\n        typeof footnoteBackContent === 'string'\n          ? footnoteBackContent\n          : footnoteBackContent(referenceIndex, rereferenceIndex)\n\n      if (typeof children === 'string') {\n        children = {type: 'text', value: children}\n      }\n\n      backReferences.push({\n        type: 'element',\n        tagName: 'a',\n        properties: {\n          href:\n            '#' +\n            clobberPrefix +\n            'fnref-' +\n            safeId +\n            (rereferenceIndex > 1 ? '-' + rereferenceIndex : ''),\n          dataFootnoteBackref: '',\n          ariaLabel:\n            typeof footnoteBackLabel === 'string'\n              ? footnoteBackLabel\n              : footnoteBackLabel(referenceIndex, rereferenceIndex),\n          className: ['data-footnote-backref']\n        },\n        children: Array.isArray(children) ? children : [children]\n      })\n    }\n\n    const tail = content[content.length - 1]\n\n    if (tail && tail.type === 'element' && tail.tagName === 'p') {\n      const tailTail = tail.children[tail.children.length - 1]\n      if (tailTail && tailTail.type === 'text') {\n        tailTail.value += ' '\n      } else {\n        tail.children.push({type: 'text', value: ' '})\n      }\n\n      tail.children.push(...backReferences)\n    } else {\n      content.push(...backReferences)\n    }\n\n    /** @type {Element} */\n    const listItem = {\n      type: 'element',\n      tagName: 'li',\n      properties: {id: clobberPrefix + 'fn-' + safeId},\n      children: state.wrap(content, true)\n    }\n\n    state.patch(def, listItem)\n\n    listItems.push(listItem)\n  }\n\n  if (listItems.length === 0) {\n    return\n  }\n\n  return {\n    type: 'element',\n    tagName: 'section',\n    properties: {dataFootnotes: true, className: ['footnotes']},\n    children: [\n      {\n        type: 'element',\n        tagName: footnoteLabelTagName,\n        properties: {\n          ...structuredClone(footnoteLabelProperties),\n          id: 'footnote-label'\n        },\n        children: [{type: 'text', value: footnoteLabel}]\n      },\n      {type: 'text', value: '\\n'},\n      {\n        type: 'element',\n        tagName: 'ol',\n        properties: {},\n        children: state.wrap(listItems, true)\n      },\n      {type: 'text', value: '\\n'}\n    ]\n  }\n}\n","import objectWithoutPropertiesLoose from \"./objectWithoutPropertiesLoose.js\";\nexport default function _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n  return target;\n}","export default function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n  return target;\n}","/**\n * @typedef {import('unist').Node} Node\n * @typedef {import('unist').Parent} Parent\n */\n\n/**\n * @template Fn\n * @template Fallback\n * @typedef {Fn extends (value: any) => value is infer Thing ? Thing : Fallback} Predicate\n */\n\n/**\n * @callback Check\n *   Check that an arbitrary value is a node.\n * @param {unknown} this\n *   The given context.\n * @param {unknown} [node]\n *   Anything (typically a node).\n * @param {number | null | undefined} [index]\n *   The node’s position in its parent.\n * @param {Parent | null | undefined} [parent]\n *   The node’s parent.\n * @returns {boolean}\n *   Whether this is a node and passes a test.\n *\n * @typedef {Record<string, unknown> | Node} Props\n *   Object to check for equivalence.\n *\n *   Note: `Node` is included as it is common but is not indexable.\n *\n * @typedef {Array<Props | TestFunction | string> | Props | TestFunction | string | null | undefined} Test\n *   Check for an arbitrary node.\n *\n * @callback TestFunction\n *   Check if a node passes a test.\n * @param {unknown} this\n *   The given context.\n * @param {Node} node\n *   A node.\n * @param {number | undefined} [index]\n *   The node’s position in its parent.\n * @param {Parent | undefined} [parent]\n *   The node’s parent.\n * @returns {boolean | undefined | void}\n *   Whether this node passes the test.\n *\n *   Note: `void` is included until TS sees no return as `undefined`.\n */\n\n/**\n * Check if `node` is a `Node` and whether it passes the given test.\n *\n * @param {unknown} node\n *   Thing to check, typically `Node`.\n * @param {Test} test\n *   A check for a specific node.\n * @param {number | null | undefined} index\n *   The node’s position in its parent.\n * @param {Parent | null | undefined} parent\n *   The node’s parent.\n * @param {unknown} context\n *   Context object (`this`) to pass to `test` functions.\n * @returns {boolean}\n *   Whether `node` is a node and passes a test.\n */\nexport const is =\n  // Note: overloads in JSDoc can’t yet use different `@template`s.\n  /**\n   * @type {(\n   *   (<Condition extends string>(node: unknown, test: Condition, index?: number | null | undefined, parent?: Parent | null | undefined, context?: unknown) => node is Node & {type: Condition}) &\n   *   (<Condition extends Props>(node: unknown, test: Condition, index?: number | null | undefined, parent?: Parent | null | undefined, context?: unknown) => node is Node & Condition) &\n   *   (<Condition extends TestFunction>(node: unknown, test: Condition, index?: number | null | undefined, parent?: Parent | null | undefined, context?: unknown) => node is Node & Predicate<Condition, Node>) &\n   *   ((node?: null | undefined) => false) &\n   *   ((node: unknown, test?: null | undefined, index?: number | null | undefined, parent?: Parent | null | undefined, context?: unknown) => node is Node) &\n   *   ((node: unknown, test?: Test, index?: number | null | undefined, parent?: Parent | null | undefined, context?: unknown) => boolean)\n   * )}\n   */\n  (\n    /**\n     * @param {unknown} [node]\n     * @param {Test} [test]\n     * @param {number | null | undefined} [index]\n     * @param {Parent | null | undefined} [parent]\n     * @param {unknown} [context]\n     * @returns {boolean}\n     */\n    // eslint-disable-next-line max-params\n    function (node, test, index, parent, context) {\n      const check = convert(test)\n\n      if (\n        index !== undefined &&\n        index !== null &&\n        (typeof index !== 'number' ||\n          index < 0 ||\n          index === Number.POSITIVE_INFINITY)\n      ) {\n        throw new Error('Expected positive finite index')\n      }\n\n      if (\n        parent !== undefined &&\n        parent !== null &&\n        (!is(parent) || !parent.children)\n      ) {\n        throw new Error('Expected parent node')\n      }\n\n      if (\n        (parent === undefined || parent === null) !==\n        (index === undefined || index === null)\n      ) {\n        throw new Error('Expected both parent and index')\n      }\n\n      return looksLikeANode(node)\n        ? check.call(context, node, index, parent)\n        : false\n    }\n  )\n\n/**\n * Generate an assertion from a test.\n *\n * Useful if you’re going to test many nodes, for example when creating a\n * utility where something else passes a compatible test.\n *\n * The created function is a bit faster because it expects valid input only:\n * a `node`, `index`, and `parent`.\n *\n * @param {Test} test\n *   *   when nullish, checks if `node` is a `Node`.\n *   *   when `string`, works like passing `(node) => node.type === test`.\n *   *   when `function` checks if function passed the node is true.\n *   *   when `object`, checks that all keys in test are in node, and that they have (strictly) equal values.\n *   *   when `array`, checks if any one of the subtests pass.\n * @returns {Check}\n *   An assertion.\n */\nexport const convert =\n  // Note: overloads in JSDoc can’t yet use different `@template`s.\n  /**\n   * @type {(\n   *   (<Condition extends string>(test: Condition) => (node: unknown, index?: number | null | undefined, parent?: Parent | null | undefined, context?: unknown) => node is Node & {type: Condition}) &\n   *   (<Condition extends Props>(test: Condition) => (node: unknown, index?: number | null | undefined, parent?: Parent | null | undefined, context?: unknown) => node is Node & Condition) &\n   *   (<Condition extends TestFunction>(test: Condition) => (node: unknown, index?: number | null | undefined, parent?: Parent | null | undefined, context?: unknown) => node is Node & Predicate<Condition, Node>) &\n   *   ((test?: null | undefined) => (node?: unknown, index?: number | null | undefined, parent?: Parent | null | undefined, context?: unknown) => node is Node) &\n   *   ((test?: Test) => Check)\n   * )}\n   */\n  (\n    /**\n     * @param {Test} [test]\n     * @returns {Check}\n     */\n    function (test) {\n      if (test === null || test === undefined) {\n        return ok\n      }\n\n      if (typeof test === 'function') {\n        return castFactory(test)\n      }\n\n      if (typeof test === 'object') {\n        return Array.isArray(test) ? anyFactory(test) : propsFactory(test)\n      }\n\n      if (typeof test === 'string') {\n        return typeFactory(test)\n      }\n\n      throw new Error('Expected function, string, or object as test')\n    }\n  )\n\n/**\n * @param {Array<Props | TestFunction | string>} tests\n * @returns {Check}\n */\nfunction anyFactory(tests) {\n  /** @type {Array<Check>} */\n  const checks = []\n  let index = -1\n\n  while (++index < tests.length) {\n    checks[index] = convert(tests[index])\n  }\n\n  return castFactory(any)\n\n  /**\n   * @this {unknown}\n   * @type {TestFunction}\n   */\n  function any(...parameters) {\n    let index = -1\n\n    while (++index < checks.length) {\n      if (checks[index].apply(this, parameters)) return true\n    }\n\n    return false\n  }\n}\n\n/**\n * Turn an object into a test for a node with a certain fields.\n *\n * @param {Props} check\n * @returns {Check}\n */\nfunction propsFactory(check) {\n  const checkAsRecord = /** @type {Record<string, unknown>} */ (check)\n\n  return castFactory(all)\n\n  /**\n   * @param {Node} node\n   * @returns {boolean}\n   */\n  function all(node) {\n    const nodeAsRecord = /** @type {Record<string, unknown>} */ (\n      /** @type {unknown} */ (node)\n    )\n\n    /** @type {string} */\n    let key\n\n    for (key in check) {\n      if (nodeAsRecord[key] !== checkAsRecord[key]) return false\n    }\n\n    return true\n  }\n}\n\n/**\n * Turn a string into a test for a node with a certain type.\n *\n * @param {string} check\n * @returns {Check}\n */\nfunction typeFactory(check) {\n  return castFactory(type)\n\n  /**\n   * @param {Node} node\n   */\n  function type(node) {\n    return node && node.type === check\n  }\n}\n\n/**\n * Turn a custom test into a test for a node that passes that test.\n *\n * @param {TestFunction} testFunction\n * @returns {Check}\n */\nfunction castFactory(testFunction) {\n  return check\n\n  /**\n   * @this {unknown}\n   * @type {Check}\n   */\n  function check(value, index, parent) {\n    return Boolean(\n      looksLikeANode(value) &&\n        testFunction.call(\n          this,\n          value,\n          typeof index === 'number' ? index : undefined,\n          parent || undefined\n        )\n    )\n  }\n}\n\nfunction ok() {\n  return true\n}\n\n/**\n * @param {unknown} value\n * @returns {value is Node}\n */\nfunction looksLikeANode(value) {\n  return value !== null && typeof value === 'object' && 'type' in value\n}\n","/**\n * @typedef {import('unist').Node} UnistNode\n * @typedef {import('unist').Parent} UnistParent\n */\n\n/**\n * @typedef {Exclude<import('unist-util-is').Test, undefined> | undefined} Test\n *   Test from `unist-util-is`.\n *\n *   Note: we have remove and add `undefined`, because otherwise when generating\n *   automatic `.d.ts` files, TS tries to flatten paths from a local perspective,\n *   which doesn’t work when publishing on npm.\n */\n\n/**\n * @typedef {(\n *   Fn extends (value: any) => value is infer Thing\n *   ? Thing\n *   : Fallback\n * )} Predicate\n *   Get the value of a type guard `Fn`.\n * @template Fn\n *   Value; typically function that is a type guard (such as `(x): x is Y`).\n * @template Fallback\n *   Value to yield if `Fn` is not a type guard.\n */\n\n/**\n * @typedef {(\n *   Check extends null | undefined // No test.\n *   ? Value\n *   : Value extends {type: Check} // String (type) test.\n *   ? Value\n *   : Value extends Check // Partial test.\n *   ? Value\n *   : Check extends Function // Function test.\n *   ? Predicate<Check, Value> extends Value\n *     ? Predicate<Check, Value>\n *     : never\n *   : never // Some other test?\n * )} MatchesOne\n *   Check whether a node matches a primitive check in the type system.\n * @template Value\n *   Value; typically unist `Node`.\n * @template Check\n *   Value; typically `unist-util-is`-compatible test, but not arrays.\n */\n\n/**\n * @typedef {(\n *   Check extends Array<any>\n *   ? MatchesOne<Value, Check[keyof Check]>\n *   : MatchesOne<Value, Check>\n * )} Matches\n *   Check whether a node matches a check in the type system.\n * @template Value\n *   Value; typically unist `Node`.\n * @template Check\n *   Value; typically `unist-util-is`-compatible test.\n */\n\n/**\n * @typedef {0 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 | 10} Uint\n *   Number; capped reasonably.\n */\n\n/**\n * @typedef {I extends 0 ? 1 : I extends 1 ? 2 : I extends 2 ? 3 : I extends 3 ? 4 : I extends 4 ? 5 : I extends 5 ? 6 : I extends 6 ? 7 : I extends 7 ? 8 : I extends 8 ? 9 : 10} Increment\n *   Increment a number in the type system.\n * @template {Uint} [I=0]\n *   Index.\n */\n\n/**\n * @typedef {(\n *   Node extends UnistParent\n *   ? Node extends {children: Array<infer Children>}\n *     ? Child extends Children ? Node : never\n *     : never\n *   : never\n * )} InternalParent\n *   Collect nodes that can be parents of `Child`.\n * @template {UnistNode} Node\n *   All node types in a tree.\n * @template {UnistNode} Child\n *   Node to search for.\n */\n\n/**\n * @typedef {InternalParent<InclusiveDescendant<Tree>, Child>} Parent\n *   Collect nodes in `Tree` that can be parents of `Child`.\n * @template {UnistNode} Tree\n *   All node types in a tree.\n * @template {UnistNode} Child\n *   Node to search for.\n */\n\n/**\n * @typedef {(\n *   Depth extends Max\n *   ? never\n *   :\n *     | InternalParent<Node, Child>\n *     | InternalAncestor<Node, InternalParent<Node, Child>, Max, Increment<Depth>>\n * )} InternalAncestor\n *   Collect nodes in `Tree` that can be ancestors of `Child`.\n * @template {UnistNode} Node\n *   All node types in a tree.\n * @template {UnistNode} Child\n *   Node to search for.\n * @template {Uint} [Max=10]\n *   Max; searches up to this depth.\n * @template {Uint} [Depth=0]\n *   Current depth.\n */\n\n/**\n * @typedef {InternalAncestor<InclusiveDescendant<Tree>, Child>} Ancestor\n *   Collect nodes in `Tree` that can be ancestors of `Child`.\n * @template {UnistNode} Tree\n *   All node types in a tree.\n * @template {UnistNode} Child\n *   Node to search for.\n */\n\n/**\n * @typedef {(\n *   Tree extends UnistParent\n *     ? Depth extends Max\n *       ? Tree\n *       : Tree | InclusiveDescendant<Tree['children'][number], Max, Increment<Depth>>\n *     : Tree\n * )} InclusiveDescendant\n *   Collect all (inclusive) descendants of `Tree`.\n *\n *   > 👉 **Note**: for performance reasons, this seems to be the fastest way to\n *   > recurse without actually running into an infinite loop, which the\n *   > previous version did.\n *   >\n *   > Practically, a max of `2` is typically enough assuming a `Root` is\n *   > passed, but it doesn’t improve performance.\n *   > It gets higher with `List > ListItem > Table > TableRow > TableCell`.\n *   > Using up to `10` doesn’t hurt or help either.\n * @template {UnistNode} Tree\n *   Tree type.\n * @template {Uint} [Max=10]\n *   Max; searches up to this depth.\n * @template {Uint} [Depth=0]\n *   Current depth.\n */\n\n/**\n * @typedef {'skip' | boolean} Action\n *   Union of the action types.\n *\n * @typedef {number} Index\n *   Move to the sibling at `index` next (after node itself is completely\n *   traversed).\n *\n *   Useful if mutating the tree, such as removing the node the visitor is\n *   currently on, or any of its previous siblings.\n *   Results less than 0 or greater than or equal to `children.length` stop\n *   traversing the parent.\n *\n * @typedef {[(Action | null | undefined | void)?, (Index | null | undefined)?]} ActionTuple\n *   List with one or two values, the first an action, the second an index.\n *\n * @typedef {Action | ActionTuple | Index | null | undefined | void} VisitorResult\n *   Any value that can be returned from a visitor.\n */\n\n/**\n * @callback Visitor\n *   Handle a node (matching `test`, if given).\n *\n *   Visitors are free to transform `node`.\n *   They can also transform the parent of node (the last of `ancestors`).\n *\n *   Replacing `node` itself, if `SKIP` is not returned, still causes its\n *   descendants to be walked (which is a bug).\n *\n *   When adding or removing previous siblings of `node` (or next siblings, in\n *   case of reverse), the `Visitor` should return a new `Index` to specify the\n *   sibling to traverse after `node` is traversed.\n *   Adding or removing next siblings of `node` (or previous siblings, in case\n *   of reverse) is handled as expected without needing to return a new `Index`.\n *\n *   Removing the children property of an ancestor still results in them being\n *   traversed.\n * @param {Visited} node\n *   Found node.\n * @param {Array<VisitedParents>} ancestors\n *   Ancestors of `node`.\n * @returns {VisitorResult}\n *   What to do next.\n *\n *   An `Index` is treated as a tuple of `[CONTINUE, Index]`.\n *   An `Action` is treated as a tuple of `[Action]`.\n *\n *   Passing a tuple back only makes sense if the `Action` is `SKIP`.\n *   When the `Action` is `EXIT`, that action can be returned.\n *   When the `Action` is `CONTINUE`, `Index` can be returned.\n * @template {UnistNode} [Visited=UnistNode]\n *   Visited node type.\n * @template {UnistParent} [VisitedParents=UnistParent]\n *   Ancestor type.\n */\n\n/**\n * @typedef {Visitor<Matches<InclusiveDescendant<Tree>, Check>, Ancestor<Tree, Matches<InclusiveDescendant<Tree>, Check>>>} BuildVisitor\n *   Build a typed `Visitor` function from a tree and a test.\n *\n *   It will infer which values are passed as `node` and which as `parents`.\n * @template {UnistNode} [Tree=UnistNode]\n *   Tree type.\n * @template {Test} [Check=Test]\n *   Test type.\n */\n\nimport {convert} from 'unist-util-is'\nimport {color} from 'unist-util-visit-parents/do-not-use-color'\n\n/** @type {Readonly<ActionTuple>} */\nconst empty = []\n\n/**\n * Continue traversing as normal.\n */\nexport const CONTINUE = true\n\n/**\n * Stop traversing immediately.\n */\nexport const EXIT = false\n\n/**\n * Do not traverse this node’s children.\n */\nexport const SKIP = 'skip'\n\n/**\n * Visit nodes, with ancestral information.\n *\n * This algorithm performs *depth-first* *tree traversal* in *preorder*\n * (**NLR**) or if `reverse` is given, in *reverse preorder* (**NRL**).\n *\n * You can choose for which nodes `visitor` is called by passing a `test`.\n * For complex tests, you should test yourself in `visitor`, as it will be\n * faster and will have improved type information.\n *\n * Walking the tree is an intensive task.\n * Make use of the return values of the visitor when possible.\n * Instead of walking a tree multiple times, walk it once, use `unist-util-is`\n * to check if a node matches, and then perform different operations.\n *\n * You can change the tree.\n * See `Visitor` for more info.\n *\n * @overload\n * @param {Tree} tree\n * @param {Check} check\n * @param {BuildVisitor<Tree, Check>} visitor\n * @param {boolean | null | undefined} [reverse]\n * @returns {undefined}\n *\n * @overload\n * @param {Tree} tree\n * @param {BuildVisitor<Tree>} visitor\n * @param {boolean | null | undefined} [reverse]\n * @returns {undefined}\n *\n * @param {UnistNode} tree\n *   Tree to traverse.\n * @param {Visitor | Test} test\n *   `unist-util-is`-compatible test\n * @param {Visitor | boolean | null | undefined} [visitor]\n *   Handle each node.\n * @param {boolean | null | undefined} [reverse]\n *   Traverse in reverse preorder (NRL) instead of the default preorder (NLR).\n * @returns {undefined}\n *   Nothing.\n *\n * @template {UnistNode} Tree\n *   Node type.\n * @template {Test} Check\n *   `unist-util-is`-compatible test.\n */\nexport function visitParents(tree, test, visitor, reverse) {\n  /** @type {Test} */\n  let check\n\n  if (typeof test === 'function' && typeof visitor !== 'function') {\n    reverse = visitor\n    // @ts-expect-error no visitor given, so `visitor` is test.\n    visitor = test\n  } else {\n    // @ts-expect-error visitor given, so `test` isn’t a visitor.\n    check = test\n  }\n\n  const is = convert(check)\n  const step = reverse ? -1 : 1\n\n  factory(tree, undefined, [])()\n\n  /**\n   * @param {UnistNode} node\n   * @param {number | undefined} index\n   * @param {Array<UnistParent>} parents\n   */\n  function factory(node, index, parents) {\n    const value = /** @type {Record<string, unknown>} */ (\n      node && typeof node === 'object' ? node : {}\n    )\n\n    if (typeof value.type === 'string') {\n      const name =\n        // `hast`\n        typeof value.tagName === 'string'\n          ? value.tagName\n          : // `xast`\n          typeof value.name === 'string'\n          ? value.name\n          : undefined\n\n      Object.defineProperty(visit, 'name', {\n        value:\n          'node (' + color(node.type + (name ? '<' + name + '>' : '')) + ')'\n      })\n    }\n\n    return visit\n\n    function visit() {\n      /** @type {Readonly<ActionTuple>} */\n      let result = empty\n      /** @type {Readonly<ActionTuple>} */\n      let subresult\n      /** @type {number} */\n      let offset\n      /** @type {Array<UnistParent>} */\n      let grandparents\n\n      if (!test || is(node, index, parents[parents.length - 1] || undefined)) {\n        // @ts-expect-error: `visitor` is now a visitor.\n        result = toResult(visitor(node, parents))\n\n        if (result[0] === EXIT) {\n          return result\n        }\n      }\n\n      if ('children' in node && node.children) {\n        const nodeAsParent = /** @type {UnistParent} */ (node)\n\n        if (nodeAsParent.children && result[0] !== SKIP) {\n          offset = (reverse ? nodeAsParent.children.length : -1) + step\n          grandparents = parents.concat(nodeAsParent)\n\n          while (offset > -1 && offset < nodeAsParent.children.length) {\n            const child = nodeAsParent.children[offset]\n\n            subresult = factory(child, offset, grandparents)()\n\n            if (subresult[0] === EXIT) {\n              return subresult\n            }\n\n            offset =\n              typeof subresult[1] === 'number' ? subresult[1] : offset + step\n          }\n        }\n      }\n\n      return result\n    }\n  }\n}\n\n/**\n * Turn a return value into a clean result.\n *\n * @param {VisitorResult} value\n *   Valid return values from visitors.\n * @returns {Readonly<ActionTuple>}\n *   Clean result.\n */\nfunction toResult(value) {\n  if (Array.isArray(value)) {\n    return value\n  }\n\n  if (typeof value === 'number') {\n    return [CONTINUE, value]\n  }\n\n  return value === null || value === undefined ? empty : [value]\n}\n","/**\n * @typedef {import('unist').Node} UnistNode\n * @typedef {import('unist').Parent} UnistParent\n * @typedef {import('unist-util-visit-parents').VisitorResult} VisitorResult\n */\n\n/**\n * @typedef {Exclude<import('unist-util-is').Test, undefined> | undefined} Test\n *   Test from `unist-util-is`.\n *\n *   Note: we have remove and add `undefined`, because otherwise when generating\n *   automatic `.d.ts` files, TS tries to flatten paths from a local perspective,\n *   which doesn’t work when publishing on npm.\n */\n\n// To do: use types from `unist-util-visit-parents` when it’s released.\n\n/**\n * @typedef {(\n *   Fn extends (value: any) => value is infer Thing\n *   ? Thing\n *   : Fallback\n * )} Predicate\n *   Get the value of a type guard `Fn`.\n * @template Fn\n *   Value; typically function that is a type guard (such as `(x): x is Y`).\n * @template Fallback\n *   Value to yield if `Fn` is not a type guard.\n */\n\n/**\n * @typedef {(\n *   Check extends null | undefined // No test.\n *   ? Value\n *   : Value extends {type: Check} // String (type) test.\n *   ? Value\n *   : Value extends Check // Partial test.\n *   ? Value\n *   : Check extends Function // Function test.\n *   ? Predicate<Check, Value> extends Value\n *     ? Predicate<Check, Value>\n *     : never\n *   : never // Some other test?\n * )} MatchesOne\n *   Check whether a node matches a primitive check in the type system.\n * @template Value\n *   Value; typically unist `Node`.\n * @template Check\n *   Value; typically `unist-util-is`-compatible test, but not arrays.\n */\n\n/**\n * @typedef {(\n *   Check extends Array<any>\n *   ? MatchesOne<Value, Check[keyof Check]>\n *   : MatchesOne<Value, Check>\n * )} Matches\n *   Check whether a node matches a check in the type system.\n * @template Value\n *   Value; typically unist `Node`.\n * @template Check\n *   Value; typically `unist-util-is`-compatible test.\n */\n\n/**\n * @typedef {0 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 | 10} Uint\n *   Number; capped reasonably.\n */\n\n/**\n * @typedef {I extends 0 ? 1 : I extends 1 ? 2 : I extends 2 ? 3 : I extends 3 ? 4 : I extends 4 ? 5 : I extends 5 ? 6 : I extends 6 ? 7 : I extends 7 ? 8 : I extends 8 ? 9 : 10} Increment\n *   Increment a number in the type system.\n * @template {Uint} [I=0]\n *   Index.\n */\n\n/**\n * @typedef {(\n *   Node extends UnistParent\n *   ? Node extends {children: Array<infer Children>}\n *     ? Child extends Children ? Node : never\n *     : never\n *   : never\n * )} InternalParent\n *   Collect nodes that can be parents of `Child`.\n * @template {UnistNode} Node\n *   All node types in a tree.\n * @template {UnistNode} Child\n *   Node to search for.\n */\n\n/**\n * @typedef {InternalParent<InclusiveDescendant<Tree>, Child>} Parent\n *   Collect nodes in `Tree` that can be parents of `Child`.\n * @template {UnistNode} Tree\n *   All node types in a tree.\n * @template {UnistNode} Child\n *   Node to search for.\n */\n\n/**\n * @typedef {(\n *   Depth extends Max\n *   ? never\n *   :\n *     | InternalParent<Node, Child>\n *     | InternalAncestor<Node, InternalParent<Node, Child>, Max, Increment<Depth>>\n * )} InternalAncestor\n *   Collect nodes in `Tree` that can be ancestors of `Child`.\n * @template {UnistNode} Node\n *   All node types in a tree.\n * @template {UnistNode} Child\n *   Node to search for.\n * @template {Uint} [Max=10]\n *   Max; searches up to this depth.\n * @template {Uint} [Depth=0]\n *   Current depth.\n */\n\n/**\n * @typedef {(\n *   Tree extends UnistParent\n *     ? Depth extends Max\n *       ? Tree\n *       : Tree | InclusiveDescendant<Tree['children'][number], Max, Increment<Depth>>\n *     : Tree\n * )} InclusiveDescendant\n *   Collect all (inclusive) descendants of `Tree`.\n *\n *   > 👉 **Note**: for performance reasons, this seems to be the fastest way to\n *   > recurse without actually running into an infinite loop, which the\n *   > previous version did.\n *   >\n *   > Practically, a max of `2` is typically enough assuming a `Root` is\n *   > passed, but it doesn’t improve performance.\n *   > It gets higher with `List > ListItem > Table > TableRow > TableCell`.\n *   > Using up to `10` doesn’t hurt or help either.\n * @template {UnistNode} Tree\n *   Tree type.\n * @template {Uint} [Max=10]\n *   Max; searches up to this depth.\n * @template {Uint} [Depth=0]\n *   Current depth.\n */\n\n/**\n * @callback Visitor\n *   Handle a node (matching `test`, if given).\n *\n *   Visitors are free to transform `node`.\n *   They can also transform `parent`.\n *\n *   Replacing `node` itself, if `SKIP` is not returned, still causes its\n *   descendants to be walked (which is a bug).\n *\n *   When adding or removing previous siblings of `node` (or next siblings, in\n *   case of reverse), the `Visitor` should return a new `Index` to specify the\n *   sibling to traverse after `node` is traversed.\n *   Adding or removing next siblings of `node` (or previous siblings, in case\n *   of reverse) is handled as expected without needing to return a new `Index`.\n *\n *   Removing the children property of `parent` still results in them being\n *   traversed.\n * @param {Visited} node\n *   Found node.\n * @param {Visited extends UnistNode ? number | undefined : never} index\n *   Index of `node` in `parent`.\n * @param {Ancestor extends UnistParent ? Ancestor | undefined : never} parent\n *   Parent of `node`.\n * @returns {VisitorResult}\n *   What to do next.\n *\n *   An `Index` is treated as a tuple of `[CONTINUE, Index]`.\n *   An `Action` is treated as a tuple of `[Action]`.\n *\n *   Passing a tuple back only makes sense if the `Action` is `SKIP`.\n *   When the `Action` is `EXIT`, that action can be returned.\n *   When the `Action` is `CONTINUE`, `Index` can be returned.\n * @template {UnistNode} [Visited=UnistNode]\n *   Visited node type.\n * @template {UnistParent} [Ancestor=UnistParent]\n *   Ancestor type.\n */\n\n/**\n * @typedef {Visitor<Visited, Parent<Ancestor, Visited>>} BuildVisitorFromMatch\n *   Build a typed `Visitor` function from a node and all possible parents.\n *\n *   It will infer which values are passed as `node` and which as `parent`.\n * @template {UnistNode} Visited\n *   Node type.\n * @template {UnistParent} Ancestor\n *   Parent type.\n */\n\n/**\n * @typedef {(\n *   BuildVisitorFromMatch<\n *     Matches<Descendant, Check>,\n *     Extract<Descendant, UnistParent>\n *   >\n * )} BuildVisitorFromDescendants\n *   Build a typed `Visitor` function from a list of descendants and a test.\n *\n *   It will infer which values are passed as `node` and which as `parent`.\n * @template {UnistNode} Descendant\n *   Node type.\n * @template {Test} Check\n *   Test type.\n */\n\n/**\n * @typedef {(\n *   BuildVisitorFromDescendants<\n *     InclusiveDescendant<Tree>,\n *     Check\n *   >\n * )} BuildVisitor\n *   Build a typed `Visitor` function from a tree and a test.\n *\n *   It will infer which values are passed as `node` and which as `parent`.\n * @template {UnistNode} [Tree=UnistNode]\n *   Node type.\n * @template {Test} [Check=Test]\n *   Test type.\n */\n\nimport {visitParents} from 'unist-util-visit-parents'\n\nexport {CONTINUE, EXIT, SKIP} from 'unist-util-visit-parents'\n\n/**\n * Visit nodes.\n *\n * This algorithm performs *depth-first* *tree traversal* in *preorder*\n * (**NLR**) or if `reverse` is given, in *reverse preorder* (**NRL**).\n *\n * You can choose for which nodes `visitor` is called by passing a `test`.\n * For complex tests, you should test yourself in `visitor`, as it will be\n * faster and will have improved type information.\n *\n * Walking the tree is an intensive task.\n * Make use of the return values of the visitor when possible.\n * Instead of walking a tree multiple times, walk it once, use `unist-util-is`\n * to check if a node matches, and then perform different operations.\n *\n * You can change the tree.\n * See `Visitor` for more info.\n *\n * @overload\n * @param {Tree} tree\n * @param {Check} check\n * @param {BuildVisitor<Tree, Check>} visitor\n * @param {boolean | null | undefined} [reverse]\n * @returns {undefined}\n *\n * @overload\n * @param {Tree} tree\n * @param {BuildVisitor<Tree>} visitor\n * @param {boolean | null | undefined} [reverse]\n * @returns {undefined}\n *\n * @param {UnistNode} tree\n *   Tree to traverse.\n * @param {Visitor | Test} testOrVisitor\n *   `unist-util-is`-compatible test (optional, omit to pass a visitor).\n * @param {Visitor | boolean | null | undefined} [visitorOrReverse]\n *   Handle each node (when test is omitted, pass `reverse`).\n * @param {boolean | null | undefined} [maybeReverse=false]\n *   Traverse in reverse preorder (NRL) instead of the default preorder (NLR).\n * @returns {undefined}\n *   Nothing.\n *\n * @template {UnistNode} Tree\n *   Node type.\n * @template {Test} Check\n *   `unist-util-is`-compatible test.\n */\nexport function visit(tree, testOrVisitor, visitorOrReverse, maybeReverse) {\n  /** @type {boolean | null | undefined} */\n  let reverse\n  /** @type {Test} */\n  let test\n  /** @type {Visitor} */\n  let visitor\n\n  if (\n    typeof testOrVisitor === 'function' &&\n    typeof visitorOrReverse !== 'function'\n  ) {\n    test = undefined\n    visitor = testOrVisitor\n    reverse = visitorOrReverse\n  } else {\n    // @ts-expect-error: assume the overload with test was given.\n    test = testOrVisitor\n    // @ts-expect-error: assume the overload with test was given.\n    visitor = visitorOrReverse\n    reverse = maybeReverse\n  }\n\n  visitParents(tree, test, overload, reverse)\n\n  /**\n   * @param {UnistNode} node\n   * @param {Array<UnistParent>} parents\n   */\n  function overload(node, parents) {\n    const parent = parents[parents.length - 1]\n    const index = parent ? parent.children.indexOf(node) : undefined\n    return visitor(node, index, parent)\n  }\n}\n","/**\n * @typedef {import('hast').ElementContent} ElementContent\n *\n * @typedef {import('mdast').Nodes} Nodes\n * @typedef {import('mdast').Reference} Reference\n *\n * @typedef {import('./state.js').State} State\n */\n\n// Make VS Code show references to the above types.\n''\n\n/**\n * Return the content of a reference without definition as plain text.\n *\n * @param {State} state\n *   Info passed around.\n * @param {Extract<Nodes, Reference>} node\n *   Reference node (image, link).\n * @returns {Array<ElementContent>}\n *   hast content.\n */\nexport function revert(state, node) {\n  const subtype = node.referenceType\n  let suffix = ']'\n\n  if (subtype === 'collapsed') {\n    suffix += '[]'\n  } else if (subtype === 'full') {\n    suffix += '[' + (node.label || node.identifier) + ']'\n  }\n\n  if (node.type === 'imageReference') {\n    return [{type: 'text', value: '![' + node.alt + suffix}]\n  }\n\n  const contents = state.all(node)\n  const head = contents[0]\n\n  if (head && head.type === 'text') {\n    head.value = '[' + head.value\n  } else {\n    contents.unshift({type: 'text', value: '['})\n  }\n\n  const tail = contents[contents.length - 1]\n\n  if (tail && tail.type === 'text') {\n    tail.value += suffix\n  } else {\n    contents.push({type: 'text', value: suffix})\n  }\n\n  return contents\n}\n","/**\n * @typedef {import('hast').Element} Element\n * @typedef {import('hast').ElementContent} ElementContent\n * @typedef {import('hast').Properties} Properties\n * @typedef {import('mdast').ListItem} ListItem\n * @typedef {import('mdast').Parents} Parents\n * @typedef {import('../state.js').State} State\n */\n\n// Make VS Code show references to the above types.\n''\n\n/**\n * Turn an mdast `listItem` node into hast.\n *\n * @param {State} state\n *   Info passed around.\n * @param {ListItem} node\n *   mdast node.\n * @param {Parents | undefined} parent\n *   Parent of `node`.\n * @returns {Element}\n *   hast node.\n */\nexport function listItem(state, node, parent) {\n  const results = state.all(node)\n  const loose = parent ? listLoose(parent) : listItemLoose(node)\n  /** @type {Properties} */\n  const properties = {}\n  /** @type {Array<ElementContent>} */\n  const children = []\n\n  if (typeof node.checked === 'boolean') {\n    const head = results[0]\n    /** @type {Element} */\n    let paragraph\n\n    if (head && head.type === 'element' && head.tagName === 'p') {\n      paragraph = head\n    } else {\n      paragraph = {type: 'element', tagName: 'p', properties: {}, children: []}\n      results.unshift(paragraph)\n    }\n\n    if (paragraph.children.length > 0) {\n      paragraph.children.unshift({type: 'text', value: ' '})\n    }\n\n    paragraph.children.unshift({\n      type: 'element',\n      tagName: 'input',\n      properties: {type: 'checkbox', checked: node.checked, disabled: true},\n      children: []\n    })\n\n    // According to github-markdown-css, this class hides bullet.\n    // See: <https://github.com/sindresorhus/github-markdown-css>.\n    properties.className = ['task-list-item']\n  }\n\n  let index = -1\n\n  while (++index < results.length) {\n    const child = results[index]\n\n    // Add eols before nodes, except if this is a loose, first paragraph.\n    if (\n      loose ||\n      index !== 0 ||\n      child.type !== 'element' ||\n      child.tagName !== 'p'\n    ) {\n      children.push({type: 'text', value: '\\n'})\n    }\n\n    if (child.type === 'element' && child.tagName === 'p' && !loose) {\n      children.push(...child.children)\n    } else {\n      children.push(child)\n    }\n  }\n\n  const tail = results[results.length - 1]\n\n  // Add a final eol.\n  if (tail && (loose || tail.type !== 'element' || tail.tagName !== 'p')) {\n    children.push({type: 'text', value: '\\n'})\n  }\n\n  /** @type {Element} */\n  const result = {type: 'element', tagName: 'li', properties, children}\n  state.patch(node, result)\n  return state.applyData(node, result)\n}\n\n/**\n * @param {Parents} node\n * @return {Boolean}\n */\nfunction listLoose(node) {\n  let loose = false\n  if (node.type === 'list') {\n    loose = node.spread || false\n    const children = node.children\n    let index = -1\n\n    while (!loose && ++index < children.length) {\n      loose = listItemLoose(children[index])\n    }\n  }\n\n  return loose\n}\n\n/**\n * @param {ListItem} node\n * @return {Boolean}\n */\nfunction listItemLoose(node) {\n  const spread = node.spread\n\n  return spread === null || spread === undefined\n    ? node.children.length > 1\n    : spread\n}\n","const tab = 9 /* `\\t` */\nconst space = 32 /* ` ` */\n\n/**\n * Remove initial and final spaces and tabs at the line breaks in `value`.\n * Does not trim initial and final spaces and tabs of the value itself.\n *\n * @param {string} value\n *   Value to trim.\n * @returns {string}\n *   Trimmed value.\n */\nexport function trimLines(value) {\n  const source = String(value)\n  const search = /\\r?\\n|\\r/g\n  let match = search.exec(source)\n  let last = 0\n  /** @type {Array<string>} */\n  const lines = []\n\n  while (match) {\n    lines.push(\n      trimLine(source.slice(last, match.index), last > 0, true),\n      match[0]\n    )\n\n    last = match.index + match[0].length\n    match = search.exec(source)\n  }\n\n  lines.push(trimLine(source.slice(last), last > 0, false))\n\n  return lines.join('')\n}\n\n/**\n * @param {string} value\n *   Line to trim.\n * @param {boolean} start\n *   Whether to trim the start of the line.\n * @param {boolean} end\n *   Whether to trim the end of the line.\n * @returns {string}\n *   Trimmed line.\n */\nfunction trimLine(value, start, end) {\n  let startIndex = 0\n  let endIndex = value.length\n\n  if (start) {\n    let code = value.codePointAt(startIndex)\n\n    while (code === tab || code === space) {\n      startIndex++\n      code = value.codePointAt(startIndex)\n    }\n  }\n\n  if (end) {\n    let code = value.codePointAt(endIndex - 1)\n\n    while (code === tab || code === space) {\n      endIndex--\n      code = value.codePointAt(endIndex - 1)\n    }\n  }\n\n  return endIndex > startIndex ? value.slice(startIndex, endIndex) : ''\n}\n","import {blockquote} from './blockquote.js'\nimport {hardBreak} from './break.js'\nimport {code} from './code.js'\nimport {strikethrough} from './delete.js'\nimport {emphasis} from './emphasis.js'\nimport {footnoteReference} from './footnote-reference.js'\nimport {heading} from './heading.js'\nimport {html} from './html.js'\nimport {imageReference} from './image-reference.js'\nimport {image} from './image.js'\nimport {inlineCode} from './inline-code.js'\nimport {linkReference} from './link-reference.js'\nimport {link} from './link.js'\nimport {listItem} from './list-item.js'\nimport {list} from './list.js'\nimport {paragraph} from './paragraph.js'\nimport {root} from './root.js'\nimport {strong} from './strong.js'\nimport {table} from './table.js'\nimport {tableRow} from './table-row.js'\nimport {tableCell} from './table-cell.js'\nimport {text} from './text.js'\nimport {thematicBreak} from './thematic-break.js'\n\n/**\n * Default handlers for nodes.\n *\n * @satisfies {import('../state.js').Handlers}\n */\nexport const handlers = {\n  blockquote,\n  break: hardBreak,\n  code,\n  delete: strikethrough,\n  emphasis,\n  footnoteReference,\n  heading,\n  html,\n  imageReference,\n  image,\n  inlineCode,\n  linkReference,\n  link,\n  listItem,\n  list,\n  paragraph,\n  // @ts-expect-error: root is different, but hard to type.\n  root,\n  strong,\n  table,\n  tableCell,\n  tableRow,\n  text,\n  thematicBreak,\n  toml: ignore,\n  yaml: ignore,\n  definition: ignore,\n  footnoteDefinition: ignore\n}\n\n// Return nothing for nodes that are ignored.\nfunction ignore() {\n  return undefined\n}\n","/**\n * @typedef {import('hast').Element} Element\n * @typedef {import('mdast').Blockquote} Blockquote\n * @typedef {import('../state.js').State} State\n */\n\n// Make VS Code show references to the above types.\n''\n\n/**\n * Turn an mdast `blockquote` node into hast.\n *\n * @param {State} state\n *   Info passed around.\n * @param {Blockquote} node\n *   mdast node.\n * @returns {Element}\n *   hast node.\n */\nexport function blockquote(state, node) {\n  /** @type {Element} */\n  const result = {\n    type: 'element',\n    tagName: 'blockquote',\n    properties: {},\n    children: state.wrap(state.all(node), true)\n  }\n  state.patch(node, result)\n  return state.applyData(node, result)\n}\n","/**\n * @typedef {import('hast').Element} Element\n * @typedef {import('hast').Text} Text\n * @typedef {import('mdast').Break} Break\n * @typedef {import('../state.js').State} State\n */\n\n// Make VS Code show references to the above types.\n''\n\n/**\n * Turn an mdast `break` node into hast.\n *\n * @param {State} state\n *   Info passed around.\n * @param {Break} node\n *   mdast node.\n * @returns {Array<Element | Text>}\n *   hast element content.\n */\nexport function hardBreak(state, node) {\n  /** @type {Element} */\n  const result = {type: 'element', tagName: 'br', properties: {}, children: []}\n  state.patch(node, result)\n  return [state.applyData(node, result), {type: 'text', value: '\\n'}]\n}\n","/**\n * @typedef {import('hast').Element} Element\n * @typedef {import('hast').Properties} Properties\n * @typedef {import('mdast').Code} Code\n * @typedef {import('../state.js').State} State\n */\n\n// Make VS Code show references to the above types.\n''\n\n/**\n * Turn an mdast `code` node into hast.\n *\n * @param {State} state\n *   Info passed around.\n * @param {Code} node\n *   mdast node.\n * @returns {Element}\n *   hast node.\n */\nexport function code(state, node) {\n  const value = node.value ? node.value + '\\n' : ''\n  /** @type {Properties} */\n  const properties = {}\n\n  if (node.lang) {\n    properties.className = ['language-' + node.lang]\n  }\n\n  // Create `<code>`.\n  /** @type {Element} */\n  let result = {\n    type: 'element',\n    tagName: 'code',\n    properties,\n    children: [{type: 'text', value}]\n  }\n\n  if (node.meta) {\n    result.data = {meta: node.meta}\n  }\n\n  state.patch(node, result)\n  result = state.applyData(node, result)\n\n  // Create `<pre>`.\n  result = {type: 'element', tagName: 'pre', properties: {}, children: [result]}\n  state.patch(node, result)\n  return result\n}\n","/**\n * @typedef {import('hast').Element} Element\n * @typedef {import('mdast').Delete} Delete\n * @typedef {import('../state.js').State} State\n */\n\n// Make VS Code show references to the above types.\n''\n\n/**\n * Turn an mdast `delete` node into hast.\n *\n * @param {State} state\n *   Info passed around.\n * @param {Delete} node\n *   mdast node.\n * @returns {Element}\n *   hast node.\n */\nexport function strikethrough(state, node) {\n  /** @type {Element} */\n  const result = {\n    type: 'element',\n    tagName: 'del',\n    properties: {},\n    children: state.all(node)\n  }\n  state.patch(node, result)\n  return state.applyData(node, result)\n}\n","/**\n * @typedef {import('hast').Element} Element\n * @typedef {import('mdast').Emphasis} Emphasis\n * @typedef {import('../state.js').State} State\n */\n\n// Make VS Code show references to the above types.\n''\n\n/**\n * Turn an mdast `emphasis` node into hast.\n *\n * @param {State} state\n *   Info passed around.\n * @param {Emphasis} node\n *   mdast node.\n * @returns {Element}\n *   hast node.\n */\nexport function emphasis(state, node) {\n  /** @type {Element} */\n  const result = {\n    type: 'element',\n    tagName: 'em',\n    properties: {},\n    children: state.all(node)\n  }\n  state.patch(node, result)\n  return state.applyData(node, result)\n}\n","/**\n * @typedef {import('hast').Element} Element\n * @typedef {import('mdast').FootnoteReference} FootnoteReference\n * @typedef {import('../state.js').State} State\n */\n\nimport {normalizeUri} from 'micromark-util-sanitize-uri'\n\n/**\n * Turn an mdast `footnoteReference` node into hast.\n *\n * @param {State} state\n *   Info passed around.\n * @param {FootnoteReference} node\n *   mdast node.\n * @returns {Element}\n *   hast node.\n */\nexport function footnoteReference(state, node) {\n  const clobberPrefix =\n    typeof state.options.clobberPrefix === 'string'\n      ? state.options.clobberPrefix\n      : 'user-content-'\n  const id = String(node.identifier).toUpperCase()\n  const safeId = normalizeUri(id.toLowerCase())\n  const index = state.footnoteOrder.indexOf(id)\n  /** @type {number} */\n  let counter\n\n  let reuseCounter = state.footnoteCounts.get(id)\n\n  if (reuseCounter === undefined) {\n    reuseCounter = 0\n    state.footnoteOrder.push(id)\n    counter = state.footnoteOrder.length\n  } else {\n    counter = index + 1\n  }\n\n  reuseCounter += 1\n  state.footnoteCounts.set(id, reuseCounter)\n\n  /** @type {Element} */\n  const link = {\n    type: 'element',\n    tagName: 'a',\n    properties: {\n      href: '#' + clobberPrefix + 'fn-' + safeId,\n      id:\n        clobberPrefix +\n        'fnref-' +\n        safeId +\n        (reuseCounter > 1 ? '-' + reuseCounter : ''),\n      dataFootnoteRef: true,\n      ariaDescribedBy: ['footnote-label']\n    },\n    children: [{type: 'text', value: String(counter)}]\n  }\n  state.patch(node, link)\n\n  /** @type {Element} */\n  const sup = {\n    type: 'element',\n    tagName: 'sup',\n    properties: {},\n    children: [link]\n  }\n  state.patch(node, sup)\n  return state.applyData(node, sup)\n}\n","/**\n * @typedef {import('hast').Element} Element\n * @typedef {import('mdast').Heading} Heading\n * @typedef {import('../state.js').State} State\n */\n\n// Make VS Code show references to the above types.\n''\n\n/**\n * Turn an mdast `heading` node into hast.\n *\n * @param {State} state\n *   Info passed around.\n * @param {Heading} node\n *   mdast node.\n * @returns {Element}\n *   hast node.\n */\nexport function heading(state, node) {\n  /** @type {Element} */\n  const result = {\n    type: 'element',\n    tagName: 'h' + node.depth,\n    properties: {},\n    children: state.all(node)\n  }\n  state.patch(node, result)\n  return state.applyData(node, result)\n}\n","/**\n * @typedef {import('hast').Element} Element\n * @typedef {import('mdast').Html} Html\n * @typedef {import('../state.js').State} State\n * @typedef {import('../../index.js').Raw} Raw\n */\n\n// Make VS Code show references to the above types.\n''\n\n/**\n * Turn an mdast `html` node into hast (`raw` node in dangerous mode, otherwise\n * nothing).\n *\n * @param {State} state\n *   Info passed around.\n * @param {Html} node\n *   mdast node.\n * @returns {Element | Raw | undefined}\n *   hast node.\n */\nexport function html(state, node) {\n  if (state.options.allowDangerousHtml) {\n    /** @type {Raw} */\n    const result = {type: 'raw', value: node.value}\n    state.patch(node, result)\n    return state.applyData(node, result)\n  }\n\n  return undefined\n}\n","/**\n * @typedef {import('hast').Element} Element\n * @typedef {import('hast').ElementContent} ElementContent\n * @typedef {import('hast').Properties} Properties\n * @typedef {import('mdast').ImageReference} ImageReference\n * @typedef {import('../state.js').State} State\n */\n\nimport {normalizeUri} from 'micromark-util-sanitize-uri'\nimport {revert} from '../revert.js'\n\n/**\n * Turn an mdast `imageReference` node into hast.\n *\n * @param {State} state\n *   Info passed around.\n * @param {ImageReference} node\n *   mdast node.\n * @returns {Array<ElementContent> | ElementContent}\n *   hast node.\n */\nexport function imageReference(state, node) {\n  const id = String(node.identifier).toUpperCase()\n  const def = state.definitionById.get(id)\n\n  if (!def) {\n    return revert(state, node)\n  }\n\n  /** @type {Properties} */\n  const properties = {src: normalizeUri(def.url || ''), alt: node.alt}\n\n  if (def.title !== null && def.title !== undefined) {\n    properties.title = def.title\n  }\n\n  /** @type {Element} */\n  const result = {type: 'element', tagName: 'img', properties, children: []}\n  state.patch(node, result)\n  return state.applyData(node, result)\n}\n","/**\n * @typedef {import('hast').Element} Element\n * @typedef {import('hast').Properties} Properties\n * @typedef {import('mdast').Image} Image\n * @typedef {import('../state.js').State} State\n */\n\nimport {normalizeUri} from 'micromark-util-sanitize-uri'\n\n/**\n * Turn an mdast `image` node into hast.\n *\n * @param {State} state\n *   Info passed around.\n * @param {Image} node\n *   mdast node.\n * @returns {Element}\n *   hast node.\n */\nexport function image(state, node) {\n  /** @type {Properties} */\n  const properties = {src: normalizeUri(node.url)}\n\n  if (node.alt !== null && node.alt !== undefined) {\n    properties.alt = node.alt\n  }\n\n  if (node.title !== null && node.title !== undefined) {\n    properties.title = node.title\n  }\n\n  /** @type {Element} */\n  const result = {type: 'element', tagName: 'img', properties, children: []}\n  state.patch(node, result)\n  return state.applyData(node, result)\n}\n","/**\n * @typedef {import('hast').Element} Element\n * @typedef {import('hast').Text} Text\n * @typedef {import('mdast').InlineCode} InlineCode\n * @typedef {import('../state.js').State} State\n */\n\n// Make VS Code show references to the above types.\n''\n\n/**\n * Turn an mdast `inlineCode` node into hast.\n *\n * @param {State} state\n *   Info passed around.\n * @param {InlineCode} node\n *   mdast node.\n * @returns {Element}\n *   hast node.\n */\nexport function inlineCode(state, node) {\n  /** @type {Text} */\n  const text = {type: 'text', value: node.value.replace(/\\r?\\n|\\r/g, ' ')}\n  state.patch(node, text)\n\n  /** @type {Element} */\n  const result = {\n    type: 'element',\n    tagName: 'code',\n    properties: {},\n    children: [text]\n  }\n  state.patch(node, result)\n  return state.applyData(node, result)\n}\n","/**\n * @typedef {import('hast').Element} Element\n * @typedef {import('hast').ElementContent} ElementContent\n * @typedef {import('hast').Properties} Properties\n * @typedef {import('mdast').LinkReference} LinkReference\n * @typedef {import('../state.js').State} State\n */\n\nimport {normalizeUri} from 'micromark-util-sanitize-uri'\nimport {revert} from '../revert.js'\n\n/**\n * Turn an mdast `linkReference` node into hast.\n *\n * @param {State} state\n *   Info passed around.\n * @param {LinkReference} node\n *   mdast node.\n * @returns {Array<ElementContent> | ElementContent}\n *   hast node.\n */\nexport function linkReference(state, node) {\n  const id = String(node.identifier).toUpperCase()\n  const def = state.definitionById.get(id)\n\n  if (!def) {\n    return revert(state, node)\n  }\n\n  /** @type {Properties} */\n  const properties = {href: normalizeUri(def.url || '')}\n\n  if (def.title !== null && def.title !== undefined) {\n    properties.title = def.title\n  }\n\n  /** @type {Element} */\n  const result = {\n    type: 'element',\n    tagName: 'a',\n    properties,\n    children: state.all(node)\n  }\n  state.patch(node, result)\n  return state.applyData(node, result)\n}\n","/**\n * @typedef {import('hast').Element} Element\n * @typedef {import('hast').Properties} Properties\n * @typedef {import('mdast').Link} Link\n * @typedef {import('../state.js').State} State\n */\n\nimport {normalizeUri} from 'micromark-util-sanitize-uri'\n\n/**\n * Turn an mdast `link` node into hast.\n *\n * @param {State} state\n *   Info passed around.\n * @param {Link} node\n *   mdast node.\n * @returns {Element}\n *   hast node.\n */\nexport function link(state, node) {\n  /** @type {Properties} */\n  const properties = {href: normalizeUri(node.url)}\n\n  if (node.title !== null && node.title !== undefined) {\n    properties.title = node.title\n  }\n\n  /** @type {Element} */\n  const result = {\n    type: 'element',\n    tagName: 'a',\n    properties,\n    children: state.all(node)\n  }\n  state.patch(node, result)\n  return state.applyData(node, result)\n}\n","/**\n * @typedef {import('hast').Element} Element\n * @typedef {import('hast').Properties} Properties\n * @typedef {import('mdast').List} List\n * @typedef {import('../state.js').State} State\n */\n\n// Make VS Code show references to the above types.\n''\n\n/**\n * Turn an mdast `list` node into hast.\n *\n * @param {State} state\n *   Info passed around.\n * @param {List} node\n *   mdast node.\n * @returns {Element}\n *   hast node.\n */\nexport function list(state, node) {\n  /** @type {Properties} */\n  const properties = {}\n  const results = state.all(node)\n  let index = -1\n\n  if (typeof node.start === 'number' && node.start !== 1) {\n    properties.start = node.start\n  }\n\n  // Like GitHub, add a class for custom styling.\n  while (++index < results.length) {\n    const child = results[index]\n\n    if (\n      child.type === 'element' &&\n      child.tagName === 'li' &&\n      child.properties &&\n      Array.isArray(child.properties.className) &&\n      child.properties.className.includes('task-list-item')\n    ) {\n      properties.className = ['contains-task-list']\n      break\n    }\n  }\n\n  /** @type {Element} */\n  const result = {\n    type: 'element',\n    tagName: node.ordered ? 'ol' : 'ul',\n    properties,\n    children: state.wrap(results, true)\n  }\n  state.patch(node, result)\n  return state.applyData(node, result)\n}\n","/**\n * @typedef {import('hast').Element} Element\n * @typedef {import('mdast').Paragraph} Paragraph\n * @typedef {import('../state.js').State} State\n */\n\n// Make VS Code show references to the above types.\n''\n\n/**\n * Turn an mdast `paragraph` node into hast.\n *\n * @param {State} state\n *   Info passed around.\n * @param {Paragraph} node\n *   mdast node.\n * @returns {Element}\n *   hast node.\n */\nexport function paragraph(state, node) {\n  /** @type {Element} */\n  const result = {\n    type: 'element',\n    tagName: 'p',\n    properties: {},\n    children: state.all(node)\n  }\n  state.patch(node, result)\n  return state.applyData(node, result)\n}\n","/**\n * @typedef {import('hast').Parents} HastParents\n * @typedef {import('hast').Root} HastRoot\n * @typedef {import('mdast').Root} MdastRoot\n * @typedef {import('../state.js').State} State\n */\n\n// Make VS Code show references to the above types.\n''\n\n/**\n * Turn an mdast `root` node into hast.\n *\n * @param {State} state\n *   Info passed around.\n * @param {MdastRoot} node\n *   mdast node.\n * @returns {HastParents}\n *   hast node.\n */\nexport function root(state, node) {\n  /** @type {HastRoot} */\n  const result = {type: 'root', children: state.wrap(state.all(node))}\n  state.patch(node, result)\n  return state.applyData(node, result)\n}\n","/**\n * @typedef {import('hast').Element} Element\n * @typedef {import('mdast').Strong} Strong\n * @typedef {import('../state.js').State} State\n */\n\n// Make VS Code show references to the above types.\n''\n\n/**\n * Turn an mdast `strong` node into hast.\n *\n * @param {State} state\n *   Info passed around.\n * @param {Strong} node\n *   mdast node.\n * @returns {Element}\n *   hast node.\n */\nexport function strong(state, node) {\n  /** @type {Element} */\n  const result = {\n    type: 'element',\n    tagName: 'strong',\n    properties: {},\n    children: state.all(node)\n  }\n  state.patch(node, result)\n  return state.applyData(node, result)\n}\n","/**\n * @typedef {import('hast').Element} Element\n * @typedef {import('mdast').Table} Table\n * @typedef {import('../state.js').State} State\n */\n\nimport {pointEnd, pointStart} from 'unist-util-position'\n\n/**\n * Turn an mdast `table` node into hast.\n *\n * @param {State} state\n *   Info passed around.\n * @param {Table} node\n *   mdast node.\n * @returns {Element}\n *   hast node.\n */\nexport function table(state, node) {\n  const rows = state.all(node)\n  const firstRow = rows.shift()\n  /** @type {Array<Element>} */\n  const tableContent = []\n\n  if (firstRow) {\n    /** @type {Element} */\n    const head = {\n      type: 'element',\n      tagName: 'thead',\n      properties: {},\n      children: state.wrap([firstRow], true)\n    }\n    state.patch(node.children[0], head)\n    tableContent.push(head)\n  }\n\n  if (rows.length > 0) {\n    /** @type {Element} */\n    const body = {\n      type: 'element',\n      tagName: 'tbody',\n      properties: {},\n      children: state.wrap(rows, true)\n    }\n\n    const start = pointStart(node.children[1])\n    const end = pointEnd(node.children[node.children.length - 1])\n    if (start && end) body.position = {start, end}\n    tableContent.push(body)\n  }\n\n  /** @type {Element} */\n  const result = {\n    type: 'element',\n    tagName: 'table',\n    properties: {},\n    children: state.wrap(tableContent, true)\n  }\n  state.patch(node, result)\n  return state.applyData(node, result)\n}\n","/**\n * @typedef {import('hast').Element} Element\n * @typedef {import('mdast').TableCell} TableCell\n * @typedef {import('../state.js').State} State\n */\n\n// Make VS Code show references to the above types.\n''\n\n/**\n * Turn an mdast `tableCell` node into hast.\n *\n * @param {State} state\n *   Info passed around.\n * @param {TableCell} node\n *   mdast node.\n * @returns {Element}\n *   hast node.\n */\nexport function tableCell(state, node) {\n  // Note: this function is normally not called: see `table-row` for how rows\n  // and their cells are compiled.\n  /** @type {Element} */\n  const result = {\n    type: 'element',\n    tagName: 'td', // Assume body cell.\n    properties: {},\n    children: state.all(node)\n  }\n  state.patch(node, result)\n  return state.applyData(node, result)\n}\n","/**\n * @typedef {import('hast').Element} Element\n * @typedef {import('hast').ElementContent} ElementContent\n * @typedef {import('hast').Properties} Properties\n * @typedef {import('mdast').Parents} Parents\n * @typedef {import('mdast').TableRow} TableRow\n * @typedef {import('../state.js').State} State\n */\n\n// Make VS Code show references to the above types.\n''\n\n/**\n * Turn an mdast `tableRow` node into hast.\n *\n * @param {State} state\n *   Info passed around.\n * @param {TableRow} node\n *   mdast node.\n * @param {Parents | undefined} parent\n *   Parent of `node`.\n * @returns {Element}\n *   hast node.\n */\nexport function tableRow(state, node, parent) {\n  const siblings = parent ? parent.children : undefined\n  // Generate a body row when without parent.\n  const rowIndex = siblings ? siblings.indexOf(node) : 1\n  const tagName = rowIndex === 0 ? 'th' : 'td'\n  // To do: option to use `style`?\n  const align = parent && parent.type === 'table' ? parent.align : undefined\n  const length = align ? align.length : node.children.length\n  let cellIndex = -1\n  /** @type {Array<ElementContent>} */\n  const cells = []\n\n  while (++cellIndex < length) {\n    // Note: can also be undefined.\n    const cell = node.children[cellIndex]\n    /** @type {Properties} */\n    const properties = {}\n    const alignValue = align ? align[cellIndex] : undefined\n\n    if (alignValue) {\n      properties.align = alignValue\n    }\n\n    /** @type {Element} */\n    let result = {type: 'element', tagName, properties, children: []}\n\n    if (cell) {\n      result.children = state.all(cell)\n      state.patch(cell, result)\n      result = state.applyData(cell, result)\n    }\n\n    cells.push(result)\n  }\n\n  /** @type {Element} */\n  const result = {\n    type: 'element',\n    tagName: 'tr',\n    properties: {},\n    children: state.wrap(cells, true)\n  }\n  state.patch(node, result)\n  return state.applyData(node, result)\n}\n","/**\n * @typedef {import('hast').Element} HastElement\n * @typedef {import('hast').Text} HastText\n * @typedef {import('mdast').Text} MdastText\n * @typedef {import('../state.js').State} State\n */\n\nimport {trimLines} from 'trim-lines'\n\n/**\n * Turn an mdast `text` node into hast.\n *\n * @param {State} state\n *   Info passed around.\n * @param {MdastText} node\n *   mdast node.\n * @returns {HastElement | HastText}\n *   hast node.\n */\nexport function text(state, node) {\n  /** @type {HastText} */\n  const result = {type: 'text', value: trimLines(String(node.value))}\n  state.patch(node, result)\n  return state.applyData(node, result)\n}\n","/**\n * @typedef {import('hast').Element} Element\n * @typedef {import('mdast').ThematicBreak} ThematicBreak\n * @typedef {import('../state.js').State} State\n */\n\n// Make VS Code show references to the above types.\n''\n\n/**\n * Turn an mdast `thematicBreak` node into hast.\n *\n * @param {State} state\n *   Info passed around.\n * @param {ThematicBreak} node\n *   mdast node.\n * @returns {Element}\n *   hast node.\n */\nexport function thematicBreak(state, node) {\n  /** @type {Element} */\n  const result = {\n    type: 'element',\n    tagName: 'hr',\n    properties: {},\n    children: []\n  }\n  state.patch(node, result)\n  return state.applyData(node, result)\n}\n","/**\n * @typedef {import('hast').Element} HastElement\n * @typedef {import('hast').ElementContent} HastElementContent\n * @typedef {import('hast').Nodes} HastNodes\n * @typedef {import('hast').Properties} HastProperties\n * @typedef {import('hast').RootContent} HastRootContent\n * @typedef {import('hast').Text} HastText\n *\n * @typedef {import('mdast').Definition} MdastDefinition\n * @typedef {import('mdast').FootnoteDefinition} MdastFootnoteDefinition\n * @typedef {import('mdast').Nodes} MdastNodes\n * @typedef {import('mdast').Parents} MdastParents\n *\n * @typedef {import('./footer.js').FootnoteBackContentTemplate} FootnoteBackContentTemplate\n * @typedef {import('./footer.js').FootnoteBackLabelTemplate} FootnoteBackLabelTemplate\n */\n\n/**\n * @callback Handler\n *   Handle a node.\n * @param {State} state\n *   Info passed around.\n * @param {any} node\n *   mdast node to handle.\n * @param {MdastParents | undefined} parent\n *   Parent of `node`.\n * @returns {Array<HastElementContent> | HastElementContent | undefined}\n *   hast node.\n *\n * @typedef {Partial<Record<MdastNodes['type'], Handler>>} Handlers\n *   Handle nodes.\n *\n * @typedef Options\n *   Configuration (optional).\n * @property {boolean | null | undefined} [allowDangerousHtml=false]\n *   Whether to persist raw HTML in markdown in the hast tree (default:\n *   `false`).\n * @property {string | null | undefined} [clobberPrefix='user-content-']\n *   Prefix to use before the `id` property on footnotes to prevent them from\n *   *clobbering* (default: `'user-content-'`).\n *\n *   Pass `''` for trusted markdown and when you are careful with\n *   polyfilling.\n *   You could pass a different prefix.\n *\n *   DOM clobbering is this:\n *\n *   ```html\n *   <p id=\"x\"></p>\n *   <script>alert(x) // `x` now refers to the `p#x` DOM element</script>\n *   ```\n *\n *   The above example shows that elements are made available by browsers, by\n *   their ID, on the `window` object.\n *   This is a security risk because you might be expecting some other variable\n *   at that place.\n *   It can also break polyfills.\n *   Using a prefix solves these problems.\n * @property {FootnoteBackContentTemplate | string | null | undefined} [footnoteBackContent]\n *   Content of the backreference back to references (default: `defaultFootnoteBackContent`).\n *\n *   The default value is:\n *\n *   ```js\n *   function defaultFootnoteBackContent(_, rereferenceIndex) {\n *     const result = [{type: 'text', value: '↩'}]\n *\n *     if (rereferenceIndex > 1) {\n *       result.push({\n *         type: 'element',\n *         tagName: 'sup',\n *         properties: {},\n *         children: [{type: 'text', value: String(rereferenceIndex)}]\n *       })\n *     }\n *\n *     return result\n *   }\n *   ```\n *\n *   This content is used in the `a` element of each backreference (the `↩`\n *   links).\n * @property {FootnoteBackLabelTemplate | string | null | undefined} [footnoteBackLabel]\n *   Label to describe the backreference back to references (default:\n *   `defaultFootnoteBackLabel`).\n *\n *   The default value is:\n *\n *   ```js\n *   function defaultFootnoteBackLabel(referenceIndex, rereferenceIndex) {\n *    return (\n *      'Back to reference ' +\n *      (referenceIndex + 1) +\n *      (rereferenceIndex > 1 ? '-' + rereferenceIndex : '')\n *    )\n *   }\n *   ```\n *\n *   Change it when the markdown is not in English.\n *\n *   This label is used in the `ariaLabel` property on each backreference\n *   (the `↩` links).\n *   It affects users of assistive technology.\n * @property {string | null | undefined} [footnoteLabel='Footnotes']\n *   Textual label to use for the footnotes section (default: `'Footnotes'`).\n *\n *   Change it when the markdown is not in English.\n *\n *   This label is typically hidden visually (assuming a `sr-only` CSS class\n *   is defined that does that) and so affects screen readers only.\n *   If you do have such a class, but want to show this section to everyone,\n *   pass different properties with the `footnoteLabelProperties` option.\n * @property {HastProperties | null | undefined} [footnoteLabelProperties={className: ['sr-only']}]\n *   Properties to use on the footnote label (default: `{className:\n *   ['sr-only']}`).\n *\n *   Change it to show the label and add other properties.\n *\n *   This label is typically hidden visually (assuming an `sr-only` CSS class\n *   is defined that does that) and so affects screen readers only.\n *   If you do have such a class, but want to show this section to everyone,\n *   pass an empty string.\n *   You can also add different properties.\n *\n *   > 👉 **Note**: `id: 'footnote-label'` is always added, because footnote\n *   > calls use it with `aria-describedby` to provide an accessible label.\n * @property {string | null | undefined} [footnoteLabelTagName='h2']\n *   HTML tag name to use for the footnote label element (default: `'h2'`).\n *\n *   Change it to match your document structure.\n *\n *   This label is typically hidden visually (assuming a `sr-only` CSS class\n *   is defined that does that) and so affects screen readers only.\n *   If you do have such a class, but want to show this section to everyone,\n *   pass different properties with the `footnoteLabelProperties` option.\n * @property {Handlers | null | undefined} [handlers]\n *   Extra handlers for nodes (optional).\n * @property {Array<MdastNodes['type']> | null | undefined} [passThrough]\n *   List of custom mdast node types to pass through (keep) in hast (note that\n *   the node itself is passed, but eventual children are transformed)\n *   (optional).\n * @property {Handler | null | undefined} [unknownHandler]\n *   Handler for all unknown nodes (optional).\n *\n * @typedef State\n *   Info passed around.\n * @property {(node: MdastNodes) => Array<HastElementContent>} all\n *   Transform the children of an mdast parent to hast.\n * @property {<Type extends HastNodes>(from: MdastNodes, to: Type) => HastElement | Type} applyData\n *   Honor the `data` of `from`, and generate an element instead of `node`.\n * @property {Map<string, MdastDefinition>} definitionById\n *   Definitions by their identifier.\n * @property {Map<string, MdastFootnoteDefinition>} footnoteById\n *   Footnote definitions by their identifier.\n * @property {Map<string, number>} footnoteCounts\n *   Counts for how often the same footnote was called.\n * @property {Array<string>} footnoteOrder\n *   Identifiers of order when footnote calls first appear in tree order.\n * @property {Handlers} handlers\n *   Applied handlers.\n * @property {(node: MdastNodes, parent: MdastParents | undefined) => Array<HastElementContent> | HastElementContent | undefined} one\n *   Transform an mdast node to hast.\n * @property {Options} options\n *   Configuration.\n * @property {(from: MdastNodes, node: HastNodes) => undefined} patch\n *   Copy a node’s positional info.\n * @property {<Type extends HastRootContent>(nodes: Array<Type>, loose?: boolean | undefined) => Array<HastText | Type>} wrap\n *   Wrap `nodes` with line endings between each node, adds initial/final line endings when `loose`.\n */\n\nimport structuredClone from '@ungap/structured-clone'\nimport {visit} from 'unist-util-visit'\nimport {position} from 'unist-util-position'\nimport {handlers as defaultHandlers} from './handlers/index.js'\n\nconst own = {}.hasOwnProperty\n\n/** @type {Options} */\nconst emptyOptions = {}\n\n/**\n * Create `state` from an mdast tree.\n *\n * @param {MdastNodes} tree\n *   mdast node to transform.\n * @param {Options | null | undefined} [options]\n *   Configuration (optional).\n * @returns {State}\n *   `state` function.\n */\nexport function createState(tree, options) {\n  const settings = options || emptyOptions\n  /** @type {Map<string, MdastDefinition>} */\n  const definitionById = new Map()\n  /** @type {Map<string, MdastFootnoteDefinition>} */\n  const footnoteById = new Map()\n  /** @type {Map<string, number>} */\n  const footnoteCounts = new Map()\n  /** @type {Handlers} */\n  // @ts-expect-error: the root handler returns a root.\n  // Hard to type.\n  const handlers = {...defaultHandlers, ...settings.handlers}\n\n  /** @type {State} */\n  const state = {\n    all,\n    applyData,\n    definitionById,\n    footnoteById,\n    footnoteCounts,\n    footnoteOrder: [],\n    handlers,\n    one,\n    options: settings,\n    patch,\n    wrap\n  }\n\n  visit(tree, function (node) {\n    if (node.type === 'definition' || node.type === 'footnoteDefinition') {\n      const map = node.type === 'definition' ? definitionById : footnoteById\n      const id = String(node.identifier).toUpperCase()\n\n      // Mimick CM behavior of link definitions.\n      // See: <https://github.com/syntax-tree/mdast-util-definitions/blob/9032189/lib/index.js#L20-L21>.\n      if (!map.has(id)) {\n        // @ts-expect-error: node type matches map.\n        map.set(id, node)\n      }\n    }\n  })\n\n  return state\n\n  /**\n   * Transform an mdast node into a hast node.\n   *\n   * @param {MdastNodes} node\n   *   mdast node.\n   * @param {MdastParents | undefined} [parent]\n   *   Parent of `node`.\n   * @returns {Array<HastElementContent> | HastElementContent | undefined}\n   *   Resulting hast node.\n   */\n  function one(node, parent) {\n    const type = node.type\n    const handle = state.handlers[type]\n\n    if (own.call(state.handlers, type) && handle) {\n      return handle(state, node, parent)\n    }\n\n    if (state.options.passThrough && state.options.passThrough.includes(type)) {\n      if ('children' in node) {\n        const {children, ...shallow} = node\n        const result = structuredClone(shallow)\n        // @ts-expect-error: TS doesn’t understand…\n        result.children = state.all(node)\n        // @ts-expect-error: TS doesn’t understand…\n        return result\n      }\n\n      // @ts-expect-error: it’s custom.\n      return structuredClone(node)\n    }\n\n    const unknown = state.options.unknownHandler || defaultUnknownHandler\n\n    return unknown(state, node, parent)\n  }\n\n  /**\n   * Transform the children of an mdast node into hast nodes.\n   *\n   * @param {MdastNodes} parent\n   *   mdast node to compile\n   * @returns {Array<HastElementContent>}\n   *   Resulting hast nodes.\n   */\n  function all(parent) {\n    /** @type {Array<HastElementContent>} */\n    const values = []\n\n    if ('children' in parent) {\n      const nodes = parent.children\n      let index = -1\n      while (++index < nodes.length) {\n        const result = state.one(nodes[index], parent)\n\n        // To do: see if we van clean this? Can we merge texts?\n        if (result) {\n          if (index && nodes[index - 1].type === 'break') {\n            if (!Array.isArray(result) && result.type === 'text') {\n              result.value = trimMarkdownSpaceStart(result.value)\n            }\n\n            if (!Array.isArray(result) && result.type === 'element') {\n              const head = result.children[0]\n\n              if (head && head.type === 'text') {\n                head.value = trimMarkdownSpaceStart(head.value)\n              }\n            }\n          }\n\n          if (Array.isArray(result)) {\n            values.push(...result)\n          } else {\n            values.push(result)\n          }\n        }\n      }\n    }\n\n    return values\n  }\n}\n\n/**\n * Copy a node’s positional info.\n *\n * @param {MdastNodes} from\n *   mdast node to copy from.\n * @param {HastNodes} to\n *   hast node to copy into.\n * @returns {undefined}\n *   Nothing.\n */\nfunction patch(from, to) {\n  if (from.position) to.position = position(from)\n}\n\n/**\n * Honor the `data` of `from` and maybe generate an element instead of `to`.\n *\n * @template {HastNodes} Type\n *   Node type.\n * @param {MdastNodes} from\n *   mdast node to use data from.\n * @param {Type} to\n *   hast node to change.\n * @returns {HastElement | Type}\n *   Nothing.\n */\nfunction applyData(from, to) {\n  /** @type {HastElement | Type} */\n  let result = to\n\n  // Handle `data.hName`, `data.hProperties, `data.hChildren`.\n  if (from && from.data) {\n    const hName = from.data.hName\n    const hChildren = from.data.hChildren\n    const hProperties = from.data.hProperties\n\n    if (typeof hName === 'string') {\n      // Transforming the node resulted in an element with a different name\n      // than wanted:\n      if (result.type === 'element') {\n        result.tagName = hName\n      }\n      // Transforming the node resulted in a non-element, which happens for\n      // raw, text, and root nodes (unless custom handlers are passed).\n      // The intent of `hName` is to create an element, but likely also to keep\n      // the content around (otherwise: pass `hChildren`).\n      else {\n        /** @type {Array<HastElementContent>} */\n        // @ts-expect-error: assume no doctypes in `root`.\n        const children = 'children' in result ? result.children : [result]\n        result = {type: 'element', tagName: hName, properties: {}, children}\n      }\n    }\n\n    if (result.type === 'element' && hProperties) {\n      Object.assign(result.properties, structuredClone(hProperties))\n    }\n\n    if (\n      'children' in result &&\n      result.children &&\n      hChildren !== null &&\n      hChildren !== undefined\n    ) {\n      result.children = hChildren\n    }\n  }\n\n  return result\n}\n\n/**\n * Transform an unknown node.\n *\n * @param {State} state\n *   Info passed around.\n * @param {MdastNodes} node\n *   Unknown mdast node.\n * @returns {HastElement | HastText}\n *   Resulting hast node.\n */\nfunction defaultUnknownHandler(state, node) {\n  const data = node.data || {}\n  /** @type {HastElement | HastText} */\n  const result =\n    'value' in node &&\n    !(own.call(data, 'hProperties') || own.call(data, 'hChildren'))\n      ? {type: 'text', value: node.value}\n      : {\n          type: 'element',\n          tagName: 'div',\n          properties: {},\n          children: state.all(node)\n        }\n\n  state.patch(node, result)\n  return state.applyData(node, result)\n}\n\n/**\n * Wrap `nodes` with line endings between each node.\n *\n * @template {HastRootContent} Type\n *   Node type.\n * @param {Array<Type>} nodes\n *   List of nodes to wrap.\n * @param {boolean | undefined} [loose=false]\n *   Whether to add line endings at start and end (default: `false`).\n * @returns {Array<HastText | Type>}\n *   Wrapped nodes.\n */\nexport function wrap(nodes, loose) {\n  /** @type {Array<HastText | Type>} */\n  const result = []\n  let index = -1\n\n  if (loose) {\n    result.push({type: 'text', value: '\\n'})\n  }\n\n  while (++index < nodes.length) {\n    if (index) result.push({type: 'text', value: '\\n'})\n    result.push(nodes[index])\n  }\n\n  if (loose && nodes.length > 0) {\n    result.push({type: 'text', value: '\\n'})\n  }\n\n  return result\n}\n\n/**\n * Trim spaces and tabs at the start of `value`.\n *\n * @param {string} value\n *   Value to trim.\n * @returns {string}\n *   Result.\n */\nfunction trimMarkdownSpaceStart(value) {\n  let index = 0\n  let code = value.charCodeAt(index)\n\n  while (code === 9 || code === 32) {\n    index++\n    code = value.charCodeAt(index)\n  }\n\n  return value.slice(index)\n}\n","/**\n * @typedef {import('hast').Nodes} HastNodes\n * @typedef {import('mdast').Nodes} MdastNodes\n * @typedef {import('./state.js').Options} Options\n */\n\nimport {ok as assert} from 'devlop'\nimport {footer} from './footer.js'\nimport {createState} from './state.js'\n\n/**\n * Transform mdast to hast.\n *\n * ##### Notes\n *\n * ###### HTML\n *\n * Raw HTML is available in mdast as `html` nodes and can be embedded in hast\n * as semistandard `raw` nodes.\n * Most utilities ignore `raw` nodes but two notable ones don’t:\n *\n * *   `hast-util-to-html` also has an option `allowDangerousHtml` which will\n *     output the raw HTML.\n *     This is typically discouraged as noted by the option name but is useful\n *     if you completely trust authors\n * *   `hast-util-raw` can handle the raw embedded HTML strings by parsing them\n *     into standard hast nodes (`element`, `text`, etc).\n *     This is a heavy task as it needs a full HTML parser, but it is the only\n *     way to support untrusted content\n *\n * ###### Footnotes\n *\n * Many options supported here relate to footnotes.\n * Footnotes are not specified by CommonMark, which we follow by default.\n * They are supported by GitHub, so footnotes can be enabled in markdown with\n * `mdast-util-gfm`.\n *\n * The options `footnoteBackLabel` and `footnoteLabel` define natural language\n * that explains footnotes, which is hidden for sighted users but shown to\n * assistive technology.\n * When your page is not in English, you must define translated values.\n *\n * Back references use ARIA attributes, but the section label itself uses a\n * heading that is hidden with an `sr-only` class.\n * To show it to sighted users, define different attributes in\n * `footnoteLabelProperties`.\n *\n * ###### Clobbering\n *\n * Footnotes introduces a problem, as it links footnote calls to footnote\n * definitions on the page through `id` attributes generated from user content,\n * which results in DOM clobbering.\n *\n * DOM clobbering is this:\n *\n * ```html\n * <p id=x></p>\n * <script>alert(x) // `x` now refers to the DOM `p#x` element</script>\n * ```\n *\n * Elements by their ID are made available by browsers on the `window` object,\n * which is a security risk.\n * Using a prefix solves this problem.\n *\n * More information on how to handle clobbering and the prefix is explained in\n * Example: headings (DOM clobbering) in `rehype-sanitize`.\n *\n * ###### Unknown nodes\n *\n * Unknown nodes are nodes with a type that isn’t in `handlers` or `passThrough`.\n * The default behavior for unknown nodes is:\n *\n * *   when the node has a `value` (and doesn’t have `data.hName`,\n *     `data.hProperties`, or `data.hChildren`, see later), create a hast `text`\n *     node\n * *   otherwise, create a `<div>` element (which could be changed with\n *     `data.hName`), with its children mapped from mdast to hast as well\n *\n * This behavior can be changed by passing an `unknownHandler`.\n *\n * @param {MdastNodes} tree\n *   mdast tree.\n * @param {Options | null | undefined} [options]\n *   Configuration (optional).\n * @returns {HastNodes}\n *   hast tree.\n */\nexport function toHast(tree, options) {\n  const state = createState(tree, options)\n  const node = state.one(tree, undefined)\n  const foot = footer(state)\n  /** @type {HastNodes} */\n  const result = Array.isArray(node)\n    ? {type: 'root', children: node}\n    : node || {type: 'root', children: []}\n\n  if (foot) {\n    // If there’s a footer, there were definitions, meaning block\n    // content.\n    // So `result` is a parent node.\n    assert('children' in result)\n    result.children.push({type: 'text', value: '\\n'}, foot)\n  }\n\n  return result\n}\n","// Include `data` fields in mdast and `raw` nodes in hast.\n/// <reference types=\"mdast-util-to-hast\" />\n\n/**\n * @typedef {import('hast').Root} HastRoot\n * @typedef {import('mdast').Root} MdastRoot\n * @typedef {import('mdast-util-to-hast').Options} Options\n * @typedef {import('unified').Processor} Processor\n * @typedef {import('vfile').VFile} VFile\n */\n\n/**\n * @callback TransformBridge\n *   Bridge-mode.\n *\n *   Runs the destination with the new hast tree.\n *   Discards result.\n * @param {MdastRoot} tree\n *   Tree.\n * @param {VFile} file\n *   File.\n * @returns {Promise<undefined>}\n *   Nothing.\n *\n * @callback TransformMutate\n *  Mutate-mode.\n *\n *  Further transformers run on the hast tree.\n * @param {MdastRoot} tree\n *   Tree.\n * @param {VFile} file\n *   File.\n * @returns {HastRoot}\n *   Tree (hast).\n */\n\nimport {toHast} from 'mdast-util-to-hast'\n\n/**\n * Turn markdown into HTML.\n *\n * ##### Notes\n *\n * ###### Signature\n *\n * *   if a processor is given, runs the (rehype) plugins used on it with a\n *     hast tree, then discards the result (*bridge mode*)\n * *   otherwise, returns a hast tree, the plugins used after `remarkRehype`\n *     are rehype plugins (*mutate mode*)\n *\n * > 👉 **Note**: It’s highly unlikely that you want to pass a `processor`.\n *\n * ###### HTML\n *\n * Raw HTML is available in mdast as `html` nodes and can be embedded in hast\n * as semistandard `raw` nodes.\n * Most plugins ignore `raw` nodes but two notable ones don’t:\n *\n * *   `rehype-stringify` also has an option `allowDangerousHtml` which will\n *     output the raw HTML.\n *     This is typically discouraged as noted by the option name but is useful if\n *     you completely trust authors\n * *   `rehype-raw` can handle the raw embedded HTML strings by parsing them\n *     into standard hast nodes (`element`, `text`, etc).\n *     This is a heavy task as it needs a full HTML parser, but it is the only way\n *     to support untrusted content\n *\n * ###### Footnotes\n *\n * Many options supported here relate to footnotes.\n * Footnotes are not specified by CommonMark, which we follow by default.\n * They are supported by GitHub, so footnotes can be enabled in markdown with\n * `remark-gfm`.\n *\n * The options `footnoteBackLabel` and `footnoteLabel` define natural language\n * that explains footnotes, which is hidden for sighted users but shown to\n * assistive technology.\n * When your page is not in English, you must define translated values.\n *\n * Back references use ARIA attributes, but the section label itself uses a\n * heading that is hidden with an `sr-only` class.\n * To show it to sighted users, define different attributes in\n * `footnoteLabelProperties`.\n *\n * ###### Clobbering\n *\n * Footnotes introduces a problem, as it links footnote calls to footnote\n * definitions on the page through `id` attributes generated from user content,\n * which results in DOM clobbering.\n *\n * DOM clobbering is this:\n *\n * ```html\n * <p id=x></p>\n * <script>alert(x) // `x` now refers to the DOM `p#x` element</script>\n * ```\n *\n * Elements by their ID are made available by browsers on the `window` object,\n * which is a security risk.\n * Using a prefix solves this problem.\n *\n * More information on how to handle clobbering and the prefix is explained in\n * *Example: headings (DOM clobbering)* in `rehype-sanitize`.\n *\n * ###### Unknown nodes\n *\n * Unknown nodes are nodes with a type that isn’t in `handlers` or `passThrough`.\n * The default behavior for unknown nodes is:\n *\n * *   when the node has a `value` (and doesn’t have `data.hName`,\n *     `data.hProperties`, or `data.hChildren`, see later), create a hast `text`\n *     node\n * *   otherwise, create a `<div>` element (which could be changed with\n *     `data.hName`), with its children mapped from mdast to hast as well\n *\n * This behavior can be changed by passing an `unknownHandler`.\n *\n * @overload\n * @param {Processor} processor\n * @param {Readonly<Options> | null | undefined} [options]\n * @returns {TransformBridge}\n *\n * @overload\n * @param {Readonly<Options> | null | undefined} [options]\n * @returns {TransformMutate}\n *\n * @param {Readonly<Options> | Processor | null | undefined} [destination]\n *   Processor or configuration (optional).\n * @param {Readonly<Options> | null | undefined} [options]\n *   When a processor was given, configuration (optional).\n * @returns {TransformBridge | TransformMutate}\n *   Transform.\n */\nexport default function remarkRehype(destination, options) {\n  if (destination && 'run' in destination) {\n    /**\n     * @type {TransformBridge}\n     */\n    return async function (tree, file) {\n      // Cast because root in -> root out.\n      const hastTree = /** @type {HastRoot} */ (toHast(tree, options))\n      await destination.run(hastTree, file)\n    }\n  }\n\n  /**\n   * @type {TransformMutate}\n   */\n  return function (tree) {\n    // Cast because root in -> root out.\n    return /** @type {HastRoot} */ (toHast(tree, options || destination))\n  }\n}\n","import arrayWithHoles from \"./arrayWithHoles.js\";\nimport iterableToArray from \"./iterableToArray.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableRest from \"./nonIterableRest.js\";\nexport default function _toArray(arr) {\n  return arrayWithHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableRest();\n}","/**\n * Throw a given error.\n *\n * @param {Error|null|undefined} [error]\n *   Maybe error.\n * @returns {asserts error is null|undefined}\n */\nexport function bail(error) {\n  if (error) {\n    throw error\n  }\n}\n","export default function isPlainObject(value) {\n\tif (typeof value !== 'object' || value === null) {\n\t\treturn false;\n\t}\n\n\tconst prototype = Object.getPrototypeOf(value);\n\treturn (prototype === null || prototype === Object.prototype || Object.getPrototypeOf(prototype) === null) && !(Symbol.toStringTag in value) && !(Symbol.iterator in value);\n}\n","/**\n * @typedef {(error?: Error|null|undefined, ...output: Array<any>) => void} Callback\n * @typedef {(...input: Array<any>) => any} Middleware\n *\n * @typedef {(...input: Array<any>) => void} Run\n *   Call all middleware.\n * @typedef {(fn: Middleware) => Pipeline} Use\n *   Add `fn` (middleware) to the list.\n * @typedef {{run: Run, use: Use}} Pipeline\n *   Middleware.\n */\n\n/**\n * Create new middleware.\n *\n * @returns {Pipeline}\n */\nexport function trough() {\n  /** @type {Array<Middleware>} */\n  const fns = []\n  /** @type {Pipeline} */\n  const pipeline = {run, use}\n\n  return pipeline\n\n  /** @type {Run} */\n  function run(...values) {\n    let middlewareIndex = -1\n    /** @type {Callback} */\n    const callback = values.pop()\n\n    if (typeof callback !== 'function') {\n      throw new TypeError('Expected function as last argument, not ' + callback)\n    }\n\n    next(null, ...values)\n\n    /**\n     * Run the next `fn`, or we’re done.\n     *\n     * @param {Error|null|undefined} error\n     * @param {Array<any>} output\n     */\n    function next(error, ...output) {\n      const fn = fns[++middlewareIndex]\n      let index = -1\n\n      if (error) {\n        callback(error)\n        return\n      }\n\n      // Copy non-nullish input into values.\n      while (++index < values.length) {\n        if (output[index] === null || output[index] === undefined) {\n          output[index] = values[index]\n        }\n      }\n\n      // Save the newly created `output` for the next call.\n      values = output\n\n      // Next or done.\n      if (fn) {\n        wrap(fn, next)(...output)\n      } else {\n        callback(null, ...output)\n      }\n    }\n  }\n\n  /** @type {Use} */\n  function use(middelware) {\n    if (typeof middelware !== 'function') {\n      throw new TypeError(\n        'Expected `middelware` to be a function, not ' + middelware\n      )\n    }\n\n    fns.push(middelware)\n    return pipeline\n  }\n}\n\n/**\n * Wrap `middleware`.\n * Can be sync or async; return a promise, receive a callback, or return new\n * values and errors.\n *\n * @param {Middleware} middleware\n * @param {Callback} callback\n */\nexport function wrap(middleware, callback) {\n  /** @type {boolean} */\n  let called\n\n  return wrapped\n\n  /**\n   * Call `middleware`.\n   * @this {any}\n   * @param {Array<any>} parameters\n   * @returns {void}\n   */\n  function wrapped(...parameters) {\n    const fnExpectsCallback = middleware.length > parameters.length\n    /** @type {any} */\n    let result\n\n    if (fnExpectsCallback) {\n      parameters.push(done)\n    }\n\n    try {\n      result = middleware.apply(this, parameters)\n    } catch (error) {\n      const exception = /** @type {Error} */ (error)\n\n      // Well, this is quite the pickle.\n      // `middleware` received a callback and called it synchronously, but that\n      // threw an error.\n      // The only thing left to do is to throw the thing instead.\n      if (fnExpectsCallback && called) {\n        throw exception\n      }\n\n      return done(exception)\n    }\n\n    if (!fnExpectsCallback) {\n      if (result instanceof Promise) {\n        result.then(then, done)\n      } else if (result instanceof Error) {\n        done(result)\n      } else {\n        then(result)\n      }\n    }\n  }\n\n  /**\n   * Call `callback`, only once.\n   * @type {Callback}\n   */\n  function done(error, ...output) {\n    if (!called) {\n      called = true\n      callback(error, ...output)\n    }\n  }\n\n  /**\n   * Call `done` with one value.\n   *\n   * @param {any} [value]\n   */\n  function then(value) {\n    done(null, value)\n  }\n}\n","// A derivative work based on:\n// <https://github.com/browserify/path-browserify>.\n// Which is licensed:\n//\n// MIT License\n//\n// Copyright (c) 2013 James Halliday\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy of\n// this software and associated documentation files (the \"Software\"), to deal in\n// the Software without restriction, including without limitation the rights to\n// use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of\n// the Software, and to permit persons to whom the Software is furnished to do so,\n// subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in all\n// copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS\n// FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR\n// COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\n// IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN\n// CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n// A derivative work based on:\n//\n// Parts of that are extracted from Node’s internal `path` module:\n// <https://github.com/nodejs/node/blob/master/lib/path.js>.\n// Which is licensed:\n//\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nexport const path = {basename, dirname, extname, join, sep: '/'}\n\n/* eslint-disable max-depth, complexity */\n\n/**\n * Get the basename from a path.\n *\n * @param {string} path\n *   File path.\n * @param {string | null | undefined} [ext]\n *   Extension to strip.\n * @returns {string}\n *   Stem or basename.\n */\nfunction basename(path, ext) {\n  if (ext !== undefined && typeof ext !== 'string') {\n    throw new TypeError('\"ext\" argument must be a string')\n  }\n\n  assertPath(path)\n  let start = 0\n  let end = -1\n  let index = path.length\n  /** @type {boolean | undefined} */\n  let seenNonSlash\n\n  if (ext === undefined || ext.length === 0 || ext.length > path.length) {\n    while (index--) {\n      if (path.codePointAt(index) === 47 /* `/` */) {\n        // If we reached a path separator that was not part of a set of path\n        // separators at the end of the string, stop now.\n        if (seenNonSlash) {\n          start = index + 1\n          break\n        }\n      } else if (end < 0) {\n        // We saw the first non-path separator, mark this as the end of our\n        // path component.\n        seenNonSlash = true\n        end = index + 1\n      }\n    }\n\n    return end < 0 ? '' : path.slice(start, end)\n  }\n\n  if (ext === path) {\n    return ''\n  }\n\n  let firstNonSlashEnd = -1\n  let extIndex = ext.length - 1\n\n  while (index--) {\n    if (path.codePointAt(index) === 47 /* `/` */) {\n      // If we reached a path separator that was not part of a set of path\n      // separators at the end of the string, stop now.\n      if (seenNonSlash) {\n        start = index + 1\n        break\n      }\n    } else {\n      if (firstNonSlashEnd < 0) {\n        // We saw the first non-path separator, remember this index in case\n        // we need it if the extension ends up not matching.\n        seenNonSlash = true\n        firstNonSlashEnd = index + 1\n      }\n\n      if (extIndex > -1) {\n        // Try to match the explicit extension.\n        if (path.codePointAt(index) === ext.codePointAt(extIndex--)) {\n          if (extIndex < 0) {\n            // We matched the extension, so mark this as the end of our path\n            // component\n            end = index\n          }\n        } else {\n          // Extension does not match, so our result is the entire path\n          // component\n          extIndex = -1\n          end = firstNonSlashEnd\n        }\n      }\n    }\n  }\n\n  if (start === end) {\n    end = firstNonSlashEnd\n  } else if (end < 0) {\n    end = path.length\n  }\n\n  return path.slice(start, end)\n}\n\n/**\n * Get the dirname from a path.\n *\n * @param {string} path\n *   File path.\n * @returns {string}\n *   File path.\n */\nfunction dirname(path) {\n  assertPath(path)\n\n  if (path.length === 0) {\n    return '.'\n  }\n\n  let end = -1\n  let index = path.length\n  /** @type {boolean | undefined} */\n  let unmatchedSlash\n\n  // Prefix `--` is important to not run on `0`.\n  while (--index) {\n    if (path.codePointAt(index) === 47 /* `/` */) {\n      if (unmatchedSlash) {\n        end = index\n        break\n      }\n    } else if (!unmatchedSlash) {\n      // We saw the first non-path separator\n      unmatchedSlash = true\n    }\n  }\n\n  return end < 0\n    ? path.codePointAt(0) === 47 /* `/` */\n      ? '/'\n      : '.'\n    : end === 1 && path.codePointAt(0) === 47 /* `/` */\n    ? '//'\n    : path.slice(0, end)\n}\n\n/**\n * Get an extname from a path.\n *\n * @param {string} path\n *   File path.\n * @returns {string}\n *   Extname.\n */\nfunction extname(path) {\n  assertPath(path)\n\n  let index = path.length\n\n  let end = -1\n  let startPart = 0\n  let startDot = -1\n  // Track the state of characters (if any) we see before our first dot and\n  // after any path separator we find.\n  let preDotState = 0\n  /** @type {boolean | undefined} */\n  let unmatchedSlash\n\n  while (index--) {\n    const code = path.codePointAt(index)\n\n    if (code === 47 /* `/` */) {\n      // If we reached a path separator that was not part of a set of path\n      // separators at the end of the string, stop now.\n      if (unmatchedSlash) {\n        startPart = index + 1\n        break\n      }\n\n      continue\n    }\n\n    if (end < 0) {\n      // We saw the first non-path separator, mark this as the end of our\n      // extension.\n      unmatchedSlash = true\n      end = index + 1\n    }\n\n    if (code === 46 /* `.` */) {\n      // If this is our first dot, mark it as the start of our extension.\n      if (startDot < 0) {\n        startDot = index\n      } else if (preDotState !== 1) {\n        preDotState = 1\n      }\n    } else if (startDot > -1) {\n      // We saw a non-dot and non-path separator before our dot, so we should\n      // have a good chance at having a non-empty extension.\n      preDotState = -1\n    }\n  }\n\n  if (\n    startDot < 0 ||\n    end < 0 ||\n    // We saw a non-dot character immediately before the dot.\n    preDotState === 0 ||\n    // The (right-most) trimmed path component is exactly `..`.\n    (preDotState === 1 && startDot === end - 1 && startDot === startPart + 1)\n  ) {\n    return ''\n  }\n\n  return path.slice(startDot, end)\n}\n\n/**\n * Join segments from a path.\n *\n * @param {Array<string>} segments\n *   Path segments.\n * @returns {string}\n *   File path.\n */\nfunction join(...segments) {\n  let index = -1\n  /** @type {string | undefined} */\n  let joined\n\n  while (++index < segments.length) {\n    assertPath(segments[index])\n\n    if (segments[index]) {\n      joined =\n        joined === undefined ? segments[index] : joined + '/' + segments[index]\n    }\n  }\n\n  return joined === undefined ? '.' : normalize(joined)\n}\n\n/**\n * Normalize a basic file path.\n *\n * @param {string} path\n *   File path.\n * @returns {string}\n *   File path.\n */\n// Note: `normalize` is not exposed as `path.normalize`, so some code is\n// manually removed from it.\nfunction normalize(path) {\n  assertPath(path)\n\n  const absolute = path.codePointAt(0) === 47 /* `/` */\n\n  // Normalize the path according to POSIX rules.\n  let value = normalizeString(path, !absolute)\n\n  if (value.length === 0 && !absolute) {\n    value = '.'\n  }\n\n  if (value.length > 0 && path.codePointAt(path.length - 1) === 47 /* / */) {\n    value += '/'\n  }\n\n  return absolute ? '/' + value : value\n}\n\n/**\n * Resolve `.` and `..` elements in a path with directory names.\n *\n * @param {string} path\n *   File path.\n * @param {boolean} allowAboveRoot\n *   Whether `..` can move above root.\n * @returns {string}\n *   File path.\n */\nfunction normalizeString(path, allowAboveRoot) {\n  let result = ''\n  let lastSegmentLength = 0\n  let lastSlash = -1\n  let dots = 0\n  let index = -1\n  /** @type {number | undefined} */\n  let code\n  /** @type {number} */\n  let lastSlashIndex\n\n  while (++index <= path.length) {\n    if (index < path.length) {\n      code = path.codePointAt(index)\n    } else if (code === 47 /* `/` */) {\n      break\n    } else {\n      code = 47 /* `/` */\n    }\n\n    if (code === 47 /* `/` */) {\n      if (lastSlash === index - 1 || dots === 1) {\n        // Empty.\n      } else if (lastSlash !== index - 1 && dots === 2) {\n        if (\n          result.length < 2 ||\n          lastSegmentLength !== 2 ||\n          result.codePointAt(result.length - 1) !== 46 /* `.` */ ||\n          result.codePointAt(result.length - 2) !== 46 /* `.` */\n        ) {\n          if (result.length > 2) {\n            lastSlashIndex = result.lastIndexOf('/')\n\n            if (lastSlashIndex !== result.length - 1) {\n              if (lastSlashIndex < 0) {\n                result = ''\n                lastSegmentLength = 0\n              } else {\n                result = result.slice(0, lastSlashIndex)\n                lastSegmentLength = result.length - 1 - result.lastIndexOf('/')\n              }\n\n              lastSlash = index\n              dots = 0\n              continue\n            }\n          } else if (result.length > 0) {\n            result = ''\n            lastSegmentLength = 0\n            lastSlash = index\n            dots = 0\n            continue\n          }\n        }\n\n        if (allowAboveRoot) {\n          result = result.length > 0 ? result + '/..' : '..'\n          lastSegmentLength = 2\n        }\n      } else {\n        if (result.length > 0) {\n          result += '/' + path.slice(lastSlash + 1, index)\n        } else {\n          result = path.slice(lastSlash + 1, index)\n        }\n\n        lastSegmentLength = index - lastSlash - 1\n      }\n\n      lastSlash = index\n      dots = 0\n    } else if (code === 46 /* `.` */ && dots > -1) {\n      dots++\n    } else {\n      dots = -1\n    }\n  }\n\n  return result\n}\n\n/**\n * Make sure `path` is a string.\n *\n * @param {string} path\n *   File path.\n * @returns {asserts path is string}\n *   Nothing.\n */\nfunction assertPath(path) {\n  if (typeof path !== 'string') {\n    throw new TypeError(\n      'Path must be a string. Received ' + JSON.stringify(path)\n    )\n  }\n}\n\n/* eslint-enable max-depth, complexity */\n","// Somewhat based on:\n// <https://github.com/defunctzombie/node-process/blob/master/browser.js>.\n// But I don’t think one tiny line of code can be copyrighted. 😅\nexport const proc = {cwd}\n\nfunction cwd() {\n  return '/'\n}\n","/**\n * Checks if a value has the shape of a WHATWG URL object.\n *\n * Using a symbol or instanceof would not be able to recognize URL objects\n * coming from other implementations (e.g. in Electron), so instead we are\n * checking some well known properties for a lack of a better test.\n *\n * We use `href` and `protocol` as they are the only properties that are\n * easy to retrieve and calculate due to the lazy nature of the getters.\n *\n * We check for auth attribute to distinguish legacy url instance with\n * WHATWG URL instance.\n *\n * @param {unknown} fileUrlOrPath\n *   File path or URL.\n * @returns {fileUrlOrPath is URL}\n *   Whether it’s a URL.\n */\n// From: <https://github.com/nodejs/node/blob/6a3403c/lib/internal/url.js#L720>\nexport function isUrl(fileUrlOrPath) {\n  return Boolean(\n    fileUrlOrPath !== null &&\n      typeof fileUrlOrPath === 'object' &&\n      'href' in fileUrlOrPath &&\n      fileUrlOrPath.href &&\n      'protocol' in fileUrlOrPath &&\n      fileUrlOrPath.protocol &&\n      // @ts-expect-error: indexing is fine.\n      fileUrlOrPath.auth === undefined\n  )\n}\n","import {isUrl} from './minurl.shared.js'\n\nexport {isUrl} from './minurl.shared.js'\n\n// See: <https://github.com/nodejs/node/blob/6a3403c/lib/internal/url.js>\n\n/**\n * @param {URL | string} path\n *   File URL.\n * @returns {string}\n *   File URL.\n */\nexport function urlToPath(path) {\n  if (typeof path === 'string') {\n    path = new URL(path)\n  } else if (!isUrl(path)) {\n    /** @type {NodeJS.ErrnoException} */\n    const error = new TypeError(\n      'The \"path\" argument must be of type string or an instance of URL. Received `' +\n        path +\n        '`'\n    )\n    error.code = 'ERR_INVALID_ARG_TYPE'\n    throw error\n  }\n\n  if (path.protocol !== 'file:') {\n    /** @type {NodeJS.ErrnoException} */\n    const error = new TypeError('The URL must be of scheme file')\n    error.code = 'ERR_INVALID_URL_SCHEME'\n    throw error\n  }\n\n  return getPathFromURLPosix(path)\n}\n\n/**\n * Get a path from a POSIX URL.\n *\n * @param {URL} url\n *   URL.\n * @returns {string}\n *   File path.\n */\nfunction getPathFromURLPosix(url) {\n  if (url.hostname !== '') {\n    /** @type {NodeJS.ErrnoException} */\n    const error = new TypeError(\n      'File URL host must be \"localhost\" or empty on darwin'\n    )\n    error.code = 'ERR_INVALID_FILE_URL_HOST'\n    throw error\n  }\n\n  const pathname = url.pathname\n  let index = -1\n\n  while (++index < pathname.length) {\n    if (\n      pathname.codePointAt(index) === 37 /* `%` */ &&\n      pathname.codePointAt(index + 1) === 50 /* `2` */\n    ) {\n      const third = pathname.codePointAt(index + 2)\n      if (third === 70 /* `F` */ || third === 102 /* `f` */) {\n        /** @type {NodeJS.ErrnoException} */\n        const error = new TypeError(\n          'File URL path must not include encoded / characters'\n        )\n        error.code = 'ERR_INVALID_FILE_URL_PATH'\n        throw error\n      }\n    }\n  }\n\n  return decodeURIComponent(pathname)\n}\n","/**\n * @typedef {import('unist').Node} Node\n * @typedef {import('unist').Point} Point\n * @typedef {import('unist').Position} Position\n * @typedef {import('vfile-message').Options} MessageOptions\n * @typedef {import('../index.js').Data} Data\n * @typedef {import('../index.js').Value} Value\n */\n\n/**\n * @typedef {object & {type: string, position?: Position | undefined}} NodeLike\n *\n * @typedef {Options | URL | VFile | Value} Compatible\n *   Things that can be passed to the constructor.\n *\n * @typedef VFileCoreOptions\n *   Set multiple values.\n * @property {string | null | undefined} [basename]\n *   Set `basename` (name).\n * @property {string | null | undefined} [cwd]\n *   Set `cwd` (working directory).\n * @property {Data | null | undefined} [data]\n *   Set `data` (associated info).\n * @property {string | null | undefined} [dirname]\n *   Set `dirname` (path w/o basename).\n * @property {string | null | undefined} [extname]\n *   Set `extname` (extension with dot).\n * @property {Array<string> | null | undefined} [history]\n *   Set `history` (paths the file moved between).\n * @property {URL | string | null | undefined} [path]\n *   Set `path` (current path).\n * @property {string | null | undefined} [stem]\n *   Set `stem` (name without extension).\n * @property {Value | null | undefined} [value]\n *   Set `value` (the contents of the file).\n *\n * @typedef Map\n *   Raw source map.\n *\n *   See:\n *   <https://github.com/mozilla/source-map/blob/60adcb0/source-map.d.ts#L15-L23>.\n * @property {number} version\n *   Which version of the source map spec this map is following.\n * @property {Array<string>} sources\n *   An array of URLs to the original source files.\n * @property {Array<string>} names\n *   An array of identifiers which can be referenced by individual mappings.\n * @property {string | undefined} [sourceRoot]\n *   The URL root from which all sources are relative.\n * @property {Array<string> | undefined} [sourcesContent]\n *   An array of contents of the original source files.\n * @property {string} mappings\n *   A string of base64 VLQs which contain the actual mappings.\n * @property {string} file\n *   The generated file this source map is associated with.\n *\n * @typedef {Record<string, unknown> & VFileCoreOptions} Options\n *   Configuration.\n *\n *   A bunch of keys that will be shallow copied over to the new file.\n *\n * @typedef {Record<string, unknown>} ReporterSettings\n *   Configuration for reporters.\n */\n\n/**\n * @template [Settings=ReporterSettings]\n *   Options type.\n * @callback Reporter\n *   Type for a reporter.\n * @param {Array<VFile>} files\n *   Files to report.\n * @param {Settings} options\n *   Configuration.\n * @returns {string}\n *   Report.\n */\n\nimport {VFileMessage} from 'vfile-message'\nimport {path} from 'vfile/do-not-use-conditional-minpath'\nimport {proc} from 'vfile/do-not-use-conditional-minproc'\nimport {urlToPath, isUrl} from 'vfile/do-not-use-conditional-minurl'\n\n/**\n * Order of setting (least specific to most), we need this because otherwise\n * `{stem: 'a', path: '~/b.js'}` would throw, as a path is needed before a\n * stem can be set.\n */\nconst order = /** @type {const} */ ([\n  'history',\n  'path',\n  'basename',\n  'stem',\n  'extname',\n  'dirname'\n])\n\nexport class VFile {\n  /**\n   * Create a new virtual file.\n   *\n   * `options` is treated as:\n   *\n   * *   `string` or `Uint8Array` — `{value: options}`\n   * *   `URL` — `{path: options}`\n   * *   `VFile` — shallow copies its data over to the new file\n   * *   `object` — all fields are shallow copied over to the new file\n   *\n   * Path related fields are set in the following order (least specific to\n   * most specific): `history`, `path`, `basename`, `stem`, `extname`,\n   * `dirname`.\n   *\n   * You cannot set `dirname` or `extname` without setting either `history`,\n   * `path`, `basename`, or `stem` too.\n   *\n   * @param {Compatible | null | undefined} [value]\n   *   File value.\n   * @returns\n   *   New instance.\n   */\n  constructor(value) {\n    /** @type {Options | VFile} */\n    let options\n\n    if (!value) {\n      options = {}\n    } else if (isUrl(value)) {\n      options = {path: value}\n    } else if (typeof value === 'string' || isUint8Array(value)) {\n      options = {value}\n    } else {\n      options = value\n    }\n\n    /* eslint-disable no-unused-expressions */\n\n    /**\n     * Base of `path` (default: `process.cwd()` or `'/'` in browsers).\n     *\n     * @type {string}\n     */\n    this.cwd = proc.cwd()\n\n    /**\n     * Place to store custom info (default: `{}`).\n     *\n     * It’s OK to store custom data directly on the file but moving it to\n     * `data` is recommended.\n     *\n     * @type {Data}\n     */\n    this.data = {}\n\n    /**\n     * List of file paths the file moved between.\n     *\n     * The first is the original path and the last is the current path.\n     *\n     * @type {Array<string>}\n     */\n    this.history = []\n\n    /**\n     * List of messages associated with the file.\n     *\n     * @type {Array<VFileMessage>}\n     */\n    this.messages = []\n\n    /**\n     * Raw value.\n     *\n     * @type {Value}\n     */\n    this.value\n\n    // The below are non-standard, they are “well-known”.\n    // As in, used in several tools.\n    /**\n     * Source map.\n     *\n     * This type is equivalent to the `RawSourceMap` type from the `source-map`\n     * module.\n     *\n     * @type {Map | null | undefined}\n     */\n    this.map\n\n    /**\n     * Custom, non-string, compiled, representation.\n     *\n     * This is used by unified to store non-string results.\n     * One example is when turning markdown into React nodes.\n     *\n     * @type {unknown}\n     */\n    this.result\n\n    /**\n     * Whether a file was saved to disk.\n     *\n     * This is used by vfile reporters.\n     *\n     * @type {boolean}\n     */\n    this.stored\n    /* eslint-enable no-unused-expressions */\n\n    // Set path related properties in the correct order.\n    let index = -1\n\n    while (++index < order.length) {\n      const prop = order[index]\n\n      // Note: we specifically use `in` instead of `hasOwnProperty` to accept\n      // `vfile`s too.\n      if (\n        prop in options &&\n        options[prop] !== undefined &&\n        options[prop] !== null\n      ) {\n        // @ts-expect-error: TS doesn’t understand basic reality.\n        this[prop] = prop === 'history' ? [...options[prop]] : options[prop]\n      }\n    }\n\n    /** @type {string} */\n    let prop\n\n    // Set non-path related properties.\n    for (prop in options) {\n      // @ts-expect-error: fine to set other things.\n      if (!order.includes(prop)) {\n        // @ts-expect-error: fine to set other things.\n        this[prop] = options[prop]\n      }\n    }\n  }\n\n  /**\n   * Get the basename (including extname) (example: `'index.min.js'`).\n   *\n   * @returns {string | undefined}\n   *   Basename.\n   */\n  get basename() {\n    return typeof this.path === 'string' ? path.basename(this.path) : undefined\n  }\n\n  /**\n   * Set basename (including extname) (`'index.min.js'`).\n   *\n   * Cannot contain path separators (`'/'` on unix, macOS, and browsers, `'\\'`\n   * on windows).\n   * Cannot be nullified (use `file.path = file.dirname` instead).\n   *\n   * @param {string} basename\n   *   Basename.\n   * @returns {undefined}\n   *   Nothing.\n   */\n  set basename(basename) {\n    assertNonEmpty(basename, 'basename')\n    assertPart(basename, 'basename')\n    this.path = path.join(this.dirname || '', basename)\n  }\n\n  /**\n   * Get the parent path (example: `'~'`).\n   *\n   * @returns {string | undefined}\n   *   Dirname.\n   */\n  get dirname() {\n    return typeof this.path === 'string' ? path.dirname(this.path) : undefined\n  }\n\n  /**\n   * Set the parent path (example: `'~'`).\n   *\n   * Cannot be set if there’s no `path` yet.\n   *\n   * @param {string | undefined} dirname\n   *   Dirname.\n   * @returns {undefined}\n   *   Nothing.\n   */\n  set dirname(dirname) {\n    assertPath(this.basename, 'dirname')\n    this.path = path.join(dirname || '', this.basename)\n  }\n\n  /**\n   * Get the extname (including dot) (example: `'.js'`).\n   *\n   * @returns {string | undefined}\n   *   Extname.\n   */\n  get extname() {\n    return typeof this.path === 'string' ? path.extname(this.path) : undefined\n  }\n\n  /**\n   * Set the extname (including dot) (example: `'.js'`).\n   *\n   * Cannot contain path separators (`'/'` on unix, macOS, and browsers, `'\\'`\n   * on windows).\n   * Cannot be set if there’s no `path` yet.\n   *\n   * @param {string | undefined} extname\n   *   Extname.\n   * @returns {undefined}\n   *   Nothing.\n   */\n  set extname(extname) {\n    assertPart(extname, 'extname')\n    assertPath(this.dirname, 'extname')\n\n    if (extname) {\n      if (extname.codePointAt(0) !== 46 /* `.` */) {\n        throw new Error('`extname` must start with `.`')\n      }\n\n      if (extname.includes('.', 1)) {\n        throw new Error('`extname` cannot contain multiple dots')\n      }\n    }\n\n    this.path = path.join(this.dirname, this.stem + (extname || ''))\n  }\n\n  /**\n   * Get the full path (example: `'~/index.min.js'`).\n   *\n   * @returns {string}\n   *   Path.\n   */\n  get path() {\n    return this.history[this.history.length - 1]\n  }\n\n  /**\n   * Set the full path (example: `'~/index.min.js'`).\n   *\n   * Cannot be nullified.\n   * You can set a file URL (a `URL` object with a `file:` protocol) which will\n   * be turned into a path with `url.fileURLToPath`.\n   *\n   * @param {URL | string} path\n   *   Path.\n   * @returns {undefined}\n   *   Nothing.\n   */\n  set path(path) {\n    if (isUrl(path)) {\n      path = urlToPath(path)\n    }\n\n    assertNonEmpty(path, 'path')\n\n    if (this.path !== path) {\n      this.history.push(path)\n    }\n  }\n\n  /**\n   * Get the stem (basename w/o extname) (example: `'index.min'`).\n   *\n   * @returns {string | undefined}\n   *   Stem.\n   */\n  get stem() {\n    return typeof this.path === 'string'\n      ? path.basename(this.path, this.extname)\n      : undefined\n  }\n\n  /**\n   * Set the stem (basename w/o extname) (example: `'index.min'`).\n   *\n   * Cannot contain path separators (`'/'` on unix, macOS, and browsers, `'\\'`\n   * on windows).\n   * Cannot be nullified (use `file.path = file.dirname` instead).\n   *\n   * @param {string} stem\n   *   Stem.\n   * @returns {undefined}\n   *   Nothing.\n   */\n  set stem(stem) {\n    assertNonEmpty(stem, 'stem')\n    assertPart(stem, 'stem')\n    this.path = path.join(this.dirname || '', stem + (this.extname || ''))\n  }\n\n  // Normal prototypal methods.\n  /**\n   * Create a fatal message for `reason` associated with the file.\n   *\n   * The `fatal` field of the message is set to `true` (error; file not usable)\n   * and the `file` field is set to the current file path.\n   * The message is added to the `messages` field on `file`.\n   *\n   * > 🪦 **Note**: also has obsolete signatures.\n   *\n   * @overload\n   * @param {string} reason\n   * @param {MessageOptions | null | undefined} [options]\n   * @returns {never}\n   *\n   * @overload\n   * @param {string} reason\n   * @param {Node | NodeLike | null | undefined} parent\n   * @param {string | null | undefined} [origin]\n   * @returns {never}\n   *\n   * @overload\n   * @param {string} reason\n   * @param {Point | Position | null | undefined} place\n   * @param {string | null | undefined} [origin]\n   * @returns {never}\n   *\n   * @overload\n   * @param {string} reason\n   * @param {string | null | undefined} [origin]\n   * @returns {never}\n   *\n   * @overload\n   * @param {Error | VFileMessage} cause\n   * @param {Node | NodeLike | null | undefined} parent\n   * @param {string | null | undefined} [origin]\n   * @returns {never}\n   *\n   * @overload\n   * @param {Error | VFileMessage} cause\n   * @param {Point | Position | null | undefined} place\n   * @param {string | null | undefined} [origin]\n   * @returns {never}\n   *\n   * @overload\n   * @param {Error | VFileMessage} cause\n   * @param {string | null | undefined} [origin]\n   * @returns {never}\n   *\n   * @param {Error | VFileMessage | string} causeOrReason\n   *   Reason for message, should use markdown.\n   * @param {Node | NodeLike | MessageOptions | Point | Position | string | null | undefined} [optionsOrParentOrPlace]\n   *   Configuration (optional).\n   * @param {string | null | undefined} [origin]\n   *   Place in code where the message originates (example:\n   *   `'my-package:my-rule'` or `'my-rule'`).\n   * @returns {never}\n   *   Never.\n   * @throws {VFileMessage}\n   *   Message.\n   */\n  fail(causeOrReason, optionsOrParentOrPlace, origin) {\n    // @ts-expect-error: the overloads are fine.\n    const message = this.message(causeOrReason, optionsOrParentOrPlace, origin)\n\n    message.fatal = true\n\n    throw message\n  }\n\n  /**\n   * Create an info message for `reason` associated with the file.\n   *\n   * The `fatal` field of the message is set to `undefined` (info; change\n   * likely not needed) and the `file` field is set to the current file path.\n   * The message is added to the `messages` field on `file`.\n   *\n   * > 🪦 **Note**: also has obsolete signatures.\n   *\n   * @overload\n   * @param {string} reason\n   * @param {MessageOptions | null | undefined} [options]\n   * @returns {VFileMessage}\n   *\n   * @overload\n   * @param {string} reason\n   * @param {Node | NodeLike | null | undefined} parent\n   * @param {string | null | undefined} [origin]\n   * @returns {VFileMessage}\n   *\n   * @overload\n   * @param {string} reason\n   * @param {Point | Position | null | undefined} place\n   * @param {string | null | undefined} [origin]\n   * @returns {VFileMessage}\n   *\n   * @overload\n   * @param {string} reason\n   * @param {string | null | undefined} [origin]\n   * @returns {VFileMessage}\n   *\n   * @overload\n   * @param {Error | VFileMessage} cause\n   * @param {Node | NodeLike | null | undefined} parent\n   * @param {string | null | undefined} [origin]\n   * @returns {VFileMessage}\n   *\n   * @overload\n   * @param {Error | VFileMessage} cause\n   * @param {Point | Position | null | undefined} place\n   * @param {string | null | undefined} [origin]\n   * @returns {VFileMessage}\n   *\n   * @overload\n   * @param {Error | VFileMessage} cause\n   * @param {string | null | undefined} [origin]\n   * @returns {VFileMessage}\n   *\n   * @param {Error | VFileMessage | string} causeOrReason\n   *   Reason for message, should use markdown.\n   * @param {Node | NodeLike | MessageOptions | Point | Position | string | null | undefined} [optionsOrParentOrPlace]\n   *   Configuration (optional).\n   * @param {string | null | undefined} [origin]\n   *   Place in code where the message originates (example:\n   *   `'my-package:my-rule'` or `'my-rule'`).\n   * @returns {VFileMessage}\n   *   Message.\n   */\n  info(causeOrReason, optionsOrParentOrPlace, origin) {\n    // @ts-expect-error: the overloads are fine.\n    const message = this.message(causeOrReason, optionsOrParentOrPlace, origin)\n\n    message.fatal = undefined\n\n    return message\n  }\n\n  /**\n   * Create a message for `reason` associated with the file.\n   *\n   * The `fatal` field of the message is set to `false` (warning; change may be\n   * needed) and the `file` field is set to the current file path.\n   * The message is added to the `messages` field on `file`.\n   *\n   * > 🪦 **Note**: also has obsolete signatures.\n   *\n   * @overload\n   * @param {string} reason\n   * @param {MessageOptions | null | undefined} [options]\n   * @returns {VFileMessage}\n   *\n   * @overload\n   * @param {string} reason\n   * @param {Node | NodeLike | null | undefined} parent\n   * @param {string | null | undefined} [origin]\n   * @returns {VFileMessage}\n   *\n   * @overload\n   * @param {string} reason\n   * @param {Point | Position | null | undefined} place\n   * @param {string | null | undefined} [origin]\n   * @returns {VFileMessage}\n   *\n   * @overload\n   * @param {string} reason\n   * @param {string | null | undefined} [origin]\n   * @returns {VFileMessage}\n   *\n   * @overload\n   * @param {Error | VFileMessage} cause\n   * @param {Node | NodeLike | null | undefined} parent\n   * @param {string | null | undefined} [origin]\n   * @returns {VFileMessage}\n   *\n   * @overload\n   * @param {Error | VFileMessage} cause\n   * @param {Point | Position | null | undefined} place\n   * @param {string | null | undefined} [origin]\n   * @returns {VFileMessage}\n   *\n   * @overload\n   * @param {Error | VFileMessage} cause\n   * @param {string | null | undefined} [origin]\n   * @returns {VFileMessage}\n   *\n   * @param {Error | VFileMessage | string} causeOrReason\n   *   Reason for message, should use markdown.\n   * @param {Node | NodeLike | MessageOptions | Point | Position | string | null | undefined} [optionsOrParentOrPlace]\n   *   Configuration (optional).\n   * @param {string | null | undefined} [origin]\n   *   Place in code where the message originates (example:\n   *   `'my-package:my-rule'` or `'my-rule'`).\n   * @returns {VFileMessage}\n   *   Message.\n   */\n  message(causeOrReason, optionsOrParentOrPlace, origin) {\n    const message = new VFileMessage(\n      // @ts-expect-error: the overloads are fine.\n      causeOrReason,\n      optionsOrParentOrPlace,\n      origin\n    )\n\n    if (this.path) {\n      message.name = this.path + ':' + message.name\n      message.file = this.path\n    }\n\n    message.fatal = false\n\n    this.messages.push(message)\n\n    return message\n  }\n\n  /**\n   * Serialize the file.\n   *\n   * > **Note**: which encodings are supported depends on the engine.\n   * > For info on Node.js, see:\n   * > <https://nodejs.org/api/util.html#whatwg-supported-encodings>.\n   *\n   * @param {string | null | undefined} [encoding='utf8']\n   *   Character encoding to understand `value` as when it’s a `Uint8Array`\n   *   (default: `'utf-8'`).\n   * @returns {string}\n   *   Serialized file.\n   */\n  toString(encoding) {\n    if (this.value === undefined) {\n      return ''\n    }\n\n    if (typeof this.value === 'string') {\n      return this.value\n    }\n\n    const decoder = new TextDecoder(encoding || undefined)\n    return decoder.decode(this.value)\n  }\n}\n\n/**\n * Assert that `part` is not a path (as in, does not contain `path.sep`).\n *\n * @param {string | null | undefined} part\n *   File path part.\n * @param {string} name\n *   Part name.\n * @returns {undefined}\n *   Nothing.\n */\nfunction assertPart(part, name) {\n  if (part && part.includes(path.sep)) {\n    throw new Error(\n      '`' + name + '` cannot be a path: did not expect `' + path.sep + '`'\n    )\n  }\n}\n\n/**\n * Assert that `part` is not empty.\n *\n * @param {string | undefined} part\n *   Thing.\n * @param {string} name\n *   Part name.\n * @returns {asserts part is string}\n *   Nothing.\n */\nfunction assertNonEmpty(part, name) {\n  if (!part) {\n    throw new Error('`' + name + '` cannot be empty')\n  }\n}\n\n/**\n * Assert `path` exists.\n *\n * @param {string | undefined} path\n *   Path.\n * @param {string} name\n *   Dependency name.\n * @returns {asserts path is string}\n *   Nothing.\n */\nfunction assertPath(path, name) {\n  if (!path) {\n    throw new Error('Setting `' + name + '` requires `path` to be set too')\n  }\n}\n\n/**\n * Assert `value` is an `Uint8Array`.\n *\n * @param {unknown} value\n *   thing.\n * @returns {value is Uint8Array}\n *   Whether `value` is an `Uint8Array`.\n */\nfunction isUint8Array(value) {\n  return Boolean(\n    value &&\n      typeof value === 'object' &&\n      'byteLength' in value &&\n      'byteOffset' in value\n  )\n}\n","export const CallableInstance =\n  /**\n   * @type {new <Parameters extends Array<unknown>, Result>(property: string | symbol) => (...parameters: Parameters) => Result}\n   */\n  (\n    /** @type {unknown} */\n    (\n      /**\n       * @this {Function}\n       * @param {string | symbol} property\n       * @returns {(...parameters: Array<unknown>) => unknown}\n       */\n      function (property) {\n        const self = this\n        const constr = self.constructor\n        const proto = /** @type {Record<string | symbol, Function>} */ (\n          // Prototypes do exist.\n          // type-coverage:ignore-next-line\n          constr.prototype\n        )\n        const func = proto[property]\n        /** @type {(...parameters: Array<unknown>) => unknown} */\n        const apply = function () {\n          return func.apply(apply, arguments)\n        }\n\n        Object.setPrototypeOf(apply, proto)\n\n        const names = Object.getOwnPropertyNames(func)\n\n        for (const p of names) {\n          const descriptor = Object.getOwnPropertyDescriptor(func, p)\n          if (descriptor) Object.defineProperty(apply, p, descriptor)\n        }\n\n        return apply\n      }\n    )\n  )\n","/**\n * @typedef {import('trough').Pipeline} Pipeline\n *\n * @typedef {import('unist').Node} Node\n *\n * @typedef {import('vfile').Compatible} Compatible\n * @typedef {import('vfile').Value} Value\n *\n * @typedef {import('../index.js').CompileResultMap} CompileResultMap\n * @typedef {import('../index.js').Data} Data\n * @typedef {import('../index.js').Settings} Settings\n */\n\n/**\n * @typedef {CompileResultMap[keyof CompileResultMap]} CompileResults\n *   Acceptable results from compilers.\n *\n *   To register custom results, add them to\n *   {@link CompileResultMap `CompileResultMap`}.\n */\n\n/**\n * @template {Node} [Tree=Node]\n *   The node that the compiler receives (default: `Node`).\n * @template {CompileResults} [Result=CompileResults]\n *   The thing that the compiler yields (default: `CompileResults`).\n * @callback Compiler\n *   A **compiler** handles the compiling of a syntax tree to something else\n *   (in most cases, text) (TypeScript type).\n *\n *   It is used in the stringify phase and called with a {@link Node `Node`}\n *   and {@link VFile `VFile`} representation of the document to compile.\n *   It should return the textual representation of the given tree (typically\n *   `string`).\n *\n *   > 👉 **Note**: unified typically compiles by serializing: most compilers\n *   > return `string` (or `Uint8Array`).\n *   > Some compilers, such as the one configured with\n *   > [`rehype-react`][rehype-react], return other values (in this case, a\n *   > React tree).\n *   > If you’re using a compiler that doesn’t serialize, expect different\n *   > result values.\n *   >\n *   > To register custom results in TypeScript, add them to\n *   > {@link CompileResultMap `CompileResultMap`}.\n *\n *   [rehype-react]: https://github.com/rehypejs/rehype-react\n * @param {Tree} tree\n *   Tree to compile.\n * @param {VFile} file\n *   File associated with `tree`.\n * @returns {Result}\n *   New content: compiled text (`string` or `Uint8Array`, for `file.value`) or\n *   something else (for `file.result`).\n */\n\n/**\n * @template {Node} [Tree=Node]\n *   The node that the parser yields (default: `Node`)\n * @callback Parser\n *   A **parser** handles the parsing of text to a syntax tree.\n *\n *   It is used in the parse phase and is called with a `string` and\n *   {@link VFile `VFile`} of the document to parse.\n *   It must return the syntax tree representation of the given file\n *   ({@link Node `Node`}).\n * @param {string} document\n *   Document to parse.\n * @param {VFile} file\n *   File associated with `document`.\n * @returns {Tree}\n *   Node representing the given file.\n */\n\n/**\n * @typedef {(\n *   Plugin<Array<any>, any, any> |\n *   PluginTuple<Array<any>, any, any> |\n *   Preset\n * )} Pluggable\n *   Union of the different ways to add plugins and settings.\n */\n\n/**\n * @typedef {Array<Pluggable>} PluggableList\n *   List of plugins and presets.\n */\n\n// Note: we can’t use `callback` yet as it messes up `this`:\n//  <https://github.com/microsoft/TypeScript/issues/55197>.\n/**\n * @template {Array<unknown>} [PluginParameters=[]]\n *   Arguments passed to the plugin (default: `[]`, the empty tuple).\n * @template {Node | string | undefined} [Input=Node]\n *   Value that is expected as input (default: `Node`).\n *\n *   *   If the plugin returns a {@link Transformer `Transformer`}, this\n *       should be the node it expects.\n *   *   If the plugin sets a {@link Parser `Parser`}, this should be\n *       `string`.\n *   *   If the plugin sets a {@link Compiler `Compiler`}, this should be the\n *       node it expects.\n * @template [Output=Input]\n *   Value that is yielded as output (default: `Input`).\n *\n *   *   If the plugin returns a {@link Transformer `Transformer`}, this\n *       should be the node that that yields.\n *   *   If the plugin sets a {@link Parser `Parser`}, this should be the\n *       node that it yields.\n *   *   If the plugin sets a {@link Compiler `Compiler`}, this should be\n *       result it yields.\n * @typedef {(\n *   (this: Processor, ...parameters: PluginParameters) =>\n *     Input extends string ? // Parser.\n *        Output extends Node | undefined ? undefined | void : never :\n *     Output extends CompileResults ? // Compiler.\n *        Input extends Node | undefined ? undefined | void : never :\n *     Transformer<\n *       Input extends Node ? Input : Node,\n *       Output extends Node ? Output : Node\n *     > | undefined | void\n * )} Plugin\n *   Single plugin.\n *\n *   Plugins configure the processors they are applied on in the following\n *   ways:\n *\n *   *   they change the processor, such as the parser, the compiler, or by\n *       configuring data\n *   *   they specify how to handle trees and files\n *\n *   In practice, they are functions that can receive options and configure the\n *   processor (`this`).\n *\n *   > 👉 **Note**: plugins are called when the processor is *frozen*, not when\n *   > they are applied.\n */\n\n/**\n * Tuple of a plugin and its configuration.\n *\n * The first item is a plugin, the rest are its parameters.\n *\n * @template {Array<unknown>} [TupleParameters=[]]\n *   Arguments passed to the plugin (default: `[]`, the empty tuple).\n * @template {Node | string | undefined} [Input=undefined]\n *   Value that is expected as input (optional).\n *\n *   *   If the plugin returns a {@link Transformer `Transformer`}, this\n *       should be the node it expects.\n *   *   If the plugin sets a {@link Parser `Parser`}, this should be\n *       `string`.\n *   *   If the plugin sets a {@link Compiler `Compiler`}, this should be the\n *       node it expects.\n * @template [Output=undefined] (optional).\n *   Value that is yielded as output.\n *\n *   *   If the plugin returns a {@link Transformer `Transformer`}, this\n *       should be the node that that yields.\n *   *   If the plugin sets a {@link Parser `Parser`}, this should be the\n *       node that it yields.\n *   *   If the plugin sets a {@link Compiler `Compiler`}, this should be\n *       result it yields.\n * @typedef {(\n *   [\n *     plugin: Plugin<TupleParameters, Input, Output>,\n *     ...parameters: TupleParameters\n *   ]\n * )} PluginTuple\n */\n\n/**\n * @typedef Preset\n *   Sharable configuration.\n *\n *   They can contain plugins and settings.\n * @property {PluggableList | undefined} [plugins]\n *   List of plugins and presets (optional).\n * @property {Settings | undefined} [settings]\n *   Shared settings for parsers and compilers (optional).\n */\n\n/**\n * @template {VFile} [File=VFile]\n *   The file that the callback receives (default: `VFile`).\n * @callback ProcessCallback\n *   Callback called when the process is done.\n *\n *   Called with either an error or a result.\n * @param {Error | undefined} [error]\n *   Fatal error (optional).\n * @param {File | undefined} [file]\n *   Processed file (optional).\n * @returns {undefined}\n *   Nothing.\n */\n\n/**\n * @template {Node} [Tree=Node]\n *   The tree that the callback receives (default: `Node`).\n * @callback RunCallback\n *   Callback called when transformers are done.\n *\n *   Called with either an error or results.\n * @param {Error | undefined} [error]\n *   Fatal error (optional).\n * @param {Tree | undefined} [tree]\n *   Transformed tree (optional).\n * @param {VFile | undefined} [file]\n *   File (optional).\n * @returns {undefined}\n *   Nothing.\n */\n\n/**\n * @template {Node} [Output=Node]\n *   Node type that the transformer yields (default: `Node`).\n * @callback TransformCallback\n *   Callback passed to transforms.\n *\n *   If the signature of a `transformer` accepts a third argument, the\n *   transformer may perform asynchronous operations, and must call it.\n * @param {Error | undefined} [error]\n *   Fatal error to stop the process (optional).\n * @param {Output | undefined} [tree]\n *   New, changed, tree (optional).\n * @param {VFile | undefined} [file]\n *   New, changed, file (optional).\n * @returns {undefined}\n *   Nothing.\n */\n\n/**\n * @template {Node} [Input=Node]\n *   Node type that the transformer expects (default: `Node`).\n * @template {Node} [Output=Input]\n *   Node type that the transformer yields (default: `Input`).\n * @callback Transformer\n *   Transformers handle syntax trees and files.\n *\n *   They are functions that are called each time a syntax tree and file are\n *   passed through the run phase.\n *   When an error occurs in them (either because it’s thrown, returned,\n *   rejected, or passed to `next`), the process stops.\n *\n *   The run phase is handled by [`trough`][trough], see its documentation for\n *   the exact semantics of these functions.\n *\n *   > 👉 **Note**: you should likely ignore `next`: don’t accept it.\n *   > it supports callback-style async work.\n *   > But promises are likely easier to reason about.\n *\n *   [trough]: https://github.com/wooorm/trough#function-fninput-next\n * @param {Input} tree\n *   Tree to handle.\n * @param {VFile} file\n *   File to handle.\n * @param {TransformCallback<Output>} next\n *   Callback.\n * @returns {(\n *   Promise<Output | undefined | void> |\n *   Promise<never> | // For some reason this is needed separately.\n *   Output |\n *   Error |\n *   undefined |\n *   void\n * )}\n *   If you accept `next`, nothing.\n *   Otherwise:\n *\n *   *   `Error` — fatal error to stop the process\n *   *   `Promise<undefined>` or `undefined` — the next transformer keeps using\n *       same tree\n *   *   `Promise<Node>` or `Node` — new, changed, tree\n */\n\n/**\n * @template {Node | undefined} ParseTree\n *   Output of `parse`.\n * @template {Node | undefined} HeadTree\n *   Input for `run`.\n * @template {Node | undefined} TailTree\n *   Output for `run`.\n * @template {Node | undefined} CompileTree\n *   Input of `stringify`.\n * @template {CompileResults | undefined} CompileResult\n *   Output of `stringify`.\n * @template {Node | string | undefined} Input\n *   Input of plugin.\n * @template Output\n *   Output of plugin (optional).\n * @typedef {(\n *   Input extends string\n *     ? Output extends Node | undefined\n *       ? // Parser.\n *         Processor<\n *           Output extends undefined ? ParseTree : Output,\n *           HeadTree,\n *           TailTree,\n *           CompileTree,\n *           CompileResult\n *         >\n *       : // Unknown.\n *         Processor<ParseTree, HeadTree, TailTree, CompileTree, CompileResult>\n *     : Output extends CompileResults\n *     ? Input extends Node | undefined\n *       ? // Compiler.\n *         Processor<\n *           ParseTree,\n *           HeadTree,\n *           TailTree,\n *           Input extends undefined ? CompileTree : Input,\n *           Output extends undefined ? CompileResult : Output\n *         >\n *       : // Unknown.\n *         Processor<ParseTree, HeadTree, TailTree, CompileTree, CompileResult>\n *     : Input extends Node | undefined\n *     ? Output extends Node | undefined\n *       ? // Transform.\n *         Processor<\n *           ParseTree,\n *           HeadTree extends undefined ? Input : HeadTree,\n *           Output extends undefined ? TailTree : Output,\n *           CompileTree,\n *           CompileResult\n *         >\n *       : // Unknown.\n *         Processor<ParseTree, HeadTree, TailTree, CompileTree, CompileResult>\n *     : // Unknown.\n *       Processor<ParseTree, HeadTree, TailTree, CompileTree, CompileResult>\n * )} UsePlugin\n *   Create a processor based on the input/output of a {@link Plugin plugin}.\n */\n\n/**\n * @template {CompileResults | undefined} Result\n *   Node type that the transformer yields.\n * @typedef {(\n *   Result extends Value | undefined ?\n *     VFile :\n *     VFile & {result: Result}\n *   )} VFileWithOutput\n *   Type to generate a {@link VFile `VFile`} corresponding to a compiler result.\n *\n *   If a result that is not acceptable on a `VFile` is used, that will\n *   be stored on the `result` field of {@link VFile `VFile`}.\n */\n\nimport {bail} from 'bail'\nimport extend from 'extend'\nimport {ok as assert} from 'devlop'\nimport isPlainObj from 'is-plain-obj'\nimport {trough} from 'trough'\nimport {VFile} from 'vfile'\nimport {CallableInstance} from './callable-instance.js'\n\n// To do: next major: drop `Compiler`, `Parser`: prefer lowercase.\n\n// To do: we could start yielding `never` in TS when a parser is missing and\n// `parse` is called.\n// Currently, we allow directly setting `processor.parser`, which is untyped.\n\nconst own = {}.hasOwnProperty\n\n/**\n * @template {Node | undefined} [ParseTree=undefined]\n *   Output of `parse` (optional).\n * @template {Node | undefined} [HeadTree=undefined]\n *   Input for `run` (optional).\n * @template {Node | undefined} [TailTree=undefined]\n *   Output for `run` (optional).\n * @template {Node | undefined} [CompileTree=undefined]\n *   Input of `stringify` (optional).\n * @template {CompileResults | undefined} [CompileResult=undefined]\n *   Output of `stringify` (optional).\n * @extends {CallableInstance<[], Processor<ParseTree, HeadTree, TailTree, CompileTree, CompileResult>>}\n */\nexport class Processor extends CallableInstance {\n  /**\n   * Create a processor.\n   */\n  constructor() {\n    // If `Processor()` is called (w/o new), `copy` is called instead.\n    super('copy')\n\n    /**\n     * Compiler to use (deprecated).\n     *\n     * @deprecated\n     *   Use `compiler` instead.\n     * @type {(\n     *   Compiler<\n     *     CompileTree extends undefined ? Node : CompileTree,\n     *     CompileResult extends undefined ? CompileResults : CompileResult\n     *   > |\n     *   undefined\n     * )}\n     */\n    this.Compiler = undefined\n\n    /**\n     * Parser to use (deprecated).\n     *\n     * @deprecated\n     *   Use `parser` instead.\n     * @type {(\n     *   Parser<ParseTree extends undefined ? Node : ParseTree> |\n     *   undefined\n     * )}\n     */\n    this.Parser = undefined\n\n    // Note: the following fields are considered private.\n    // However, they are needed for tests, and TSC generates an untyped\n    // `private freezeIndex` field for, which trips `type-coverage` up.\n    // Instead, we use `@deprecated` to visualize that they shouldn’t be used.\n    /**\n     * Internal list of configured plugins.\n     *\n     * @deprecated\n     *   This is a private internal property and should not be used.\n     * @type {Array<PluginTuple<Array<unknown>>>}\n     */\n    this.attachers = []\n\n    /**\n     * Compiler to use.\n     *\n     * @type {(\n     *   Compiler<\n     *     CompileTree extends undefined ? Node : CompileTree,\n     *     CompileResult extends undefined ? CompileResults : CompileResult\n     *   > |\n     *   undefined\n     * )}\n     */\n    this.compiler = undefined\n\n    /**\n     * Internal state to track where we are while freezing.\n     *\n     * @deprecated\n     *   This is a private internal property and should not be used.\n     * @type {number}\n     */\n    this.freezeIndex = -1\n\n    /**\n     * Internal state to track whether we’re frozen.\n     *\n     * @deprecated\n     *   This is a private internal property and should not be used.\n     * @type {boolean | undefined}\n     */\n    this.frozen = undefined\n\n    /**\n     * Internal state.\n     *\n     * @deprecated\n     *   This is a private internal property and should not be used.\n     * @type {Data}\n     */\n    this.namespace = {}\n\n    /**\n     * Parser to use.\n     *\n     * @type {(\n     *   Parser<ParseTree extends undefined ? Node : ParseTree> |\n     *   undefined\n     * )}\n     */\n    this.parser = undefined\n\n    /**\n     * Internal list of configured transformers.\n     *\n     * @deprecated\n     *   This is a private internal property and should not be used.\n     * @type {Pipeline}\n     */\n    this.transformers = trough()\n  }\n\n  /**\n   * Copy a processor.\n   *\n   * @deprecated\n   *   This is a private internal method and should not be used.\n   * @returns {Processor<ParseTree, HeadTree, TailTree, CompileTree, CompileResult>}\n   *   New *unfrozen* processor ({@link Processor `Processor`}) that is\n   *   configured to work the same as its ancestor.\n   *   When the descendant processor is configured in the future it does not\n   *   affect the ancestral processor.\n   */\n  copy() {\n    // Cast as the type parameters will be the same after attaching.\n    const destination =\n      /** @type {Processor<ParseTree, HeadTree, TailTree, CompileTree, CompileResult>} */ (\n        new Processor()\n      )\n    let index = -1\n\n    while (++index < this.attachers.length) {\n      const attacher = this.attachers[index]\n      destination.use(...attacher)\n    }\n\n    destination.data(extend(true, {}, this.namespace))\n\n    return destination\n  }\n\n  /**\n   * Configure the processor with info available to all plugins.\n   * Information is stored in an object.\n   *\n   * Typically, options can be given to a specific plugin, but sometimes it\n   * makes sense to have information shared with several plugins.\n   * For example, a list of HTML elements that are self-closing, which is\n   * needed during all phases.\n   *\n   * > 👉 **Note**: setting information cannot occur on *frozen* processors.\n   * > Call the processor first to create a new unfrozen processor.\n   *\n   * > 👉 **Note**: to register custom data in TypeScript, augment the\n   * > {@link Data `Data`} interface.\n   *\n   * @example\n   *   This example show how to get and set info:\n   *\n   *   ```js\n   *   import {unified} from 'unified'\n   *\n   *   const processor = unified().data('alpha', 'bravo')\n   *\n   *   processor.data('alpha') // => 'bravo'\n   *\n   *   processor.data() // => {alpha: 'bravo'}\n   *\n   *   processor.data({charlie: 'delta'})\n   *\n   *   processor.data() // => {charlie: 'delta'}\n   *   ```\n   *\n   * @template {keyof Data} Key\n   *\n   * @overload\n   * @returns {Data}\n   *\n   * @overload\n   * @param {Data} dataset\n   * @returns {Processor<ParseTree, HeadTree, TailTree, CompileTree, CompileResult>}\n   *\n   * @overload\n   * @param {Key} key\n   * @returns {Data[Key]}\n   *\n   * @overload\n   * @param {Key} key\n   * @param {Data[Key]} value\n   * @returns {Processor<ParseTree, HeadTree, TailTree, CompileTree, CompileResult>}\n   *\n   * @param {Data | Key} [key]\n   *   Key to get or set, or entire dataset to set, or nothing to get the\n   *   entire dataset (optional).\n   * @param {Data[Key]} [value]\n   *   Value to set (optional).\n   * @returns {unknown}\n   *   The current processor when setting, the value at `key` when getting, or\n   *   the entire dataset when getting without key.\n   */\n  data(key, value) {\n    if (typeof key === 'string') {\n      // Set `key`.\n      if (arguments.length === 2) {\n        assertUnfrozen('data', this.frozen)\n        this.namespace[key] = value\n        return this\n      }\n\n      // Get `key`.\n      return (own.call(this.namespace, key) && this.namespace[key]) || undefined\n    }\n\n    // Set space.\n    if (key) {\n      assertUnfrozen('data', this.frozen)\n      this.namespace = key\n      return this\n    }\n\n    // Get space.\n    return this.namespace\n  }\n\n  /**\n   * Freeze a processor.\n   *\n   * Frozen processors are meant to be extended and not to be configured\n   * directly.\n   *\n   * When a processor is frozen it cannot be unfrozen.\n   * New processors working the same way can be created by calling the\n   * processor.\n   *\n   * It’s possible to freeze processors explicitly by calling `.freeze()`.\n   * Processors freeze automatically when `.parse()`, `.run()`, `.runSync()`,\n   * `.stringify()`, `.process()`, or `.processSync()` are called.\n   *\n   * @returns {Processor<ParseTree, HeadTree, TailTree, CompileTree, CompileResult>}\n   *   The current processor.\n   */\n  freeze() {\n    if (this.frozen) {\n      return this\n    }\n\n    // Cast so that we can type plugins easier.\n    // Plugins are supposed to be usable on different processors, not just on\n    // this exact processor.\n    const self = /** @type {Processor} */ (/** @type {unknown} */ (this))\n\n    while (++this.freezeIndex < this.attachers.length) {\n      const [attacher, ...options] = this.attachers[this.freezeIndex]\n\n      if (options[0] === false) {\n        continue\n      }\n\n      if (options[0] === true) {\n        options[0] = undefined\n      }\n\n      const transformer = attacher.call(self, ...options)\n\n      if (typeof transformer === 'function') {\n        this.transformers.use(transformer)\n      }\n    }\n\n    this.frozen = true\n    this.freezeIndex = Number.POSITIVE_INFINITY\n\n    return this\n  }\n\n  /**\n   * Parse text to a syntax tree.\n   *\n   * > 👉 **Note**: `parse` freezes the processor if not already *frozen*.\n   *\n   * > 👉 **Note**: `parse` performs the parse phase, not the run phase or other\n   * > phases.\n   *\n   * @param {Compatible | undefined} [file]\n   *   file to parse (optional); typically `string` or `VFile`; any value\n   *   accepted as `x` in `new VFile(x)`.\n   * @returns {ParseTree extends undefined ? Node : ParseTree}\n   *   Syntax tree representing `file`.\n   */\n  parse(file) {\n    this.freeze()\n    const realFile = vfile(file)\n    const parser = this.parser || this.Parser\n    assertParser('parse', parser)\n    return parser(String(realFile), realFile)\n  }\n\n  /**\n   * Process the given file as configured on the processor.\n   *\n   * > 👉 **Note**: `process` freezes the processor if not already *frozen*.\n   *\n   * > 👉 **Note**: `process` performs the parse, run, and stringify phases.\n   *\n   * @overload\n   * @param {Compatible | undefined} file\n   * @param {ProcessCallback<VFileWithOutput<CompileResult>>} done\n   * @returns {undefined}\n   *\n   * @overload\n   * @param {Compatible | undefined} [file]\n   * @returns {Promise<VFileWithOutput<CompileResult>>}\n   *\n   * @param {Compatible | undefined} [file]\n   *   File (optional); typically `string` or `VFile`]; any value accepted as\n   *   `x` in `new VFile(x)`.\n   * @param {ProcessCallback<VFileWithOutput<CompileResult>> | undefined} [done]\n   *   Callback (optional).\n   * @returns {Promise<VFile> | undefined}\n   *   Nothing if `done` is given.\n   *   Otherwise a promise, rejected with a fatal error or resolved with the\n   *   processed file.\n   *\n   *   The parsed, transformed, and compiled value is available at\n   *   `file.value` (see note).\n   *\n   *   > 👉 **Note**: unified typically compiles by serializing: most\n   *   > compilers return `string` (or `Uint8Array`).\n   *   > Some compilers, such as the one configured with\n   *   > [`rehype-react`][rehype-react], return other values (in this case, a\n   *   > React tree).\n   *   > If you’re using a compiler that doesn’t serialize, expect different\n   *   > result values.\n   *   >\n   *   > To register custom results in TypeScript, add them to\n   *   > {@link CompileResultMap `CompileResultMap`}.\n   *\n   *   [rehype-react]: https://github.com/rehypejs/rehype-react\n   */\n  process(file, done) {\n    const self = this\n\n    this.freeze()\n    assertParser('process', this.parser || this.Parser)\n    assertCompiler('process', this.compiler || this.Compiler)\n\n    return done ? executor(undefined, done) : new Promise(executor)\n\n    // Note: `void`s needed for TS.\n    /**\n     * @param {((file: VFileWithOutput<CompileResult>) => undefined | void) | undefined} resolve\n     * @param {(error: Error | undefined) => undefined | void} reject\n     * @returns {undefined}\n     */\n    function executor(resolve, reject) {\n      const realFile = vfile(file)\n      // Assume `ParseTree` (the result of the parser) matches `HeadTree` (the\n      // input of the first transform).\n      const parseTree =\n        /** @type {HeadTree extends undefined ? Node : HeadTree} */ (\n          /** @type {unknown} */ (self.parse(realFile))\n        )\n\n      self.run(parseTree, realFile, function (error, tree, file) {\n        if (error || !tree || !file) {\n          return realDone(error)\n        }\n\n        // Assume `TailTree` (the output of the last transform) matches\n        // `CompileTree` (the input of the compiler).\n        const compileTree =\n          /** @type {CompileTree extends undefined ? Node : CompileTree} */ (\n            /** @type {unknown} */ (tree)\n          )\n\n        const compileResult = self.stringify(compileTree, file)\n\n        if (looksLikeAValue(compileResult)) {\n          file.value = compileResult\n        } else {\n          file.result = compileResult\n        }\n\n        realDone(error, /** @type {VFileWithOutput<CompileResult>} */ (file))\n      })\n\n      /**\n       * @param {Error | undefined} error\n       * @param {VFileWithOutput<CompileResult> | undefined} [file]\n       * @returns {undefined}\n       */\n      function realDone(error, file) {\n        if (error || !file) {\n          reject(error)\n        } else if (resolve) {\n          resolve(file)\n        } else {\n          assert(done, '`done` is defined if `resolve` is not')\n          done(undefined, file)\n        }\n      }\n    }\n  }\n\n  /**\n   * Process the given file as configured on the processor.\n   *\n   * An error is thrown if asynchronous transforms are configured.\n   *\n   * > 👉 **Note**: `processSync` freezes the processor if not already *frozen*.\n   *\n   * > 👉 **Note**: `processSync` performs the parse, run, and stringify phases.\n   *\n   * @param {Compatible | undefined} [file]\n   *   File (optional); typically `string` or `VFile`; any value accepted as\n   *   `x` in `new VFile(x)`.\n   * @returns {VFileWithOutput<CompileResult>}\n   *   The processed file.\n   *\n   *   The parsed, transformed, and compiled value is available at\n   *   `file.value` (see note).\n   *\n   *   > 👉 **Note**: unified typically compiles by serializing: most\n   *   > compilers return `string` (or `Uint8Array`).\n   *   > Some compilers, such as the one configured with\n   *   > [`rehype-react`][rehype-react], return other values (in this case, a\n   *   > React tree).\n   *   > If you’re using a compiler that doesn’t serialize, expect different\n   *   > result values.\n   *   >\n   *   > To register custom results in TypeScript, add them to\n   *   > {@link CompileResultMap `CompileResultMap`}.\n   *\n   *   [rehype-react]: https://github.com/rehypejs/rehype-react\n   */\n  processSync(file) {\n    /** @type {boolean} */\n    let complete = false\n    /** @type {VFileWithOutput<CompileResult> | undefined} */\n    let result\n\n    this.freeze()\n    assertParser('processSync', this.parser || this.Parser)\n    assertCompiler('processSync', this.compiler || this.Compiler)\n\n    this.process(file, realDone)\n    assertDone('processSync', 'process', complete)\n    assert(result, 'we either bailed on an error or have a tree')\n\n    return result\n\n    /**\n     * @type {ProcessCallback<VFileWithOutput<CompileResult>>}\n     */\n    function realDone(error, file) {\n      complete = true\n      bail(error)\n      result = file\n    }\n  }\n\n  /**\n   * Run *transformers* on a syntax tree.\n   *\n   * > 👉 **Note**: `run` freezes the processor if not already *frozen*.\n   *\n   * > 👉 **Note**: `run` performs the run phase, not other phases.\n   *\n   * @overload\n   * @param {HeadTree extends undefined ? Node : HeadTree} tree\n   * @param {RunCallback<TailTree extends undefined ? Node : TailTree>} done\n   * @returns {undefined}\n   *\n   * @overload\n   * @param {HeadTree extends undefined ? Node : HeadTree} tree\n   * @param {Compatible | undefined} file\n   * @param {RunCallback<TailTree extends undefined ? Node : TailTree>} done\n   * @returns {undefined}\n   *\n   * @overload\n   * @param {HeadTree extends undefined ? Node : HeadTree} tree\n   * @param {Compatible | undefined} [file]\n   * @returns {Promise<TailTree extends undefined ? Node : TailTree>}\n   *\n   * @param {HeadTree extends undefined ? Node : HeadTree} tree\n   *   Tree to transform and inspect.\n   * @param {(\n   *   RunCallback<TailTree extends undefined ? Node : TailTree> |\n   *   Compatible\n   * )} [file]\n   *   File associated with `node` (optional); any value accepted as `x` in\n   *   `new VFile(x)`.\n   * @param {RunCallback<TailTree extends undefined ? Node : TailTree>} [done]\n   *   Callback (optional).\n   * @returns {Promise<TailTree extends undefined ? Node : TailTree> | undefined}\n   *   Nothing if `done` is given.\n   *   Otherwise, a promise rejected with a fatal error or resolved with the\n   *   transformed tree.\n   */\n  run(tree, file, done) {\n    assertNode(tree)\n    this.freeze()\n\n    const transformers = this.transformers\n\n    if (!done && typeof file === 'function') {\n      done = file\n      file = undefined\n    }\n\n    return done ? executor(undefined, done) : new Promise(executor)\n\n    // Note: `void`s needed for TS.\n    /**\n     * @param {(\n     *   ((tree: TailTree extends undefined ? Node : TailTree) => undefined | void) |\n     *   undefined\n     * )} resolve\n     * @param {(error: Error) => undefined | void} reject\n     * @returns {undefined}\n     */\n    function executor(resolve, reject) {\n      assert(\n        typeof file !== 'function',\n        '`file` can’t be a `done` anymore, we checked'\n      )\n      const realFile = vfile(file)\n      transformers.run(tree, realFile, realDone)\n\n      /**\n       * @param {Error | undefined} error\n       * @param {Node} outputTree\n       * @param {VFile} file\n       * @returns {undefined}\n       */\n      function realDone(error, outputTree, file) {\n        const resultingTree =\n          /** @type {TailTree extends undefined ? Node : TailTree} */ (\n            outputTree || tree\n          )\n\n        if (error) {\n          reject(error)\n        } else if (resolve) {\n          resolve(resultingTree)\n        } else {\n          assert(done, '`done` is defined if `resolve` is not')\n          done(undefined, resultingTree, file)\n        }\n      }\n    }\n  }\n\n  /**\n   * Run *transformers* on a syntax tree.\n   *\n   * An error is thrown if asynchronous transforms are configured.\n   *\n   * > 👉 **Note**: `runSync` freezes the processor if not already *frozen*.\n   *\n   * > 👉 **Note**: `runSync` performs the run phase, not other phases.\n   *\n   * @param {HeadTree extends undefined ? Node : HeadTree} tree\n   *   Tree to transform and inspect.\n   * @param {Compatible | undefined} [file]\n   *   File associated with `node` (optional); any value accepted as `x` in\n   *   `new VFile(x)`.\n   * @returns {TailTree extends undefined ? Node : TailTree}\n   *   Transformed tree.\n   */\n  runSync(tree, file) {\n    /** @type {boolean} */\n    let complete = false\n    /** @type {(TailTree extends undefined ? Node : TailTree) | undefined} */\n    let result\n\n    this.run(tree, file, realDone)\n\n    assertDone('runSync', 'run', complete)\n    assert(result, 'we either bailed on an error or have a tree')\n    return result\n\n    /**\n     * @type {RunCallback<TailTree extends undefined ? Node : TailTree>}\n     */\n    function realDone(error, tree) {\n      bail(error)\n      result = tree\n      complete = true\n    }\n  }\n\n  /**\n   * Compile a syntax tree.\n   *\n   * > 👉 **Note**: `stringify` freezes the processor if not already *frozen*.\n   *\n   * > 👉 **Note**: `stringify` performs the stringify phase, not the run phase\n   * > or other phases.\n   *\n   * @param {CompileTree extends undefined ? Node : CompileTree} tree\n   *   Tree to compile.\n   * @param {Compatible | undefined} [file]\n   *   File associated with `node` (optional); any value accepted as `x` in\n   *   `new VFile(x)`.\n   * @returns {CompileResult extends undefined ? Value : CompileResult}\n   *   Textual representation of the tree (see note).\n   *\n   *   > 👉 **Note**: unified typically compiles by serializing: most compilers\n   *   > return `string` (or `Uint8Array`).\n   *   > Some compilers, such as the one configured with\n   *   > [`rehype-react`][rehype-react], return other values (in this case, a\n   *   > React tree).\n   *   > If you’re using a compiler that doesn’t serialize, expect different\n   *   > result values.\n   *   >\n   *   > To register custom results in TypeScript, add them to\n   *   > {@link CompileResultMap `CompileResultMap`}.\n   *\n   *   [rehype-react]: https://github.com/rehypejs/rehype-react\n   */\n  stringify(tree, file) {\n    this.freeze()\n    const realFile = vfile(file)\n    const compiler = this.compiler || this.Compiler\n    assertCompiler('stringify', compiler)\n    assertNode(tree)\n\n    return compiler(tree, realFile)\n  }\n\n  /**\n   * Configure the processor to use a plugin, a list of usable values, or a\n   * preset.\n   *\n   * If the processor is already using a plugin, the previous plugin\n   * configuration is changed based on the options that are passed in.\n   * In other words, the plugin is not added a second time.\n   *\n   * > 👉 **Note**: `use` cannot be called on *frozen* processors.\n   * > Call the processor first to create a new unfrozen processor.\n   *\n   * @example\n   *   There are many ways to pass plugins to `.use()`.\n   *   This example gives an overview:\n   *\n   *   ```js\n   *   import {unified} from 'unified'\n   *\n   *   unified()\n   *     // Plugin with options:\n   *     .use(pluginA, {x: true, y: true})\n   *     // Passing the same plugin again merges configuration (to `{x: true, y: false, z: true}`):\n   *     .use(pluginA, {y: false, z: true})\n   *     // Plugins:\n   *     .use([pluginB, pluginC])\n   *     // Two plugins, the second with options:\n   *     .use([pluginD, [pluginE, {}]])\n   *     // Preset with plugins and settings:\n   *     .use({plugins: [pluginF, [pluginG, {}]], settings: {position: false}})\n   *     // Settings only:\n   *     .use({settings: {position: false}})\n   *   ```\n   *\n   * @template {Array<unknown>} [Parameters=[]]\n   * @template {Node | string | undefined} [Input=undefined]\n   * @template [Output=Input]\n   *\n   * @overload\n   * @param {Preset | null | undefined} [preset]\n   * @returns {Processor<ParseTree, HeadTree, TailTree, CompileTree, CompileResult>}\n   *\n   * @overload\n   * @param {PluggableList} list\n   * @returns {Processor<ParseTree, HeadTree, TailTree, CompileTree, CompileResult>}\n   *\n   * @overload\n   * @param {Plugin<Parameters, Input, Output>} plugin\n   * @param {...(Parameters | [boolean])} parameters\n   * @returns {UsePlugin<ParseTree, HeadTree, TailTree, CompileTree, CompileResult, Input, Output>}\n   *\n   * @param {PluggableList | Plugin | Preset | null | undefined} value\n   *   Usable value.\n   * @param {...unknown} parameters\n   *   Parameters, when a plugin is given as a usable value.\n   * @returns {Processor<ParseTree, HeadTree, TailTree, CompileTree, CompileResult>}\n   *   Current processor.\n   */\n  use(value, ...parameters) {\n    const attachers = this.attachers\n    const namespace = this.namespace\n\n    assertUnfrozen('use', this.frozen)\n\n    if (value === null || value === undefined) {\n      // Empty.\n    } else if (typeof value === 'function') {\n      addPlugin(value, parameters)\n    } else if (typeof value === 'object') {\n      if (Array.isArray(value)) {\n        addList(value)\n      } else {\n        addPreset(value)\n      }\n    } else {\n      throw new TypeError('Expected usable value, not `' + value + '`')\n    }\n\n    return this\n\n    /**\n     * @param {Pluggable} value\n     * @returns {undefined}\n     */\n    function add(value) {\n      if (typeof value === 'function') {\n        addPlugin(value, [])\n      } else if (typeof value === 'object') {\n        if (Array.isArray(value)) {\n          const [plugin, ...parameters] =\n            /** @type {PluginTuple<Array<unknown>>} */ (value)\n          addPlugin(plugin, parameters)\n        } else {\n          addPreset(value)\n        }\n      } else {\n        throw new TypeError('Expected usable value, not `' + value + '`')\n      }\n    }\n\n    /**\n     * @param {Preset} result\n     * @returns {undefined}\n     */\n    function addPreset(result) {\n      if (!('plugins' in result) && !('settings' in result)) {\n        throw new Error(\n          'Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither'\n        )\n      }\n\n      addList(result.plugins)\n\n      if (result.settings) {\n        namespace.settings = extend(true, namespace.settings, result.settings)\n      }\n    }\n\n    /**\n     * @param {PluggableList | null | undefined} plugins\n     * @returns {undefined}\n     */\n    function addList(plugins) {\n      let index = -1\n\n      if (plugins === null || plugins === undefined) {\n        // Empty.\n      } else if (Array.isArray(plugins)) {\n        while (++index < plugins.length) {\n          const thing = plugins[index]\n          add(thing)\n        }\n      } else {\n        throw new TypeError('Expected a list of plugins, not `' + plugins + '`')\n      }\n    }\n\n    /**\n     * @param {Plugin} plugin\n     * @param {Array<unknown>} parameters\n     * @returns {undefined}\n     */\n    function addPlugin(plugin, parameters) {\n      let index = -1\n      let entryIndex = -1\n\n      while (++index < attachers.length) {\n        if (attachers[index][0] === plugin) {\n          entryIndex = index\n          break\n        }\n      }\n\n      if (entryIndex === -1) {\n        attachers.push([plugin, ...parameters])\n      }\n      // Only set if there was at least a `primary` value, otherwise we’d change\n      // `arguments.length`.\n      else if (parameters.length > 0) {\n        let [primary, ...rest] = parameters\n        const currentPrimary = attachers[entryIndex][1]\n        if (isPlainObj(currentPrimary) && isPlainObj(primary)) {\n          primary = extend(true, currentPrimary, primary)\n        }\n\n        attachers[entryIndex] = [plugin, primary, ...rest]\n      }\n    }\n  }\n}\n\n// Note: this returns a *callable* instance.\n// That’s why it’s documented as a function.\n/**\n * Create a new processor.\n *\n * @example\n *   This example shows how a new processor can be created (from `remark`) and linked\n *   to **stdin**(4) and **stdout**(4).\n *\n *   ```js\n *   import process from 'node:process'\n *   import concatStream from 'concat-stream'\n *   import {remark} from 'remark'\n *\n *   process.stdin.pipe(\n *     concatStream(function (buf) {\n *       process.stdout.write(String(remark().processSync(buf)))\n *     })\n *   )\n *   ```\n *\n * @returns\n *   New *unfrozen* processor (`processor`).\n *\n *   This processor is configured to work the same as its ancestor.\n *   When the descendant processor is configured in the future it does not\n *   affect the ancestral processor.\n */\nexport const unified = new Processor().freeze()\n\n/**\n * Assert a parser is available.\n *\n * @param {string} name\n * @param {unknown} value\n * @returns {asserts value is Parser}\n */\nfunction assertParser(name, value) {\n  if (typeof value !== 'function') {\n    throw new TypeError('Cannot `' + name + '` without `parser`')\n  }\n}\n\n/**\n * Assert a compiler is available.\n *\n * @param {string} name\n * @param {unknown} value\n * @returns {asserts value is Compiler}\n */\nfunction assertCompiler(name, value) {\n  if (typeof value !== 'function') {\n    throw new TypeError('Cannot `' + name + '` without `compiler`')\n  }\n}\n\n/**\n * Assert the processor is not frozen.\n *\n * @param {string} name\n * @param {unknown} frozen\n * @returns {asserts frozen is false}\n */\nfunction assertUnfrozen(name, frozen) {\n  if (frozen) {\n    throw new Error(\n      'Cannot call `' +\n        name +\n        '` on a frozen processor.\\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.'\n    )\n  }\n}\n\n/**\n * Assert `node` is a unist node.\n *\n * @param {unknown} node\n * @returns {asserts node is Node}\n */\nfunction assertNode(node) {\n  // `isPlainObj` unfortunately uses `any` instead of `unknown`.\n  // type-coverage:ignore-next-line\n  if (!isPlainObj(node) || typeof node.type !== 'string') {\n    throw new TypeError('Expected node, got `' + node + '`')\n    // Fine.\n  }\n}\n\n/**\n * Assert that `complete` is `true`.\n *\n * @param {string} name\n * @param {string} asyncName\n * @param {unknown} complete\n * @returns {asserts complete is true}\n */\nfunction assertDone(name, asyncName, complete) {\n  if (!complete) {\n    throw new Error(\n      '`' + name + '` finished async. Use `' + asyncName + '` instead'\n    )\n  }\n}\n\n/**\n * @param {Compatible | undefined} [value]\n * @returns {VFile}\n */\nfunction vfile(value) {\n  return looksLikeAVFile(value) ? value : new VFile(value)\n}\n\n/**\n * @param {Compatible | undefined} [value]\n * @returns {value is VFile}\n */\nfunction looksLikeAVFile(value) {\n  return Boolean(\n    value &&\n      typeof value === 'object' &&\n      'message' in value &&\n      'messages' in value\n  )\n}\n\n/**\n * @param {unknown} [value]\n * @returns {value is Value}\n */\nfunction looksLikeAValue(value) {\n  return typeof value === 'string' || isUint8Array(value)\n}\n\n/**\n * Assert `value` is an `Uint8Array`.\n *\n * @param {unknown} value\n *   thing.\n * @returns {value is Uint8Array}\n *   Whether `value` is an `Uint8Array`.\n */\nfunction isUint8Array(value) {\n  return Boolean(\n    value &&\n      typeof value === 'object' &&\n      'byteLength' in value &&\n      'byteOffset' in value\n  )\n}\n","// Register `Raw` in tree:\n/// <reference types=\"mdast-util-to-hast\" />\n\n/**\n * @typedef {import('hast').Element} Element\n * @typedef {import('hast').ElementContent} ElementContent\n * @typedef {import('hast').Nodes} Nodes\n * @typedef {import('hast').Parents} Parents\n * @typedef {import('hast').Root} Root\n * @typedef {import('hast-util-to-jsx-runtime').Components} JsxRuntimeComponents\n * @typedef {import('remark-rehype').Options} RemarkRehypeOptions\n * @typedef {import('unist-util-visit').BuildVisitor<Root>} Visitor\n * @typedef {import('unified').PluggableList} PluggableList\n */\n\n/**\n * @callback AllowElement\n *   Filter elements.\n * @param {Readonly<Element>} element\n *   Element to check.\n * @param {number} index\n *   Index of `element` in `parent`.\n * @param {Readonly<Parents> | undefined} parent\n *   Parent of `element`.\n * @returns {boolean | null | undefined}\n *   Whether to allow `element` (default: `false`).\n *\n * @typedef {Partial<JsxRuntimeComponents>} Components\n *   Map tag names to components.\n *\n * @typedef Deprecation\n *   Deprecation.\n * @property {string} from\n *   Old field.\n * @property {string} id\n *   ID in readme.\n * @property {keyof Options} [to]\n *   New field.\n *\n * @typedef Options\n *   Configuration.\n * @property {AllowElement | null | undefined} [allowElement]\n *   Filter elements (optional);\n *   `allowedElements` / `disallowedElements` is used first.\n * @property {ReadonlyArray<string> | null | undefined} [allowedElements]\n *   Tag names to allow (default: all tag names);\n *   cannot combine w/ `disallowedElements`.\n * @property {string | null | undefined} [children]\n *   Markdown.\n * @property {string | null | undefined} [className]\n *   Wrap in a `div` with this class name.\n * @property {Components | null | undefined} [components]\n *   Map tag names to components.\n * @property {ReadonlyArray<string> | null | undefined} [disallowedElements]\n *   Tag names to disallow (default: `[]`);\n *   cannot combine w/ `allowedElements`.\n * @property {PluggableList | null | undefined} [rehypePlugins]\n *   List of rehype plugins to use.\n * @property {PluggableList | null | undefined} [remarkPlugins]\n *   List of remark plugins to use.\n * @property {Readonly<RemarkRehypeOptions> | null | undefined} [remarkRehypeOptions]\n *   Options to pass through to `remark-rehype`.\n * @property {boolean | null | undefined} [skipHtml=false]\n *   Ignore HTML in markdown completely (default: `false`).\n * @property {boolean | null | undefined} [unwrapDisallowed=false]\n *   Extract (unwrap) what’s in disallowed elements (default: `false`);\n *   normally when say `strong` is not allowed, it and it’s children are dropped,\n *   with `unwrapDisallowed` the element itself is replaced by its children.\n * @property {UrlTransform | null | undefined} [urlTransform]\n *   Change URLs (default: `defaultUrlTransform`)\n *\n * @callback UrlTransform\n *   Transform all URLs.\n * @param {string} url\n *   URL.\n * @param {string} key\n *   Property name (example: `'href'`).\n * @param {Readonly<Element>} node\n *   Node.\n * @returns {string | null | undefined}\n *   Transformed URL (optional).\n */\n\nimport {unreachable} from 'devlop'\nimport {toJsxRuntime} from 'hast-util-to-jsx-runtime'\nimport {urlAttributes} from 'html-url-attributes'\n// @ts-expect-error: untyped.\nimport {Fragment, jsx, jsxs} from 'react/jsx-runtime'\nimport remarkParse from 'remark-parse'\nimport remarkRehype from 'remark-rehype'\nimport {unified} from 'unified'\nimport {visit} from 'unist-util-visit'\nimport {VFile} from 'vfile'\n\nconst changelog =\n  'https://github.com/remarkjs/react-markdown/blob/main/changelog.md'\n\n/** @type {PluggableList} */\nconst emptyPlugins = []\n/** @type {Readonly<RemarkRehypeOptions>} */\nconst emptyRemarkRehypeOptions = {allowDangerousHtml: true}\nconst safeProtocol = /^(https?|ircs?|mailto|xmpp)$/i\n\n// Mutable because we `delete` any time it’s used and a message is sent.\n/** @type {ReadonlyArray<Readonly<Deprecation>>} */\nconst deprecations = [\n  {from: 'astPlugins', id: 'remove-buggy-html-in-markdown-parser'},\n  {from: 'allowDangerousHtml', id: 'remove-buggy-html-in-markdown-parser'},\n  {\n    from: 'allowNode',\n    id: 'replace-allownode-allowedtypes-and-disallowedtypes',\n    to: 'allowElement'\n  },\n  {\n    from: 'allowedTypes',\n    id: 'replace-allownode-allowedtypes-and-disallowedtypes',\n    to: 'allowedElements'\n  },\n  {\n    from: 'disallowedTypes',\n    id: 'replace-allownode-allowedtypes-and-disallowedtypes',\n    to: 'disallowedElements'\n  },\n  {from: 'escapeHtml', id: 'remove-buggy-html-in-markdown-parser'},\n  {from: 'includeElementIndex', id: '#remove-includeelementindex'},\n  {\n    from: 'includeNodeIndex',\n    id: 'change-includenodeindex-to-includeelementindex'\n  },\n  {from: 'linkTarget', id: 'remove-linktarget'},\n  {from: 'plugins', id: 'change-plugins-to-remarkplugins', to: 'remarkPlugins'},\n  {from: 'rawSourcePos', id: '#remove-rawsourcepos'},\n  {from: 'renderers', id: 'change-renderers-to-components', to: 'components'},\n  {from: 'source', id: 'change-source-to-children', to: 'children'},\n  {from: 'sourcePos', id: '#remove-sourcepos'},\n  {from: 'transformImageUri', id: '#add-urltransform', to: 'urlTransform'},\n  {from: 'transformLinkUri', id: '#add-urltransform', to: 'urlTransform'}\n]\n\n/**\n * Component to render markdown.\n *\n * @param {Readonly<Options>} options\n *   Props.\n * @returns {JSX.Element}\n *   React element.\n */\nexport function Markdown(options) {\n  const allowedElements = options.allowedElements\n  const allowElement = options.allowElement\n  const children = options.children || ''\n  const className = options.className\n  const components = options.components\n  const disallowedElements = options.disallowedElements\n  const rehypePlugins = options.rehypePlugins || emptyPlugins\n  const remarkPlugins = options.remarkPlugins || emptyPlugins\n  const remarkRehypeOptions = options.remarkRehypeOptions\n    ? {...options.remarkRehypeOptions, ...emptyRemarkRehypeOptions}\n    : emptyRemarkRehypeOptions\n  const skipHtml = options.skipHtml\n  const unwrapDisallowed = options.unwrapDisallowed\n  const urlTransform = options.urlTransform || defaultUrlTransform\n\n  const processor = unified()\n    .use(remarkParse)\n    .use(remarkPlugins)\n    .use(remarkRehype, remarkRehypeOptions)\n    .use(rehypePlugins)\n\n  const file = new VFile()\n\n  if (typeof children === 'string') {\n    file.value = children\n  } else {\n    unreachable(\n      'Unexpected value `' +\n        children +\n        '` for `children` prop, expected `string`'\n    )\n  }\n\n  if (allowedElements && disallowedElements) {\n    unreachable(\n      'Unexpected combined `allowedElements` and `disallowedElements`, expected one or the other'\n    )\n  }\n\n  for (const deprecation of deprecations) {\n    if (Object.hasOwn(options, deprecation.from)) {\n      unreachable(\n        'Unexpected `' +\n          deprecation.from +\n          '` prop, ' +\n          (deprecation.to\n            ? 'use `' + deprecation.to + '` instead'\n            : 'remove it') +\n          ' (see <' +\n          changelog +\n          '#' +\n          deprecation.id +\n          '> for more info)'\n      )\n    }\n  }\n\n  const mdastTree = processor.parse(file)\n  /** @type {Nodes} */\n  let hastTree = processor.runSync(mdastTree, file)\n\n  // Wrap in `div` if there’s a class name.\n  if (className) {\n    hastTree = {\n      type: 'element',\n      tagName: 'div',\n      properties: {className},\n      // Assume no doctypes.\n      children: /** @type {Array<ElementContent>} */ (\n        hastTree.type === 'root' ? hastTree.children : [hastTree]\n      )\n    }\n  }\n\n  visit(hastTree, transform)\n\n  return toJsxRuntime(hastTree, {\n    Fragment,\n    components,\n    ignoreInvalidStyle: true,\n    jsx,\n    jsxs,\n    passKeys: true,\n    passNode: true\n  })\n\n  /** @type {Visitor} */\n  function transform(node, index, parent) {\n    if (node.type === 'raw' && parent && typeof index === 'number') {\n      if (skipHtml) {\n        parent.children.splice(index, 1)\n      } else {\n        parent.children[index] = {type: 'text', value: node.value}\n      }\n\n      return index\n    }\n\n    if (node.type === 'element') {\n      /** @type {string} */\n      let key\n\n      for (key in urlAttributes) {\n        if (\n          Object.hasOwn(urlAttributes, key) &&\n          Object.hasOwn(node.properties, key)\n        ) {\n          const value = node.properties[key]\n          const test = urlAttributes[key]\n          if (test === null || test.includes(node.tagName)) {\n            node.properties[key] = urlTransform(String(value || ''), key, node)\n          }\n        }\n      }\n    }\n\n    if (node.type === 'element') {\n      let remove = allowedElements\n        ? !allowedElements.includes(node.tagName)\n        : disallowedElements\n        ? disallowedElements.includes(node.tagName)\n        : false\n\n      if (!remove && allowElement && typeof index === 'number') {\n        remove = !allowElement(node, index, parent)\n      }\n\n      if (remove && parent && typeof index === 'number') {\n        if (unwrapDisallowed && node.children) {\n          parent.children.splice(index, 1, ...node.children)\n        } else {\n          parent.children.splice(index, 1)\n        }\n\n        return index\n      }\n    }\n  }\n}\n\n/**\n * Make a URL safe.\n *\n * @satisfies {UrlTransform}\n * @param {string} value\n *   URL.\n * @returns {string}\n *   Safe URL.\n */\nexport function defaultUrlTransform(value) {\n  // Same as:\n  // <https://github.com/micromark/micromark/blob/929275e/packages/micromark-util-sanitize-uri/dev/index.js#L34>\n  // But without the `encode` part.\n  const colon = value.indexOf(':')\n  const questionMark = value.indexOf('?')\n  const numberSign = value.indexOf('#')\n  const slash = value.indexOf('/')\n\n  if (\n    // If there is no protocol, it’s relative.\n    colon < 0 ||\n    // If the first colon is after a `?`, `#`, or `/`, it’s not a protocol.\n    (slash > -1 && colon > slash) ||\n    (questionMark > -1 && colon > questionMark) ||\n    (numberSign > -1 && colon > numberSign) ||\n    // It is a protocol, it should be allowed.\n    safeProtocol.test(value.slice(0, colon))\n  ) {\n    return value\n  }\n\n  return ''\n}\n","import { Component } from 'react';\nimport ReactMarkdown from 'react-markdown';\n\nimport { Text, TextType } from '../../../controls';\n\nimport './rules-tab.scss';\n\ninterface Props {\n\trules: string;\n}\n\nexport class RulesTab extends Component<Props> {\n\trender = () => {\n\t\ttry {\n\t\t\treturn (\n\t\t\t\t<div className='rules-tab'>\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.props.rules ?\n\t\t\t\t\t\t\t<ReactMarkdown>{this.props.rules}</ReactMarkdown>\n\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t<Text type={TextType.Information}>\n\t\t\t\t\t\t\t\t<p>No rules for this page.</p>\n\t\t\t\t\t\t\t</Text>\n\t\t\t\t\t}\n\t\t\t\t</div>\n\t\t\t);\n\t\t} catch {\n\t\t\treturn <div className='rules-tab render-error' />;\n\t\t}\n\t};\n}\n","import { Component } from 'react';\n\nimport type { GameModel } from '../../../models/game';\nimport type { OptionsModel } from '../../../models/options';\n\nimport { Tabs, Text, TextType } from '../../controls';\nimport { AboutTab } from './about-tab/about-tab';\nimport { DecksTab } from './decks-tab/decks-tab';\nimport { OptionsTab } from './options-tab/options-tab';\nimport { RulesTab } from './rules-tab/rules-tab';\n\nimport './help-modal.scss';\n\ninterface Props {\n\tgame: GameModel | null;\n\toptions: OptionsModel;\n\texceptions: string[];\n\trules: string;\n\tendCampaign: () => void;\n\tsetDeveloperMode: (value: boolean) => void;\n\tsetShowTips: (value: boolean) => void;\n\tsetSoundEffectsVolume: (value: number) => void;\n}\n\ninterface State {\n\tselectedTab: string;\n}\n\nexport class HelpModal extends Component<Props, State> {\n\tconstructor(props: Props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tselectedTab: 'rules'\n\t\t};\n\t}\n\n\trender = () => {\n\t\ttry {\n\t\t\tconst tabs = [\n\t\t\t\t{ id: 'rules', display: 'Game Rules' },\n\t\t\t\t{ id: 'decks', display: 'Your Cards' },\n\t\t\t\t{ id: 'options', display: 'Options' },\n\t\t\t\t{ id: 'about', display: 'About' }\n\t\t\t];\n\n\t\t\tif (this.props.exceptions.length > 0) {\n\t\t\t\ttabs.push({ id: 'exceptions', display: 'Exceptions' });\n\t\t\t}\n\n\t\t\tlet content = null;\n\t\t\tswitch (this.state.selectedTab) {\n\t\t\t\tcase 'rules':\n\t\t\t\t\tcontent = (\n\t\t\t\t\t\t<div className='content'>\n\t\t\t\t\t\t\t<RulesTab rules={this.props.rules} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'decks':\n\t\t\t\t\tcontent = (\n\t\t\t\t\t\t<div className='content'>\n\t\t\t\t\t\t\t<DecksTab options={this.props.options} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'options':\n\t\t\t\t\tcontent = (\n\t\t\t\t\t\t<div className='content'>\n\t\t\t\t\t\t\t<OptionsTab\n\t\t\t\t\t\t\t\tgame={this.props.game}\n\t\t\t\t\t\t\t\toptions={this.props.options}\n\t\t\t\t\t\t\t\tendCampaign={this.props.endCampaign}\n\t\t\t\t\t\t\t\tsetDeveloperMode={this.props.setDeveloperMode}\n\t\t\t\t\t\t\t\tsetShowTips={this.props.setShowTips}\n\t\t\t\t\t\t\t\tsetSoundEffectsVolume={this.props.setSoundEffectsVolume}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'about':\n\t\t\t\t\tcontent = (\n\t\t\t\t\t\t<div className='content'>\n\t\t\t\t\t\t\t<AboutTab\n\t\t\t\t\t\t\t\tgame={this.props.game}\n\t\t\t\t\t\t\t\toptions={this.props.options}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'exceptions':\n\t\t\t\t\tcontent = (\n\t\t\t\t\t\t<div className='content'>\n\t\t\t\t\t\t\t{this.props.exceptions.map((ex, n) => <Text key={n}>{ex}</Text>)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\treturn (\n\t\t\t\t<div className='help-modal'>\n\t\t\t\t\t<Text type={TextType.Heading}>Help</Text>\n\t\t\t\t\t<Tabs options={tabs} selectedID={this.state.selectedTab} onSelect={id => this.setState({ selectedTab: id })} />\n\t\t\t\t\t{content}\n\t\t\t\t</div>\n\t\t\t);\n\t\t} catch {\n\t\t\treturn <div className='help-modal render-error' />;\n\t\t}\n\t};\n}\n","import { Component } from 'react';\nimport { IconRefresh } from '@tabler/icons-react';\n\nimport { CardType } from '../../../../enums/card-type';\nimport { StructureType } from '../../../../enums/structure-type';\n\nimport { GameLogic } from '../../../../logic/game-logic';\nimport { StrongholdLogic } from '../../../../logic/stronghold-logic';\n\nimport type { BackgroundModel } from '../../../../models/background';\nimport type { GameModel } from '../../../../models/game';\nimport type { OptionsModel } from '../../../../models/options';\nimport type { RoleModel } from '../../../../models/role';\nimport type { SpeciesModel } from '../../../../models/species';\n\nimport { Collections } from '../../../../utils/collections';\n\nimport { BackgroundCard, PlaceholderCard, RoleCard, SpeciesCard, StrongholdBenefitCard } from '../../../cards';\nimport { CardList, Expander, PlayingCard, Text, TextType } from '../../../controls';\n\nimport './card-page.scss';\n\ninterface Props {\n\tgame: GameModel;\n\toptions: OptionsModel;\n\tselect: (speciesID: string, roleID: string, backgroundID: string) => void;\n\tuseCharge: (type: StructureType, count: number) => void;\n}\n\ninterface State {\n\tspeciesIDs: string[];\n\troleIDs: string[];\n\tbackgroundIDs: string[];\n\tselectedSpeciesID: string;\n\tselectedRoleID: string;\n\tselectedBackgroundID: string;\n}\n\nexport class CardPage extends Component<Props, State> {\n\tconstructor(props: Props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tspeciesIDs: Collections.shuffle(GameLogic.getHeroSpeciesDeck(props.options.packIDs).map(s => s.id)).splice(0, 3),\n\t\t\troleIDs: Collections.shuffle(GameLogic.getRoleDeck(props.options.packIDs).map(r => r.id)).splice(0, 3),\n\t\t\tbackgroundIDs: Collections.shuffle(GameLogic.getBackgroundDeck(props.options.packIDs).map(b => b.id)).splice(0, 3),\n\t\t\tselectedSpeciesID: '',\n\t\t\tselectedRoleID: '',\n\t\t\tselectedBackgroundID: ''\n\t\t};\n\t}\n\n\tselectSpecies = (species: SpeciesModel) => {\n\t\tif (this.state.selectedSpeciesID === '') {\n\t\t\tthis.setState({\n\t\t\t\tselectedSpeciesID: species.id\n\t\t\t});\n\t\t}\n\t};\n\n\tselectRole = (role: RoleModel) => {\n\t\tif (this.state.selectedRoleID === '') {\n\t\t\tthis.setState({\n\t\t\t\tselectedRoleID: role.id\n\t\t\t});\n\t\t}\n\t};\n\n\tselectBackground = (background: BackgroundModel) => {\n\t\tif (this.state.selectedBackgroundID === '') {\n\t\t\tthis.setState({\n\t\t\t\tselectedBackgroundID: background.id\n\t\t\t});\n\t\t}\n\t};\n\n\tselect = () => {\n\t\tthis.props.select(this.state.selectedSpeciesID, this.state.selectedRoleID, this.state.selectedBackgroundID);\n\t};\n\n\tredraw = (type: CardType) => {\n\t\tswitch (type) {\n\t\t\tcase CardType.Species:\n\t\t\t\tthis.setState({\n\t\t\t\t\tspeciesIDs: Collections.shuffle(GameLogic.getHeroSpeciesDeck(this.props.options.packIDs).map(s => s.id)).splice(0, 3)\n\t\t\t\t}, () => {\n\t\t\t\t\tif (!this.props.options.developer) {\n\t\t\t\t\t\tthis.props.useCharge(StructureType.Hall, 1);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\tcase CardType.Role:\n\t\t\t\tthis.setState({\n\t\t\t\t\troleIDs: Collections.shuffle(GameLogic.getRoleDeck(this.props.options.packIDs).map(r => r.id)).splice(0, 3)\n\t\t\t\t}, () => {\n\t\t\t\t\tif (!this.props.options.developer) {\n\t\t\t\t\t\tthis.props.useCharge(StructureType.Hall, 1);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\tcase CardType.Background:\n\t\t\t\tthis.setState({\n\t\t\t\t\tbackgroundIDs: Collections.shuffle(GameLogic.getBackgroundDeck(this.props.options.packIDs).map(b => b.id)).splice(0, 3)\n\t\t\t\t}, () => {\n\t\t\t\t\tif (!this.props.options.developer) {\n\t\t\t\t\t\tthis.props.useCharge(StructureType.Hall, 1);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t}\n\t};\n\n\tgetOverviewSection = () => {\n\t\tlet speciesCard = (\n\t\t\t<PlayingCard\n\t\t\t\ttype={CardType.Species}\n\t\t\t\tdisabled={true}\n\t\t\t\tfront={<PlaceholderCard text='Species' subtext='Choose one of the Species cards below' />}\n\t\t\t/>\n\t\t);\n\n\t\tlet roleCard = (\n\t\t\t<PlayingCard\n\t\t\t\ttype={CardType.Role}\n\t\t\t\tdisabled={true}\n\t\t\t\tfront={<PlaceholderCard text='Role' subtext='Choose one of the Role cards below' />}\n\t\t\t/>\n\t\t);\n\n\t\tlet backgroundCard = (\n\t\t\t<PlayingCard\n\t\t\t\ttype={CardType.Background}\n\t\t\t\tdisabled={true}\n\t\t\t\tfront={<PlaceholderCard text='Background' subtext='Choose one of the Background cards below' />}\n\t\t\t/>\n\t\t);\n\n\t\tconst species = GameLogic.getSpecies(this.state.selectedSpeciesID);\n\t\tif (species) {\n\t\t\tspeciesCard = (\n\t\t\t\t<SpeciesCard species={species} />\n\t\t\t);\n\t\t}\n\n\t\tconst role = GameLogic.getRole(this.state.selectedRoleID);\n\t\tif (role) {\n\t\t\troleCard = (\n\t\t\t\t<RoleCard role={role} />\n\t\t\t);\n\t\t}\n\n\t\tconst background = GameLogic.getBackground(this.state.selectedBackgroundID);\n\t\tif (background) {\n\t\t\tbackgroundCard = (\n\t\t\t\t<BackgroundCard background={background} />\n\t\t\t);\n\t\t}\n\n\t\treturn (\n\t\t\t<div className='card-selection-row'>\n\t\t\t\t<CardList mode='row' cards={[ speciesCard, roleCard, backgroundCard ]} />\n\t\t\t</div>\n\t\t);\n\t};\n\n\tgetSpeciesSection = () => {\n\t\tif (this.state.selectedSpeciesID) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst cards = this.state.speciesIDs.map(id => {\n\t\t\tconst species = GameLogic.getSpecies(id) as SpeciesModel;\n\t\t\treturn (\n\t\t\t\t<SpeciesCard key={species.id} species={species} onClick={this.selectSpecies} />\n\t\t\t);\n\t\t});\n\n\t\tconst redraws = StrongholdLogic.getStructureCharges(this.props.game, StructureType.Hall);\n\t\tif ((redraws > 0) || this.props.options.developer) {\n\t\t\tcards.push(\n\t\t\t\t<StrongholdBenefitCard\n\t\t\t\t\tkey='redraw'\n\t\t\t\t\tlabel='Redraw'\n\t\t\t\t\tavailable={redraws}\n\t\t\t\t\tdeveloper={this.props.options.developer}\n\t\t\t\t\tonRedraw={() => this.redraw(CardType.Species)}\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\n\t\treturn (\n\t\t\t<div className='card-selection-row'>\n\t\t\t\t<CardList mode='row' cards={cards} />\n\t\t\t</div>\n\t\t);\n\t};\n\n\tgetRoleSection = () => {\n\t\tif (this.state.selectedRoleID) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst cards = this.state.roleIDs.map(id => {\n\t\t\tconst role = GameLogic.getRole(id) as RoleModel;\n\t\t\treturn (\n\t\t\t\t<RoleCard key={role.id} role={role} onClick={this.selectRole} />\n\t\t\t);\n\t\t});\n\n\t\tconst redraws = StrongholdLogic.getStructureCharges(this.props.game, StructureType.Hall);\n\t\tif ((redraws > 0) || this.props.options.developer) {\n\t\t\tcards.push(\n\t\t\t\t<StrongholdBenefitCard\n\t\t\t\t\tkey='redraw'\n\t\t\t\t\tlabel='Redraw'\n\t\t\t\t\tavailable={redraws}\n\t\t\t\t\tdeveloper={this.props.options.developer}\n\t\t\t\t\tonRedraw={() => this.redraw(CardType.Role)}\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\n\t\treturn (\n\t\t\t<div className='card-selection-row'>\n\t\t\t\t<CardList mode='row' cards={cards} />\n\t\t\t</div>\n\t\t);\n\t};\n\n\tgetBackgroundSection = () => {\n\t\tif (this.state.selectedBackgroundID) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst cards = this.state.backgroundIDs.map(id => {\n\t\t\tconst background = GameLogic.getBackground(id) as BackgroundModel;\n\t\t\treturn (\n\t\t\t\t<BackgroundCard key={background.id} background={background} onClick={this.selectBackground} />\n\t\t\t);\n\t\t});\n\n\t\tconst redraws = StrongholdLogic.getStructureCharges(this.props.game, StructureType.Hall);\n\t\tif ((redraws > 0) || this.props.options.developer) {\n\t\t\tcards.push(\n\t\t\t\t<StrongholdBenefitCard\n\t\t\t\t\tkey='redraw'\n\t\t\t\t\tlabel='Redraw'\n\t\t\t\t\tavailable={redraws}\n\t\t\t\t\tdeveloper={this.props.options.developer}\n\t\t\t\t\tonRedraw={() => this.redraw(CardType.Background)}\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\n\t\treturn (\n\t\t\t<div className='card-selection-row'>\n\t\t\t\t<CardList mode='row' cards={cards} />\n\t\t\t</div>\n\t\t);\n\t};\n\n\trender = () => {\n\t\ttry {\n\t\t\tconst canSelect = (this.state.selectedSpeciesID !== '') && (this.state.selectedRoleID !== '') && (this.state.selectedBackgroundID !== '');\n\n\t\t\treturn (\n\t\t\t\t<div className='card-page'>\n\t\t\t\t\t{this.getOverviewSection()}\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.props.options.showTips ?\n\t\t\t\t\t\t\t<Expander\n\t\t\t\t\t\t\t\theader={\n\t\t\t\t\t\t\t\t\t<Text type={TextType.Tip}>\n\t\t\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t\t\tTo make a hero, choose one <b>Species</b> card, one <b>Role</b> card, and one <b>Background</b> card.\n\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t</Text>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tcontent={\n\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t<p>Click on a card to select it.</p>\n\t\t\t\t\t\t\t\t\t\t<p>You can click on the <IconRefresh size={15} /> button to flip a card over and see its details.</p>\n\t\t\t\t\t\t\t\t\t\t<p>Each card gives the hero a set of <b>features</b> and <b>actions</b>.</p>\n\t\t\t\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t\t\t\t\t<li>Features are used when the hero gains a level.</li>\n\t\t\t\t\t\t\t\t\t\t\t<li>Actions are used in encounters.</li>\n\t\t\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t: null\n\t\t\t\t\t}\n\t\t\t\t\t<hr />\n\t\t\t\t\t{this.getSpeciesSection()}\n\t\t\t\t\t{this.getRoleSection()}\n\t\t\t\t\t{this.getBackgroundSection()}\n\t\t\t\t\t{ canSelect ? <button className='primary' onClick={() => this.select()}>Next</button> : null }\n\t\t\t\t</div>\n\t\t\t);\n\t\t} catch {\n\t\t\treturn <div className='card-page render-error' />;\n\t\t}\n\t};\n}\n","import { Component } from 'react';\n\nimport { CardType } from '../../../../enums/card-type';\nimport { ItemProficiencyType } from '../../../../enums/item-proficiency-type';\nimport { StructureType } from '../../../../enums/structure-type';\n\nimport { CombatantLogic } from '../../../../logic/combatant-logic';\nimport { GameLogic } from '../../../../logic/game-logic';\nimport { StrongholdLogic } from '../../../../logic/stronghold-logic';\n\nimport type { CombatantModel } from '../../../../models/combatant';\nimport type { GameModel } from '../../../../models/game';\nimport type { ItemModel } from '../../../../models/item';\nimport type { OptionsModel } from '../../../../models/options';\n\nimport { Collections } from '../../../../utils/collections';\nimport { Utils } from '../../../../utils/utils';\n\nimport { CardList, Expander, PlayingCard, Text, TextType } from '../../../controls';\nimport { ItemCard, PlaceholderCard, StrongholdBenefitCard } from '../../../cards';\n\nimport './equipment-page.scss';\n\ninterface Props {\n\thero: CombatantModel;\n\tgame: GameModel;\n\toptions: OptionsModel;\n\taddItems: (items: ItemModel[]) => void;\n\tuseCharge: (type: StructureType, count: number) => void;\n}\n\ninterface State {\n\tslots: {\n\t\tproficiency: ItemProficiencyType;\n\t\tcandidates: ItemModel[];\n\t\tselected: ItemModel | null;\n\t}[];\n}\n\nexport class EquipmentPage extends Component<Props, State> {\n\tconstructor(props: Props) {\n\t\tsuper(props);\n\n\t\tconst slots = CombatantLogic.getProficiencies(this.props.hero).map(prof => {\n\t\t\treturn {\n\t\t\t\tproficiency: prof,\n\t\t\t\tcandidates: Collections.shuffle(GameLogic.getItemsForProficiency(prof, props.options.packIDs)).splice(0, 3),\n\t\t\t\tselected: null\n\t\t\t};\n\t\t});\n\n\t\tthis.state = {\n\t\t\tslots: slots\n\t\t};\n\t}\n\n\tselectItem = (item: ItemModel) => {\n\t\tconst slot = this.state.slots.find(s => s.proficiency === item.proficiency);\n\t\tif (slot) {\n\t\t\tconst copy = JSON.parse(JSON.stringify(item)) as ItemModel;\n\t\t\tcopy.id = Utils.guid();\n\t\t\tslot.selected = copy;\n\t\t\tthis.setState({\n\t\t\t\tslots: this.state.slots\n\t\t\t});\n\t\t}\n\t};\n\n\tredraw = (proficiency: ItemProficiencyType) => {\n\t\tconst slot = this.state.slots.find(s => s.proficiency === proficiency);\n\t\tif (slot) {\n\t\t\tslot.candidates = Collections.shuffle(GameLogic.getItemsForProficiency(proficiency, this.props.options.packIDs)).splice(0, 3);\n\t\t\tthis.setState({\n\t\t\t\tslots: this.state.slots\n\t\t\t}, () => {\n\t\t\t\tif (!this.props.options.developer) {\n\t\t\t\t\tthis.props.useCharge(StructureType.Quartermaster, 1);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t};\n\n\taddItems = () => {\n\t\tconst items = this.state.slots.map(s => s.selected).filter(i => i !== null) as ItemModel[];\n\t\tthis.props.addItems(items);\n\t};\n\n\trender = () => {\n\t\ttry {\n\t\t\tconst role = GameLogic.getRole(this.props.hero.roleID);\n\t\t\tif (!role) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tconst overviewCards = this.state.slots.map((slot, n) => {\n\t\t\t\tif (slot.selected) {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<ItemCard key={n} item={slot.selected} />\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\treturn (\n\t\t\t\t\t<PlayingCard\n\t\t\t\t\t\tkey={n}\n\t\t\t\t\t\ttype={CardType.Item}\n\t\t\t\t\t\tdisabled={true}\n\t\t\t\t\t\tfront={<PlaceholderCard text={slot.proficiency} subtext={`Choose one of the ${slot.proficiency} cards below`} />}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t});\n\n\t\t\tconst slots = this.state.slots.filter(slot => !slot.selected).map((slot, n) => {\n\t\t\t\tconst cards = slot.candidates.map(item => <ItemCard key={item.id} item={item} onClick={this.selectItem} />);\n\n\t\t\t\tconst redraws = StrongholdLogic.getStructureCharges(this.props.game, StructureType.Quartermaster);\n\t\t\t\tif ((redraws > 0) || this.props.options.developer) {\n\t\t\t\t\tcards.push(\n\t\t\t\t\t\t<StrongholdBenefitCard\n\t\t\t\t\t\t\tkey='redraw'\n\t\t\t\t\t\t\tlabel='Redraw'\n\t\t\t\t\t\t\tavailable={redraws}\n\t\t\t\t\t\t\tdeveloper={this.props.options.developer}\n\t\t\t\t\t\t\tonRedraw={() => this.redraw(slot.proficiency)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\treturn (\n\t\t\t\t\t<div key={n} className='card-selection-row'>\n\t\t\t\t\t\t<CardList mode='row' cards={cards} />\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t});\n\n\t\t\tconst canSelect = this.state.slots.every(s => s.selected !== null);\n\n\t\t\treturn (\n\t\t\t\t<div className='equipment-page'>\n\t\t\t\t\t<div className='card-selection-row'>\n\t\t\t\t\t\t<CardList mode='row' cards={overviewCards} />\n\t\t\t\t\t</div>\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.props.options.showTips ?\n\t\t\t\t\t\t\t<Expander\n\t\t\t\t\t\t\t\theader={\n\t\t\t\t\t\t\t\t\t<Text type={TextType.Tip}>Your hero can choose starting equipment.</Text>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tcontent={\n\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t<p>Your hero&apos;s starting features include <b>Proficiencies</b> for weapons, armor, or magical implements.</p>\n\t\t\t\t\t\t\t\t\t\t<p>For each proficiency, you can choose an item for your hero to use.</p>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t: null\n\t\t\t\t\t}\n\t\t\t\t\t<hr />\n\t\t\t\t\t{slots}\n\t\t\t\t\t{ canSelect ? <button className='primary' onClick={() => this.addItems()}>Next</button> : null }\n\t\t\t\t</div>\n\t\t\t);\n\t\t} catch {\n\t\t\treturn <div className='equipment-page render-error' />;\n\t\t}\n\t};\n}\n","import { Component } from 'react';\n\nimport type { CombatantModel } from '../../../../models/combatant';\nimport type { OptionsModel } from '../../../../models/options';\n\nimport { Expander, Text, TextType } from '../../../controls';\nimport { CombatantRowPanel } from '../../../panels';\n\nimport './finish-page.scss';\n\ninterface Props {\n\thero: CombatantModel;\n\toptions: OptionsModel;\n\trename: () => void;\n\trecolor: () => void;\n\tfinished: () => void;\n}\n\nexport class FinishPage extends Component<Props> {\n\trender = () => {\n\t\ttry {\n\t\t\treturn (\n\t\t\t\t<div className='finish-page'>\n\t\t\t\t\t<CombatantRowPanel combatant={this.props.hero} />\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.props.options.showTips ?\n\t\t\t\t\t\t\t<Expander\n\t\t\t\t\t\t\t\theader={\n\t\t\t\t\t\t\t\t\t<Text type={TextType.Tip}>Choose a name and a color for your hero.</Text>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tcontent={\n\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t<p>You can press <b>Change Name</b> to change your hero&apos;s name.</p>\n\t\t\t\t\t\t\t\t\t\t<p>You can press <b>Change Color</b> to change your hero&apos;s color. This will be used to help identify your hero&apos;s token on the encounter map.</p>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t: null\n\t\t\t\t\t}\n\t\t\t\t\t<hr />\n\t\t\t\t\t<button onClick={this.props.rename}>Change Name</button>\n\t\t\t\t\t<button onClick={this.props.recolor}>Change Color</button>\n\t\t\t\t\t<hr />\n\t\t\t\t\t<button className='primary' onClick={this.props.finished}>Finished</button>\n\t\t\t\t</div>\n\t\t\t);\n\t\t} catch {\n\t\t\treturn <div className='finish-page render-error' />;\n\t\t}\n\t};\n}\n","import { Component } from 'react';\n\nimport { StructureType } from '../../../enums/structure-type';\n\nimport { NameGenerator } from '../../../generators/name-generator';\n\nimport { CombatantLogic } from '../../../logic/combatant-logic';\n\nimport type { CombatantModel } from '../../../models/combatant';\nimport type { GameModel } from '../../../models/game';\nimport type { ItemModel } from '../../../models/item';\nimport type { OptionsModel } from '../../../models/options';\n\nimport { Random } from '../../../utils/random';\n\nimport { Text, TextType } from '../../controls';\nimport { CardPage } from './card-page/card-page';\nimport { EquipmentPage } from './equipment-page/equipment-page';\nimport { FinishPage } from './finish-page/finish-page';\n\nimport './hero-builder-modal.scss';\n\ninterface Props {\n\thero: CombatantModel;\n\tgame: GameModel;\n\toptions: OptionsModel;\n\tuseCharge: (type: StructureType, count: number) => void;\n\tfinished: (hero: CombatantModel) => void;\n}\n\ninterface State {\n\thero: CombatantModel;\n}\n\nexport class HeroBuilderModal extends Component<Props, State> {\n\tconstructor(props: Props) {\n\t\tsuper(props);\n\n\t\tconst color = Random.randomColor(20, 180);\n\n\t\tconst hero = JSON.parse(JSON.stringify(props.hero)) as CombatantModel;\n\t\thero.name = NameGenerator.generateName();\n\t\thero.color = `rgb(${color.r}, ${color.g}, ${color.b})`;\n\n\t\tthis.state = {\n\t\t\thero: hero\n\t\t};\n\t}\n\n\tselectCards = (speciesID: string, roleID: string, backgroundID: string) => {\n\t\tconst hero = this.state.hero;\n\t\tCombatantLogic.applyCombatantCards(hero, speciesID, roleID, backgroundID);\n\t\tthis.setState({\n\t\t\thero: hero\n\t\t});\n\t};\n\n\taddItems = (items: ItemModel[]) => {\n\t\tconst hero = this.state.hero;\n\t\thero.items = items;\n\t\tthis.setState({\n\t\t\thero: hero\n\t\t});\n\t};\n\n\trename = () => {\n\t\tconst hero = this.state.hero;\n\t\thero.name = NameGenerator.generateName();\n\n\t\tthis.setState({\n\t\t\thero: hero\n\t\t});\n\t};\n\n\trecolor = () => {\n\t\tconst color = Random.randomColor(20, 180);\n\n\t\tconst hero = this.state.hero;\n\t\thero.color = `rgb(${color.r}, ${color.g}, ${color.b})`;\n\n\t\tthis.setState({\n\t\t\thero: hero\n\t\t});\n\t};\n\n\tfinished = () => {\n\t\tthis.props.finished(this.state.hero);\n\t};\n\n\trender = () => {\n\t\ttry {\n\t\t\tlet content = null;\n\t\t\tif ((this.state.hero.speciesID === '') && (this.state.hero.roleID === '') && (this.state.hero.backgroundID === '')) {\n\t\t\t\t// Initial card selection\n\t\t\t\tcontent = (\n\t\t\t\t\t<CardPage\n\t\t\t\t\t\tgame={this.props.game}\n\t\t\t\t\t\toptions={this.props.options}\n\t\t\t\t\t\tselect={this.selectCards}\n\t\t\t\t\t\tuseCharge={this.props.useCharge}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t} else if (CombatantLogic.getProficiencies(this.state.hero).length !== this.state.hero.items.length) {\n\t\t\t\t// Choose initial equipment\n\t\t\t\tcontent = (\n\t\t\t\t\t<EquipmentPage\n\t\t\t\t\t\thero={this.state.hero}\n\t\t\t\t\t\tgame={this.props.game}\n\t\t\t\t\t\toptions={this.props.options}\n\t\t\t\t\t\taddItems={this.addItems}\n\t\t\t\t\t\tuseCharge={this.props.useCharge}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t} else if (this.state.hero.level === 1) {\n\t\t\t\t// Finalise character creation\n\t\t\t\tcontent = (\n\t\t\t\t\t<FinishPage\n\t\t\t\t\t\thero={this.state.hero}\n\t\t\t\t\t\toptions={this.props.options}\n\t\t\t\t\t\trename={this.rename}\n\t\t\t\t\t\trecolor={this.recolor}\n\t\t\t\t\t\tfinished={this.finished}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t}\n\n\t\t\treturn (\n\t\t\t\t<div className='hero-builder-modal'>\n\t\t\t\t\t<div className='header'>\n\t\t\t\t\t\t<Text type={TextType.Heading}>\n\t\t\t\t\t\t\tRecruit a Hero\n\t\t\t\t\t\t</Text>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className='content'>\n\t\t\t\t\t\t{content}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t);\n\t\t} catch {\n\t\t\treturn <div className='hero-builder-modal render-error' />;\n\t\t}\n\t};\n}\n","import { Component } from 'react';\n\nimport { ItemLocationType } from '../../../enums/item-location-type';\nimport { ItemProficiencyType } from '../../../enums/item-proficiency-type';\n\nimport { CombatantLogic } from '../../../logic/combatant-logic';\n\nimport type { CombatantModel } from '../../../models/combatant';\nimport type { GameModel } from '../../../models/game';\nimport type { ItemModel } from '../../../models/item';\n\nimport { Collections } from '../../../utils/collections';\n\nimport { Dialog, IconSize, IconType, IconValue, PlayingCard, Text, TextType } from '../../controls';\nimport { ItemCard, PlaceholderCard } from '../../cards';\nimport { CombatantRowPanel } from '../../panels';\n\nimport './magic-item-info-modal.scss';\n\ninterface Props {\n\titem: ItemModel;\n\tgame: GameModel;\n\tequipItem: (item: ItemModel, hero: CombatantModel) => void;\n\tdropItem: (item: ItemModel, hero: CombatantModel) => void;\n\tsellItem: (item: ItemModel) => void;\n}\n\ninterface State {\n\thero: CombatantModel | null;\n}\n\nexport class MagicItemInfoModal extends Component<Props, State> {\n\tconstructor(props: Props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\thero: null\n\t\t};\n\t}\n\n\tsetComparison = (hero: CombatantModel | null) => {\n\t\tthis.setState({\n\t\t\thero: hero\n\t\t});\n\t};\n\n\tgetIsEquippable = (hero: CombatantModel, item: ItemModel) => {\n\t\tlet slotsTotal = 1;\n\t\tswitch (item.location) {\n\t\t\tcase ItemLocationType.Hand:\n\t\t\tcase ItemLocationType.Ring:\n\t\t\t\tslotsTotal = 2;\n\t\t\t\tbreak;\n\t\t}\n\t\tconst equipped = hero.items.filter(i => i.location === item.location);\n\t\tconst slotsUsed = Collections.sum(equipped, i => i.slots);\n\t\tconst slotsAvailable = slotsTotal - slotsUsed;\n\t\treturn item.slots <= slotsAvailable;\n\t};\n\n\tgetDialog = () => {\n\t\tif (this.state.hero === null) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst current = this.state.hero.items.filter(i => i.location === this.props.item.location).map(i => (\n\t\t\t<div key={i.id} className='card-container'>\n\t\t\t\t<ItemCard item={i} />\n\t\t\t\t<button onClick={() => this.props.dropItem(i, this.state.hero as CombatantModel)}>Drop</button>\n\t\t\t</div>\n\t\t));\n\t\tif (current.length === 0) {\n\t\t\tcurrent.push(\n\t\t\t\t<div key='empty' className='card-container'>\n\t\t\t\t\t<PlayingCard\n\t\t\t\t\t\tfront={\n\t\t\t\t\t\t\t<PlaceholderCard\n\t\t\t\t\t\t\t\tcontent={\n\t\t\t\t\t\t\t\t\t<Text type={TextType.Small}>Nothing</Text>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdisabled={true}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\n\t\tconst equippable = this.getIsEquippable(this.state.hero, this.props.item);\n\n\t\treturn (\n\t\t\t<Dialog\n\t\t\t\tlevel={2}\n\t\t\t\tcontent={\n\t\t\t\t\t<div className='item-comparer-dialog'>\n\t\t\t\t\t\t<Text type={TextType.Heading}>{this.state.hero.name}</Text>\n\t\t\t\t\t\t<hr />\n\t\t\t\t\t\t<div className='item-columns'>\n\t\t\t\t\t\t\t<div className='item-column'>\n\t\t\t\t\t\t\t\t<Text type={TextType.SubHeading}>Currently Equipped</Text>\n\t\t\t\t\t\t\t\t{current}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className='item-column'>\n\t\t\t\t\t\t\t\t<Text type={TextType.SubHeading}>New Item</Text>\n\t\t\t\t\t\t\t\t<div className='card-container'>\n\t\t\t\t\t\t\t\t\t<ItemCard item={this.props.item} />\n\t\t\t\t\t\t\t\t\t{equippable ? <button onClick={() => { this.props.equipItem(this.props.item, this.state.hero as CombatantModel); this.setComparison(null); }}>Equip</button> : null}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t}\n\t\t\t\tonClose={() => this.setComparison(null)}\n\t\t\t/>\n\t\t);\n\t};\n\n\trender = () => {\n\t\ttry {\n\t\t\tconst canEquip: JSX.Element[] = [];\n\t\t\tconst canReplace: JSX.Element[] = [];\n\n\t\t\tthis.props.game.heroes\n\t\t\t\t.filter(hero => (this.props.item.proficiency === ItemProficiencyType.None) || CombatantLogic.getProficiencies(hero).includes(this.props.item.proficiency))\n\t\t\t\t.forEach(hero => {\n\t\t\t\t\tconst equippable = this.getIsEquippable(hero, this.props.item);\n\t\t\t\t\tif (equippable) {\n\t\t\t\t\t\tcanEquip.push(\n\t\t\t\t\t\t\t<CombatantRowPanel key={hero.id} combatant={hero} onClick={combatant => this.props.equipItem(this.props.item, combatant)} />\n\t\t\t\t\t\t);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcanReplace.push(\n\t\t\t\t\t\t\t<CombatantRowPanel key={hero.id} combatant={hero} onClick={combatant => this.setComparison(combatant)} />\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\tlet content = null;\n\t\t\tif (canEquip.length + canReplace.length === 0) {\n\t\t\t\tcontent = (\n\t\t\t\t\t<div className='hero-list empty'>\n\t\t\t\t\t\t<Text type={TextType.Small}>Usable by none of your current heroes.</Text>\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tcontent = (\n\t\t\t\t\t<div className='hero-list'>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcanEquip.length > 0 ?\n\t\t\t\t\t\t\t\t<Text type={TextType.Information}>\n\t\t\t\t\t\t\t\t\t<p>These heroes can equip this item. Click on one of them to equip it.</p>\n\t\t\t\t\t\t\t\t</Text>\n\t\t\t\t\t\t\t\t: null\n\t\t\t\t\t\t}\n\t\t\t\t\t\t{canEquip}\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcanReplace.length > 0 ?\n\t\t\t\t\t\t\t\t<Text type={TextType.Information}>\n\t\t\t\t\t\t\t\t\t<p>These heroes can equip this item, but already have an item in this location. Click on one of them to compare items.</p>\n\t\t\t\t\t\t\t\t</Text>\n\t\t\t\t\t\t\t\t: null\n\t\t\t\t\t\t}\n\t\t\t\t\t\t{canReplace}\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t}\n\n\t\t\treturn (\n\t\t\t\t<div className='magic-item-info-modal'>\n\t\t\t\t\t<Text type={TextType.Heading}>Magic Item</Text>\n\t\t\t\t\t<hr />\n\t\t\t\t\t<div className='magic-item-info-content'>\n\t\t\t\t\t\t<div className='card'>\n\t\t\t\t\t\t\t<ItemCard item={this.props.item} />\n\t\t\t\t\t\t\t<button onClick={() => this.props.sellItem(this.props.item)}>\n\t\t\t\t\t\t\t\tSell<br /><IconValue type={IconType.Money} value={50} size={IconSize.Button} />\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{content}\n\t\t\t\t\t</div>\n\t\t\t\t\t{this.getDialog()}\n\t\t\t\t</div>\n\t\t\t);\n\t\t} catch {\n\t\t\treturn <div className='magic-item-modal render-error' />;\n\t\t}\n\t};\n}\n","import { Component } from 'react';\n\nimport { BackgroundData } from '../../../data/background-data';\nimport { HeroSpeciesData } from '../../../data/hero-species-data';\nimport { ItemData } from '../../../data/item-data';\nimport { MonsterSpeciesData } from '../../../data/monster-species-data';\nimport { PotionData } from '../../../data/potion-data';\nimport { RoleData } from '../../../data/role-data';\nimport { StructureData } from '../../../data/structure-data';\n\nimport { PackLogic } from '../../../logic/pack-logic';\n\nimport type { OptionsModel } from '../../../models/options';\nimport type { PackModel } from '../../../models/pack';\n\nimport { Format } from '../../../utils/format';\n\nimport { BackgroundCard, ItemCard, PackCard, RoleCard, SpeciesCard, StructureCard } from '../../cards';\nimport { CardList, Dialog, Text, TextType } from '../../controls';\n\nimport './packs-modal.scss';\n\ninterface Props {\n\toptions: OptionsModel;\n\tgetPrice: (packs: PackModel[]) => number;\n\taddPacks: (packs: PackModel[]) => void;\n\tremovePack: (pack: PackModel) => void;\n}\n\ninterface State {\n\tselectedPack: PackModel | null;\n}\n\nexport class PacksModal extends Component<Props, State> {\n\tconstructor(props: Props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tselectedPack: null\n\t\t};\n\t}\n\n\tgetDialog = () => {\n\t\tif (!this.state.selectedPack) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst pack = this.state.selectedPack;\n\n\t\tlet owned = null;\n\t\tif ((pack.id === '') || this.props.options.packIDs.includes(pack.id)) {\n\t\t\towned = null;\n\t\t} else {\n\t\t\towned = (\n\t\t\t\t<div>\n\t\t\t\t\t<Text type={TextType.Information}>\n\t\t\t\t\t\t<p>You <b>do not</b> own this card pack.</p>\n\t\t\t\t\t</Text>\n\t\t\t\t\t<button className='primary' onClick={() => this.props.addPacks([ pack ])}>\n\t\t\t\t\t\tGet This Pack ({Format.toCurrency(this.props.getPrice([ pack ]), '$')})\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\n\t\tconst heroes = HeroSpeciesData.getList().filter(s => s.packID === pack.id).map(s => {\n\t\t\treturn (\n\t\t\t\t<SpeciesCard key={s.id} species={s} />\n\t\t\t);\n\t\t});\n\n\t\tconst monsters = MonsterSpeciesData.getList().filter(s => s.packID === pack.id).map(s => {\n\t\t\treturn (\n\t\t\t\t<SpeciesCard key={s.id} species={s} />\n\t\t\t);\n\t\t});\n\n\t\tconst roles = RoleData.getList().filter(r => r.packID === pack.id).map(r => {\n\t\t\treturn (\n\t\t\t\t<RoleCard key={r.id} role={r} />\n\t\t\t);\n\t\t});\n\n\t\tconst backgrounds = BackgroundData.getList().filter(b => b.packID === pack.id).map(b => {\n\t\t\treturn (\n\t\t\t\t<BackgroundCard key={b.id} background={b} />\n\t\t\t);\n\t\t});\n\n\t\tconst structures = StructureData.getList().filter(s => s.packID === pack.id).map(s => {\n\t\t\treturn (\n\t\t\t\t<StructureCard key={s.id} structure={s} />\n\t\t\t);\n\t\t});\n\n\t\tconst items = ItemData.getList().filter(i => i.packID === pack.id).map(i => {\n\t\t\treturn (\n\t\t\t\t<ItemCard key={i.id} item={i} />\n\t\t\t);\n\t\t});\n\n\t\tconst potions = PotionData.getList().filter(i => i.packID === pack.id).map(p => {\n\t\t\treturn (\n\t\t\t\t<ItemCard key={p.id} item={p} />\n\t\t\t);\n\t\t});\n\n\t\treturn (\n\t\t\t<Dialog\n\t\t\t\tcontent={\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<Text type={TextType.Heading}>{this.state.selectedPack.name}</Text>\n\t\t\t\t\t\t<hr />\n\t\t\t\t\t\t<Text>\n\t\t\t\t\t\t\t<p style={{ textAlign: 'center' }}>{this.state.selectedPack.description}</p>\n\t\t\t\t\t\t</Text>\n\t\t\t\t\t\t{owned}\n\t\t\t\t\t\t{heroes.length > 0 ? <hr /> : null}\n\t\t\t\t\t\t{heroes.length > 0 ? <Text type={TextType.MinorHeading}>Hero Species Cards</Text> : null}\n\t\t\t\t\t\t{heroes.length > 0 ? <CardList cards={heroes} /> : null}\n\t\t\t\t\t\t{monsters.length > 0 ? <hr /> : null}\n\t\t\t\t\t\t{monsters.length > 0 ? <Text type={TextType.MinorHeading}>Monster Species Cards</Text> : null}\n\t\t\t\t\t\t{monsters.length > 0 ? <CardList cards={monsters} /> : null}\n\t\t\t\t\t\t{roles.length > 0 ? <hr /> : null}\n\t\t\t\t\t\t{roles.length > 0 ? <Text type={TextType.MinorHeading}>Role Cards</Text> : null}\n\t\t\t\t\t\t{roles.length > 0 ? <CardList cards={roles} /> : null}\n\t\t\t\t\t\t{backgrounds.length > 0 ? <hr /> : null}\n\t\t\t\t\t\t{backgrounds.length > 0 ? <Text type={TextType.MinorHeading}>Background Cards</Text> : null}\n\t\t\t\t\t\t{backgrounds.length > 0 ? <CardList cards={backgrounds} /> : null}\n\t\t\t\t\t\t{structures.length > 0 ? <hr /> : null}\n\t\t\t\t\t\t{structures.length > 0 ? <Text type={TextType.MinorHeading}>Structure Cards</Text> : null}\n\t\t\t\t\t\t{structures.length > 0 ? <CardList cards={structures} /> : null}\n\t\t\t\t\t\t{items.length > 0 ? <hr /> : null}\n\t\t\t\t\t\t{items.length > 0 ? <Text type={TextType.MinorHeading}>Item Cards</Text> : null}\n\t\t\t\t\t\t{items.length > 0 ? <CardList cards={items} /> : null}\n\t\t\t\t\t\t{potions.length > 0 ? <hr /> : null}\n\t\t\t\t\t\t{potions.length > 0 ? <Text type={TextType.MinorHeading}>Potion Cards</Text> : null}\n\t\t\t\t\t\t{potions.length > 0 ? <CardList cards={potions} /> : null}\n\t\t\t\t\t</div>\n\t\t\t\t}\n\t\t\t\tlevel={2}\n\t\t\t\tonClose={() => this.setState({ selectedPack: null })}\n\t\t\t/>\n\t\t);\n\t};\n\n\trender = () => {\n\t\ttry {\n\t\t\tconst core = {\n\t\t\t\tid: '',\n\t\t\t\tname: 'Skirmish',\n\t\t\t\tdescription: 'The core cards for the game, available to all.'\n\t\t\t};\n\n\t\t\tconst ownedPacks = PackLogic.getPacks().filter(pack => (pack.id === '') || this.props.options.packIDs.includes(pack.id));\n\t\t\tconst notOwnedPacks = PackLogic.getPacks().filter(pack => (pack.id !== '') && !this.props.options.packIDs.includes(pack.id));\n\n\t\t\tconst owned = ownedPacks.map(pack => {\n\t\t\t\treturn (\n\t\t\t\t\t<PackCard\n\t\t\t\t\t\tkey={pack.id}\n\t\t\t\t\t\tpack={pack}\n\t\t\t\t\t\tonClick={p => this.setState({ selectedPack: p })}\n\t\t\t\t\t\tonRemove={this.props.options.developer ? p => this.props.removePack(p) : null}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t});\n\t\t\towned.unshift(\n\t\t\t\t<PackCard key='core' pack={core} onClick={p => this.setState({ selectedPack: p })} />\n\t\t\t);\n\t\t\tconst notOwned = notOwnedPacks.map(pack => {\n\t\t\t\treturn (\n\t\t\t\t\t<PackCard\n\t\t\t\t\t\tkey={pack.id}\n\t\t\t\t\t\tpack={pack}\n\t\t\t\t\t\tonClick={p => this.setState({ selectedPack: p })}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t});\n\n\t\t\treturn (\n\t\t\t\t<div className='packs-modal'>\n\t\t\t\t\t<Text type={TextType.Heading}>Card Packs</Text>\n\t\t\t\t\t<hr />\n\t\t\t\t\t{notOwned.length > 0 ? <Text type={TextType.SubHeading}>Available Packs</Text> : null}\n\t\t\t\t\t{\n\t\t\t\t\t\tnotOwned.length > 1 ?\n\t\t\t\t\t\t\t<button className='primary' onClick={() => this.props.addPacks(notOwnedPacks)}>\n\t\t\t\t\t\t\t\tGet All Packs ({Format.toCurrency(this.props.getPrice(notOwnedPacks), '$')})\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t: null\n\t\t\t\t\t}\n\t\t\t\t\t{notOwned.length > 0 ? <CardList cards={notOwned} /> : null}\n\t\t\t\t\t{notOwned.length > 0 ? <hr /> : null}\n\t\t\t\t\t<Text type={TextType.SubHeading}>My Packs</Text>\n\t\t\t\t\t<CardList cards={owned} />\n\t\t\t\t\t{this.getDialog()}\n\t\t\t\t</div>\n\t\t\t);\n\t\t} catch {\n\t\t\treturn <div className='packs-modal render-error' />;\n\t\t}\n\t};\n}\n","import { Component } from 'react';\n\nimport { CampaignMapLogic } from '../../../../logic/campaign-map-logic';\n\nimport type { CombatantModel } from '../../../../models/combatant';\nimport type { GameModel } from '../../../../models/game';\nimport type { OptionsModel } from '../../../../models/options';\nimport type { RegionModel } from '../../../../models/region';\n\nimport { Collections } from '../../../../utils/collections';\n\nimport { BoonCard, RegionCard } from '../../../cards';\nimport { Dialog, Expander, Gauge, StatValue, Text, TextType } from '../../../controls';\nimport { CampaignMapPanel } from '../../../panels';\nimport { EncounterStartModal } from '../../../modals';\n\nimport './campaign-map-page.scss';\n\ninterface Props {\n\tgame: GameModel;\n\toptions: OptionsModel;\n\tstartEncounter: (region: RegionModel, heroes: CombatantModel[], benefits: number, detriments: number) => void;\n\tregenerateCampaignMap: () => void;\n\tconquer: (region: RegionModel) => void;\n}\n\ninterface State {\n\tselectedRegion: RegionModel | null;\n\tshowHeroSelection: boolean;\n}\n\nexport class CampaignMapPage extends Component<Props, State> {\n\tconstructor(props: Props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tselectedRegion: null,\n\t\t\tshowHeroSelection: false\n\t\t};\n\t}\n\n\tconquer = (region: RegionModel) => {\n\t\tthis.setState({\n\t\t\tselectedRegion: null\n\t\t}, () => {\n\t\t\tthis.props.conquer(region);\n\t\t});\n\t};\n\n\tgetSidebar = () => {\n\t\tif (this.state.selectedRegion) {\n\t\t\tconst canAttack = CampaignMapLogic.canAttackRegion(this.props.game.map, this.state.selectedRegion);\n\t\t\tconst heroesExist = this.props.game.heroes.length > 0;\n\t\t\treturn (\n\t\t\t\t<div key={this.state.selectedRegion.id} className='sidebar'>\n\t\t\t\t\t{\n\t\t\t\t\t\tcanAttack ?\n\t\t\t\t\t\t\tnull :\n\t\t\t\t\t\t\t<Text type={TextType.Information}>\n\t\t\t\t\t\t\t\t<p><b>You can&apos;t attack {this.state.selectedRegion.name}</b> because it&apos;s not adjacent to your land.</p>\n\t\t\t\t\t\t\t</Text>\n\t\t\t\t\t}\n\t\t\t\t\t{\n\t\t\t\t\t\theroesExist ?\n\t\t\t\t\t\t\tnull :\n\t\t\t\t\t\t\t<Text type={TextType.Information}>\n\t\t\t\t\t\t\t\t<p><b>You can&apos;t attack {this.state.selectedRegion.name}</b> because you don&apos;t have any heroes.</p>\n\t\t\t\t\t\t\t</Text>\n\t\t\t\t\t}\n\t\t\t\t\t{canAttack && heroesExist ? <button className='primary' onClick={() => this.setState({ showHeroSelection: true })}>Start an encounter</button> : null}\n\t\t\t\t\t{this.props.options.developer ? <button className='developer' onClick={() => this.conquer(this.state.selectedRegion as RegionModel)}>Conquer</button> : null}\n\t\t\t\t\t<hr />\n\t\t\t\t\t<div className='region-details-card'>\n\t\t\t\t\t\t<RegionCard map={this.props.game.map} region={this.state.selectedRegion} options={this.props.options} />\n\t\t\t\t\t</div>\n\t\t\t\t\t<Text>\n\t\t\t\t\t\tIf you take control of {this.state.selectedRegion.name}, you can recruit a new hero, build a new structure in your stronghold, and you will receive this reward:\n\t\t\t\t\t</Text>\n\t\t\t\t\t<div className='region-details-boon'>\n\t\t\t\t\t\t<BoonCard boon={this.state.selectedRegion.boon} />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\n\t\tconst regions = Collections.distinct(this.props.game.map.squares.map(sq => sq.regionID).filter(id => id !== ''), id => id);\n\t\tconst owned = this.props.game.map.squares.filter(sq => sq.regionID === '');\n\t\tconst ownedFraction = owned.length / this.props.game.map.squares.length;\n\t\tconst encounters = Collections.sum(this.props.game.map.regions, r => r.encounters.length);\n\n\t\treturn (\n\t\t\t<div key='map' className='sidebar'>\n\t\t\t\t<Text type={TextType.SubHeading}>The Island</Text>\n\t\t\t\t<Text>\n\t\t\t\t\t<p>This is the map of the island.</p>\n\t\t\t\t\t<p>The white area is the part of the island that you control; from here you can attack any adjacent region.</p>\n\t\t\t\t\t<p>Select a region to learn more about it.</p>\n\t\t\t\t</Text>\n\t\t\t\t{this.props.options.developer ? <button className='developer' onClick={this.props.regenerateCampaignMap}>Regenerate Map</button> : null}\n\t\t\t\t{\n\t\t\t\t\tthis.props.options.showTips ?\n\t\t\t\t\t\t<Expander\n\t\t\t\t\t\t\theader={\n\t\t\t\t\t\t\t\t<Text type={TextType.Tip}>To start an encounter, tap on a region on the island.</Text>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tcontent={\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<p>Encounters are the main way your heroes can gain XP (and level up).</p>\n\t\t\t\t\t\t\t\t\t<p>Each region has a certain number of encounters that must be won in order to conquer that region.</p>\n\t\t\t\t\t\t\t\t\t<p>Conquering a region will allow you to recruit a new hero, and will also provide an additional reward - often money or a magical item.</p>\n\t\t\t\t\t\t\t\t\t<p>You can only attack regions that border the land you already control (in white).</p>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t: null\n\t\t\t\t}\n\t\t\t\t<hr />\n\t\t\t\t<div className='map-stats'>\n\t\t\t\t\t<StatValue\n\t\t\t\t\t\torientation='vertical'\n\t\t\t\t\t\tlabel='Island Controlled'\n\t\t\t\t\t\tvalue={<Gauge progress={ownedFraction} content={<b>{Math.floor(ownedFraction * 100)}%</b>} />}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div className='map-stats'>\n\t\t\t\t\t<StatValue\n\t\t\t\t\t\torientation='vertical'\n\t\t\t\t\t\tlabel='Regions Remaining'\n\t\t\t\t\t\tvalue={regions.length}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t{\n\t\t\t\t\tencounters <= 100 ?\n\t\t\t\t\t\t<div className='map-stats'>\n\t\t\t\t\t\t\t<StatValue\n\t\t\t\t\t\t\t\torientation='vertical'\n\t\t\t\t\t\t\t\tlabel='Encounters Remaining'\n\t\t\t\t\t\t\t\tvalue={encounters}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t: null\n\t\t\t\t}\n\t\t\t</div>\n\t\t);\n\t};\n\n\tgetDialog = () => {\n\t\tif (!this.state.showHeroSelection) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn (\n\t\t\t<Dialog\n\t\t\t\tcontent={(\n\t\t\t\t\t<EncounterStartModal\n\t\t\t\t\t\tregion={this.state.selectedRegion as RegionModel}\n\t\t\t\t\t\tgame={this.props.game}\n\t\t\t\t\t\toptions={this.props.options}\n\t\t\t\t\t\tstartEncounter={this.props.startEncounter}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t\tonClose={() => {\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\tshowHeroSelection: false\n\t\t\t\t\t});\n\t\t\t\t}}\n\t\t\t/>\n\t\t);\n\t};\n\n\trender = () => {\n\t\ttry {\n\t\t\treturn (\n\t\t\t\t<div className='campaign-map-page'>\n\t\t\t\t\t<div className='map-content' onClick={() => this.setState({ selectedRegion: null })}>\n\t\t\t\t\t\t<CampaignMapPanel\n\t\t\t\t\t\t\tmap={this.props.game.map}\n\t\t\t\t\t\t\tselectedRegion={this.state.selectedRegion}\n\t\t\t\t\t\t\tonSelectRegion={region => this.setState({ selectedRegion: region })}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t{this.getSidebar()}\n\t\t\t\t\t{this.getDialog()}\n\t\t\t\t</div>\n\t\t\t);\n\t\t} catch {\n\t\t\treturn <div className='campaign-map-page render-error' />;\n\t\t}\n\t};\n}\n","import { Component } from 'react';\n\nimport { PackData } from '../../../../data/pack-data';\n\nimport { DamageCategoryType } from '../../../../enums/damage-category-type';\nimport { DamageType } from '../../../../enums/damage-type';\n\nimport { GameLogic } from '../../../../logic/game-logic';\n\nimport type { ActionEffectModel } from '../../../../models/action';\nimport type { OptionsModel } from '../../../../models/options';\n\nimport { Platform } from '../../../../platform/platform';\n\nimport { Selector, Text, TextType } from '../../../controls';\nimport { CardGridPanel } from '../../../panels';\n\nimport './dev-page.scss';\n\ninterface Props {\n\toptions: OptionsModel;\n\tplatform: Platform;\n}\n\ninterface State {\n\tview: string;\n}\n\nexport class DevPage extends Component<Props, State> {\n\tconstructor(props: Props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tview: 'cards'\n\t\t};\n\t}\n\n\tgetDamage = () => {\n\t\tconst checkDamage: (damage: DamageType, effects: ActionEffectModel[]) => boolean = (damage: DamageType, effects: ActionEffectModel[]) => {\n\t\t\tconst found = effects.filter(e => e.id === 'damage').some(e => {\n\t\t\t\tconst data = e.data as { type: DamageType, rank: number };\n\t\t\t\treturn damage === data.type;\n\t\t\t});\n\t\t\tif (found) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\treturn effects.some(e => checkDamage(damage, e.children));\n\t\t};\n\n\t\tconst categories = [\n\t\t\t{\n\t\t\t\tcategory: DamageCategoryType.Physical,\n\t\t\t\ttypes: [\n\t\t\t\t\tDamageType.Edged,\n\t\t\t\t\tDamageType.Impact,\n\t\t\t\t\tDamageType.Piercing\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tcategory: DamageCategoryType.Energy,\n\t\t\t\ttypes: [\n\t\t\t\t\tDamageType.Cold,\n\t\t\t\t\tDamageType.Electricity,\n\t\t\t\t\tDamageType.Fire,\n\t\t\t\t\tDamageType.Light,\n\t\t\t\t\tDamageType.Sonic\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tcategory: DamageCategoryType.Corruption,\n\t\t\t\ttypes: [\n\t\t\t\t\tDamageType.Acid,\n\t\t\t\t\tDamageType.Decay,\n\t\t\t\t\tDamageType.Poison,\n\t\t\t\t\tDamageType.Psychic\n\t\t\t\t]\n\t\t\t}\n\t\t];\n\t\tconst actions = GameLogic.getAllActions(PackData.getList().map(p => p.id));\n\n\t\treturn (\n\t\t\t<div className='damage-container'>\n\t\t\t\t{categories.map(c => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div key={c.category} className='damage-category'>\n\t\t\t\t\t\t\t<Text type={TextType.SubHeading}>{c.category}</Text>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t{c.types.map(type => {\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<div key={type} className='damage-type'>\n\t\t\t\t\t\t\t\t\t\t\t<Text type={TextType.MinorHeading}>{type}</Text>\n\t\t\t\t\t\t\t\t\t\t\t<div className='damage-actions'>\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\tactions\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.filter(a => checkDamage(type, a.effects))\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.sort((a, b) => a.name.localeCompare(b.name))\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.map(a => <Text key={a.id} type={TextType.Small}>{a.name}</Text>)\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t</div>\n\t\t);\n\t};\n\n\tgetEffects = () => {\n\t\tconst list: { id: string, data: unknown[] }[] = [];\n\n\t\tconst addToList = (effects: ActionEffectModel[]) => {\n\t\t\teffects.forEach(e => {\n\t\t\t\tlet existing = list.find(item => item.id === e.id);\n\t\t\t\tif (!existing) {\n\t\t\t\t\texisting = { id: e.id, data: [] };\n\t\t\t\t\tlist.push(existing);\n\t\t\t\t}\n\t\t\t\texisting.data.push(e.data);\n\t\t\t\taddToList(e.children);\n\t\t\t});\n\t\t};\n\n\t\tconst actions = GameLogic.getAllActions(PackData.getList().map(p => p.id));\n\t\tactions.forEach(a => addToList(a.effects));\n\n\t\treturn (\n\t\t\t<div className='effect-container'>\n\t\t\t\t{list.map(item => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div key={item.id} className='effect-type'>\n\t\t\t\t\t\t\t<Text type={TextType.MinorHeading}>{item.id}</Text>\n\t\t\t\t\t\t\t<div className='effect-data'>\n\t\t\t\t\t\t\t\t{item.data.map((data, n) => <Text key={n} type={TextType.Small}>{JSON.stringify(data)}</Text>)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t</div>\n\t\t);\n\t};\n\n\trender = () => {\n\t\ttry {\n\t\t\tconst options = [\n\t\t\t\t{ id: 'cards', display: 'Cards' },\n\t\t\t\t{ id: 'damage', display: 'Damage' },\n\t\t\t\t{ id: 'effects', display: 'Effects' }\n\t\t\t];\n\n\t\t\tlet content = null;\n\t\t\tswitch (this.state.view) {\n\t\t\t\tcase 'cards':\n\t\t\t\t\tcontent = <CardGridPanel options={this.props.options} platform={this.props.platform} />;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'damage':\n\t\t\t\t\tcontent = this.getDamage();\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'effects':\n\t\t\t\t\tcontent = this.getEffects();\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\treturn (\n\t\t\t\t<div className='dev-page'>\n\t\t\t\t\t<Selector options={options} selectedID={this.state.view} onSelect={id => this.setState({ view: id })} />\n\t\t\t\t\t<div className='dev-page-content'>\n\t\t\t\t\t\t{content}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t);\n\t\t} catch {\n\t\t\treturn <div className='dev-page render-error' />;\n\t\t}\n\t};\n}\n","import { Component } from 'react';\n\nimport { BoonType } from '../../../../enums/boon-type';\nimport { CombatantType } from '../../../../enums/combatant-type';\nimport { StructureType } from '../../../../enums/structure-type';\n\nimport { Factory } from '../../../../logic/factory';\nimport { GameLogic } from '../../../../logic/game-logic';\nimport { StrongholdLogic } from '../../../../logic/stronghold-logic';\n\nimport type { BoonModel } from '../../../../models/boon';\nimport type { CombatantModel } from '../../../../models/combatant';\nimport type { FeatureModel } from '../../../../models/feature';\nimport type { GameModel } from '../../../../models/game';\nimport type { ItemModel } from '../../../../models/item';\nimport type { OptionsModel } from '../../../../models/options';\n\nimport { Badge, CardList, ConfirmButton, Dialog, PlayingCard, Text, TextType } from '../../../controls';\nimport { BoonCard, HeroCard, PlaceholderCard } from '../../../cards';\nimport { CharacterSheetModal, HeroBuilderModal } from '../../../modals';\n\nimport './heroes-page.scss';\n\ninterface Props {\n\tgame: GameModel;\n\toptions: OptionsModel;\n\taddHero: (hero: CombatantModel) => void;\n\taddXP: (hero: CombatantModel, useCharge: StructureType | null) => void;\n\tequipItem: (item: ItemModel, hero: CombatantModel) => void;\n\tunequipItem: (item: ItemModel, hero: CombatantModel) => void;\n\tpickUpItem: (item: ItemModel, hero: CombatantModel) => void;\n\tdropItem: (item: ItemModel, hero: CombatantModel) => void;\n\tlevelUp: (feature: FeatureModel, hero: CombatantModel) => void;\n\tretireHero: (combatant: CombatantModel) => void;\n\tredeemBoon: (boon: BoonModel, hero: CombatantModel | null, item: ItemModel | null, newItem: ItemModel | null, cost: number) => void;\n\tuseCharge: (type: StructureType, count: number) => void;\n}\n\ninterface State {\n\tselectedHero: CombatantModel | null;\n\tselectedBoon: BoonModel | null;\n\tretiringHero: CombatantModel | null;\n}\n\nexport class HeroesPage extends Component<Props, State> {\n\tconstructor(props: Props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tselectedHero: null,\n\t\t\tselectedBoon: null,\n\t\t\tretiringHero: null\n\t\t};\n\t}\n\n\tselectBoon = (boon: BoonModel) => {\n\t\tswitch (boon.type) {\n\t\t\tcase BoonType.ExtraHero:\n\t\t\tcase BoonType.MagicItem:\n\t\t\tcase BoonType.Money: {\n\t\t\t\tthis.props.redeemBoon(boon, null, null, null, 0);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase BoonType.ExtraXP:\n\t\t\tcase BoonType.LevelUp:\n\t\t\tcase BoonType.EnchantItem: {\n\t\t\t\tthis.setState({\n\t\t\t\t\tselectedBoon: boon\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t};\n\n\tselectHero = (hero: CombatantModel) => {\n\t\tthis.setState({\n\t\t\tselectedHero: hero\n\t\t});\n\t};\n\n\tselectRetiringHero = (hero: CombatantModel) => {\n\t\tthis.setState({\n\t\t\tretiringHero: hero\n\t\t});\n\t};\n\n\tretireHero = (hero: CombatantModel) => {\n\t\tthis.setState({\n\t\t\tselectedHero: null\n\t\t}, () => {\n\t\t\tthis.props.retireHero(hero);\n\t\t});\n\t};\n\n\tgetContent = () => {\n\t\tlet levelUp = null;\n\t\tif (this.props.game.heroes.some(h => h.xp >= h.level)) {\n\t\t\tlevelUp = (\n\t\t\t\t<Text type={TextType.Information}>\n\t\t\t\t\t<p><b>Some of your heroes have gained enough XP to level up.</b> Open their character sheet to upgrade them.</p>\n\t\t\t\t</Text>\n\t\t\t);\n\t\t}\n\n\t\tif (this.props.game.heroes.length > 0) {\n\t\t\tconst cards = this.props.game.heroes.map(hero => {\n\t\t\t\treturn (\n\t\t\t\t\t<div key={hero.id}>\n\t\t\t\t\t\t<Badge value={hero.xp >= hero.level ? 'Level Up' : null}>\n\t\t\t\t\t\t\t<HeroCard hero={hero} onCharacterSheet={this.selectHero} onRetire={this.selectRetiringHero} />\n\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t{this.props.options.developer ? <button className='developer' onClick={() => this.props.addXP(hero, null)}>Add XP</button> : null}\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t});\n\n\t\t\treturn (\n\t\t\t\t<div>\n\t\t\t\t\t{levelUp}\n\t\t\t\t\t<CardList cards={cards} />\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<Text type={TextType.Information}>\n\t\t\t\t\t<p>You have no heroes.</p>\n\t\t\t\t</Text>\n\t\t\t</div>\n\t\t);\n\t};\n\n\tgetSidebar = () => {\n\t\tlet boons = null;\n\t\tif (this.props.game.boons.filter(boon => GameLogic.getBoonIsHeroType(boon)).length > 0) {\n\t\t\tconst cards = this.props.game.boons\n\t\t\t\t.filter(boon => GameLogic.getBoonIsHeroType(boon))\n\t\t\t\t.map(b => <BoonCard key={b.id} boon={b} onClick={this.selectBoon} />);\n\t\t\tboons = (\n\t\t\t\t<div>\n\t\t\t\t\t<Text type={TextType.Information}>\n\t\t\t\t\t\t<p><b>You have won these rewards.</b> Select a card to redeem that reward.</p>\n\t\t\t\t\t</Text>\n\t\t\t\t\t<CardList cards={cards} />\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\n\t\tlet slots = null;\n\t\tif (this.props.game.heroSlots > 0) {\n\t\t\tconst atHeroLimit = this.props.game.heroes.length >= StrongholdLogic.getHeroLimit(this.props.game);\n\t\t\tslots = (\n\t\t\t\t<div className='center'>\n\t\t\t\t\t<PlayingCard\n\t\t\t\t\t\tstack={true}\n\t\t\t\t\t\tfront={\n\t\t\t\t\t\t\t<PlaceholderCard\n\t\t\t\t\t\t\t\ttext='Recruits Available'\n\t\t\t\t\t\t\t\tsubtext={atHeroLimit ? 'You can\\'t recruit any more heroes until you have more living space in your stronghold.' : 'Click here to recruit a new hero.'}\n\t\t\t\t\t\t\t\tcontent={<div className='slots-count'>{this.props.game.heroSlots}</div>}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdisabled={atHeroLimit}\n\t\t\t\t\t\tonClick={() => this.setState({ selectedHero: Factory.createCombatant(CombatantType.Hero) })}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\n\t\treturn (\n\t\t\t<div className='sidebar'>\n\t\t\t\t<Text type={TextType.SubHeading}>Your Team</Text>\n\t\t\t\t<Text>This page shows the heroes that you have recruited.</Text>\n\t\t\t\t{boons !== null ? <hr /> : null}\n\t\t\t\t{boons}\n\t\t\t\t{slots !== null ? <hr /> : null}\n\t\t\t\t{slots}\n\t\t\t</div>\n\t\t);\n\t};\n\n\tgetDialog = () => {\n\t\tif (this.state.selectedHero) {\n\t\t\tif (!this.state.selectedHero.name) {\n\t\t\t\treturn (\n\t\t\t\t\t<Dialog\n\t\t\t\t\t\tcontent={(\n\t\t\t\t\t\t\t<HeroBuilderModal\n\t\t\t\t\t\t\t\thero={this.state.selectedHero}\n\t\t\t\t\t\t\t\tgame={this.props.game}\n\t\t\t\t\t\t\t\toptions={this.props.options}\n\t\t\t\t\t\t\t\tuseCharge={this.props.useCharge}\n\t\t\t\t\t\t\t\tfinished={hero => {\n\t\t\t\t\t\t\t\t\tconst h = this.state.selectedHero as CombatantModel;\n\t\t\t\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\t\t\t\tselectedHero: null\n\t\t\t\t\t\t\t\t\t}, () => {\n\t\t\t\t\t\t\t\t\t\thero.id = h.id;\n\t\t\t\t\t\t\t\t\t\tthis.props.addHero(hero);\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\treturn (\n\t\t\t\t\t<Dialog\n\t\t\t\t\t\tcontent={(\n\t\t\t\t\t\t\t<CharacterSheetModal\n\t\t\t\t\t\t\t\tcombatant={this.state.selectedHero}\n\t\t\t\t\t\t\t\tgame={this.props.game}\n\t\t\t\t\t\t\t\tdeveloper={this.props.options.developer}\n\t\t\t\t\t\t\t\tequipItem={this.props.equipItem}\n\t\t\t\t\t\t\t\tunequipItem={this.props.unequipItem}\n\t\t\t\t\t\t\t\tpickUpItem={this.props.pickUpItem}\n\t\t\t\t\t\t\t\tdropItem={this.props.dropItem}\n\t\t\t\t\t\t\t\tlevelUp={this.props.levelUp}\n\t\t\t\t\t\t\t\tretireHero={this.retireHero}\n\t\t\t\t\t\t\t\taddXP={this.props.addXP}\n\t\t\t\t\t\t\t\tuseCharge={this.props.useCharge}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\tonClose={this.state.selectedHero.xp >= this.state.selectedHero.level ? null : () => {\n\t\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\t\tselectedHero: null\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\tif (this.state.selectedBoon) {\n\t\t\tconst heroCards = this.props.game.heroes\n\t\t\t\t.map(h => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<HeroCard\n\t\t\t\t\t\t\tkey={h.id}\n\t\t\t\t\t\t\thero={h}\n\t\t\t\t\t\t\tonClick={hero => {\n\t\t\t\t\t\t\t\tconst boon = this.state.selectedBoon as BoonModel;\n\t\t\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\t\t\tselectedBoon: null\n\t\t\t\t\t\t\t\t}, () => {\n\t\t\t\t\t\t\t\t\tthis.props.redeemBoon(boon, hero, null, null, 0);\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t);\n\t\t\t\t});\n\n\t\t\treturn (\n\t\t\t\t<Dialog\n\t\t\t\t\tcontent={(\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<Text type={TextType.Heading}>Choose a Hero</Text>\n\t\t\t\t\t\t\t<Text type={TextType.Information}>\n\t\t\t\t\t\t\t\t<p>Choose a hero to receive this reward.</p>\n\t\t\t\t\t\t\t</Text>\n\t\t\t\t\t\t\t<CardList cards={heroCards} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t\tonClose={() => {\n\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\tselectedBoon: null\n\t\t\t\t\t\t});\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\n\t\tif (this.state.retiringHero) {\n\t\t\treturn (\n\t\t\t\t<Dialog\n\t\t\t\t\tcontent={(\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<Text type={TextType.Heading}>Retire This Hero</Text>\n\t\t\t\t\t\t\t<div className='retire-hero-card'>\n\t\t\t\t\t\t\t\t<HeroCard hero={this.state.retiringHero} />\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<Text type={TextType.Information}>\n\t\t\t\t\t\t\t\t\t\t<p><b>You can retire this hero.</b> If you do:</p>\n\t\t\t\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t\t\t\t\t<li>You&apos;ll get half their total XP to add to another hero</li>\n\t\t\t\t\t\t\t\t\t\t\t<li>You keep any potions and magic items they have</li>\n\t\t\t\t\t\t\t\t\t\t\t<li>You can recruit a new hero to take their place</li>\n\t\t\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t\t\t<p>This cannot be undone.</p>\n\t\t\t\t\t\t\t\t\t</Text>\n\t\t\t\t\t\t\t\t\t<ConfirmButton\n\t\t\t\t\t\t\t\t\t\tlabel='Retire'\n\t\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\t\tconst h = this.state.retiringHero as CombatantModel;\n\t\t\t\t\t\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\t\t\t\t\t\tretiringHero: null\n\t\t\t\t\t\t\t\t\t\t\t}, () => {\n\t\t\t\t\t\t\t\t\t\t\t\tthis.props.retireHero(h);\n\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t\tonClose={() => {\n\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\tretiringHero: null\n\t\t\t\t\t\t});\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\n\t\treturn null;\n\t};\n\n\trender = () => {\n\t\ttry {\n\t\t\treturn (\n\t\t\t\t<div className='heroes-page'>\n\t\t\t\t\t<div className='heroes-content'>\n\t\t\t\t\t\t{this.getContent()}\n\t\t\t\t\t</div>\n\t\t\t\t\t{this.getSidebar()}\n\t\t\t\t\t{this.getDialog()}\n\t\t\t\t</div>\n\t\t\t);\n\t\t} catch {\n\t\t\treturn <div className='heroes-page render-error' />;\n\t\t}\n\t};\n}\n","import { Component } from 'react';\n\nimport { BoonType } from '../../../../enums/boon-type';\nimport { StructureType } from '../../../../enums/structure-type';\n\nimport { GameLogic } from '../../../../logic/game-logic';\n\nimport type { BoonModel } from '../../../../models/boon';\nimport type { CombatantModel } from '../../../../models/combatant';\nimport type { GameModel } from '../../../../models/game';\nimport type { ItemModel } from '../../../../models/item';\nimport type { OptionsModel } from '../../../../models/options';\n\nimport { Collections } from '../../../../utils/collections';\nimport { Utils } from '../../../../utils/utils';\n\nimport { BoonCard, ItemCard } from '../../../cards';\nimport { BuyEquipmentModal, BuyMagicItemModal, BuyPotionModal, EnchantItemModal, MagicItemInfoModal } from '../../../modals';\nimport { CardList, Dialog, IconSize, IconType, IconValue, StatValue, Text, TextType } from '../../../controls';\n\nimport './items-page.scss';\n\ninterface Props {\n\tgame: GameModel;\n\toptions: OptionsModel;\n\tbuyItem: (item: ItemModel) => void;\n\tsellItem: (item: ItemModel, all: boolean) => void;\n\tequipItem: (item: ItemModel, hero: CombatantModel) => void;\n\tdropItem: (item: ItemModel, hero: CombatantModel) => void;\n\tredeemBoon: (boon: BoonModel, combatant: CombatantModel | null, item: ItemModel | null, newItem: ItemModel | null, cost: number) => void;\n\tuseCharge: (type: StructureType, count: number) => void;\n\taddMoney: () => void;\n}\n\ninterface State {\n\tshowMarket: 'magical' | 'potion' | 'mundane' | null;\n\tshowEnchant: boolean;\n\tselectedMagicItem: ItemModel | null;\n\tselectedBoon: BoonModel | null;\n}\n\nexport class ItemsPage extends Component<Props, State> {\n\tconstructor(props: Props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tshowMarket: null,\n\t\t\tshowEnchant: false,\n\t\t\tselectedMagicItem: null,\n\t\t\tselectedBoon: null\n\t\t};\n\t}\n\n\tselectBoon = (boon: BoonModel) => {\n\t\tswitch (boon.type) {\n\t\t\tcase BoonType.ExtraHero:\n\t\t\tcase BoonType.MagicItem:\n\t\t\tcase BoonType.Money: {\n\t\t\t\tthis.props.redeemBoon(boon, null, null, null, 0);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase BoonType.ExtraXP:\n\t\t\tcase BoonType.LevelUp:\n\t\t\tcase BoonType.EnchantItem: {\n\t\t\t\tthis.setState({\n\t\t\t\t\tselectedBoon: boon\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t};\n\n\tshowMarket = (market: 'magical' | 'potion' | 'mundane' | null) => {\n\t\tthis.setState({\n\t\t\tshowMarket: market\n\t\t});\n\t};\n\n\tshowEnchant = (show: boolean) => {\n\t\tthis.setState({\n\t\t\tshowEnchant: show\n\t\t});\n\t};\n\n\tbuyItem = (item: ItemModel) => {\n\t\tthis.setState({\n\t\t\tshowMarket: null\n\t\t}, () => {\n\t\t\tthis.props.buyItem(item);\n\t\t});\n\t};\n\n\tenchantItem = (item: ItemModel, newItem: ItemModel) => {\n\t\tlet boon = this.state.selectedBoon;\n\t\tlet cost = 0;\n\t\tif (!boon) {\n\t\t\tboon = {\n\t\t\t\tid: Utils.guid(),\n\t\t\t\ttype: BoonType.EnchantItem,\n\t\t\t\tdata: null\n\t\t\t};\n\t\t\tcost = 100;\n\t\t}\n\n\t\tthis.setState({\n\t\t\tselectedBoon: null,\n\t\t\tshowEnchant: false\n\t\t}, () => {\n\t\t\tthis.props.redeemBoon(boon as BoonModel, null, item, newItem, cost);\n\t\t});\n\t};\n\n\tequipItem = (item: ItemModel, hero: CombatantModel) => {\n\t\tthis.setState({\n\t\t\tselectedMagicItem: null\n\t\t}, () => {\n\t\t\tthis.props.equipItem(item, hero);\n\t\t});\n\t};\n\n\tsellMagicItem = (item: ItemModel) => {\n\t\tthis.setState({\n\t\t\tselectedMagicItem: null\n\t\t}, () => {\n\t\t\tthis.props.sellItem(item, false);\n\t\t});\n\t};\n\n\tgetSidebar = () => {\n\t\tconst moneySection = (\n\t\t\t<div>\n\t\t\t\t<StatValue orientation='vertical' label='Money' value={<IconValue type={IconType.Money} value={this.props.game.money} size={IconSize.Large} />} />\n\t\t\t\t{this.props.options.developer ? <button className='developer' onClick={() => this.props.addMoney()}>Add money</button> : null}\n\t\t\t</div>\n\t\t);\n\n\t\tlet boons = null;\n\t\tif (this.props.game.boons.filter(boon => GameLogic.getBoonIsItemType(boon)).length > 0) {\n\t\t\tconst cards = this.props.game.boons\n\t\t\t\t.filter(boon => GameLogic.getBoonIsItemType(boon))\n\t\t\t\t.map(b => <BoonCard key={b.id} boon={b} onClick={boon => this.selectBoon(boon)} />);\n\t\t\tboons = (\n\t\t\t\t<div>\n\t\t\t\t\t<Text type={TextType.Information}><p><b>You have won these rewards.</b> Select a card to redeem a reward.</p></Text>\n\t\t\t\t\t<CardList cards={cards} />\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\n\t\tconst buySection = [];\n\t\tif (GameLogic.getItemDeck(this.props.options.packIDs).length > 0) {\n\t\t\tbuySection.push(\n\t\t\t\t<button key='mundane' disabled={this.props.game.money < 2} onClick={() => this.showMarket('mundane')}>\n\t\t\t\t\t<div>Buy equipment</div>\n\t\t\t\t\t<IconValue type={IconType.Money} value={2} size={IconSize.Button} />\n\t\t\t\t</button>\n\t\t\t);\n\t\t}\n\t\tif (GameLogic.getPotionDeck(this.props.options.packIDs).length > 0) {\n\t\t\tbuySection.push(\n\t\t\t\t<button key='potion' disabled={this.props.game.money < 20} onClick={() => this.showMarket('potion')}>\n\t\t\t\t\t<div>Buy a potion</div>\n\t\t\t\t\t<IconValue type={IconType.Money} value={20} size={IconSize.Button} />\n\t\t\t\t</button>\n\t\t\t);\n\t\t}\n\t\tif (GameLogic.getItemDeck(this.props.options.packIDs).length > 0) {\n\t\t\tbuySection.push(\n\t\t\t\t<button key='magical' disabled={this.props.game.money < 100} onClick={() => this.showMarket('magical')}>\n\t\t\t\t\t<div>Buy a magic item</div>\n\t\t\t\t\t<IconValue type={IconType.Money} value={100} size={IconSize.Button} />\n\t\t\t\t</button>\n\t\t\t);\n\t\t}\n\n\t\treturn (\n\t\t\t<div className='sidebar'>\n\t\t\t\t<Text type={TextType.SubHeading}>Your Equipment</Text>\n\t\t\t\t<Text>This page lists the items that your heroes aren&apos;t currently using.</Text>\n\t\t\t\t<hr />\n\t\t\t\t{moneySection}\n\t\t\t\t{boons !== null ? <hr /> : null}\n\t\t\t\t{boons}\n\t\t\t\t{buySection.length !== 0 ? <hr /> : null}\n\t\t\t\t{buySection}\n\t\t\t\t<hr />\n\t\t\t\t<button disabled={this.props.game.money < 100} onClick={() => this.showEnchant(true)}>\n\t\t\t\t\t<div>Enchant an item</div>\n\t\t\t\t\t<IconValue type={IconType.Money} value={100} size={IconSize.Button} />\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t);\n\t};\n\n\tgetDialog = () => {\n\t\tif (this.state.showMarket === 'magical') {\n\t\t\treturn (\n\t\t\t\t<Dialog\n\t\t\t\t\tcontent={(\n\t\t\t\t\t\t<BuyMagicItemModal\n\t\t\t\t\t\t\tgame={this.props.game}\n\t\t\t\t\t\t\toptions={this.props.options}\n\t\t\t\t\t\t\tbuyItem={this.buyItem}\n\t\t\t\t\t\t\tuseCharge={this.props.useCharge}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\n\t\tif (this.state.showMarket === 'potion') {\n\t\t\treturn (\n\t\t\t\t<Dialog\n\t\t\t\t\tcontent={(\n\t\t\t\t\t\t<BuyPotionModal\n\t\t\t\t\t\t\tgame={this.props.game}\n\t\t\t\t\t\t\toptions={this.props.options}\n\t\t\t\t\t\t\tbuyItem={this.buyItem}\n\t\t\t\t\t\t\tuseCharge={this.props.useCharge}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\n\t\tif (this.state.showMarket === 'mundane') {\n\t\t\treturn (\n\t\t\t\t<Dialog\n\t\t\t\t\tcontent={(\n\t\t\t\t\t\t<BuyEquipmentModal\n\t\t\t\t\t\t\tgame={this.props.game}\n\t\t\t\t\t\t\toptions={this.props.options}\n\t\t\t\t\t\t\tbuyItem={this.buyItem}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t\tonClose={() => this.showMarket(null)}\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\n\t\tif (this.state.selectedMagicItem) {\n\t\t\treturn (\n\t\t\t\t<Dialog\n\t\t\t\t\tcontent={(\n\t\t\t\t\t\t<MagicItemInfoModal\n\t\t\t\t\t\t\titem={this.state.selectedMagicItem}\n\t\t\t\t\t\t\tgame={this.props.game}\n\t\t\t\t\t\t\tequipItem={this.equipItem}\n\t\t\t\t\t\t\tdropItem={this.props.dropItem}\n\t\t\t\t\t\t\tsellItem={this.sellMagicItem}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t\tonClose={() => this.setState({ selectedMagicItem: null })}\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\n\t\tif (this.state.showEnchant || (this.state.selectedBoon && (this.state.selectedBoon.type === BoonType.EnchantItem))) {\n\t\t\treturn (\n\t\t\t\t<Dialog\n\t\t\t\t\tcontent={(\n\t\t\t\t\t\t<EnchantItemModal\n\t\t\t\t\t\t\tgame={this.props.game}\n\t\t\t\t\t\t\toptions={this.props.options}\n\t\t\t\t\t\t\tenchantItem={this.enchantItem}\n\t\t\t\t\t\t\tuseCharge={this.props.useCharge}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t\tonClose={() => this.showEnchant(false)}\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\n\t\treturn null;\n\t};\n\n\trender = () => {\n\t\ttry {\n\t\t\tlet magicItemSection = null;\n\t\t\tconst magicItems = Collections.sort(this.props.game.items.filter(i => i.magic), n => n.name);\n\t\t\tif (magicItems.length > 0) {\n\t\t\t\tconst cards = magicItems.map(item => (\n\t\t\t\t\t<div key={item.id}>\n\t\t\t\t\t\t<ItemCard item={item} onClick={i => this.setState({ selectedMagicItem: i })} />\n\t\t\t\t\t</div>\n\t\t\t\t));\n\t\t\t\tmagicItemSection = (\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<CardList cards={cards} />\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tlet potionSection = null;\n\t\t\tconst potions = Collections.sort(this.props.game.items.filter(i => !i.magic && i.potion), n => n.name);\n\t\t\tif (potions.length > 0) {\n\t\t\t\tconst cards = Collections.distinct(potions, i => i.name).map(item => {\n\t\t\t\t\tconst count = potions.filter(i => i.name === item.name).length;\n\n\t\t\t\t\tlet footer = (\n\t\t\t\t\t\t<button onClick={() => this.props.sellItem(item, true)}>\n\t\t\t\t\t\t\tSell<br /><IconValue type={IconType.Money} value={10} size={IconSize.Button} />\n\t\t\t\t\t\t</button>\n\t\t\t\t\t);\n\n\t\t\t\t\tif (count > 1) {\n\t\t\t\t\t\tfooter = (\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<button onClick={() => this.props.sellItem(item, false)}>\n\t\t\t\t\t\t\t\t\tSell One<br /><IconValue type={IconType.Money} value={10} size={IconSize.Button} />\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t<button onClick={() => this.props.sellItem(item, true)}>\n\t\t\t\t\t\t\t\t\tSell All ({count})<br /><IconValue type={IconType.Money} value={10 * count} size={IconSize.Button} />\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div key={item.id}>\n\t\t\t\t\t\t\t<ItemCard item={item} count={count} />\n\t\t\t\t\t\t\t{footer}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t});\n\t\t\t\tpotionSection = (\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<CardList cards={cards} />\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tlet mundaneItemSection = null;\n\t\t\tconst mundaneItems = Collections.sort(this.props.game.items.filter(i => !i.magic && !i.potion), n => n.name);\n\t\t\tif (mundaneItems.length > 0) {\n\t\t\t\tconst cards = Collections.distinct(mundaneItems, i => i.name).map(item => {\n\t\t\t\t\tconst count = mundaneItems.filter(i => i.name === item.name).length;\n\n\t\t\t\t\tlet footer = (\n\t\t\t\t\t\t<button onClick={() => this.props.sellItem(item, true)}>Sell</button>\n\t\t\t\t\t);\n\n\t\t\t\t\tif (count > 1) {\n\t\t\t\t\t\tfooter = (\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<button onClick={() => this.props.sellItem(item, false)}>Sell One</button>\n\t\t\t\t\t\t\t\t<button onClick={() => this.props.sellItem(item, true)}>Sell All ({count})</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div key={item.id}>\n\t\t\t\t\t\t\t<ItemCard item={item} count={count} />\n\t\t\t\t\t\t\t{footer}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t});\n\t\t\t\tmundaneItemSection = (\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<CardList cards={cards} />\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tlet empty = null;\n\t\t\tif (this.props.game.items.length === 0) {\n\t\t\t\tempty = (\n\t\t\t\t\t<Text type={TextType.Information}>\n\t\t\t\t\t\t<p>You have no unequipped items.</p>\n\t\t\t\t\t</Text>\n\t\t\t\t);\n\t\t\t}\n\n\t\t\treturn (\n\t\t\t\t<div className='items-page'>\n\t\t\t\t\t<div className='items-content'>\n\t\t\t\t\t\t{magicItemSection ? <Text type={TextType.SubHeading}>Magic Items</Text> : null}\n\t\t\t\t\t\t{magicItemSection}\n\t\t\t\t\t\t{potionSection ? <Text type={TextType.SubHeading}>Potions</Text> : null}\n\t\t\t\t\t\t{potionSection}\n\t\t\t\t\t\t{mundaneItemSection ? <Text type={TextType.SubHeading}>Non-Magic Items</Text> : null}\n\t\t\t\t\t\t{mundaneItemSection}\n\t\t\t\t\t\t{empty}\n\t\t\t\t\t</div>\n\t\t\t\t\t{this.getSidebar()}\n\t\t\t\t\t{this.getDialog()}\n\t\t\t\t</div>\n\t\t\t);\n\t\t} catch {\n\t\t\treturn <div className='items-page render-error' />;\n\t\t}\n\t};\n}\n","import createReactComponent from '../createReactComponent';\nexport default createReactComponent('hexagon', 'IconHexagon', [\n  [\n    'path',\n    {\n      d: 'M19.875 6.27a2.225 2.225 0 0 1 1.125 1.948v7.284c0 .809 -.443 1.555 -1.158 1.948l-6.75 4.27a2.269 2.269 0 0 1 -2.184 0l-6.75 -4.27a2.225 2.225 0 0 1 -1.158 -1.948v-7.285c0 -.809 .443 -1.554 1.158 -1.947l6.75 -3.98a2.33 2.33 0 0 1 2.25 0l6.75 3.98h-.033z',\n      key: 'svg-0',\n    },\n  ],\n]);\n","import createReactComponent from '../createReactComponent';\nexport default createReactComponent('hexagon-filled', 'IconHexagonFilled', [\n  [\n    'path',\n    {\n      d: 'M10.425 1.414l-6.775 3.996a3.21 3.21 0 0 0 -1.65 2.807v7.285a3.226 3.226 0 0 0 1.678 2.826l6.695 4.237c1.034 .57 2.22 .57 3.2 .032l6.804 -4.302c.98 -.537 1.623 -1.618 1.623 -2.793v-7.284l-.005 -.204a3.223 3.223 0 0 0 -1.284 -2.39l-.107 -.075l-.007 -.007a1.074 1.074 0 0 0 -.181 -.133l-6.776 -3.995a3.33 3.33 0 0 0 -3.216 0z',\n      fill: 'currentColor',\n      key: 'svg-0',\n      strokeWidth: '0',\n    },\n  ],\n]);\n","import { Component } from 'react';\n\nimport { StructureType } from '../../../enums/structure-type';\n\nimport { GameLogic } from '../../../logic/game-logic';\nimport { StrongholdLogic } from '../../../logic/stronghold-logic';\n\nimport type { GameModel } from '../../../models/game';\nimport type { OptionsModel } from '../../../models/options';\nimport type { StructureModel } from '../../../models/structure';\n\nimport { Collections } from '../../../utils/collections';\n\nimport { CardList, Text, TextType } from '../../controls';\nimport { StrongholdBenefitCard, StructureCard } from '../../cards';\n\nimport './buy-structure-modal.scss';\n\ninterface Props {\n\tgame: GameModel;\n\toptions: OptionsModel;\n\tbuyStructure: (structure: StructureModel) => void;\n\tuseCharge: (type: StructureType, count: number) => void;\n}\n\ninterface State {\n\tstructures: StructureModel[];\n}\n\nexport class BuyStructureModal extends Component<Props, State> {\n\tconstructor(props: Props) {\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tstructures: this.getStructures()\n\t\t};\n\t}\n\n\tgetStructures = () => {\n\t\tconst structures: StructureModel[] = [];\n\n\t\twhile (structures.length < 3) {\n\t\t\tconst deck = GameLogic.getStructureDeck(this.props.options.packIDs);\n\t\t\tstructures.push(Collections.draw(deck));\n\t\t}\n\n\t\treturn Collections.sort(structures, n => n.name);\n\t};\n\n\tredraw = () => {\n\t\tthis.setState({\n\t\t\tstructures: this.getStructures()\n\t\t}, () => {\n\t\t\tif (!this.props.options.developer) {\n\t\t\t\tthis.props.useCharge(StructureType.Forge, 1);\n\t\t\t}\n\t\t});\n\t};\n\n\trender = () => {\n\t\ttry {\n\t\t\tconst cards = this.state.structures.map(s => (\n\t\t\t\t<StructureCard key={s.id} structure={s} onClick={this.props.buyStructure} />\n\t\t\t));\n\n\t\t\tconst redraws = StrongholdLogic.getStructureCharges(this.props.game, StructureType.Forge);\n\t\t\tif ((redraws > 0) || this.props.options.developer) {\n\t\t\t\tcards.push(\n\t\t\t\t\t<StrongholdBenefitCard\n\t\t\t\t\t\tkey='redraw'\n\t\t\t\t\t\tlabel='Redraw'\n\t\t\t\t\t\tavailable={redraws}\n\t\t\t\t\t\tdeveloper={this.props.options.developer}\n\t\t\t\t\t\tonRedraw={this.redraw}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t}\n\n\t\t\treturn (\n\t\t\t\t<div className='buy-structure-modal'>\n\t\t\t\t\t<Text type={TextType.Heading}>Choose a Structure</Text>\n\t\t\t\t\t<hr />\n\t\t\t\t\t<Text type={TextType.Information}>\n\t\t\t\t\t\t<p>Three structure cards have been drawn for you. Choose one card to add it to your stronghold.</p>\n\t\t\t\t\t</Text>\n\t\t\t\t\t<div className='card-selection-row'>\n\t\t\t\t\t\t<CardList mode='row' cards={cards} />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t);\n\t\t} catch {\n\t\t\treturn <div className='buy-structure-modal render-error' />;\n\t\t}\n\t};\n}\n","import { IconHexagon, IconHexagonFilled } from '@tabler/icons-react';\nimport { Component } from 'react';\n\nimport { BoonType } from '../../../../enums/boon-type';\nimport { StructureType } from '../../../../enums/structure-type';\n\nimport { GameLogic } from '../../../../logic/game-logic';\nimport { StrongholdLogic } from '../../../../logic/stronghold-logic';\n\nimport type { BoonModel } from '../../../../models/boon';\nimport type { CombatantModel } from '../../../../models/combatant';\nimport type { GameModel } from '../../../../models/game';\nimport type { ItemModel } from '../../../../models/item';\nimport type { OptionsModel } from '../../../../models/options';\nimport type { StructureModel } from '../../../../models/structure';\n\nimport { BoonCard, PlaceholderCard, StructureCard } from '../../../cards';\nimport { Box, CardList, Dialog, Expander, IconSize, IconType, IconValue, PlayingCard, StatValue, Text, TextType } from '../../../controls';\nimport { BuyStructureModal } from '../../../modals/buy-structure/buy-structure-modal';\nimport { StrongholdMapPanel } from '../../../panels';\n\nimport './stronghold-page.scss';\n\ninterface Props {\n\tgame: GameModel;\n\toptions: OptionsModel;\n\tbuyStructure: (structure: StructureModel, cost: number) => void;\n\tsellStructure: (structure: StructureModel) => void;\n\tchargeStructure: (structure: StructureModel) => void;\n\tupgradeStructure: (structure: StructureModel) => void;\n\tuseCharge: (type: StructureType, count: number) => void;\n\tredeemBoon: (boon: BoonModel, hero: CombatantModel | null, item: ItemModel | null, newItem: ItemModel | null, cost: number) => void;\n}\n\ninterface State {\n\tselectedStructure: StructureModel | null;\n\taddingStructure: '' | 'free' | 'paid';\n}\n\nexport class StrongholdPage extends Component<Props, State> {\n\tconstructor(props: Props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tselectedStructure: null,\n\t\t\taddingStructure: ''\n\t\t};\n\t}\n\n\tselectBoon = (boon: BoonModel) => {\n\t\tswitch (boon.type) {\n\t\t\tcase BoonType.Structure: {\n\t\t\t\tthis.props.redeemBoon(boon, null, null, null, 0);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t};\n\n\tbuyStructure = (structure: StructureModel) => {\n\t\tconst cost = this.state.addingStructure === 'free' ? 0 : 50;\n\t\tthis.setState({\n\t\t\taddingStructure: ''\n\t\t}, () => {\n\t\t\tthis.props.buyStructure(structure, cost);\n\t\t});\n\t};\n\n\tsellStructure = (structure: StructureModel) => {\n\t\tthis.setState({\n\t\t\tselectedStructure: null\n\t\t}, () => {\n\t\t\tthis.props.sellStructure(structure);\n\t\t});\n\t};\n\n\tgetStrongholdBenefits = () => {\n\t\tconst heroRedraws = StrongholdLogic.getStructureCharges(this.props.game, StructureType.Hall);\n\t\tconst itemRedraws = StrongholdLogic.getStructureCharges(this.props.game, StructureType.Quartermaster);\n\t\tconst featureRedraws = StrongholdLogic.getStructureCharges(this.props.game, StructureType.TrainingGround);\n\t\tconst actionRedraws = StrongholdLogic.getStructureCharges(this.props.game, StructureType.Observatory);\n\t\tconst magicRedraws = StrongholdLogic.getStructureCharges(this.props.game, StructureType.WizardTower);\n\t\tconst structureRedraws = StrongholdLogic.getStructureCharges(this.props.game, StructureType.Forge);\n\n\t\tconst redraws = heroRedraws + itemRedraws + featureRedraws + actionRedraws + magicRedraws + structureRedraws;\n\n\t\tconst benefitMods = StrongholdLogic.getStructureCharges(this.props.game, StructureType.Temple);\n\t\tconst detrimentMods = StrongholdLogic.getStructureCharges(this.props.game, StructureType.Intelligencer);\n\t\tconst additionalActions = StrongholdLogic.getStructureCharges(this.props.game, StructureType.ThievesGuild);\n\t\tconst additionalHeroes = StrongholdLogic.getStructureCharges(this.props.game, StructureType.WarRoom);\n\t\tconst encounters = benefitMods + detrimentMods + additionalActions;\n\n\t\tconst heroXP = StrongholdLogic.getStructureCharges(this.props.game, StructureType.Academy);\n\t\tconst hero = heroXP;\n\n\t\treturn (\n\t\t\t<Box label='Stronghold Benefits'>\n\t\t\t\t<StatValue label='Max Heroes' value={StrongholdLogic.getHeroLimit(this.props.game)} />\n\t\t\t\t{redraws > 0 ? <hr /> : null}\n\t\t\t\t{heroRedraws > 0 ? <StatValue label='Hero Card Redraws' value={heroRedraws} /> : null}\n\t\t\t\t{itemRedraws > 0 ? <StatValue label='Item Card Redraws' value={itemRedraws} /> : null}\n\t\t\t\t{featureRedraws > 0 ? <StatValue label='Feature Card Redraws' value={featureRedraws} /> : null}\n\t\t\t\t{actionRedraws > 0 ? <StatValue label='Action Card Redraws' value={actionRedraws} /> : null}\n\t\t\t\t{magicRedraws > 0 ? <StatValue label='Magic Item Card Redraws' value={magicRedraws} /> : null}\n\t\t\t\t{structureRedraws > 0 ? <StatValue label='Structure Card Redraws' value={structureRedraws} /> : null}\n\t\t\t\t{encounters > 0 ? <hr /> : null}\n\t\t\t\t{benefitMods > 0 ? <StatValue label='Encounter Benefits' value={benefitMods} /> : null}\n\t\t\t\t{detrimentMods > 0 ? <StatValue label='Encounter Detriments' value={detrimentMods} /> : null}\n\t\t\t\t{additionalActions > 0 ? <StatValue label='Additional Actions' value={additionalActions} /> : null}\n\t\t\t\t{additionalHeroes > 0 ? <StatValue label='Additional Heroes' value={additionalHeroes} /> : null}\n\t\t\t\t{hero > 0 ? <hr /> : null}\n\t\t\t\t{heroXP > 0 ? <StatValue label='Additional XP' value={heroXP} /> : null}\n\t\t\t</Box>\n\t\t);\n\t};\n\n\tgetSidebar = () => {\n\t\tif (this.state.selectedStructure) {\n\t\t\tconst upgradeCost = StrongholdLogic.getUpgradeCost(this.state.selectedStructure);\n\n\t\t\tlet charge = null;\n\t\t\tif (StrongholdLogic.canCharge(this.state.selectedStructure)) {\n\t\t\t\tif (this.state.selectedStructure.charges > 0) {\n\t\t\t\t\tconst bolts = [];\n\t\t\t\t\tfor (let n = 0; n < this.state.selectedStructure.level; ++n) {\n\t\t\t\t\t\tbolts.push(n >= this.state.selectedStructure.charges ? <IconHexagon key={n} size={50} /> : <IconHexagonFilled key={n} size={50} />);\n\t\t\t\t\t}\n\n\t\t\t\t\tcharge = (\n\t\t\t\t\t\t<StatValue\n\t\t\t\t\t\t\torientation='vertical'\n\t\t\t\t\t\t\tlabel='Charges Remaining'\n\t\t\t\t\t\t\tvalue={\n\t\t\t\t\t\t\t\t<div className='bolts'>\n\t\t\t\t\t\t\t\t\t{bolts}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t/>\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\tcharge = (\n\t\t\t\t\t\t<button disabled={this.props.game.money < 100} onClick={() => this.props.chargeStructure(this.state.selectedStructure as StructureModel)}>\n\t\t\t\t\t\t\t<div>Recharge structure</div>\n\t\t\t\t\t\t\t<IconValue type={IconType.Money} value={100} size={IconSize.Button} />\n\t\t\t\t\t\t</button>\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn (\n\t\t\t\t<div key={this.state.selectedStructure.id} className='sidebar'>\n\t\t\t\t\t<div className='structure-details-card'>\n\t\t\t\t\t\t<StructureCard structure={this.state.selectedStructure} />\n\t\t\t\t\t</div>\n\t\t\t\t\t<hr />\n\t\t\t\t\t<div className='upgrade-section'>\n\t\t\t\t\t\t<StatValue orientation='vertical' label='Level' value={this.state.selectedStructure.level} />\n\t\t\t\t\t\t<button disabled={this.props.game.money < upgradeCost} onClick={() => this.props.upgradeStructure(this.state.selectedStructure as StructureModel)}>\n\t\t\t\t\t\t\t<div>Upgrade<br/>structure</div>\n\t\t\t\t\t\t\t<IconValue type={IconType.Money} value={upgradeCost} size={IconSize.Button} />\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t\t<button onClick={() => this.sellStructure(this.state.selectedStructure as StructureModel)}>\n\t\t\t\t\t\t<div>Demolish structure</div>\n\t\t\t\t\t\t<IconValue type={IconType.Money} value={25} size={IconSize.Button} />\n\t\t\t\t\t</button>\n\t\t\t\t\t{charge !== null ? <hr /> : null}\n\t\t\t\t\t{charge}\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\n\t\tlet boons = null;\n\t\tif (this.props.game.boons.filter(boon => GameLogic.getBoonIsStrongholdType(boon)).length > 0) {\n\t\t\tconst cards = this.props.game.boons\n\t\t\t\t.filter(boon => GameLogic.getBoonIsStrongholdType(boon))\n\t\t\t\t.map(b => <BoonCard key={b.id} boon={b} onClick={boon => this.selectBoon(boon)} />);\n\t\t\tboons = (\n\t\t\t\t<div>\n\t\t\t\t\t<Text type={TextType.Information}><p><b>You have won these rewards.</b> Select a card to redeem a reward.</p></Text>\n\t\t\t\t\t<CardList cards={cards} />\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\n\t\tlet slots = null;\n\t\tif (this.props.game.structureSlots > 0) {\n\t\t\tslots = (\n\t\t\t\t<div className='center'>\n\t\t\t\t\t<PlayingCard\n\t\t\t\t\t\tstack={true}\n\t\t\t\t\t\tfront={\n\t\t\t\t\t\t\t<PlaceholderCard\n\t\t\t\t\t\t\t\ttext='Free Structures Available'\n\t\t\t\t\t\t\t\tsubtext='Click here to build a structure for free.'\n\t\t\t\t\t\t\t\tcontent={<div className='slots-count'>{this.props.game.structureSlots}</div>}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonClick={() => this.setState({ addingStructure: 'free' })}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\n\t\tlet addSection = null;\n\t\tif (GameLogic.getStructureDeck(this.props.options.packIDs).length > 0) {\n\t\t\taddSection = (\n\t\t\t\t<button disabled={this.props.game.money < 50} onClick={() => this.setState({ addingStructure: 'paid' })}>\n\t\t\t\t\t<div>Build a Structure</div>\n\t\t\t\t\t<IconValue type={IconType.Money} value={50} size={IconSize.Button} />\n\t\t\t\t</button>\n\t\t\t);\n\t\t}\n\n\t\treturn (\n\t\t\t<div key='map' className='sidebar'>\n\t\t\t\t<Text type={TextType.SubHeading}>Your Stronghold</Text>\n\t\t\t\t<Text>This is your base of operations.</Text>\n\t\t\t\t<Text>It&apos;s made up of structures, each of which can grant you a unique benefit.</Text>\n\t\t\t\t<Text>Select a structure on the map to see what it can do.</Text>\n\t\t\t\t{\n\t\t\t\t\tthis.props.options.showTips ?\n\t\t\t\t\t\t<Expander\n\t\t\t\t\t\t\theader={\n\t\t\t\t\t\t\t\t<Text type={TextType.Tip}>Your stronghold can provide useful benefits.</Text>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tcontent={\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<p>The different structures have different effects:</p>\n\t\t\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t\t\t\t<li>The Barracks allows you recruit more heroes.</li>\n\t\t\t\t\t\t\t\t\t\t<li>Some structures allow you to redraw cards.</li>\n\t\t\t\t\t\t\t\t\t\t<li>Some structures provide advantages in encounters.</li>\n\t\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t\t<p>Structures can be upgraded, which increases their usefulness.</p>\n\t\t\t\t\t\t\t\t\t<p>Most structures need to be charged before they can be used, which costs money.</p>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t: null\n\t\t\t\t}\n\t\t\t\t<hr />\n\t\t\t\t{this.getStrongholdBenefits()}\n\t\t\t\t{boons !== null ? <hr /> : null}\n\t\t\t\t{boons}\n\t\t\t\t{slots !== null ? <hr /> : null}\n\t\t\t\t{slots}\n\t\t\t\t{addSection !== null ? <hr /> : null}\n\t\t\t\t{addSection}\n\t\t\t</div>\n\t\t);\n\t};\n\n\tgetDialog = () => {\n\t\tif (this.state.addingStructure !== '') {\n\t\t\treturn (\n\t\t\t\t<Dialog\n\t\t\t\t\tcontent={(\n\t\t\t\t\t\t<BuyStructureModal\n\t\t\t\t\t\t\tgame={this.props.game}\n\t\t\t\t\t\t\toptions={this.props.options}\n\t\t\t\t\t\t\tbuyStructure={this.buyStructure}\n\t\t\t\t\t\t\tuseCharge={this.props.useCharge}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\n\t\treturn null;\n\t};\n\n\trender = () => {\n\t\ttry {\n\t\t\treturn (\n\t\t\t\t<div className='stronghold-page'>\n\t\t\t\t\t<div className='map-content' onClick={() => this.setState({ selectedStructure: null })}>\n\t\t\t\t\t\t<StrongholdMapPanel\n\t\t\t\t\t\t\tstronghold={this.props.game.stronghold}\n\t\t\t\t\t\t\tselectedStructure={this.state.selectedStructure}\n\t\t\t\t\t\t\tonSelectStructure={structure => this.setState({ selectedStructure: structure })}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t{this.getSidebar()}\n\t\t\t\t\t{this.getDialog()}\n\t\t\t\t</div>\n\t\t\t);\n\t\t} catch {\n\t\t\treturn <div className='stronghold-page render-error' />;\n\t\t}\n\t};\n}\n","import { IconCards, IconHelpCircle, IconHelpCircleFilled } from '@tabler/icons-react';\nimport { Component } from 'react';\n\nimport { StructureType } from '../../../enums/structure-type';\n\nimport { GameLogic } from '../../../logic/game-logic';\nimport { PackLogic } from '../../../logic/pack-logic';\n\nimport type { BoonModel } from '../../../models/boon';\nimport type { CombatantModel } from '../../../models/combatant';\nimport type { FeatureModel } from '../../../models/feature';\nimport type { GameModel } from '../../../models/game';\nimport type { ItemModel } from '../../../models/item';\nimport type { OptionsModel } from '../../../models/options';\nimport type { RegionModel } from '../../../models/region';\nimport type { StructureModel } from '../../../models/structure';\n\nimport type { Platform } from '../../../platform/platform';\n\nimport { Badge, Selector } from '../../controls';\n\nimport { CampaignMapPage } from './campaign-map-page/campaign-map-page';\nimport { DevPage } from './dev-page/dev-page';\nimport { HeroesPage } from './heroes-page/heroes-page';\nimport { ItemsPage } from './items-page/items-page';\nimport { StrongholdPage } from './stronghold-page/stronghold-page';\n\nimport './campaign-screen.scss';\n\nimport logo from '../../../assets/images/logo.png';\n\ninterface Props {\n\tgame: GameModel;\n\toptions: OptionsModel;\n\tplatform: Platform;\n\thasExceptions: boolean;\n\tshowHelp: (file: string) => void;\n\tshowPacks: () => void;\n\tbuyStructure: (structure: StructureModel, cost: number) => void;\n\tsellStructure: (structure: StructureModel) => void;\n\tchargeStructure: (structure: StructureModel) => void;\n\tupgradeStructure: (structure: StructureModel) => void;\n\tuseCharge: (type: StructureType, count: number) => void;\n\taddHero: (hero: CombatantModel) => void;\n\taddXP: (hero: CombatantModel, useCharge: StructureType | null) => void;\n\tequipItem: (item: ItemModel, hero: CombatantModel) => void;\n\tunequipItem: (item: ItemModel, hero: CombatantModel) => void;\n\tpickUpItem: (item: ItemModel, hero: CombatantModel) => void;\n\tdropItem: (item: ItemModel, hero: CombatantModel) => void;\n\tlevelUp: (feature: FeatureModel, hero: CombatantModel) => void;\n\tretireHero: (combatant: CombatantModel) => void;\n\tredeemBoon: (boon: BoonModel, hero: CombatantModel | null, item: ItemModel | null, newItem: ItemModel | null, cost: number) => void;\n\tbuyItem: (item: ItemModel) => void;\n\tsellItem: (item: ItemModel, all: boolean) => void;\n\taddMoney: () => void;\n\tstartEncounter: (region: RegionModel, heroes: CombatantModel[], benefits: number, detriments: number) => void;\n\tregenerateCampaignMap: () => void;\n\tconquer: (region: RegionModel) => void;\n}\n\ninterface State {\n\tscreen: string;\n}\n\nexport class CampaignScreen extends Component<Props, State> {\n\tconstructor(props: Props) {\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tscreen: 'island'\n\t\t};\n\t}\n\n\tsetScreen = (screen: string) => {\n\t\tthis.setState({\n\t\t\tscreen: screen\n\t\t});\n\t};\n\n\trender = () => {\n\t\ttry {\n\t\t\tlet content = null;\n\t\t\tswitch (this.state.screen) {\n\t\t\t\tcase 'island':\n\t\t\t\t\tcontent = (\n\t\t\t\t\t\t<CampaignMapPage\n\t\t\t\t\t\t\tgame={this.props.game}\n\t\t\t\t\t\t\toptions={this.props.options}\n\t\t\t\t\t\t\tstartEncounter={this.props.startEncounter}\n\t\t\t\t\t\t\tregenerateCampaignMap={this.props.regenerateCampaignMap}\n\t\t\t\t\t\t\tconquer={this.props.conquer}\n\t\t\t\t\t\t/>\n\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'stronghold':\n\t\t\t\t\tcontent = (\n\t\t\t\t\t\t<StrongholdPage\n\t\t\t\t\t\t\tgame={this.props.game}\n\t\t\t\t\t\t\toptions={this.props.options}\n\t\t\t\t\t\t\tbuyStructure={this.props.buyStructure}\n\t\t\t\t\t\t\tsellStructure={this.props.sellStructure}\n\t\t\t\t\t\t\tchargeStructure={this.props.chargeStructure}\n\t\t\t\t\t\t\tupgradeStructure={this.props.upgradeStructure}\n\t\t\t\t\t\t\tuseCharge={this.props.useCharge}\n\t\t\t\t\t\t\tredeemBoon={this.props.redeemBoon}\n\t\t\t\t\t\t/>\n\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'team':\n\t\t\t\t\tcontent = (\n\t\t\t\t\t\t<HeroesPage\n\t\t\t\t\t\t\tgame={this.props.game}\n\t\t\t\t\t\t\toptions={this.props.options}\n\t\t\t\t\t\t\taddHero={this.props.addHero}\n\t\t\t\t\t\t\taddXP={this.props.addXP}\n\t\t\t\t\t\t\tequipItem={this.props.equipItem}\n\t\t\t\t\t\t\tunequipItem={this.props.unequipItem}\n\t\t\t\t\t\t\tpickUpItem={this.props.pickUpItem}\n\t\t\t\t\t\t\tdropItem={this.props.dropItem}\n\t\t\t\t\t\t\tlevelUp={this.props.levelUp}\n\t\t\t\t\t\t\tretireHero={this.props.retireHero}\n\t\t\t\t\t\t\tredeemBoon={this.props.redeemBoon}\n\t\t\t\t\t\t\tuseCharge={this.props.useCharge}\n\t\t\t\t\t\t/>\n\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'items':\n\t\t\t\t\tcontent = (\n\t\t\t\t\t\t<ItemsPage\n\t\t\t\t\t\t\tgame={this.props.game}\n\t\t\t\t\t\t\toptions={this.props.options}\n\t\t\t\t\t\t\tbuyItem={this.props.buyItem}\n\t\t\t\t\t\t\tsellItem={this.props.sellItem}\n\t\t\t\t\t\t\tequipItem={this.props.equipItem}\n\t\t\t\t\t\t\tdropItem={this.props.dropItem}\n\t\t\t\t\t\t\tredeemBoon={this.props.redeemBoon}\n\t\t\t\t\t\t\tuseCharge={this.props.useCharge}\n\t\t\t\t\t\t\taddMoney={this.props.addMoney}\n\t\t\t\t\t\t/>\n\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'dev':\n\t\t\t\t\tcontent = (\n\t\t\t\t\t\t<DevPage options={this.props.options} platform={this.props.platform} />\n\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tconst options = [\n\t\t\t\t{\n\t\t\t\t\tid: 'island',\n\t\t\t\t\tdisplay: (\n\t\t\t\t\t\t<div className='page-btn'>\n\t\t\t\t\t\t\tThe Island\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: 'stronghold',\n\t\t\t\t\tdisplay: (\n\t\t\t\t\t\t<div className='page-btn'>\n\t\t\t\t\t\t\t<div>Your Stronghold</div>\n\t\t\t\t\t\t\t{this.props.game.boons.some(b => GameLogic.getBoonIsStrongholdType(b)) ? <div>⭑</div> : null}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: 'team',\n\t\t\t\t\tdisplay: (\n\t\t\t\t\t\t<div className='page-btn'>\n\t\t\t\t\t\t\t<div>Your Team</div>\n\t\t\t\t\t\t\t{this.props.game.boons.some(b => GameLogic.getBoonIsHeroType(b)) || this.props.game.heroes.some(h => h.xp >= h.level) ? <div>⭑</div> : null}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: 'items',\n\t\t\t\t\tdisplay: (\n\t\t\t\t\t\t<div className='page-btn'>\n\t\t\t\t\t\t\t<div>Your Equipment</div>\n\t\t\t\t\t\t\t{this.props.game.boons.some(b => GameLogic.getBoonIsItemType(b)) ? <div>⭑</div> : null}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t];\n\n\t\t\tif (this.props.options.developer) {\n\t\t\t\toptions.push({\n\t\t\t\t\tid: 'dev',\n\t\t\t\t\tdisplay: (\n\t\t\t\t\t\t<div className='page-btn'>\n\t\t\t\t\t\t\tDeveloper\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tconst availablePacks = PackLogic.getPacks().filter(p => !this.props.options.packIDs.includes(p.id)).length;\n\n\t\t\treturn (\n\t\t\t\t<div className='campaign-screen'>\n\t\t\t\t\t<div className='campaign-top-bar'>\n\t\t\t\t\t\t<img className='logo' alt='Logo' src={logo} />\n\t\t\t\t\t\t<div className='logo-text inset-text'>Skirmish</div>\n\t\t\t\t\t\t<Selector options={options} selectedID={this.state.screen} onSelect={this.setScreen} />\n\t\t\t\t\t\t<div className='buttons'>\n\t\t\t\t\t\t\t<Badge value={availablePacks}>\n\t\t\t\t\t\t\t\t<button className='icon-btn' title='Packs' onClick={() => this.props.showPacks()}>\n\t\t\t\t\t\t\t\t\t<IconCards />\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t\t<button className='icon-btn' title='Help' onClick={() => this.props.showHelp(this.state.screen)}>\n\t\t\t\t\t\t\t\t{this.props.options.developer && this.props.hasExceptions ? <IconHelpCircleFilled /> : <IconHelpCircle />}\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className='campaign-content'>\n\t\t\t\t\t\t{content}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t);\n\t\t} catch {\n\t\t\treturn <div className='campaign-screen render-error' />;\n\t\t}\n\t};\n}\n","import createReactComponent from '../createReactComponent';\nexport default createReactComponent(\n  'layout-sidebar-left-collapse',\n  'IconLayoutSidebarLeftCollapse',\n  [\n    [\n      'path',\n      {\n        d: 'M4 4m0 2a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2z',\n        key: 'svg-0',\n      },\n    ],\n    ['path', { d: 'M9 4v16', key: 'svg-1' }],\n    ['path', { d: 'M15 10l-2 2l2 2', key: 'svg-2' }],\n  ],\n);\n","import createReactComponent from '../createReactComponent';\nexport default createReactComponent(\n  'layout-sidebar-left-expand',\n  'IconLayoutSidebarLeftExpand',\n  [\n    [\n      'path',\n      {\n        d: 'M4 4m0 2a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2z',\n        key: 'svg-0',\n      },\n    ],\n    ['path', { d: 'M9 4v16', key: 'svg-1' }],\n    ['path', { d: 'M14 10l2 2l-2 2', key: 'svg-2' }],\n  ],\n);\n","import createReactComponent from '../createReactComponent';\nexport default createReactComponent(\n  'layout-bottombar-collapse',\n  'IconLayoutBottombarCollapse',\n  [\n    [\n      'path',\n      {\n        d: 'M20 6v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2z',\n        key: 'svg-0',\n      },\n    ],\n    ['path', { d: 'M20 15h-16', key: 'svg-1' }],\n    ['path', { d: 'M14 8l-2 2l-2 -2', key: 'svg-2' }],\n  ],\n);\n","import createReactComponent from '../createReactComponent';\nexport default createReactComponent(\n  'layout-bottombar-expand',\n  'IconLayoutBottombarExpand',\n  [\n    [\n      'path',\n      {\n        d: 'M20 6v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2z',\n        key: 'svg-0',\n      },\n    ],\n    ['path', { d: 'M20 15h-16', key: 'svg-1' }],\n    ['path', { d: 'M14 10l-2 -2l-2 2', key: 'svg-2' }],\n  ],\n);\n","import createReactComponent from '../createReactComponent';\nexport default createReactComponent('rotate-2', 'IconRotate2', [\n  ['path', { d: 'M15 4.55a8 8 0 0 0 -6 14.9m0 -4.45v5h-5', key: 'svg-0' }],\n  ['path', { d: 'M18.37 7.16l0 .01', key: 'svg-1' }],\n  ['path', { d: 'M13 19.94l0 .01', key: 'svg-2' }],\n  ['path', { d: 'M16.84 18.37l0 .01', key: 'svg-3' }],\n  ['path', { d: 'M19.37 15.1l0 .01', key: 'svg-4' }],\n  ['path', { d: 'M19.94 11l0 .01', key: 'svg-5' }],\n]);\n","import createReactComponent from '../createReactComponent';\nexport default createReactComponent(\n  'rotate-clockwise-2',\n  'IconRotateClockwise2',\n  [\n    ['path', { d: 'M9 4.55a8 8 0 0 1 6 14.9m0 -4.45v5h5', key: 'svg-0' }],\n    ['path', { d: 'M5.63 7.16l0 .01', key: 'svg-1' }],\n    ['path', { d: 'M4.06 11l0 .01', key: 'svg-2' }],\n    ['path', { d: 'M4.63 15.1l0 .01', key: 'svg-3' }],\n    ['path', { d: 'M7.16 18.37l0 .01', key: 'svg-4' }],\n    ['path', { d: 'M11 19.94l0 .01', key: 'svg-5' }],\n  ],\n);\n","import createReactComponent from '../createReactComponent';\nexport default createReactComponent('zoom-out', 'IconZoomOut', [\n  ['path', { d: 'M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0', key: 'svg-0' }],\n  ['path', { d: 'M7 10l6 0', key: 'svg-1' }],\n  ['path', { d: 'M21 21l-6 -6', key: 'svg-2' }],\n]);\n","import createReactComponent from '../createReactComponent';\nexport default createReactComponent('zoom-in', 'IconZoomIn', [\n  ['path', { d: 'M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0', key: 'svg-0' }],\n  ['path', { d: 'M7 10l6 0', key: 'svg-1' }],\n  ['path', { d: 'M10 7l0 6', key: 'svg-2' }],\n  ['path', { d: 'M21 21l-6 -6', key: 'svg-3' }],\n]);\n","import createReactComponent from '../createReactComponent';\nexport default createReactComponent(\n  'arrow-back-up-double',\n  'IconArrowBackUpDouble',\n  [\n    ['path', { d: 'M13 14l-4 -4l4 -4', key: 'svg-0' }],\n    ['path', { d: 'M8 14l-4 -4l4 -4', key: 'svg-1' }],\n    ['path', { d: 'M9 10h7a4 4 0 1 1 0 8h-1', key: 'svg-2' }],\n  ],\n);\n","import createReactComponent from '../createReactComponent';\nexport default createReactComponent('confetti', 'IconConfetti', [\n  ['path', { d: 'M4 5h2', key: 'svg-0' }],\n  ['path', { d: 'M5 4v2', key: 'svg-1' }],\n  ['path', { d: 'M11.5 4l-.5 2', key: 'svg-2' }],\n  ['path', { d: 'M18 5h2', key: 'svg-3' }],\n  ['path', { d: 'M19 4v2', key: 'svg-4' }],\n  ['path', { d: 'M15 9l-1 1', key: 'svg-5' }],\n  ['path', { d: 'M18 13l2 -.5', key: 'svg-6' }],\n  ['path', { d: 'M18 19h2', key: 'svg-7' }],\n  ['path', { d: 'M19 18v2', key: 'svg-8' }],\n  [\n    'path',\n    {\n      d: 'M14 16.518l-6.518 -6.518l-4.39 9.58a1 1 0 0 0 1.329 1.329l9.579 -4.39z',\n      key: 'svg-9',\n    },\n  ],\n]);\n","import createReactComponent from '../createReactComponent';\nexport default createReactComponent('arrow-up', 'IconArrowUp', [\n  ['path', { d: 'M12 5l0 14', key: 'svg-0' }],\n  ['path', { d: 'M18 11l-6 -6', key: 'svg-1' }],\n  ['path', { d: 'M6 11l6 -6', key: 'svg-2' }],\n]);\n","import createReactComponent from '../createReactComponent';\nexport default createReactComponent('viewfinder', 'IconViewfinder', [\n  ['path', { d: 'M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0', key: 'svg-0' }],\n  ['path', { d: 'M12 3l0 4', key: 'svg-1' }],\n  ['path', { d: 'M12 21l0 -3', key: 'svg-2' }],\n  ['path', { d: 'M3 12l4 0', key: 'svg-3' }],\n  ['path', { d: 'M21 12l-3 0', key: 'svg-4' }],\n  ['path', { d: 'M12 12l0 .01', key: 'svg-5' }],\n]);\n","import { IconArrowUp, IconViewfinder } from '@tabler/icons-react';\nimport { Component } from 'react';\n\nimport { ActionTargetType } from '../../../../enums/action-target-type';\nimport { CardType } from '../../../../enums/card-type';\nimport { StructureType } from '../../../../enums/structure-type';\n\nimport { ActionLogic, ActionPrerequisites } from '../../../../logic/action-logic';\nimport { CombatantLogic } from '../../../../logic/combatant-logic';\nimport { EncounterLogic } from '../../../../logic/encounter-logic';\nimport { EncounterMapLogic } from '../../../../logic/encounter-map-logic';\nimport { StrongholdLogic } from '../../../../logic/stronghold-logic';\n\nimport type { ActionModel, ActionOriginParameterModel, ActionParameterModel, ActionTargetParameterModel, ActionWeaponParameterModel } from '../../../../models/action';\nimport type { CombatantModel } from '../../../../models/combatant';\nimport type { EncounterModel } from '../../../../models/encounter';\nimport type { GameModel } from '../../../../models/game';\nimport type { ItemModel } from '../../../../models/item';\n\nimport { ActionCard, StrongholdBenefitCard } from '../../../cards';\nimport { Badge, Selector, Tag, Text, TextType } from '../../../controls';\n\nimport './action-controls.scss';\n\ninterface Props {\n\tcombatant: CombatantModel;\n\tencounter: EncounterModel;\n\tgame: GameModel;\n\tdeveloper: boolean;\n\tcurrentActionParameter: ActionParameterModel | null;\n\tcollapsed: boolean;\n\tdrawActions: (encounter: EncounterModel, combatant: CombatantModel, useCharge: StructureType | null) => void;\n\tselectAction: (encounter: EncounterModel, combatant: CombatantModel, action: ActionModel) => void;\n\tdeselectAction: (encounter: EncounterModel, combatant: CombatantModel) => void;\n\tsetActionParameter: (parameter: ActionParameterModel) => void;\n\tsetActionParameterValue: (parameter: ActionParameterModel, value: unknown) => void;\n\trunAction: (encounter: EncounterModel, combatant: CombatantModel) => void;\n}\n\nexport class ActionControls extends Component<Props> {\n\tgetNotSelected = () => {\n\t\tconst actionCards: JSX.Element[] = [];\n\t\tconst baseCards: JSX.Element[] = [];\n\n\t\tthis.props.combatant.combat.actions\n\t\t\t.filter(a => CombatantLogic.getActionSourceType(this.props.combatant, a.id) !== CardType.Base)\n\t\t\t.sort((a, b) => a.name.localeCompare(b.name))\n\t\t\t.forEach(a => {\n\t\t\t\tconst prerequisitesMet = a.prerequisites.every(p => ActionPrerequisites.isSatisfied(p, this.props.combatant));\n\t\t\t\tactionCards.push(\n\t\t\t\t\t<ActionCard\n\t\t\t\t\t\tkey={a.id}\n\t\t\t\t\t\taction={a}\n\t\t\t\t\t\tfooter={CombatantLogic.getActionSource(this.props.combatant, a.id)}\n\t\t\t\t\t\tfooterType={CombatantLogic.getActionSourceType(this.props.combatant, a.id)}\n\t\t\t\t\t\tcombatant={this.props.combatant}\n\t\t\t\t\t\tencounter={this.props.encounter}\n\t\t\t\t\t\tdisabled={!prerequisitesMet}\n\t\t\t\t\t\tonClick={prerequisitesMet ? action => this.props.selectAction(this.props.encounter, this.props.combatant, action) : null}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t});\n\n\t\tthis.props.combatant.combat.actions\n\t\t\t.filter(a => CombatantLogic.getActionSourceType(this.props.combatant, a.id) === CardType.Base)\n\t\t\t.forEach(a => {\n\t\t\t\tconst prerequisitesMet = a.prerequisites.every(p => ActionPrerequisites.isSatisfied(p, this.props.combatant));\n\t\t\t\tif (prerequisitesMet) {\n\t\t\t\t\tbaseCards.push(\n\t\t\t\t\t\t<ActionCard\n\t\t\t\t\t\t\tkey={a.id}\n\t\t\t\t\t\t\taction={a}\n\t\t\t\t\t\t\tfooter={CombatantLogic.getActionSource(this.props.combatant, a.id)}\n\t\t\t\t\t\t\tfooterType={CombatantLogic.getActionSourceType(this.props.combatant, a.id)}\n\t\t\t\t\t\t\tcombatant={this.props.combatant}\n\t\t\t\t\t\t\tencounter={this.props.encounter}\n\t\t\t\t\t\t\tonClick={action => this.props.selectAction(this.props.encounter, this.props.combatant, action)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t});\n\n\t\tlet benefit = null;\n\t\tconst redraws = StrongholdLogic.getStructureCharges(this.props.game, StructureType.Observatory);\n\t\tif ((redraws > 0) || this.props.developer) {\n\t\t\tbenefit = (\n\t\t\t\t<StrongholdBenefitCard\n\t\t\t\t\tlabel='Redraw'\n\t\t\t\t\tavailable={redraws}\n\t\t\t\t\tdeveloper={this.props.developer}\n\t\t\t\t\tonRedraw={() => this.props.drawActions(this.props.encounter, this.props.combatant, this.props.developer ? null : StructureType.Observatory)}\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\n\t\treturn (\n\t\t\t<div className='action-controls-content' key='not-selected'>\n\t\t\t\t{actionCards}\n\t\t\t\t{benefit ? <div className='separator' /> : null}\n\t\t\t\t{benefit}\n\t\t\t\t{baseCards.length > 0 ? <div className='separator' /> : null}\n\t\t\t\t{baseCards}\n\t\t\t</div>\n\t\t);\n\t};\n\n\tgetInProgress = (action: ActionModel) => {\n\t\tlet prerequisitesMet = true;\n\t\tconst prerequisites: JSX.Element[] = [];\n\t\taction.prerequisites.forEach((prerequisite, n) => {\n\t\t\tif (!ActionPrerequisites.isSatisfied(prerequisite, this.props.combatant)) {\n\t\t\t\tprerequisitesMet = false;\n\t\t\t\tprerequisites.push(\n\t\t\t\t\t<div key={n} className='action-prerequisite'>{prerequisite.description}</div>\n\t\t\t\t);\n\t\t\t}\n\t\t});\n\n\t\tlet parametersSet = true;\n\t\tconst parameters: JSX.Element[] = [];\n\t\taction.parameters.forEach((parameter, n) => {\n\t\t\tif (!parametersSet) {\n\t\t\t\t// A previous parameter isn't finished yet\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet parameterSet = true;\n\t\t\tif (parameter.value) {\n\t\t\t\tlet showParameter = true;\n\t\t\t\tlet description: JSX.Element[] | string = '';\n\t\t\t\tlet changeButton = null;\n\t\t\t\tlet changeControls = null;\n\t\t\t\tswitch (parameter.id) {\n\t\t\t\t\tcase 'weapon': {\n\t\t\t\t\t\tconst weaponParam = parameter as ActionWeaponParameterModel;\n\t\t\t\t\t\tif (weaponParam.value) {\n\t\t\t\t\t\t\tconst itemID = parameter.value as string;\n\t\t\t\t\t\t\tconst item = this.props.combatant.items.find(i => i.id === itemID) as ItemModel;\n\t\t\t\t\t\t\tdescription = item.name;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tparameterSet = false;\n\t\t\t\t\t\t\tdescription = '[Not set]';\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (weaponParam.candidates.length > 1) {\n\t\t\t\t\t\t\tchangeControls = (\n\t\t\t\t\t\t\t\t<Selector\n\t\t\t\t\t\t\t\t\toptions={\n\t\t\t\t\t\t\t\t\t\tweaponParam.candidates\n\t\t\t\t\t\t\t\t\t\t\t.map(candidate => candidate as string)\n\t\t\t\t\t\t\t\t\t\t\t.map(id => this.props.combatant.items.find(i => i.id === id) as ItemModel)\n\t\t\t\t\t\t\t\t\t\t\t.map(item => ({ id: item.id, display: item.name }))\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tselectedID={weaponParam.value as string}\n\t\t\t\t\t\t\t\t\tonSelect={id => this.props.setActionParameterValue(parameter, id)}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tshowParameter = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tcase 'origin': {\n\t\t\t\t\t\tconst originParam = parameter as ActionOriginParameterModel;\n\t\t\t\t\t\tif (originParam.value) {\n\t\t\t\t\t\t\tconst list = originParam.value as { x: number, y: number }[];\n\t\t\t\t\t\t\tif (list.length > 0) {\n\t\t\t\t\t\t\t\tconst square = list[0];\n\t\t\t\t\t\t\t\tconst combatantSquares = EncounterLogic.getCombatantSquares(this.props.encounter, this.props.combatant);\n\t\t\t\t\t\t\t\tconst distance = EncounterMapLogic.getDistanceAny(combatantSquares, [ square ]);\n\t\t\t\t\t\t\t\tconst angle = EncounterMapLogic.getDirection(this.props.combatant.combat.position, square);\n\t\t\t\t\t\t\t\tdescription = [\n\t\t\t\t\t\t\t\t\t<div key={`${square.x} ${square.y}`} className='square-indicator'>\n\t\t\t\t\t\t\t\t\t\t<IconArrowUp style={{ transform: `rotate(${angle}deg)` }} />\n\t\t\t\t\t\t\t\t\t\t<span>{distance}</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t];\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tparameterSet = false;\n\t\t\t\t\t\t\t\tdescription = '[Not set]';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tparameterSet = false;\n\t\t\t\t\t\t\tdescription = '[Not set]';\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (originParam.candidates.length > 1) {\n\t\t\t\t\t\t\tchangeButton = (\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tclassName={`icon-btn map-btn ${this.props.currentActionParameter === parameter ? 'checked' : ''}`}\n\t\t\t\t\t\t\t\t\ttitle='Select Origin Square'\n\t\t\t\t\t\t\t\t\tonClick={() => this.props.setActionParameter(originParam)}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<IconViewfinder />\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tcase 'targets': {\n\t\t\t\t\t\tconst targetParam = parameter as ActionTargetParameterModel;\n\t\t\t\t\t\tif (targetParam.targets) {\n\t\t\t\t\t\t\tswitch (targetParam.targets.type) {\n\t\t\t\t\t\t\t\tcase ActionTargetType.Combatants:\n\t\t\t\t\t\t\t\tcase ActionTargetType.Enemies:\n\t\t\t\t\t\t\t\tcase ActionTargetType.Allies: {\n\t\t\t\t\t\t\t\t\tconst list = targetParam.value as string[];\n\t\t\t\t\t\t\t\t\tif (!list || (list.length === 0)) {\n\t\t\t\t\t\t\t\t\t\tparameterSet = false;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tif (targetParam.targets.count === Number.MAX_VALUE) {\n\t\t\t\t\t\t\t\t\t\t// Targets all possible candidates\n\t\t\t\t\t\t\t\t\t\tdescription = list\n\t\t\t\t\t\t\t\t\t\t\t.map(id => EncounterLogic.getCombatant(this.props.encounter, id) as CombatantModel)\n\t\t\t\t\t\t\t\t\t\t\t.map(target => <Tag key={target.id}>{target.name}</Tag>);\n\t\t\t\t\t\t\t\t\t\tif (list.length === 0) {\n\t\t\t\t\t\t\t\t\t\t\tdescription = '[None]';\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t// Targets a specific number of candidates\n\t\t\t\t\t\t\t\t\t\tdescription = list\n\t\t\t\t\t\t\t\t\t\t\t.map(id => EncounterLogic.getCombatant(this.props.encounter, id) as CombatantModel)\n\t\t\t\t\t\t\t\t\t\t\t.map(target => <Tag key={target.id}>{target.name}</Tag>);\n\t\t\t\t\t\t\t\t\t\tif (list.length === 0) {\n\t\t\t\t\t\t\t\t\t\t\tdescription = '[None]';\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tif (targetParam.candidates.length > targetParam.targets.count) {\n\t\t\t\t\t\t\t\t\t\t\tconst title = `Select ${targetParam.targets.type.toLowerCase()}`;\n\t\t\t\t\t\t\t\t\t\t\tchangeButton = (\n\t\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={`icon-btn map-btn ${this.props.currentActionParameter === parameter ? 'checked' : ''}`}\n\t\t\t\t\t\t\t\t\t\t\t\t\ttitle={title}\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => this.props.setActionParameter(targetParam)}\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<IconViewfinder />\n\t\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tcase ActionTargetType.Squares: {\n\t\t\t\t\t\t\t\t\tconst list = targetParam.value as { x: number, y: number }[];\n\t\t\t\t\t\t\t\t\tif (list.length === 0) {\n\t\t\t\t\t\t\t\t\t\tparameterSet = false;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tif (targetParam.targets.count === Number.MAX_VALUE) {\n\t\t\t\t\t\t\t\t\t\t// Targets all possible candidates\n\t\t\t\t\t\t\t\t\t\tdescription = list.length > 0 ? `[${list.length} squares]` : '[None]';\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t// Targets a specific number of candidates\n\t\t\t\t\t\t\t\t\t\tdescription = list\n\t\t\t\t\t\t\t\t\t\t\t.map(square => {\n\t\t\t\t\t\t\t\t\t\t\t\tconst combatantSquares = EncounterLogic.getCombatantSquares(this.props.encounter, this.props.combatant);\n\t\t\t\t\t\t\t\t\t\t\t\tconst distance = EncounterMapLogic.getDistanceAny(combatantSquares, [ square ]);\n\t\t\t\t\t\t\t\t\t\t\t\tconst angle = EncounterMapLogic.getDirection(this.props.combatant.combat.position, square);\n\t\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div key={`${square.x} ${square.y}`} className='square-indicator'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<IconArrowUp style={{ transform: `rotate(${angle}deg)` }} />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span>{distance}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\tif (targetParam.candidates.length > targetParam.targets.count) {\n\t\t\t\t\t\t\t\t\t\t\tchangeButton = (\n\t\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={`icon-btn map-btn ${this.props.currentActionParameter === parameter ? 'checked' : ''}`}\n\t\t\t\t\t\t\t\t\t\t\t\t\ttitle='Select Squares'\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => this.props.setActionParameter(targetParam)}\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<IconViewfinder />\n\t\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tcase ActionTargetType.Walls: {\n\t\t\t\t\t\t\t\t\tconst list = targetParam.value as { x: number, y: number }[];\n\t\t\t\t\t\t\t\t\tif (list.length === 0) {\n\t\t\t\t\t\t\t\t\t\tparameterSet = false;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tif (targetParam.targets.count === Number.MAX_VALUE) {\n\t\t\t\t\t\t\t\t\t\t// Targets all possible candidates\n\t\t\t\t\t\t\t\t\t\tdescription = list.length > 0 ? `[${list.length} walls]` : '[None]';\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t// Targets a specific number of candidates\n\t\t\t\t\t\t\t\t\t\tdescription = list\n\t\t\t\t\t\t\t\t\t\t\t.map(square => {\n\t\t\t\t\t\t\t\t\t\t\t\tconst combatantSquares = EncounterLogic.getCombatantSquares(this.props.encounter, this.props.combatant);\n\t\t\t\t\t\t\t\t\t\t\t\tconst distance = EncounterMapLogic.getDistanceAny(combatantSquares, [ square ]);\n\t\t\t\t\t\t\t\t\t\t\t\tconst angle = EncounterMapLogic.getDirection(this.props.combatant.combat.position, square);\n\t\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div key={`${square.x} ${square.y}`} className='square-indicator'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<IconArrowUp style={{ transform: `rotate(${angle}deg)` }} />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span>{distance}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\tif (targetParam.candidates.length > targetParam.targets.count) {\n\t\t\t\t\t\t\t\t\t\t\tchangeButton = (\n\t\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={`icon-btn map-btn ${this.props.currentActionParameter === parameter ? 'checked' : ''}`}\n\t\t\t\t\t\t\t\t\t\t\t\t\ttitle='Select Walls'\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => this.props.setActionParameter(targetParam)}\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<IconViewfinder />\n\t\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// Targets self\n\t\t\t\t\t\t\tshowParameter = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (showParameter) {\n\t\t\t\t\tparameters.push(\n\t\t\t\t\t\t<Badge key={n} value={parameterSet ? '' : '!'}>\n\t\t\t\t\t\t\t<div className='action-parameter'>\n\t\t\t\t\t\t\t\t<div className='action-parameter-top-line'>\n\t\t\t\t\t\t\t\t\t<div className='action-parameter-name'>\n\t\t\t\t\t\t\t\t\t\t{ActionLogic.getParameterDescription(parameter)}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className='action-parameter-value'>\n\t\t\t\t\t\t\t\t\t\t{description}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t{changeButton !== null ? <div className='action-parameter-change'>{changeButton}</div> : null}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tthis.props.currentActionParameter === parameter ?\n\t\t\t\t\t\t\t\t\t\t<Text type={TextType.Information}>\n\t\t\t\t\t\t\t\t\t\t\t<p>Select targets on the map, then press the <IconViewfinder size={13} /> button again to confirm your selection.</p>\n\t\t\t\t\t\t\t\t\t\t</Text>\n\t\t\t\t\t\t\t\t\t\t: null\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t{changeControls !== null ? <div className='action-parameter-change'>{changeControls}</div> : null}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</Badge>\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tparameterSet = false;\n\t\t\t}\n\n\t\t\tif (!parameterSet) {\n\t\t\t\tparametersSet = false;\n\t\t\t}\n\t\t});\n\n\t\treturn (\n\t\t\t<div className='action-controls-content' key={action.id}>\n\t\t\t\t<ActionCard\n\t\t\t\t\taction={action}\n\t\t\t\t\tfooter={CombatantLogic.getActionSource(this.props.combatant, action.id)}\n\t\t\t\t\tfooterType={CombatantLogic.getActionSourceType(this.props.combatant, action.id)}\n\t\t\t\t\tcombatant={this.props.combatant}\n\t\t\t\t\tencounter={this.props.encounter}\n\t\t\t\t/>\n\t\t\t\t<div className='action-details'>\n\t\t\t\t\t{prerequisites}\n\t\t\t\t\t{parameters}\n\t\t\t\t\t<div className='button-row'>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName='primary'\n\t\t\t\t\t\t\tdisabled={!prerequisitesMet || !parametersSet || (this.props.currentActionParameter !== null)}\n\t\t\t\t\t\t\tonClick={() => this.props.runAction(this.props.encounter, this.props.combatant)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tRun this Action\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tdisabled={this.props.currentActionParameter !== null}\n\t\t\t\t\t\t\tonClick={() => this.props.deselectAction(this.props.encounter, this.props.combatant)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tChoose Again\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t};\n\n\tgetUsed = (action: ActionModel) => {\n\t\tlet benefit = null;\n\t\tconst redraws = StrongholdLogic.getStructureCharges(this.props.game, StructureType.ThievesGuild);\n\t\tif ((redraws > 0) || this.props.developer) {\n\t\t\tbenefit = (\n\t\t\t\t<StrongholdBenefitCard\n\t\t\t\t\tlabel='Act Again'\n\t\t\t\t\tavailable={redraws}\n\t\t\t\t\tdeveloper={this.props.developer}\n\t\t\t\t\tonUse={() => this.props.drawActions(this.props.encounter, this.props.combatant, this.props.developer ? null : StructureType.ThievesGuild)}\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\n\t\treturn (\n\t\t\t<div className='action-controls-content' key={action.id + ' used'}>\n\t\t\t\t<ActionCard\n\t\t\t\t\taction={action}\n\t\t\t\t\tfooter={CombatantLogic.getActionSource(this.props.combatant, action.id)}\n\t\t\t\t\tfooterType={CombatantLogic.getActionSourceType(this.props.combatant, action.id)}\n\t\t\t\t\tcombatant={this.props.combatant}\n\t\t\t\t\tencounter={this.props.encounter}\n\t\t\t\t/>\n\t\t\t\t{benefit}\n\t\t\t\t<div className='action-details'>\n\t\t\t\t\t<Text type={TextType.Information}>\n\t\t\t\t\t\t<p>You have used your action for this turn.</p>\n\t\t\t\t\t\t{this.props.combatant.combat.movement > 0 ? <p>You still have some movement points you can use.</p> : null }\n\t\t\t\t\t</Text>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t};\n\n\trender = () => {\n\t\ttry {\n\t\t\tlet content = null;\n\t\t\tif (this.props.combatant.combat.selectedAction) {\n\t\t\t\tif (this.props.combatant.combat.selectedAction.used) {\n\t\t\t\t\tcontent = this.getUsed(this.props.combatant.combat.selectedAction.action);\n\t\t\t\t} else {\n\t\t\t\t\tcontent = this.getInProgress(this.props.combatant.combat.selectedAction.action);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tcontent = this.getNotSelected();\n\t\t\t}\n\n\t\t\treturn (\n\t\t\t\t<div className={`action-controls ${this.props.collapsed ? 'collapsed' : 'expanded'}`} key={this.props.combatant.id}>\n\t\t\t\t\t{content}\n\t\t\t\t</div>\n\t\t\t);\n\t\t} catch {\n\t\t\treturn <div className='action-controls render-error' />;\n\t\t}\n\t};\n}\n","import { Component } from 'react';\n\nimport { EncounterState } from '../../../../enums/encounter-state';\n\nimport { EncounterLogic } from '../../../../logic/encounter-logic';\n\nimport type { EncounterModel } from '../../../../models/encounter';\nimport type { GameModel } from '../../../../models/game';\nimport type { OptionsModel } from '../../../../models/options';\nimport type { RegionModel } from '../../../../models/region';\n\nimport { Text, TextType } from '../../../controls';\nimport { BoonCard } from '../../../cards';\n\nimport './encounter-controls.scss';\n\ninterface EncounterControlsProps {\n\tencounter: EncounterModel;\n\tgame: GameModel;\n\toptions: OptionsModel;\n\tstate: EncounterState;\n\tsetEncounterState: (state: EncounterState) => void;\n\tfinishEncounter: (state: EncounterState) => void;\n}\n\nexport class EncounterControls extends Component<EncounterControlsProps> {\n\trender = () => {\n\t\ttry {\n\t\t\tconst region = this.props.game.map.regions.find(r => r.id === this.props.encounter.regionID) as RegionModel;\n\n\t\t\tswitch (this.props.state) {\n\t\t\t\tcase EncounterState.Victory:\n\t\t\t\t\tif (region.encounters.length > 1) {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<div className='encounter-controls'>\n\t\t\t\t\t\t\t\t<Text type={TextType.Heading}>Victory</Text>\n\t\t\t\t\t\t\t\t<Text type={TextType.MinorHeading}>You won the encounter in {region.name}!</Text>\n\t\t\t\t\t\t\t\t<hr />\n\t\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t\t\t<li>Each surviving hero who took part in this encounter gains 1 XP.</li>\n\t\t\t\t\t\t\t\t\t<li>Any heroes who died have been lost.</li>\n\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t<hr />\n\t\t\t\t\t\t\t\t<button className='primary' onClick={() => this.props.finishEncounter(EncounterState.Victory)}>OK</button>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tthis.props.state !== EncounterLogic.getEncounterState(this.props.encounter) ?\n\t\t\t\t\t\t\t\t\t\t<button onClick={() => this.props.setEncounterState(EncounterState.Active)}>Cancel</button>\n\t\t\t\t\t\t\t\t\t\t: null\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t);\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<div className='encounter-controls'>\n\t\t\t\t\t\t\t\t<Text type={TextType.Heading}>Victory</Text>\n\t\t\t\t\t\t\t\t<Text type={TextType.MinorHeading}>You have taken control of {region.name}!</Text>\n\t\t\t\t\t\t\t\t<hr />\n\t\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t\t\t<li>Each surviving hero who took part in this encounter gains 1 XP.</li>\n\t\t\t\t\t\t\t\t\t<li>Any heroes who died have been lost.</li>\n\t\t\t\t\t\t\t\t\t<li>You can recruit a new hero.</li>\n\t\t\t\t\t\t\t\t\t<li>You have earned a reward.</li>\n\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t<div className='region-reward'>\n\t\t\t\t\t\t\t\t\t<BoonCard boon={region.boon} />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<hr />\n\t\t\t\t\t\t\t\t<button className='primary' onClick={() => this.props.finishEncounter(EncounterState.Victory)}>OK</button>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tthis.props.state !== EncounterLogic.getEncounterState(this.props.encounter) ?\n\t\t\t\t\t\t\t\t\t\t<button onClick={() => this.props.setEncounterState(EncounterState.Active)}>Cancel</button>\n\t\t\t\t\t\t\t\t\t\t: null\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\tcase EncounterState.Defeat:\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div className='encounter-controls'>\n\t\t\t\t\t\t\t<Text type={TextType.Heading}>Defeated</Text>\n\t\t\t\t\t\t\t<Text type={TextType.MinorHeading}>You lost the encounter in {region.name}.</Text>\n\t\t\t\t\t\t\t<hr />\n\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t\t<li>Those heroes who took part have been lost, along with all their equipment.</li>\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t<hr />\n\t\t\t\t\t\t\t<button className='primary' onClick={() => this.props.finishEncounter(EncounterState.Defeat)}>OK</button>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tthis.props.state !== EncounterLogic.getEncounterState(this.props.encounter) ?\n\t\t\t\t\t\t\t\t\t<button onClick={() => this.props.setEncounterState(EncounterState.Active)}>Cancel</button>\n\t\t\t\t\t\t\t\t\t: null\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\tcase EncounterState.Retreat:\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div className='encounter-controls'>\n\t\t\t\t\t\t\t<Text type={TextType.Heading}>Retreat</Text>\n\t\t\t\t\t\t\t<Text type={TextType.MinorHeading}>You retreated from the encounter in {region.name}.</Text>\n\t\t\t\t\t\t\t<hr />\n\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t\t<li>Any heroes who fell have been lost, along with all their equipment.</li>\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t<hr />\n\t\t\t\t\t\t\t<button className='primary' onClick={() => this.props.finishEncounter(EncounterState.Retreat)}>OK</button>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tthis.props.state !== EncounterLogic.getEncounterState(this.props.encounter) ?\n\t\t\t\t\t\t\t\t\t<button onClick={() => this.props.setEncounterState(EncounterState.Active)}>Cancel</button>\n\t\t\t\t\t\t\t\t\t: null\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t}\n\n\t\t\treturn null;\n\t\t} catch {\n\t\t\treturn <div className='encounter-controls render-error' />;\n\t\t}\n\t};\n}\n","import createReactComponent from '../createReactComponent';\nexport default createReactComponent('user', 'IconUser', [\n  ['path', { d: 'M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0', key: 'svg-0' }],\n  ['path', { d: 'M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2', key: 'svg-1' }],\n]);\n","import createReactComponent from '../createReactComponent';\nexport default createReactComponent('arrows-move', 'IconArrowsMove', [\n  ['path', { d: 'M18 9l3 3l-3 3', key: 'svg-0' }],\n  ['path', { d: 'M15 12h6', key: 'svg-1' }],\n  ['path', { d: 'M6 9l-3 3l3 3', key: 'svg-2' }],\n  ['path', { d: 'M3 12h6', key: 'svg-3' }],\n  ['path', { d: 'M9 18l3 3l3 -3', key: 'svg-4' }],\n  ['path', { d: 'M12 15v6', key: 'svg-5' }],\n  ['path', { d: 'M15 6l-3 -3l-3 3', key: 'svg-6' }],\n  ['path', { d: 'M12 3v6', key: 'svg-7' }],\n]);\n","import createReactComponent from '../createReactComponent';\nexport default createReactComponent('circle-check', 'IconCircleCheck', [\n  ['path', { d: 'M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0', key: 'svg-0' }],\n  ['path', { d: 'M9 12l2 2l4 -4', key: 'svg-1' }],\n]);\n","import createReactComponent from '../createReactComponent';\nexport default createReactComponent('flask-2', 'IconFlask2', [\n  ['path', { d: 'M6.1 15h11.8', key: 'svg-0' }],\n  [\n    'path',\n    {\n      d: 'M14 3v7.342a6 6 0 0 1 1.318 10.658h-6.635a6 6 0 0 1 1.317 -10.66v-7.34h4z',\n      key: 'svg-1',\n    },\n  ],\n  ['path', { d: 'M9 3h6', key: 'svg-2' }],\n]);\n","import { IconCircleCheckFilled, IconX } from '@tabler/icons-react';\nimport { Component } from 'react';\n\nimport type { CombatantModel } from '../../../../../models/combatant';\nimport type { EncounterModel } from '../../../../../models/encounter';\n\nimport { IconSize, IconType, IconValue, StatValue } from '../../../../controls';\n\nimport './hero-endturn.scss';\n\ninterface Props {\n\tcombatant: CombatantModel;\n\tencounter: EncounterModel;\n\tendTurn: () => void;\n}\n\nexport class HeroEndturn extends Component<Props> {\n\trender = () => {\n\t\ttry {\n\t\t\treturn (\n\t\t\t\t<div className='hero-endturn'>\n\t\t\t\t\t<div className='endturn-stats'>\n\t\t\t\t\t\t<StatValue\n\t\t\t\t\t\t\torientation='vertical'\n\t\t\t\t\t\t\tlabel='Movement Left'\n\t\t\t\t\t\t\tvalue={<IconValue type={IconType.Movement} value={this.props.combatant.combat.movement} size={IconSize.Large} />}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<StatValue\n\t\t\t\t\t\t\torientation='vertical'\n\t\t\t\t\t\t\tlabel='Action Taken'\n\t\t\t\t\t\t\tvalue={\n\t\t\t\t\t\t\t\tthis.props.combatant.combat.selectedAction && this.props.combatant.combat.selectedAction.used ?\n\t\t\t\t\t\t\t\t\t<IconCircleCheckFilled className='checked' size={50} />\n\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t<IconX size={50} />}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<button className='primary' onClick={this.props.endTurn}>End your Turn</button>\n\t\t\t\t</div>\n\t\t\t);\n\t\t} catch {\n\t\t\treturn <div className='hero-endturn render-error' />;\n\t\t}\n\t};\n}\n","import { Component } from 'react';\nimport { IconArrowBigRightLinesFilled } from '@tabler/icons-react';\n\nimport { EncounterLogic } from '../../../../../logic/encounter-logic';\n\nimport type { CombatantModel } from '../../../../../models/combatant';\nimport type { EncounterModel } from '../../../../../models/encounter';\nimport type { OptionsModel } from '../../../../../models/options';\n\nimport { Expander, Text, TextType } from '../../../../controls';\nimport { DirectionPanel } from '../../../../panels';\n\nimport './hero-move.scss';\n\ninterface Props {\n\tcombatant: CombatantModel;\n\tencounter: EncounterModel;\n\toptions: OptionsModel;\n\tmove: (encounter: EncounterModel, combatant: CombatantModel, dir: string, cost: number) => void;\n\taddMovement: (encounter: EncounterModel, combatant: CombatantModel, value: number) => void;\n}\n\nexport class HeroMove extends Component<Props> {\n\trender = () => {\n\t\ttry {\n\t\t\tconst moveCosts: Record<string, number> = {};\n\t\t\t[ 'n', 'ne', 'e', 'se', 's', 'sw', 'w', 'nw' ].forEach(dir => {\n\t\t\t\tmoveCosts[dir] = EncounterLogic.getMoveCost(this.props.encounter, this.props.combatant, this.props.combatant.combat.position, dir);\n\t\t\t});\n\n\t\t\treturn (\n\t\t\t\t<div className='hero-move'>\n\t\t\t\t\t{this.props.options.developer ? <button className='developer' onClick={() => this.props.addMovement(this.props.encounter, this.props.combatant, 10)}>Add Movement</button> : null}\n\t\t\t\t\t<DirectionPanel combatant={this.props.combatant} costs={moveCosts} onMove={(dir, cost) => this.props.move(this.props.encounter, this.props.combatant, dir, cost)} />\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.props.combatant.combat.movement === 0 ?\n\t\t\t\t\t\t\t<Text type={TextType.Information}>\n\t\t\t\t\t\t\t\t<p>You have used all your movement for this turn.</p>\n\t\t\t\t\t\t\t\t{!this.props.combatant.combat.selectedAction || !this.props.combatant.combat.selectedAction.used ? <p>You can still take your action.</p> : null }\n\t\t\t\t\t\t\t</Text>\n\t\t\t\t\t\t\t: null\n\t\t\t\t\t}\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.props.options.showTips ?\n\t\t\t\t\t\t\t<Expander\n\t\t\t\t\t\t\t\theader={\n\t\t\t\t\t\t\t\t\t<Text type={TextType.Tip}>Movement Points</Text>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tcontent={\n\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t<p>Your hero only has a certain number of movement points <IconArrowBigRightLinesFilled size={15} /> to use each round.</p>\n\t\t\t\t\t\t\t\t\t\t<p>These points are calculated using their <b>Speed</b> trait rank.</p>\n\t\t\t\t\t\t\t\t\t\t<p>You can use them to move your hero around the map, but they&apos;re also useful for picking up items, hiding, or drinking potions.</p>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t: null\n\t\t\t\t\t}\n\t\t\t\t</div>\n\t\t\t);\n\t\t} catch {\n\t\t\treturn <div className='hero-move render-error' />;\n\t\t}\n\t};\n}\n","import { Component } from 'react';\n\nimport type { CombatantModel } from '../../../../../models/combatant';\nimport type { EncounterModel } from '../../../../../models/encounter';\nimport type { OptionsModel } from '../../../../../models/options';\n\nimport { CombatStatsPanel, CombatantNotices, CombatantRowPanel } from '../../../../panels';\nimport { Expander, IconSize, IconType, IconValue, Text, TextType } from '../../../../controls';\n\nimport './hero-overview.scss';\n\ninterface Props {\n\tcombatant: CombatantModel;\n\tencounter: EncounterModel;\n\toptions: OptionsModel;\n\tshowToken: (combatant: CombatantModel) => void;\n\tshowCharacterSheet: (combatant: CombatantModel) => void;\n\tinspire: (encounter: EncounterModel, combatant: CombatantModel) => void;\n\tscan: (encounter: EncounterModel, combatant: CombatantModel) => void;\n\thide: (encounter: EncounterModel, combatant: CombatantModel) => void;\n\tswitchAllegiance: (combatant: CombatantModel) => void;\n}\n\nexport class HeroOverview extends Component<Props> {\n\trender = () => {\n\t\ttry {\n\t\t\treturn (\n\t\t\t\t<div className='hero-overview'>\n\t\t\t\t\t<CombatantRowPanel\n\t\t\t\t\t\tmode='header'\n\t\t\t\t\t\tcombatant={this.props.combatant}\n\t\t\t\t\t\tencounter={this.props.encounter}\n\t\t\t\t\t\tonTokenClick={this.props.showToken}\n\t\t\t\t\t\tonDetails={this.props.showCharacterSheet}\n\t\t\t\t\t/>\n\t\t\t\t\t<CombatStatsPanel combatant={this.props.combatant} encounter={this.props.encounter} />\n\t\t\t\t\t<div className='quick-actions'>\n\t\t\t\t\t\t<button disabled={this.props.combatant.combat.movement < 4} onClick={() => this.props.inspire(this.props.encounter, this.props.combatant)}>\n\t\t\t\t\t\t\tInspire<br /><IconValue value={4} type={IconType.Movement} size={IconSize.Button} />\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<button disabled={this.props.combatant.combat.movement < 4} onClick={() => this.props.scan(this.props.encounter, this.props.combatant)}>\n\t\t\t\t\t\t\tScan<br /><IconValue value={4} type={IconType.Movement} size={IconSize.Button} />\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<button disabled={this.props.combatant.combat.movement < 4} onClick={() => this.props.hide(this.props.encounter, this.props.combatant)}>\n\t\t\t\t\t\t\tHide<br /><IconValue value={4} type={IconType.Movement} size={IconSize.Button} />\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t\t<CombatantNotices combatant={this.props.combatant} />\n\t\t\t\t\t{this.props.options.developer ? <button className='developer' onClick={() => this.props.switchAllegiance(this.props.combatant)}>Switch Allegiance</button> : null}\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.props.options.showTips ?\n\t\t\t\t\t\t\t<Expander\n\t\t\t\t\t\t\t\theader={\n\t\t\t\t\t\t\t\t\t<Text type={TextType.Tip}>Taking an Action</Text>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tcontent={\n\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t<p>You haven&apos;t yet chosen your action for this turn.</p>\n\t\t\t\t\t\t\t\t\t\t<p>Three action cards have been drawn for you from your action deck, and are shown below the map.</p>\n\t\t\t\t\t\t\t\t\t\t<p>Select one of those cards to use that action.</p>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t: null\n\t\t\t\t\t}\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.props.options.showTips ?\n\t\t\t\t\t\t\t<Expander\n\t\t\t\t\t\t\t\theader={\n\t\t\t\t\t\t\t\t\t<Text type={TextType.Tip}>Damage and Wounds</Text>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tcontent={\n\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t<p>When a combatant takes damage, the amount is added to their Damage value and they roll their <b>Endurance</b> trait.</p>\n\t\t\t\t\t\t\t\t\t\t<p>If the result of that roll is lower than their Damage value, they take a Wound, and their Damage is reset to 0.</p>\n\t\t\t\t\t\t\t\t\t\t<p>A combatant can only take as many Wounds as their <b>Resolve</b> trait rank before becoming unconscious.</p>\n\t\t\t\t\t\t\t\t\t\t<p>Once a combatant is unconscious:</p>\n\t\t\t\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t\t\t\t\t<li>They will die if they take an additional Wound.</li>\n\t\t\t\t\t\t\t\t\t\t\t<li>At the start of their turn they roll their <b>Resolve</b> trait; a result of 1 kills them.</li>\n\t\t\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t: null\n\t\t\t\t\t}\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.props.options.showTips ?\n\t\t\t\t\t\t\t<Expander\n\t\t\t\t\t\t\t\theader={\n\t\t\t\t\t\t\t\t\t<Text type={TextType.Tip}>Hidden vs Senses</Text>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tcontent={\n\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t<p>At the start of a combatant&apos;s turn, their Senses value is calculated using their <b>Perception</b> skill rank.</p>\n\t\t\t\t\t\t\t\t\t\t<p>A combatant cannot see enemies whose Hidden value is greater than this value.</p>\n\t\t\t\t\t\t\t\t\t\t<p>If you Hide, your Hidden value is increased based on your <b>Stealth</b> skill rank.</p>\n\t\t\t\t\t\t\t\t\t\t<p>If you Scan, your Senses value is increased based on your <b>Perception</b> skill rank.</p>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t: null\n\t\t\t\t\t}\n\t\t\t\t</div>\n\t\t\t);\n\t\t} catch {\n\t\t\treturn <div className='hero-overview render-error' />;\n\t\t}\n\t};\n}\n","import { Component } from 'react';\n\nimport { CombatantState } from '../../../../../enums/combatant-state';\n\nimport { EncounterLogic } from '../../../../../logic/encounter-logic';\nimport { EncounterMapLogic } from '../../../../../logic/encounter-map-logic';\n\nimport type { CombatantModel } from '../../../../../models/combatant';\nimport type { EncounterModel } from '../../../../../models/encounter';\nimport type { ItemModel } from '../../../../../models/item';\n\nimport { Collections } from '../../../../../utils/collections';\n\nimport { IconSize, IconType, IconValue, Text, TextType } from '../../../../controls';\nimport { ItemCard } from '../../../../cards';\n\nimport './hero-potions.scss';\n\ninterface Props {\n\tcombatant: CombatantModel;\n\tencounter: EncounterModel;\n\tdrinkPotion: (encounter: EncounterModel, owner: CombatantModel, drinker: CombatantModel, potion: ItemModel) => void;\n}\n\nexport class HeroPotions extends Component<Props> {\n\trender = () => {\n\t\ttry {\n\t\t\tconst edges = EncounterMapLogic.getMapEdges(this.props.encounter.mapSquares);\n\t\t\tconst originSquares = EncounterLogic.getCombatantSquares(this.props.encounter, this.props.combatant);\n\t\t\tconst adj = EncounterLogic.findCombatants(this.props.encounter, originSquares, 1)\n\t\t\t\t.filter(c => c.id !== this.props.combatant.id)\n\t\t\t\t.filter(c => c.combat.state !== CombatantState.Dead)\n\t\t\t\t.filter(c => c.faction === this.props.combatant.faction)\n\t\t\t\t.filter(c => EncounterMapLogic.canSeeAny(edges, originSquares, EncounterLogic.getCombatantSquares(this.props.encounter, c)));\n\n\t\t\tconst potionSections = Collections.distinct(this.props.combatant.carried.filter(i => i.potion), i => i.name)\n\t\t\t\t.map((p, n) => {\n\t\t\t\t\tconst count = this.props.combatant.carried.filter(i => i.name === p.name).length;\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div key={n}>\n\t\t\t\t\t\t\t<div className='potion-card'>\n\t\t\t\t\t\t\t\t<ItemCard item={p} count={count} />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<button disabled={this.props.combatant.combat.movement < 2} onClick={() => this.props.drinkPotion(this.props.encounter, this.props.combatant, this.props.combatant, p)}>\n\t\t\t\t\t\t\t\tDrink<br /><IconValue type={IconType.Movement} value={2} size={IconSize.Button} />\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tadj.map(c => (\n\t\t\t\t\t\t\t\t\t<button key={c.id} disabled={this.props.combatant.combat.movement < 2} onClick={() => this.props.drinkPotion(this.props.encounter, this.props.combatant, c, p)}>\n\t\t\t\t\t\t\t\t\t\tFeed to {c.name}<br /><IconValue type={IconType.Movement} value={2} size={IconSize.Button} />\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t))\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t});\n\n\t\t\tif (potionSections.length === 0) {\n\t\t\t\tpotionSections.push(\n\t\t\t\t\t<div key='empty'>\n\t\t\t\t\t\t<Text type={TextType.Information}>\n\t\t\t\t\t\t\t<p>{this.props.combatant.name} does not have any potions.</p>\n\t\t\t\t\t\t</Text>\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t}\n\n\t\t\treturn (\n\t\t\t\t<div className='hero-potions'>\n\t\t\t\t\t{potionSections}\n\t\t\t\t</div>\n\t\t\t);\n\t\t} catch {\n\t\t\treturn <div className='hero-potions render-error' />;\n\t\t}\n\t};\n}\n","import { IconArrowsMove, IconCircleCheck, IconCircleCheckFilled, IconFlask2, IconUser } from '@tabler/icons-react';\nimport { Component } from 'react';\n\nimport type { CombatantModel } from '../../../../models/combatant';\nimport type { EncounterModel } from '../../../../models/encounter';\nimport type { ItemModel } from '../../../../models/item';\nimport type { OptionsModel } from '../../../../models/options';\n\nimport { Expander, Tabs, Text, TextType } from '../../../controls';\nimport { HeroEndturn } from './hero-endturn/hero-endturn';\nimport { HeroMove } from './hero-move/hero-move';\nimport { HeroOverview } from './hero-overview/hero-overview';\nimport { HeroPotions } from './hero-potions/hero-potions';\n\nimport './hero-controls.scss';\n\ninterface Props {\n\tcombatant: CombatantModel;\n\tencounter: EncounterModel;\n\toptions: OptionsModel;\n\tshowToken: (combatant: CombatantModel) => void;\n\tshowCharacterSheet: (combatant: CombatantModel) => void;\n\tmove: (encounter: EncounterModel, combatant: CombatantModel, dir: string, cost: number) => void;\n\taddMovement: (encounter: EncounterModel, combatant: CombatantModel, value: number) => void;\n\tinspire: (encounter: EncounterModel, combatant: CombatantModel) => void;\n\tscan: (encounter: EncounterModel, combatant: CombatantModel) => void;\n\thide: (encounter: EncounterModel, combatant: CombatantModel) => void;\n\tswitchAllegiance: (combatant: CombatantModel) => void;\n\tdrinkPotion: (encounter: EncounterModel, owner: CombatantModel, drinker: CombatantModel, potion: ItemModel) => void;\n\tendTurn: () => void;\n}\n\ninterface State {\n\ttab: string;\n}\n\nexport class HeroControls extends Component<Props, State> {\n\tconstructor(props: Props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\ttab: 'stats'\n\t\t};\n\t}\n\n\tsetTab = (tab: string) => {\n\t\tthis.setState({\n\t\t\ttab: tab\n\t\t});\n\t};\n\n\tendTurn = () => {\n\t\tthis.setState({\n\t\t\ttab: 'stats'\n\t\t}, () => {\n\t\t\tthis.props.endTurn();\n\t\t});\n\t};\n\n\trender = () => {\n\t\ttry {\n\t\t\tconst finished = (this.props.combatant.combat.movement === 0) && this.props.combatant.combat.selectedAction && this.props.combatant.combat.selectedAction.used;\n\n\t\t\tconst options = [\n\t\t\t\t{ id: 'stats', display: <IconUser /> },\n\t\t\t\t{ id: 'move', display: <IconArrowsMove /> },\n\t\t\t\t{ id: 'endturn', display: finished ? <IconCircleCheckFilled className='checked' /> : <IconCircleCheck /> }\n\t\t\t];\n\n\t\t\tif (this.props.combatant.carried.some(i => i.potion)) {\n\t\t\t\toptions.splice(2, 0, { id: 'potion', display: <IconFlask2 /> });\n\t\t\t}\n\n\t\t\tlet content = null;\n\t\t\tswitch (this.state.tab) {\n\t\t\t\tcase 'stats':\n\t\t\t\t\tcontent = (\n\t\t\t\t\t\t<HeroOverview\n\t\t\t\t\t\t\tcombatant={this.props.combatant}\n\t\t\t\t\t\t\tencounter={this.props.encounter}\n\t\t\t\t\t\t\toptions={this.props.options}\n\t\t\t\t\t\t\tshowToken={this.props.showToken}\n\t\t\t\t\t\t\tshowCharacterSheet={this.props.showCharacterSheet}\n\t\t\t\t\t\t\tinspire={this.props.inspire}\n\t\t\t\t\t\t\tscan={this.props.scan}\n\t\t\t\t\t\t\thide={this.props.hide}\n\t\t\t\t\t\t\tswitchAllegiance={this.props.switchAllegiance}\n\t\t\t\t\t\t/>\n\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'move':\n\t\t\t\t\tcontent = (\n\t\t\t\t\t\t<HeroMove\n\t\t\t\t\t\t\tcombatant={this.props.combatant}\n\t\t\t\t\t\t\tencounter={this.props.encounter}\n\t\t\t\t\t\t\toptions={this.props.options}\n\t\t\t\t\t\t\tmove={this.props.move}\n\t\t\t\t\t\t\taddMovement={this.props.addMovement}\n\t\t\t\t\t\t/>\n\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'potion':\n\t\t\t\t\tcontent = (\n\t\t\t\t\t\t<HeroPotions\n\t\t\t\t\t\t\tcombatant={this.props.combatant}\n\t\t\t\t\t\t\tencounter={this.props.encounter}\n\t\t\t\t\t\t\tdrinkPotion={this.props.drinkPotion}\n\t\t\t\t\t\t/>\n\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'endturn':\n\t\t\t\t\tcontent = (\n\t\t\t\t\t\t<HeroEndturn\n\t\t\t\t\t\t\tcombatant={this.props.combatant}\n\t\t\t\t\t\t\tencounter={this.props.encounter}\n\t\t\t\t\t\t\tendTurn={this.endTurn}\n\t\t\t\t\t\t/>\n\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\treturn (\n\t\t\t\t<div className='hero-controls' key={this.props.combatant.id}>\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.props.options.showTips ?\n\t\t\t\t\t\t\t<Expander\n\t\t\t\t\t\t\t\theader={\n\t\t\t\t\t\t\t\t\t<Text type={TextType.Tip}>It is {this.props.combatant.name}&apos;s turn; explore the tabs below to see what they can do.</Text>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tcontent={\n\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t<p>The most important things to know are:</p>\n\t\t\t\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t\t\t\t\t<li>You can move your hero around the map with the <IconArrowsMove size={15} /> tab.</li>\n\t\t\t\t\t\t\t\t\t\t\t<li>You can choose your action - you only get one per turn! Your action cards are shown below the map.</li>\n\t\t\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t\t\t<p>When you&apos;re finished, select <b>End Turn</b> on the <IconCircleCheck size={15} /> tab.</p>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t: null\n\t\t\t\t\t}\n\t\t\t\t\t<Tabs\n\t\t\t\t\t\toptions={options}\n\t\t\t\t\t\tselectedID={this.state.tab}\n\t\t\t\t\t\tonSelect={this.setTab}\n\t\t\t\t\t/>\n\t\t\t\t\t<div className='tab-content'>\n\t\t\t\t\t\t{content}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t);\n\t\t}  catch {\n\t\t\treturn <div className='hero-controls render-error' />;\n\t\t}\n\t};\n}\n","import { Component } from 'react';\n\nimport type { CombatantModel } from '../../../../models/combatant';\nimport type { EncounterModel } from '../../../../models/encounter';\nimport type { OptionsModel } from '../../../../models/options';\n\nimport { CombatantNotices, CombatantRowPanel } from '../../../panels';\n\nimport './inactive-controls.scss';\n\ninterface Props {\n\tcombatant: CombatantModel;\n\tencounter: EncounterModel;\n\toptions: OptionsModel;\n\tshowToken: (combatant: CombatantModel) => void;\n\tshowCharacterSheet: (combatant: CombatantModel) => void;\n\tendTurn: () => void;\n}\n\nexport class InactiveControls extends Component<Props> {\n\trender = () => {\n\t\ttry {\n\t\t\treturn (\n\t\t\t\t<div className='inactive-controls'>\n\t\t\t\t\t<CombatantRowPanel\n\t\t\t\t\t\tmode='header'\n\t\t\t\t\t\tcombatant={this.props.combatant}\n\t\t\t\t\t\tencounter={this.props.encounter}\n\t\t\t\t\t\tonTokenClick={this.props.showToken}\n\t\t\t\t\t\tonDetails={this.props.showCharacterSheet}\n\t\t\t\t\t/>\n\t\t\t\t\t<CombatantNotices combatant={this.props.combatant} />\n\t\t\t\t\t<button onClick={this.props.endTurn}>End Turn</button>\n\t\t\t\t</div>\n\t\t\t);\n\t\t}  catch {\n\t\t\treturn <div className='inactive-controls render-error' />;\n\t\t}\n\t};\n}\n","import { Component } from 'react';\n\nimport { CombatantLogic } from '../../../../logic/combatant-logic';\n\nimport type { CombatantModel } from '../../../../models/combatant';\nimport type { EncounterModel } from '../../../../models/encounter';\nimport type { OptionsModel } from '../../../../models/options';\n\nimport { CombatantNotices, CombatantRowPanel } from '../../../panels';\nimport { Expander, Text, TextType } from '../../../controls';\nimport { ActionCard } from '../../../cards';\nimport { ConditionsPanel } from '../../../panels/conditions/conditions-panel';\n\nimport './monster-controls.scss';\n\ninterface Props {\n\tcombatant: CombatantModel;\n\tencounter: EncounterModel;\n\toptions: OptionsModel;\n\tshowToken: (combatant: CombatantModel) => void;\n\tshowCharacterSheet: (combatant: CombatantModel) => void;\n\tswitchAllegiance: (combatant: CombatantModel) => void;\n\trunMonsterTurn: (encounter: EncounterModel, combatant: CombatantModel, onFinished: () => void) => void;\n}\n\ninterface State {\n\tthinking: boolean;\n}\n\nexport class MonsterControls extends Component<Props, State> {\n\tconstructor(props: Props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tthinking: false\n\t\t};\n\t}\n\n\tsetThinking = (value: boolean) => {\n\t\tthis.setState({\n\t\t\tthinking: value\n\t\t});\n\t};\n\n\trunMonsterTurn = () => {\n\t\tthis.setState({\n\t\t\tthinking: true\n\t\t}, () => {\n\t\t\tthis.props.runMonsterTurn(this.props.encounter, this.props.combatant, () => {\n\t\t\t\tthis.setState({\n\t\t\t\t\tthinking: false\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t};\n\n\trender = () => {\n\t\ttry {\n\t\t\tlet action = null;\n\t\t\tif (this.props.combatant.combat.selectedAction) {\n\t\t\t\taction = (\n\t\t\t\t\t<ActionCard\n\t\t\t\t\t\taction={this.props.combatant.combat.selectedAction.action}\n\t\t\t\t\t\tfooter={CombatantLogic.getActionSource(this.props.combatant, this.props.combatant.combat.selectedAction.action.id)}\n\t\t\t\t\t\tfooterType={CombatantLogic.getActionSourceType(this.props.combatant, this.props.combatant.combat.selectedAction.action.id)}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t}\n\n\t\t\treturn (\n\t\t\t\t<div className='monster-controls' key={this.props.combatant.id}>\n\t\t\t\t\t<CombatantRowPanel\n\t\t\t\t\t\tmode='header'\n\t\t\t\t\t\tcombatant={this.props.combatant}\n\t\t\t\t\t\tencounter={this.props.encounter}\n\t\t\t\t\t\tonTokenClick={this.props.showToken}\n\t\t\t\t\t\tonDetails={this.props.showCharacterSheet}\n\t\t\t\t\t/>\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.props.options.showTips ?\n\t\t\t\t\t\t\t<Expander\n\t\t\t\t\t\t\t\theader={\n\t\t\t\t\t\t\t\t\t<Text type={TextType.Tip}>It is {this.props.combatant.name}&apos;s turn.</Text>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tcontent={\n\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t<p>You can&apos;t control a monster directly; press the <b>Go</b> button and it will take its turn.</p>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t: null\n\t\t\t\t\t}\n\t\t\t\t\t<ConditionsPanel combatant={this.props.combatant} encounter={this.props.encounter} />\n\t\t\t\t\t<button disabled={this.state.thinking} onClick={this.runMonsterTurn}>{this.state.thinking ? 'Thinking' : 'Go'}</button>\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.props.options.developer ?\n\t\t\t\t\t\t\t<button className='developer' disabled={this.state.thinking} onClick={() => this.props.switchAllegiance(this.props.combatant)}>Switch Allegiance</button>\n\t\t\t\t\t\t\t: null\n\t\t\t\t\t}\n\t\t\t\t\t<div className='selected-action-card'>\n\t\t\t\t\t\t{action}\n\t\t\t\t\t</div>\n\t\t\t\t\t<CombatantNotices combatant={this.props.combatant} />\n\t\t\t\t</div>\n\t\t\t);\n\t\t}  catch {\n\t\t\treturn <div className='monster-controls render-error' />;\n\t\t}\n\t};\n}\n","import { Component } from 'react';\n\nimport { CombatantState } from '../../../../enums/combatant-state';\nimport { CombatantType } from '../../../../enums/combatant-type';\nimport { StructureType } from '../../../../enums/structure-type';\n\nimport { StrongholdLogic } from '../../../../logic/stronghold-logic';\n\nimport type { CombatantModel } from '../../../../models/combatant';\nimport type { EncounterModel } from '../../../../models/encounter';\nimport type { GameModel } from '../../../../models/game';\nimport type { OptionsModel } from '../../../../models/options';\n\nimport { Collections } from '../../../../utils/collections';\n\nimport { Box, Expander, StatValue, Text, TextType } from '../../../controls';\nimport { StrongholdBenefitCard } from '../../../cards';\n\nimport './round-controls.scss';\n\ninterface Props {\n\tencounter: EncounterModel;\n\tgame: GameModel;\n\toptions: OptionsModel;\n\trollInitiative: () => void;\n\tregenerateEncounterMap: () => void;\n\taddHeroToEncounter: (encounter: EncounterModel, hero: CombatantModel, useCharge: StructureType | null) => void;\n}\n\nexport class RoundControls extends Component<Props> {\n\taddHero = () => {\n\t\tconst hero = Collections.draw(this.props.game.heroes);\n\t\tthis.props.addHeroToEncounter(this.props.encounter, hero, this.props.options.developer ? null : StructureType.WarRoom);\n\t};\n\n\trender = () => {\n\t\ttry {\n\t\t\tconst heroesActive = this.props.encounter.combatants\n\t\t\t\t.filter(c => c.faction === CombatantType.Hero)\n\t\t\t\t.filter(c => (c.combat.state === CombatantState.Standing) || (c.combat.state === CombatantState.Prone)).length;\n\t\t\tconst heroesUnconscious = this.props.encounter.combatants\n\t\t\t\t.filter(c => c.faction === CombatantType.Hero)\n\t\t\t\t.filter(c => c.combat.state === CombatantState.Unconscious).length;\n\t\t\tconst heroesDead = this.props.encounter.combatants\n\t\t\t\t.filter(c => c.faction === CombatantType.Hero)\n\t\t\t\t.filter(c => c.combat.state === CombatantState.Dead).length;\n\t\t\tconst monstersActive = this.props.encounter.combatants\n\t\t\t\t.filter(c => c.faction === CombatantType.Monster)\n\t\t\t\t.filter(c => (c.combat.state === CombatantState.Standing) || (c.combat.state === CombatantState.Prone)).length;\n\t\t\tconst monstersUnconscious = this.props.encounter.combatants\n\t\t\t\t.filter(c => c.faction === CombatantType.Monster)\n\t\t\t\t.filter(c => c.combat.state === CombatantState.Unconscious).length;\n\t\t\tconst monstersDead = this.props.encounter.combatants\n\t\t\t\t.filter(c => c.faction === CombatantType.Monster)\n\t\t\t\t.filter(c => c.combat.state === CombatantState.Dead).length;\n\n\t\t\tconst stats = (\n\t\t\t\t<div className='encounter-stats'>\n\t\t\t\t\t<Box label='Heroes'>\n\t\t\t\t\t\t<StatValue orientation='vertical' label='Active' value={heroesActive} />\n\t\t\t\t\t\t<hr />\n\t\t\t\t\t\t<StatValue orientation='vertical' label='Unconscious' value={heroesUnconscious} />\n\t\t\t\t\t\t<hr />\n\t\t\t\t\t\t<StatValue orientation='vertical' label='Dead' value={heroesDead} />\n\t\t\t\t\t</Box>\n\t\t\t\t\t<Box label='Monsters'>\n\t\t\t\t\t\t<StatValue orientation='vertical' label='Active' value={monstersActive} />\n\t\t\t\t\t\t<hr />\n\t\t\t\t\t\t<StatValue orientation='vertical' label='Unconscious' value={monstersUnconscious} />\n\t\t\t\t\t\t<hr />\n\t\t\t\t\t\t<StatValue orientation='vertical' label='Dead' value={monstersDead} />\n\t\t\t\t\t</Box>\n\t\t\t\t</div>\n\t\t\t);\n\n\t\t\tlet benefit = null;\n\t\t\tif ((this.props.encounter.round > 0) && (this.props.game.heroes.length > 0)) {\n\t\t\t\tconst redraws = StrongholdLogic.getStructureCharges(this.props.game, StructureType.WarRoom);\n\t\t\t\tif ((redraws > 0) || this.props.options.developer) {\n\t\t\t\t\tbenefit = (\n\t\t\t\t\t\t<div className='benefits'>\n\t\t\t\t\t\t\t<StrongholdBenefitCard\n\t\t\t\t\t\t\t\tlabel='Add a Hero'\n\t\t\t\t\t\t\t\tavailable={redraws}\n\t\t\t\t\t\t\t\tdeveloper={this.props.options.developer}\n\t\t\t\t\t\t\t\tonUse={this.addHero}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn (\n\t\t\t\t<div className='round-controls'>\n\t\t\t\t\t<Text type={TextType.Heading}>Round {this.props.encounter.round + 1}</Text>\n\t\t\t\t\t{stats}\n\t\t\t\t\t{benefit}\n\t\t\t\t\t<hr />\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.props.options.showTips ?\n\t\t\t\t\t\t\t<Expander\n\t\t\t\t\t\t\t\theader={\n\t\t\t\t\t\t\t\t\t<Text type={TextType.Tip}>At the start of each turn, each combatant rolls initiative.</Text>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tcontent={\n\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t<p>This determines the order they will act in for this round - higher goes first.</p>\n\t\t\t\t\t\t\t\t\t\t<p>Initiative is calculated using a combatant&apos;s <b>Reactions</b> skill rank.</p>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t: null\n\t\t\t\t\t}\n\t\t\t\t\t<button className='primary' onClick={this.props.rollInitiative}>Roll Initiative</button>\n\t\t\t\t\t{this.props.options.developer ? <button className='developer' onClick={this.props.regenerateEncounterMap}>Regenerate Map</button> : null}\n\t\t\t\t</div>\n\t\t\t);\n\t\t} catch {\n\t\t\treturn <div className='round-controls render-error' />;\n\t\t}\n\t};\n}\n","import { Component, createRef } from 'react';\nimport {\n\tIconArrowBackUpDouble,\n\tIconConfetti,\n\tIconHelpCircle,\n\tIconHelpCircleFilled,\n\tIconLayoutBottombarCollapse,\n\tIconLayoutBottombarExpand,\n\tIconLayoutSidebarLeftCollapse,\n\tIconLayoutSidebarLeftExpand,\n\tIconRotate2,\n\tIconRotateClockwise2,\n\tIconZoomIn,\n\tIconZoomOut\n} from '@tabler/icons-react';\nimport toast, { Toast } from 'react-hot-toast';\n\nimport { ActionTargetType } from '../../../enums/action-target-type';\nimport { CardType } from '../../../enums/card-type';\nimport { CombatantState } from '../../../enums/combatant-state';\nimport { CombatantType } from '../../../enums/combatant-type';\nimport { EncounterState } from '../../../enums/encounter-state';\nimport { StructureType } from '../../../enums/structure-type';\n\nimport { ActionLogic } from '../../../logic/action-logic';\nimport { EncounterLogic } from '../../../logic/encounter-logic';\n\nimport type { ActionModel, ActionOriginParameterModel, ActionParameterModel, ActionTargetParameterModel } from '../../../models/action';\nimport type { EncounterModel, LootPileModel } from '../../../models/encounter';\nimport type { CombatantModel } from '../../../models/combatant';\nimport type { GameModel } from '../../../models/game';\nimport type { ItemModel } from '../../../models/item';\nimport type { OptionsModel } from '../../../models/options';\n\nimport { CardList, Dialog, IconSize, IconType, IconValue, PlayingCard, Text, TextType } from '../../controls';\nimport { CombatantRowPanel, EncounterMapPanel, InitiativeListPanel, TreasureRowPanel } from '../../panels';\nimport { ItemCard, PlaceholderCard } from '../../cards';\nimport { ActionControls } from './action-controls/action-controls';\nimport { CharacterSheetModal } from '../../modals';\nimport { EncounterControls } from './encounter-controls/encounter-controls';\nimport { HeroControls } from './hero-controls/hero-controls';\nimport { InactiveControls } from './inactive-controls/inactive-controls';\nimport { MonsterControls } from './monster-controls/monster-controls';\nimport { RoundControls } from './round-controls/round-controls';\n\nimport './encounter-screen.scss';\n\ninterface Props {\n\tencounter: EncounterModel;\n\tgame: GameModel;\n\toptions: OptionsModel;\n\thasExceptions: boolean;\n\tshowHelp: (file: string) => void;\n\trotateMap: (encounter: EncounterModel, dir: 'l' | 'r') => void;\n\trollInitiative: () => void;\n\tregenerateEncounterMap: () => void;\n\taddHeroToEncounter: (encounter: EncounterModel, hero: CombatantModel, useCharge: StructureType | null) => void;\n\tendTurn: (encounter: EncounterModel) => void;\n\tmove: (encounter: EncounterModel, combatant: CombatantModel, dir: string, cost: number) => void;\n\taddMovement: (encounter: EncounterModel, combatant: CombatantModel, value: number) => void;\n\tinspire: (encounter: EncounterModel, combatant: CombatantModel) => void;\n\tscan: (encounter: EncounterModel, combatant: CombatantModel) => void;\n\thide: (encounter: EncounterModel, combatant: CombatantModel) => void;\n\tdrinkPotion: (encounter: EncounterModel, owner: CombatantModel, drinker: CombatantModel, potion: ItemModel) => void;\n\tdrawActions: (encounter: EncounterModel, combatant: CombatantModel, useCharge: StructureType | null) => void;\n\tselectAction: (encounter: EncounterModel, combatant: CombatantModel, action: ActionModel) => void;\n\tdeselectAction: (encounter: EncounterModel, combatant: CombatantModel) => void;\n\tsetActionParameterValue: (parameter: ActionParameterModel, value: unknown) => void;\n\trunAction: (encounter: EncounterModel, combatant: CombatantModel) => void;\n\trunMonsterTurn: (encounter: EncounterModel, combatant: CombatantModel, onFinished: () => void) => void;\n\tequipItem: (item: ItemModel, combatant: CombatantModel) => void;\n\tunequipItem: (item: ItemModel, combatant: CombatantModel) => void;\n\tpickUpItem: (item: ItemModel, hero: CombatantModel) => void;\n\tdropItem: (item: ItemModel, combatant: CombatantModel) => void;\n\tuseCharge: (type: StructureType, count: number) => void;\n\tswitchAllegiance: (combatant: CombatantModel) => void;\n\tfinishEncounter: (state: EncounterState) => void;\n}\n\ninterface State {\n\tmapSquareSize: number;\n\tshowLeftPanel: boolean;\n\tshowBottomPanel: boolean;\n\tselectedActionParameter: ActionParameterModel | null;\n\tselectableCombatantIDs: string[];\n\tselectableLootIDs: string[];\n\tselectableSquares: { x: number, y: number }[];\n\tselectedCombatantIDs: string[];\n\tselectedLootIDs: string[];\n\tselectedSquares: { x: number, y: number }[];\n\tmanualEncounterState: EncounterState;\n\tdetailsCombatant: CombatantModel | null;\n\tdetailsLoot: LootPileModel | null;\n\tdetailsToast: Toast | null;\n}\n\nexport class EncounterScreen extends Component<Props, State> {\n\tconstructor(props: Props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tmapSquareSize: 15,\n\t\t\tshowLeftPanel: true,\n\t\t\tshowBottomPanel: true,\n\t\t\tselectedActionParameter: null,\n\t\t\tselectableCombatantIDs: [],\n\t\t\tselectableLootIDs: [],\n\t\t\tselectableSquares: [],\n\t\t\tselectedCombatantIDs: [],\n\t\t\tselectedLootIDs: [],\n\t\t\tselectedSquares: [],\n\t\t\tmanualEncounterState: EncounterState.Active,\n\t\t\tdetailsCombatant: null,\n\t\t\tdetailsLoot: null,\n\t\t\tdetailsToast: null\n\t\t};\n\t}\n\n\tcomponentDidMount = () => {\n\t\tEncounterLogic.handleLogMessage = (messages: string[]) => {\n\t\t\ttoast.custom(t => {\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\ttoast.dismiss(t.id);\n\t\t\t\t}, 5 * 1000);\n\t\t\t\treturn (\n\t\t\t\t\t<div key={t.id} className='skirmish-notification' onClick={e => { e.stopPropagation(); toast.dismiss(t.id); this.showDetailsToast(t); }}>\n\t\t\t\t\t\t{messages.map((str, n) => <div key={n}>{str}</div>)}\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t});\n\t\t};\n\t};\n\n\tcomponentWillUnmount = () => {\n\t\tEncounterLogic.handleLogMessage = null;\n\t};\n\n\tmapRef = createRef<EncounterMapPanel>();\n\n\tscrollToCombatant = (combatant: 'current' | 'selected') => {\n\t\tthis.mapRef.current?.scrollToCombatant(combatant);\n\t};\n\n\tnudgeMapSize = (delta: number) => {\n\t\tconst size = Math.max(this.state.mapSquareSize + delta, 5);\n\t\tthis.setState({\n\t\t\tmapSquareSize: size\n\t\t});\n\t};\n\n\ttoggleLeftPanel = () => {\n\t\tthis.setState({\n\t\t\tshowLeftPanel: !this.state.showLeftPanel\n\t\t});\n\t};\n\n\ttoggleBottomPanel = () => {\n\t\tthis.setState({\n\t\t\tshowBottomPanel: !this.state.showBottomPanel\n\t\t});\n\t};\n\n\tselectCombatant = (combatant: CombatantModel) => {\n\t\tconst parameter = this.state.selectedActionParameter;\n\t\tif (parameter) {\n\t\t\tlet usesCombatantIDs = false;\n\t\t\tlet count = Number.MAX_VALUE;\n\t\t\tswitch (parameter.id) {\n\t\t\t\tcase 'targets': {\n\t\t\t\t\tconst targetParam = parameter as ActionTargetParameterModel;\n\t\t\t\t\tif (targetParam.targets) {\n\t\t\t\t\t\tswitch (targetParam.targets.type) {\n\t\t\t\t\t\t\tcase ActionTargetType.Combatants:\n\t\t\t\t\t\t\tcase ActionTargetType.Enemies:\n\t\t\t\t\t\t\tcase ActionTargetType.Allies:\n\t\t\t\t\t\t\t\tusesCombatantIDs = true;\n\t\t\t\t\t\t\t\tcount = targetParam.targets.count;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (usesCombatantIDs) {\n\t\t\t\tlet ids = this.state.selectedCombatantIDs;\n\t\t\t\tif (ids.includes(combatant.id)) {\n\t\t\t\t\tids = ids.filter(id => id !== combatant.id);\n\t\t\t\t} else if (count === 1) {\n\t\t\t\t\tids = [ combatant.id ];\n\t\t\t\t} else if (ids.length < count) {\n\t\t\t\t\tids.push(combatant.id);\n\t\t\t\t}\n\n\t\t\t\tparameter.value = ids;\n\n\t\t\t\tthis.setState({\n\t\t\t\t\tselectedActionParameter: parameter,\n\t\t\t\t\tselectedCombatantIDs: ids,\n\t\t\t\t\tselectedLootIDs: [],\n\t\t\t\t\tselectedSquares: []\n\t\t\t\t}, () => {\n\t\t\t\t\tthis.props.setActionParameterValue(parameter, ids);\n\t\t\t\t});\n\t\t\t}\n\t\t} else {\n\t\t\tthis.setState({\n\t\t\t\tselectedActionParameter: parameter,\n\t\t\t\tselectedCombatantIDs: [ combatant.id ],\n\t\t\t\tselectedLootIDs: [],\n\t\t\t\tselectedSquares: []\n\t\t\t});\n\t\t}\n\t};\n\n\tselectLoot = (loot: LootPileModel) => {\n\t\tthis.setState({\n\t\t\tselectedCombatantIDs: [],\n\t\t\tselectedLootIDs: [ loot.id ],\n\t\t\tselectedSquares: []\n\t\t});\n\t};\n\n\tselectSquare = (square: { x: number, y: number }) => {\n\t\tconst parameter = this.state.selectedActionParameter;\n\t\tif (parameter) {\n\t\t\tlet usesSquares = false;\n\t\t\tlet count = Number.MAX_VALUE;\n\t\t\tswitch (parameter.id) {\n\t\t\t\tcase 'origin':\n\t\t\t\t\tusesSquares = true;\n\t\t\t\t\tcount = 1;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'targets': {\n\t\t\t\t\tconst targetParam = parameter as ActionTargetParameterModel;\n\t\t\t\t\tif (targetParam.targets) {\n\t\t\t\t\t\tswitch (targetParam.targets.type) {\n\t\t\t\t\t\t\tcase ActionTargetType.Squares:\n\t\t\t\t\t\t\tcase ActionTargetType.Walls:\n\t\t\t\t\t\t\t\tusesSquares = true;\n\t\t\t\t\t\t\t\tcount = targetParam.targets.count;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (usesSquares) {\n\t\t\t\tlet squares = this.state.selectedSquares;\n\t\t\t\tif (squares.find(s => (s.x === square.x) && (s.y === square.y))) {\n\t\t\t\t\tsquares = squares.filter(sq => !((sq.x === square.x) && (sq.y === square.y)));\n\t\t\t\t} else if (count === 1) {\n\t\t\t\t\tsquares = [ square ];\n\t\t\t\t} else if (squares.length < count) {\n\t\t\t\t\tsquares.push(square);\n\t\t\t\t}\n\n\t\t\t\tparameter.value = squares;\n\n\t\t\t\tif (parameter.id === 'origin') {\n\t\t\t\t\tconst combatant = this.props.encounter.combatants.find(c => c.combat.current) as CombatantModel;\n\t\t\t\t\tconst action = combatant.combat.selectedAction ? combatant.combat.selectedAction.action : null;\n\t\t\t\t\tif (action) {\n\t\t\t\t\t\tconst targetParam = action.parameters.find(a => a.id === 'targets') as ActionTargetParameterModel;\n\t\t\t\t\t\tActionLogic.checkTargetParameter(targetParam, this.props.encounter, combatant, action, false);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tthis.setState({\n\t\t\t\t\tselectedActionParameter: parameter,\n\t\t\t\t\tselectedCombatantIDs: [],\n\t\t\t\t\tselectedLootIDs: [],\n\t\t\t\t\tselectedSquares: squares\n\t\t\t\t}, () => {\n\t\t\t\t\tthis.props.setActionParameterValue(parameter, squares);\n\t\t\t\t});\n\t\t\t}\n\t\t} else {\n\t\t\tthis.setState({\n\t\t\t\tselectedActionParameter: parameter,\n\t\t\t\tselectedCombatantIDs: [],\n\t\t\t\tselectedLootIDs: [],\n\t\t\t\tselectedSquares: [ square ]\n\t\t\t});\n\t\t}\n\t};\n\n\tclearSelection = () => {\n\t\tif (this.state.selectedActionParameter) {\n\t\t\tthis.setState({\n\t\t\t\tselectedActionParameter: null,\n\t\t\t\tselectableCombatantIDs: [],\n\t\t\t\tselectableLootIDs: [],\n\t\t\t\tselectableSquares: []\n\t\t\t});\n\t\t} else {\n\t\t\tthis.setState({\n\t\t\t\tselectedCombatantIDs: [],\n\t\t\t\tselectedLootIDs: [],\n\t\t\t\tselectedSquares: []\n\t\t\t});\n\t\t}\n\t};\n\n\tsetManualEncounterState = (state: EncounterState) => {\n\t\tthis.setState({\n\t\t\tmanualEncounterState: state\n\t\t});\n\t};\n\n\tshowDetailsCombatant = (combatant: CombatantModel)=> {\n\t\tthis.setState({\n\t\t\tdetailsCombatant: combatant,\n\t\t\tdetailsLoot: null,\n\t\t\tdetailsToast: null\n\t\t});\n\t};\n\n\tshowDetailsLoot = (loot: LootPileModel) => {\n\t\tthis.setState({\n\t\t\tdetailsCombatant: null,\n\t\t\tdetailsLoot: loot,\n\t\t\tdetailsToast: null\n\t\t});\n\t};\n\n\tshowDetailsToast = (toast: Toast) => {\n\t\tthis.setState({\n\t\t\tdetailsCombatant: null,\n\t\t\tdetailsLoot: null,\n\t\t\tdetailsToast: toast\n\t\t});\n\t};\n\n\tclearDetails = () => {\n\t\tthis.setState({\n\t\t\tdetailsCombatant: null,\n\t\t\tdetailsLoot: null,\n\t\t\tdetailsToast: null\n\t\t});\n\t};\n\n\tmove = (encounter: EncounterModel, combatant: CombatantModel, dir: string, cost: number) => {\n\t\tthis.setState({\n\t\t\tselectedActionParameter: null,\n\t\t\tselectedSquares: []\n\t\t}, () => {\n\t\t\tthis.props.move(encounter, combatant, dir, cost);\n\t\t});\n\t};\n\n\tselectAction = (encounter: EncounterModel, combatant: CombatantModel, action: ActionModel) => {\n\t\tthis.setState({\n\t\t\tselectedCombatantIDs: [],\n\t\t\tselectedLootIDs: [],\n\t\t\tselectedSquares: []\n\t\t}, () => {\n\t\t\tthis.props.selectAction(encounter, combatant, action);\n\t\t});\n\t};\n\n\tsetActionParameter = (parameter: ActionParameterModel) => {\n\t\tif (this.state.selectedActionParameter !== null) {\n\t\t\tthis.setState({\n\t\t\t\tselectedActionParameter: null,\n\t\t\t\tselectableCombatantIDs: [],\n\t\t\t\tselectableLootIDs: [],\n\t\t\t\tselectableSquares: []\n\t\t\t});\n\t\t} else {\n\t\t\tlet selectableCombatantIDs: string[] = [];\n\t\t\tlet selectableSquares: { x: number, y: number }[] = [];\n\t\t\tlet selectedCombatantIDs: string[] = [];\n\t\t\tlet selectedSquares: { x: number, y: number }[] = [];\n\n\t\t\tswitch (parameter.id) {\n\t\t\t\tcase 'origin': {\n\t\t\t\t\tconst originParam = parameter as ActionOriginParameterModel;\n\t\t\t\t\tselectableSquares = originParam.candidates as { x: number, y: number }[] ?? [];\n\t\t\t\t\tselectedSquares = originParam.value as { x: number, y: number }[] ?? [];\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcase 'targets': {\n\t\t\t\t\tconst targetParam = parameter as ActionTargetParameterModel;\n\t\t\t\t\tif (targetParam.targets !== null) {\n\t\t\t\t\t\tswitch (targetParam.targets.type) {\n\t\t\t\t\t\t\tcase ActionTargetType.Combatants:\n\t\t\t\t\t\t\tcase ActionTargetType.Enemies:\n\t\t\t\t\t\t\tcase ActionTargetType.Allies:\n\t\t\t\t\t\t\t\tselectableCombatantIDs = targetParam.candidates as string[];\n\t\t\t\t\t\t\t\tselectedCombatantIDs = targetParam.value as string[];\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase ActionTargetType.Squares:\n\t\t\t\t\t\t\t\tselectableSquares = targetParam.candidates as { x: number, y: number }[] ?? [];\n\t\t\t\t\t\t\t\tselectedSquares = targetParam.value as { x: number, y: number }[] ?? [];\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase ActionTargetType.Walls:\n\t\t\t\t\t\t\t\tselectableSquares = targetParam.candidates as { x: number, y: number }[] ?? [];\n\t\t\t\t\t\t\t\tselectedSquares = targetParam.value as { x: number, y: number }[] ?? [];\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.setState({\n\t\t\t\tselectedActionParameter: parameter,\n\t\t\t\tselectableCombatantIDs: selectableCombatantIDs,\n\t\t\t\tselectableLootIDs: [],\n\t\t\t\tselectableSquares: selectableSquares,\n\t\t\t\tselectedCombatantIDs: selectedCombatantIDs,\n\t\t\t\tselectedLootIDs: [],\n\t\t\t\tselectedSquares: selectedSquares\n\t\t\t});\n\t\t}\n\t};\n\n\trunAction = (encounter: EncounterModel, combatant: CombatantModel) => {\n\t\tthis.setState({\n\t\t\tselectedActionParameter: null,\n\t\t\tselectableCombatantIDs: [],\n\t\t\tselectableLootIDs: [],\n\t\t\tselectableSquares: [],\n\t\t\tselectedSquares: []\n\t\t}, () => {\n\t\t\tthis.props.runAction(encounter, combatant);\n\t\t});\n\t};\n\n\tendTurn = () => {\n\t\tthis.setState({\n\t\t\tselectedActionParameter: null,\n\t\t\tselectableSquares: [],\n\t\t\tselectedSquares: []\n\t\t}, () => {\n\t\t\tthis.props.endTurn(this.props.encounter);\n\t\t});\n\t};\n\n\tgetLeftControls = () => {\n\t\tif (this.state.showLeftPanel) {\n\t\t\treturn (\n\t\t\t\t<div className='encounter-left-column'>\n\t\t\t\t\t<InitiativeListPanel\n\t\t\t\t\t\tencounter={this.props.encounter}\n\t\t\t\t\t\tselectedIDs={this.state.selectedCombatantIDs}\n\t\t\t\t\t\tonSelect={this.selectCombatant}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\n\t\treturn null;\n\t};\n\n\tgetTopControls = () => {\n\t\tlet state = this.state.manualEncounterState;\n\t\tif (state === EncounterState.Active) {\n\t\t\tstate = EncounterLogic.getEncounterState(this.props.encounter);\n\t\t}\n\n\t\tif (state !== EncounterState.Active) {\n\t\t\treturn (\n\t\t\t\t<div className='encounter-top-panel' />\n\t\t\t);\n\t\t}\n\n\t\tif (this.state.selectedCombatantIDs.length === 1) {\n\t\t\tconst combatant = EncounterLogic.getCombatant(this.props.encounter, this.state.selectedCombatantIDs[0]);\n\t\t\tif (combatant) {\n\t\t\t\treturn (\n\t\t\t\t\t<CombatantRowPanel\n\t\t\t\t\t\tmode='detailed'\n\t\t\t\t\t\tcombatant={combatant}\n\t\t\t\t\t\tencounter={this.props.encounter}\n\t\t\t\t\t\tonTokenClick={() => this.scrollToCombatant('selected')}\n\t\t\t\t\t\tonDetails={this.showDetailsCombatant}\n\t\t\t\t\t\tonCancel={this.clearSelection}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\tif (this.state.selectedLootIDs.length === 1) {\n\t\t\tconst loot = EncounterLogic.getLoot(this.props.encounter, this.state.selectedLootIDs[0]);\n\t\t\tif (loot) {\n\t\t\t\treturn (\n\t\t\t\t\t<TreasureRowPanel loot={loot} onDetails={this.showDetailsLoot} onCancel={this.clearSelection} />\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\treturn (\n\t\t\t<div className='encounter-top-panel'>\n\t\t\t\t<div className='icon-section'>\n\t\t\t\t\t<button className='icon-btn' title='Left Sidebar' onClick={() => this.toggleLeftPanel()}>\n\t\t\t\t\t\t{this.state.showLeftPanel ? <IconLayoutSidebarLeftCollapse /> : <IconLayoutSidebarLeftExpand />}\n\t\t\t\t\t</button>\n\t\t\t\t\t<button className='icon-btn' title='Action Cards' onClick={() => this.toggleBottomPanel()}>\n\t\t\t\t\t\t{this.state.showBottomPanel ? <IconLayoutBottombarCollapse /> : <IconLayoutBottombarExpand />}\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t\t<div className='icon-section'>\n\t\t\t\t\t<button className='icon-btn' title='Rotate Left' onClick={() => this.props.rotateMap(this.props.encounter, 'l')}>\n\t\t\t\t\t\t<IconRotate2 />\n\t\t\t\t\t</button>\n\t\t\t\t\t<button className='icon-btn' title='Rotate Right' onClick={() => this.props.rotateMap(this.props.encounter, 'r')}>\n\t\t\t\t\t\t<IconRotateClockwise2 />\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t\t<div className='icon-section'>\n\t\t\t\t\t<button disabled={this.state.mapSquareSize <= 5} className='icon-btn' title='Zoom Out' onClick={() => this.nudgeMapSize(-5)}>\n\t\t\t\t\t\t<IconZoomOut />\n\t\t\t\t\t</button>\n\t\t\t\t\t<button disabled={this.state.mapSquareSize >= 50} className='icon-btn' title='Zoom In' onClick={() => this.nudgeMapSize(+5)}>\n\t\t\t\t\t\t<IconZoomIn />\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t\t<div className='icon-section'>\n\t\t\t\t\t<button className='icon-btn' title='Retreat' onClick={() => this.setManualEncounterState(EncounterState.Retreat)}>\n\t\t\t\t\t\t<IconArrowBackUpDouble />\n\t\t\t\t\t</button>\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.props.options.developer ?\n\t\t\t\t\t\t\t<button className='icon-btn developer' title='Win' onClick={() => this.setManualEncounterState(EncounterState.Victory)}>\n\t\t\t\t\t\t\t\t<IconConfetti />\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t: null\n\t\t\t\t\t}\n\t\t\t\t</div>\n\t\t\t\t<div className='icon-section'>\n\t\t\t\t\t<button className='icon-btn' title='Help' onClick={() => this.props.showHelp('encounters')}>\n\t\t\t\t\t\t{this.props.options.developer && this.props.hasExceptions ? <IconHelpCircleFilled /> : <IconHelpCircle />}\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t};\n\n\tgetBottomControls = () => {\n\t\tlet state = this.state.manualEncounterState;\n\t\tif (state === EncounterState.Active) {\n\t\t\tstate = EncounterLogic.getEncounterState(this.props.encounter);\n\t\t}\n\n\t\tif (state !== EncounterState.Active) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst currentCombatant = EncounterLogic.getActiveCombatants(this.props.encounter).find(c => c.combat.current) || null;\n\t\tif (currentCombatant && (currentCombatant.faction === CombatantType.Hero) && !currentCombatant.combat.stunned) {\n\t\t\treturn (\n\t\t\t\t<div className='encounter-bottom-panel'>\n\t\t\t\t\t<ActionControls\n\t\t\t\t\t\tcombatant={currentCombatant}\n\t\t\t\t\t\tencounter={this.props.encounter}\n\t\t\t\t\t\tgame={this.props.game}\n\t\t\t\t\t\tdeveloper={this.props.options.developer}\n\t\t\t\t\t\tcurrentActionParameter={this.state.selectedActionParameter}\n\t\t\t\t\t\tcollapsed={!this.state.showBottomPanel}\n\t\t\t\t\t\tdrawActions={this.props.drawActions}\n\t\t\t\t\t\tselectAction={this.selectAction}\n\t\t\t\t\t\tdeselectAction={this.props.deselectAction}\n\t\t\t\t\t\tsetActionParameter={this.setActionParameter}\n\t\t\t\t\t\tsetActionParameterValue={this.setActionParameter}\n\t\t\t\t\t\trunAction={this.runAction}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\n\t\treturn null;\n\t};\n\n\tgetRightControls = () => {\n\t\tlet state = this.state.manualEncounterState;\n\t\tif (state === EncounterState.Active) {\n\t\t\tstate = EncounterLogic.getEncounterState(this.props.encounter);\n\t\t}\n\t\tif (state !== EncounterState.Active) {\n\t\t\treturn (\n\t\t\t\t<EncounterControls\n\t\t\t\t\tencounter={this.props.encounter}\n\t\t\t\t\tgame={this.props.game}\n\t\t\t\t\toptions={this.props.options}\n\t\t\t\t\tstate={state}\n\t\t\t\t\tsetEncounterState={this.setManualEncounterState}\n\t\t\t\t\tfinishEncounter={this.props.finishEncounter}\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\n\t\tconst currentCombatant = EncounterLogic.getActiveCombatants(this.props.encounter).find(c => c.combat.current) || null;\n\t\tif (currentCombatant !== null) {\n\t\t\tconst unconscious = currentCombatant.combat.state === CombatantState.Unconscious;\n\t\t\tconst dead = currentCombatant.combat.state === CombatantState.Dead;\n\t\t\tconst stunned = currentCombatant.combat.stunned;\n\t\t\tif (unconscious || dead || stunned) {\n\t\t\t\treturn (\n\t\t\t\t\t<InactiveControls\n\t\t\t\t\t\tcombatant={currentCombatant}\n\t\t\t\t\t\tencounter={this.props.encounter}\n\t\t\t\t\t\toptions={this.props.options}\n\t\t\t\t\t\tshowToken={() => this.scrollToCombatant('current')}\n\t\t\t\t\t\tshowCharacterSheet={this.showDetailsCombatant}\n\t\t\t\t\t\tendTurn={this.endTurn}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif (currentCombatant.faction === CombatantType.Monster) {\n\t\t\t\treturn (\n\t\t\t\t\t<MonsterControls\n\t\t\t\t\t\tcombatant={currentCombatant}\n\t\t\t\t\t\tencounter={this.props.encounter}\n\t\t\t\t\t\toptions={this.props.options}\n\t\t\t\t\t\tshowToken={() => this.scrollToCombatant('current')}\n\t\t\t\t\t\tshowCharacterSheet={this.showDetailsCombatant}\n\t\t\t\t\t\tswitchAllegiance={this.props.switchAllegiance}\n\t\t\t\t\t\trunMonsterTurn={this.props.runMonsterTurn}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t}\n\n\t\t\treturn (\n\t\t\t\t<HeroControls\n\t\t\t\t\tcombatant={currentCombatant}\n\t\t\t\t\tencounter={this.props.encounter}\n\t\t\t\t\toptions={this.props.options}\n\t\t\t\t\tshowToken={() => this.scrollToCombatant('current')}\n\t\t\t\t\tshowCharacterSheet={this.showDetailsCombatant}\n\t\t\t\t\tmove={this.move}\n\t\t\t\t\taddMovement={this.props.addMovement}\n\t\t\t\t\tinspire={this.props.inspire}\n\t\t\t\t\tscan={this.props.scan}\n\t\t\t\t\thide={this.props.hide}\n\t\t\t\t\tswitchAllegiance={this.props.switchAllegiance}\n\t\t\t\t\tdrinkPotion={this.props.drinkPotion}\n\t\t\t\t\tendTurn={this.endTurn}\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\n\t\treturn (\n\t\t\t<RoundControls\n\t\t\t\tencounter={this.props.encounter}\n\t\t\t\tgame={this.props.game}\n\t\t\t\toptions={this.props.options}\n\t\t\t\trollInitiative={this.props.rollInitiative}\n\t\t\t\tregenerateEncounterMap={this.props.regenerateEncounterMap}\n\t\t\t\taddHeroToEncounter={this.props.addHeroToEncounter}\n\t\t\t/>\n\t\t);\n\t};\n\n\trender = () => {\n\t\ttry {\n\t\t\tlet dialog = null;\n\t\t\tif (this.state.detailsCombatant) {\n\t\t\t\tdialog = (\n\t\t\t\t\t<Dialog\n\t\t\t\t\t\tcontent={\n\t\t\t\t\t\t\t<CharacterSheetModal\n\t\t\t\t\t\t\t\tcombatant={this.state.detailsCombatant}\n\t\t\t\t\t\t\t\tgame={this.props.game}\n\t\t\t\t\t\t\t\tdeveloper={this.props.options.developer}\n\t\t\t\t\t\t\t\tequipItem={this.props.equipItem}\n\t\t\t\t\t\t\t\tunequipItem={this.props.unequipItem}\n\t\t\t\t\t\t\t\tpickUpItem={this.props.pickUpItem}\n\t\t\t\t\t\t\t\tdropItem={this.props.dropItem}\n\t\t\t\t\t\t\t\tlevelUp={() => null}\n\t\t\t\t\t\t\t\tretireHero={() => null}\n\t\t\t\t\t\t\t\taddXP={() => null}\n\t\t\t\t\t\t\t\tuseCharge={this.props.useCharge}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonClose={() => this.clearDetails()}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t}\n\t\t\tif (this.state.detailsLoot) {\n\t\t\t\tconst cards = this.state.detailsLoot.items.map(i => <ItemCard key={i.id} item={i} />);\n\t\t\t\tif (this.state.detailsLoot.money > 0) {\n\t\t\t\t\tcards.push(\n\t\t\t\t\t\t<PlayingCard\n\t\t\t\t\t\t\ttype={CardType.Item}\n\t\t\t\t\t\t\tfront={\n\t\t\t\t\t\t\t\t<PlaceholderCard\n\t\t\t\t\t\t\t\t\tcontent={\n\t\t\t\t\t\t\t\t\t\t<div className='treasure-money'>\n\t\t\t\t\t\t\t\t\t\t\t<IconValue\n\t\t\t\t\t\t\t\t\t\t\t\ttype={IconType.Money}\n\t\t\t\t\t\t\t\t\t\t\t\tvalue={this.state.detailsLoot.money}\n\t\t\t\t\t\t\t\t\t\t\t\tsize={IconSize.Large}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tfooterText='Money'\n\t\t\t\t\t\t/>\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tdialog = (\n\t\t\t\t\t<Dialog\n\t\t\t\t\t\tcontent={\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<Text type={TextType.Heading}>Treasure</Text>\n\t\t\t\t\t\t\t\t<hr />\n\t\t\t\t\t\t\t\t<CardList cards={cards} />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonClose={() => this.clearDetails()}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t}\n\t\t\tif (this.state.detailsToast) {\n\t\t\t\tconst fn = this.state.detailsToast.message as (t: Toast) => object;\n\t\t\t\t// eslint-disable-next-line @typescript-eslint/no-explicit-any\n\t\t\t\tconst lines: string[] = (fn(this.state.detailsToast) as any).props.children.map((n: any) => n.props.children);\n\t\t\t\tdialog = (\n\t\t\t\t\t<Dialog\n\t\t\t\t\t\tcontent={\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t{lines.map((l, n) => <Text key={n}>{l}</Text>)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonClose={() => this.clearDetails()}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t}\n\n\t\t\treturn (\n\t\t\t\t<div className='encounter-screen'>\n\t\t\t\t\t{this.getLeftControls()}\n\t\t\t\t\t<div className='encounter-central-column'>\n\t\t\t\t\t\t{this.getTopControls()}\n\t\t\t\t\t\t<div className='encounter-center-panel'>\n\t\t\t\t\t\t\t<EncounterMapPanel\n\t\t\t\t\t\t\t\tref={this.mapRef}\n\t\t\t\t\t\t\t\tencounter={this.props.encounter}\n\t\t\t\t\t\t\t\tsquareSize={this.state.mapSquareSize}\n\t\t\t\t\t\t\t\tselectableCombatantIDs={this.state.selectableCombatantIDs}\n\t\t\t\t\t\t\t\tselectableLootIDs={this.state.selectableLootIDs}\n\t\t\t\t\t\t\t\tselectableSquares={this.state.selectableSquares}\n\t\t\t\t\t\t\t\tselectedCombatantIDs={this.state.selectedCombatantIDs}\n\t\t\t\t\t\t\t\tselectedLootIDs={this.state.selectedLootIDs}\n\t\t\t\t\t\t\t\tselectedSquares={this.state.selectedSquares}\n\t\t\t\t\t\t\t\tonClickCombatant={this.selectCombatant}\n\t\t\t\t\t\t\t\tonClickLoot={this.selectLoot}\n\t\t\t\t\t\t\t\tonClickSquare={this.selectSquare}\n\t\t\t\t\t\t\t\tonClickOff={this.clearSelection}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{this.getBottomControls()}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className='encounter-right-column'>\n\t\t\t\t\t\t{this.getRightControls()}\n\t\t\t\t\t</div>\n\t\t\t\t\t{dialog}\n\t\t\t\t</div>\n\t\t\t);\n\t\t} catch {\n\t\t\treturn <div className='encounter-screen render-error' />;\n\t\t}\n\t};\n}\n","import { Component } from 'react';\nimport { IconCards } from '@tabler/icons-react';\n\nimport { CardType } from '../../../enums/card-type';\n\nimport { PackLogic } from '../../../logic/pack-logic';\n\nimport type { GameModel } from '../../../models/game';\nimport type { OptionsModel } from '../../../models/options';\n\nimport { PlayingCard, Tag, Text } from '../../controls';\nimport { PlaceholderCard } from '../../cards';\n\nimport './landing-screen.scss';\n\nimport logo from '../../../assets/images/logo.png';\nimport pkg from '../../../../package.json';\n\ninterface Props {\n\tgame: GameModel | null;\n\toptions: OptionsModel;\n\tstartCampaign: () => void;\n\tcontinueCampaign: () => void;\n\tshowPacks: () => void;\n}\n\nexport class LandingScreen extends Component<Props> {\n\trender = () => {\n\t\ttry {\n\t\t\tlet mainBtn = null;\n\t\t\tif (this.props.game) {\n\t\t\t\tmainBtn = (\n\t\t\t\t\t<PlayingCard\n\t\t\t\t\t\ttype={CardType.Role}\n\t\t\t\t\t\tstack={true}\n\t\t\t\t\t\tfront={\n\t\t\t\t\t\t\t<PlaceholderCard\n\t\t\t\t\t\t\t\ttext='Continue'\n\t\t\t\t\t\t\t\tsubtext='Click here to continue your campaign.'\n\t\t\t\t\t\t\t\tcontent={<img className='logo' alt='Logo' src={logo} />}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonClick={this.props.continueCampaign}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tmainBtn = (\n\t\t\t\t\t<PlayingCard\n\t\t\t\t\t\ttype={CardType.Role}\n\t\t\t\t\t\tstack={true}\n\t\t\t\t\t\tfront={\n\t\t\t\t\t\t\t<PlaceholderCard\n\t\t\t\t\t\t\t\ttext='Start'\n\t\t\t\t\t\t\t\tsubtext='Click here to begin a new campaign.'\n\t\t\t\t\t\t\t\tcontent={<img className='logo' alt='Logo' src={logo} />}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonClick={this.props.startCampaign}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tlet packsBtn = null;\n\t\t\tconst availablePacks = PackLogic.getPacks().filter(p => !this.props.options.packIDs.includes(p.id)).length;\n\t\t\tif (availablePacks > 0) {\n\t\t\t\tpacksBtn = (\n\t\t\t\t\t<button className='packs-btn' onClick={() => this.props.showPacks()}>\n\t\t\t\t\t\t{`${availablePacks} card pack${availablePacks === 1 ? '' : 's'} available`}\n\t\t\t\t\t\t<IconCards />\n\t\t\t\t\t</button>\n\t\t\t\t);\n\t\t\t}\n\n\t\t\treturn (\n\t\t\t\t<div className='landing-screen'>\n\t\t\t\t\t<div className='landing-top-bar'>\n\t\t\t\t\t\t<div className='logo-text inset-text'>Skirmish</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className='landing-content'>\n\t\t\t\t\t\t<Text>\n\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\tSkirmish is a tactical battle game in which you control a band of heroes, each represented by a stack of cards.\n\t\t\t\t\t\t\t\tYour objective is to gain control of an island.\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\tThis island, however, is populated by monstrous enemies which you will have to defeat in a series of encounters.\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\tSome parts of the island might be easier to control than others, but each region will provide you with some reward for conquering it.\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\tAs you gain control over more and more of the island your heroes will become more powerful,\n\t\t\t\t\t\t\t\tand you&apos;ll pick up allies and magic items which will help you in your encounters.\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\tGood luck!\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</Text>\n\t\t\t\t\t\t<div className='action-buttons'>\n\t\t\t\t\t\t\t{mainBtn}\n\t\t\t\t\t\t\t{packsBtn}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className='landing-footer'>\n\t\t\t\t\t\t<Tag>Version {pkg.version}</Tag>\n\t\t\t\t\t\t<Tag>© Andy Aiken 2023</Tag>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t);\n\t\t} catch {\n\t\t\treturn <div className='landing-screen render-error' />;\n\t\t}\n\t};\n}\n","import { Component } from 'react';\nimport { IconCards } from '@tabler/icons-react';\n\nimport { CardType } from '../../../enums/card-type';\nimport { CombatantType } from '../../../enums/combatant-type';\n\nimport { NameGenerator } from '../../../generators/name-generator';\n\nimport { CombatantLogic } from '../../../logic/combatant-logic';\nimport { Factory } from '../../../logic/factory';\nimport { GameLogic } from '../../../logic/game-logic';\nimport { PackLogic } from '../../../logic/pack-logic';\n\nimport type { CombatantModel } from '../../../models/combatant';\nimport type { GameModel } from '../../../models/game';\nimport type { ItemModel } from '../../../models/item';\nimport type { OptionsModel } from '../../../models/options';\n\nimport { Collections } from '../../../utils/collections';\nimport { Random } from '../../../utils/random';\n\nimport { CharacterSheetModal, HeroBuilderModal } from '../../modals';\nimport { Dialog, Expander, PlayingCard, Text, TextType } from '../../controls';\nimport { CombatantRowPanel } from '../../panels';\nimport { PlaceholderCard } from '../../cards';\n\nimport './setup-screen.scss';\n\nimport logo from '../../../assets/images/logo.png';\n\ninterface Props {\n\tgame: GameModel;\n\toptions: OptionsModel;\n\taddHero: (hero: CombatantModel) => void;\n\taddHeroes: (heroes: CombatantModel[]) => void;\n\tequipItem: (item: ItemModel, hero: CombatantModel) => void;\n\tunequipItem: (item: ItemModel, hero: CombatantModel) => void;\n\tpickUpItem: (item: ItemModel, hero: CombatantModel) => void;\n\tdropItem: (item: ItemModel, hero: CombatantModel) => void;\n\tshowPacks: () => void;\n\tbeginCampaign: () => void;\n}\n\ninterface State {\n\thero: CombatantModel | null;\n}\n\nexport class SetupScreen extends Component<Props, State> {\n\tconstructor(props: Props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\thero: null\n\t\t};\n\t}\n\n\tcreateHero = () => {\n\t\tthis.setState({\n\t\t\thero: Factory.createCombatant(CombatantType.Hero)\n\t\t});\n\t};\n\n\tcreateHeroes = () => {\n\t\tlet speciesDeck = GameLogic.getHeroSpeciesDeck(this.props.options.packIDs).map(s => s.id);\n\t\tlet roleDeck = GameLogic.getRoleDeck(this.props.options.packIDs).map(r => r.id);\n\t\tlet backgroundDeck = GameLogic.getBackgroundDeck(this.props.options.packIDs).map(b => b.id);\n\n\t\tconst heroes: CombatantModel[] = [];\n\t\tconst needed = 5 - this.props.game.heroes.length;\n\t\twhile (heroes.length < needed) {\n\t\t\tconst color = Random.randomColor(20, 180);\n\t\t\tconst hero = Factory.createCombatant(CombatantType.Hero);\n\t\t\thero.name = NameGenerator.generateName();\n\t\t\thero.color = `rgb(${color.r}, ${color.g}, ${color.b})`;\n\n\t\t\tconst speciesID = Collections.draw(speciesDeck);\n\t\t\tspeciesDeck = speciesDeck.filter(s => s !== speciesID);\n\t\t\tconst roleID = Collections.draw(roleDeck);\n\t\t\troleDeck = roleDeck.filter(r => r !== roleID);\n\t\t\tconst backgroundID = Collections.draw(backgroundDeck);\n\t\t\tbackgroundDeck = backgroundDeck.filter(b => b !== backgroundID);\n\n\t\t\tCombatantLogic.applyCombatantCards(hero, speciesID, roleID, backgroundID);\n\t\t\tCombatantLogic.addItems(hero, this.props.options.packIDs);\n\n\t\t\theroes.push(hero);\n\t\t}\n\n\t\tthis.props.addHeroes(heroes);\n\t};\n\n\tselectHero = (hero: CombatantModel | null) => {\n\t\tthis.setState({\n\t\t\thero: hero\n\t\t});\n\t};\n\n\tgetDialog = () => {\n\t\tif (!this.state.hero) {\n\t\t\treturn null;\n\t\t}\n\n\t\tif (this.state.hero.name === '') {\n\t\t\treturn (\n\t\t\t\t<Dialog\n\t\t\t\t\tcontent={(\n\t\t\t\t\t\t<HeroBuilderModal\n\t\t\t\t\t\t\thero={this.state.hero}\n\t\t\t\t\t\t\tgame={this.props.game}\n\t\t\t\t\t\t\toptions={this.props.options}\n\t\t\t\t\t\t\tuseCharge={() => null}\n\t\t\t\t\t\t\tfinished={hero => {\n\t\t\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\t\t\thero: null\n\t\t\t\t\t\t\t\t}, () => {\n\t\t\t\t\t\t\t\t\tthis.props.addHero(hero);\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\n\t\treturn (\n\t\t\t<Dialog\n\t\t\t\tcontent={\n\t\t\t\t\t<CharacterSheetModal\n\t\t\t\t\t\tcombatant={this.state.hero}\n\t\t\t\t\t\tgame={this.props.game}\n\t\t\t\t\t\tdeveloper={this.props.options.developer}\n\t\t\t\t\t\tequipItem={this.props.equipItem}\n\t\t\t\t\t\tunequipItem={this.props.unequipItem}\n\t\t\t\t\t\tpickUpItem={this.props.pickUpItem}\n\t\t\t\t\t\tdropItem={this.props.dropItem}\n\t\t\t\t\t\tlevelUp={() => null}\n\t\t\t\t\t\tretireHero={() => null}\n\t\t\t\t\t\taddXP={() => null}\n\t\t\t\t\t\tuseCharge={() => null}\n\t\t\t\t\t/>\n\t\t\t\t}\n\t\t\t\tonClose={() => this.selectHero(null)}\n\t\t\t/>\n\t\t);\n\t};\n\n\trender = () => {\n\t\ttry {\n\t\t\tconst heroes = this.props.game.heroes.map(h => <CombatantRowPanel key={h.id} combatant={h} onDetails={this.selectHero} />);\n\t\t\tif (heroes.length < 5) {\n\t\t\t\theroes.push(\n\t\t\t\t\t<div key='add' className='empty-panel'>\n\t\t\t\t\t\t<button className='primary' onClick={this.createHero}>Recruit a Hero</button>\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t}\n\t\t\twhile (heroes.length < 5) {\n\t\t\t\theroes.push(\n\t\t\t\t\t<div key={heroes.length} className='empty-panel' />\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tlet packsBtn = null;\n\t\t\tconst availablePacks = PackLogic.getPacks().filter(p => !this.props.options.packIDs.includes(p.id)).length;\n\t\t\tif (availablePacks > 0) {\n\t\t\t\tpacksBtn = (\n\t\t\t\t\t<button className='packs-btn' onClick={() => this.props.showPacks()}>\n\t\t\t\t\t\t{`${availablePacks} card pack${availablePacks === 1 ? '' : 's'} available`}\n\t\t\t\t\t\t<IconCards />\n\t\t\t\t\t</button>\n\t\t\t\t);\n\t\t\t}\n\n\t\t\treturn (\n\t\t\t\t<div className='setup-screen'>\n\t\t\t\t\t<div className='setup-top-bar'>\n\t\t\t\t\t\t<div className='logo-text inset-text'>Skirmish</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className='setup-content'>\n\t\t\t\t\t\t<div className='center-panel'>\n\t\t\t\t\t\t\t{heroes}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className='right-panel'>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tthis.props.options.showTips ?\n\t\t\t\t\t\t\t\t\t<Expander\n\t\t\t\t\t\t\t\t\t\theader={\n\t\t\t\t\t\t\t\t\t\t\t<Text type={TextType.Tip}>When you see a box like this, you can tap it to show more information.</Text>\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tcontent={\n\t\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t\t<p>We&apos;ll use these boxes to explain how to play the game.</p>\n\t\t\t\t\t\t\t\t\t\t\t\t<p>You can tap it again to close it.</p>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t: null\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tthis.props.game.heroes.length >= 5 ?\n\t\t\t\t\t\t\t\t\t<PlayingCard\n\t\t\t\t\t\t\t\t\t\ttype={CardType.Role}\n\t\t\t\t\t\t\t\t\t\tstack={true}\n\t\t\t\t\t\t\t\t\t\tfront={<PlaceholderCard text='Begin the Campaign' content={<img className='logo' alt='Logo' src={logo} />} />}\n\t\t\t\t\t\t\t\t\t\tonClick={this.props.beginCampaign}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t<Text type={TextType.Information}>\n\t\t\t\t\t\t\t\t\t\t<p><b>Recruit your team.</b> These five heroes will begin the task of conquering the island.</p>\n\t\t\t\t\t\t\t\t\t</Text>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t{this.props.options.developer && (this.props.game.heroes.length < 5) ? <button onClick={this.createHeroes}>Randomize</button> : null}\n\t\t\t\t\t\t\t{packsBtn}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t{this.getDialog()}\n\t\t\t\t</div>\n\t\t\t);\n\t\t} catch {\n\t\t\treturn <div className='setup-screen render-error' />;\n\t\t}\n\t};\n}\n","import { Component } from 'react';\nimport { Toaster } from 'react-hot-toast';\n\nimport { BoonType } from '../../enums/boon-type';\nimport { CombatantState } from '../../enums/combatant-state';\nimport { CombatantType } from '../../enums/combatant-type';\nimport { EncounterState } from '../../enums/encounter-state';\nimport { StructureType } from '../../enums/structure-type';\n\nimport { CampaignMapGenerator } from '../../generators/campaign-map-generator';\nimport { EncounterGenerator } from '../../generators/encounter-generator';\nimport { EncounterMapGenerator } from '../../generators/encounter-map-generator';\n\nimport { CampaignMapLogic } from '../../logic/campaign-map-logic';\nimport { CombatantLogic } from '../../logic/combatant-logic';\nimport { ConditionLogic } from '../../logic/condition-logic';\nimport { EncounterLogic } from '../../logic/encounter-logic';\nimport { EncounterMapLogic } from '../../logic/encounter-map-logic';\nimport { Factory } from '../../logic/factory';\nimport { GameLogic } from '../../logic/game-logic';\nimport { IntentsLogic } from '../../logic/intents-logic';\nimport { StrongholdLogic } from '../../logic/stronghold-logic';\n\nimport type { ActionModel, ActionParameterModel } from '../../models/action';\nimport type { BoonModel } from '../../models/boon';\nimport type { CombatantModel } from '../../models/combatant';\nimport type { ConditionModel } from '../../models/condition';\nimport type { EncounterModel } from '../../models/encounter';\nimport type { FeatureModel } from '../../models/feature';\nimport type { GameModel } from '../../models/game';\nimport type { ItemModel } from '../../models/item';\nimport type { OptionsModel } from '../../models/options';\nimport type { PackModel } from '../../models/pack';\nimport type { RegionModel } from '../../models/region';\nimport type { StructureModel } from '../../models/structure';\n\nimport type { Platform } from '../../platform/platform';\n\nimport { Collections } from '../../utils/collections';\nimport { Sound } from '../../utils/sound';\nimport { Utils } from '../../utils/utils';\n\nimport { CampaignScreen, EncounterScreen, LandingScreen, SetupScreen } from '../screens';\nimport { Dialog, PlayingCard, Text, TextType } from '../controls';\nimport { HelpModal, PacksModal } from '../modals';\nimport { PlaceholderCard } from '../cards';\n\nimport './main.scss';\n\nimport encounters from '../../assets/docs/encounters.md';\nimport island from '../../assets/docs/island.md';\nimport items from '../../assets/docs/items.md';\nimport stronghold from '../../assets/docs/stronghold.md';\nimport team from '../../assets/docs/team.md';\n\nimport dong from '../../assets/sounds/dong.mp3';\n\nconst rules: Record<string, string> = {};\n\nenum ScreenType {\n\tLanding = 'landing',\n\tSetup = 'setup',\n\tCampaign = 'campaign',\n\tEncounter = 'encounter'\n}\n\ninterface Props {\n\tgame: GameModel | null;\n\toptions: OptionsModel;\n\tplatform: Platform;\n}\n\ninterface State {\n\tgame: GameModel | null;\n\toptions: OptionsModel;\n\tscreen: ScreenType;\n\tshowHelp: string | null;\n\tshowPacks: boolean;\n\tdialog: JSX.Element | null;\n\texceptions: string[];\n}\n\nexport class Main extends Component<Props, State> {\n\tconstructor(props: Props) {\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tgame: props.game,\n\t\t\toptions: props.options,\n\t\t\tscreen: ScreenType.Landing,\n\t\t\tshowHelp: null,\n\t\t\tshowPacks: false,\n\t\t\tdialog: null,\n\t\t\texceptions: []\n\t\t};\n\n\t\tthis.props.platform.getGame = () => this.state.game;\n\t\tthis.props.platform.getOptions = () => this.state.options;\n\t\tthis.props.platform.logException = ex => this.logException(ex);\n\n\t\tSound.volume = this.state.options.soundEffectsVolume;\n\t}\n\n\tcomponentDidMount = () => {\n\t\tfetch(encounters).then(response => response.text()).then(text => {\n\t\t\trules['encounters'] = text;\n\t\t});\n\t\tfetch(island).then(response => response.text()).then(text => {\n\t\t\trules['island'] = text;\n\t\t});\n\t\tfetch(items).then(response => response.text()).then(text => {\n\t\t\trules['items'] = text;\n\t\t});\n\t\tfetch(stronghold).then(response => response.text()).then(text => {\n\t\t\trules['stronghold'] = text;\n\t\t});\n\t\tfetch(team).then(response => response.text()).then(text => {\n\t\t\trules['team'] = text;\n\t\t});\n\t\tfetch(dong).then(response => response.arrayBuffer()).then(arrayBuffer => {\n\t\t\tSound.dong.array = arrayBuffer;\n\t\t});\n\t};\n\n\tlogException = (ex: unknown) => {\n\t\tconsole.error(ex);\n\n\t\tconst exceptions = this.state.exceptions;\n\t\texceptions.push(`${ex}`);\n\t\tthis.setState({\n\t\t\texceptions: exceptions\n\t\t});\n\t};\n\n\tsaveGame = Utils.debounce(() => {\n\t\tthis.props.platform.saveGame();\n\t});\n\n\tsaveOptions = Utils.debounce(() => {\n\t\tthis.props.platform.saveOptions();\n\t});\n\n\tsetScreen = (screen: ScreenType) => {\n\t\tthis.setState({\n\t\t\tscreen: screen,\n\t\t\tdialog: null\n\t\t});\n\t};\n\n\tshowHelp = (filename: string) => {\n\t\tthis.setState({\n\t\t\tshowHelp: filename,\n\t\t\tshowPacks: false,\n\t\t\tdialog: null\n\t\t});\n\t};\n\n\tshowPacks = () => {\n\t\tthis.setState({\n\t\t\tshowHelp: null,\n\t\t\tshowPacks: true,\n\t\t\tdialog: null\n\t\t});\n\t};\n\n\tsetDeveloperMode = (value: boolean) => {\n\t\tconst options = this.state.options;\n\t\toptions.developer = value;\n\n\t\tthis.setState({\n\t\t\toptions: options\n\t\t}, () => {\n\t\t\tthis.saveOptions();\n\t\t});\n\t};\n\n\tsetShowTips = (value: boolean) => {\n\t\tconst options = this.state.options;\n\t\toptions.showTips = value;\n\n\t\tthis.setState({\n\t\t\toptions: options\n\t\t}, () => {\n\t\t\tthis.saveOptions();\n\t\t});\n\t};\n\n\tsetSoundEffectsVolume = (value: number) => {\n\t\tconst options = this.state.options;\n\t\toptions.soundEffectsVolume = value;\n\n\t\tSound.volume = value;\n\n\t\tthis.setState({\n\t\t\toptions: options\n\t\t}, () => {\n\t\t\tthis.saveOptions();\n\t\t});\n\t};\n\n\tgetPackPrice = (packs: PackModel[]) => {\n\t\treturn this.props.platform.getPackPrice(packs, this.state.options);\n\t};\n\n\taddPacks = (packs: PackModel[]) => {\n\t\tconst options = this.state.options;\n\n\t\tthis.props.platform.getPacks(packs, this.state.options).then(() => {\n\t\t\tpacks.forEach(pack => {\n\t\t\t\tif (!options.packIDs.includes(pack.id)) {\n\t\t\t\t\toptions.packIDs.push(pack.id);\n\t\t\t\t}\n\t\t\t});\n\t\t\toptions.packIDs.sort();\n\n\t\t\tthis.setState({\n\t\t\t\toptions: options\n\t\t\t}, () => {\n\t\t\t\tthis.saveOptions();\n\t\t\t});\n\t\t});\n\t};\n\n\tremovePack = (pack: PackModel) => {\n\t\tconst options = this.state.options;\n\t\toptions.packIDs = options.packIDs.filter(p => p !== pack.id);\n\n\t\tthis.setState({\n\t\t\toptions: options\n\t\t}, () => {\n\t\t\tthis.saveOptions();\n\t\t});\n\t};\n\n\t//#region Campaign\n\n\tstartCampaign = () => {\n\t\ttry {\n\t\t\tconst game = Factory.createGame(this.state.options.packIDs);\n\n\t\t\tthis.setState({\n\t\t\t\tgame: game,\n\t\t\t\tscreen: ScreenType.Setup,\n\t\t\t\tshowHelp: null,\n\t\t\t\tshowPacks: false,\n\t\t\t\tdialog: null\n\t\t\t}, () => {\n\t\t\t\tthis.saveGame();\n\t\t\t});\n\t\t} catch (ex) {\n\t\t\tthis.logException(ex);\n\t\t}\n\t};\n\n\tbeginCampaign = () => {\n\t\ttry {\n\t\t\tthis.setState({\n\t\t\t\tscreen: ScreenType.Campaign\n\t\t\t}, () => {\n\t\t\t\tthis.saveGame();\n\t\t\t});\n\t\t} catch (ex) {\n\t\t\tthis.logException(ex);\n\t\t}\n\t};\n\n\tcontinueCampaign = () => {\n\t\ttry {\n\t\t\tthis.setState({\n\t\t\t\tscreen: !this.state.game?.encounter ? ScreenType.Campaign : ScreenType.Encounter\n\t\t\t}, () => {\n\t\t\t\tthis.saveGame();\n\t\t\t});\n\t\t} catch (ex) {\n\t\t\tthis.logException(ex);\n\t\t}\n\t};\n\n\tnextIsland = () => {\n\t\ttry {\n\t\t\tconst currentGame = this.state.game as GameModel;\n\t\t\tconst game = Factory.createGame(this.state.options.packIDs);\n\t\t\tgame.heroes = currentGame.heroes;\n\t\t\tgame.heroSlots = 0;\n\n\t\t\tthis.setState({\n\t\t\t\tgame: game,\n\t\t\t\tscreen: ScreenType.Campaign,\n\t\t\t\tshowHelp: null,\n\t\t\t\tshowPacks: false,\n\t\t\t\tdialog: null\n\t\t\t}, () => {\n\t\t\t\tthis.saveGame();\n\t\t\t});\n\t\t} catch (ex) {\n\t\t\tthis.logException(ex);\n\t\t}\n\t};\n\n\trestartCampaign = () => {\n\t\ttry {\n\t\t\tconst game = this.state.game as GameModel;\n\t\t\tgame.heroSlots = 5;\n\t\t\tgame.heroes = [];\n\t\t\tgame.items = [];\n\t\t\tgame.boons = [];\n\t\t\tgame.money = 0;\n\n\t\t\tthis.setState({\n\t\t\t\tgame: game,\n\t\t\t\tscreen: ScreenType.Campaign,\n\t\t\t\tshowHelp: null,\n\t\t\t\tshowPacks: false,\n\t\t\t\tdialog: null\n\t\t\t}, () => {\n\t\t\t\tthis.saveGame();\n\t\t\t});\n\t\t} catch (ex) {\n\t\t\tthis.logException(ex);\n\t\t}\n\t};\n\n\tendCampaign = () => {\n\t\ttry {\n\t\t\tthis.setState({\n\t\t\t\tgame: null,\n\t\t\t\tscreen: ScreenType.Landing,\n\t\t\t\tshowHelp: null,\n\t\t\t\tshowPacks: false,\n\t\t\t\tdialog: null\n\t\t\t}, () => {\n\t\t\t\tthis.saveGame();\n\t\t\t});\n\t\t} catch (ex) {\n\t\t\tthis.logException(ex);\n\t\t}\n\t};\n\n\t//#endregion\n\n\t//#region Stronghold page\n\n\tbuyStructure = (structure: StructureModel, cost: number) => {\n\t\ttry {\n\t\t\tconst game = this.state.game as GameModel;\n\n\t\t\tStrongholdLogic.addStructure(game.stronghold, structure);\n\n\t\t\tif (cost > 0) {\n\t\t\t\tgame.money = Math.max(0, game.money - cost);\n\t\t\t} else {\n\t\t\t\tgame.structureSlots = Math.max(game.structureSlots - 1, 0);\n\t\t\t}\n\n\t\t\tthis.setState({\n\t\t\t\tgame: game\n\t\t\t}, () => {\n\t\t\t\tthis.saveGame();\n\t\t\t});\n\t\t} catch (ex) {\n\t\t\tthis.logException(ex);\n\t\t}\n\t};\n\n\tsellStructure = (structure: StructureModel) => {\n\t\ttry {\n\t\t\tconst game = this.state.game as GameModel;\n\n\t\t\tgame.stronghold = game.stronghold.filter(s => s.id !== structure.id);\n\t\t\tgame.money += 25;\n\n\t\t\tthis.setState({\n\t\t\t\tgame: game\n\t\t\t}, () => {\n\t\t\t\tthis.saveGame();\n\t\t\t});\n\t\t} catch (ex) {\n\t\t\tthis.logException(ex);\n\t\t}\n\t};\n\n\tchargeStructure = (structure: StructureModel) => {\n\t\ttry {\n\t\t\tconst game = this.state.game as GameModel;\n\n\t\t\tconst money = 100;\n\t\t\tgame.money = Math.max(0, game.money - money);\n\n\t\t\tstructure.charges += structure.level;\n\n\t\t\tthis.setState({\n\t\t\t\tgame: game\n\t\t\t}, () => {\n\t\t\t\tthis.saveGame();\n\t\t\t});\n\t\t} catch (ex) {\n\t\t\tthis.logException(ex);\n\t\t}\n\t};\n\n\tupgradeStructure = (structure: StructureModel) => {\n\t\ttry {\n\t\t\tconst game = this.state.game as GameModel;\n\n\t\t\tconst money = 50 * structure.level;\n\t\t\tgame.money = Math.max(0, game.money - money);\n\n\t\t\tstructure.level += 1;\n\n\t\t\tthis.setState({\n\t\t\t\tgame: game\n\t\t\t}, () => {\n\t\t\t\tthis.saveGame();\n\t\t\t});\n\t\t} catch (ex) {\n\t\t\tthis.logException(ex);\n\t\t}\n\t};\n\n\tuseCharge = (type: StructureType, count: number) => {\n\t\ttry {\n\t\t\tconst game = this.state.game as GameModel;\n\n\t\t\tStrongholdLogic.useCharge(game, type, count);\n\n\t\t\tthis.setState({\n\t\t\t\tgame: game\n\t\t\t}, () => {\n\t\t\t\tthis.saveGame();\n\t\t\t});\n\t\t} catch (ex) {\n\t\t\tthis.logException(ex);\n\t\t}\n\t};\n\n\t//#endregion\n\n\t//#region Heroes page\n\n\taddHero = (hero: CombatantModel) => {\n\t\ttry {\n\t\t\tconst game = this.state.game as GameModel;\n\t\t\tGameLogic.addHeroToGame(game, hero);\n\t\t\tthis.setState({\n\t\t\t\tgame: game\n\t\t\t}, () => {\n\t\t\t\tthis.saveGame();\n\t\t\t});\n\t\t} catch (ex) {\n\t\t\tthis.logException(ex);\n\t\t}\n\t};\n\n\taddHeroes = (heroes: CombatantModel[]) => {\n\t\ttry {\n\t\t\tconst game = this.state.game as GameModel;\n\t\t\theroes.forEach(hero => {\n\t\t\t\tGameLogic.addHeroToGame(game, hero);\n\t\t\t});\n\t\t\tthis.setState({\n\t\t\t\tgame: game\n\t\t\t}, () => {\n\t\t\t\tthis.saveGame();\n\t\t\t});\n\t\t} catch (ex) {\n\t\t\tthis.logException(ex);\n\t\t}\n\t};\n\n\taddXP = (hero: CombatantModel, useCharge: StructureType | null) => {\n\t\ttry {\n\t\t\tconst game = this.state.game as GameModel;\n\n\t\t\thero.xp += 1;\n\n\t\t\tif (useCharge) {\n\t\t\t\tStrongholdLogic.useCharge(game, useCharge, 1);\n\t\t\t}\n\n\t\t\tthis.setState({\n\t\t\t\tgame: game\n\t\t\t}, () => {\n\t\t\t\tthis.saveGame();\n\t\t\t});\n\t\t} catch (ex) {\n\t\t\tthis.logException(ex);\n\t\t}\n\t};\n\n\tlevelUp = (feature: FeatureModel, hero: CombatantModel) => {\n\t\ttry {\n\t\t\tCombatantLogic.incrementCombatantLevel(hero, feature, this.state.options.packIDs);\n\n\t\t\tthis.setState({\n\t\t\t\tgame: this.state.game\n\t\t\t}, () => {\n\t\t\t\tthis.saveGame();\n\t\t\t});\n\t\t} catch (ex) {\n\t\t\tthis.logException(ex);\n\t\t}\n\t};\n\n\tretireHero = (hero: CombatantModel) => {\n\t\ttry {\n\t\t\tconst game = this.state.game as GameModel;\n\n\t\t\t// Add XP\n\t\t\tconst spent = hero.level * (hero.level - 1) / 2;\n\t\t\tconst total = spent + hero.xp;\n\t\t\tconst xp = Math.floor(total / 2);\n\t\t\tif (xp > 0) {\n\t\t\t\tgame.boons.push({\n\t\t\t\t\tid: Utils.guid(),\n\t\t\t\t\ttype: BoonType.ExtraXP,\n\t\t\t\t\tdata: xp\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// Remove the hero\n\t\t\tgame.heroSlots += 1;\n\t\t\tgame.heroes = game.heroes.filter(h => h.id !== hero.id);\n\n\t\t\t// Add magic items and potions\n\t\t\thero.items.filter(i => i.magic || i.potion).forEach(i => game.items.push(i));\n\t\t\thero.carried.filter(i => i.magic || i.potion).forEach(i => game.items.push(i));\n\n\t\t\tthis.setState({\n\t\t\t\tgame: game\n\t\t\t}, () => {\n\t\t\t\tthis.saveGame();\n\t\t\t});\n\t\t} catch (ex) {\n\t\t\tthis.logException(ex);\n\t\t}\n\t};\n\n\tredeemBoon = (boon: BoonModel, hero: CombatantModel | null, item: ItemModel | null, newItem: ItemModel | null, cost: number) => {\n\t\ttry {\n\t\t\tconst game = this.state.game as GameModel;\n\t\t\tgame.boons = game.boons.filter(b => b.id !== boon.id);\n\n\t\t\tswitch (boon.type) {\n\t\t\t\tcase BoonType.ExtraHero:\n\t\t\t\t\tgame.heroSlots += 1;\n\t\t\t\t\tbreak;\n\t\t\t\tcase BoonType.ExtraXP:\n\t\t\t\t\t(hero as CombatantModel).xp += boon.data as number;\n\t\t\t\t\tbreak;\n\t\t\t\tcase BoonType.LevelUp:\n\t\t\t\t\t(hero as CombatantModel).xp += (hero as CombatantModel).level;\n\t\t\t\t\tbreak;\n\t\t\t\tcase BoonType.MagicItem:\n\t\t\t\t\tgame.items.push(boon.data as ItemModel);\n\t\t\t\t\tbreak;\n\t\t\t\tcase BoonType.Money:\n\t\t\t\t\tgame.money += boon.data as number;\n\t\t\t\t\tbreak;\n\t\t\t\tcase BoonType.EnchantItem: {\n\t\t\t\t\tconst original = item as ItemModel;\n\t\t\t\t\tconst upgrade = newItem as ItemModel;\n\t\t\t\t\tgame.heroes.forEach(h => {\n\t\t\t\t\t\th.items.forEach((i, n) => {\n\t\t\t\t\t\t\tif (i.id === original.id) {\n\t\t\t\t\t\t\t\th.items[n] = upgrade;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\th.carried.forEach((i, n) => {\n\t\t\t\t\t\t\tif (i.id === original.id) {\n\t\t\t\t\t\t\t\th.items[n] = upgrade;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t\tgame.items.forEach((i, n) => {\n\t\t\t\t\t\tif (i.id === original.id) {\n\t\t\t\t\t\t\tgame.items[n] = upgrade;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcase BoonType.Structure:\n\t\t\t\t\tStrongholdLogic.addStructure(game.stronghold, boon.data as StructureModel);\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tgame.money -= cost;\n\n\t\t\tthis.setState({\n\t\t\t\tgame: game\n\t\t\t}, () => {\n\t\t\t\tthis.saveGame();\n\t\t\t});\n\t\t} catch (ex) {\n\t\t\tthis.logException(ex);\n\t\t}\n\t};\n\n\t//#endregion\n\n\t//#region Items\n\n\tbuyItem = (item: ItemModel) => {\n\t\ttry {\n\t\t\tconst game = this.state.game as GameModel;\n\n\t\t\tgame.items.push(item);\n\n\t\t\tlet money = 2;\n\t\t\tif (item.potion) {\n\t\t\t\tmoney = 20;\n\t\t\t}\n\t\t\tif (item.magic) {\n\t\t\t\tmoney = 100;\n\t\t\t}\n\t\t\tgame.money = Math.max(0, game.money - money);\n\n\t\t\tthis.setState({\n\t\t\t\tgame: game\n\t\t\t}, () => {\n\t\t\t\tthis.saveGame();\n\t\t\t});\n\t\t} catch (ex) {\n\t\t\tthis.logException(ex);\n\t\t}\n\t};\n\n\tsellItem = (item: ItemModel, all: boolean) => {\n\t\ttry {\n\t\t\tconst sell = (item: ItemModel) => {\n\t\t\t\tgame.items = game.items.filter(i => i !== item);\n\n\t\t\t\tlet money = 1;\n\t\t\t\tif (item.potion) {\n\t\t\t\t\tmoney = 10;\n\t\t\t\t}\n\t\t\t\tif (item.magic) {\n\t\t\t\t\tmoney = 50;\n\t\t\t\t}\n\t\t\t\tgame.money += money;\n\t\t\t};\n\n\t\t\tconst game = this.state.game as GameModel;\n\n\t\t\tif (all) {\n\t\t\t\tgame.items\n\t\t\t\t\t.filter(i => i.name === item.name)\n\t\t\t\t\t.forEach(i => sell(i));\n\t\t\t} else {\n\t\t\t\tsell(item);\n\t\t\t}\n\n\t\t\tthis.setState({\n\t\t\t\tgame: game\n\t\t\t}, () => {\n\t\t\t\tthis.saveGame();\n\t\t\t});\n\t\t} catch (ex) {\n\t\t\tthis.logException(ex);\n\t\t}\n\t};\n\n\taddMoney = () => {\n\t\ttry {\n\t\t\tconst game = this.state.game as GameModel;\n\n\t\t\tgame.money += 100;\n\n\t\t\tthis.setState({\n\t\t\t\tgame: game\n\t\t\t}, () => {\n\t\t\t\tthis.saveGame();\n\t\t\t});\n\t\t} catch (ex) {\n\t\t\tthis.logException(ex);\n\t\t}\n\t};\n\n\t//#endregion\n\n\t//#region Campaign map page\n\n\tstartEncounter = (region: RegionModel, heroes: CombatantModel[], benefits: number, detriments: number) => {\n\t\ttry {\n\t\t\tif (this.state.game) {\n\t\t\t\tconst game = this.state.game;\n\n\t\t\t\theroes.forEach(h => CombatantLogic.resetCombatant(h));\n\t\t\t\tgame.heroes = game.heroes.filter(h => !heroes.includes(h));\n\t\t\t\tgame.encounter = EncounterGenerator.createEncounter(region, heroes, this.state.options.packIDs);\n\n\t\t\t\tfor (let n = 0; n < benefits; ++n) {\n\t\t\t\t\tconst hero = Collections.draw(game.encounter.combatants.filter(c => c.faction === CombatantType.Hero));\n\t\t\t\t\thero.combat.conditions.push(ConditionLogic.createRandomBeneficialCondition() as ConditionModel);\n\t\t\t\t}\n\t\t\t\tif (!this.state.options.developer) {\n\t\t\t\t\tStrongholdLogic.useCharge(game, StructureType.Temple, benefits);\n\t\t\t\t}\n\n\t\t\t\tfor (let n = 0; n < detriments; ++n) {\n\t\t\t\t\tconst hero = Collections.draw(game.encounter.combatants.filter(c => c.faction === CombatantType.Monster));\n\t\t\t\t\thero.combat.conditions.push(ConditionLogic.createRandomDetrimentalCondition() as ConditionModel);\n\t\t\t\t}\n\t\t\t\tif (!this.state.options.developer) {\n\t\t\t\t\tStrongholdLogic.useCharge(game, StructureType.Intelligencer, detriments);\n\t\t\t\t}\n\n\t\t\t\tEncounterMapLogic.visibilityCache.reset();\n\n\t\t\t\tthis.setState({\n\t\t\t\t\tgame: game,\n\t\t\t\t\tscreen: ScreenType.Encounter\n\t\t\t\t}, () => {\n\t\t\t\t\tthis.saveGame();\n\t\t\t\t});\n\t\t\t}\n\t\t} catch (ex) {\n\t\t\tthis.logException(ex);\n\t\t}\n\t};\n\n\tregenerateCampaignMap = () => {\n\t\ttry {\n\t\t\tif (this.state.game) {\n\t\t\t\tconst game = this.state.game;\n\n\t\t\t\tgame.map = CampaignMapGenerator.generateCampaignMap(this.state.options.packIDs);\n\n\t\t\t\tthis.setState({\n\t\t\t\t\tgame: game\n\t\t\t\t}, () => {\n\t\t\t\t\tthis.saveGame();\n\t\t\t\t});\n\t\t\t}\n\t\t} catch (ex) {\n\t\t\tthis.logException(ex);\n\t\t}\n\t};\n\n\tconquer = (region: RegionModel) => {\n\t\ttry {\n\t\t\tif (this.state.game) {\n\t\t\t\tconst game = this.state.game;\n\n\t\t\t\tCampaignMapLogic.conquerRegion(game.map, region);\n\t\t\t\tgame.heroes.forEach(h => h.xp += region.encounters.length);\n\t\t\t\tgame.heroSlots += 1;\n\t\t\t\tgame.structureSlots += 1;\n\t\t\t\tgame.boons.push(region.boon);\n\n\t\t\t\tthis.setState({\n\t\t\t\t\tgame: game\n\t\t\t\t}, () => {\n\t\t\t\t\tthis.saveGame();\n\t\t\t\t});\n\t\t\t}\n\t\t} catch (ex) {\n\t\t\tthis.logException(ex);\n\t\t}\n\t};\n\n\t//#endregion\n\n\t//#region Encounter page\n\n\trotateMap = (encounter: EncounterModel, dir: 'l' | 'r') => {\n\t\ttry {\n\t\t\tconst move = (position: { x: number, y: number }, size: number): { x: number, y: number } => {\n\t\t\t\tconst result = {\n\t\t\t\t\tx: position.x,\n\t\t\t\t\ty: position.y\n\t\t\t\t};\n\n\t\t\t\tswitch (dir) {\n\t\t\t\t\tcase 'l':\n\t\t\t\t\t\tresult.x = position.y;\n\t\t\t\t\t\tresult.y = -position.x - size;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'r':\n\t\t\t\t\t\tresult.x = -position.y - size;\n\t\t\t\t\t\tresult.y = position.x;\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\treturn result;\n\t\t\t};\n\n\t\t\tencounter.mapSquares.forEach(sq => {\n\t\t\t\tconst pos = move(sq, 1);\n\t\t\t\tsq.x = pos.x;\n\t\t\t\tsq.y = pos.y;\n\t\t\t});\n\t\t\tencounter.combatants.forEach(c => {\n\t\t\t\tconst pos = move(c.combat.position, c.size);\n\t\t\t\tc.combat.position.x = pos.x;\n\t\t\t\tc.combat.position.y = pos.y;\n\n\t\t\t\tc.combat.trail.forEach(step => {\n\t\t\t\t\tconst pos = move(step, c.size);\n\t\t\t\t\tstep.x = pos.x;\n\t\t\t\t\tstep.y = pos.y;\n\t\t\t\t});\n\t\t\t});\n\t\t\tencounter.loot.forEach(lp => {\n\t\t\t\tconst pos = move(lp.position, 1);\n\t\t\t\tlp.position.x = pos.x;\n\t\t\t\tlp.position.y = pos.y;\n\t\t\t});\n\t\t\tEncounterMapLogic.visibilityCache.reset();\n\n\t\t\tthis.setState({\n\t\t\t\tgame: this.state.game\n\t\t\t}, () => {\n\t\t\t\tthis.saveGame();\n\t\t\t});\n\t\t} catch (ex) {\n\t\t\tthis.logException(ex);\n\t\t}\n\t};\n\n\trollInitiative = () => {\n\t\ttry {\n\t\t\tconst game = this.state.game as GameModel;\n\t\t\tconst encounter = game.encounter as EncounterModel;\n\t\t\tEncounterLogic.rollInitiative(encounter);\n\n\t\t\tconst acting = EncounterLogic.getActiveCombatants(encounter);\n\t\t\tconst current = acting.length > 0 ? acting[0] : null;\n\t\t\tif (current) {\n\t\t\t\tEncounterLogic.startOfTurn(encounter, current);\n\t\t\t}\n\n\t\t\tthis.setState({\n\t\t\t\tgame: game\n\t\t\t}, () => {\n\t\t\t\tthis.saveGame();\n\t\t\t});\n\t\t} catch (ex) {\n\t\t\tthis.logException(ex);\n\t\t}\n\t};\n\n\tregenerateEncounterMap = () => {\n\t\ttry {\n\t\t\tconst game = this.state.game as GameModel;\n\t\t\tconst encounter = game.encounter as EncounterModel;\n\n\t\t\tencounter.mapSquares = EncounterMapGenerator.generateEncounterMap(Math.random);\n\n\t\t\tencounter.combatants.forEach(c => c.combat.position = { x: Number.MIN_VALUE, y: Number.MIN_VALUE });\n\t\t\tencounter.loot.forEach(lp => lp.position = { x: Number.MIN_VALUE, y: Number.MIN_VALUE });\n\n\t\t\tEncounterGenerator.placeCombatants(encounter, Math.random);\n\t\t\tEncounterGenerator.placeLoot(encounter, Math.random);\n\n\t\t\tthis.setState({\n\t\t\t\tgame: game\n\t\t\t}, () => {\n\t\t\t\tthis.saveGame();\n\t\t\t});\n\t\t} catch (ex) {\n\t\t\tthis.logException(ex);\n\t\t}\n\t};\n\n\taddHeroToEncounter = (encounter: EncounterModel, hero: CombatantModel, useCharge: StructureType | null) => {\n\t\ttry {\n\t\t\tconst game = this.state.game as GameModel;\n\n\t\t\tCombatantLogic.resetCombatant(hero);\n\t\t\tgame.heroes = game.heroes.filter(h => h.id !== hero.id);\n\t\t\tencounter.combatants.push(hero);\n\t\t\tEncounterGenerator.placeCombatants(encounter, Math.random);\n\n\t\t\tif (useCharge) {\n\t\t\t\tStrongholdLogic.useCharge(game, useCharge, 1);\n\t\t\t}\n\n\t\t\tthis.setState({\n\t\t\t\tgame: game\n\t\t\t}, () => {\n\t\t\t\tthis.saveGame();\n\t\t\t});\n\t\t} catch (ex) {\n\t\t\tthis.logException(ex);\n\t\t}\n\t};\n\n\tmove = (encounter: EncounterModel, combatant: CombatantModel, dir: string, cost: number) => {\n\t\ttry {\n\t\t\tEncounterLogic.move(encounter, combatant, dir, cost);\n\n\t\t\tthis.setState({\n\t\t\t\tgame: this.state.game\n\t\t\t}, () => {\n\t\t\t\tthis.saveGame();\n\t\t\t});\n\t\t} catch (ex) {\n\t\t\tthis.logException(ex);\n\t\t}\n\t};\n\n\taddMovement = (encounter:EncounterModel, combatant: CombatantModel, value: number) => {\n\t\ttry {\n\t\t\tcombatant.combat.movement += value;\n\n\t\t\tthis.setState({\n\t\t\t\tgame: this.state.game\n\t\t\t}, () => {\n\t\t\t\tthis.saveGame();\n\t\t\t});\n\t\t} catch (ex) {\n\t\t\tthis.logException(ex);\n\t\t}\n\t};\n\n\tinspire = (encounter: EncounterModel, combatant: CombatantModel) => {\n\t\ttry {\n\t\t\tEncounterLogic.inspire(encounter, combatant);\n\n\t\t\tthis.setState({\n\t\t\t\tgame: this.state.game\n\t\t\t}, () => {\n\t\t\t\tthis.saveGame();\n\t\t\t});\n\t\t} catch (ex) {\n\t\t\tthis.logException(ex);\n\t\t}\n\t};\n\n\tscan = (encounter: EncounterModel, combatant: CombatantModel) => {\n\t\ttry {\n\t\t\tEncounterLogic.scan(encounter, combatant);\n\n\t\t\tthis.setState({\n\t\t\t\tgame: this.state.game\n\t\t\t}, () => {\n\t\t\t\tthis.saveGame();\n\t\t\t});\n\t\t} catch (ex) {\n\t\t\tthis.logException(ex);\n\t\t}\n\t};\n\n\thide = (encounter: EncounterModel, combatant: CombatantModel) => {\n\t\ttry {\n\t\t\tEncounterLogic.hide(encounter, combatant);\n\n\t\t\tthis.setState({\n\t\t\t\tgame: this.state.game\n\t\t\t}, () => {\n\t\t\t\tthis.saveGame();\n\t\t\t});\n\t\t} catch (ex) {\n\t\t\tthis.logException(ex);\n\t\t}\n\t};\n\n\tdrinkPotion = (encounter: EncounterModel, owner: CombatantModel, drinker: CombatantModel, potion: ItemModel) => {\n\t\ttry {\n\t\t\tEncounterLogic.drinkPotion(encounter, owner, drinker, potion);\n\n\t\t\tthis.setState({\n\t\t\t\tgame: this.state.game\n\t\t\t}, () => {\n\t\t\t\tthis.saveGame();\n\t\t\t});\n\t\t} catch (ex) {\n\t\t\tthis.logException(ex);\n\t\t}\n\t};\n\n\tdrawActions = (encounter: EncounterModel, combatant: CombatantModel, useCharge: StructureType | null) => {\n\t\ttry {\n\t\t\tEncounterLogic.drawActions(encounter, combatant);\n\n\t\t\tif (useCharge) {\n\t\t\t\tStrongholdLogic.useCharge(this.state.game as GameModel, useCharge, 1);\n\t\t\t}\n\n\t\t\tthis.setState({\n\t\t\t\tgame: this.state.game\n\t\t\t}, () => {\n\t\t\t\tthis.saveGame();\n\t\t\t});\n\t\t} catch (ex) {\n\t\t\tthis.logException(ex);\n\t\t}\n\t};\n\n\tselectAction = (encounter: EncounterModel, combatant: CombatantModel, action: ActionModel) => {\n\t\ttry {\n\t\t\tEncounterLogic.selectAction(encounter, combatant, action);\n\n\t\t\tthis.setState({\n\t\t\t\tgame: this.state.game\n\t\t\t}, () => {\n\t\t\t\tthis.saveGame();\n\t\t\t});\n\t\t} catch (ex) {\n\t\t\tthis.logException(ex);\n\t\t}\n\t};\n\n\tdeselectAction = (encounter: EncounterModel, combatant: CombatantModel) => {\n\t\ttry {\n\t\t\tEncounterLogic.deselectAction(encounter, combatant);\n\n\t\t\tthis.setState({\n\t\t\t\tgame: this.state.game\n\t\t\t}, () => {\n\t\t\t\tthis.saveGame();\n\t\t\t});\n\t\t} catch (ex) {\n\t\t\tthis.logException(ex);\n\t\t}\n\t};\n\n\tsetActionParameterValue = (parameter: ActionParameterModel, value: unknown) => {\n\t\ttry {\n\t\t\tparameter.value = value;\n\n\t\t\tthis.setState({\n\t\t\t\tgame: this.state.game\n\t\t\t}, () => {\n\t\t\t\tthis.saveGame();\n\t\t\t});\n\t\t} catch (ex) {\n\t\t\tthis.logException(ex);\n\t\t}\n\t};\n\n\trunAction = (encounter: EncounterModel, combatant: CombatantModel) => {\n\t\ttry {\n\t\t\tEncounterLogic.runAction(encounter, combatant);\n\n\t\t\tthis.setState({\n\t\t\t\tgame: this.state.game\n\t\t\t}, () => {\n\t\t\t\tthis.saveGame();\n\t\t\t});\n\t\t} catch (ex) {\n\t\t\tthis.logException(ex);\n\t\t}\n\t};\n\n\trunMonsterTurn = (encounter: EncounterModel, combatant: CombatantModel, onFinished: () => void) => {\n\t\ttry {\n\t\t\tconst perform = () => {\n\t\t\t\tcombatant.combat.intents = IntentsLogic.getIntents(encounter, combatant);\n\t\t\t\tif (combatant.combat.intents) {\n\t\t\t\t\tIntentsLogic.performIntents(encounter, combatant);\n\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\tgame: this.state.game\n\t\t\t\t\t}, () => {\n\t\t\t\t\t\tthis.saveGame();\n\t\t\t\t\t\tsetTimeout(perform, 1000);\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tEncounterLogic.endTurn(encounter);\n\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\tgame: this.state.game\n\t\t\t\t\t}, () => {\n\t\t\t\t\t\tthis.saveGame();\n\t\t\t\t\t\tonFinished();\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tsetTimeout(perform, 1000);\n\t\t} catch (ex) {\n\t\t\tthis.logException(ex);\n\t\t}\n\t};\n\n\tendTurn = (encounter: EncounterModel) => {\n\t\ttry {\n\t\t\tEncounterLogic.endTurn(encounter);\n\n\t\t\tthis.setState({\n\t\t\t\tgame: this.state.game\n\t\t\t}, () => {\n\t\t\t\tthis.saveGame();\n\t\t\t});\n\t\t} catch (ex) {\n\t\t\tthis.logException(ex);\n\t\t}\n\t};\n\n\tequipItem = (item: ItemModel, combatant: CombatantModel) => {\n\t\ttry {\n\t\t\tconst game = this.state.game as GameModel;\n\n\t\t\tif (game.encounter) {\n\t\t\t\tEncounterLogic.equipItem(game.encounter, combatant, item);\n\t\t\t} else {\n\t\t\t\tgame.items = game.items.filter(i => i.id !== item.id);\n\t\t\t\tcombatant.carried = combatant.carried.filter(i => i.id !== item.id);\n\t\t\t\tcombatant.items.push(item);\n\t\t\t}\n\n\t\t\tthis.setState({\n\t\t\t\tgame: game\n\t\t\t}, () => {\n\t\t\t\tthis.saveGame();\n\t\t\t});\n\t\t} catch (ex) {\n\t\t\tthis.logException(ex);\n\t\t}\n\t};\n\n\tunequipItem = (item: ItemModel, combatant: CombatantModel) => {\n\t\ttry {\n\t\t\tconst game = this.state.game as GameModel;\n\n\t\t\tif (game.encounter) {\n\t\t\t\tEncounterLogic.unequipItem(game.encounter, combatant, item);\n\t\t\t} else {\n\t\t\t\tcombatant.items = combatant.items.filter(i => i.id !== item.id);\n\t\t\t\tcombatant.carried.push(item);\n\t\t\t}\n\n\t\t\tthis.setState({\n\t\t\t\tgame: game\n\t\t\t}, () => {\n\t\t\t\tthis.saveGame();\n\t\t\t});\n\t\t} catch (ex) {\n\t\t\tthis.logException(ex);\n\t\t}\n\t};\n\n\tpickUpItem = (item: ItemModel, combatant: CombatantModel) => {\n\t\ttry {\n\t\t\tconst game = this.state.game as GameModel;\n\n\t\t\tif (game.encounter) {\n\t\t\t\tEncounterLogic.pickUpItem(game.encounter, combatant, item);\n\t\t\t} else {\n\t\t\t\tgame.items = game.items.filter(i => i.id !== item.id);\n\t\t\t\tif (CombatantLogic.canEquip(combatant, item)) {\n\t\t\t\t\tcombatant.items.push(item);\n\t\t\t\t} else {\n\t\t\t\t\tcombatant.carried.push(item);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.setState({\n\t\t\t\tgame: game\n\t\t\t}, () => {\n\t\t\t\tthis.saveGame();\n\t\t\t});\n\t\t} catch (ex) {\n\t\t\tthis.logException(ex);\n\t\t}\n\t};\n\n\tdropItem = (item: ItemModel, combatant: CombatantModel) => {\n\t\ttry {\n\t\t\tconst game = this.state.game as GameModel;\n\n\t\t\tif (game.encounter) {\n\t\t\t\tEncounterLogic.dropItem(game.encounter, combatant, item);\n\t\t\t} else {\n\t\t\t\tcombatant.items = combatant.items.filter(i => i.id !== item.id);\n\t\t\t\tcombatant.carried = combatant.carried.filter(i => i.id !== item.id);\n\n\t\t\t\tgame.items.push(item);\n\t\t\t}\n\n\t\t\tthis.setState({\n\t\t\t\tgame: game\n\t\t\t}, () => {\n\t\t\t\tthis.saveGame();\n\t\t\t});\n\t\t} catch (ex) {\n\t\t\tthis.logException(ex);\n\t\t}\n\t};\n\n\tfinishEncounter = (state: EncounterState) => {\n\t\ttry {\n\t\t\tconst game = this.state.game;\n\t\t\tif (!game) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst encounter = game.encounter;\n\t\t\tif (!encounter) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst region = game.map.regions.find(r => r.id === encounter.regionID);\n\t\t\tif (!region) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet dialogContent = null;\n\t\t\tswitch (state) {\n\t\t\t\tcase EncounterState.Victory: {\n\t\t\t\t\t// Get equipment and money from loot piles, add to game items\n\t\t\t\t\tencounter.loot.forEach(lp => {\n\t\t\t\t\t\tgame.items.push(...lp.items);\n\t\t\t\t\t\tgame.money += lp.money;\n\t\t\t\t\t});\n\t\t\t\t\t// Increment XP for surviving heroes\n\t\t\t\t\tencounter.combatants\n\t\t\t\t\t\t.filter(c => (c.type === CombatantType.Hero) && (c.faction === CombatantType.Hero))\n\t\t\t\t\t\t.filter(h => (h.combat.state === CombatantState.Standing) || (h.combat.state === CombatantState.Prone))\n\t\t\t\t\t\t.forEach(h => h.xp += 1);\n\t\t\t\t\t// Add surviving heroes back into the game\n\t\t\t\t\tencounter.combatants\n\t\t\t\t\t\t.filter(c => (c.type === CombatantType.Hero) && (c.faction === CombatantType.Hero))\n\t\t\t\t\t\t.filter(h => (h.combat.state === CombatantState.Standing) || (h.combat.state === CombatantState.Prone) || (h.combat.state === CombatantState.Unconscious))\n\t\t\t\t\t\t.forEach(h => game.heroes.push(h));\n\t\t\t\t\tgame.heroes = Collections.sort(game.heroes, n => n.name);\n\t\t\t\t\t// Remove the first encounter for this region\n\t\t\t\t\tregion.encounters.splice(0, 1);\n\t\t\t\t\tif (region.encounters.length === 0) {\n\t\t\t\t\t\t// Conquer the region\n\t\t\t\t\t\tCampaignMapLogic.conquerRegion(game.map, region);\n\t\t\t\t\t\tif (game.map.squares.every(sq => sq.regionID === '')) {\n\t\t\t\t\t\t\t// Show message\n\t\t\t\t\t\t\tdialogContent = (\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<Text type={TextType.Heading}>Victory</Text>\n\t\t\t\t\t\t\t\t\t<Text type={TextType.SubHeading}>You control the island!</Text>\n\t\t\t\t\t\t\t\t\t<Text>\n\t\t\t\t\t\t\t\t\t\t<p><b>Congratulations!</b> There are no more regions to conquer.</p>\n\t\t\t\t\t\t\t\t\t\t<p>You can now choose to take your heroes to a new island, or you can start a fresh new campaign.</p>\n\t\t\t\t\t\t\t\t\t</Text>\n\t\t\t\t\t\t\t\t\t<div className='card-options'>\n\t\t\t\t\t\t\t\t\t\t<PlayingCard front={<PlaceholderCard text='New Island' />} onClick={() => this.nextIsland()} />\n\t\t\t\t\t\t\t\t\t\t<PlayingCard front={<PlaceholderCard text='Fresh Start' />} onClick={() => this.endCampaign()} />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// Add a new hero slot\n\t\t\t\t\t\t\tgame.heroSlots += 1;\n\t\t\t\t\t\t\t// Add a new structure slot\n\t\t\t\t\t\t\tgame.structureSlots += 1;\n\t\t\t\t\t\t\t// Add the region's boon\n\t\t\t\t\t\t\tgame.boons.push(region.boon);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t// Clear the current encounter\n\t\t\t\t\tgame.encounter = null;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcase EncounterState.Defeat: {\n\t\t\t\t\t// Clear the current encounter\n\t\t\t\t\tgame.encounter = null;\n\t\t\t\t\tconst heroes = game.heroes.length + game.heroSlots + game.boons.filter(b => b.type === BoonType.ExtraHero).length;\n\t\t\t\t\tif (heroes === 0) {\n\t\t\t\t\t\t// Show message\n\t\t\t\t\t\tdialogContent = (\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<Text type={TextType.Heading}>Defeat</Text>\n\t\t\t\t\t\t\t\t<Text type={TextType.SubHeading}>You lost the encounter in {region.name}, and have no more heroes.</Text>\n\t\t\t\t\t\t\t\t<Text>You can either continue your campaign with a new group of heroes, or abandon it.</Text>\n\t\t\t\t\t\t\t\t<div className='card-options'>\n\t\t\t\t\t\t\t\t\t<PlayingCard front={<PlaceholderCard text='Continue' />} onClick={() => this.restartCampaign()} />\n\t\t\t\t\t\t\t\t\t<PlayingCard front={<PlaceholderCard text='Abandon' />} onClick={() => this.endCampaign()} />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcase EncounterState.Retreat: {\n\t\t\t\t\t// Add conscious heroes back into the game\n\t\t\t\t\tencounter.combatants\n\t\t\t\t\t\t.filter(c => (c.type === CombatantType.Hero) && (c.faction === CombatantType.Hero))\n\t\t\t\t\t\t.filter(h => (h.combat.state === CombatantState.Standing) || (h.combat.state === CombatantState.Prone))\n\t\t\t\t\t\t.forEach(h => game.heroes.push(h));\n\t\t\t\t\tgame.heroes = Collections.sort(game.heroes, n => n.name);\n\t\t\t\t\t// Clear the current encounter\n\t\t\t\t\tgame.encounter = null;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tgame.heroes.forEach(h => CombatantLogic.resetCombatant(h));\n\t\t\tEncounterMapLogic.visibilityCache.reset();\n\n\t\t\tthis.setState({\n\t\t\t\tscreen: ScreenType.Campaign,\n\t\t\t\tgame: game,\n\t\t\t\tdialog: dialogContent\n\t\t\t}, () => {\n\t\t\t\tthis.saveGame();\n\t\t\t});\n\t\t} catch (ex) {\n\t\t\tthis.logException(ex);\n\t\t}\n\t};\n\n\tswitchAllegiance = (combatant: CombatantModel) => {\n\t\ttry {\n\t\t\tconst game = this.state.game as GameModel;\n\n\t\t\tcombatant.faction = (combatant.faction === CombatantType.Hero) ? CombatantType.Monster : CombatantType.Hero;\n\t\t\tEncounterLogic.drawActions(game.encounter as EncounterModel, combatant);\n\n\t\t\tthis.setState({\n\t\t\t\tgame: game\n\t\t\t}, () => {\n\t\t\t\tthis.saveGame();\n\t\t\t});\n\t\t} catch (ex) {\n\t\t\tthis.logException(ex);\n\t\t}\n\t};\n\n\t//#endregion\n\n\t//#region Rendering\n\n\tgetContent = () => {\n\t\tswitch (this.state.screen) {\n\t\t\tcase ScreenType.Landing:\n\t\t\t\treturn (\n\t\t\t\t\t<LandingScreen\n\t\t\t\t\t\tgame={this.state.game}\n\t\t\t\t\t\toptions={this.state.options}\n\t\t\t\t\t\tstartCampaign={this.startCampaign}\n\t\t\t\t\t\tcontinueCampaign={this.continueCampaign}\n\t\t\t\t\t\tshowPacks={this.showPacks}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\tcase ScreenType.Setup:\n\t\t\t\treturn (\n\t\t\t\t\t<SetupScreen\n\t\t\t\t\t\tgame={this.state.game as GameModel}\n\t\t\t\t\t\toptions={this.state.options}\n\t\t\t\t\t\taddHero={this.addHero}\n\t\t\t\t\t\taddHeroes={this.addHeroes}\n\t\t\t\t\t\tequipItem={this.equipItem}\n\t\t\t\t\t\tunequipItem={this.unequipItem}\n\t\t\t\t\t\tpickUpItem={this.pickUpItem}\n\t\t\t\t\t\tdropItem={this.dropItem}\n\t\t\t\t\t\tshowPacks={this.showPacks}\n\t\t\t\t\t\tbeginCampaign={this.beginCampaign}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\tcase ScreenType.Campaign:\n\t\t\t\treturn (\n\t\t\t\t\t<CampaignScreen\n\t\t\t\t\t\tgame={this.state.game as GameModel}\n\t\t\t\t\t\toptions={this.state.options}\n\t\t\t\t\t\tplatform={this.props.platform}\n\t\t\t\t\t\thasExceptions={this.state.exceptions.length > 0}\n\t\t\t\t\t\tshowHelp={this.showHelp}\n\t\t\t\t\t\tshowPacks={this.showPacks}\n\t\t\t\t\t\tbuyStructure={this.buyStructure}\n\t\t\t\t\t\tsellStructure={this.sellStructure}\n\t\t\t\t\t\tchargeStructure={this.chargeStructure}\n\t\t\t\t\t\tupgradeStructure={this.upgradeStructure}\n\t\t\t\t\t\tuseCharge={this.useCharge}\n\t\t\t\t\t\taddHero={this.addHero}\n\t\t\t\t\t\taddXP={this.addXP}\n\t\t\t\t\t\tequipItem={this.equipItem}\n\t\t\t\t\t\tunequipItem={this.unequipItem}\n\t\t\t\t\t\tpickUpItem={this.pickUpItem}\n\t\t\t\t\t\tdropItem={this.dropItem}\n\t\t\t\t\t\tlevelUp={this.levelUp}\n\t\t\t\t\t\tretireHero={this.retireHero}\n\t\t\t\t\t\tredeemBoon={this.redeemBoon}\n\t\t\t\t\t\tbuyItem={this.buyItem}\n\t\t\t\t\t\tsellItem={this.sellItem}\n\t\t\t\t\t\taddMoney={this.addMoney}\n\t\t\t\t\t\tstartEncounter={this.startEncounter}\n\t\t\t\t\t\tregenerateCampaignMap={this.regenerateCampaignMap}\n\t\t\t\t\t\tconquer={this.conquer}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\tcase ScreenType.Encounter:\n\t\t\t\treturn (\n\t\t\t\t\t<EncounterScreen\n\t\t\t\t\t\tencounter={this.state.game?.encounter as EncounterModel}\n\t\t\t\t\t\tgame={this.state.game as GameModel}\n\t\t\t\t\t\toptions={this.state.options}\n\t\t\t\t\t\thasExceptions={this.state.exceptions.length > 0}\n\t\t\t\t\t\tshowHelp={this.showHelp}\n\t\t\t\t\t\trotateMap={this.rotateMap}\n\t\t\t\t\t\trollInitiative={this.rollInitiative}\n\t\t\t\t\t\tregenerateEncounterMap={this.regenerateEncounterMap}\n\t\t\t\t\t\taddHeroToEncounter={this.addHeroToEncounter}\n\t\t\t\t\t\tendTurn={this.endTurn}\n\t\t\t\t\t\tmove={this.move}\n\t\t\t\t\t\taddMovement={this.addMovement}\n\t\t\t\t\t\tinspire={this.inspire}\n\t\t\t\t\t\tscan={this.scan}\n\t\t\t\t\t\thide={this.hide}\n\t\t\t\t\t\tdrinkPotion={this.drinkPotion}\n\t\t\t\t\t\tdrawActions={this.drawActions}\n\t\t\t\t\t\tselectAction={this.selectAction}\n\t\t\t\t\t\tdeselectAction={this.deselectAction}\n\t\t\t\t\t\tsetActionParameterValue={this.setActionParameterValue}\n\t\t\t\t\t\trunAction={this.runAction}\n\t\t\t\t\t\trunMonsterTurn={this.runMonsterTurn}\n\t\t\t\t\t\tequipItem={this.equipItem}\n\t\t\t\t\t\tunequipItem={this.unequipItem}\n\t\t\t\t\t\tpickUpItem={this.pickUpItem}\n\t\t\t\t\t\tdropItem={this.dropItem}\n\t\t\t\t\t\tuseCharge={this.useCharge}\n\t\t\t\t\t\tswitchAllegiance={this.switchAllegiance}\n\t\t\t\t\t\tfinishEncounter={this.finishEncounter}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t}\n\t};\n\n\trender = () => {\n\t\ttry {\n\t\t\tlet dialog = null;\n\t\t\tif (this.state.showHelp !== null) {\n\t\t\t\tdialog = (\n\t\t\t\t\t<Dialog\n\t\t\t\t\t\tcontent={\n\t\t\t\t\t\t\t<HelpModal\n\t\t\t\t\t\t\t\tgame={this.state.game}\n\t\t\t\t\t\t\t\texceptions={this.state.exceptions}\n\t\t\t\t\t\t\t\trules={rules[this.state.showHelp]}\n\t\t\t\t\t\t\t\toptions={this.state.options}\n\t\t\t\t\t\t\t\tendCampaign={this.endCampaign}\n\t\t\t\t\t\t\t\tsetDeveloperMode={this.setDeveloperMode}\n\t\t\t\t\t\t\t\tsetShowTips={this.setShowTips}\n\t\t\t\t\t\t\t\tsetSoundEffectsVolume={this.setSoundEffectsVolume}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonClose={() => this.setState({ showHelp: null })}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t}\n\t\t\tif (this.state.showPacks) {\n\t\t\t\tdialog = (\n\t\t\t\t\t<Dialog\n\t\t\t\t\t\tcontent={\n\t\t\t\t\t\t\t<PacksModal\n\t\t\t\t\t\t\t\toptions={this.state.options}\n\t\t\t\t\t\t\t\tgetPrice={this.getPackPrice}\n\t\t\t\t\t\t\t\taddPacks={this.addPacks}\n\t\t\t\t\t\t\t\tremovePack={this.removePack}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonClose={() => this.setState({ showPacks: false })}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t}\n\t\t\tif (this.state.dialog) {\n\t\t\t\tdialog = (\n\t\t\t\t\t<Dialog\n\t\t\t\t\t\tcontent={this.state.dialog}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t}\n\n\t\t\treturn (\n\t\t\t\t<div className='skirmish'>\n\t\t\t\t\t<Toaster\n\t\t\t\t\t\tposition='bottom-right'\n\t\t\t\t\t\ttoastOptions={{\n\t\t\t\t\t\t\tduration: 5 * 1000\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t\t{this.getContent()}\n\t\t\t\t\t{dialog}\n\t\t\t\t</div>\n\t\t\t);\n\t\t} catch {\n\t\t\treturn <div className='skirmish render-error' />;\n\t\t}\n\t};\n\n\t//#endregion\n}\n","import { useMediaQuery } from 'react-responsive';\n\nimport type { GameModel } from '../../models/game';\nimport type { OptionsModel } from '../../models/options';\n\nimport type { Platform } from '../../platform/platform';\n\nimport { Main } from '../main/main';\n\nimport './layout.scss';\n\ninterface Props {\n\tgame: GameModel | null;\n\toptions: OptionsModel;\n\tplatform: Platform;\n}\n\nexport const Layout = (props: Props) => {\n\tconst isWideEnough = useMediaQuery({ query: '(min-width: 1024px)' });\n\tconst isTallEnough = useMediaQuery({ query: '(min-height: 1024px)' });\n\tconst isPortrait = useMediaQuery({ query: '(orientation: portrait)' });\n\n\tif (isWideEnough) {\n\t\treturn (\n\t\t\t<Main\n\t\t\t\tgame={props.game}\n\t\t\t\toptions={props.options}\n\t\t\t\tplatform={props.platform}\n\t\t\t/>\n\t\t);\n\t}\n\n\tif (isPortrait && isTallEnough) {\n\t\treturn (\n\t\t\t<div className='layout'>\n\t\t\t\tTo play Skirmish, use your device in landscape mode.\n\t\t\t</div>\n\t\t);\n\t}\n\n\treturn (\n\t\t<div className='layout'>\n\t\t\tTo play Skirmish, use a device with a larger screen.\n\t\t</div>\n\t);\n};\n","import { StrictMode } from 'react';\nimport { createRoot } from 'react-dom/client';\n\nimport { Platform } from './platform/platform';\n\nimport { Layout } from './components/layout/layout';\n\nimport './index.scss';\n\nconst platform = new Platform();\nplatform\n\t.logIn()\n\t.then(data => {\n\t\tconst container = document.getElementById('root');\n\t\tif (container) {\n\t\t\tconst root = createRoot(container);\n\t\t\troot.render(\n\t\t\t\t<StrictMode>\n\t\t\t\t\t<Layout game={data.game} options={data.options} platform={platform} />\n\t\t\t\t</StrictMode>\n\t\t\t);\n\t\t}\n\t});\n"],"names":["hasOwn","Object","prototype","hasOwnProperty","toStr","toString","defineProperty","gOPD","getOwnPropertyDescriptor","isArray","arr","Array","call","isPlainObject","obj","key","hasOwnConstructor","hasIsPrototypeOf","constructor","setProperty","target","options","name","enumerable","configurable","value","newValue","writable","getProperty","module","exports","extend","src","copy","copyIsArray","clone","arguments","i","length","deep","COMMENT_REGEX","NEWLINE_REGEX","WHITESPACE_REGEX","PROPERTY_REGEX","COLON_REGEX","VALUE_REGEX","SEMICOLON_REGEX","TRIM_REGEX","EMPTY_STRING","trim","str","replace","style","TypeError","lineno","column","updatePosition","lines","match","lastIndexOf","position","start","line","node","Position","whitespace","this","end","source","content","errorsList","error","msg","err","Error","reason","filename","silent","push","re","m","exec","slice","comments","rules","c","comment","pos","charAt","type","declaration","prop","val","ret","property","decl","decls","declarations","e","t","n","r","s","o","u","f","code","l","_dereq_","global","scheduleDrain","draining","Mutation","MutationObserver","WebKitMutationObserver","called","observer","nextTick","element","document","createTextNode","observe","characterData","data","setImmediate","MessageChannel","createElement","scriptEl","onreadystatechange","parentNode","removeChild","documentElement","appendChild","setTimeout","channel","port1","onmessage","port2","postMessage","queue","oldQueue","len","immediate","task","self","window","INTERNAL","handlers","REJECTED","FULFILLED","PENDING","Promise","resolver","state","outcome","safelyResolveThenable","QueueItem","promise","onFulfilled","onRejected","callFulfilled","otherCallFulfilled","callRejected","otherCallRejected","unwrap","func","returnValue","reject","resolve","getThen","then","apply","thenable","onError","onSuccess","tryToUnwrap","result","tryCatch","status","out","all","iterable","values","resolved","allResolver","resolveFromAll","outValue","race","response","_typeof","Symbol","iterator","_classCallCheck","instance","Constructor","getIDB","indexedDB","webkitIndexedDB","mozIndexedDB","OIndexedDB","msIndexedDB","idb","isIndexedDBValid","open","isSafari","openDatabase","test","navigator","userAgent","platform","hasFetch","fetch","indexOf","IDBKeyRange","createBlob","parts","properties","Blob","builder","BlobBuilder","MSBlobBuilder","MozBlobBuilder","WebKitBlobBuilder","append","getBlob","Promise$1","executeCallback","callback","executeTwoCallbacks","errorCallback","normalizeKey","console","warn","String","getCallback","DETECT_BLOB_SUPPORT_STORE","supportsBlobs","dbContexts","READ_ONLY","READ_WRITE","_binStringToArrayBuffer","bin","buf","ArrayBuffer","Uint8Array","charCodeAt","_checkBlobSupportWithoutCaching","txn","transaction","blob","objectStore","put","onabort","preventDefault","stopPropagation","oncomplete","matchedChrome","matchedEdge","parseInt","_checkBlobSupport","_deferReadiness","dbInfo","dbContext","deferredOperation","deferredOperations","dbReady","_advanceReadiness","pop","_rejectReadiness","_getConnection","upgradeNeeded","createDbContext","db","close","dbArgs","version","openreq","onupgradeneeded","createObjectStore","storeName","oldVersion","ex","newVersion","onerror","onsuccess","onversionchange","_getOriginalConnection","_getUpgradedConnection","_isUpgradeNeeded","defaultVersion","isNewStore","objectStoreNames","contains","isDowngrade","isUpgrade","incVersion","_encodeBlob","reader","FileReader","onloadend","base64","btoa","__local_forage_encoded_blob","readAsBinaryString","_decodeBlob","encodedBlob","atob","_isEncodedBlob","_fullyReady","_initReady","_dbInfo","_tryReconnect","forages","forage","createTransaction","mode","retries","undefined","tx","_initStorage","ready","initPromises","ignoreErrors","j","_defaultConfig","k","getItem","req","get","iterate","openCursor","iterationNumber","cursor","setItem","blobSupport","store","removeItem","clear","count","advanced","openKeyCursor","advance","keys","dropInstance","currentConfig","config","dbPromise","dropObjectPromise","deleteObjectStore","_forage2","dropDBPromise","deleteDatabase","onblocked","asyncStorage","_driver","_support","isWebSQLValid","BASE_CHARS","BLOB_TYPE_PREFIX","BLOB_TYPE_PREFIX_REGEX","SERIALIZED_MARKER","SERIALIZED_MARKER_LENGTH","TYPE_ARRAYBUFFER","TYPE_BLOB","TYPE_INT8ARRAY","TYPE_UINT8ARRAY","TYPE_UINT8CLAMPEDARRAY","TYPE_INT16ARRAY","TYPE_INT32ARRAY","TYPE_UINT16ARRAY","TYPE_UINT32ARRAY","TYPE_FLOAT32ARRAY","TYPE_FLOAT64ARRAY","TYPE_SERIALIZED_MARKER_LENGTH","toString$1","stringToBuffer","serializedString","encoded1","encoded2","encoded3","encoded4","bufferLength","p","buffer","bytes","bufferToString","base64String","substring","serialize","valueType","marker","fileReader","onload","readAsArrayBuffer","JSON","stringify","deserialize","parse","blobType","matcher","Int8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","localforageSerializer","createDbTable","executeSql","_initStorage$1","dbInfoPromise","description","size","serializer","tryExecuteSql","sqlStatement","args","SYNTAX_ERR","results","rows","getItem$1","item","iterate$1","_setItem","retriesLeft","originalValue","sqlError","QUOTA_ERR","setItem$1","removeItem$1","clear$1","length$1","key$1","keys$1","getAllStoreNames","storeNames","dropInstance$1","operationInfo","dropTable","operations","webSQLStorage","isLocalStorageValid","localStorage","_getKeyPrefix","defaultConfig","keyPrefix","checkIfLocalStorageThrows","localStorageTestKey","_isLocalStorageUsable","_initStorage$2","clear$2","getItem$2","iterate$2","keyPrefixLength","key$2","keys$2","itemKey","length$2","removeItem$2","setItem$2","dropInstance$2","localStorageWrapper","sameValue","x","y","isNaN","includes","array","searchElement","arg","DefinedDrivers","DriverSupport","DefaultDrivers","INDEXEDDB","WEBSQL","LOCALSTORAGE","DefaultDriverOrder","OptionalDriverMethods","LibraryMethods","concat","DefaultConfig","driver","callWhenReady","localForageInstance","libraryMethod","_args","_key","LocalForage","driverTypeKey","driverName","defineDriver","_config","_driverSet","_initDriver","_ready","_wrapLibraryMethodsWithReady","setDriver","driverObject","complianceError","driverMethods","driverMethodName","configureMissingMethods","methodNotImplementedFactory","methodName","_i","_len","optionalDriverMethod","setDriverSupport","support","info","getDriver","getDriverPromise","getSerializer","serializerPromise","drivers","supportedDrivers","_getSupportedDrivers","setDriverToConfig","extendSelfWithDriver","_extend","initDriver","currentDriverIndex","driverPromiseLoop","oldDriverSetDone","supports","libraryMethodsAndProperties","createInstance","localforage_js","ReactPropTypesSecret","require","emptyFunction","emptyFunctionWithReset","resetWarningCache","shim","props","propName","componentName","location","propFullName","secret","getShim","isRequired","ReactPropTypes","bigint","bool","number","object","string","symbol","any","arrayOf","elementType","instanceOf","objectOf","oneOf","oneOfType","shape","exact","checkPropTypes","PropTypes","aa","ca","a","b","encodeURIComponent","da","Set","ea","fa","ha","add","ia","ja","ka","la","ma","v","d","g","acceptsBooleans","attributeName","attributeNamespace","mustUseProperty","propertyName","sanitizeURL","removeEmptyString","z","split","forEach","toLowerCase","ra","sa","toUpperCase","ta","pa","qa","oa","removeAttribute","setAttribute","setAttributeNS","xlinkHref","ua","__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED","va","for","wa","ya","za","Aa","Ba","Ca","Da","Ea","Fa","Ga","Ha","Ia","Ja","Ka","La","A","assign","Ma","stack","Na","Oa","prepareStackTrace","set","Reflect","construct","h","displayName","Pa","tag","render","Qa","$$typeof","_context","_payload","_init","Ra","Sa","Ta","nodeName","Va","_valueTracker","getValue","setValue","stopTracking","Ua","Wa","checked","Xa","activeElement","body","Ya","defaultChecked","defaultValue","_wrapperState","initialChecked","Za","initialValue","controlled","ab","bb","cb","ownerDocument","eb","fb","selected","defaultSelected","disabled","gb","dangerouslySetInnerHTML","children","hb","ib","jb","textContent","kb","lb","mb","nb","namespaceURI","innerHTML","valueOf","firstChild","MSApp","execUnsafeLocalFunction","ob","lastChild","nodeType","nodeValue","pb","animationIterationCount","aspectRatio","borderImageOutset","borderImageSlice","borderImageWidth","boxFlex","boxFlexGroup","boxOrdinalGroup","columnCount","columns","flex","flexGrow","flexPositive","flexShrink","flexNegative","flexOrder","gridArea","gridRow","gridRowEnd","gridRowSpan","gridRowStart","gridColumn","gridColumnEnd","gridColumnSpan","gridColumnStart","fontWeight","lineClamp","lineHeight","opacity","order","orphans","tabSize","widows","zIndex","zoom","fillOpacity","floodOpacity","stopOpacity","strokeDasharray","strokeDashoffset","strokeMiterlimit","strokeOpacity","strokeWidth","qb","rb","sb","tb","menuitem","area","base","br","col","embed","hr","img","input","keygen","link","meta","param","track","wbr","ub","vb","is","wb","xb","srcElement","correspondingUseElement","yb","zb","Ab","Bb","Cb","stateNode","Db","Eb","Fb","Gb","Hb","Ib","Jb","Kb","Lb","Mb","addEventListener","removeEventListener","Nb","Ob","Pb","Qb","Rb","Sb","Tb","Vb","alternate","return","flags","Wb","memoizedState","dehydrated","Xb","Zb","child","sibling","current","Yb","$b","ac","unstable_scheduleCallback","bc","unstable_cancelCallback","cc","unstable_shouldYield","dc","unstable_requestPaint","B","unstable_now","ec","unstable_getCurrentPriorityLevel","fc","unstable_ImmediatePriority","gc","unstable_UserBlockingPriority","hc","unstable_NormalPriority","ic","unstable_LowPriority","jc","unstable_IdlePriority","kc","lc","oc","Math","clz32","pc","qc","log","LN2","rc","sc","tc","uc","pendingLanes","suspendedLanes","pingedLanes","entangledLanes","entanglements","vc","xc","yc","zc","Ac","eventTimes","Cc","C","Dc","Ec","Fc","Gc","Hc","Ic","Jc","Kc","Lc","Mc","Nc","Oc","Map","Pc","Qc","Rc","Sc","delete","pointerId","Tc","nativeEvent","blockedOn","domEventName","eventSystemFlags","targetContainers","Vc","Wc","priority","isDehydrated","containerInfo","Xc","Yc","dispatchEvent","shift","Zc","$c","ad","bd","cd","ReactCurrentBatchConfig","dd","ed","transition","fd","gd","hd","id","Uc","jd","kd","ld","md","nd","od","keyCode","charCode","pd","qd","rd","_reactName","_targetInst","currentTarget","isDefaultPrevented","defaultPrevented","isPropagationStopped","cancelBubble","persist","isPersistent","wd","xd","yd","sd","eventPhase","bubbles","cancelable","timeStamp","Date","now","isTrusted","td","ud","view","detail","vd","Ad","screenX","screenY","clientX","clientY","pageX","pageY","ctrlKey","shiftKey","altKey","metaKey","getModifierState","zd","button","buttons","relatedTarget","fromElement","toElement","movementX","movementY","Bd","Dd","dataTransfer","Fd","Hd","animationName","elapsedTime","pseudoElement","Id","clipboardData","Jd","Ld","Md","Esc","Spacebar","Left","Up","Right","Down","Del","Win","Menu","Apps","Scroll","MozPrintableKey","Nd","Od","Alt","Control","Meta","Shift","Pd","Qd","fromCharCode","repeat","locale","which","Rd","Td","width","height","pressure","tangentialPressure","tiltX","tiltY","twist","pointerType","isPrimary","Vd","touches","targetTouches","changedTouches","Xd","Yd","deltaX","wheelDeltaX","deltaY","wheelDeltaY","wheelDelta","deltaZ","deltaMode","Zd","$d","ae","be","documentMode","ce","de","ee","fe","ge","he","ie","le","color","date","datetime","email","month","password","range","search","tel","text","time","url","week","me","ne","oe","event","listeners","pe","qe","se","te","ue","ve","we","xe","ye","ze","oninput","Ae","detachEvent","Be","Ce","attachEvent","De","Ee","Fe","He","Ie","Je","Ke","offset","nextSibling","Le","compareDocumentPosition","Me","HTMLIFrameElement","contentWindow","href","Ne","contentEditable","Oe","focusedElem","selectionRange","selectionStart","selectionEnd","min","defaultView","getSelection","rangeCount","anchorNode","anchorOffset","focusNode","focusOffset","createRange","setStart","removeAllRanges","addRange","setEnd","left","scrollLeft","top","scrollTop","focus","Pe","Qe","Re","Se","Te","Ue","Ve","We","animationend","animationiteration","animationstart","transitionend","Xe","Ye","Ze","animation","$e","af","bf","cf","df","ef","ff","gf","hf","lf","mf","nf","Ub","listener","D","of","has","pf","qf","rf","random","sf","bind","capture","passive","J","w","F","tf","uf","parentWindow","vf","wf","na","xa","$a","ba","je","char","ke","unshift","xf","yf","zf","Af","Bf","Cf","Df","Ef","__html","Ff","Gf","clearTimeout","Hf","Jf","queueMicrotask","catch","If","Kf","Lf","Mf","previousSibling","Nf","Of","Pf","Qf","Rf","Sf","Tf","Uf","E","G","Vf","H","Wf","Xf","Yf","contextTypes","__reactInternalMemoizedUnmaskedChildContext","__reactInternalMemoizedMaskedChildContext","Zf","childContextTypes","$f","ag","bg","getChildContext","cg","__reactInternalMemoizedMergedChildContext","dg","eg","fg","gg","hg","jg","kg","lg","mg","ng","og","pg","qg","rg","sg","tg","ug","vg","wg","xg","yg","I","zg","Ag","Bg","deletions","Cg","pendingProps","overflow","treeContext","retryLane","Dg","Eg","Fg","Gg","memoizedProps","Hg","Ig","Jg","Kg","Lg","defaultProps","Mg","Ng","Og","Pg","Qg","Rg","_currentValue","Sg","childLanes","Tg","dependencies","firstContext","lanes","Ug","Vg","context","memoizedValue","next","Wg","Xg","Yg","interleaved","Zg","$g","ah","updateQueue","baseState","firstBaseUpdate","lastBaseUpdate","shared","pending","effects","bh","ch","eventTime","lane","payload","dh","K","eh","fh","gh","q","hh","ih","jh","Component","refs","kh","nh","isMounted","_reactInternals","enqueueSetState","L","lh","mh","enqueueReplaceState","enqueueForceUpdate","oh","shouldComponentUpdate","isPureReactComponent","ph","contextType","updater","qh","componentWillReceiveProps","UNSAFE_componentWillReceiveProps","rh","getDerivedStateFromProps","getSnapshotBeforeUpdate","UNSAFE_componentWillMount","componentWillMount","componentDidMount","sh","ref","_owner","_stringRef","th","join","uh","vh","index","wh","xh","yh","implementation","zh","Ah","done","Bh","Ch","Dh","Eh","Fh","Gh","Hh","Ih","tagName","Jh","Kh","Lh","M","Mh","revealOrder","Nh","Oh","_workInProgressVersionPrimary","Ph","ReactCurrentDispatcher","Qh","Rh","N","O","P","Sh","Th","Uh","Vh","Q","Wh","Xh","Yh","Zh","$h","ai","bi","ci","baseQueue","di","ei","fi","lastRenderedReducer","action","hasEagerState","eagerState","lastRenderedState","dispatch","gi","hi","ii","ji","ki","getSnapshot","li","mi","R","ni","lastEffect","stores","oi","pi","qi","ri","create","destroy","deps","si","ti","ui","vi","wi","xi","yi","zi","Ai","Bi","Ci","Di","Ei","Fi","Gi","Hi","Ii","Ji","readContext","useCallback","useContext","useEffect","useImperativeHandle","useInsertionEffect","useLayoutEffect","useMemo","useReducer","useRef","useState","useDebugValue","useDeferredValue","useTransition","useMutableSource","useSyncExternalStore","useId","unstable_isNewReconciler","identifierPrefix","Ki","message","digest","Li","Mi","Ni","WeakMap","Oi","Pi","Qi","Ri","getDerivedStateFromError","componentDidCatch","Si","componentStack","Ti","pingCache","Ui","Vi","Wi","Xi","ReactCurrentOwner","Yi","Zi","$i","aj","bj","compare","cj","dj","ej","baseLanes","cachePool","transitions","fj","gj","hj","ij","jj","UNSAFE_componentWillUpdate","componentWillUpdate","componentDidUpdate","kj","lj","pendingContext","mj","Aj","Bj","Cj","Dj","nj","oj","pj","fallback","qj","rj","tj","dataset","dgst","uj","vj","_reactRetry","sj","subtreeFlags","wj","xj","isBackwards","rendering","renderingStartTime","last","tail","tailMode","yj","Ej","S","Fj","Gj","wasMultiple","multiple","suppressHydrationWarning","onClick","onclick","createElementNS","autoFocus","T","Hj","Ij","Jj","Kj","U","Lj","WeakSet","V","Mj","W","Nj","Oj","Qj","Rj","Sj","Tj","Uj","Vj","Wj","insertBefore","_reactRootContainer","Xj","X","Yj","Zj","ak","onCommitFiberUnmount","componentWillUnmount","bk","ck","dk","ek","fk","isHidden","gk","hk","display","ik","jk","kk","lk","__reactInternalSnapshotBeforeUpdate","Wk","mk","ceil","nk","ok","pk","Y","Z","qk","rk","sk","tk","uk","Infinity","vk","wk","xk","yk","zk","Ak","Bk","Ck","Dk","Ek","callbackNode","expirationTimes","expiredLanes","wc","callbackPriority","ig","Fk","Gk","Hk","Ik","Jk","Kk","Lk","Mk","Nk","Ok","Pk","finishedWork","finishedLanes","Qk","timeoutHandle","Rk","Sk","Tk","Uk","Vk","mutableReadLanes","Bc","Pj","onCommitFiberRoot","mc","onRecoverableError","Xk","onPostCommitFiberRoot","Yk","Zk","al","isReactComponent","pendingChildren","bl","mutableSourceEagerHydrationData","cl","cache","pendingSuspenseBoundaries","el","fl","gl","hl","il","jl","zj","$k","ll","reportError","ml","_internalRoot","nl","ol","pl","ql","sl","rl","unmount","unstable_scheduleHydration","splice","querySelectorAll","form","tl","usingClientEntryPoint","Events","ul","findFiberByHostInstance","bundleType","rendererPackageName","vl","rendererConfig","overrideHookState","overrideHookStateDeletePath","overrideHookStateRenamePath","overrideProps","overridePropsDeletePath","overridePropsRenamePath","setErrorHandler","setSuspenseHandler","scheduleUpdate","currentDispatcherRef","findHostInstanceByFiber","findHostInstancesForRefresh","scheduleRefresh","scheduleRoot","setRefreshHandler","getCurrentFiber","reconcilerVersion","__REACT_DEVTOOLS_GLOBAL_HOOK__","wl","isDisabled","supportsFiber","inject","createPortal","dl","createRoot","unstable_strictMode","findDOMNode","flushSync","hydrate","hydrateRoot","hydratedSources","_getVersion","_source","unmountComponentAtNode","unstable_batchedUpdates","unstable_renderSubtreeIntoContainer","checkDCE","factory","__WEBPACK_EXTERNAL_MODULE_react__","mediaQuery","parseQuery","some","query","inverse","typeMatch","expressionsMatch","expressions","every","expression","feature","modifier","expValue","toPx","toDpi","toDecimal","RE_MEDIA_QUERY","RE_MQ_EXPRESSION","RE_MQ_FEATURE","RE_LENGTH_UNIT","RE_RESOLUTION_UNIT","map","captures","parsed","ratio","numbers","decimal","Number","resolution","parseFloat","uppercasePattern","msPattern","toHyphenLower","__WEBPACK_DEFAULT_EXPORT__","hName","staticMatch","__webpack_require__","dynamicMatch","matchMedia","Mql","forceStatic","mql","matches","media","addListener","update","evt","removeListener","dispose","getOwnPropertySymbols","propIsEnumerable","propertyIsEnumerable","test1","getOwnPropertyNames","test2","test3","letter","shouldUseNative","from","symbols","to","toObject","printWarning","loggedTypeFailures","typeSpecs","getStack","typeSpecName","ReactIs","emptyFunctionThatReturnsNull","isValidElement","throwOnDirectAccess","ITERATOR_SYMBOL","FAUX_ITERATOR_SYMBOL","ANONYMOUS","createPrimitiveTypeChecker","createChainableTypeChecker","typeChecker","PropTypeError","propValue","getPropType","isValidElementType","expectedClass","expectedClassName","isNode","propType","expectedValues","valuesString","getPreciseType","arrayOfTypeCheckers","checker","getPostfixForTypeWarning","expectedTypes","checkerResult","expectedType","shapeTypes","invalidValidatorError","allKeys","validate","manualPropTypeCallCache","manualPropTypeWarningCount","checkType","cacheKey","chainedCheckType","iteratorFn","maybeIterable","getIteratorFn","step","entries","entry","RegExp","isSymbol","isElement","Function","hasSymbol","REACT_ELEMENT_TYPE","REACT_PORTAL_TYPE","REACT_FRAGMENT_TYPE","REACT_STRICT_MODE_TYPE","REACT_PROFILER_TYPE","REACT_PROVIDER_TYPE","REACT_CONTEXT_TYPE","REACT_ASYNC_MODE_TYPE","REACT_CONCURRENT_MODE_TYPE","REACT_FORWARD_REF_TYPE","REACT_SUSPENSE_TYPE","REACT_SUSPENSE_LIST_TYPE","REACT_MEMO_TYPE","REACT_LAZY_TYPE","REACT_BLOCK_TYPE","REACT_FUNDAMENTAL_TYPE","REACT_RESPONDER_TYPE","REACT_SCOPE_TYPE","typeOf","$$typeofType","AsyncMode","ConcurrentMode","ContextConsumer","ContextProvider","Element","ForwardRef","Fragment","Lazy","Memo","Portal","Profiler","StrictMode","Suspense","hasWarnedAboutDeprecatedIsAsyncMode","isConcurrentMode","isAsyncMode","isContextConsumer","isContextProvider","isForwardRef","isFragment","isLazy","isMemo","isPortal","isProfiler","isStrictMode","isSuspense","shallowEqualObjects","objA","objB","aKeys","bKeys","shallowEqualArrays","arrA","arrB","useMediaQuery_1","__importDefault","_a","device","onChange","settings","__rest","default","Context","createContext","useMediaQuery","Component_1","toQuery_1","toQuery","Context_1","prop_types_1","stringOrNumber","types","grid","aural","braille","handheld","print","projection","screen","tty","tv","embossed","matchers","orientation","scan","deviceAspectRatio","deviceHeight","deviceWidth","colorIndex","monochrome","featureMatchers","features","__assign","minAspectRatio","maxAspectRatio","minDeviceAspectRatio","maxDeviceAspectRatio","minHeight","maxHeight","minDeviceHeight","maxDeviceHeight","minWidth","maxWidth","minDeviceWidth","maxDeviceWidth","minColor","maxColor","minColorIndex","maxColorIndex","minMonochrome","maxMonochrome","minResolution","maxResolution","hyphenate_style_name_1","mediaQuery_1","realKey","keyVal","react_1","matchmediaquery_1","shallow_equal_1","hyphenateKeys","reduce","useIsUpdate","useQuery","getQuery","makeQuery","setQuery","newQuery","deviceSettings","deviceFromProps","deviceFromContext","getDevice","setDevice","newDevice","useDevice","mq","getMatchMedia","setMq","isUpdate","newMq_1","useMatchMedia","setMatches","updateMatches","ev","useMatches","__webpack_module_cache__","moduleId","cachedModule","__webpack_modules__","definition","toStringTag","__self","__source","jsx","jsxs","setState","forceUpdate","escape","_status","_result","Children","toArray","only","PureComponent","cloneElement","_currentValue2","_threadCount","Provider","Consumer","_defaultValue","_globalName","createFactory","createRef","forwardRef","lazy","memo","startTransition","unstable_act","sortIndex","performance","startTime","expirationTime","priorityLevel","scheduling","isInputPending","unstable_Profiling","unstable_continueExecution","unstable_forceFrameRate","floor","unstable_getFirstCallbackNode","unstable_next","unstable_pauseExecution","unstable_runWithPriority","delay","unstable_wrapCallback","StyleToObject","output","hasIterator","getter","__esModule","chunkId","globalThis","baseURI","_toPropertyKey","hint","prim","toPrimitive","res","_defineProperties","descriptor","_createClass","protoProps","staticProps","Random","_class","dice","rng","rolls","max","rollAgain","randomNumber","randomBoolean","randomDecimal","randomBonus","randomColor","getSeededRNG","seed","hashes","h1","h2","h3","h4","imul","getHashes","getRNG","Collections","sort","collection","getText","startsWith","strA","strB","localeCompare","shuffle","currentIndex","randomIndex","temporaryValue","draw","distinct","seen","filter","sum","mean","MAX_VALUE","MIN_VALUE","PackData","arcana","skullduggery","elements","beasts","undead","technology","faith","potions","fae","coldBlood","getList","list","StructureType","StructureData","academy","Academy","packID","level","charges","barracks","Barracks","forge","Forge","recruitment","Hall","intelligencer","Intelligencer","observatory","Observatory","quartermaster","Quartermaster","temple","Temple","thief","ThievesGuild","training","TrainingGround","warRoom","WarRoom","wizard","WizardTower","Utils","guid","letters","debounce","timeout","intersects","light","wall","det","lambda","gamma","StrongholdLogic","getDimensions","stronghold","dims","right","bottom","structure","addStructure","getEmptyPosition","canCharge","adj","minX","maxX","minY","maxY","empty","sq","find","square","getUpgradeCost","getHeroLimit","game","getStructureCharges","useCharge","structures","Platform","_this","worker","getGame","getOptions","logException","logIn","localforage","updateGame","updateOptions","developer","showTips","soundEffectsVolume","packIDs","structureSlots","heroes","faction","encounter","combatants","loot","lp","money","regions","encounters","saveGame","saveOptions","getPackPrice","packs","getPacks","Worker","URL","_arrayLikeToArray","arr2","_iterableToArray","iter","_unsupportedIterableToArray","minLen","_toConsumableArray","_setPrototypeOf","setPrototypeOf","__proto__","_inherits","subClass","superClass","_getPrototypeOf","getPrototypeOf","_isNativeReflectConstruct","sham","Proxy","Boolean","_assertThisInitialized","ReferenceError","_createSuper","Derived","hasNativeReflectConstruct","Super","NewTarget","_taggedTemplateLiteral","strings","raw","freeze","defineProperties","_arrayWithHoles","_nonIterableRest","_slicedToArray","_defineProperty","ownKeys","_objectSpread2","getOwnPropertyDescriptors","querySelector","_goober","head","_loop","_n","className","theme","as","$","toastId","_objectSpread","toasts","toast","visible","pausedAt","pauseDuration","blank","success","loading","custom","createdAt","ariaProps","role","dismiss","remove","_I","_j2","duration","_g$filter","_ref","_ref$reverseOrder","reverseOrder","_ref$gutter","gutter","defaultPosition","findIndex","updateHeight","startPause","endPause","calculateOffset","_templateObject","_templateObject2","_templateObject3","_","_templateObject4","primary","secondary","_templateObject5","_templateObject6","_templateObject7","_templateObject8","_templateObject9","_templateObject10","_templateObject11","_templateObject12","_templateObject13","_ref2","icon","iconTheme","_templateObject14","_templateObject15","_ref5","_ref4","_ref6","onHeightUpdate","getBoundingClientRect","subtree","childList","_templateObject16","_ref7","_ref7$position","toastOptions","containerStyle","containerClassName","_D","pointerEvents","onMouseEnter","onMouseLeave","justifyContent","transform","_t","BoonType","CombatantState","CombatantType","EncounterState","DamageCategoryType","ItemLocationType","ItemProficiencyType","SkillCategoryType","TraitType","ActionTargetType","DamageType","SkillType","ConditionType","FeatureType","Factory","createCombatant","speciesID","roleID","backgroundID","xp","quirks","items","carried","combat","Standing","stunned","trail","damage","wounds","initiative","movement","senses","hidden","conditions","actions","selectedAction","intents","createGame","heroSlots","boons","CampaignMapGenerator","generateCampaignMap","createCondition","trait","rank","details","None","skill","skillCategory","damageCategory","createFeature","Trait","proficiency","aura","createLootPile","ConditionLogic","createAutoHealCondition","root","AutoHeal","createAutoDamageCondition","condition","AutoDamage","createTraitBonusCondition","TraitBonus","createTraitPenaltyCondition","TraitPenalty","createSkillBonusCondition","SkillBonus","createSkillPenaltyCondition","SkillPenalty","createSkillCategoryBonusCondition","category","SkillCategoryBonus","createSkillCategoryPenaltyCondition","SkillCategoryPenalty","createDamageBonusCondition","DamageBonus","createDamagePenaltyCondition","DamagePenalty","createDamageCategoryBonusCondition","DamageCategoryBonus","createDamageCategoryPenaltyCondition","DamageCategoryPenalty","createDamageResistanceCondition","DamageResistance","createDamageVulnerabilityCondition","DamageVulnerability","createDamageCategoryResistanceCondition","DamageCategoryResistance","createDamageCategoryVulnerabilityCondition","DamageCategoryVulnerability","createMovementBonusCondition","MovementBonus","createMovementPenaltyCondition","MovementPenalty","getConditionDescription","getOppositeType","pairs","opposite","pair","getConditionIsBeneficial","createRandomBeneficialCondition","GameLogic","getRandomTrait","getRandomSkill","getRandomDamageType","createRandomDetrimentalCondition","FeatureLogic","createDamageBonusFeature","createDamageCategoryBonusFeature","createDamageResistFeature","DamageResist","createDamageCategoryResistFeature","DamageCategoryResist","createProficiencyFeature","Proficiency","createSkillFeature","Skill","createSkillCategoryFeature","SkillCategory","createTraitFeature","createAuraFeature","Aura","createAuraTraitFeature","createAuraSkillFeature","createAuraSkillCategoryFeature","createAuraDamageFeature","createAuraDamageCategoryFeature","createRandomFeature","getRandomDamageCategoryType","getRandomItemProficiency","getRandomSkillCategory","getFeatureDescription","title","getFeatureTitle","desc","getFeatureInformation","getFeatureText","affects","hasChoice","Any","collateFeatures","collated","existing","BaseData","getBaseFeatures","getBaseActions","prerequisites","ActionPrerequisites","meleeWeapon","parameters","ActionWeaponParameters","melee","ActionTargetParameters","weapon","Enemies","ActionEffects","attack","Weapon","Speed","skillBonus","hit","dealWeaponDamage","rangedWeapon","ranged","emptyHand","adjacent","Brawl","dealDamage","Impact","prone","stand","MovementType","QuirkType","MonsterSpeciesData","colossus","Monster","startingFeatures","Endurance","Resolve","All","burst","knockDown","forceMovement","Push","gnoll","Piercing","Edged","takeAnotherAction","Combatants","Presence","addCondition","Mental","goblin","Reactions","Stealth","medusa","Poison","Physical","Energy","Corruption","orc","wound","ratfolk","Decay","addMovement","scarab","Beast","Acid","troll","Mindless","LargeWeapons","healWounds","airElemental","Amorphous","Cold","Sonic","Electricity","BesideTarget","earthElemental","fireElemental","Fire","Light","waterElemental","bear","giantSpider","ratSwarm","Swarm","stingerSwarm","wolf","Allies","commandMove","skeleton","Undead","healDamage","vampire","toSelf","stun","wraith","zombie","banshee","crocodilian","naga","commandAction","ActionRangeType","EncounterMapSquareType","SummonType","HashTable","hash","acc","insert","rec","reset","EncounterMapLogic","getFloorBlob","squares","candidates","getAdjacentSquares","getWallBlob","getAdjacentWalls","directions","checkSquare","mapSquare","getDistanceAny","aSquares","bSquares","distances","flatMap","getDistance","x2","pow","y2","hyp","sqrt","getDirection","atan2","PI","canSeeAny","edges","canSee","visibilityCache","cached","midA","midB","horizontal","edge","vertical","getMapEdges","horizontalReduced","verticalReduced","EncounterMapGenerator","generateEncounterMap","mapTypes","generateDungeonMap","generateRuinMap","generateCavernMap","generateStreetMap","fn","Obstructed","simplifyMap","dir","_loop2","Clear","_loop3","_loop4","walls","intersections","_loop5","_loop6","used","intersection","dirs","_loop7","_x","_loop8","NameGenerator","generateName","names","capitalise","generateWord","starts","ends","MagicItemGenerator","generateMagicItem","baseItem","convertToMagicItem","addMagicItemFeature","generateRandomMagicItem","getItemDeck","magic","copyW1","wpn1","copyW2","wpn2","copyW3","copyW4","unreliable","copyW5","armor","copyA1","f1","copyA2","arm2","f2","f2Copy","copyA3","arm3","f3","copyA4","arm4","f4","Implements","copyI1","Spellcasting","copyI2","copyI3","penalty","Head","copyH1","copyH2","copyH3","Feet","Neck","copyN1","copyN2","copyFeature","copyAction","getRandomAction","CardType","CombatantLogic","CARRY_CAPACITY","applyCombatantCards","combatant","species","getSpecies","getRole","background","getBackground","incrementCombatantLevel","makeFeatureChoices","Perception","MilitaryWeapons","PairedWeapons","RangedWeapons","PowderWeapons","LightArmor","HeavyArmor","Shields","getProficiencies","Psychic","addItems","prof","getItemsForProficiency","canEquip","slotsTotal","Hand","Ring","slotsUsed","slots","slotsAvailable","getFeatureDeck","getActionDeck","getFeatureSource","cardID","itemName","getFeatureSourceType","Base","Species","Role","Background","isItem","Item","Default","getActionSource","getActionSourceType","resetCombatant","getFeatures","getTraitRank","getSkillRank","getSkillCategory","Prone","getDamageBonus","getDamageCategory","getDamageResistance","profs","getAuras","auras","original","Sound","volume","dong","decoding","audio","play","sound","AudioContext","playDecoded","decodeAudioData","decoded","_unused","gain","createGain","createBufferSource","connect","destination","_unused2","EncounterLogic","logMessages","logTimeout","handleLogMessage","getCombatantSquares","getCombatantAuraSquares","combatantSquares","getSquareIsEmpty","ignore","occupied","Dead","mapSquares","rollInitiative","round","speed","speedA","valueA","Hero","endTurn","endOfTurn","active","getActiveCombatants","startOfTurn","Unconscious","kill","getAuraConditions","drawActions","_combatant$combat$act","_combatant$combat$act2","deck","checkActionParameters","selectAction","deselectAction","invertTargets","parameter","ActionLogic","checkWeaponParameter","checkOriginParameter","checkTargetParameter","runAction","effect","run","getMoveCost","movingFrom","movingTo","dest","destinationMapSquares","_encounter$mapSquares","ms","cost","os","getPossibleMoveSquares","move","drinkPotion","owner","drinker","potion","resistance","Drone","dropAllItems","goProne","standUp","inspire","ally","allySquares","hide","reveal","equipItem","unequipItem","pickUpItem","piles","dropItem","_loot$items","getEncounterState","allMonstersDead","Victory","allHeroesDead","Defeat","Active","getCombatant","_encounter$combatants","getLoot","_encounter$loot$find","getActedCombatants","getDeadCombatants","findCombatants","originSquares","radius","destSquares","findSquares","findWalls","EncounterGenerator","createEncounter","region","_encounter$loot","regionID","monsters","addMonster","isDrone","monster","speciesIDs","CampaignMapLogic","getMonsters","getRoleDeck","getBackgroundDeck","featureDeck","checkedIDs","duplicates","placeCombatants","getPotionDeck","canPlaceHere","placeLoot","occupiedSquares","IntentsData","PathLogic","findPaths","paths","steps","working","findSteps","path","workingSet","discovered","newPath","IntentsLogic","getIntents","isSatisfied","targetParam","targets","weight","getCombatantTargetIntents","Squares","getSquareTargetIntents","Walls","getWallTargetIntents","getMovementIntents","getAttackIntents","presense","canSeeStunnedAlly","perception","stealth","getActionRange","targetSquares","candidatePaths","getActionType","targetSquare","targetWall","prerequisitesMet","prerequisite","parametersSet","allies","enemies","movePaths","maxWounds","performIntents","intent","performIntent","shield","implement","carryingCapacity","ActionOriginParameters","distance","Self","Adjacent","Burst","bonus","_class5","inflictWounds","removeCondition","invertConditions","transferCondition","moveToTargetSquare","disarm","steal","createTerrain","addSquares","removeSquares","destroyWalls","createPotion","potionID","summon","getDescription","rankModifier","getPotion","targetsSucceeded","targetParameter","weaponParam","itemID","roll","atkRank","defRank","atkRoll","defRoll","weaponParameter","dmg","maxRank","currentActionID","invert","_target$combat$action","Pull","origin","originParameter","moveDistance","Swap","currentX","currentY","TowardsTarget","targetAdjacentSquares","canMoveHere","wouldBeAdjacent","Elemental","_class6","getActionSpeed","getActionDescription","getParameterDescription","originParam","getTargetDescription","plural","wpnParam","proficiencies","squaresCombatant","squaresA","squaresB","PotionData","aptitude","brilliance","health","luck","might","strength","will","quickness","BackgroundData","acrobat","apothecary","bard","commander","grenadier","mountebank","mystic","noble","physician","reaver","sentinel","zealot","HeroSpeciesData","human","deva","dwarf","elf","faun","gnome","minotaur","pixie","reptilian","shadowborn","werewolf","ItemData","Body","RoleData","arcanist","artificer","assassin","barbarian","centurion","cleric","dervish","druid","elementalist","enchanter","geomancer","gunslinger","luckweaver","necromancer","ninja","paladin","psion","ranger","sensei","sorcerer","warmage","valkyrie","getHeroSpeciesDeck","getMonsterSpeciesDeck","getStructureDeck","getStructure","getPack","getAllActions","getBoonIsHeroType","boon","ExtraHero","ExtraXP","LevelUp","getBoonIsItemType","EnchantItem","MagicItem","Money","getBoonIsStrongholdType","Structure","addHeroToGame","hero","getSpeciesStrength","getFeatureStrength","getActionStrength","getRoleStrength","getBackgroundStrength","factor","targetStrength","getActionTargetStrength","effectStrength","getActionEffectStrength","targetsInRange","sw","nw","getSquares","getCentralSquare","canAttackRegion","conquerRegion","isConquered","monsterIDs","BoonGenerator","generateBoon","_createForOfIteratorHelper","allowArrayLike","it","_e","normalCompletion","didErr","_e2","parent","regionCount","demographics","population","terrain","unclaimed","coastalRegions","startingRegion","defaultAttributes","xmlns","viewBox","fill","stroke","strokeLinecap","strokeLinejoin","createReactComponent","iconName","iconNamePascal","iconNode","_b","_b$color","_b$size","_b$stroke","rest","__objRest","__spreadValues","__spreadProps","attrs","propTypes","IconCards","IconHelpCircleFilled","IconHelpCircle","PackLogic","getPackCardCount","IconArrowBigRightLinesFilled","IconCoins","IconAwardFilled","IconRefresh","IconVaccineBottle","IconSnowflake","IconSpiral","IconSlice","IconBolt","IconFlame","IconHammer","IconSun","IconTrident","IconSkull","IconBrain","IconAccessPoint","IconType","IconSize","IconValue","_Component","_super","getTextSize","Button","Large","getIconSize","getTextWeight","Movement","_jsx","XP","Redraw","_jsxs","fontSize","IconInfoCircle","TextType","Text","Tip","Badge","Box","label","CardList","cards","card","ConfirmButton","_useState2","setView","IconX","Dialog","closeClick","onClose","dialogClick","getDialog","closeBtn","Expander","opened","setOpened","containerRef","contentRef","onMutation","disconnect","animate","scrollHeight","easing","finished","closeExpander","header","Gauge","circumference","strokeLength","cx","cy","progress","PlayingCard","flipped","degrees","offsetX","offsetY","hasFooter","footerText","footerContent","footerType","front","back","Selector","option","_option$display","selectedID","onSelect","gridTemplateColumns","StatValue","IconCircleCheckFilled","IconCircle","Switch","Tabs","Tag","ActionCard","getPrerequisites","getParameters","getEffects","getEffectDescription","Action","SubHeading","footer","_wrapRegExp","BabelRegExp","buildGroups","groups","indices","Color","lighten","darken","CampaignMapPanel","onSelectRegion","getHex","backgroundColor","borderColor","selectedRegion","padding","dx","points","pt","getLabel","textLength","dominantBaseline","textAnchor","CardGridPanel","setActions","starting","clearActions","getMarked","getCards","Small","getCardCount","dialog","startingCards","FeatureCard","featureCards","actionCards","Heading","textAlign","pack","IconHeartOff","IconHeartFilled","IconNavigationFilled","ConditionsPanel","getConditions","con","rotate","endurance","MinorHeading","CombatStatsPanel","resolveRank","reverse","woundsPerRow","woundsInRows","CombatantNotices","Information","IconCheck","IconId","IconArrowBigDownFilled","IconStarFilled","MiniToken","tokenRef","scrollIntoView","_this$tokenRef$curren","behavior","selectable","setMouseOver","mouseOver","getMonogram","token","onMap","squareSize","iconSize","healthBar","barWidth","colorDark","colorLight","mapDimensions","backgroundImage","CombatantRowPanel","onDetails","onCancel","getListInfo","getCardTags","getInitiativeInfo","getCombatTags","getDamage","getWounds","getDetailedInfoBelow","getDetailedInfoEnd","getHeaderInfoBelow","includeQuirks","hearts","clickable","dimmed","infoBelow","infoRight","infoEnd","selectBtn","detailsBtn","cancelBtn","onTokenClick","IconChevronUpLeft","IconChevronUp","IconChevronUpRight","IconChevronLeft","IconChevronRight","IconChevronDownLeft","IconChevronDown","IconChevronDownRight","DirectionPanel","getClassName","canMove","costs","getCostLabel","onMove","onDoubleClick","AuraToken","Floor","Fog","LootToken","Overlay","TrailToken","Wall","EncounterMapPanel","currentCombatantRef","selectedCombatantRef","scrollToCombatant","_this$currentCombatan","_this$selectedCombata","selectedCombatantIDs","getEffect","selectableSquares","selectedSquares","onClickSquare","selectableLootIDs","selectedLootIDs","onClickLoot","trails","minis","selectableCombatantIDs","onClickCombatant","currentCombatant","currentCombatantSquares","fog","overlays","onClickOff","InitiativeListPanel","currentEntries","activeEntries","actedEntries","deadEntries","actedHeading","ListItemPanel","StrongholdMapPanel","onSelectStructure","y1","x1","selectedStructure","dy","structureID","IconList","TreasureRowPanel","tags","PlaceholderCard","subtext","BackgroundCard","onFlip","ItemCard","collatedFeatures","Potion","StructureCard","getStructureDetails","BoonCard","onSelectItem","extra","Boon","Feature","HeroCard","onCharacterSheet","onRetire","magicItems","PackCard","onRemove","Pack","RegionCard","Region","RoleCard","SpeciesCard","IconCircleMinus","IconCirclePlus","StrongholdBenefitCard","onRedraw","onUse","onNudge","delta","available","BuyEquipmentModal","getItems","buyItem","loc","BuyMagicItemModal","redraw","redraws","BuyPotionModal","Items","getLocationSection","unequip","getCarriedItemSection","equip","getPartyItemSection","getNearbyItemSection","pile","party","nearby","ChoicePanel","selectTrait","selectSkill","selectSkillCategory","selectProficiency","selectDamage","selectDamageCategoryType","choice","got","drawFeatures","_features","_features2","setFeatures","selectedFeature","setSelectedFeature","levelUp","DamagePanel","Dimmed","physicalTypes","physicalValues","physical","_values$find","energyTypes","energyValues","energy","_values$find2","corruptionTypes","corruptionValues","corruption","_values$find3","Stats","getDamageBonusValue","getDamageResistanceValue","getTraitsSection","getSkillsSection","getProficienciesSection","proficiencySection","getAurasSection","auraSection","getXPSection","combatColumn","CharacterSheetModal","selector","hasXP","addXP","EnchantItemModal","selectItem","selectedItem","enchantItem","other","EncounterStartModal","selectAllHeroes","_selected","selectedHeroes","viewMode","selectHero","deselectHero","startEncounter","benefits","detriments","rightContent","ben","Format","toSize","toFixed","toCurrency","AboutTab","pkg","DecksTab","setTab","tab","getBadge","OptionsTab","setSoundEffectsVolume","local","setDeveloperMode","setShowTips","endCampaign","Schema","normal","space","merge","definitions","normalize","Info","attribute","boolean","booleanish","overloadedBoolean","commaSeparated","spaceSeparated","commaOrSpaceSeparated","defined","powers","increment","checks","DefinedInfo","_Info","mask","mark","check","own","attributes","xlink","xLinkActuate","xLinkArcRole","xLinkHref","xLinkRole","xLinkShow","xLinkTitle","xLinkType","xml","xmlLang","xmlBase","xmlSpace","caseSensitiveTransform","caseInsensitiveTransform","xmlnsxlink","xmlnsXLink","aria","ariaActiveDescendant","ariaAtomic","ariaAutoComplete","ariaBusy","ariaChecked","ariaColCount","ariaColIndex","ariaColSpan","ariaControls","ariaCurrent","ariaDescribedBy","ariaDetails","ariaDisabled","ariaDropEffect","ariaErrorMessage","ariaExpanded","ariaFlowTo","ariaGrabbed","ariaHasPopup","ariaHidden","ariaInvalid","ariaKeyShortcuts","ariaLabel","ariaLabelledBy","ariaLevel","ariaLive","ariaModal","ariaMultiLine","ariaMultiSelectable","ariaOrientation","ariaOwns","ariaPlaceholder","ariaPosInSet","ariaPressed","ariaReadOnly","ariaRelevant","ariaRequired","ariaRoleDescription","ariaRowCount","ariaRowIndex","ariaRowSpan","ariaSelected","ariaSetSize","ariaSort","ariaValueMax","ariaValueMin","ariaValueNow","ariaValueText","html","acceptcharset","classname","htmlfor","httpequiv","abbr","accept","acceptCharset","accessKey","allow","allowFullScreen","allowPaymentRequest","allowUserMedia","alt","async","autoCapitalize","autoComplete","autoPlay","blocking","charSet","cite","cols","colSpan","controls","controlsList","coords","crossOrigin","dateTime","defer","dirName","download","draggable","encType","enterKeyHint","fetchPriority","formAction","formEncType","formMethod","formNoValidate","formTarget","headers","high","hrefLang","htmlFor","httpEquiv","imageSizes","imageSrcSet","inert","inputMode","integrity","isMap","itemId","itemProp","itemRef","itemScope","itemType","kind","lang","language","loop","low","manifest","maxLength","method","minLength","muted","nonce","noModule","noValidate","onAbort","onAfterPrint","onAuxClick","onBeforeMatch","onBeforePrint","onBeforeUnload","onBlur","onCanPlay","onCanPlayThrough","onContextLost","onContextMenu","onContextRestored","onCopy","onCueChange","onCut","onDblClick","onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop","onDurationChange","onEmptied","onEnded","onFocus","onFormData","onHashChange","onInput","onInvalid","onKeyDown","onKeyPress","onKeyUp","onLanguageChange","onLoad","onLoadedData","onLoadedMetadata","onLoadEnd","onLoadStart","onMessage","onMessageError","onMouseDown","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onOffline","onOnline","onPageHide","onPageShow","onPaste","onPause","onPlay","onPlaying","onPopState","onProgress","onRateChange","onRejectionHandled","onReset","onResize","onScroll","onScrollEnd","onSecurityPolicyViolation","onSeeked","onSeeking","onSlotChange","onStalled","onStorage","onSubmit","onSuspend","onTimeUpdate","onToggle","onUnhandledRejection","onUnload","onVolumeChange","onWaiting","onWheel","optimum","pattern","ping","placeholder","playsInline","popover","popoverTarget","popoverTargetAction","poster","preload","readOnly","referrerPolicy","rel","required","reversed","rowSpan","sandbox","scope","scoped","seamless","sizes","slot","span","spellCheck","srcDoc","srcLang","srcSet","tabIndex","translate","typeMustMatch","useMap","wrap","align","aLink","archive","axis","bgColor","border","bottomMargin","cellPadding","cellSpacing","charOff","classId","codeBase","codeType","compact","declare","face","frame","frameBorder","hSpace","leftMargin","longDesc","lowSrc","marginHeight","marginWidth","noResize","noHref","noShade","noWrap","profile","prompt","rev","rightMargin","scheme","scrolling","standby","summary","topMargin","vAlign","vLink","vSpace","allowTransparency","autoCorrect","autoSave","disablePictureInPicture","disableRemotePlayback","prefix","security","unselectable","svg","accentHeight","alignmentBaseline","arabicForm","baselineShift","capHeight","clipPath","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","dataType","enableBackground","fillRule","floodColor","fontFamily","fontSizeAdjust","fontStretch","fontStyle","fontVariant","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","horizAdvX","horizOriginX","horizOriginY","imageRendering","letterSpacing","lightingColor","markerEnd","markerMid","markerStart","navDown","navDownLeft","navDownRight","navLeft","navNext","navPrev","navRight","navUp","navUpLeft","navUpRight","onActivate","onBegin","onEnd","onFocusIn","onFocusOut","onMouseWheel","onRepeat","onShow","onZoom","overlinePosition","overlineThickness","paintOrder","panose1","renderingIntent","shapeRendering","stopColor","strikethroughPosition","strikethroughThickness","strokeDashArray","strokeDashOffset","strokeLineCap","strokeLineJoin","strokeMiterLimit","textDecoration","textRendering","transformOrigin","underlinePosition","underlineThickness","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","vHanging","vIdeographic","vMathematical","vectorEffect","vertAdvY","vertOriginX","vertOriginY","wordSpacing","writingMode","xHeight","playbackOrder","timelineBegin","about","accumulate","additive","alphabetic","amplitude","ascent","attributeType","azimuth","bandwidth","baseFrequency","baseProfile","bbox","begin","bias","by","calcMode","clip","clipPathUnits","contentScriptType","contentStyleType","defaultAction","descent","diffuseConstant","direction","dur","divisor","edgeMode","editable","elevation","exponent","externalResourcesRequired","filterRes","filterUnits","focusable","focusHighlight","format","fr","fx","fy","g1","g2","glyphRef","gradientTransform","gradientUnits","handler","hanging","hatchContentUnits","hatchUnits","ideographic","initialVisibility","in","in2","intercept","k1","k2","k3","k4","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","kerning","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","mathematical","mediaCharacterEncoding","mediaContentEncodings","mediaSize","mediaTime","numOctaves","operator","orient","overlay","pathLength","patternContentUnits","patternTransform","patternUnits","phase","pitch","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","propagate","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","requiredFonts","requiredFormats","resource","restart","rx","ry","scale","side","slope","snapshotTime","specularConstant","specularExponent","spreadMethod","spacing","startOffset","stdDeviation","stemh","stemv","stitchTiles","surfaceScale","syncBehavior","syncBehaviorDefault","syncMaster","syncTolerance","syncToleranceDefault","systemLanguage","tableValues","targetX","targetY","transformBehavior","u1","u2","unicode","viewTarget","visibility","widths","xChannelSelector","yChannelSelector","zoomAndPan","htmlBase","svgBase","valid","dash","cap","kebab","$0","camelcase","hastToReact","pointEnd","point","pointStart","_construct","Parent","Class","_wrapNativeSuper","_cache","Wrapper","stringifyPosition","VFileMessage","_Error","causeOrReason","optionsOrParentOrPlace","legacyCause","place","ancestors","cause","ruleId","fatal","file","actual","expected","note","emptyMap","dashSomething","tableElements","tableCellElement","toJsxRuntime","tree","filePath","development","jsxDEV","isStaticChildren","columnNumber","fileName","lineNumber","developmentCreate","productionCreate","components","elementAttributeNameCase","ignoreInvalidStyle","passKeys","passNode","schema","stylePropertyNameCase","tableCellAlignToStyle","one","parentSchema","countsByTagName","createChildren","alignValue","createProperty","createProperties","thing","Type","dashes","padRight","padLeft","commas","styleObject","styleToObject","replacer","toCamel","parseStyle","domCasing","cssCasing","transformStyleToCssCasing","transformStylesToCssCasing","toDash","$1","urlAttributes","emptyOptions","includeImageAlt","includeHtml","chunkStart","subtokenize","events","lineIndex","otherIndex","otherEvent","subevents","more","jumps","_tokenizer","_isInFirstContentOfListItem","contentType","subcontent","_container","eventIndex","stream","previous","startPosition","startPositions","tokenizer","parser","childEvents","gaps","adjust","breaks","sliceStream","defineSkip","_gfmTasklistFirstContentOfListItem","write","syntaxExtension","extension","hook","constructs","before","unicodePunctuationInternal","regexCheck","asciiAlpha","asciiAlphanumeric","asciiAtext","asciiControl","asciiDigit","asciiHexDigit","asciiPunctuation","markdownLineEnding","markdownLineEndingOrSpace","markdownSpace","unicodeWhitespace","regex","factorySpace","limit","POSITIVE_INFINITY","enter","consume","exit","tokenize","contentStart","attempt","contentInitial","lineStart","childFlow","childToken","lineStartOffset","continued","containerState","continuation","documentContinue","checkNewContainers","_closeFlow","closeFlow","indexBeforeExits","indexBeforeFlow","exitContainers","documentContinued","currentConstruct","concrete","flowStart","interrupt","_gfmTableDynamicInterruptHack","containerConstruct","thereIsANewContainer","thereIsNoNewContainer","containerContinue","flow","flowContinue","writeToChild","eof","nok","disable","null","blankLine","after","partial","chunkInside","contentEnd","continuationConstruct","contentContinue","prefixed","sliceSerialize","initial","flowInitial","afterConstruct","resolveAll","createResolver","initializeFactory","field","notText","atBreak","resolveAllLineSuffixes","extraResolver","chunks","bufferIndex","tabs","chunk","_index","_bufferIndex","createTokenizer","initialize","columnStart","resolveAllConstructs","accountForPotentialSkip","fields","constructFactory","addResult","onsuccessfulcheck","expandTabs","atTab","serializeChunks","main","startIndex","startBufferIndex","endIndex","endBufferIndex","sliceChunks","_point","chunkIndex","go","restore","onreturn","returnState","bogusState","listOfConstructs","constructIndex","handleListOfConstructs","def","handleMapOfConstructs","handleConstruct","startPoint","startPrevious","startCurrentConstruct","startEventsIndex","startStack","resolveTo","thematicBreak","sequence","initialSize","atMarker","inside","onBlank","listItemPrefixWhitespaceConstruct","endOfPrefix","otherPrefix","initialBlankLine","notBlank","furtherBlankLines","notInCurrentItem","indentConstruct","blockQuote","contBefore","factoryDestination","literalType","literalMarkerType","rawType","stringType","balance","enclosedBefore","enclosed","enclosedEscape","rawEscape","factoryLabel","markerType","labelInside","labelEscape","factoryTitle","factoryWhitespace","normalizeIdentifier","identifier","labelAfter","markerAfter","destinationBefore","destinationAfter","titleBefore","afterWhitespace","beforeMarker","titleAfter","titleAfterOptionalWhitespace","codeIndented","afterPrefix","furtherStart","headingAtx","sequenceOpen","sequenceFurther","setextUnderline","paragraph","heading","htmlBlockNames","htmlRawNames","htmlFlow","closingTag","markerB","declarationOpen","tagCloseStart","continuationDeclarationInside","commentOpenInside","cdataOpenInside","slash","basicSelfClosing","completeClosingTagAfter","completeAttributeNameBefore","completeEnd","completeAttributeName","completeAttributeNameAfter","completeAttributeValueBefore","completeAttributeValueQuoted","completeAttributeValueUnquoted","completeAttributeValueQuotedAfter","completeAfter","continuationCommentInside","continuationRawTagOpen","continuationClose","continuationCdataInside","continuationStart","blankLineBefore","continuationAfter","nonLazyContinuationStart","continuationStartNonLazy","continuationBefore","continuationRawEndTag","nonLazyContinuation","codeFenced","closeStart","startBefore","beforeSequenceClose","sequenceClose","sizeOpen","sequenceCloseAfter","initialPrefix","beforeSequenceOpen","infoBefore","atNonLazyBreak","metaBefore","contentBefore","beforeContentChunk","contentChunk","decodeNamedCharacterReference","characterReference","numeric","characterEscape","lineEnding","labelEnd","labelStart","_balanced","_inactive","labelEndNok","resourceConstruct","labelEndOk","referenceFullConstruct","referenceNotFull","referenceCollapsedConstruct","group","insideSpan","resourceBefore","resourceOpen","resourceEnd","resourceDestinationAfter","resourceDestinationMissing","resourceBetween","resourceTitleAfter","referenceFullAfter","referenceFullMissing","referenceCollapsedOpen","labelStartImage","classifyCharacter","unicodePunctuation","attention","attentionMarkers","_open","_close","openingSequence","closingSequence","use","nextEvents","movePoint","autolink","schemeOrEmailAtext","emailAtext","schemeInsideOrEmailAtext","urlInside","emailAtSignOrDot","emailLabel","emailValue","htmlText","instruction","tagOpen","commentEnd","commentClose","lineEndingBefore","cdata","cdataClose","cdataEnd","instructionClose","tagClose","tagCloseBetween","tagOpenBetween","tagOpenAttributeName","tagOpenAttributeNameAfter","tagOpenAttributeValueBefore","tagOpenAttributeValueQuoted","tagOpenAttributeValueUnquoted","tagOpenAttributeValueQuotedAfter","lineEndingAfter","lineEndingAfterPrefix","labelStartLink","hardBreakEscape","codeText","between","tailExitIndex","headEnterIndex","_document","_flowInitial","_flow","_string","_text","resolveText","extensions","combineExtensions","defaultConstructs","decodeNumericCharacterReference","characterEscapeOrReference","decode","$2","hex","fromMarkdown","encoding","transforms","canContainEols","opener","autolinkProtocol","onenterdata","autolinkEmail","atxHeading","codeFlow","codeFencedFenceInfo","codeFencedFenceMeta","codeTextData","codeFlowValue","definitionDestinationString","definitionLabelString","definitionTitleString","emphasis","hardBreak","hardBreakTrailing","htmlFlowData","htmlTextData","image","listItem","listItemValue","onenterlistitemvalue","listOrdered","onenterlistordered","listUnordered","reference","onenterreference","referenceString","resourceDestinationString","resourceTitleString","setextHeading","strong","closer","atxHeadingSequence","onexitatxheadingsequence","onexitautolinkemail","onexitautolinkprotocol","characterEscapeValue","onexitdata","characterReferenceMarkerHexadecimal","onexitcharacterreferencemarker","characterReferenceMarkerNumeric","characterReferenceValue","onexitcharacterreferencevalue","onexitcodefenced","codeFencedFence","onexitcodefencedfence","onexitcodefencedfenceinfo","onexitcodefencedfencemeta","onexitcodeindented","onexitcodetext","onexitdefinitiondestinationstring","onexitdefinitionlabelstring","onexitdefinitiontitlestring","onexithardbreak","onexithtmlflow","onexithtmltext","onexitimage","onexitlabel","labelText","onexitlabeltext","onexitlineending","onexitlink","onexitreferencestring","onexitresourcedestinationstring","onexitresourcetitlestring","onexitresource","onexitsetextheading","setextHeadingLineSequence","onexitsetextheadinglinesequence","setextHeadingText","onexitsetextheadingtext","configure","mdastExtensions","compile","tokenStack","resume","listStack","prepareList","defaultOnError","firstBlankLineIndex","containerBalance","listSpread","tailIndex","tailEvent","_spread","and","errorHandler","onExitError","expectingFirstListItemValue","flowCodeInside","depth","setextHeadingSlurpLineEnding","codePointAt","siblings","atHardBreak","inReference","referenceType","ancestor","decodeString","fragment","characterReferenceType","ordered","spread","compiler","postprocess","atCarriageReturn","endPosition","TextDecoder","lastIndex","preprocess","combined","_combined$key","_combined$key2","remarkParse","doc","_regeneratorRuntime","asyncIterator","define","Generator","makeInvokeMethod","GeneratorFunction","GeneratorFunctionPrototype","defineIteratorMethods","_invoke","AsyncIterator","invoke","__await","callInvokeWithMethodAndArg","delegate","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","resultName","nextLoc","pushTryEntry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","isGeneratorFunction","awrap","prev","stop","rval","handle","complete","finish","delegateYield","asyncGeneratorStep","gen","_next","_throw","env","serialized","unpair","_$index","_step","_iterator","_step2","_iterator2","_step2$value","_step3","_iterator3","_step3$value","_step4","_iterator4","BigInt","deserializer","EMPTY","asString","shouldSkip","_ref3","TYPE","json","lossy","strict","_typeOf2","toJSON","toISOString","structuredClone","normalizeUri","skip","defaultFootnoteBackContent","rereferenceIndex","defaultFootnoteBackLabel","referenceIndex","_objectWithoutProperties","excluded","sourceKeys","sourceSymbolKeys","convert","castFactory","anyFactory","checkAsRecord","nodeAsRecord","propsFactory","typeFactory","tests","testFunction","looksLikeANode","CONTINUE","EXIT","SKIP","visitParents","visitor","parents","visit","subresult","grandparents","toResult","nodeAsParent","testOrVisitor","visitorOrReverse","maybeReverse","revert","subtype","suffix","contents","listItemLoose","trimLines","trimLine","blockquote","patch","applyData","break","footnoteReference","counter","clobberPrefix","safeId","footnoteOrder","reuseCounter","footnoteCounts","dataFootnoteRef","sup","allowDangerousHtml","imageReference","definitionById","inlineCode","linkReference","loose","listLoose","table","firstRow","tableContent","tableCell","tableRow","cellIndex","cells","cell","toml","yaml","footnoteDefinition","hChildren","hProperties","defaultUnknownHandler","nodes","trimMarkdownSpaceStart","toHast","footnoteById","defaultHandlers","passThrough","shallow","_excluded","unknownHandler","createState","foot","footnoteBackContent","footnoteBackLabel","footnoteLabel","footnoteLabelTagName","footnoteLabelProperties","listItems","backReferences","counts","dataFootnoteBackref","_tail$children","tailTail","dataFootnotes","remarkRehype","_callee","hastTree","_x2","_toArray","bail","trough","fns","pipeline","middlewareIndex","_len2","_key2","middleware","wrapped","_len3","_key3","fnExpectsCallback","_len4","_key4","middelware","basename","ext","assertPath","seenNonSlash","firstNonSlashEnd","extIndex","dirname","unmatchedSlash","extname","startPart","startDot","preDotState","joined","segments","absolute","allowAboveRoot","lastSlashIndex","lastSegmentLength","lastSlash","dots","normalizeString","sep","proc","cwd","isUrl","fileUrlOrPath","protocol","auth","urlToPath","hostname","pathname","third","decodeURIComponent","getPathFromURLPosix","VFile","isUint8Array","history","messages","stored","assertNonEmpty","assertPart","stem","part","CallableInstance","proto","Processor","_CallableInstance","Compiler","Parser","attachers","freezeIndex","frozen","namespace","transformers","attacher","assertUnfrozen","_this$attachers$this$","transformer","realFile","vfile","assertParser","assertCompiler","executor","parseTree","realDone","compileTree","compileResult","process","assertDone","assertNode","outputTree","resultingTree","addPlugin","addList","addPreset","_value","plugins","plugin","entryIndex","_parameters2","currentPrimary","isPlainObj","unified","asyncName","looksLikeAVFile","emptyPlugins","emptyRemarkRehypeOptions","safeProtocol","deprecations","Markdown","allowedElements","allowElement","disallowedElements","rehypePlugins","remarkPlugins","remarkRehypeOptions","skipHtml","unwrapDisallowed","urlTransform","defaultUrlTransform","processor","deprecation","mdastTree","runSync","_parent$children","colon","questionMark","numberSign","RulesTab","ReactMarkdown","HelpModal","exceptions","selectedTab","CardPage","selectSpecies","selectedSpeciesID","selectRole","selectedRoleID","selectBackground","selectedBackgroundID","select","roleIDs","backgroundIDs","getOverviewSection","speciesCard","roleCard","backgroundCard","getSpeciesSection","getRoleSection","getBackgroundSection","canSelect","EquipmentPage","overviewCards","FinishPage","rename","recolor","HeroBuilderModal","selectCards","MagicItemInfoModal","setComparison","getIsEquippable","equipped","equippable","canReplace","sellItem","PacksModal","selectedPack","owned","addPacks","getPrice","roles","backgrounds","ownedPacks","notOwnedPacks","removePack","notOwned","CampaignMapPage","conquer","getSidebar","canAttack","heroesExist","showHeroSelection","ownedFraction","regenerateCampaignMap","DevPage","checkDamage","found","categories","addToList","HeroesPage","selectBoon","redeemBoon","selectedBoon","selectedHero","selectRetiringHero","retiringHero","retireHero","getContent","atHeroLimit","addHero","heroCards","ItemsPage","showMarket","market","showEnchant","show","newItem","selectedMagicItem","sellMagicItem","moneySection","addMoney","buySection","magicItemSection","potionSection","mundaneItemSection","mundaneItems","IconHexagon","IconHexagonFilled","BuyStructureModal","getStructures","buyStructure","StrongholdPage","addingStructure","sellStructure","getStrongholdBenefits","heroRedraws","itemRedraws","featureRedraws","actionRedraws","magicRedraws","structureRedraws","benefitMods","detrimentMods","additionalActions","additionalHeroes","heroXP","upgradeCost","charge","bolts","chargeStructure","upgradeStructure","addSection","CampaignScreen","setScreen","availablePacks","logo","showPacks","showHelp","hasExceptions","IconLayoutSidebarLeftCollapse","IconLayoutSidebarLeftExpand","IconLayoutBottombarCollapse","IconLayoutBottombarExpand","IconRotate2","IconRotateClockwise2","IconZoomOut","IconZoomIn","IconArrowBackUpDouble","IconConfetti","IconArrowUp","IconViewfinder","ActionControls","getNotSelected","baseCards","benefit","getInProgress","parameterSet","showParameter","changeButton","changeControls","candidate","setActionParameterValue","angle","currentActionParameter","setActionParameter","getUsed","collapsed","EncounterControls","finishEncounter","setEncounterState","Retreat","IconUser","IconArrowsMove","IconCircleCheck","IconFlask2","HeroEndturn","HeroMove","moveCosts","HeroOverview","showToken","showCharacterSheet","switchAllegiance","HeroPotions","potionSections","HeroControls","InactiveControls","MonsterControls","setThinking","thinking","runMonsterTurn","RoundControls","addHeroToEncounter","heroesActive","heroesUnconscious","heroesDead","monstersActive","monstersUnconscious","monstersDead","stats","regenerateEncounterMap","EncounterScreen","showDetailsToast","mapRef","_this$mapRef$current","nudgeMapSize","mapSquareSize","toggleLeftPanel","showLeftPanel","toggleBottomPanel","showBottomPanel","selectCombatant","selectedActionParameter","usesCombatantIDs","ids","selectLoot","selectSquare","usesSquares","clearSelection","setManualEncounterState","manualEncounterState","showDetailsCombatant","detailsCombatant","detailsLoot","detailsToast","showDetailsLoot","clearDetails","getLeftControls","selectedIDs","getTopControls","rotateMap","getBottomControls","getRightControls","unconscious","dead","LandingScreen","mainBtn","continueCampaign","startCampaign","packsBtn","SetupScreen","createHero","createHeroes","speciesDeck","roleDeck","backgroundDeck","needed","addHeroes","beginCampaign","ScreenType","Main","island","team","arrayBuffer","Setup","Campaign","_this$state$game","Encounter","nextIsland","currentGame","restartCampaign","Landing","total","upgrade","sell","acting","onFinished","perform","dialogContent","_game$items","_this$state$game2","Toaster","Layout","isWideEnough","isTallEnough","isPortrait","container","getElementById"],"sourceRoot":""}