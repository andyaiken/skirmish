/*! For license information please see main.d6107a0d.js.LICENSE.txt */
(()=>{var e={240:(e,t)=>{"use strict";t.E=function(e,t){return o(e).some((function(e){var n=e.inverse,a="all"===e.type||t.type===e.type;if(a&&n||!a&&!n)return!1;var r=e.expressions.every((function(e){var n=e.feature,a=e.modifier,r=e.value,s=t[n];if(!s)return!1;switch(n){case"orientation":case"scan":return s.toLowerCase()===r.toLowerCase();case"width":case"height":case"device-width":case"device-height":r=u(r),s=u(s);break;case"resolution":r=c(r),s=c(s);break;case"aspect-ratio":case"device-aspect-ratio":case"device-pixel-ratio":r=l(r),s=l(s);break;case"grid":case"color":case"color-index":case"monochrome":r=parseInt(r,10)||1,s=parseInt(s,10)||0}switch(a){case"min":return s>=r;case"max":return s<=r;default:return s===r}}));return r&&!n||!r&&n}))};var n=/(?:(only|not)?\s*([^\s\(\)]+)(?:\s*and)?\s*)?(.+)?/i,a=/\(\s*([^\s\:\)]+)\s*(?:\:\s*([^\s\)]+))?\s*\)/,r=/^(?:(min|max)-)?(.+)/,s=/(em|rem|px|cm|mm|in|pt|pc)?$/,i=/(dpi|dpcm|dppx)?$/;function o(e){return e.split(",").map((function(e){var t=(e=e.trim()).match(n),s=t[1],i=t[2],o=t[3]||"",l={};return l.inverse=!!s&&"not"===s.toLowerCase(),l.type=i?i.toLowerCase():"all",o=o.match(/\([^\)]+\)/g)||[],l.expressions=o.map((function(e){var t=e.match(a),n=t[1].toLowerCase().match(r);return{modifier:n[1],feature:n[2],value:t[2]}})),l}))}function l(e){var t,n=Number(e);return n||(n=(t=e.match(/^(\d+)\s*\/\s*(\d+)$/))[1]/t[2]),n}function c(e){var t=parseFloat(e);switch(String(e).match(i)[1]){case"dpcm":return t/2.54;case"dppx":return 96*t;default:return t}}function u(e){var t=parseFloat(e);switch(String(e).match(s)[1]){case"em":case"rem":return 16*t;case"cm":return 96*t/2.54;case"mm":return 96*t/2.54/10;case"in":return 96*t;case"pt":return 72*t;case"pc":return 72*t/12;default:return t}}},132:e=>{"use strict";var t=Object.prototype.hasOwnProperty,n=Object.prototype.toString,a=Object.defineProperty,r=Object.getOwnPropertyDescriptor,s=function(e){return"function"===typeof Array.isArray?Array.isArray(e):"[object Array]"===n.call(e)},i=function(e){if(!e||"[object Object]"!==n.call(e))return!1;var a,r=t.call(e,"constructor"),s=e.constructor&&e.constructor.prototype&&t.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!r&&!s)return!1;for(a in e);return"undefined"===typeof a||t.call(e,a)},o=function(e,t){a&&"__proto__"===t.name?a(e,t.name,{enumerable:!0,configurable:!0,value:t.newValue,writable:!0}):e[t.name]=t.newValue},l=function(e,n){if("__proto__"===n){if(!t.call(e,n))return;if(r)return r(e,n).value}return e[n]};e.exports=function e(){var t,n,a,r,c,u,d=arguments[0],p=1,h=arguments.length,m=!1;for("boolean"===typeof d&&(m=d,d=arguments[1]||{},p=2),(null==d||"object"!==typeof d&&"function"!==typeof d)&&(d={});p<h;++p)if(null!=(t=arguments[p]))for(n in t)a=l(d,n),d!==(r=l(t,n))&&(m&&r&&(i(r)||(c=s(r)))?(c?(c=!1,u=a&&s(a)?a:[]):u=a&&i(a)?a:{},o(d,{name:n,newValue:e(m,u,r)})):"undefined"!==typeof r&&o(d,{name:n,newValue:r}));return d}},65:e=>{var t=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,n=/\n/g,a=/^\s*/,r=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,s=/^:\s*/,i=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,o=/^[;\s]*/,l=/^\s+|\s+$/g,c="";function u(e){return e?e.replace(l,c):c}e.exports=function(e,l){if("string"!==typeof e)throw new TypeError("First argument must be a string");if(!e)return[];l=l||{};var d=1,p=1;function h(e){var t=e.match(n);t&&(d+=t.length);var a=e.lastIndexOf("\n");p=~a?e.length-a:p+e.length}function m(){var e={line:d,column:p};return function(t){return t.position=new f(e),v(),t}}function f(e){this.start=e,this.end={line:d,column:p},this.source=l.source}f.prototype.content=e;var g=[];function y(t){var n=new Error(l.source+":"+d+":"+p+": "+t);if(n.reason=t,n.filename=l.source,n.line=d,n.column=p,n.source=e,!l.silent)throw n;g.push(n)}function b(t){var n=t.exec(e);if(n){var a=n[0];return h(a),e=e.slice(a.length),n}}function v(){b(a)}function k(e){var t;for(e=e||[];t=x();)!1!==t&&e.push(t);return e}function x(){var t=m();if("/"==e.charAt(0)&&"*"==e.charAt(1)){for(var n=2;c!=e.charAt(n)&&("*"!=e.charAt(n)||"/"!=e.charAt(n+1));)++n;if(n+=2,c===e.charAt(n-1))return y("End of comment missing");var a=e.slice(2,n-2);return p+=2,h(a),e=e.slice(n),p+=2,t({type:"comment",comment:a})}}function S(){var e=m(),n=b(r);if(n){if(x(),!b(s))return y("property missing ':'");var a=b(i),l=e({type:"declaration",property:u(n[0].replace(t,c)),value:a?u(a[0].replace(t,c)):c});return b(o),l}}return v(),function(){var e,t=[];for(k(t);e=S();)!1!==e&&(t.push(e),k(t));return t}()}},842:(e,t,n)=>{e.exports=function e(t,n,a){function r(i,o){if(!n[i]){if(!t[i]){if(s)return s(i,!0);var l=new Error("Cannot find module '"+i+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[i]={exports:{}};t[i][0].call(c.exports,(function(e){var n=t[i][1][e];return r(n||e)}),c,c.exports,e,t,n,a)}return n[i].exports}for(var s=void 0,i=0;i<a.length;i++)r(a[i]);return r}({1:[function(e,t,a){(function(e){"use strict";var n,a,r=e.MutationObserver||e.WebKitMutationObserver;if(r){var s=0,i=new r(u),o=e.document.createTextNode("");i.observe(o,{characterData:!0}),n=function(){o.data=s=++s%2}}else if(e.setImmediate||"undefined"===typeof e.MessageChannel)n="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){u(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(u,0)};else{var l=new e.MessageChannel;l.port1.onmessage=u,n=function(){l.port2.postMessage(0)}}var c=[];function u(){var e,t;a=!0;for(var n=c.length;n;){for(t=c,c=[],e=-1;++e<n;)t[e]();n=c.length}a=!1}function d(e){1!==c.push(e)||a||n()}t.exports=d}).call(this,"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}],2:[function(e,t,n){"use strict";var a=e(1);function r(){}var s={},i=["REJECTED"],o=["FULFILLED"],l=["PENDING"];function c(e){if("function"!==typeof e)throw new TypeError("resolver must be a function");this.state=l,this.queue=[],this.outcome=void 0,e!==r&&h(this,e)}function u(e,t,n){this.promise=e,"function"===typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"===typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function d(e,t,n){a((function(){var a;try{a=t(n)}catch(r){return s.reject(e,r)}a===e?s.reject(e,new TypeError("Cannot resolve promise with itself")):s.resolve(e,a)}))}function p(e){var t=e&&e.then;if(e&&("object"===typeof e||"function"===typeof e)&&"function"===typeof t)return function(){t.apply(e,arguments)}}function h(e,t){var n=!1;function a(t){n||(n=!0,s.reject(e,t))}function r(t){n||(n=!0,s.resolve(e,t))}function i(){t(r,a)}var o=m(i);"error"===o.status&&a(o.value)}function m(e,t){var n={};try{n.value=e(t),n.status="success"}catch(a){n.status="error",n.value=a}return n}function f(e){return e instanceof this?e:s.resolve(new this(r),e)}function g(e){var t=new this(r);return s.reject(t,e)}function y(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,a=!1;if(!n)return this.resolve([]);for(var i=new Array(n),o=0,l=-1,c=new this(r);++l<n;)u(e[l],l);return c;function u(e,r){function l(e){i[r]=e,++o!==n||a||(a=!0,s.resolve(c,i))}t.resolve(e).then(l,(function(e){a||(a=!0,s.reject(c,e))}))}}function b(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,a=!1;if(!n)return this.resolve([]);for(var i=-1,o=new this(r);++i<n;)l(e[i]);return o;function l(e){t.resolve(e).then((function(e){a||(a=!0,s.resolve(o,e))}),(function(e){a||(a=!0,s.reject(o,e))}))}}t.exports=c,c.prototype.catch=function(e){return this.then(null,e)},c.prototype.then=function(e,t){if("function"!==typeof e&&this.state===o||"function"!==typeof t&&this.state===i)return this;var n=new this.constructor(r);return this.state!==l?d(n,this.state===o?e:t,this.outcome):this.queue.push(new u(n,e,t)),n},u.prototype.callFulfilled=function(e){s.resolve(this.promise,e)},u.prototype.otherCallFulfilled=function(e){d(this.promise,this.onFulfilled,e)},u.prototype.callRejected=function(e){s.reject(this.promise,e)},u.prototype.otherCallRejected=function(e){d(this.promise,this.onRejected,e)},s.resolve=function(e,t){var n=m(p,t);if("error"===n.status)return s.reject(e,n.value);var a=n.value;if(a)h(e,a);else{e.state=o,e.outcome=t;for(var r=-1,i=e.queue.length;++r<i;)e.queue[r].callFulfilled(t)}return e},s.reject=function(e,t){e.state=i,e.outcome=t;for(var n=-1,a=e.queue.length;++n<a;)e.queue[n].callRejected(t);return e},c.resolve=f,c.reject=g,c.all=y,c.race=b},{1:1}],3:[function(e,t,a){(function(t){"use strict";"function"!==typeof t.Promise&&(t.Promise=e(2))}).call(this,"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{2:2}],4:[function(e,t,n){"use strict";var a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(){try{if("undefined"!==typeof indexedDB)return indexedDB;if("undefined"!==typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!==typeof mozIndexedDB)return mozIndexedDB;if("undefined"!==typeof OIndexedDB)return OIndexedDB;if("undefined"!==typeof msIndexedDB)return msIndexedDB}catch(e){return}}var i=s();function o(){try{if(!i||!i.open)return!1;var e="undefined"!==typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),t="function"===typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!e||t)&&"undefined"!==typeof indexedDB&&"undefined"!==typeof IDBKeyRange}catch(n){return!1}}function l(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(r){if("TypeError"!==r.name)throw r;for(var n=new("undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof MSBlobBuilder?MSBlobBuilder:"undefined"!==typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),a=0;a<e.length;a+=1)n.append(e[a]);return n.getBlob(t.type)}}"undefined"===typeof Promise&&e(3);var c=Promise;function u(e,t){t&&e.then((function(e){t(null,e)}),(function(e){t(e)}))}function d(e,t,n){"function"===typeof t&&e.then(t),"function"===typeof n&&e.catch(n)}function p(e){return"string"!==typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e)),e}function h(){if(arguments.length&&"function"===typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var m="local-forage-detect-blob-support",f=void 0,g={},y=Object.prototype.toString,b="readonly",v="readwrite";function k(e){for(var t=e.length,n=new ArrayBuffer(t),a=new Uint8Array(n),r=0;r<t;r++)a[r]=e.charCodeAt(r);return n}function x(e){return new c((function(t){var n=e.transaction(m,v),a=l([""]);n.objectStore(m).put(a,"key"),n.onabort=function(e){e.preventDefault(),e.stopPropagation(),t(!1)},n.oncomplete=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/),n=navigator.userAgent.match(/Edge\//);t(n||!e||parseInt(e[1],10)>=43)}})).catch((function(){return!1}))}function S(e){return"boolean"===typeof f?c.resolve(f):x(e).then((function(e){return f=e}))}function w(e){var t=g[e.name],n={};n.promise=new c((function(e,t){n.resolve=e,n.reject=t})),t.deferredOperations.push(n),t.dbReady?t.dbReady=t.dbReady.then((function(){return n.promise})):t.dbReady=n.promise}function C(e){var t=g[e.name].deferredOperations.pop();if(t)return t.resolve(),t.promise}function A(e,t){var n=g[e.name].deferredOperations.pop();if(n)return n.reject(t),n.promise}function j(e,t){return new c((function(n,a){if(g[e.name]=g[e.name]||R(),e.db){if(!t)return n(e.db);w(e),e.db.close()}var r=[e.name];t&&r.push(e.version);var s=i.open.apply(i,r);t&&(s.onupgradeneeded=function(t){var n=s.result;try{n.createObjectStore(e.storeName),t.oldVersion<=1&&n.createObjectStore(m)}catch(a){if("ConstraintError"!==a.name)throw a;console.warn('The database "'+e.name+'" has been upgraded from version '+t.oldVersion+" to version "+t.newVersion+', but the storage "'+e.storeName+'" already exists.')}}),s.onerror=function(e){e.preventDefault(),a(s.error)},s.onsuccess=function(){var t=s.result;t.onversionchange=function(e){e.target.close()},n(t),C(e)}}))}function D(e){return j(e,!1)}function E(e){return j(e,!0)}function I(e,t){if(!e.db)return!0;var n=!e.db.objectStoreNames.contains(e.storeName),a=e.version<e.db.version,r=e.version>e.db.version;if(a&&(e.version!==t&&console.warn('The database "'+e.name+"\" can't be downgraded from version "+e.db.version+" to version "+e.version+"."),e.version=e.db.version),r||n){if(n){var s=e.db.version+1;s>e.version&&(e.version=s)}return!0}return!1}function N(e){return new c((function(t,n){var a=new FileReader;a.onerror=n,a.onloadend=function(n){var a=btoa(n.target.result||"");t({__local_forage_encoded_blob:!0,data:a,type:e.type})},a.readAsBinaryString(e)}))}function P(e){return l([k(atob(e.data))],{type:e.type})}function M(e){return e&&e.__local_forage_encoded_blob}function B(e){var t=this,n=t._initReady().then((function(){var e=g[t._dbInfo.name];if(e&&e.dbReady)return e.dbReady}));return d(n,e,e),n}function F(e){w(e);for(var t=g[e.name],n=t.forages,a=0;a<n.length;a++){var r=n[a];r._dbInfo.db&&(r._dbInfo.db.close(),r._dbInfo.db=null)}return e.db=null,D(e).then((function(t){return e.db=t,I(e)?E(e):t})).then((function(a){e.db=t.db=a;for(var r=0;r<n.length;r++)n[r]._dbInfo.db=a})).catch((function(t){throw A(e,t),t}))}function T(e,t,n,a){void 0===a&&(a=1);try{var r=e.db.transaction(e.storeName,t);n(null,r)}catch(s){if(a>0&&(!e.db||"InvalidStateError"===s.name||"NotFoundError"===s.name))return c.resolve().then((function(){if(!e.db||"NotFoundError"===s.name&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),E(e)})).then((function(){return F(e).then((function(){T(e,t,n,a-1)}))})).catch(n);n(s)}}function R(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function q(e){var t=this,n={db:null};if(e)for(var a in e)n[a]=e[a];var r=g[n.name];r||(r=R(),g[n.name]=r),r.forages.push(t),t._initReady||(t._initReady=t.ready,t.ready=B);var s=[];function i(){return c.resolve()}for(var o=0;o<r.forages.length;o++){var l=r.forages[o];l!==t&&s.push(l._initReady().catch(i))}var u=r.forages.slice(0);return c.all(s).then((function(){return n.db=r.db,D(n)})).then((function(e){return n.db=e,I(n,t._defaultConfig.version)?E(n):e})).then((function(e){n.db=r.db=e,t._dbInfo=n;for(var a=0;a<u.length;a++){var s=u[a];s!==t&&(s._dbInfo.db=n.db,s._dbInfo.version=n.version)}}))}function L(e,t){var n=this;e=p(e);var a=new c((function(t,a){n.ready().then((function(){T(n._dbInfo,b,(function(r,s){if(r)return a(r);try{var i=s.objectStore(n._dbInfo.storeName).get(e);i.onsuccess=function(){var e=i.result;void 0===e&&(e=null),M(e)&&(e=P(e)),t(e)},i.onerror=function(){a(i.error)}}catch(o){a(o)}}))})).catch(a)}));return u(a,t),a}function z(e,t){var n=this,a=new c((function(t,a){n.ready().then((function(){T(n._dbInfo,b,(function(r,s){if(r)return a(r);try{var i=s.objectStore(n._dbInfo.storeName).openCursor(),o=1;i.onsuccess=function(){var n=i.result;if(n){var a=n.value;M(a)&&(a=P(a));var r=e(a,n.key,o++);void 0!==r?t(r):n.continue()}else t()},i.onerror=function(){a(i.error)}}catch(l){a(l)}}))})).catch(a)}));return u(a,t),a}function O(e,t,n){var a=this;e=p(e);var r=new c((function(n,r){var s;a.ready().then((function(){return s=a._dbInfo,"[object Blob]"===y.call(t)?S(s.db).then((function(e){return e?t:N(t)})):t})).then((function(t){T(a._dbInfo,v,(function(s,i){if(s)return r(s);try{var o=i.objectStore(a._dbInfo.storeName);null===t&&(t=void 0);var l=o.put(t,e);i.oncomplete=function(){void 0===t&&(t=null),n(t)},i.onabort=i.onerror=function(){var e=l.error?l.error:l.transaction.error;r(e)}}catch(c){r(c)}}))})).catch(r)}));return u(r,n),r}function H(e,t){var n=this;e=p(e);var a=new c((function(t,a){n.ready().then((function(){T(n._dbInfo,v,(function(r,s){if(r)return a(r);try{var i=s.objectStore(n._dbInfo.storeName).delete(e);s.oncomplete=function(){t()},s.onerror=function(){a(i.error)},s.onabort=function(){var e=i.error?i.error:i.transaction.error;a(e)}}catch(o){a(o)}}))})).catch(a)}));return u(a,t),a}function _(e){var t=this,n=new c((function(e,n){t.ready().then((function(){T(t._dbInfo,v,(function(a,r){if(a)return n(a);try{var s=r.objectStore(t._dbInfo.storeName).clear();r.oncomplete=function(){e()},r.onabort=r.onerror=function(){var e=s.error?s.error:s.transaction.error;n(e)}}catch(i){n(i)}}))})).catch(n)}));return u(n,e),n}function U(e){var t=this,n=new c((function(e,n){t.ready().then((function(){T(t._dbInfo,b,(function(a,r){if(a)return n(a);try{var s=r.objectStore(t._dbInfo.storeName).count();s.onsuccess=function(){e(s.result)},s.onerror=function(){n(s.error)}}catch(i){n(i)}}))})).catch(n)}));return u(n,e),n}function W(e,t){var n=this,a=new c((function(t,a){e<0?t(null):n.ready().then((function(){T(n._dbInfo,b,(function(r,s){if(r)return a(r);try{var i=s.objectStore(n._dbInfo.storeName),o=!1,l=i.openKeyCursor();l.onsuccess=function(){var n=l.result;n?0===e||o?t(n.key):(o=!0,n.advance(e)):t(null)},l.onerror=function(){a(l.error)}}catch(c){a(c)}}))})).catch(a)}));return u(a,t),a}function V(e){var t=this,n=new c((function(e,n){t.ready().then((function(){T(t._dbInfo,b,(function(a,r){if(a)return n(a);try{var s=r.objectStore(t._dbInfo.storeName).openKeyCursor(),i=[];s.onsuccess=function(){var t=s.result;t?(i.push(t.key),t.continue()):e(i)},s.onerror=function(){n(s.error)}}catch(o){n(o)}}))})).catch(n)}));return u(n,e),n}function Q(e,t){t=h.apply(this,arguments);var n=this.config();(e="function"!==typeof e&&e||{}).name||(e.name=e.name||n.name,e.storeName=e.storeName||n.storeName);var a,r=this;if(e.name){var s=e.name===n.name&&r._dbInfo.db?c.resolve(r._dbInfo.db):D(e).then((function(t){var n=g[e.name],a=n.forages;n.db=t;for(var r=0;r<a.length;r++)a[r]._dbInfo.db=t;return t}));a=e.storeName?s.then((function(t){if(t.objectStoreNames.contains(e.storeName)){var n=t.version+1;w(e);var a=g[e.name],r=a.forages;t.close();for(var s=0;s<r.length;s++){var o=r[s];o._dbInfo.db=null,o._dbInfo.version=n}var l=new c((function(t,a){var r=i.open(e.name,n);r.onerror=function(e){r.result.close(),a(e)},r.onupgradeneeded=function(){r.result.deleteObjectStore(e.storeName)},r.onsuccess=function(){var e=r.result;e.close(),t(e)}}));return l.then((function(e){a.db=e;for(var t=0;t<r.length;t++){var n=r[t];n._dbInfo.db=e,C(n._dbInfo)}})).catch((function(t){throw(A(e,t)||c.resolve()).catch((function(){})),t}))}})):s.then((function(t){w(e);var n=g[e.name],a=n.forages;t.close();for(var r=0;r<a.length;r++)a[r]._dbInfo.db=null;var s=new c((function(t,n){var a=i.deleteDatabase(e.name);a.onerror=function(){var e=a.result;e&&e.close(),n(a.error)},a.onblocked=function(){console.warn('dropInstance blocked for database "'+e.name+'" until all open connections are closed')},a.onsuccess=function(){var e=a.result;e&&e.close(),t(e)}}));return s.then((function(e){n.db=e;for(var t=0;t<a.length;t++)C(a[t]._dbInfo)})).catch((function(t){throw(A(e,t)||c.resolve()).catch((function(){})),t}))}))}else a=c.reject("Invalid arguments");return u(a,t),a}var X={_driver:"asyncStorage",_initStorage:q,_support:o(),iterate:z,getItem:L,setItem:O,removeItem:H,clear:_,length:U,key:W,keys:V,dropInstance:Q};function G(){return"function"===typeof openDatabase}var J="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Y="~~local_forage_type~",K=/^~~local_forage_type~([^~]+)~/,Z="__lfsc__:",$=Z.length,ee="arbf",te="blob",ne="si08",ae="ui08",re="uic8",se="si16",ie="si32",oe="ur16",le="ui32",ce="fl32",ue="fl64",de=$+ee.length,pe=Object.prototype.toString;function he(e){var t,n,a,r,s,i=.75*e.length,o=e.length,l=0;"="===e[e.length-1]&&(i--,"="===e[e.length-2]&&i--);var c=new ArrayBuffer(i),u=new Uint8Array(c);for(t=0;t<o;t+=4)n=J.indexOf(e[t]),a=J.indexOf(e[t+1]),r=J.indexOf(e[t+2]),s=J.indexOf(e[t+3]),u[l++]=n<<2|a>>4,u[l++]=(15&a)<<4|r>>2,u[l++]=(3&r)<<6|63&s;return c}function me(e){var t,n=new Uint8Array(e),a="";for(t=0;t<n.length;t+=3)a+=J[n[t]>>2],a+=J[(3&n[t])<<4|n[t+1]>>4],a+=J[(15&n[t+1])<<2|n[t+2]>>6],a+=J[63&n[t+2]];return n.length%3===2?a=a.substring(0,a.length-1)+"=":n.length%3===1&&(a=a.substring(0,a.length-2)+"=="),a}function fe(e,t){var n="";if(e&&(n=pe.call(e)),e&&("[object ArrayBuffer]"===n||e.buffer&&"[object ArrayBuffer]"===pe.call(e.buffer))){var a,r=Z;e instanceof ArrayBuffer?(a=e,r+=ee):(a=e.buffer,"[object Int8Array]"===n?r+=ne:"[object Uint8Array]"===n?r+=ae:"[object Uint8ClampedArray]"===n?r+=re:"[object Int16Array]"===n?r+=se:"[object Uint16Array]"===n?r+=oe:"[object Int32Array]"===n?r+=ie:"[object Uint32Array]"===n?r+=le:"[object Float32Array]"===n?r+=ce:"[object Float64Array]"===n?r+=ue:t(new Error("Failed to get type for BinaryArray"))),t(r+me(a))}else if("[object Blob]"===n){var s=new FileReader;s.onload=function(){var n=Y+e.type+"~"+me(this.result);t(Z+te+n)},s.readAsArrayBuffer(e)}else try{t(JSON.stringify(e))}catch(i){console.error("Couldn't convert value into a JSON string: ",e),t(null,i)}}function ge(e){if(e.substring(0,$)!==Z)return JSON.parse(e);var t,n=e.substring(de),a=e.substring($,de);if(a===te&&K.test(n)){var r=n.match(K);t=r[1],n=n.substring(r[0].length)}var s=he(n);switch(a){case ee:return s;case te:return l([s],{type:t});case ne:return new Int8Array(s);case ae:return new Uint8Array(s);case re:return new Uint8ClampedArray(s);case se:return new Int16Array(s);case oe:return new Uint16Array(s);case ie:return new Int32Array(s);case le:return new Uint32Array(s);case ce:return new Float32Array(s);case ue:return new Float64Array(s);default:throw new Error("Unkown type: "+a)}}var ye={serialize:fe,deserialize:ge,stringToBuffer:he,bufferToString:me};function be(e,t,n,a){e.executeSql("CREATE TABLE IF NOT EXISTS "+t.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],n,a)}function ve(e){var t=this,n={db:null};if(e)for(var a in e)n[a]="string"!==typeof e[a]?e[a].toString():e[a];var r=new c((function(e,a){try{n.db=openDatabase(n.name,String(n.version),n.description,n.size)}catch(r){return a(r)}n.db.transaction((function(r){be(r,n,(function(){t._dbInfo=n,e()}),(function(e,t){a(t)}))}),a)}));return n.serializer=ye,r}function ke(e,t,n,a,r,s){e.executeSql(n,a,r,(function(e,i){i.code===i.SYNTAX_ERR?e.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[t.storeName],(function(e,o){o.rows.length?s(e,i):be(e,t,(function(){e.executeSql(n,a,r,s)}),s)}),s):s(e,i)}),s)}function xe(e,t){var n=this;e=p(e);var a=new c((function(t,a){n.ready().then((function(){var r=n._dbInfo;r.db.transaction((function(n){ke(n,r,"SELECT * FROM "+r.storeName+" WHERE key = ? LIMIT 1",[e],(function(e,n){var a=n.rows.length?n.rows.item(0).value:null;a&&(a=r.serializer.deserialize(a)),t(a)}),(function(e,t){a(t)}))}))})).catch(a)}));return u(a,t),a}function Se(e,t){var n=this,a=new c((function(t,a){n.ready().then((function(){var r=n._dbInfo;r.db.transaction((function(n){ke(n,r,"SELECT * FROM "+r.storeName,[],(function(n,a){for(var s=a.rows,i=s.length,o=0;o<i;o++){var l=s.item(o),c=l.value;if(c&&(c=r.serializer.deserialize(c)),void 0!==(c=e(c,l.key,o+1)))return void t(c)}t()}),(function(e,t){a(t)}))}))})).catch(a)}));return u(a,t),a}function we(e,t,n,a){var r=this;e=p(e);var s=new c((function(s,i){r.ready().then((function(){void 0===t&&(t=null);var o=t,l=r._dbInfo;l.serializer.serialize(t,(function(t,c){c?i(c):l.db.transaction((function(n){ke(n,l,"INSERT OR REPLACE INTO "+l.storeName+" (key, value) VALUES (?, ?)",[e,t],(function(){s(o)}),(function(e,t){i(t)}))}),(function(t){if(t.code===t.QUOTA_ERR){if(a>0)return void s(we.apply(r,[e,o,n,a-1]));i(t)}}))}))})).catch(i)}));return u(s,n),s}function Ce(e,t,n){return we.apply(this,[e,t,n,1])}function Ae(e,t){var n=this;e=p(e);var a=new c((function(t,a){n.ready().then((function(){var r=n._dbInfo;r.db.transaction((function(n){ke(n,r,"DELETE FROM "+r.storeName+" WHERE key = ?",[e],(function(){t()}),(function(e,t){a(t)}))}))})).catch(a)}));return u(a,t),a}function je(e){var t=this,n=new c((function(e,n){t.ready().then((function(){var a=t._dbInfo;a.db.transaction((function(t){ke(t,a,"DELETE FROM "+a.storeName,[],(function(){e()}),(function(e,t){n(t)}))}))})).catch(n)}));return u(n,e),n}function De(e){var t=this,n=new c((function(e,n){t.ready().then((function(){var a=t._dbInfo;a.db.transaction((function(t){ke(t,a,"SELECT COUNT(key) as c FROM "+a.storeName,[],(function(t,n){var a=n.rows.item(0).c;e(a)}),(function(e,t){n(t)}))}))})).catch(n)}));return u(n,e),n}function Ee(e,t){var n=this,a=new c((function(t,a){n.ready().then((function(){var r=n._dbInfo;r.db.transaction((function(n){ke(n,r,"SELECT key FROM "+r.storeName+" WHERE id = ? LIMIT 1",[e+1],(function(e,n){var a=n.rows.length?n.rows.item(0).key:null;t(a)}),(function(e,t){a(t)}))}))})).catch(a)}));return u(a,t),a}function Ie(e){var t=this,n=new c((function(e,n){t.ready().then((function(){var a=t._dbInfo;a.db.transaction((function(t){ke(t,a,"SELECT key FROM "+a.storeName,[],(function(t,n){for(var a=[],r=0;r<n.rows.length;r++)a.push(n.rows.item(r).key);e(a)}),(function(e,t){n(t)}))}))})).catch(n)}));return u(n,e),n}function Ne(e){return new c((function(t,n){e.transaction((function(a){a.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],(function(n,a){for(var r=[],s=0;s<a.rows.length;s++)r.push(a.rows.item(s).name);t({db:e,storeNames:r})}),(function(e,t){n(t)}))}),(function(e){n(e)}))}))}function Pe(e,t){t=h.apply(this,arguments);var n=this.config();(e="function"!==typeof e&&e||{}).name||(e.name=e.name||n.name,e.storeName=e.storeName||n.storeName);var a,r=this;return u(a=e.name?new c((function(t){var a;a=e.name===n.name?r._dbInfo.db:openDatabase(e.name,"","",0),e.storeName?t({db:a,storeNames:[e.storeName]}):t(Ne(a))})).then((function(e){return new c((function(t,n){e.db.transaction((function(a){function r(e){return new c((function(t,n){a.executeSql("DROP TABLE IF EXISTS "+e,[],(function(){t()}),(function(e,t){n(t)}))}))}for(var s=[],i=0,o=e.storeNames.length;i<o;i++)s.push(r(e.storeNames[i]));c.all(s).then((function(){t()})).catch((function(e){n(e)}))}),(function(e){n(e)}))}))})):c.reject("Invalid arguments"),t),a}var Me={_driver:"webSQLStorage",_initStorage:ve,_support:G(),iterate:Se,getItem:xe,setItem:Ce,removeItem:Ae,clear:je,length:De,key:Ee,keys:Ie,dropInstance:Pe};function Be(){try{return"undefined"!==typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(e){return!1}}function Fe(e,t){var n=e.name+"/";return e.storeName!==t.storeName&&(n+=e.storeName+"/"),n}function Te(){var e="_localforage_support_test";try{return localStorage.setItem(e,!0),localStorage.removeItem(e),!1}catch(t){return!0}}function Re(){return!Te()||localStorage.length>0}function qe(e){var t=this,n={};if(e)for(var a in e)n[a]=e[a];return n.keyPrefix=Fe(e,t._defaultConfig),Re()?(t._dbInfo=n,n.serializer=ye,c.resolve()):c.reject()}function Le(e){var t=this,n=t.ready().then((function(){for(var e=t._dbInfo.keyPrefix,n=localStorage.length-1;n>=0;n--){var a=localStorage.key(n);0===a.indexOf(e)&&localStorage.removeItem(a)}}));return u(n,e),n}function ze(e,t){var n=this;e=p(e);var a=n.ready().then((function(){var t=n._dbInfo,a=localStorage.getItem(t.keyPrefix+e);return a&&(a=t.serializer.deserialize(a)),a}));return u(a,t),a}function Oe(e,t){var n=this,a=n.ready().then((function(){for(var t=n._dbInfo,a=t.keyPrefix,r=a.length,s=localStorage.length,i=1,o=0;o<s;o++){var l=localStorage.key(o);if(0===l.indexOf(a)){var c=localStorage.getItem(l);if(c&&(c=t.serializer.deserialize(c)),void 0!==(c=e(c,l.substring(r),i++)))return c}}}));return u(a,t),a}function He(e,t){var n=this,a=n.ready().then((function(){var t,a=n._dbInfo;try{t=localStorage.key(e)}catch(r){t=null}return t&&(t=t.substring(a.keyPrefix.length)),t}));return u(a,t),a}function _e(e){var t=this,n=t.ready().then((function(){for(var e=t._dbInfo,n=localStorage.length,a=[],r=0;r<n;r++){var s=localStorage.key(r);0===s.indexOf(e.keyPrefix)&&a.push(s.substring(e.keyPrefix.length))}return a}));return u(n,e),n}function Ue(e){var t=this.keys().then((function(e){return e.length}));return u(t,e),t}function We(e,t){var n=this;e=p(e);var a=n.ready().then((function(){var t=n._dbInfo;localStorage.removeItem(t.keyPrefix+e)}));return u(a,t),a}function Ve(e,t,n){var a=this;e=p(e);var r=a.ready().then((function(){void 0===t&&(t=null);var n=t;return new c((function(r,s){var i=a._dbInfo;i.serializer.serialize(t,(function(t,a){if(a)s(a);else try{localStorage.setItem(i.keyPrefix+e,t),r(n)}catch(o){"QuotaExceededError"!==o.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==o.name||s(o),s(o)}}))}))}));return u(r,n),r}function Qe(e,t){if(t=h.apply(this,arguments),!(e="function"!==typeof e&&e||{}).name){var n=this.config();e.name=e.name||n.name,e.storeName=e.storeName||n.storeName}var a,r=this;return a=e.name?new c((function(t){e.storeName?t(Fe(e,r._defaultConfig)):t(e.name+"/")})).then((function(e){for(var t=localStorage.length-1;t>=0;t--){var n=localStorage.key(t);0===n.indexOf(e)&&localStorage.removeItem(n)}})):c.reject("Invalid arguments"),u(a,t),a}var Xe={_driver:"localStorageWrapper",_initStorage:qe,_support:Be(),iterate:Oe,getItem:ze,setItem:Ve,removeItem:We,clear:Le,length:Ue,key:He,keys:_e,dropInstance:Qe},Ge=function(e,t){return e===t||"number"===typeof e&&"number"===typeof t&&isNaN(e)&&isNaN(t)},Je=function(e,t){for(var n=e.length,a=0;a<n;){if(Ge(e[a],t))return!0;a++}return!1},Ye=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},Ke={},Ze={},$e={INDEXEDDB:X,WEBSQL:Me,LOCALSTORAGE:Xe},et=[$e.INDEXEDDB._driver,$e.WEBSQL._driver,$e.LOCALSTORAGE._driver],tt=["dropInstance"],nt=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(tt),at={description:"",driver:et.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function rt(e,t){e[t]=function(){var n=arguments;return e.ready().then((function(){return e[t].apply(e,n)}))}}function st(){for(var e=1;e<arguments.length;e++){var t=arguments[e];if(t)for(var n in t)t.hasOwnProperty(n)&&(Ye(t[n])?arguments[0][n]=t[n].slice():arguments[0][n]=t[n])}return arguments[0]}var it=function(){function e(t){for(var n in r(this,e),$e)if($e.hasOwnProperty(n)){var a=$e[n],s=a._driver;this[n]=s,Ke[s]||this.defineDriver(a)}this._defaultConfig=st({},at),this._config=st({},this._defaultConfig,t),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch((function(){}))}return e.prototype.config=function(e){if("object"===("undefined"===typeof e?"undefined":a(e))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var t in e){if("storeName"===t&&(e[t]=e[t].replace(/\W/g,"_")),"version"===t&&"number"!==typeof e[t])return new Error("Database version must be a number.");this._config[t]=e[t]}return!("driver"in e)||!e.driver||this.setDriver(this._config.driver)}return"string"===typeof e?this._config[e]:this._config},e.prototype.defineDriver=function(e,t,n){var a=new c((function(t,n){try{var a=e._driver,r=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!e._driver)return void n(r);for(var s=nt.concat("_initStorage"),i=0,o=s.length;i<o;i++){var l=s[i];if((!Je(tt,l)||e[l])&&"function"!==typeof e[l])return void n(r)}var d=function(){for(var t=function(e){return function(){var t=new Error("Method "+e+" is not implemented by the current driver"),n=c.reject(t);return u(n,arguments[arguments.length-1]),n}},n=0,a=tt.length;n<a;n++){var r=tt[n];e[r]||(e[r]=t(r))}};d();var p=function(n){Ke[a]&&console.info("Redefining LocalForage driver: "+a),Ke[a]=e,Ze[a]=n,t()};"_support"in e?e._support&&"function"===typeof e._support?e._support().then(p,n):p(!!e._support):p(!0)}catch(h){n(h)}}));return d(a,t,n),a},e.prototype.driver=function(){return this._driver||null},e.prototype.getDriver=function(e,t,n){var a=Ke[e]?c.resolve(Ke[e]):c.reject(new Error("Driver not found."));return d(a,t,n),a},e.prototype.getSerializer=function(e){var t=c.resolve(ye);return d(t,e),t},e.prototype.ready=function(e){var t=this,n=t._driverSet.then((function(){return null===t._ready&&(t._ready=t._initDriver()),t._ready}));return d(n,e,e),n},e.prototype.setDriver=function(e,t,n){var a=this;Ye(e)||(e=[e]);var r=this._getSupportedDrivers(e);function s(){a._config.driver=a.driver()}function i(e){return a._extend(e),s(),a._ready=a._initStorage(a._config),a._ready}function o(e){return function(){var t=0;function n(){for(;t<e.length;){var r=e[t];return t++,a._dbInfo=null,a._ready=null,a.getDriver(r).then(i).catch(n)}s();var o=new Error("No available storage method found.");return a._driverSet=c.reject(o),a._driverSet}return n()}}var l=null!==this._driverSet?this._driverSet.catch((function(){return c.resolve()})):c.resolve();return this._driverSet=l.then((function(){var e=r[0];return a._dbInfo=null,a._ready=null,a.getDriver(e).then((function(e){a._driver=e._driver,s(),a._wrapLibraryMethodsWithReady(),a._initDriver=o(r)}))})).catch((function(){s();var e=new Error("No available storage method found.");return a._driverSet=c.reject(e),a._driverSet})),d(this._driverSet,t,n),this._driverSet},e.prototype.supports=function(e){return!!Ze[e]},e.prototype._extend=function(e){st(this,e)},e.prototype._getSupportedDrivers=function(e){for(var t=[],n=0,a=e.length;n<a;n++){var r=e[n];this.supports(r)&&t.push(r)}return t},e.prototype._wrapLibraryMethodsWithReady=function(){for(var e=0,t=nt.length;e<t;e++)rt(this,nt[e])},e.prototype.createInstance=function(t){return new e(t)},e}(),ot=new it;t.exports=ot},{3:3}]},{},[4])(4)},425:(e,t,n)=>{"use strict";var a=n(240).E,r="undefined"!==typeof window?window.matchMedia:null;function s(e,t,n){var s,i=this;function o(e){i.matches=e.matches,i.media=e.media}r&&!n&&(s=r.call(window,e)),s?(this.matches=s.matches,this.media=s.media,s.addListener(o)):(this.matches=a(e,t),this.media=e),this.addListener=function(e){s&&s.addListener(e)},this.removeListener=function(e){s&&s.removeListener(e)},this.dispose=function(){s&&s.removeListener(o)}}e.exports=function(e,t,n){return new s(e,t,n)}},888:(e,t,n)=>{"use strict";var a=n(47);function r(){}function s(){}s.resetWarningCache=r,e.exports=function(){function e(e,t,n,r,s,i){if(i!==a){var o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:s,resetWarningCache:r};return n.PropTypes=n,n}},7:(e,t,n)=>{e.exports=n(888)()},47:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},463:(e,t,n)=>{"use strict";var a=n(791),r=n(296);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(o[e]=t,e=0;e<t.length;e++)i.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h={},m={};function f(e,t,n,a,r,s,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=a,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=i}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new f(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new f(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new f(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new f(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new f(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new f(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new f(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new f(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new f(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function b(e){return e[1].toUpperCase()}function v(e,t,n,a){var r=g.hasOwnProperty(t)?g[t]:null;(null!==r?0!==r.type:a||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,a){if(null===t||"undefined"===typeof t||function(e,t,n,a){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!a&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,a))return!0;if(a)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,r,a)&&(n=null),a||null===r?function(e){return!!d.call(m,e)||!d.call(h,e)&&(p.test(e)?m[e]=!0:(h[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):r.mustUseProperty?e[r.propertyName]=null===n?3!==r.type&&"":n:(t=r.attributeName,a=r.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(r=r.type)||4===r&&!0===n?"":""+n,a?e.setAttributeNS(a,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,b);g[t]=new f(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,b);g[t]=new f(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,b);g[t]=new f(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new f(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new f("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new f(e,1,!1,e.toLowerCase(),null,!0,!0)}));var k=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=Symbol.for("react.element"),S=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),j=Symbol.for("react.provider"),D=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),M=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var B=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var F=Symbol.iterator;function T(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=F&&e[F]||e["@@iterator"])?e:null}var R,q=Object.assign;function L(e){if(void 0===R)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);R=t&&t[1]||""}return"\n"+R+e}var z=!1;function O(e,t){if(!e||z)return"";z=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var a=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){a=c}e.call(t.prototype)}else{try{throw Error()}catch(c){a=c}e()}}catch(c){if(c&&a&&"string"===typeof c.stack){for(var r=c.stack.split("\n"),s=a.stack.split("\n"),i=r.length-1,o=s.length-1;1<=i&&0<=o&&r[i]!==s[o];)o--;for(;1<=i&&0<=o;i--,o--)if(r[i]!==s[o]){if(1!==i||1!==o)do{if(i--,0>--o||r[i]!==s[o]){var l="\n"+r[i].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=i&&0<=o);break}}}finally{z=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?L(e):""}function H(e){switch(e.tag){case 5:return L(e.type);case 16:return L("Lazy");case 13:return L("Suspense");case 19:return L("SuspenseList");case 0:case 2:case 15:return e=O(e.type,!1);case 11:return e=O(e.type.render,!1);case 1:return e=O(e.type,!0);default:return""}}function _(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case w:return"Fragment";case S:return"Portal";case A:return"Profiler";case C:return"StrictMode";case I:return"Suspense";case N:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case D:return(e.displayName||"Context")+".Consumer";case j:return(e._context.displayName||"Context")+".Provider";case E:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case P:return null!==(t=e.displayName||null)?t:_(e.type)||"Memo";case M:t=e._payload,e=e._init;try{return _(e(t))}catch(n){}}return null}function U(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return _(t);case 8:return t===C?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function V(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Q(e){e._valueTracker||(e._valueTracker=function(e){var t=V(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),a=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var r=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(e){a=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return a},setValue:function(e){a=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function X(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),a="";return e&&(a=V(e)?e.checked?"true":"false":e.value),(e=a)!==n&&(t.setValue(e),!0)}function G(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function J(e,t){var n=t.checked;return q({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,a=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:a,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function K(e,t){null!=(t=t.checked)&&v(e,"checked",t,!1)}function Z(e,t){K(e,t);var n=W(t.value),a=t.type;if(null!=n)"number"===a?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===a||"reset"===a)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function $(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var a=t.type;if(!("submit"!==a&&"reset"!==a||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&G(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,a){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&a&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,r=0;r<e.length;r++){if(e[r].value===n)return e[r].selected=!0,void(a&&(e[r].defaultSelected=!0));null!==t||e[r].disabled||(t=e[r])}null!==t&&(t.selected=!0)}}function ae(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return q({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function re(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function se(e,t){var n=W(t.value),a=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=a&&(e.defaultValue=""+a)}function ie(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,a){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function pe(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var he={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},me=["Webkit","ms","Moz","O"];function fe(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||he.hasOwnProperty(e)&&he[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var a=0===n.indexOf("--"),r=fe(n,t[n],a);"float"===n&&(n="cssFloat"),a?e.setProperty(n,r):e[n]=r}}Object.keys(he).forEach((function(e){me.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),he[t]=he[e]}))}));var ye=q({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function be(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function ve(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ke=null;function xe(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Se=null,we=null,Ce=null;function Ae(e){if(e=vr(e)){if("function"!==typeof Se)throw Error(s(280));var t=e.stateNode;t&&(t=xr(t),Se(e.stateNode,e.type,t))}}function je(e){we?Ce?Ce.push(e):Ce=[e]:we=e}function De(){if(we){var e=we,t=Ce;if(Ce=we=null,Ae(e),t)for(e=0;e<t.length;e++)Ae(t[e])}}function Ee(e,t){return e(t)}function Ie(){}var Ne=!1;function Pe(e,t,n){if(Ne)return e(t,n);Ne=!0;try{return Ee(e,t,n)}finally{Ne=!1,(null!==we||null!==Ce)&&(Ie(),De())}}function Me(e,t){var n=e.stateNode;if(null===n)return null;var a=xr(n);if(null===a)return null;n=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(a=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!a;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var Be=!1;if(u)try{var Fe={};Object.defineProperty(Fe,"passive",{get:function(){Be=!0}}),window.addEventListener("test",Fe,Fe),window.removeEventListener("test",Fe,Fe)}catch(ue){Be=!1}function Te(e,t,n,a,r,s,i,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Re=!1,qe=null,Le=!1,ze=null,Oe={onError:function(e){Re=!0,qe=e}};function He(e,t,n,a,r,s,i,o,l){Re=!1,qe=null,Te.apply(Oe,arguments)}function _e(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ue(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(_e(e)!==e)throw Error(s(188))}function Ve(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=_e(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,a=t;;){var r=n.return;if(null===r)break;var i=r.alternate;if(null===i){if(null!==(a=r.return)){n=a;continue}break}if(r.child===i.child){for(i=r.child;i;){if(i===n)return We(r),e;if(i===a)return We(r),t;i=i.sibling}throw Error(s(188))}if(n.return!==a.return)n=r,a=i;else{for(var o=!1,l=r.child;l;){if(l===n){o=!0,n=r,a=i;break}if(l===a){o=!0,a=r,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,a=r;break}if(l===a){o=!0,a=i,n=r;break}l=l.sibling}if(!o)throw Error(s(189))}}if(n.alternate!==a)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e))?Qe(e):null}function Qe(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Qe(e);if(null!==t)return t;e=e.sibling}return null}var Xe=r.unstable_scheduleCallback,Ge=r.unstable_cancelCallback,Je=r.unstable_shouldYield,Ye=r.unstable_requestPaint,Ke=r.unstable_now,Ze=r.unstable_getCurrentPriorityLevel,$e=r.unstable_ImmediatePriority,et=r.unstable_UserBlockingPriority,tt=r.unstable_NormalPriority,nt=r.unstable_LowPriority,at=r.unstable_IdlePriority,rt=null,st=null;var it=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/lt|0)|0},ot=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function pt(e,t){var n=e.pendingLanes;if(0===n)return 0;var a=0,r=e.suspendedLanes,s=e.pingedLanes,i=268435455&n;if(0!==i){var o=i&~r;0!==o?a=dt(o):0!==(s&=i)&&(a=dt(s))}else 0!==(i=n&~r)?a=dt(i):0!==s&&(a=dt(s));if(0===a)return 0;if(0!==t&&t!==a&&0===(t&r)&&((r=a&-a)>=(s=t&-t)||16===r&&0!==(4194240&s)))return t;if(0!==(4&a)&&(a|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=a;0<t;)r=1<<(n=31-it(t)),a|=e[n],t&=~r;return a}function ht(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function mt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function ft(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-it(t)]=n}function bt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var a=31-it(n),r=1<<a;r&t|e[a]&t&&(e[a]|=t),n&=~r}}var vt=0;function kt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var xt,St,wt,Ct,At,jt=!1,Dt=[],Et=null,It=null,Nt=null,Pt=new Map,Mt=new Map,Bt=[],Ft="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Tt(e,t){switch(e){case"focusin":case"focusout":Et=null;break;case"dragenter":case"dragleave":It=null;break;case"mouseover":case"mouseout":Nt=null;break;case"pointerover":case"pointerout":Pt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mt.delete(t.pointerId)}}function Rt(e,t,n,a,r,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:a,nativeEvent:s,targetContainers:[r]},null!==t&&(null!==(t=vr(t))&&St(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,null!==r&&-1===t.indexOf(r)&&t.push(r),e)}function qt(e){var t=br(e.target);if(null!==t){var n=_e(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ue(n)))return e.blockedOn=t,void At(e.priority,(function(){wt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Lt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Jt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=vr(n))&&St(t),e.blockedOn=n,!1;var a=new(n=e.nativeEvent).constructor(n.type,n);ke=a,n.target.dispatchEvent(a),ke=null,t.shift()}return!0}function zt(e,t,n){Lt(e)&&n.delete(t)}function Ot(){jt=!1,null!==Et&&Lt(Et)&&(Et=null),null!==It&&Lt(It)&&(It=null),null!==Nt&&Lt(Nt)&&(Nt=null),Pt.forEach(zt),Mt.forEach(zt)}function Ht(e,t){e.blockedOn===t&&(e.blockedOn=null,jt||(jt=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Ot)))}function _t(e){function t(t){return Ht(t,e)}if(0<Dt.length){Ht(Dt[0],e);for(var n=1;n<Dt.length;n++){var a=Dt[n];a.blockedOn===e&&(a.blockedOn=null)}}for(null!==Et&&Ht(Et,e),null!==It&&Ht(It,e),null!==Nt&&Ht(Nt,e),Pt.forEach(t),Mt.forEach(t),n=0;n<Bt.length;n++)(a=Bt[n]).blockedOn===e&&(a.blockedOn=null);for(;0<Bt.length&&null===(n=Bt[0]).blockedOn;)qt(n),null===n.blockedOn&&Bt.shift()}var Ut=k.ReactCurrentBatchConfig,Wt=!0;function Vt(e,t,n,a){var r=vt,s=Ut.transition;Ut.transition=null;try{vt=1,Xt(e,t,n,a)}finally{vt=r,Ut.transition=s}}function Qt(e,t,n,a){var r=vt,s=Ut.transition;Ut.transition=null;try{vt=4,Xt(e,t,n,a)}finally{vt=r,Ut.transition=s}}function Xt(e,t,n,a){if(Wt){var r=Jt(e,t,n,a);if(null===r)Wa(e,t,a,Gt,n),Tt(e,a);else if(function(e,t,n,a,r){switch(t){case"focusin":return Et=Rt(Et,e,t,n,a,r),!0;case"dragenter":return It=Rt(It,e,t,n,a,r),!0;case"mouseover":return Nt=Rt(Nt,e,t,n,a,r),!0;case"pointerover":var s=r.pointerId;return Pt.set(s,Rt(Pt.get(s)||null,e,t,n,a,r)),!0;case"gotpointercapture":return s=r.pointerId,Mt.set(s,Rt(Mt.get(s)||null,e,t,n,a,r)),!0}return!1}(r,e,t,n,a))a.stopPropagation();else if(Tt(e,a),4&t&&-1<Ft.indexOf(e)){for(;null!==r;){var s=vr(r);if(null!==s&&xt(s),null===(s=Jt(e,t,n,a))&&Wa(e,t,a,Gt,n),s===r)break;r=s}null!==r&&a.stopPropagation()}else Wa(e,t,a,null,n)}}var Gt=null;function Jt(e,t,n,a){if(Gt=null,null!==(e=br(e=xe(a))))if(null===(t=_e(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ue(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Gt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ze()){case $e:return 1;case et:return 4;case tt:case nt:return 16;case at:return 536870912;default:return 16}default:return 16}}var Kt=null,Zt=null,$t=null;function en(){if($t)return $t;var e,t,n=Zt,a=n.length,r="value"in Kt?Kt.value:Kt.textContent,s=r.length;for(e=0;e<a&&n[e]===r[e];e++);var i=a-e;for(t=1;t<=i&&n[a-t]===r[s-t];t++);return $t=r.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function an(){return!1}function rn(e){function t(t,n,a,r,s){for(var i in this._reactName=t,this._targetInst=a,this.type=n,this.nativeEvent=r,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(i)&&(t=e[i],this[i]=t?t(r):r[i]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?nn:an,this.isPropagationStopped=an,this}return q(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var sn,on,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=rn(cn),dn=q({},cn,{view:0,detail:0}),pn=rn(dn),hn=q({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:An,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(sn=e.screenX-ln.screenX,on=e.screenY-ln.screenY):on=sn=0,ln=e),sn)},movementY:function(e){return"movementY"in e?e.movementY:on}}),mn=rn(hn),fn=rn(q({},hn,{dataTransfer:0})),gn=rn(q({},dn,{relatedTarget:0})),yn=rn(q({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),bn=q({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),vn=rn(bn),kn=rn(q({},cn,{data:0})),xn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=wn[e])&&!!t[e]}function An(){return Cn}var jn=q({},dn,{key:function(e){if(e.key){var t=xn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Sn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:An,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Dn=rn(jn),En=rn(q({},hn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),In=rn(q({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:An})),Nn=rn(q({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=q({},hn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Mn=rn(Pn),Bn=[9,13,27,32],Fn=u&&"CompositionEvent"in window,Tn=null;u&&"documentMode"in document&&(Tn=document.documentMode);var Rn=u&&"TextEvent"in window&&!Tn,qn=u&&(!Fn||Tn&&8<Tn&&11>=Tn),Ln=String.fromCharCode(32),zn=!1;function On(e,t){switch(e){case"keyup":return-1!==Bn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Hn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var _n=!1;var Un={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Un[e.type]:"textarea"===t}function Vn(e,t,n,a){je(a),0<(t=Qa(t,"onChange")).length&&(n=new un("onChange","change",null,n,a),e.push({event:n,listeners:t}))}var Qn=null,Xn=null;function Gn(e){La(e,0)}function Jn(e){if(X(kr(e)))return e}function Yn(e,t){if("change"===e)return t}var Kn=!1;if(u){var Zn;if(u){var $n="oninput"in document;if(!$n){var ea=document.createElement("div");ea.setAttribute("oninput","return;"),$n="function"===typeof ea.oninput}Zn=$n}else Zn=!1;Kn=Zn&&(!document.documentMode||9<document.documentMode)}function ta(){Qn&&(Qn.detachEvent("onpropertychange",na),Xn=Qn=null)}function na(e){if("value"===e.propertyName&&Jn(Xn)){var t=[];Vn(t,Xn,e,xe(e)),Pe(Gn,t)}}function aa(e,t,n){"focusin"===e?(ta(),Xn=n,(Qn=t).attachEvent("onpropertychange",na)):"focusout"===e&&ta()}function ra(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Jn(Xn)}function sa(e,t){if("click"===e)return Jn(t)}function ia(e,t){if("input"===e||"change"===e)return Jn(t)}var oa="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function la(e,t){if(oa(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;for(a=0;a<n.length;a++){var r=n[a];if(!d.call(t,r)||!oa(e[r],t[r]))return!1}return!0}function ca(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ua(e,t){var n,a=ca(e);for(e=0;a;){if(3===a.nodeType){if(n=e+a.textContent.length,e<=t&&n>=t)return{node:a,offset:t-e};e=n}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=ca(a)}}function da(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?da(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function pa(){for(var e=window,t=G();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(a){n=!1}if(!n)break;t=G((e=t.contentWindow).document)}return t}function ha(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function ma(e){var t=pa(),n=e.focusedElem,a=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&da(n.ownerDocument.documentElement,n)){if(null!==a&&ha(n))if(t=a.start,void 0===(e=a.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var r=n.textContent.length,s=Math.min(a.start,r);a=void 0===a.end?s:Math.min(a.end,r),!e.extend&&s>a&&(r=a,a=s,s=r),r=ua(n,s);var i=ua(n,a);r&&i&&(1!==e.rangeCount||e.anchorNode!==r.node||e.anchorOffset!==r.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&((t=t.createRange()).setStart(r.node,r.offset),e.removeAllRanges(),s>a?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var fa=u&&"documentMode"in document&&11>=document.documentMode,ga=null,ya=null,ba=null,va=!1;function ka(e,t,n){var a=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;va||null==ga||ga!==G(a)||("selectionStart"in(a=ga)&&ha(a)?a={start:a.selectionStart,end:a.selectionEnd}:a={anchorNode:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset},ba&&la(ba,a)||(ba=a,0<(a=Qa(ya,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:a}),t.target=ga)))}function xa(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Sa={animationend:xa("Animation","AnimationEnd"),animationiteration:xa("Animation","AnimationIteration"),animationstart:xa("Animation","AnimationStart"),transitionend:xa("Transition","TransitionEnd")},wa={},Ca={};function Aa(e){if(wa[e])return wa[e];if(!Sa[e])return e;var t,n=Sa[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ca)return wa[e]=n[t];return e}u&&(Ca=document.createElement("div").style,"AnimationEvent"in window||(delete Sa.animationend.animation,delete Sa.animationiteration.animation,delete Sa.animationstart.animation),"TransitionEvent"in window||delete Sa.transitionend.transition);var ja=Aa("animationend"),Da=Aa("animationiteration"),Ea=Aa("animationstart"),Ia=Aa("transitionend"),Na=new Map,Pa="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ma(e,t){Na.set(e,t),l(t,[e])}for(var Ba=0;Ba<Pa.length;Ba++){var Fa=Pa[Ba];Ma(Fa.toLowerCase(),"on"+(Fa[0].toUpperCase()+Fa.slice(1)))}Ma(ja,"onAnimationEnd"),Ma(Da,"onAnimationIteration"),Ma(Ea,"onAnimationStart"),Ma("dblclick","onDoubleClick"),Ma("focusin","onFocus"),Ma("focusout","onBlur"),Ma(Ia,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ta="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ra=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ta));function qa(e,t,n){var a=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,a,r,i,o,l,c){if(He.apply(this,arguments),Re){if(!Re)throw Error(s(198));var u=qe;Re=!1,qe=null,Le||(Le=!0,ze=u)}}(a,t,void 0,e),e.currentTarget=null}function La(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var a=e[n],r=a.event;a=a.listeners;e:{var s=void 0;if(t)for(var i=a.length-1;0<=i;i--){var o=a[i],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==s&&r.isPropagationStopped())break e;qa(r,o,c),s=l}else for(i=0;i<a.length;i++){if(l=(o=a[i]).instance,c=o.currentTarget,o=o.listener,l!==s&&r.isPropagationStopped())break e;qa(r,o,c),s=l}}}if(Le)throw e=ze,Le=!1,ze=null,e}function za(e,t){var n=t[fr];void 0===n&&(n=t[fr]=new Set);var a=e+"__bubble";n.has(a)||(Ua(t,e,2,!1),n.add(a))}function Oa(e,t,n){var a=0;t&&(a|=4),Ua(n,e,a,t)}var Ha="_reactListening"+Math.random().toString(36).slice(2);function _a(e){if(!e[Ha]){e[Ha]=!0,i.forEach((function(t){"selectionchange"!==t&&(Ra.has(t)||Oa(t,!1,e),Oa(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Ha]||(t[Ha]=!0,Oa("selectionchange",!1,t))}}function Ua(e,t,n,a){switch(Yt(t)){case 1:var r=Vt;break;case 4:r=Qt;break;default:r=Xt}n=r.bind(null,t,n,e),r=void 0,!Be||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(r=!0),a?void 0!==r?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):void 0!==r?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function Wa(e,t,n,a,r){var s=a;if(0===(1&t)&&0===(2&t)&&null!==a)e:for(;;){if(null===a)return;var i=a.tag;if(3===i||4===i){var o=a.stateNode.containerInfo;if(o===r||8===o.nodeType&&o.parentNode===r)break;if(4===i)for(i=a.return;null!==i;){var l=i.tag;if((3===l||4===l)&&((l=i.stateNode.containerInfo)===r||8===l.nodeType&&l.parentNode===r))return;i=i.return}for(;null!==o;){if(null===(i=br(o)))return;if(5===(l=i.tag)||6===l){a=s=i;continue e}o=o.parentNode}}a=a.return}Pe((function(){var a=s,r=xe(n),i=[];e:{var o=Na.get(e);if(void 0!==o){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Dn;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=mn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=fn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=In;break;case ja:case Da:case Ea:l=yn;break;case Ia:l=Nn;break;case"scroll":l=pn;break;case"wheel":l=Mn;break;case"copy":case"cut":case"paste":l=vn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=En}var u=0!==(4&t),d=!u&&"scroll"===e,p=u?null!==o?o+"Capture":null:o;u=[];for(var h,m=a;null!==m;){var f=(h=m).stateNode;if(5===h.tag&&null!==f&&(h=f,null!==p&&(null!=(f=Me(m,p))&&u.push(Va(m,f,h)))),d)break;m=m.return}0<u.length&&(o=new l(o,c,null,n,r),i.push({event:o,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===ke||!(c=n.relatedTarget||n.fromElement)||!br(c)&&!c[mr])&&(l||o)&&(o=r.window===r?r:(o=r.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=a,null!==(c=(c=n.relatedTarget||n.toElement)?br(c):null)&&(c!==(d=_e(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=a),l!==c)){if(u=mn,f="onMouseLeave",p="onMouseEnter",m="mouse","pointerout"!==e&&"pointerover"!==e||(u=En,f="onPointerLeave",p="onPointerEnter",m="pointer"),d=null==l?o:kr(l),h=null==c?o:kr(c),(o=new u(f,m+"leave",l,n,r)).target=d,o.relatedTarget=h,f=null,br(r)===a&&((u=new u(p,m+"enter",c,n,r)).target=h,u.relatedTarget=d,f=u),d=f,l&&c)e:{for(p=c,m=0,h=u=l;h;h=Xa(h))m++;for(h=0,f=p;f;f=Xa(f))h++;for(;0<m-h;)u=Xa(u),m--;for(;0<h-m;)p=Xa(p),h--;for(;m--;){if(u===p||null!==p&&u===p.alternate)break e;u=Xa(u),p=Xa(p)}u=null}else u=null;null!==l&&Ga(i,o,l,u,!1),null!==c&&null!==d&&Ga(i,d,c,u,!0)}if("select"===(l=(o=a?kr(a):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=Yn;else if(Wn(o))if(Kn)g=ia;else{g=ra;var y=aa}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=sa);switch(g&&(g=g(e,a))?Vn(i,g,n,r):(y&&y(e,o,a),"focusout"===e&&(y=o._wrapperState)&&y.controlled&&"number"===o.type&&ee(o,"number",o.value)),y=a?kr(a):window,e){case"focusin":(Wn(y)||"true"===y.contentEditable)&&(ga=y,ya=a,ba=null);break;case"focusout":ba=ya=ga=null;break;case"mousedown":va=!0;break;case"contextmenu":case"mouseup":case"dragend":va=!1,ka(i,n,r);break;case"selectionchange":if(fa)break;case"keydown":case"keyup":ka(i,n,r)}var b;if(Fn)e:{switch(e){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else _n?On(e,n)&&(v="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(v="onCompositionStart");v&&(qn&&"ko"!==n.locale&&(_n||"onCompositionStart"!==v?"onCompositionEnd"===v&&_n&&(b=en()):(Zt="value"in(Kt=r)?Kt.value:Kt.textContent,_n=!0)),0<(y=Qa(a,v)).length&&(v=new kn(v,e,null,n,r),i.push({event:v,listeners:y}),b?v.data=b:null!==(b=Hn(n))&&(v.data=b))),(b=Rn?function(e,t){switch(e){case"compositionend":return Hn(t);case"keypress":return 32!==t.which?null:(zn=!0,Ln);case"textInput":return(e=t.data)===Ln&&zn?null:e;default:return null}}(e,n):function(e,t){if(_n)return"compositionend"===e||!Fn&&On(e,t)?(e=en(),$t=Zt=Kt=null,_n=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return qn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(a=Qa(a,"onBeforeInput")).length&&(r=new kn("onBeforeInput","beforeinput",null,n,r),i.push({event:r,listeners:a}),r.data=b))}La(i,t)}))}function Va(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Qa(e,t){for(var n=t+"Capture",a=[];null!==e;){var r=e,s=r.stateNode;5===r.tag&&null!==s&&(r=s,null!=(s=Me(e,n))&&a.unshift(Va(e,s,r)),null!=(s=Me(e,t))&&a.push(Va(e,s,r))),e=e.return}return a}function Xa(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Ga(e,t,n,a,r){for(var s=t._reactName,i=[];null!==n&&n!==a;){var o=n,l=o.alternate,c=o.stateNode;if(null!==l&&l===a)break;5===o.tag&&null!==c&&(o=c,r?null!=(l=Me(n,s))&&i.unshift(Va(n,l,o)):r||null!=(l=Me(n,s))&&i.push(Va(n,l,o))),n=n.return}0!==i.length&&e.push({event:t,listeners:i})}var Ja=/\r\n?/g,Ya=/\u0000|\uFFFD/g;function Ka(e){return("string"===typeof e?e:""+e).replace(Ja,"\n").replace(Ya,"")}function Za(e,t,n){if(t=Ka(t),Ka(e)!==t&&n)throw Error(s(425))}function $a(){}var er=null,tr=null;function nr(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ar="function"===typeof setTimeout?setTimeout:void 0,rr="function"===typeof clearTimeout?clearTimeout:void 0,sr="function"===typeof Promise?Promise:void 0,ir="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof sr?function(e){return sr.resolve(null).then(e).catch(or)}:ar;function or(e){setTimeout((function(){throw e}))}function lr(e,t){var n=t,a=0;do{var r=n.nextSibling;if(e.removeChild(n),r&&8===r.nodeType)if("/$"===(n=r.data)){if(0===a)return e.removeChild(r),void _t(t);a--}else"$"!==n&&"$?"!==n&&"$!"!==n||a++;n=r}while(n);_t(t)}function cr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ur(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var dr=Math.random().toString(36).slice(2),pr="__reactFiber$"+dr,hr="__reactProps$"+dr,mr="__reactContainer$"+dr,fr="__reactEvents$"+dr,gr="__reactListeners$"+dr,yr="__reactHandles$"+dr;function br(e){var t=e[pr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[mr]||n[pr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ur(e);null!==e;){if(n=e[pr])return n;e=ur(e)}return t}n=(e=n).parentNode}return null}function vr(e){return!(e=e[pr]||e[mr])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function kr(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function xr(e){return e[hr]||null}var Sr=[],wr=-1;function Cr(e){return{current:e}}function Ar(e){0>wr||(e.current=Sr[wr],Sr[wr]=null,wr--)}function jr(e,t){wr++,Sr[wr]=e.current,e.current=t}var Dr={},Er=Cr(Dr),Ir=Cr(!1),Nr=Dr;function Pr(e,t){var n=e.type.contextTypes;if(!n)return Dr;var a=e.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===t)return a.__reactInternalMemoizedMaskedChildContext;var r,s={};for(r in n)s[r]=t[r];return a&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Mr(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Br(){Ar(Ir),Ar(Er)}function Fr(e,t,n){if(Er.current!==Dr)throw Error(s(168));jr(Er,t),jr(Ir,n)}function Tr(e,t,n){var a=e.stateNode;if(t=t.childContextTypes,"function"!==typeof a.getChildContext)return n;for(var r in a=a.getChildContext())if(!(r in t))throw Error(s(108,U(e)||"Unknown",r));return q({},n,a)}function Rr(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Dr,Nr=Er.current,jr(Er,e),jr(Ir,Ir.current),!0}function qr(e,t,n){var a=e.stateNode;if(!a)throw Error(s(169));n?(e=Tr(e,t,Nr),a.__reactInternalMemoizedMergedChildContext=e,Ar(Ir),Ar(Er),jr(Er,e)):Ar(Ir),jr(Ir,n)}var Lr=null,zr=!1,Or=!1;function Hr(e){null===Lr?Lr=[e]:Lr.push(e)}function _r(){if(!Or&&null!==Lr){Or=!0;var e=0,t=vt;try{var n=Lr;for(vt=1;e<n.length;e++){var a=n[e];do{a=a(!0)}while(null!==a)}Lr=null,zr=!1}catch(r){throw null!==Lr&&(Lr=Lr.slice(e+1)),Xe($e,_r),r}finally{vt=t,Or=!1}}return null}var Ur=[],Wr=0,Vr=null,Qr=0,Xr=[],Gr=0,Jr=null,Yr=1,Kr="";function Zr(e,t){Ur[Wr++]=Qr,Ur[Wr++]=Vr,Vr=e,Qr=t}function $r(e,t,n){Xr[Gr++]=Yr,Xr[Gr++]=Kr,Xr[Gr++]=Jr,Jr=e;var a=Yr;e=Kr;var r=32-it(a)-1;a&=~(1<<r),n+=1;var s=32-it(t)+r;if(30<s){var i=r-r%5;s=(a&(1<<i)-1).toString(32),a>>=i,r-=i,Yr=1<<32-it(t)+r|n<<r|a,Kr=s+e}else Yr=1<<s|n<<r|a,Kr=e}function es(e){null!==e.return&&(Zr(e,1),$r(e,1,0))}function ts(e){for(;e===Vr;)Vr=Ur[--Wr],Ur[Wr]=null,Qr=Ur[--Wr],Ur[Wr]=null;for(;e===Jr;)Jr=Xr[--Gr],Xr[Gr]=null,Kr=Xr[--Gr],Xr[Gr]=null,Yr=Xr[--Gr],Xr[Gr]=null}var ns=null,as=null,rs=!1,ss=null;function is(e,t){var n=Pc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function os(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ns=e,as=cr(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ns=e,as=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Jr?{id:Yr,overflow:Kr}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Pc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ns=e,as=null,!0);default:return!1}}function ls(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function cs(e){if(rs){var t=as;if(t){var n=t;if(!os(e,t)){if(ls(e))throw Error(s(418));t=cr(n.nextSibling);var a=ns;t&&os(e,t)?is(a,n):(e.flags=-4097&e.flags|2,rs=!1,ns=e)}}else{if(ls(e))throw Error(s(418));e.flags=-4097&e.flags|2,rs=!1,ns=e}}}function us(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ns=e}function ds(e){if(e!==ns)return!1;if(!rs)return us(e),rs=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!nr(e.type,e.memoizedProps)),t&&(t=as)){if(ls(e))throw ps(),Error(s(418));for(;t;)is(e,t),t=cr(t.nextSibling)}if(us(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){as=cr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}as=null}}else as=ns?cr(e.stateNode.nextSibling):null;return!0}function ps(){for(var e=as;e;)e=cr(e.nextSibling)}function hs(){as=ns=null,rs=!1}function ms(e){null===ss?ss=[e]:ss.push(e)}var fs=k.ReactCurrentBatchConfig;function gs(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var a=n.stateNode}if(!a)throw Error(s(147,e));var r=a,i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=r.refs;null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function ys(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function bs(e){return(0,e._init)(e._payload)}function vs(e){function t(t,n){if(e){var a=t.deletions;null===a?(t.deletions=[n],t.flags|=16):a.push(n)}}function n(n,a){if(!e)return null;for(;null!==a;)t(n,a),a=a.sibling;return null}function a(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function r(e,t){return(e=Bc(e,t)).index=0,e.sibling=null,e}function i(t,n,a){return t.index=a,e?null!==(a=t.alternate)?(a=a.index)<n?(t.flags|=2,n):a:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,a){return null===t||6!==t.tag?((t=qc(n,e.mode,a)).return=e,t):((t=r(t,n)).return=e,t)}function c(e,t,n,a){var s=n.type;return s===w?d(e,t,n.props.children,a,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===M&&bs(s)===t.type)?((a=r(t,n.props)).ref=gs(e,t,n),a.return=e,a):((a=Fc(n.type,n.key,n.props,null,e.mode,a)).ref=gs(e,t,n),a.return=e,a)}function u(e,t,n,a){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Lc(n,e.mode,a)).return=e,t):((t=r(t,n.children||[])).return=e,t)}function d(e,t,n,a,s){return null===t||7!==t.tag?((t=Tc(n,e.mode,a,s)).return=e,t):((t=r(t,n)).return=e,t)}function p(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=qc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case x:return(n=Fc(t.type,t.key,t.props,null,e.mode,n)).ref=gs(e,null,t),n.return=e,n;case S:return(t=Lc(t,e.mode,n)).return=e,t;case M:return p(e,(0,t._init)(t._payload),n)}if(te(t)||T(t))return(t=Tc(t,e.mode,n,null)).return=e,t;ys(e,t)}return null}function h(e,t,n,a){var r=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==r?null:l(e,t,""+n,a);if("object"===typeof n&&null!==n){switch(n.$$typeof){case x:return n.key===r?c(e,t,n,a):null;case S:return n.key===r?u(e,t,n,a):null;case M:return h(e,t,(r=n._init)(n._payload),a)}if(te(n)||T(n))return null!==r?null:d(e,t,n,a,null);ys(e,n)}return null}function m(e,t,n,a,r){if("string"===typeof a&&""!==a||"number"===typeof a)return l(t,e=e.get(n)||null,""+a,r);if("object"===typeof a&&null!==a){switch(a.$$typeof){case x:return c(t,e=e.get(null===a.key?n:a.key)||null,a,r);case S:return u(t,e=e.get(null===a.key?n:a.key)||null,a,r);case M:return m(e,t,n,(0,a._init)(a._payload),r)}if(te(a)||T(a))return d(t,e=e.get(n)||null,a,r,null);ys(t,a)}return null}function f(r,s,o,l){for(var c=null,u=null,d=s,f=s=0,g=null;null!==d&&f<o.length;f++){d.index>f?(g=d,d=null):g=d.sibling;var y=h(r,d,o[f],l);if(null===y){null===d&&(d=g);break}e&&d&&null===y.alternate&&t(r,d),s=i(y,s,f),null===u?c=y:u.sibling=y,u=y,d=g}if(f===o.length)return n(r,d),rs&&Zr(r,f),c;if(null===d){for(;f<o.length;f++)null!==(d=p(r,o[f],l))&&(s=i(d,s,f),null===u?c=d:u.sibling=d,u=d);return rs&&Zr(r,f),c}for(d=a(r,d);f<o.length;f++)null!==(g=m(d,r,f,o[f],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?f:g.key),s=i(g,s,f),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach((function(e){return t(r,e)})),rs&&Zr(r,f),c}function g(r,o,l,c){var u=T(l);if("function"!==typeof u)throw Error(s(150));if(null==(l=u.call(l)))throw Error(s(151));for(var d=u=null,f=o,g=o=0,y=null,b=l.next();null!==f&&!b.done;g++,b=l.next()){f.index>g?(y=f,f=null):y=f.sibling;var v=h(r,f,b.value,c);if(null===v){null===f&&(f=y);break}e&&f&&null===v.alternate&&t(r,f),o=i(v,o,g),null===d?u=v:d.sibling=v,d=v,f=y}if(b.done)return n(r,f),rs&&Zr(r,g),u;if(null===f){for(;!b.done;g++,b=l.next())null!==(b=p(r,b.value,c))&&(o=i(b,o,g),null===d?u=b:d.sibling=b,d=b);return rs&&Zr(r,g),u}for(f=a(r,f);!b.done;g++,b=l.next())null!==(b=m(f,r,g,b.value,c))&&(e&&null!==b.alternate&&f.delete(null===b.key?g:b.key),o=i(b,o,g),null===d?u=b:d.sibling=b,d=b);return e&&f.forEach((function(e){return t(r,e)})),rs&&Zr(r,g),u}return function e(a,s,i,l){if("object"===typeof i&&null!==i&&i.type===w&&null===i.key&&(i=i.props.children),"object"===typeof i&&null!==i){switch(i.$$typeof){case x:e:{for(var c=i.key,u=s;null!==u;){if(u.key===c){if((c=i.type)===w){if(7===u.tag){n(a,u.sibling),(s=r(u,i.props.children)).return=a,a=s;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===M&&bs(c)===u.type){n(a,u.sibling),(s=r(u,i.props)).ref=gs(a,u,i),s.return=a,a=s;break e}n(a,u);break}t(a,u),u=u.sibling}i.type===w?((s=Tc(i.props.children,a.mode,l,i.key)).return=a,a=s):((l=Fc(i.type,i.key,i.props,null,a.mode,l)).ref=gs(a,s,i),l.return=a,a=l)}return o(a);case S:e:{for(u=i.key;null!==s;){if(s.key===u){if(4===s.tag&&s.stateNode.containerInfo===i.containerInfo&&s.stateNode.implementation===i.implementation){n(a,s.sibling),(s=r(s,i.children||[])).return=a,a=s;break e}n(a,s);break}t(a,s),s=s.sibling}(s=Lc(i,a.mode,l)).return=a,a=s}return o(a);case M:return e(a,s,(u=i._init)(i._payload),l)}if(te(i))return f(a,s,i,l);if(T(i))return g(a,s,i,l);ys(a,i)}return"string"===typeof i&&""!==i||"number"===typeof i?(i=""+i,null!==s&&6===s.tag?(n(a,s.sibling),(s=r(s,i)).return=a,a=s):(n(a,s),(s=qc(i,a.mode,l)).return=a,a=s),o(a)):n(a,s)}}var ks=vs(!0),xs=vs(!1),Ss=Cr(null),ws=null,Cs=null,As=null;function js(){As=Cs=ws=null}function Ds(e){var t=Ss.current;Ar(Ss),e._currentValue=t}function Es(e,t,n){for(;null!==e;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==a&&(a.childLanes|=t)):null!==a&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===n)break;e=e.return}}function Is(e,t){ws=e,As=Cs=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(vo=!0),e.firstContext=null)}function Ns(e){var t=e._currentValue;if(As!==e)if(e={context:e,memoizedValue:t,next:null},null===Cs){if(null===ws)throw Error(s(308));Cs=e,ws.dependencies={lanes:0,firstContext:e}}else Cs=Cs.next=e;return t}var Ps=null;function Ms(e){null===Ps?Ps=[e]:Ps.push(e)}function Bs(e,t,n,a){var r=t.interleaved;return null===r?(n.next=n,Ms(t)):(n.next=r.next,r.next=n),t.interleaved=n,Fs(e,a)}function Fs(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ts=!1;function Rs(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function qs(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ls(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function zs(e,t,n){var a=e.updateQueue;if(null===a)return null;if(a=a.shared,0!==(2&El)){var r=a.pending;return null===r?t.next=t:(t.next=r.next,r.next=t),a.pending=t,Fs(e,n)}return null===(r=a.interleaved)?(t.next=t,Ms(a)):(t.next=r.next,r.next=t),a.interleaved=t,Fs(e,n)}function Os(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var a=t.lanes;n|=a&=e.pendingLanes,t.lanes=n,bt(e,n)}}function Hs(e,t){var n=e.updateQueue,a=e.alternate;if(null!==a&&n===(a=a.updateQueue)){var r=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?r=s=i:s=s.next=i,n=n.next}while(null!==n);null===s?r=s=t:s=s.next=t}else r=s=t;return n={baseState:a.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:a.shared,effects:a.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function _s(e,t,n,a){var r=e.updateQueue;Ts=!1;var s=r.firstBaseUpdate,i=r.lastBaseUpdate,o=r.shared.pending;if(null!==o){r.shared.pending=null;var l=o,c=l.next;l.next=null,null===i?s=c:i.next=c,i=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==i&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==s){var d=r.baseState;for(i=0,u=c=l=null,o=s;;){var p=o.lane,h=o.eventTime;if((a&p)===p){null!==u&&(u=u.next={eventTime:h,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var m=e,f=o;switch(p=t,h=n,f.tag){case 1:if("function"===typeof(m=f.payload)){d=m.call(h,d,p);break e}d=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null===(p="function"===typeof(m=f.payload)?m.call(h,d,p):m)||void 0===p)break e;d=q({},d,p);break e;case 2:Ts=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(p=r.effects)?r.effects=[o]:p.push(o))}else h={eventTime:h,lane:p,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=h,l=d):u=u.next=h,i|=p;if(null===(o=o.next)){if(null===(o=r.shared.pending))break;o=(p=o).next,p.next=null,r.lastBaseUpdate=p,r.shared.pending=null}}if(null===u&&(l=d),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=u,null!==(t=r.shared.interleaved)){r=t;do{i|=r.lane,r=r.next}while(r!==t)}else null===s&&(r.shared.lanes=0);Rl|=i,e.lanes=i,e.memoizedState=d}}function Us(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var a=e[t],r=a.callback;if(null!==r){if(a.callback=null,a=n,"function"!==typeof r)throw Error(s(191,r));r.call(a)}}}var Ws={},Vs=Cr(Ws),Qs=Cr(Ws),Xs=Cr(Ws);function Gs(e){if(e===Ws)throw Error(s(174));return e}function Js(e,t){switch(jr(Xs,t),jr(Qs,e),jr(Vs,Ws),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ar(Vs),jr(Vs,t)}function Ys(){Ar(Vs),Ar(Qs),Ar(Xs)}function Ks(e){Gs(Xs.current);var t=Gs(Vs.current),n=le(t,e.type);t!==n&&(jr(Qs,e),jr(Vs,n))}function Zs(e){Qs.current===e&&(Ar(Vs),Ar(Qs))}var $s=Cr(0);function ei(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ti=[];function ni(){for(var e=0;e<ti.length;e++)ti[e]._workInProgressVersionPrimary=null;ti.length=0}var ai=k.ReactCurrentDispatcher,ri=k.ReactCurrentBatchConfig,si=0,ii=null,oi=null,li=null,ci=!1,ui=!1,di=0,pi=0;function hi(){throw Error(s(321))}function mi(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!oa(e[n],t[n]))return!1;return!0}function fi(e,t,n,a,r,i){if(si=i,ii=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ai.current=null===e||null===e.memoizedState?Zi:$i,e=n(a,r),ui){i=0;do{if(ui=!1,di=0,25<=i)throw Error(s(301));i+=1,li=oi=null,t.updateQueue=null,ai.current=eo,e=n(a,r)}while(ui)}if(ai.current=Ki,t=null!==oi&&null!==oi.next,si=0,li=oi=ii=null,ci=!1,t)throw Error(s(300));return e}function gi(){var e=0!==di;return di=0,e}function yi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===li?ii.memoizedState=li=e:li=li.next=e,li}function bi(){if(null===oi){var e=ii.alternate;e=null!==e?e.memoizedState:null}else e=oi.next;var t=null===li?ii.memoizedState:li.next;if(null!==t)li=t,oi=e;else{if(null===e)throw Error(s(310));e={memoizedState:(oi=e).memoizedState,baseState:oi.baseState,baseQueue:oi.baseQueue,queue:oi.queue,next:null},null===li?ii.memoizedState=li=e:li=li.next=e}return li}function vi(e,t){return"function"===typeof t?t(e):t}function ki(e){var t=bi(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var a=oi,r=a.baseQueue,i=n.pending;if(null!==i){if(null!==r){var o=r.next;r.next=i.next,i.next=o}a.baseQueue=r=i,n.pending=null}if(null!==r){i=r.next,a=a.baseState;var l=o=null,c=null,u=i;do{var d=u.lane;if((si&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),a=u.hasEagerState?u.eagerState:e(a,u.action);else{var p={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=p,o=a):c=c.next=p,ii.lanes|=d,Rl|=d}u=u.next}while(null!==u&&u!==i);null===c?o=a:c.next=l,oa(a,t.memoizedState)||(vo=!0),t.memoizedState=a,t.baseState=o,t.baseQueue=c,n.lastRenderedState=a}if(null!==(e=n.interleaved)){r=e;do{i=r.lane,ii.lanes|=i,Rl|=i,r=r.next}while(r!==e)}else null===r&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function xi(e){var t=bi(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var a=n.dispatch,r=n.pending,i=t.memoizedState;if(null!==r){n.pending=null;var o=r=r.next;do{i=e(i,o.action),o=o.next}while(o!==r);oa(i,t.memoizedState)||(vo=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),n.lastRenderedState=i}return[i,a]}function Si(){}function wi(e,t){var n=ii,a=bi(),r=t(),i=!oa(a.memoizedState,r);if(i&&(a.memoizedState=r,vo=!0),a=a.queue,Ti(ji.bind(null,n,a,e),[e]),a.getSnapshot!==t||i||null!==li&&1&li.memoizedState.tag){if(n.flags|=2048,Ni(9,Ai.bind(null,n,a,r,t),void 0,null),null===Il)throw Error(s(349));0!==(30&si)||Ci(n,t,r)}return r}function Ci(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=ii.updateQueue)?(t={lastEffect:null,stores:null},ii.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ai(e,t,n,a){t.value=n,t.getSnapshot=a,Di(t)&&Ei(e)}function ji(e,t,n){return n((function(){Di(t)&&Ei(e)}))}function Di(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!oa(e,n)}catch(a){return!0}}function Ei(e){var t=Fs(e,1);null!==t&&nc(t,e,1,-1)}function Ii(e){var t=yi();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:vi,lastRenderedState:e},t.queue=e,e=e.dispatch=Xi.bind(null,ii,e),[t.memoizedState,e]}function Ni(e,t,n,a){return e={tag:e,create:t,destroy:n,deps:a,next:null},null===(t=ii.updateQueue)?(t={lastEffect:null,stores:null},ii.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(a=n.next,n.next=e,e.next=a,t.lastEffect=e),e}function Pi(){return bi().memoizedState}function Mi(e,t,n,a){var r=yi();ii.flags|=e,r.memoizedState=Ni(1|t,n,void 0,void 0===a?null:a)}function Bi(e,t,n,a){var r=bi();a=void 0===a?null:a;var s=void 0;if(null!==oi){var i=oi.memoizedState;if(s=i.destroy,null!==a&&mi(a,i.deps))return void(r.memoizedState=Ni(t,n,s,a))}ii.flags|=e,r.memoizedState=Ni(1|t,n,s,a)}function Fi(e,t){return Mi(8390656,8,e,t)}function Ti(e,t){return Bi(2048,8,e,t)}function Ri(e,t){return Bi(4,2,e,t)}function qi(e,t){return Bi(4,4,e,t)}function Li(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function zi(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Bi(4,4,Li.bind(null,t,e),n)}function Oi(){}function Hi(e,t){var n=bi();t=void 0===t?null:t;var a=n.memoizedState;return null!==a&&null!==t&&mi(t,a[1])?a[0]:(n.memoizedState=[e,t],e)}function _i(e,t){var n=bi();t=void 0===t?null:t;var a=n.memoizedState;return null!==a&&null!==t&&mi(t,a[1])?a[0]:(e=e(),n.memoizedState=[e,t],e)}function Ui(e,t,n){return 0===(21&si)?(e.baseState&&(e.baseState=!1,vo=!0),e.memoizedState=n):(oa(n,t)||(n=ft(),ii.lanes|=n,Rl|=n,e.baseState=!0),t)}function Wi(e,t){var n=vt;vt=0!==n&&4>n?n:4,e(!0);var a=ri.transition;ri.transition={};try{e(!1),t()}finally{vt=n,ri.transition=a}}function Vi(){return bi().memoizedState}function Qi(e,t,n){var a=tc(e);if(n={lane:a,action:n,hasEagerState:!1,eagerState:null,next:null},Gi(e))Ji(t,n);else if(null!==(n=Bs(e,t,n,a))){nc(n,e,a,ec()),Yi(n,t,a)}}function Xi(e,t,n){var a=tc(e),r={lane:a,action:n,hasEagerState:!1,eagerState:null,next:null};if(Gi(e))Ji(t,r);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var i=t.lastRenderedState,o=s(i,n);if(r.hasEagerState=!0,r.eagerState=o,oa(o,i)){var l=t.interleaved;return null===l?(r.next=r,Ms(t)):(r.next=l.next,l.next=r),void(t.interleaved=r)}}catch(c){}null!==(n=Bs(e,t,r,a))&&(nc(n,e,a,r=ec()),Yi(n,t,a))}}function Gi(e){var t=e.alternate;return e===ii||null!==t&&t===ii}function Ji(e,t){ui=ci=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Yi(e,t,n){if(0!==(4194240&n)){var a=t.lanes;n|=a&=e.pendingLanes,t.lanes=n,bt(e,n)}}var Ki={readContext:Ns,useCallback:hi,useContext:hi,useEffect:hi,useImperativeHandle:hi,useInsertionEffect:hi,useLayoutEffect:hi,useMemo:hi,useReducer:hi,useRef:hi,useState:hi,useDebugValue:hi,useDeferredValue:hi,useTransition:hi,useMutableSource:hi,useSyncExternalStore:hi,useId:hi,unstable_isNewReconciler:!1},Zi={readContext:Ns,useCallback:function(e,t){return yi().memoizedState=[e,void 0===t?null:t],e},useContext:Ns,useEffect:Fi,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Mi(4194308,4,Li.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Mi(4194308,4,e,t)},useInsertionEffect:function(e,t){return Mi(4,2,e,t)},useMemo:function(e,t){var n=yi();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var a=yi();return t=void 0!==n?n(t):t,a.memoizedState=a.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},a.queue=e,e=e.dispatch=Qi.bind(null,ii,e),[a.memoizedState,e]},useRef:function(e){return e={current:e},yi().memoizedState=e},useState:Ii,useDebugValue:Oi,useDeferredValue:function(e){return yi().memoizedState=e},useTransition:function(){var e=Ii(!1),t=e[0];return e=Wi.bind(null,e[1]),yi().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var a=ii,r=yi();if(rs){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Il)throw Error(s(349));0!==(30&si)||Ci(a,t,n)}r.memoizedState=n;var i={value:n,getSnapshot:t};return r.queue=i,Fi(ji.bind(null,a,i,e),[e]),a.flags|=2048,Ni(9,Ai.bind(null,a,i,n,t),void 0,null),n},useId:function(){var e=yi(),t=Il.identifierPrefix;if(rs){var n=Kr;t=":"+t+"R"+(n=(Yr&~(1<<32-it(Yr)-1)).toString(32)+n),0<(n=di++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=pi++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},$i={readContext:Ns,useCallback:Hi,useContext:Ns,useEffect:Ti,useImperativeHandle:zi,useInsertionEffect:Ri,useLayoutEffect:qi,useMemo:_i,useReducer:ki,useRef:Pi,useState:function(){return ki(vi)},useDebugValue:Oi,useDeferredValue:function(e){return Ui(bi(),oi.memoizedState,e)},useTransition:function(){return[ki(vi)[0],bi().memoizedState]},useMutableSource:Si,useSyncExternalStore:wi,useId:Vi,unstable_isNewReconciler:!1},eo={readContext:Ns,useCallback:Hi,useContext:Ns,useEffect:Ti,useImperativeHandle:zi,useInsertionEffect:Ri,useLayoutEffect:qi,useMemo:_i,useReducer:xi,useRef:Pi,useState:function(){return xi(vi)},useDebugValue:Oi,useDeferredValue:function(e){var t=bi();return null===oi?t.memoizedState=e:Ui(t,oi.memoizedState,e)},useTransition:function(){return[xi(vi)[0],bi().memoizedState]},useMutableSource:Si,useSyncExternalStore:wi,useId:Vi,unstable_isNewReconciler:!1};function to(e,t){if(e&&e.defaultProps){for(var n in t=q({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function no(e,t,n,a){n=null===(n=n(a,t=e.memoizedState))||void 0===n?t:q({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ao={isMounted:function(e){return!!(e=e._reactInternals)&&_e(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var a=ec(),r=tc(e),s=Ls(a,r);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=zs(e,s,r))&&(nc(t,e,r,a),Os(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var a=ec(),r=tc(e),s=Ls(a,r);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=zs(e,s,r))&&(nc(t,e,r,a),Os(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),a=tc(e),r=Ls(n,a);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=zs(e,r,a))&&(nc(t,e,a,n),Os(t,e,a))}};function ro(e,t,n,a,r,s,i){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(a,s,i):!t.prototype||!t.prototype.isPureReactComponent||(!la(n,a)||!la(r,s))}function so(e,t,n){var a=!1,r=Dr,s=t.contextType;return"object"===typeof s&&null!==s?s=Ns(s):(r=Mr(t)?Nr:Er.current,s=(a=null!==(a=t.contextTypes)&&void 0!==a)?Pr(e,r):Dr),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ao,e.stateNode=t,t._reactInternals=e,a&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=s),t}function io(e,t,n,a){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,a),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,a),t.state!==e&&ao.enqueueReplaceState(t,t.state,null)}function oo(e,t,n,a){var r=e.stateNode;r.props=n,r.state=e.memoizedState,r.refs={},Rs(e);var s=t.contextType;"object"===typeof s&&null!==s?r.context=Ns(s):(s=Mr(t)?Nr:Er.current,r.context=Pr(e,s)),r.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(no(e,t,s,n),r.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof r.getSnapshotBeforeUpdate||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||(t=r.state,"function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),t!==r.state&&ao.enqueueReplaceState(r,r.state,null),_s(e,n,r,a),r.state=e.memoizedState),"function"===typeof r.componentDidMount&&(e.flags|=4194308)}function lo(e,t){try{var n="",a=t;do{n+=H(a),a=a.return}while(a);var r=n}catch(s){r="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:r,digest:null}}function co(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function uo(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var po="function"===typeof WeakMap?WeakMap:Map;function ho(e,t,n){(n=Ls(-1,n)).tag=3,n.payload={element:null};var a=t.value;return n.callback=function(){Wl||(Wl=!0,Vl=a),uo(0,t)},n}function mo(e,t,n){(n=Ls(-1,n)).tag=3;var a=e.type.getDerivedStateFromError;if("function"===typeof a){var r=t.value;n.payload=function(){return a(r)},n.callback=function(){uo(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){uo(0,t),"function"!==typeof a&&(null===Ql?Ql=new Set([this]):Ql.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function fo(e,t,n){var a=e.pingCache;if(null===a){a=e.pingCache=new po;var r=new Set;a.set(t,r)}else void 0===(r=a.get(t))&&(r=new Set,a.set(t,r));r.has(n)||(r.add(n),e=Ac.bind(null,e,t,n),t.then(e,e))}function go(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function yo(e,t,n,a,r){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Ls(-1,1)).tag=2,zs(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=r,e)}var bo=k.ReactCurrentOwner,vo=!1;function ko(e,t,n,a){t.child=null===e?xs(t,null,n,a):ks(t,e.child,n,a)}function xo(e,t,n,a,r){n=n.render;var s=t.ref;return Is(t,r),a=fi(e,t,n,a,s,r),n=gi(),null===e||vo?(rs&&n&&es(t),t.flags|=1,ko(e,t,a,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Wo(e,t,r))}function So(e,t,n,a,r){if(null===e){var s=n.type;return"function"!==typeof s||Mc(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Fc(n.type,null,a,t,t.mode,r)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,wo(e,t,s,a,r))}if(s=e.child,0===(e.lanes&r)){var i=s.memoizedProps;if((n=null!==(n=n.compare)?n:la)(i,a)&&e.ref===t.ref)return Wo(e,t,r)}return t.flags|=1,(e=Bc(s,a)).ref=t.ref,e.return=t,t.child=e}function wo(e,t,n,a,r){if(null!==e){var s=e.memoizedProps;if(la(s,a)&&e.ref===t.ref){if(vo=!1,t.pendingProps=a=s,0===(e.lanes&r))return t.lanes=e.lanes,Wo(e,t,r);0!==(131072&e.flags)&&(vo=!0)}}return jo(e,t,n,a,r)}function Co(e,t,n){var a=t.pendingProps,r=a.children,s=null!==e?e.memoizedState:null;if("hidden"===a.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},jr(Bl,Ml),Ml|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,jr(Bl,Ml),Ml|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=null!==s?s.baseLanes:n,jr(Bl,Ml),Ml|=a}else null!==s?(a=s.baseLanes|n,t.memoizedState=null):a=n,jr(Bl,Ml),Ml|=a;return ko(e,t,r,n),t.child}function Ao(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function jo(e,t,n,a,r){var s=Mr(n)?Nr:Er.current;return s=Pr(t,s),Is(t,r),n=fi(e,t,n,a,s,r),a=gi(),null===e||vo?(rs&&a&&es(t),t.flags|=1,ko(e,t,n,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Wo(e,t,r))}function Do(e,t,n,a,r){if(Mr(n)){var s=!0;Rr(t)}else s=!1;if(Is(t,r),null===t.stateNode)Uo(e,t),so(t,n,a),oo(t,n,a,r),a=!0;else if(null===e){var i=t.stateNode,o=t.memoizedProps;i.props=o;var l=i.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ns(c):c=Pr(t,c=Mr(n)?Nr:Er.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof i.getSnapshotBeforeUpdate;d||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(o!==a||l!==c)&&io(t,i,a,c),Ts=!1;var p=t.memoizedState;i.state=p,_s(t,a,i,r),l=t.memoizedState,o!==a||p!==l||Ir.current||Ts?("function"===typeof u&&(no(t,n,u,a),l=t.memoizedState),(o=Ts||ro(t,n,o,a,p,l,c))?(d||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||("function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"===typeof i.componentDidMount&&(t.flags|=4194308)):("function"===typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=l),i.props=a,i.state=l,i.context=c,a=o):("function"===typeof i.componentDidMount&&(t.flags|=4194308),a=!1)}else{i=t.stateNode,qs(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:to(t.type,o),i.props=c,d=t.pendingProps,p=i.context,"object"===typeof(l=n.contextType)&&null!==l?l=Ns(l):l=Pr(t,l=Mr(n)?Nr:Er.current);var h=n.getDerivedStateFromProps;(u="function"===typeof h||"function"===typeof i.getSnapshotBeforeUpdate)||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(o!==d||p!==l)&&io(t,i,a,l),Ts=!1,p=t.memoizedState,i.state=p,_s(t,a,i,r);var m=t.memoizedState;o!==d||p!==m||Ir.current||Ts?("function"===typeof h&&(no(t,n,h,a),m=t.memoizedState),(c=Ts||ro(t,n,c,a,p,m,l)||!1)?(u||"function"!==typeof i.UNSAFE_componentWillUpdate&&"function"!==typeof i.componentWillUpdate||("function"===typeof i.componentWillUpdate&&i.componentWillUpdate(a,m,l),"function"===typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(a,m,l)),"function"===typeof i.componentDidUpdate&&(t.flags|=4),"function"===typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof i.componentDidUpdate||o===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||o===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=m),i.props=a,i.state=m,i.context=l,a=c):("function"!==typeof i.componentDidUpdate||o===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||o===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),a=!1)}return Eo(e,t,n,a,s,r)}function Eo(e,t,n,a,r,s){Ao(e,t);var i=0!==(128&t.flags);if(!a&&!i)return r&&qr(t,n,!1),Wo(e,t,s);a=t.stateNode,bo.current=t;var o=i&&"function"!==typeof n.getDerivedStateFromError?null:a.render();return t.flags|=1,null!==e&&i?(t.child=ks(t,e.child,null,s),t.child=ks(t,null,o,s)):ko(e,t,o,s),t.memoizedState=a.state,r&&qr(t,n,!0),t.child}function Io(e){var t=e.stateNode;t.pendingContext?Fr(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Fr(0,t.context,!1),Js(e,t.containerInfo)}function No(e,t,n,a,r){return hs(),ms(r),t.flags|=256,ko(e,t,n,a),t.child}var Po,Mo,Bo,Fo,To={dehydrated:null,treeContext:null,retryLane:0};function Ro(e){return{baseLanes:e,cachePool:null,transitions:null}}function qo(e,t,n){var a,r=t.pendingProps,i=$s.current,o=!1,l=0!==(128&t.flags);if((a=l)||(a=(null===e||null!==e.memoizedState)&&0!==(2&i)),a?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(i|=1),jr($s,1&i),null===e)return cs(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=r.children,e=r.fallback,o?(r=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&r)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Rc(l,r,0,null),e=Tc(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Ro(n),t.memoizedState=To,e):Lo(t,l));if(null!==(i=e.memoizedState)&&null!==(a=i.dehydrated))return function(e,t,n,a,r,i,o){if(n)return 256&t.flags?(t.flags&=-257,zo(e,t,o,a=co(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(i=a.fallback,r=t.mode,a=Rc({mode:"visible",children:a.children},r,0,null),(i=Tc(i,r,o,null)).flags|=2,a.return=t,i.return=t,a.sibling=i,t.child=a,0!==(1&t.mode)&&ks(t,e.child,null,o),t.child.memoizedState=Ro(o),t.memoizedState=To,i);if(0===(1&t.mode))return zo(e,t,o,null);if("$!"===r.data){if(a=r.nextSibling&&r.nextSibling.dataset)var l=a.dgst;return a=l,zo(e,t,o,a=co(i=Error(s(419)),a,void 0))}if(l=0!==(o&e.childLanes),vo||l){if(null!==(a=Il)){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}0!==(r=0!==(r&(a.suspendedLanes|o))?0:r)&&r!==i.retryLane&&(i.retryLane=r,Fs(e,r),nc(a,e,r,-1))}return fc(),zo(e,t,o,a=co(Error(s(421))))}return"$?"===r.data?(t.flags|=128,t.child=e.child,t=Dc.bind(null,e),r._reactRetry=t,null):(e=i.treeContext,as=cr(r.nextSibling),ns=t,rs=!0,ss=null,null!==e&&(Xr[Gr++]=Yr,Xr[Gr++]=Kr,Xr[Gr++]=Jr,Yr=e.id,Kr=e.overflow,Jr=t),t=Lo(t,a.children),t.flags|=4096,t)}(e,t,l,r,a,i,n);if(o){o=r.fallback,l=t.mode,a=(i=e.child).sibling;var c={mode:"hidden",children:r.children};return 0===(1&l)&&t.child!==i?((r=t.child).childLanes=0,r.pendingProps=c,t.deletions=null):(r=Bc(i,c)).subtreeFlags=14680064&i.subtreeFlags,null!==a?o=Bc(a,o):(o=Tc(o,l,n,null)).flags|=2,o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,l=null===(l=e.child.memoizedState)?Ro(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=To,r}return e=(o=e.child).sibling,r=Bc(o,{mode:"visible",children:r.children}),0===(1&t.mode)&&(r.lanes=n),r.return=t,r.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Lo(e,t){return(t=Rc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function zo(e,t,n,a){return null!==a&&ms(a),ks(t,e.child,null,n),(e=Lo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Oo(e,t,n){e.lanes|=t;var a=e.alternate;null!==a&&(a.lanes|=t),Es(e.return,t,n)}function Ho(e,t,n,a,r){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:n,tailMode:r}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=a,s.tail=n,s.tailMode=r)}function _o(e,t,n){var a=t.pendingProps,r=a.revealOrder,s=a.tail;if(ko(e,t,a.children,n),0!==(2&(a=$s.current)))a=1&a|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Oo(e,n,t);else if(19===e.tag)Oo(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}if(jr($s,a),0===(1&t.mode))t.memoizedState=null;else switch(r){case"forwards":for(n=t.child,r=null;null!==n;)null!==(e=n.alternate)&&null===ei(e)&&(r=n),n=n.sibling;null===(n=r)?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),Ho(t,!1,r,n,s);break;case"backwards":for(n=null,r=t.child,t.child=null;null!==r;){if(null!==(e=r.alternate)&&null===ei(e)){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}Ho(t,!0,n,null,s);break;case"together":Ho(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Uo(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Wo(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Rl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Bc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Bc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Vo(e,t){if(!rs)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var a=null;null!==n;)null!==n.alternate&&(a=n),n=n.sibling;null===a?t||null===e.tail?e.tail=null:e.tail.sibling=null:a.sibling=null}}function Qo(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,a=0;if(t)for(var r=e.child;null!==r;)n|=r.lanes|r.childLanes,a|=14680064&r.subtreeFlags,a|=14680064&r.flags,r.return=e,r=r.sibling;else for(r=e.child;null!==r;)n|=r.lanes|r.childLanes,a|=r.subtreeFlags,a|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=a,e.childLanes=n,t}function Xo(e,t,n){var a=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qo(t),null;case 1:case 17:return Mr(t.type)&&Br(),Qo(t),null;case 3:return a=t.stateNode,Ys(),Ar(Ir),Ar(Er),ni(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),null!==e&&null!==e.child||(ds(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ss&&(ic(ss),ss=null))),Mo(e,t),Qo(t),null;case 5:Zs(t);var r=Gs(Xs.current);if(n=t.type,null!==e&&null!=t.stateNode)Bo(e,t,n,a,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!a){if(null===t.stateNode)throw Error(s(166));return Qo(t),null}if(e=Gs(Vs.current),ds(t)){a=t.stateNode,n=t.type;var i=t.memoizedProps;switch(a[pr]=t,a[hr]=i,e=0!==(1&t.mode),n){case"dialog":za("cancel",a),za("close",a);break;case"iframe":case"object":case"embed":za("load",a);break;case"video":case"audio":for(r=0;r<Ta.length;r++)za(Ta[r],a);break;case"source":za("error",a);break;case"img":case"image":case"link":za("error",a),za("load",a);break;case"details":za("toggle",a);break;case"input":Y(a,i),za("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!i.multiple},za("invalid",a);break;case"textarea":re(a,i),za("invalid",a)}for(var l in be(n,i),r=null,i)if(i.hasOwnProperty(l)){var c=i[l];"children"===l?"string"===typeof c?a.textContent!==c&&(!0!==i.suppressHydrationWarning&&Za(a.textContent,c,e),r=["children",c]):"number"===typeof c&&a.textContent!==""+c&&(!0!==i.suppressHydrationWarning&&Za(a.textContent,c,e),r=["children",""+c]):o.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&za("scroll",a)}switch(n){case"input":Q(a),$(a,i,!0);break;case"textarea":Q(a),ie(a);break;case"select":case"option":break;default:"function"===typeof i.onClick&&(a.onclick=$a)}a=r,t.updateQueue=a,null!==a&&(t.flags|=4)}else{l=9===r.nodeType?r:r.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof a.is?e=l.createElement(n,{is:a.is}):(e=l.createElement(n),"select"===n&&(l=e,a.multiple?l.multiple=!0:a.size&&(l.size=a.size))):e=l.createElementNS(e,n),e[pr]=t,e[hr]=a,Po(e,t,!1,!1),t.stateNode=e;e:{switch(l=ve(n,a),n){case"dialog":za("cancel",e),za("close",e),r=a;break;case"iframe":case"object":case"embed":za("load",e),r=a;break;case"video":case"audio":for(r=0;r<Ta.length;r++)za(Ta[r],e);r=a;break;case"source":za("error",e),r=a;break;case"img":case"image":case"link":za("error",e),za("load",e),r=a;break;case"details":za("toggle",e),r=a;break;case"input":Y(e,a),r=J(e,a),za("invalid",e);break;case"option":default:r=a;break;case"select":e._wrapperState={wasMultiple:!!a.multiple},r=q({},a,{value:void 0}),za("invalid",e);break;case"textarea":re(e,a),r=ae(e,a),za("invalid",e)}for(i in be(n,r),c=r)if(c.hasOwnProperty(i)){var u=c[i];"style"===i?ge(e,u):"dangerouslySetInnerHTML"===i?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===i?"string"===typeof u?("textarea"!==n||""!==u)&&pe(e,u):"number"===typeof u&&pe(e,""+u):"suppressContentEditableWarning"!==i&&"suppressHydrationWarning"!==i&&"autoFocus"!==i&&(o.hasOwnProperty(i)?null!=u&&"onScroll"===i&&za("scroll",e):null!=u&&v(e,i,u,l))}switch(n){case"input":Q(e),$(e,a,!1);break;case"textarea":Q(e),ie(e);break;case"option":null!=a.value&&e.setAttribute("value",""+W(a.value));break;case"select":e.multiple=!!a.multiple,null!=(i=a.value)?ne(e,!!a.multiple,i,!1):null!=a.defaultValue&&ne(e,!!a.multiple,a.defaultValue,!0);break;default:"function"===typeof r.onClick&&(e.onclick=$a)}switch(n){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Qo(t),null;case 6:if(e&&null!=t.stateNode)Fo(e,t,e.memoizedProps,a);else{if("string"!==typeof a&&null===t.stateNode)throw Error(s(166));if(n=Gs(Xs.current),Gs(Vs.current),ds(t)){if(a=t.stateNode,n=t.memoizedProps,a[pr]=t,(i=a.nodeValue!==n)&&null!==(e=ns))switch(e.tag){case 3:Za(a.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Za(a.nodeValue,n,0!==(1&e.mode))}i&&(t.flags|=4)}else(a=(9===n.nodeType?n:n.ownerDocument).createTextNode(a))[pr]=t,t.stateNode=a}return Qo(t),null;case 13:if(Ar($s),a=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(rs&&null!==as&&0!==(1&t.mode)&&0===(128&t.flags))ps(),hs(),t.flags|=98560,i=!1;else if(i=ds(t),null!==a&&null!==a.dehydrated){if(null===e){if(!i)throw Error(s(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(s(317));i[pr]=t}else hs(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Qo(t),i=!1}else null!==ss&&(ic(ss),ss=null),i=!0;if(!i)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((a=null!==a)!==(null!==e&&null!==e.memoizedState)&&a&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&$s.current)?0===Fl&&(Fl=3):fc())),null!==t.updateQueue&&(t.flags|=4),Qo(t),null);case 4:return Ys(),Mo(e,t),null===e&&_a(t.stateNode.containerInfo),Qo(t),null;case 10:return Ds(t.type._context),Qo(t),null;case 19:if(Ar($s),null===(i=t.memoizedState))return Qo(t),null;if(a=0!==(128&t.flags),null===(l=i.rendering))if(a)Vo(i,!1);else{if(0!==Fl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ei(e))){for(t.flags|=128,Vo(i,!1),null!==(a=l.updateQueue)&&(t.updateQueue=a,t.flags|=4),t.subtreeFlags=0,a=n,n=t.child;null!==n;)e=a,(i=n).flags&=14680066,null===(l=i.alternate)?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,e=l.dependencies,i.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return jr($s,1&$s.current|2),t.child}e=e.sibling}null!==i.tail&&Ke()>_l&&(t.flags|=128,a=!0,Vo(i,!1),t.lanes=4194304)}else{if(!a)if(null!==(e=ei(l))){if(t.flags|=128,a=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Vo(i,!0),null===i.tail&&"hidden"===i.tailMode&&!l.alternate&&!rs)return Qo(t),null}else 2*Ke()-i.renderingStartTime>_l&&1073741824!==n&&(t.flags|=128,a=!0,Vo(i,!1),t.lanes=4194304);i.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=i.last)?n.sibling=l:t.child=l,i.last=l)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Ke(),t.sibling=null,n=$s.current,jr($s,a?1&n|2:1&n),t):(Qo(t),null);case 22:case 23:return dc(),a=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==a&&(t.flags|=8192),a&&0!==(1&t.mode)?0!==(1073741824&Ml)&&(Qo(t),6&t.subtreeFlags&&(t.flags|=8192)):Qo(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Go(e,t){switch(ts(t),t.tag){case 1:return Mr(t.type)&&Br(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Ys(),Ar(Ir),Ar(Er),ni(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Zs(t),null;case 13:if(Ar($s),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));hs()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ar($s),null;case 4:return Ys(),null;case 10:return Ds(t.type._context),null;case 22:case 23:return dc(),null;default:return null}}Po=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Mo=function(){},Bo=function(e,t,n,a){var r=e.memoizedProps;if(r!==a){e=t.stateNode,Gs(Vs.current);var s,i=null;switch(n){case"input":r=J(e,r),a=J(e,a),i=[];break;case"select":r=q({},r,{value:void 0}),a=q({},a,{value:void 0}),i=[];break;case"textarea":r=ae(e,r),a=ae(e,a),i=[];break;default:"function"!==typeof r.onClick&&"function"===typeof a.onClick&&(e.onclick=$a)}for(u in be(n,a),n=null,r)if(!a.hasOwnProperty(u)&&r.hasOwnProperty(u)&&null!=r[u])if("style"===u){var l=r[u];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(o.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in a){var c=a[u];if(l=null!=r?r[u]:void 0,a.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(i||(i=[]),i.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(i=i||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(i=i||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(o.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&za("scroll",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(t.updateQueue=u)&&(t.flags|=4)}},Fo=function(e,t,n,a){n!==a&&(t.flags|=4)};var Jo=!1,Yo=!1,Ko="function"===typeof WeakSet?WeakSet:Set,Zo=null;function $o(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(a){Cc(e,t,a)}else n.current=null}function el(e,t,n){try{n()}catch(a){Cc(e,t,a)}}var tl=!1;function nl(e,t,n){var a=t.updateQueue;if(null!==(a=null!==a?a.lastEffect:null)){var r=a=a.next;do{if((r.tag&e)===e){var s=r.destroy;r.destroy=void 0,void 0!==s&&el(t,n,s)}r=r.next}while(r!==a)}}function al(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var a=n.create;n.destroy=a()}n=n.next}while(n!==t)}}function rl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function sl(e){var t=e.alternate;null!==t&&(e.alternate=null,sl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[pr],delete t[hr],delete t[fr],delete t[gr],delete t[yr])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function il(e){return 5===e.tag||3===e.tag||4===e.tag}function ol(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||il(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var a=e.tag;if(5===a||6===a)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=$a));else if(4!==a&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var a=e.tag;if(5===a||6===a)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==a&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var ul=null,dl=!1;function pl(e,t,n){for(n=n.child;null!==n;)hl(e,t,n),n=n.sibling}function hl(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(rt,n)}catch(o){}switch(n.tag){case 5:Yo||$o(n,t);case 6:var a=ul,r=dl;ul=null,pl(e,t,n),dl=r,null!==(ul=a)&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ul.removeChild(n.stateNode));break;case 18:null!==ul&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?lr(e.parentNode,n):1===e.nodeType&&lr(e,n),_t(e)):lr(ul,n.stateNode));break;case 4:a=ul,r=dl,ul=n.stateNode.containerInfo,dl=!0,pl(e,t,n),ul=a,dl=r;break;case 0:case 11:case 14:case 15:if(!Yo&&(null!==(a=n.updateQueue)&&null!==(a=a.lastEffect))){r=a=a.next;do{var s=r,i=s.destroy;s=s.tag,void 0!==i&&(0!==(2&s)||0!==(4&s))&&el(n,t,i),r=r.next}while(r!==a)}pl(e,t,n);break;case 1:if(!Yo&&($o(n,t),"function"===typeof(a=n.stateNode).componentWillUnmount))try{a.props=n.memoizedProps,a.state=n.memoizedState,a.componentWillUnmount()}catch(o){Cc(n,t,o)}pl(e,t,n);break;case 21:pl(e,t,n);break;case 22:1&n.mode?(Yo=(a=Yo)||null!==n.memoizedState,pl(e,t,n),Yo=a):pl(e,t,n);break;default:pl(e,t,n)}}function ml(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Ko),t.forEach((function(t){var a=Ec.bind(null,e,t);n.has(t)||(n.add(t),t.then(a,a))}))}}function fl(e,t){var n=t.deletions;if(null!==n)for(var a=0;a<n.length;a++){var r=n[a];try{var i=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,dl=!1;break e;case 3:case 4:ul=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===ul)throw Error(s(160));hl(i,o,r),ul=null,dl=!1;var c=r.alternate;null!==c&&(c.return=null),r.return=null}catch(u){Cc(r,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var n=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(fl(t,e),yl(e),4&a){try{nl(3,e,e.return),al(3,e)}catch(g){Cc(e,e.return,g)}try{nl(5,e,e.return)}catch(g){Cc(e,e.return,g)}}break;case 1:fl(t,e),yl(e),512&a&&null!==n&&$o(n,n.return);break;case 5:if(fl(t,e),yl(e),512&a&&null!==n&&$o(n,n.return),32&e.flags){var r=e.stateNode;try{pe(r,"")}catch(g){Cc(e,e.return,g)}}if(4&a&&null!=(r=e.stateNode)){var i=e.memoizedProps,o=null!==n?n.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===i.type&&null!=i.name&&K(r,i),ve(l,o);var u=ve(l,i);for(o=0;o<c.length;o+=2){var d=c[o],p=c[o+1];"style"===d?ge(r,p):"dangerouslySetInnerHTML"===d?de(r,p):"children"===d?pe(r,p):v(r,d,p,u)}switch(l){case"input":Z(r,i);break;case"textarea":se(r,i);break;case"select":var h=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!i.multiple;var m=i.value;null!=m?ne(r,!!i.multiple,m,!1):h!==!!i.multiple&&(null!=i.defaultValue?ne(r,!!i.multiple,i.defaultValue,!0):ne(r,!!i.multiple,i.multiple?[]:"",!1))}r[hr]=i}catch(g){Cc(e,e.return,g)}}break;case 6:if(fl(t,e),yl(e),4&a){if(null===e.stateNode)throw Error(s(162));r=e.stateNode,i=e.memoizedProps;try{r.nodeValue=i}catch(g){Cc(e,e.return,g)}}break;case 3:if(fl(t,e),yl(e),4&a&&null!==n&&n.memoizedState.isDehydrated)try{_t(t.containerInfo)}catch(g){Cc(e,e.return,g)}break;case 4:default:fl(t,e),yl(e);break;case 13:fl(t,e),yl(e),8192&(r=e.child).flags&&(i=null!==r.memoizedState,r.stateNode.isHidden=i,!i||null!==r.alternate&&null!==r.alternate.memoizedState||(Hl=Ke())),4&a&&ml(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Yo=(u=Yo)||d,fl(t,e),Yo=u):fl(t,e),yl(e),8192&a){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for(Zo=e,d=e.child;null!==d;){for(p=Zo=d;null!==Zo;){switch(m=(h=Zo).child,h.tag){case 0:case 11:case 14:case 15:nl(4,h,h.return);break;case 1:$o(h,h.return);var f=h.stateNode;if("function"===typeof f.componentWillUnmount){a=h,n=h.return;try{t=a,f.props=t.memoizedProps,f.state=t.memoizedState,f.componentWillUnmount()}catch(g){Cc(a,n,g)}}break;case 5:$o(h,h.return);break;case 22:if(null!==h.memoizedState){xl(p);continue}}null!==m?(m.return=h,Zo=m):xl(p)}d=d.sibling}e:for(d=null,p=e;;){if(5===p.tag){if(null===d){d=p;try{r=p.stateNode,u?"function"===typeof(i=r.style).setProperty?i.setProperty("display","none","important"):i.display="none":(l=p.stateNode,o=void 0!==(c=p.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=fe("display",o))}catch(g){Cc(e,e.return,g)}}}else if(6===p.tag){if(null===d)try{p.stateNode.nodeValue=u?"":p.memoizedProps}catch(g){Cc(e,e.return,g)}}else if((22!==p.tag&&23!==p.tag||null===p.memoizedState||p===e)&&null!==p.child){p.child.return=p,p=p.child;continue}if(p===e)break e;for(;null===p.sibling;){if(null===p.return||p.return===e)break e;d===p&&(d=null),p=p.return}d===p&&(d=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:fl(t,e),yl(e),4&a&&ml(e);case 21:}}function yl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(il(n)){var a=n;break e}n=n.return}throw Error(s(160))}switch(a.tag){case 5:var r=a.stateNode;32&a.flags&&(pe(r,""),a.flags&=-33),cl(e,ol(e),r);break;case 3:case 4:var i=a.stateNode.containerInfo;ll(e,ol(e),i);break;default:throw Error(s(161))}}catch(o){Cc(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function bl(e,t,n){Zo=e,vl(e,t,n)}function vl(e,t,n){for(var a=0!==(1&e.mode);null!==Zo;){var r=Zo,s=r.child;if(22===r.tag&&a){var i=null!==r.memoizedState||Jo;if(!i){var o=r.alternate,l=null!==o&&null!==o.memoizedState||Yo;o=Jo;var c=Yo;if(Jo=i,(Yo=l)&&!c)for(Zo=r;null!==Zo;)l=(i=Zo).child,22===i.tag&&null!==i.memoizedState?Sl(r):null!==l?(l.return=i,Zo=l):Sl(r);for(;null!==s;)Zo=s,vl(s,t,n),s=s.sibling;Zo=r,Jo=o,Yo=c}kl(e)}else 0!==(8772&r.subtreeFlags)&&null!==s?(s.return=r,Zo=s):kl(e)}}function kl(e){for(;null!==Zo;){var t=Zo;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Yo||al(5,t);break;case 1:var a=t.stateNode;if(4&t.flags&&!Yo)if(null===n)a.componentDidMount();else{var r=t.elementType===t.type?n.memoizedProps:to(t.type,n.memoizedProps);a.componentDidUpdate(r,n.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;null!==i&&Us(t,i,a);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Us(t,o,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var p=d.dehydrated;null!==p&&_t(p)}}}break;default:throw Error(s(163))}Yo||512&t.flags&&rl(t)}catch(h){Cc(t,t.return,h)}}if(t===e){Zo=null;break}if(null!==(n=t.sibling)){n.return=t.return,Zo=n;break}Zo=t.return}}function xl(e){for(;null!==Zo;){var t=Zo;if(t===e){Zo=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Zo=n;break}Zo=t.return}}function Sl(e){for(;null!==Zo;){var t=Zo;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{al(4,t)}catch(l){Cc(t,n,l)}break;case 1:var a=t.stateNode;if("function"===typeof a.componentDidMount){var r=t.return;try{a.componentDidMount()}catch(l){Cc(t,r,l)}}var s=t.return;try{rl(t)}catch(l){Cc(t,s,l)}break;case 5:var i=t.return;try{rl(t)}catch(l){Cc(t,i,l)}}}catch(l){Cc(t,t.return,l)}if(t===e){Zo=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Zo=o;break}Zo=t.return}}var wl,Cl=Math.ceil,Al=k.ReactCurrentDispatcher,jl=k.ReactCurrentOwner,Dl=k.ReactCurrentBatchConfig,El=0,Il=null,Nl=null,Pl=0,Ml=0,Bl=Cr(0),Fl=0,Tl=null,Rl=0,ql=0,Ll=0,zl=null,Ol=null,Hl=0,_l=1/0,Ul=null,Wl=!1,Vl=null,Ql=null,Xl=!1,Gl=null,Jl=0,Yl=0,Kl=null,Zl=-1,$l=0;function ec(){return 0!==(6&El)?Ke():-1!==Zl?Zl:Zl=Ke()}function tc(e){return 0===(1&e.mode)?1:0!==(2&El)&&0!==Pl?Pl&-Pl:null!==fs.transition?(0===$l&&($l=ft()),$l):0!==(e=vt)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function nc(e,t,n,a){if(50<Yl)throw Yl=0,Kl=null,Error(s(185));yt(e,n,a),0!==(2&El)&&e===Il||(e===Il&&(0===(2&El)&&(ql|=n),4===Fl&&oc(e,Pl)),ac(e,a),1===n&&0===El&&0===(1&t.mode)&&(_l=Ke()+500,zr&&_r()))}function ac(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,a=e.pingedLanes,r=e.expirationTimes,s=e.pendingLanes;0<s;){var i=31-it(s),o=1<<i,l=r[i];-1===l?0!==(o&n)&&0===(o&a)||(r[i]=ht(o,t)):l<=t&&(e.expiredLanes|=o),s&=~o}}(e,t);var a=pt(e,e===Il?Pl:0);if(0===a)null!==n&&Ge(n),e.callbackNode=null,e.callbackPriority=0;else if(t=a&-a,e.callbackPriority!==t){if(null!=n&&Ge(n),1===t)0===e.tag?function(e){zr=!0,Hr(e)}(lc.bind(null,e)):Hr(lc.bind(null,e)),ir((function(){0===(6&El)&&_r()})),n=null;else{switch(kt(a)){case 1:n=$e;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=at}n=Ic(n,rc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function rc(e,t){if(Zl=-1,$l=0,0!==(6&El))throw Error(s(327));var n=e.callbackNode;if(Sc()&&e.callbackNode!==n)return null;var a=pt(e,e===Il?Pl:0);if(0===a)return null;if(0!==(30&a)||0!==(a&e.expiredLanes)||t)t=gc(e,a);else{t=a;var r=El;El|=2;var i=mc();for(Il===e&&Pl===t||(Ul=null,_l=Ke()+500,pc(e,t));;)try{bc();break}catch(l){hc(e,l)}js(),Al.current=i,El=r,null!==Nl?t=0:(Il=null,Pl=0,t=Fl)}if(0!==t){if(2===t&&(0!==(r=mt(e))&&(a=r,t=sc(e,r))),1===t)throw n=Tl,pc(e,0),oc(e,a),ac(e,Ke()),n;if(6===t)oc(e,a);else{if(r=e.current.alternate,0===(30&a)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var a=0;a<n.length;a++){var r=n[a],s=r.getSnapshot;r=r.value;try{if(!oa(s(),r))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(r)&&(2===(t=gc(e,a))&&(0!==(i=mt(e))&&(a=i,t=sc(e,i))),1===t))throw n=Tl,pc(e,0),oc(e,a),ac(e,Ke()),n;switch(e.finishedWork=r,e.finishedLanes=a,t){case 0:case 1:throw Error(s(345));case 2:case 5:xc(e,Ol,Ul);break;case 3:if(oc(e,a),(130023424&a)===a&&10<(t=Hl+500-Ke())){if(0!==pt(e,0))break;if(((r=e.suspendedLanes)&a)!==a){ec(),e.pingedLanes|=e.suspendedLanes&r;break}e.timeoutHandle=ar(xc.bind(null,e,Ol,Ul),t);break}xc(e,Ol,Ul);break;case 4:if(oc(e,a),(4194240&a)===a)break;for(t=e.eventTimes,r=-1;0<a;){var o=31-it(a);i=1<<o,(o=t[o])>r&&(r=o),a&=~i}if(a=r,10<(a=(120>(a=Ke()-a)?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*Cl(a/1960))-a)){e.timeoutHandle=ar(xc.bind(null,e,Ol,Ul),a);break}xc(e,Ol,Ul);break;default:throw Error(s(329))}}}return ac(e,Ke()),e.callbackNode===n?rc.bind(null,e):null}function sc(e,t){var n=zl;return e.current.memoizedState.isDehydrated&&(pc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=Ol,Ol=n,null!==t&&ic(t)),e}function ic(e){null===Ol?Ol=e:Ol.push.apply(Ol,e)}function oc(e,t){for(t&=~Ll,t&=~ql,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-it(t),a=1<<n;e[n]=-1,t&=~a}}function lc(e){if(0!==(6&El))throw Error(s(327));Sc();var t=pt(e,0);if(0===(1&t))return ac(e,Ke()),null;var n=gc(e,t);if(0!==e.tag&&2===n){var a=mt(e);0!==a&&(t=a,n=sc(e,a))}if(1===n)throw n=Tl,pc(e,0),oc(e,t),ac(e,Ke()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xc(e,Ol,Ul),ac(e,Ke()),null}function cc(e,t){var n=El;El|=1;try{return e(t)}finally{0===(El=n)&&(_l=Ke()+500,zr&&_r())}}function uc(e){null!==Gl&&0===Gl.tag&&0===(6&El)&&Sc();var t=El;El|=1;var n=Dl.transition,a=vt;try{if(Dl.transition=null,vt=1,e)return e()}finally{vt=a,Dl.transition=n,0===(6&(El=t))&&_r()}}function dc(){Ml=Bl.current,Ar(Bl)}function pc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,rr(n)),null!==Nl)for(n=Nl.return;null!==n;){var a=n;switch(ts(a),a.tag){case 1:null!==(a=a.type.childContextTypes)&&void 0!==a&&Br();break;case 3:Ys(),Ar(Ir),Ar(Er),ni();break;case 5:Zs(a);break;case 4:Ys();break;case 13:case 19:Ar($s);break;case 10:Ds(a.type._context);break;case 22:case 23:dc()}n=n.return}if(Il=e,Nl=e=Bc(e.current,null),Pl=Ml=t,Fl=0,Tl=null,Ll=ql=Rl=0,Ol=zl=null,null!==Ps){for(t=0;t<Ps.length;t++)if(null!==(a=(n=Ps[t]).interleaved)){n.interleaved=null;var r=a.next,s=n.pending;if(null!==s){var i=s.next;s.next=r,a.next=i}n.pending=a}Ps=null}return e}function hc(e,t){for(;;){var n=Nl;try{if(js(),ai.current=Ki,ci){for(var a=ii.memoizedState;null!==a;){var r=a.queue;null!==r&&(r.pending=null),a=a.next}ci=!1}if(si=0,li=oi=ii=null,ui=!1,di=0,jl.current=null,null===n||null===n.return){Fl=1,Tl=t,Nl=null;break}e:{var i=e,o=n.return,l=n,c=t;if(t=Pl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,p=d.tag;if(0===(1&d.mode)&&(0===p||11===p||15===p)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=go(o);if(null!==m){m.flags&=-257,yo(m,o,l,0,t),1&m.mode&&fo(i,u,t),c=u;var f=(t=m).updateQueue;if(null===f){var g=new Set;g.add(c),t.updateQueue=g}else f.add(c);break e}if(0===(1&t)){fo(i,u,t),fc();break e}c=Error(s(426))}else if(rs&&1&l.mode){var y=go(o);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),yo(y,o,l,0,t),ms(lo(c,l));break e}}i=c=lo(c,l),4!==Fl&&(Fl=2),null===zl?zl=[i]:zl.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t,Hs(i,ho(0,c,t));break e;case 1:l=c;var b=i.type,v=i.stateNode;if(0===(128&i.flags)&&("function"===typeof b.getDerivedStateFromError||null!==v&&"function"===typeof v.componentDidCatch&&(null===Ql||!Ql.has(v)))){i.flags|=65536,t&=-t,i.lanes|=t,Hs(i,mo(i,l,t));break e}}i=i.return}while(null!==i)}kc(n)}catch(k){t=k,Nl===n&&null!==n&&(Nl=n=n.return);continue}break}}function mc(){var e=Al.current;return Al.current=Ki,null===e?Ki:e}function fc(){0!==Fl&&3!==Fl&&2!==Fl||(Fl=4),null===Il||0===(268435455&Rl)&&0===(268435455&ql)||oc(Il,Pl)}function gc(e,t){var n=El;El|=2;var a=mc();for(Il===e&&Pl===t||(Ul=null,pc(e,t));;)try{yc();break}catch(r){hc(e,r)}if(js(),El=n,Al.current=a,null!==Nl)throw Error(s(261));return Il=null,Pl=0,Fl}function yc(){for(;null!==Nl;)vc(Nl)}function bc(){for(;null!==Nl&&!Je();)vc(Nl)}function vc(e){var t=wl(e.alternate,e,Ml);e.memoizedProps=e.pendingProps,null===t?kc(e):Nl=t,jl.current=null}function kc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Xo(n,t,Ml)))return void(Nl=n)}else{if(null!==(n=Go(n,t)))return n.flags&=32767,void(Nl=n);if(null===e)return Fl=6,void(Nl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Nl=t);Nl=t=e}while(null!==t);0===Fl&&(Fl=5)}function xc(e,t,n){var a=vt,r=Dl.transition;try{Dl.transition=null,vt=1,function(e,t,n,a){do{Sc()}while(null!==Gl);if(0!==(6&El))throw Error(s(327));n=e.finishedWork;var r=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var a=e.eventTimes;for(e=e.expirationTimes;0<n;){var r=31-it(n),s=1<<r;t[r]=0,a[r]=-1,e[r]=-1,n&=~s}}(e,i),e===Il&&(Nl=Il=null,Pl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Xl||(Xl=!0,Ic(tt,(function(){return Sc(),null}))),i=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||i){i=Dl.transition,Dl.transition=null;var o=vt;vt=1;var l=El;El|=4,jl.current=null,function(e,t){if(er=Wt,ha(e=pa())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var a=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(a&&0!==a.rangeCount){n=a.anchorNode;var r=a.anchorOffset,i=a.focusNode;a=a.focusOffset;try{n.nodeType,i.nodeType}catch(x){n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,p=e,h=null;t:for(;;){for(var m;p!==n||0!==r&&3!==p.nodeType||(l=o+r),p!==i||0!==a&&3!==p.nodeType||(c=o+a),3===p.nodeType&&(o+=p.nodeValue.length),null!==(m=p.firstChild);)h=p,p=m;for(;;){if(p===e)break t;if(h===n&&++u===r&&(l=o),h===i&&++d===a&&(c=o),null!==(m=p.nextSibling))break;h=(p=h).parentNode}p=m}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(tr={focusedElem:e,selectionRange:n},Wt=!1,Zo=t;null!==Zo;)if(e=(t=Zo).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Zo=e;else for(;null!==Zo;){t=Zo;try{var f=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==f){var g=f.memoizedProps,y=f.memoizedState,b=t.stateNode,v=b.getSnapshotBeforeUpdate(t.elementType===t.type?g:to(t.type,g),y);b.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var k=t.stateNode.containerInfo;1===k.nodeType?k.textContent="":9===k.nodeType&&k.documentElement&&k.removeChild(k.documentElement);break;default:throw Error(s(163))}}catch(x){Cc(t,t.return,x)}if(null!==(e=t.sibling)){e.return=t.return,Zo=e;break}Zo=t.return}f=tl,tl=!1}(e,n),gl(n,e),ma(tr),Wt=!!er,tr=er=null,e.current=n,bl(n,e,r),Ye(),El=l,vt=o,Dl.transition=i}else e.current=n;if(Xl&&(Xl=!1,Gl=e,Jl=r),i=e.pendingLanes,0===i&&(Ql=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(rt,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ac(e,Ke()),null!==t)for(a=e.onRecoverableError,n=0;n<t.length;n++)r=t[n],a(r.value,{componentStack:r.stack,digest:r.digest});if(Wl)throw Wl=!1,e=Vl,Vl=null,e;0!==(1&Jl)&&0!==e.tag&&Sc(),i=e.pendingLanes,0!==(1&i)?e===Kl?Yl++:(Yl=0,Kl=e):Yl=0,_r()}(e,t,n,a)}finally{Dl.transition=r,vt=a}return null}function Sc(){if(null!==Gl){var e=kt(Jl),t=Dl.transition,n=vt;try{if(Dl.transition=null,vt=16>e?16:e,null===Gl)var a=!1;else{if(e=Gl,Gl=null,Jl=0,0!==(6&El))throw Error(s(331));var r=El;for(El|=4,Zo=e.current;null!==Zo;){var i=Zo,o=i.child;if(0!==(16&Zo.flags)){var l=i.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Zo=u;null!==Zo;){var d=Zo;switch(d.tag){case 0:case 11:case 15:nl(8,d,i)}var p=d.child;if(null!==p)p.return=d,Zo=p;else for(;null!==Zo;){var h=(d=Zo).sibling,m=d.return;if(sl(d),d===u){Zo=null;break}if(null!==h){h.return=m,Zo=h;break}Zo=m}}}var f=i.alternate;if(null!==f){var g=f.child;if(null!==g){f.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}Zo=i}}if(0!==(2064&i.subtreeFlags)&&null!==o)o.return=i,Zo=o;else e:for(;null!==Zo;){if(0!==(2048&(i=Zo).flags))switch(i.tag){case 0:case 11:case 15:nl(9,i,i.return)}var b=i.sibling;if(null!==b){b.return=i.return,Zo=b;break e}Zo=i.return}}var v=e.current;for(Zo=v;null!==Zo;){var k=(o=Zo).child;if(0!==(2064&o.subtreeFlags)&&null!==k)k.return=o,Zo=k;else e:for(o=v;null!==Zo;){if(0!==(2048&(l=Zo).flags))try{switch(l.tag){case 0:case 11:case 15:al(9,l)}}catch(S){Cc(l,l.return,S)}if(l===o){Zo=null;break e}var x=l.sibling;if(null!==x){x.return=l.return,Zo=x;break e}Zo=l.return}}if(El=r,_r(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(rt,e)}catch(S){}a=!0}return a}finally{vt=n,Dl.transition=t}}return!1}function wc(e,t,n){e=zs(e,t=ho(0,t=lo(n,t),1),1),t=ec(),null!==e&&(yt(e,1,t),ac(e,t))}function Cc(e,t,n){if(3===e.tag)wc(e,e,n);else for(;null!==t;){if(3===t.tag){wc(t,e,n);break}if(1===t.tag){var a=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof a.componentDidCatch&&(null===Ql||!Ql.has(a))){t=zs(t,e=mo(t,e=lo(n,e),1),1),e=ec(),null!==t&&(yt(t,1,e),ac(t,e));break}}t=t.return}}function Ac(e,t,n){var a=e.pingCache;null!==a&&a.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Il===e&&(Pl&n)===n&&(4===Fl||3===Fl&&(130023424&Pl)===Pl&&500>Ke()-Hl?pc(e,0):Ll|=n),ac(e,t)}function jc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=ec();null!==(e=Fs(e,t))&&(yt(e,t,n),ac(e,n))}function Dc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),jc(e,n)}function Ec(e,t){var n=0;switch(e.tag){case 13:var a=e.stateNode,r=e.memoizedState;null!==r&&(n=r.retryLane);break;case 19:a=e.stateNode;break;default:throw Error(s(314))}null!==a&&a.delete(t),jc(e,n)}function Ic(e,t){return Xe(e,t)}function Nc(e,t,n,a){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pc(e,t,n,a){return new Nc(e,t,n,a)}function Mc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Bc(e,t){var n=e.alternate;return null===n?((n=Pc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Fc(e,t,n,a,r,i){var o=2;if(a=e,"function"===typeof e)Mc(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case w:return Tc(n.children,r,i,t);case C:o=8,r|=8;break;case A:return(e=Pc(12,n,t,2|r)).elementType=A,e.lanes=i,e;case I:return(e=Pc(13,n,t,r)).elementType=I,e.lanes=i,e;case N:return(e=Pc(19,n,t,r)).elementType=N,e.lanes=i,e;case B:return Rc(n,r,i,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case j:o=10;break e;case D:o=9;break e;case E:o=11;break e;case P:o=14;break e;case M:o=16,a=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Pc(o,n,t,r)).elementType=e,t.type=a,t.lanes=i,t}function Tc(e,t,n,a){return(e=Pc(7,e,a,t)).lanes=n,e}function Rc(e,t,n,a){return(e=Pc(22,e,a,t)).elementType=B,e.lanes=n,e.stateNode={isHidden:!1},e}function qc(e,t,n){return(e=Pc(6,e,null,t)).lanes=n,e}function Lc(e,t,n){return(t=Pc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function zc(e,t,n,a,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=a,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Oc(e,t,n,a,r,s,i,o,l){return e=new zc(e,t,n,o,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Pc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:a,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Rs(s),e}function Hc(e){if(!e)return Dr;e:{if(_e(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Mr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Mr(n))return Tr(e,n,t)}return t}function _c(e,t,n,a,r,s,i,o,l){return(e=Oc(n,a,!0,e,0,s,0,o,l)).context=Hc(null),n=e.current,(s=Ls(a=ec(),r=tc(n))).callback=void 0!==t&&null!==t?t:null,zs(n,s,r),e.current.lanes=r,yt(e,r,a),ac(e,a),e}function Uc(e,t,n,a){var r=t.current,s=ec(),i=tc(r);return n=Hc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Ls(s,i)).payload={element:e},null!==(a=void 0===a?null:a)&&(t.callback=a),null!==(e=zs(r,t,i))&&(nc(e,r,i,s),Os(e,r,i)),i}function Wc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Vc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Qc(e,t){Vc(e,t),(e=e.alternate)&&Vc(e,t)}wl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ir.current)vo=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return vo=!1,function(e,t,n){switch(t.tag){case 3:Io(t),hs();break;case 5:Ks(t);break;case 1:Mr(t.type)&&Rr(t);break;case 4:Js(t,t.stateNode.containerInfo);break;case 10:var a=t.type._context,r=t.memoizedProps.value;jr(Ss,a._currentValue),a._currentValue=r;break;case 13:if(null!==(a=t.memoizedState))return null!==a.dehydrated?(jr($s,1&$s.current),t.flags|=128,null):0!==(n&t.child.childLanes)?qo(e,t,n):(jr($s,1&$s.current),null!==(e=Wo(e,t,n))?e.sibling:null);jr($s,1&$s.current);break;case 19:if(a=0!==(n&t.childLanes),0!==(128&e.flags)){if(a)return _o(e,t,n);t.flags|=128}if(null!==(r=t.memoizedState)&&(r.rendering=null,r.tail=null,r.lastEffect=null),jr($s,$s.current),a)break;return null;case 22:case 23:return t.lanes=0,Co(e,t,n)}return Wo(e,t,n)}(e,t,n);vo=0!==(131072&e.flags)}else vo=!1,rs&&0!==(1048576&t.flags)&&$r(t,Qr,t.index);switch(t.lanes=0,t.tag){case 2:var a=t.type;Uo(e,t),e=t.pendingProps;var r=Pr(t,Er.current);Is(t,n),r=fi(null,t,a,e,r,n);var i=gi();return t.flags|=1,"object"===typeof r&&null!==r&&"function"===typeof r.render&&void 0===r.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Mr(a)?(i=!0,Rr(t)):i=!1,t.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,Rs(t),r.updater=ao,t.stateNode=r,r._reactInternals=t,oo(t,a,e,n),t=Eo(null,t,a,!0,i,n)):(t.tag=0,rs&&i&&es(t),ko(null,t,r,n),t=t.child),t;case 16:a=t.elementType;e:{switch(Uo(e,t),e=t.pendingProps,a=(r=a._init)(a._payload),t.type=a,r=t.tag=function(e){if("function"===typeof e)return Mc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===E)return 11;if(e===P)return 14}return 2}(a),e=to(a,e),r){case 0:t=jo(null,t,a,e,n);break e;case 1:t=Do(null,t,a,e,n);break e;case 11:t=xo(null,t,a,e,n);break e;case 14:t=So(null,t,a,to(a.type,e),n);break e}throw Error(s(306,a,""))}return t;case 0:return a=t.type,r=t.pendingProps,jo(e,t,a,r=t.elementType===a?r:to(a,r),n);case 1:return a=t.type,r=t.pendingProps,Do(e,t,a,r=t.elementType===a?r:to(a,r),n);case 3:e:{if(Io(t),null===e)throw Error(s(387));a=t.pendingProps,r=(i=t.memoizedState).element,qs(e,t),_s(t,a,null,n);var o=t.memoizedState;if(a=o.element,i.isDehydrated){if(i={element:a,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=No(e,t,a,n,r=lo(Error(s(423)),t));break e}if(a!==r){t=No(e,t,a,n,r=lo(Error(s(424)),t));break e}for(as=cr(t.stateNode.containerInfo.firstChild),ns=t,rs=!0,ss=null,n=xs(t,null,a,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(hs(),a===r){t=Wo(e,t,n);break e}ko(e,t,a,n)}t=t.child}return t;case 5:return Ks(t),null===e&&cs(t),a=t.type,r=t.pendingProps,i=null!==e?e.memoizedProps:null,o=r.children,nr(a,r)?o=null:null!==i&&nr(a,i)&&(t.flags|=32),Ao(e,t),ko(e,t,o,n),t.child;case 6:return null===e&&cs(t),null;case 13:return qo(e,t,n);case 4:return Js(t,t.stateNode.containerInfo),a=t.pendingProps,null===e?t.child=ks(t,null,a,n):ko(e,t,a,n),t.child;case 11:return a=t.type,r=t.pendingProps,xo(e,t,a,r=t.elementType===a?r:to(a,r),n);case 7:return ko(e,t,t.pendingProps,n),t.child;case 8:case 12:return ko(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(a=t.type._context,r=t.pendingProps,i=t.memoizedProps,o=r.value,jr(Ss,a._currentValue),a._currentValue=o,null!==i)if(oa(i.value,o)){if(i.children===r.children&&!Ir.current){t=Wo(e,t,n);break e}}else for(null!==(i=t.child)&&(i.return=t);null!==i;){var l=i.dependencies;if(null!==l){o=i.child;for(var c=l.firstContext;null!==c;){if(c.context===a){if(1===i.tag){(c=Ls(-1,n&-n)).tag=2;var u=i.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=n,null!==(c=i.alternate)&&(c.lanes|=n),Es(i.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===i.tag)o=i.type===t.type?null:i.child;else if(18===i.tag){if(null===(o=i.return))throw Error(s(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Es(o,n,t),o=i.sibling}else o=i.child;if(null!==o)o.return=i;else for(o=i;null!==o;){if(o===t){o=null;break}if(null!==(i=o.sibling)){i.return=o.return,o=i;break}o=o.return}i=o}ko(e,t,r.children,n),t=t.child}return t;case 9:return r=t.type,a=t.pendingProps.children,Is(t,n),a=a(r=Ns(r)),t.flags|=1,ko(e,t,a,n),t.child;case 14:return r=to(a=t.type,t.pendingProps),So(e,t,a,r=to(a.type,r),n);case 15:return wo(e,t,t.type,t.pendingProps,n);case 17:return a=t.type,r=t.pendingProps,r=t.elementType===a?r:to(a,r),Uo(e,t),t.tag=1,Mr(a)?(e=!0,Rr(t)):e=!1,Is(t,n),so(t,a,r),oo(t,a,r,n),Eo(null,t,a,!0,e,n);case 19:return _o(e,t,n);case 22:return Co(e,t,n)}throw Error(s(156,t.tag))};var Xc="function"===typeof reportError?reportError:function(e){console.error(e)};function Gc(e){this._internalRoot=e}function Jc(e){this._internalRoot=e}function Yc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Kc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function $c(e,t,n,a,r){var s=n._reactRootContainer;if(s){var i=s;if("function"===typeof r){var o=r;r=function(){var e=Wc(i);o.call(e)}}Uc(t,i,e,r)}else i=function(e,t,n,a,r){if(r){if("function"===typeof a){var s=a;a=function(){var e=Wc(i);s.call(e)}}var i=_c(t,a,e,0,null,!1,0,"",Zc);return e._reactRootContainer=i,e[mr]=i.current,_a(8===e.nodeType?e.parentNode:e),uc(),i}for(;r=e.lastChild;)e.removeChild(r);if("function"===typeof a){var o=a;a=function(){var e=Wc(l);o.call(e)}}var l=Oc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=l,e[mr]=l.current,_a(8===e.nodeType?e.parentNode:e),uc((function(){Uc(t,l,n,a)})),l}(n,t,e,r,a);return Wc(i)}Jc.prototype.render=Gc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Uc(e,t,null,null)},Jc.prototype.unmount=Gc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;uc((function(){Uc(null,e,null,null)})),t[mr]=null}},Jc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ct();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Bt.length&&0!==t&&t<Bt[n].priority;n++);Bt.splice(n,0,e),0===n&&qt(e)}},xt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(bt(t,1|n),ac(t,Ke()),0===(6&El)&&(_l=Ke()+500,_r()))}break;case 13:uc((function(){var t=Fs(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}})),Qc(e,1)}},St=function(e){if(13===e.tag){var t=Fs(e,134217728);if(null!==t)nc(t,e,134217728,ec());Qc(e,134217728)}},wt=function(e){if(13===e.tag){var t=tc(e),n=Fs(e,t);if(null!==n)nc(n,e,t,ec());Qc(e,t)}},Ct=function(){return vt},At=function(e,t){var n=vt;try{return vt=e,t()}finally{vt=n}},Se=function(e,t,n){switch(t){case"input":if(Z(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var a=n[t];if(a!==e&&a.form===e.form){var r=xr(a);if(!r)throw Error(s(90));X(a),Z(a,r)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ee=cc,Ie=uc;var eu={usingClientEntryPoint:!1,Events:[vr,kr,xr,je,De,cc]},tu={findFiberByHostInstance:br,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nu={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:k.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ve(e))?null:e.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var au=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!au.isDisabled&&au.supportsFiber)try{rt=au.inject(nu),st=au}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Yc(t))throw Error(s(200));return function(e,t,n){var a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:S,key:null==a?null:""+a,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Yc(e))throw Error(s(299));var n=!1,a="",r=Xc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(a=t.identifierPrefix),void 0!==t.onRecoverableError&&(r=t.onRecoverableError)),t=Oc(e,1,!1,null,0,n,0,a,r),e[mr]=t.current,_a(8===e.nodeType?e.parentNode:e),new Gc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=Ve(t))?null:e.stateNode},t.flushSync=function(e){return uc(e)},t.hydrate=function(e,t,n){if(!Kc(t))throw Error(s(200));return $c(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Yc(e))throw Error(s(405));var a=null!=n&&n.hydratedSources||null,r=!1,i="",o=Xc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(i=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),t=_c(t,null,e,1,null!=n?n:null,r,0,i,o),e[mr]=t.current,_a(e),a)for(e=0;e<a.length;e++)r=(r=(n=a[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,r]:t.mutableSourceEagerHydrationData.push(n,r);return new Jc(t)},t.render=function(e,t,n){if(!Kc(t))throw Error(s(200));return $c(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Kc(e))throw Error(s(40));return!!e._reactRootContainer&&(uc((function(){$c(null,null,e,!1,(function(){e._reactRootContainer=null,e[mr]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,a){if(!Kc(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return $c(e,t,n,!1,a)},t.version="18.3.1-next-f1338f8080-20240426"},250:(e,t,n)=>{"use strict";var a=n(164);t.s=a.createRoot,a.hydrateRoot},164:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:(e,t,n)=>{"use strict";var a=n(791),r=Symbol.for("react.element"),s=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var a,s={},c=null,u=null;for(a in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)i.call(t,a)&&!l.hasOwnProperty(a)&&(s[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps)void 0===s[a]&&(s[a]=t[a]);return{$$typeof:r,type:e,key:c,ref:u,props:s,_owner:o.current}}t.Fragment=s,t.jsx=c,t.jsxs=c},117:(e,t)=>{"use strict";var n=Symbol.for("react.element"),a=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),h=Symbol.iterator;var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},f=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||m}function b(){}function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||m}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},b.prototype=y.prototype;var k=v.prototype=new b;k.constructor=v,f(k,y.prototype),k.isPureReactComponent=!0;var x=Array.isArray,S=Object.prototype.hasOwnProperty,w={current:null},C={key:!0,ref:!0,__self:!0,__source:!0};function A(e,t,a){var r,s={},i=null,o=null;if(null!=t)for(r in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(i=""+t.key),t)S.call(t,r)&&!C.hasOwnProperty(r)&&(s[r]=t[r]);var l=arguments.length-2;if(1===l)s.children=a;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps)void 0===s[r]&&(s[r]=l[r]);return{$$typeof:n,type:e,key:i,ref:o,props:s,_owner:w.current}}function j(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var D=/\/+/g;function E(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function I(e,t,r,s,i){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case a:l=!0}}if(l)return i=i(l=e),e=""===s?"."+E(l,0):s,x(i)?(r="",null!=e&&(r=e.replace(D,"$&/")+"/"),I(i,t,r,"",(function(e){return e}))):null!=i&&(j(i)&&(i=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(i,r+(!i.key||l&&l.key===i.key?"":(""+i.key).replace(D,"$&/")+"/")+e)),t.push(i)),1;if(l=0,s=""===s?".":s+":",x(e))for(var c=0;c<e.length;c++){var u=s+E(o=e[c],c);l+=I(o,t,r,u,i)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=h&&e[h]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(o=e.next()).done;)l+=I(o=o.value,t,r,u=s+E(o,c++),i);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function N(e,t,n){if(null==e)return e;var a=[],r=0;return I(e,a,"","",(function(e){return t.call(n,e,r++)})),a}function P(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var M={current:null},B={transition:null},F={ReactCurrentDispatcher:M,ReactCurrentBatchConfig:B,ReactCurrentOwner:w};function T(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:N,forEach:function(e,t,n){N(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return N(e,(function(){t++})),t},toArray:function(e){return N(e,(function(e){return e}))||[]},only:function(e){if(!j(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=r,t.Profiler=i,t.PureComponent=v,t.StrictMode=s,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=F,t.act=T,t.cloneElement=function(e,t,a){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=f({},e.props),s=e.key,i=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(i=t.ref,o=w.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)S.call(t,c)&&!C.hasOwnProperty(c)&&(r[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)r.children=a;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:n,type:e.type,key:s,ref:i,props:r,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=A,t.createFactory=function(e){var t=A.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=j,t.lazy=function(e){return{$$typeof:p,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=B.transition;B.transition={};try{e()}finally{B.transition=t}},t.unstable_act=T,t.useCallback=function(e,t){return M.current.useCallback(e,t)},t.useContext=function(e){return M.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return M.current.useDeferredValue(e)},t.useEffect=function(e,t){return M.current.useEffect(e,t)},t.useId=function(){return M.current.useId()},t.useImperativeHandle=function(e,t,n){return M.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return M.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return M.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return M.current.useMemo(e,t)},t.useReducer=function(e,t,n){return M.current.useReducer(e,t,n)},t.useRef=function(e){return M.current.useRef(e)},t.useState=function(e){return M.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return M.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return M.current.useTransition()},t.version="18.3.1"},791:(e,t,n)=>{"use strict";e.exports=n(117)},184:(e,t,n)=>{"use strict";e.exports=n(374)},813:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var a=n-1>>>1,r=e[a];if(!(0<s(r,t)))break e;e[a]=t,e[n]=r,n=a}}function a(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var a=0,r=e.length,i=r>>>1;a<i;){var o=2*(a+1)-1,l=e[o],c=o+1,u=e[c];if(0>s(l,n))c<r&&0>s(u,l)?(e[a]=u,e[c]=n,a=c):(e[a]=l,e[o]=n,a=o);else{if(!(c<r&&0>s(u,n)))break e;e[a]=u,e[c]=n,a=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,p=null,h=3,m=!1,f=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,b="function"===typeof clearTimeout?clearTimeout:null,v="undefined"!==typeof setImmediate?setImmediate:null;function k(e){for(var t=a(u);null!==t;){if(null===t.callback)r(u);else{if(!(t.startTime<=e))break;r(u),t.sortIndex=t.expirationTime,n(c,t)}t=a(u)}}function x(e){if(g=!1,k(e),!f)if(null!==a(c))f=!0,B(S);else{var t=a(u);null!==t&&F(x,t.startTime-e)}}function S(e,n){f=!1,g&&(g=!1,b(j),j=-1),m=!0;var s=h;try{for(k(n),p=a(c);null!==p&&(!(p.expirationTime>n)||e&&!I());){var i=p.callback;if("function"===typeof i){p.callback=null,h=p.priorityLevel;var o=i(p.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?p.callback=o:p===a(c)&&r(c),k(n)}else r(c);p=a(c)}if(null!==p)var l=!0;else{var d=a(u);null!==d&&F(x,d.startTime-n),l=!1}return l}finally{p=null,h=s,m=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var w,C=!1,A=null,j=-1,D=5,E=-1;function I(){return!(t.unstable_now()-E<D)}function N(){if(null!==A){var e=t.unstable_now();E=e;var n=!0;try{n=A(!0,e)}finally{n?w():(C=!1,A=null)}}else C=!1}if("function"===typeof v)w=function(){v(N)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,M=P.port2;P.port1.onmessage=N,w=function(){M.postMessage(null)}}else w=function(){y(N,0)};function B(e){A=e,C||(C=!0,w())}function F(e,n){j=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){f||m||(f=!0,B(S))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return a(c)},t.unstable_next=function(e){switch(h){case 1:case 2:case 3:var t=3;break;default:t=h}var n=h;h=t;try{return e()}finally{h=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=h;h=e;try{return t()}finally{h=n}},t.unstable_scheduleCallback=function(e,r,s){var i=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?i+s:i:s=i,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:d++,callback:r,priorityLevel:e,startTime:s,expirationTime:o=s+o,sortIndex:-1},s>i?(e.sortIndex=s,n(u,e),null===a(c)&&e===a(u)&&(g?(b(j),j=-1):g=!0,F(x,s-i))):(e.sortIndex=o,n(c,e),f||m||(f=!0,B(S))),e},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(e){var t=h;return function(){var n=h;h=t;try{return e.apply(this,arguments)}finally{h=n}}}},296:(e,t,n)=>{"use strict";e.exports=n(813)},426:(e,t,n)=>{var a=n(65);function r(e,t){var n,r=null;if(!e||"string"!==typeof e)return r;for(var s,i,o=a(e),l="function"===typeof t,c=0,u=o.length;c<u;c++)s=(n=o[c]).property,i=n.value,l?t(s,i,n):i&&(r||(r={}),r[s]=i);return r}e.exports=r,e.exports.default=r}},t={};function n(a){var r=t[a];if(void 0!==r)return r.exports;var s=t[a]={exports:{}};return e[a](s,s.exports,n),s.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.u=e=>"static/js/"+e+".6bdff3b6.chunk.js",n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/skirmish/",n.b=document.baseURI||self.location.href,(()=>{"use strict";var e={};n.r(e),n.d(e,{boolean:()=>rs,booleanish:()=>ss,commaOrSpaceSeparated:()=>us,commaSeparated:()=>cs,number:()=>os,overloadedBoolean:()=>is,spaceSeparated:()=>ls});var t={};n.r(t),n.d(t,{attentionMarkers:()=>To,contentInitial:()=>Io,disable:()=>Ro,document:()=>Eo,flow:()=>Po,flowInitial:()=>No,insideSpan:()=>Fo,string:()=>Mo,text:()=>Bo});var a,r,s,i=n(791),o=n(250),l=n(842),c=n.n(l);class u{}a=u,u.dice=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Math.random;const n=[];for(;n.length<Math.max(e,1);){let r=0,s=!0;for(;s;){const e=a.randomNumber(10,t)+1;r+=e,s=10===e}e<1&&(r=Math.floor(r/2)),n.push(r)}return Math.max(...n)},u.randomNumber=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Math.random;return e<=0?0:Math.floor(t()*e)},u.randomBoolean=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Math.random;return 0===a.randomNumber(2,e)},u.randomDecimal=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Math.random;return a.randomNumber(100,e)/100},u.randomBonus=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Math.random;switch(a.randomNumber(15,e)){case 0:case 1:case 2:case 3:case 4:return 1;case 5:case 6:case 7:case 8:return 2;case 9:case 10:case 11:return 3;case 12:case 13:return 4;case 14:return 5}return 1},u.randomColor=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:256,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Math.random;return{r:a.randomNumber(t-e,n)+e,g:a.randomNumber(t-e,n)+e,b:a.randomNumber(t-e,n)+e}},u.getSeededRNG=e=>{const t=(e=>{let t=1779033703,n=3144134277,a=1013904242,r=2773480762;for(let s,i=0;i<e.length;i++)s=e.charCodeAt(i),t=n^Math.imul(t^s,597399067),n=a^Math.imul(n^s,2869860233),a=r^Math.imul(a^s,951274213),r=t^Math.imul(r^s,2716044179);return t=Math.imul(a^t>>>18,597399067),n=Math.imul(r^n>>>22,2869860233),a=Math.imul(t^a>>>17,951274213),r=Math.imul(n^r>>>19,2716044179),[(t^n^a^r)>>>0,(n^t)>>>0,(a^t)>>>0,(r^t)>>>0]})(e);return((e,t,n,a)=>()=>{let r=(e>>>=0)+(t>>>=0)|0;return e=(t^t)>>>9,t=(n>>>=0)+(n<<3)|0,r=r+(a=(a>>>=0)+1|0)|0,n=(n=n<<21|n>>>11)+r|0,(r>>>0)/4294967296})(t[0],t[1],t[2],t[3])};class d{}r=d,d.sort=(e,t)=>{const n=e=>{let n=t(e);return["a ","the "].forEach((e=>{n.toLowerCase().startsWith(e)&&(n=n.substring(e.length))})),n};return e.sort(((e,t)=>{const a=n(e),r=n(t);return a.localeCompare(r)}))},d.shuffle=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Math.random,n=e.length;for(;0!==n;){const a=u.randomNumber(n,t);n-=1;const r=e[n];e[n]=e[a],e[a]=r}return e},d.draw=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Math.random;return e[u.randomNumber(e.length,t)]},d.distinct=(e,t)=>{const n=new Set;return e.filter((e=>{const a=t(e);return!n.has(a)&&n.add(a)}))},d.sum=(e,t)=>e.reduce(((e,n)=>e+t(n)),0),d.mean=(e,t)=>0===e.length?0:r.sum(e,t)/e.length,d.min=(e,t)=>{let n=null,a=Number.MAX_VALUE;return e.forEach((e=>{const r=t(e);r<a&&(n=e,a=r)})),n},d.max=(e,t)=>{let n=null,a=Number.MIN_VALUE;return e.forEach((e=>{const r=t(e);r>a&&(n=e,a=r)})),n};class p{}s=p,p.arcana=()=>({id:"pack-01",name:"Codex Arcanum",description:"Discover new ways to channel magic with the cards in this pack."}),p.skullduggery=()=>({id:"pack-02",name:"Guile and Cunning",description:"A collection of cards for those who fight with skullduggery rather than valor."}),p.elements=()=>({id:"pack-03",name:"The Elements",description:"Become the master of the four elements with this pack."}),p.beasts=()=>({id:"pack-04",name:"The Menagerie",description:"This beast-themed collection contains dangerous new species."}),p.undead=()=>({id:"pack-05",name:"Out of the Grave",description:"Add a touch of gothic horror to your game with this pack."}),p.technology=()=>({id:"pack-06",name:"The Workshop",description:"The cards in this pack showcase marvels of engineering and ingenuity."}),p.faith=()=>({id:"pack-07",name:"Power and Glory",description:"These cards bring the majesty of the divine to your game."}),p.potions=()=>({id:"pack-08",name:"Magic in a Glass",description:"These cards add magical potions to the game."}),p.fae=()=>({id:"pack-09",name:"The Fae Realm",description:"Bring the beguiling wonder of the fae into your game with this pack."}),p.coldBlood=()=>({id:"pack-10",name:"Cold Blood",description:"Sinister cold-blooded creatures stalk this pack."}),p.getList=()=>{const e=[s.arcana(),s.skullduggery(),s.elements(),s.beasts(),s.undead(),s.technology(),s.faith(),s.potions(),s.fae(),s.coldBlood()];return d.sort(e,(e=>e.name))};let h=function(e){return e.Barracks="barracks",e.Warehouse="warehouse",e.Academy="academy",e.Forge="forge",e.Hall="hall",e.Intelligencer="intelligencer",e.Observatory="observatory",e.Quartermaster="quartermaster",e.Temple="temple",e.ThievesGuild="thieves guild",e.TrainingGround="training ground",e.WarRoom="war room",e.WizardTower="wizard tower",e}({});var m;class f{}m=f,f.barracks=()=>({id:"structure-barracks",type:h.Barracks,name:"Barracks",packID:"",description:"A place for heroes to live.",position:{x:0,y:0},level:0,charges:0}),f.warehouse=()=>({id:"structure-warehouse",type:h.Warehouse,name:"Warehouse",packID:"",description:"A place to store unused equipment.",position:{x:0,y:0},level:0,charges:0}),f.academy=()=>({id:"structure-academy",type:h.Academy,name:"Academy",packID:"",description:"The military academy is a place for heroes to become the best they can be.",position:{x:0,y:0},level:1,charges:0}),f.forge=()=>({id:"structure-forge",type:h.Forge,name:"Forge",packID:p.technology().id,description:"Forges contain materials for building strongholds.",position:{x:0,y:0},level:1,charges:0}),f.recruitment=()=>({id:"structure-recruitment",type:h.Hall,name:"Recruitment Hall",packID:"",description:"This building is used to attract new heroes to join the company.",position:{x:0,y:0},level:1,charges:0}),f.intelligencer=()=>({id:"structure-intelligencer",type:h.Intelligencer,name:"Intelligencer",packID:p.skullduggery().id,description:"In this building, a spymaster devises schemes to undermine the enemy.",position:{x:0,y:0},level:1,charges:0}),f.observatory=()=>({id:"structure-observatory",type:h.Observatory,name:"Observatory",packID:p.arcana().id,description:"By observing the stars, an astrologer can sometimes manipulate the fates.",position:{x:0,y:0},level:1,charges:0}),f.quartermaster=()=>({id:"structure-quartermaster",type:h.Quartermaster,name:"Quartermaster",packID:"",description:"The quartermaster requisitions and maintains equipment.",position:{x:0,y:0},level:1,charges:0}),f.temple=()=>({id:"structure-temple",type:h.Temple,name:"Temple",packID:p.faith().id,description:"A place for heroes to pray to their gods for good fortune.",position:{x:0,y:0},level:1,charges:0}),f.thief=()=>({id:"structure-thief",type:h.ThievesGuild,name:"Thieves' Guild",packID:p.skullduggery().id,description:"This nondescript structure houses those who utilize every possible advantage.",position:{x:0,y:0},level:1,charges:0}),f.training=()=>({id:"structure-training",type:h.TrainingGround,name:"Training Ground",packID:"",description:"A place for heroes of all kinds to improve their abilities.",position:{x:0,y:0},level:1,charges:0}),f.warRoom=()=>({id:"structure-war-room",type:h.WarRoom,name:"War Room",packID:"",description:"Inside this heavily-guarded building, strategies are formulated.",position:{x:0,y:0},level:1,charges:0}),f.wizard=()=>({id:"structure-wizard",type:h.WizardTower,name:"Wizard Tower",packID:"",description:"A wizard's tower is often full of mysterious items.",position:{x:0,y:0},level:1,charges:0}),f.getList=()=>{const e=[m.barracks(),m.warehouse(),m.academy(),m.forge(),m.recruitment(),m.intelligencer(),m.observatory(),m.quartermaster(),m.temple(),m.thief(),m.training(),m.warRoom(),m.wizard()];return d.sort(e,(e=>e.name))};let g=function(e){return e.ExtraHero="Extra hero",e.ExtraXP="Extra XP",e.LevelUp="Level up",e.MagicItem="Magic item",e.Money="Money",e.EnchantItem="Enchant item",e.Structure="Structure",e}({}),y=function(e){return e.None="None",e.Any="[choose one damage category]",e.All="All damage categories",e.Physical="Physical",e.Energy="Energy",e.Corruption="Corruption",e}({}),b=function(e){return e.None="None",e.Any="[choose one location]",e.Head="Head",e.Neck="Neck",e.Body="Body",e.Feet="Feet",e.Hand="Hand",e.Ring="Ring",e}({}),v=function(e){return e.None="None",e.Any="[choose one proficiency]",e.MilitaryWeapons="Military weapons",e.LargeWeapons="Large weapons",e.PairedWeapons="Paired weapons",e.RangedWeapons="Ranged weapons",e.PowderWeapons="Powder weapons",e.Implements="Implements",e.LightArmor="Light armor",e.HeavyArmor="Heavy armor",e.Shields="Shields",e}({}),k=function(e){return e.None="None",e.Any="[choose one skill category]",e.All="All skill categories",e.Physical="Physical",e.Mental="Mental",e}({}),x=function(e){return e.None="None",e.Any="[choose one trait]",e.All="All traits",e.Endurance="Endurance",e.Resolve="Resolve",e.Speed="Speed",e}({}),S=function(e){return e.Combatants="Combatants",e.Enemies="Enemies",e.Allies="Allies",e.Squares="Squares",e.Walls="Walls",e}({}),w=function(e){return e.None="None",e.Any="[choose one damage type]",e.All="All damage types",e.Acid="Acid",e.Edged="Edged",e.Impact="Impact",e.Piercing="Piercing",e.Cold="Cold",e.Electricity="Electricity",e.Fire="Fire",e.Light="Light",e.Sonic="Sonic",e.Decay="Decay",e.Poison="Poison",e.Psychic="Psychic",e}({}),C=function(e){return e.None="None",e.Any="[choose one skill]",e.All="All skills",e.Brawl="Brawl",e.Perception="Perception",e.Presence="Presence",e.Reactions="Reactions",e.Spellcasting="Spellcasting",e.Stealth="Stealth",e.Weapon="Weapon",e}({}),A=function(e){return e.None="None",e.AutoHeal="Automatic Healing",e.AutoDamage="Automatic Damage",e.TraitBonus="Trait Bonus",e.TraitPenalty="Trait Penalty",e.SkillBonus="Skill Bonus",e.SkillPenalty="Skill Penalty",e.SkillCategoryBonus="Skill Category Bonus",e.SkillCategoryPenalty="Skill Category Penalty",e.DamageBonus="Damage Bonus",e.DamagePenalty="Damage Penalty",e.DamageCategoryBonus="Damage Category Bonus",e.DamageCategoryPenalty="Damage Category Penalty",e.DamageResistance="Damage Resistance",e.DamageVulnerability="Damage Vulnerability",e.DamageCategoryResistance="Damage Category Resistance",e.DamageCategoryVulnerability="Damage Category Vulnerability",e.MovementBonus="Movement Bonus",e.MovementPenalty="Movement Penalty",e}({}),j=function(e){return e.Trait="Trait",e.Skill="Skill",e.SkillCategory="Skill category",e.Proficiency="Proficiency",e.DamageBonus="Damage bonus",e.DamageCategoryBonus="Damage category bonus",e.DamageResist="Damage resistance",e.DamageCategoryResist="Damage category resistance",e.Aura="Aura",e}({});class D{}D.guid=()=>{const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz1234567890";let t="";for(;t.length<16;){t+=e[u.randomNumber(62)]}return t},D.debounce=function(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;return()=>{clearTimeout(t),t=setTimeout(e,n)}},D.intersects=(e,t)=>{const n=(e.b.x-e.a.x)*(t.b.y-t.a.y)-(t.b.x-t.a.x)*(e.b.y-e.a.y);if(0===n)return!1;{const a=((t.b.y-t.a.y)*(t.b.x-e.a.x)+(t.a.x-t.b.x)*(t.b.y-e.a.y))/n,r=((e.a.y-e.b.y)*(t.b.x-e.a.x)+(e.b.x-e.a.x)*(t.b.y-e.a.y))/n;return 0<=a&&a<=1&&0<=r&&r<=1}};let E=function(e){return e.Default="Default",e.Hero="Hero",e.Species="Species",e.Role="Role",e.Background="Background",e.Item="Item",e.Potion="Potion",e.Boon="Boon",e.Region="Region",e.Structure="Structure",e.Feature="Feature",e.Action="Action",e.Pack="Pack",e.Base="Base",e}({}),I=function(e){return e.Standing="Standing",e.Prone="Prone",e.Unconscious="Unconscious",e.Dead="Dead",e}({}),N=function(e){return e.Hero="Hero",e.Monster="Monster",e}({}),P=function(e){return e.Beast="Beast",e.Drone="Drone",e.Undead="Undead",e.Mindless="Mindless",e.Swarm="Swarm",e.Amorphous="Amorphous",e.Boss="Boss",e}({});class M{}var B,F,T,R,q,L,z;M.capitalize=e=>e.split(" ").filter((e=>e.length>0)).map((e=>"".concat(e[0].toUpperCase()).concat(e.substring(1)))).join(" "),M.toText=e=>e.toLocaleString(),M.toSize=e=>{let t="".concat(e," B");return e>1024&&(t="".concat((e/=1024).toFixed(2)," kB")),e>1024&&(t="".concat((e/=1024).toFixed(2)," MB")),e>1024&&(t="".concat((e/=1024).toFixed(2)," GB")),t},M.toCurrency=(e,t)=>e<=0?"FREE":"".concat(t).concat(e.toFixed(2));class O{}B=O,O.generateName=e=>{let t=1;switch(u.randomNumber(20,e)){case 16:case 17:case 18:case 19:t=2}const n=[];for(;n.length<t;)n.push(M.capitalize(B.generateWord(e)));return n.join(" ")},O.generateWord=e=>{const t=["ac","ad","adr","ak","al","alber","all","alu","an","answ","ar","aram","are","arc","ark","as","at","ba","bal","bala","bar","barer","berri","beth","bhar","bir","burg","c","cal","cam","car","ced","chen","cor","dar","dies","don","eag","eath","eder","el","eld","em","end","enial","er","es","even","fa","farid","finn","fitz","fla","ford","gann","gar","gh","gl","gor","guir","gunn","gurd","ham","har","has","hel","hener","hesk","ig","im","iv","jasm","jelen","jen","joan","ka","kath","ker","keth","key","khe","kildr","kith","ko","kos","l","lav","leo","lesh","lin","mac","mail","mar","med","meh","mer","mia","mish","miv","morg","mum","my","nad","naiv","ned","or","os","ot","oz","pae","pand","patr","pav","pen","per","pey","pol","quel","rand","ravay","ric","ris","ros","row","rur","s","sar","ser","seraph","sham","shan","shed","sorvi","sto","stok","stos","t","tak","tal","tam","tir","thav","thor","torg","tre","uad","v","var","vic","vis","wrayt","yash","yeng","zash"],n=["a","aadi","aar","ade","aea","aela","aella","aena","ahn","al","ala","an","ani","ania","ann","ar","arai","arr","asar","ash","astra","aver","ber","born","brek","by","ceryn","cian","coe","da","dal","dan","de","der","dinn","dis","don","dry","dryn","dur","e","ea","ed","ederei","eed","ef","eh","eid","eila","eir","eiros","el","elia","ella","ellen","elm","emia","en","end","er","ere","ern","erna","erri","esch","eth","eue","ey","fire","for","gar","gen","gran","han","hild","hit","hun","ia","iad","ialis","ian","ich","ie","iel","ik","ikos","il","ilar","ild","ilia","in","ina","inia","inua","ior","ir","is","ja","jed","kain","kaston","la","lannan","lee","leth","lie","lin","linn","loda","lyse","meral","mode","na","nan","neth","nor","oane","or","ora","orel","orn","orna","pet","qui","ra","rak","rasa","rash","rax","ree","rek","ret","retor","ri","rian","ric","rich","rie","rin","rinn","rion","runn","rynna","sen","sik","son","stag","striana","tin","tor","tyr","ur","us","va","vin","vok","vyn","vyre","ya","yas","yle","yne","ynn","za","zar"],a=["-","'"];switch(u.randomNumber(6,e)){case 0:case 1:case 2:case 3:case 4:return"".concat(d.draw(t,e)).concat(d.draw(n,e));case 5:return"".concat(d.draw(t,e)).concat(d.draw(a,e)).concat(d.draw(n,e))}return""};class H{}F=H,H.generateMagicItem=(e,t,n)=>{const a=F.convertToMagicItem(e,n);return F.addMagicItemFeature(a,t,n)},H.generateRandomMagicItem=(e,t)=>{const n=d.draw(Oe.getItemDeck(e),t),a=F.convertToMagicItem(n,t);return F.addMagicItemFeature(a,e,t)},H.convertToMagicItem=(e,t)=>{if(e.magic)return e;const n=JSON.parse(JSON.stringify(e));return n.id=D.guid(),n.name=O.generateName(t),n.description="Magical ".concat(e.name.toLowerCase()),n.baseItem=e.name,n.magic=!0,n},H.addMagicItemFeature=(e,t,n)=>{const a=[];if(e.weapon){const t=JSON.parse(JSON.stringify(e)),r=t.weapon;d.draw(r.damage,n).rank+=u.randomBonus(n),a.push(t);const s=JSON.parse(JSON.stringify(e)),i=s.weapon;i.range<=1?i.range+=1:i.range+=Math.floor(i.range*u.randomBonus(n)/10),a.push(s);const o=JSON.parse(JSON.stringify(e));o.weapon.damage.push({type:Oe.getRandomDamageType(u.randomBoolean(n)?y.Energy:y.Corruption),rank:u.randomBonus(n)}),a.push(o);const l=JSON.parse(JSON.stringify(e));if(l.features.push(J.createSkillFeature(D.guid(),C.Weapon,u.randomBonus(n))),a.push(l),e.weapon.unreliable>0){const t=JSON.parse(JSON.stringify(e));t.weapon.unreliable=0,a.push(t)}}if(e.armor){const t=JSON.parse(JSON.stringify(e)),r=t.armor.features.find((e=>e.type===j.DamageCategoryResist));r&&(r.rank+=u.randomBonus(n),a.push(t));const s=JSON.parse(JSON.stringify(e)),i=s.armor,o=i.features.find((e=>e.type===j.DamageCategoryResist));if(o){const e=JSON.parse(JSON.stringify(o));e.id=D.guid(),e.damageCategory=u.randomBoolean(n)?y.Energy:y.Corruption,i.features.push(e),a.push(s)}const l=JSON.parse(JSON.stringify(e)),c=l.armor,d=c.features.find((e=>e.type===j.SkillCategory));d&&(c.features=c.features.filter((e=>e.id!==d.id)),a.push(l));const p=JSON.parse(JSON.stringify(e)),h=p.armor,m=h.features.find((e=>e.type===j.Trait));m&&(h.features=h.features.filter((e=>e.id!==m.id)),a.push(p))}if(e.proficiency===v.Implements){const t=JSON.parse(JSON.stringify(e));t.features.push(J.createSkillFeature(D.guid(),C.Spellcasting,u.randomBonus(n))),a.push(t);const r=JSON.parse(JSON.stringify(e));r.features.push(J.createDamageCategoryBonusFeature(D.guid(),y.Energy,u.randomBonus(n))),a.push(r);const s=JSON.parse(JSON.stringify(e));s.features.push(J.createDamageCategoryBonusFeature(D.guid(),y.Corruption,u.randomBonus(n))),a.push(s)}if(e.features.filter((e=>e.rank<0)).forEach((t=>{const n=JSON.parse(JSON.stringify(e));n.features=n.features.filter((e=>e.id!==t.id)),a.push(n)})),e.location===b.Head){const t=JSON.parse(JSON.stringify(e));t.features.push(J.createSkillFeature(D.guid(),Oe.getRandomSkill(k.Mental),u.randomBonus(n))),a.push(t);const r=JSON.parse(JSON.stringify(e));r.features.push(J.createSkillCategoryFeature(D.guid(),u.randomBoolean(n)?k.Physical:k.Mental,u.randomBonus(n))),a.push(r);const s=JSON.parse(JSON.stringify(e));s.features.push(J.createTraitFeature(D.guid(),x.Resolve,u.randomBonus(n))),a.push(s)}if(e.location===b.Feet){const t=JSON.parse(JSON.stringify(e));t.features.push(J.createTraitFeature(D.guid(),x.Speed,u.randomBonus(n))),a.push(t)}if(e.location===b.Neck){const t=JSON.parse(JSON.stringify(e));t.features.push(J.createTraitFeature(D.guid(),x.Speed,u.randomBonus(n))),a.push(t);const r=JSON.parse(JSON.stringify(e));r.features.push(J.createTraitFeature(D.guid(),x.Resolve,u.randomBonus(n))),a.push(r)}const r=JSON.parse(JSON.stringify(e));r.id=D.guid(),r.features.push(J.createRandomFeature()),a.push(r);const s=JSON.parse(JSON.stringify(e));return s.id=D.guid(),s.actions.push(Oe.getRandomAction(e,t)),a.push(s),0===a.length?e:d.draw(a,n)};class _{}T=_,_.getAdjacentSquares=(e,t,n)=>{const a=[],r=e.squares.find((e=>e.x===t&&e.y===n-1));if(r&&a.push(r),t%2===0){const r=e.squares.find((e=>e.x===t+1&&e.y===n));r&&a.push(r);const s=e.squares.find((e=>e.x===t+1&&e.y===n+1));s&&a.push(s)}else{const r=e.squares.find((e=>e.x===t+1&&e.y===n-1));r&&a.push(r);const s=e.squares.find((e=>e.x===t+1&&e.y===n));s&&a.push(s)}const s=e.squares.find((e=>e.x===t&&e.y===n+1));if(s&&a.push(s),t%2===0){const r=e.squares.find((e=>e.x===t-1&&e.y===n+1));r&&a.push(r);const s=e.squares.find((e=>e.x===t-1&&e.y===n));s&&a.push(s)}else{const r=e.squares.find((e=>e.x===t-1&&e.y===n));r&&a.push(r);const s=e.squares.find((e=>e.x===t-1&&e.y===n-1));s&&a.push(s)}return a},_.getDimensions=e=>{const t={left:Number.MIN_VALUE,top:Number.MIN_VALUE,right:Number.MIN_VALUE,bottom:Number.MIN_VALUE};return e.forEach((e=>{t.left=t.left===Number.MIN_VALUE?e.x:Math.min(t.left,e.x),t.top=t.top===Number.MIN_VALUE?e.y:Math.min(t.top,e.y),t.right=t.right===Number.MIN_VALUE?e.x:Math.max(t.right,e.x),t.bottom=t.bottom===Number.MIN_VALUE?e.y:Math.max(t.bottom,e.y)})),t},_.getSquares=(e,t)=>e.squares.filter((e=>e.regionID===t.id)),_.getCentralSquare=(e,t)=>{const n=T.getSquares(e,t),a=d.mean(n,(e=>e.x)),r=d.mean(n,(e=>e.y));return d.min(n,(e=>{const t=Math.pow(e.x-a,2),n=Math.pow(e.y-r,2);return Math.sqrt(t+n)}))},_.canAttackRegion=(e,t)=>T.getSquares(e,t).some((t=>T.getAdjacentSquares(e,t.x,t.y).some((e=>""===e.regionID)))),_.conquerRegion=(e,t)=>{e.squares.forEach((e=>{e.regionID===t.id&&(e.regionID="")})),e.regions=e.regions.filter((t=>e.squares.some((e=>e.regionID===t.id))))},_.isConquered=e=>e.squares.every((e=>""===e.regionID)),_.getMonsters=(e,t)=>{const n=Oe.getMonsterSpeciesDeck(t),a=u.getSeededRNG(e.id),r=u.randomNumber(2,a)+2;return d.shuffle(n,a).slice(0,r)};class U{}U.toString=e=>"rgb(".concat(e.r,", ").concat(e.g,", ").concat(e.b,")"),U.tweak=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Math.random;const a={r:e.r+u.randomNumber(t,n)+u.randomNumber(t,n)-t,g:e.g+u.randomNumber(t,n)+u.randomNumber(t,n)-t,b:e.b+u.randomNumber(t,n)+u.randomNumber(t,n)-t};return a.r=Math.max(a.r,0),a.g=Math.max(a.g,0),a.b=Math.max(a.b,0),a.r=Math.min(a.r,255),a.g=Math.min(a.g,255),a.b=Math.min(a.b,255),a},U.parse=e=>{const t=/rgb\((?<r>\d{1,3}), (?<g>\d{1,3}), (?<b>\d{1,3})\)/.exec(e);if(t&&t.groups){return{r:parseInt(t.groups.r),g:parseInt(t.groups.g),b:parseInt(t.groups.b)}}return null},U.lighten=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.3;return{r:e.r+(255-e.r)*t,g:e.g+(255-e.g)*t,b:e.b+(255-e.b)*t}},U.darken=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.7;return{r:e.r*t,g:e.g*t,b:e.b*t}};class W{}W.generateCampaignMap=(e,t)=>{const n={squares:[{x:0,y:0,regionID:""}],regions:[]};for(;n.squares.length<1e3;){const e=d.draw(n.squares,t);let a=[];a=e.x%2===0?[{x:e.x,y:e.y-1,regionID:""},{x:e.x+1,y:e.y,regionID:""},{x:e.x+1,y:e.y+1,regionID:""},{x:e.x,y:e.y+1,regionID:""},{x:e.x-1,y:e.y+1,regionID:""},{x:e.x-1,y:e.y,regionID:""}]:[{x:e.x,y:e.y-1,regionID:""},{x:e.x+1,y:e.y-1,regionID:""},{x:e.x+1,y:e.y,regionID:""},{x:e.x,y:e.y+1,regionID:""},{x:e.x-1,y:e.y,regionID:""},{x:e.x-1,y:e.y-1,regionID:""}];const r=a.filter((e=>!n.squares.find((t=>t.x===e.x&&t.y===e.y))));if(r.length>0){const e=d.draw(r,t);n.squares.push(e)}}const a=1+n.squares.length/20;for(;n.regions.length!==a;){const a=u.randomColor(20,230,t);n.regions.push({id:D.guid(),name:O.generateName(Math.random),color:U.toString(a),encounters:[],boon:He.generateBoon(e,Math.random),demographics:{size:0,population:0,terrain:""}})}for(n.regions.forEach((e=>{const a=n.squares.filter((e=>""===e.regionID));d.draw(a,t).regionID=e.id}));0!==n.squares.filter((e=>""===e.regionID)).length;)n.regions.forEach((e=>{const a=[];if(n.squares.filter((t=>t.regionID===e.id)).forEach((e=>{_.getAdjacentSquares(n,e.x,e.y).filter((e=>""===e.regionID)).forEach((e=>a.push(e)))})),a.length>0){d.draw(a,t).regionID=e.id}}));n.regions.forEach((e=>{const a=_.getSquares(n,e).length;e.demographics.size=a,e.demographics.population=u.dice(a,t);e.demographics.terrain=d.draw(["Badlands","Canyons","Desert","Fens","Forest","Jungle","Lakes","Marshland","Mountains","Plains","Plateaus","Rainforest","Riverlands","Salt flats","Scrubland","Steppe","Taiga","Valleys","Volcanic","Wetlands"],t);const r=u.randomNumber(9,t)+1;for(;e.encounters.length<r;)e.encounters.push(D.guid())}));const r=n.regions.filter((e=>_.getSquares(n,e).some((e=>6!==_.getAdjacentSquares(n,e.x,e.y).length)))),s=d.draw(r,t);return _.conquerRegion(n,s),n};class V{}R=V,V.getDimensions=e=>{const t={left:Number.MIN_VALUE,top:Number.MIN_VALUE,right:Number.MIN_VALUE,bottom:Number.MIN_VALUE};return e.forEach((e=>{t.left=t.left===Number.MIN_VALUE?e.position.x:Math.min(t.left,e.position.x),t.top=t.top===Number.MIN_VALUE?e.position.y:Math.min(t.top,e.position.y),t.right=t.right===Number.MIN_VALUE?e.position.x:Math.max(t.right,e.position.x),t.bottom=t.bottom===Number.MIN_VALUE?e.position.y:Math.max(t.bottom,e.position.y)})),t},V.addStructure=(e,t)=>{const n=JSON.parse(JSON.stringify(t));n.id=D.guid(),n.position=R.getEmptyPosition(e),R.canCharge(n)&&(n.charges=n.level),e.push(n)},V.getEmptyPosition=e=>{const t=[];e.forEach((e=>{const n=e.position.x-3,a=e.position.x+3,r=e.position.y-3,s=e.position.y+3;for(let i=n;i<a;++i)for(let e=r;e<s;++e)t.push({x:i,y:e})}));const n=t.filter((t=>!e.find((e=>e.position.x===t.x&&e.position.y===t.y))));if(0===n.length)return{x:0,y:0};const a=d.draw(n);return{x:a.x,y:a.y}},V.getUpgradeCost=e=>50*e.level,V.canCharge=e=>{switch(e.type){case h.Barracks:case h.Warehouse:return!1}return!0},V.getStructureCharges=(e,t)=>d.sum(e.stronghold.filter((e=>e.type===t)),(e=>e.charges)),V.useCharge=(e,t,n)=>{for(let a=0;a<n;++a){const n=e.stronghold.filter((e=>e.type===t)).filter((e=>e.charges>0));if(n.length>0){d.draw(n).charges-=1}}};class Q{}Q.createCombatant=e=>({id:D.guid(),type:e,faction:e,name:"",speciesID:"",roleID:"",backgroundID:"",size:1,level:1,xp:0,color:U.toString({r:15,g:15,b:15}),quirks:[],features:[],items:[],carried:[],combat:{current:!1,state:I.Standing,stunned:!1,position:{x:0,y:0},trail:[],damage:0,wounds:0,initiative:Number.MIN_VALUE,movement:0,senses:0,hidden:0,conditions:[],actions:[],selectedAction:null,intents:null}}),Q.createGame=e=>{const t={heroSlots:5,structureSlots:0,heroes:[],items:[],boons:[],money:0,map:W.generateCampaignMap(e,Math.random),stronghold:[],encounter:null};return V.addStructure(t.stronghold,f.barracks()),V.addStructure(t.stronghold,f.warehouse()),t},Q.createCondition=(e,t,n)=>({id:D.guid(),type:e,trait:t,rank:n,details:{trait:x.None,skill:C.None,skillCategory:k.None,damage:w.None,damageCategory:y.None}}),Q.createFeature=e=>({id:e,type:j.Trait,damage:w.None,damageCategory:y.None,proficiency:v.None,skill:C.None,skillCategory:k.None,trait:x.None,aura:A.None,rank:1}),Q.createLootPile=()=>({id:D.guid(),items:[],money:0,position:{x:0,y:0}});class X{}q=X,X.CARRY_CAPACITY=3,X.applyCombatantCards=(e,t,n,a)=>{const r=Oe.getSpecies(t);if(r&&(e.speciesID=r.id,e.type=r.type,e.faction=r.type,e.size=r.size,r.quirks.forEach((t=>e.quirks.push(t))),r.startingFeatures.forEach((t=>e.features.push(JSON.parse(JSON.stringify(t))))),e.faction===N.Monster&&(e.name=r.name)),e.quirks.includes(P.Beast)||e.quirks.includes(P.Mindless));else{const t=Oe.getRole(n);t&&(e.roleID=t.id,t.startingFeatures.forEach((t=>e.features.push(JSON.parse(JSON.stringify(t))))),e.faction===N.Monster&&(e.name+=" ".concat(t.name)));const r=Oe.getBackground(a);r&&(e.backgroundID=r.id,r.startingFeatures.forEach((t=>e.features.push(JSON.parse(JSON.stringify(t))))))}},X.incrementCombatantLevel=(e,t,n)=>{e.xp=Math.max(e.xp-e.level,0),e.level+=1,e.features.push(t);for(let a=0;a!==e.items.length;++a){const t=e.items[a];t.magic&&0===u.randomNumber(5)&&(e.items[a]=H.generateMagicItem(t,n,Math.random))}},X.makeFeatureChoices=e=>{e.features.forEach((t=>{if(t.trait===x.Any){const e=[x.Endurance,x.Resolve,x.Speed];t.trait=d.draw(e)}if(t.skill===C.Any){const e=[C.Brawl,C.Perception,C.Presence,C.Reactions,C.Spellcasting,C.Stealth,C.Weapon];t.skill=d.draw(e)}if(t.skillCategory===k.Any){const e=[k.Physical,k.Mental];t.skillCategory=d.draw(e)}if(t.proficiency===v.Any){const n=[v.MilitaryWeapons,v.LargeWeapons,v.PairedWeapons,v.RangedWeapons,v.PowderWeapons,v.Implements,v.LightArmor,v.HeavyArmor,v.Shields];t.proficiency=d.draw(n.filter((t=>!q.getProficiencies(e).includes(t))))}if(t.damage===w.Any){const e=[w.Acid,w.Cold,w.Decay,w.Edged,w.Electricity,w.Fire,w.Impact,w.Light,w.Piercing,w.Poison,w.Psychic,w.Sonic];t.damage=d.draw(e)}if(t.damageCategory===y.Any){const e=[y.Physical,y.Energy,y.Corruption];t.damageCategory=d.draw(e)}}))},X.addItems=(e,t)=>{e.quirks.includes(P.Beast)||q.getProficiencies(e).forEach((n=>{const a=Oe.getItemsForProficiency(n,t),r=JSON.parse(JSON.stringify(d.draw(a)));r.id=D.guid(),e.items.push(r)}))},X.canEquip=(e,t)=>{if(e.quirks.includes(P.Beast))return!1;if(t.location===b.None)return!1;let n=1;switch(t.location){case b.Hand:case b.Ring:n=2}const a=d.sum(e.items.filter((e=>e.location===t.location)),(e=>e.slots)),r=n-a;if(t.slots>r)return!1;return t.proficiency===v.None||q.getProficiencies(e).includes(t.proficiency)},X.getFeatureDeck=e=>{const t=Oe.getSpecies(e.speciesID),n=Oe.getRole(e.roleID),a=Oe.getBackground(e.backgroundID);return[].concat(t?t.features:[]).concat(n?n.features:[]).concat(a?a.features:[])},X.getActionDeck=e=>{const t=Oe.getSpecies(e.speciesID),n=Oe.getRole(e.roleID),a=Oe.getBackground(e.backgroundID);let r=[].concat(t?t.actions:[]).concat(n?n.actions:[]).concat(a?a.actions:[]);return e.items.forEach((e=>{r=r.concat(e.actions)})),r},X.getFeatureSource=(e,t)=>{if(Y.getBaseFeatures().find((e=>e.id===t)))return"Standard";const n=Oe.getSpecies(e.speciesID);if(n&&n.features.find((e=>e.id===t)))return n.name;const a=Oe.getRole(e.roleID);if(a&&a.features.find((e=>e.id===t)))return a.name;const r=Oe.getBackground(e.backgroundID);if(r&&r.features.find((e=>e.id===t)))return r.name;let s="";return e.items.forEach((e=>{e.armor&&e.armor.features.find((e=>e.id===t))&&(s=e.name),e.features.find((e=>e.id===t))&&(s=e.name)})),""!==s?s:""},X.getFeatureSourceType=(e,t)=>{if(Y.getBaseFeatures().find((e=>e.id===t)))return E.Base;const n=Oe.getSpecies(e.speciesID);if(n&&n.features.find((e=>e.id===t)))return E.Species;const a=Oe.getRole(e.roleID);if(a&&a.features.find((e=>e.id===t)))return E.Role;const r=Oe.getBackground(e.backgroundID);if(r&&r.features.find((e=>e.id===t)))return E.Background;let s=!1;return e.items.forEach((e=>{e.armor&&e.armor.features.find((e=>e.id===t))&&(s=!0),e.features.find((e=>e.id===t))&&(s=!0)})),s?E.Item:E.Default},X.getActionSource=(e,t)=>{if(Y.getBaseActions().find((e=>e.id===t)))return"Standard";const n=Oe.getSpecies(e.speciesID);if(n&&n.actions.find((e=>e.id===t)))return n.name;const a=Oe.getRole(e.roleID);if(a&&a.actions.find((e=>e.id===t)))return a.name;const r=Oe.getBackground(e.backgroundID);if(r&&r.actions.find((e=>e.id===t)))return r.name;let s="";return e.items.forEach((e=>{e.actions.find((e=>e.id===t))&&(s=e.name)})),""!==s?s:""},X.getActionSourceType=(e,t)=>{if(Y.getBaseActions().find((e=>e.id===t)))return E.Base;const n=Oe.getSpecies(e.speciesID);if(n&&n.actions.find((e=>e.id===t)))return E.Species;const a=Oe.getRole(e.roleID);if(a&&a.actions.find((e=>e.id===t)))return E.Role;const r=Oe.getBackground(e.backgroundID);if(r&&r.actions.find((e=>e.id===t)))return E.Background;let s=!1;return e.items.forEach((e=>{e.actions.find((e=>e.id===t))&&(s=!0)})),s?E.Item:E.Default},X.resetCombatant=e=>{e.combat.current=!1,e.combat.stunned=!1,e.combat.state=I.Standing,e.combat.position={x:Number.MIN_VALUE,y:Number.MIN_VALUE},e.combat.trail=[],e.combat.damage=0,e.combat.wounds=0,e.combat.initiative=Number.MIN_VALUE,e.combat.movement=0,e.combat.senses=0,e.combat.hidden=0,e.combat.conditions=[],e.combat.actions=[],e.combat.selectedAction=null,e.combat.intents=null},X.getFeatures=e=>{let t=[].concat(e.features);return e.items.forEach((e=>{e.armor&&(t=t.concat(e.armor.features)),t=t.concat(e.features)})),t},X.getTraitRank=(e,t,n)=>{let a=1;return q.getFeatures(e).filter((e=>e.type===j.Trait)).filter((e=>e.trait===n||e.trait===x.All)).forEach((e=>a+=e.rank)),t.filter((e=>e.type===A.TraitBonus)).filter((e=>e.details.trait===n||e.details.trait===x.All)).forEach((e=>a+=e.rank)),t.filter((e=>e.type===A.TraitPenalty)).filter((e=>e.details.trait===n||e.details.trait===x.All)).forEach((e=>a-=e.rank)),Math.max(a,0)},X.getSkillRank=(e,t,n)=>{let a=0;return q.getFeatures(e).filter((e=>e.type===j.Skill)).filter((e=>e.skill===n||e.skill===C.All)).forEach((e=>a+=e.rank)),q.getFeatures(e).filter((e=>e.type===j.SkillCategory)).filter((e=>e.skillCategory===Oe.getSkillCategory(n)||e.skillCategory===k.All)).forEach((e=>a+=e.rank)),t.filter((e=>e.type===A.SkillBonus)).filter((e=>e.details.skill===n||e.details.skill===C.All)).forEach((e=>a+=e.rank)),t.filter((e=>e.type===A.SkillCategoryBonus)).filter((e=>e.details.skillCategory===Oe.getSkillCategory(n)||e.details.skillCategory===k.All)).forEach((e=>a+=e.rank)),t.filter((e=>e.type===A.SkillPenalty)).filter((e=>e.details.skill===n||e.details.trait===x.All)).forEach((e=>a-=e.rank)),t.filter((e=>e.type===A.SkillCategoryPenalty)).filter((e=>e.details.skillCategory===Oe.getSkillCategory(n)||e.details.skillCategory===k.All)).forEach((e=>a-=e.rank)),e.combat.state===I.Prone&&(a=Math.floor(a/2)),Math.max(a,0)},X.getDamageBonus=(e,t,n)=>{let a=0;return q.getFeatures(e).filter((e=>e.type===j.DamageBonus)).filter((e=>e.damage===n||e.damage===w.All)).forEach((e=>a+=e.rank)),q.getFeatures(e).filter((e=>e.type===j.DamageCategoryBonus)).filter((e=>e.damageCategory===Oe.getDamageCategory(n)||e.damageCategory===y.All)).forEach((e=>a+=e.rank)),t.filter((e=>e.type===A.DamageBonus)).filter((e=>e.details.damage===n||e.details.damage===w.All)).forEach((e=>a+=e.rank)),t.filter((e=>e.type===A.DamageCategoryBonus)).filter((e=>e.details.damageCategory===Oe.getDamageCategory(n)||e.details.damageCategory===y.All)).forEach((e=>a+=e.rank)),t.filter((e=>e.type===A.DamagePenalty)).filter((e=>e.details.damage===n||e.details.damage===w.All)).forEach((e=>a-=e.rank)),t.filter((e=>e.type===A.DamageCategoryPenalty)).filter((e=>e.details.damageCategory===Oe.getDamageCategory(n)||e.details.damageCategory===y.All)).forEach((e=>a-=e.rank)),a},X.getDamageResistance=(e,t,n)=>{let a=0;return q.getFeatures(e).filter((e=>e.type===j.DamageResist)).filter((e=>e.damage===n||e.damage===w.All)).forEach((e=>a+=e.rank)),q.getFeatures(e).filter((e=>e.type===j.DamageCategoryResist)).filter((e=>e.damageCategory===Oe.getDamageCategory(n)||e.damageCategory===y.All)).forEach((e=>a+=e.rank)),t.filter((e=>e.type===A.DamageResistance)).filter((e=>e.details.damage===n||e.details.damage===w.All)).forEach((e=>a+=e.rank)),t.filter((e=>e.type===A.DamageCategoryResistance)).filter((e=>e.details.damageCategory===Oe.getDamageCategory(n)||e.details.damageCategory===y.All)).forEach((e=>a+=e.rank)),t.filter((e=>e.type===A.DamageVulnerability)).filter((e=>e.details.damage===n||e.details.damage===w.All)).forEach((e=>a-=e.rank)),t.filter((e=>e.type===A.DamageCategoryVulnerability)).filter((e=>e.details.damageCategory===Oe.getDamageCategory(n)||e.details.damageCategory===y.All)).forEach((e=>a-=e.rank)),a},X.getProficiencies=e=>{const t=[];return q.getFeatures(e).filter((e=>e.type===j.Proficiency)).forEach((e=>t.push(e.proficiency))),d.distinct(t,(e=>e.toString()))},X.getAuras=e=>{const t=[];return e.combat.state!==I.Standing&&e.combat.state!==I.Prone||q.getFeatures(e).filter((e=>e.type===j.Aura)).forEach((e=>{const n=t.find((t=>t.type===e.aura&&t.details.trait===e.trait&&t.details.skill===e.skill&&t.details.skillCategory===e.skillCategory&&t.details.damage===e.damage&&t.details.damageCategory===e.damageCategory));if(n)n.rank+=e.rank;else{const n=Q.createCondition(e.aura,x.None,e.rank);n.details.trait=e.trait,n.details.skill=e.skill,n.details.skillCategory=e.skillCategory,n.details.damage=e.damage,n.details.damageCategory=e.damageCategory,t.push(n)}})),t};class G{}L=G,G.createAutoHealCondition=(e,t)=>Q.createCondition(A.AutoHeal,e,t),G.createAutoDamageCondition=(e,t,n)=>{const a=Q.createCondition(A.AutoDamage,e,t);return a.details.damage=n,a},G.createTraitBonusCondition=(e,t,n)=>{const a=Q.createCondition(A.TraitBonus,e,t);return a.details.trait=n,a},G.createTraitPenaltyCondition=(e,t,n)=>{const a=Q.createCondition(A.TraitPenalty,e,t);return a.details.trait=n,a},G.createSkillBonusCondition=(e,t,n)=>{const a=Q.createCondition(A.SkillBonus,e,t);return a.details.skill=n,a},G.createSkillPenaltyCondition=(e,t,n)=>{const a=Q.createCondition(A.SkillPenalty,e,t);return a.details.skill=n,a},G.createSkillCategoryBonusCondition=(e,t,n)=>{const a=Q.createCondition(A.SkillCategoryBonus,e,t);return a.details.skillCategory=n,a},G.createSkillCategoryPenaltyCondition=(e,t,n)=>{const a=Q.createCondition(A.SkillCategoryPenalty,e,t);return a.details.skillCategory=n,a},G.createDamageBonusCondition=(e,t,n)=>{const a=Q.createCondition(A.DamageBonus,e,t);return a.details.damage=n,a},G.createDamagePenaltyCondition=(e,t,n)=>{const a=Q.createCondition(A.DamagePenalty,e,t);return a.details.damage=n,a},G.createDamageCategoryBonusCondition=(e,t,n)=>{const a=Q.createCondition(A.DamageCategoryBonus,e,t);return a.details.damageCategory=n,a},G.createDamageCategoryPenaltyCondition=(e,t,n)=>{const a=Q.createCondition(A.DamageCategoryPenalty,e,t);return a.details.damageCategory=n,a},G.createDamageResistanceCondition=(e,t,n)=>{const a=Q.createCondition(A.DamageResistance,e,t);return a.details.damage=n,a},G.createDamageVulnerabilityCondition=(e,t,n)=>{const a=Q.createCondition(A.DamageVulnerability,e,t);return a.details.damage=n,a},G.createDamageCategoryResistanceCondition=(e,t,n)=>{const a=Q.createCondition(A.DamageCategoryResistance,e,t);return a.details.damageCategory=n,a},G.createDamageCategoryVulnerabilityCondition=(e,t,n)=>{const a=Q.createCondition(A.DamageCategoryVulnerability,e,t);return a.details.damageCategory=n,a},G.createMovementBonusCondition=(e,t)=>Q.createCondition(A.MovementBonus,e,t),G.createMovementPenaltyCondition=(e,t)=>Q.createCondition(A.MovementPenalty,e,t),G.getConditionDescription=e=>{switch(e.type){case A.AutoHeal:return"Automatic healing";case A.AutoDamage:return"Automatic damage (".concat(e.details.damage,")");case A.TraitBonus:return"Trait bonus: ".concat(e.details.trait);case A.TraitPenalty:return"Trait penalty: ".concat(e.details.trait);case A.SkillBonus:return"Skill bonus: ".concat(e.details.skill);case A.SkillPenalty:return"Skill penalty: ".concat(e.details.skill);case A.SkillCategoryBonus:return"Skill bonus: all ".concat(e.details.skillCategory," skills");case A.SkillCategoryPenalty:return"Skill penalty: all ".concat(e.details.skillCategory," skills");case A.DamageBonus:return"Damage bonus: ".concat(e.details.damage);case A.DamagePenalty:return"Damage penalty: ".concat(e.details.damage);case A.DamageCategoryBonus:return"Damage bonus: all ".concat(e.details.damageCategory," types");case A.DamageCategoryPenalty:return"Damage penalty: all ".concat(e.details.damageCategory," types");case A.DamageResistance:return"Damage resistance: ".concat(e.details.damage);case A.DamageVulnerability:return"Damage vulnerability: ".concat(e.details.damage);case A.DamageCategoryResistance:return"Damage resistance: all ".concat(e.details.damageCategory," types");case A.DamageCategoryVulnerability:return"Damage vulnerability: all ".concat(e.details.damageCategory," types");case A.MovementBonus:return"Movement bonus";case A.MovementPenalty:return"Movement penalty"}return""},G.getOppositeType=e=>{const t=[{a:A.AutoHeal,b:A.AutoDamage},{a:A.TraitBonus,b:A.TraitPenalty},{a:A.SkillBonus,b:A.SkillPenalty},{a:A.SkillCategoryBonus,b:A.SkillCategoryPenalty},{a:A.DamageBonus,b:A.DamagePenalty},{a:A.DamageCategoryBonus,b:A.DamageCategoryPenalty},{a:A.DamageResistance,b:A.DamageVulnerability},{a:A.DamageCategoryResistance,b:A.DamageCategoryVulnerability},{a:A.MovementBonus,b:A.MovementPenalty}];let n=e;return t.forEach((t=>{e===t.a&&(n=t.b),e===t.b&&(n=t.a)})),n},G.getConditionIsBeneficial=e=>{switch(e.type){case A.AutoHeal:case A.TraitBonus:case A.SkillBonus:case A.SkillCategoryBonus:case A.DamageBonus:case A.DamageCategoryBonus:case A.DamageResistance:case A.DamageCategoryResistance:case A.MovementBonus:return!0}return!1},G.createRandomBeneficialCondition=()=>{switch(u.randomNumber(6)){case 0:return L.createAutoHealCondition(Oe.getRandomTrait(),u.randomBonus());case 1:return L.createTraitBonusCondition(Oe.getRandomTrait(),u.randomBonus(),Oe.getRandomTrait());case 2:return L.createSkillBonusCondition(Oe.getRandomTrait(),2*u.randomBonus(),Oe.getRandomSkill());case 3:return L.createDamageBonusCondition(Oe.getRandomTrait(),3*u.randomBonus(),Oe.getRandomDamageType());case 4:return L.createDamageResistanceCondition(Oe.getRandomTrait(),3*u.randomBonus(),Oe.getRandomDamageType());case 5:return L.createMovementBonusCondition(Oe.getRandomTrait(),2*u.randomBonus())}return null},G.createRandomDetrimentalCondition=()=>{switch(u.randomNumber(6)){case 0:return L.createAutoDamageCondition(Oe.getRandomTrait(),u.randomBonus(),Oe.getRandomDamageType());case 1:return L.createTraitPenaltyCondition(Oe.getRandomTrait(),u.randomBonus(),Oe.getRandomTrait());case 2:return L.createSkillPenaltyCondition(Oe.getRandomTrait(),2*u.randomBonus(),Oe.getRandomSkill());case 3:return L.createDamagePenaltyCondition(Oe.getRandomTrait(),3*u.randomBonus(),Oe.getRandomDamageType());case 4:return L.createDamageVulnerabilityCondition(Oe.getRandomTrait(),3*u.randomBonus(),Oe.getRandomDamageType());case 5:return L.createMovementPenaltyCondition(Oe.getRandomTrait(),2*u.randomBonus())}return null};class J{}z=J,J.createDamageBonusFeature=(e,t,n)=>{const a=Q.createFeature(e);return a.type=j.DamageBonus,a.damage=t,a.rank=n,a},J.createDamageCategoryBonusFeature=(e,t,n)=>{const a=Q.createFeature(e);return a.type=j.DamageCategoryBonus,a.damageCategory=t,a.rank=n,a},J.createDamageResistFeature=(e,t,n)=>{const a=Q.createFeature(e);return a.type=j.DamageResist,a.damage=t,a.rank=n,a},J.createDamageCategoryResistFeature=(e,t,n)=>{const a=Q.createFeature(e);return a.type=j.DamageCategoryResist,a.damageCategory=t,a.rank=n,a},J.createProficiencyFeature=(e,t)=>{const n=Q.createFeature(e);return n.type=j.Proficiency,n.proficiency=t,n},J.createSkillFeature=(e,t,n)=>{const a=Q.createFeature(e);return a.type=j.Skill,a.skill=t,a.rank=n,a},J.createSkillCategoryFeature=(e,t,n)=>{const a=Q.createFeature(e);return a.type=j.SkillCategory,a.skillCategory=t,a.rank=n,a},J.createTraitFeature=(e,t,n)=>{const a=Q.createFeature(e);return a.type=j.Trait,a.trait=t,a.rank=n,a},J.createAuraFeature=(e,t,n)=>{if(![A.AutoHeal,A.MovementBonus,A.MovementPenalty].includes(t))throw new Error("Incorrect aura parameters");const a=Q.createFeature(e);return a.type=j.Aura,a.aura=t,a.rank=n,a},J.createAuraTraitFeature=(e,t,n,a)=>{if(![A.TraitBonus,A.TraitPenalty].includes(t))throw new Error("Incorrect aura parameters");const r=Q.createFeature(e);return r.type=j.Aura,r.aura=t,r.trait=n,r.rank=a,r},J.createAuraSkillFeature=(e,t,n,a)=>{if(![A.SkillBonus,A.SkillPenalty].includes(t))throw new Error("Incorrect aura parameters");const r=Q.createFeature(e);return r.type=j.Aura,r.aura=t,r.skill=n,r.rank=a,r},J.createAuraSkillCategoryFeature=(e,t,n,a)=>{if(![A.SkillCategoryBonus,A.SkillCategoryPenalty].includes(t))throw new Error("Incorrect aura parameters");const r=Q.createFeature(e);return r.type=j.Aura,r.aura=t,r.skillCategory=n,r.rank=a,r},J.createAuraDamageFeature=(e,t,n,a)=>{if(![A.AutoDamage,A.DamageBonus,A.DamagePenalty,A.DamageResistance,A.DamageVulnerability].includes(t))throw new Error("Incorrect aura parameters");const r=Q.createFeature(e);return r.type=j.Aura,r.aura=t,r.damage=n,r.rank=a,r},J.createAuraDamageCategoryFeature=(e,t,n,a)=>{if(![A.DamageCategoryBonus,A.DamageCategoryPenalty,A.DamageCategoryResistance,A.DamageCategoryVulnerability].includes(t))throw new Error("Incorrect aura parameters");const r=Q.createFeature(e);return r.type=j.Aura,r.aura=t,r.damageCategory=n,r.rank=a,r},J.createRandomFeature=()=>{switch(u.randomNumber(8)){case 0:return z.createDamageBonusFeature(D.guid(),Oe.getRandomDamageType(),u.randomBonus());case 1:return z.createDamageCategoryBonusFeature(D.guid(),Oe.getRandomDamageCategoryType(),u.randomBonus());case 2:return z.createDamageResistFeature(D.guid(),Oe.getRandomDamageType(),u.randomBonus());case 3:return z.createDamageCategoryResistFeature(D.guid(),Oe.getRandomDamageCategoryType(),u.randomBonus());case 4:return z.createProficiencyFeature(D.guid(),Oe.getRandomItemProficiency());case 5:return z.createTraitFeature(D.guid(),Oe.getRandomTrait(),u.randomBonus());case 6:return z.createSkillFeature(D.guid(),Oe.getRandomSkill(),u.randomBonus());default:return z.createSkillCategoryFeature(D.guid(),Oe.getRandomSkillCategory(),u.randomBonus())}},J.getFeatureDescription=e=>{const t=z.getFeatureTitle(e).toString(),n=z.getFeatureInformation(e).toString();return"".concat(t,": ").concat(n)},J.getFeatureTitle=e=>{switch(e.type){case j.Trait:return"Trait bonus";case j.Skill:case j.SkillCategory:return"Skill bonus";case j.Proficiency:return"Proficiency";case j.DamageBonus:case j.DamageCategoryBonus:return"Damage Bonus";case j.DamageResist:case j.DamageCategoryResist:return"Damage Resistance";case j.Aura:return"Aura"}},J.getFeatureInformation=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;switch(e.type){case j.Trait:if(t&&e.trait!==x.Any){const n=X.getTraitRank(t,[],e.trait);return"".concat(z.getFeatureText(e)," ").concat(n," => ").concat(n+e.rank)}return"".concat(z.getFeatureText(e)," ").concat(e.rank>0?"+":"").concat(e.rank);case j.Skill:if(t&&e.skill!==C.Any){const n=X.getSkillRank(t,[],e.skill);return"".concat(z.getFeatureText(e)," ").concat(n," => ").concat(n+e.rank)}return"".concat(z.getFeatureText(e)," ").concat(e.rank>0?"+":"").concat(e.rank);case j.SkillCategory:case j.DamageBonus:case j.DamageCategoryBonus:case j.DamageResist:case j.DamageCategoryResist:case j.Aura:return"".concat(z.getFeatureText(e)," ").concat(e.rank>0?"+":"").concat(e.rank);case j.Proficiency:return z.getFeatureText(e)}},J.getFeatureText=e=>{switch(e.type){case j.Trait:return"".concat(e.trait);case j.Skill:return"".concat(e.skill);case j.SkillCategory:return"All ".concat(e.skillCategory," skills");case j.Proficiency:return"".concat(e.proficiency);case j.DamageBonus:return"".concat(e.damage);case j.DamageCategoryBonus:return"All ".concat(e.damageCategory," types");case j.DamageResist:return"".concat(e.damage);case j.DamageCategoryResist:return"All ".concat(e.damageCategory," types");case j.Aura:{const t=Q.createCondition(e.aura,x.None,e.rank);t.details.trait=e.trait,t.details.skill=e.skill,t.details.skillCategory=e.skillCategory,t.details.damage=e.damage,t.details.damageCategory=e.damageCategory;const n=G.getConditionIsBeneficial(t)?"allies":"enemies";return"".concat(G.getConditionDescription(t)," (affects ").concat(n,")")}}},J.hasChoice=e=>{switch(e.type){case j.Trait:return e.trait===x.Any;case j.Skill:return e.skill===C.Any;case j.SkillCategory:return e.skillCategory===k.Any;case j.Proficiency:return e.proficiency===v.Any;case j.DamageBonus:case j.DamageResist:return e.damage===w.Any;case j.DamageCategoryBonus:case j.DamageCategoryResist:return e.damageCategory===y.Any}return!1},J.collateFeatures=e=>{const t=[];return e.forEach((e=>{const n=t.find((t=>z.getFeatureTitle(t)===z.getFeatureTitle(e)&&z.getFeatureText(t)===z.getFeatureText(e)));if(n)n.rank+=e.rank;else{const n=JSON.parse(JSON.stringify(e));t.push(n)}})),t};class Y{}Y.getBaseFeatures=()=>[J.createTraitFeature("base-trait",x.Any,1),J.createSkillFeature("base-skill",C.Any,1),J.createProficiencyFeature("base-prof",v.Any),J.createDamageBonusFeature("base-dmg-bonus",w.Any,1),J.createDamageResistFeature("base-dmg-resist",w.Any,1)],Y.getBaseActions=()=>[{id:"base-1",name:"Melee Weapon Attack",prerequisites:[Ie.meleeWeapon()],parameters:[Me.melee(),Pe.weapon(S.Enemies,1,0)],effects:[Be.attack({weapon:!0,skill:C.Weapon,trait:x.Speed,skillBonus:0,hit:[Be.dealWeaponDamage()]})]},{id:"base-2",name:"Ranged Weapon Attack",prerequisites:[Ie.rangedWeapon()],parameters:[Me.ranged(),Pe.weapon(S.Enemies,1,0)],effects:[Be.attack({weapon:!0,skill:C.Weapon,trait:x.Speed,skillBonus:0,hit:[Be.dealWeaponDamage()]})]},{id:"base-3",name:"Unarmed Attack",prerequisites:[Ie.emptyHand()],parameters:[Pe.adjacent(S.Enemies,1)],effects:[Be.attack({weapon:!1,skill:C.Brawl,trait:x.Speed,skillBonus:0,hit:[Be.dealDamage(w.Impact,1)]})]},{id:"base-4",name:"Stand Up",prerequisites:[Ie.prone()],parameters:[Pe.self()],effects:[Be.stand()]}];let K=function(e){return e.Push="push",e.Pull="pull",e.Swap="swap",e.TowardsTarget="towards target",e.BesideTarget="beside target",e.Random="random",e}({});var Z;class ${}Z=$,$.colossus=()=>({id:"species-colossus",name:"Colossus",packID:"",description:"A huge, monstrously strong creature.",type:N.Monster,size:3,quirks:[],startingFeatures:[J.createTraitFeature("colossus-start-1",x.Endurance,2),J.createSkillFeature("colossus-start-2",C.Brawl,2)],features:[J.createTraitFeature("colossus-feature-1",x.Endurance,1),J.createTraitFeature("colossus-feature-2",x.Resolve,1),J.createSkillFeature("colossus-feature-3",C.Brawl,2),J.createDamageResistFeature("colossus-feature-4",w.All,1)],actions:[{id:"colossus-action-1",name:"Hurl Object",prerequisites:[],parameters:[Pe.burst(S.Enemies,1,10)],effects:[Be.attack({weapon:!1,skill:C.Brawl,trait:x.Speed,skillBonus:0,hit:[Be.dealDamage(w.Impact,3),Be.knockDown()]})]},{id:"colossus-action-2",name:"Sweep",prerequisites:[],parameters:[Pe.adjacent(S.Enemies,Number.MAX_VALUE)],effects:[Be.attack({weapon:!1,skill:C.Brawl,trait:x.Speed,skillBonus:0,hit:[Be.dealDamage(w.Impact,2),Be.knockDown()]})]},{id:"colossus-action-3",name:"Thwack",prerequisites:[],parameters:[Pe.adjacent(S.Enemies,1)],effects:[Be.attack({weapon:!1,skill:C.Brawl,trait:x.Resolve,skillBonus:0,hit:[Be.dealDamage(w.Impact,4),Be.forceMovement(K.Push,2),Be.knockDown()]})]}]}),$.gnoll=()=>({id:"species-gnoll",name:"Gnoll",packID:"",description:"A humanoid with the head and claws of a hyena.",type:N.Monster,size:1,quirks:[],startingFeatures:[J.createTraitFeature("gnoll-start-1",x.Endurance,1),J.createTraitFeature("gnoll-start-2",x.Speed,1),J.createSkillFeature("gnoll-start-3",C.Brawl,2)],features:[J.createTraitFeature("gnoll-feature-1",x.Endurance,1),J.createTraitFeature("gnoll-feature-2",x.Speed,1),J.createSkillFeature("gnoll-feature-3",C.Brawl,2)],actions:[{id:"gnoll-action-1",name:"Frenzied Bite",prerequisites:[],parameters:[Pe.adjacent(S.Enemies,1)],effects:[Be.attack({weapon:!1,skill:C.Brawl,trait:x.Speed,skillBonus:0,hit:[Be.dealDamage(w.Piercing,3)]})]},{id:"gnoll-action-2",name:"Raking Claws",prerequisites:[],parameters:[Pe.adjacent(S.Enemies,1)],effects:[Be.attack({weapon:!1,skill:C.Brawl,trait:x.Speed,skillBonus:0,hit:[Be.dealDamage(w.Edged,3)]}),Be.takeAnotherAction()]},{id:"gnoll-action-3",name:"Rending Claws",prerequisites:[],parameters:[Pe.adjacent(S.Enemies,1)],effects:[Be.attack({weapon:!1,skill:C.Brawl,trait:x.Speed,skillBonus:0,hit:[Be.dealDamage(w.Edged,3)]})]},{id:"gnoll-action-4",name:"Maniacal Cackle",prerequisites:[],parameters:[Pe.burst(S.Combatants,Number.MAX_VALUE,3)],effects:[Be.attack({weapon:!1,skill:C.Presence,trait:x.Resolve,skillBonus:0,hit:[Be.addCondition(G.createSkillCategoryPenaltyCondition(x.Resolve,3,k.Mental))]})]}]}),$.goblin=()=>({id:"species-goblin",name:"Goblin",packID:"",description:"A fleet-footed creature, difficult to pin down.",type:N.Monster,size:1,quirks:[],startingFeatures:[J.createTraitFeature("goblin-start-1",x.Speed,1),J.createSkillFeature("goblin-start-2",C.Reactions,2),J.createSkillFeature("goblin-start-3",C.Stealth,2)],features:[J.createTraitFeature("goblin-feature-1",x.Speed,1),J.createSkillFeature("goblin-feature-2",C.Reactions,2),J.createSkillFeature("goblin-feature-3",C.Stealth,2)],actions:[{id:"goblin-action-1",name:"Backstab",prerequisites:[Ie.meleeWeapon(),Ie.hidden()],parameters:[Me.melee(),Pe.adjacent(S.Enemies,1)],effects:[Be.attack({weapon:!0,skill:C.Weapon,trait:x.Speed,skillBonus:2,hit:[Be.dealWeaponDamage()]})]},{id:"goblin-action-2",name:"Skitter",prerequisites:[],parameters:[Pe.self()],effects:[Be.forceMovement(K.Random,1),Be.takeAnotherAction()]}]}),$.medusa=()=>({id:"species-medusa",name:"Medusa",packID:"",description:"A humanoid with snakes for hair and a petrifying gaze.",type:N.Monster,size:1,quirks:[],startingFeatures:[J.createSkillFeature("medusa-start-1",C.Brawl,2),J.createSkillFeature("medusa-start-2",C.Presence,2),J.createDamageBonusFeature("medusa-start-3",w.Poison,2),J.createDamageResistFeature("medusa-start-4",w.Poison,2)],features:[J.createSkillFeature("medusa-feature-1",C.Brawl,2),J.createSkillFeature("medusa-feature-2",C.Presence,2),J.createDamageBonusFeature("medusa-feature-3",w.Poison,2),J.createDamageResistFeature("medusa-feature-4",w.Poison,2)],actions:[{id:"medusa-action-1",name:"Spit Venom",prerequisites:[],parameters:[Pe.adjacent(S.Enemies,1)],effects:[Be.attack({weapon:!1,skill:C.Brawl,trait:x.Endurance,skillBonus:0,hit:[Be.dealDamage(w.Poison,3)]})]},{id:"medusa-action-2",name:"Petrifying Gaze",prerequisites:[],parameters:[Pe.burst(S.Enemies,1,6)],effects:[Be.attack({weapon:!1,skill:C.Presence,trait:x.Resolve,skillBonus:0,hit:[Be.addCondition(G.createTraitPenaltyCondition(x.Resolve,5,x.All)),Be.addCondition(G.createMovementPenaltyCondition(x.Resolve,3))]})]},{id:"medusa-action-3",name:"Weakening Gaze",prerequisites:[],parameters:[Pe.burst(S.Enemies,1,6)],effects:[Be.attack({weapon:!1,skill:C.Presence,trait:x.Resolve,skillBonus:0,hit:[Be.addCondition(G.createDamageCategoryPenaltyCondition(x.Resolve,4,y.Physical)),Be.addCondition(G.createDamageCategoryPenaltyCondition(x.Resolve,4,y.Energy)),Be.addCondition(G.createDamageCategoryPenaltyCondition(x.Resolve,4,y.Corruption))]})]}]}),$.orc=()=>({id:"species-orc",name:"Orc",packID:"",description:"An evil creature bred for war.",type:N.Monster,size:1,quirks:[],startingFeatures:[J.createTraitFeature("orc-start-1",x.Endurance,1),J.createSkillFeature("orc-start-2",C.Brawl,2),J.createSkillFeature("orc-start-3",C.Weapon,2)],features:[J.createTraitFeature("orc-feature-1",x.Endurance,1),J.createSkillFeature("orc-feature-2",C.Brawl,2),J.createSkillFeature("orc-feature-3",C.Weapon,2),J.createDamageResistFeature("orc-feature-4",w.All,1)],actions:[{id:"orc-action-1",name:"Bloodlust",prerequisites:[],parameters:[Pe.self()],effects:[Be.addCondition(G.createSkillBonusCondition(x.Endurance,3,C.Brawl)),Be.addCondition(G.createSkillBonusCondition(x.Endurance,3,C.Weapon)),Be.addCondition(G.createDamageCategoryBonusCondition(x.Endurance,2,y.Physical))]},{id:"orc-action-2",name:"Bloodfury",prerequisites:[Ie.wound()],parameters:[Pe.adjacent(S.Enemies,1)],effects:[Be.attack({weapon:!1,skill:C.Brawl,trait:x.Endurance,skillBonus:0,hit:[Be.dealDamage(w.Impact,3)]}),Be.takeAnotherAction()]}]}),$.ratfolk=()=>({id:"species-ratfolk",name:"Ratfolk",packID:"",description:"Nimble humanoid vermin.",type:N.Monster,size:1,quirks:[],startingFeatures:[J.createTraitFeature("ratfolk-start-1",x.Speed,1),J.createSkillFeature("ratfolk-start-2",C.Brawl,2),J.createTraitFeature("ratfolk-start-3",x.Endurance,1),J.createDamageResistFeature("ratfolk-start-4",w.Decay,2)],features:[J.createTraitFeature("ratfolk-feature-1",x.Speed,1),J.createSkillFeature("ratfolk-feature-2",C.Brawl,2),J.createTraitFeature("ratfolk-feature-3",x.Endurance,1),J.createDamageResistFeature("ratfolk-feature-4",w.Decay,2)],actions:[{id:"ratfolk-action-1",name:"Bite",prerequisites:[],parameters:[Pe.adjacent(S.Enemies,Number.MAX_VALUE)],effects:[Be.attack({weapon:!1,skill:C.Brawl,trait:x.Speed,skillBonus:0,hit:[Be.dealDamage(w.Piercing,3),Be.dealDamage(w.Decay,1)]})]},{id:"ratfolk-action-2",name:"Scurry",prerequisites:[],parameters:[Pe.self()],effects:[Be.addMovement(),Be.takeAnotherAction()]}]}),$.scarab=()=>({id:"species-scarab",name:"Scarab",packID:"",description:"Beetles with an acidic bite.",type:N.Monster,size:1,quirks:[P.Beast],startingFeatures:[J.createSkillFeature("scarab-start-1",C.Brawl,2),J.createDamageBonusFeature("scarab-start-2",w.Acid,2),J.createTraitFeature("scarab-start-3",x.Endurance,1)],features:[J.createSkillFeature("scarab-feature-1",C.Brawl,2),J.createDamageBonusFeature("scarab-feature-2",w.Acid,2),J.createTraitFeature("scarab-feature-3",x.Endurance,1)],actions:[{id:"scarab-action-1",name:"Mandible",prerequisites:[],parameters:[Pe.adjacent(S.Enemies,1)],effects:[Be.attack({weapon:!1,skill:C.Brawl,trait:x.Endurance,skillBonus:0,hit:[Be.dealDamage(w.Edged,2),Be.dealDamage(w.Acid,2)]})]},{id:"scarab-action-2",name:"Tail Lash",prerequisites:[],parameters:[Pe.adjacent(S.Enemies,Number.MAX_VALUE)],effects:[Be.attack({weapon:!1,skill:C.Brawl,trait:x.Endurance,skillBonus:0,hit:[Be.dealDamage(w.Impact,2)]})]},{id:"scarab-action-3",name:"Tail Stinger",prerequisites:[],parameters:[Pe.burst(S.Enemies,1,2)],effects:[Be.attack({weapon:!1,skill:C.Brawl,trait:x.Speed,skillBonus:0,hit:[Be.dealDamage(w.Piercing,2),Be.dealDamage(w.Acid,2)]})]}]}),$.shadowborn=()=>({id:"species-shadowborn",name:"Shadowborn",packID:"",description:"A humanoid with demonic heritage.",type:N.Monster,size:1,quirks:[],startingFeatures:[J.createTraitFeature("shadowborn-start-1",x.Resolve,1),J.createSkillFeature("shadowborn-start-2",C.Brawl,2),J.createSkillFeature("shadowborn-start-3",C.Presence,2),J.createSkillFeature("shadowborn-start-4",C.Stealth,2)],features:[J.createTraitFeature("shadowborn-feature-1",x.Resolve,1),J.createSkillFeature("shadowborn-feature-2",C.Brawl,2),J.createSkillFeature("shadowborn-feature-3",C.Presence,2),J.createSkillFeature("shadowborn-feature-4",C.Stealth,2),J.createDamageCategoryResistFeature("shadowborn-feature-5",y.Corruption,1),J.createAuraDamageFeature("shadowborn-feature-6",A.AutoDamage,w.Decay,1)],actions:[{id:"shadowborn-action-1",name:"Transference",prerequisites:[Ie.condition(x.Any)],parameters:[Pe.adjacent(S.Enemies,1)],effects:[Be.transferCondition()]},{id:"shadowborn-action-2",name:"Drain Energy",prerequisites:[],parameters:[Pe.adjacent(S.Enemies,1)],effects:[Be.attack({weapon:!1,skill:C.Presence,trait:x.Resolve,skillBonus:0,hit:[Be.addCondition(G.createMovementPenaltyCondition(x.Resolve,5)),Be.addCondition(G.createTraitPenaltyCondition(x.Resolve,2,x.All)),Be.addCondition(G.createSkillPenaltyCondition(x.Resolve,2,C.All))]})]},{id:"shadowborn-action-3",name:"Intimidate",prerequisites:[],parameters:[Pe.burst(S.Enemies,1,5)],effects:[Be.attack({weapon:!1,skill:C.Presence,trait:x.Resolve,skillBonus:0,hit:[Be.forceMovement(K.Push,1),Be.stun()]})]}]}),$.troll=()=>({id:"species-troll",name:"Troll",packID:"",description:"A huge brute of a humanoid.",type:N.Monster,size:2,quirks:[P.Mindless],startingFeatures:[J.createTraitFeature("troll-start-1",x.Endurance,2),J.createProficiencyFeature("troll-start-2",v.LargeWeapons),J.createSkillFeature("troll-start-3",C.Brawl,2)],features:[J.createTraitFeature("troll-feature-1",x.Endurance,1),J.createSkillFeature("troll-feature-2",C.Brawl,2),J.createDamageCategoryResistFeature("troll-feature-3",y.Physical,1),J.createDamageCategoryResistFeature("troll-feature-4",y.Energy,1),J.createDamageCategoryResistFeature("troll-feature-5",y.Corruption,1)],actions:[{id:"troll-action-1",name:"Slam",prerequisites:[],parameters:[Pe.adjacent(S.Enemies,1)],effects:[Be.attack({weapon:!1,skill:C.Brawl,trait:x.Endurance,skillBonus:0,hit:[Be.dealDamage(w.Impact,2),Be.knockDown()]})]},{id:"troll-action-2",name:"Regeneration",prerequisites:[Ie.wound()],parameters:[Pe.self()],effects:[Be.healWounds(1)]}]}),$.airElemental=()=>({id:"species-elemental-air",name:"Air Elemental",packID:p.elements().id,description:"Air elementals are as changeable as the weather, either calm or tempestuous.",type:N.Monster,size:1,quirks:[P.Amorphous],startingFeatures:[J.createTraitFeature("elemental-air-start-1",x.Resolve,1),J.createSkillFeature("elemental-air-start-2",C.Brawl,2),J.createDamageBonusFeature("elemental-air-start-3",w.Cold,2),J.createDamageResistFeature("elemental-air-start-4",w.Cold,5)],features:[J.createTraitFeature("elemental-air-start-1",x.Resolve,1),J.createSkillFeature("elemental-air-feature-2",C.Brawl,2),J.createDamageBonusFeature("elemental-air-feature-3",w.Cold,2),J.createAuraDamageFeature("elemental-air-feature-4",A.AutoDamage,w.Cold,1)],actions:[{id:"elemental-air-action-1",name:"Thunderclap",prerequisites:[],parameters:[Pe.burst(S.Combatants,Number.MAX_VALUE,3)],effects:[Be.attack({weapon:!1,skill:C.Brawl,trait:x.Endurance,skillBonus:0,hit:[Be.dealDamage(w.Sonic,1),Be.dealDamage(w.Electricity,1)]})]},{id:"elemental-air-action-2",name:"Step Of The Tempest",prerequisites:[],parameters:[Pe.burst(S.Combatants,Number.MAX_VALUE,5)],effects:[Be.forceMovement(K.BesideTarget,0),Be.attack({weapon:!1,skill:C.Brawl,trait:x.Endurance,skillBonus:0,hit:[Be.dealDamage(w.Cold,1),Be.forceMovement(K.Push,1)]})]}]}),$.earthElemental=()=>({id:"species-elemental-earth",name:"Earth Elemental",packID:p.elements().id,description:"Earth elementals are slow but unstoppable.",type:N.Monster,size:1,quirks:[],startingFeatures:[J.createTraitFeature("elemental-earth-start-1",x.Endurance,2),J.createSkillFeature("elemental-earth-start-2",C.Brawl,2),J.createDamageBonusFeature("elemental-earth-start-3",w.Impact,2),J.createTraitFeature("elemental-earth-start-4",x.Speed,-1),J.createDamageResistFeature("elemental-earth-start-5",w.Impact,5)],features:[J.createTraitFeature("elemental-earth-feature-1",x.Endurance,1),J.createSkillFeature("elemental-earth-feature-2",C.Brawl,2),J.createDamageBonusFeature("elemental-earth-feature-3",w.Impact,2),J.createAuraDamageFeature("elemental-earth-feature-4",A.AutoDamage,w.Impact,1)],actions:[{id:"elemental-earth-action-1",name:"Earthbind",prerequisites:[],parameters:[Pe.burst(S.Enemies,1,10)],effects:[Be.attack({weapon:!1,skill:C.Brawl,trait:x.Endurance,skillBonus:0,hit:[Be.addCondition(G.createTraitPenaltyCondition(x.Endurance,5,x.Speed)),Be.addCondition(G.createMovementPenaltyCondition(x.Endurance,5))]})]},{id:"elemental-earth-action-2",name:"Rockblast",prerequisites:[],parameters:[Pe.burst(S.Enemies,1,10)],effects:[Be.attack({weapon:!1,skill:C.Brawl,trait:x.Speed,skillBonus:0,hit:[Be.dealDamage(w.Impact,3),Be.knockDown()]})]},{id:"elemental-earth-action-3",name:"Earthquake",prerequisites:[],parameters:[Pe.adjacent(S.Combatants,Number.MAX_VALUE)],effects:[Be.attack({weapon:!1,skill:C.Brawl,trait:x.Endurance,skillBonus:0,hit:[Be.dealDamage(w.Impact,1),Be.forceMovement(K.Push,1),Be.knockDown()]})]}]}),$.fireElemental=()=>({id:"species-elemental-fire",name:"Fire Elemental",packID:p.elements().id,description:"Hot blooded and quick to anger, these humanoids are made of living fire.",type:N.Monster,size:1,quirks:[P.Amorphous],startingFeatures:[J.createTraitFeature("elemental-fire-start-1",x.Speed,1),J.createSkillFeature("elemental-fire-start-2",C.Brawl,2),J.createDamageBonusFeature("elemental-fire-start-3",w.Fire,2),J.createDamageResistFeature("elemental-fire-start-4",w.Fire,5)],features:[J.createTraitFeature("elemental-fire-feature-1",x.Speed,1),J.createSkillFeature("elemental-fire-feature-2",C.Brawl,2),J.createDamageBonusFeature("elemental-fire-feature-3",w.Fire,2),J.createAuraDamageFeature("elemental-fire-feature-4",A.AutoDamage,w.Fire,1)],actions:[{id:"elemental-fire-action-1",name:"Volcanic Flare",prerequisites:[],parameters:[Pe.adjacent(S.Enemies,1)],effects:[Be.attack({weapon:!1,skill:C.Brawl,trait:x.Endurance,skillBonus:0,hit:[Be.dealDamage(w.Fire,1),Be.dealDamage(w.Light,1)]})]},{id:"elemental-fire-action-2",name:"Hurl Fire",prerequisites:[],parameters:[Pe.burst(S.Enemies,1,5)],effects:[Be.attack({weapon:!1,skill:C.Brawl,trait:x.Speed,skillBonus:2,hit:[Be.dealDamage(w.Fire,2)]})]},{id:"elemental-fire-action-3",name:"Immolation",prerequisites:[Ie.wound()],parameters:[Pe.burst(S.Combatants,Number.MAX_VALUE,2)],effects:[Be.attack({weapon:!1,skill:C.Brawl,trait:x.Endurance,skillBonus:0,hit:[Be.dealDamage(w.Fire,3)]})]}]}),$.waterElemental=()=>({id:"species-elemental-water",name:"Water Elemental",packID:p.elements().id,description:"Humanoids made of flowing, living water.",type:N.Monster,size:1,quirks:[P.Amorphous],startingFeatures:[J.createTraitFeature("elemental-water-start-1",x.Speed,1),J.createSkillFeature("elemental-water-start-2",C.Brawl,2),J.createDamageBonusFeature("elemental-water-start-3",w.Impact,2),J.createDamageResistFeature("elemental-water-start-4",w.Impact,5)],features:[J.createTraitFeature("elemental-water-feature-1",x.Speed,1),J.createSkillFeature("elemental-water-feature-2",C.Brawl,2),J.createDamageBonusFeature("elemental-water-feature-3",w.Impact,2)],actions:[{id:"elemental-water-action-1",name:"Tsunami",prerequisites:[],parameters:[Pe.adjacent(S.Combatants,Number.MAX_VALUE)],effects:[Be.attack({weapon:!1,skill:C.Brawl,trait:x.Endurance,skillBonus:0,hit:[Be.dealDamage(w.Impact,2),Be.forceMovement(K.Push,1),Be.knockDown()]})]},{id:"elemental-water-action-2",name:"Waterspout",prerequisites:[],parameters:[Pe.burst(S.Enemies,1,5)],effects:[Be.attack({weapon:!1,skill:C.Brawl,trait:x.Speed,skillBonus:2,hit:[Be.dealDamage(w.Impact,2),Be.knockDown()]})]}]}),$.bear=()=>({id:"species-bear",name:"Bear",packID:p.beasts().id,description:"A huge, powerful mammal.",type:N.Monster,size:2,quirks:[P.Beast],startingFeatures:[J.createTraitFeature("bear-start-1",x.Endurance,1),J.createSkillFeature("bear-start-2",C.Brawl,2),J.createDamageCategoryBonusFeature("bear-start-3",y.Physical,1)],features:[J.createTraitFeature("bear-feature-1",x.Endurance,1),J.createSkillFeature("bear-feature-2",C.Brawl,2),J.createDamageCategoryBonusFeature("bear-feature-3",y.Physical,1)],actions:[{id:"bear-action-1",name:"Bite",prerequisites:[],parameters:[Pe.adjacent(S.Enemies,1)],effects:[Be.attack({weapon:!1,skill:C.Brawl,trait:x.Speed,skillBonus:0,hit:[Be.dealDamage(w.Piercing,3)]})]},{id:"bear-action-2",name:"Swipe",prerequisites:[],parameters:[Pe.adjacent(S.Enemies,1)],effects:[Be.attack({weapon:!1,skill:C.Brawl,trait:x.Speed,skillBonus:0,hit:[Be.dealDamage(w.Edged,4)]})]},{id:"bear-action-3",name:"Hug",prerequisites:[],parameters:[Pe.adjacent(S.Enemies,1)],effects:[Be.attack({weapon:!1,skill:C.Brawl,trait:x.Endurance,skillBonus:0,hit:[Be.dealDamage(w.Impact,4)]})]}]}),$.giantSpider=()=>({id:"species-giant-spider",name:"Giant Spider",packID:p.beasts().id,description:"Venomous insects with eight legs.",type:N.Monster,size:2,quirks:[P.Beast],startingFeatures:[J.createSkillFeature("giant-spider-start-1",C.Brawl,2),J.createDamageBonusFeature("giant-spider-start-2",w.Poison,2)],features:[J.createSkillFeature("giant-spider-feature-1",C.Brawl,2),J.createDamageBonusFeature("giant-spider-feature-2",w.Poison,2)],actions:[{id:"giant-spider-action-1",name:"Bite",prerequisites:[],parameters:[Pe.adjacent(S.Enemies,1)],effects:[Be.attack({weapon:!1,skill:C.Brawl,trait:x.Endurance,skillBonus:0,hit:[Be.dealDamage(w.Edged,2),Be.dealDamage(w.Poison,3)]})]},{id:"giant-spider-action-2",name:"Web",prerequisites:[],parameters:[Pe.burst(S.Enemies,Number.MAX_VALUE,5)],effects:[Be.attack({weapon:!1,skill:C.Brawl,trait:x.Endurance,skillBonus:0,hit:[Be.addCondition(G.createTraitPenaltyCondition(x.Endurance,2,x.Speed)),Be.addCondition(G.createMovementPenaltyCondition(x.Endurance,5))]})]},{id:"giant-spider-action-3",name:"Cocoon",prerequisites:[],parameters:[Pe.adjacent(S.Enemies,1)],effects:[Be.addCondition(G.createTraitPenaltyCondition(x.Endurance,3,x.Speed)),Be.addCondition(G.createMovementPenaltyCondition(x.Endurance,5))]}]}),$.ratSwarm=()=>({id:"species-rat-swarm",name:"Rat Swarm",packID:p.beasts().id,description:"A swarm of large rodents.",type:N.Monster,size:2,quirks:[P.Beast,P.Swarm],startingFeatures:[J.createSkillFeature("rat-swarm-start-1",C.Brawl,2),J.createTraitFeature("rat-swarm-start-2",x.Endurance,1)],features:[J.createSkillFeature("rat-swarm-feature-1",C.Brawl,2),J.createTraitFeature("rat-swarm-feature-2",x.Endurance,1)],actions:[{id:"rat-swarm-action-1",name:"Bite",prerequisites:[],parameters:[Pe.adjacent(S.Enemies,Number.MAX_VALUE)],effects:[Be.attack({weapon:!1,skill:C.Brawl,trait:x.Speed,skillBonus:0,hit:[Be.dealDamage(w.Piercing,3),Be.dealDamage(w.Poison,1)]})]}]}),$.vespineSwarm=()=>({id:"species-vespine-swarm",name:"Vespine Swarm",packID:p.beasts().id,description:"A swarm of fast-moving flying insects.",type:N.Monster,size:2,quirks:[P.Beast,P.Swarm],startingFeatures:[J.createSkillFeature("vespine-swarm-start-1",C.Brawl,2),J.createTraitFeature("vespine-swarm-start-2",x.Speed,1),J.createDamageBonusFeature("vespine-swarm-start-3",w.Poison,1)],features:[J.createSkillFeature("vespine-swarm-feature-1",C.Brawl,2),J.createTraitFeature("vespine-swarm-feature-2",x.Speed,1),J.createDamageBonusFeature("vespine-swarm-feature-3",w.Poison,1)],actions:[{id:"vespine-swarm-action-1",name:"Follow Scent",prerequisites:[],parameters:[Pe.burst(S.Enemies,1,3)],effects:[Be.forceMovement(K.BesideTarget,1),Be.takeAnotherAction()]},{id:"vespine-swarm-action-2",name:"Sting",prerequisites:[],parameters:[Pe.adjacent(S.Enemies,Number.MAX_VALUE)],effects:[Be.attack({weapon:!1,skill:C.Brawl,trait:x.Speed,skillBonus:0,hit:[Be.dealDamage(w.Poison,1)]})]}]}),$.wolf=()=>({id:"species-wolf",name:"Wolf",packID:p.beasts().id,description:"A large canine that hunts in packs.",type:N.Monster,size:1,quirks:[P.Beast],startingFeatures:[J.createTraitFeature("wolf-start-1",x.Endurance,1),J.createSkillFeature("wolf-start-2",C.Brawl,2)],features:[J.createTraitFeature("wolf-feature-1",x.Endurance,1),J.createSkillFeature("wolf-feature-2",C.Brawl,2)],actions:[{id:"wolf-action-1",name:"Bite",prerequisites:[],parameters:[Pe.adjacent(S.Enemies,1)],effects:[Be.attack({weapon:!1,skill:C.Brawl,trait:x.Speed,skillBonus:0,hit:[Be.dealDamage(w.Piercing,3)]})]},{id:"wolf-action-2",name:"Pounce",prerequisites:[],parameters:[Pe.burst(S.Enemies,1,3)],effects:[Be.attack({weapon:!1,skill:C.Brawl,trait:x.Speed,skillBonus:0,hit:[Be.dealDamage(w.Piercing,2),Be.knockDown()]})]},{id:"wolf-action-3",name:"Pack Tactics",prerequisites:[],parameters:[Pe.burst(S.Allies,1,5)],effects:[Be.commandMove(),Be.takeAnotherAction()]}]}),$.skeleton=()=>({id:"species-skeleton",name:"Skeleton",packID:p.undead().id,description:"Re-animated bones.",type:N.Monster,size:1,quirks:[P.Undead],startingFeatures:[J.createSkillFeature("skeleton-start-1",C.Brawl,2),J.createDamageResistFeature("skeleton-start-2",w.Piercing,2),J.createDamageCategoryResistFeature("skeleton-start-3",y.Corruption,1)],features:[J.createSkillFeature("skeleton-feature-1",C.Brawl,2),J.createDamageResistFeature("skeleton-feature-2",w.Piercing,2),J.createDamageCategoryResistFeature("skeleton-feature-3",y.Corruption,1)],actions:[{id:"skeleton-action-1",name:"Bash",prerequisites:[],parameters:[Pe.adjacent(S.Enemies,1)],effects:[Be.attack({weapon:!1,skill:C.Brawl,trait:x.Speed,skillBonus:0,hit:[Be.dealDamage(w.Impact,3),Be.dealDamage(w.Decay,2)]})]},{id:"skeleton-action-2",name:"Reassemble",prerequisites:[],parameters:[Pe.self()],effects:[Be.healDamage(3),Be.healWounds(1)]},{id:"skeleton-action-3",name:"Boneshard",prerequisites:[],parameters:[Pe.burst(S.Enemies,1,5)],effects:[Be.attack({weapon:!1,skill:C.Brawl,trait:x.Speed,skillBonus:0,hit:[Be.dealDamage(w.Piercing,3),Be.dealDamage(w.Decay,2)]})]}]}),$.vampire=()=>({id:"species-vampire",name:"Vampire",packID:p.undead().id,description:"The blood is the life.",type:N.Monster,size:1,quirks:[P.Undead],startingFeatures:[J.createSkillFeature("vampire-start-1",C.Brawl,2),J.createSkillFeature("vampire-start-2",C.Presence,2),J.createDamageCategoryResistFeature("vampire-start-3",y.Corruption,1)],features:[J.createSkillFeature("vampire-feature-1",C.Brawl,2),J.createSkillFeature("vampire-feature-2",C.Presence,2),J.createDamageCategoryResistFeature("vampire-feature-3",y.Corruption,1)],actions:[{id:"vampire-action-1",name:"Speed Of The Grave",prerequisites:[],parameters:[Pe.burst(S.Enemies,1,10)],effects:[Be.forceMovement(K.BesideTarget,0),Be.takeAnotherAction()]},{id:"vampire-action-2",name:"Vampiric Bite",prerequisites:[],parameters:[Pe.adjacent(S.Enemies,1)],effects:[Be.attack({weapon:!1,skill:C.Brawl,trait:x.Resolve,skillBonus:0,hit:[Be.dealDamage(w.Piercing,1),Be.dealDamage(w.Decay,1),Be.toSelf([Be.healDamage(1),Be.healWounds(1)])]})]},{id:"vampire-action-3",name:"Mesmerize",prerequisites:[],parameters:[Pe.adjacent(S.Enemies,1)],effects:[Be.attack({weapon:!1,skill:C.Presence,trait:x.Resolve,skillBonus:0,hit:[Be.stun()]})]}]}),$.wraith=()=>({id:"species-wraith",name:"Wraith",packID:p.undead().id,description:"A floating, spectral apparition.",type:N.Monster,size:1,quirks:[P.Undead,P.Amorphous],startingFeatures:[J.createSkillFeature("wraith-start-1",C.Presence,2),J.createDamageCategoryResistFeature("wraith-start-2",y.Corruption,1),J.createTraitFeature("wraith-start-3",x.Resolve,1)],features:[J.createSkillFeature("wraith-feature-1",C.Presence,2),J.createDamageCategoryResistFeature("wraith-feature-2",y.Corruption,1),J.createTraitFeature("wraith-feature-3",x.Resolve,1)],actions:[{id:"wraith-action-1",name:"Spectral Visage",prerequisites:[],parameters:[Pe.burst(S.Enemies,1,10)],effects:[Be.attack({weapon:!1,skill:C.Presence,trait:x.Resolve,skillBonus:0,hit:[Be.forceMovement(K.Push,1),Be.stun()]})]},{id:"wraith-action-2",name:"Life Drain",prerequisites:[],parameters:[Pe.adjacent(S.Enemies,1)],effects:[Be.attack({weapon:!1,skill:C.Presence,trait:x.Resolve,skillBonus:0,hit:[Be.dealDamage(w.Decay,2),Be.addCondition(G.createSkillCategoryPenaltyCondition(x.Resolve,3,k.Mental)),Be.addCondition(G.createSkillCategoryPenaltyCondition(x.Resolve,3,k.Physical))]})]}]}),$.zombie=()=>({id:"species-zombie",name:"Zombie",packID:p.undead().id,description:"A re-animated corpse.",type:N.Monster,size:1,quirks:[P.Mindless,P.Undead],startingFeatures:[J.createSkillFeature("zombie-start-1",C.Brawl,2),J.createDamageCategoryResistFeature("zombie-start-2",y.Corruption,1),J.createTraitFeature("zombie-start-3",x.Endurance,1)],features:[J.createSkillFeature("zombie-feature-1",C.Brawl,2),J.createDamageCategoryResistFeature("zombie-feature-2",y.Corruption,1),J.createTraitFeature("zombie-feature-3",x.Endurance,1)],actions:[{id:"zombie-action-1",name:"Rend",prerequisites:[],parameters:[Pe.adjacent(S.Enemies,1)],effects:[Be.attack({weapon:!1,skill:C.Brawl,trait:x.Endurance,skillBonus:0,hit:[Be.dealDamage(w.Piercing,2),Be.dealDamage(w.Decay,2)]})]},{id:"zombie-action-2",name:"Grave Rot",prerequisites:[],parameters:[Pe.adjacent(S.Combatants,Number.MAX_VALUE)],effects:[Be.attack({weapon:!1,skill:C.Brawl,trait:x.Endurance,skillBonus:0,hit:[Be.dealDamage(w.Decay,3),Be.toSelf([Be.healDamage(1)])]})]}]}),$.banshee=()=>({id:"species-banshee",name:"Banshee",packID:p.fae().id,description:"A fae spirit whose unearthly wail presages death.",type:N.Monster,size:1,quirks:[P.Undead],startingFeatures:[J.createSkillFeature("banshee-start-1",C.Presence,2),J.createDamageBonusFeature("banshee-start-2",w.Sonic,1),J.createTraitFeature("banshee-start-3",x.Resolve,1)],features:[J.createSkillFeature("banshee-feature-1",C.Presence,2),J.createDamageBonusFeature("banshee-feature-2",w.Sonic,1),J.createTraitFeature("banshee-feature-3",x.Resolve,1)],actions:[{id:"banshee-action-1",name:"Deathly Scream",prerequisites:[],parameters:[Pe.burst(S.Enemies,1,5)],effects:[Be.attack({weapon:!1,skill:C.Presence,trait:x.Resolve,skillBonus:0,hit:[Be.dealDamage(w.Sonic,4),Be.forceMovement(K.Push,1),Be.addCondition(G.createMovementPenaltyCondition(x.Resolve,3))]})]},{id:"banshee-action-2",name:"Keening Wail",prerequisites:[],parameters:[Pe.burst(S.Enemies,Number.MAX_VALUE,5)],effects:[Be.attack({weapon:!1,skill:C.Presence,trait:x.Resolve,skillBonus:0,hit:[Be.dealDamage(w.Sonic,3)]})]},{id:"banshee-action-3",name:"Siren Call",prerequisites:[],parameters:[Pe.burst(S.Enemies,1,5)],effects:[Be.attack({weapon:!1,skill:C.Presence,trait:x.Resolve,skillBonus:0,hit:[Be.commandAction(),Be.stun()]})]}]}),$.crocodilian=()=>({id:"species-crocodilian",name:"Crocodilian",packID:p.coldBlood().id,description:"An ancient species of humanoid crocodiles with armored skin.",type:N.Monster,size:1,quirks:[],startingFeatures:[J.createSkillFeature("crocodilian-start-1",C.Brawl,2),J.createDamageCategoryResistFeature("crocodilian-start-2",y.Physical,2),J.createDamageCategoryResistFeature("crocodilian-start-3",y.Energy,2)],features:[J.createSkillFeature("crocodilian-feature-1",C.Brawl,2),J.createDamageCategoryResistFeature("crocodilian-feature-2",y.Physical,2),J.createDamageCategoryResistFeature("crocodilian-feature-3",y.Energy,2)],actions:[{id:"crocodilian-action-1",name:"Snapjaw",prerequisites:[],parameters:[Pe.adjacent(S.Enemies,1)],effects:[Be.attack({weapon:!1,skill:C.Brawl,trait:x.Speed,skillBonus:0,hit:[Be.dealDamage(w.Piercing,3)]})]},{id:"crocodilian-action-2",name:"Tail Swipe",prerequisites:[],parameters:[Pe.adjacent(S.Combatants,Number.MAX_VALUE)],effects:[Be.attack({weapon:!1,skill:C.Brawl,trait:x.Speed,skillBonus:0,hit:[Be.dealDamage(w.Impact,3),Be.forceMovement(K.Push,1),Be.knockDown()]})]}]}),$.naga=()=>({id:"species-naga",name:"Naga",packID:p.coldBlood().id,description:"A serpentine humanoid.",type:N.Monster,size:1,quirks:[],startingFeatures:[J.createTraitFeature("naga-start-1",x.Speed,1),J.createSkillFeature("naga-start-2",C.Brawl,2),J.createSkillFeature("naga-start-3",C.Presence,2)],features:[J.createTraitFeature("naga-feature-1",x.Speed,1),J.createSkillFeature("naga-feature-2",C.Brawl,2),J.createSkillFeature("naga-feature-3",C.Presence,2),J.createDamageBonusFeature("naga-feature-4",w.Poison,2),J.createDamageResistFeature("naga-feature-5",w.Poison,2)],actions:[{id:"naga-action-1",name:"Venomous Bite",prerequisites:[],parameters:[Pe.adjacent(S.Enemies,1)],effects:[Be.attack({weapon:!1,skill:C.Brawl,trait:x.Speed,skillBonus:0,hit:[Be.dealDamage(w.Poison,4)]})]},{id:"naga-action-2",name:"Constrict",prerequisites:[],parameters:[Pe.adjacent(S.Enemies,1)],effects:[Be.attack({weapon:!1,skill:C.Brawl,trait:x.Endurance,skillBonus:0,hit:[Be.dealDamage(w.Impact,4)]})]},{id:"naga-action-3",name:"Beguiling Gaze",prerequisites:[],parameters:[Pe.burst(S.Enemies,1,8)],effects:[Be.attack({weapon:!1,skill:C.Presence,trait:x.Resolve,skillBonus:0,hit:[Be.commandAction()]})]}]}),$.getList=()=>{const e=[Z.colossus(),Z.gnoll(),Z.goblin(),Z.medusa(),Z.orc(),Z.ratfolk(),Z.shadowborn(),Z.troll(),Z.airElemental(),Z.earthElemental(),Z.fireElemental(),Z.waterElemental(),Z.bear(),Z.giantSpider(),Z.ratSwarm(),Z.scarab(),Z.vespineSwarm(),Z.wolf(),Z.skeleton(),Z.vampire(),Z.wraith(),Z.zombie(),Z.banshee(),Z.crocodilian(),Z.naga()];return e.forEach((e=>{e.startingFeatures=d.sort(e.startingFeatures,(e=>J.getFeatureTitle(e))),e.features=d.sort(e.features,(e=>J.getFeatureTitle(e))),e.actions=d.sort(e.actions,(e=>e.name))})),d.sort(e,(e=>e.name))};let ee=function(e){return e.Self="Self",e.Adjacent="Adjacent",e.Burst="Burst",e.Weapon="Weapon",e}({}),te=function(e){return e.Clear="Clear",e.Obstructed="Obstructed",e}({}),ne=function(e){return e.Undead="undead",e.Beast="beast",e.Elemental="elemental",e}({});var ae,re;class se{}ae=se,se.getFloorBlob=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Math.random;const a=[],r=e.find((e=>e.x===t.x&&e.y===t.y));for(r&&a.push(r);a.length<5||0!==u.randomNumber(10,n);){let t=e;if(a.length>0&&(t=ae.getAdjacentSquares(e,a,["n","e","s","w"])),0===t.length)return a;const r=d.draw(t,n);a.push(r)}return a},se.getWallBlob=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Math.random;const a=[t];for(;a.length<5||0!==u.randomNumber(10,n);){let t=e;if(a.length>0&&(t=ae.getAdjacentWalls(e,a,["n","e","s","w"])),0===t.length)return a;const r=d.draw(t,n);a.push(r)}return a},se.getDimensions=e=>{const t={left:Number.MAX_VALUE,top:Number.MAX_VALUE,right:Number.MIN_VALUE,bottom:Number.MIN_VALUE};return e.forEach((e=>{t.left=Math.min(t.left,e.x),t.top=Math.min(t.top,e.y),t.right=Math.max(t.right,e.x),t.bottom=Math.max(t.bottom,e.y)})),t},se.getAdjacentSquares=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];const a=[],r=n=>{if(!t.find((e=>e.x===n.x&&e.y===n.y))&&!a.find((e=>e.x===n.x&&e.y===n.y))){const t=e.find((e=>e.x===n.x&&e.y===n.y));t&&a.push(t)}};return t.forEach((e=>{if(0===n.length||n.includes("n")){const t={x:e.x,y:e.y-1};r(t)}if(0===n.length||n.includes("ne")){const t={x:e.x+1,y:e.y-1};r(t)}if(0===n.length||n.includes("e")){const t={x:e.x+1,y:e.y};r(t)}if(0===n.length||n.includes("se")){const t={x:e.x+1,y:e.y+1};r(t)}if(0===n.length||n.includes("s")){const t={x:e.x,y:e.y+1};r(t)}if(0===n.length||n.includes("sw")){const t={x:e.x-1,y:e.y+1};r(t)}if(0===n.length||n.includes("w")){const t={x:e.x-1,y:e.y};r(t)}if(0===n.length||n.includes("nw")){const t={x:e.x-1,y:e.y-1};r(t)}})),a},se.getAdjacentWalls=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];const a=[],r=n=>{t.find((e=>e.x===n.x&&e.y===n.y))||a.find((e=>e.x===n.x&&e.y===n.y))||e.find((e=>e.x===n.x&&e.y===n.y))||a.push(n)};return t.forEach((e=>{if(0===n.length||n.includes("n")){const t={x:e.x,y:e.y-1};r(t)}if(0===n.length||n.includes("ne")){const t={x:e.x+1,y:e.y-1};r(t)}if(0===n.length||n.includes("e")){const t={x:e.x+1,y:e.y};r(t)}if(0===n.length||n.includes("se")){const t={x:e.x+1,y:e.y+1};r(t)}if(0===n.length||n.includes("s")){const t={x:e.x,y:e.y+1};r(t)}if(0===n.length||n.includes("sw")){const t={x:e.x-1,y:e.y+1};r(t)}if(0===n.length||n.includes("w")){const t={x:e.x-1,y:e.y};r(t)}if(0===n.length||n.includes("nw")){const t={x:e.x-1,y:e.y-1};r(t)}})),a},se.getCenter=e=>({x:d.mean(e,(e=>e.x)),y:d.mean(e,(e=>e.y))}),se.getDistanceAny=(e,t)=>{const n=e.flatMap((e=>t.map((t=>ae.getDistance(e,t)))));return Math.min(...n)},se.getDistance=(e,t)=>{const n=Math.pow(e.x-t.x,2),a=Math.pow(e.y-t.y,2),r=Math.sqrt(n+a);return Math.floor(r)},se.getDirection=(e,t)=>{const n=-t.y- -e.y,a=t.x-e.x;return 90-180*Math.atan2(n,a)/Math.PI},se.canSeeAny=(e,t,n)=>t.some((t=>n.some((n=>ae.canSee(e,t,n))))),se.visibilityCache=new class{constructor(){this.size=199,this.data=[],this.hash=e=>e.split("").reduce(((e,t)=>e+t.charCodeAt(0)),0)%this.size,this.insert=(e,t)=>{const n=this.hash(e);if(!this.data[n]){const e={};this.data[n]=e}this.data[n][e]=t},this.search=e=>{const t=this.hash(e),n=this.data[t];if(n){const t=n[e];if(void 0!==t)return t}return null},this.reset=()=>{this.data=[]}}},se.canSee=(e,t,n)=>{const a=ae.visibilityCache.search("".concat(t.x," ").concat(t.y," - ").concat(n.x," ").concat(n.y));if(null!==a)return a;const r={x:t.x+.5,y:t.y+.5},s={x:n.x+.5,y:n.y+.5},i=!(e.horizontal.some((e=>D.intersects({a:r,b:s},{a:{x:e.start,y:e.y},b:{x:e.end,y:e.y}})))||e.vertical.some((e=>D.intersects({a:r,b:s},{a:{x:e.x,y:e.start},b:{x:e.x,y:e.end}}))));return ae.visibilityCache.insert("".concat(t.x," ").concat(t.y," - ").concat(n.x," ").concat(n.y),i),ae.visibilityCache.insert("".concat(n.x," ").concat(n.y," - ").concat(t.x," ").concat(t.y),i),i},se.getMapEdges=e=>{const t=[];ae.getAdjacentWalls(e,e,["n"]).forEach((e=>t.push({start:e.x,end:e.x+1,y:e.y+1}))),ae.getAdjacentWalls(e,e,["s"]).forEach((e=>t.push({start:e.x,end:e.x+1,y:e.y})));const n=[];ae.getAdjacentWalls(e,e,["e"]).forEach((e=>n.push({start:e.y,end:e.y+1,x:e.x}))),ae.getAdjacentWalls(e,e,["w"]).forEach((e=>n.push({start:e.y,end:e.y+1,x:e.x+1})));const a=[];t.sort(((e,t)=>e.start-t.start)).forEach((e=>{const t=a.find((t=>t.y===e.y&&t.end===e.start));t?t.end=e.end:a.push(e)}));const r=[];return n.sort(((e,t)=>e.start-t.start)).forEach((e=>{const t=r.find((t=>t.x===e.x&&t.end===e.start));t?t.end=e.end:r.push(e)})),{horizontal:a,vertical:r}};class ie{}re=ie,ie.generateEncounterMap=e=>{se.visibilityCache.reset();const t=[re.generateDungeonMap,re.generateRuinMap,re.generateCavernMap,re.generateStreetMap],n=d.draw(t,e)(400,e);for(;0!==u.randomNumber(3,e);){const t=d.draw(n,e);se.getFloorBlob(n,t,e).forEach((e=>e.type=te.Obstructed))}return re.simplifyMap(n)},ie.generateDungeonMap=(e,t)=>{const n=[];for(;n.length<e;){const e=["n","e","s","w"],a=d.draw(e,t),r=u.randomNumber(3,t),s={width:2!==r||"n"!==a&&"s"!==a?u.dice(2,t):2,height:2!==r||"e"!==a&&"w"!==a?u.dice(2,t):2},i={x:0,y:0};if(n.length>0){const e=se.getAdjacentWalls(n,n,[a]),r=d.draw(e,t);"n"===a&&(r.y-=s.height-1),"w"===a&&(r.x-=s.width-1),i.x=r.x,i.y=r.y}for(let t=i.x;t<i.x+s.width;++t)for(let e=i.y;e<i.y+s.height;++e)if(!n.find((n=>n.x===t&&n.y===e))){const a={x:t,y:e,type:te.Clear};n.push(a)}}return n},ie.generateRuinMap=(e,t)=>{const n=[];for(;n.length<e;){const e=["n","e","s","w"],a=d.draw(e,t);if(u.randomBoolean(t)){const e=u.randomNumber(3,t),r={width:2!==e||"n"!==a&&"s"!==a?u.dice(2,t):2,height:2!==e||"e"!==a&&"w"!==a?u.dice(2,t):2},s={x:0,y:0};if(n.length>0){const e=se.getAdjacentWalls(n,n,[a]),i=d.draw(e,t);"n"===a&&(i.y-=r.height-1),"w"===a&&(i.x-=r.width-1),s.x=i.x,s.y=i.y}for(let t=s.x;t<s.x+r.width;++t)for(let e=s.y;e<s.y+r.height;++e)if(!n.find((n=>n.x===t&&n.y===e))){const a={x:t,y:e,type:te.Clear};n.push(a)}}else{const e=se.getAdjacentWalls(n,n,["n","e","s","w"]);if(e.length>0){const a=d.draw(e,t);se.getWallBlob(n,a,t).forEach((e=>{const t={x:e.x,y:e.y,type:te.Clear};n.push(t)}))}}}return n},ie.generateCavernMap=(e,t)=>{const n=[{x:0,y:0,type:te.Clear}];for(;n.length<e;){const e=se.getAdjacentWalls(n,n,["n","e","s","w"]);if(e.length>0){const a=d.draw(e,t);se.getWallBlob(n,a,t).forEach((e=>{const t={x:e.x,y:e.y,type:te.Clear};n.push(t)}))}}return n},ie.generateStreetMap=(e,t)=>{const n=[],a=[];for(;n.length<e;){const e={x:0,y:0},r=8+u.dice(5,t);if(0===a.length){const s=["n","e","s","w"],i=d.draw(s,t),o={width:"n"===i||"s"===i?3:r,height:"e"===i||"w"===i?3:r};for(let t=e.x;t<e.x+o.width;++t)for(let a=e.y;a<e.y+o.height;++a)if(!n.find((e=>e.x===t&&e.y===a))){const e={x:t,y:a,type:te.Clear};n.push(e)}a.push({x:e.x+1,y:e.y+1,used:{n:"n"===i,e:"e"===i,s:"s"===i,w:"w"===i}}),a.push({x:e.x+o.width-2,y:e.y+o.height-2,used:{n:"s"===i,e:"w"===i,s:"n"===i,w:"e"===i}})}else{const s=d.draw(a,t),i=[];if(s.used.n||i.push("n"),s.used.e||i.push("e"),s.used.s||i.push("s"),s.used.w||i.push("w"),i.length>0){const o=d.draw(i,t);"n"===o&&(e.x=s.x-1,e.y=s.y-(r-2)),"e"===o&&(e.x=s.x-1,e.y=s.y-1),"s"===o&&(e.x=s.x-1,e.y=s.y-1),"w"===o&&(e.x=s.x-(r-2),e.y=s.y-1);const l={width:"n"===o||"s"===o?3:r,height:"e"===o||"w"===o?3:r};for(let t=e.x;t<e.x+l.width;++t)for(let a=e.y;a<e.y+l.height;++a)if(!n.find((e=>e.x===t&&e.y===a))){const e={x:t,y:a,type:te.Clear};n.push(e)}"n"===o&&(s.used.n=!0,a.push({x:s.x,y:s.y-r+3,used:{n:!1,e:!1,s:!0,w:!1}})),"e"===o&&(s.used.e=!0,a.push({x:s.x+r-3,y:s.y,used:{n:!1,e:!1,s:!1,w:!0}})),"s"===o&&(s.used.s=!0,a.push({x:s.x,y:s.y+r-3,used:{n:!0,e:!1,s:!1,w:!1}})),"w"===o&&(s.used.w=!0,a.push({x:s.x-r+3,y:s.y,used:{n:!1,e:!0,s:!1,w:!1}}))}}}return n},ie.simplifyMap=e=>d.distinct(e,(e=>"".concat(e.x," ").concat(e.y)));let oe=function(e){return e.Active="Active",e.Victory="Victory",e.Defeat="Defeat",e.Retreat="Retreat",e}({});var le;class ce{}le=ce,ce.context=null,ce.volume=.5,ce.dong={decoding:!1,array:null,audio:null},ce.play=e=>{if(!e.decoding)try{le.context||(le.context=new AudioContext),e.audio?le.playDecoded(e.audio):e.array&&(e.decoding=!0,le.context.decodeAudioData(e.array,(t=>{e.decoding=!1,e.array=null,e.audio=t,le.playDecoded(e.audio)}),(()=>{})))}catch{}},ce.playDecoded=e=>{if(le.context)try{const t=le.context.createGain();t.gain.value=le.volume;const n=le.context.createBufferSource();n.buffer=e,n.connect(t).connect(le.context.destination),n.start()}catch{}};let ue=function(e){return e.Combatant="combatant",e.Rank="rank",e.Result="result",e.Text="text",e}({});var de,pe,he,me,fe,ge,ye,be,ve,ke,xe,Se;class we{}de=we,we.combatant=e=>({type:ue.Combatant,data:e.id}),we.rank=(e,t)=>({type:ue.Rank,data:"".concat(e," (").concat(t,")")}),we.result=e=>({type:ue.Result,data:e.toString()}),we.text=e=>({type:ue.Text,data:e}),we.log=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const a={id:D.guid(),timestamp:Date.now(),parts:t};e.log.unshift(a),n&&(de.logMessages.push(a),de.logTimeout&&(clearTimeout(de.logTimeout),de.logTimeout=null),de.logTimeout=setTimeout((()=>{de.handleLogMessage&&(de.handleLogMessage(de.logMessages),de.logMessages=[])}),250))},we.logState=(e,t)=>{de.log(e,[de.combatant(t),de.text("is ".concat(t.combat.state))],!0)},we.getLogMessage=(e,t)=>e?t.parts.map((t=>{if(t.type===ue.Combatant){const n=Ce.getCombatant(e,t.data);return n?n.name:"[unknown combatant]"}return t.data})).join(" "):"",we.logMessages=[],we.logTimeout=null,we.handleLogMessage=null;class Ce{}pe=Ce,Ce.getCombatantSquares=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const a=[];n||(n=t.combat.position);const r=n.x,s=r+t.size-1,i=n.y,o=i+t.size-1;for(let l=r;l<=s;++l)for(let e=i;e<=o;++e)a.push({x:l,y:e});return a},Ce.getCombatantAuraSquares=(e,t)=>{const n=[],a=t.combat.position.x-1,r=a+t.size+1,s=t.combat.position.y-1,i=s+t.size+1;for(let l=a;l<=r;++l)for(let e=s;e<=i;++e)n.push({x:l,y:e});const o=pe.getCombatantSquares(e,t);return n.filter((e=>!o.find((t=>t.x===e.x&&t.y===e.y))))},Ce.getSquareIsEmpty=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];const a=[];return e.combatants.filter((e=>!n.includes(e))).filter((e=>e.combat.state!==I.Dead)).forEach((t=>{const n=pe.getCombatantSquares(e,t);a.push(...n)})),e.loot.forEach((e=>a.push(e.position))),e.mapSquares.find((e=>e.x===t.x&&e.y===t.y))&&!a.find((e=>e.x===t.x&&e.y===t.y))},Ce.rollInitiative=e=>{e.round+=1,e.combatants.forEach((t=>{t.combat.initiative=Number.MIN_VALUE;const n=pe.getTraitRank(e,t,x.Speed);t.combat.initiative=u.dice(n)})),pe.sortInitiative(e)},Ce.sortInitiative=e=>{e.combatants.sort(((t,n)=>{let a=n.combat.initiative-t.combat.initiative;if(0===a){const r=pe.getTraitRank(e,t,x.Speed);a=pe.getTraitRank(e,n,x.Speed)-r}if(0===a){const e=t.faction===N.Hero?1:0;a=(n.faction===N.Hero?1:0)-e}return 0===a&&(a=t.name<n.name?-1:1),a}))},Ce.startOfTurn=(e,t)=>{if(we.log(e,[we.text("Starting turn for "),we.combatant(t)]),t.combat.current=!0,t.combat.hidden=0,t.combat.senses=0,t.combat.movement=0,t.combat.trail=[],t.combat.actions=[],t.combat.selectedAction=null,t.combat.intents=null,t.combat.state===I.Unconscious){const n=pe.getTraitRank(e,t,x.Resolve),a=u.dice(n);we.log(e,[we.combatant(t),we.text("is unconscious: rolls"),we.rank("Resolve",n),we.text("and gets"),we.result(a)]),a<=1?pe.kill(e,t):a>=10&&t.quirks.includes(P.Undead)?(t.combat.wounds=n-1,t.combat.state=I.Prone,we.logState(e,t)):we.log(e,[we.combatant(t),we.text("remains unconscious")])}const n=[].concat(t.combat.conditions).concat(pe.getAuraConditions(e,t));n.forEach((n=>{we.log(e,[we.combatant(t),we.text("is currently affected by"),we.rank(G.getConditionDescription(n),n.rank)])})),t.combat.stunned&&we.log(e,[we.combatant(t),we.text("is stunned")]),n.filter((e=>e.type===A.AutoHeal)).forEach((n=>{we.log(e,[we.text("Healing condition (".concat(n.rank,")"))]),pe.healDamage(e,t,n.rank)})),n.filter((e=>e.type===A.AutoDamage)).forEach((n=>{we.log(e,[we.text("Damage condition (".concat(n.details.damage,", ").concat(n.rank,")"))]);const a=u.dice(n.rank);pe.takeDamage(e,t,a,n.details.damage)})),t.combat.state!==I.Standing&&t.combat.state!==I.Prone||(t.combat.senses=u.dice(pe.getSkillRank(e,t,C.Perception)),t.combat.movement=u.dice(pe.getTraitRank(e,t,x.Speed)),n.filter((e=>e.type===A.MovementBonus)).forEach((n=>{we.log(e,[we.text("Movement bonus condition (".concat(n.rank,")"))]),t.combat.movement+=u.dice(n.rank)})),n.filter((e=>e.type===A.MovementPenalty)).forEach((n=>{we.log(e,[we.text("Movement penalty condition (".concat(n.rank,")"))]),t.combat.movement=Math.max(0,t.combat.movement-n.rank)})),pe.drawActions(e,t)),t.combat.conditions.forEach((n=>{if(G.getConditionIsBeneficial(n))n.rank-=1,we.log(e,[we.text("Condition '".concat(G.getConditionDescription(n),"' reduced to rank ").concat(n.rank))]);else{const a=pe.getTraitRank(e,t,n.trait);u.dice(a)>=u.dice(n.rank)?n.rank=0:n.rank-=1,we.log(e,[we.text("Condition '".concat(G.getConditionDescription(n),"' reduced to rank ").concat(n.rank))])}})),t.combat.conditions=t.combat.conditions.filter((e=>e.rank>0));const a=pe.getTraitRank(e,t,x.Resolve);t.combat.wounds===a&&(t.combat.state!==I.Standing&&t.combat.state!==I.Prone||(t.combat.state=I.Unconscious,we.logState(e,t))),t.combat.wounds>a&&(t.combat.state!==I.Standing&&t.combat.state!==I.Prone&&t.combat.state!==I.Unconscious||pe.kill(e,t))},Ce.endTurn=e=>{e.combatants.filter((e=>e.combat.current)).forEach((t=>{we.log(e,[we.text("Ending turn for "),we.combatant(t)]),t.combat.current=!1,t.combat.senses=0,t.combat.movement=0,t.combat.trail=[],t.combat.actions=[],t.combat.selectedAction=null,t.combat.intents=null,t.combat.stunned=!1,t.combat.initiative=Number.MIN_VALUE}));const t=pe.getActiveCombatants(e),n=t.length>0?t[0]:null;n&&pe.startOfTurn(e,n)},Ce.drawActions=(e,t)=>{const n=X.getActionDeck(t);switch(t.faction){case N.Hero:t.combat.actions=d.shuffle(n).splice(0,3),t.combat.actions.push(...Y.getBaseActions()),t.combat.selectedAction=null;break;case N.Monster:t.combat.actions=n,t.combat.actions.push(...Y.getBaseActions()),pe.checkActionParameters(e,t),t.combat.selectedAction=null}},Ce.selectAction=(e,t,n)=>{t.combat.selectedAction={action:n,used:!1},pe.checkActionParameters(e,t,!1)},Ce.deselectAction=(e,t)=>{t.combat.selectedAction=null,pe.checkActionParameters(e,t,!1)},Ce.checkActionParameters=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];t.combat.actions.forEach((a=>{a.parameters.forEach((r=>{switch(r.id){case"weapon":Fe.checkWeaponParameter(r,t);break;case"origin":Fe.checkOriginParameter(r,e,t,a);break;case"targets":Fe.checkTargetParameter(r,e,t,a,n)}}))}))},Ce.runAction=(e,t)=>{if(null!==t.combat.selectedAction){const n=t.combat.selectedAction.action;t.combat.selectedAction.used=!0,we.log(e,[we.combatant(t),we.text("selects ".concat(n.name))]),n.effects.forEach((a=>Be.run(a,e,t,n.parameters)))}},Ce.getMoveCost=(e,t,n,a)=>{const r=pe.getCombatantSquares(e,t,n),s=r.map((e=>{const t={x:e.x,y:e.y};switch(a){case"n":t.y-=1;break;case"ne":t.x+=1,t.y-=1;break;case"e":t.x+=1;break;case"se":t.x+=1,t.y+=1;break;case"s":t.y+=1;break;case"sw":t.x-=1,t.y+=1;break;case"w":t.x-=1;break;case"nw":t.x-=1,t.y-=1}return t})),i=s.map((t=>{var n;return null!==(n=e.mapSquares.find((e=>e.x===t.x&&e.y===t.y)))&&void 0!==n?n:null})).filter((e=>null!==e));if(i.length!==s.length)return Number.MAX_VALUE;if(s.some((n=>!pe.getSquareIsEmpty(e,n,[t]))))return Number.MAX_VALUE;let o=1;i.some((e=>e.type===te.Obstructed))&&(o+=1);const l=[];return e.combatants.filter((e=>e.faction!==t.faction)).filter((e=>e.combat.state===I.Standing)).filter((e=>!e.combat.stunned)).forEach((t=>{const n=pe.getCombatantSquares(e,t),a=se.getAdjacentSquares(e.mapSquares,n);l.push(...a)})),r.some((e=>l.find((t=>t.x===e.x&&t.y===e.y))))&&(o+=4),(t.combat.state===I.Prone||t.combat.hidden>0)&&(o*=2),o},Ce.getPossibleMoveSquares=(e,t)=>[{dir:"n",x:t.combat.position.x,y:t.combat.position.y-1},{dir:"ne",x:t.combat.position.x+1,y:t.combat.position.y-1},{dir:"e",x:t.combat.position.x+1,y:t.combat.position.y},{dir:"se",x:t.combat.position.x+1,y:t.combat.position.y+1},{dir:"s",x:t.combat.position.x,y:t.combat.position.y+1},{dir:"sw",x:t.combat.position.x-1,y:t.combat.position.y+1},{dir:"w",x:t.combat.position.x-1,y:t.combat.position.y},{dir:"nw",x:t.combat.position.x-1,y:t.combat.position.y-1}].filter((n=>pe.getMoveCost(e,t,t.combat.position,n.dir)!==Number.MAX_VALUE)),Ce.move=(e,t,n,a)=>{switch(t.combat.movement=Math.max(0,t.combat.movement-a),t.combat.trail.push({x:t.combat.position.x,y:t.combat.position.y}),n){case"n":t.combat.position.y-=1;break;case"ne":t.combat.position.x+=1,t.combat.position.y-=1;break;case"e":t.combat.position.x+=1;break;case"se":t.combat.position.x+=1,t.combat.position.y+=1;break;case"s":t.combat.position.y+=1;break;case"sw":t.combat.position.x-=1,t.combat.position.y+=1;break;case"w":t.combat.position.x-=1;break;case"nw":t.combat.position.x-=1,t.combat.position.y-=1}pe.checkActionParameters(e,t)},Ce.drinkPotion=(e,t,n,a)=>{a.potion&&(t.id===n.id?we.log(e,[we.combatant(t),we.text("drinks ".concat(a.name))]):we.log(e,[we.combatant(t),we.text("gives ".concat(a.name," to")),we.combatant(n)]),t.combat.movement-=2,t.items=t.items.filter((e=>e.id!==a.id)),t.carried=t.carried.filter((e=>e.id!==a.id)),a.potion.effects.forEach((t=>{const a=Pe.self();a.value=[n.id],Be.run(t,e,n,[a])})))},Ce.healDamage=(e,t,n)=>{t.combat.damage=Math.max(0,t.combat.damage-n),pe.checkActionParameters(e,t),we.log(e,[we.combatant(t),we.text("heals damage (".concat(n," pts) and is now at ").concat(t.combat.damage))])},Ce.healWounds=(e,t,n)=>{t.combat.wounds=Math.max(0,t.combat.wounds-n),we.log(e,[we.combatant(t),we.text("heals wounds (".concat(n,") and is now at ").concat(t.combat.wounds))]);const a=pe.getTraitRank(e,t,x.Resolve);t.combat.wounds<a&&t.combat.state===I.Unconscious&&(t.combat.state=I.Prone,we.logState(e,t)),pe.checkActionParameters(e,t)},Ce.dealDamage=(e,t,n,a,r)=>{if(n.combat.state===I.Dead)return;const s=u.dice(a);we.log(e,[we.combatant(t),we.text("rolls weapon damage for"),we.combatant(n),we.rank(r,a),we.text("and gets"),we.result(s)]);const i=pe.getDamageBonus(e,t,r);i>0&&we.log(e,[we.combatant(t),we.text("deals ".concat(i," additional ").concat(r," damage"))]),i<0&&we.log(e,[we.combatant(t),we.text("deals ".concat(i," less ").concat(r," damage"))]),pe.takeDamage(e,n,s+i,r)},Ce.takeDamage=(e,t,n,a)=>{we.log(e,[we.combatant(t),we.text("suffers damage (".concat(a,", ").concat(n," pts)"))]),(t.quirks.includes(P.Swarm)||t.quirks.includes(P.Amorphous))&&Oe.getDamageCategory(a)===y.Physical&&(we.log(e,[we.combatant(t),we.text("takes half physical damage")]),n=Math.floor(n/2));const r=pe.getDamageResistance(e,t,a);if(r>0&&(we.log(e,[we.combatant(t),we.text("has damage resistance (".concat(a,", ").concat(r," pts)"))]),n-=r),n>0)if(t.quirks.includes(P.Drone))pe.kill(e,t);else{t.combat.damage+=n,we.log(e,[we.combatant(t),we.text("takes damage (".concat(n," pts) and is now at ").concat(t.combat.damage))]);const a=pe.getTraitRank(e,t,x.Endurance),r=u.dice(a);we.log(e,[we.combatant(t),we.text("rolls"),we.rank("Endurance",a),we.text("and gets"),we.result(r)]),r<t.combat.damage&&pe.wound(e,t,1)}else we.log(e,[we.combatant(t),we.text("takes no damage")]);pe.checkActionParameters(e,t)},Ce.wound=(e,t,n)=>{if(t.combat.state!==I.Dead){if(t.combat.damage=0,t.combat.wounds+=n,we.log(e,[we.combatant(t),we.text("takes wounds (".concat(n,") and is now at ").concat(t.combat.damage," damage, ").concat(t.combat.wounds," wounds"))]),t.quirks.includes(P.Drone))pe.kill(e,t);else{const n=pe.getTraitRank(e,t,x.Resolve);t.combat.wounds===n&&(t.combat.state!==I.Standing&&t.combat.state!==I.Prone||(t.combat.state=I.Unconscious,we.logState(e,t))),t.combat.wounds>n&&(t.combat.state!==I.Standing&&t.combat.state!==I.Prone&&t.combat.state!==I.Unconscious||pe.kill(e,t))}pe.checkActionParameters(e,t)}},Ce.kill=(e,t)=>{t.combat.state!==I.Dead&&(t.combat.state=I.Dead,t.combat.conditions=[],t.combat.senses=0,t.combat.movement=0,t.combat.actions=[],t.combat.selectedAction=null,t.combat.intents=null,t.combat.stunned=!1,we.logState(e,t),pe.dropAllItems(e,t),ce.play(ce.dong))},Ce.knockout=(e,t)=>{t.combat.state!==I.Unconscious&&(t.combat.state=I.Unconscious,t.combat.senses=0,t.combat.movement=0,t.combat.actions=[],t.combat.selectedAction=null,t.combat.intents=null,we.logState(e,t))},Ce.goProne=(e,t)=>{t.combat.state===I.Standing&&(t.combat.state=I.Prone,pe.checkActionParameters(e,t),we.logState(e,t))},Ce.standUp=(e,t)=>{t.combat.state===I.Prone&&(t.combat.state=I.Standing,pe.checkActionParameters(e,t),we.logState(e,t))},Ce.stun=(e,t)=>{t.combat.state!==I.Dead&&(t.combat.stunned=!0,we.log(e,[we.combatant(t),we.text("is stunned")],!0))},Ce.inspire=(e,t)=>{const n=pe.getSkillRank(e,t,C.Presence),a=u.dice(n);if(we.log(e,[we.text("Inspire:"),we.combatant(t),we.text("rolls"),we.rank("Presence",n),we.text("and gets"),we.result(a)]),t.combat.movement-=4,a>8){const n=se.getMapEdges(e.mapSquares),a=pe.getCombatantSquares(e,t);e.combatants.filter((e=>e.faction===t.faction)).filter((e=>e.combat.stunned)).forEach((t=>{const r=pe.getCombatantSquares(e,t);se.canSeeAny(n,a,r)&&(t.combat.stunned=!1,we.log(e,[we.combatant(t),we.text("is no longer stunned")]))}))}pe.checkActionParameters(e,t)},Ce.scan=(e,t)=>{const n=pe.getSkillRank(e,t,C.Perception),a=u.dice(n);t.combat.movement-=4,t.combat.senses+=a,pe.checkActionParameters(e,t),we.log(e,[we.text("Scan:"),we.combatant(t),we.text("rolls"),we.rank("Perception",n),we.text("and gets"),we.result(a)])},Ce.hide=(e,t)=>{const n=pe.getSkillRank(e,t,C.Stealth),a=u.dice(n);t.combat.movement-=4,t.combat.hidden+=a,pe.checkActionParameters(e,t),we.log(e,[we.text("Hide:"),we.combatant(t),we.text("rolls"),we.rank("Stealth",n),we.text("and gets"),we.result(a)])},Ce.reveal=(e,t)=>{t.combat.hidden>0&&(t.combat.hidden=0,pe.checkActionParameters(e,t),we.log(e,[we.combatant(t),we.text("is no longer hidden")]))},Ce.equipItem=(e,t,n)=>{t.quirks.includes(P.Beast)||(t.combat.movement=Math.max(0,t.combat.movement-1),t.carried=t.carried.filter((e=>e.id!==n.id)),t.items.push(n),pe.checkActionParameters(e,t),we.log(e,[we.combatant(t),we.text("equips ".concat(n.name))]))},Ce.unequipItem=(e,t,n)=>{t.quirks.includes(P.Beast)||(t.combat.movement=Math.max(0,t.combat.movement-1),t.items=t.items.filter((e=>e.id!==n.id)),t.carried.push(n),pe.checkActionParameters(e,t),we.log(e,[we.combatant(t),we.text("unequips ".concat(n.name))]))},Ce.pickUpItem=(e,t,n)=>{if(t.quirks.includes(P.Beast))return;t.combat.movement=Math.max(0,t.combat.movement-1);const a=se.getAdjacentSquares(e.mapSquares,[t.combat.position]),r=e.loot.filter((e=>a.find((t=>t.x===e.position.x&&t.y===e.position.y)))),s=r.find((e=>e.items.find((e=>e===n))));s&&(s.items=s.items.filter((e=>e.id!==n.id)),0===s.items.length&&(e.loot=e.loot.filter((e=>e.id!==s.id)))),t.carried.push(n),pe.checkActionParameters(e,t),we.log(e,[we.combatant(t),we.text("picks up ".concat(n.name))])},Ce.dropItem=(e,t,n)=>{if(t.quirks.includes(P.Beast))return;t.items=t.items.filter((e=>e.id!==n.id)),t.carried=t.carried.filter((e=>e.id!==n.id));const a=se.getAdjacentSquares(e.mapSquares,[t.combat.position]),r=e.loot.filter((e=>a.find((t=>t.x===e.position.x&&t.y===e.position.y))));let s=null;if(0===r.length){s=Q.createLootPile();const t=a.filter((t=>pe.getSquareIsEmpty(e,t)));if(t.length>0){const n=d.draw(t);s.position.x=n.x,s.position.y=n.y,e.loot.push(s)}}else s=d.draw(r);s.items.push(n),pe.checkActionParameters(e,t),we.log(e,[we.combatant(t),we.text("drops ".concat(n.name))])},Ce.dropAllItems=(e,t)=>{if(t.quirks.includes(P.Beast))return;let n=0;if(t.faction===N.Monster&&u.randomBoolean()&&(n=u.dice(2)+u.dice(2)),t.items.length>0||t.carried.length>0||n>0){const a=pe.getCombatantSquares(e,t).filter((t=>pe.getSquareIsEmpty(e,t)));if(a.length>0){const r=Q.createLootPile();r.items.push(...t.items),r.items.push(...t.carried),r.money=n,t.items=[],t.carried=[];const s=d.draw(a);r.position.x=s.x,r.position.y=s.y,e.loot.push(r)}}},Ce.getEncounterState=e=>{const t=e.combatants.filter((e=>e.faction===N.Monster)).every((e=>e.combat.state===I.Dead||e.combat.state===I.Unconscious));if(t)return oe.Victory;const n=e.combatants.filter((e=>e.faction===N.Hero)).every((e=>e.combat.state===I.Dead||e.combat.state===I.Unconscious));return n?oe.Defeat:oe.Active},Ce.getCombatant=(e,t)=>{var n;return null!==(n=e.combatants.find((e=>e.id===t)))&&void 0!==n?n:null},Ce.getLoot=(e,t)=>{var n;return null!==(n=e.loot.find((e=>e.id===t)))&&void 0!==n?n:null},Ce.getAuraConditions=(e,t)=>{const n=[],a=pe.getCombatantSquares(e,t);return e.combatants.filter((e=>e.combat.state!==I.Dead)).filter((e=>e.faction===t.faction)).filter((t=>a.some((n=>pe.getCombatantAuraSquares(e,t).find((e=>e.x===n.x&&e.y===n.y)))))).flatMap((t=>X.getAuras(pe.getCombatant(e,t.id)))).filter((e=>G.getConditionIsBeneficial(e))).forEach((e=>n.push(e))),e.combatants.filter((e=>e.combat.state!==I.Dead)).filter((e=>e.faction!==t.faction)).filter((t=>a.some((n=>pe.getCombatantAuraSquares(e,t).find((e=>e.x===n.x&&e.y===n.y)))))).flatMap((t=>X.getAuras(pe.getCombatant(e,t.id)))).filter((e=>!G.getConditionIsBeneficial(e))).forEach((e=>n.push(e))),n},Ce.getActiveCombatants=e=>e.combatants.filter((e=>e.combat.state!==I.Dead)).filter((e=>e.combat.initiative!==Number.MIN_VALUE)),Ce.getActedCombatants=e=>e.combatants.filter((e=>e.combat.state!==I.Dead)).filter((e=>e.combat.initiative===Number.MIN_VALUE)),Ce.getDeadCombatants=e=>e.combatants.filter((e=>e.combat.state===I.Dead)),Ce.getTraitRank=(e,t,n)=>{const a=[].concat(t.combat.conditions).concat(pe.getAuraConditions(e,t));return X.getTraitRank(t,a,n)},Ce.getSkillRank=(e,t,n)=>{const a=[].concat(t.combat.conditions).concat(pe.getAuraConditions(e,t));return X.getSkillRank(t,a,n)},Ce.getDamageBonus=(e,t,n)=>{const a=[].concat(t.combat.conditions).concat(pe.getAuraConditions(e,t));return X.getDamageBonus(t,a,n)},Ce.getDamageResistance=(e,t,n)=>{const a=[].concat(t.combat.conditions).concat(pe.getAuraConditions(e,t));return X.getDamageResistance(t,a,n)},Ce.findCombatants=(e,t,n)=>e.combatants.filter((a=>{const r=pe.getCombatantSquares(e,a);return se.getDistanceAny(t,r)<=n})),Ce.findSquares=(e,t,n)=>e.mapSquares.filter((e=>se.getDistanceAny(t,[e])<=n)),Ce.findWalls=(e,t,n)=>se.getAdjacentWalls(e.mapSquares,e.mapSquares).filter((e=>se.getDistanceAny(t,[e])<=n));class Ae{}he=Ae,Ae.createEncounter=(e,t,n)=>{const a=e.encounters[0],r=u.getSeededRNG(a),s={regionID:e.id,round:0,combatants:[...t],loot:[],mapSquares:ie.generateEncounterMap(r),log:[]};let i=!1;const o=[],l=(e,t,a)=>{const s=u.dice(2,r)>10,l=!s&&!i&&u.dice(2,r)>10,c=s?4:1;for(let r=0;r<c;++r){const r=Q.createCombatant(N.Monster);s&&r.quirks.push(P.Drone),X.applyCombatantCards(r,e,t,a),X.makeFeatureChoices(r),X.addItems(r,n),l&&(r.quirks.push(P.Boss),i=!0),o.push(r)}};for(;d.sum(o,(e=>e.level))<d.sum(t,(e=>e.level));)switch(u.randomNumber(10,r)){case 0:if(o.length<2*t.length){const t=_.getMonsters(e,n).map((e=>e.id)),a=d.draw(t,r),s=d.draw(Oe.getRoleDeck(n).map((e=>e.id)),r),i=d.draw(Oe.getBackgroundDeck(n).map((e=>e.id)),r);l(a,s,i)}break;case 1:if(o.length>0&&o.length<2*t.length){const e=d.draw(o,r).speciesID,t=d.draw(Oe.getRoleDeck(n).map((e=>e.id)),r),a=d.draw(Oe.getBackgroundDeck(n).map((e=>e.id)),r);l(e,t,a)}break;case 2:case 3:if(o.length>0&&o.length<2*t.length){const e=d.draw(o,r),t=e.speciesID,a=e.roleID,s=d.draw(Oe.getBackgroundDeck(n).map((e=>e.id)),r);l(t,a,s)}break;case 4:case 5:case 6:case 7:case 8:case 9:if(o.length>0){const e=d.draw(o,r),t=X.getFeatureDeck(e).filter((e=>e.type!==j.Proficiency));X.incrementCombatantLevel(e,d.draw(t,r),n),X.makeFeatureChoices(e)}}o.filter((e=>e.quirks.includes(P.Boss))).forEach((e=>{e.name=O.generateName(r),e.features.push(J.createTraitFeature("boss-1",x.Endurance,2)),e.features.push(J.createTraitFeature("boss-2",x.Resolve,2)),e.features.push(J.createTraitFeature("boss-3",x.Speed,2));for(let a=0;a<=5;++a){const t=X.getFeatureDeck(e).filter((e=>e.type!==j.Proficiency));X.incrementCombatantLevel(e,d.draw(t,r),n),X.makeFeatureChoices(e)}let t=null;if(e.items.length>0)t=d.draw(e.items,r),e.items=e.items.filter((e=>e.id!==t.id));else{const e=Oe.getItemDeck(n).filter((e=>e.proficiency===v.None));t=d.draw(e,r)}if(t){const a=H.generateMagicItem(t,n,r);e.items.push(a)}})),o.forEach((e=>{const t=o.filter((t=>t.name===e.name));t.length>1&&t.forEach(((e,t)=>{e.name="".concat(e.name," ").concat(t+1)}))})),o.forEach((e=>X.resetCombatant(e))),s.combatants.push(...o),he.placeCombatants(s,r);const c=[];if(0===u.randomNumber(5,r)){const e=Q.createLootPile();if(0===u.randomNumber(3,r))e.items.push(H.generateRandomMagicItem(n,r));else{const t=Oe.getPotionDeck(n),a=d.draw(t,r);a.id=D.guid(),e.items.push(a)}const t=d.draw(s.mapSquares.filter((e=>e.type===te.Clear)),r);e.position.x=t.x,e.position.y=t.y,c.push(e)}return s.loot.push(...c),s},Ae.placeCombatants=(e,t)=>{e.combatants.forEach((n=>{if(n.combat.position.x!==Number.MIN_VALUE&&n.combat.position.y!==Number.MIN_VALUE);else for(let a=0;a<1e3;++a){const a=d.draw(e.mapSquares,t),r=[];for(let e=a.x;e<=a.x+n.size-1;++e)for(let t=a.y;t<=a.y+n.size-1;++t)r.push({x:e,y:t});if(r.every((t=>he.canPlaceHere(e,t)))){n.combat.position.x=a.x,n.combat.position.y=a.y;break}}})),e.combatants=e.combatants.filter((e=>e.combat.position.x!==Number.MIN_VALUE&&e.combat.position.y!==Number.MIN_VALUE))},Ae.placeLoot=(e,t)=>{e.loot.forEach((n=>{if(n.position.x!==Number.MIN_VALUE&&n.position.y!==Number.MIN_VALUE);else for(let a=0;a<1e3;++a){const a=d.draw(e.mapSquares,t);if(he.canPlaceHere(e,a)){n.position.x=a.x,n.position.y=a.y;break}}})),e.combatants=e.combatants.filter((e=>e.combat.position.x!==Number.MIN_VALUE&&e.combat.position.y!==Number.MIN_VALUE))},Ae.canPlaceHere=(e,t)=>{const n=e.mapSquares.find((e=>e.x===t.x&&e.y===t.y));if(!n)return!1;if(n.type!==te.Clear)return!1;const a=[];return e.combatants.forEach((t=>a.push(...Ce.getCombatantSquares(e,t)))),e.loot.forEach((e=>a.push(e.position))),!a.find((e=>e.x===t.x&&e.y===t.y))};class je{}je.inspire=()=>({id:"inspire",data:null}),je.scan=()=>({id:"scan",data:null}),je.hide=()=>({id:"hide",data:null}),je.move=e=>({id:"move",data:e}),je.action=e=>({id:"action",data:e});class De{}me=De,De.findPaths=(e,t,n)=>{const a=[{x:t.combat.position.x,y:t.combat.position.y,steps:[],cost:0,working:!0}];for(;a.filter((e=>e.working)).length>0;)me.findSteps(e,t,a,n);return n?a.filter((e=>e.cost<=t.combat.movement)):a},De.findSteps=(e,t,n,a)=>{const r=n.filter((e=>e.working)),s=a?r.filter((e=>e.cost<=t.combat.movement)):r;n.forEach((e=>e.working=!1)),s.forEach((r=>{["n","ne","e","se","s","sw","w","nw"].forEach((s=>{const i={x:r.x,y:r.y};switch(s){case"n":i.y-=1;break;case"ne":i.x+=1,i.y-=1;break;case"e":i.x+=1;break;case"se":i.x+=1,i.y+=1;break;case"s":i.y+=1;break;case"sw":i.x-=1,i.y+=1;break;case"w":i.x-=1;break;case"nw":i.x-=1,i.y-=1}const o=Ce.getMoveCost(e,t,{x:r.x,y:r.y},s),l=n.find((e=>e.x===i.x&&e.y===i.y));if(!l&&o!==Number.MAX_VALUE){const e={x:i.x,y:i.y,steps:JSON.parse(JSON.stringify(r.steps)),cost:r.cost+o,working:!0};e.steps.push(s),a&&e.cost>t.combat.movement||n.push(e)}}))}))};class Ee{}fe=Ee,Ee.getIntents=(e,t)=>{if(t.combat.stunned||t.combat.state===I.Unconscious||t.combat.state===I.Dead)return null;const n=De.findPaths(e,t,!0),a=se.getMapEdges(e.mapSquares),r=[];t.combat.selectedAction||t.combat.actions.filter((e=>e.prerequisites.every((e=>Ie.isSatisfied(e,t))))).forEach((s=>{s.parameters.forEach((i=>{if("targets"===i.id){const o=i;if(null===o.targets)r.push({description:s.name,intents:[je.action(s)],weight:2});else switch(o.targets.type){case S.Enemies:case S.Combatants:r.push(...fe.getCombatantTargetIntents(e,t,s,N.Hero,n,a));break;case S.Allies:r.push(...fe.getCombatantTargetIntents(e,t,s,N.Monster,n,a));break;case S.Squares:r.push(...fe.getSquareTargetIntents(e,t,s,n,a));break;case S.Walls:r.push(...fe.getWallTargetIntents(e,t,s,n))}}}))})),r.push(...fe.getMovementIntents(e,t,n)),r.push(...fe.getAttackIntents(e,t));const s=Ce.getSkillRank(e,t,C.Presence),i=e.combatants.filter((e=>e.faction===t.faction)).filter((e=>e.combat.stunned)).some((n=>se.canSeeAny(a,Ce.getCombatantSquares(e,t),Ce.getCombatantSquares(e,n))));s>0&&t.combat.movement>=4&&i&&r.push({description:"Inspire",intents:[je.inspire()],weight:s});const o=Ce.getSkillRank(e,t,C.Perception);o>0&&t.combat.movement>=4&&r.push({description:"Scan",intents:[je.scan()],weight:o});const l=Ce.getSkillRank(e,t,C.Stealth);return l>0&&0===t.combat.hidden&&t.combat.movement>=4&&r.push({description:"Hide",intents:[je.hide()],weight:l}),d.max(r,(e=>u.dice(e.weight)))},Ee.getCombatantTargetIntents=(e,t,n,a,r,s)=>{const i=Fe.getActionRange(n,t),o=[];return e.combatants.filter((e=>e.faction===a)).filter((e=>t.combat.senses>=e.combat.hidden)).filter((e=>e.combat.state!==I.Unconscious&&e.combat.state!==I.Dead)).forEach((a=>{const l=Ce.getCombatantSquares(e,a),c=e.mapSquares.filter((e=>se.canSeeAny(s,l,[e]))).filter((e=>se.getDistanceAny(l,[e])<=i)).map((e=>r.find((t=>e.x===t.x&&e.y===t.y))||null)).filter((e=>(e?e.cost:Number.MAX_VALUE)<=t.combat.movement));if(c.length>0){const e=d.min(c,(e=>(null===e||void 0===e?void 0:e.cost)||Number.MAX_VALUE));e&&o.push({description:n.name,intents:[...e.steps.map((e=>je.move(e))),je.action(n)],weight:"Attack"===Fe.getActionType(n)?4:2})}})),o},Ee.getSquareTargetIntents=(e,t,n,a,r)=>{const s=Fe.getActionRange(n,t),i=[];return e.mapSquares.forEach((o=>{const l=e.mapSquares.filter((e=>se.canSee(r,o,e))).filter((e=>se.getDistance(o,e)<=s)).map((e=>a.find((t=>e.x===t.x&&e.y===t.y))||null)).filter((e=>(e?e.cost:Number.MAX_VALUE)<=t.combat.movement));if(l.length>0){const t=d.min(l,(e=>(null===e||void 0===e?void 0:e.cost)||Number.MAX_VALUE));if(t){let a=1;const r=n.parameters.find((e=>"targets"===e.id));if(r){const t=r;if(t.targets)switch(t.targets.type){case S.Allies:a=e.combatants.filter((e=>e.faction===N.Monster)).filter((n=>se.getDistanceAny(Ce.getCombatantSquares(e,n),[o])<=t.range.radius)).length;break;case S.Combatants:case S.Enemies:a=e.combatants.filter((e=>e.faction===N.Hero)).filter((n=>se.getDistanceAny(Ce.getCombatantSquares(e,n),[o])<=t.range.radius)).length}}i.push({description:n.name,intents:[...t.steps.map((e=>je.move(e))),je.action(n)],weight:a})}}})),i},Ee.getWallTargetIntents=(e,t,n,a)=>{const r=Fe.getActionRange(n,t),s=[];return d.distinct(se.getAdjacentWalls(e.mapSquares,e.mapSquares),(e=>"".concat(e.x," ").concat(e.y))).forEach((i=>{const o=e.mapSquares.filter((e=>se.getDistance(i,e)<=r)).map((e=>a.find((t=>e.x===t.x&&e.y===t.y))||null)).filter((e=>(e?e.cost:Number.MAX_VALUE)<=t.combat.movement));if(o.length>0){const e=d.min(o,(e=>(null===e||void 0===e?void 0:e.cost)||Number.MAX_VALUE));e&&s.push({description:n.name,intents:[...e.steps.map((e=>je.move(e))),je.action(n)],weight:1})}})),s},Ee.getAttackIntents=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const a=[];return t.combat.selectedAction||t.combat.actions.filter((e=>"Attack"===Fe.getActionType(e))).forEach((r=>{const s=r.prerequisites.every((e=>Ie.isSatisfied(e,t))),i=r.parameters.every((a=>{switch(a.id){case"origin":return a.value.length>0;case"targets":{const r=a.value.map((t=>Ce.getCombatant(e,t))),s=r.filter((e=>null!==e&&(n?e.faction!==t.faction:e.faction===t.faction))),i=r.filter((e=>null!==e&&(n?e.faction===t.faction:e.faction!==t.faction)));return i.length>s.length}}return null!==a.value}));s&&i&&a.push({description:r.name,intents:[je.action(r)],weight:4})})),a},Ee.getMovementIntents=(e,t,n)=>{const a=n.filter((e=>e.cost>0));if(0===a.length)return[];const r=[],s=Math.max(Ce.getTraitRank(e,t,x.Resolve)-1,1);if(t.combat.damage>0&&t.combat.wounds>=s){const n=d.max(a,(n=>{const a=e.combatants.filter((e=>e.faction!==t.faction)).filter((e=>t.combat.senses>=e.combat.hidden)).filter((e=>e.combat.state!==I.Unconscious&&e.combat.state!==I.Dead)).map((t=>{const a=Ce.getCombatantSquares(e,t);return se.getDistanceAny(a,[n])}));return Math.min(...a)}));n&&r.push({description:"Move Away",intents:[...n.steps.map((e=>je.move(e)))],weight:0})}else{const n=De.findPaths(e,t,!1),a=e.combatants.filter((e=>e.faction!==t.faction)).map((a=>{const r=Ce.getCombatantSquares(e,a),s=se.getAdjacentSquares(e.mapSquares,r),i=e.mapSquares.filter((n=>{const a=Ce.getCombatantSquares(e,t,n),r=a.every((n=>Ce.getSquareIsEmpty(e,n,[t]))),i=a.some((e=>s.find((t=>t.x===e.x&&t.y===e.y))));return r&&i})).map((e=>n.find((t=>t.x===e.x&&t.y===e.y)))).filter((e=>void 0!==e));return d.min(i,(e=>e.cost))})).filter((e=>null!==e)),s=d.min(a,(e=>e.cost));s&&r.push({description:"Move",intents:[...s.steps.map((e=>je.move(e)))],weight:0})}return r},Ee.performIntents=(e,t)=>{null!==t.combat.intents&&0!==t.combat.intents.intents.length&&(t.combat.intents.intents.forEach((n=>{fe.performIntent(e,t,n)})),t.combat.intents=fe.getIntents(e,t))},Ee.performIntent=(e,t,n)=>{switch(n.id){case"inspire":t.combat.movement>=4&&Ce.inspire(e,t);break;case"scan":t.combat.movement>=4&&Ce.scan(e,t);break;case"hide":t.combat.movement>=4&&Ce.hide(e,t);break;case"move":{const a=n.data,r=Ce.getMoveCost(e,t,t.combat.position,a);t.combat.movement>=r&&Ce.move(e,t,a,r);break}case"action":t.combat.selectedAction={action:n.data,used:!1},Ce.runAction(e,t)}};class Ie{}Ie.meleeWeapon=()=>({id:"item",description:"Requires you to have a melee weapon",data:[v.LargeWeapons,v.MilitaryWeapons,v.PairedWeapons]}),Ie.rangedWeapon=()=>({id:"item",description:"Requires you to have a ranged weapon",data:[v.PowderWeapons,v.RangedWeapons]}),Ie.armor=()=>({id:"item",description:"Requires you to be wearing armor",data:[v.LightArmor,v.HeavyArmor]}),Ie.shield=()=>({id:"item",description:"Requires you to have a shield",data:[v.Shields]}),Ie.implement=()=>({id:"item",description:"Requires you to have an implement",data:[v.Implements]}),Ie.emptyHand=()=>({id:"emptyhand",description:"Requires you to have a free hand",data:null}),Ie.damage=()=>({id:"damage",description:"Requires you to have at least 1 point of damage",data:null}),Ie.wound=()=>({id:"wound",description:"Requires you to have at least 1 wound",data:null}),Ie.condition=e=>({id:"condition",description:e===x.Any?"Requires you to have a condition":"Requires you to have a ".concat(e," condition"),data:null}),Ie.carryingCapacity=()=>({id:"carryingcapacity",description:"Requires you to have spare carrying capacity",data:null}),Ie.hidden=()=>({id:"hidden",description:"Requires you to be hidden",data:null}),Ie.prone=()=>({id:"prone",description:"Requires you to be prone",data:null}),Ie.isSatisfied=(e,t)=>{switch(e.id){case"item":return e.data.some((e=>t.items.some((t=>t.proficiency===e))&&X.getProficiencies(t).includes(e)));case"emptyhand":{const e=d.sum(t.items.filter((e=>e.location===b.Hand)),(e=>e.slots));return e<2}case"damage":return t.combat.damage>0;case"wound":return t.combat.wounds>0;case"condition":{const n=e.data;return n===x.Any?t.combat.conditions.length>0:t.combat.conditions.filter((e=>e.trait===n)).length>0}case"carryingcapacity":return t.carried.length<X.CARRY_CAPACITY;case"hidden":return t.combat.hidden>0;case"prone":return t.combat.state===I.Prone}return!0};class Ne{}Ne.distance=e=>({id:"origin",distance:e,candidates:[],value:null}),Ne.weapon=()=>({id:"origin",distance:"weapon",candidates:[],value:null});class Pe{}Pe.self=()=>({id:"targets",range:{type:ee.Self,radius:0},targets:null,candidates:[],value:null}),Pe.adjacent=(e,t)=>({id:"targets",range:{type:ee.Adjacent,radius:1},targets:{type:e,count:t},candidates:[],value:null}),Pe.burst=(e,t,n)=>({id:"targets",range:{type:ee.Burst,radius:n},targets:{type:e,count:t},candidates:[],value:null}),Pe.weapon=(e,t,n)=>({id:"targets",range:{type:ee.Weapon,radius:n},targets:{type:e,count:t},candidates:[],value:null});class Me{}Me.melee=()=>({id:"weapon",type:"melee",candidates:[],value:null}),Me.ranged=()=>({id:"weapon",type:"ranged",candidates:[],value:null});class Be{}ge=Be,Be.attack=e=>({id:"attack",data:e,children:e.hit}),Be.toSelf=e=>({id:"toSelf",data:e,children:e}),Be.dealWeaponDamage=function(){return{id:"weapondamage",data:arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,children:[]}},Be.dealDamage=(e,t)=>({id:"damage",data:{type:e,rank:t},children:[]}),Be.inflictWounds=e=>({id:"wounds",data:e,children:[]}),Be.healDamage=e=>({id:"healdamage",data:e,children:[]}),Be.healWounds=e=>({id:"healwounds",data:e,children:[]}),Be.addCondition=e=>({id:"addcondition",data:e,children:[]}),Be.removeCondition=e=>({id:"removecondition",data:e,children:[]}),Be.addMovement=()=>({id:"addMovement",data:null,children:[]}),Be.knockDown=()=>({id:"knockdown",data:null,children:[]}),Be.stun=()=>({id:"stun",data:null,children:[]}),Be.stand=()=>({id:"stand",data:null,children:[]}),Be.scan=()=>({id:"scan",data:null,children:[]}),Be.hide=()=>({id:"hide",data:null,children:[]}),Be.reveal=()=>({id:"reveal",data:null,children:[]}),Be.takeAnotherAction=function(){return{id:"takeAnotherAction",data:arguments.length>0&&void 0!==arguments[0]&&arguments[0],children:[]}},Be.invertConditions=e=>({id:"invertConditions",data:e,children:[]}),Be.transferCondition=()=>({id:"transferCondition",data:null,children:[]}),Be.commandAction=()=>({id:"commandAction",data:null,children:[]}),Be.commandMove=()=>({id:"commandMove",data:null,children:[]}),Be.forceMovement=(e,t)=>({id:"forceMovement",data:{type:e,rank:t},children:[]}),Be.moveToTargetSquare=()=>({id:"moveSelfTo",data:null,children:[]}),Be.disarm=()=>({id:"disarm",data:null,children:[]}),Be.steal=()=>({id:"steal",data:null,children:[]}),Be.createTerrain=e=>({id:"createTerrain",data:e,children:[]}),Be.addSquares=()=>({id:"addSquares",data:null,children:[]}),Be.removeSquares=()=>({id:"removeSquares",data:null,children:[]}),Be.destroyWalls=()=>({id:"destroyWalls",data:null,children:[]}),Be.createPotion=e=>({id:"createPotion",data:e,children:[]}),Be.summon=e=>({id:"summon",data:e,children:[]}),Be.getDescription=(e,t,n)=>{switch(e.id){case"attack":{const a=e.data;if(t){let e=X.getSkillRank(t,[],a.skill);return n&&(e=Ce.getSkillRank(n,t,a.skill)),0===a.skillBonus?"Attack: ".concat(a.skill," (rank ").concat(e,") vs ").concat(a.trait):"Attack: ".concat(a.skill," ").concat(a.skillBonus>=0?"+":"").concat(a.skillBonus," (rank ").concat(Math.max(e+a.skillBonus,0),") vs ").concat(a.trait)}return 0===a.skillBonus?"Attack: ".concat(a.skill," vs ").concat(a.trait):"Attack: ".concat(a.skill," ").concat(a.skillBonus>=0?"+":"").concat(a.skillBonus," vs ").concat(a.trait)}case"toSelf":return"To self";case"weapondamage":{const t=e.data;return 0===t?"Deal weapon damage":"Deal weapon damage ".concat(t>0?"+":"").concat(t)}case"damage":{const t=e.data;return"Deal ".concat(t.type," damage (rank ").concat(t.rank,")")}case"wounds":{const t=e.data;return"Inflict ".concat(t," wounds")}case"healdamage":{const t=e.data;return"Heal damage (rank ".concat(t,")")}case"healwounds":{const t=e.data;return"Heal ".concat(t," wound(s)")}case"addcondition":{const t=e.data;return"Add a condition (".concat(G.getConditionDescription(t),", rank ").concat(t.rank,")")}case"removecondition":{const t=e.data;return t===x.Any?"Remove a condition":"Remove a ".concat(t," condition")}case"addMovement":return"Add movement points";case"knockdown":return"Knock down";case"stun":return"Stun";case"scan":return"Scan";case"hide":return"Hide";case"reveal":return"Reveal";case"stand":return"Stand Up";case"takeAnotherAction":return e.data?"Redraw action cards":"Take another action";case"invertConditions":return e.data?"Invert conditions":"Invert a condition";case"transferCondition":return"Transfer a condition";case"commandAction":return"Command target to attack";case"commandMove":return"Command target to move";case"forceMovement":{const t=e.data;return 0===t.rank?"Move (".concat(t.type,")"):"Move (".concat(t.type,"), rank ").concat(t.rank)}case"moveSelfTo":return"Move to square";case"disarm":return"Disarm";case"steal":return"Steal";case"createTerrain":{const t=e.data;return"Create ".concat(t.toLowerCase()," terrain")}case"addSquares":return"Create map squares";case"removeSquares":return"Destroy map squares";case"destroyWalls":return"Destroy walls";case"createPotion":{const t=e.data,n=Oe.getPotion(t);return"Create a ".concat(n.name)}case"summon":{const t=e.data;return"Summon ".concat(t)}}return""},Be.run=(e,t,n,a)=>{switch(e.id){case"attack":{const r=e.data,s=[],i=a.find((e=>"targets"===e.id));if(i){i.value.forEach((e=>{const i=Ce.getCombatant(t,e);let o=!0;const l=a.find((e=>"weapon"===e.id));if(l){const e=l.value,a=n.items.find((t=>t.id===e));if(a){const e=a.weapon;if(e.unreliable>0){const n=u.dice(e.unreliable);n>=10&&(o=!1,we.log(t,[we.text("".concat(a.name," is Unreliable (rank ").concat(e.unreliable,"); it fails with")),we.result(n)]))}}}if(o)if(i.combat.state===I.Unconscious||i.combat.state===I.Dead)we.log(t,[we.text("Coup de gr\xe2ce (no attack roll required)")]);else{const e=Ce.getSkillRank(t,n,r.skill)+r.skillBonus,a=Ce.getTraitRank(t,i,r.trait),s=u.dice(e),l=u.dice(a);o=s>=l,we.log(t,[we.combatant(n),we.text("attacks with"),we.rank(r.skill,e),we.text("and gets"),we.result(s),we.text("-"),we.combatant(i),we.text("defends with"),we.rank(r.trait,a),we.text("and gets"),we.result(l),we.text("-"),o?we.text("HIT"):we.text("MISS")],!0)}o&&s.push(i.id)}))}let o=JSON.parse(JSON.stringify(a));o=o.filter((e=>"targets"!==e.id)),o.push({id:"targets",candidates:[],value:s}),r.hit.forEach((e=>{ge.run(e,t,n,o)}));break}case"toSelf":{let r=JSON.parse(JSON.stringify(a));r=r.filter((e=>"targets"!==e.id)),r.push({id:"targets",candidates:[],value:[n.id]});e.data.forEach((e=>{ge.run(e,t,n,r)}));break}case"weapondamage":{const r=e.data,s=a.find((e=>"weapon"===e.id)),i=a.find((e=>"targets"===e.id));if(s&&i){const e=s.value,a=n.items.find((t=>t.id===e));if(a){const e=a.weapon;i.value.forEach((a=>{const s=Ce.getCombatant(t,a);e.damage.forEach((e=>{Ce.dealDamage(t,n,s,e.rank+r,e.type)}))}))}}break}case"damage":{const r=e.data;r.type===w.Any&&(r.type=Oe.getRandomDamageType());const s=a.find((e=>"targets"===e.id));if(s){s.value.forEach((e=>{const a=Ce.getCombatant(t,e);Ce.dealDamage(t,n,a,r.rank,r.type)}))}break}case"wounds":{const n=e.data,r=a.find((e=>"targets"===e.id));if(r){r.value.forEach((e=>{const a=Ce.getCombatant(t,e);Ce.wound(t,a,n)}))}break}case"healdamage":{const n=e.data,r=a.find((e=>"targets"===e.id));if(r){r.value.forEach((e=>{const a=Ce.getCombatant(t,e),r=u.dice(n);Ce.healDamage(t,a,r)}))}break}case"healwounds":{const n=e.data,r=a.find((e=>"targets"===e.id));if(r){r.value.forEach((e=>{const a=Ce.getCombatant(t,e);Ce.healWounds(t,a,n)}))}break}case"addcondition":{const n=e.data,r=a.find((e=>"targets"===e.id));if(r){r.value.forEach((e=>{const a=Ce.getCombatant(t,e);if(a.combat.state!==I.Dead){const e=a.combat.conditions.find((e=>e.trait===n.trait&&G.getConditionDescription(e)===G.getConditionDescription(n)));if(e)e.rank+=n.rank;else{const e=JSON.parse(JSON.stringify(n));e.id=D.guid(),a.combat.conditions.push(e)}we.log(t,[we.combatant(a),we.text("is now affected by ".concat(G.getConditionDescription(n),", rank ").concat(n.rank))])}}))}break}case"removecondition":{const r=e.data,s=a.find((e=>"targets"===e.id));if(s){s.value.forEach((e=>{const a=Ce.getCombatant(t,e),s=r===x.Any?d.draw([x.Endurance,x.Resolve,x.Speed]):r,i=a.combat.conditions.filter((e=>e.trait===s)).filter((e=>G.getConditionIsBeneficial(e)===(n.faction!==a.faction)));if(0!==i.length){const e=Math.max(...i.map((e=>e.rank))),n=i.find((t=>t.rank===e));a.combat.conditions=a.combat.conditions.filter((e=>e.id!==n.id)),we.log(t,[we.combatant(a),we.text("is no longer affected by ".concat(G.getConditionDescription(n)))])}}))}break}case"addMovement":{const e=a.find((e=>"targets"===e.id));if(e){e.value.forEach((e=>{const n=Ce.getCombatant(t,e),a=Ce.getTraitRank(t,n,x.Speed),r=u.dice(a);n.combat.movement+=r,we.log(t,[we.combatant(n),we.text("rolls"),we.rank("Speed",a),we.text("and gets"),we.result(r),we.text("additional movement")])}))}break}case"knockdown":{const e=a.find((e=>"targets"===e.id));if(e){e.value.forEach((e=>{const n=Ce.getCombatant(t,e);Ce.goProne(t,n)}))}break}case"stun":{const e=a.find((e=>"targets"===e.id));if(e){e.value.forEach((e=>{const n=Ce.getCombatant(t,e);Ce.stun(t,n)}))}break}case"scan":{const e=a.find((e=>"targets"===e.id));if(e){e.value.forEach((e=>{const n=Ce.getCombatant(t,e);n.combat.movement+=4,Ce.scan(t,n),we.log(t,[we.combatant(n),we.text("scans")])}))}break}case"hide":{const e=a.find((e=>"targets"===e.id));if(e){e.value.forEach((e=>{const n=Ce.getCombatant(t,e);n.combat.movement+=4,Ce.hide(t,n),we.log(t,[we.combatant(n),we.text("hides")])}))}break}case"reveal":{const e=a.find((e=>"targets"===e.id));if(e){e.value.forEach((e=>{const n=Ce.getCombatant(t,e);Ce.reveal(t,n)}))}break}case"stand":{const e=a.find((e=>"targets"===e.id));if(e){e.value.forEach((e=>{const n=Ce.getCombatant(t,e);Ce.standUp(t,n)}))}break}case"takeAnotherAction":if(e.data)Ce.drawActions(t,n),n.combat.selectedAction=null;else{const e=n.combat.selectedAction?n.combat.selectedAction.action.id:null;e&&(n.combat.actions=n.combat.actions.filter((t=>t.id!==e))),n.combat.selectedAction=null}break;case"invertConditions":{const r=e.data,s=(e,n)=>{n.type=G.getOppositeType(n.type),we.log(t,[we.combatant(e),we.text("is now affected by ".concat(G.getConditionDescription(n)))])},i=a.find((e=>"targets"===e.id));if(i){i.value.forEach((e=>{const a=Ce.getCombatant(t,e),i=a.combat.conditions.filter((e=>n.faction===a.faction!==G.getConditionIsBeneficial(e)));if(r)i.forEach((e=>s(a,e)));else if(i.length>0){const e=d.draw(i);s(a,e)}}))}break}case"transferCondition":{const e=a.find((e=>"targets"===e.id));if(e){e.value.forEach((e=>{const a=Ce.getCombatant(t,e),r=n.combat.conditions.filter((e=>n.faction===a.faction===G.getConditionIsBeneficial(e)));if(r.length>0){const e=d.draw(r);n.combat.conditions=n.combat.conditions.filter((t=>t!==e));const s=JSON.parse(JSON.stringify(e));a.combat.conditions.push(s),we.log(t,[we.combatant(n),we.text("is no longer affected by"),we.rank(G.getConditionDescription(e),e.rank)]),we.log(t,[we.combatant(a),we.text("is now affected by"),we.rank(G.getConditionDescription(s),s.rank)])}}))}break}case"commandAction":{const e=a.find((e=>"targets"===e.id));if(e){e.value.forEach((e=>{const a=Ce.getCombatant(t,e);we.log(t,[we.combatant(n),we.text("commands"),we.combatant(a),we.text("to attack")]),a.combat.selectedAction=null,a.combat.actions=X.getActionDeck(a).filter((e=>"Attack"===Fe.getActionType(e))),a.combat.actions.push(...Y.getBaseActions().filter((e=>"Attack"===Fe.getActionType(e)))),Ce.checkActionParameters(t,a,n.faction!==a.faction);const r=Ee.getAttackIntents(t,a,n.faction!==a.faction);r.length>0?(a.combat.intents=d.draw(r),Ee.performIntents(t,a)):we.log(t,[we.combatant(a),we.text("cannot attack")])}))}break}case"commandMove":{const e=a.find((e=>"targets"===e.id));if(e){e.value.forEach((e=>{const a=Ce.getCombatant(t,e);we.log(t,[we.combatant(n),we.text("commands"),we.combatant(a),we.text("to move")]),a.combat.movement=u.dice(Ce.getTraitRank(t,a,x.Speed));const r=De.findPaths(t,a,!0),s=Ee.getMovementIntents(t,a,r);s.length>0?(a.combat.intents=d.draw(s),Ee.performIntents(t,a)):we.log(t,[we.combatant(a),we.text("cannot move")])}))}break}case"forceMovement":{const r=e.data,s=a.find((e=>"targets"===e.id));if(s){s.value.forEach((e=>{const s=Ce.getCombatant(t,e);switch(r.type){case K.Pull:{let e=n.combat.position;const i=a.find((e=>"origin"===e.id));if(i&&i.value){const t=i.value;t.length>0&&(e=t[0])}const o=u.dice(r.rank);for(let n=0;n<o;++n){const n=se.getDistance(e,s.combat.position),a=Ce.getPossibleMoveSquares(t,s).filter((t=>se.getDistance(e,t)<n));if(a.length>0){const e=d.draw(a);s.combat.trail.push({x:s.combat.position.x,y:s.combat.position.y}),s.combat.position.x=e.x,s.combat.position.y=e.y}}we.log(t,[we.combatant(s),we.text("has been pulled")]);break}case K.Push:{let e=n.combat.position;const i=a.find((e=>"origin"===e.id));if(i&&i.value){const t=i.value;t.length>0&&(e=t[0])}const o=u.dice(r.rank);for(let n=0;n<o;++n){const n=se.getDistance(e,s.combat.position),a=Ce.getPossibleMoveSquares(t,s).filter((t=>se.getDistance(e,t)>n));if(a.length>0){const e=d.draw(a);s.combat.trail.push({x:s.combat.position.x,y:s.combat.position.y}),s.combat.position.x=e.x,s.combat.position.y=e.y}}we.log(t,[we.combatant(s),we.text("has been pushed")]);break}case K.Swap:{const e=n.combat.position.x,a=n.combat.position.y;n.combat.position.x=s.combat.position.x,n.combat.position.y=s.combat.position.y,s.combat.position.x=e,s.combat.position.y=a,we.log(t,[we.combatant(n),we.text("and"),we.combatant(s),we.text("have swapped positions")]);break}case K.TowardsTarget:{const e=u.dice(r.rank);for(let a=0;a<e;++a){const e=se.getDistance(n.combat.position,s.combat.position),a=Ce.getPossibleMoveSquares(t,n).filter((t=>se.getDistance(s.combat.position,t)<e));if(a.length>0){const e=d.draw(a);n.combat.trail.push({x:n.combat.position.x,y:n.combat.position.y}),n.combat.position.x=e.x,n.combat.position.y=e.y}}we.log(t,[we.combatant(n),we.text("has moved towards"),we.combatant(s)]);break}case K.BesideTarget:{const e=Ce.getCombatantSquares(t,n),a=Ce.getCombatantSquares(t,s),r=se.getAdjacentSquares(t.mapSquares,a);if(e.some((e=>r.find((t=>t.x===e.x&&t.y===e.y)))))we.log(t,[we.combatant(n),we.text("is already beside"),we.combatant(s)]);else{const e=t.mapSquares.filter((e=>{const a=Ce.getCombatantSquares(t,n,e),s=a.every((e=>Ce.getSquareIsEmpty(t,e,[n]))),i=a.some((e=>r.find((t=>t.x===e.x&&t.y===e.y))));return s&&i}));if(e.length>0){const a=d.draw(e);n.combat.trail.push({x:s.combat.position.x,y:s.combat.position.y}),n.combat.position.x=a.x,n.combat.position.y=a.y,we.log(t,[we.combatant(n),we.text("has moved to"),we.combatant(s)])}else we.log(t,[we.combatant(n),we.text("cannot move to"),we.combatant(s)])}break}case K.Random:{const e=u.dice(r.rank),n=t.mapSquares.filter((t=>se.getDistance(s.combat.position,t)<=e)).filter((e=>Ce.getCombatantSquares(t,s,e).every((e=>Ce.getSquareIsEmpty(t,e,[s])))));if(n.length>0){const e=d.draw(n);s.combat.trail.push({x:s.combat.position.x,y:s.combat.position.y}),s.combat.position.x=e.x,s.combat.position.y=e.y}we.log(t,[we.combatant(s),we.text("has been moved to a random square")]);break}}}))}break}case"moveSelfTo":{const e=a.find((e=>"targets"===e.id));if(e){const a=e.value.filter((e=>Ce.getCombatantSquares(t,n,e).every((e=>Ce.getSquareIsEmpty(t,e,[n])))));if(a.length>0){const e=d.draw(a);n.combat.trail.push({x:n.combat.position.x,y:n.combat.position.y}),n.combat.position.x=e.x,n.combat.position.y=e.y}else we.log(t,[we.combatant(n),we.text("cannot move")])}break}case"disarm":{const e=a.find((e=>"targets"===e.id));if(e){e.value.forEach((e=>{const n=Ce.getCombatant(t,e),a=n.items.filter((e=>e.location===b.Hand));if(a.length>0){const e=d.draw(a);n.items=n.items.filter((t=>t.id!==e.id));const r=se.getAdjacentSquares(t.mapSquares,Ce.getCombatantSquares(t,n)).filter((e=>Ce.getSquareIsEmpty(t,e)));if(r.length>0){const n=d.draw(r),a=Q.createLootPile();a.items.push(e),a.position.x=n.x,a.position.y=n.y,t.loot.push(a)}we.log(t,[we.combatant(n),we.text("has lost ".concat(e.name))])}else we.log(t,[we.combatant(n),we.text("is not holding anything")])}))}break}case"steal":{const e=a.find((e=>"targets"===e.id));if(e){e.value.forEach((e=>{const a=Ce.getCombatant(t,e),r=[].concat(a.items).concat(a.carried);if(r.length>0){const e=d.draw(r);a.items=a.items.filter((t=>t.id!==e.id)),a.carried=a.carried.filter((t=>t.id!==e.id)),n.carried.push(e),we.log(t,[we.combatant(n),we.text("has stolen ".concat(e.name," from")),we.combatant(a)])}}))}break}case"createTerrain":{const r=e.data,s=a.find((e=>"targets"===e.id));if(s){s.value.forEach((e=>{se.getFloorBlob(t.mapSquares,e).forEach((e=>e.type=r))})),we.log(t,[we.combatant(n),we.text("has created an area of ".concat(r.toLowerCase()," terrain"))])}break}case"addSquares":{const e=a.find((e=>"targets"===e.id));if(e){e.value.forEach((e=>{se.getWallBlob(t.mapSquares,e).forEach((e=>{const n={x:e.x,y:e.y,type:te.Clear};t.mapSquares.push(n)}))})),se.visibilityCache.reset(),we.log(t,[we.combatant(n),we.text("has created map squares")])}break}case"removeSquares":{const e=a.find((e=>"targets"===e.id));if(e){e.value.forEach((e=>{const n=se.getFloorBlob(t.mapSquares,e).filter((e=>Ce.getSquareIsEmpty(t,e)));t.mapSquares=t.mapSquares.filter((e=>!n.includes(e)))})),se.visibilityCache.reset(),we.log(t,[we.combatant(n),we.text("has destroyed map squares")])}break}case"destroyWalls":{const e=a.find((e=>"targets"===e.id));if(e){e.value.forEach((e=>{const n={x:e.x,y:e.y,type:te.Obstructed};t.mapSquares.push(n)})),se.visibilityCache.reset(),we.log(t,[we.combatant(n),we.text("has destroyed walls")])}break}case"createPotion":{const n=e.data,r=a.find((e=>"targets"===e.id));if(r){r.value.forEach((e=>{const a=Ce.getCombatant(t,e),r=Oe.getPotion(n),s=JSON.parse(JSON.stringify(r));s.id=D.guid(),a.carried.push(s)}))}break}case"summon":{const a=[];switch(e.data){case ne.Undead:a.push(...$.getList().filter((e=>e.quirks.includes(P.Undead))).map((e=>e.id)));break;case ne.Beast:a.push(...$.getList().filter((e=>e.quirks.includes(P.Beast))).map((e=>e.id)));break;case ne.Elemental:a.push(...$.getList().filter((e=>e.name.toLowerCase().includes("elemental"))).map((e=>e.id)))}if(a.length>0){const e=d.draw(a),r=Q.createCombatant(N.Monster);for(X.applyCombatantCards(r,e,"",""),X.makeFeatureChoices(r),X.addItems(r,[]);r.level<n.level;){const e=X.getFeatureDeck(r).filter((e=>e.type!==j.Proficiency));X.incrementCombatantLevel(r,d.draw(e),[]),X.makeFeatureChoices(r)}r.faction=n.faction,r.quirks.push(P.Drone),X.resetCombatant(r),t.combatants.push(r),Ae.placeCombatants(t,Math.random),we.log(t,[we.combatant(n),we.text("has summoned"),we.combatant(r)])}break}}};class Fe{}ye=Fe,Fe.getActionType=e=>e.effects.some((e=>"attack"===e.id))?"Attack":"Utility",Fe.getActionSpeed=e=>e.effects.some((e=>"takeAnotherAction"===e.id))?"Quick":"Full",Fe.getActionDescription=e=>e.name,Fe.getParameterDescription=e=>{switch(e.id){case"origin":{const t=e;return"weapon"===t.distance?"Origin: within weapon range":"Origin: within ".concat(t.distance," squares")}case"weapon":return"Uses weapon: ".concat(e.type);case"targets":{const t=e;return"Target(s): ".concat(ye.getTargetDescription(t))}}return""},Fe.getTargetDescription=e=>{let t="",n="";if(e.targets){let a=!1;switch(1===e.targets.count?t="one":e.targets.count===Number.MAX_VALUE?(t="all",a=!0):(t="up to ".concat(e.targets.count),a=!0),e.targets.type){case S.Combatants:n=a?"combatants":"combatant";break;case S.Enemies:n=a?"enemies":"enemy";break;case S.Allies:n=a?"allies":"ally";break;case S.Squares:n=a?"squares":"square";break;case S.Walls:n=a?"walls":"wall"}}let a="".concat(t," ").concat(n);e.targets&&e.targets.count===Number.MAX_VALUE&&e.targets.type===S.Combatants&&(a="everyone");let r="";switch(e.range.type){case ee.Self:r="self";break;case ee.Adjacent:r="".concat(t," adjacent ").concat(n);break;case ee.Burst:r="".concat(a," within ").concat(e.range.radius," squares");break;case ee.Weapon:r=e.range.radius>0?"".concat(a," within weapon range +").concat(e.range.radius):"".concat(a," within weapon range")}return r},Fe.getActionRange=(e,t)=>{let n=0;return e.parameters.forEach((a=>{if("targets"===a.id){const r=a;switch(r.range.type){case ee.Self:n=0;break;case ee.Adjacent:n=1;break;case ee.Burst:n=r.range.radius;break;case ee.Weapon:{const a=e.parameters.find((e=>"weapon"===e.id));if(a&&null!==a.value){const e=a.value,s=t.items.find((t=>t.id===e));s&&s.weapon&&(n=s.weapon.range+r.range.radius)}break}}}})),n},Fe.isParameterSet=e=>{let t=!0;if(e.value)switch(e.id){case"weapon":t=!!e.value;break;case"origin":{const n=e;if(n.value){t=n.value.length>0}else t=!1;break}case"targets":{const n=e;if(n.targets)switch(n.targets.type){case S.Combatants:case S.Enemies:case S.Allies:{const e=n.value;e&&0!==e.length||(t=!1);break}case S.Squares:{const e=n.value;e&&0!==e.length||(t=!1);break}case S.Walls:{const e=n.value;e&&0!==e.length||(t=!1);break}}break}}else t=!1;return t},Fe.checkWeaponParameter=(e,t)=>{const n=[];let a=e.value;const r=[];switch(e.type){case"melee":r.push(v.LargeWeapons),r.push(v.PairedWeapons),r.push(v.MilitaryWeapons);break;case"ranged":r.push(v.RangedWeapons),r.push(v.PowderWeapons)}t.items.filter((e=>r.includes(e.proficiency))).forEach((e=>n.push(e.id))),null!==a&&n.includes(a)||(a=n.length>0?n[0]:null),e.candidates=n,e.value=a},Fe.checkOriginParameter=(e,t,n,a)=>{const r=[];let s=e.value,i=0;if("weapon"===e.distance){const e=a.parameters.find((e=>"weapon"===e.id));if(e&&null!==e.value){const t=e.value,a=n.items.find((e=>e.id===t));a&&a.weapon&&(i=a.weapon.range)}}else i=e.distance;const o=se.getMapEdges(t.mapSquares),l=Ce.getCombatantSquares(t,n);r.push(...Ce.findSquares(t,Ce.getCombatantSquares(t,n),i).filter((e=>se.canSeeAny(o,l,[e])))),(null===s||0===s.length||s.some((e=>!r.includes(e))))&&(s=r.length>0?[r[0]]:[]),e.candidates=r,e.value=s},Fe.checkTargetParameter=(e,t,n,a,r)=>{var s;const i=[];let o=null!==(s=e.value)&&void 0!==s?s:[];if(e.range.type===ee.Self)i.push(n.id),o=[n.id];else{const s=ye.getActionRange(a,n);let l=Ce.getCombatantSquares(t,n);const c=a.parameters.find((e=>"origin"===e.id));if(c&&(l=c.value),e.targets){const a=se.getMapEdges(t.mapSquares);switch(e.targets.type){case S.Combatants:i.push(...Ce.findCombatants(t,l,s).filter((e=>e.id!==n.id)).filter((e=>e.combat.state!==I.Dead)).filter((e=>n.combat.senses>=e.combat.hidden)).filter((e=>se.canSeeAny(a,l,Ce.getCombatantSquares(t,e)))).sort(((e,a)=>{const r=Ce.getCombatantSquares(t,n),s=Ce.getCombatantSquares(t,e),i=Ce.getCombatantSquares(t,a);return se.getDistanceAny(s,r)-se.getDistanceAny(i,r)})).map((e=>e.id)));break;case S.Enemies:i.push(...Ce.findCombatants(t,l,s).filter((e=>e.id!==n.id)).filter((e=>e.combat.state!==I.Dead)).filter((e=>n.combat.senses>=e.combat.hidden)).filter((e=>r?e.faction===n.faction:e.faction!==n.faction)).filter((e=>se.canSeeAny(a,l,Ce.getCombatantSquares(t,e)))).sort(((e,a)=>{const r=Ce.getCombatantSquares(t,n),s=Ce.getCombatantSquares(t,e),i=Ce.getCombatantSquares(t,a);return se.getDistanceAny(s,r)-se.getDistanceAny(i,r)})).map((e=>e.id)));break;case S.Allies:i.push(...Ce.findCombatants(t,l,s).filter((e=>e.id!==n.id)).filter((e=>e.combat.state!==I.Dead)).filter((e=>r?e.faction!==n.faction:e.faction===n.faction)).filter((e=>se.canSeeAny(a,l,Ce.getCombatantSquares(t,e)))).sort(((e,a)=>{const r=Ce.getCombatantSquares(t,n),s=Ce.getCombatantSquares(t,e),i=Ce.getCombatantSquares(t,a);return se.getDistanceAny(s,r)-se.getDistanceAny(i,r)})).map((e=>e.id)));break;case S.Squares:i.push(...Ce.findSquares(t,l,s).filter((e=>se.canSeeAny(a,l,[e]))).sort(((e,t)=>se.getDistance(e,n.combat.position)-se.getDistance(t,n.combat.position))));break;case S.Walls:i.push(...Ce.findWalls(t,l,s).sort(((e,t)=>se.getDistance(e,n.combat.position)-se.getDistance(t,n.combat.position))))}e.targets.count===Number.MAX_VALUE?o=[...i]:(0===o.length||o.some((e=>!i.includes(e))))&&(o=[...i.slice(0,e.targets.count)])}}e.candidates=i,e.value=o};class Te{}be=Te,Te.aptitude=()=>({id:"potion-aptitude",name:"Tonic of Aptitude",packID:p.potions().id,description:"A glass vial filled with a viscous orange liquid.",baseItem:"",magic:!1,proficiency:v.None,location:b.None,slots:1,weapon:null,armor:null,potion:{effects:[Be.addCondition(G.createSkillCategoryBonusCondition(x.Resolve,8,k.Physical))]},features:[],actions:[]}),Te.brilliance=()=>({id:"potion-brilliance",name:"Tincture of Brilliance",packID:p.potions().id,description:"A glass vial filled with a still purple liquid.",baseItem:"",magic:!1,proficiency:v.None,location:b.None,slots:1,weapon:null,armor:null,potion:{effects:[Be.addCondition(G.createSkillCategoryBonusCondition(x.Resolve,8,k.Mental))]},features:[],actions:[]}),Te.health=()=>({id:"potion-health",name:"Potion of Health",packID:p.potions().id,description:"A glass vial filled with a sparkling red liquid.",baseItem:"",magic:!1,proficiency:v.None,location:b.None,slots:1,weapon:null,armor:null,potion:{effects:[Be.healWounds(1)]},features:[],actions:[]}),Te.luck=()=>({id:"potion-luck",name:"Philtre of Luck",packID:p.potions().id,description:"A glass vial filled with a scintillating green liquid.",baseItem:"",magic:!1,proficiency:v.None,location:b.None,slots:1,weapon:null,armor:null,potion:{effects:[Be.addCondition(G.createSkillCategoryBonusCondition(x.Resolve,3,k.Mental)),Be.addCondition(G.createSkillCategoryBonusCondition(x.Resolve,3,k.Physical)),Be.addCondition(G.createTraitBonusCondition(x.Resolve,2,x.Endurance)),Be.addCondition(G.createTraitBonusCondition(x.Resolve,2,x.Resolve)),Be.addCondition(G.createTraitBonusCondition(x.Resolve,2,x.Speed))]},features:[],actions:[]}),Te.might=()=>({id:"potion-might",name:"Elixir of Might",packID:p.potions().id,description:"A glass vial filled with an effervescent blue liquid.",baseItem:"",magic:!1,proficiency:v.None,location:b.None,slots:1,weapon:null,armor:null,potion:{effects:[Be.addCondition(G.createDamageCategoryBonusCondition(x.Resolve,5,y.Physical)),Be.addCondition(G.createDamageCategoryBonusCondition(x.Resolve,5,y.Energy)),Be.addCondition(G.createDamageCategoryBonusCondition(x.Resolve,5,y.Corruption))]},features:[],actions:[]}),Te.resistance=()=>({id:"potion-resistance",name:"Potion of Resistance",packID:p.potions().id,description:"A glass vial filled with an iridescent yellow liquid.",baseItem:"",magic:!1,proficiency:v.None,location:b.None,slots:1,weapon:null,armor:null,potion:{effects:[Be.addCondition(G.createDamageCategoryResistanceCondition(x.Resolve,5,y.Physical)),Be.addCondition(G.createDamageCategoryResistanceCondition(x.Resolve,5,y.Energy)),Be.addCondition(G.createDamageCategoryResistanceCondition(x.Resolve,5,y.Corruption))]},features:[],actions:[]}),Te.strength=()=>({id:"potion-strength",name:"Brew of Strength",packID:p.potions().id,description:"A glass vial filled with a vaprous brown liquid.",baseItem:"",magic:!1,proficiency:v.None,location:b.None,slots:1,weapon:null,armor:null,potion:{effects:[Be.addCondition(G.createTraitBonusCondition(x.Resolve,5,x.Endurance))]},features:[],actions:[]}),Te.will=()=>({id:"potion-will",name:"Brew of Will",packID:p.potions().id,description:"A glass vial filled with a bubbling black liquid.",baseItem:"",magic:!1,proficiency:v.None,location:b.None,slots:1,weapon:null,armor:null,potion:{effects:[Be.addCondition(G.createTraitBonusCondition(x.Resolve,5,x.Resolve))]},features:[],actions:[]}),Te.quickness=()=>({id:"potion-quickness",name:"Brew of Quickness",packID:p.potions().id,description:"A glass vial filled with a churning pink liquid.",baseItem:"",magic:!1,proficiency:v.None,location:b.None,slots:1,weapon:null,armor:null,potion:{effects:[Be.addCondition(G.createTraitBonusCondition(x.Resolve,5,x.Speed))]},features:[],actions:[]}),Te.getList=()=>{const e=[be.aptitude(),be.brilliance(),be.health(),be.luck(),be.might(),be.resistance(),be.strength(),be.will(),be.quickness()];return d.sort(e,(e=>e.name))};class Re{}ve=Re,Re.acrobat=()=>({id:"background-acrobat",name:"Acrobat",packID:"",description:"Quick and lithe, acrobats are difficult to pin down.",startingFeatures:[],features:[J.createTraitFeature("acrobat-feature-2",x.Speed,1),J.createSkillFeature("acrobat-feature-3",C.Reactions,2)],actions:[{id:"acrobat-action-1",name:"Jump Up",prerequisites:[Ie.prone()],parameters:[Pe.self()],effects:[Be.stand(),Be.takeAnotherAction()]},{id:"acrobat-action-2",name:"Burst of Speed",prerequisites:[],parameters:[Pe.self()],effects:[Be.addMovement(),Be.takeAnotherAction()]},{id:"acrobat-action-3",name:"Quickness",prerequisites:[],parameters:[Pe.self()],effects:[Be.addCondition(G.createMovementBonusCondition(x.Endurance,3)),Be.takeAnotherAction()]}]}),Re.apothecary=()=>({id:"background-apothecary",name:"Apothecary",packID:p.potions().id,description:"The apothecary creates potions.",startingFeatures:[],features:[J.createSkillCategoryFeature("apothecary-feature-1",k.Mental,1)],actions:[{id:"apothecary-action-1",name:"Create Tonic of Aptitude",prerequisites:[Ie.carryingCapacity()],parameters:[Pe.self()],effects:[Be.createPotion(Te.aptitude().id)]},{id:"apothecary-action-2",name:"Create Tincture of Brilliance",prerequisites:[Ie.carryingCapacity()],parameters:[Pe.self()],effects:[Be.createPotion(Te.brilliance().id)]},{id:"apothecary-action-3",name:"Create Potion of Health",prerequisites:[Ie.carryingCapacity()],parameters:[Pe.self()],effects:[Be.createPotion(Te.health().id)]},{id:"apothecary-action-4",name:"Create Philtre of Luck",prerequisites:[Ie.carryingCapacity()],parameters:[Pe.self()],effects:[Be.createPotion(Te.luck().id)]},{id:"apothecary-action-5",name:"Create Elixir of Might",prerequisites:[Ie.carryingCapacity()],parameters:[Pe.self()],effects:[Be.createPotion(Te.might().id)]},{id:"apothecary-action-6",name:"Create Potion of Resistance",prerequisites:[Ie.carryingCapacity()],parameters:[Pe.self()],effects:[Be.createPotion(Te.resistance().id)]},{id:"apothecary-action-7",name:"Create Brew of Strength",prerequisites:[Ie.carryingCapacity()],parameters:[Pe.self()],effects:[Be.createPotion(Te.strength().id)]},{id:"apothecary-action-8",name:"Create Brew of Will",prerequisites:[Ie.carryingCapacity()],parameters:[Pe.self()],effects:[Be.createPotion(Te.will().id)]},{id:"apothecary-action-9",name:"Create Brew of Quickness",prerequisites:[Ie.carryingCapacity()],parameters:[Pe.self()],effects:[Be.createPotion(Te.quickness().id)]}]}),Re.bard=()=>({id:"background-bard",name:"Bard",packID:"",description:"The charismatic bard inspires their allies to greatness.",startingFeatures:[],features:[J.createSkillFeature("bard-feature-1",C.Presence,2),J.createSkillCategoryFeature("bard-feature-2",k.Mental,1),J.createProficiencyFeature("bard-feature-3",v.Any)],actions:[{id:"bard-action-1",name:"Song of Health",prerequisites:[],parameters:[Pe.burst(S.Allies,Number.MAX_VALUE,10)],effects:[Be.healDamage(3)]},{id:"bard-action-2",name:"Anthem of Inspiration",prerequisites:[],parameters:[Pe.burst(S.Allies,Number.MAX_VALUE,10)],effects:[Be.addCondition(G.createSkillCategoryBonusCondition(x.Resolve,3,k.Physical))]},{id:"bard-action-3",name:"Melody of Courage",prerequisites:[],parameters:[Pe.burst(S.Allies,Number.MAX_VALUE,10)],effects:[Be.addCondition(G.createSkillCategoryBonusCondition(x.Resolve,3,k.Mental))]},{id:"bard-action-4",name:"Threnody of Lamentation",prerequisites:[],parameters:[Pe.burst(S.Enemies,Number.MAX_VALUE,10)],effects:[Be.attack({weapon:!1,skill:C.Presence,trait:x.Resolve,skillBonus:0,hit:[Be.addCondition(G.createTraitPenaltyCondition(x.Resolve,2,x.Endurance)),Be.addCondition(G.createTraitPenaltyCondition(x.Resolve,2,x.Resolve)),Be.addCondition(G.createTraitPenaltyCondition(x.Resolve,2,x.Speed))]})]}]}),Re.commander=()=>({id:"background-commander",name:"Commander",packID:"",description:"A commander uses tactical analysis to make the most of any situation.",startingFeatures:[],features:[J.createSkillFeature("commander-feature-1",C.Presence,2),J.createAuraDamageCategoryFeature("commander-feature-2",A.DamageCategoryBonus,y.Corruption,1),J.createAuraDamageCategoryFeature("commander-feature-3",A.DamageCategoryBonus,y.Energy,1),J.createAuraDamageCategoryFeature("commander-feature-4",A.DamageCategoryBonus,y.Physical,1),J.createAuraSkillCategoryFeature("commander-feature-5",A.SkillCategoryBonus,k.Physical,1)],actions:[{id:"commander-action-1",name:"Direct the Attack",prerequisites:[],parameters:[Pe.burst(S.Allies,1,10)],effects:[Be.commandAction()]},{id:"commander-action-2",name:"Tactical Positioning",prerequisites:[],parameters:[Pe.burst(S.Allies,Number.MAX_VALUE,10)],effects:[Be.commandMove()]},{id:"commander-action-3",name:"Rally",prerequisites:[],parameters:[Pe.burst(S.Allies,Number.MAX_VALUE,10)],effects:[Be.healDamage(3),Be.stand()]},{id:"commander-action-4",name:"Battlefield Sense",prerequisites:[],parameters:[Pe.burst(S.Enemies,Number.MAX_VALUE,10)],effects:[Be.toSelf([Be.scan()]),Be.reveal(),Be.takeAnotherAction()]}]}),Re.grenadier=()=>({id:"background-grenadier",name:"Grenadier",packID:p.technology().id,description:"Grenadiers use explosives, which are dangerous and difficult to master.",startingFeatures:[],features:[J.createSkillFeature("grenadier-feature-1",C.Perception,2)],actions:[{id:"grenadier-action-1",name:"Demolitions",prerequisites:[Ie.emptyHand()],parameters:[Pe.burst(S.Walls,1,10)],effects:[Be.addSquares()]},{id:"grenadier-action-2",name:"Grenade",prerequisites:[Ie.emptyHand()],parameters:[Ne.distance(8),Pe.burst(S.Combatants,Number.MAX_VALUE,4)],effects:[Be.dealDamage(w.Impact,3),Be.knockDown()]},{id:"grenadier-action-3",name:"Molotov",prerequisites:[Ie.emptyHand()],parameters:[Ne.distance(8),Pe.burst(S.Combatants,Number.MAX_VALUE,4)],effects:[Be.dealDamage(w.Fire,3),Be.addCondition(G.createAutoDamageCondition(x.Endurance,1,w.Fire))]},{id:"grenadier-action-4",name:"Flashbang",prerequisites:[Ie.emptyHand()],parameters:[Ne.distance(8),Pe.burst(S.Combatants,Number.MAX_VALUE,4)],effects:[Be.stun()]}]}),Re.mountebank=()=>({id:"background-mountebank",name:"Mountebank",packID:p.skullduggery().id,description:"Tricksters and con artists, mountebanks make valuable allies and frustrating foes.",startingFeatures:[],features:[J.createSkillFeature("mountebank-feature-1",C.Presence,2),J.createAuraDamageCategoryFeature("mountebank-feature-2",A.DamageCategoryVulnerability,y.Corruption,1),J.createAuraDamageCategoryFeature("mountebank-feature-3",A.DamageCategoryVulnerability,y.Energy,1),J.createAuraDamageCategoryFeature("mountebank-feature-4",A.DamageCategoryVulnerability,y.Physical,1)],actions:[{id:"mountebank-action-1",name:"Jinx",prerequisites:[],parameters:[Pe.burst(S.Enemies,1,5)],effects:[Be.addCondition(G.createSkillPenaltyCondition(x.Resolve,5,C.All))]},{id:"mountebank-action-2",name:"Expose Weakness",prerequisites:[],parameters:[Pe.burst(S.Enemies,1,5)],effects:[Be.addCondition(G.createDamageVulnerabilityCondition(x.Resolve,5,w.All))]},{id:"mountebank-action-3",name:"Roll the Dice",prerequisites:[],parameters:[Pe.self()],effects:[Be.invertConditions(!0)]}]}),Re.mystic=()=>({id:"background-mystic",name:"Mystic",packID:p.arcana().id,description:"Mystics are the masters of the arcane arts.",startingFeatures:[],features:[J.createSkillFeature("mystic-feature-1",C.Spellcasting,2),J.createDamageCategoryBonusFeature("mystic-feature-2",y.Energy,1),J.createDamageCategoryResistFeature("mystic-feature-3",y.Energy,1),J.createDamageCategoryBonusFeature("mystic-feature-4",y.Corruption,1),J.createDamageCategoryResistFeature("mystic-feature-5",y.Corruption,1)],actions:[{id:"mystic-action-1",name:"Confusion",prerequisites:[],parameters:[Pe.burst(S.Enemies,1,5)],effects:[Be.commandAction()]},{id:"mystic-action-2",name:"Sympathetic Affliction",prerequisites:[Ie.condition(x.Any)],parameters:[Pe.burst(S.Enemies,1,5)],effects:[Be.transferCondition()]},{id:"mystic-action-3",name:"Eldritch Reversal",prerequisites:[],parameters:[Pe.burst(S.Combatants,1,5)],effects:[Be.invertConditions(!1)]}]}),Re.noble=()=>({id:"background-noble",name:"Noble",packID:"",description:"Though they can be haughty, nobles bring an imposing presence to a battlefield.",startingFeatures:[],features:[J.createSkillFeature("noble-feature-1",C.Presence,2),J.createAuraFeature("noble-feature-2",A.MovementBonus,1),J.createAuraTraitFeature("noble-feature-3",A.TraitBonus,x.Endurance,1),J.createAuraTraitFeature("noble-feature-4",A.TraitBonus,x.Resolve,1),J.createAuraTraitFeature("noble-feature-5",A.TraitBonus,x.Speed,1)],actions:[{id:"noble-action-1",name:"Boost Morale",prerequisites:[],parameters:[Pe.burst(S.Allies,Number.MAX_VALUE,5)],effects:[Be.addCondition(G.createSkillBonusCondition(x.Resolve,3,C.All))]},{id:"noble-action-2",name:"Dishearten",prerequisites:[],parameters:[Pe.burst(S.Enemies,Number.MAX_VALUE,5)],effects:[Be.addCondition(G.createSkillPenaltyCondition(x.Resolve,3,C.All))]},{id:"noble-action-3",name:"Taunt",prerequisites:[],parameters:[Pe.burst(S.Enemies,Number.MAX_VALUE,5)],effects:[Be.attack({weapon:!1,skill:C.Presence,trait:x.Resolve,skillBonus:0,hit:[Be.stun()]})]}]}),Re.physician=()=>({id:"background-physician",name:"Physician",packID:"",description:"For many groups, a physician is the difference between life and death.",startingFeatures:[],features:[J.createAuraFeature("physician-feature-1",A.AutoHeal,1)],actions:[{id:"physician-action-1",name:"Remove Affliction",prerequisites:[],parameters:[Pe.burst(S.Allies,Number.MAX_VALUE,5)],effects:[Be.removeCondition(x.Any)]},{id:"physician-action-2",name:"First Aid",prerequisites:[],parameters:[Pe.adjacent(S.Allies,1)],effects:[Be.healDamage(5),Be.healWounds(2)]},{id:"physician-action-3",name:"Heal Thyself",prerequisites:[Ie.wound()],parameters:[Pe.self()],effects:[Be.healWounds(2)]}]}),Re.reaver=()=>({id:"background-reaver",name:"Reaver",packID:"",description:"Reavers are rarely satisfied with anything other than carnage.",startingFeatures:[],features:[J.createSkillFeature("reaver-feature-1",C.Brawl,2),J.createSkillFeature("reaver-feature-2",C.Weapon,2),J.createDamageCategoryResistFeature("reaver-feature-3",y.Any,1),J.createDamageCategoryBonusFeature("reaver-feature-4",y.Physical,1),J.createAuraDamageFeature("reaver-feature-5",A.AutoDamage,w.Edged,1),J.createAuraDamageFeature("reaver-feature-6",A.AutoDamage,w.Impact,1),J.createAuraDamageFeature("reaver-feature-7",A.AutoDamage,w.Piercing,1)],actions:[{id:"reaver-action-1",name:"Frenzy",prerequisites:[],parameters:[Pe.self()],effects:[Be.addCondition(G.createDamageCategoryBonusCondition(x.Resolve,5,y.Physical))]},{id:"reaver-action-2",name:"Adrenaline",prerequisites:[],parameters:[Pe.self()],effects:[Be.addCondition(G.createMovementBonusCondition(x.Endurance,5)),Be.addCondition(G.createTraitBonusCondition(x.Endurance,3,x.Speed))]},{id:"reaver-action-3",name:"Fortitude",prerequisites:[],parameters:[Pe.self()],effects:[Be.addCondition(G.createTraitBonusCondition(x.Endurance,3,x.Endurance)),Be.addCondition(G.createTraitBonusCondition(x.Endurance,3,x.Resolve))]}]}),Re.sentinel=()=>({id:"background-sentinel",name:"Sentinel",packID:"",description:"Nothing gets past a sentinel unless they allow it.",startingFeatures:[],features:[J.createTraitFeature("sentinel-feature-1",x.Endurance,1),J.createTraitFeature("sentinel-feature-2",x.Resolve,1),J.createDamageResistFeature("sentinel-feature-3",w.All,1),J.createAuraFeature("sentinel-feature-4",A.MovementPenalty,1),J.createAuraDamageCategoryFeature("sentinel-feature-5",A.DamageCategoryResistance,y.Physical,3),J.createAuraDamageCategoryFeature("sentinel-feature-6",A.DamageCategoryResistance,y.Energy,3),J.createAuraDamageCategoryFeature("sentinel-feature-7",A.DamageCategoryResistance,y.Corruption,3)],actions:[{id:"sentinel-action-1",name:"Mark Enemy",prerequisites:[],parameters:[Pe.adjacent(S.Enemies,1)],effects:[Be.addCondition(G.createMovementPenaltyCondition(x.Speed,4)),Be.takeAnotherAction()]},{id:"sentinel-action-2",name:"Unyielding Stance",prerequisites:[],parameters:[Pe.self()],effects:[Be.addCondition(G.createTraitBonusCondition(x.Endurance,3,x.Endurance)),Be.addCondition(G.createTraitBonusCondition(x.Endurance,3,x.Resolve))]},{id:"sentinel-action-3",name:"Keep Close",prerequisites:[],parameters:[Pe.burst(S.Enemies,1,5)],effects:[Be.forceMovement(K.Pull,3)]}]}),Re.thief=()=>({id:"background-thief",name:"Thief",packID:p.skullduggery().id,description:"Never put your trust in a thief, even when they're on your side.",startingFeatures:[],features:[J.createSkillFeature("thief-feature-1",C.Reactions,2),J.createSkillFeature("thief-feature-2",C.Stealth,2),J.createTraitFeature("thief-feature-3",x.Speed,1)],actions:[{id:"thief-action-1",name:"Steal",prerequisites:[Ie.carryingCapacity()],parameters:[Pe.adjacent(S.Enemies,1)],effects:[Be.attack({weapon:!1,skill:C.Reactions,trait:x.Speed,skillBonus:0,hit:[Be.steal()]})]},{id:"thief-action-2",name:"Stake Out",prerequisites:[],parameters:[Pe.burst(S.Enemies,1,5)],effects:[Be.addCondition(G.createDamageVulnerabilityCondition(x.Resolve,5,w.All))]},{id:"thief-action-3",name:"Hide",prerequisites:[],parameters:[Pe.self()],effects:[Be.hide(),Be.takeAnotherAction()]}]}),Re.zealot=()=>({id:"background-zealot",name:"Zealot",packID:p.faith().id,description:"A religious fanatic, empowered by the strength of their convictions.",startingFeatures:[],features:[J.createSkillFeature("reaver-feature-1",C.Brawl,2),J.createSkillFeature("reaver-feature-2",C.Weapon,2),J.createDamageCategoryBonusFeature("reaver-feature-4",y.Any,1)],actions:[{id:"zealot-action-1",name:"Fanatic's Strength",prerequisites:[],parameters:[Pe.self()],effects:[Be.addCondition(G.createDamageCategoryBonusCondition(x.Resolve,2,y.Physical)),Be.addCondition(G.createDamageCategoryBonusCondition(x.Resolve,2,y.Energy)),Be.addCondition(G.createDamageCategoryBonusCondition(x.Resolve,2,y.Corruption))]},{id:"zealot-action-2",name:"Fanatic's Speed",prerequisites:[],parameters:[Pe.self()],effects:[Be.addCondition(G.createMovementBonusCondition(x.Endurance,2)),Be.takeAnotherAction()]},{id:"zealot-action-3",name:"Righteous Will",prerequisites:[],parameters:[Pe.self()],effects:[Be.invertConditions(!1),Be.addCondition(G.createTraitBonusCondition(x.Endurance,2,x.Endurance)),Be.addCondition(G.createTraitBonusCondition(x.Endurance,2,x.Resolve)),Be.addCondition(G.createTraitBonusCondition(x.Endurance,2,x.Resolve))]}]}),Re.getList=()=>{const e=[ve.acrobat(),ve.apothecary(),ve.bard(),ve.commander(),ve.grenadier(),ve.mountebank(),ve.mystic(),ve.noble(),ve.physician(),ve.reaver(),ve.sentinel(),ve.thief(),ve.zealot()];return e.forEach((e=>{e.startingFeatures=d.sort(e.startingFeatures,(e=>J.getFeatureTitle(e))),e.features=d.sort(e.features,(e=>J.getFeatureTitle(e))),e.actions=d.sort(e.actions,(e=>e.name))})),d.sort(e,(e=>e.name))};class qe{}ke=qe,qe.human=()=>({id:"species-human",name:"Human",packID:"",description:"Humans are resourceful and adaptable.",type:N.Hero,size:1,quirks:[],startingFeatures:[J.createTraitFeature("human-start-1",x.Endurance,1),J.createTraitFeature("human-start-2",x.Resolve,1),J.createTraitFeature("human-start-3",x.Speed,1)],features:[J.createTraitFeature("human-feature-1",x.Any,1),J.createSkillFeature("human-feature-2",C.Any,2)],actions:[{id:"human-action-1",name:"Resilient",prerequisites:[Ie.condition(x.Any)],parameters:[Pe.self()],effects:[Be.removeCondition(x.Any)]},{id:"human-action-2",name:"Resourceful",prerequisites:[],parameters:[Pe.self()],effects:[Be.takeAnotherAction(!0)]}]}),qe.construct=()=>({id:"species-construct",name:"Construct",packID:p.technology().id,description:"A living automaton.",type:N.Hero,size:1,quirks:[],startingFeatures:[J.createTraitFeature("construct-start-1",x.Endurance,1),J.createSkillFeature("construct-start-2",C.Brawl,2),J.createDamageResistFeature("construct-start-3",w.Poison,2),J.createDamageResistFeature("construct-start-4",w.Psychic,2)],features:[J.createTraitFeature("construct-feature-1",x.Endurance,1),J.createSkillFeature("construct-start-2",C.Brawl,2),J.createDamageResistFeature("construct-feature-3",w.Poison,2),J.createDamageResistFeature("construct-feature-4",w.Psychic,2)],actions:[{id:"construct-action-1",name:"Knockdown",prerequisites:[],parameters:[Pe.adjacent(S.Enemies,1)],effects:[Be.attack({weapon:!1,skill:C.Brawl,trait:x.Endurance,skillBonus:0,hit:[Be.dealDamage(w.Impact,2),Be.knockDown()]})]},{id:"construct-action-2",name:"Repair",prerequisites:[Ie.damage()],parameters:[Pe.self()],effects:[Be.healDamage(1),Be.takeAnotherAction()]}]}),qe.deva=()=>({id:"species-deva",name:"Deva",packID:p.faith().id,description:"A humanoid with angelic ancestry.",type:N.Hero,size:1,quirks:[],startingFeatures:[J.createTraitFeature("deva-start-1",x.Resolve,1),J.createSkillFeature("deva-start-2",C.Presence,2),J.createDamageCategoryResistFeature("deva-start-3",y.Corruption,1)],features:[J.createTraitFeature("deva-feature-1",x.Resolve,1),J.createSkillFeature("deva-feature-2",C.Presence,2),J.createDamageCategoryResistFeature("deva-feature-3",y.Corruption,1),J.createAuraDamageFeature("deva-feature-4",A.AutoDamage,w.Light,1)],actions:[{id:"deva-action-1",name:"Divine Radiance",prerequisites:[],parameters:[Pe.burst(S.Enemies,Number.MAX_VALUE,2)],effects:[Be.attack({weapon:!1,skill:C.Presence,trait:x.Endurance,skillBonus:0,hit:[Be.stun()]})]},{id:"deva-action-2",name:"Divine Light",prerequisites:[],parameters:[Pe.burst(S.Enemies,Number.MAX_VALUE,2)],effects:[Be.attack({weapon:!1,skill:C.Presence,trait:x.Endurance,skillBonus:0,hit:[Be.dealDamage(w.Light,2)]})]}]}),qe.dwarf=()=>({id:"species-dwarf",name:"Dwarf",packID:"",description:"A short, sturdy creature, fond of drink and industry.",type:N.Hero,size:1,quirks:[],startingFeatures:[J.createTraitFeature("dwarf-start-1",x.Endurance,1),J.createTraitFeature("dwarf-start-2",x.Resolve,1)],features:[J.createTraitFeature("dwarf-feature-1",x.Endurance,1),J.createTraitFeature("dwarf-feature-2",x.Resolve,1),J.createDamageResistFeature("dwarf-feature-3",w.Poison,2),J.createDamageResistFeature("dwarf-feature-4",w.Psychic,2)],actions:[{id:"dwarf-action-1",name:"Dwarven Constitution",prerequisites:[Ie.condition(x.Endurance)],parameters:[Pe.self()],effects:[Be.removeCondition(x.Endurance),Be.takeAnotherAction()]},{id:"dwarf-action-2",name:"Dwarven Discipline",prerequisites:[Ie.condition(x.Resolve)],parameters:[Pe.self()],effects:[Be.removeCondition(x.Resolve),Be.takeAnotherAction()]}]}),qe.elf=()=>({id:"species-elf",name:"Elf",packID:"",description:"An elegant forest-dwelling creature.",type:N.Hero,size:1,quirks:[],startingFeatures:[J.createTraitFeature("elf-start-1",x.Speed,1),J.createSkillFeature("elf-start-2",C.Perception,2),J.createSkillFeature("elf-start-3",C.Reactions,2),J.createSkillFeature("elf-start-4",C.Stealth,2)],features:[J.createTraitFeature("elf-feature-1",x.Speed,1),J.createSkillFeature("elf-feature-2",C.Perception,2),J.createSkillFeature("elf-feature-3",C.Reactions,2),J.createSkillFeature("elf-feature-4",C.Stealth,2)],actions:[{id:"elf-action-1",name:"Seelie Step",prerequisites:[],parameters:[Pe.burst(S.Squares,1,10)],effects:[Be.moveToTargetSquare()]},{id:"elf-action-2",name:"Elven Senses",prerequisites:[],parameters:[Pe.self()],effects:[Be.scan(),Be.takeAnotherAction()]}]}),qe.faun=()=>({id:"species-faun",name:"Faun",packID:p.fae().id,description:"A humanoid with powerful goat-like legs.",type:N.Hero,size:1,quirks:[],startingFeatures:[J.createTraitFeature("faun-start-1",x.Speed,1),J.createSkillFeature("faun-start-2",C.Brawl,2),J.createSkillFeature("faun-start-3",C.Reactions,2)],features:[J.createTraitFeature("faun-feature-1",x.Speed,1),J.createSkillFeature("faun-feature-2",C.Brawl,2),J.createSkillFeature("faun-feature-3",C.Reactions,2)],actions:[{id:"faun-action-1",name:"Quick Leap",prerequisites:[],parameters:[Pe.burst(S.Enemies,1,4)],effects:[Be.forceMovement(K.BesideTarget,1),Be.takeAnotherAction()]},{id:"faun-action-2",name:"Knockdown Jump",prerequisites:[],parameters:[Pe.burst(S.Enemies,1,4)],effects:[Be.forceMovement(K.BesideTarget,1),Be.knockDown()]},{id:"faun-action-3",name:"Powerful Kick",prerequisites:[],parameters:[Pe.adjacent(S.Enemies,1)],effects:[Be.attack({weapon:!1,skill:C.Brawl,trait:x.Speed,skillBonus:0,hit:[Be.dealDamage(w.Impact,3),Be.forceMovement(K.Push,1)]})]}]}),qe.gnome=()=>({id:"species-gnome",name:"Gnome",packID:"",description:"A short creature who often prefers to be unseen.",type:N.Hero,size:1,quirks:[],startingFeatures:[J.createTraitFeature("gnome-start-1",x.Speed,1),J.createSkillFeature("gnome-start-2",C.Reactions,2),J.createSkillFeature("gnome-start-3",C.Stealth,2)],features:[J.createTraitFeature("gnome-feature-1",x.Speed,1),J.createSkillFeature("gnome-feature-2",C.Reactions,2),J.createSkillFeature("gnome-feature-3",C.Stealth,2)],actions:[{id:"gnome-action-1",name:"Trip",prerequisites:[],parameters:[Pe.adjacent(S.Enemies,1)],effects:[Be.attack({weapon:!1,skill:C.Brawl,trait:x.Endurance,skillBonus:0,hit:[Be.knockDown()]})]},{id:"gnome-action-2",name:"Fade Away",prerequisites:[],parameters:[Pe.self()],effects:[Be.hide(),Be.takeAnotherAction()]}]}),qe.minotaur=()=>({id:"species-minotaur",name:"Minotaur",packID:p.beasts().id,description:"A muscular humanoid with the head of a bull.",type:N.Hero,size:1,quirks:[],startingFeatures:[J.createTraitFeature("minotaur-start-1",x.Endurance,1),J.createSkillFeature("minotaur-start-2",C.Brawl,2),J.createSkillFeature("minotaur-start-3",C.Presence,2),J.createDamageCategoryBonusFeature("minotaur-start-4",y.Physical,1)],features:[J.createTraitFeature("minotaur-feature-1",x.Endurance,1),J.createSkillFeature("minotaur-feature-2",C.Brawl,2),J.createSkillFeature("minotaur-feature-3",C.Presence,2),J.createDamageCategoryBonusFeature("minotaur-feature-4",y.Physical,1)],actions:[{id:"minotaur-action-1",name:"Gore",prerequisites:[],parameters:[Pe.adjacent(S.Enemies,1)],effects:[Be.attack({weapon:!1,skill:C.Brawl,trait:x.Speed,skillBonus:0,hit:[Be.dealDamage(w.Piercing,3)]})]},{id:"minotaur-action-2",name:"Bull Rush",prerequisites:[],parameters:[Pe.burst(S.Enemies,1,5)],effects:[Be.forceMovement(K.TowardsTarget,2),Be.attack({weapon:!1,skill:C.Brawl,trait:x.Speed,skillBonus:0,hit:[Be.dealDamage(w.Piercing,2)]})]},{id:"minotaur-action-3",name:"Bellow",prerequisites:[],parameters:[Pe.burst(S.Combatants,Number.MAX_VALUE,5)],effects:[Be.attack({weapon:!1,skill:C.Brawl,trait:x.Endurance,skillBonus:0,hit:[Be.dealDamage(w.Sonic,1)]})]},{id:"minotaur-action-4",name:"Intimidate",prerequisites:[],parameters:[Pe.burst(S.Enemies,1,5)],effects:[Be.attack({weapon:!1,skill:C.Presence,trait:x.Resolve,skillBonus:0,hit:[Be.forceMovement(K.Push,1),Be.stun()]})]}]}),qe.pixie=()=>({id:"species-pixie",name:"Pixie",packID:p.fae().id,description:"A tiny fairy-like creature.",type:N.Hero,size:1,quirks:[],startingFeatures:[J.createTraitFeature("pixie-start-1",x.Speed,1),J.createSkillFeature("pixie-start-2",C.Stealth,2),J.createDamageCategoryResistFeature("pixie-start-3",y.Corruption,1)],features:[J.createTraitFeature("pixie-feature-1",x.Speed,1),J.createSkillFeature("pixie-feature-2",C.Stealth,2),J.createDamageCategoryResistFeature("pixie-feature-3",y.Corruption,1)],actions:[{id:"pixie-action-1",name:"Confound",prerequisites:[],parameters:[Pe.burst(S.Enemies,1,5)],effects:[Be.commandAction()]},{id:"pixie-action-2",name:"Blink",prerequisites:[],parameters:[Pe.burst(S.Squares,1,3)],effects:[Be.moveToTargetSquare(),Be.takeAnotherAction()]}]}),qe.reptilian=()=>({id:"species-reptilian",name:"Reptilian",packID:p.coldBlood().id,description:"A scaly humanoid with draconic ancestry.",type:N.Hero,size:1,quirks:[],startingFeatures:[J.createTraitFeature("reptilian-start-1",x.Speed,1),J.createSkillFeature("reptilian-start-2",C.Brawl,2),J.createSkillFeature("reptilian-start-3",C.Presence,2)],features:[J.createTraitFeature("reptilian-feature-1",x.Speed,1),J.createSkillFeature("reptilian-feature-2",C.Brawl,2),J.createSkillFeature("reptilian-feature-3",C.Presence,2),J.createDamageCategoryResistFeature("reptilian-feature-4",y.Physical,1),J.createDamageResistFeature("reptilian-feature-5",w.Psychic,2)],actions:[{id:"reptilian-action-1",name:"Breathe Fire",prerequisites:[],parameters:[Pe.burst(S.Enemies,1,3)],effects:[Be.attack({weapon:!1,skill:C.Brawl,trait:x.Speed,skillBonus:0,hit:[Be.dealDamage(w.Fire,3)]})]},{id:"reptilian-action-2",name:"Regeneration",prerequisites:[Ie.wound()],parameters:[Pe.self()],effects:[Be.healWounds(1)]},{id:"reptilian-action-3",name:"Intimidating Presence",prerequisites:[],parameters:[Pe.burst(S.Enemies,Number.MAX_VALUE,5)],effects:[Be.attack({weapon:!1,skill:C.Presence,trait:x.Resolve,skillBonus:0,hit:[Be.forceMovement(K.Push,1),Be.stun()]})]}]}),qe.werewolf=()=>({id:"species-werewolf",name:"Werewolf",packID:p.beasts().id,description:"A creature cursed with a wolf form.",type:N.Hero,size:1,quirks:[],startingFeatures:[J.createTraitFeature("werewolf-start-1",x.Resolve,1),J.createSkillFeature("werewolf-start-2",C.Brawl,2),J.createSkillFeature("werewolf-start-3",C.Perception,2),J.createSkillFeature("werewolf-start-4",C.Stealth,2)],features:[J.createTraitFeature("werewolf-feature-1",x.Resolve,1),J.createSkillFeature("werewolf-feature-2",C.Brawl,2),J.createSkillFeature("werewolf-feature-3",C.Perception,2),J.createSkillFeature("werewolf-feature-4",C.Stealth,2)],actions:[{id:"werewolf-action-1",name:"Regeneration",prerequisites:[Ie.damage()],parameters:[Pe.self()],effects:[Be.addCondition(G.createAutoHealCondition(x.Endurance,2))]},{id:"werewolf-action-2",name:"Bite",prerequisites:[],parameters:[Pe.adjacent(S.Enemies,1)],effects:[Be.attack({weapon:!1,skill:C.Brawl,trait:x.Speed,skillBonus:0,hit:[Be.dealDamage(w.Piercing,3)]})]},{id:"werewolf-action-3",name:"Maul",prerequisites:[Ie.emptyHand()],parameters:[Pe.adjacent(S.Enemies,1)],effects:[Be.attack({weapon:!1,skill:C.Brawl,trait:x.Speed,skillBonus:0,hit:[Be.dealDamage(w.Edged,3)]})]}]}),qe.getList=()=>{const e=[ke.human(),ke.construct(),ke.deva(),ke.dwarf(),ke.elf(),ke.faun(),ke.gnome(),ke.minotaur(),ke.pixie(),ke.reptilian(),ke.werewolf()];return e.forEach((e=>{e.startingFeatures=d.sort(e.startingFeatures,(e=>J.getFeatureTitle(e))),e.features=d.sort(e.features,(e=>J.getFeatureTitle(e))),e.actions=d.sort(e.actions,(e=>e.name))})),d.sort(e,(e=>e.name))};class Le{}Le.getList=()=>{const e=[{id:"item-sword",name:"Sword",packID:"",description:"Three feet long and sharp on both sides.",baseItem:"",magic:!1,proficiency:v.MilitaryWeapons,location:b.Hand,slots:1,weapon:{damage:[{type:w.Edged,rank:3}],range:1,unreliable:0},armor:null,potion:null,features:[],actions:[]},{id:"item-katana",name:"Katana",packID:"",description:"An elegant single-edged blade with a slight curve.",baseItem:"",magic:!1,proficiency:v.MilitaryWeapons,location:b.Hand,slots:1,weapon:{damage:[{type:w.Edged,rank:3}],range:1,unreliable:0},armor:null,potion:null,features:[],actions:[]},{id:"item-scimitar",name:"Scimitar",packID:"",description:"A wickedly-curved blade.",baseItem:"",magic:!1,proficiency:v.MilitaryWeapons,location:b.Hand,slots:1,weapon:{damage:[{type:w.Edged,rank:3}],range:1,unreliable:0},armor:null,potion:null,features:[],actions:[]},{id:"item-handaxe",name:"Handaxe",packID:"",description:"A chopping blade at the end of a wooden haft.",baseItem:"",magic:!1,proficiency:v.MilitaryWeapons,location:b.Hand,slots:1,weapon:{damage:[{type:w.Edged,rank:3}],range:1,unreliable:0},armor:null,potion:null,features:[],actions:[]},{id:"item-khopesh",name:"Khopesh",packID:"",description:"An intimidatingly-hooked sword.",baseItem:"",magic:!1,proficiency:v.MilitaryWeapons,location:b.Hand,slots:1,weapon:{damage:[{type:w.Edged,rank:3}],range:1,unreliable:0},armor:null,potion:null,features:[],actions:[]},{id:"item-mace",name:"Mace",packID:"",description:"A simple bludgeoning weapon.",baseItem:"",magic:!1,proficiency:v.MilitaryWeapons,location:b.Hand,slots:1,weapon:{damage:[{type:w.Impact,rank:3}],range:1,unreliable:0},armor:null,potion:null,features:[],actions:[]},{id:"item-flail",name:"Flail",packID:"",description:"A length of metal chain at the end of a wooden haft.",baseItem:"",magic:!1,proficiency:v.MilitaryWeapons,location:b.Hand,slots:1,weapon:{damage:[{type:w.Impact,rank:4}],range:1,unreliable:1},armor:null,potion:null,features:[],actions:[]},{id:"item-spear",name:"Spear",packID:"",description:"A long haft, topped with a sharp metal point.",baseItem:"",magic:!1,proficiency:v.MilitaryWeapons,location:b.Hand,slots:1,weapon:{damage:[{type:w.Piercing,rank:2}],range:2,unreliable:0},armor:null,potion:null,features:[],actions:[]},{id:"item-mattock",name:"Mattock",packID:"",description:"A smaller, one-handed warhammer.",baseItem:"",magic:!1,proficiency:v.MilitaryWeapons,location:b.Hand,slots:1,weapon:{damage:[{type:w.Piercing,rank:3}],range:1,unreliable:0},armor:null,potion:null,features:[],actions:[]},{id:"item-rapier",name:"Rapier",packID:"",description:"A sword with a thin, pointed blade.",baseItem:"",magic:!1,proficiency:v.MilitaryWeapons,location:b.Hand,slots:1,weapon:{damage:[{type:w.Piercing,rank:3}],range:1,unreliable:0},armor:null,potion:null,features:[],actions:[]},{id:"item-greatsword",name:"Greatsword",packID:"",description:"A large, two-handed sword.",baseItem:"",magic:!1,proficiency:v.LargeWeapons,location:b.Hand,slots:2,weapon:{damage:[{type:w.Edged,rank:5}],range:1,unreliable:0},armor:null,potion:null,features:[],actions:[]},{id:"item-battleaxe",name:"Battleaxe",packID:"",description:"A heavy axe that requires two hands to wield it.",baseItem:"",magic:!1,proficiency:v.LargeWeapons,location:b.Hand,slots:2,weapon:{damage:[{type:w.Edged,rank:5}],range:1,unreliable:0},armor:null,potion:null,features:[],actions:[]},{id:"item-glaive",name:"Glaive",packID:"",description:"A sword blade mounted at the end of a long haft.",baseItem:"",magic:!1,proficiency:v.LargeWeapons,location:b.Hand,slots:2,weapon:{damage:[{type:w.Edged,rank:4}],range:2,unreliable:0},armor:null,potion:null,features:[],actions:[]},{id:"item-warhammer",name:"Warhammer",packID:"",description:"A heavy, blunt-faced crushing weapon.",baseItem:"",magic:!1,proficiency:v.LargeWeapons,location:b.Hand,slots:2,weapon:{damage:[{type:w.Impact,rank:5}],range:1,unreliable:0},armor:null,potion:null,features:[],actions:[]},{id:"item-quarterstaff",name:"Quarterstaff",packID:"",description:"A sturdy wooden stick, as tall as a person.",baseItem:"",magic:!1,proficiency:v.LargeWeapons,location:b.Hand,slots:2,weapon:{damage:[{type:w.Impact,rank:5}],range:1,unreliable:0},armor:null,potion:null,features:[],actions:[]},{id:"item-pike",name:"Pike",packID:"",description:"A spear point mounted at the end of a long haft.",baseItem:"",magic:!1,proficiency:v.LargeWeapons,location:b.Hand,slots:2,weapon:{damage:[{type:w.Piercing,rank:4}],range:2,unreliable:0},armor:null,potion:null,features:[],actions:[]},{id:"item-halberd",name:"Halberd",packID:"",description:"An axe blade mounted at the end of a long haft.",baseItem:"",magic:!1,proficiency:v.LargeWeapons,location:b.Hand,slots:2,weapon:{damage:[{type:w.Edged,rank:4}],range:2,unreliable:0},armor:null,potion:null,features:[],actions:[]},{id:"item-trident",name:"Trident",packID:"",description:"A three-pronged spear.",baseItem:"",magic:!1,proficiency:v.LargeWeapons,location:b.Hand,slots:2,weapon:{damage:[{type:w.Piercing,rank:5}],range:1,unreliable:0},armor:null,potion:null,features:[],actions:[]},{id:"item-dagger",name:"Daggers",packID:"",description:"Simple small blades, easily hidden.",baseItem:"",magic:!1,proficiency:v.PairedWeapons,location:b.Hand,slots:2,weapon:{damage:[{type:w.Edged,rank:2}],range:1,unreliable:0},armor:null,potion:null,features:[],actions:[]},{id:"item-sai",name:"Sais",packID:"",description:"Pointed daggers with sharp side-prongs.",baseItem:"",magic:!1,proficiency:v.PairedWeapons,location:b.Hand,slots:2,weapon:{damage:[{type:w.Piercing,rank:2}],range:1,unreliable:0},armor:null,potion:null,features:[],actions:[]},{id:"item-tonfas",name:"Tonfas",packID:"",description:"Wooden batons with a perpendicular handle.",baseItem:"",magic:!1,proficiency:v.PairedWeapons,location:b.Hand,slots:2,weapon:{damage:[{type:w.Impact,rank:2}],range:1,unreliable:0},armor:null,potion:null,features:[],actions:[]},{id:"item-longbow",name:"Longbow",packID:"",description:"Longbows loose arrows with great accuracy.",baseItem:"",magic:!1,proficiency:v.RangedWeapons,location:b.Hand,slots:2,weapon:{damage:[{type:w.Piercing,rank:3}],range:15,unreliable:0},armor:null,potion:null,features:[],actions:[]},{id:"item-crossbow",name:"Crossbow",packID:"",description:"A device which can launch wooden bolts hundreds of feet.",baseItem:"",magic:!1,proficiency:v.RangedWeapons,location:b.Hand,slots:2,weapon:{damage:[{type:w.Piercing,rank:4}],range:20,unreliable:1},armor:null,potion:null,features:[],actions:[]},{id:"item-catapult",name:"Catapult",packID:"",description:"A simple device for launching rocks and other small blunt projectiles.",baseItem:"",magic:!1,proficiency:v.RangedWeapons,location:b.Hand,slots:2,weapon:{damage:[{type:w.Impact,rank:3}],range:10,unreliable:1},armor:null,potion:null,features:[],actions:[]},{id:"item-rifle",name:"Rifle",packID:p.technology().id,description:"A large gun that requires two hands to use.",baseItem:"",magic:!1,proficiency:v.PowderWeapons,location:b.Hand,slots:2,weapon:{damage:[{type:w.Piercing,rank:8}],range:20,unreliable:2},armor:null,potion:null,features:[],actions:[]},{id:"item-carbine",name:"Carbine",packID:p.technology().id,description:"Smaller than a rifle, larger than a pistol.",baseItem:"",magic:!1,proficiency:v.PowderWeapons,location:b.Hand,slots:2,weapon:{damage:[{type:w.Piercing,rank:7}],range:15,unreliable:2},armor:null,potion:null,features:[],actions:[]},{id:"item-pistol",name:"Pistol",packID:"",description:"A less powerful hand-held gun.",baseItem:"",magic:!1,proficiency:v.PowderWeapons,location:b.Hand,slots:1,weapon:{damage:[{type:w.Piercing,rank:6}],range:10,unreliable:2},armor:null,potion:null,features:[],actions:[]},{id:"item-orb",name:"Orb",packID:"",description:"A crystal ball.",baseItem:"",magic:!1,proficiency:v.Implements,location:b.Hand,slots:1,weapon:null,armor:null,potion:null,features:[],actions:[]},{id:"item-wand",name:"Wand",packID:"",description:"A small wooden rod.",baseItem:"",magic:!1,proficiency:v.Implements,location:b.Hand,slots:1,weapon:null,armor:null,potion:null,features:[],actions:[]},{id:"item-tome",name:"Tome",packID:"",description:"A spellbook or grimoire.",baseItem:"",magic:!1,proficiency:v.Implements,location:b.Hand,slots:2,weapon:null,armor:null,potion:null,features:[],actions:[]},{id:"item-amulet",name:"Amulet",packID:"",description:"A magical symbol worn around the neck.",baseItem:"",magic:!1,proficiency:v.Implements,location:b.Neck,slots:1,weapon:null,armor:null,potion:null,features:[],actions:[]},{id:"item-staff",name:"Staff",packID:"",description:"A magical walking stick.",baseItem:"",magic:!1,proficiency:v.Implements,location:b.Hand,slots:2,weapon:null,armor:null,potion:null,features:[],actions:[]},{id:"item-leather-armor",name:"Leather Armor",packID:"",description:"Armor made of tanned animal skin.",baseItem:"",magic:!1,proficiency:v.LightArmor,location:b.Body,slots:1,weapon:null,armor:{features:[J.createDamageCategoryResistFeature("leatherarmour-1",y.Physical,1)]},potion:null,features:[],actions:[]},{id:"item-hide-armor",name:"Hide Armor",packID:"",description:"The thick hide of a beast, used as armor.",baseItem:"",magic:!1,proficiency:v.LightArmor,location:b.Body,slots:1,weapon:null,armor:{features:[J.createDamageCategoryResistFeature("hidearmour-1",y.Physical,2),J.createSkillCategoryFeature("hidearmour-2",k.Physical,-1)]},potion:null,features:[],actions:[]},{id:"item-brigandine-armor",name:"Brigandine Armor",packID:"",description:"Armor made of small metal plates sewn into fabric.",baseItem:"",magic:!1,proficiency:v.LightArmor,location:b.Body,slots:1,weapon:null,armor:{features:[J.createDamageCategoryResistFeature("brigandinearmour-1",y.Physical,3),J.createSkillCategoryFeature("brigandinearmour-2",k.Physical,-1),J.createTraitFeature("brigandinearmour-3",x.Speed,-1)]},potion:null,features:[],actions:[]},{id:"item-breastplate",name:"Breastplate",packID:"",description:"Armor for the torso, made of leather or metal.",baseItem:"",magic:!1,proficiency:v.LightArmor,location:b.Body,slots:1,weapon:null,armor:{features:[J.createDamageCategoryResistFeature("brigandinearmour-1",y.Physical,3),J.createSkillCategoryFeature("brigandinearmour-2",k.Physical,-2)]},potion:null,features:[],actions:[]},{id:"item-chain-armor",name:"Chain Armor",packID:"",description:"Armor made of tiny interwoven metal rings.",baseItem:"",magic:!1,proficiency:v.HeavyArmor,location:b.Body,slots:1,weapon:null,armor:{features:[J.createDamageCategoryResistFeature("chainarmour-1",y.Physical,4),J.createSkillCategoryFeature("chainarmour-2",k.Physical,-2),J.createTraitFeature("chainarmour-3",x.Speed,-1)]},potion:null,features:[],actions:[]},{id:"item-plate-armor",name:"Plate Armor",packID:"",description:"Armor made of jointed sheets of metal.",baseItem:"",magic:!1,proficiency:v.HeavyArmor,location:b.Body,slots:1,weapon:null,armor:{features:[J.createDamageCategoryResistFeature("platearmor-1",y.Physical,5),J.createSkillCategoryFeature("platearmor-2",k.Physical,-2),J.createTraitFeature("platearmor-3",x.Speed,-2)]},potion:null,features:[],actions:[]},{id:"item-shield",name:"Shield",packID:"",description:"A small shield, often worn strapped to the arm.",baseItem:"",magic:!1,proficiency:v.Shields,location:b.Hand,slots:1,weapon:null,armor:{features:[J.createDamageCategoryResistFeature("shield-1",y.Physical,1)]},potion:null,features:[],actions:[]},{id:"item-tower-shield",name:"Tower shield",packID:"",description:"A larger shield, more protective but cumbersome.",baseItem:"",magic:!1,proficiency:v.Shields,location:b.Hand,slots:1,weapon:null,armor:{features:[J.createDamageCategoryResistFeature("towershield-1",y.Physical,2),J.createSkillCategoryFeature("towershield-2",k.Physical,-1)]},potion:null,features:[],actions:[]},{id:"item-helm",name:"Helm",packID:"",description:"Ornamental headware.",baseItem:"",magic:!1,proficiency:v.None,location:b.Head,slots:1,weapon:null,armor:null,potion:null,features:[],actions:[]},{id:"item-circlet",name:"Circlet",packID:"",description:"Ornamental headware.",baseItem:"",magic:!1,proficiency:v.None,location:b.Head,slots:1,weapon:null,armor:null,potion:null,features:[],actions:[]},{id:"item-crown",name:"Crown",packID:"",description:"Ornamental headware.",baseItem:"",magic:!1,proficiency:v.None,location:b.Head,slots:1,weapon:null,armor:null,potion:null,features:[],actions:[]},{id:"item-tiara",name:"Tiara",packID:"",description:"Ornamental headware.",baseItem:"",magic:!1,proficiency:v.None,location:b.Head,slots:1,weapon:null,armor:null,potion:null,features:[],actions:[]},{id:"item-diadem",name:"Diadem",packID:"",description:"Ornamental headware.",baseItem:"",magic:!1,proficiency:v.None,location:b.Head,slots:1,weapon:null,armor:null,potion:null,features:[],actions:[]},{id:"item-belt",name:"Belt",packID:"",description:"Leather strip worn around the waist.",baseItem:"",magic:!1,proficiency:v.None,location:b.Body,slots:1,weapon:null,armor:null,potion:null,features:[],actions:[]},{id:"item-sash",name:"Sash",packID:"",description:"Strip of fabric worn across the body.",baseItem:"",magic:!1,proficiency:v.None,location:b.Body,slots:1,weapon:null,armor:null,potion:null,features:[],actions:[]},{id:"item-bandolier",name:"Bandolier",packID:"",description:"A belt or sash with pockets.",baseItem:"",magic:!1,proficiency:v.None,location:b.Body,slots:1,weapon:null,armor:null,potion:null,features:[],actions:[]},{id:"item-cloak",name:"Cloak",packID:"",description:"Garment which is fastened around the shoulders, sometimes magical.",baseItem:"",magic:!1,proficiency:v.None,location:b.Neck,slots:1,weapon:null,armor:null,potion:null,features:[],actions:[]},{id:"item-torc",name:"Torc",packID:"",description:"Ornamental neckwear.",baseItem:"",magic:!1,proficiency:v.None,location:b.Neck,slots:1,weapon:null,armor:null,potion:null,features:[],actions:[]},{id:"item-necklace",name:"Necklace",packID:"",description:"Ornamental neckwear.",baseItem:"",magic:!1,proficiency:v.None,location:b.Neck,slots:1,weapon:null,armor:null,potion:null,features:[],actions:[]},{id:"item-boots",name:"Boots",packID:"",description:"Footwear.",baseItem:"",magic:!1,proficiency:v.None,location:b.Feet,slots:1,weapon:null,armor:null,potion:null,features:[],actions:[]},{id:"item-ring",name:"Ring",packID:"",description:"Worn on the fingers.",baseItem:"",magic:!1,proficiency:v.None,location:b.Ring,slots:1,weapon:null,armor:null,potion:null,features:[],actions:[]}];return d.sort(e,(e=>e.name))};class ze{}xe=ze,ze.arcanist=()=>({id:"role-arcanist",name:"Arcanist",packID:"",description:"Arcanists are magical generalists, able to create a wide range of effects.",startingFeatures:[J.createTraitFeature("arcanist-start-1",x.Resolve,1),J.createSkillFeature("arcanist-start-2",C.Spellcasting,2),J.createProficiencyFeature("arcanist-start-3",v.Implements)],features:[J.createTraitFeature("arcanist-feature-1",x.Resolve,1),J.createSkillFeature("arcanist-feature-2",C.Spellcasting,2),J.createDamageCategoryBonusFeature("arcanist-feature-3",y.Energy,1)],actions:[{id:"arcanist-action-1",name:"Arcane Shield",prerequisites:[Ie.implement()],parameters:[Pe.self()],effects:[Be.addCondition(G.createDamageResistanceCondition(x.Resolve,5,w.All))]},{id:"arcanist-action-2",name:"Arcane Armor",prerequisites:[Ie.implement()],parameters:[Pe.burst(S.Allies,1,10)],effects:[Be.addCondition(G.createDamageResistanceCondition(x.Resolve,5,w.All))]},{id:"arcanist-action-3",name:"Arcane Force",prerequisites:[Ie.implement()],parameters:[Pe.burst(S.Enemies,1,10)],effects:[Be.attack({weapon:!1,skill:C.Spellcasting,trait:x.Speed,skillBonus:0,hit:[Be.dealDamage(w.Impact,2),Be.forceMovement(K.Push,3)]})]},{id:"arcanist-action-4",name:"Arcane Arrow",prerequisites:[Ie.implement()],parameters:[Pe.burst(S.Enemies,1,10)],effects:[Be.attack({weapon:!1,skill:C.Spellcasting,trait:x.Speed,skillBonus:0,hit:[Be.dealDamage(w.Electricity,2),Be.dealDamage(w.Piercing,2)]})]},{id:"arcanist-action-5",name:"Arcane Displacement",prerequisites:[Ie.implement()],parameters:[Pe.burst(S.Combatants,1,10)],effects:[Be.forceMovement(K.Swap,0),Be.takeAnotherAction()]},{id:"arcanist-action-6",name:"Arcane Escape",prerequisites:[Ie.implement()],parameters:[Pe.self()],effects:[Be.forceMovement(K.Random,10),Be.takeAnotherAction()]}]}),ze.artificer=()=>({id:"role-artificer",name:"Artificer",packID:p.technology().id,description:"A creator of magically-powered inventions.",startingFeatures:[J.createTraitFeature("artificer-start-1",x.Resolve,1),J.createSkillFeature("artificer-start-2",C.Spellcasting,2)],features:[J.createTraitFeature("artificer-feature-1",x.Resolve,1),J.createSkillFeature("artificer-feature-2",C.Spellcasting,2),J.createDamageCategoryBonusFeature("artificer-feature-3",y.Energy,1)],actions:[{id:"artificer-action-1",name:"Aetheric Gauntlet",prerequisites:[],parameters:[Pe.adjacent(S.Enemies,1)],effects:[Be.attack({weapon:!1,skill:C.Spellcasting,trait:x.Speed,skillBonus:0,hit:[Be.dealDamage(w.Electricity,3)]})]},{id:"artificer-action-2",name:"Voltaic Flux",prerequisites:[],parameters:[Pe.adjacent(S.Enemies,Number.MAX_VALUE)],effects:[Be.attack({weapon:!1,skill:C.Spellcasting,trait:x.Resolve,skillBonus:0,hit:[Be.dealDamage(w.Electricity,3)]})]},{id:"artificer-action-3",name:"Supercharge",prerequisites:[],parameters:[Pe.burst(S.Allies,1,5)],effects:[Be.addCondition(G.createDamageCategoryBonusCondition(x.Endurance,3,y.Corruption)),Be.addCondition(G.createDamageCategoryBonusCondition(x.Endurance,3,y.Energy)),Be.addCondition(G.createDamageCategoryBonusCondition(x.Endurance,3,y.Physical))]},{id:"artificer-action-4",name:"Gravity Bomb",prerequisites:[],parameters:[Ne.distance(8),Pe.burst(S.Combatants,Number.MAX_VALUE,3)],effects:[Be.attack({weapon:!1,skill:C.Spellcasting,trait:x.Endurance,skillBonus:0,hit:[Be.forceMovement(K.Pull,3),Be.knockDown()]})]},{id:"artificer-action-5",name:"Vitriolic Jet",prerequisites:[],parameters:[Pe.burst(S.Enemies,1,3)],effects:[Be.attack({weapon:!1,skill:C.Spellcasting,trait:x.Endurance,skillBonus:0,hit:[Be.dealDamage(w.Acid,3)]})]}]}),ze.assassin=()=>({id:"role-assassin",name:"Assassin",packID:p.skullduggery().id,description:"Assassins operate from the shadows, using poison to kill.",startingFeatures:[J.createTraitFeature("assassin-start-1",x.Speed,1),J.createSkillFeature("assassin-start-2",C.Stealth,2),J.createSkillFeature("assassin-start-3",C.Weapon,2),J.createProficiencyFeature("assassin-start-4",v.PairedWeapons)],features:[J.createTraitFeature("assassin-feature-1",x.Speed,1),J.createSkillFeature("assassin-feature-2",C.Stealth,2),J.createSkillFeature("assassin-feature-3",C.Weapon,2),J.createDamageBonusFeature("assassin-feature-4",w.Poison,2)],actions:[{id:"assassin-action-1",name:"Poison Strike",prerequisites:[Ie.meleeWeapon()],parameters:[Me.melee(),Pe.weapon(S.Enemies,1,0)],effects:[Be.attack({weapon:!0,skill:C.Weapon,trait:x.Speed,skillBonus:0,hit:[Be.dealWeaponDamage(),Be.dealDamage(w.Poison,2),Be.addCondition(G.createAutoDamageCondition(x.Endurance,3,w.Poison))]})]},{id:"assassin-action-2",name:"Vanish",prerequisites:[],parameters:[Pe.self()],effects:[Be.hide(),Be.takeAnotherAction()]},{id:"assassin-action-3",name:"Sneak Attack",prerequisites:[Ie.meleeWeapon(),Ie.hidden()],parameters:[Me.melee(),Pe.weapon(S.Enemies,1,0)],effects:[Be.attack({weapon:!0,skill:C.Weapon,trait:x.Speed,skillBonus:0,hit:[Be.dealWeaponDamage(2),Be.dealDamage(w.Poison,2)]})]}]}),ze.barbarian=()=>({id:"role-barbarian",name:"Barbarian",packID:"",description:"Barbarians are warriors who attack recklessly, with no sense of self-preservation.",startingFeatures:[J.createTraitFeature("barbarian-start-1",x.Endurance,1),J.createSkillFeature("barbarian-start-2",C.Weapon,2),J.createProficiencyFeature("barbarian-start-3",v.LargeWeapons),J.createProficiencyFeature("barbarian-start-4",v.LightArmor)],features:[J.createTraitFeature("barbarian-feature-1",x.Endurance,1),J.createSkillFeature("barbarian-feature-2",C.Weapon,2),J.createDamageCategoryBonusFeature("barbarian-feature-3",y.Physical,1),J.createDamageCategoryResistFeature("barbarian-feature-4",y.Physical,1)],actions:[{id:"barbarian-action-1",name:"Overhead Strike",prerequisites:[Ie.meleeWeapon()],parameters:[Me.melee(),Pe.weapon(S.Enemies,1,0)],effects:[Be.attack({weapon:!0,skill:C.Weapon,trait:x.Speed,skillBonus:0,hit:[Be.dealWeaponDamage(),Be.dealWeaponDamage()]})]},{id:"barbarian-action-2",name:"Knockdown Strike",prerequisites:[Ie.meleeWeapon()],parameters:[Me.melee(),Pe.weapon(S.Enemies,1,0)],effects:[Be.attack({weapon:!0,skill:C.Weapon,trait:x.Speed,skillBonus:0,hit:[Be.dealWeaponDamage(),Be.knockDown()]})]},{id:"barbarian-action-3",name:"Stunning Strike",prerequisites:[Ie.meleeWeapon()],parameters:[Me.melee(),Pe.weapon(S.Enemies,1,0)],effects:[Be.attack({weapon:!0,skill:C.Weapon,trait:x.Speed,skillBonus:0,hit:[Be.dealWeaponDamage(),Be.stun()]})]},{id:"barbarian-action-4",name:"Haymaker",prerequisites:[Ie.meleeWeapon()],parameters:[Me.melee(),Pe.weapon(S.Enemies,Number.MAX_VALUE,0)],effects:[Be.attack({weapon:!0,skill:C.Weapon,trait:x.Speed,skillBonus:0,hit:[Be.dealWeaponDamage()]})]},{id:"barbarian-action-5",name:"Burst Through",prerequisites:[Ie.meleeWeapon()],parameters:[Me.melee(),Pe.weapon(S.Walls,Number.MAX_VALUE,0)],effects:[Be.destroyWalls()]},{id:"barbarian-action-6",name:"Fury",prerequisites:[],parameters:[Pe.self()],effects:[Be.addCondition(G.createDamageCategoryBonusCondition(x.Resolve,6,y.Physical)),Be.addCondition(G.createDamageCategoryResistanceCondition(x.Resolve,6,y.Physical))]}]}),ze.centurion=()=>({id:"role-centurion",name:"Centurion",packID:"",description:"A master of the battlefield.",startingFeatures:[J.createTraitFeature("centurion-start-1",x.Endurance,1),J.createSkillFeature("centurion-start-2",C.Weapon,2),J.createProficiencyFeature("centurion-start-3",v.MilitaryWeapons),J.createProficiencyFeature("centurion-start-4",v.HeavyArmor),J.createProficiencyFeature("centurion-start-5",v.Shields)],features:[J.createTraitFeature("centurion-feature-1",x.Endurance,1),J.createSkillFeature("centurion-feature-2",C.Weapon,2),J.createDamageCategoryBonusFeature("centurion-feature-3",y.Physical,1)],actions:[{id:"centurion-action-1",name:"Charge",prerequisites:[Ie.meleeWeapon()],parameters:[Me.melee(),Pe.burst(S.Enemies,1,5)],effects:[Be.forceMovement(K.TowardsTarget,2),Be.attack({weapon:!0,skill:C.Weapon,trait:x.Speed,skillBonus:0,hit:[Be.dealWeaponDamage()]})]},{id:"centurion-action-2",name:"Precise Attack",prerequisites:[Ie.meleeWeapon()],parameters:[Me.melee(),Pe.weapon(S.Enemies,1,0)],effects:[Be.attack({weapon:!0,skill:C.Weapon,trait:x.Speed,skillBonus:2,hit:[Be.dealWeaponDamage()]})]},{id:"centurion-action-3",name:"Disarm",prerequisites:[Ie.meleeWeapon()],parameters:[Me.melee(),Pe.weapon(S.Enemies,1,0)],effects:[Be.attack({weapon:!0,skill:C.Weapon,trait:x.Speed,skillBonus:0,hit:[Be.disarm()]})]},{id:"centurion-action-4",name:"Parrying Stance",prerequisites:[],parameters:[Pe.self()],effects:[Be.addCondition(G.createDamageResistanceCondition(x.Endurance,5,w.All))]},{id:"centurion-action-5",name:"Shield Bash",prerequisites:[Ie.shield()],parameters:[Pe.adjacent(S.Enemies,1)],effects:[Be.attack({weapon:!1,skill:C.Weapon,trait:x.Speed,skillBonus:0,hit:[Be.dealDamage(w.Impact,3),Be.forceMovement(K.Push,1)]})]},{id:"centurion-action-6",name:"Sweeping Attack",prerequisites:[Ie.meleeWeapon()],parameters:[Me.melee(),Pe.weapon(S.Enemies,Number.MAX_VALUE,0)],effects:[Be.attack({weapon:!0,skill:C.Weapon,trait:x.Speed,skillBonus:0,hit:[Be.dealWeaponDamage()]})]}]}),ze.cleric=()=>({id:"role-cleric",name:"Cleric",packID:p.faith().id,description:"Clerics devote their lives to the gods, and receive power in return.",startingFeatures:[J.createTraitFeature("cleric-start-1",x.Resolve,1),J.createSkillFeature("cleric-start-2",C.Presence,2)],features:[J.createTraitFeature("cleric-feature-1",x.Resolve,1),J.createSkillFeature("cleric-feature-2",C.Presence,2),J.createDamageBonusFeature("cleric-feature-3",w.Light,2)],actions:[{id:"cleric-action-1",name:"Lay On Hands",prerequisites:[],parameters:[Pe.adjacent(S.Allies,1)],effects:[Be.healDamage(5),Be.healWounds(1)]},{id:"cleric-action-2",name:"Sacrament",prerequisites:[],parameters:[Pe.adjacent(S.Allies,Number.MAX_VALUE)],effects:[Be.removeCondition(x.Any),Be.healDamage(1),Be.addCondition(G.createDamageResistanceCondition(x.Resolve,3,w.All))]},{id:"cleric-action-3",name:"Holy Light",prerequisites:[],parameters:[Pe.burst(S.Allies,Number.MAX_VALUE,5)],effects:[Be.addCondition(G.createDamageResistanceCondition(x.Resolve,3,w.All))]},{id:"cleric-action-4",name:"Bless",prerequisites:[],parameters:[Pe.burst(S.Allies,1,5)],effects:[Be.addCondition(G.createTraitBonusCondition(x.Resolve,3,x.Endurance)),Be.addCondition(G.createTraitBonusCondition(x.Resolve,3,x.Resolve)),Be.addCondition(G.createTraitBonusCondition(x.Resolve,3,x.Speed))]},{id:"cleric-action-5",name:"Divine Retribution",prerequisites:[],parameters:[Pe.burst(S.Enemies,1,5)],effects:[Be.attack({weapon:!1,skill:C.Presence,trait:x.Endurance,skillBonus:0,hit:[Be.dealDamage(w.Light,3),Be.dealDamage(w.Fire,3)]})]}]}),ze.dervish=()=>({id:"role-dervish",name:"Dervish",packID:"",description:"Acrobatic warriors who leap and spin around the battlefield.",startingFeatures:[J.createTraitFeature("dervish-start-1",x.Speed,1),J.createSkillFeature("dervish-start-2",C.Weapon,2),J.createProficiencyFeature("dervish-start-3",v.PairedWeapons),J.createProficiencyFeature("dervish-start-4",v.LightArmor)],features:[J.createTraitFeature("dervish-feature-1",x.Speed,1),J.createSkillFeature("dervish-feature-2",C.Weapon,2)],actions:[{id:"dervish-action-1",name:"Dual Strike",prerequisites:[Ie.meleeWeapon()],parameters:[Me.melee(),Pe.weapon(S.Enemies,1,0)],effects:[Be.attack({weapon:!0,skill:C.Weapon,trait:x.Speed,skillBonus:0,hit:[Be.dealWeaponDamage()]}),Be.attack({weapon:!0,skill:C.Weapon,trait:x.Speed,skillBonus:0,hit:[Be.dealWeaponDamage()]})]},{id:"dervish-action-2",name:"Twin Attack",prerequisites:[Ie.meleeWeapon()],parameters:[Me.melee(),Pe.weapon(S.Enemies,2,0)],effects:[Be.attack({weapon:!0,skill:C.Weapon,trait:x.Speed,skillBonus:0,hit:[Be.dealWeaponDamage()]})]},{id:"dervish-action-3",name:"Whirlwind Strike",prerequisites:[Ie.meleeWeapon()],parameters:[Me.melee(),Pe.weapon(S.Enemies,Number.MAX_VALUE,0)],effects:[Be.attack({weapon:!0,skill:C.Weapon,trait:x.Speed,skillBonus:0,hit:[Be.dealWeaponDamage()]})]},{id:"dervish-action-4",name:"Leaping Strike",prerequisites:[Ie.meleeWeapon()],parameters:[Me.melee(),Pe.weapon(S.Enemies,1,2)],effects:[Be.forceMovement(K.TowardsTarget,1),Be.attack({weapon:!0,skill:C.Weapon,trait:x.Speed,skillBonus:0,hit:[Be.dealWeaponDamage()]})]},{id:"dervish-action-5",name:"Dodging Stance",prerequisites:[],parameters:[Pe.self()],effects:[Be.addCondition(G.createTraitBonusCondition(x.Endurance,5,x.Speed)),Be.addCondition(G.createDamageResistanceCondition(x.Endurance,5,w.All))]},{id:"dervish-action-6",name:"Off-Hand Strike",prerequisites:[Ie.meleeWeapon()],parameters:[Me.melee(),Pe.weapon(S.Enemies,1,0)],effects:[Be.attack({weapon:!0,skill:C.Weapon,trait:x.Speed,skillBonus:-2,hit:[Be.dealWeaponDamage()]}),Be.takeAnotherAction()]}]}),ze.druid=()=>({id:"role-druid",name:"Druid",packID:p.fae().id,description:"A wielder of the magic of the natural world.",startingFeatures:[J.createTraitFeature("druid-start-1",x.Resolve,1),J.createSkillFeature("druid-start-2",C.Spellcasting,2)],features:[J.createTraitFeature("druid-feature-1",x.Resolve,1),J.createSkillFeature("druid-feature-2",C.Spellcasting,2)],actions:[{id:"druid-action-1",name:"Animal Companion",prerequisites:[],parameters:[Pe.self()],effects:[Be.summon(ne.Beast)]},{id:"druid-action-2",name:"Stone to Dust",prerequisites:[],parameters:[Pe.burst(S.Walls,1,10)],effects:[Be.addSquares()]},{id:"druid-action-3",name:"Sunlight",prerequisites:[],parameters:[Pe.burst(S.Combatants,Number.MAX_VALUE,5)],effects:[Be.attack({weapon:!1,skill:C.Spellcasting,trait:x.Endurance,skillBonus:0,hit:[Be.dealDamage(w.Light,2),Be.stun()]})]},{id:"druid-action-4",name:"Nature's Balm",prerequisites:[],parameters:[Pe.burst(S.Allies,Number.MAX_VALUE,5)],effects:[Be.healDamage(1),Be.removeCondition(x.Any)]}]}),ze.elementalist=()=>({id:"role-elementalist",name:"Elementalist",packID:p.elements().id,description:"A master of manipulating the four elements.",startingFeatures:[J.createTraitFeature("elementalist-start-1",x.Resolve,1),J.createSkillFeature("elementalist-start-2",C.Spellcasting,2),J.createProficiencyFeature("elementalist-start-3",v.Implements)],features:[J.createTraitFeature("elementalist-feature-1",x.Resolve,1),J.createSkillFeature("elementalist-feature-2",C.Spellcasting,2),J.createDamageCategoryBonusFeature("elementalist-feature-3",y.Energy,1),J.createDamageCategoryResistFeature("elementalist-feature-4",y.Energy,1)],actions:[{id:"elementalist-action-1",name:"Summon Elemental",prerequisites:[Ie.implement()],parameters:[Pe.self()],effects:[Be.summon(ne.Elemental)]},{id:"elementalist-action-2",name:"Ember",prerequisites:[Ie.implement()],parameters:[Pe.burst(S.Enemies,1,10)],effects:[Be.attack({weapon:!1,skill:C.Spellcasting,trait:x.Speed,skillBonus:0,hit:[Be.dealDamage(w.Fire,3),Be.addCondition(G.createAutoDamageCondition(x.Endurance,2,w.Fire))]})]},{id:"elementalist-action-3",name:"Rime",prerequisites:[Ie.implement()],parameters:[Pe.burst(S.Enemies,1,10)],effects:[Be.attack({weapon:!1,skill:C.Spellcasting,trait:x.Speed,skillBonus:0,hit:[Be.dealDamage(w.Cold,3),Be.addCondition(G.createMovementPenaltyCondition(x.Endurance,3))]})]},{id:"elementalist-action-4",name:"Thunderbolt",prerequisites:[Ie.implement()],parameters:[Pe.burst(S.Enemies,1,10)],effects:[Be.attack({weapon:!1,skill:C.Spellcasting,trait:x.Speed,skillBonus:0,hit:[Be.dealDamage(w.Electricity,3),Be.stun()]})]},{id:"elementalist-action-5",name:"Elemental Resistance",prerequisites:[Ie.implement()],parameters:[Pe.self()],effects:[Be.addCondition(G.createDamageCategoryResistanceCondition(x.Resolve,5,y.Energy))]}]}),ze.enchanter=()=>({id:"role-enchanter",name:"Enchanter",packID:p.arcana().id,description:"Spellcasters who specialize in magic that confuses the senses.",startingFeatures:[J.createTraitFeature("enchanter-start-1",x.Resolve,1),J.createSkillFeature("enchanter-start-2",C.Spellcasting,2),J.createProficiencyFeature("enchanter-start-3",v.Implements)],features:[J.createTraitFeature("enchanter-feature-1",x.Resolve,1),J.createSkillFeature("enchanter-feature-2",C.Spellcasting,2),J.createDamageBonusFeature("enchanter-feature-3",w.Psychic,2),J.createDamageResistFeature("enchanter-feature-4",w.Psychic,2)],actions:[{id:"enchanter-action-1",name:"Hypnotic Suggestion",prerequisites:[Ie.implement()],parameters:[Pe.burst(S.Enemies,1,10)],effects:[Be.attack({weapon:!1,skill:C.Spellcasting,trait:x.Resolve,skillBonus:0,hit:[Be.commandAction()]})]},{id:"enchanter-action-2",name:"Bewilder",prerequisites:[Ie.implement()],parameters:[Pe.burst(S.Enemies,1,10)],effects:[Be.attack({weapon:!1,skill:C.Spellcasting,trait:x.Resolve,skillBonus:0,hit:[Be.stun()]})]},{id:"enchanter-action-3",name:"Induce Fear",prerequisites:[Ie.implement()],parameters:[Pe.burst(S.Enemies,1,10)],effects:[Be.attack({weapon:!1,skill:C.Spellcasting,trait:x.Resolve,skillBonus:0,hit:[Be.addCondition(G.createTraitPenaltyCondition(x.Resolve,5,x.Speed))]})]},{id:"enchanter-action-4",name:"Intellect Shield",prerequisites:[Ie.implement()],parameters:[Pe.self()],effects:[Be.addCondition(G.createDamageCategoryResistanceCondition(x.Resolve,5,y.Corruption))]},{id:"enchanter-action-5",name:"Weaken",prerequisites:[Ie.implement()],parameters:[Pe.burst(S.Enemies,1,10)],effects:[Be.attack({weapon:!1,skill:C.Spellcasting,trait:x.Resolve,skillBonus:0,hit:[Be.addCondition(G.createDamagePenaltyCondition(x.Endurance,5,w.All))]})]},{id:"enchanter-action-6",name:"Cloak",prerequisites:[Ie.implement()],parameters:[Pe.burst(S.Allies,Number.MAX_VALUE,5)],effects:[Be.hide()]}]}),ze.geomancer=()=>({id:"role-geomancer",name:"Geomancer",packID:p.arcana().id,description:"Spellcasters whose magic affects the battlefield itself.",startingFeatures:[J.createTraitFeature("geomancer-start-1",x.Endurance,1),J.createSkillFeature("geomancer-start-2",C.Spellcasting,2),J.createProficiencyFeature("geomancer-start-3",v.Implements)],features:[J.createTraitFeature("geomancer-feature-1",x.Endurance,1),J.createSkillFeature("geomancer-feature-2",C.Spellcasting,2),J.createAuraFeature("geomancer-feature-3",A.MovementBonus,1),J.createAuraFeature("geomancer-feature-4",A.MovementPenalty,1)],actions:[{id:"geomancer-action-1",name:"Obstruct Terrain",prerequisites:[Ie.implement()],parameters:[Pe.burst(S.Squares,1,10)],effects:[Be.createTerrain(te.Obstructed)]},{id:"geomancer-action-2",name:"Clear Terrain",prerequisites:[Ie.implement()],parameters:[Pe.burst(S.Squares,1,10)],effects:[Be.createTerrain(te.Clear)]},{id:"geomancer-action-3",name:"Destroy Ground",prerequisites:[Ie.implement()],parameters:[Pe.burst(S.Squares,1,10)],effects:[Be.removeSquares()]},{id:"geomancer-action-4",name:"Raze",prerequisites:[Ie.implement()],parameters:[Pe.burst(S.Walls,Number.MAX_VALUE,3)],effects:[Be.addSquares()]},{id:"geomancer-action-5",name:"Earthbind",prerequisites:[Ie.implement()],parameters:[Pe.burst(S.Enemies,1,10)],effects:[Be.attack({weapon:!1,skill:C.Spellcasting,trait:x.Endurance,skillBonus:0,hit:[Be.addCondition(G.createTraitPenaltyCondition(x.Endurance,5,x.Speed)),Be.addCondition(G.createMovementPenaltyCondition(x.Endurance,5))]})]},{id:"geomancer-action-6",name:"Rockblast",prerequisites:[Ie.implement()],parameters:[Pe.burst(S.Enemies,1,10)],effects:[Be.attack({weapon:!1,skill:C.Spellcasting,trait:x.Speed,skillBonus:0,hit:[Be.dealDamage(w.Impact,3),Be.knockDown()]})]}]}),ze.gunslinger=()=>({id:"role-gunslinger",name:"Gunslinger",packID:p.technology().id,description:"A fighter who uses gunpowder weapons.",startingFeatures:[J.createTraitFeature("gunslinger-start-1",x.Speed,1),J.createSkillFeature("gunslinger-start-2",C.Weapon,2),J.createProficiencyFeature("gunslinger-start-3",v.PowderWeapons)],features:[J.createTraitFeature("gunslinger-feature-1",x.Speed,1),J.createSkillFeature("gunslinger-feature-2",C.Weapon,2)],actions:[{id:"gunslinger-action-1",name:"Fusilade",prerequisites:[Ie.rangedWeapon()],parameters:[Me.ranged(),Ne.weapon(),Pe.burst(S.Combatants,Number.MAX_VALUE,3)],effects:[Be.attack({weapon:!0,skill:C.Weapon,trait:x.Speed,skillBonus:0,hit:[Be.dealWeaponDamage(-2)]})]},{id:"gunslinger-action-2",name:"Overcharged Round",prerequisites:[Ie.rangedWeapon()],parameters:[Me.ranged(),Pe.weapon(S.Enemies,1,0)],effects:[Be.attack({weapon:!0,skill:C.Weapon,trait:x.Speed,skillBonus:-1,hit:[Be.dealWeaponDamage(2)]})]},{id:"gunslinger-action-3",name:"Pommel Strike",prerequisites:[Ie.rangedWeapon()],parameters:[Pe.adjacent(S.Enemies,1)],effects:[Be.attack({weapon:!1,skill:C.Weapon,trait:x.Speed,skillBonus:0,hit:[Be.dealDamage(w.Impact,2)]})]},{id:"gunslinger-action-4",name:"Quickfire",prerequisites:[Ie.rangedWeapon()],parameters:[Me.ranged(),Pe.weapon(S.Enemies,1,0)],effects:[Be.attack({weapon:!0,skill:C.Weapon,trait:x.Speed,skillBonus:-2,hit:[Be.dealWeaponDamage()]}),Be.attack({weapon:!0,skill:C.Weapon,trait:x.Speed,skillBonus:-2,hit:[Be.dealWeaponDamage()]})]},{id:"gunslinger-action-5",name:"Sharpshooter",prerequisites:[Ie.rangedWeapon()],parameters:[Me.ranged(),Pe.weapon(S.Enemies,1,0)],effects:[Be.attack({weapon:!0,skill:C.Weapon,trait:x.Speed,skillBonus:2,hit:[Be.dealWeaponDamage()]})]}]}),ze.hexbow=()=>({id:"role-hexbow",name:"Hexbow",packID:p.fae().id,description:"One who melds deadly aim with raw magical power.",startingFeatures:[J.createTraitFeature("hexbow-start-1",x.Speed,1),J.createSkillFeature("hexbow-start-2",C.Weapon,2),J.createProficiencyFeature("hexbow-start-3",v.RangedWeapons),J.createProficiencyFeature("hexbow-start-4",v.LightArmor)],features:[J.createTraitFeature("hexbow-feature-1",x.Speed,1),J.createSkillFeature("hexbow-feature-2",C.Weapon,2),J.createDamageCategoryBonusFeature("hexbow-feature-3",y.Energy,1)],actions:[{id:"hexbow-action-1",name:"Fire Shot",prerequisites:[Ie.rangedWeapon()],parameters:[Me.ranged(),Pe.weapon(S.Enemies,1,0)],effects:[Be.attack({weapon:!0,skill:C.Weapon,trait:x.Speed,skillBonus:0,hit:[Be.dealWeaponDamage(),Be.dealDamage(w.Fire,2),Be.addCondition(G.createAutoDamageCondition(x.Endurance,5,w.Fire))]})]},{id:"hexbow-action-2",name:"Charged Shot",prerequisites:[Ie.rangedWeapon()],parameters:[Me.ranged(),Ne.weapon(),Pe.burst(S.Combatants,Number.MAX_VALUE,3)],effects:[Be.attack({weapon:!0,skill:C.Weapon,trait:x.Endurance,skillBonus:0,hit:[Be.dealWeaponDamage(),Be.dealDamage(w.Electricity,2),Be.stun()]})]},{id:"hexbow-action-3",name:"Freezing Shot",prerequisites:[Ie.rangedWeapon()],parameters:[Me.ranged(),Pe.weapon(S.Enemies,1,0)],effects:[Be.attack({weapon:!0,skill:C.Weapon,trait:x.Speed,skillBonus:0,hit:[Be.dealWeaponDamage(),Be.dealDamage(w.Cold,2),Be.addCondition(G.createTraitPenaltyCondition(x.Endurance,5,x.Speed))]})]},{id:"hexbow-action-4",name:"Web Shot",prerequisites:[Ie.rangedWeapon()],parameters:[Me.ranged(),Ne.weapon(),Pe.burst(S.Combatants,Number.MAX_VALUE,3)],effects:[Be.attack({weapon:!0,skill:C.Weapon,trait:x.Speed,skillBonus:0,hit:[Be.addCondition(G.createMovementPenaltyCondition(x.Endurance,5)),Be.addCondition(G.createTraitPenaltyCondition(x.Endurance,5,x.Speed))]})]},{id:"hexbow-action-5",name:"Storm Shot",prerequisites:[],parameters:[Me.ranged(),Ne.weapon(),Pe.burst(S.Combatants,Number.MAX_VALUE,3)],effects:[Be.attack({weapon:!0,skill:C.Weapon,trait:x.Endurance,skillBonus:0,hit:[Be.dealWeaponDamage(),Be.dealDamage(w.Electricity,1),Be.forceMovement(K.Push,5),Be.knockDown()]})]},{id:"hexbow-action-6",name:"Ringing Shot",prerequisites:[Ie.rangedWeapon()],parameters:[Me.ranged(),Pe.weapon(S.Enemies,1,0)],effects:[Be.attack({weapon:!0,skill:C.Weapon,trait:x.Speed,skillBonus:0,hit:[Be.dealWeaponDamage(),Be.dealDamage(w.Sonic,2),Be.stun()]})]},{id:"hexbow-action-7",name:"Lasso Shot",prerequisites:[Ie.rangedWeapon()],parameters:[Me.ranged(),Pe.weapon(S.Enemies,1,0)],effects:[Be.attack({weapon:!0,skill:C.Weapon,trait:x.Speed,skillBonus:0,hit:[Be.forceMovement(K.BesideTarget,1)]})]}]}),ze.luckweaver=()=>({id:"role-luckweaver",name:"Luckweaver",packID:p.fae().id,description:"One who can manipulate the laws of chance.",startingFeatures:[J.createSkillFeature("luckweaver-start-1",C.Spellcasting,2)],features:[J.createSkillFeature("luckweaver-feature-1",C.Spellcasting,2),J.createSkillCategoryFeature("luckweaver-feature-2",k.Any,1),J.createDamageCategoryBonusFeature("luckweaver-feature-3",y.Any,1),J.createDamageCategoryResistFeature("luckweaver-feature-4",y.Any,1)],actions:[{id:"luckweaver-action-1",name:"Chaos Bolt",prerequisites:[],parameters:[Pe.burst(S.Enemies,1,10)],effects:[Be.attack({weapon:!1,skill:C.Spellcasting,trait:x.Speed,skillBonus:0,hit:[Be.dealDamage(w.Any,3)]})]},{id:"luckweaver-action-2",name:"Warp Space",prerequisites:[],parameters:[Pe.burst(S.Combatants,Number.MAX_VALUE,10)],effects:[Be.forceMovement(K.Random,3)]},{id:"luckweaver-action-3",name:"Probability Wave",prerequisites:[],parameters:[Pe.burst(S.Combatants,Number.MAX_VALUE,10)],effects:[Be.invertConditions(!0)]},{id:"luckweaver-action-4",name:"Banish",prerequisites:[],parameters:[Pe.burst(S.Combatants,1,5)],effects:[Be.forceMovement(K.Random,20),Be.stun()]}]}),ze.necromancer=()=>({id:"role-necromancer",name:"Necromancer",packID:p.undead().id,description:"A spellcaster whose magic deals with life and death.",startingFeatures:[J.createTraitFeature("necromancer-start-1",x.Resolve,1),J.createSkillFeature("necromancer-start-2",C.Spellcasting,2),J.createProficiencyFeature("necromancer-start-3",v.Implements)],features:[J.createTraitFeature("necromancer-feature-1",x.Resolve,1),J.createSkillFeature("necromancer-feature-2",C.Spellcasting,2),J.createAuraDamageFeature("necromancer-feature-3",A.AutoDamage,w.Decay,1),J.createDamageBonusFeature("necromancer-feature-4",w.Decay,2)],actions:[{id:"necromancer-action-1",name:"Transfer Damage",prerequisites:[Ie.implement(),Ie.damage()],parameters:[Pe.burst(S.Enemies,1,5)],effects:[Be.dealDamage(w.Decay,3),Be.toSelf([Be.healDamage(3)])]},{id:"necromancer-action-2",name:"Transfer Wounds",prerequisites:[Ie.implement(),Ie.wound()],parameters:[Pe.burst(S.Enemies,1,5)],effects:[Be.inflictWounds(1),Be.toSelf([Be.healWounds(1)])]},{id:"necromancer-action-3",name:"Accept Damage",prerequisites:[Ie.implement()],parameters:[Pe.burst(S.Allies,1,5)],effects:[Be.healDamage(3),Be.toSelf([Be.dealDamage(w.Decay,3)])]},{id:"necromancer-action-4",name:"Accept Wounds",prerequisites:[Ie.implement()],parameters:[Pe.burst(S.Allies,1,5)],effects:[Be.healWounds(1),Be.toSelf([Be.inflictWounds(1)])]},{id:"necromancer-action-5",name:"Strength from Pain",prerequisites:[Ie.implement(),Ie.damage()],parameters:[Pe.burst(S.Allies,1,5)],effects:[Be.healDamage(3),Be.addCondition(G.createTraitBonusCondition(x.Resolve,3,x.Endurance)),Be.addCondition(G.createTraitBonusCondition(x.Resolve,3,x.Resolve))]},{id:"necromancer-action-6",name:"Grave Bolt",prerequisites:[Ie.implement()],parameters:[Pe.burst(S.Enemies,1,5)],effects:[Be.attack({weapon:!1,skill:C.Spellcasting,trait:x.Resolve,skillBonus:0,hit:[Be.dealDamage(w.Decay,3),Be.toSelf([Be.healWounds(1)])]})]},{id:"necromancer-action-7",name:"Raise the Dead",prerequisites:[Ie.implement()],parameters:[Pe.self()],effects:[Be.summon(ne.Undead)]}]}),ze.ninja=()=>({id:"role-ninja",name:"Ninja",packID:p.skullduggery().id,description:"A martial artist who hones their abilities with extreme training and self-discipline.",startingFeatures:[J.createTraitFeature("ninja-start-1",x.Speed,1),J.createSkillFeature("ninja-start-2",C.Brawl,2),J.createSkillFeature("ninja-start-3",C.Stealth,2)],features:[J.createTraitFeature("ninja-feature-1",x.Speed,1),J.createSkillFeature("ninja-feature-2",C.Brawl,2),J.createSkillFeature("ninja-feature-3",C.Stealth,2),J.createDamageCategoryBonusFeature("ninja-feature-4",y.Physical,1)],actions:[{id:"ninja-action-1",name:"Roundhouse kick",prerequisites:[],parameters:[Pe.adjacent(S.Enemies,1)],effects:[Be.attack({weapon:!1,skill:C.Brawl,trait:x.Speed,skillBonus:2,hit:[Be.dealDamage(w.Impact,3)]})]},{id:"ninja-action-2",name:"Flurry",prerequisites:[],parameters:[Pe.adjacent(S.Enemies,1)],effects:[Be.attack({weapon:!1,skill:C.Brawl,trait:x.Speed,skillBonus:0,hit:[Be.dealDamage(w.Impact,1)]}),Be.attack({weapon:!1,skill:C.Brawl,trait:x.Speed,skillBonus:0,hit:[Be.dealDamage(w.Impact,1)]}),Be.attack({weapon:!1,skill:C.Brawl,trait:x.Speed,skillBonus:0,hit:[Be.dealDamage(w.Impact,1)]})]},{id:"ninja-action-3",name:"Split Kick",prerequisites:[],parameters:[Pe.adjacent(S.Enemies,2)],effects:[Be.attack({weapon:!1,skill:C.Brawl,trait:x.Speed,skillBonus:0,hit:[Be.dealDamage(w.Impact,3)]})]},{id:"ninja-action-4",name:"Adrenal Boost",prerequisites:[],parameters:[Pe.self()],effects:[Be.addCondition(G.createTraitBonusCondition(x.Endurance,2,x.Speed)),Be.addCondition(G.createMovementBonusCondition(x.Endurance,2)),Be.addCondition(G.createSkillBonusCondition(x.Endurance,2,C.Brawl)),Be.addCondition(G.createDamageCategoryBonusCondition(x.Endurance,2,y.Physical))]}]}),ze.paladin=()=>({id:"role-paladin",name:"Paladin",packID:p.faith().id,description:"A holy warrior, driven by unwavering faith.",startingFeatures:[J.createSkillFeature("paladin-start-1",C.Presence,2),J.createSkillFeature("paladin-start-2",C.Weapon,2),J.createProficiencyFeature("paladin-start-3",v.MilitaryWeapons),J.createProficiencyFeature("paladin-start-4",v.HeavyArmor),J.createProficiencyFeature("paladin-start-5",v.Shields)],features:[J.createSkillFeature("paladin-feature-1",C.Presence,2),J.createSkillFeature("paladin-feature-2",C.Weapon,2),J.createAuraDamageCategoryFeature("paladin-feature-3",A.DamageCategoryResistance,y.Physical,3),J.createAuraDamageCategoryFeature("paladin-feature-4",A.DamageCategoryResistance,y.Energy,3),J.createAuraDamageCategoryFeature("paladin-feature-5",A.DamageCategoryResistance,y.Corruption,3)],actions:[{id:"paladin-action-1",name:"Radiant Smite",prerequisites:[Ie.meleeWeapon()],parameters:[Pe.adjacent(S.Enemies,1)],effects:[Be.attack({weapon:!0,skill:C.Weapon,trait:x.Resolve,skillBonus:0,hit:[Be.dealWeaponDamage(),Be.dealDamage(w.Light,2)]})]},{id:"paladin-action-2",name:"Flame of Valor",prerequisites:[],parameters:[Pe.adjacent(S.Enemies,Number.MAX_VALUE)],effects:[Be.attack({weapon:!1,skill:C.Presence,trait:x.Resolve,skillBonus:0,hit:[Be.dealDamage(w.Light,2)]})]},{id:"paladin-action-3",name:"Shield of Justice",prerequisites:[],parameters:[Pe.burst(S.Allies,Number.MAX_VALUE,3)],effects:[Be.addCondition(G.createDamageResistanceCondition(x.Resolve,3,w.All))]},{id:"paladin-action-4",name:"Templar's Strength",prerequisites:[],parameters:[Pe.self()],effects:[Be.healDamage(1),Be.healWounds(1)]}]}),ze.psion=()=>({id:"role-psion",name:"Psion",packID:p.arcana().id,description:"A master of the power of the mind.",startingFeatures:[J.createTraitFeature("psion-start-1",x.Resolve,1),J.createSkillFeature("psion-start-2",C.Presence,2)],features:[J.createTraitFeature("psion-feature-1",x.Resolve,1),J.createSkillFeature("psion-feature-2",C.Presence,2),J.createDamageBonusFeature("psion-feature-3",w.Psychic,2),J.createDamageResistFeature("psion-feature-4",w.Psychic,2)],actions:[{id:"psion-action-1",name:"Bend Allegiance",prerequisites:[],parameters:[Pe.burst(S.Enemies,1,8)],effects:[Be.commandAction()]},{id:"psion-action-2",name:"Psychic Feedback",prerequisites:[],parameters:[Pe.adjacent(S.Combatants,Number.MAX_VALUE)],effects:[Be.attack({weapon:!1,skill:C.Presence,trait:x.Resolve,skillBonus:0,hit:[Be.stun()]})]},{id:"psion-action-3",name:"Psychic Barrage",prerequisites:[],parameters:[Pe.burst(S.Combatants,Number.MAX_VALUE,5)],effects:[Be.attack({weapon:!1,skill:C.Presence,trait:x.Resolve,skillBonus:0,hit:[Be.dealDamage(w.Psychic,4)]})]},{id:"psion-action-4",name:"Dishearten",prerequisites:[],parameters:[Pe.burst(S.Enemies,1,8)],effects:[Be.attack({weapon:!1,skill:C.Presence,trait:x.Resolve,skillBonus:0,hit:[Be.addCondition(G.createDamagePenaltyCondition(x.Resolve,6,w.All))]})]},{id:"psion-action-5",name:"Mental Assault",prerequisites:[],parameters:[Pe.burst(S.Enemies,1,8)],effects:[Be.attack({weapon:!1,skill:C.Presence,trait:x.Resolve,skillBonus:0,hit:[Be.dealDamage(w.Psychic,5)]})]},{id:"psion-action-6",name:"Mind Over Body",prerequisites:[Ie.wound()],parameters:[Pe.self()],effects:[Be.healWounds(1)]}]}),ze.ranger=()=>({id:"role-ranger",name:"Ranger",packID:"",description:"A fighter who specializes in ranged weaponry.",startingFeatures:[J.createTraitFeature("ranger-start-1",x.Endurance,1),J.createSkillFeature("ranger-start-2",C.Perception,2),J.createSkillFeature("ranger-start-3",C.Weapon,2),J.createProficiencyFeature("ranger-start-4",v.RangedWeapons),J.createProficiencyFeature("ranger-start-5",v.LightArmor)],features:[J.createTraitFeature("ranger-feature-1",x.Endurance,1),J.createSkillFeature("ranger-feature-2",C.Perception,2),J.createSkillFeature("ranger-feature-3",C.Weapon,2)],actions:[{id:"ranger-action-1",name:"Deadeye",prerequisites:[Ie.rangedWeapon()],parameters:[Pe.self()],effects:[Be.addCondition(G.createSkillBonusCondition(x.Resolve,5,C.Weapon))]},{id:"ranger-action-2",name:"Sure Shot",prerequisites:[Ie.rangedWeapon()],parameters:[Me.ranged(),Pe.weapon(S.Enemies,1,0)],effects:[Be.attack({weapon:!0,skill:C.Weapon,trait:x.Speed,skillBonus:2,hit:[Be.dealWeaponDamage()]})]},{id:"ranger-action-3",name:"Pinning Shot",prerequisites:[Ie.rangedWeapon()],parameters:[Me.ranged(),Pe.weapon(S.Enemies,1,0)],effects:[Be.attack({weapon:!0,skill:C.Weapon,trait:x.Speed,skillBonus:0,hit:[Be.dealWeaponDamage(),Be.addCondition(G.createTraitPenaltyCondition(x.Endurance,5,x.Speed))]})]},{id:"ranger-action-4",name:"Barrage",prerequisites:[Ie.rangedWeapon()],parameters:[Me.ranged(),Ne.weapon(),Pe.burst(S.Enemies,Number.MAX_VALUE,3)],effects:[Be.attack({weapon:!0,skill:C.Weapon,trait:x.Speed,skillBonus:-1,hit:[Be.dealWeaponDamage()]})]},{id:"ranger-action-5",name:"Quick Shot",prerequisites:[Ie.rangedWeapon()],parameters:[Me.ranged(),Pe.weapon(S.Enemies,1,0)],effects:[Be.attack({weapon:!0,skill:C.Weapon,trait:x.Speed,skillBonus:-1,hit:[Be.dealWeaponDamage(-1)]}),Be.takeAnotherAction()]},{id:"ranger-action-6",name:"Called Shot",prerequisites:[Ie.rangedWeapon()],parameters:[Me.ranged(),Pe.weapon(S.Enemies,1,0)],effects:[Be.attack({weapon:!0,skill:C.Weapon,trait:x.Speed,skillBonus:-2,hit:[Be.dealWeaponDamage(2)]})]}]}),ze.sensei=()=>({id:"role-sensei",name:"Sensei",packID:"",description:"A martial artist who uses magically-enhanced fighting techniques.",startingFeatures:[J.createTraitFeature("sensei-start-1",x.Speed,1),J.createSkillFeature("sensei-start-2",C.Brawl,2)],features:[J.createTraitFeature("sensei-feature-1",x.Speed,1),J.createSkillFeature("sensei-feature-2",C.Brawl,2),J.createDamageCategoryBonusFeature("sensei-feature-4",y.Energy,1)],actions:[{id:"sensei-action-1",name:"Typhoon Step",prerequisites:[],parameters:[Pe.burst(S.Combatants,Number.MAX_VALUE,3)],effects:[Be.attack({weapon:!1,skill:C.Brawl,trait:x.Endurance,skillBonus:2,hit:[Be.dealDamage(w.Impact,1),Be.forceMovement(K.Push,1),Be.knockDown()]})]},{id:"sensei-action-2",name:"Dragon Palm Technique",prerequisites:[],parameters:[Pe.adjacent(S.Enemies,1)],effects:[Be.attack({weapon:!1,skill:C.Brawl,trait:x.Speed,skillBonus:0,hit:[Be.dealDamage(w.Fire,3)]})]},{id:"sensei-action-3",name:"Kinetic Flow",prerequisites:[],parameters:[Pe.burst(S.Enemies,Number.MAX_VALUE,3)],effects:[Be.attack({weapon:!1,skill:C.Brawl,trait:x.Endurance,skillBonus:0,hit:[Be.dealDamage(w.Impact,2),Be.forceMovement(K.Swap,0)]})]},{id:"sensei-action-4",name:"Lightning Speed",prerequisites:[],parameters:[Pe.self()],effects:[Be.addMovement()]},{id:"sensei-action-5",name:"Focus Chi",prerequisites:[Ie.condition(x.Any)],parameters:[Pe.self()],effects:[Be.removeCondition(x.Any)]},{id:"sensei-action-6",name:"Chi Punch",prerequisites:[],parameters:[Pe.adjacent(S.Enemies,1)],effects:[Be.attack({weapon:!1,skill:C.Brawl,trait:x.Speed,skillBonus:2,hit:[Be.dealDamage(w.Impact,3)]})]}]}),ze.sorcerer=()=>({id:"role-sorcerer",name:"Sorcerer",packID:p.elements().id,description:"A magic-user whose spells are elemental and destructive.",startingFeatures:[J.createTraitFeature("sorcerer-start-1",x.Resolve,1),J.createSkillFeature("sorcerer-start-2",C.Spellcasting,2),J.createProficiencyFeature("sorcerer-start-3",v.Implements)],features:[J.createTraitFeature("sorcerer-feature-1",x.Resolve,1),J.createSkillFeature("sorcerer-feature-2",C.Spellcasting,2),J.createDamageCategoryBonusFeature("sorcerer-feature-3",y.Energy,1),J.createDamageCategoryResistFeature("sorcerer-feature-4",y.Energy,1),J.createAuraDamageFeature("sorcerer-feature-5",A.AutoDamage,w.Fire,1),J.createAuraDamageFeature("sorcerer-feature-6",A.AutoDamage,w.Cold,1),J.createAuraDamageFeature("sorcerer-feature-7",A.AutoDamage,w.Electricity,1)],actions:[{id:"sorcerer-action-1",name:"Thunderstorm",prerequisites:[Ie.implement()],parameters:[Ne.distance(10),Pe.burst(S.Combatants,Number.MAX_VALUE,3)],effects:[Be.attack({weapon:!1,skill:C.Spellcasting,trait:x.Speed,skillBonus:0,hit:[Be.dealDamage(w.Electricity,3),Be.stun()]})]},{id:"sorcerer-action-2",name:"Inferno",prerequisites:[Ie.implement()],parameters:[Ne.distance(10),Pe.burst(S.Combatants,Number.MAX_VALUE,3)],effects:[Be.attack({weapon:!1,skill:C.Spellcasting,trait:x.Speed,skillBonus:0,hit:[Be.dealDamage(w.Fire,3),Be.addCondition(G.createAutoDamageCondition(x.Endurance,5,w.Fire))]})]},{id:"sorcerer-action-3",name:"Ice Storm",prerequisites:[Ie.implement()],parameters:[Ne.distance(10),Pe.burst(S.Combatants,Number.MAX_VALUE,3)],effects:[Be.attack({weapon:!1,skill:C.Spellcasting,trait:x.Endurance,skillBonus:0,hit:[Be.dealDamage(w.Cold,3),Be.addCondition(G.createTraitPenaltyCondition(x.Endurance,5,x.Speed))]})]}]}),ze.warmage=()=>({id:"role-warmage",name:"Warmage",packID:p.arcana().id,description:"A warrior who bridges martial discipline and arcane power.",startingFeatures:[J.createTraitFeature("warmage-start-1",x.Resolve,1),J.createSkillFeature("warmage-start-2",C.Weapon,2),J.createProficiencyFeature("warmage-start-3",v.MilitaryWeapons),J.createProficiencyFeature("warmage-start-4",v.LightArmor)],features:[J.createTraitFeature("warmage-feature-1",x.Resolve,1),J.createSkillFeature("warmage-feature-2",C.Weapon,2),J.createDamageCategoryBonusFeature("warmage-feature-3",y.Energy,1),J.createDamageCategoryBonusFeature("warmage-feature-4",y.Physical,1)],actions:[{id:"warmage-action-1",name:"Flaming Blade",prerequisites:[Ie.meleeWeapon()],parameters:[Me.melee(),Pe.weapon(S.Enemies,1,0)],effects:[Be.attack({weapon:!0,skill:C.Weapon,trait:x.Speed,skillBonus:0,hit:[Be.dealWeaponDamage(),Be.dealDamage(w.Fire,2),Be.addCondition(G.createAutoDamageCondition(x.Endurance,5,w.Fire))]})]},{id:"warmage-action-2",name:"Frost Blade",prerequisites:[Ie.meleeWeapon()],parameters:[Me.melee(),Pe.weapon(S.Enemies,1,0)],effects:[Be.attack({weapon:!0,skill:C.Weapon,trait:x.Speed,skillBonus:0,hit:[Be.dealWeaponDamage(),Be.dealDamage(w.Cold,2),Be.addCondition(G.createTraitPenaltyCondition(x.Endurance,5,x.Speed))]})]},{id:"warmage-action-3",name:"Shocking Blade",prerequisites:[Ie.meleeWeapon()],parameters:[Me.melee(),Pe.weapon(S.Enemies,1,0)],effects:[Be.attack({weapon:!0,skill:C.Weapon,trait:x.Speed,skillBonus:0,hit:[Be.dealWeaponDamage(),Be.dealDamage(w.Electricity,2),Be.stun()]})]},{id:"warmage-action-4",name:"Armor Enhancement",prerequisites:[Ie.armor()],parameters:[Pe.self()],effects:[Be.addCondition(G.createDamageCategoryResistanceCondition(x.Resolve,5,y.Physical)),Be.addCondition(G.createDamageCategoryResistanceCondition(x.Resolve,5,y.Energy))]},{id:"warmage-action-5",name:"Arcane Whip",prerequisites:[Ie.meleeWeapon()],parameters:[Me.melee(),Pe.weapon(S.Enemies,1,2)],effects:[Be.attack({weapon:!0,skill:C.Weapon,trait:x.Speed,skillBonus:0,hit:[Be.dealWeaponDamage(),Be.forceMovement(K.Pull,3)]})]}]}),ze.valkyrie=()=>({id:"role-valkyrie",name:"Valkyrie",packID:"",description:"Heavily armed and armored, valkyries are a force to be reckoned with.",startingFeatures:[J.createTraitFeature("valkyrie-start-1",x.Endurance,1),J.createTraitFeature("valkyrie-start-2",x.Resolve,1),J.createSkillFeature("valkyrie-start-3",C.Weapon,2),J.createProficiencyFeature("valkyrie-start-4",v.LargeWeapons),J.createProficiencyFeature("valkyrie-start-5",v.HeavyArmor)],features:[J.createTraitFeature("valkyrie-feature-1",x.Endurance,1),J.createTraitFeature("valkyrie-feature-2",x.Resolve,1),J.createSkillFeature("valkyrie-feature-3",C.Weapon,2)],actions:[{id:"valkyrie-action-1",name:"Valhalla Charge",prerequisites:[Ie.meleeWeapon()],parameters:[Me.melee(),Pe.burst(S.Enemies,1,8)],effects:[Be.forceMovement(K.BesideTarget,1),Be.attack({weapon:!0,skill:C.Weapon,trait:x.Endurance,skillBonus:0,hit:[Be.dealWeaponDamage(2)]})]},{id:"valkyrie-action-2",name:"Onslaught",prerequisites:[Ie.meleeWeapon()],parameters:[Me.melee(),Pe.weapon(S.Enemies,1,0)],effects:[Be.attack({weapon:!0,skill:C.Weapon,trait:x.Endurance,skillBonus:0,hit:[Be.dealWeaponDamage(),Be.knockDown()]})]},{id:"valkyrie-action-3",name:"Weakening Thrust",prerequisites:[Ie.meleeWeapon()],parameters:[Me.melee(),Pe.weapon(S.Enemies,1,0)],effects:[Be.attack({weapon:!0,skill:C.Weapon,trait:x.Endurance,skillBonus:0,hit:[Be.dealWeaponDamage(-1),Be.addCondition(G.createDamageCategoryPenaltyCondition(x.Endurance,3,y.Physical)),Be.addCondition(G.createDamageCategoryPenaltyCondition(x.Endurance,3,y.Energy)),Be.addCondition(G.createDamageCategoryPenaltyCondition(x.Endurance,3,y.Corruption))]})]},{id:"valkyrie-action-4",name:"Swirling Storm",prerequisites:[Ie.meleeWeapon()],parameters:[Me.melee(),Pe.weapon(S.Enemies,Number.MAX_VALUE,0)],effects:[Be.attack({weapon:!0,skill:C.Weapon,trait:x.Endurance,skillBonus:0,hit:[Be.dealWeaponDamage(),Be.dealDamage(w.Electricity,1)]})]}]}),ze.getList=()=>{const e=[xe.arcanist(),xe.artificer(),xe.assassin(),xe.barbarian(),xe.centurion(),xe.cleric(),xe.dervish(),xe.druid(),xe.elementalist(),xe.enchanter(),xe.geomancer(),xe.gunslinger(),xe.hexbow(),xe.luckweaver(),xe.necromancer(),xe.ninja(),xe.paladin(),xe.psion(),xe.ranger(),xe.sensei(),xe.sorcerer(),xe.warmage(),xe.valkyrie()];return e.forEach((e=>{e.startingFeatures=d.sort(e.startingFeatures,(e=>J.getFeatureTitle(e))),e.features=d.sort(e.features,(e=>J.getFeatureTitle(e))),e.actions=d.sort(e.actions,(e=>e.name))})),d.sort(e,(e=>e.name))};class Oe{}Se=Oe,Oe.getHeroSpeciesDeck=e=>qe.getList().filter((t=>""===t.packID||e.includes(t.packID))),Oe.getMonsterSpeciesDeck=e=>$.getList().filter((t=>""===t.packID||e.includes(t.packID))),Oe.getRoleDeck=e=>ze.getList().filter((t=>""===t.packID||e.includes(t.packID))),Oe.getBackgroundDeck=e=>Re.getList().filter((t=>""===t.packID||e.includes(t.packID))),Oe.getItemDeck=e=>Le.getList().filter((t=>""===t.packID||e.includes(t.packID))),Oe.getPotionDeck=e=>Te.getList().filter((t=>""===t.packID||e.includes(t.packID))),Oe.getStructureDeck=e=>f.getList().filter((t=>""===t.packID||e.includes(t.packID))),Oe.getSpecies=e=>[].concat(qe.getList()).concat($.getList()).find((t=>t.id===e))||null,Oe.getRole=e=>ze.getList().find((t=>t.id===e))||null,Oe.getBackground=e=>Re.getList().find((t=>t.id===e))||null,Oe.getItem=e=>Le.getList().find((t=>t.id===e))||null,Oe.getPotion=e=>Te.getList().find((t=>t.id===e))||null,Oe.getStructure=e=>f.getList().find((t=>t.id===e))||null,Oe.getPack=e=>p.getList().find((t=>t.id===e))||null,Oe.getAllActions=e=>{const t=[];return Se.getHeroSpeciesDeck(e).forEach((e=>t.push(...e.actions))),Se.getMonsterSpeciesDeck(e).forEach((e=>t.push(...e.actions))),Se.getRoleDeck(e).forEach((e=>t.push(...e.actions))),Se.getBackgroundDeck(e).forEach((e=>t.push(...e.actions))),t},Oe.getRandomAction=(e,t)=>{const n=Se.getAllActions(t).filter((t=>{const n=t.prerequisites.find((e=>"item"===e.id));if(n){if(!n.data.includes(e.proficiency))return!1}return!0})),a=d.draw(n),r=JSON.parse(JSON.stringify(a));return r.id=D.guid(),r},Oe.getRandomDamageType=function(){const e=[];switch(arguments.length>0&&void 0!==arguments[0]?arguments[0]:y.Any){case y.Any:e.push(w.Acid),e.push(w.Cold),e.push(w.Decay),e.push(w.Edged),e.push(w.Electricity),e.push(w.Fire),e.push(w.Impact),e.push(w.Light),e.push(w.Piercing),e.push(w.Poison),e.push(w.Psychic),e.push(w.Sonic);break;case y.Physical:e.push(w.Edged),e.push(w.Impact),e.push(w.Piercing);break;case y.Energy:e.push(w.Cold),e.push(w.Electricity),e.push(w.Fire),e.push(w.Light),e.push(w.Sonic);break;case y.Corruption:e.push(w.Acid),e.push(w.Decay),e.push(w.Poison),e.push(w.Psychic)}return d.draw(e)},Oe.getRandomDamageCategoryType=()=>{const e=[y.Physical,y.Energy,y.Corruption];return d.draw(e)},Oe.getRandomItemProficiency=()=>{const e=[v.MilitaryWeapons,v.LargeWeapons,v.PairedWeapons,v.RangedWeapons,v.PowderWeapons,v.Implements,v.LightArmor,v.HeavyArmor,v.Shields];return d.draw(e)},Oe.getRandomSkill=function(){const e=[];switch(arguments.length>0&&void 0!==arguments[0]?arguments[0]:k.Any){case k.Any:e.push(C.Brawl),e.push(C.Perception),e.push(C.Presence),e.push(C.Reactions),e.push(C.Spellcasting),e.push(C.Stealth),e.push(C.Weapon);break;case k.Physical:e.push(C.Brawl),e.push(C.Stealth),e.push(C.Weapon);break;case k.Mental:e.push(C.Perception),e.push(C.Presence),e.push(C.Reactions),e.push(C.Spellcasting)}return d.draw(e)},Oe.getRandomSkillCategory=()=>{const e=[k.Physical,k.Mental];return d.draw(e)},Oe.getRandomTrait=()=>{const e=[x.Endurance,x.Resolve,x.Speed];return d.draw(e)},Oe.getBoonIsHeroType=e=>{switch(e.type){case g.ExtraHero:case g.ExtraXP:case g.LevelUp:return!0}return!1},Oe.getBoonIsItemType=e=>{switch(e.type){case g.EnchantItem:case g.MagicItem:case g.Money:return!0}return!1},Oe.getBoonIsStrongholdType=e=>e.type===g.Structure,Oe.getDamageCategory=e=>{switch(e){case w.All:return y.All;case w.Edged:case w.Impact:case w.Piercing:return y.Physical;case w.Cold:case w.Electricity:case w.Fire:case w.Light:case w.Sonic:return y.Energy;case w.Acid:case w.Decay:case w.Poison:case w.Psychic:return y.Corruption}return y.None},Oe.getSkillCategory=e=>{switch(e){case C.All:return k.All;case C.Brawl:case C.Stealth:case C.Weapon:return k.Physical;case C.Perception:case C.Presence:case C.Reactions:case C.Spellcasting:return k.Mental}return k.None},Oe.getItemsForProficiency=(e,t)=>Se.getItemDeck(t).filter((t=>t.proficiency===e)),Oe.addHeroToGame=(e,t)=>{e.heroSlots=Math.max(e.heroSlots-1,0),e.heroes.push(t),e.heroes=d.sort(e.heroes,(e=>e.name))},Oe.getSpeciesStrength=e=>{let t=0;return t+=d.sum(e.startingFeatures,(e=>Se.getFeatureStrength(e)))+e.startingFeatures.length,t+=d.mean(e.features,(e=>Se.getFeatureStrength(e)))+e.features.length,t+=d.mean(e.actions,(e=>Se.getActionStrength(e)))+e.actions.length,Math.round(t/5)},Oe.getRoleStrength=e=>{let t=0;return t+=d.sum(e.startingFeatures,(e=>Se.getFeatureStrength(e)))+e.startingFeatures.length,t+=d.mean(e.features,(e=>Se.getFeatureStrength(e)))+e.features.length,t+=d.mean(e.actions,(e=>Se.getActionStrength(e)))+e.actions.length,Math.round(t/5)},Oe.getBackgroundStrength=e=>{let t=0;return t+=d.sum(e.startingFeatures,(e=>Se.getFeatureStrength(e)))+e.startingFeatures.length,t+=d.mean(e.features,(e=>Se.getFeatureStrength(e)))+e.features.length,t+=d.mean(e.actions,(e=>Se.getActionStrength(e)))+e.actions.length,Math.round(t/5)},Oe.getFeatureStrength=e=>{let t=1;switch(e.type){case j.Aura:t=3;break;case j.DamageBonus:case j.DamageResist:t=e.damage===w.Any?3:1;break;case j.DamageCategoryBonus:case j.DamageCategoryResist:t=e.damageCategory===y.Any?5:3;break;case j.Skill:t=e.skill===C.Any?3:1;break;case j.SkillCategory:t=e.skillCategory===k.Any?5:3;break;case j.Trait:t=e.trait===x.Any?8:5;break;case j.Proficiency:t=0}return e.rank*t},Oe.getActionStrength=e=>{const t=e.parameters.find((e=>"targets"===e.id)),n=t?Se.getActionTargetStrength(t,e):1,a=d.sum(e.effects,(e=>Se.getActionEffectStrength(e)));let r=Math.round(n*a);return"Quick"===Fe.getActionSpeed(e)&&(r+=4),r},Oe.getActionTargetStrength=(e,t)=>{if(e.targets){const n={items:[]};let a=1;switch(Math.max(Fe.getActionRange(t,n),1)){case 1:case 2:case 3:a=2;break;case 4:case 5:case 6:a=3;break;default:a=4}let r=Math.min(e.targets.count,a);return e.targets.type===S.Combatants&&(r=Math.max(r-1,1)),r}return 1},Oe.getActionEffectStrength=e=>{switch(e.id){case"attack":return d.sum(e.children,(e=>Se.getActionEffectStrength(e)))/2;case"toSelf":return d.sum(e.children,(e=>Se.getActionEffectStrength(e)));case"damage":case"addcondition":return e.data.rank;case"weapondamage":return 3+e.data;case"wound":case"healwounds":return 5*e.data;case"stun":case"commandAction":case"summon":return 5;case"knockdown":case"healdamage":return 2;case"disarm":case"steal":return 10;case"createPotion":return 7;case"takeAnotherAction":return 0}return 1};class He{}He.generateBoon=(e,t)=>{let n=g.ExtraHero;switch(u.randomNumber(7,t)){case 0:n=g.ExtraHero;break;case 1:n=g.ExtraXP;break;case 2:n=g.LevelUp;break;case 3:n=g.MagicItem;break;case 4:n=g.Money;break;case 5:n=g.EnchantItem;break;case 6:n=g.Structure}let a=null;switch(n){case g.MagicItem:a=H.generateRandomMagicItem(e,t);break;case g.ExtraXP:a=u.dice(5,t);break;case g.Money:a=5*u.dice(5,t);break;case g.Structure:a=d.draw(Oe.getStructureDeck(e).filter((e=>!V.canCharge(e))),t)}return{id:D.guid(),type:n,data:a}};const _e="1.150.0";var Ue=n(425),We=n.n(Ue),Ve=/[A-Z]/g,Qe=/^ms-/,Xe={};function Ge(e){return"-"+e.toLowerCase()}const Je=function(e){if(Xe.hasOwnProperty(e))return Xe[e];var t=e.replace(Ve,Ge);return Xe[e]=Qe.test(t)?"-"+t:t};function Ye(e,t){if(e===t)return!0;if(!e||!t)return!1;const n=Object.keys(e),a=Object.keys(t),r=n.length;if(a.length!==r)return!1;for(let s=0;s<r;s++){const a=n[s];if(e[a]!==t[a]||!Object.prototype.hasOwnProperty.call(t,a))return!1}return!0}var Ke=n(7),Ze=n.n(Ke);const $e=Ze().oneOfType([Ze().string,Ze().number]),et={all:Ze().bool,grid:Ze().bool,aural:Ze().bool,braille:Ze().bool,handheld:Ze().bool,print:Ze().bool,projection:Ze().bool,screen:Ze().bool,tty:Ze().bool,tv:Ze().bool,embossed:Ze().bool},tt={orientation:Ze().oneOf(["portrait","landscape"]),scan:Ze().oneOf(["progressive","interlace"]),aspectRatio:Ze().string,deviceAspectRatio:Ze().string,height:$e,deviceHeight:$e,width:$e,deviceWidth:$e,color:Ze().bool,colorIndex:Ze().bool,monochrome:Ze().bool,resolution:$e,type:Object.keys(et)},{type:nt,...at}=tt,rt={minAspectRatio:Ze().string,maxAspectRatio:Ze().string,minDeviceAspectRatio:Ze().string,maxDeviceAspectRatio:Ze().string,minHeight:$e,maxHeight:$e,minDeviceHeight:$e,maxDeviceHeight:$e,minWidth:$e,maxWidth:$e,minDeviceWidth:$e,maxDeviceWidth:$e,minColor:Ze().number,maxColor:Ze().number,minColorIndex:Ze().number,maxColorIndex:Ze().number,minMonochrome:Ze().number,maxMonochrome:Ze().number,minResolution:$e,maxResolution:$e,...at};var st={all:{...et,...rt},types:et,matchers:tt,features:rt};const it=e=>{const t=[];return Object.keys(st.all).forEach((n=>{const a=e[n];null!=a&&t.push(((e,t)=>{const n=Je(e);return"number"===typeof t&&(t="".concat(t,"px")),!0===t?n:!1===t?"not ".concat(n):"(".concat(n,": ").concat(t,")")})(n,a))})),t.join(" and ")},ot=(0,i.createContext)(void 0),lt=e=>{if(!e)return;return Object.keys(e).reduce(((t,n)=>(t[Je(n)]=e[n],t)),{})},ct=()=>{const e=(0,i.useRef)(!1);return(0,i.useEffect)((()=>{e.current=!0}),[]),e.current},ut=e=>{const t=()=>(e=>e.query||it(e))(e),[n,a]=(0,i.useState)(t);return(0,i.useEffect)((()=>{const e=t();n!==e&&a(e)}),[e]),n},dt=(e,t,n)=>{const a=(e=>{const t=(0,i.useContext)(ot),n=()=>lt(e)||lt(t),[a,r]=(0,i.useState)(n);return(0,i.useEffect)((()=>{const e=n();Ye(a,e)||r(e)}),[e,t]),a})(t),r=ut(e);if(!r)throw new Error("Invalid or missing MediaQuery!");const s=((e,t)=>{const n=()=>We()(e,t||{},!!t),[a,r]=(0,i.useState)(n),s=ct();return(0,i.useEffect)((()=>{if(s){const e=n();return r(e),()=>{e&&e.dispose()}}}),[e,t]),a})(r,a),o=(e=>{const[t,n]=(0,i.useState)(e.matches);return(0,i.useEffect)((()=>{const t=e=>{n(e.matches)};return e.addListener(t),n(e.matches),()=>{e.removeListener(t)}}),[e]),t})(s),l=ct();return(0,i.useEffect)((()=>{l&&n&&n(o)}),[o]),(0,i.useEffect)((()=>()=>{s&&s.dispose()}),[]),o};let pt=function(e){return e.Landscape="landscape",e.Portrait="portrait",e}({}),ht=function(e){return e.Island="island",e.Stronghold="stronghold",e.Team="team",e.Items="items",e}({}),mt=function(e){return e.Landing="landing",e.Setup="setup",e.Campaign="campaign",e.Encounter="encounter",e.Backstage="backstage",e}({});function ft(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}let gt={data:""},yt=e=>"object"==typeof window?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||gt,bt=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,vt=/\/\*[^]*?\*\/|  +/g,kt=/\n+/g,xt=(e,t)=>{let n="",a="",r="";for(let s in e){let i=e[s];"@"==s[0]?"i"==s[1]?n=s+" "+i+";":a+="f"==s[1]?xt(i,s):s+"{"+xt(i,"k"==s[1]?"":t)+"}":"object"==typeof i?a+=xt(i,t?t.replace(/([^,])+/g,(e=>s.replace(/(^:.*)|([^,])+/g,(t=>/&/.test(t)?t.replace(/&/g,e):e?e+" "+t:t)))):s):null!=i&&(s=/^--/.test(s)?s:s.replace(/[A-Z]/g,"-$&").toLowerCase(),r+=xt.p?xt.p(s,i):s+":"+i+";")}return n+(t&&r?t+"{"+r+"}":r)+a},St={},wt=e=>{if("object"==typeof e){let t="";for(let n in e)t+=n+wt(e[n]);return t}return e},Ct=(e,t,n,a,r)=>{let s=wt(e),i=St[s]||(St[s]=(e=>{let t=0,n=11;for(;t<e.length;)n=101*n+e.charCodeAt(t++)>>>0;return"go"+n})(s));if(!St[i]){let t=s!==e?e:(e=>{let t,n,a=[{}];for(;t=bt.exec(e.replace(vt,""));)t[4]?a.shift():t[3]?(n=t[3].replace(kt," ").trim(),a.unshift(a[0][n]=a[0][n]||{})):a[0][t[1]]=t[2].replace(kt," ").trim();return a[0]})(e);St[i]=xt(r?{["@keyframes "+i]:t}:t,n?"":"."+i)}let o=n&&St.g?St.g:null;return n&&(St.g=St[i]),((e,t,n,a)=>{a?t.data=t.data.replace(a,e):-1===t.data.indexOf(e)&&(t.data=n?e+t.data:t.data+e)})(St[i],t,a,o),i},At=(e,t,n)=>e.reduce(((e,a,r)=>{let s=t[r];if(s&&s.call){let e=s(n),t=e&&e.props&&e.props.className||/^go/.test(e)&&e;s=t?"."+t:e&&"object"==typeof e?e.props?"":xt(e,""):!1===e?"":e}return e+a+(null==s?"":s)}),"");function jt(e){let t=this||{},n=e.call?e(t.p):e;return Ct(n.unshift?n.raw?At(n,[].slice.call(arguments,1),t.p):n.reduce(((e,n)=>Object.assign(e,n&&n.call?n(t.p):n)),{}):n,yt(t.target),t.g,t.o,t.k)}jt.bind({g:1});let Dt,Et,It,Nt=jt.bind({k:1});function Pt(e,t){let n=this||{};return function(){let a=arguments;function r(s,i){let o=Object.assign({},s),l=o.className||r.className;n.p=Object.assign({theme:Et&&Et()},o),n.o=/ *go\d+/.test(l),o.className=jt.apply(n,a)+(l?" "+l:""),t&&(o.ref=i);let c=e;return e[0]&&(c=o.as||e,delete o.as),It&&c[0]&&It(o),Dt(c,o)}return t?t(r):r}}var Mt,Bt,Ft,Tt,Rt,qt,Lt,zt,Ot,Ht,_t,Ut,Wt,Vt,Qt,Xt,Gt=(e,t)=>(e=>"function"==typeof e)(e)?e(t):e,Jt=(()=>{let e=0;return()=>(++e).toString()})(),Yt=(()=>{let e;return()=>{if(void 0===e&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),Kt=new Map,Zt=e=>{if(Kt.has(e))return;let t=setTimeout((()=>{Kt.delete(e),nn({type:4,toastId:e})}),1e3);Kt.set(e,t)},$t=(e,t)=>{switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,20)};case 1:return t.toast.id&&(e=>{let t=Kt.get(e);t&&clearTimeout(t)})(t.toast.id),{...e,toasts:e.toasts.map((e=>e.id===t.toast.id?{...e,...t.toast}:e))};case 2:let{toast:n}=t;return e.toasts.find((e=>e.id===n.id))?$t(e,{type:1,toast:n}):$t(e,{type:0,toast:n});case 3:let{toastId:a}=t;return a?Zt(a):e.toasts.forEach((e=>{Zt(e.id)})),{...e,toasts:e.toasts.map((e=>e.id===a||void 0===a?{...e,visible:!1}:e))};case 4:return void 0===t.toastId?{...e,toasts:[]}:{...e,toasts:e.toasts.filter((e=>e.id!==t.toastId))};case 5:return{...e,pausedAt:t.time};case 6:let r=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map((e=>({...e,pauseDuration:e.pauseDuration+r})))}}},en=[],tn={toasts:[],pausedAt:void 0},nn=e=>{tn=$t(tn,e),en.forEach((e=>{e(tn)}))},an={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},rn=e=>(t,n)=>{let a=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"blank",n=arguments.length>2?arguments[2]:void 0;return{createdAt:Date.now(),visible:!0,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...n,id:(null==n?void 0:n.id)||Jt()}}(t,e,n);return nn({type:2,toast:a}),a.id},sn=(e,t)=>rn("blank")(e,t);sn.error=rn("error"),sn.success=rn("success"),sn.loading=rn("loading"),sn.custom=rn("custom"),sn.dismiss=e=>{nn({type:3,toastId:e})},sn.remove=e=>nn({type:4,toastId:e}),sn.promise=(e,t,n)=>{let a=sn.loading(t.loading,{...n,...null==n?void 0:n.loading});return e.then((e=>(sn.success(Gt(t.success,e),{id:a,...n,...null==n?void 0:n.success}),e))).catch((e=>{sn.error(Gt(t.error,e),{id:a,...n,...null==n?void 0:n.error})})),e};var on=(e,t)=>{nn({type:1,toast:{id:e,height:t}})},ln=()=>{nn({type:5,time:Date.now()})},cn=e=>{let{toasts:t,pausedAt:n}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[t,n]=(0,i.useState)(tn);(0,i.useEffect)((()=>(en.push(n),()=>{let e=en.indexOf(n);e>-1&&en.splice(e,1)})),[t]);let a=t.toasts.map((t=>{var n,a;return{...e,...e[t.type],...t,duration:t.duration||(null==(n=e[t.type])?void 0:n.duration)||(null==e?void 0:e.duration)||an[t.type],style:{...e.style,...null==(a=e[t.type])?void 0:a.style,...t.style}}}));return{...t,toasts:a}}(e);(0,i.useEffect)((()=>{if(n)return;let e=Date.now(),a=t.map((t=>{if(t.duration===1/0)return;let n=(t.duration||0)+t.pauseDuration-(e-t.createdAt);if(!(n<0))return setTimeout((()=>sn.dismiss(t.id)),n);t.visible&&sn.dismiss(t.id)}));return()=>{a.forEach((e=>e&&clearTimeout(e)))}}),[t,n]);let a=(0,i.useCallback)((()=>{n&&nn({type:6,time:Date.now()})}),[n]),r=(0,i.useCallback)(((e,n)=>{let{reverseOrder:a=!1,gutter:r=8,defaultPosition:s}=n||{},i=t.filter((t=>(t.position||s)===(e.position||s)&&t.height)),o=i.findIndex((t=>t.id===e.id)),l=i.filter(((e,t)=>t<o&&e.visible)).length;return i.filter((e=>e.visible)).slice(...a?[l+1]:[0,l]).reduce(((e,t)=>e+(t.height||0)+r),0)}),[t]);return{toasts:t,handlers:{updateHeight:on,startPause:ln,endPause:a,calculateOffset:r}}},un=Nt(Mt||(Mt=ft(["\nfrom {\n  transform: scale(0) rotate(45deg);\n\topacity: 0;\n}\nto {\n transform: scale(1) rotate(45deg);\n  opacity: 1;\n}"]))),dn=Nt(Bt||(Bt=ft(["\nfrom {\n  transform: scale(0);\n  opacity: 0;\n}\nto {\n  transform: scale(1);\n  opacity: 1;\n}"]))),pn=Nt(Ft||(Ft=ft(["\nfrom {\n  transform: scale(0) rotate(90deg);\n\topacity: 0;\n}\nto {\n  transform: scale(1) rotate(90deg);\n\topacity: 1;\n}"]))),hn=Pt("div")(Tt||(Tt=ft(["\n  width: 20px;\n  opacity: 0;\n  height: 20px;\n  border-radius: 10px;\n  background: ",";\n  position: relative;\n  transform: rotate(45deg);\n\n  animation: "," 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n  animation-delay: 100ms;\n\n  &:after,\n  &:before {\n    content: '';\n    animation: "," 0.15s ease-out forwards;\n    animation-delay: 150ms;\n    position: absolute;\n    border-radius: 3px;\n    opacity: 0;\n    background: ",";\n    bottom: 9px;\n    left: 4px;\n    height: 2px;\n    width: 12px;\n  }\n\n  &:before {\n    animation: "," 0.15s ease-out forwards;\n    animation-delay: 180ms;\n    transform: rotate(90deg);\n  }\n"])),(e=>e.primary||"#ff4b4b"),un,dn,(e=>e.secondary||"#fff"),pn),mn=Nt(Rt||(Rt=ft(["\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n"]))),fn=Pt("div")(qt||(qt=ft(["\n  width: 12px;\n  height: 12px;\n  box-sizing: border-box;\n  border: 2px solid;\n  border-radius: 100%;\n  border-color: ",";\n  border-right-color: ",";\n  animation: "," 1s linear infinite;\n"])),(e=>e.secondary||"#e0e0e0"),(e=>e.primary||"#616161"),mn),gn=Nt(Lt||(Lt=ft(["\nfrom {\n  transform: scale(0) rotate(45deg);\n\topacity: 0;\n}\nto {\n  transform: scale(1) rotate(45deg);\n\topacity: 1;\n}"]))),yn=Nt(zt||(zt=ft(["\n0% {\n\theight: 0;\n\twidth: 0;\n\topacity: 0;\n}\n40% {\n  height: 0;\n\twidth: 6px;\n\topacity: 1;\n}\n100% {\n  opacity: 1;\n  height: 10px;\n}"]))),bn=Pt("div")(Ot||(Ot=ft(["\n  width: 20px;\n  opacity: 0;\n  height: 20px;\n  border-radius: 10px;\n  background: ",";\n  position: relative;\n  transform: rotate(45deg);\n\n  animation: "," 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n  animation-delay: 100ms;\n  &:after {\n    content: '';\n    box-sizing: border-box;\n    animation: "," 0.2s ease-out forwards;\n    opacity: 0;\n    animation-delay: 200ms;\n    position: absolute;\n    border-right: 2px solid;\n    border-bottom: 2px solid;\n    border-color: ",";\n    bottom: 6px;\n    left: 6px;\n    height: 10px;\n    width: 6px;\n  }\n"])),(e=>e.primary||"#61d345"),gn,yn,(e=>e.secondary||"#fff")),vn=Pt("div")(Ht||(Ht=ft(["\n  position: absolute;\n"]))),kn=Pt("div")(_t||(_t=ft(["\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  min-width: 20px;\n  min-height: 20px;\n"]))),xn=Nt(Ut||(Ut=ft(["\nfrom {\n  transform: scale(0.6);\n  opacity: 0.4;\n}\nto {\n  transform: scale(1);\n  opacity: 1;\n}"]))),Sn=Pt("div")(Wt||(Wt=ft(["\n  position: relative;\n  transform: scale(0.6);\n  opacity: 0.4;\n  min-width: 20px;\n  animation: "," 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n"])),xn),wn=e=>{let{toast:t}=e,{icon:n,type:a,iconTheme:r}=t;return void 0!==n?"string"==typeof n?i.createElement(Sn,null,n):n:"blank"===a?null:i.createElement(kn,null,i.createElement(fn,{...r}),"loading"!==a&&i.createElement(vn,null,"error"===a?i.createElement(hn,{...r}):i.createElement(bn,{...r})))},Cn=e=>"\n0% {transform: translate3d(0,".concat(-200*e,"%,0) scale(.6); opacity:.5;}\n100% {transform: translate3d(0,0,0) scale(1); opacity:1;}\n"),An=e=>"\n0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}\n100% {transform: translate3d(0,".concat(-150*e,"%,-1px) scale(.6); opacity:0;}\n"),jn=Pt("div")(Vt||(Vt=ft(["\n  display: flex;\n  align-items: center;\n  background: #fff;\n  color: #363636;\n  line-height: 1.3;\n  will-change: transform;\n  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);\n  max-width: 350px;\n  pointer-events: auto;\n  padding: 8px 10px;\n  border-radius: 8px;\n"]))),Dn=Pt("div")(Qt||(Qt=ft(["\n  display: flex;\n  justify-content: center;\n  margin: 4px 10px;\n  color: inherit;\n  flex: 1 1 auto;\n  white-space: pre-line;\n"]))),En=i.memo((e=>{let{toast:t,position:n,style:a,children:r}=e,s=t.height?((e,t)=>{let n=e.includes("top")?1:-1,[a,r]=Yt()?["0%{opacity:0;} 100%{opacity:1;}","0%{opacity:1;} 100%{opacity:0;}"]:[Cn(n),An(n)];return{animation:t?"".concat(Nt(a)," 0.35s cubic-bezier(.21,1.02,.73,1) forwards"):"".concat(Nt(r)," 0.4s forwards cubic-bezier(.06,.71,.55,1)")}})(t.position||n||"top-center",t.visible):{opacity:0},o=i.createElement(wn,{toast:t}),l=i.createElement(Dn,{...t.ariaProps},Gt(t.message,t));return i.createElement(jn,{className:t.className,style:{...s,...a,...t.style}},"function"==typeof r?r({icon:o,message:l}):i.createElement(i.Fragment,null,o,l))}));!function(e,t,n,a){xt.p=t,Dt=e,Et=n,It=a}(i.createElement);var In=e=>{let{id:t,className:n,style:a,onHeightUpdate:r,children:s}=e,o=i.useCallback((e=>{if(e){let n=()=>{let n=e.getBoundingClientRect().height;r(t,n)};n(),new MutationObserver(n).observe(e,{subtree:!0,childList:!0,characterData:!0})}}),[t,r]);return i.createElement("div",{ref:o,className:n,style:a},s)},Nn=jt(Xt||(Xt=ft(["\n  z-index: 9999;\n  > * {\n    pointer-events: auto;\n  }\n"]))),Pn=e=>{let{reverseOrder:t,position:n="top-center",toastOptions:a,gutter:r,children:s,containerStyle:o,containerClassName:l}=e,{toasts:c,handlers:u}=cn(a);return i.createElement("div",{style:{position:"fixed",zIndex:9999,top:16,left:16,right:16,bottom:16,pointerEvents:"none",...o},className:l,onMouseEnter:u.startPause,onMouseLeave:u.endPause},c.map((e=>{let a=e.position||n,o=((e,t)=>{let n=e.includes("top"),a=n?{top:0}:{bottom:0},r=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:Yt()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:"translateY(".concat(t*(n?1:-1),"px)"),...a,...r}})(a,u.calculateOffset(e,{reverseOrder:t,gutter:r,defaultPosition:n}));return i.createElement(In,{id:e.id,key:e.id,onHeightUpdate:u.updateHeight,className:e.visible?Nn:"",style:o},"custom"===e.type?Gt(e.message,e):s?s(e):i.createElement(En,{toast:e,position:a}))})))},Mn=sn,Bn={outline:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},filled:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",stroke:"none"}};const Fn=(e,t,n,a)=>{const r=(0,i.forwardRef)(((n,r)=>{let{color:s="currentColor",size:o=24,stroke:l=2,className:c,children:u,...d}=n;return(0,i.createElement)("svg",{ref:r,...Bn[e],width:o,height:o,className:["tabler-icon","tabler-icon-".concat(t),c].join(" "),..."filled"===e?{fill:s}:{strokeWidth:l,stroke:s},...d},[...a.map((e=>{let[t,n]=e;return(0,i.createElement)(t,n)})),...Array.isArray(u)?u:[u]])}));return r.displayName="".concat(n),r};var Tn=Fn("outline","code-circle-2","IconCodeCircle2",[["path",{d:"M8.5 13.5l-1.5 -1.5l1.5 -1.5",key:"svg-0"}],["path",{d:"M15.5 10.5l1.5 1.5l-1.5 1.5",key:"svg-1"}],["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-2"}],["path",{d:"M13 9.5l-2 5.5",key:"svg-3"}]]),Rn=Fn("filled","arrow-big-right-lines-filled","IconArrowBigRightLinesFilled",[["path",{d:"M12.089 3.634a2 2 0 0 0 -1.089 1.78l-.001 2.585l-1.999 .001a1 1 0 0 0 -1 1v6l.007 .117a1 1 0 0 0 .993 .883l1.999 -.001l.001 2.587a2 2 0 0 0 3.414 1.414l6.586 -6.586a2 2 0 0 0 0 -2.828l-6.586 -6.586a2 2 0 0 0 -2.18 -.434l-.145 .068z",key:"svg-0"}],["path",{d:"M3 8a1 1 0 0 1 .993 .883l.007 .117v6a1 1 0 0 1 -1.993 .117l-.007 -.117v-6a1 1 0 0 1 1 -1z",key:"svg-1"}],["path",{d:"M6 8a1 1 0 0 1 .993 .883l.007 .117v6a1 1 0 0 1 -1.993 .117l-.007 -.117v-6a1 1 0 0 1 1 -1z",key:"svg-2"}]]),qn=Fn("outline","coins","IconCoins",[["path",{d:"M9 14c0 1.657 2.686 3 6 3s6 -1.343 6 -3s-2.686 -3 -6 -3s-6 1.343 -6 3z",key:"svg-0"}],["path",{d:"M9 14v4c0 1.656 2.686 3 6 3s6 -1.344 6 -3v-4",key:"svg-1"}],["path",{d:"M3 6c0 1.072 1.144 2.062 3 2.598s4.144 .536 6 0c1.856 -.536 3 -1.526 3 -2.598c0 -1.072 -1.144 -2.062 -3 -2.598s-4.144 -.536 -6 0c-1.856 .536 -3 1.526 -3 2.598z",key:"svg-2"}],["path",{d:"M3 6v10c0 .888 .772 1.45 2 2",key:"svg-3"}],["path",{d:"M3 11c0 .888 .772 1.45 2 2",key:"svg-4"}]]),Ln=Fn("filled","award-filled","IconAwardFilled",[["path",{d:"M19.496 13.983l1.966 3.406a1.001 1.001 0 0 1 -.705 1.488l-.113 .011l-.112 -.001l-2.933 -.19l-1.303 2.636a1.001 1.001 0 0 1 -1.608 .26l-.082 -.094l-.072 -.11l-1.968 -3.407a8.994 8.994 0 0 0 6.93 -3.999z",key:"svg-0"}],["path",{d:"M11.43 17.982l-1.966 3.408a1.001 1.001 0 0 1 -1.622 .157l-.076 -.1l-.064 -.114l-1.304 -2.635l-2.931 .19a1.001 1.001 0 0 1 -1.022 -1.29l.04 -.107l.05 -.1l1.968 -3.409a8.994 8.994 0 0 0 6.927 4.001z",key:"svg-1"}],["path",{d:"M12 2l.24 .004a7 7 0 0 1 6.76 6.996l-.003 .193l-.007 .192l-.018 .245l-.026 .242l-.024 .178a6.985 6.985 0 0 1 -.317 1.268l-.116 .308l-.153 .348a7.001 7.001 0 0 1 -12.688 -.028l-.13 -.297l-.052 -.133l-.08 -.217l-.095 -.294a6.96 6.96 0 0 1 -.093 -.344l-.06 -.271l-.049 -.271l-.02 -.139l-.039 -.323l-.024 -.365l-.006 -.292a7 7 0 0 1 6.76 -6.996l.24 -.004z",key:"svg-2"}]]),zn=Fn("outline","refresh","IconRefresh",[["path",{d:"M20 11a8.1 8.1 0 0 0 -15.5 -2m-.5 -4v4h4",key:"svg-0"}],["path",{d:"M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4",key:"svg-1"}]]),On=Fn("outline","vaccine-bottle","IconVaccineBottle",[["path",{d:"M9 3m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v1a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-0"}],["path",{d:"M10 6v.98c0 .877 -.634 1.626 -1.5 1.77c-.866 .144 -1.5 .893 -1.5 1.77v8.48a2 2 0 0 0 2 2h6a2 2 0 0 0 2 -2v-8.48c0 -.877 -.634 -1.626 -1.5 -1.77a1.795 1.795 0 0 1 -1.5 -1.77v-.98",key:"svg-1"}],["path",{d:"M7 12h10",key:"svg-2"}],["path",{d:"M7 18h10",key:"svg-3"}],["path",{d:"M11 15h2",key:"svg-4"}]]),Hn=Fn("outline","snowflake","IconSnowflake",[["path",{d:"M10 4l2 1l2 -1",key:"svg-0"}],["path",{d:"M12 2v6.5l3 1.72",key:"svg-1"}],["path",{d:"M17.928 6.268l.134 2.232l1.866 1.232",key:"svg-2"}],["path",{d:"M20.66 7l-5.629 3.25l.01 3.458",key:"svg-3"}],["path",{d:"M19.928 14.268l-1.866 1.232l-.134 2.232",key:"svg-4"}],["path",{d:"M20.66 17l-5.629 -3.25l-2.99 1.738",key:"svg-5"}],["path",{d:"M14 20l-2 -1l-2 1",key:"svg-6"}],["path",{d:"M12 22v-6.5l-3 -1.72",key:"svg-7"}],["path",{d:"M6.072 17.732l-.134 -2.232l-1.866 -1.232",key:"svg-8"}],["path",{d:"M3.34 17l5.629 -3.25l-.01 -3.458",key:"svg-9"}],["path",{d:"M4.072 9.732l1.866 -1.232l.134 -2.232",key:"svg-10"}],["path",{d:"M3.34 7l5.629 3.25l2.99 -1.738",key:"svg-11"}]]),_n=Fn("outline","spiral","IconSpiral",[["path",{d:"M10 12.057a1.9 1.9 0 0 0 .614 .743c1.06 .713 2.472 .112 3.043 -.919c.839 -1.513 -.022 -3.368 -1.525 -4.08c-2 -.95 -4.371 .154 -5.24 2.086c-1.095 2.432 .29 5.248 2.71 6.246c2.931 1.208 6.283 -.418 7.438 -3.255c1.36 -3.343 -.557 -7.134 -3.896 -8.41c-3.855 -1.474 -8.2 .68 -9.636 4.422c-1.63 4.253 .823 9.024 5.082 10.576c4.778 1.74 10.118 -.941 11.833 -5.59a9.354 9.354 0 0 0 .577 -2.813",key:"svg-0"}]]),Un=Fn("outline","slice","IconSlice",[["path",{d:"M3 19l15 -15l3 3l-6 6l2 2a14 14 0 0 1 -14 4",key:"svg-0"}]]),Wn=Fn("outline","bolt","IconBolt",[["path",{d:"M13 3l0 7l6 0l-8 11l0 -7l-6 0l8 -11",key:"svg-0"}]]),Vn=Fn("outline","flame","IconFlame",[["path",{d:"M12 12c2 -2.96 0 -7 -1 -8c0 3.038 -1.773 4.741 -3 6c-1.226 1.26 -2 3.24 -2 5a6 6 0 1 0 12 0c0 -1.532 -1.056 -3.94 -2 -5c-1.786 3 -2.791 3 -4 2z",key:"svg-0"}]]),Qn=Fn("outline","hammer","IconHammer",[["path",{d:"M11.414 10l-7.383 7.418a2.091 2.091 0 0 0 0 2.967a2.11 2.11 0 0 0 2.976 0l7.407 -7.385",key:"svg-0"}],["path",{d:"M18.121 15.293l2.586 -2.586a1 1 0 0 0 0 -1.414l-7.586 -7.586a1 1 0 0 0 -1.414 0l-2.586 2.586a1 1 0 0 0 0 1.414l7.586 7.586a1 1 0 0 0 1.414 0z",key:"svg-1"}]]),Xn=Fn("outline","sun","IconSun",[["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-0"}],["path",{d:"M3 12h1m8 -9v1m8 8h1m-9 8v1m-6.4 -15.4l.7 .7m12.1 -.7l-.7 .7m0 11.4l.7 .7m-12.1 -.7l-.7 .7",key:"svg-1"}]]),Gn=Fn("outline","trident","IconTrident",[["path",{d:"M3 6l2 -2v3a7 7 0 0 0 14 0v-3l2 2",key:"svg-0"}],["path",{d:"M12 21v-18l-2 2m4 0l-2 -2",key:"svg-1"}]]),Jn=Fn("outline","skull","IconSkull",[["path",{d:"M12 4c4.418 0 8 3.358 8 7.5c0 1.901 -.755 3.637 -2 4.96l0 2.54a1 1 0 0 1 -1 1h-10a1 1 0 0 1 -1 -1v-2.54c-1.245 -1.322 -2 -3.058 -2 -4.96c0 -4.142 3.582 -7.5 8 -7.5z",key:"svg-0"}],["path",{d:"M10 17v3",key:"svg-1"}],["path",{d:"M14 17v3",key:"svg-2"}],["path",{d:"M9 11m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-3"}],["path",{d:"M15 11m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-4"}]]),Yn=Fn("outline","brain","IconBrain",[["path",{d:"M15.5 13a3.5 3.5 0 0 0 -3.5 3.5v1a3.5 3.5 0 0 0 7 0v-1.8",key:"svg-0"}],["path",{d:"M8.5 13a3.5 3.5 0 0 1 3.5 3.5v1a3.5 3.5 0 0 1 -7 0v-1.8",key:"svg-1"}],["path",{d:"M17.5 16a3.5 3.5 0 0 0 0 -7h-.5",key:"svg-2"}],["path",{d:"M19 9.3v-2.8a3.5 3.5 0 0 0 -7 0",key:"svg-3"}],["path",{d:"M6.5 16a3.5 3.5 0 0 1 0 -7h.5",key:"svg-4"}],["path",{d:"M5 9.3v-2.8a3.5 3.5 0 0 1 7 0v10",key:"svg-5"}]]),Kn=Fn("outline","access-point","IconAccessPoint",[["path",{d:"M12 12l0 .01",key:"svg-0"}],["path",{d:"M14.828 9.172a4 4 0 0 1 0 5.656",key:"svg-1"}],["path",{d:"M17.657 6.343a8 8 0 0 1 0 11.314",key:"svg-2"}],["path",{d:"M9.168 14.828a4 4 0 0 1 0 -5.656",key:"svg-3"}],["path",{d:"M6.337 17.657a8 8 0 0 1 0 -11.314",key:"svg-4"}]]),Zn=n(184);let $n=function(e){return e.Movement="Movement",e.Money="Money",e.XP="XP",e.Redraw="Redraw",e}({}),ea=function(e){return e.Default="default",e.Button="button",e.Large="large",e}({});class ta extends i.Component{constructor(){super(...arguments),this.getTextSize=()=>{switch(this.props.size){case ea.Button:return 15;case ea.Large:return 30}return 15},this.getIconSize=()=>{switch(this.props.size){case ea.Button:return 15;case ea.Large:return 24}return 12},this.getTextWeight=()=>{switch(this.props.size){case ea.Button:case ea.Large:return 600}return 400},this.render=()=>{try{const e=this.getIconSize();let t=null;switch(this.props.type){case $n.Movement:t=(0,Zn.jsx)(Rn,{size:e});break;case $n.Money:t=(0,Zn.jsx)(qn,{size:e});break;case $n.XP:t=(0,Zn.jsx)(Ln,{size:e});break;case $n.Redraw:t=(0,Zn.jsx)(zn,{size:e});break;case w.Acid:t=(0,Zn.jsx)(On,{size:e});break;case w.Cold:t=(0,Zn.jsx)(Hn,{size:e});break;case w.Decay:t=(0,Zn.jsx)(_n,{size:e});break;case w.Edged:t=(0,Zn.jsx)(Un,{size:e});break;case w.Electricity:t=(0,Zn.jsx)(Wn,{size:e});break;case w.Fire:t=(0,Zn.jsx)(Vn,{size:e});break;case w.Impact:t=(0,Zn.jsx)(Qn,{size:e});break;case w.Light:t=(0,Zn.jsx)(Xn,{size:e});break;case w.Piercing:t=(0,Zn.jsx)(Gn,{size:e});break;case w.Poison:t=(0,Zn.jsx)(Jn,{size:e});break;case w.Psychic:t=(0,Zn.jsx)(Yn,{size:e});break;case w.Sonic:t=(0,Zn.jsx)(Kn,{size:e})}return(0,Zn.jsxs)("div",{className:"icon-value",title:"".concat(this.props.value," ").concat(this.props.type),style:{fontSize:"".concat(this.getTextSize(),"px"),fontWeight:"".concat(this.getTextWeight())},children:[this.props.value," ",t]})}catch{return(0,Zn.jsx)("div",{className:"icon-value render-error"})}}}}ta.defaultProps={size:ea.Default};var na=Fn("outline","info-circle","IconInfoCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 9h.01",key:"svg-1"}],["path",{d:"M11 12h1v4h1",key:"svg-2"}]]);let aa=function(e){return e.Default="default",e.Dimmed="dimmed",e.Heading="heading",e.SubHeading="subheading",e.MinorHeading="minorheading",e.ListItem="listitem",e.Information="information",e.Tip="tip",e.Small="small",e.Empty="empty",e}({});class ra extends i.Component{constructor(){super(...arguments),this.render=()=>{try{let e=null;if(this.props.type===aa.Tip)e=(0,Zn.jsx)("div",{className:"skirmish-text-icon",children:(0,Zn.jsx)(na,{})});return(0,Zn.jsxs)("div",{className:"skirmish-text ".concat(this.props.type),children:[e,(0,Zn.jsx)("div",{className:"skirmish-text-content ".concat(this.props.type),children:this.props.children})]})}catch{return(0,Zn.jsx)("div",{className:"skirmish-text render-error"})}}}}ra.defaultProps={type:aa.Default};class sa extends i.Component{constructor(){super(...arguments),this.render=()=>{try{return this.props.value?(0,Zn.jsxs)("div",{className:"badge",children:[this.props.children,(0,Zn.jsx)("div",{className:"badge-value",children:this.props.value})]}):this.props.children}catch{return(0,Zn.jsx)("div",{className:"badge render-error"})}}}}sa.defaultProps={value:null};const ia=e=>{try{return(0,Zn.jsxs)("div",{className:"box",children:[(0,Zn.jsx)("div",{className:"box-content",children:e.children}),(0,Zn.jsx)("div",{className:"box-label",children:e.label})]})}catch{return(0,Zn.jsx)("div",{className:"box render-error"})}};class oa extends i.Component{constructor(){super(...arguments),this.render=()=>{try{return(0,Zn.jsx)("div",{className:"card-list",children:this.props.cards.map(((e,t)=>(0,Zn.jsx)("div",{className:"card-container",children:e},t)))})}catch{return(0,Zn.jsx)("div",{className:"card-list render-error"})}}}}const la=e=>{const[t,n]=(0,i.useState)("button"),a=()=>{n("query")},r=()=>{n("button"),e.onClick()},s=()=>{n("button")};if("button"===t)return(0,Zn.jsx)("button",{className:"danger",onClick:a,children:e.label});try{return(0,Zn.jsxs)("div",{className:"confirm-query",children:[(0,Zn.jsx)(ra,{children:(0,Zn.jsxs)("b",{children:[(0,Zn.jsx)("span",{className:"query-label",children:e.label})," - are you sure?"]})}),(0,Zn.jsxs)("div",{className:"button-row",children:[(0,Zn.jsx)("button",{onClick:r,children:"OK"}),(0,Zn.jsx)("button",{onClick:s,children:"Cancel"})]})]})}catch{return(0,Zn.jsx)("div",{className:"confirm-query render-error"})}};var ca=Fn("outline","x","IconX",[["path",{d:"M18 6l-12 12",key:"svg-0"}],["path",{d:"M6 6l12 12",key:"svg-1"}]]);class ua extends i.Component{constructor(){super(...arguments),this.closeClick=e=>{e.stopPropagation(),this.props.onClose&&this.props.onClose()},this.dialogClick=e=>{e.stopPropagation()},this.getDialog=()=>{try{let e=null;return this.props.onClose&&(e=(0,Zn.jsx)("button",{className:"icon-btn close-btn",onClick:this.closeClick,children:(0,Zn.jsx)(ca,{})})),(0,Zn.jsxs)("div",{className:"dialog level-".concat(this.props.level),onClick:this.dialogClick,children:[e,(0,Zn.jsx)("div",{className:"dialog-content",children:this.props.content})]})}catch{return(0,Zn.jsx)("div",{className:"dialog render-error"})}},this.render=()=>{try{return(0,Zn.jsx)("div",{className:"dialog-backdrop",onClick:this.closeClick,children:this.getDialog()})}catch{return(0,Zn.jsx)("div",{className:"dialog-backdrop render-error"})}}}}ua.defaultProps={level:1,onClose:null};const da=e=>{const[t,n]=(0,i.useState)(!1),a=(0,i.useRef)(null),r=(0,i.useRef)(null);(0,i.useEffect)((()=>{if(!a.current)return;const e=new MutationObserver(s);return e.observe(a.current,{childList:!0,subtree:!0}),()=>{e.disconnect()}}),[]);const s=()=>{const e=r.current;e&&e.animate({maxHeight:"".concat(e.scrollHeight,"px"),opacity:1},{duration:200,easing:"ease-in",fill:"forwards"})};return(0,Zn.jsxs)("div",{className:"expander",ref:a,onClick:e=>{e.stopPropagation(),t?(()=>{const e=r.current;e&&e.animate({maxHeight:0,opacity:0},{duration:200,easing:"ease-out"}).finished.then((()=>{e.style.display="none",n(!1)}))})():n(!0)},children:[(0,Zn.jsx)("div",{className:"expander-header",children:e.header}),t?(0,Zn.jsx)("div",{className:"expander-content",ref:r,children:e.content}):null]})},pa=e=>{const t=92,n=80*Math.PI,a=2*n/3;return(0,Zn.jsxs)("div",{className:"gauge",children:[(0,Zn.jsxs)("svg",{width:t,height:t,viewBox:"0 0 ".concat(t," ").concat(t),style:{transform:"rotate(-210deg)"},children:[(0,Zn.jsx)("circle",{cx:46,cy:46,r:40,fill:"none",stroke:"var(--border)",strokeWidth:5,strokeDasharray:"".concat(a,", ").concat(n),strokeLinecap:"round"}),(0,Zn.jsx)("circle",{cx:46,cy:46,r:40,fill:"none",stroke:"var(--primary)",strokeWidth:6,strokeDasharray:"".concat(a,", ").concat(n),strokeDashoffset:a*(1-Math.min(e.progress,1)),strokeLinecap:"round"})]}),(0,Zn.jsx)("div",{className:"gauge-content",children:e.content})]})};class ha extends i.Component{constructor(){super(...arguments),this.onClick=e=>{e.stopPropagation(),this.props.onClick&&this.props.onClick(e)},this.render=()=>{try{let e="playing-card";null===this.props.onClick||this.props.disabled||(e+=" clickable"),this.props.flipped&&(e+=" flipped"),this.props.disabled&&(e+=" disabled");const t=[];if(this.props.stack)for(let r=0;10!==r;++r){const e=10*u.randomDecimal()-5,n=10*u.randomDecimal()-5,a=10*u.randomDecimal()-5;t.push((0,Zn.jsx)("div",{className:"stack-card ".concat(this.props.type.toLowerCase()),style:{transform:"rotate(".concat(e,"deg)"),left:"".concat(n,"px"),top:"".concat(a,"px")}},r))}const n=""!==this.props.footerText||0!==this.props.footerContent.length,a=(this.props.footerType||this.props.type).toLowerCase();return(0,Zn.jsxs)("div",{className:e,onClick:this.onClick,children:[t,(0,Zn.jsxs)("div",{className:"playing-card-inner",children:[(0,Zn.jsxs)("div",{className:"playing-card-front ".concat(this.props.type.toLowerCase()),children:[(0,Zn.jsx)("div",{className:"card-content",children:this.props.front}),n?(0,Zn.jsxs)("div",{className:"card-footer ".concat(a),children:[(0,Zn.jsx)("div",{className:0===this.props.footerContent.length?"card-footer-text card-footer-text-full":"card-footer-text card-footer-text-left",children:this.props.footerText}),(0,Zn.jsx)("div",{className:"card-footer-content",children:this.props.disabled?null:this.props.footerContent})]}):null]}),(0,Zn.jsxs)("div",{className:"playing-card-back ".concat(this.props.type.toLowerCase()),children:[(0,Zn.jsx)("div",{className:"card-content",children:this.props.back}),n?(0,Zn.jsx)("div",{className:"card-footer ".concat(a),children:(0,Zn.jsx)("div",{className:"card-footer-text card-footer-text-full",children:this.props.footerText})}):null]})]})]})}catch{return(0,Zn.jsx)("div",{className:"playing-card render-error"})}}}}ha.defaultProps={stack:!1,type:E.Default,back:null,footerText:"",footerContent:[],footerType:null,flipped:!1,disabled:!1,onClick:null};class ma extends i.Component{constructor(){super(...arguments),this.render=()=>{try{const e="repeat(".concat(this.props.columnCount>0?this.props.columnCount:this.props.options.length,", 1fr)"),t=this.props.options.map((e=>{var t;const n=e.id===this.props.selectedID?"option selected":"option";return(0,Zn.jsx)("div",{className:n,onClick:()=>this.props.onSelect(e.id),children:null!==(t=e.display)&&void 0!==t?t:e.id},e.id)}));return(0,Zn.jsx)("div",{className:"selector",style:{gridTemplateColumns:e},children:t})}catch{return(0,Zn.jsx)("div",{className:"selector render-error"})}}}}ma.defaultProps={columnCount:0,selectedID:""};class fa extends i.Component{constructor(){super(...arguments),this.render=()=>{try{const e=(0,Zn.jsx)("div",{className:"stat-value-label",children:this.props.label});let t=null;if(t=Array.isArray(this.props.value)?(0,Zn.jsx)("div",{className:"stat-value-list",children:this.props.value.map(((e,t)=>(0,Zn.jsx)("div",{className:"stat-value-value",children:e},t)))}):(0,Zn.jsx)("div",{className:"stat-value-value",children:this.props.value}),"vertical"===this.props.orientation)return(0,Zn.jsxs)("div",{className:"stat-value vertical",children:[t,e]});let n="stat-value ".concat(this.props.orientation);return this.props.value||(n+=" zero"),(0,Zn.jsxs)("div",{className:n,children:[e,t]})}catch{return(0,Zn.jsx)("div",{className:"stat-value render-error"})}}}}fa.defaultProps={orientation:"horizontal"};var ga=Fn("filled","circle-check-filled","IconCircleCheckFilled",[["path",{d:"M17 3.34a10 10 0 1 1 -14.995 8.984l-.005 -.324l.005 -.324a10 10 0 0 1 14.995 -8.336zm-1.293 5.953a1 1 0 0 0 -1.32 -.083l-.094 .083l-3.293 3.292l-1.293 -1.292l-.094 -.083a1 1 0 0 0 -1.403 1.403l.083 .094l2 2l.094 .083a1 1 0 0 0 1.226 0l.094 -.083l4 -4l.083 -.094a1 1 0 0 0 -.083 -1.32z",key:"svg-0"}]]),ya=Fn("outline","circle","IconCircle",[["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-0"}]]);const ba=e=>{const t=t=>{t.stopPropagation(),e.onChange(!e.checked)};try{return(0,Zn.jsxs)("div",{className:"switch",onClick:t,children:[(0,Zn.jsx)("div",{className:"switch-label",children:e.label}),e.checked?(0,Zn.jsx)(ga,{className:"switch-icon checked"}):(0,Zn.jsx)(ya,{className:"switch-icon"})]})}catch{return(0,Zn.jsx)("div",{className:"switch render-error"})}};class va extends i.Component{constructor(){super(...arguments),this.render=()=>{try{const e=this.props.options.map((e=>{var t;const n=e.id===this.props.selectedID?"option selected":"option";return(0,Zn.jsx)("div",{className:n,onClick:()=>this.props.onSelect(e.id),children:null!==(t=e.display)&&void 0!==t?t:e.id},e.id)}));return(0,Zn.jsxs)("div",{className:"tabs",children:[(0,Zn.jsx)("div",{className:"spacer"}),e,(0,Zn.jsx)("div",{className:"spacer"})]})}catch{return(0,Zn.jsx)("div",{className:"tabs render-error"})}}}}va.defaultProps={selectedID:""};const ka=e=>{try{return(0,Zn.jsx)("div",{className:"tag",children:e.children})}catch{return(0,Zn.jsx)("div",{className:"tag render-error"})}};class xa extends i.Component{constructor(){super(...arguments),this.onClick=e=>{e.stopPropagation(),this.props.onClick&&this.props.onClick(this.props.action)},this.getPrerequisites=()=>null===this.props.combatant?[]:this.props.action.prerequisites.filter((e=>!Ie.isSatisfied(e,this.props.combatant))).map(((e,t)=>(0,Zn.jsx)("div",{className:"prerequisite highlighted",children:e.description},t))),this.getParameters=()=>this.props.action.parameters.map(((e,t)=>"targets"===e.id?(0,Zn.jsx)(sa,{value:this.props.developer?Oe.getActionTargetStrength(e,this.props.action):0,children:(0,Zn.jsx)("div",{className:"parameter",children:Fe.getParameterDescription(e)})},t):(0,Zn.jsx)("div",{className:"parameter",children:Fe.getParameterDescription(e)},t))),this.getEffects=()=>{const e=t=>{let n=null;return t.children.length>0&&(n=t.children.map(((t,n)=>(0,Zn.jsx)("div",{children:e(t)},n)))),(0,Zn.jsxs)("div",{children:[(0,Zn.jsx)(sa,{value:this.props.developer?Oe.getActionEffectStrength(t):0,children:(0,Zn.jsx)("div",{className:"effect",children:Be.getDescription(t,this.props.combatant,this.props.encounter)})}),n?(0,Zn.jsx)("div",{className:"indent",children:n}):null]})};return this.props.action.effects.map(((t,n)=>(0,Zn.jsx)("div",{children:e(t)},n)))},this.render=()=>(0,Zn.jsx)(ha,{type:E.Action,front:(0,Zn.jsxs)("div",{className:"action-card-front",children:[(0,Zn.jsx)("div",{className:"action-title",children:(0,Zn.jsx)(ra,{type:aa.SubHeading,children:this.props.action.name})}),(0,Zn.jsxs)("div",{className:"tags",children:[(0,Zn.jsx)(ka,{children:Fe.getActionType(this.props.action)}),"Quick"===Fe.getActionSpeed(this.props.action)?(0,Zn.jsx)(ka,{children:"Quick"}):null]}),this.getPrerequisites(),this.getParameters(),this.getEffects()]}),footerText:this.props.footer||"Action",footerType:this.props.footerType,disabled:this.props.disabled,onClick:this.props.onClick?this.onClick:null})}}xa.defaultProps={developer:!1,combatant:null,encounter:null,disabled:!1,onClick:null};class Sa extends i.Component{constructor(){super(...arguments),this.onClick=(e,t)=>{e.stopPropagation(),this.props.onSelectRegion(t)},this.getHex=e=>{let t="rgb(255, 255, 255)",n="var(--control)";const a=this.props.map.regions.find((t=>t.id===e.regionID))||null;if(a){let r=U.parse(a.color);if(r){const s="".concat(e.x," ").concat(e.y),i=u.getSeededRNG(s);r=U.tweak(r,6,i),t=U.toString(r),n=U.toString(U.darken(r,.95)),this.props.selectedRegion&&this.props.selectedRegion.id===a.id&&(t=U.toString(U.lighten(r,.7)),n=U.toString(r))}}const r=.024,s=.1,i=[{x:e.x+r+s,y:e.y+r},{x:e.x+1-r-s,y:e.y+r},{x:e.x+1+s-r,y:e.y+.5},{x:e.x+1-r-s,y:e.y+1-r},{x:e.x+r+s,y:e.y+1-r},{x:e.x+r-s,y:e.y+.5}];return e.x%2===0?i.forEach((e=>e.y+=.25)):i.forEach((e=>e.y-=.25)),(0,Zn.jsx)("polygon",{className:"campaign-map-hex",points:i.map((e=>"".concat(e.x,",").concat(e.y))).join(" "),style:{fill:t,stroke:n},onClick:e=>this.onClick(e,a)},"".concat(e.x," ").concat(e.y))},this.getLabel=e=>{const t=_.getCentralSquare(this.props.map,e);if(t){let n=0,a=0;switch(this.props.options.renderer){case"chrome":case"edge":case"firefox":n=.24,a=.04;break;case"safari":n=-.005,a=.03}return(0,Zn.jsxs)("g",{onClick:t=>this.onClick(t,e),children:[(0,Zn.jsx)("circle",{className:"campaign-map-label-container",cx:t.x+.5,cy:t.y+.5+(t.x%2===0?.25:-.25),r:.33}),(0,Zn.jsx)("text",{className:"campaign-map-label-text",x:t.x+.5+n,y:t.y+.5+a+(t.x%2===0?.25:-.25),textLength:.5,dominantBaseline:"middle",textAnchor:"middle",children:e.encounters.length})]},e.id)}return null},this.render=()=>{try{let e=this.props.map.squares;if("region"===this.props.mode&&null!==this.props.selectedRegion){const t=this.props.selectedRegion.id;e=e.filter((e=>e.regionID===t))}const t=_.getDimensions(e);t.left-=1,t.top-=1,t.right+=1,t.bottom+=1;const n=t.right-t.left+1,a=t.bottom-t.top+1;return(0,Zn.jsxs)("svg",{className:"campaign-map",viewBox:"".concat(t.left," ").concat(t.top," ").concat(n," ").concat(a),onClick:e=>this.onClick(e,null),children:[e.map(this.getHex),"map"===this.props.mode?this.props.map.regions.map(this.getLabel):null]})}catch{return(0,Zn.jsx)("div",{className:"campaign-map render-error"})}}}}Sa.defaultProps={mode:"map",onSelectRegion:()=>null};var wa=Fn("outline","heart-off","IconHeartOff",[["path",{d:"M3 3l18 18",key:"svg-0"}],["path",{d:"M19.5 12.572l-1.5 1.428m-2 2l-4 4l-7.5 -7.428a5 5 0 0 1 -1.288 -5.068a4.976 4.976 0 0 1 1.788 -2.504m3 -1c1.56 0 3.05 .727 4 2a5 5 0 1 1 7.5 6.572",key:"svg-1"}]]),Ca=Fn("filled","heart-filled","IconHeartFilled",[["path",{d:"M6.979 3.074a6 6 0 0 1 4.988 1.425l.037 .033l.034 -.03a6 6 0 0 1 4.733 -1.44l.246 .036a6 6 0 0 1 3.364 10.008l-.18 .185l-.048 .041l-7.45 7.379a1 1 0 0 1 -1.313 .082l-.094 -.082l-7.493 -7.422a6 6 0 0 1 3.176 -10.215z",key:"svg-0"}]]),Aa=Fn("outline","user","IconUser",[["path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0",key:"svg-0"}],["path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2",key:"svg-1"}]]),ja=Fn("outline","arrows-right-left","IconArrowsRightLeft",[["path",{d:"M21 7l-18 0",key:"svg-0"}],["path",{d:"M18 10l3 -3l-3 -3",key:"svg-1"}],["path",{d:"M6 20l-3 -3l3 -3",key:"svg-2"}],["path",{d:"M3 17l18 0",key:"svg-3"}]]),Da=Fn("outline","user-down","IconUserDown",[["path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0",key:"svg-0"}],["path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4c.342 0 .674 .043 .99 .124",key:"svg-1"}],["path",{d:"M19 16v6",key:"svg-2"}],["path",{d:"M22 19l-3 3l-3 -3",key:"svg-3"}]]),Ea=Fn("outline","moon-stars","IconMoonStars",[["path",{d:"M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z",key:"svg-0"}],["path",{d:"M17 4a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2",key:"svg-1"}],["path",{d:"M19 11h2m-1 -1v2",key:"svg-2"}]]);class Ia extends i.Component{constructor(){super(...arguments),this.render=()=>{try{return(0,Zn.jsxs)("div",{className:"combatant-state-panel",children:[(0,Zn.jsxs)("div",{className:this.props.combatant.combat.state===I.Standing?"state-box selected":"state-box",children:[(0,Zn.jsx)(Aa,{}),(0,Zn.jsx)("div",{className:"state-text",children:"Standing"})]}),(0,Zn.jsx)(ja,{className:"state-arrows",size:10}),(0,Zn.jsxs)("div",{className:this.props.combatant.combat.state===I.Prone?"state-box selected":"state-box",children:[(0,Zn.jsx)(Da,{}),(0,Zn.jsx)("div",{className:"state-text",children:"Prone"})]}),(0,Zn.jsx)(ja,{className:"state-arrows",size:10}),(0,Zn.jsxs)("div",{className:this.props.combatant.combat.state===I.Unconscious?"state-box selected":"state-box",children:[(0,Zn.jsx)(Ea,{}),(0,Zn.jsx)("div",{className:"state-text",children:"Unc."})]}),(0,Zn.jsx)(ja,{className:"state-arrows",size:10}),(0,Zn.jsxs)("div",{className:this.props.combatant.combat.state===I.Dead?"state-box selected":"state-box",children:[(0,Zn.jsx)(ca,{}),(0,Zn.jsx)("div",{className:"state-text",children:"Dead"})]}),this.props.combatant.combat.stunned?(0,Zn.jsx)("div",{className:"state-stunned",children:"Stunned"}):null]})}catch{return(0,Zn.jsx)("div",{className:"combatant-state-panel render-error"})}}}}var Na=Fn("outline","circle-plus","IconCirclePlus",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M9 12h6",key:"svg-1"}],["path",{d:"M12 9v6",key:"svg-2"}]]),Pa=Fn("outline","circle-minus","IconCircleMinus",[["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-0"}],["path",{d:"M9 12l6 0",key:"svg-1"}]]);class Ma extends i.Component{constructor(){super(...arguments),this.getConditions=e=>{const t=this.props.combatant.combat.conditions.filter((t=>t.trait===e));return d.distinct(t,(e=>G.getConditionDescription(e))).map((e=>{const t=G.getConditionIsBeneficial(e),n=this.props.combatant.combat.conditions.filter((t=>G.getConditionDescription(t)===G.getConditionDescription(e)));return(0,Zn.jsxs)("div",{className:t?"condition-row beneficial":"condition-row detrimental",children:[t?(0,Zn.jsx)(Na,{size:18}):(0,Zn.jsx)(Pa,{size:18}),(0,Zn.jsx)(fa,{orientation:"compact",label:G.getConditionDescription(e),value:d.sum(n,(e=>e.rank))})]},e.id)}))},this.getAuras=()=>Ce.getAuraConditions(this.props.encounter,this.props.combatant).map((e=>{const t=G.getConditionIsBeneficial(e);return(0,Zn.jsxs)("div",{className:t?"condition-row beneficial":"condition-row detrimental",children:[t?(0,Zn.jsx)(Na,{size:18}):(0,Zn.jsx)(Pa,{size:18}),(0,Zn.jsx)(fa,{orientation:"compact",label:G.getConditionDescription(e),value:e.rank})]},e.id)})),this.render=()=>{try{const e=this.getConditions(x.Endurance),t=this.getConditions(x.Resolve),n=this.getConditions(x.Speed),a=this.getAuras();let r=null;return e.length+t.length+n.length+a.length>0&&(r=(0,Zn.jsx)(ia,{label:"Conditions",children:(0,Zn.jsxs)("div",{children:[e.length>0?(0,Zn.jsx)(ra,{type:aa.MinorHeading,children:"Endurance Conditions"}):null,e,t.length>0?(0,Zn.jsx)(ra,{type:aa.MinorHeading,children:"Resolve Conditions"}):null,t,n.length>0?(0,Zn.jsx)(ra,{type:aa.MinorHeading,children:"Speed Conditions"}):null,n,a.length>0?(0,Zn.jsx)(ra,{type:aa.MinorHeading,children:"Conditions from Auras"}):null,a]})})),(0,Zn.jsx)("div",{className:"conditions-panel",children:r})}catch{return(0,Zn.jsx)("div",{className:"conditions-panel render-error"})}}}}class Ba extends i.Component{constructor(){super(...arguments),this.getHealth=()=>{if(this.props.combatant.quirks.includes(P.Drone))return null;let e=[];const t=Ce.getTraitRank(this.props.encounter,this.props.combatant,x.Resolve);for(let r=0;r<t;++r)e.push(r<this.props.combatant.combat.wounds?(0,Zn.jsx)(wa,{size:25},r):(0,Zn.jsx)(Ca,{className:"heartbeat",size:25},r));e.reverse();const n=5===e.length||6===e.length?3:4,a=[];for(;e.length>n;)a.push((0,Zn.jsx)("div",{className:"wounds",children:e.slice(0,n)},a.length)),e=e.slice(n);return 0!==e.length&&a.push((0,Zn.jsx)("div",{className:"wounds",children:e},a.length)),(0,Zn.jsxs)("div",{className:"combat-stats-row",children:[(0,Zn.jsx)(fa,{orientation:"vertical",label:"Damage",value:this.props.combatant.combat.damage}),(0,Zn.jsx)(fa,{orientation:"vertical",label:"Wounds",value:(0,Zn.jsx)("div",{className:"wounds-section",children:a})})]})},this.render=()=>{try{const e=this.getHealth();return(0,Zn.jsxs)("div",{className:"combat-stats-panel",children:[(0,Zn.jsxs)(ia,{label:"Stats",children:[(0,Zn.jsx)(Ia,{combatant:this.props.combatant}),(0,Zn.jsx)("hr",{}),(0,Zn.jsxs)("div",{className:"combat-stats-row",children:[(0,Zn.jsx)(fa,{orientation:"vertical",label:"Senses",value:this.props.combatant.combat.senses}),(0,Zn.jsx)(fa,{orientation:"vertical",label:"Hidden",value:this.props.combatant.combat.hidden})]}),e?(0,Zn.jsx)("hr",{}):null,e]}),(0,Zn.jsx)(Ma,{combatant:this.props.combatant,encounter:this.props.encounter})]})}catch{return(0,Zn.jsx)("div",{className:"combat-stats-panel render-error"})}}}}class Fa extends i.Component{constructor(){super(...arguments),this.render=()=>{try{return(0,Zn.jsxs)("div",{className:"combatant-notices",children:[this.props.combatant.combat.state===I.Prone?(0,Zn.jsx)(ra,{type:aa.Information,children:(0,Zn.jsxs)("p",{children:[(0,Zn.jsxs)("b",{children:[this.props.combatant.name," is Prone."]})," Their skill ranks are halved and moving costs are doubled."]})}):null,this.props.combatant.combat.state===I.Unconscious?(0,Zn.jsx)(ra,{type:aa.Information,children:(0,Zn.jsxs)("p",{children:[(0,Zn.jsxs)("b",{children:[this.props.combatant.name," is Unconscious."]})," They cannot spend movement points or take any actions until their wounds are healed."]})}):null,this.props.combatant.combat.state===I.Dead?(0,Zn.jsx)(ra,{type:aa.Information,children:(0,Zn.jsxs)("p",{children:[(0,Zn.jsxs)("b",{children:[this.props.combatant.name," is Dead."]})," They cannot spend movement points or take any actions."]})}):null,this.props.combatant.combat.stunned?(0,Zn.jsx)(ra,{type:aa.Information,children:(0,Zn.jsxs)("p",{children:[(0,Zn.jsxs)("b",{children:[this.props.combatant.name," is Stunned."]})," They cannot spend movement points or take any actions this round."]})}):null,this.props.combatant.combat.hidden>0?(0,Zn.jsx)(ra,{type:aa.Information,children:(0,Zn.jsxs)("p",{children:[(0,Zn.jsxs)("b",{children:[this.props.combatant.name," is Hidden."]})," Their moving costs are doubled."]})}):null]})}catch{return(0,Zn.jsx)("div",{className:"combatant-notices render-error"})}}}}var Ta=Fn("outline","circle-arrow-down","IconCircleArrowDown",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M8 12l4 4",key:"svg-1"}],["path",{d:"M12 8v8",key:"svg-2"}],["path",{d:"M16 12l-4 4",key:"svg-3"}]]),Ra=Fn("outline","circle-arrow-up","IconCircleArrowUp",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 8l-4 4",key:"svg-1"}],["path",{d:"M12 8v8",key:"svg-2"}],["path",{d:"M16 12l-4 -4",key:"svg-3"}]]),qa=Fn("outline","check","IconCheck",[["path",{d:"M5 12l5 5l10 -10",key:"svg-0"}]]),La=Fn("outline","id","IconId",[["path",{d:"M3 4m0 3a3 3 0 0 1 3 -3h12a3 3 0 0 1 3 3v10a3 3 0 0 1 -3 3h-12a3 3 0 0 1 -3 -3z",key:"svg-0"}],["path",{d:"M9 10m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-1"}],["path",{d:"M15 8l2 0",key:"svg-2"}],["path",{d:"M15 12l2 0",key:"svg-3"}],["path",{d:"M7 16l10 0",key:"svg-4"}]]),za=Fn("filled","arrow-big-down-filled","IconArrowBigDownFilled",[["path",{d:"M10 2l-.15 .005a2 2 0 0 0 -1.85 1.995v6.999l-2.586 .001a2 2 0 0 0 -1.414 3.414l6.586 6.586a2 2 0 0 0 2.828 0l6.586 -6.586a2 2 0 0 0 .434 -2.18l-.068 -.145a2 2 0 0 0 -1.78 -1.089l-2.586 -.001v-6.999a2 2 0 0 0 -2 -2h-4z",key:"svg-0"}]]),Oa=Fn("filled","star-filled","IconStarFilled",[["path",{d:"M8.243 7.34l-6.38 .925l-.113 .023a1 1 0 0 0 -.44 1.684l4.622 4.499l-1.09 6.355l-.013 .11a1 1 0 0 0 1.464 .944l5.706 -3l5.693 3l.1 .046a1 1 0 0 0 1.352 -1.1l-1.091 -6.355l4.624 -4.5l.078 -.085a1 1 0 0 0 -.633 -1.62l-6.38 -.926l-2.852 -5.78a1 1 0 0 0 -1.794 0l-2.853 5.78z",key:"svg-0"}]]);class Ha extends i.Component{constructor(e){super(e),this.tokenRef=(0,i.createRef)(),this.scrollIntoView=()=>{var e;null===(e=this.tokenRef.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},this.onClick=e=>{this.props.selectable&&(e.stopPropagation(),this.props.onClick(this.props.combatant))},this.setMouseOver=e=>{this.setState({mouseOver:e})},this.getMonogram=()=>this.props.combatant.name.split(" ").filter((e=>e.length>0)).map((e=>/^\d+$/.test(e)?e:e[0])).join(""),this.render=()=>{try{const e=this.props.encounter?"on-map":"",t=this.props.combatant.combat.current?"current":"",n=this.props.selectable?"selectable":"",a=this.props.selected?"selected":"",r=this.props.encounter&&this.props.combatant.combat.hidden>0?"hidden":"",s=this.state.mouseOver?"mouse-over":"",i="encounter-map-mini-token ".concat(e," ").concat(t," ").concat(n," ").concat(a," ").concat(r," ").concat(s);let o=null;if(this.props.encounter&&this.props.combatant.combat.state===I.Prone){const e=this.props.combatant.size*this.props.squareSize/3,t=this.props.combatant.size*this.props.squareSize/4;o=(0,Zn.jsx)("div",{className:"icon-prone",style:{width:"".concat(e,"px"),height:"".concat(e,"px")},children:(0,Zn.jsx)(za,{size:t})})}let l=null;if(this.props.encounter&&this.props.combatant.combat.stunned){const e=this.props.combatant.size*this.props.squareSize/3,t=this.props.combatant.size*this.props.squareSize/4;l=(0,Zn.jsx)("div",{className:"icon-stunned",style:{width:"".concat(e,"px"),height:"".concat(e,"px")},children:(0,Zn.jsx)(Oa,{size:t})})}let c=null;if(this.props.encounter&&this.props.combatant.combat.wounds>0){const e=Ce.getTraitRank(this.props.encounter,this.props.combatant,x.Resolve),t=1-this.props.combatant.combat.wounds/e;c=(0,Zn.jsx)("div",{className:"health-bar",style:{height:"".concat(this.props.squareSize/5,"px")},children:(0,Zn.jsx)("div",{className:"health-bar-gauge",style:{width:"".concat(100*t,"%")}})})}let u=this.props.combatant.color,d=this.props.combatant.color;const p=U.parse(this.props.combatant.color);p&&(u=U.toString(U.darken(p)),d=U.toString(U.lighten(p)));const h=this.props.encounter?this.props.squareSize*this.props.combatant.size:this.props.squareSize;return(0,Zn.jsxs)("div",{ref:this.tokenRef,className:i,style:{width:"".concat(h,"px"),height:"".concat(h,"px"),fontSize:"".concat(.35*h,"px"),left:this.props.encounter?"".concat((this.props.combatant.combat.position.x-this.props.mapDimensions.left)*this.props.squareSize,"px"):"0",top:this.props.encounter?"".concat((this.props.combatant.combat.position.y-this.props.mapDimensions.top)*this.props.squareSize,"px"):"0",backgroundImage:"linear-gradient(135deg, ".concat(this.props.combatant.color,", ").concat(u,")")},onClick:e=>this.onClick(e),onMouseEnter:()=>this.setMouseOver(!0),onMouseLeave:()=>this.setMouseOver(!1),children:[(0,Zn.jsx)("div",{className:this.props.combatant.combat.current?"mini-token-face current":"mini-token-face",style:{backgroundImage:"linear-gradient(135deg, ".concat(d,", ").concat(this.props.combatant.color,")")},children:this.getMonogram()}),o,l,c,this.props.encounter&&this.props.combatant.combat.current?(0,Zn.jsx)("div",{className:"pulse pulse-one"}):null,this.props.encounter&&this.props.combatant.combat.current?(0,Zn.jsx)("div",{className:"pulse pulse-two"}):null,this.props.encounter&&this.props.combatant.combat.current?(0,Zn.jsx)("div",{className:"pulse pulse-three"}):null]})}catch{return(0,Zn.jsx)("div",{className:"encounter-map-mini-token render-error"})}},this.state={mouseOver:!1}}}class _a extends i.Component{constructor(){super(...arguments),this.onClick=e=>{e.stopPropagation(),this.props.onClick&&this.props.onClick(this.props.combatant)},this.onSelect=e=>{e.stopPropagation(),this.props.onSelect&&this.props.onSelect(this.props.combatant)},this.onDetails=e=>{e.stopPropagation(),this.props.onDetails&&this.props.onDetails(this.props.combatant)},this.onNudgeInitiative=(e,t)=>{e.stopPropagation(),this.props.onNudgeInitiative&&this.props.onNudgeInitiative(this.props.combatant,t)},this.onCancel=e=>{e.stopPropagation(),this.props.onCancel&&this.props.onCancel(this.props.combatant)},this.getListInfo=()=>(0,Zn.jsx)("div",{className:"info right",children:this.getCardTags(!0)}),this.getInitiativeInfo=()=>{const e=d.distinct(this.props.combatant.combat.conditions,(e=>G.getConditionDescription(e))).map((e=>{const t=this.props.combatant.combat.conditions.filter((t=>G.getConditionDescription(t)===G.getConditionDescription(e)));return(0,Zn.jsx)(fa,{orientation:"compact",label:G.getConditionDescription(e),value:d.sum(t,(e=>e.rank))},e.id)})),t=this.props.options.developer&&!this.props.combatant.combat.current&&this.props.combatant.combat.initiative!==Number.MIN_VALUE;return(0,Zn.jsxs)("div",{className:"info below",children:[(0,Zn.jsx)("div",{className:"tags",children:this.getCombatTags(!0)}),this.props.combatant.combat.damage>0?this.getDamage():null,this.getWounds(),this.props.combatant.combat.conditions.length>0?(0,Zn.jsx)("hr",{}):null,e,t?(0,Zn.jsx)("hr",{}):null,t?(0,Zn.jsxs)("div",{className:"button-row developer",children:[(0,Zn.jsx)("button",{className:"icon-btn",onClick:e=>this.onNudgeInitiative(e,-1),children:(0,Zn.jsx)(Ta,{})}),(0,Zn.jsx)(fa,{label:"Init",value:this.props.combatant.combat.initiative}),(0,Zn.jsx)("button",{className:"icon-btn",onClick:e=>this.onNudgeInitiative(e,1),children:(0,Zn.jsx)(Ra,{})})]}):null]})},this.getDetailedInfoBelow=()=>(0,Zn.jsx)("div",{className:"info below",children:(0,Zn.jsx)("div",{className:"tags",children:this.getCombatTags(!0)})}),this.getDetailedInfoEnd=()=>(0,Zn.jsxs)("div",{className:"info end",children:[this.getDamage(),this.getWounds()]}),this.getHeaderInfoBelow=()=>(0,Zn.jsx)("div",{className:"info below",children:(0,Zn.jsx)("div",{className:"tags",children:this.getCardTags(!0)})}),this.getCardTags=e=>{const t=Oe.getSpecies(this.props.combatant.speciesID),n=Oe.getRole(this.props.combatant.roleID),a=Oe.getBackground(this.props.combatant.backgroundID);return[t?(0,Zn.jsx)(ka,{children:t.name},"species"):null,n?(0,Zn.jsx)(ka,{children:n.name},"role"):null,a?(0,Zn.jsx)(ka,{children:a.name},"background"):null,(0,Zn.jsxs)(ka,{children:["Level ",this.props.combatant.level]},"level"),...e?this.props.combatant.quirks.map(((e,t)=>(0,Zn.jsx)(ka,{children:e},t))):[]]},this.getCombatTags=e=>[...e?this.props.combatant.quirks.map(((e,t)=>(0,Zn.jsx)(ka,{children:e},t))):[],this.props.combatant.combat.hidden>0?(0,Zn.jsx)(ka,{children:"Hidden"},"hidden"):null,this.props.combatant.combat.stunned?(0,Zn.jsx)(ka,{children:"Stunned"},"stunned"):null,this.props.combatant.combat.state!==I.Standing?(0,Zn.jsx)(ka,{children:this.props.combatant.combat.state},"state"):null],this.getDamage=()=>this.props.combatant.quirks.includes(P.Drone)||this.props.combatant.combat.state===I.Dead?null:(0,Zn.jsx)(fa,{orientation:"compact",label:"Damage",value:this.props.combatant.combat.damage}),this.getWounds=()=>{if(this.props.combatant.quirks.includes(P.Drone))return null;if(this.props.combatant.combat.state===I.Unconscious)return null;if(this.props.combatant.combat.state===I.Dead)return null;const e=this.props.encounter?Ce.getTraitRank(this.props.encounter,this.props.combatant,x.Resolve):0,t=[];let n=[];for(let a=0;a<e;++a){const r=a>e-this.props.combatant.combat.wounds-1;n.push(r?(0,Zn.jsx)(wa,{size:12},a):(0,Zn.jsx)(Ca,{size:12},a)),n.length>=5&&"detailed"!==this.props.mode&&(t.push((0,Zn.jsx)("div",{className:"hearts-row",children:n},t.length)),n=[])}return n.length>0&&(t.push((0,Zn.jsx)("div",{className:"hearts-row",children:n},t.length)),n=[]),(0,Zn.jsx)(fa,{orientation:"compact",label:"Wounds",value:(0,Zn.jsx)("div",{className:"hearts",children:t})})},this.render=()=>{try{const e=this.props.combatant.quirks.includes(P.Boss)?"boss":this.props.combatant.faction.toLowerCase(),t=null!==this.props.onClick?"clickable":"",n="initiative"===this.props.mode&&this.props.combatant.combat.current?"current":"",a="initiative"===this.props.mode&&(this.props.encounter&&this.props.encounter.combatants.some((e=>e.combat.current))&&this.props.combatant.combat.initiative===Number.MIN_VALUE||this.props.combatant.combat.state===I.Unconscious||this.props.combatant.combat.state===I.Dead)?"dimmed":"",r="combatant-row-panel ".concat(this.props.mode," ").concat(e," ").concat(t," ").concat(n," ").concat(a);let s=null,i=null,o=null;switch(this.props.mode){case"list":i=this.getListInfo();break;case"initiative":s=this.getInitiativeInfo();break;case"detailed":s=this.getDetailedInfoBelow(),o=this.getDetailedInfoEnd();break;case"header":s=this.getHeaderInfoBelow()}let l=null;this.props.onSelect&&(l=(0,Zn.jsx)("button",{className:"icon-btn",onClick:e=>this.onSelect(e),children:(0,Zn.jsx)(qa,{})}));let c=null;this.props.onDetails&&(c=(0,Zn.jsx)("button",{className:"icon-btn",onClick:e=>this.onDetails(e),children:(0,Zn.jsx)(La,{})}));let u=null;return this.props.onCancel&&(u=(0,Zn.jsx)("button",{className:"icon-btn",onClick:e=>this.onCancel(e),children:(0,Zn.jsx)(ca,{})})),(0,Zn.jsxs)("div",{className:r,onClick:e=>this.onClick(e),children:[(0,Zn.jsx)(Ha,{combatant:this.props.combatant,encounter:null,squareSize:40,mapDimensions:{left:0,top:0},selectable:!0,selected:!1,onClick:e=>this.props.onTokenClick?this.props.onTokenClick(e):null}),(0,Zn.jsxs)("div",{className:"name",children:[(0,Zn.jsx)(ra,{type:aa.MinorHeading,children:this.props.combatant.name}),s]}),i,o,l||c||u?(0,Zn.jsxs)("div",{className:"buttons",children:[l,c,u]}):null]})}catch{return(0,Zn.jsx)("div",{className:"combatant-row-panel render-error"})}}}}_a.defaultProps={mode:"list",encounter:null,onClick:null,onTokenClick:null,onSelect:null,onDetails:null,onNudgeInitiative:null,onCancel:null};var Ua=Fn("outline","arrow-up","IconArrowUp",[["path",{d:"M12 5l0 14",key:"svg-0"}],["path",{d:"M18 11l-6 -6",key:"svg-1"}],["path",{d:"M6 11l6 -6",key:"svg-2"}]]);class Wa extends i.Component{constructor(){super(...arguments),this.render=()=>{try{const e=se.getDistanceAny(this.props.from,this.props.to);return(0,Zn.jsxs)("div",{className:"direction-indicator-panel",children:[e>0?(0,Zn.jsx)(Ua,{style:{transform:"rotate(".concat(se.getDirection(se.getCenter(this.props.from),se.getCenter(this.props.to)),"deg)")}}):null,(0,Zn.jsxs)("span",{children:[e,"sq"]})]})}catch{return(0,Zn.jsx)("div",{className:"direction-indicator-panel render-error"})}}}}var Va=Fn("outline","chevron-up-left","IconChevronUpLeft",[["path",{d:"M8 16v-8h8",key:"svg-0"}]]),Qa=Fn("outline","chevron-up","IconChevronUp",[["path",{d:"M6 15l6 -6l6 6",key:"svg-0"}]]),Xa=Fn("outline","chevron-up-right","IconChevronUpRight",[["path",{d:"M8 8h8v8",key:"svg-0"}]]),Ga=Fn("outline","chevron-left","IconChevronLeft",[["path",{d:"M15 6l-6 6l6 6",key:"svg-0"}]]),Ja=Fn("outline","chevron-right","IconChevronRight",[["path",{d:"M9 6l6 6l-6 6",key:"svg-0"}]]),Ya=Fn("outline","chevron-down-left","IconChevronDownLeft",[["path",{d:"M8 8v8h8",key:"svg-0"}]]),Ka=Fn("outline","chevron-down","IconChevronDown",[["path",{d:"M6 9l6 6l6 -6",key:"svg-0"}]]),Za=Fn("outline","chevron-down-right","IconChevronDownRight",[["path",{d:"M16 8v8h-8",key:"svg-0"}]]);class $a extends i.Component{constructor(){super(...arguments),this.getClassName=e=>"dir ".concat(e," ").concat(this.canMove(e)?"enabled":"disabled"),this.canMove=e=>{const t=this.props.costs[e];return t!==Number.MAX_VALUE&&t<=this.props.movement},this.getCostLabel=e=>e===Number.MAX_VALUE?"-":e,this.onClick=(e,t,n)=>{e.stopPropagation(),this.props.onMove(t,n)},this.onDoubleClick=e=>{e.stopPropagation()},this.render=()=>{try{const e="full"===this.props.mode?70:20,t="full"===this.props.mode;return(0,Zn.jsxs)("div",{className:"direction-panel ".concat(this.props.mode),children:[(0,Zn.jsxs)("div",{className:"direction-row",children:[(0,Zn.jsxs)("div",{className:this.getClassName("nw"),onClick:e=>this.onClick(e,"nw",this.props.costs.nw),onDoubleClick:this.onDoubleClick,children:[(0,Zn.jsx)("div",{className:"arrow",children:(0,Zn.jsx)(Va,{size:e})}),t?(0,Zn.jsx)("div",{className:"cost",children:(0,Zn.jsx)(ta,{type:$n.Movement,value:this.getCostLabel(this.props.costs.nw)})}):null]}),(0,Zn.jsxs)("div",{className:this.getClassName("n"),onClick:e=>this.onClick(e,"n",this.props.costs.n),onDoubleClick:this.onDoubleClick,children:[(0,Zn.jsx)("div",{className:"arrow",children:(0,Zn.jsx)(Qa,{size:e})}),t?(0,Zn.jsx)("div",{className:"cost",children:(0,Zn.jsx)(ta,{type:$n.Movement,value:this.getCostLabel(this.props.costs.n)})}):null]}),(0,Zn.jsxs)("div",{className:this.getClassName("ne"),onClick:e=>this.onClick(e,"ne",this.props.costs.ne),onDoubleClick:this.onDoubleClick,children:[(0,Zn.jsx)("div",{className:"arrow",children:(0,Zn.jsx)(Xa,{size:e})}),t?(0,Zn.jsx)("div",{className:"cost",children:(0,Zn.jsx)(ta,{type:$n.Movement,value:this.getCostLabel(this.props.costs.ne)})}):null]})]}),(0,Zn.jsxs)("div",{className:"direction-row",children:[(0,Zn.jsxs)("div",{className:this.getClassName("w"),onClick:e=>this.onClick(e,"w",this.props.costs.w),onDoubleClick:this.onDoubleClick,children:[(0,Zn.jsx)("div",{className:"arrow",children:(0,Zn.jsx)(Ga,{size:e})}),t?(0,Zn.jsx)("div",{className:"cost",children:(0,Zn.jsx)(ta,{type:$n.Movement,value:this.getCostLabel(this.props.costs.w)})}):null]}),(0,Zn.jsx)("div",{className:"center",children:t?(0,Zn.jsx)("div",{className:"cost big",children:(0,Zn.jsx)(ta,{type:$n.Movement,value:this.props.movement,size:ea.Large})}):null}),(0,Zn.jsxs)("div",{className:this.getClassName("e"),onClick:e=>this.onClick(e,"e",this.props.costs.e),onDoubleClick:this.onDoubleClick,children:[(0,Zn.jsx)("div",{className:"arrow",children:(0,Zn.jsx)(Ja,{size:e})}),t?(0,Zn.jsx)("div",{className:"cost",children:(0,Zn.jsx)(ta,{type:$n.Movement,value:this.getCostLabel(this.props.costs.e)})}):null]})]}),(0,Zn.jsxs)("div",{className:"direction-row",children:[(0,Zn.jsxs)("div",{className:this.getClassName("sw"),onClick:e=>this.onClick(e,"sw",this.props.costs.sw),onDoubleClick:this.onDoubleClick,children:[(0,Zn.jsx)("div",{className:"arrow",children:(0,Zn.jsx)(Ya,{size:e})}),t?(0,Zn.jsx)("div",{className:"cost",children:(0,Zn.jsx)(ta,{type:$n.Movement,value:this.getCostLabel(this.props.costs.sw)})}):null]}),(0,Zn.jsxs)("div",{className:this.getClassName("s"),onClick:e=>this.onClick(e,"s",this.props.costs.s),onDoubleClick:this.onDoubleClick,children:[(0,Zn.jsx)("div",{className:"arrow",children:(0,Zn.jsx)(Ka,{size:e})}),t?(0,Zn.jsx)("div",{className:"cost",children:(0,Zn.jsx)(ta,{type:$n.Movement,value:this.getCostLabel(this.props.costs.s)})}):null]}),(0,Zn.jsxs)("div",{className:this.getClassName("se"),onClick:e=>this.onClick(e,"se",this.props.costs.se),onDoubleClick:this.onDoubleClick,children:[(0,Zn.jsx)("div",{className:"arrow",children:(0,Zn.jsx)(Za,{size:e})}),t?(0,Zn.jsx)("div",{className:"cost",children:(0,Zn.jsx)(ta,{type:$n.Movement,value:this.getCostLabel(this.props.costs.se)})}):null]})]})]})}catch{return(0,Zn.jsx)("div",{className:"direction-panel render-error"})}}}}class er extends i.Component{constructor(){super(...arguments),this.getPart=(e,t)=>{switch(e.type){case ue.Combatant:{const n=Ce.getCombatant(this.props.encounter,e.data);return n?(0,Zn.jsxs)("span",{className:"encounter-log-part-combatant",children:[(0,Zn.jsx)(Ha,{combatant:n,encounter:null,squareSize:18,mapDimensions:{left:0,top:0},selectable:!0,selected:!1,onClick:()=>null}),(0,Zn.jsx)("span",{className:"encounter-log-part-combatant-name",children:n.name})]},t):(0,Zn.jsx)("span",{className:"encounter-log-part-combatant",children:"[unknown combatant]"},t)}case ue.Rank:return(0,Zn.jsx)("span",{className:"encounter-log-part-rank",children:e.data},t);case ue.Result:return(0,Zn.jsx)("span",{className:"encounter-log-part-result",children:e.data},t)}return(0,Zn.jsx)("span",{className:"encounter-log-part-text",children:e.data},t)},this.getMessage=e=>(0,Zn.jsx)("div",{className:"encounter-log-item",children:e.parts.map(this.getPart)},e.id),this.render=()=>{try{return(0,Zn.jsxs)("div",{className:"encounter-log-panel",children:[(0,Zn.jsx)(ra,{type:aa.SubHeading,children:"Encounter Log"}),this.props.encounter.log.map(this.getMessage),0===this.props.encounter.log.length?(0,Zn.jsx)(ra,{type:aa.Dimmed,children:"Nothing to show yet"}):null]})}catch{return(0,Zn.jsx)("div",{className:"encounter-log-panel render-error"})}}}}class tr extends i.Component{constructor(){super(...arguments),this.render=()=>{try{return(0,Zn.jsx)("div",{className:"encounter-map-aura-token",style:{width:"".concat(this.props.squareSize*(this.props.combatant.size+2),"px"),left:"".concat((this.props.combatant.combat.position.x-this.props.mapDimensions.left-1)*this.props.squareSize,"px"),top:"".concat((this.props.combatant.combat.position.y-this.props.mapDimensions.top-1)*this.props.squareSize,"px")}})}catch{return(0,Zn.jsx)("div",{className:"encounter-map-aura-token render-error"})}}}}class nr extends i.Component{constructor(){super(...arguments),this.onClick=e=>{this.props.selectable&&(e.stopPropagation(),this.props.onClick(this.props.square))},this.render=()=>{try{const e=this.props.square.type.toLowerCase(),t=this.props.selectable?"selectable":"",n=this.props.selected?"selected":"",a="encounter-map-floor ".concat(e," ").concat(t," ").concat(n);return(0,Zn.jsx)("div",{className:a,style:{width:"".concat(this.props.squareSize,"px"),left:"".concat((this.props.square.x-this.props.mapDimensions.left)*this.props.squareSize,"px"),top:"".concat((this.props.square.y-this.props.mapDimensions.top)*this.props.squareSize,"px")},onClick:e=>this.onClick(e)},"square ".concat(this.props.square.x," ").concat(this.props.square.y))}catch{return(0,Zn.jsx)("div",{className:"encounter-map-floor render-error"})}}}}class ar extends i.Component{constructor(){super(...arguments),this.render=()=>{try{return(0,Zn.jsx)("div",{className:"encounter-map-fog",style:{width:"".concat(this.props.squareSize,"px"),left:"".concat((this.props.square.x-this.props.mapDimensions.left)*this.props.squareSize,"px"),top:"".concat((this.props.square.y-this.props.mapDimensions.top)*this.props.squareSize,"px")}},"square ".concat(this.props.square.x," ").concat(this.props.square.y))}catch{return(0,Zn.jsx)("div",{className:"encounter-map-fog render-error"})}}}}class rr extends i.Component{constructor(e){super(e),this.onClick=e=>{this.props.selectable&&(e.stopPropagation(),this.props.onClick(this.props.loot))},this.setMouseOver=e=>{this.setState({mouseOver:e})},this.render=()=>{try{const e=this.props.encounter?"on-map":"",t=this.props.selected?"selected":"",n=this.props.selectable?"selectable":"",a="encounter-map-loot-token ".concat(e," ").concat(t," ").concat(n);return(0,Zn.jsx)("div",{className:a,style:{width:"".concat(this.props.squareSize,"px"),left:this.props.encounter?"".concat((this.props.loot.position.x-this.props.mapDimensions.left)*this.props.squareSize,"px"):"0",top:this.props.encounter?"".concat((this.props.loot.position.y-this.props.mapDimensions.top)*this.props.squareSize,"px"):"0"},title:"Treasure",onClick:e=>this.onClick(e),onMouseEnter:()=>this.setMouseOver(!0),onMouseLeave:()=>this.setMouseOver(!1),children:(0,Zn.jsx)("div",{className:"loot-token-face"})})}catch{return(0,Zn.jsx)("div",{className:"encounter-map-loot-token render-error"})}},this.state={mouseOver:!1}}}class sr extends i.Component{constructor(){super(...arguments),this.render=()=>{try{return(0,Zn.jsx)("div",{className:"encounter-map-overlay",style:{width:"".concat(this.props.squareSize*(this.props.size+2*this.props.radius),"px"),left:"".concat((this.props.x-this.props.mapDimensions.left-this.props.radius)*this.props.squareSize,"px"),top:"".concat((this.props.y-this.props.mapDimensions.top-this.props.radius)*this.props.squareSize,"px")}})}catch{return(0,Zn.jsx)("div",{className:"encounter-map-overlay render-error"})}}}}class ir extends i.Component{constructor(){super(...arguments),this.render=()=>{try{return(0,Zn.jsx)("div",{className:"encounter-map-trail-token",style:{width:"".concat(this.props.squareSize*this.props.size,"px"),left:"".concat((this.props.position.x-this.props.mapDimensions.left)*this.props.squareSize,"px"),top:"".concat((this.props.position.y-this.props.mapDimensions.top)*this.props.squareSize,"px")}})}catch{return(0,Zn.jsx)("div",{className:"encounter-map-trail-token render-error"})}}}}class or extends i.Component{constructor(){super(...arguments),this.onClick=e=>{this.props.selectable&&(e.stopPropagation(),this.props.onClick(this.props.wall))},this.render=()=>{try{const e=this.props.selectable?"selectable":"",t=this.props.selected?"selected":"",n="encounter-map-wall ".concat(e," ").concat(t);return(0,Zn.jsx)("div",{className:n,style:{width:"".concat(this.props.squareSize,"px"),left:"".concat((this.props.wall.x-this.props.mapDimensions.left)*this.props.squareSize,"px"),top:"".concat((this.props.wall.y-this.props.mapDimensions.top)*this.props.squareSize,"px")},onClick:e=>this.onClick(e)},"square ".concat(this.props.wall.x," ").concat(this.props.wall.y))}catch{return(0,Zn.jsx)("div",{className:"encounter-map-wall render-error"})}}}}class lr extends i.Component{constructor(){super(...arguments),this.currentCombatantRef=(0,i.createRef)(),this.selectedCombatantRef=(0,i.createRef)(),this.scrollToCombatant=e=>{var t,n;if("selected"===e){const t=this.props.encounter.combatants.find((e=>e.combat.current));t&&this.props.selectedCombatantIDs.length>0&&this.props.selectedCombatantIDs[0]===t.id&&(e="current")}switch(e){case"current":null===(t=this.currentCombatantRef.current)||void 0===t||t.scrollIntoView();break;case"selected":null===(n=this.selectedCombatantRef.current)||void 0===n||n.scrollIntoView()}},this.getEffect=()=>{let e=null;const t=this.props.encounter.combatants.find((e=>e.combat.current));if(t&&t.combat.selectedAction&&!t.combat.selectedAction.used){const n=t.combat.selectedAction.action,a=Fe.getActionRange(n,t),r=n.parameters.find((e=>"origin"===e.id));if(r){if(a>0){const t=r;if(t.value){const n=t.value;n.length>0&&(e={x:n[0].x,y:n[0].y,size:1,radius:a})}}}else a>1&&(e={x:t.combat.position.x,y:t.combat.position.y,size:t.size,radius:a})}return e},this.render=()=>{try{const e=se.getDimensions(this.props.encounter.mapSquares);e.left-=1,e.top-=1,e.right+=1,e.bottom+=1;let t=this.props.encounter.combatants.filter((e=>e.combat.state!==I.Dead));const n=t.find((e=>e.combat.current));n&&(t=t.filter((e=>e===n||e.faction===n.faction||n.combat.senses>=e.combat.hidden)));const a=d.distinct(se.getAdjacentWalls(this.props.encounter.mapSquares,this.props.encounter.mapSquares),(e=>"".concat(e.x," ").concat(e.y))).sort(((e,t)=>{let n=e.y-t.y;return 0===n&&(n=e.x-t.x),n})).map((t=>(0,Zn.jsx)(or,{wall:t,squareSize:this.props.squareSize,mapDimensions:e,selectable:!!this.props.selectableSquares.find((e=>e.x===t.x&&e.y===t.y)),selected:!!this.props.selectedSquares.find((e=>e.x===t.x&&e.y===t.y)),onClick:this.props.onClickSquare},"wall ".concat(t.x," ").concat(t.y)))),r=d.distinct(this.props.encounter.mapSquares,(e=>"".concat(e.x," ").concat(e.y))).sort(((e,t)=>{let n=e.y-t.y;return 0===n&&(n=e.x-t.x),n})).map((t=>(0,Zn.jsx)(nr,{square:t,squareSize:this.props.squareSize,mapDimensions:e,selectable:!!this.props.selectableSquares.find((e=>e.x===t.x&&e.y===t.y)),selected:!!this.props.selectedSquares.find((e=>e.x===t.x&&e.y===t.y)),onClick:this.props.onClickSquare},"square ".concat(t.x," ").concat(t.y)))),s=this.props.encounter.loot.map((t=>(0,Zn.jsx)(rr,{loot:t,encounter:this.props.encounter,squareSize:this.props.squareSize,mapDimensions:e,selectable:0===this.props.selectableLootIDs.length||this.props.selectableLootIDs.includes(t.id),selected:this.props.selectedLootIDs.includes(t.id),onClick:this.props.onClickLoot},t.id))),i=t.map((t=>{const n=X.getAuras(t).filter((e=>t.faction!==N.Monster||!G.getConditionIsBeneficial(e)));return n.length>0?(0,Zn.jsx)(tr,{combatant:t,squareSize:this.props.squareSize,mapDimensions:e},t.id):null})),o=t.flatMap((t=>t.combat.trail.map(((n,a)=>(0,Zn.jsx)(ir,{position:n,size:t.size,squareSize:this.props.squareSize,mapDimensions:e},"trail ".concat(t.id," ").concat(a)))))),l=t.map((t=>{let n=null;return t.combat.current?n=this.currentCombatantRef:this.props.selectedCombatantIDs.length>0&&this.props.selectedCombatantIDs[0]===t.id&&(n=this.selectedCombatantRef),(0,Zn.jsx)(Ha,{ref:n,combatant:t,encounter:this.props.encounter,squareSize:this.props.squareSize,mapDimensions:e,selectable:0===this.props.selectableCombatantIDs.length||this.props.selectableCombatantIDs.includes(t.id),selected:this.props.selectedCombatantIDs.includes(t.id),onClick:this.props.onClickCombatant},t.id)})),c=this.props.encounter.combatants.find((e=>e.combat.current)),u=c?Ce.getCombatantSquares(this.props.encounter,c):[],p=se.getMapEdges(this.props.encounter.mapSquares),h=d.distinct(this.props.encounter.mapSquares,(e=>"".concat(e.x," ").concat(e.y))).filter((e=>!!c&&!se.canSeeAny(p,u,[e]))).map((t=>(0,Zn.jsx)(ar,{square:t,squareSize:this.props.squareSize,mapDimensions:e},"square ".concat(t.x," ").concat(t.y)))),m=[],f=this.getEffect();f&&(m.push((0,Zn.jsx)(sr,{x:f.x,y:f.y,size:f.size,radius:f.radius,squareSize:this.props.squareSize,mapDimensions:e},"effect-radius")),m.push((0,Zn.jsx)(sr,{x:f.x,y:f.y,size:f.size,radius:0,squareSize:this.props.squareSize,mapDimensions:e},"effect-origin")));const g=e.right-e.left+1,y=e.bottom-e.top+1;return(0,Zn.jsx)("div",{className:"encounter-map",onClick:()=>this.props.onClickOff(),children:(0,Zn.jsxs)("div",{className:"encounter-map-square-container",style:{maxWidth:"".concat(this.props.squareSize*g,"px"),maxHeight:"".concat(this.props.squareSize*y,"px")},children:[r,i,o,a,s,l,h,m]})})}catch{return(0,Zn.jsx)("div",{className:"encounter-map render-error"})}}}}class cr extends i.Component{constructor(){super(...arguments),this.render=()=>{try{const e=Ce.getActiveCombatants(this.props.encounter).filter((e=>e.combat.current)).map((e=>(0,Zn.jsx)(_a,{mode:"initiative",combatant:e,encounter:this.props.encounter,options:this.props.options,onClick:this.props.onSelect,onTokenClick:this.props.onSelect},e.id))),t=Ce.getActiveCombatants(this.props.encounter).filter((e=>!e.combat.current)).map((e=>(0,Zn.jsx)(_a,{mode:"initiative",combatant:e,encounter:this.props.encounter,options:this.props.options,onClick:this.props.onSelect,onTokenClick:this.props.onSelect,onNudgeInitiative:this.props.nudgeInitiative},e.id))),n=Ce.getActedCombatants(this.props.encounter).map((e=>(0,Zn.jsx)(_a,{mode:"initiative",combatant:e,encounter:this.props.encounter,options:this.props.options,onClick:this.props.onSelect,onTokenClick:this.props.onSelect},e.id))),a=Ce.getDeadCombatants(this.props.encounter).map((e=>(0,Zn.jsx)(_a,{mode:"initiative",combatant:e,encounter:this.props.encounter,options:this.props.options,onClick:this.props.onSelect,onTokenClick:this.props.onSelect},e.id)));let r="Acted";return 0===e.length&&(r="Combatants"),(0,Zn.jsxs)("div",{className:"initiative-list-panel",children:[e.length>0?(0,Zn.jsx)(ra,{type:aa.SubHeading,children:"Current Combatant"}):null,e,t.length>0?(0,Zn.jsx)(ra,{type:aa.SubHeading,children:"Waiting"}):null,t,n.length>0?(0,Zn.jsx)(ra,{type:aa.SubHeading,children:r}):null,n,a.length>0?(0,Zn.jsx)(ra,{type:aa.SubHeading,children:"Dead"}):null,a]})}catch{return(0,Zn.jsx)("div",{className:"initiative-list-panel render-error"})}}}}class ur extends i.Component{constructor(){super(...arguments),this.render=()=>{try{return(0,Zn.jsx)("div",{className:"list-item-panel",children:this.props.item})}catch{return(0,Zn.jsx)("div",{className:"list-item-panel render-error"})}}}}class dr extends i.Component{constructor(){super(...arguments),this.render=()=>{try{return(0,Zn.jsxs)("div",{className:"logo-panel",style:{gap:"".concat(this.props.size/3,"px")},children:[(0,Zn.jsx)("img",{className:"logo-image",alt:"Skirmish",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAYAAAD0eNT6AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAOxAAADsQBlSsOGwAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAACAASURBVHic7d17tC9lfd/x9zkH5OKFEDRVXMSoaSKSmBiNxmgsSYmmBKk3bNJUY2oas2zqZaUJNlfU2EISE0nqZWnVSi3YgFEEBRFJBAUkAiogAhGO3EGQ6+Fc9zn9Y9hr73P27/b8fjPPd+Z53q+1ZmUts89vf+e3mXk+832emQFJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJksq0LroASZ3aHzgYOAB4DLAFeBD4HnArsCuuNEmRDABSOTYAzwZ+Hngh8HTgBxl/nD8EXANcCpz38HZH92VKkqQ2/AjwP4Cbaa7o592WgM8Bvwbsk3UPJEnSzH4MOAnYwWID/6jtDuBYmikESZLUA98HnEhzxd72wL/ndgtwTJ7dkiRJ4xxNc3Xe9cC/53YacGCG/ZMkSatsAI4jz1X/uO07wHM63k9JkvSwRwCfIG7gX71tAl7c7e5KkqT9gLOIH/hXb1uAf9vlTkuSVLN1wMnED/ijtq00zxuQJEktO4H4gX7Sdhfww53tvSRJFfolYCfxg/y07TKaNQqSBmZDdAGS1ngszRP5Hh1dyAyeQDNV8Q/RhUiSNHQfIf7KPmXbDhzayTchSVIlfoLYe/3n3U7v4suQJKkWZxI/mM+7Pa+D70OSpOL9MMO8+l/eTmn/K5EkqXx/Tfwgvsi2DTi49W9FUifWRxcgCWiOxX8XXcSC9gZeEV2EpNkYAKR+eC7NLXVD5yOCpYEwAEj9UMoLdl4I7B9dhKTpDABSP5Tymt29gWdGFyFpOgOA1A/Pii6gRc+OLkDSdAYAKd5jgB+ILqJFviBIGgADgBTvidEFtMxbAaUBMABI8R4XXUDLSupmSMUyAEjxSjsOfcuoNAClnXgkSdIMDABSvO3RBbRsKboASdMZAKR4m6MLaNmm6AIkTWcAkOI9GF1AywwA0gAYAKR4t9C8Ta8UN0UXIGk6A4AUbxPw3egiWnRDdAGSpjMASP1wZXQBLfpmdAGSpjMASP1wcXQBLdkJXBJdhKTpDABSP1wYXUBLrgDuiy5C0nQGAKkfvgA8EF1ECz4dXYCk2RgApH7YApwTXUQLTo8uQJKkoTmK5nbAoW4lLWSUJCmb9cD1xA/k826/3f5XIklSHd5I/EA+z3Y78MgOvg9JkqrwCIbZBXhTF1+GJEk1+Q/ED+gp23XAvp18E5IkVeYc4gf2WbadwBEdfQeSJFXnKcC9xA/w07b3d/UFSJJUq5fQXGFHD/Ljtq8D+3W295IkVex04gf6cdvzO9xvSR3zSYBSv90fXcAEfa5N0hQGAEmSKmQAkCSpQgYASZIqZACQJKlCBgBJkipkAJAkqUIGAEmSKmQAkCSpQgYASZIqZACQJKlCBgBJkipkAJAkqUIGAEmSKmQAkCSpQgYASZIqZACQJKlCBgBJkipkAJAkqUIGAEmSKmQAkCSpQgYASZIqZACQJKlCBgBJkipkAJAkqUIGAEmSKmQAkCSpQgYASZIqZACQJKlCBgBJkipkAJAkqUIGAEmSKmQAkCSpQgYASZIqtFd0AdKArQeeChwG7N3R73hSR5/bhhcBT+vos+8Evgbc19HnS5KU7HDg48D9wC63TrergWOBx83yh5EkqQtPBy4mflCscdsC/BHddVokSRrpd2gGoeiBsPbtUuCQKX8rSZJa8RbiBz63lW0j8ORJfzBJkhb1auIHPLe127XAIyf83SRNsSG6AKnHDgbOAPaLLkRrHAQ8Cjg7uhBJUnn+H/FXum7jtyXgp8b+9SRN5IOApNGeALwsughNtB54Q3QR0lAZAKTRfhNvORuCXwUeE12ENEQGAGm0w6ML0Ez2B54TXYQ0RAYAabSfjC5AM/NvJc3BACCtdQDw/dFFaGY/FF2ANEQGAGmtpegClGRndAHSEBkApLV2RBegJAYAaQ4GAGmtXdEFKIl/L2kOBgBJkipkAJAkqUIGAEmSKmQAkCSpQgYASZIqZACQJKlCBgBJkipkAJAkqUIGAEmSKmQAkCSpQgYASZIqZACQJKlCBgBJkipkAJAkqUIGAEmSKmQAkNbaEF2Akngek+bggSOttVd0AUrieUyagweOtNYOYFd0EZrZ9ugCpCEyAEhrPQRcH12EZnZldAHSEBkApNEujy5AM/t6dAHSEBkApNE+FV2AZnIj8LXoIqQhMgBIo50K3BldhKZ6P7AUXYQ0RN7uJI22RHN8HBFdiMb6LvAfgc3RhUiSyrIXcAnNHQFu/dteNf5PJ0nSYg6ludKMHuzcdt8+NOmPJklSG56BIaBP24dx/ZIkKZMfBS4ifvCredsCvBUHf0lSZhuANwM3ET8Y1rQtAWcCh03/E0ma1broAqQB2gAc9fD2TODHgUeEVlSe22gexvQV4CRgY2g1kiRldjXxV+Djttd0uN+SOuZcmtRve0cXMIFdD2nADABSv/V5kO1zOJE0hQFAyuMw4Djg4sR/1+dBNiWc/CfgS8CbgMd3U44kSfHWA8+iGfSvY2Xe/I7Ez7mbuDn+advvJezH61b9ux2shIGDU74MSZL6aD3wAuBE4BZGD5o3J37mA2M+pw/bHyTsx6vHfMYSTRg4FnhqwudJkhRqAyuD/m1MHzSvT/z8LTN8ZtR2XMJ+/MqMn3nVw5/7LxM+W5KkLPaheUvgiTQt/ZRB81uJv2sp8fNzbu9M2I+Xz/H5y2HgaQm/R5KkVu0LvITmoTT3Mv+geUXC79xrgd+TY/uLhH05asHftRwGnpXwOyVJmst+rAz699POoHlpwu/fv6Xf2dX27oR9eXGLv/fbNN2XF+DTTCVJLdmflUG/iwV4FyXUckAHv7/N7b0J+/LzHdVwA4YBSdKcDqR5rO0ZdL/o7vyEuh7XcS2Lbh9M2JfnZ6jnRlbCgM84kSSNdBArg/5W8g2a5ybU+MSMdc2zfTRhX56TubY7abo4L6FZSyFJqthjWRn0txEzaH42od4fCqpx1u2UhH35ycA672IlDPT5yYpSViZjle4QmlvQjgIOJ/6/+e0JP9vn9wBA2mC6rbMqpjuI5kFErwbuAc4ETgXOoen+SFWKPhlKXXgS8FLgGOBn6dfisJSBsO8BIKW+lODTpQNZCQP3Ap+nCQSfADYF1iVJmtOTaZ4t/yVgJ/Ht8XHbyQn79Mwe1DtpOzthX57Ug3onbQ/RTA29Bnh0wn5JkgIsv2Hvq8QPILNu/zth/57bg3onbV9I2JeDe1DvrNtmVsLAAQn7KA2KUwAamsNoWvuvAg4NrmUetU4BRK4BSLUvzZqRo2jWCFxAM01wCs3dBZKkTJav9K8h/upw0e09Cfv9Cz2od9L2lYR9eUwP6l10W/0a48cn7LvUS3YA1EfraRbvHQW8krJeE1tSByDlLoC+LAJcxAaaBxo9H3gXcDHN3QSnArcG1iXNxQCgvtgAPI+mvf9KmjnjEqUEgL7fs17qFMAsVoeBv6J5xPMZwGk07yqQes8AoEirB/1XUUdbtdbnACzR3J1R4iN617MSBo4HvknTFTgZuDawLknqlX2AI2ie2X4H8fO6ubc/TfiufrUH9U7abkjYF2hW10fXnHtbfo3x0xK/K6lzdgCUw77AL9Jc6R9N3bdW1ToFAE33Y98uCumxp9OEvj9lpTNwBmmvhZY6YQBQV/ajudI/huapfD5cpVHrFACUtw4g1eowcD0rjyT+Mk23QMrKAKA27Q/8a5pB/+XAI2PL6aWS7gJIra/2ALDaU4A3Prx9Bzgdw4AyMwBoUQfSvGXtGJo2/z6x5fRe7VMAWutJrISBm4BP0oSBC2kWTkqdMABoHgcBv0wz6L+I/l+p9olTAJrkEFbCwF3AWTRh4GwMUGqZAUCzeixwJM2g/0v43868SuoA7EVzC9ysV6kGgDSPZeXNhXcDn6UJA5/D71It8CSuSQ6hmcs/huZ+/RLv4c6tpDUA0ISUrTP+rFew8zuIlTBwDysLCM9h9u9f2o0BQHt6Es2q/WNoHse7Lrac4qQMgn3vAEATUmYdgLxqbceBrISBh4DzaMLA3wMPBtalgfGKTsuOpHnRyUbg3TRPNXPwb19JawAgLaQYANq3P807Mz4K3Exz7B4UWpEGwwCgRwAfAT5DM+irWyWtAYC63wfQNwfQvKnwauDw2FI0BAaAuq2neV75a4PrqElpawBSanQNQB6Po7lr4AXRhajfDAB1ewPwiugiKuMUgHLYB/g4PoFTExgA6rU/8PboIipU8xSAHYC8ngi8OboI9ZcBoF4vpVlNrLxqngKwA5Dfb0QXoP4yANTrhdEFVMopAOX0ZOAHo4tQPxkA6nVIdAGVcgpAuXmsayQDQL1qey97X5Q2BWAHoP881jWSAaBevmUshh0A5ebrhTWSAaBeBoAYpa0BcBFg/3msayQDQL28KohR8xSAHYAYBgCNZAColyeFGCW+DGhWdgBieKxrJANAvTwpxCitA+AagP7zWNdIBoB6eVLIbyewlPDzQwgA3gXQfx7rGskAUC/XAOSXOgCWNgVgByCGx7pGMgDUy6uC/FIDwBA6AK4B6D+PdY1kAKiXJ4X8Uq+AhxAAnALoP491jWQAqJdtwfycAlAEA4BGMgDUy5NCfnYAFMFjXSMZAOrlSSG/EjsAPgio/zzWNZIBoF6eFPJLCQDrgb26KqRFLgLsP491jWQAqJdrAPIr7SmAYAAYAo91jWQAqNeO6AIqVNqLgMA1AEPgsa6RDAD18mSc39aEnx1KAPAugP7zWNdIBoB6eVLIzykARfB710gGgHp5UsivtBcBgXcBDEFK50kVMQDUy5NCfikBwA6A2uL3rpEMAPXypJCfiwAVwe9dIxkA6mU7Nr8SpwBcBNh/fu8ayQBQL68K8nMRoHLbjg8C0hgGgHp5Ms6vxA6AiwD7zeNcYxkA6uUiwPxKDAB2APrN71xjGQDq5YkhP6cAlJtBX2MZAOrlyTi/EjsATgH0m8e5xjIA1MsTQ34lBoDUuwB8MU1eHucaywBQL08M+dU+BbALX0yTm8e5xjIA1Mu5wfxqfxAQOCDl5vetsQwA9fLEkF/tjwIG1wHkZtDXWAaAem2OLqBCdgAckHLz+9ZYBoB6bYouoEK1LwIEOwC5PRBdgPrLAFCvB6MLqJBTAAaA3DzONZYBoF6eGPJzCsC1J7l5nGssA0C9bA3mV+IUwDp8JXCfeZxrLANAvTbhW8JyK3EKAHwaYJ/ZAdBYBoB67QIeii6iMiU+CAh8H0CfudhXYxkA6ubVQV4lTgGAUwB95jGusQwAdfPkkFepUwCp7wNQPq4B0FgGgLoZAPIq8S4AcAqgzzzGNZYBoG6eHPJyCsAOQG4e4xrLAFA3Tw55uQjQDkBuHuMaywBQN08OeZXaATAA9JfHuMYyANTNk0NepQYApwD6y2NcYxkA6uYK4bycArADkJvHuMYyANTNq4O8Su0AGAD6y2NcYxkA6ubJIa9SbwN0CqCfdgKbo4tQfxkA6nZPdAGV8UFAdgBy+h7NI7+lkQwAdbsruoDKlDoFYAegn+6OLkD9ZgComyeIvFwEaADIyYCviQwAdfMEkVepawCcAugnj29NZAComyeIfLaTNh87pADg2wD7yQ6fJjIA1O0uXCSUS+rA5xSAFmXA10QGgLptw1sBc0kNAEPqADgF0E92ADSRAUBeJeSReuU7pADgFEA/eWxrIgOAPEnk4RRAwymAfOwAaCIDgAwAeZQ8BWAHoJ88tjWRAUBeJeSReuU7pA6AAaCfPLY1kQFAXiXkkfoY4HVdFdIBpwD6yWNbExkA5FVCHqU+BRC8C6CPduK7PjSFAUBeJeRR6nsAwHcB9NE9wFJ0Eeo3A4AMAHmUHADsAPSPx7WmMgDIE0UeTgE0DAB5OLWnqQwA8kSRR6kvAgLvAugjj2tNZQDQ7dEFVGJrws8OLQB4F0D/eFxrKgOA7iJtcNJ8nAJo2AHI49boAtR/BgDtwquFHEpeBOhdAP1zS3QB6j8DgMCrhRzsADTsAORhANBUBgCBJ4sc7AA07ADkYajXVAYAgSeLHEoOAHYA+sdQr6kMAAK4LbqACjgF0DAAdG873gaoGRgABF4t5FByB8ApgH65leZdANJEBgCBASCHkh8ElFLvEj6jvmtO6WkmBgAB3BhdQAVSXwc8JKmBxS5At74TXYCGwQAgaAKALcNuldwBSA0srgPolgFAMzEACJoTsg8D6pYdgBV2ALplANBMDABa5kmjW3YAVtgB6NbG6AI0DAYALdsYXUDhSr4LILVeA0C3DPOaiQFAyzxpdMspgBVOAXTLY1kzMQBomSeNbpU8BbCBtHOJHYDufBfYFF2EhsEAoGUbowsoXMkdAPBpgH1hkNfMDABadkN0AYUruQMAaaHFANCdjdEFaDgMAFp2Az6hrUt2AFa4BqA710UXoOEwAGjZNnwiYJdKvgsAnALoCwOAZmYA0GqePLpTegDwhUD94DGsmRkAtJonj+6U/DpgsAPQF9dGF6DhMABoNQNAd+wArLAD0I37gTuji9BwGAC0mgGgO3YAVtgB6IbHr5IYALSaJ5DulN4BMADE8/hVEgOAVrsB27NdKT0AOAUQzwCgJAYArbYD+HZ0EYVyCmCFHYBuXBNdgIbFAKA9fTO6gEKV3gEwAMS7MroADYsBQHvyJNKN0gOAUwCxlvAWQCUyAGhPV0UXUCinAFbYAWjft4HN0UVoWAwA2pMBoBt2AFbYAWifx62SGQC0p2vxCq0LdgBWGADaZwBQMgOA9rQdbydq2xJpb1ocYgfAKYBYBgAlMwBoFE8m7Uq94h1iAEjpWhgA2ucxq2QGAI3inQDtSh3wSp8CMAC0awfeAaA5GAA0ytejCyhM6oA3xA6AawDifBPYGl2EhscAoFEuiy6gME4B7M4OQLs8XjUXA4BGuRm4I7qIgjgFsDs7AO26PLoADZMBQON8LbqAgtQwBWAHII4dAM3FAKBxPKm0J+WKdz2woatCOuQiwBg7cc2O5mQA0Di2FdtT+lMAwScBRrkWeCC6CA2TAUDj2AFoT+lPAQQ7AFE8TjU3A4DGuR64J7qIQtgB2J0dgPbYqdPcDAAaZxcuBGxLyoA31ACQUrf3rLfHDoDmZgDQJBdFF1CIlA5ADVMAdgDasQRcEl2EhssAoEkMAO1wCmB3BoB2XAE8GF2EhssAoEkuopkK0GJqCAAuAszPgK6FGAA0yd34auA2eBfA7gwA7TAAaCEGAE1zYXQBBaihA+AUQH4em1qIAUDTeJWxODsAu7MDsLi7aG7VleZmANA0BoDF2QHYnR2AxV2I63O0IAOAprkKuC+6iIGrIQDYAcjLYK6FGQA0zU6ca1yUUwC7MwAs7kvRBWj4DACaxT9GFzBwNXQAUqcAbF/P7yF8AJBaYADQLP4huoCBqyEApNbtOoD5XYBdFLXAAKBZXAbcG13EgDkFsJYBYH4GcrXCAKBZLAHnRxcxYDW8DCg1uHgFO7/zogtQGQwAmpVXHfNzCmAtA8B87sM3AKolBgDNygAwP98GuJZTAPM5n6YjJy3MAKBZfYPm6WNK5xTAWnYA5mMQV2sMAJrVLjz5zKuGRYB7A+sSft4AMB/n/9UaA4BSnB1dwEDVsAZgHbBXws87BZDuNppOnNQKA4BSfBYf4DKPGtYAgE8D7Npn8PhTiwwASnE7cHl0EQNUQwcAfCFQ1z4bXYDKYgBQqs9EFzBANawBADsAXdqO8/9qmQFAqbwKSVdLB8AA0J3z8a2capkBQKkuAe6MLmJgagkATgF056zoAlQeA4BS7QQ+F13EwDgFsJYdgDROval1BgDNw2mANHYA1rIDMLsbgG9FF6HyGAA0j7PwCi6FHYC1/O9ndqdHF6AyGQA0j/vwqYApaukAGAC68cnoAlQmA4Dm5UlpdrUEAKcA2ncXcGF0ESqTAUDz+hTNgkBN5xTAWnYAZvMpYEd0ESqTAUDzugO4OLqIgailA2AAaJ+dNnXGAKBFeHKaTS0BwCmAdj2IT/9ThwwAWoQBYDZOAaxlB2C6zwBbootQuQwAWsS3gSujixiAWjoAKbXbAZjOgK1OGQC0qFOjC+i5XaQt4hpyAEjpXtgBmOwhfOCWOmYA0KJOwneUT7KdtO+nlikAOwCTfRJ4ILoIlc0AoEVtBC6ILqLHUgc6OwAC+Gh0ASqfAUBt8GQ1XupAZwdAt+Dqf2VgAFAbTqOZs9RaqQFgyB0A7wJox/8BlqKLUPkMAGrD/TRPLNNaTgGMZgAY7/9GF6A6GADUFqcBRqtpCsAHAS3un/DWWmViAFBbzgVuii6ih2oKAE4BLM4grWwMAGrLTpq5S+0u9SmA67oqJAMDwGK2AB+PLkL1MACoTe/F1u6eankKIDgFsKiTgbuji1A9DABq0y3Ap6OL6Jla3gMAdgAW9d7oAlQXA4Da9rfRBfSMHYDR7ADs7kvApdFFqC4GALXti8A3oovokZoCgB2A+RmclZ0BQF34n9EF9IhTAKMZAFbcim/+UwADgLrwMVzMtKymDoBTAPN5H34fCmAAUBc2Ax+JLqInagoAdgDSbQM+GF2E6mQAUFfeg1c14BTAOAaAxinAHdFFqE4GAHVlI819zbWrqQPgFECancBfRBehehkA1KU/w7eapQx0Qw8AdgDSnAZcFV2E6mUAUJf+meYkV7OUga6mKYDaOwC7gBOii1DdDADq2jtoWp21cgpgtNo7AGcAl0UXoboZANS1q4Azo4sI5CLA0WoPAF79K5wBQDm8jablWSM7AKPtpN71IecAF0YXIRkAlMNlwOejiwjiIsDxau0CvDO6AAkMAMrnOOrsAjgFMF6NAeA84PzoIiQwACifi6jzeedOAYxX250Au4Bjo4uQlhkAlNN/o76Tfk0BwA7AZKcAX40uQlpmAFBO1wL/K7qIzHwOwHg1hcFtwJ9EFyGtZgBQbscBD0QXkVFNiwBTA0xNHYD3AN+OLkJazQCg3O4E/iq6iIxq6gBsIO2cUksH4D5c+a8eMgAowl8Ct0cXkUlNdwGADwMa5Xjg7ugipD0ZABThQeDt0UVkUtMiQDAA7Olm4MToIqRRDACK8gHg8ugiMqgtAPhK4N39LrA5ughpFAOAoiwBr6f8FwU5BTBe6R2Ac4G/iy5CGscAoEj/BHw4uoiO1dYBMAA0tgH/JboIaRIDgKIdC3w3uogO1RYAnAJo/DnwregipEkMAIr2PeAPoovokFMA45XaAbiRZuW/1GsGAPXBhyj39ai1dQBS9qHUDsDvAJuii5CmMQCoD3YBvw3siC6kAzU9CRDSuhgldgBOB86ILkKahQFAfXEF8NfRRXSgpicBQt1TAPcDb4wuQpqVAUB98sfAldFFtKy2KYCaFwG+hWb+XxoEA4D6ZCvw65Q1MLgIcLySOgDnAB+JLkJKYQBQ31wGnBBdRItq6wDUGADuBV5Hs5ZFGgwDgProbcCl0UW0pLYAUOMUwH+meea/NCgGAPXRDporqhKuEJ0CGK+Ev+/pwMnRRUjzMACor74OvCO6iBbU1gGo6TkAd9G8z0IaJAOA+ux44OLoIhawRNrLjkoIADU9B+C3gDuii5DmZQBQn+0AXgXcHV3InFIHuNqmAIbcAfhb4JPRRUiLMACo724CXsswV1inDnB2AIbhG8DvRxchLcoAoCE4Ezgxuog52AGYbIgdgAdpulJboguRFmUA0FD8PnBRdBGJUgNACR2A0u8CeD1wTXQRUhsMABqK7cCvMKz1AE4BTDa0APA+vOVPBTEAaEhuZFjrAWqcAij1QUBXAL8bXYTUJgOAhuZM4F3RRcwoZYDb8PA2dCldjK2dVdGu7wGvADZHFyK1yQCgITqWYdyCVdurgKG8RYDbgWOA66ILkdpmANAQ7QR+DfhKdCFT1PYUQChrCmAX8JvAedGFSF0wAGioNgMvo9/vX08Z4EoJACXdBfB24KToIqSuGAA0ZLcBRwL3RRcyhlMAk/W5A/B3NG+llIplANDQXUVze2AfB5MaOwApQaaviwC/CLyG4dxtIs3FAKASnE0TAnZEF7IHOwCT9TG0fQ14Kf0NJ1JrDAAqxd8DryPt7XtdcxHgZH0LAFcARwD3Rhci5WAAUElOAt4YXcQqNQaAoS4C/GfgxQzrSZPSQgwAKs17gD+MLuJhKVe4NU4B9CUA3AT8Is2iUqkaBgCV6L8D74guAhcBTtOHAHAT8AvAxuA6pOwMACrVn9A8MTByJXfKQrJSAsCQFgHeABxO0/6XqmMAUMn+HHgDcQsDnQKYLLIDcDXwc8D1gTVIoQwAKt37gVcTc4tgjYsAh3AXwKXAC4Fbgn6/1AsGANXgZJq3uW3J/HvtAEy2nfxTNBfQzPnflfn3Sr1jAFAtPg0cRd57vF0EOF3OaYBP0Nzqd3/G3yn1lgFANfkC8Bzg2ky/r8YpgNT9yDUN8DfAq2heIiUJA4Dqcx3ws8D5GX6XjwKerusAsINmIeib6NdTIqVwBgDV6G7gRcDHOv49TgFM1+UUwAPA0cD7Ovwd0mAZAFSrrTRvfHsb3V0ZOgUwXVcB4FrgZ4CzOvp8afAMAKrZLuA4msfA3tnB5zsFMF0XUwCnA88FvtnBZ0vFMABIcB7wbODilj+31imAdQk/32YHYAfwVuBl+EY/aSoDgNS4iebJcCe0+Jk1TgFAzMOAbqF5rO8JxD7+WRoMA4C0YvkK8t8D97XweTU+CAjS9iXlfQnjfA74KeDLLXyWVA0DgLTWKcAzaKYGFlHjGgDI90KgzTSB7Ui6WcMhFc0AII12I3AE8Hpg05yf4RTAdPMGgEuAZ9K0/L2/X5qDAUAabxfwAeCnga/O8e9rnQLo8o2AO2gG/RcA1yT+W0mrGACk6a4Gngf8MWkvFKq1A9BVALiM5lHObyXuTYJSMQwA0mx2AH8GHMbsD5epNQC0PQWwiWbQfw5w+VwVSVrDACClEHji5AAABS1JREFUuZ5m0dnRNOsEJnEKYLppIelM4FCatv/S3BVJWsMAIM3nDODHgRMZPzDV+CAgaCcAXEfzvoaX0DyjQVLLDADS/O4H3gz8GHDqiP+/UwDT7RmSvkfT7n8G8PnWKpK0hgFAWty3aN41/zzgglX/u88BmG7bqv/7N8BTadr9KYstJc3BACC152LghTTrA67DDsAsttJ0T34UeBM+w1+SNHB7A3sl/PwXaZ47UML2bxL2e7+En5XUopQTlKTZpd6nXlIHIGVfNndWhaSJnAKQ+qGkAFDSegapWAYAqR9KGjRLCjNSsQwAUj+UNGiWtC9SsQwAUj+UNGiW1M2QimUAkPqhpEGzpDAjFcsAIPVDSYNmSfsiFcsAIPVDSYNmSd0MqVgGAKkfSho0SwozUrEMAFI/lDRolhRmpGIZAKR46yjrqZwGAGkADABSvL1pQkApSupmSMUyAEjxSrtiNgBIA2AAkOKVNmCWFmikIhkApHilBYDS9kcqkgFAilfaFbMBQBoAA4AUr7QBs7RAIxXJACDFK23ALC3QSEUyAEjxShswSws0UpEMAFK80gJAafsjFckAIMUr7YrZACANgAFAilfagFlaoJGKZACQ4m2ILqBlBgBpAAwAUrz7owto2b3RBUiazgAgxdsI7IwuokXXRxcgaToDgBTvbuDS6CJadG50AZKmMwBI/XBKdAEtuQ84K7oISZKG4iBgC7Br4Nt72/5iJEkq3WnED+CLbj/d+rciSVLhfpn4AXyR7Yr2vxJJksq3AbiR+IF83u0t7X8lkrriIkCpP5aAj0UXMadtDLd2SZLCPYXmmQDRV/Op26ldfBmSJNXki8QP6KnbkZ18E5IkVeS1xA/oKdvNlPc+A0mSsnskzQN1ogf2Wbd3dvM1SJJUnw8SP7DPuj2to+9AkqTqPI/4gX2W7R872n9Jkqp1FfED/LTt1zvbe0mSKvV7xA/wk7YHgEd1tveSJFXqX9A8YCd6oB+3faC7XZckqW6fIn6gH7f9TIf7LUlS1Y4mfqAftX2ry52WJKl2ewG3Ej/g77n91y53WpIkwQnED/irt+3A4zvdY0mSxI/QrxcEfbLb3ZUkScu+TPzAv7wd3fG+SpKkh72O+IF/F3A7sHfH+ypJkh72KOB+4gPA8V3vqCRJ2t2HiQ8Ah3a+l5IkaTc/R+zg/6Xud1GSJI1yNXEB4HUZ9k+SJI3wVmIG/weBR2fYP0mSNMLjaR7EkzsAfCjHzkmSpPHOIH8AeEGWPZMkSWO9nLyD/zXAuix7JkmSxtoLuI18AeCteXZLkiRN8y7yDP7bgYMz7ZMkSZriMPIEgE/n2iFJkjSbi+k+ALws295IkqSZvJ5uB/878MU/kiT1zmOATXQXAP4y365IkqQUJ9FdAHhGxv2QJEkJDqebwf+ijPsgSZISrQOuo/0A8Fs5d0KSJKX7I9od/B8Cvi/rHkiSpGRPBHbQXgD4aN7yJUnSvM6ivQDwrzLXLkmS5nQM7Qz+1+OLfyRJGoxHAHeyeAD4w9yFS5KkxbybxQb/JeCQ7FVLkqSFPIPFAsBn85csSZLacB7zB4AjAuqVJEkt+AlgK+mD/+kRxUqSpPb8BrCT2Qf/K4DvD6lUkiS16pXAvUwf/M8GDgqqUZIkdeAHgOOBm9h90N8GnAu8NK40SdF84IdUh4OBJwBbgBtonvcvSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkVeb/A5pVXdCIK96WAAAAAElFTkSuQmCC",style:{height:"".concat(this.props.size,"px")}}),this.props.text?(0,Zn.jsx)("div",{className:"logo-text",style:{fontSize:"".concat(this.props.size,"px"),letterSpacing:"".concat(this.props.size/6,"px")},children:this.props.text}):null]})}catch{return(0,Zn.jsx)("div",{className:"logo-panel render-error"})}}}}dr.defaultProps={text:"Skirmish"};class pr extends i.Component{constructor(){super(...arguments),this.onClick=(e,t)=>{e.stopPropagation(),this.props.onSelectStructure(t)},this.getStructure=e=>{const t=u.getSeededRNG(e.id),n=40*u.randomDecimal(t)+50,a=40*u.randomDecimal(t)+50,r=360*u.randomDecimal(t),s=V.canCharge(e)?u.randomColor(80,120,t):{r:50,g:50,b:50};let i=[];switch(u.randomNumber(4,t)){case 0:i=[{x:0,y:0},{x:n,y:0},{x:n,y:a},{x:0,y:a}];break;case 1:{const e=u.randomNumber(n/3,t)+n/3,r=u.randomNumber(a/3,t)+a/3;i=[{x:0,y:0},{x:e,y:0},{x:e,y:r},{x:n,y:r},{x:n,y:a},{x:0,y:a}];break}case 2:{const e=u.randomNumber(n/4,t)+n/2,r=u.randomNumber(a/6,t)+a/6,s=u.randomNumber(a/6,t)+a/6+a/2;i=[{x:0,y:0},{x:n,y:0},{x:n,y:r},{x:e,y:r},{x:e,y:s},{x:n,y:s},{x:n,y:a},{x:0,y:a}];break}case 3:{const e=u.randomNumber(n/6,t)+n/6+n/2,r=u.randomNumber(n/6,t)+n/6,s=u.randomNumber(a/3,t)+a/3,o=u.randomNumber(a/3,t)+a/3;i=[{x:0,y:0},{x:n,y:0},{x:n,y:s},{x:e,y:s},{x:e,y:a},{x:r,y:a},{x:r,y:o},{x:0,y:o}];break}}const o=(100-n)/2,l=(100-a)/2;return e===this.props.selectedStructure&&(s.r=255,s.g=255,s.b=255),(0,Zn.jsx)("g",{children:(0,Zn.jsx)("polygon",{className:V.canCharge(e)&&0===e.charges?"structure uncharged":"structure",points:i.map((t=>{const n=(t.x+o)/100,a=(t.y+l)/100;return"".concat(e.position.x+n,",").concat(e.position.y+a)})).join(" "),style:{fill:U.toString(s),rotate:"".concat(r,"deg")},onClick:t=>this.onClick(t,e),children:(0,Zn.jsx)("title",{children:e.name})})},e.id)},this.render=()=>{try{let e=this.props.stronghold;if("structure"===this.props.mode&&null!==this.props.selectedStructure){const t=this.props.selectedStructure.id;e=e.filter((e=>e.id===t))}const t=V.getDimensions(e);t.left-=1,t.top-=1,t.right+=1,t.bottom+=1;const n=t.right-t.left+1,a=t.bottom-t.top+1;return(0,Zn.jsx)("svg",{className:"stronghold-map",viewBox:"".concat(t.left," ").concat(t.top," ").concat(n," ").concat(a),onClick:e=>this.onClick(e,null),children:e.map(this.getStructure)})}catch{return(0,Zn.jsx)("div",{className:"stronghold-map render-error"})}}}}pr.defaultProps={mode:"map",onSelectStructure:()=>null};var hr=Fn("outline","list","IconList",[["path",{d:"M9 6l11 0",key:"svg-0"}],["path",{d:"M9 12l11 0",key:"svg-1"}],["path",{d:"M9 18l11 0",key:"svg-2"}],["path",{d:"M5 6l0 .01",key:"svg-3"}],["path",{d:"M5 12l0 .01",key:"svg-4"}],["path",{d:"M5 18l0 .01",key:"svg-5"}]]);class mr extends i.Component{constructor(){super(...arguments),this.onDetails=e=>{e.stopPropagation(),this.props.onDetails&&this.props.onDetails(this.props.loot)},this.onCancel=e=>{e.stopPropagation(),this.props.onCancel&&this.props.onCancel(this.props.loot)},this.render=()=>{try{let e="";if(1===this.props.loot.items.length){const t=this.props.loot.items[0];e=t.magic?t.description:t.name}else this.props.loot.items.length>1&&(e="".concat(this.props.loot.items.length," items"));return this.props.loot.money>0&&(""===e?e="Money":e+="; money"),(0,Zn.jsxs)("div",{className:"treasure-row-panel",children:[(0,Zn.jsx)("div",{className:"token-container",children:(0,Zn.jsx)(rr,{loot:this.props.loot,encounter:null,squareSize:40,mapDimensions:{left:0,top:0},selectable:!0,selected:!1,onClick:()=>null})}),(0,Zn.jsx)("div",{className:"name",children:(0,Zn.jsx)(ra,{type:aa.MinorHeading,children:e})}),(0,Zn.jsx)("button",{className:"icon-btn",onClick:e=>this.onDetails(e),children:(0,Zn.jsx)(hr,{})}),(0,Zn.jsx)("button",{className:"icon-btn",onClick:e=>this.onCancel(e),children:(0,Zn.jsx)(ca,{})})]})}catch{return(0,Zn.jsx)("div",{className:"treasure-row-panel render-error"})}}}}class fr extends i.Component{constructor(){super(...arguments),this.render=()=>!this.props.text||this.props.subtext||this.props.content?this.props.text||!this.props.subtext||this.props.content?this.props.text||this.props.subtext||!this.props.content?(0,Zn.jsxs)("div",{className:"placeholder-card",children:[this.props.text?(0,Zn.jsx)("div",{className:"main-text",children:this.props.text}):null,this.props.subtext?(0,Zn.jsx)("div",{className:"sub-text",children:this.props.subtext}):null,this.props.content]}):(0,Zn.jsx)("div",{className:"placeholder-card centered",children:this.props.content}):(0,Zn.jsx)("div",{className:"placeholder-card centered",children:(0,Zn.jsx)("div",{className:"sub-text",children:this.props.subtext})}):(0,Zn.jsx)("div",{className:"placeholder-card centered",children:(0,Zn.jsx)("div",{className:"main-text",children:this.props.text})})}}fr.defaultProps={text:null,subtext:null,content:null};class gr extends i.Component{constructor(e){super(e),this.onFlip=e=>{e.stopPropagation(),this.setState({flipped:!this.state.flipped})},this.onClick=e=>{e.stopPropagation(),this.state.flipped?this.onFlip(e):this.props.onClick&&this.props.onClick(this.props.background)},this.render=()=>{let e=null;this.props.background.startingFeatures.length>0&&(e=(0,Zn.jsxs)("div",{children:[(0,Zn.jsx)(ra,{type:aa.MinorHeading,children:"Start With"}),this.props.background.startingFeatures.map((e=>(0,Zn.jsx)(ur,{item:J.getFeatureDescription(e)},e.id)))]}));let t=null;this.props.background.features.length>0&&(t=(0,Zn.jsxs)("div",{children:[(0,Zn.jsx)(ra,{type:aa.MinorHeading,children:"Features"}),this.props.background.features.map((e=>(0,Zn.jsx)(ur,{item:J.getFeatureDescription(e)},e.id)))]}));let n=null;this.props.background.actions.length>0&&(n=(0,Zn.jsxs)("div",{children:[(0,Zn.jsx)(ra,{type:aa.MinorHeading,children:"Actions"}),this.props.background.actions.map((e=>(0,Zn.jsx)(ur,{item:Fe.getActionDescription(e)},e.id)))]}));const a=[];return a.push((0,Zn.jsx)("button",{className:"icon-btn",title:"Flip",onClick:this.onFlip,children:(0,Zn.jsx)(zn,{})},"flip")),(0,Zn.jsx)(ha,{type:E.Background,front:(0,Zn.jsx)(fr,{text:this.props.background.name,subtext:this.props.background.description}),back:(0,Zn.jsxs)("div",{className:"background-card-back",children:[e,t,n]}),footerText:"Background",footerContent:a,flipped:this.state.flipped,disabled:this.props.disabled,onClick:this.props.onClick?this.onClick:this.onFlip})},this.state={flipped:!1}}}gr.defaultProps={disabled:!1,onClick:null};class yr extends i.Component{constructor(e){super(e),this.onFlip=e=>{e.stopPropagation(),this.setState({flipped:!this.state.flipped})},this.onClick=e=>{e.stopPropagation(),this.state.flipped?this.onFlip(e):this.props.onClick&&this.props.onClick(this.props.item)},this.render=()=>{let e=this.props.item.location.toString();this.props.item.slots>1&&(e="".concat(this.props.item.slots," ").concat(e,"s")),this.props.item.location===b.None&&(e="");let t=null;this.props.item.weapon&&(t=(0,Zn.jsxs)("div",{children:[(0,Zn.jsx)(ra,{type:aa.MinorHeading,children:"Weapon"}),this.props.item.weapon?(0,Zn.jsx)(fa,{orientation:"compact",label:"Damage",value:this.props.item.weapon.damage.map(((e,t)=>(0,Zn.jsx)(ta,{type:e.type,value:e.rank},t)))}):null,this.props.item.weapon&&this.props.item.weapon.range>1?(0,Zn.jsx)(fa,{orientation:"compact",label:"Range",value:this.props.item.weapon.range}):null,this.props.item.weapon&&this.props.item.weapon.unreliable>0?(0,Zn.jsx)(fa,{orientation:"compact",label:"Unreliable",value:this.props.item.weapon.unreliable}):null]}));let n=null;this.props.item.armor&&(n=(0,Zn.jsxs)("div",{children:[(0,Zn.jsx)(ra,{type:aa.MinorHeading,children:"Armor"}),this.props.item.armor.features.map((e=>(0,Zn.jsx)(ur,{item:J.getFeatureDescription(e)},e.id)))]}));let a=null;this.props.item.potion&&(a=(0,Zn.jsxs)("div",{children:[(0,Zn.jsx)(ra,{type:aa.MinorHeading,children:"Potion"}),this.props.item.potion.effects.map(((e,t)=>(0,Zn.jsx)(ur,{item:Be.getDescription(e,null,null)},t)))]}));let r=null;const s=J.collateFeatures(this.props.item.features);s.length>0&&(r=(0,Zn.jsxs)("div",{children:[(0,Zn.jsx)(ra,{type:aa.MinorHeading,children:"Features"}),s.map((e=>(0,Zn.jsx)(ur,{item:J.getFeatureDescription(e)},e.id)))]}));let i=null;this.props.item.actions.length>0&&(i=(0,Zn.jsxs)("div",{children:[(0,Zn.jsx)(ra,{type:aa.MinorHeading,children:"Actions"}),this.props.item.actions.map((e=>(0,Zn.jsx)(ur,{item:Fe.getActionDescription(e)},e.id)))]}));let o=null;t||n||a||r||i||(o=(0,Zn.jsx)("div",{children:(0,Zn.jsx)(ra,{type:aa.Small,children:"This item has no additional statistics."})}));const l=[];return l.push((0,Zn.jsx)("button",{className:"icon-btn",title:"Flip",onClick:this.onFlip,children:(0,Zn.jsx)(zn,{})},"flip")),(0,Zn.jsx)(ha,{type:this.props.item.potion?E.Potion:E.Item,front:(0,Zn.jsx)(fr,{text:1===this.props.count?this.props.item.name:"".concat(this.props.item.name," (x").concat(this.props.count,")"),subtext:this.props.item.description,content:(0,Zn.jsx)("div",{className:"item-card-front",children:(0,Zn.jsxs)("div",{className:"tags",children:[this.props.item.proficiency!==v.None?(0,Zn.jsx)(ka,{children:this.props.item.proficiency}):null,""!==e?(0,Zn.jsx)(ka,{children:e}):null]})})}),back:(0,Zn.jsxs)("div",{className:"item-card-back",children:[t,n,a,r,i,o]}),footerText:this.props.item.potion?"Potion":"Item",footerContent:l,flipped:this.state.flipped,disabled:this.props.disabled,onClick:this.props.onClick?this.onClick:this.onFlip})},this.state={flipped:!1}}}yr.defaultProps={count:1,disabled:!1,onClick:null};class br extends i.Component{constructor(e){super(e),this.onFlip=e=>{e.stopPropagation(),this.setState({flipped:!this.state.flipped})},this.onClick=e=>{e.stopPropagation(),this.state.flipped?this.onFlip(e):this.props.onClick&&this.props.onClick(this.props.structure)},this.getStructureDetails=()=>{switch(this.props.structure.type){case h.Barracks:return(0,Zn.jsxs)(ra,{children:[(0,Zn.jsx)("p",{children:"This structure provides a place for heroes to live."}),(0,Zn.jsx)("p",{children:"You can't upgrade this structure."})]});case h.Warehouse:return(0,Zn.jsxs)(ra,{children:[(0,Zn.jsx)("p",{children:"This structure provides a place to store unused equipment."}),(0,Zn.jsx)("p",{children:"You can't upgrade this structure."})]});case h.Academy:return(0,Zn.jsxs)(ra,{children:[(0,Zn.jsx)("p",{children:"This structure allows you to add bonus XP to your heroes."}),(0,Zn.jsxs)("p",{children:["You gain ",this.props.structure.level," XP when the structure is charged."]})]});case h.Forge:return(0,Zn.jsxs)(ra,{children:[(0,Zn.jsx)("p",{children:"When adding a new structure to your stronghold, this allows you to redraw structure cards."}),(0,Zn.jsxs)("p",{children:["You gain ",this.props.structure.level," redraw(s) when the structure is charged."]})]});case h.Hall:return(0,Zn.jsxs)(ra,{children:[(0,Zn.jsx)("p",{children:"When recruiting a new hero, this structure allows you to redraw species, role, or background cards."}),(0,Zn.jsxs)("p",{children:["You gain ",this.props.structure.level," redraw(s) when the structure is charged."]})]});case h.Intelligencer:return(0,Zn.jsxs)(ra,{children:[(0,Zn.jsx)("p",{children:"This structure forces monsters to begin an encounter with detrimental conditions."}),(0,Zn.jsxs)("p",{children:["You gain ",this.props.structure.level," conditions(s) when the structure is charged."]})]});case h.Observatory:return(0,Zn.jsxs)(ra,{children:[(0,Zn.jsx)("p",{children:"In an encounter, this structure allows you to redraw action cards."}),(0,Zn.jsxs)("p",{children:["You gain ",this.props.structure.level," redraw(s) when the structure is charged."]})]});case h.Quartermaster:return(0,Zn.jsxs)(ra,{children:[(0,Zn.jsx)("p",{children:"When recruiting a new hero, this structure allows you to redraw item cards."}),(0,Zn.jsxs)("p",{children:["You gain ",this.props.structure.level," redraw(s) when the structure is charged."]})]});case h.Temple:return(0,Zn.jsxs)(ra,{children:[(0,Zn.jsx)("p",{children:"This structure allows your heroes to begin an encounter with beneficial conditions."}),(0,Zn.jsxs)("p",{children:["You gain ",this.props.structure.level," conditions(s) when the structure is charged."]})]});case h.ThievesGuild:return(0,Zn.jsxs)(ra,{children:[(0,Zn.jsx)("p",{children:"This structure allows your heroes to take additional actions in an encounter."}),(0,Zn.jsxs)("p",{children:["You gain ",this.props.structure.level," action(s) when the structure is charged."]})]});case h.TrainingGround:return(0,Zn.jsxs)(ra,{children:[(0,Zn.jsx)("p",{children:"When levelling-up a hero, this structure allows you to redraw feature cards."}),(0,Zn.jsxs)("p",{children:["You gain ",this.props.structure.level," redraw(s) when the structure is charged."]})]});case h.WarRoom:return(0,Zn.jsxs)(ra,{children:[(0,Zn.jsx)("p",{children:"This structure allows you to add additional heroes to an encounter."}),(0,Zn.jsxs)("p",{children:["You gain ",this.props.structure.level," action(s) when the structure is charged."]})]});case h.WizardTower:return(0,Zn.jsxs)(ra,{children:[(0,Zn.jsx)("p",{children:"When buying a magic item or potion, this structure allows you to redraw item cards."}),(0,Zn.jsxs)("p",{children:["You gain ",this.props.structure.level," redraws when the structure is charged."]})]})}return null},this.render=()=>{const e=[];return e.push((0,Zn.jsx)("button",{className:"icon-btn",title:"Flip",onClick:this.onFlip,children:(0,Zn.jsx)(zn,{})},"flip")),(0,Zn.jsx)(ha,{type:E.Structure,front:(0,Zn.jsx)(fr,{text:this.props.structure.name,subtext:this.props.structure.description}),back:(0,Zn.jsx)("div",{className:"structure-card-back",children:this.getStructureDetails()}),footerText:"Structure",footerContent:e,flipped:this.state.flipped,disabled:this.props.disabled,onClick:this.props.onClick?this.onClick:this.onFlip})},this.state={flipped:!1}}}br.defaultProps={disabled:!1,onClick:null};class vr extends i.Component{constructor(){super(...arguments),this.onClick=e=>{e.stopPropagation(),this.props.onClick&&this.props.onClick(this.props.boon)},this.onSelectItem=e=>{this.props.onClick&&this.props.onClick(this.props.boon)},this.onSelectStructure=e=>{this.props.onClick&&this.props.onClick(this.props.boon)},this.render=()=>{if(this.props.boon.type===g.MagicItem)return(0,Zn.jsx)(yr,{item:this.props.boon.data,onClick:this.props.onClick?this.onSelectItem:null});if(this.props.boon.type===g.Structure)return(0,Zn.jsx)(br,{structure:this.props.boon.data,onClick:this.props.onClick?this.onSelectStructure:null});let e="",t=null;switch(this.props.boon.type){case g.ExtraHero:e="Recruit an additional hero.";break;case g.ExtraXP:e="Choose one of your heroes to gain bonus XP.",t=(0,Zn.jsx)(ta,{type:$n.XP,value:this.props.boon.data,size:ea.Large});break;case g.LevelUp:e="Choose one of your heroes to level up.";break;case g.Money:t=(0,Zn.jsx)(ta,{type:$n.Money,value:this.props.boon.data,size:ea.Large});break;case g.EnchantItem:e="Enchant one of your items."}return(0,Zn.jsx)(ha,{type:E.Boon,front:(0,Zn.jsx)(fr,{text:this.props.boon.type,subtext:e,content:(0,Zn.jsx)("div",{className:"boon-card-front",children:t?(0,Zn.jsx)("div",{className:"extra",children:t}):null})}),footerText:"Reward",disabled:this.props.disabled,onClick:this.props.onClick?this.onClick:null})}}}vr.defaultProps={disabled:!1,onClick:null};class kr extends i.Component{constructor(){super(...arguments),this.onClick=e=>{e.stopPropagation(),this.props.onClick&&this.props.onClick(this.props.feature)},this.render=()=>(0,Zn.jsx)(ha,{type:E.Feature,front:(0,Zn.jsx)(fr,{text:J.getFeatureTitle(this.props.feature),subtext:J.getFeatureInformation(this.props.feature,this.props.combatant)}),footerText:this.props.footer||"Feature",footerType:this.props.footerType,disabled:this.props.disabled,onClick:this.props.onClick?this.onClick:null})}}kr.defaultProps={combatant:null,disabled:!1,onClick:null};class xr extends i.Component{constructor(e){super(e),this.onFlip=e=>{e.stopPropagation(),this.setState({flipped:!this.state.flipped})},this.onClick=e=>{e.stopPropagation(),this.state.flipped?this.onFlip(e):this.props.onClick&&this.props.onClick(this.props.hero)},this.onCharacterSheet=e=>{e.stopPropagation(),this.props.onCharacterSheet&&this.props.onCharacterSheet(this.props.hero)},this.onRetire=e=>{e.stopPropagation(),this.props.onRetire&&this.props.onRetire(this.props.hero)},this.render=()=>{let e=null;const t=this.props.hero.items.filter((e=>e.magic));t.length>0&&(e=(0,Zn.jsxs)("div",{className:"items",children:[(0,Zn.jsx)("hr",{}),(0,Zn.jsx)(ra,{type:aa.MinorHeading,children:"Magic Items"}),t.map((e=>(0,Zn.jsx)(ur,{item:"".concat(e.name," (").concat(e.baseItem,")")},e.id)))]}));const n=[];n.push((0,Zn.jsx)("button",{className:"icon-btn",title:"Flip",onClick:this.onFlip,children:(0,Zn.jsx)(zn,{})},"flip")),this.props.onCharacterSheet&&n.push((0,Zn.jsx)("button",{className:"icon-btn",title:"Character Sheet",onClick:this.onCharacterSheet,children:(0,Zn.jsx)(La,{})},"character-sheet")),this.props.onRetire&&n.push((0,Zn.jsx)("button",{className:"icon-btn",title:"Retire",onClick:this.onRetire,children:(0,Zn.jsx)(ca,{})},"retire"));const a=Oe.getSpecies(this.props.hero.speciesID),r=Oe.getRole(this.props.hero.roleID),s=Oe.getBackground(this.props.hero.backgroundID);return(0,Zn.jsx)(ha,{type:E.Hero,front:(0,Zn.jsx)(fr,{text:this.props.hero.name,content:(0,Zn.jsxs)("div",{className:"hero-card-front",children:[(0,Zn.jsx)("div",{className:"token-container",children:(0,Zn.jsx)(Ha,{combatant:this.props.hero,encounter:null,squareSize:70,mapDimensions:{left:0,top:0},selectable:!0,selected:!1,onClick:()=>null})}),(0,Zn.jsxs)("div",{className:"tags",children:[a?(0,Zn.jsx)(ka,{children:a.name}):null,r?(0,Zn.jsx)(ka,{children:r.name}):null,s?(0,Zn.jsx)(ka,{children:s.name}):null,(0,Zn.jsxs)(ka,{children:["Level ",this.props.hero.level]}),this.props.hero.quirks.map(((e,t)=>(0,Zn.jsx)(ka,{children:e},t)))]})]})}),back:(0,Zn.jsxs)("div",{className:"hero-card-back",children:[(0,Zn.jsx)("div",{className:"xp",children:(0,Zn.jsx)(pa,{progress:this.props.hero.xp/this.props.hero.level,content:(0,Zn.jsxs)("div",{children:[(0,Zn.jsxs)("b",{children:[this.props.hero.xp," XP"]})," / ",this.props.hero.level]})})}),(0,Zn.jsx)("hr",{}),(0,Zn.jsxs)("div",{className:"traits",children:[(0,Zn.jsx)(fa,{orientation:"vertical",label:"End",value:X.getTraitRank(this.props.hero,[],x.Endurance)}),(0,Zn.jsx)(fa,{orientation:"vertical",label:"Res",value:X.getTraitRank(this.props.hero,[],x.Resolve)}),(0,Zn.jsx)(fa,{orientation:"vertical",label:"Spd",value:X.getTraitRank(this.props.hero,[],x.Speed)})]}),e]}),footerText:"Hero",footerContent:n,flipped:this.state.flipped,disabled:this.props.disabled,onClick:this.props.onClick?this.onClick:this.onFlip})},this.state={flipped:!1}}}xr.defaultProps={disabled:!1,onClick:null,onCharacterSheet:null,onRetire:null};class Sr{}Sr.getPacks=()=>p.getList(),Sr.getPackCardCount=e=>{let t=0;return t+=qe.getList().filter((t=>t.packID===e)).length,t+=$.getList().filter((t=>t.packID===e)).length,t+=ze.getList().filter((t=>t.packID===e)).length,t+=Re.getList().filter((t=>t.packID===e)).length,t+=Le.getList().filter((t=>t.packID===e)).length,t+=Te.getList().filter((t=>t.packID===e)).length,t+=f.getList().filter((t=>t.packID===e)).length,t};class wr extends i.Component{constructor(){super(...arguments),this.onClick=e=>{e.stopPropagation(),this.props.onClick&&this.props.onClick(this.props.pack)},this.onRemove=e=>{e.stopPropagation(),this.props.onRemove&&this.props.onRemove(this.props.pack)},this.render=()=>{const e=[];this.props.onRemove&&e.push((0,Zn.jsx)("button",{className:"icon-btn",title:"Remove",onClick:this.onRemove,children:(0,Zn.jsx)(ca,{})},"retire"));let t=null;return this.props.pack.id&&(t=(0,Zn.jsx)("div",{className:"pack-card-front",children:(0,Zn.jsx)(fa,{label:"Cards",value:Sr.getPackCardCount(this.props.pack.id)})})),(0,Zn.jsx)(ha,{type:E.Pack,stack:!0,front:(0,Zn.jsx)(fr,{text:this.props.pack.name,subtext:this.props.pack.description,content:t}),footerText:"Pack",footerContent:e,disabled:this.props.disabled,onClick:this.props.onClick?this.onClick:null})}}}wr.defaultProps={disabled:!1,onClick:null,onRemove:null};class Cr extends i.Component{constructor(e){super(e),this.onFlip=e=>{e.stopPropagation(),this.setState({flipped:!this.state.flipped})},this.onClick=e=>{e.stopPropagation(),this.state.flipped?this.onFlip(e):this.props.onClick&&this.props.onClick(this.props.region)},this.render=()=>{const e=_.getMonsters(this.props.region,this.props.options.packIDs).map((e=>e.name)).sort().map(((e,t)=>(0,Zn.jsx)(ka,{children:e},t))),t=[];return t.push((0,Zn.jsx)("button",{className:"icon-btn",title:"Flip",onClick:this.onFlip,children:(0,Zn.jsx)(zn,{})},"flip")),(0,Zn.jsx)(ha,{type:E.Region,front:(0,Zn.jsx)(fr,{text:this.props.region.name,content:(0,Zn.jsxs)("div",{className:"region-card-front",children:[(0,Zn.jsx)("div",{className:"map-container",children:(0,Zn.jsx)(Sa,{map:this.props.map,options:this.props.options,mode:"region",selectedRegion:this.props.region})}),(0,Zn.jsx)("div",{className:"stat-container",children:(0,Zn.jsx)(fa,{orientation:"vertical",label:1===this.props.region.encounters.length?"Encounter":"Encounters",value:this.props.region.encounters.length})})]})}),back:(0,Zn.jsxs)("div",{className:"region-card-back",children:[(0,Zn.jsx)(fa,{label:"Population",value:"".concat(this.props.region.demographics.population,",000")}),(0,Zn.jsx)(fa,{label:"Area",value:"".concat(this.props.region.demographics.size," sq mi")}),(0,Zn.jsx)(fa,{label:"Terrain",value:this.props.region.demographics.terrain}),(0,Zn.jsx)("hr",{}),(0,Zn.jsx)(fa,{label:"Denizens",value:e})]}),footerText:"Region",footerContent:t,flipped:this.state.flipped,disabled:this.props.disabled,onClick:this.props.onClick?this.onClick:this.onFlip})},this.state={flipped:!1}}}Cr.defaultProps={disabled:!1,onClick:null};class Ar extends i.Component{constructor(e){super(e),this.onFlip=e=>{e.stopPropagation(),this.setState({flipped:!this.state.flipped})},this.onClick=e=>{e.stopPropagation(),this.state.flipped?this.onFlip(e):this.props.onClick&&this.props.onClick(this.props.role)},this.render=()=>{let e=null;this.props.role.startingFeatures.length>0&&(e=(0,Zn.jsxs)("div",{children:[(0,Zn.jsx)(ra,{type:aa.MinorHeading,children:"Start With"}),this.props.role.startingFeatures.map((e=>(0,Zn.jsx)(ur,{item:J.getFeatureDescription(e)},e.id)))]}));let t=null;this.props.role.features.length>0&&(t=(0,Zn.jsxs)("div",{children:[(0,Zn.jsx)(ra,{type:aa.MinorHeading,children:"Features"}),this.props.role.features.map((e=>(0,Zn.jsx)(ur,{item:J.getFeatureDescription(e)},e.id)))]}));let n=null;this.props.role.actions.length>0&&(n=(0,Zn.jsxs)("div",{children:[(0,Zn.jsx)(ra,{type:aa.MinorHeading,children:"Actions"}),this.props.role.actions.map((e=>(0,Zn.jsx)(ur,{item:Fe.getActionDescription(e)},e.id)))]}));const a=[];return a.push((0,Zn.jsx)("button",{className:"icon-btn",title:"Flip",onClick:this.onFlip,children:(0,Zn.jsx)(zn,{})},"flip")),(0,Zn.jsx)(ha,{type:E.Role,front:(0,Zn.jsx)(fr,{text:this.props.role.name,subtext:this.props.role.description}),back:(0,Zn.jsxs)("div",{className:"role-card-back",children:[e,t,n]}),footerText:"Role",footerContent:a,flipped:this.state.flipped,disabled:this.props.disabled,onClick:this.props.onClick?this.onClick:this.onFlip})},this.state={flipped:!1}}}Ar.defaultProps={disabled:!1,onClick:null};class jr extends i.Component{constructor(e){super(e),this.onFlip=e=>{e.stopPropagation(),this.setState({flipped:!this.state.flipped})},this.onClick=e=>{e.stopPropagation(),this.state.flipped?this.onFlip(e):this.props.onClick&&this.props.onClick(this.props.species)},this.render=()=>{const e=this.props.species.quirks.map(((e,t)=>(0,Zn.jsx)(ka,{children:e},t)));let t=null;1!==this.props.species.size&&(t=(0,Zn.jsxs)("div",{children:[(0,Zn.jsx)(ra,{type:aa.MinorHeading,children:"Size"}),(0,Zn.jsx)(ur,{item:"".concat(this.props.species.size)})]}));let n=null;this.props.species.startingFeatures.length>0&&(n=(0,Zn.jsxs)("div",{children:[(0,Zn.jsx)(ra,{type:aa.MinorHeading,children:"Start With"}),this.props.species.startingFeatures.map((e=>(0,Zn.jsx)(ur,{item:J.getFeatureDescription(e)},e.id)))]}));let a=null;this.props.species.features.length>0&&(a=(0,Zn.jsxs)("div",{children:[(0,Zn.jsx)(ra,{type:aa.MinorHeading,children:"Features"}),this.props.species.features.map((e=>(0,Zn.jsx)(ur,{item:J.getFeatureDescription(e)},e.id)))]}));let r=null;this.props.species.actions.length>0&&(r=(0,Zn.jsxs)("div",{children:[(0,Zn.jsx)(ra,{type:aa.MinorHeading,children:"Actions"}),this.props.species.actions.map((e=>(0,Zn.jsx)(ur,{item:Fe.getActionDescription(e)},e.id)))]}));const s=[];return s.push((0,Zn.jsx)("button",{className:"icon-btn",title:"Flip",onClick:this.onFlip,children:(0,Zn.jsx)(zn,{})},"flip")),(0,Zn.jsx)(ha,{type:E.Species,front:(0,Zn.jsx)(fr,{text:this.props.species.name,subtext:this.props.species.description,content:(0,Zn.jsx)("div",{className:"species-card-front",children:e.length>0?(0,Zn.jsx)("div",{className:"tags",children:e}):null})}),back:(0,Zn.jsxs)("div",{className:"species-card-back",children:[t,n,a,r]}),footerText:this.props.species.type===N.Hero?"Species":"Monster",footerContent:s,flipped:this.state.flipped,disabled:this.props.disabled,onClick:this.props.onClick?this.onClick:this.onFlip})},this.state={flipped:!1}}}jr.defaultProps={disabled:!1,onClick:null};class Dr extends i.Component{constructor(){super(...arguments),this.onClick=()=>{this.props.onRedraw&&this.props.onRedraw(),this.props.onUse&&this.props.onUse()},this.onNudge=e=>{this.props.onChange&&this.props.onChange(this.props.used+e)},this.render=()=>{try{let e=null;return this.props.onRedraw&&(e=(0,Zn.jsx)(ta,{type:$n.Redraw,value:this.props.available,size:ea.Large})),this.props.onUse&&(e=(0,Zn.jsx)(fa,{orientation:"vertical",label:"Uses",value:this.props.available})),this.props.onChange&&(e=(0,Zn.jsxs)("div",{className:"spin",children:[(0,Zn.jsx)(fa,{orientation:"vertical",label:"Available",value:this.props.developer?this.props.available:this.props.available-this.props.used}),(0,Zn.jsxs)("div",{className:"spin-buttons",children:[(0,Zn.jsx)("button",{className:"icon-btn",disabled:0===this.props.used,onClick:()=>this.onNudge(-1),children:(0,Zn.jsx)(Pa,{})}),(0,Zn.jsx)(fa,{orientation:"vertical",label:"Used",value:this.props.used}),(0,Zn.jsx)("button",{className:"icon-btn",disabled:this.props.used===this.props.available&&!this.props.developer,onClick:()=>this.onNudge(1),children:(0,Zn.jsx)(Na,{})})]})]})),(0,Zn.jsx)(ha,{type:E.Structure,front:(0,Zn.jsx)(fr,{content:(0,Zn.jsxs)("div",{className:this.props.developer?"stronghold-benefit-card developer":"stronghold-benefit-card",children:[(0,Zn.jsx)(ra,{type:aa.SubHeading,children:this.props.label}),e]})}),footerText:"Stronghold Benefit",onClick:this.onClick})}catch{return(0,Zn.jsx)("div",{className:"stronghold-benefit-card render-error"})}}}}Dr.defaultProps={used:0,onRedraw:null,onUse:null,onChange:null};class Er extends i.Component{constructor(e){super(e),this.setActions=(e,t,n,a,r,s)=>{this.setState({selected:{name:e,description:t,type:n,starting:a,features:r,actions:s}})},this.clearActions=()=>{this.setState({selected:null})},this.getMarked=(e,t,n,a)=>t<n||t>a||!!e.actions.some((e=>Oe.getActionStrength(e)<1||Oe.getActionStrength(e)>12)),this.getCards=(e,t)=>{switch(e){case"hero species":return qe.getList().filter((e=>e.packID===t)).map((e=>{const t=Oe.getSpeciesStrength(e),n=this.getMarked(e,t,4,6)?"card-btn danger":"card-btn";return(0,Zn.jsx)("button",{className:n,onClick:()=>this.setActions(e.name,e.description,E.Species,e.startingFeatures,e.features,e.actions),children:(0,Zn.jsx)(fa,{label:e.name,value:t})},e.id)}));case"monster species":return $.getList().filter((e=>e.packID===t)).map((e=>{const t=Oe.getSpeciesStrength(e),n=this.getMarked(e,t,4,6)?"card-btn danger":"card-btn";return(0,Zn.jsx)("button",{className:n,onClick:()=>this.setActions(e.name,e.description,E.Species,e.startingFeatures,e.features,e.actions),children:(0,Zn.jsx)(fa,{label:e.name,value:t})},e.id)}));case"roles":return ze.getList().filter((e=>e.packID===t)).map((e=>{const t=Oe.getRoleStrength(e),n=this.getMarked(e,t,4,6)?"card-btn danger":"card-btn";return(0,Zn.jsx)("button",{className:n,onClick:()=>this.setActions(e.name,e.description,E.Species,e.startingFeatures,e.features,e.actions),children:(0,Zn.jsx)(fa,{label:e.name,value:t})},e.id)}));case"backgrounds":return Re.getList().filter((e=>e.packID===t)).map((e=>{const t=Oe.getBackgroundStrength(e),n=this.getMarked(e,t,3,4)?"card-btn danger":"card-btn";return(0,Zn.jsx)("button",{className:n,onClick:()=>this.setActions(e.name,e.description,E.Species,e.startingFeatures,e.features,e.actions),children:(0,Zn.jsx)(fa,{label:e.name,value:t})},e.id)}));case"structures":return f.getList().filter((e=>e.packID===t)).map((e=>(0,Zn.jsx)(ra,{type:aa.Small,children:e.name},e.id)));case"potions":return Te.getList().filter((e=>e.packID===t)).map((e=>(0,Zn.jsx)(ra,{type:aa.Small,children:e.name},e.id)));case"items":return Le.getList().filter((e=>e.packID===t)).map((e=>(0,Zn.jsx)(ra,{type:aa.Small,children:e.name},e.id)))}return null},this.getCardCount=e=>{switch(e){case"hero species":return qe.getList().length;case"monster species":return $.getList().length;case"roles":return ze.getList().length;case"backgrounds":return Re.getList().length;case"structures":return f.getList().length;case"potions":return Te.getList().length;case"items":return Le.getList().length}return 0},this.render=()=>{try{const e=["hero species","monster species","roles","backgrounds","structures","potions","items"],t=[""].concat(p.getList().map((e=>e.id))),n=e.map((e=>(0,Zn.jsxs)("div",{children:[(0,Zn.jsxs)(ra,{type:aa.SubHeading,children:[e," (",this.getCardCount(e),")"]}),(0,Zn.jsx)("div",{className:"row",children:t.map((t=>(0,Zn.jsx)("div",{className:"cell",children:this.getCards(e,t)},t)))})]},e)));let a=null;if(this.state.selected){const e=this.state.selected.name,t=this.state.selected.type,n=this.state.selected.starting.map((n=>{const a=Oe.getFeatureStrength(n);return(0,Zn.jsx)(sa,{value:a,children:(0,Zn.jsx)(kr,{feature:n,footer:e,footerType:t})},n.id)})),r=this.state.selected.features.map((n=>{const a=Oe.getFeatureStrength(n);return(0,Zn.jsx)(sa,{value:a,children:(0,Zn.jsx)(kr,{feature:n,footer:e,footerType:t})},n.id)})),s=this.state.selected.actions.map((n=>{const a=Oe.getActionStrength(n);return(0,Zn.jsx)(sa,{value:a,children:(0,Zn.jsx)(xa,{action:n,developer:!0,footer:e,footerType:t})},n.id)})),i=(0,Zn.jsxs)("div",{children:[(0,Zn.jsx)(ra,{type:aa.Heading,children:this.state.selected.name}),(0,Zn.jsx)("hr",{}),(0,Zn.jsx)(ra,{children:(0,Zn.jsx)("p",{style:{textAlign:"center"},children:this.state.selected.description})}),n.length>0?(0,Zn.jsx)("hr",{}):null,n.length>0?(0,Zn.jsx)(ra,{type:aa.SubHeading,children:"Starting Cards"}):null,n.length>0?(0,Zn.jsx)(oa,{cards:n}):null,r.length>0?(0,Zn.jsx)("hr",{}):null,r.length>0?(0,Zn.jsx)(ra,{type:aa.SubHeading,children:"Feature Cards"}):null,r.length>0?(0,Zn.jsx)(oa,{cards:r}):null,s.length>0?(0,Zn.jsx)("hr",{}):null,s.length>0?(0,Zn.jsx)(ra,{type:aa.SubHeading,children:"Action Cards"}):null,s.length>0?(0,Zn.jsx)(oa,{cards:s}):null]});a=(0,Zn.jsx)(ua,{content:i,onClose:this.clearActions})}return(0,Zn.jsxs)("div",{className:"card-page",children:[(0,Zn.jsx)("div",{className:"card-grid-header",children:(0,Zn.jsx)("div",{className:"row",children:t.map((e=>{const t=Oe.getPack(e),n=t?t.name:"Skirmish";return(0,Zn.jsx)("div",{className:"cell column-heading",children:n},e)}))})}),(0,Zn.jsx)("div",{className:"card-grid-content",children:n}),a]})}catch{return(0,Zn.jsx)("div",{className:"card-page render-error"})}},this.state={selected:null}}}class Ir extends i.Component{constructor(){super(...arguments),this.checkDamage=(e,t)=>{const n=t.filter((e=>"damage"===e.id)).some((t=>{const n=t.data;return e===n.type}));return!!n||t.some((t=>this.checkDamage(e,t.children)))},this.render=()=>{try{const e=[{category:y.Physical,types:[w.Edged,w.Impact,w.Piercing]},{category:y.Energy,types:[w.Cold,w.Electricity,w.Fire,w.Light,w.Sonic]},{category:y.Corruption,types:[w.Acid,w.Decay,w.Poison,w.Psychic]}],t=Oe.getAllActions(p.getList().map((e=>e.id)));return(0,Zn.jsx)("div",{className:"damage-page",children:e.map((e=>(0,Zn.jsxs)("div",{className:"damage-category",children:[(0,Zn.jsx)(ra,{type:aa.SubHeading,children:e.category}),(0,Zn.jsx)("div",{children:e.types.map((e=>(0,Zn.jsxs)("div",{className:"damage-type",children:[(0,Zn.jsx)(ra,{type:aa.MinorHeading,children:e}),(0,Zn.jsx)("div",{className:"damage-actions",children:t.filter((t=>this.checkDamage(e,t.effects))).sort(((e,t)=>e.name.localeCompare(t.name))).map((e=>(0,Zn.jsx)(ra,{type:aa.Small,children:e.name},e.id)))})]},e)))})]},e.category)))})}catch{return(0,Zn.jsx)("div",{className:"damage-page render-error"})}}}}class Nr extends i.Component{constructor(e){super(e),this.list=[],this.addToList=e=>{e.forEach((e=>{let t=this.list.find((t=>t.effectID===e.id));t||(t={effectID:e.id,effects:[]},this.list.push(t));const n=Be.getDescription(e,null,null);let a=t.effects.find((e=>e.desc===n));a||(a={desc:n,count:0},t.effects.push(a)),a.count+=1,this.addToList(e.children)}))},this.render=()=>{try{const e=this.list.find((e=>e.effectID===this.state.selectedEffectID));return(0,Zn.jsxs)("div",{className:"effect-page",children:[(0,Zn.jsx)("div",{className:"effect-type-column",children:this.list.map((t=>(0,Zn.jsx)("button",{className:(null===e||void 0===e?void 0:e.effectID)===t.effectID?"selected":"",onClick:()=>this.setState({selectedEffectID:t.effectID}),children:(0,Zn.jsx)(fa,{label:t.effectID,value:d.sum(t.effects,(e=>e.count))})},t.effectID)))}),(0,Zn.jsx)("div",{className:"effect-list-column",children:null===e||void 0===e?void 0:e.effects.map(((e,t)=>(0,Zn.jsx)(fa,{label:e.desc,value:e.count},t)))})]})}catch{return(0,Zn.jsx)("div",{className:"effect-page render-error"})}};const t=Oe.getAllActions(p.getList().map((e=>e.id)));t.forEach((e=>this.addToList(e.effects))),this.list.forEach((e=>e.effects.sort(((e,t)=>e.desc.localeCompare(t.desc))))),this.list.sort(((e,t)=>d.sum(t.effects,(e=>e.count))-d.sum(e.effects,(e=>e.count)))),this.state={selectedEffectID:this.list[0].effectID}}}class Pr extends i.Component{constructor(e){super(e),this.render=()=>{try{const e=[{id:"cards",display:"Cards"},{id:"damage",display:"Damage"},{id:"effects",display:"Effects"}];let t=null;switch(this.state.view){case"cards":t=(0,Zn.jsx)(Er,{options:this.props.options});break;case"damage":t=(0,Zn.jsx)(Ir,{options:this.props.options});break;case"effects":t=(0,Zn.jsx)(Nr,{options:this.props.options})}return(0,Zn.jsxs)("div",{className:"backstage-screen",children:[(0,Zn.jsxs)("div",{className:"backstage-top-bar",children:[(0,Zn.jsx)("div",{className:"branding",children:(0,Zn.jsx)(dr,{text:"Skirmish - Backstage",size:36})}),(0,Zn.jsx)("div",{className:"buttons",children:(0,Zn.jsx)("button",{className:"icon-btn checked",title:"Backstage",onClick:this.props.toggleBackstage,children:(0,Zn.jsx)(Tn,{})})})]}),(0,Zn.jsx)(va,{options:e,selectedID:this.state.view,onSelect:e=>this.setState({view:e})}),(0,Zn.jsx)("div",{className:"backstage-content",children:t})]})}catch{return(0,Zn.jsx)("div",{className:"backstage-screen render-error"})}},this.state={view:"cards"}}}var Mr=Fn("outline","cards","IconCards",[["path",{d:"M3.604 7.197l7.138 -3.109a.96 .96 0 0 1 1.27 .527l4.924 11.902a1 1 0 0 1 -.514 1.304l-7.137 3.109a.96 .96 0 0 1 -1.271 -.527l-4.924 -11.903a1 1 0 0 1 .514 -1.304z",key:"svg-0"}],["path",{d:"M15 4h1a1 1 0 0 1 1 1v3.5",key:"svg-1"}],["path",{d:"M20 6c.264 .112 .52 .217 .768 .315a1 1 0 0 1 .53 1.311l-2.298 5.374",key:"svg-2"}]]),Br=Fn("filled","help-circle-filled","IconHelpCircleFilled",[["path",{d:"M12 2c5.523 0 10 4.477 10 10a10 10 0 0 1 -19.995 .324l-.005 -.324l.004 -.28c.148 -5.393 4.566 -9.72 9.996 -9.72zm0 13a1 1 0 0 0 -.993 .883l-.007 .117l.007 .127a1 1 0 0 0 1.986 0l.007 -.117l-.007 -.127a1 1 0 0 0 -.993 -.883zm1.368 -6.673a2.98 2.98 0 0 0 -3.631 .728a1 1 0 0 0 1.44 1.383l.171 -.18a.98 .98 0 0 1 1.11 -.15a1 1 0 0 1 -.34 1.886l-.232 .012a1 1 0 0 0 .111 1.994a3 3 0 0 0 1.371 -5.673z",key:"svg-0"}]]),Fr=Fn("outline","help-circle","IconHelpCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 16v.01",key:"svg-1"}],["path",{d:"M12 13a2 2 0 0 0 .914 -3.782a1.98 1.98 0 0 0 -2.414 .483",key:"svg-2"}]]);class Tr extends i.Component{constructor(e){super(e),this.getItems=()=>{const e=Oe.getItemDeck(this.props.options.packIDs).filter((e=>e.proficiency===this.state.proficiency||this.state.proficiency===v.Any)).filter((e=>e.location===this.state.location||this.state.location===b.Any));return d.sort(e,(e=>e.name))},this.render=()=>{try{const e=this.getItems().map((e=>(0,Zn.jsx)(yr,{item:e,onClick:this.props.buyItem},e.id)));return(0,Zn.jsxs)("div",{className:"buy-equipment-modal",children:[(0,Zn.jsx)(ra,{type:aa.Heading,children:"Buy Equipment"}),(0,Zn.jsx)("hr",{}),(0,Zn.jsxs)("div",{className:"card-selection-row",children:[(0,Zn.jsx)(ra,{type:aa.SubHeading,children:"Filter by proficiency"}),(0,Zn.jsx)(ma,{options:[{id:v.Any,display:"Any proficiency"},{id:v.None,display:"No proficiency"},{id:v.MilitaryWeapons},{id:v.LargeWeapons},{id:v.PairedWeapons},{id:v.RangedWeapons},{id:v.PowderWeapons},{id:v.Implements},{id:v.LightArmor},{id:v.HeavyArmor},{id:v.Shields}],columnCount:4,selectedID:this.state.proficiency,onSelect:e=>this.setState({proficiency:e})}),(0,Zn.jsx)(ra,{type:aa.SubHeading,children:"Filter by location"}),(0,Zn.jsx)(ma,{options:[{id:b.Any,display:"Any location"},{id:b.Head},{id:b.Neck},{id:b.Body},{id:b.Feet},{id:b.Hand},{id:b.Ring}],selectedID:this.state.location,onSelect:e=>this.setState({location:e})}),(0,Zn.jsx)("hr",{}),(0,Zn.jsx)(oa,{cards:e})]})]})}catch{return(0,Zn.jsx)("div",{className:"buy-equipment-modal render-error"})}},this.state={proficiency:v.Any,location:b.Any}}}class Rr extends i.Component{constructor(e){super(e),this.getItems=()=>{const e=[];let t=0;for(;e.length<3&&t<1e3;){const n=H.generateRandomMagicItem(this.props.options.packIDs,Math.random);let a=!0;if(this.props.game.heroes.length>0){const e=this.props.game.heroes.filter((e=>n.proficiency===v.None||X.getProficiencies(e).includes(n.proficiency)));0===e.length&&(a=!1)}n.weapon&&e.filter((e=>e.weapon)).length>0&&(a=!1),n.armor&&e.filter((e=>e.armor)).length>0&&(a=!1),a?e.push(n):t+=1}return d.sort(e,(e=>e.name))},this.redraw=()=>{this.setState({magicItems:this.getItems()},(()=>{this.props.options.developer||this.props.useCharge(h.WizardTower,1)}))},this.render=()=>{try{const e=this.state.magicItems.map((e=>(0,Zn.jsx)(yr,{item:e,onClick:this.props.buyItem},e.id))),t=V.getStructureCharges(this.props.game,h.WizardTower);return(0,Zn.jsxs)("div",{className:"buy-magic-item-modal",children:[(0,Zn.jsx)(ra,{type:aa.Heading,children:"Choose a Magic Item"}),(0,Zn.jsx)("hr",{}),(0,Zn.jsx)(ra,{type:aa.Information,children:(0,Zn.jsx)("p",{children:"Three magic items have been drawn for you. Choose one card to buy that item."})}),(0,Zn.jsxs)("div",{className:"card-selection-row",children:[(0,Zn.jsx)(oa,{cards:e}),t>0||this.props.options.developer?(0,Zn.jsxs)("button",{className:this.props.options.developer?"developer":"",onClick:()=>this.redraw(),children:["Redraw Magic Item Cards",(0,Zn.jsx)("br",{}),(0,Zn.jsx)(ta,{type:$n.Redraw,value:t,size:ea.Button})]}):null]})]})}catch{return(0,Zn.jsx)("div",{className:"buy-magic-item-modal render-error"})}},this.state={magicItems:this.getItems()}}}class qr extends i.Component{constructor(e){super(e),this.getItems=()=>{const e=[];for(;e.length<3;){const t=Oe.getPotionDeck(this.props.options.packIDs),n=d.draw(t);e.map((e=>e.name)).includes(n.name)||(n.id=D.guid(),e.push(n))}return d.sort(e,(e=>e.name))},this.redraw=()=>{this.setState({potions:this.getItems()},(()=>{this.props.options.developer||this.props.useCharge(h.WizardTower,1)}))},this.render=()=>{try{const e=this.state.potions.map((e=>(0,Zn.jsx)(yr,{item:e,onClick:this.props.buyItem},e.id))),t=V.getStructureCharges(this.props.game,h.WizardTower);return(0,Zn.jsxs)("div",{className:"buy-potion-modal",children:[(0,Zn.jsx)(ra,{type:aa.Heading,children:"Choose a Potion"}),(0,Zn.jsx)("hr",{}),(0,Zn.jsx)(ra,{type:aa.Information,children:(0,Zn.jsx)("p",{children:"Three potion cards have been drawn for you. Choose one card to buy that potion."})}),(0,Zn.jsxs)("div",{className:"card-selection-row",children:[(0,Zn.jsx)(oa,{cards:e}),t>0||this.props.options.developer?(0,Zn.jsxs)("button",{className:this.props.options.developer?"developer":"",onClick:()=>this.redraw(),children:["Redraw Potion Cards",(0,Zn.jsx)("br",{}),(0,Zn.jsx)(ta,{type:$n.Redraw,value:t,size:ea.Button})]}):null]})]})}catch{return(0,Zn.jsx)("div",{className:"buy-potion-modal render-error"})}},this.state={potions:this.getItems()}}}var Lr=Fn("filled","square-filled","IconSquareFilled",[["path",{d:"M19 2h-14a3 3 0 0 0 -3 3v14a3 3 0 0 0 3 3h14a3 3 0 0 0 3 -3v-14a3 3 0 0 0 -3 -3z",key:"svg-0"}]]),zr=Fn("outline","square","IconSquare",[["path",{d:"M3 3m0 2a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z",key:"svg-0"}]]);class Or extends i.Component{constructor(e){var t;super(e),t=this,this.getLocationSlots=e=>{let t=1;switch(e){case b.Hand:case b.Ring:t=2}const n=[];for(this.props.combatant.items.filter((t=>e===t.location)).forEach((e=>{for(let t=0;t<e.slots;++t)n.push((0,Zn.jsx)(Lr,{},"".concat(e.id," ").concat(t)))}));n.length<t;)n.push((0,Zn.jsx)(zr,{},n.length));return(0,Zn.jsx)(fa,{label:"".concat(e).concat(t>1?"s":""),value:(0,Zn.jsx)("div",{className:"slot-icons",children:n})})},this.getLocationSection=()=>{let e=1;switch(this.state.view){case b.Hand:case b.Ring:e=2}const t=this.props.combatant.items.filter((e=>this.state.view===e.location)),n=d.sum(t,(e=>e.slots)),a=t.map((e=>this.getItemCard(e,"equipped"))),r=e-n;for(let s=0;s<r;++s)a.push((0,Zn.jsxs)("div",{className:"item",children:[(0,Zn.jsx)(ha,{front:(0,Zn.jsx)(fr,{subtext:"No item"})}),(0,Zn.jsx)("div",{className:"item-options"})]},"empty ".concat(s)));return 0===a.length&&a.push((0,Zn.jsxs)("div",{className:"item",children:[(0,Zn.jsx)(ha,{front:(0,Zn.jsx)(fr,{subtext:"No item"})}),(0,Zn.jsx)("div",{className:"item-options"})]},"empty")),(0,Zn.jsxs)("div",{className:"location-section",children:[(0,Zn.jsx)("div",{className:"location-sidebar",children:(0,Zn.jsx)(ma,{options:[b.Hand,b.Body,b.Head,b.Feet,b.Neck,b.Ring].map((e=>({id:e,display:this.getLocationSlots(e)}))),selectedID:this.state.view,columnCount:1,onSelect:e=>this.setState({view:e})})}),(0,Zn.jsx)("div",{className:"location-details",children:(0,Zn.jsx)(oa,{cards:a})})]})},this.getCarriedItemSection=()=>{if(0===this.props.combatant.carried.length)return(0,Zn.jsx)(ra,{type:aa.Empty,children:"No carried items"});const e=this.props.combatant.carried.sort(((e,t)=>e.name.localeCompare(t.name))).map((e=>this.getItemCard(e,"carried")));return(0,Zn.jsx)(oa,{cards:e})},this.getPartyItemSection=()=>{if(null!==this.props.game.encounter)return null;if(this.props.combatant.faction!==N.Hero)return null;if(0===this.props.game.items.length)return null;const e=d.distinct(this.props.game.items,(e=>e.name)).sort(((e,t)=>e.name.localeCompare(t.name))).map((e=>this.getItemCard(e,"party",this.props.game.items.filter((t=>t.name===e.name)).length)));return(0,Zn.jsx)(oa,{cards:e})},this.getNearbyItemSection=()=>{if(null===this.props.game.encounter)return null;if(!this.props.combatant.combat.current)return null;if(this.props.combatant.faction!==N.Hero)return null;const e=se.getAdjacentSquares(this.props.game.encounter.mapSquares,[this.props.combatant.combat.position]),t=this.props.game.encounter.loot.filter((t=>e.find((e=>e.x===t.position.x&&e.y===t.position.y)))),n=d.sort(d.distinct(t.flatMap((e=>e.items)),(e=>e.name)),(e=>e.name));if(0===n.length)return null;const a=n.map((e=>this.getItemCard(e,"nearby")));return(0,Zn.jsx)(oa,{cards:a})},this.getItemCard=function(e,n){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=null;if(t.props.combatant.type===N.Hero&&t.props.combatant.faction===N.Hero)if(t.props.game.encounter&&!t.props.combatant.combat.current);else if(t.props.game.encounter&&t.props.combatant.combat.stunned);else{let a=null;if("carried"===n||"party"===n){let n="Equip";t.props.game.encounter&&(n=(0,Zn.jsxs)("div",{children:["Equip",(0,Zn.jsx)("br",{}),(0,Zn.jsx)(ta,{type:$n.Movement,value:1,size:ea.Button})]})),a=(0,Zn.jsx)("button",{disabled:!X.canEquip(t.props.combatant,e),onClick:()=>t.props.equipItem(e),children:n})}let s=null;if("equipped"===n){let n="Carry";t.props.game.encounter&&(n=(0,Zn.jsxs)("div",{children:["Carry",(0,Zn.jsx)("br",{}),(0,Zn.jsx)(ta,{type:$n.Movement,value:1,size:ea.Button})]})),s=(0,Zn.jsx)("button",{disabled:t.props.combatant.carried.length>=X.CARRY_CAPACITY,onClick:()=>t.props.unequipItem(e),children:n})}let i=null;if("party"===n||"nearby"===n){let n="Pick Up";t.props.game.encounter&&(n=(0,Zn.jsxs)("div",{children:["Pick Up",(0,Zn.jsx)("br",{}),(0,Zn.jsx)(ta,{type:$n.Movement,value:1,size:ea.Button})]})),i=(0,Zn.jsx)("button",{disabled:t.props.combatant.carried.length>=X.CARRY_CAPACITY,onClick:()=>t.props.pickUpItem(e),children:n})}let o=null;if("equipped"===n||"carried"===n){let n="Drop";t.props.game.encounter&&(n=(0,Zn.jsxs)("div",{children:["Drop",(0,Zn.jsx)("br",{}),(0,Zn.jsx)(ta,{type:$n.Movement,value:0,size:ea.Button})]})),o=(0,Zn.jsx)("button",{onClick:()=>t.props.dropItem(e),children:n})}r=(0,Zn.jsxs)("div",{className:"item-options",children:[a,s,i,o]})}return(0,Zn.jsxs)("div",{className:"item",children:[(0,Zn.jsx)(yr,{item:e,count:a}),r]},e.id)},this.render=()=>{try{let e=this.state.view.toString();switch(this.state.view){case b.Hand:case b.Ring:e+="s (2 slots)"}const t=this.getCarriedItemSection(),n=this.getPartyItemSection(),a=this.getNearbyItemSection();return(0,Zn.jsxs)("div",{className:"items",children:[(0,Zn.jsxs)(ra,{type:aa.SubHeading,children:["Equipped Items - ",e]}),this.getLocationSection(),null!==t?(0,Zn.jsx)("hr",{}):null,null!==t?(0,Zn.jsxs)(ra,{type:aa.SubHeading,children:["Carried Items (",this.props.combatant.carried.length," of ",X.CARRY_CAPACITY,")"]}):null,t,null!==n?(0,Zn.jsx)("hr",{}):null,null!==n?(0,Zn.jsx)(ra,{type:aa.SubHeading,children:"Party Items"}):null,n,null!==a?(0,Zn.jsx)("hr",{}):null,null!==a?(0,Zn.jsx)(ra,{type:aa.SubHeading,children:"Nearby Items"}):null,a]})}catch{return(0,Zn.jsx)("div",{className:"items render-error"})}},this.state={view:b.Hand}}}class Hr extends i.Component{constructor(e){super(e),this.selectTrait=e=>{const t=this.state.feature;t.trait=e,this.setState({feature:t},(()=>{this.props.onSelect(this.state.feature)}))},this.selectSkill=e=>{const t=this.state.feature;t.skill=e,this.setState({feature:t},(()=>{this.props.onSelect(this.state.feature)}))},this.selectSkillCategory=e=>{const t=this.state.feature;t.skillCategory=e,this.setState({feature:t},(()=>{this.props.onSelect(this.state.feature)}))},this.selectProficiency=e=>{const t=this.state.feature;t.proficiency=e,this.setState({feature:t},(()=>{this.props.onSelect(this.state.feature)}))},this.selectDamage=e=>{const t=this.state.feature;t.damage=e,this.setState({feature:t},(()=>{this.props.onSelect(this.state.feature)}))},this.selectDamageCategoryType=e=>{const t=this.state.feature;t.damageCategory=e,this.setState({feature:t},(()=>{this.props.onSelect(this.state.feature)}))},this.getTrait=(e,t)=>{const n=X.getTraitRank(this.props.hero,[],e);return(0,Zn.jsxs)("div",{children:[(0,Zn.jsx)("div",{children:e}),(0,Zn.jsxs)("div",{className:"rank-info",children:[n," => ",n+t]})]})},this.getSkill=(e,t)=>{const n=X.getSkillRank(this.props.hero,[],e);return(0,Zn.jsxs)("div",{children:[(0,Zn.jsx)("div",{children:e}),(0,Zn.jsxs)("div",{className:"rank-info",children:[n," => ",n+t]})]})},this.render=()=>{let e=null;switch(this.state.feature.type){case j.Trait:e=(0,Zn.jsx)(ma,{options:[{id:x.Endurance,display:this.getTrait(x.Endurance,this.state.feature.rank)},{id:x.Resolve,display:this.getTrait(x.Resolve,this.state.feature.rank)},{id:x.Speed,display:this.getTrait(x.Speed,this.state.feature.rank)}],selectedID:this.state.feature.trait,onSelect:e=>this.selectTrait(e)});break;case j.Skill:e=(0,Zn.jsx)(ma,{options:[{id:C.Brawl,display:this.getSkill(C.Brawl,this.state.feature.rank)},{id:C.Perception,display:this.getSkill(C.Perception,this.state.feature.rank)},{id:C.Presence,display:this.getSkill(C.Presence,this.state.feature.rank)},{id:C.Reactions,display:this.getSkill(C.Reactions,this.state.feature.rank)},{id:C.Spellcasting,display:this.getSkill(C.Spellcasting,this.state.feature.rank)},{id:C.Stealth,display:this.getSkill(C.Stealth,this.state.feature.rank)},{id:C.Weapon,display:this.getSkill(C.Weapon,this.state.feature.rank)}],columnCount:3,selectedID:this.state.feature.skill,onSelect:e=>this.selectSkill(e)});break;case j.SkillCategory:e=(0,Zn.jsx)(ma,{options:[{id:k.Physical},{id:k.Mental}],selectedID:this.state.feature.skillCategory,onSelect:e=>this.selectSkillCategory(e)});break;case j.Proficiency:e=(0,Zn.jsx)(ma,{options:[{id:v.MilitaryWeapons},{id:v.LargeWeapons},{id:v.PairedWeapons},{id:v.RangedWeapons},{id:v.PowderWeapons},{id:v.Implements},{id:v.LightArmor},{id:v.HeavyArmor},{id:v.Shields}].filter((e=>!X.getProficiencies(this.props.hero).includes(e.id))),columnCount:3,selectedID:this.state.feature.proficiency,onSelect:e=>this.selectProficiency(e)});break;case j.DamageBonus:case j.DamageResist:e=(0,Zn.jsx)(ma,{options:[{id:w.Acid,display:(0,Zn.jsx)(ta,{type:w.Acid,value:"Acid"})},{id:w.Edged,display:(0,Zn.jsx)(ta,{type:w.Edged,value:"Edged"})},{id:w.Impact,display:(0,Zn.jsx)(ta,{type:w.Impact,value:"Impact"})},{id:w.Piercing,display:(0,Zn.jsx)(ta,{type:w.Piercing,value:"Piercing"})},{id:w.Cold,display:(0,Zn.jsx)(ta,{type:w.Cold,value:"Cold"})},{id:w.Electricity,display:(0,Zn.jsx)(ta,{type:w.Electricity,value:"Electricity"})},{id:w.Fire,display:(0,Zn.jsx)(ta,{type:w.Fire,value:"Fire"})},{id:w.Light,display:(0,Zn.jsx)(ta,{type:w.Light,value:"Light"})},{id:w.Sonic,display:(0,Zn.jsx)(ta,{type:w.Sonic,value:"Sonic"})},{id:w.Decay,display:(0,Zn.jsx)(ta,{type:w.Decay,value:"Decay"})},{id:w.Poison,display:(0,Zn.jsx)(ta,{type:w.Poison,value:"Poison"})},{id:w.Psychic,display:(0,Zn.jsx)(ta,{type:w.Psychic,value:"Psychic"})}],columnCount:3,selectedID:this.state.feature.damage,onSelect:e=>this.selectDamage(e)});break;case j.DamageCategoryBonus:case j.DamageCategoryResist:e=(0,Zn.jsx)(ma,{options:[{id:y.Physical},{id:y.Energy},{id:y.Corruption}],selectedID:this.state.feature.damageCategory,onSelect:e=>this.selectDamageCategoryType(e)})}return(0,Zn.jsxs)("div",{className:"choice-page",children:[(0,Zn.jsx)(ra,{type:aa.MinorHeading,children:"Choose one:"}),e,(0,Zn.jsx)("button",{onClick:()=>this.props.onSelect(null),children:"Choose Again"})]})};const t=JSON.parse(JSON.stringify(e.feature));this.state={feature:t}}}class _r extends i.Component{constructor(e){super(e),this.setSelectedFeature=e=>{this.setState({selectedFeature:e},(()=>{e&&!J.hasChoice(e)&&this.setState({selectedFeature:null},(()=>{this.props.levelUp(e)}))}))},this.render=()=>{try{let e=null;if(this.state.selectedFeature)e=(0,Zn.jsxs)("div",{className:"feature-detail-selection",children:[(0,Zn.jsx)("div",{className:"selected-feature",children:(0,Zn.jsx)(kr,{feature:this.state.selectedFeature,combatant:this.props.combatant,footer:X.getFeatureSource(this.props.combatant,this.state.selectedFeature.id)||"Feature",footerType:X.getFeatureSourceType(this.props.combatant,this.state.selectedFeature.id)},this.state.selectedFeature.id)}),(0,Zn.jsx)("div",{className:"level-up-additional",children:(0,Zn.jsx)(Hr,{feature:this.state.selectedFeature,hero:this.props.combatant,onSelect:this.setSelectedFeature})})]});else{const t=this.props.features.map((e=>(0,Zn.jsx)(kr,{feature:e,combatant:this.props.combatant,footer:X.getFeatureSource(this.props.combatant,e.id)||"Feature",footerType:X.getFeatureSourceType(this.props.combatant,e.id),onClick:this.setSelectedFeature},e.id)));e=(0,Zn.jsx)(oa,{cards:t})}const t=V.getStructureCharges(this.props.game,h.TrainingGround);return(0,Zn.jsxs)("div",{className:"level-up",children:[(0,Zn.jsxs)(ra,{type:aa.SubHeading,children:["Choose a feature for level ",this.props.level]}),e,t>0||this.props.developer?(0,Zn.jsxs)("button",{className:this.props.developer?"developer":"",onClick:()=>this.props.redrawFeatures(!this.props.developer),children:["Redraw Feature Cards",(0,Zn.jsx)("br",{}),(0,Zn.jsx)(ta,{type:$n.Redraw,value:t,size:ea.Button})]}):null]})}catch{return(0,Zn.jsx)("div",{className:"level-up render-error"})}},this.state={selectedFeature:null}}}class Ur extends i.Component{constructor(){super(...arguments),this.render=()=>{const e=[...[w.Acid,w.Cold,w.Decay,w.Edged,w.Electricity,w.Fire,w.Impact,w.Light,w.Piercing,w.Poison,w.Psychic,w.Sonic].map((e=>({type:e,value:this.props.getValue(e)})))];if(e.every((e=>0===e.value)))return(0,Zn.jsx)(ia,{label:this.props.label,children:(0,Zn.jsx)(ra,{type:aa.Dimmed,children:"None"})});if(d.min(e,(e=>e.value))===d.max(e,(e=>e.value)))return(0,Zn.jsx)(ia,{label:this.props.label,children:(0,Zn.jsx)(fa,{label:"All damage types",value:e[0].value})});const t=[w.Edged,w.Impact,w.Piercing],n=[...t.map((e=>({type:e,value:this.props.getValue(e)})))];let a=null;a=n.every((e=>0===e.value))?(0,Zn.jsx)(fa,{label:"Physical damage",value:0}):d.min(n,(e=>e.value))===d.max(n,(e=>e.value))?(0,Zn.jsx)(fa,{label:"Physical damage",value:n[0].value}):(0,Zn.jsx)("div",{children:t.map((t=>{var n;return(0,Zn.jsx)(fa,{label:"Physical: "+t,value:(null===(n=e.find((e=>e.type===t)))||void 0===n?void 0:n.value)||0},t)}))});const r=[w.Cold,w.Electricity,w.Fire,w.Light,w.Sonic],s=[...r.map((e=>({type:e,value:this.props.getValue(e)})))];let i=null;i=s.every((e=>0===e.value))?(0,Zn.jsx)(fa,{label:"Energy damage",value:0}):d.min(s,(e=>e.value))===d.max(s,(e=>e.value))?(0,Zn.jsx)(fa,{label:"Energy damage",value:s[0].value}):(0,Zn.jsx)("div",{children:r.map((t=>{var n;return(0,Zn.jsx)(fa,{label:"Energy: "+t,value:(null===(n=e.find((e=>e.type===t)))||void 0===n?void 0:n.value)||0},t)}))});const o=[w.Acid,w.Decay,w.Poison,w.Psychic],l=[...o.map((e=>({type:e,value:this.props.getValue(e)})))];let c=null;return c=l.every((e=>0===e.value))?(0,Zn.jsx)(fa,{label:"Corruption damage",value:0}):d.min(l,(e=>e.value))===d.max(l,(e=>e.value))?(0,Zn.jsx)(fa,{label:"Corruption damage",value:l[0].value}):(0,Zn.jsx)("div",{children:o.map((t=>{var n;return(0,Zn.jsx)(fa,{label:"Corruption: "+t,value:(null===(n=e.find((e=>e.type===t)))||void 0===n?void 0:n.value)||0},t)}))}),(0,Zn.jsxs)(ia,{label:this.props.label,children:[a,(0,Zn.jsx)("hr",{}),i,(0,Zn.jsx)("hr",{}),c]})}}}class Wr extends i.Component{constructor(){super(...arguments),this.getTraitRank=e=>this.props.encounter?Ce.getTraitRank(this.props.encounter,this.props.combatant,e):X.getTraitRank(this.props.combatant,[],e),this.getSkillRank=e=>this.props.encounter?Ce.getSkillRank(this.props.encounter,this.props.combatant,e):X.getSkillRank(this.props.combatant,[],e),this.getDamageBonusValue=e=>this.props.encounter?Ce.getDamageBonus(this.props.encounter,this.props.combatant,e):X.getDamageBonus(this.props.combatant,[],e),this.getDamageResistanceValue=e=>this.props.encounter?Ce.getDamageResistance(this.props.encounter,this.props.combatant,e):X.getDamageResistance(this.props.combatant,[],e),this.getTraitsSection=()=>(0,Zn.jsx)(ia,{label:"Traits",children:(0,Zn.jsxs)("div",{className:"stats-row",children:[(0,Zn.jsx)(fa,{orientation:"vertical",label:"Endurance",value:this.getTraitRank(x.Endurance)}),(0,Zn.jsx)(fa,{orientation:"vertical",label:"Resolve",value:this.getTraitRank(x.Resolve)}),(0,Zn.jsx)(fa,{orientation:"vertical",label:"Speed",value:this.getTraitRank(x.Speed)})]})}),this.getSkillsSection=()=>(0,Zn.jsxs)(ia,{label:"Skills",children:[(0,Zn.jsx)(fa,{label:"Brawl",value:this.getSkillRank(C.Brawl)}),(0,Zn.jsx)(fa,{label:"Perception",value:this.getSkillRank(C.Perception)}),(0,Zn.jsx)(fa,{label:"Presence",value:this.getSkillRank(C.Presence)}),(0,Zn.jsx)(fa,{label:"Reactions",value:this.getSkillRank(C.Reactions)}),(0,Zn.jsx)(fa,{label:"Spellcasting",value:this.getSkillRank(C.Spellcasting)}),(0,Zn.jsx)(fa,{label:"Stealth",value:this.getSkillRank(C.Stealth)}),(0,Zn.jsx)(fa,{label:"Weapon",value:this.getSkillRank(C.Weapon)})]}),this.getProficienciesSection=()=>{let e=(0,Zn.jsx)(ia,{label:"Proficiencies",children:(0,Zn.jsx)(ra,{type:aa.Dimmed,children:"None"})});const t=X.getProficiencies(this.props.combatant);return t.length>0&&(e=(0,Zn.jsx)(ia,{label:"Proficiencies",children:t.map(((e,t)=>(0,Zn.jsx)(ka,{children:e},t)))})),e},this.getAurasSection=()=>{let e=(0,Zn.jsx)(ia,{label:"Auras",children:(0,Zn.jsx)(ra,{type:aa.Dimmed,children:"None"})});const t=X.getAuras(this.props.combatant);return t.length>0&&(e=(0,Zn.jsx)(ia,{label:"Auras",children:t.map((e=>{const t=G.getConditionIsBeneficial(e)?"allies":"enemies",n="".concat(G.getConditionDescription(e)," (affects ").concat(t,")");return(0,Zn.jsx)(fa,{label:n,value:e.rank},e.id)}))})),e},this.getXPSection=()=>(0,Zn.jsx)(ia,{label:"XP",children:(0,Zn.jsx)("div",{className:"xp-gauge",children:(0,Zn.jsx)(pa,{progress:this.props.combatant.xp/this.props.combatant.level,content:(0,Zn.jsxs)("div",{children:[(0,Zn.jsxs)("b",{children:[this.props.combatant.xp," XP"]})," / ",this.props.combatant.level]})})})}),this.render=()=>{try{let e=null;return this.props.encounter&&(e=(0,Zn.jsx)("div",{className:"row combat",children:(0,Zn.jsxs)("div",{className:"column",children:[(0,Zn.jsx)("hr",{}),(0,Zn.jsx)(Ba,{combatant:this.props.combatant,encounter:this.props.encounter})]})})),(0,Zn.jsxs)("div",{className:"stats",children:[(0,Zn.jsxs)("div",{className:"row",children:[(0,Zn.jsxs)("div",{className:"column",children:[this.getTraitsSection(),this.getSkillsSection()]}),(0,Zn.jsxs)("div",{className:"column",children:[(0,Zn.jsx)(Ur,{label:"Damage Bonuses",getValue:this.getDamageBonusValue}),(0,Zn.jsx)(Ur,{label:"Damage Resistances",getValue:this.getDamageResistanceValue})]}),(0,Zn.jsxs)("div",{className:"column",children:[this.props.combatant.type===N.Hero&&this.props.combatant.faction===N.Hero?this.getXPSection():null,this.getProficienciesSection(),this.getAurasSection()]})]}),e]})}catch{return(0,Zn.jsx)("div",{className:"stats render-error"})}}}}class Vr extends i.Component{constructor(e){super(e),this.drawFeatures=e=>{let t=[];return t.push(...X.getFeatureDeck(e)),t.push(...Y.getBaseFeatures()),t=t.filter((t=>{if(t.type===j.Proficiency){const n=X.getProficiencies(e);if(n.length>=9)return!1;if(n.includes(t.proficiency))return!1}return!0})),d.shuffle(t).splice(0,3)},this.equipItem=e=>{this.props.equipItem(e,this.props.combatant)},this.unequipItem=e=>{this.props.unequipItem(e,this.props.combatant)},this.dropItem=e=>{this.props.dropItem(e,this.props.combatant)},this.pickUpItem=e=>{this.props.pickUpItem(e,this.props.combatant)},this.levelUp=e=>{const t=this.props.combatant.xp-this.props.combatant.level>=this.props.combatant.level+1;this.setState({view:t?"levelup":"stats",features:this.drawFeatures(this.props.combatant)},(()=>{const t=JSON.parse(JSON.stringify(e));t.id=D.guid(),this.props.levelUp(t,this.props.combatant)}))},this.render=()=>{try{let e=[{id:"stats",display:"Statistics"},{id:"items",display:"Equipment"},{id:"features",display:"Features"},{id:"actions",display:"Actions"}];this.props.combatant.quirks.includes(P.Beast)&&(e=e.filter((e=>"items"!==e.id))),null===this.props.game.encounter&&this.props.combatant.xp>=this.props.combatant.level&&e.unshift({id:"levelup",display:"Level Up"});let t=null;switch(this.state.view){case"levelup":t=(0,Zn.jsx)(_r,{combatant:this.props.combatant,game:this.props.game,developer:this.props.developer,level:this.props.combatant.level+1,features:this.state.features,useCharge:this.props.useCharge,levelUp:this.levelUp,redrawFeatures:e=>{this.setState({features:this.drawFeatures(this.props.combatant)},(()=>{e&&this.props.useCharge(h.TrainingGround,1)}))}});break;case"stats":t=(0,Zn.jsx)(Wr,{combatant:this.props.combatant,encounter:this.props.game.encounter,developer:this.props.developer});break;case"items":t=(0,Zn.jsx)(Or,{combatant:this.props.combatant,game:this.props.game,equipItem:this.equipItem,unequipItem:this.unequipItem,pickUpItem:this.pickUpItem,dropItem:this.dropItem});break;case"features":{const e=X.getFeatureDeck(this.props.combatant).map((e=>(0,Zn.jsx)(kr,{feature:e,footer:X.getFeatureSource(this.props.combatant,e.id),footerType:X.getFeatureSourceType(this.props.combatant,e.id)},e.id)));t=(0,Zn.jsx)(oa,{cards:e});break}case"actions":{const e=X.getActionDeck(this.props.combatant).map((e=>(0,Zn.jsx)(xa,{action:e,footer:X.getActionSource(this.props.combatant,e.id),footerType:X.getActionSourceType(this.props.combatant,e.id)},e.id)));t=(0,Zn.jsx)(oa,{cards:e});break}}const n=Oe.getSpecies(this.props.combatant.speciesID),a=Oe.getRole(this.props.combatant.roleID),r=Oe.getBackground(this.props.combatant.backgroundID);return(0,Zn.jsx)("div",{className:"character-sheet-modal",children:(0,Zn.jsxs)("div",{className:"main-section",children:[(0,Zn.jsxs)("div",{className:"header",children:[(0,Zn.jsx)(ra,{type:aa.Heading,children:this.props.combatant.name||"unnamed hero"}),(0,Zn.jsxs)("div",{className:"tags",children:[n?(0,Zn.jsx)(ka,{children:n.name}):null,a?(0,Zn.jsx)(ka,{children:a.name}):null,r?(0,Zn.jsx)(ka,{children:r.name}):null,(0,Zn.jsxs)(ka,{children:["Level ",this.props.combatant.level]}),this.props.combatant.quirks.map(((e,t)=>(0,Zn.jsx)(ka,{children:e},t)))]})]}),(0,Zn.jsx)(va,{options:e,selectedID:this.state.view,onSelect:e=>this.setState({view:e})}),(0,Zn.jsx)("div",{className:"content",children:t})]})})}catch{return(0,Zn.jsx)("div",{className:"character-sheet-modal render-error"})}},this.state={view:null===e.game.encounter&&e.combatant.xp>=e.combatant.level?"levelup":"stats",features:this.drawFeatures(e.combatant)}}}class Qr extends i.Component{constructor(e){super(e),this.selectItem=e=>{this.setState({selectedItem:e,magicItems:this.getItems(e)})},this.getItems=e=>{const t=[];for(;t.length<3;)t.push(H.generateMagicItem(e,this.props.options.packIDs,Math.random));return d.sort(t,(e=>e.name))},this.redraw=()=>{this.setState({magicItems:this.getItems(this.state.selectedItem)},(()=>{this.props.options.developer||this.props.useCharge(h.WizardTower,1)}))},this.render=()=>{try{let e=null;if(this.state.selectedItem){const t=this.state.magicItems.map((e=>(0,Zn.jsx)("div",{children:(0,Zn.jsx)(yr,{item:e,onClick:e=>this.props.enchantItem(this.state.selectedItem,e)})},e.id))),n=V.getStructureCharges(this.props.game,h.WizardTower);e=(0,Zn.jsx)(ua,{content:(0,Zn.jsxs)("div",{className:"enchant-item-modal",children:[(0,Zn.jsx)(ra,{type:aa.Heading,children:"Choose an Enchantment"}),(0,Zn.jsx)("hr",{}),(0,Zn.jsx)(ra,{type:aa.Information,children:(0,Zn.jsx)("p",{children:"Here are three ways in which this item can be enchanted. Choose one of them."})}),(0,Zn.jsxs)("div",{className:"card-selection-row",children:[(0,Zn.jsx)(oa,{cards:t}),n>0||this.props.options.developer?(0,Zn.jsxs)("button",{className:this.props.options.developer?"developer":"",onClick:()=>this.redraw(),children:["Redraw Magic Item Cards",(0,Zn.jsx)("br",{}),(0,Zn.jsx)(ta,{type:$n.Redraw,value:n,size:ea.Button})]}):null]})]}),level:2})}const t=this.props.game.heroes.map((e=>{const t=[].concat(e.items).concat(e.carried).filter((e=>!e.potion));if(t.length>0){const n=t.map((e=>(0,Zn.jsx)("div",{children:(0,Zn.jsx)(yr,{item:e,onClick:this.selectItem})},e.id)));return(0,Zn.jsxs)("div",{className:"card-selection-row",children:[(0,Zn.jsx)(ra,{type:aa.SubHeading,children:e.name}),(0,Zn.jsx)(oa,{cards:n})]},e.id)}return null}));let n=null;if(this.props.game.items.length>0){const e=this.props.game.items.filter((e=>!e.potion)).map((e=>(0,Zn.jsx)("div",{children:(0,Zn.jsx)(yr,{item:e,onClick:this.selectItem})},e.id)));n=(0,Zn.jsxs)("div",{className:"card-selection-row",children:[(0,Zn.jsx)(ra,{type:aa.SubHeading,children:"Other Items"}),(0,Zn.jsx)(oa,{cards:e})]})}return(0,Zn.jsxs)("div",{className:"enchant-item-modal",children:[(0,Zn.jsx)(ra,{type:aa.Heading,children:"Choose an Item"}),(0,Zn.jsx)("hr",{}),(0,Zn.jsx)(ra,{type:aa.Information,children:(0,Zn.jsx)("p",{children:"Select one of the following items to be enchanted."})}),t,n,e]})}catch{return(0,Zn.jsx)("div",{className:"enchant-item-modal render-error"})}},this.state={selectedItem:null,magicItems:[]}}}class Xr extends i.Component{constructor(e){super(e),this.selectHero=e=>{let t=this.state.selectedHeroes;t.push(e),t=d.sort(t,(e=>e.name)),this.setState({viewMode:"heroes",selectedHeroes:t})},this.deselectHero=e=>{const t=this.state.selectedHeroes.filter((t=>t.id!==e.id));this.setState({selectedHeroes:t})},this.selectAllHeroes=()=>{let e=[];e.push(...this.props.game.heroes),e=d.sort(e,(e=>e.name)),this.setState({viewMode:"heroes",selectedHeroes:e})},this.startEncounter=()=>{this.props.startEncounter(this.props.region,this.state.selectedHeroes,this.state.benefits,this.state.detriments)},this.getHeroes=()=>{const e=this.props.game.heroes.filter((e=>!this.state.selectedHeroes.includes(e))).map((e=>(0,Zn.jsx)(xr,{hero:e,onClick:this.state.selectedHeroes.length<5?e=>this.selectHero(e):null},e.id))),t=this.state.selectedHeroes.map((e=>(0,Zn.jsx)(_a,{mode:"list",combatant:e,options:this.props.options,onCancel:e=>this.deselectHero(e)},e.id)));for(;t.length<5;)t.push((0,Zn.jsx)("div",{className:"empty-hero-slot",children:"[No hero selected]"},t.length));return(0,Zn.jsxs)("div",{className:"hero-page",children:[(0,Zn.jsxs)("div",{className:"hero-list-column candidates",children:[0===e.length?(0,Zn.jsx)(ra,{type:aa.Empty,children:"You have no more available heroes."}):null,(0,Zn.jsx)(oa,{cards:e})]}),(0,Zn.jsx)("div",{className:"divider"}),(0,Zn.jsx)("div",{className:"hero-list-column selected",children:t})]})},this.getMonsters=()=>{const e=_.getMonsters(this.props.region,this.props.options.packIDs).map((e=>(0,Zn.jsx)(jr,{species:e},e.id)));return(0,Zn.jsx)("div",{className:"monster-page",children:(0,Zn.jsx)(oa,{cards:e})})},this.getAdvanced=()=>{const e=[],t=V.getStructureCharges(this.props.game,h.Temple);(t>0||this.props.options.developer)&&e.push((0,Zn.jsxs)("div",{className:"stronghold-benefit",children:[(0,Zn.jsx)(Dr,{label:"Bonuses",available:t,used:this.state.benefits,developer:this.props.options.developer,onChange:e=>this.setState({benefits:e})}),(0,Zn.jsx)(ra,{children:"Allow some of your heroes to start with a random beneficial condition."})]},"bonuses"));const n=V.getStructureCharges(this.props.game,h.Intelligencer);return(n>0||this.props.options.developer)&&e.push((0,Zn.jsxs)("div",{className:"stronghold-benefit",children:[(0,Zn.jsx)(Dr,{label:"Penalties",available:n,used:this.state.detriments,developer:this.props.options.developer,onChange:e=>this.setState({detriments:e})}),(0,Zn.jsx)(ra,{children:"Force some of your opponents to start with a random detrimental condition."})]},"penalties")),(0,Zn.jsx)("div",{className:"advanced-page",children:(0,Zn.jsx)(oa,{cards:e})})},this.render=()=>{const e=[{id:"heroes",display:"Selected Heroes"},{id:"monsters",display:"Monsters in this Region"}];(V.getStructureCharges(this.props.game,h.Temple)+V.getStructureCharges(this.props.game,h.Intelligencer)>0||this.props.options.developer)&&e.push({id:"advanced",display:"Advanced Options"});let t=null;switch(this.state.viewMode){case"heroes":t=this.getHeroes();break;case"monsters":t=this.getMonsters();break;case"advanced":t=this.getAdvanced()}return(0,Zn.jsxs)("div",{className:"encounter-start-modal",children:[(0,Zn.jsx)("div",{className:"header",children:(0,Zn.jsx)(ra,{type:aa.Heading,children:"Choose your Heroes"})}),(0,Zn.jsx)(va,{options:e,selectedID:this.state.viewMode,onSelect:e=>this.setState({viewMode:e})}),"heroes"===this.state.viewMode?(0,Zn.jsx)(ra,{type:aa.Information,children:(0,Zn.jsxs)("p",{children:["Select ",(0,Zn.jsx)("b",{children:"up to 5 heroes"})," from the list on the left to take part in this encounter",this.props.game.heroes.length<=5?(0,Zn.jsxs)("span",{children:["\xa0(or ",(0,Zn.jsx)("button",{className:"link",onClick:this.selectAllHeroes,children:"add all heroes"}),")"]}):null,"."]})}):null,"monsters"===this.state.viewMode?(0,Zn.jsx)(ra,{type:aa.Information,children:(0,Zn.jsx)("p",{children:"The following monsters are common in the region you are attacking."})}):null,"advanced"===this.state.viewMode?(0,Zn.jsx)(ra,{type:aa.Information,children:(0,Zn.jsx)("p",{children:"The buildings in your stronghold allow you to use the following options."})}):null,t,(0,Zn.jsx)("button",{className:"action primary",disabled:this.state.selectedHeroes.length<1||this.state.selectedHeroes.length>5,onClick:this.startEncounter,children:"Start the Encounter"})]})},this.state={viewMode:"heroes",selectedHeroes:[],benefits:0,detriments:0}}}class Gr extends i.Component{constructor(){super(...arguments),this.render=()=>{try{return(0,Zn.jsxs)("div",{className:"about-tab",children:[(0,Zn.jsxs)(ra,{children:["Skirmish designed by ",(0,Zn.jsx)("a",{href:"mailto:andy.aiken@live.co.uk",children:"Andy Aiken"}),"; \xa9 Andy Aiken 2024"]}),(0,Zn.jsx)("hr",{}),(0,Zn.jsx)(fa,{label:"Version",value:this.props.options.version}),(0,Zn.jsx)("hr",{}),(0,Zn.jsx)(fa,{label:"Data size",value:this.props.game?M.toSize(JSON.stringify(this.props.game).length):0}),(0,Zn.jsx)(fa,{label:"Options size",value:M.toSize(JSON.stringify(this.props.options).length)})]})}catch{return(0,Zn.jsx)("div",{className:"about-tab render-error"})}}}}class Jr extends i.Component{constructor(e){super(e),this.setTab=e=>{this.setState({tab:e})},this.setActions=(e,t,n,a,r,s)=>{this.setState({selected:{name:e,description:t,type:n,starting:a,features:r,actions:s}})},this.clearActions=()=>{this.setState({selected:null})},this.getBadge=e=>{const t=Oe.getPack(e);return t?t.name:""},this.render=()=>{try{const e=[];switch(this.state.tab){case"heroes":Oe.getHeroSpeciesDeck(this.props.options.packIDs).forEach((t=>{e.push((0,Zn.jsx)(sa,{value:this.getBadge(t.packID),children:(0,Zn.jsx)(jr,{species:t,onClick:e=>this.setActions(e.name,e.description,E.Species,e.startingFeatures,e.features,e.actions)})},t.id))}));break;case"monsters":Oe.getMonsterSpeciesDeck(this.props.options.packIDs).forEach((t=>{e.push((0,Zn.jsx)(sa,{value:this.getBadge(t.packID),children:(0,Zn.jsx)(jr,{species:t,onClick:e=>this.setActions(e.name,e.description,E.Species,e.startingFeatures,e.features,e.actions)})},t.id))}));break;case"roles":Oe.getRoleDeck(this.props.options.packIDs).forEach((t=>{e.push((0,Zn.jsx)(sa,{value:this.getBadge(t.packID),children:(0,Zn.jsx)(Ar,{role:t,onClick:e=>this.setActions(e.name,e.description,E.Role,e.startingFeatures,e.features,e.actions)})},t.id))}));break;case"backgrounds":Oe.getBackgroundDeck(this.props.options.packIDs).forEach((t=>{e.push((0,Zn.jsx)(sa,{value:this.getBadge(t.packID),children:(0,Zn.jsx)(gr,{background:t,onClick:e=>this.setActions(e.name,e.description,E.Background,e.startingFeatures,e.features,e.actions)})},t.id))}));break;case"structures":Oe.getStructureDeck(this.props.options.packIDs).forEach((t=>{e.push((0,Zn.jsx)(sa,{value:this.getBadge(t.packID),children:(0,Zn.jsx)(br,{structure:t})},t.id))}));break;case"items":Oe.getItemDeck(this.props.options.packIDs).forEach((t=>{e.push((0,Zn.jsx)(sa,{value:this.getBadge(t.packID),children:(0,Zn.jsx)(yr,{item:t})},t.id))}));break;case"potions":Oe.getPotionDeck(this.props.options.packIDs).forEach((t=>{e.push((0,Zn.jsx)(sa,{value:this.getBadge(t.packID),children:(0,Zn.jsx)(yr,{item:t})},t.id))}))}let t=null;if(this.state.selected){const e=this.state.selected.name,n=this.state.selected.type,a=this.state.selected.starting.map((t=>(0,Zn.jsx)(sa,{value:"",children:(0,Zn.jsx)(kr,{feature:t,footer:e,footerType:n})},t.id))),r=this.state.selected.features.map((t=>(0,Zn.jsx)(sa,{value:"",children:(0,Zn.jsx)(kr,{feature:t,footer:e,footerType:n})},t.id))),s=this.state.selected.actions.map((t=>(0,Zn.jsx)(sa,{value:"",children:(0,Zn.jsx)(xa,{action:t,footer:e,footerType:n})},t.id))),i=(0,Zn.jsxs)("div",{children:[(0,Zn.jsx)(ra,{type:aa.Heading,children:this.state.selected.name}),(0,Zn.jsx)("hr",{}),(0,Zn.jsx)(ra,{children:(0,Zn.jsx)("p",{style:{textAlign:"center"},children:this.state.selected.description})}),a.length>0?(0,Zn.jsx)("hr",{}):null,a.length>0?(0,Zn.jsx)(ra,{type:aa.SubHeading,children:"Starting Cards"}):null,a.length>0?(0,Zn.jsx)(oa,{cards:a}):null,r.length>0?(0,Zn.jsx)("hr",{}):null,r.length>0?(0,Zn.jsx)(ra,{type:aa.SubHeading,children:"Feature Cards"}):null,r.length>0?(0,Zn.jsx)(oa,{cards:r}):null,s.length>0?(0,Zn.jsx)("hr",{}):null,s.length>0?(0,Zn.jsx)(ra,{type:aa.SubHeading,children:"Action Cards"}):null,s.length>0?(0,Zn.jsx)(oa,{cards:s}):null]});t=(0,Zn.jsx)(ua,{content:i,level:2,onClose:this.clearActions})}return(0,Zn.jsxs)("div",{className:"decks-tab",children:[(0,Zn.jsx)(ma,{options:[{id:"heroes",display:"Heroes"},{id:"monsters",display:"Monsters"},{id:"roles",display:"Roles"},{id:"backgrounds",display:"Backgrounds"},{id:"structures",display:"Structures"},{id:"items",display:"Items"},{id:"potions",display:"Potions"}],selectedID:this.state.tab,onSelect:this.setTab}),e.length>0?(0,Zn.jsx)(oa,{cards:e}):null,e.length>0?null:(0,Zn.jsx)(ra,{type:aa.Small,children:"None."}),t]})}catch{return(0,Zn.jsx)("div",{className:"decks-tab render-error"})}},this.state={tab:"heroes",selected:null}}}class Yr extends i.Component{constructor(){super(...arguments),this.setSoundEffectsVolume=e=>{this.props.setSoundEffectsVolume(e),ce.play(ce.dong)},this.render=()=>{try{const e=window.location.href.includes("localhost");return(0,Zn.jsxs)("div",{className:"options-tab",children:[(0,Zn.jsx)(ra,{type:aa.SubHeading,children:"Sound"}),(0,Zn.jsx)(fa,{label:"Sound effects volume",value:"".concat(100*this.props.options.soundEffectsVolume,"%")}),(0,Zn.jsx)("input",{type:"range",min:0,max:1,step:.05,value:this.props.options.soundEffectsVolume,onChange:e=>this.setSoundEffectsVolume(parseFloat(e.target.value))}),(0,Zn.jsx)("hr",{}),e?(0,Zn.jsx)(ba,{label:"Developer Mode",checked:this.props.options.developer,onChange:this.props.setDeveloperMode}):null,(0,Zn.jsx)(ba,{label:"Show Tips",checked:this.props.options.showTips,onChange:this.props.setShowTips}),(0,Zn.jsx)("hr",{}),(0,Zn.jsx)(ra,{type:aa.SubHeading,children:"Platform"}),(0,Zn.jsx)(ma,{options:[{id:"chrome",display:"Chrome"},{id:"edge",display:"Edge"},{id:"firefox",display:"Firefox"},{id:"safari",display:"Safari"}],selectedID:this.props.options.renderer,onSelect:this.props.setRenderer}),(0,Zn.jsx)("hr",{}),this.props.game?(0,Zn.jsx)(la,{label:"Abandon this campaign",onClick:()=>this.props.endCampaign()}):null]})}catch{return(0,Zn.jsx)("div",{className:"options-tab render-error"})}}}}const Kr=/[ \t\n\f\r]/g;function Zr(e){return""===e.replace(Kr,"")}class $r{constructor(e,t,n){this.property=e,this.normal=t,n&&(this.space=n)}}function es(e,t){const n={},a={};let r=-1;for(;++r<e.length;)Object.assign(n,e[r].property),Object.assign(a,e[r].normal);return new $r(n,a,t)}function ts(e){return e.toLowerCase()}$r.prototype.property={},$r.prototype.normal={},$r.prototype.space=null;class ns{constructor(e,t){this.property=e,this.attribute=t}}ns.prototype.space=null,ns.prototype.boolean=!1,ns.prototype.booleanish=!1,ns.prototype.overloadedBoolean=!1,ns.prototype.number=!1,ns.prototype.commaSeparated=!1,ns.prototype.spaceSeparated=!1,ns.prototype.commaOrSpaceSeparated=!1,ns.prototype.mustUseProperty=!1,ns.prototype.defined=!1;let as=0;const rs=ds(),ss=ds(),is=ds(),os=ds(),ls=ds(),cs=ds(),us=ds();function ds(){return 2**++as}const ps=Object.keys(e);class hs extends ns{constructor(t,n,a,r){let s=-1;if(super(t,n),ms(this,"space",r),"number"===typeof a)for(;++s<ps.length;){const t=ps[s];ms(this,ps[s],(a&e[t])===e[t])}}}function ms(e,t,n){n&&(e[t]=n)}hs.prototype.defined=!0;const fs={}.hasOwnProperty;function gs(e){const t={},n={};let a;for(a in e.properties)if(fs.call(e.properties,a)){const r=e.properties[a],s=new hs(a,e.transform(e.attributes||{},a),r,e.space);e.mustUseProperty&&e.mustUseProperty.includes(a)&&(s.mustUseProperty=!0),t[a]=s,n[ts(a)]=a,n[ts(s.attribute)]=a}return new $r(t,n,e.space)}const ys=gs({space:"xlink",transform:(e,t)=>"xlink:"+t.slice(5).toLowerCase(),properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),bs=gs({space:"xml",transform:(e,t)=>"xml:"+t.slice(3).toLowerCase(),properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function vs(e,t){return t in e?e[t]:t}function ks(e,t){return vs(e,t.toLowerCase())}const xs=gs({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:ks,properties:{xmlns:null,xmlnsXLink:null}}),Ss=gs({transform:(e,t)=>"role"===t?t:"aria-"+t.slice(4).toLowerCase(),properties:{ariaActiveDescendant:null,ariaAtomic:ss,ariaAutoComplete:null,ariaBusy:ss,ariaChecked:ss,ariaColCount:os,ariaColIndex:os,ariaColSpan:os,ariaControls:ls,ariaCurrent:null,ariaDescribedBy:ls,ariaDetails:null,ariaDisabled:ss,ariaDropEffect:ls,ariaErrorMessage:null,ariaExpanded:ss,ariaFlowTo:ls,ariaGrabbed:ss,ariaHasPopup:null,ariaHidden:ss,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:ls,ariaLevel:os,ariaLive:null,ariaModal:ss,ariaMultiLine:ss,ariaMultiSelectable:ss,ariaOrientation:null,ariaOwns:ls,ariaPlaceholder:null,ariaPosInSet:os,ariaPressed:ss,ariaReadOnly:ss,ariaRelevant:null,ariaRequired:ss,ariaRoleDescription:ls,ariaRowCount:os,ariaRowIndex:os,ariaRowSpan:os,ariaSelected:ss,ariaSetSize:os,ariaSort:null,ariaValueMax:os,ariaValueMin:os,ariaValueNow:os,ariaValueText:null,role:null}}),ws=gs({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:ks,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:cs,acceptCharset:ls,accessKey:ls,action:null,allow:null,allowFullScreen:rs,allowPaymentRequest:rs,allowUserMedia:rs,alt:null,as:null,async:rs,autoCapitalize:null,autoComplete:ls,autoFocus:rs,autoPlay:rs,blocking:ls,capture:rs,charSet:null,checked:rs,cite:null,className:ls,cols:os,colSpan:null,content:null,contentEditable:ss,controls:rs,controlsList:ls,coords:os|cs,crossOrigin:null,data:null,dateTime:null,decoding:null,default:rs,defer:rs,dir:null,dirName:null,disabled:rs,download:is,draggable:ss,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:rs,formTarget:null,headers:ls,height:os,hidden:rs,high:os,href:null,hrefLang:null,htmlFor:ls,httpEquiv:ls,id:null,imageSizes:null,imageSrcSet:null,inert:rs,inputMode:null,integrity:null,is:null,isMap:rs,itemId:null,itemProp:ls,itemRef:ls,itemScope:rs,itemType:ls,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:rs,low:os,manifest:null,max:null,maxLength:os,media:null,method:null,min:null,minLength:os,multiple:rs,muted:rs,name:null,nonce:null,noModule:rs,noValidate:rs,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:rs,optimum:os,pattern:null,ping:ls,placeholder:null,playsInline:rs,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:rs,referrerPolicy:null,rel:ls,required:rs,reversed:rs,rows:os,rowSpan:os,sandbox:ls,scope:null,scoped:rs,seamless:rs,selected:rs,shape:null,size:os,sizes:null,slot:null,span:os,spellCheck:ss,src:null,srcDoc:null,srcLang:null,srcSet:null,start:os,step:null,style:null,tabIndex:os,target:null,title:null,translate:null,type:null,typeMustMatch:rs,useMap:null,value:ss,width:os,wrap:null,align:null,aLink:null,archive:ls,axis:null,background:null,bgColor:null,border:os,borderColor:null,bottomMargin:os,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:rs,declare:rs,event:null,face:null,frame:null,frameBorder:null,hSpace:os,leftMargin:os,link:null,longDesc:null,lowSrc:null,marginHeight:os,marginWidth:os,noResize:rs,noHref:rs,noShade:rs,noWrap:rs,object:null,profile:null,prompt:null,rev:null,rightMargin:os,rules:null,scheme:null,scrolling:ss,standby:null,summary:null,text:null,topMargin:os,valueType:null,version:null,vAlign:null,vLink:null,vSpace:os,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:rs,disableRemotePlayback:rs,prefix:null,property:null,results:os,security:null,unselectable:null}}),Cs=gs({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:vs,properties:{about:us,accentHeight:os,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:os,amplitude:os,arabicForm:null,ascent:os,attributeName:null,attributeType:null,azimuth:os,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:os,by:null,calcMode:null,capHeight:os,className:ls,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:os,diffuseConstant:os,direction:null,display:null,dur:null,divisor:os,dominantBaseline:null,download:rs,dx:null,dy:null,edgeMode:null,editable:null,elevation:os,enableBackground:null,end:null,event:null,exponent:os,externalResourcesRequired:null,fill:null,fillOpacity:os,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:cs,g2:cs,glyphName:cs,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:os,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:os,horizOriginX:os,horizOriginY:os,id:null,ideographic:os,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:os,k:os,k1:os,k2:os,k3:os,k4:os,kernelMatrix:us,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:os,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:os,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:os,overlineThickness:os,paintOrder:null,panose1:null,path:null,pathLength:os,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:ls,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:os,pointsAtY:os,pointsAtZ:os,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:us,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:us,rev:us,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:us,requiredFeatures:us,requiredFonts:us,requiredFormats:us,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:os,specularExponent:os,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:os,strikethroughThickness:os,string:null,stroke:null,strokeDashArray:us,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:os,strokeOpacity:os,strokeWidth:null,style:null,surfaceScale:os,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:us,tabIndex:os,tableValues:null,target:null,targetX:os,targetY:os,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:us,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:os,underlineThickness:os,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:os,values:null,vAlphabetic:os,vMathematical:os,vectorEffect:null,vHanging:os,vIdeographic:os,version:null,vertAdvY:os,vertOriginX:os,vertOriginY:os,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:os,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),As=es([bs,ys,xs,Ss,ws],"html"),js=es([bs,ys,xs,Ss,Cs],"svg"),Ds=/^data[-\w.:]+$/i,Es=/-[a-z]/g,Is=/[A-Z]/g;function Ns(e){return"-"+e.toLowerCase()}function Ps(e){return e.charAt(1).toUpperCase()}const Ms={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"};const Bs=n(426),Fs=Rs("end"),Ts=Rs("start");function Rs(e){return function(t){const n=t&&t.position&&t.position[e]||{};if("number"===typeof n.line&&n.line>0&&"number"===typeof n.column&&n.column>0)return{line:n.line,column:n.column,offset:"number"===typeof n.offset&&n.offset>-1?n.offset:void 0}}}function qs(e){return e&&"object"===typeof e?"position"in e||"type"in e?zs(e.position):"start"in e||"end"in e?zs(e):"line"in e||"column"in e?Ls(e):"":""}function Ls(e){return Os(e&&e.line)+":"+Os(e&&e.column)}function zs(e){return Ls(e&&e.start)+"-"+Ls(e&&e.end)}function Os(e){return e&&"number"===typeof e?e:1}class Hs extends Error{constructor(e,t,n){super(),"string"===typeof t&&(n=t,t=void 0);let a="",r={},s=!1;if(t&&(r="line"in t&&"column"in t||"start"in t&&"end"in t?{place:t}:"type"in t?{ancestors:[t],place:t.position}:{...t}),"string"===typeof e?a=e:!r.cause&&e&&(s=!0,a=e.message,r.cause=e),!r.ruleId&&!r.source&&"string"===typeof n){const e=n.indexOf(":");-1===e?r.ruleId=n:(r.source=n.slice(0,e),r.ruleId=n.slice(e+1))}if(!r.place&&r.ancestors&&r.ancestors){const e=r.ancestors[r.ancestors.length-1];e&&(r.place=e.position)}const i=r.place&&"start"in r.place?r.place.start:r.place;this.ancestors=r.ancestors||void 0,this.cause=r.cause||void 0,this.column=i?i.column:void 0,this.fatal=void 0,this.file,this.message=a,this.line=i?i.line:void 0,this.name=qs(r.place)||"1:1",this.place=r.place||void 0,this.reason=this.message,this.ruleId=r.ruleId||void 0,this.source=r.source||void 0,this.stack=s&&r.cause&&"string"===typeof r.cause.stack?r.cause.stack:"",this.actual,this.expected,this.note,this.url}}Hs.prototype.file="",Hs.prototype.name="",Hs.prototype.reason="",Hs.prototype.message="",Hs.prototype.stack="",Hs.prototype.column=void 0,Hs.prototype.line=void 0,Hs.prototype.ancestors=void 0,Hs.prototype.cause=void 0,Hs.prototype.fatal=void 0,Hs.prototype.place=void 0,Hs.prototype.ruleId=void 0,Hs.prototype.source=void 0;const _s={}.hasOwnProperty,Us=new Map,Ws=/[A-Z]/g,Vs=/-([a-z])/g,Qs=new Set(["table","tbody","thead","tfoot","tr"]),Xs=new Set(["td","th"]);function Gs(e,t){if(!t||void 0===t.Fragment)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let a;if(t.development){if("function"!==typeof t.jsxDEV)throw new TypeError("Expected `jsxDEV` in options when `development: true`");a=function(e,t){return n;function n(n,a,r,s){const i=Array.isArray(r.children),o=Ts(n);return t(a,r,s,i,{columnNumber:o?o.column-1:void 0,fileName:e,lineNumber:o?o.line:void 0},void 0)}}(n,t.jsxDEV)}else{if("function"!==typeof t.jsx)throw new TypeError("Expected `jsx` in production options");if("function"!==typeof t.jsxs)throw new TypeError("Expected `jsxs` in production options");a=function(e,t,n){return a;function a(e,a,r,s){const i=Array.isArray(r.children)?n:t;return s?i(a,r,s):i(a,r)}}(0,t.jsx,t.jsxs)}const r={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:a,elementAttributeNameCase:t.elementAttributeNameCase||"react",filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:!1!==t.passKeys,passNode:t.passNode||!1,schema:"svg"===t.space?js:As,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:!1!==t.tableCellAlignToStyle},s=Js(r,e,void 0);return s&&"string"!==typeof s?s:r.create(e,r.Fragment,{children:s||void 0},void 0)}function Js(e,t,n){if("element"===t.type||"root"===t.type){const a=e.schema;let r=a;"element"===t.type&&"svg"===t.tagName.toLowerCase()&&"html"===a.space&&(r=js,e.schema=r),e.ancestors.push(t);let s=function(e,t){const n=[];let a=-1;const r=e.passKeys?new Map:Us;for(;++a<t.children.length;){const s=t.children[a];let i;if(e.passKeys&&"element"===s.type){const e=r.get(s.tagName)||0;i=s.tagName+"-"+e,r.set(s.tagName,e+1)}const o=Js(e,s,i);void 0!==o&&n.push(o)}return n}(e,t);const i=function(e,t){const n=t[t.length-1],a={};let r;if("properties"in n&&n.properties){let s;for(r in n.properties)if("children"!==r&&_s.call(n.properties,r)){const i=Ys(e,t,r,n.properties[r]);if(i){const[t,r]=i;e.tableCellAlignToStyle&&"align"===t&&"string"===typeof r&&Xs.has(n.tagName)?s=r:a[t]=r}}if(s){(a.style||(a.style={}))["css"===e.stylePropertyNameCase?"text-align":"textAlign"]=s}}return a}(e,e.ancestors);let o=e.Fragment;if(e.ancestors.pop(),"element"===t.type)if(s&&Qs.has(t.tagName)&&(s=s.filter((function(e){return"string"!==typeof e||!("object"===typeof(t=e)?"text"===t.type&&Zr(t.value):Zr(t));var t}))),_s.call(e.components,t.tagName)){const n=t.tagName;o=e.components[n],"string"!==typeof o&&o!==e.Fragment&&e.passNode&&(i.node=t)}else o=t.tagName;if(s.length>0){const e=s.length>1?s:s[0];e&&(i.children=e)}return e.schema=a,e.create(t,o,i,n)}if("text"===t.type)return t.value}function Ys(e,t,n,a){const r=function(e,t){const n=ts(t);let a=t,r=ns;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&"data"===n.slice(0,4)&&Ds.test(t)){if("-"===t.charAt(4)){const e=t.slice(5).replace(Es,Ps);a="data"+e.charAt(0).toUpperCase()+e.slice(1)}else{const e=t.slice(4);if(!Es.test(e)){let n=e.replace(Is,Ns);"-"!==n.charAt(0)&&(n="-"+n),t="data"+n}}r=hs}return new r(a,t)}(e.schema,n);if(!(null===a||void 0===a||"number"===typeof a&&Number.isNaN(a))){if(Array.isArray(a)&&(a=r.commaSeparated?function(e,t){const n=t||{};return(""===e[e.length-1]?[...e,""]:e).join((n.padRight?" ":"")+","+(!1===n.padLeft?"":" ")).trim()}(a):a.join(" ").trim()),"style"===r.property){let n="object"===typeof a?a:function(e,t,n){const a={};try{Bs(n,r)}catch(s){if(!e.ignoreInvalidStyle){const n=new Hs("Cannot parse `style` attribute",{ancestors:t,cause:s,source:"hast-util-to-jsx-runtime",ruleId:"style"});throw n.file=e.filePath||void 0,n.url="https://github.com/syntax-tree/hast-util-to-jsx-runtime#cannot-parse-style-attribute",n}}return a;function r(e,t){let n=e;"--"!==n.slice(0,2)&&("-ms-"===n.slice(0,4)&&(n="ms-"+n.slice(4)),n=n.replace(Vs,Zs)),a[n]=t}}(e,t,String(a));return"css"===e.stylePropertyNameCase&&(n=function(e){const t={};let n;for(n in e)_s.call(e,n)&&(t[Ks(n)]=e[n]);return t}(n)),["style",n]}return["react"===e.elementAttributeNameCase&&r.space?Ms[r.property]||r.property:r.attribute,a]}}function Ks(e){let t=e.replace(Ws,$s);return"ms-"===t.slice(0,3)&&(t="-"+t),t}function Zs(e,t){return t.toUpperCase()}function $s(e){return"-"+e.toLowerCase()}const ei={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},ti={};function ni(e,t,n){if(function(e){return Boolean(e&&"object"===typeof e)}(e)){if("value"in e)return"html"!==e.type||n?e.value:"";if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return ai(e.children,t,n)}return Array.isArray(e)?ai(e,t,n):""}function ai(e,t,n){const a=[];let r=-1;for(;++r<e.length;)a[r]=ni(e[r],t,n);return a.join("")}function ri(e,t,n,a){const r=e.length;let s,i=0;if(t=t<0?-t>r?0:r+t:t>r?r:t,n=n>0?n:0,a.length<1e4)s=Array.from(a),s.unshift(t,n),e.splice(...s);else for(n&&e.splice(t,n);i<a.length;)s=a.slice(i,i+1e4),s.unshift(t,0),e.splice(...s),i+=1e4,t+=1e4}function si(e,t){return e.length>0?(ri(e,e.length,0,t),e):t}function ii(e){const t={};let n,a,r,s,i,o,l,c=-1;for(;++c<e.length;){for(;c in t;)c=t[c];if(n=e[c],c&&"chunkFlow"===n[1].type&&"listItemPrefix"===e[c-1][1].type&&(o=n[1]._tokenizer.events,r=0,r<o.length&&"lineEndingBlank"===o[r][1].type&&(r+=2),r<o.length&&"content"===o[r][1].type))for(;++r<o.length&&"content"!==o[r][1].type;)"chunkText"===o[r][1].type&&(o[r][1]._isInFirstContentOfListItem=!0,r++);if("enter"===n[0])n[1].contentType&&(Object.assign(t,oi(e,c)),c=t[c],l=!0);else if(n[1]._container){for(r=c,a=void 0;r--&&(s=e[r],"lineEnding"===s[1].type||"lineEndingBlank"===s[1].type);)"enter"===s[0]&&(a&&(e[a][1].type="lineEndingBlank"),s[1].type="lineEnding",a=r);a&&(n[1].end=Object.assign({},e[a][1].start),i=e.slice(a,c),i.unshift(n),ri(e,a,c-a+1,i))}}return!l}function oi(e,t){const n=e[t][1],a=e[t][2];let r=t-1;const s=[],i=n._tokenizer||a.parser[n.contentType](n.start),o=i.events,l=[],c={};let u,d,p=-1,h=n,m=0,f=0;const g=[f];for(;h;){for(;e[++r][1]!==h;);s.push(r),h._tokenizer||(u=a.sliceStream(h),h.next||u.push(null),d&&i.defineSkip(h.start),h._isInFirstContentOfListItem&&(i._gfmTasklistFirstContentOfListItem=!0),i.write(u),h._isInFirstContentOfListItem&&(i._gfmTasklistFirstContentOfListItem=void 0)),d=h,h=h.next}for(h=n;++p<o.length;)"exit"===o[p][0]&&"enter"===o[p-1][0]&&o[p][1].type===o[p-1][1].type&&o[p][1].start.line!==o[p][1].end.line&&(f=p+1,g.push(f),h._tokenizer=void 0,h.previous=void 0,h=h.next);for(i.events=[],h?(h._tokenizer=void 0,h.previous=void 0):g.pop(),p=g.length;p--;){const t=o.slice(g[p],g[p+1]),n=s.pop();l.unshift([n,n+t.length-1]),ri(e,n,2,t)}for(p=-1;++p<l.length;)c[m+l[p][0]]=m+l[p][1],m+=l[p][1]-l[p][0]-1;return c}const li={}.hasOwnProperty;function ci(e,t){let n;for(n in t){const a=(li.call(e,n)?e[n]:void 0)||(e[n]={}),r=t[n];let s;if(r)for(s in r){li.call(a,s)||(a[s]=[]);const e=r[s];ui(a[s],Array.isArray(e)?e:e?[e]:[])}}}function ui(e,t){let n=-1;const a=[];for(;++n<t.length;)("after"===t[n].add?e:a).push(t[n]);ri(e,0,0,a)}const di=wi(/\p{P}/u),pi=wi(/[A-Za-z]/),hi=wi(/[\dA-Za-z]/),mi=wi(/[#-'*+\--9=?A-Z^-~]/);function fi(e){return null!==e&&(e<32||127===e)}const gi=wi(/\d/),yi=wi(/[\dA-Fa-f]/),bi=wi(/[!-/:-@[-`{-~]/);function vi(e){return null!==e&&e<-2}function ki(e){return null!==e&&(e<0||32===e)}function xi(e){return-2===e||-1===e||32===e}const Si=wi(/\s/);function wi(e){return function(t){return null!==t&&t>-1&&e.test(String.fromCharCode(t))}}function Ci(e,t,n,a){const r=a?a-1:Number.POSITIVE_INFINITY;let s=0;return function(a){if(xi(a))return e.enter(n),i(a);return t(a)};function i(a){return xi(a)&&s++<r?(e.consume(a),i):(e.exit(n),t(a))}}const Ai={tokenize:function(e){const t=e.attempt(this.parser.constructs.contentInitial,(function(n){if(null===n)return void e.consume(n);return e.enter("lineEnding"),e.consume(n),e.exit("lineEnding"),Ci(e,t,"linePrefix")}),(function(t){return e.enter("paragraph"),a(t)}));let n;return t;function a(t){const a=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=a),n=a,r(t)}function r(t){return null===t?(e.exit("chunkText"),e.exit("paragraph"),void e.consume(t)):vi(t)?(e.consume(t),e.exit("chunkText"),a):(e.consume(t),r)}}};const ji={tokenize:function(e){const t=this,n=[];let a,r,s,i=0;return o;function o(a){if(i<n.length){const r=n[i];return t.containerState=r[1],e.attempt(r[0].continuation,l,c)(a)}return c(a)}function l(e){if(i++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,a&&b();const n=t.events.length;let r,s=n;for(;s--;)if("exit"===t.events[s][0]&&"chunkFlow"===t.events[s][1].type){r=t.events[s][1].end;break}y(i);let o=n;for(;o<t.events.length;)t.events[o][1].end=Object.assign({},r),o++;return ri(t.events,s+1,0,t.events.slice(n)),t.events.length=o,c(e)}return o(e)}function c(r){if(i===n.length){if(!a)return p(r);if(a.currentConstruct&&a.currentConstruct.concrete)return m(r);t.interrupt=Boolean(a.currentConstruct&&!a._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(Di,u,d)(r)}function u(e){return a&&b(),y(i),p(e)}function d(e){return t.parser.lazy[t.now().line]=i!==n.length,s=t.now().offset,m(e)}function p(n){return t.containerState={},e.attempt(Di,h,m)(n)}function h(e){return i++,n.push([t.currentConstruct,t.containerState]),p(e)}function m(n){return null===n?(a&&b(),y(0),void e.consume(n)):(a=a||t.parser.flow(t.now()),e.enter("chunkFlow",{contentType:"flow",previous:r,_tokenizer:a}),f(n))}function f(n){return null===n?(g(e.exit("chunkFlow"),!0),y(0),void e.consume(n)):vi(n)?(e.consume(n),g(e.exit("chunkFlow")),i=0,t.interrupt=void 0,o):(e.consume(n),f)}function g(e,n){const o=t.sliceStream(e);if(n&&o.push(null),e.previous=r,r&&(r.next=e),r=e,a.defineSkip(e.start),a.write(o),t.parser.lazy[e.start.line]){let e=a.events.length;for(;e--;)if(a.events[e][1].start.offset<s&&(!a.events[e][1].end||a.events[e][1].end.offset>s))return;const n=t.events.length;let r,o,l=n;for(;l--;)if("exit"===t.events[l][0]&&"chunkFlow"===t.events[l][1].type){if(r){o=t.events[l][1].end;break}r=!0}for(y(i),e=n;e<t.events.length;)t.events[e][1].end=Object.assign({},o),e++;ri(t.events,l+1,0,t.events.slice(n)),t.events.length=e}}function y(a){let r=n.length;for(;r-- >a;){const a=n[r];t.containerState=a[1],a[0].exit.call(t,e)}n.length=a}function b(){a.write([null]),r=void 0,a=void 0,t.containerState._closeFlow=void 0}}},Di={tokenize:function(e,t,n){return Ci(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}};const Ei={tokenize:function(e,t,n){return function(t){return xi(t)?Ci(e,a,"linePrefix")(t):a(t)};function a(e){return null===e||vi(e)?t(e):n(e)}},partial:!0};const Ii={tokenize:function(e,t){let n;return function(t){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),a(t)};function a(t){return null===t?r(t):vi(t)?e.check(Ni,s,r)(t):(e.consume(t),a)}function r(n){return e.exit("chunkContent"),e.exit("content"),t(n)}function s(t){return e.consume(t),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,a}},resolve:function(e){return ii(e),e}},Ni={tokenize:function(e,t,n){const a=this;return function(t){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),Ci(e,r,"linePrefix")};function r(r){if(null===r||vi(r))return n(r);const s=a.events[a.events.length-1];return!a.parser.constructs.disable.null.includes("codeIndented")&&s&&"linePrefix"===s[1].type&&s[2].sliceSerialize(s[1],!0).length>=4?t(r):e.interrupt(a.parser.constructs.flow,n,t)(r)}},partial:!0};const Pi={tokenize:function(e){const t=this,n=e.attempt(Ei,(function(a){if(null===a)return void e.consume(a);return e.enter("lineEndingBlank"),e.consume(a),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}),e.attempt(this.parser.constructs.flowInitial,a,Ci(e,e.attempt(this.parser.constructs.flow,a,e.attempt(Ii,a)),"linePrefix")));return n;function a(a){if(null!==a)return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),t.currentConstruct=void 0,n;e.consume(a)}}};const Mi={resolveAll:Ri()},Bi=Ti("string"),Fi=Ti("text");function Ti(e){return{tokenize:function(t){const n=this,a=this.parser.constructs[e],r=t.attempt(a,s,i);return s;function s(e){return l(e)?r(e):i(e)}function i(e){if(null!==e)return t.enter("data"),t.consume(e),o;t.consume(e)}function o(e){return l(e)?(t.exit("data"),r(e)):(t.consume(e),o)}function l(e){if(null===e)return!0;const t=a[e];let r=-1;if(t)for(;++r<t.length;){const e=t[r];if(!e.previous||e.previous.call(n,n.previous))return!0}return!1}},resolveAll:Ri("text"===e?qi:void 0)}}function Ri(e){return function(t,n){let a,r=-1;for(;++r<=t.length;)void 0===a?t[r]&&"data"===t[r][1].type&&(a=r,r++):t[r]&&"data"===t[r][1].type||(r!==a+2&&(t[a][1].end=t[r-1][1].end,t.splice(a+2,r-a-2),r=a+2),a=void 0);return e?e(t,n):t}}function qi(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||"lineEnding"===e[n][1].type)&&"data"===e[n-1][1].type){const a=e[n-1][1],r=t.sliceStream(a);let s,i=r.length,o=-1,l=0;for(;i--;){const e=r[i];if("string"===typeof e){for(o=e.length;32===e.charCodeAt(o-1);)l++,o--;if(o)break;o=-1}else if(-2===e)s=!0,l++;else if(-1!==e){i++;break}}if(l){const r={type:n===e.length||s||l<2?"lineSuffix":"hardBreakTrailing",start:{line:a.end.line,column:a.end.column-l,offset:a.end.offset-l,_index:a.start._index+i,_bufferIndex:i?o:a.start._bufferIndex+o},end:Object.assign({},a.end)};a.end=Object.assign({},r.start),a.start.offset===a.end.offset?Object.assign(a,r):(e.splice(n,0,["enter",r,t],["exit",r,t]),n+=2)}n++}return e}function Li(e,t,n){const a=[];let r=-1;for(;++r<e.length;){const s=e[r].resolveAll;s&&!a.includes(s)&&(t=s(t,n),a.push(s))}return t}function zi(e,t,n){let a=Object.assign(n?Object.assign({},n):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const r={},s=[];let i=[],o=[],l=!0;const c={consume:function(e){vi(e)?(a.line++,a.column=1,a.offset+=-3===e?2:1,k()):-1!==e&&(a.column++,a.offset++);a._bufferIndex<0?a._index++:(a._bufferIndex++,a._bufferIndex===i[a._index].length&&(a._bufferIndex=-1,a._index++));u.previous=e,l=!0},enter:function(e,t){const n=t||{};return n.type=e,n.start=m(),u.events.push(["enter",n,u]),o.push(n),n},exit:function(e){const t=o.pop();return t.end=m(),u.events.push(["exit",t,u]),t},attempt:b((function(e,t){v(e,t.from)})),check:b(y),interrupt:b(y,{interrupt:!0})},u={previous:null,code:null,containerState:{},events:[],parser:e,sliceStream:h,sliceSerialize:function(e,t){return function(e,t){let n=-1;const a=[];let r;for(;++n<e.length;){const s=e[n];let i;if("string"===typeof s)i=s;else switch(s){case-5:i="\r";break;case-4:i="\n";break;case-3:i="\r\n";break;case-2:i=t?" ":"\t";break;case-1:if(!t&&r)continue;i=" ";break;default:i=String.fromCharCode(s)}r=-2===s,a.push(i)}return a.join("")}(h(e),t)},now:m,defineSkip:function(e){r[e.line]=e.column,k()},write:function(e){if(i=si(i,e),f(),null!==i[i.length-1])return[];return v(t,0),u.events=Li(s,u.events,u),u.events}};let d,p=t.tokenize.call(u,c);return t.resolveAll&&s.push(t),u;function h(e){return function(e,t){const n=t.start._index,a=t.start._bufferIndex,r=t.end._index,s=t.end._bufferIndex;let i;if(n===r)i=[e[n].slice(a,s)];else{if(i=e.slice(n,r),a>-1){const e=i[0];"string"===typeof e?i[0]=e.slice(a):i.shift()}s>0&&i.push(e[r].slice(0,s))}return i}(i,e)}function m(){const{line:e,column:t,offset:n,_index:r,_bufferIndex:s}=a;return{line:e,column:t,offset:n,_index:r,_bufferIndex:s}}function f(){let e;for(;a._index<i.length;){const t=i[a._index];if("string"===typeof t)for(e=a._index,a._bufferIndex<0&&(a._bufferIndex=0);a._index===e&&a._bufferIndex<t.length;)g(t.charCodeAt(a._bufferIndex));else g(t)}}function g(e){l=void 0,d=e,p=p(e)}function y(e,t){t.restore()}function b(e,t){return function(n,r,s){let i,d,p,h;return Array.isArray(n)?f(n):"tokenize"in n?f([n]):function(e){return t;function t(t){const n=null!==t&&e[t],a=null!==t&&e.null;return f([...Array.isArray(n)?n:n?[n]:[],...Array.isArray(a)?a:a?[a]:[]])(t)}}(n);function f(e){return i=e,d=0,0===e.length?s:g(e[d])}function g(e){return function(n){h=function(){const e=m(),t=u.previous,n=u.currentConstruct,r=u.events.length,s=Array.from(o);return{restore:i,from:r};function i(){a=e,u.previous=t,u.currentConstruct=n,u.events.length=r,o=s,k()}}(),p=e,e.partial||(u.currentConstruct=e);if(e.name&&u.parser.constructs.disable.null.includes(e.name))return b(n);return e.tokenize.call(t?Object.assign(Object.create(u),t):u,c,y,b)(n)}}function y(t){return l=!0,e(p,h),r}function b(e){return l=!0,h.restore(),++d<i.length?g(i[d]):s}}}function v(e,t){e.resolveAll&&!s.includes(e)&&s.push(e),e.resolve&&ri(u.events,t,u.events.length-t,e.resolve(u.events.slice(t),u)),e.resolveTo&&(u.events=e.resolveTo(u.events,u))}function k(){a.line in r&&a.column<2&&(a.column=r[a.line],a.offset+=r[a.line]-1)}}const Oi={name:"thematicBreak",tokenize:function(e,t,n){let a,r=0;return function(t){return e.enter("thematicBreak"),function(e){return a=e,s(e)}(t)};function s(s){return s===a?(e.enter("thematicBreakSequence"),i(s)):r>=3&&(null===s||vi(s))?(e.exit("thematicBreak"),t(s)):n(s)}function i(t){return t===a?(e.consume(t),r++,i):(e.exit("thematicBreakSequence"),xi(t)?Ci(e,s,"whitespace")(t):s(t))}}};const Hi={name:"list",tokenize:function(e,t,n){const a=this,r=a.events[a.events.length-1];let s=r&&"linePrefix"===r[1].type?r[2].sliceSerialize(r[1],!0).length:0,i=0;return function(t){const r=a.containerState.type||(42===t||43===t||45===t?"listUnordered":"listOrdered");if("listUnordered"===r?!a.containerState.marker||t===a.containerState.marker:gi(t)){if(a.containerState.type||(a.containerState.type=r,e.enter(r,{_container:!0})),"listUnordered"===r)return e.enter("listItemPrefix"),42===t||45===t?e.check(Oi,n,l)(t):l(t);if(!a.interrupt||49===t)return e.enter("listItemPrefix"),e.enter("listItemValue"),o(t)}return n(t)};function o(t){return gi(t)&&++i<10?(e.consume(t),o):(!a.interrupt||i<2)&&(a.containerState.marker?t===a.containerState.marker:41===t||46===t)?(e.exit("listItemValue"),l(t)):n(t)}function l(t){return e.enter("listItemMarker"),e.consume(t),e.exit("listItemMarker"),a.containerState.marker=a.containerState.marker||t,e.check(Ei,a.interrupt?n:c,e.attempt(_i,d,u))}function c(e){return a.containerState.initialBlankLine=!0,s++,d(e)}function u(t){return xi(t)?(e.enter("listItemPrefixWhitespace"),e.consume(t),e.exit("listItemPrefixWhitespace"),d):n(t)}function d(n){return a.containerState.size=s+a.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(n)}},continuation:{tokenize:function(e,t,n){const a=this;return a.containerState._closeFlow=void 0,e.check(Ei,r,s);function r(n){return a.containerState.furtherBlankLines=a.containerState.furtherBlankLines||a.containerState.initialBlankLine,Ci(e,t,"listItemIndent",a.containerState.size+1)(n)}function s(n){return a.containerState.furtherBlankLines||!xi(n)?(a.containerState.furtherBlankLines=void 0,a.containerState.initialBlankLine=void 0,i(n)):(a.containerState.furtherBlankLines=void 0,a.containerState.initialBlankLine=void 0,e.attempt(Ui,t,i)(n))}function i(r){return a.containerState._closeFlow=!0,a.interrupt=void 0,Ci(e,e.attempt(Hi,t,n),"linePrefix",a.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(r)}}},exit:function(e){e.exit(this.containerState.type)}},_i={tokenize:function(e,t,n){const a=this;return Ci(e,(function(e){const r=a.events[a.events.length-1];return!xi(e)&&r&&"listItemPrefixWhitespace"===r[1].type?t(e):n(e)}),"listItemPrefixWhitespace",a.parser.constructs.disable.null.includes("codeIndented")?void 0:5)},partial:!0},Ui={tokenize:function(e,t,n){const a=this;return Ci(e,(function(e){const r=a.events[a.events.length-1];return r&&"listItemIndent"===r[1].type&&r[2].sliceSerialize(r[1],!0).length===a.containerState.size?t(e):n(e)}),"listItemIndent",a.containerState.size+1)},partial:!0};const Wi={name:"blockQuote",tokenize:function(e,t,n){const a=this;return function(t){if(62===t){const n=a.containerState;return n.open||(e.enter("blockQuote",{_container:!0}),n.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(t),e.exit("blockQuoteMarker"),r}return n(t)};function r(n){return xi(n)?(e.enter("blockQuotePrefixWhitespace"),e.consume(n),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(n))}},continuation:{tokenize:function(e,t,n){const a=this;return function(t){if(xi(t))return Ci(e,r,"linePrefix",a.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t);return r(t)};function r(a){return e.attempt(Wi,t,n)(a)}}},exit:function(e){e.exit("blockQuote")}};function Vi(e,t,n,a,r,s,i,o,l){const c=l||Number.POSITIVE_INFINITY;let u=0;return function(t){if(60===t)return e.enter(a),e.enter(r),e.enter(s),e.consume(t),e.exit(s),d;if(null===t||32===t||41===t||fi(t))return n(t);return e.enter(a),e.enter(i),e.enter(o),e.enter("chunkString",{contentType:"string"}),m(t)};function d(n){return 62===n?(e.enter(s),e.consume(n),e.exit(s),e.exit(r),e.exit(a),t):(e.enter(o),e.enter("chunkString",{contentType:"string"}),p(n))}function p(t){return 62===t?(e.exit("chunkString"),e.exit(o),d(t)):null===t||60===t||vi(t)?n(t):(e.consume(t),92===t?h:p)}function h(t){return 60===t||62===t||92===t?(e.consume(t),p):p(t)}function m(r){return u||null!==r&&41!==r&&!ki(r)?u<c&&40===r?(e.consume(r),u++,m):41===r?(e.consume(r),u--,m):null===r||32===r||40===r||fi(r)?n(r):(e.consume(r),92===r?f:m):(e.exit("chunkString"),e.exit(o),e.exit(i),e.exit(a),t(r))}function f(t){return 40===t||41===t||92===t?(e.consume(t),m):m(t)}}function Qi(e,t,n,a,r,s){const i=this;let o,l=0;return function(t){return e.enter(a),e.enter(r),e.consume(t),e.exit(r),e.enter(s),c};function c(d){return l>999||null===d||91===d||93===d&&!o||94===d&&!l&&"_hiddenFootnoteSupport"in i.parser.constructs?n(d):93===d?(e.exit(s),e.enter(r),e.consume(d),e.exit(r),e.exit(a),t):vi(d)?(e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),c):(e.enter("chunkString",{contentType:"string"}),u(d))}function u(t){return null===t||91===t||93===t||vi(t)||l++>999?(e.exit("chunkString"),c(t)):(e.consume(t),o||(o=!xi(t)),92===t?d:u)}function d(t){return 91===t||92===t||93===t?(e.consume(t),l++,u):u(t)}}function Xi(e,t,n,a,r,s){let i;return function(t){if(34===t||39===t||40===t)return e.enter(a),e.enter(r),e.consume(t),e.exit(r),i=40===t?41:t,o;return n(t)};function o(n){return n===i?(e.enter(r),e.consume(n),e.exit(r),e.exit(a),t):(e.enter(s),l(n))}function l(t){return t===i?(e.exit(s),o(i)):null===t?n(t):vi(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),Ci(e,l,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),c(t))}function c(t){return t===i||null===t||vi(t)?(e.exit("chunkString"),l(t)):(e.consume(t),92===t?u:c)}function u(t){return t===i||92===t?(e.consume(t),c):c(t)}}function Gi(e,t){let n;return function a(r){if(vi(r))return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),n=!0,a;if(xi(r))return Ci(e,a,n?"linePrefix":"lineSuffix")(r);return t(r)}}function Ji(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Yi={name:"definition",tokenize:function(e,t,n){const a=this;let r;return function(t){return e.enter("definition"),function(t){return Qi.call(a,e,s,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(t)}(t)};function s(t){return r=Ji(a.sliceSerialize(a.events[a.events.length-1][1]).slice(1,-1)),58===t?(e.enter("definitionMarker"),e.consume(t),e.exit("definitionMarker"),i):n(t)}function i(t){return ki(t)?Gi(e,o)(t):o(t)}function o(t){return Vi(e,l,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(t)}function l(t){return e.attempt(Ki,c,c)(t)}function c(t){return xi(t)?Ci(e,u,"whitespace")(t):u(t)}function u(s){return null===s||vi(s)?(e.exit("definition"),a.parser.defined.push(r),t(s)):n(s)}}},Ki={tokenize:function(e,t,n){return function(t){return ki(t)?Gi(e,a)(t):n(t)};function a(t){return Xi(e,r,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(t)}function r(t){return xi(t)?Ci(e,s,"whitespace")(t):s(t)}function s(e){return null===e||vi(e)?t(e):n(e)}},partial:!0};const Zi={name:"codeIndented",tokenize:function(e,t,n){const a=this;return function(t){return e.enter("codeIndented"),Ci(e,r,"linePrefix",5)(t)};function r(e){const t=a.events[a.events.length-1];return t&&"linePrefix"===t[1].type&&t[2].sliceSerialize(t[1],!0).length>=4?s(e):n(e)}function s(t){return null===t?o(t):vi(t)?e.attempt($i,s,o)(t):(e.enter("codeFlowValue"),i(t))}function i(t){return null===t||vi(t)?(e.exit("codeFlowValue"),s(t)):(e.consume(t),i)}function o(n){return e.exit("codeIndented"),t(n)}}},$i={tokenize:function(e,t,n){const a=this;return r;function r(t){return a.parser.lazy[a.now().line]?n(t):vi(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),r):Ci(e,s,"linePrefix",5)(t)}function s(e){const s=a.events[a.events.length-1];return s&&"linePrefix"===s[1].type&&s[2].sliceSerialize(s[1],!0).length>=4?t(e):vi(e)?r(e):n(e)}},partial:!0};const eo={name:"headingAtx",tokenize:function(e,t,n){let a=0;return function(t){return e.enter("atxHeading"),function(t){return e.enter("atxHeadingSequence"),r(t)}(t)};function r(t){return 35===t&&a++<6?(e.consume(t),r):null===t||ki(t)?(e.exit("atxHeadingSequence"),s(t)):n(t)}function s(n){return 35===n?(e.enter("atxHeadingSequence"),i(n)):null===n||vi(n)?(e.exit("atxHeading"),t(n)):xi(n)?Ci(e,s,"whitespace")(n):(e.enter("atxHeadingText"),o(n))}function i(t){return 35===t?(e.consume(t),i):(e.exit("atxHeadingSequence"),s(t))}function o(t){return null===t||35===t||ki(t)?(e.exit("atxHeadingText"),s(t)):(e.consume(t),o)}},resolve:function(e,t){let n,a,r=e.length-2,s=3;"whitespace"===e[s][1].type&&(s+=2);r-2>s&&"whitespace"===e[r][1].type&&(r-=2);"atxHeadingSequence"===e[r][1].type&&(s===r-1||r-4>s&&"whitespace"===e[r-2][1].type)&&(r-=s+1===r?2:4);r>s&&(n={type:"atxHeadingText",start:e[s][1].start,end:e[r][1].end},a={type:"chunkText",start:e[s][1].start,end:e[r][1].end,contentType:"text"},ri(e,s,r-s+1,[["enter",n,t],["enter",a,t],["exit",a,t],["exit",n,t]]));return e}};const to={name:"setextUnderline",tokenize:function(e,t,n){const a=this;let r;return function(t){let i,o=a.events.length;for(;o--;)if("lineEnding"!==a.events[o][1].type&&"linePrefix"!==a.events[o][1].type&&"content"!==a.events[o][1].type){i="paragraph"===a.events[o][1].type;break}if(!a.parser.lazy[a.now().line]&&(a.interrupt||i))return e.enter("setextHeadingLine"),r=t,function(t){return e.enter("setextHeadingLineSequence"),s(t)}(t);return n(t)};function s(t){return t===r?(e.consume(t),s):(e.exit("setextHeadingLineSequence"),xi(t)?Ci(e,i,"lineSuffix")(t):i(t))}function i(a){return null===a||vi(a)?(e.exit("setextHeadingLine"),t(a)):n(a)}},resolveTo:function(e,t){let n,a,r,s=e.length;for(;s--;)if("enter"===e[s][0]){if("content"===e[s][1].type){n=s;break}"paragraph"===e[s][1].type&&(a=s)}else"content"===e[s][1].type&&e.splice(s,1),r||"definition"!==e[s][1].type||(r=s);const i={type:"setextHeading",start:Object.assign({},e[a][1].start),end:Object.assign({},e[e.length-1][1].end)};e[a][1].type="setextHeadingText",r?(e.splice(a,0,["enter",i,t]),e.splice(r+1,0,["exit",e[n][1],t]),e[n][1].end=Object.assign({},e[r][1].end)):e[n][1]=i;return e.push(["exit",i,t]),e}};const no=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],ao=["pre","script","style","textarea"],ro={name:"htmlFlow",tokenize:function(e,t,n){const a=this;let r,s,i,o,l;return function(t){return function(t){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(t),c}(t)};function c(o){return 33===o?(e.consume(o),u):47===o?(e.consume(o),s=!0,h):63===o?(e.consume(o),r=3,a.interrupt?t:F):pi(o)?(e.consume(o),i=String.fromCharCode(o),m):n(o)}function u(s){return 45===s?(e.consume(s),r=2,d):91===s?(e.consume(s),r=5,o=0,p):pi(s)?(e.consume(s),r=4,a.interrupt?t:F):n(s)}function d(r){return 45===r?(e.consume(r),a.interrupt?t:F):n(r)}function p(r){const s="CDATA[";return r===s.charCodeAt(o++)?(e.consume(r),6===o?a.interrupt?t:j:p):n(r)}function h(t){return pi(t)?(e.consume(t),i=String.fromCharCode(t),m):n(t)}function m(o){if(null===o||47===o||62===o||ki(o)){const l=47===o,c=i.toLowerCase();return l||s||!ao.includes(c)?no.includes(i.toLowerCase())?(r=6,l?(e.consume(o),f):a.interrupt?t(o):j(o)):(r=7,a.interrupt&&!a.parser.lazy[a.now().line]?n(o):s?g(o):y(o)):(r=1,a.interrupt?t(o):j(o))}return 45===o||hi(o)?(e.consume(o),i+=String.fromCharCode(o),m):n(o)}function f(r){return 62===r?(e.consume(r),a.interrupt?t:j):n(r)}function g(t){return xi(t)?(e.consume(t),g):C(t)}function y(t){return 47===t?(e.consume(t),C):58===t||95===t||pi(t)?(e.consume(t),b):xi(t)?(e.consume(t),y):C(t)}function b(t){return 45===t||46===t||58===t||95===t||hi(t)?(e.consume(t),b):v(t)}function v(t){return 61===t?(e.consume(t),k):xi(t)?(e.consume(t),v):y(t)}function k(t){return null===t||60===t||61===t||62===t||96===t?n(t):34===t||39===t?(e.consume(t),l=t,x):xi(t)?(e.consume(t),k):S(t)}function x(t){return t===l?(e.consume(t),l=null,w):null===t||vi(t)?n(t):(e.consume(t),x)}function S(t){return null===t||34===t||39===t||47===t||60===t||61===t||62===t||96===t||ki(t)?v(t):(e.consume(t),S)}function w(e){return 47===e||62===e||xi(e)?y(e):n(e)}function C(t){return 62===t?(e.consume(t),A):n(t)}function A(t){return null===t||vi(t)?j(t):xi(t)?(e.consume(t),A):n(t)}function j(t){return 45===t&&2===r?(e.consume(t),N):60===t&&1===r?(e.consume(t),P):62===t&&4===r?(e.consume(t),T):63===t&&3===r?(e.consume(t),F):93===t&&5===r?(e.consume(t),B):!vi(t)||6!==r&&7!==r?null===t||vi(t)?(e.exit("htmlFlowData"),D(t)):(e.consume(t),j):(e.exit("htmlFlowData"),e.check(so,R,D)(t))}function D(t){return e.check(io,E,R)(t)}function E(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),I}function I(t){return null===t||vi(t)?D(t):(e.enter("htmlFlowData"),j(t))}function N(t){return 45===t?(e.consume(t),F):j(t)}function P(t){return 47===t?(e.consume(t),i="",M):j(t)}function M(t){if(62===t){const n=i.toLowerCase();return ao.includes(n)?(e.consume(t),T):j(t)}return pi(t)&&i.length<8?(e.consume(t),i+=String.fromCharCode(t),M):j(t)}function B(t){return 93===t?(e.consume(t),F):j(t)}function F(t){return 62===t?(e.consume(t),T):45===t&&2===r?(e.consume(t),F):j(t)}function T(t){return null===t||vi(t)?(e.exit("htmlFlowData"),R(t)):(e.consume(t),T)}function R(n){return e.exit("htmlFlow"),t(n)}},resolveTo:function(e){let t=e.length;for(;t--&&("enter"!==e[t][0]||"htmlFlow"!==e[t][1].type););t>1&&"linePrefix"===e[t-2][1].type&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2));return e},concrete:!0},so={tokenize:function(e,t,n){return function(a){return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),e.attempt(Ei,t,n)}},partial:!0},io={tokenize:function(e,t,n){const a=this;return function(t){if(vi(t))return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),r;return n(t)};function r(e){return a.parser.lazy[a.now().line]?n(e):t(e)}},partial:!0};const oo={tokenize:function(e,t,n){const a=this;return function(t){if(null===t)return n(t);return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),r};function r(e){return a.parser.lazy[a.now().line]?n(e):t(e)}},partial:!0},lo={name:"codeFenced",tokenize:function(e,t,n){const a=this,r={tokenize:function(e,t,n){let r=0;return i;function i(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),l}function l(t){return e.enter("codeFencedFence"),xi(t)?Ci(e,c,"linePrefix",a.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t):c(t)}function c(t){return t===s?(e.enter("codeFencedFenceSequence"),u(t)):n(t)}function u(t){return t===s?(r++,e.consume(t),u):r>=o?(e.exit("codeFencedFenceSequence"),xi(t)?Ci(e,d,"whitespace")(t):d(t)):n(t)}function d(a){return null===a||vi(a)?(e.exit("codeFencedFence"),t(a)):n(a)}},partial:!0};let s,i=0,o=0;return function(t){return function(t){const n=a.events[a.events.length-1];return i=n&&"linePrefix"===n[1].type?n[2].sliceSerialize(n[1],!0).length:0,s=t,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),l(t)}(t)};function l(t){return t===s?(o++,e.consume(t),l):o<3?n(t):(e.exit("codeFencedFenceSequence"),xi(t)?Ci(e,c,"whitespace")(t):c(t))}function c(n){return null===n||vi(n)?(e.exit("codeFencedFence"),a.interrupt?t(n):e.check(oo,h,b)(n)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),u(n))}function u(t){return null===t||vi(t)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),c(t)):xi(t)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),Ci(e,d,"whitespace")(t)):96===t&&t===s?n(t):(e.consume(t),u)}function d(t){return null===t||vi(t)?c(t):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),p(t))}function p(t){return null===t||vi(t)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),c(t)):96===t&&t===s?n(t):(e.consume(t),p)}function h(t){return e.attempt(r,b,m)(t)}function m(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),f}function f(t){return i>0&&xi(t)?Ci(e,g,"linePrefix",i+1)(t):g(t)}function g(t){return null===t||vi(t)?e.check(oo,h,b)(t):(e.enter("codeFlowValue"),y(t))}function y(t){return null===t||vi(t)?(e.exit("codeFlowValue"),g(t)):(e.consume(t),y)}function b(n){return e.exit("codeFenced"),t(n)}},concrete:!0};const co=document.createElement("i");function uo(e){const t="&"+e+";";co.innerHTML=t;const n=co.textContent;return(59!==n.charCodeAt(n.length-1)||"semi"===e)&&(n!==t&&n)}const po={name:"characterReference",tokenize:function(e,t,n){const a=this;let r,s,i=0;return function(t){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(t),e.exit("characterReferenceMarker"),o};function o(t){return 35===t?(e.enter("characterReferenceMarkerNumeric"),e.consume(t),e.exit("characterReferenceMarkerNumeric"),l):(e.enter("characterReferenceValue"),r=31,s=hi,c(t))}function l(t){return 88===t||120===t?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(t),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),r=6,s=yi,c):(e.enter("characterReferenceValue"),r=7,s=gi,c(t))}function c(o){if(59===o&&i){const r=e.exit("characterReferenceValue");return s!==hi||uo(a.sliceSerialize(r))?(e.enter("characterReferenceMarker"),e.consume(o),e.exit("characterReferenceMarker"),e.exit("characterReference"),t):n(o)}return s(o)&&i++<r?(e.consume(o),c):n(o)}}};const ho={name:"characterEscape",tokenize:function(e,t,n){return function(t){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(t),e.exit("escapeMarker"),a};function a(a){return bi(a)?(e.enter("characterEscapeValue"),e.consume(a),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(a)}}};const mo={name:"lineEnding",tokenize:function(e,t){return function(n){return e.enter("lineEnding"),e.consume(n),e.exit("lineEnding"),Ci(e,t,"linePrefix")}}};const fo={name:"labelEnd",tokenize:function(e,t,n){const a=this;let r,s,i=a.events.length;for(;i--;)if(("labelImage"===a.events[i][1].type||"labelLink"===a.events[i][1].type)&&!a.events[i][1]._balanced){r=a.events[i][1];break}return function(t){if(!r)return n(t);if(r._inactive)return u(t);return s=a.parser.defined.includes(Ji(a.sliceSerialize({start:r.end,end:a.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelEnd"),o};function o(t){return 40===t?e.attempt(go,c,s?c:u)(t):91===t?e.attempt(yo,c,s?l:u)(t):s?c(t):u(t)}function l(t){return e.attempt(bo,c,u)(t)}function c(e){return t(e)}function u(e){return r._balanced=!0,n(e)}},resolveTo:function(e,t){let n,a,r,s,i=e.length,o=0;for(;i--;)if(n=e[i][1],a){if("link"===n.type||"labelLink"===n.type&&n._inactive)break;"enter"===e[i][0]&&"labelLink"===n.type&&(n._inactive=!0)}else if(r){if("enter"===e[i][0]&&("labelImage"===n.type||"labelLink"===n.type)&&!n._balanced&&(a=i,"labelLink"!==n.type)){o=2;break}}else"labelEnd"===n.type&&(r=i);const l={type:"labelLink"===e[a][1].type?"link":"image",start:Object.assign({},e[a][1].start),end:Object.assign({},e[e.length-1][1].end)},c={type:"label",start:Object.assign({},e[a][1].start),end:Object.assign({},e[r][1].end)},u={type:"labelText",start:Object.assign({},e[a+o+2][1].end),end:Object.assign({},e[r-2][1].start)};return s=[["enter",l,t],["enter",c,t]],s=si(s,e.slice(a+1,a+o+3)),s=si(s,[["enter",u,t]]),s=si(s,Li(t.parser.constructs.insideSpan.null,e.slice(a+o+4,r-3),t)),s=si(s,[["exit",u,t],e[r-2],e[r-1],["exit",c,t]]),s=si(s,e.slice(r+1)),s=si(s,[["exit",l,t]]),ri(e,a,e.length,s),e},resolveAll:function(e){let t=-1;for(;++t<e.length;){const n=e[t][1];"labelImage"!==n.type&&"labelLink"!==n.type&&"labelEnd"!==n.type||(e.splice(t+1,"labelImage"===n.type?4:2),n.type="data",t++)}return e}},go={tokenize:function(e,t,n){return function(t){return e.enter("resource"),e.enter("resourceMarker"),e.consume(t),e.exit("resourceMarker"),a};function a(t){return ki(t)?Gi(e,r)(t):r(t)}function r(t){return 41===t?c(t):Vi(e,s,i,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(t)}function s(t){return ki(t)?Gi(e,o)(t):c(t)}function i(e){return n(e)}function o(t){return 34===t||39===t||40===t?Xi(e,l,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(t):c(t)}function l(t){return ki(t)?Gi(e,c)(t):c(t)}function c(a){return 41===a?(e.enter("resourceMarker"),e.consume(a),e.exit("resourceMarker"),e.exit("resource"),t):n(a)}}},yo={tokenize:function(e,t,n){const a=this;return function(t){return Qi.call(a,e,r,s,"reference","referenceMarker","referenceString")(t)};function r(e){return a.parser.defined.includes(Ji(a.sliceSerialize(a.events[a.events.length-1][1]).slice(1,-1)))?t(e):n(e)}function s(e){return n(e)}}},bo={tokenize:function(e,t,n){return function(t){return e.enter("reference"),e.enter("referenceMarker"),e.consume(t),e.exit("referenceMarker"),a};function a(a){return 93===a?(e.enter("referenceMarker"),e.consume(a),e.exit("referenceMarker"),e.exit("reference"),t):n(a)}}};const vo={name:"labelStartImage",tokenize:function(e,t,n){const a=this;return function(t){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(t),e.exit("labelImageMarker"),r};function r(t){return 91===t?(e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelImage"),s):n(t)}function s(e){return 94===e&&"_hiddenFootnoteSupport"in a.parser.constructs?n(e):t(e)}},resolveAll:fo.resolveAll};function ko(e){return null===e||ki(e)||Si(e)?1:function(e){return bi(e)||di(e)}(e)?2:void 0}const xo={name:"attention",tokenize:function(e,t){const n=this.parser.constructs.attentionMarkers.null,a=this.previous,r=ko(a);let s;return function(t){return s=t,e.enter("attentionSequence"),i(t)};function i(o){if(o===s)return e.consume(o),i;const l=e.exit("attentionSequence"),c=ko(o),u=!c||2===c&&r||n.includes(o),d=!r||2===r&&c||n.includes(a);return l._open=Boolean(42===s?u:u&&(r||!d)),l._close=Boolean(42===s?d:d&&(c||!u)),t(o)}},resolveAll:function(e,t){let n,a,r,s,i,o,l,c,u=-1;for(;++u<e.length;)if("enter"===e[u][0]&&"attentionSequence"===e[u][1].type&&e[u][1]._close)for(n=u;n--;)if("exit"===e[n][0]&&"attentionSequence"===e[n][1].type&&e[n][1]._open&&t.sliceSerialize(e[n][1]).charCodeAt(0)===t.sliceSerialize(e[u][1]).charCodeAt(0)){if((e[n][1]._close||e[u][1]._open)&&(e[u][1].end.offset-e[u][1].start.offset)%3&&!((e[n][1].end.offset-e[n][1].start.offset+e[u][1].end.offset-e[u][1].start.offset)%3))continue;o=e[n][1].end.offset-e[n][1].start.offset>1&&e[u][1].end.offset-e[u][1].start.offset>1?2:1;const d=Object.assign({},e[n][1].end),p=Object.assign({},e[u][1].start);So(d,-o),So(p,o),s={type:o>1?"strongSequence":"emphasisSequence",start:d,end:Object.assign({},e[n][1].end)},i={type:o>1?"strongSequence":"emphasisSequence",start:Object.assign({},e[u][1].start),end:p},r={type:o>1?"strongText":"emphasisText",start:Object.assign({},e[n][1].end),end:Object.assign({},e[u][1].start)},a={type:o>1?"strong":"emphasis",start:Object.assign({},s.start),end:Object.assign({},i.end)},e[n][1].end=Object.assign({},s.start),e[u][1].start=Object.assign({},i.end),l=[],e[n][1].end.offset-e[n][1].start.offset&&(l=si(l,[["enter",e[n][1],t],["exit",e[n][1],t]])),l=si(l,[["enter",a,t],["enter",s,t],["exit",s,t],["enter",r,t]]),l=si(l,Li(t.parser.constructs.insideSpan.null,e.slice(n+1,u),t)),l=si(l,[["exit",r,t],["enter",i,t],["exit",i,t],["exit",a,t]]),e[u][1].end.offset-e[u][1].start.offset?(c=2,l=si(l,[["enter",e[u][1],t],["exit",e[u][1],t]])):c=0,ri(e,n-1,u-n+3,l),u=n+l.length-c-2;break}u=-1;for(;++u<e.length;)"attentionSequence"===e[u][1].type&&(e[u][1].type="data");return e}};function So(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const wo={name:"autolink",tokenize:function(e,t,n){let a=0;return function(t){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(t),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),r};function r(t){return pi(t)?(e.consume(t),s):l(t)}function s(e){return 43===e||45===e||46===e||hi(e)?(a=1,i(e)):l(e)}function i(t){return 58===t?(e.consume(t),a=0,o):(43===t||45===t||46===t||hi(t))&&a++<32?(e.consume(t),i):(a=0,l(t))}function o(a){return 62===a?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(a),e.exit("autolinkMarker"),e.exit("autolink"),t):null===a||32===a||60===a||fi(a)?n(a):(e.consume(a),o)}function l(t){return 64===t?(e.consume(t),c):mi(t)?(e.consume(t),l):n(t)}function c(e){return hi(e)?u(e):n(e)}function u(n){return 46===n?(e.consume(n),a=0,c):62===n?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(n),e.exit("autolinkMarker"),e.exit("autolink"),t):d(n)}function d(t){if((45===t||hi(t))&&a++<63){const n=45===t?d:u;return e.consume(t),n}return n(t)}}};const Co={name:"htmlText",tokenize:function(e,t,n){const a=this;let r,s,i;return function(t){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(t),o};function o(t){return 33===t?(e.consume(t),l):47===t?(e.consume(t),k):63===t?(e.consume(t),b):pi(t)?(e.consume(t),w):n(t)}function l(t){return 45===t?(e.consume(t),c):91===t?(e.consume(t),s=0,h):pi(t)?(e.consume(t),y):n(t)}function c(t){return 45===t?(e.consume(t),p):n(t)}function u(t){return null===t?n(t):45===t?(e.consume(t),d):vi(t)?(i=u,M(t)):(e.consume(t),u)}function d(t){return 45===t?(e.consume(t),p):u(t)}function p(e){return 62===e?P(e):45===e?d(e):u(e)}function h(t){const a="CDATA[";return t===a.charCodeAt(s++)?(e.consume(t),6===s?m:h):n(t)}function m(t){return null===t?n(t):93===t?(e.consume(t),f):vi(t)?(i=m,M(t)):(e.consume(t),m)}function f(t){return 93===t?(e.consume(t),g):m(t)}function g(t){return 62===t?P(t):93===t?(e.consume(t),g):m(t)}function y(t){return null===t||62===t?P(t):vi(t)?(i=y,M(t)):(e.consume(t),y)}function b(t){return null===t?n(t):63===t?(e.consume(t),v):vi(t)?(i=b,M(t)):(e.consume(t),b)}function v(e){return 62===e?P(e):b(e)}function k(t){return pi(t)?(e.consume(t),x):n(t)}function x(t){return 45===t||hi(t)?(e.consume(t),x):S(t)}function S(t){return vi(t)?(i=S,M(t)):xi(t)?(e.consume(t),S):P(t)}function w(t){return 45===t||hi(t)?(e.consume(t),w):47===t||62===t||ki(t)?C(t):n(t)}function C(t){return 47===t?(e.consume(t),P):58===t||95===t||pi(t)?(e.consume(t),A):vi(t)?(i=C,M(t)):xi(t)?(e.consume(t),C):P(t)}function A(t){return 45===t||46===t||58===t||95===t||hi(t)?(e.consume(t),A):j(t)}function j(t){return 61===t?(e.consume(t),D):vi(t)?(i=j,M(t)):xi(t)?(e.consume(t),j):C(t)}function D(t){return null===t||60===t||61===t||62===t||96===t?n(t):34===t||39===t?(e.consume(t),r=t,E):vi(t)?(i=D,M(t)):xi(t)?(e.consume(t),D):(e.consume(t),I)}function E(t){return t===r?(e.consume(t),r=void 0,N):null===t?n(t):vi(t)?(i=E,M(t)):(e.consume(t),E)}function I(t){return null===t||34===t||39===t||60===t||61===t||96===t?n(t):47===t||62===t||ki(t)?C(t):(e.consume(t),I)}function N(e){return 47===e||62===e||ki(e)?C(e):n(e)}function P(a){return 62===a?(e.consume(a),e.exit("htmlTextData"),e.exit("htmlText"),t):n(a)}function M(t){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),B}function B(t){return xi(t)?Ci(e,F,"linePrefix",a.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t):F(t)}function F(t){return e.enter("htmlTextData"),i(t)}}};const Ao={name:"labelStartLink",tokenize:function(e,t,n){const a=this;return function(t){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelLink"),r};function r(e){return 94===e&&"_hiddenFootnoteSupport"in a.parser.constructs?n(e):t(e)}},resolveAll:fo.resolveAll};const jo={name:"hardBreakEscape",tokenize:function(e,t,n){return function(t){return e.enter("hardBreakEscape"),e.consume(t),a};function a(a){return vi(a)?(e.exit("hardBreakEscape"),t(a)):n(a)}}};const Do={name:"codeText",tokenize:function(e,t,n){let a,r,s=0;return function(t){return e.enter("codeText"),e.enter("codeTextSequence"),i(t)};function i(t){return 96===t?(e.consume(t),s++,i):(e.exit("codeTextSequence"),o(t))}function o(t){return null===t?n(t):32===t?(e.enter("space"),e.consume(t),e.exit("space"),o):96===t?(r=e.enter("codeTextSequence"),a=0,c(t)):vi(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),o):(e.enter("codeTextData"),l(t))}function l(t){return null===t||32===t||96===t||vi(t)?(e.exit("codeTextData"),o(t)):(e.consume(t),l)}function c(n){return 96===n?(e.consume(n),a++,c):a===s?(e.exit("codeTextSequence"),e.exit("codeText"),t(n)):(r.type="codeTextData",l(n))}},resolve:function(e){let t,n,a=e.length-4,r=3;if(("lineEnding"===e[r][1].type||"space"===e[r][1].type)&&("lineEnding"===e[a][1].type||"space"===e[a][1].type))for(t=r;++t<a;)if("codeTextData"===e[t][1].type){e[r][1].type="codeTextPadding",e[a][1].type="codeTextPadding",r+=2,a-=2;break}t=r-1,a++;for(;++t<=a;)void 0===n?t!==a&&"lineEnding"!==e[t][1].type&&(n=t):t!==a&&"lineEnding"!==e[t][1].type||(e[n][1].type="codeTextData",t!==n+2&&(e[n][1].end=e[t-1][1].end,e.splice(n+2,t-n-2),a-=t-n-2,t=n+2),n=void 0);return e},previous:function(e){return 96!==e||"characterEscape"===this.events[this.events.length-1][1].type}};const Eo={42:Hi,43:Hi,45:Hi,48:Hi,49:Hi,50:Hi,51:Hi,52:Hi,53:Hi,54:Hi,55:Hi,56:Hi,57:Hi,62:Wi},Io={91:Yi},No={[-2]:Zi,[-1]:Zi,32:Zi},Po={35:eo,42:Oi,45:[to,Oi],60:ro,61:to,95:Oi,96:lo,126:lo},Mo={38:po,92:ho},Bo={[-5]:mo,[-4]:mo,[-3]:mo,33:vo,38:po,42:xo,60:[wo,Co],91:Ao,92:[jo,ho],93:fo,95:xo,96:Do},Fo={null:[xo,Mi]},To={null:[42,95]},Ro={null:[]};function qo(e){const n=function(e){const t={};let n=-1;for(;++n<e.length;)ci(t,e[n]);return t}([t,...(e||{}).extensions||[]]),a={defined:[],lazy:{},constructs:n,content:r(Ai),document:r(ji),flow:r(Pi),string:r(Bi),text:r(Fi)};return a;function r(e){return function(t){return zi(a,e,t)}}}const Lo=/[\0\t\n\r]/g;function zo(e,t){const n=Number.parseInt(e,t);return n<9||11===n||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||65535===(65535&n)||65534===(65535&n)||n>1114111?"\ufffd":String.fromCharCode(n)}const Oo=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function Ho(e,t,n){if(t)return t;if(35===n.charCodeAt(0)){const e=n.charCodeAt(1),t=120===e||88===e;return zo(n.slice(t?2:1),t?16:10)}return uo(n)||e}const _o={}.hasOwnProperty;function Uo(e,t,n){return"string"!==typeof t&&(n=t,t=void 0),function(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(ee),autolinkProtocol:A,autolinkEmail:A,atxHeading:s(Y),blockQuote:s(V),characterEscape:A,characterReference:A,codeFenced:s(Q),codeFencedFenceInfo:i,codeFencedFenceMeta:i,codeIndented:s(Q,i),codeText:s(X,i),codeTextData:A,data:A,codeFlowValue:A,definition:s(G),definitionDestinationString:i,definitionLabelString:i,definitionTitleString:i,emphasis:s(J),hardBreakEscape:s(K),hardBreakTrailing:s(K),htmlFlow:s(Z,i),htmlFlowData:A,htmlText:s(Z,i),htmlTextData:A,image:s($),label:i,link:s(ee),listItem:s(ne),listItemValue:p,listOrdered:s(te,d),listUnordered:s(te),paragraph:s(ae),reference:z,referenceString:i,resourceDestinationString:i,resourceTitleString:i,setextHeading:s(Y),strong:s(re),thematicBreak:s(ie)},exit:{atxHeading:l(),atxHeadingSequence:x,autolink:l(),autolinkEmail:W,autolinkProtocol:U,blockQuote:l(),characterEscapeValue:j,characterReferenceMarkerHexadecimal:H,characterReferenceMarkerNumeric:H,characterReferenceValue:_,codeFenced:l(g),codeFencedFence:f,codeFencedFenceInfo:h,codeFencedFenceMeta:m,codeFlowValue:j,codeIndented:l(y),codeText:l(P),codeTextData:j,data:j,definition:l(),definitionDestinationString:k,definitionLabelString:b,definitionTitleString:v,emphasis:l(),hardBreakEscape:l(E),hardBreakTrailing:l(E),htmlFlow:l(I),htmlFlowData:j,htmlText:l(N),htmlTextData:j,image:l(B),label:T,labelText:F,lineEnding:D,link:l(M),listItem:l(),listOrdered:l(),listUnordered:l(),paragraph:l(),referenceString:O,resourceDestinationString:R,resourceTitleString:q,resource:L,setextHeading:l(C),setextHeadingLineSequence:w,setextHeadingText:S,strong:l(),thematicBreak:l()}};Vo(t,(e||{}).mdastExtensions||[]);const n={};return a;function a(e){let a={type:"root",children:[]};const s={stack:[a],tokenStack:[],config:t,enter:o,exit:c,buffer:i,resume:u,data:n},l=[];let d=-1;for(;++d<e.length;)if("listOrdered"===e[d][1].type||"listUnordered"===e[d][1].type)if("enter"===e[d][0])l.push(d);else{d=r(e,l.pop(),d)}for(d=-1;++d<e.length;){const n=t[e[d][0]];_o.call(n,e[d][1].type)&&n[e[d][1].type].call(Object.assign({sliceSerialize:e[d][2].sliceSerialize},s),e[d][1])}if(s.tokenStack.length>0){const e=s.tokenStack[s.tokenStack.length-1];(e[1]||Xo).call(s,void 0,e[0])}for(a.position={start:Wo(e.length>0?e[0][1].start:{line:1,column:1,offset:0}),end:Wo(e.length>0?e[e.length-2][1].end:{line:1,column:1,offset:0})},d=-1;++d<t.transforms.length;)a=t.transforms[d](a)||a;return a}function r(e,t,n){let a,r,s,i,o=t-1,l=-1,c=!1;for(;++o<=n;){const t=e[o];switch(t[1].type){case"listUnordered":case"listOrdered":case"blockQuote":"enter"===t[0]?l++:l--,i=void 0;break;case"lineEndingBlank":"enter"===t[0]&&(!a||i||l||s||(s=o),i=void 0);break;case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:i=void 0}if(!l&&"enter"===t[0]&&"listItemPrefix"===t[1].type||-1===l&&"exit"===t[0]&&("listUnordered"===t[1].type||"listOrdered"===t[1].type)){if(a){let i=o;for(r=void 0;i--;){const t=e[i];if("lineEnding"===t[1].type||"lineEndingBlank"===t[1].type){if("exit"===t[0])continue;r&&(e[r][1].type="lineEndingBlank",c=!0),t[1].type="lineEnding",r=i}else if("linePrefix"!==t[1].type&&"blockQuotePrefix"!==t[1].type&&"blockQuotePrefixWhitespace"!==t[1].type&&"blockQuoteMarker"!==t[1].type&&"listItemIndent"!==t[1].type)break}s&&(!r||s<r)&&(a._spread=!0),a.end=Object.assign({},r?e[r][1].start:t[1].end),e.splice(r||o,0,["exit",a,t[2]]),o++,n++}if("listItemPrefix"===t[1].type){const r={type:"listItem",_spread:!1,start:Object.assign({},t[1].start),end:void 0};a=r,e.splice(o,0,["enter",r,t[2]]),o++,n++,s=void 0,i=!0}}}return e[t][1]._spread=c,n}function s(e,t){return n;function n(n){o.call(this,e(n),n),t&&t.call(this,n)}}function i(){this.stack.push({type:"fragment",children:[]})}function o(e,t,n){this.stack[this.stack.length-1].children.push(e),this.stack.push(e),this.tokenStack.push([t,n]),e.position={start:Wo(t.start),end:void 0}}function l(e){return t;function t(t){e&&e.call(this,t),c.call(this,t)}}function c(e,t){const n=this.stack.pop(),a=this.tokenStack.pop();if(!a)throw new Error("Cannot close `"+e.type+"` ("+qs({start:e.start,end:e.end})+"): it\u2019s not open");if(a[0].type!==e.type)if(t)t.call(this,e,a[0]);else{(a[1]||Xo).call(this,e,a[0])}n.position.end=Wo(e.end)}function u(){return function(e,t){const n=t||ti;return ni(e,"boolean"!==typeof n.includeImageAlt||n.includeImageAlt,"boolean"!==typeof n.includeHtml||n.includeHtml)}(this.stack.pop())}function d(){this.data.expectingFirstListItemValue=!0}function p(e){if(this.data.expectingFirstListItemValue){this.stack[this.stack.length-2].start=Number.parseInt(this.sliceSerialize(e),10),this.data.expectingFirstListItemValue=void 0}}function h(){const e=this.resume();this.stack[this.stack.length-1].lang=e}function m(){const e=this.resume();this.stack[this.stack.length-1].meta=e}function f(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function g(){const e=this.resume();this.stack[this.stack.length-1].value=e.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function y(){const e=this.resume();this.stack[this.stack.length-1].value=e.replace(/(\r?\n|\r)$/g,"")}function b(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.label=t,n.identifier=Ji(this.sliceSerialize(e)).toLowerCase()}function v(){const e=this.resume();this.stack[this.stack.length-1].title=e}function k(){const e=this.resume();this.stack[this.stack.length-1].url=e}function x(e){const t=this.stack[this.stack.length-1];if(!t.depth){const n=this.sliceSerialize(e).length;t.depth=n}}function S(){this.data.setextHeadingSlurpLineEnding=!0}function w(e){this.stack[this.stack.length-1].depth=61===this.sliceSerialize(e).codePointAt(0)?1:2}function C(){this.data.setextHeadingSlurpLineEnding=void 0}function A(e){const t=this.stack[this.stack.length-1].children;let n=t[t.length-1];n&&"text"===n.type||(n=se(),n.position={start:Wo(e.start),end:void 0},t.push(n)),this.stack.push(n)}function j(e){const t=this.stack.pop();t.value+=this.sliceSerialize(e),t.position.end=Wo(e.end)}function D(e){const n=this.stack[this.stack.length-1];if(this.data.atHardBreak){return n.children[n.children.length-1].position.end=Wo(e.end),void(this.data.atHardBreak=void 0)}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(n.type)&&(A.call(this,e),j.call(this,e))}function E(){this.data.atHardBreak=!0}function I(){const e=this.resume();this.stack[this.stack.length-1].value=e}function N(){const e=this.resume();this.stack[this.stack.length-1].value=e}function P(){const e=this.resume();this.stack[this.stack.length-1].value=e}function M(){const e=this.stack[this.stack.length-1];if(this.data.inReference){const t=this.data.referenceType||"shortcut";e.type+="Reference",e.referenceType=t,delete e.url,delete e.title}else delete e.identifier,delete e.label;this.data.referenceType=void 0}function B(){const e=this.stack[this.stack.length-1];if(this.data.inReference){const t=this.data.referenceType||"shortcut";e.type+="Reference",e.referenceType=t,delete e.url,delete e.title}else delete e.identifier,delete e.label;this.data.referenceType=void 0}function F(e){const t=this.sliceSerialize(e),n=this.stack[this.stack.length-2];n.label=function(e){return e.replace(Oo,Ho)}(t),n.identifier=Ji(t).toLowerCase()}function T(){const e=this.stack[this.stack.length-1],t=this.resume(),n=this.stack[this.stack.length-1];if(this.data.inReference=!0,"link"===n.type){const t=e.children;n.children=t}else n.alt=t}function R(){const e=this.resume();this.stack[this.stack.length-1].url=e}function q(){const e=this.resume();this.stack[this.stack.length-1].title=e}function L(){this.data.inReference=void 0}function z(){this.data.referenceType="collapsed"}function O(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.label=t,n.identifier=Ji(this.sliceSerialize(e)).toLowerCase(),this.data.referenceType="full"}function H(e){this.data.characterReferenceType=e.type}function _(e){const t=this.sliceSerialize(e),n=this.data.characterReferenceType;let a;if(n)a=zo(t,"characterReferenceMarkerNumeric"===n?10:16),this.data.characterReferenceType=void 0;else{a=uo(t)}const r=this.stack.pop();r.value+=a,r.position.end=Wo(e.end)}function U(e){j.call(this,e);this.stack[this.stack.length-1].url=this.sliceSerialize(e)}function W(e){j.call(this,e);this.stack[this.stack.length-1].url="mailto:"+this.sliceSerialize(e)}function V(){return{type:"blockquote",children:[]}}function Q(){return{type:"code",lang:null,meta:null,value:""}}function X(){return{type:"inlineCode",value:""}}function G(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function J(){return{type:"emphasis",children:[]}}function Y(){return{type:"heading",depth:0,children:[]}}function K(){return{type:"break"}}function Z(){return{type:"html",value:""}}function $(){return{type:"image",title:null,url:"",alt:null}}function ee(){return{type:"link",title:null,url:"",children:[]}}function te(e){return{type:"list",ordered:"listOrdered"===e.type,start:null,spread:e._spread,children:[]}}function ne(e){return{type:"listItem",spread:e._spread,checked:null,children:[]}}function ae(){return{type:"paragraph",children:[]}}function re(){return{type:"strong",children:[]}}function se(){return{type:"text",value:""}}function ie(){return{type:"thematicBreak"}}}(n)(function(e){for(;!ii(e););return e}(qo(n).document().write(function(){let e,t=1,n="",a=!0;return function(r,s,i){const o=[];let l,c,u,d,p;for(r=n+("string"===typeof r?r.toString():new TextDecoder(s||void 0).decode(r)),u=0,n="",a&&(65279===r.charCodeAt(0)&&u++,a=void 0);u<r.length;){if(Lo.lastIndex=u,l=Lo.exec(r),d=l&&void 0!==l.index?l.index:r.length,p=r.charCodeAt(d),!l){n=r.slice(u);break}if(10===p&&u===d&&e)o.push(-3),e=void 0;else switch(e&&(o.push(-5),e=void 0),u<d&&(o.push(r.slice(u,d)),t+=d-u),p){case 0:o.push(65533),t++;break;case 9:for(c=4*Math.ceil(t/4),o.push(-2);t++<c;)o.push(-1);break;case 10:o.push(-4),t=1;break;default:e=!0,t=1}u=d+1}return i&&(e&&o.push(-5),n&&o.push(n),o.push(null)),o}}()(e,t,!0))))}function Wo(e){return{line:e.line,column:e.column,offset:e.offset}}function Vo(e,t){let n=-1;for(;++n<t.length;){const a=t[n];Array.isArray(a)?Vo(e,a):Qo(e,a)}}function Qo(e,t){let n;for(n in t)if(_o.call(t,n))switch(n){case"canContainEols":{const a=t[n];a&&e[n].push(...a);break}case"transforms":{const a=t[n];a&&e[n].push(...a);break}case"enter":case"exit":{const a=t[n];a&&Object.assign(e[n],a);break}}}function Xo(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+qs({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+qs({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+qs({start:t.start,end:t.end})+") is still open")}function Go(e){const t=this;t.parser=function(n){return Uo(n,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}const Jo="object"===typeof self?self:globalThis,Yo=e=>((e,t)=>{const n=(t,n)=>(e.set(n,t),t),a=r=>{if(e.has(r))return e.get(r);const[s,i]=t[r];switch(s){case 0:case-1:return n(i,r);case 1:{const e=n([],r);for(const t of i)e.push(a(t));return e}case 2:{const e=n({},r);for(const[t,n]of i)e[a(t)]=a(n);return e}case 3:return n(new Date(i),r);case 4:{const{source:e,flags:t}=i;return n(new RegExp(e,t),r)}case 5:{const e=n(new Map,r);for(const[t,n]of i)e.set(a(t),a(n));return e}case 6:{const e=n(new Set,r);for(const t of i)e.add(a(t));return e}case 7:{const{name:e,message:t}=i;return n(new Jo[e](t),r)}case 8:return n(BigInt(i),r);case"BigInt":return n(Object(BigInt(i)),r)}return n(new Jo[s](i),r)};return a})(new Map,e)(0),Ko="",{toString:Zo}={},{keys:$o}=Object,el=e=>{const t=typeof e;if("object"!==t||!e)return[0,t];const n=Zo.call(e).slice(8,-1);switch(n){case"Array":return[1,Ko];case"Object":return[2,Ko];case"Date":return[3,Ko];case"RegExp":return[4,Ko];case"Map":return[5,Ko];case"Set":return[6,Ko]}return n.includes("Array")?[1,n]:n.includes("Error")?[7,n]:[2,n]},tl=e=>{let[t,n]=e;return 0===t&&("function"===n||"symbol"===n)},nl=function(e){let{json:t,lossy:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a=[];return((e,t,n,a)=>{const r=(e,t)=>{const r=a.push(e)-1;return n.set(t,r),r},s=a=>{if(n.has(a))return n.get(a);let[i,o]=el(a);switch(i){case 0:{let t=a;switch(o){case"bigint":i=8,t=a.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+o);t=null;break;case"undefined":return r([-1],a)}return r([i,t],a)}case 1:{if(o)return r([o,[...a]],a);const e=[],t=r([i,e],a);for(const n of a)e.push(s(n));return t}case 2:{if(o)switch(o){case"BigInt":return r([o,a.toString()],a);case"Boolean":case"Number":case"String":return r([o,a.valueOf()],a)}if(t&&"toJSON"in a)return s(a.toJSON());const n=[],l=r([i,n],a);for(const t of $o(a))!e&&tl(el(a[t]))||n.push([s(t),s(a[t])]);return l}case 3:return r([i,a.toISOString()],a);case 4:{const{source:e,flags:t}=a;return r([i,{source:e,flags:t}],a)}case 5:{const t=[],n=r([i,t],a);for(const[r,i]of a)(e||!tl(el(r))&&!tl(el(i)))&&t.push([s(r),s(i)]);return n}case 6:{const t=[],n=r([i,t],a);for(const r of a)!e&&tl(el(r))||t.push(s(r));return n}}const{message:l}=a;return r([i,{name:o,message:l}],a)};return s})(!(t||n),!!t,new Map,a)(e),a},al="function"===typeof structuredClone?(e,t)=>t&&("json"in t||"lossy"in t)?Yo(nl(e,t)):structuredClone(e):(e,t)=>Yo(nl(e,t));function rl(e){const t=[];let n=-1,a=0,r=0;for(;++n<e.length;){const s=e.charCodeAt(n);let i="";if(37===s&&hi(e.charCodeAt(n+1))&&hi(e.charCodeAt(n+2)))r=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(i=String.fromCharCode(s));else if(s>55295&&s<57344){const t=e.charCodeAt(n+1);s<56320&&t>56319&&t<57344?(i=String.fromCharCode(s,t),r=1):i="\ufffd"}else i=String.fromCharCode(s);i&&(t.push(e.slice(a,n),encodeURIComponent(i)),a=n+r+1,i=""),r&&(n+=r,r=0)}return t.join("")+e.slice(a)}function sl(e,t){const n=[{type:"text",value:"\u21a9"}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function il(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}const ol=function(e){if(null===e||void 0===e)return cl;if("function"===typeof e)return ll(e);if("object"===typeof e)return Array.isArray(e)?function(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=ol(e[n]);return ll(a);function a(){let e=-1;for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];for(;++e<t.length;)if(t[e].apply(this,a))return!0;return!1}}(e):function(e){const t=e;return ll(n);function n(n){const a=n;let r;for(r in e)if(a[r]!==t[r])return!1;return!0}}(e);if("string"===typeof e)return function(e){return ll(t);function t(t){return t&&t.type===e}}(e);throw new Error("Expected function, string, or object as test")};function ll(e){return function(t,n,a){return Boolean(ul(t)&&e.call(this,t,"number"===typeof n?n:void 0,a||void 0))}}function cl(){return!0}function ul(e){return null!==e&&"object"===typeof e&&"type"in e}const dl=[],pl=!0,hl=!1,ml="skip";function fl(e,t,n,a){let r;"function"===typeof t&&"function"!==typeof n?(a=n,n=t):r=t;const s=ol(r),i=a?-1:1;!function e(r,o,l){const c=r&&"object"===typeof r?r:{};if("string"===typeof c.type){const e="string"===typeof c.tagName?c.tagName:"string"===typeof c.name?c.name:void 0;Object.defineProperty(u,"name",{value:"node ("+r.type+(e?"<"+e+">":"")+")"})}return u;function u(){let c,u,d,p=dl;if((!t||s(r,o,l[l.length-1]||void 0))&&(p=function(e){if(Array.isArray(e))return e;if("number"===typeof e)return[pl,e];return null===e||void 0===e?dl:[e]}(n(r,l)),p[0]===hl))return p;if("children"in r&&r.children){const t=r;if(t.children&&p[0]!==ml)for(u=(a?t.children.length:-1)+i,d=l.concat(t);u>-1&&u<t.children.length;){const n=t.children[u];if(c=e(n,u,d)(),c[0]===hl)return c;u="number"===typeof c[1]?c[1]:u+i}}return p}}(e,void 0,[])()}function gl(e,t,n,a){let r,s,i;"function"===typeof t&&"function"!==typeof n?(s=void 0,i=t,r=n):(s=t,i=n,r=a),fl(e,s,(function(e,t){const n=t[t.length-1],a=n?n.children.indexOf(e):void 0;return i(e,a,n)}),r)}function yl(e,t){const n=t.referenceType;let a="]";if("collapsed"===n?a+="[]":"full"===n&&(a+="["+(t.label||t.identifier)+"]"),"imageReference"===t.type)return[{type:"text",value:"!["+t.alt+a}];const r=e.all(t),s=r[0];s&&"text"===s.type?s.value="["+s.value:r.unshift({type:"text",value:"["});const i=r[r.length-1];return i&&"text"===i.type?i.value+=a:r.push({type:"text",value:a}),r}function bl(e){const t=e.spread;return null===t||void 0===t?e.children.length>1:t}const vl=9,kl=32;function xl(e){const t=String(e),n=/\r?\n|\r/g;let a=n.exec(t),r=0;const s=[];for(;a;)s.push(Sl(t.slice(r,a.index),r>0,!0),a[0]),r=a.index+a[0].length,a=n.exec(t);return s.push(Sl(t.slice(r),r>0,!1)),s.join("")}function Sl(e,t,n){let a=0,r=e.length;if(t){let t=e.codePointAt(a);for(;t===vl||t===kl;)a++,t=e.codePointAt(a)}if(n){let t=e.codePointAt(r-1);for(;t===vl||t===kl;)r--,t=e.codePointAt(r-1)}return r>a?e.slice(a,r):""}const wl={blockquote:function(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)},break:function(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:"\n"}]},code:function(e,t){const n=t.value?t.value+"\n":"",a={};t.lang&&(a.className=["language-"+t.lang]);let r={type:"element",tagName:"code",properties:a,children:[{type:"text",value:n}]};return t.meta&&(r.data={meta:t.meta}),e.patch(t,r),r=e.applyData(t,r),r={type:"element",tagName:"pre",properties:{},children:[r]},e.patch(t,r),r},delete:function(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},emphasis:function(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},footnoteReference:function(e,t){const n="string"===typeof e.options.clobberPrefix?e.options.clobberPrefix:"user-content-",a=String(t.identifier).toUpperCase(),r=rl(a.toLowerCase()),s=e.footnoteOrder.indexOf(a);let i,o=e.footnoteCounts.get(a);void 0===o?(o=0,e.footnoteOrder.push(a),i=e.footnoteOrder.length):i=s+1,o+=1,e.footnoteCounts.set(a,o);const l={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+r,id:n+"fnref-"+r+(o>1?"-"+o:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(i)}]};e.patch(t,l);const c={type:"element",tagName:"sup",properties:{},children:[l]};return e.patch(t,c),e.applyData(t,c)},heading:function(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},html:function(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}},imageReference:function(e,t){const n=String(t.identifier).toUpperCase(),a=e.definitionById.get(n);if(!a)return yl(e,t);const r={src:rl(a.url||""),alt:t.alt};null!==a.title&&void 0!==a.title&&(r.title=a.title);const s={type:"element",tagName:"img",properties:r,children:[]};return e.patch(t,s),e.applyData(t,s)},image:function(e,t){const n={src:rl(t.url)};null!==t.alt&&void 0!==t.alt&&(n.alt=t.alt),null!==t.title&&void 0!==t.title&&(n.title=t.title);const a={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,a),e.applyData(t,a)},inlineCode:function(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const a={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,a),e.applyData(t,a)},linkReference:function(e,t){const n=String(t.identifier).toUpperCase(),a=e.definitionById.get(n);if(!a)return yl(e,t);const r={href:rl(a.url||"")};null!==a.title&&void 0!==a.title&&(r.title=a.title);const s={type:"element",tagName:"a",properties:r,children:e.all(t)};return e.patch(t,s),e.applyData(t,s)},link:function(e,t){const n={href:rl(t.url)};null!==t.title&&void 0!==t.title&&(n.title=t.title);const a={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,a),e.applyData(t,a)},listItem:function(e,t,n){const a=e.all(t),r=n?function(e){let t=!1;if("list"===e.type){t=e.spread||!1;const n=e.children;let a=-1;for(;!t&&++a<n.length;)t=bl(n[a])}return t}(n):bl(t),s={},i=[];if("boolean"===typeof t.checked){const e=a[0];let n;e&&"element"===e.type&&"p"===e.tagName?n=e:(n={type:"element",tagName:"p",properties:{},children:[]},a.unshift(n)),n.children.length>0&&n.children.unshift({type:"text",value:" "}),n.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let o=-1;for(;++o<a.length;){const e=a[o];(r||0!==o||"element"!==e.type||"p"!==e.tagName)&&i.push({type:"text",value:"\n"}),"element"!==e.type||"p"!==e.tagName||r?i.push(e):i.push(...e.children)}const l=a[a.length-1];l&&(r||"element"!==l.type||"p"!==l.tagName)&&i.push({type:"text",value:"\n"});const c={type:"element",tagName:"li",properties:s,children:i};return e.patch(t,c),e.applyData(t,c)},list:function(e,t){const n={},a=e.all(t);let r=-1;for("number"===typeof t.start&&1!==t.start&&(n.start=t.start);++r<a.length;){const e=a[r];if("element"===e.type&&"li"===e.tagName&&e.properties&&Array.isArray(e.properties.className)&&e.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(a,!0)};return e.patch(t,s),e.applyData(t,s)},paragraph:function(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},root:function(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)},strong:function(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},table:function(e,t){const n=e.all(t),a=n.shift(),r=[];if(a){const n={type:"element",tagName:"thead",properties:{},children:e.wrap([a],!0)};e.patch(t.children[0],n),r.push(n)}if(n.length>0){const a={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},s=Ts(t.children[1]),i=Fs(t.children[t.children.length-1]);s&&i&&(a.position={start:s,end:i}),r.push(a)}const s={type:"element",tagName:"table",properties:{},children:e.wrap(r,!0)};return e.patch(t,s),e.applyData(t,s)},tableCell:function(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},tableRow:function(e,t,n){const a=n?n.children:void 0,r=0===(a?a.indexOf(t):1)?"th":"td",s=n&&"table"===n.type?n.align:void 0,i=s?s.length:t.children.length;let o=-1;const l=[];for(;++o<i;){const n=t.children[o],a={},i=s?s[o]:void 0;i&&(a.align=i);let c={type:"element",tagName:r,properties:a,children:[]};n&&(c.children=e.all(n),e.patch(n,c),c=e.applyData(n,c)),l.push(c)}const c={type:"element",tagName:"tr",properties:{},children:e.wrap(l,!0)};return e.patch(t,c),e.applyData(t,c)},text:function(e,t){const n={type:"text",value:xl(String(t.value))};return e.patch(t,n),e.applyData(t,n)},thematicBreak:function(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)},toml:Cl,yaml:Cl,definition:Cl,footnoteDefinition:Cl};function Cl(){}const Al={}.hasOwnProperty,jl={};function Dl(e,t){e.position&&(t.position=function(e){const t=Ts(e),n=Fs(e);if(t&&n)return{start:t,end:n}}(e))}function El(e,t){let n=t;if(e&&e.data){const t=e.data.hName,a=e.data.hChildren,r=e.data.hProperties;if("string"===typeof t)if("element"===n.type)n.tagName=t;else{n={type:"element",tagName:t,properties:{},children:"children"in n?n.children:[n]}}"element"===n.type&&r&&Object.assign(n.properties,al(r)),"children"in n&&n.children&&null!==a&&void 0!==a&&(n.children=a)}return n}function Il(e,t){const n=t.data||{},a=!("value"in t)||Al.call(n,"hProperties")||Al.call(n,"hChildren")?{type:"element",tagName:"div",properties:{},children:e.all(t)}:{type:"text",value:t.value};return e.patch(t,a),e.applyData(t,a)}function Nl(e,t){const n=[];let a=-1;for(t&&n.push({type:"text",value:"\n"});++a<e.length;)a&&n.push({type:"text",value:"\n"}),n.push(e[a]);return t&&e.length>0&&n.push({type:"text",value:"\n"}),n}function Pl(e){let t=0,n=e.charCodeAt(t);for(;9===n||32===n;)t++,n=e.charCodeAt(t);return e.slice(t)}function Ml(e,t){const n=function(e,t){const n=t||jl,a=new Map,r=new Map,s=new Map,i={...wl,...n.handlers},o={all:function(e){const t=[];if("children"in e){const n=e.children;let a=-1;for(;++a<n.length;){const r=o.one(n[a],e);if(r){if(a&&"break"===n[a-1].type&&(Array.isArray(r)||"text"!==r.type||(r.value=Pl(r.value)),!Array.isArray(r)&&"element"===r.type)){const e=r.children[0];e&&"text"===e.type&&(e.value=Pl(e.value))}Array.isArray(r)?t.push(...r):t.push(r)}}}return t},applyData:El,definitionById:a,footnoteById:r,footnoteCounts:s,footnoteOrder:[],handlers:i,one:function(e,t){const n=e.type,a=o.handlers[n];if(Al.call(o.handlers,n)&&a)return a(o,e,t);if(o.options.passThrough&&o.options.passThrough.includes(n)){if("children"in e){const{children:t,...n}=e,a=al(n);return a.children=o.all(e),a}return al(e)}return(o.options.unknownHandler||Il)(o,e,t)},options:n,patch:Dl,wrap:Nl};return gl(e,(function(e){if("definition"===e.type||"footnoteDefinition"===e.type){const t="definition"===e.type?a:r,n=String(e.identifier).toUpperCase();t.has(n)||t.set(n,e)}})),o}(e,t),a=n.one(e,void 0),r=function(e){const t="string"===typeof e.options.clobberPrefix?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||sl,a=e.options.footnoteBackLabel||il,r=e.options.footnoteLabel||"Footnotes",s=e.options.footnoteLabelTagName||"h2",i=e.options.footnoteLabelProperties||{className:["sr-only"]},o=[];let l=-1;for(;++l<e.footnoteOrder.length;){const r=e.footnoteById.get(e.footnoteOrder[l]);if(!r)continue;const s=e.all(r),i=String(r.identifier).toUpperCase(),c=rl(i.toLowerCase());let u=0;const d=[],p=e.footnoteCounts.get(i);for(;void 0!==p&&++u<=p;){d.length>0&&d.push({type:"text",value:" "});let e="string"===typeof n?n:n(l,u);"string"===typeof e&&(e={type:"text",value:e}),d.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+c+(u>1?"-"+u:""),dataFootnoteBackref:"",ariaLabel:"string"===typeof a?a:a(l,u),className:["data-footnote-backref"]},children:Array.isArray(e)?e:[e]})}const h=s[s.length-1];if(h&&"element"===h.type&&"p"===h.tagName){const e=h.children[h.children.length-1];e&&"text"===e.type?e.value+=" ":h.children.push({type:"text",value:" "}),h.children.push(...d)}else s.push(...d);const m={type:"element",tagName:"li",properties:{id:t+"fn-"+c},children:e.wrap(s,!0)};e.patch(r,m),o.push(m)}if(0!==o.length)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...al(i),id:"footnote-label"},children:[{type:"text",value:r}]},{type:"text",value:"\n"},{type:"element",tagName:"ol",properties:{},children:e.wrap(o,!0)},{type:"text",value:"\n"}]}}(n),s=Array.isArray(a)?{type:"root",children:a}:a||{type:"root",children:[]};return r&&s.children.push({type:"text",value:"\n"},r),s}function Bl(e,t){return e&&"run"in e?async function(n,a){const r=Ml(n,t);await e.run(r,a)}:function(n){return Ml(n,t||e)}}function Fl(e){if(e)throw e}var Tl=n(132);function Rl(e){if("object"!==typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function ql(){const e=[],t={run:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];let r=-1;const s=n.pop();if("function"!==typeof s)throw new TypeError("Expected function as last argument, not "+s);!function t(a){const i=e[++r];let o=-1;if(a)s(a);else{for(var l=arguments.length,c=new Array(l>1?l-1:0),u=1;u<l;u++)c[u-1]=arguments[u];for(;++o<n.length;)null!==c[o]&&void 0!==c[o]||(c[o]=n[o]);n=c,i?function(e,t){let n;return r;function r(){for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];const l=e.length>r.length;let c;l&&r.push(s);try{c=e.apply(this,r)}catch(a){if(l&&n)throw a;return s(a)}l||(c instanceof Promise?c.then(i,s):c instanceof Error?s(c):i(c))}function s(e){if(!n){n=!0;for(var a=arguments.length,r=new Array(a>1?a-1:0),s=1;s<a;s++)r[s-1]=arguments[s];t(e,...r)}}function i(e){s(null,e)}}(i,t)(...c):s(null,...c)}}(null,...n)},use:function(n){if("function"!==typeof n)throw new TypeError("Expected `middelware` to be a function, not "+n);return e.push(n),t}};return t}const Ll={basename:function(e,t){if(void 0!==t&&"string"!==typeof t)throw new TypeError('"ext" argument must be a string');zl(e);let n,a=0,r=-1,s=e.length;if(void 0===t||0===t.length||t.length>e.length){for(;s--;)if(47===e.codePointAt(s)){if(n){a=s+1;break}}else r<0&&(n=!0,r=s+1);return r<0?"":e.slice(a,r)}if(t===e)return"";let i=-1,o=t.length-1;for(;s--;)if(47===e.codePointAt(s)){if(n){a=s+1;break}}else i<0&&(n=!0,i=s+1),o>-1&&(e.codePointAt(s)===t.codePointAt(o--)?o<0&&(r=s):(o=-1,r=i));a===r?r=i:r<0&&(r=e.length);return e.slice(a,r)},dirname:function(e){if(zl(e),0===e.length)return".";let t,n=-1,a=e.length;for(;--a;)if(47===e.codePointAt(a)){if(t){n=a;break}}else t||(t=!0);return n<0?47===e.codePointAt(0)?"/":".":1===n&&47===e.codePointAt(0)?"//":e.slice(0,n)},extname:function(e){zl(e);let t,n=e.length,a=-1,r=0,s=-1,i=0;for(;n--;){const o=e.codePointAt(n);if(47!==o)a<0&&(t=!0,a=n+1),46===o?s<0?s=n:1!==i&&(i=1):s>-1&&(i=-1);else if(t){r=n+1;break}}if(s<0||a<0||0===i||1===i&&s===a-1&&s===r+1)return"";return e.slice(s,a)},join:function(){let e,t=-1;for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];for(;++t<a.length;)zl(a[t]),a[t]&&(e=void 0===e?a[t]:e+"/"+a[t]);return void 0===e?".":function(e){zl(e);const t=47===e.codePointAt(0);let n=function(e,t){let n,a,r="",s=0,i=-1,o=0,l=-1;for(;++l<=e.length;){if(l<e.length)n=e.codePointAt(l);else{if(47===n)break;n=47}if(47===n){if(i===l-1||1===o);else if(i!==l-1&&2===o){if(r.length<2||2!==s||46!==r.codePointAt(r.length-1)||46!==r.codePointAt(r.length-2))if(r.length>2){if(a=r.lastIndexOf("/"),a!==r.length-1){a<0?(r="",s=0):(r=r.slice(0,a),s=r.length-1-r.lastIndexOf("/")),i=l,o=0;continue}}else if(r.length>0){r="",s=0,i=l,o=0;continue}t&&(r=r.length>0?r+"/..":"..",s=2)}else r.length>0?r+="/"+e.slice(i+1,l):r=e.slice(i+1,l),s=l-i-1;i=l,o=0}else 46===n&&o>-1?o++:o=-1}return r}(e,!t);0!==n.length||t||(n=".");n.length>0&&47===e.codePointAt(e.length-1)&&(n+="/");return t?"/"+n:n}(e)},sep:"/"};function zl(e){if("string"!==typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const Ol={cwd:function(){return"/"}};function Hl(e){return Boolean(null!==e&&"object"===typeof e&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&void 0===e.auth)}function _l(e){if("string"===typeof e)e=new URL(e);else if(!Hl(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if("file:"!==e.protocol){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return function(e){if(""!==e.hostname){const e=new TypeError('File URL host must be "localhost" or empty on darwin');throw e.code="ERR_INVALID_FILE_URL_HOST",e}const t=e.pathname;let n=-1;for(;++n<t.length;)if(37===t.codePointAt(n)&&50===t.codePointAt(n+1)){const e=t.codePointAt(n+2);if(70===e||102===e){const e=new TypeError("File URL path must not include encoded / characters");throw e.code="ERR_INVALID_FILE_URL_PATH",e}}return decodeURIComponent(t)}(e)}const Ul=["history","path","basename","stem","extname","dirname"];class Wl{constructor(e){let t;t=e?Hl(e)?{path:e}:"string"===typeof e||function(e){return Boolean(e&&"object"===typeof e&&"byteLength"in e&&"byteOffset"in e)}(e)?{value:e}:e:{},this.cwd=Ol.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let n,a=-1;for(;++a<Ul.length;){const e=Ul[a];e in t&&void 0!==t[e]&&null!==t[e]&&(this[e]="history"===e?[...t[e]]:t[e])}for(n in t)Ul.includes(n)||(this[n]=t[n])}get basename(){return"string"===typeof this.path?Ll.basename(this.path):void 0}set basename(e){Ql(e,"basename"),Vl(e,"basename"),this.path=Ll.join(this.dirname||"",e)}get dirname(){return"string"===typeof this.path?Ll.dirname(this.path):void 0}set dirname(e){Xl(this.basename,"dirname"),this.path=Ll.join(e||"",this.basename)}get extname(){return"string"===typeof this.path?Ll.extname(this.path):void 0}set extname(e){if(Vl(e,"extname"),Xl(this.dirname,"extname"),e){if(46!==e.codePointAt(0))throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Ll.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){Hl(e)&&(e=_l(e)),Ql(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return"string"===typeof this.path?Ll.basename(this.path,this.extname):void 0}set stem(e){Ql(e,"stem"),Vl(e,"stem"),this.path=Ll.join(this.dirname||"",e+(this.extname||""))}fail(e,t,n){const a=this.message(e,t,n);throw a.fatal=!0,a}info(e,t,n){const a=this.message(e,t,n);return a.fatal=void 0,a}message(e,t,n){const a=new Hs(e,t,n);return this.path&&(a.name=this.path+":"+a.name,a.file=this.path),a.fatal=!1,this.messages.push(a),a}toString(e){if(void 0===this.value)return"";if("string"===typeof this.value)return this.value;return new TextDecoder(e||void 0).decode(this.value)}}function Vl(e,t){if(e&&e.includes(Ll.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+Ll.sep+"`")}function Ql(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function Xl(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}const Gl=function(e){const t=this.constructor.prototype,n=t[e],a=function(){return n.apply(a,arguments)};Object.setPrototypeOf(a,t);const r=Object.getOwnPropertyNames(n);for(const s of r){const e=Object.getOwnPropertyDescriptor(n,s);e&&Object.defineProperty(a,s,e)}return a},Jl={}.hasOwnProperty;class Yl extends Gl{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=ql()}copy(){const e=new Yl;let t=-1;for(;++t<this.attachers.length;){const n=this.attachers[t];e.use(...n)}return e.data(Tl(!0,{},this.namespace)),e}data(e,t){return"string"===typeof e?2===arguments.length?(ec("data",this.frozen),this.namespace[e]=t,this):Jl.call(this.namespace,e)&&this.namespace[e]||void 0:e?(ec("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[t,...n]=this.attachers[this.freezeIndex];if(!1===n[0])continue;!0===n[0]&&(n[0]=void 0);const a=t.call(e,...n);"function"===typeof a&&this.transformers.use(a)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const t=ac(e),n=this.parser||this.Parser;return Zl("parse",n),n(String(t),t)}process(e,t){const n=this;return this.freeze(),Zl("process",this.parser||this.Parser),$l("process",this.compiler||this.Compiler),t?a(void 0,t):new Promise(a);function a(a,r){const s=ac(e),i=n.parse(s);function o(e,n){e||!n?r(e):a?a(n):t(void 0,n)}n.run(i,s,(function(e,t,a){if(e||!t||!a)return o(e);const r=t,s=n.stringify(r,a);var i;"string"===typeof(i=s)||function(e){return Boolean(e&&"object"===typeof e&&"byteLength"in e&&"byteOffset"in e)}(i)?a.value=s:a.result=s,o(e,a)}))}}processSync(e){let t,n=!1;return this.freeze(),Zl("processSync",this.parser||this.Parser),$l("processSync",this.compiler||this.Compiler),this.process(e,(function(e,a){n=!0,Fl(e),t=a})),nc("processSync","process",n),t}run(e,t,n){tc(e),this.freeze();const a=this.transformers;return n||"function"!==typeof t||(n=t,t=void 0),n?r(void 0,n):new Promise(r);function r(r,s){const i=ac(t);a.run(e,i,(function(t,a,i){const o=a||e;t?s(t):r?r(o):n(void 0,o,i)}))}}runSync(e,t){let n,a=!1;return this.run(e,t,(function(e,t){Fl(e),n=t,a=!0})),nc("runSync","run",a),n}stringify(e,t){this.freeze();const n=ac(t),a=this.compiler||this.Compiler;return $l("stringify",a),tc(e),a(e,n)}use(e){const t=this.attachers,n=this.namespace;if(ec("use",this.frozen),null===e||void 0===e);else if("function"===typeof e){for(var a=arguments.length,r=new Array(a>1?a-1:0),s=1;s<a;s++)r[s-1]=arguments[s];c(e,r)}else{if("object"!==typeof e)throw new TypeError("Expected usable value, not `"+e+"`");Array.isArray(e)?l(e):o(e)}return this;function i(e){if("function"===typeof e)c(e,[]);else{if("object"!==typeof e)throw new TypeError("Expected usable value, not `"+e+"`");if(Array.isArray(e)){const[t,...n]=e;c(t,n)}else o(e)}}function o(e){if(!("plugins"in e)&&!("settings"in e))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");l(e.plugins),e.settings&&(n.settings=Tl(!0,n.settings,e.settings))}function l(e){let t=-1;if(null===e||void 0===e);else{if(!Array.isArray(e))throw new TypeError("Expected a list of plugins, not `"+e+"`");for(;++t<e.length;){i(e[t])}}}function c(e,n){let a=-1,r=-1;for(;++a<t.length;)if(t[a][0]===e){r=a;break}if(-1===r)t.push([e,...n]);else if(n.length>0){let[a,...s]=n;const i=t[r][1];Rl(i)&&Rl(a)&&(a=Tl(!0,i,a)),t[r]=[e,a,...s]}}}}const Kl=(new Yl).freeze();function Zl(e,t){if("function"!==typeof t)throw new TypeError("Cannot `"+e+"` without `parser`")}function $l(e,t){if("function"!==typeof t)throw new TypeError("Cannot `"+e+"` without `compiler`")}function ec(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function tc(e){if(!Rl(e)||"string"!==typeof e.type)throw new TypeError("Expected node, got `"+e+"`")}function nc(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function ac(e){return function(e){return Boolean(e&&"object"===typeof e&&"message"in e&&"messages"in e)}(e)?e:new Wl(e)}const rc=[],sc={allowDangerousHtml:!0},ic=/^(https?|ircs?|mailto|xmpp)$/i,oc=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function lc(e){const t=e.allowedElements,n=e.allowElement,a=e.children||"",r=e.className,s=e.components,i=e.disallowedElements,o=e.rehypePlugins||rc,l=e.remarkPlugins||rc,c=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...sc}:sc,u=e.skipHtml,d=e.unwrapDisallowed,p=e.urlTransform||cc,h=Kl().use(Go).use(l).use(Bl,c).use(o),m=new Wl;"string"===typeof a&&(m.value=a);for(const y of oc)Object.hasOwn(e,y.from)&&(y.from,y.to&&y.to,y.id);const f=h.parse(m);let g=h.runSync(f,m);return r&&(g={type:"element",tagName:"div",properties:{className:r},children:"root"===g.type?g.children:[g]}),gl(g,(function(e,a,r){if("raw"===e.type&&r&&"number"===typeof a)return u?r.children.splice(a,1):r.children[a]={type:"text",value:e.value},a;if("element"===e.type){let t;for(t in ei)if(Object.hasOwn(ei,t)&&Object.hasOwn(e.properties,t)){const n=e.properties[t],a=ei[t];(null===a||a.includes(e.tagName))&&(e.properties[t]=p(String(n||""),t,e))}}if("element"===e.type){let s=t?!t.includes(e.tagName):!!i&&i.includes(e.tagName);if(!s&&n&&"number"===typeof a&&(s=!n(e,a,r)),s&&r&&"number"===typeof a)return d&&e.children?r.children.splice(a,1,...e.children):r.children.splice(a,1),a}})),Gs(g,{Fragment:Zn.Fragment,components:s,ignoreInvalidStyle:!0,jsx:Zn.jsx,jsxs:Zn.jsxs,passKeys:!0,passNode:!0})}function cc(e){const t=e.indexOf(":"),n=e.indexOf("?"),a=e.indexOf("#"),r=e.indexOf("/");return t<0||r>-1&&t>r||n>-1&&t>n||a>-1&&t>a||ic.test(e.slice(0,t))?e:""}class uc extends i.Component{constructor(){super(...arguments),this.render=()=>{try{return(0,Zn.jsx)("div",{className:"rules-tab",children:this.props.rules?(0,Zn.jsx)(lc,{children:this.props.rules}):(0,Zn.jsx)(ra,{type:aa.Information,children:(0,Zn.jsx)("p",{children:"No rules for this page."})})})}catch{return(0,Zn.jsx)("div",{className:"rules-tab render-error"})}}}}class dc extends i.Component{constructor(e){super(e),this.render=()=>{try{const e=[{id:"rules",display:"Game Rules"},{id:"decks",display:"Your Cards"},{id:"options",display:"Options"},{id:"about",display:"About"}];this.props.exceptions.length>0&&e.push({id:"exceptions",display:"Exceptions"});let t=null;switch(this.state.selectedTab){case"rules":t=(0,Zn.jsx)("div",{className:"content",children:(0,Zn.jsx)(uc,{rules:this.props.rules})});break;case"decks":t=(0,Zn.jsx)("div",{className:"content",children:(0,Zn.jsx)(Jr,{options:this.props.options})});break;case"options":t=(0,Zn.jsx)("div",{className:"content",children:(0,Zn.jsx)(Yr,{game:this.props.game,options:this.props.options,endCampaign:this.props.endCampaign,setDeveloperMode:this.props.setDeveloperMode,setShowTips:this.props.setShowTips,setSoundEffectsVolume:this.props.setSoundEffectsVolume,setRenderer:this.props.setRenderer})});break;case"about":t=(0,Zn.jsx)("div",{className:"content",children:(0,Zn.jsx)(Gr,{game:this.props.game,options:this.props.options})});break;case"exceptions":t=(0,Zn.jsx)("div",{className:"content",children:this.props.exceptions.map(((e,t)=>(0,Zn.jsx)(ra,{children:e},t)))})}return(0,Zn.jsxs)("div",{className:"help-modal",children:[(0,Zn.jsx)(ra,{type:aa.Heading,children:"Help"}),(0,Zn.jsx)(va,{options:e,selectedID:this.state.selectedTab,onSelect:e=>this.setState({selectedTab:e})}),t]})}catch{return(0,Zn.jsx)("div",{className:"help-modal render-error"})}},this.state={selectedTab:"rules"}}}class pc extends i.Component{constructor(e){super(e),this.selectSpecies=e=>{""===this.state.selectedSpeciesID&&this.setState({selectedSpeciesID:e.id})},this.selectRole=e=>{""===this.state.selectedRoleID&&this.setState({selectedRoleID:e.id})},this.selectBackground=e=>{""===this.state.selectedBackgroundID&&this.setState({selectedBackgroundID:e.id})},this.select=()=>{this.props.select(this.state.selectedSpeciesID,this.state.selectedRoleID,this.state.selectedBackgroundID)},this.redraw=e=>{switch(e){case E.Species:this.setState({speciesIDs:d.shuffle(Oe.getHeroSpeciesDeck(this.props.options.packIDs).map((e=>e.id))).splice(0,3)},(()=>{this.props.options.developer||this.props.useCharge(h.Hall,1)}));break;case E.Role:this.setState({roleIDs:d.shuffle(Oe.getRoleDeck(this.props.options.packIDs).map((e=>e.id))).splice(0,3)},(()=>{this.props.options.developer||this.props.useCharge(h.Hall,1)}));break;case E.Background:this.setState({backgroundIDs:d.shuffle(Oe.getBackgroundDeck(this.props.options.packIDs).map((e=>e.id))).splice(0,3)},(()=>{this.props.options.developer||this.props.useCharge(h.Hall,1)}))}},this.getOverviewSection=()=>{let e=(0,Zn.jsx)(ha,{type:E.Species,disabled:!0,front:(0,Zn.jsx)(fr,{text:"Species",subtext:"Choose one of the three Species cards below"})}),t=(0,Zn.jsx)(ha,{type:E.Role,disabled:!0,front:(0,Zn.jsx)(fr,{text:"Role",subtext:"Choose one of the three Role cards below"})}),n=(0,Zn.jsx)(ha,{type:E.Background,disabled:!0,front:(0,Zn.jsx)(fr,{text:"Background",subtext:"Choose one of the three Background cards below"})});const a=Oe.getSpecies(this.state.selectedSpeciesID);a&&(e=(0,Zn.jsx)(jr,{species:a}));const r=Oe.getRole(this.state.selectedRoleID);r&&(t=(0,Zn.jsx)(Ar,{role:r}));const s=Oe.getBackground(this.state.selectedBackgroundID);return s&&(n=(0,Zn.jsx)(gr,{background:s})),(0,Zn.jsx)("div",{className:"card-selection-row",children:(0,Zn.jsx)(oa,{cards:[e,t,n]})})},this.getSpeciesSection=()=>{if(this.state.selectedSpeciesID)return;const e=this.state.speciesIDs.map((e=>{const t=Oe.getSpecies(e);return(0,Zn.jsx)(jr,{species:t,onClick:this.selectSpecies},t.id)})),t=V.getStructureCharges(this.props.game,h.Hall);return(0,Zn.jsxs)("div",{className:"card-selection-row",children:[(0,Zn.jsx)(oa,{cards:e}),t>0||this.props.options.developer?(0,Zn.jsxs)("button",{className:this.props.options.developer?"developer":"",onClick:()=>this.redraw(E.Species),children:["Redraw Species Cards",(0,Zn.jsx)("br",{}),(0,Zn.jsx)(ta,{type:$n.Redraw,value:t,size:ea.Button})]}):null]})},this.getRoleSection=()=>{if(this.state.selectedRoleID)return;const e=this.state.roleIDs.map((e=>{const t=Oe.getRole(e);return(0,Zn.jsx)(Ar,{role:t,onClick:this.selectRole},t.id)})),t=V.getStructureCharges(this.props.game,h.Hall);return(0,Zn.jsxs)("div",{className:"card-selection-row",children:[(0,Zn.jsx)(oa,{cards:e}),t>0||this.props.options.developer?(0,Zn.jsxs)("button",{className:this.props.options.developer?"developer":"",onClick:()=>this.redraw(E.Role),children:["Redraw Role Cards",(0,Zn.jsx)("br",{}),(0,Zn.jsx)(ta,{type:$n.Redraw,value:t,size:ea.Button})]}):null]})},this.getBackgroundSection=()=>{if(this.state.selectedBackgroundID)return;const e=this.state.backgroundIDs.map((e=>{const t=Oe.getBackground(e);return(0,Zn.jsx)(gr,{background:t,onClick:this.selectBackground},t.id)})),t=V.getStructureCharges(this.props.game,h.Hall);return(0,Zn.jsxs)("div",{className:"card-selection-row",children:[(0,Zn.jsx)(oa,{cards:e}),t>0||this.props.options.developer?(0,Zn.jsxs)("button",{className:this.props.options.developer?"developer":"",onClick:()=>this.redraw(E.Background),children:["Redraw Background Cards",(0,Zn.jsx)("br",{}),(0,Zn.jsx)(ta,{type:$n.Redraw,value:t,size:ea.Button})]}):null]})},this.render=()=>{try{const e=""!==this.state.selectedSpeciesID&&""!==this.state.selectedRoleID&&""!==this.state.selectedBackgroundID;return(0,Zn.jsxs)("div",{className:"card-page",children:[(0,Zn.jsxs)("div",{className:"card-page-content",children:[this.getOverviewSection(),this.props.options.showTips?(0,Zn.jsx)(da,{header:(0,Zn.jsx)(ra,{type:aa.Tip,children:(0,Zn.jsxs)("p",{children:["To make a hero, choose one ",(0,Zn.jsx)("b",{children:"Species"})," card, one ",(0,Zn.jsx)("b",{children:"Role"})," card, and one ",(0,Zn.jsx)("b",{children:"Background"})," card."]})}),content:(0,Zn.jsxs)("div",{children:[(0,Zn.jsx)("p",{children:"Click on a card to select it."}),(0,Zn.jsxs)("p",{children:["You can click on the ",(0,Zn.jsx)(zn,{size:15})," button to flip a card over and see its details."]}),(0,Zn.jsxs)("p",{children:["Each card gives the hero a set of ",(0,Zn.jsx)("b",{children:"features"})," and ",(0,Zn.jsx)("b",{children:"actions"}),"."]}),(0,Zn.jsxs)("ul",{children:[(0,Zn.jsx)("li",{children:"Features are used when the hero gains a level."}),(0,Zn.jsx)("li",{children:"Actions are used in encounters."})]})]})}):null,e?null:(0,Zn.jsx)("hr",{}),this.getSpeciesSection(),this.getRoleSection(),this.getBackgroundSection()]}),(0,Zn.jsx)("button",{className:"action primary",disabled:!e,onClick:()=>this.select(),children:"Next"})]})}catch{return(0,Zn.jsx)("div",{className:"card-page render-error"})}},this.state={speciesIDs:d.shuffle(Oe.getHeroSpeciesDeck(e.options.packIDs).map((e=>e.id))).splice(0,3),roleIDs:d.shuffle(Oe.getRoleDeck(e.options.packIDs).map((e=>e.id))).splice(0,3),backgroundIDs:d.shuffle(Oe.getBackgroundDeck(e.options.packIDs).map((e=>e.id))).splice(0,3),selectedSpeciesID:"",selectedRoleID:"",selectedBackgroundID:""}}}class hc extends i.Component{constructor(e){super(e),this.selectItem=e=>{const t=this.state.slots.find((t=>t.proficiency===e.proficiency));if(t){const n=JSON.parse(JSON.stringify(e));n.id=D.guid(),t.selected=n,this.setState({slots:this.state.slots})}},this.redraw=e=>{const t=this.state.slots.find((t=>t.proficiency===e));t&&(t.candidates=d.shuffle(Oe.getItemsForProficiency(e,this.props.options.packIDs)).splice(0,3),this.setState({slots:this.state.slots},(()=>{this.props.options.developer||this.props.useCharge(h.Quartermaster,1)})))},this.addItems=()=>{const e=this.state.slots.map((e=>e.selected)).filter((e=>null!==e));this.props.addItems(e)},this.render=()=>{try{if(!Oe.getRole(this.props.hero.roleID))return null;const e=this.state.slots.map(((e,t)=>e.selected?(0,Zn.jsx)(yr,{item:e.selected},t):(0,Zn.jsx)(ha,{type:E.Item,disabled:!0,front:(0,Zn.jsx)(fr,{text:e.proficiency,subtext:"Choose one of the three ".concat(e.proficiency," cards below")})},t))),t=this.state.slots.filter((e=>!e.selected)).map(((e,t)=>{const n=e.candidates.map((e=>(0,Zn.jsx)(yr,{item:e,onClick:this.selectItem},e.id))),a=V.getStructureCharges(this.props.game,h.Quartermaster);return(0,Zn.jsxs)("div",{className:"card-selection-row",children:[(0,Zn.jsx)(oa,{cards:n}),a>0||this.props.options.developer?(0,Zn.jsxs)("button",{className:this.props.options.developer?"developer":"",onClick:()=>this.redraw(e.proficiency),children:["Redraw Item Cards",(0,Zn.jsx)("br",{}),(0,Zn.jsx)(ta,{type:$n.Redraw,value:a,size:ea.Button})]}):null]},t)})),n=this.state.slots.every((e=>null!==e.selected));return(0,Zn.jsxs)("div",{className:"equipment-page",children:[(0,Zn.jsxs)("div",{className:"equipment-page-content",children:[(0,Zn.jsx)("div",{className:"card-selection-row",children:(0,Zn.jsx)(oa,{cards:e})}),this.props.options.showTips?(0,Zn.jsx)(da,{header:(0,Zn.jsx)(ra,{type:aa.Tip,children:"Your hero can choose starting equipment."}),content:(0,Zn.jsxs)("div",{children:[(0,Zn.jsxs)("p",{children:["Your hero's starting features include ",(0,Zn.jsx)("b",{children:"Proficiencies"})," for weapons, armor, or magical implements."]}),(0,Zn.jsx)("p",{children:"For each proficiency, you can choose an item for your hero to use."})]})}):null,n?null:(0,Zn.jsx)("hr",{}),t]}),(0,Zn.jsx)("button",{className:"action primary",disabled:!n,onClick:()=>this.addItems(),children:"Next"})]})}catch{return(0,Zn.jsx)("div",{className:"equipment-page render-error"})}};const t=X.getProficiencies(this.props.hero).map((t=>({proficiency:t,candidates:d.shuffle(Oe.getItemsForProficiency(t,e.options.packIDs)).splice(0,3),selected:null})));this.state={slots:t}}}class mc extends i.Component{constructor(){super(...arguments),this.render=()=>{try{return(0,Zn.jsxs)("div",{className:"finish-page",children:[(0,Zn.jsxs)("div",{className:"finish-page-content",children:[(0,Zn.jsx)(_a,{combatant:this.props.hero,options:this.props.options}),this.props.options.showTips?(0,Zn.jsx)(da,{header:(0,Zn.jsx)(ra,{type:aa.Tip,children:"Choose a name and a color for your hero."}),content:(0,Zn.jsxs)("div",{children:[(0,Zn.jsxs)("p",{children:["You can press ",(0,Zn.jsx)("b",{children:"Change Name"})," to change your hero's name."]}),(0,Zn.jsxs)("p",{children:["You can press ",(0,Zn.jsx)("b",{children:"Change Color"})," to change your hero's color. This will be used to help identify your hero's token on the encounter map."]})]})}):null,(0,Zn.jsx)("hr",{}),(0,Zn.jsx)("button",{onClick:this.props.rename,children:"Change Name"}),(0,Zn.jsx)("button",{onClick:this.props.recolor,children:"Change Color"})]}),(0,Zn.jsx)("button",{className:"action primary",onClick:this.props.finished,children:"Finished"})]})}catch{return(0,Zn.jsx)("div",{className:"finish-page render-error"})}}}}class fc extends i.Component{constructor(e){super(e),this.selectCards=(e,t,n)=>{const a=this.state.hero;X.applyCombatantCards(a,e,t,n),this.setState({hero:a})},this.addItems=e=>{const t=this.state.hero;t.items=e,this.setState({hero:t})},this.rename=()=>{const e=this.state.hero;e.name=O.generateName(Math.random),this.setState({hero:e})},this.recolor=()=>{const e=u.randomColor(20,180),t=this.state.hero;t.color="rgb(".concat(e.r,", ").concat(e.g,", ").concat(e.b,")"),this.setState({hero:t})},this.finished=()=>{this.props.finished(this.state.hero)},this.render=()=>{try{let e=null;return""===this.state.hero.speciesID&&""===this.state.hero.roleID&&""===this.state.hero.backgroundID?e=(0,Zn.jsx)(pc,{game:this.props.game,options:this.props.options,select:this.selectCards,useCharge:this.props.useCharge}):X.getProficiencies(this.state.hero).length!==this.state.hero.items.length?e=(0,Zn.jsx)(hc,{hero:this.state.hero,game:this.props.game,options:this.props.options,addItems:this.addItems,useCharge:this.props.useCharge}):1===this.state.hero.level&&(e=(0,Zn.jsx)(mc,{hero:this.state.hero,options:this.props.options,rename:this.rename,recolor:this.recolor,finished:this.finished})),(0,Zn.jsxs)("div",{className:"hero-builder-modal",children:[(0,Zn.jsx)("div",{className:"header",children:(0,Zn.jsx)(ra,{type:aa.Heading,children:"Recruit a Hero"})}),(0,Zn.jsx)("div",{className:"content",children:e})]})}catch{return(0,Zn.jsx)("div",{className:"hero-builder-modal render-error"})}};const t=JSON.parse(JSON.stringify(e.hero));t.name=O.generateName(Math.random);const n=u.randomColor(20,180);t.color="rgb(".concat(n.r,", ").concat(n.g,", ").concat(n.b,")"),this.state={hero:t}}}class gc extends i.Component{constructor(e){super(e),this.setComparison=e=>{this.setState({hero:e})},this.getIsEquippable=(e,t)=>{let n=1;switch(t.location){case b.Hand:case b.Ring:n=2}const a=e.items.filter((e=>e.location===t.location)),r=d.sum(a,(e=>e.slots)),s=n-r;return t.slots<=s},this.getDialog=()=>{if(null===this.state.hero)return null;const e=this.state.hero.items.filter((e=>e.location===this.props.item.location)).map((e=>(0,Zn.jsxs)("div",{className:"card-container",children:[(0,Zn.jsx)(yr,{item:e}),(0,Zn.jsx)("button",{onClick:()=>this.props.dropItem(e,this.state.hero),children:"Drop"})]},e.id)));0===e.length&&e.push((0,Zn.jsx)("div",{className:"card-container",children:(0,Zn.jsx)(ha,{front:(0,Zn.jsx)(fr,{content:(0,Zn.jsx)(ra,{type:aa.Small,children:"Nothing"})}),disabled:!0})},"empty"));const t=this.getIsEquippable(this.state.hero,this.props.item);return(0,Zn.jsx)(ua,{level:2,content:(0,Zn.jsxs)("div",{className:"item-comparer-dialog",children:[(0,Zn.jsx)(ra,{type:aa.Heading,children:this.state.hero.name}),(0,Zn.jsx)("hr",{}),(0,Zn.jsxs)("div",{className:"item-columns",children:[(0,Zn.jsxs)("div",{className:"item-column",children:[(0,Zn.jsx)(ra,{type:aa.SubHeading,children:"Currently Equipped"}),e]}),(0,Zn.jsxs)("div",{className:"item-column",children:[(0,Zn.jsx)(ra,{type:aa.SubHeading,children:"New Item"}),(0,Zn.jsxs)("div",{className:"card-container",children:[(0,Zn.jsx)(yr,{item:this.props.item}),t?(0,Zn.jsx)("button",{onClick:()=>{this.props.equipItem(this.props.item,this.state.hero),this.setComparison(null)},children:"Equip"}):null]})]})]})]}),onClose:()=>this.setComparison(null)})},this.render=()=>{try{const e=[],t=[];this.props.game.heroes.filter((e=>this.props.item.proficiency===v.None||X.getProficiencies(e).includes(this.props.item.proficiency))).forEach((n=>{this.getIsEquippable(n,this.props.item)?e.push((0,Zn.jsx)(_a,{combatant:n,options:this.props.options,onClick:e=>this.props.equipItem(this.props.item,e)},n.id)):t.push((0,Zn.jsx)(_a,{combatant:n,options:this.props.options,onClick:e=>this.setComparison(e)},n.id))}));let n=null;return n=e.length+t.length===0?(0,Zn.jsx)("div",{className:"hero-list",children:(0,Zn.jsx)(ra,{type:aa.Empty,children:"Usable by none of your current heroes."})}):(0,Zn.jsxs)("div",{className:"hero-list",children:[e.length>0?(0,Zn.jsx)(ra,{type:aa.Information,children:(0,Zn.jsx)("p",{children:"These heroes can equip this item. Click on one of them to equip it."})}):null,e,t.length>0?(0,Zn.jsx)(ra,{type:aa.Information,children:(0,Zn.jsx)("p",{children:"These heroes can equip this item, but already have an item in this location. Click on one of them to compare items."})}):null,t]}),(0,Zn.jsxs)("div",{className:"magic-item-info-modal",children:[(0,Zn.jsx)(ra,{type:aa.Heading,children:"Magic Item"}),(0,Zn.jsx)("hr",{}),(0,Zn.jsxs)("div",{className:"magic-item-info-content",children:[(0,Zn.jsxs)("div",{className:"card",children:[(0,Zn.jsx)(yr,{item:this.props.item}),(0,Zn.jsxs)("button",{onClick:()=>this.props.sellItem(this.props.item),children:["Sell",(0,Zn.jsx)("br",{}),(0,Zn.jsx)(ta,{type:$n.Money,value:50,size:ea.Button})]})]}),n]}),this.getDialog()]})}catch{return(0,Zn.jsx)("div",{className:"magic-item-modal render-error"})}},this.state={hero:null}}}class yc extends i.Component{constructor(e){super(e),this.getDialog=()=>{if(!this.state.selectedPack)return null;const e=this.state.selectedPack;let t=null;t=""===e.id||this.props.options.packIDs.includes(e.id)?null:(0,Zn.jsxs)("div",{children:[(0,Zn.jsx)(ra,{type:aa.Information,children:(0,Zn.jsxs)("p",{children:["You ",(0,Zn.jsx)("b",{children:"do not"})," own this card pack."]})}),(0,Zn.jsxs)("button",{className:"primary",onClick:()=>this.props.addPacks([e]),children:["Get This Pack (",M.toCurrency(this.props.getPrice([e]),"$"),")"]})]});const n=qe.getList().filter((t=>t.packID===e.id)).map((e=>(0,Zn.jsx)(jr,{species:e},e.id))),a=$.getList().filter((t=>t.packID===e.id)).map((e=>(0,Zn.jsx)(jr,{species:e},e.id))),r=ze.getList().filter((t=>t.packID===e.id)).map((e=>(0,Zn.jsx)(Ar,{role:e},e.id))),s=Re.getList().filter((t=>t.packID===e.id)).map((e=>(0,Zn.jsx)(gr,{background:e},e.id))),i=f.getList().filter((t=>t.packID===e.id)).map((e=>(0,Zn.jsx)(br,{structure:e},e.id))),o=Le.getList().filter((t=>t.packID===e.id)).map((e=>(0,Zn.jsx)(yr,{item:e},e.id))),l=Te.getList().filter((t=>t.packID===e.id)).map((e=>(0,Zn.jsx)(yr,{item:e},e.id)));return(0,Zn.jsx)(ua,{content:(0,Zn.jsxs)("div",{children:[(0,Zn.jsx)(ra,{type:aa.Heading,children:this.state.selectedPack.name}),(0,Zn.jsx)("hr",{}),(0,Zn.jsx)(ra,{children:(0,Zn.jsx)("p",{style:{textAlign:"center"},children:this.state.selectedPack.description})}),t,n.length>0?(0,Zn.jsx)("hr",{}):null,n.length>0?(0,Zn.jsx)(ra,{type:aa.MinorHeading,children:"Hero Species Cards"}):null,n.length>0?(0,Zn.jsx)(oa,{cards:n}):null,a.length>0?(0,Zn.jsx)("hr",{}):null,a.length>0?(0,Zn.jsx)(ra,{type:aa.MinorHeading,children:"Monster Species Cards"}):null,a.length>0?(0,Zn.jsx)(oa,{cards:a}):null,r.length>0?(0,Zn.jsx)("hr",{}):null,r.length>0?(0,Zn.jsx)(ra,{type:aa.MinorHeading,children:"Role Cards"}):null,r.length>0?(0,Zn.jsx)(oa,{cards:r}):null,s.length>0?(0,Zn.jsx)("hr",{}):null,s.length>0?(0,Zn.jsx)(ra,{type:aa.MinorHeading,children:"Background Cards"}):null,s.length>0?(0,Zn.jsx)(oa,{cards:s}):null,i.length>0?(0,Zn.jsx)("hr",{}):null,i.length>0?(0,Zn.jsx)(ra,{type:aa.MinorHeading,children:"Structure Cards"}):null,i.length>0?(0,Zn.jsx)(oa,{cards:i}):null,o.length>0?(0,Zn.jsx)("hr",{}):null,o.length>0?(0,Zn.jsx)(ra,{type:aa.MinorHeading,children:"Item Cards"}):null,o.length>0?(0,Zn.jsx)(oa,{cards:o}):null,l.length>0?(0,Zn.jsx)("hr",{}):null,l.length>0?(0,Zn.jsx)(ra,{type:aa.MinorHeading,children:"Potion Cards"}):null,l.length>0?(0,Zn.jsx)(oa,{cards:l}):null]}),level:2,onClose:()=>this.setState({selectedPack:null})})},this.render=()=>{try{const e=(0,Zn.jsx)(wr,{pack:{id:"",name:"Skirmish",description:"The core cards for the game, available to all."},onClick:e=>this.setState({selectedPack:e})},"core"),t=Sr.getPacks().filter((e=>""===e.id||this.props.options.packIDs.includes(e.id))),n=Sr.getPacks().filter((e=>""!==e.id&&!this.props.options.packIDs.includes(e.id))),a=t.map((e=>(0,Zn.jsx)(wr,{pack:e,onClick:e=>this.setState({selectedPack:e}),onRemove:this.props.options.developer?e=>this.props.removePack(e):null},e.id))),r=n.map((e=>(0,Zn.jsx)(wr,{pack:e,onClick:e=>this.setState({selectedPack:e})},e.id)));return(0,Zn.jsxs)("div",{className:"packs-modal",children:[(0,Zn.jsx)(ra,{type:aa.Heading,children:"Card Packs"}),(0,Zn.jsx)("hr",{}),(0,Zn.jsx)(ra,{type:aa.SubHeading,children:"Core Game"}),(0,Zn.jsx)(oa,{cards:[e]}),(0,Zn.jsx)("hr",{}),r.length>0?(0,Zn.jsx)(ra,{type:aa.SubHeading,children:"Available Packs"}):null,r.length>1?(0,Zn.jsxs)("button",{className:"primary",onClick:()=>this.props.addPacks(n),children:["Get All Packs (",M.toCurrency(this.props.getPrice(n),"$"),")"]}):null,r.length>0?(0,Zn.jsx)(oa,{cards:r}):null,r.length>0?(0,Zn.jsx)("hr",{}):null,(0,Zn.jsx)(ra,{type:aa.SubHeading,children:"My Packs"}),(0,Zn.jsx)(oa,{cards:a}),this.getDialog()]})}catch{return(0,Zn.jsx)("div",{className:"packs-modal render-error"})}},this.state={selectedPack:null}}}class bc extends i.Component{constructor(e){super(e),this.conquer=e=>{this.setState({selectedRegion:null},(()=>{this.props.conquer(e)}))},this.getSidebar=()=>{if(this.state.selectedRegion){const e=_.canAttackRegion(this.props.game.map,this.state.selectedRegion),t=this.props.game.heroes.length>0,n=this.state.selectedRegion.encounters.length>1?"".concat(this.state.selectedRegion.encounters.length," encounters"):"1 encounter";return(0,Zn.jsxs)("div",{className:"sidebar",children:[(0,Zn.jsxs)("div",{className:"sidebar-section",children:[e?null:(0,Zn.jsx)(ra,{type:aa.Information,children:(0,Zn.jsxs)("p",{children:[(0,Zn.jsxs)("b",{children:["You can't attack ",this.state.selectedRegion.name]})," because it's not adjacent to your land."]})}),t?null:(0,Zn.jsx)(ra,{type:aa.Information,children:(0,Zn.jsxs)("p",{children:[(0,Zn.jsxs)("b",{children:["You can't attack ",this.state.selectedRegion.name]})," because you don't have any heroes."]})}),e&&t?(0,Zn.jsx)("button",{className:"primary",onClick:()=>this.setState({showHeroSelection:!0}),children:"Start an encounter"}):null,this.props.options.developer?(0,Zn.jsx)("button",{className:"developer",onClick:()=>this.conquer(this.state.selectedRegion),children:"Conquer"}):null,(0,Zn.jsxs)(ra,{children:["If you take control of ",(0,Zn.jsx)("b",{children:this.state.selectedRegion.name})," (by winning ",(0,Zn.jsx)("b",{children:n}),") you can recruit a new hero, and you will receive a reward."]})]}),(0,Zn.jsx)("div",{className:"sidebar-section",children:(0,Zn.jsx)(oa,{cards:[(0,Zn.jsx)(Cr,{map:this.props.game.map,region:this.state.selectedRegion,options:this.props.options},"region")]})}),(0,Zn.jsx)("div",{className:"sidebar-section",children:(0,Zn.jsx)(oa,{cards:[(0,Zn.jsx)(vr,{boon:this.state.selectedRegion.boon},"boon")]})})]},this.state.selectedRegion.id)}const e=d.distinct(this.props.game.map.squares.map((e=>e.regionID)).filter((e=>""!==e)),(e=>e)),t=this.props.game.map.squares.filter((e=>""===e.regionID)).length/this.props.game.map.squares.length,n=d.sum(this.props.game.map.regions,(e=>e.encounters.length));return(0,Zn.jsxs)("div",{className:"sidebar",children:[(0,Zn.jsxs)("div",{className:"sidebar-section",children:[(0,Zn.jsx)(ra,{type:aa.SubHeading,children:"The Island"}),(0,Zn.jsxs)(ra,{children:[(0,Zn.jsx)("p",{children:"This is the map of the island."}),(0,Zn.jsx)("p",{children:"The white area is the part of the island that you control; from here you can attack any adjacent region."}),(0,Zn.jsx)("p",{children:"Select a region to learn more about it."})]}),this.props.options.developer?(0,Zn.jsx)("button",{className:"developer",onClick:this.props.regenerateCampaignMap,children:"Regenerate Map"}):null,this.props.options.showTips?(0,Zn.jsx)(da,{header:(0,Zn.jsx)(ra,{type:aa.Tip,children:"To start an encounter, tap on a region on the island."}),content:(0,Zn.jsxs)("div",{children:[(0,Zn.jsx)("p",{children:"Encounters are the main way your heroes can gain XP (and level up)."}),(0,Zn.jsx)("p",{children:"Each region has a certain number of encounters that must be won in order to conquer that region."}),(0,Zn.jsx)("p",{children:"Conquering a region will allow you to recruit a new hero, and will also provide an additional reward - often money or a magical item."}),(0,Zn.jsx)("p",{children:"You can only attack regions that border the land you already control (in white)."})]})}):null]}),(0,Zn.jsxs)("div",{className:"sidebar-section",children:[(0,Zn.jsx)("div",{className:"map-stats",children:(0,Zn.jsx)(fa,{orientation:"vertical",label:"Island Controlled",value:(0,Zn.jsx)(pa,{progress:t,content:(0,Zn.jsxs)("b",{children:[Math.floor(100*t),"%"]})})})}),(0,Zn.jsx)("div",{className:"map-stats",children:(0,Zn.jsx)(fa,{orientation:"vertical",label:"Regions Remaining",value:e.length})}),n<=100?(0,Zn.jsx)("div",{className:"map-stats",children:(0,Zn.jsx)(fa,{orientation:"vertical",label:"Encounters Remaining",value:n})}):null]})]},"map")},this.getDialog=()=>this.state.showHeroSelection?(0,Zn.jsx)(ua,{content:(0,Zn.jsx)(Xr,{region:this.state.selectedRegion,game:this.props.game,options:this.props.options,startEncounter:this.props.startEncounter}),onClose:()=>{this.setState({showHeroSelection:!1})}}):null,this.render=()=>{try{return(0,Zn.jsxs)("div",{className:"campaign-map-page ".concat(this.props.orientation),children:[(0,Zn.jsx)("div",{className:"map-content",onClick:()=>this.setState({selectedRegion:null}),children:(0,Zn.jsx)(Sa,{map:this.props.game.map,options:this.props.options,selectedRegion:this.state.selectedRegion,onSelectRegion:e=>this.setState({selectedRegion:e})})}),this.getSidebar(),this.getDialog()]})}catch{return(0,Zn.jsx)("div",{className:"campaign-map-page render-error"})}},this.state={selectedRegion:null,showHeroSelection:!1}}}class vc extends i.Component{constructor(e){super(e),this.selectBoon=e=>{switch(e.type){case g.ExtraHero:case g.MagicItem:case g.Money:this.props.redeemBoon(e,null,null,null,0);break;case g.ExtraXP:case g.LevelUp:case g.EnchantItem:this.setState({selectedBoon:e})}},this.selectHero=e=>{this.setState({selectedHero:e})},this.selectRetiringHero=e=>{this.setState({retiringHero:e})},this.retireHero=e=>{this.setState({selectedHero:null},(()=>{this.props.retireHero(e)}))},this.addXP=e=>{this.setState({selectingHero:!1},(()=>{this.props.addXP(e,this.props.options.developer?null:h.Academy)}))},this.getContent=()=>{let e=null;if(this.props.game.heroes.some((e=>e.xp>=e.level))&&(e=(0,Zn.jsx)(ra,{type:aa.Information,children:(0,Zn.jsxs)("p",{children:[(0,Zn.jsx)("b",{children:"Some of your heroes have gained enough XP to level up."})," Open their character sheet to upgrade them."]})})),this.props.game.heroes.length>0){const t=this.props.game.heroes.map((e=>(0,Zn.jsx)("div",{children:(0,Zn.jsx)(sa,{value:e.xp>=e.level?"Level Up":null,children:(0,Zn.jsx)(xr,{hero:e,onCharacterSheet:this.selectHero,onRetire:this.selectRetiringHero})})},e.id)));return(0,Zn.jsxs)("div",{children:[e,(0,Zn.jsx)(oa,{cards:t})]})}return(0,Zn.jsx)(ra,{type:aa.Empty,children:"You have no heroes."})},this.getSidebar=()=>{let e=null;if(this.props.game.boons.filter((e=>Oe.getBoonIsHeroType(e))).length>0){const t=this.props.game.boons.filter((e=>Oe.getBoonIsHeroType(e))).map((e=>(0,Zn.jsx)(vr,{boon:e,onClick:this.selectBoon},e.id)));e=(0,Zn.jsxs)("div",{children:[(0,Zn.jsx)(ra,{type:aa.Information,children:(0,Zn.jsxs)("p",{children:[(0,Zn.jsx)("b",{children:"You have won these rewards."})," Select a card to redeem that reward."]})}),(0,Zn.jsx)(oa,{cards:t})]})}let t=null;this.props.game.heroSlots>0&&(t=(0,Zn.jsx)(oa,{cards:[(0,Zn.jsx)(ha,{stack:!0,front:(0,Zn.jsx)(fr,{text:"Recruits Available",subtext:"Click here to recruit a new hero.",content:(0,Zn.jsx)("div",{className:"slots-count",children:this.props.game.heroSlots})}),onClick:()=>this.setState({selectedHero:Q.createCombatant(N.Hero)})},"recruits")]}));let n=null;return(V.getStructureCharges(this.props.game,h.Academy)>0||this.props.options.developer)&&(n=(0,Zn.jsx)(oa,{cards:[(0,Zn.jsx)(Dr,{label:"Bonus XP",available:V.getStructureCharges(this.props.game,h.Academy),developer:this.props.options.developer,onUse:()=>this.setState({selectingHero:!0})},"xp")]})),(0,Zn.jsxs)("div",{className:"sidebar",children:[(0,Zn.jsxs)("div",{className:"sidebar-section",children:[(0,Zn.jsx)(ra,{type:aa.SubHeading,children:"Your Team"}),(0,Zn.jsxs)(ra,{children:[(0,Zn.jsx)("p",{children:"This page shows the heroes that you have recruited."}),(0,Zn.jsx)("p",{children:"You can flip a hero's card over to see some important stats, or press the button to see their character sheet."})]})]}),null!==e||null!==n?(0,Zn.jsxs)("div",{className:"sidebar-section",children:[e,null!==e&&null!==n?(0,Zn.jsx)("hr",{}):null,n]}):null,null!==t?(0,Zn.jsx)("div",{className:"sidebar-section",children:t}):null]})},this.getDialog=()=>{if(this.state.selectedHero)return this.state.selectedHero.name?(0,Zn.jsx)(ua,{content:(0,Zn.jsx)(Vr,{combatant:this.state.selectedHero,game:this.props.game,developer:this.props.options.developer,equipItem:this.props.equipItem,unequipItem:this.props.unequipItem,pickUpItem:this.props.pickUpItem,dropItem:this.props.dropItem,levelUp:this.props.levelUp,retireHero:this.retireHero,useCharge:this.props.useCharge}),onClose:this.state.selectedHero.xp>=this.state.selectedHero.level?null:()=>{this.setState({selectedHero:null})}}):(0,Zn.jsx)(ua,{content:(0,Zn.jsx)(fc,{hero:this.state.selectedHero,game:this.props.game,options:this.props.options,useCharge:this.props.useCharge,finished:e=>{const t=this.state.selectedHero;this.setState({selectedHero:null},(()=>{e.id=t.id,this.props.addHero(e)}))}})});if(this.state.selectedBoon){const e=this.props.game.heroes.map((e=>(0,Zn.jsx)(xr,{hero:e,onClick:e=>{const t=this.state.selectedBoon;this.setState({selectedBoon:null},(()=>{this.props.redeemBoon(t,e,null,null,0)}))}},e.id)));return(0,Zn.jsx)(ua,{content:(0,Zn.jsxs)("div",{children:[(0,Zn.jsx)(ra,{type:aa.Heading,children:"Choose a Hero"}),(0,Zn.jsx)(ra,{type:aa.Information,children:(0,Zn.jsx)("p",{children:"Choose a hero to receive this reward."})}),(0,Zn.jsx)(oa,{cards:e})]}),onClose:()=>{this.setState({selectedBoon:null})}})}return this.state.retiringHero?(0,Zn.jsx)(ua,{content:(0,Zn.jsxs)("div",{children:[(0,Zn.jsx)(ra,{type:aa.Heading,children:"Retire This Hero"}),(0,Zn.jsxs)("div",{className:"retire-hero-card",children:[(0,Zn.jsx)(xr,{hero:this.state.retiringHero}),(0,Zn.jsxs)("div",{children:[(0,Zn.jsxs)(ra,{type:aa.Information,children:[(0,Zn.jsxs)("p",{children:[(0,Zn.jsx)("b",{children:"You can retire this hero."})," If you do:"]}),(0,Zn.jsxs)("ul",{children:[(0,Zn.jsx)("li",{children:"You'll get half their total XP to add to another hero"}),(0,Zn.jsx)("li",{children:"You keep any potions and magic items they have"}),(0,Zn.jsx)("li",{children:"You can recruit a new hero to take their place"})]}),(0,Zn.jsx)("p",{children:"This cannot be undone."})]}),(0,Zn.jsx)(la,{label:"Retire",onClick:()=>{const e=this.state.retiringHero;this.setState({retiringHero:null},(()=>{this.props.retireHero(e)}))}})]})]})]}),onClose:()=>{this.setState({retiringHero:null})}}):this.state.selectingHero?(0,Zn.jsx)(ua,{content:(0,Zn.jsxs)("div",{children:[(0,Zn.jsx)(ra,{type:aa.Heading,children:"Choose a Hero"}),(0,Zn.jsx)("hr",{}),(0,Zn.jsx)(ra,{type:aa.Information,children:(0,Zn.jsx)("p",{children:"Choose the hero to gain 1 XP."})}),(0,Zn.jsx)(oa,{cards:this.props.game.heroes.map((e=>(0,Zn.jsx)(xr,{hero:e,onClick:()=>this.addXP(e)},e.id)))})]}),onClose:()=>this.setState({selectingHero:!1})}):null},this.render=()=>{try{return(0,Zn.jsxs)("div",{className:"heroes-page ".concat(this.props.orientation),children:[(0,Zn.jsx)("div",{className:"heroes-content",children:this.getContent()}),this.getSidebar(),this.getDialog()]})}catch{return(0,Zn.jsx)("div",{className:"heroes-page render-error"})}},this.state={selectedHero:null,selectedBoon:null,retiringHero:null,selectingHero:!1}}}class kc extends i.Component{constructor(e){super(e),this.selectBoon=e=>{switch(e.type){case g.ExtraHero:case g.MagicItem:case g.Money:this.props.redeemBoon(e,null,null,null,0);break;case g.ExtraXP:case g.LevelUp:case g.EnchantItem:this.setState({selectedBoon:e})}},this.showMarket=e=>{this.setState({showMarket:e})},this.showEnchant=e=>{this.setState({showEnchant:e,selectedBoon:null})},this.buyItem=e=>{this.setState({showMarket:null},(()=>{this.props.buyItem(e)}))},this.enchantItem=(e,t)=>{let n=this.state.selectedBoon,a=0;n||(n={id:D.guid(),type:g.EnchantItem,data:null},a=100),this.setState({selectedBoon:null,showEnchant:!1},(()=>{this.props.redeemBoon(n,null,e,t,a)}))},this.equipItem=(e,t)=>{this.setState({selectedMagicItem:null},(()=>{this.props.equipItem(e,t)}))},this.sellMagicItem=e=>{this.setState({selectedMagicItem:null},(()=>{this.props.sellItem(e,!1)}))},this.getSidebar=()=>{let e=null;if(this.props.game.boons.filter((e=>Oe.getBoonIsItemType(e))).length>0){const t=this.props.game.boons.filter((e=>Oe.getBoonIsItemType(e))).map((e=>(0,Zn.jsx)(vr,{boon:e,onClick:e=>this.selectBoon(e)},e.id)));e=(0,Zn.jsxs)("div",{children:[(0,Zn.jsx)(ra,{type:aa.Information,children:(0,Zn.jsxs)("p",{children:[(0,Zn.jsx)("b",{children:"You have won these rewards."})," Select a card to redeem a reward."]})}),(0,Zn.jsx)(oa,{cards:t})]})}const t=[];return Oe.getItemDeck(this.props.options.packIDs).length>0&&t.push((0,Zn.jsxs)("button",{disabled:this.props.game.money<2,onClick:()=>this.showMarket("mundane"),children:[(0,Zn.jsx)("div",{children:"Buy equipment"}),(0,Zn.jsx)(ta,{type:$n.Money,value:2,size:ea.Button})]},"mundane")),Oe.getPotionDeck(this.props.options.packIDs).length>0&&t.push((0,Zn.jsxs)("button",{disabled:this.props.game.money<20,onClick:()=>this.showMarket("potion"),children:[(0,Zn.jsx)("div",{children:"Buy a potion"}),(0,Zn.jsx)(ta,{type:$n.Money,value:20,size:ea.Button})]},"potion")),Oe.getItemDeck(this.props.options.packIDs).length>0&&t.push((0,Zn.jsxs)("button",{disabled:this.props.game.money<100,onClick:()=>this.showMarket("magical"),children:[(0,Zn.jsx)("div",{children:"Buy a magic item"}),(0,Zn.jsx)(ta,{type:$n.Money,value:100,size:ea.Button})]},"magical")),(0,Zn.jsxs)("div",{className:"sidebar",children:[(0,Zn.jsxs)("div",{className:"sidebar-section",children:[(0,Zn.jsx)(ra,{type:aa.SubHeading,children:"Your Equipment"}),(0,Zn.jsx)(ra,{children:"This page lists the items that your heroes aren't currently using."})]}),null!==e?(0,Zn.jsx)("div",{className:"sidebar-section",children:e}):null,(0,Zn.jsxs)("div",{className:"sidebar-section",children:[t,(0,Zn.jsxs)("button",{disabled:this.props.game.money<100,onClick:()=>this.showEnchant(!0),children:[(0,Zn.jsx)("div",{children:"Enchant an item"}),(0,Zn.jsx)(ta,{type:$n.Money,value:100,size:ea.Button})]})]})]})},this.getDialog=()=>"magical"===this.state.showMarket?(0,Zn.jsx)(ua,{content:(0,Zn.jsx)(Rr,{game:this.props.game,options:this.props.options,buyItem:this.buyItem,useCharge:this.props.useCharge})}):"potion"===this.state.showMarket?(0,Zn.jsx)(ua,{content:(0,Zn.jsx)(qr,{game:this.props.game,options:this.props.options,buyItem:this.buyItem,useCharge:this.props.useCharge})}):"mundane"===this.state.showMarket?(0,Zn.jsx)(ua,{content:(0,Zn.jsx)(Tr,{game:this.props.game,options:this.props.options,buyItem:this.buyItem}),onClose:()=>this.showMarket(null)}):this.state.selectedMagicItem?(0,Zn.jsx)(ua,{content:(0,Zn.jsx)(gc,{item:this.state.selectedMagicItem,game:this.props.game,options:this.props.options,equipItem:this.equipItem,dropItem:this.props.dropItem,sellItem:this.sellMagicItem}),onClose:()=>this.setState({selectedMagicItem:null})}):this.state.showEnchant||this.state.selectedBoon&&this.state.selectedBoon.type===g.EnchantItem?(0,Zn.jsx)(ua,{content:(0,Zn.jsx)(Qr,{game:this.props.game,options:this.props.options,enchantItem:this.enchantItem,useCharge:this.props.useCharge}),onClose:()=>this.showEnchant(!1)}):null,this.render=()=>{try{let e=null;const t=d.sort(this.props.game.items.filter((e=>e.magic)),(e=>e.name));if(t.length>0){const n=t.map((e=>(0,Zn.jsx)("div",{children:(0,Zn.jsx)(yr,{item:e,onClick:e=>this.setState({selectedMagicItem:e})})},e.id)));e=(0,Zn.jsx)("div",{children:(0,Zn.jsx)(oa,{cards:n})})}let n=null;const a=d.sort(this.props.game.items.filter((e=>!e.magic&&e.potion)),(e=>e.name));if(a.length>0){const e=d.distinct(a,(e=>e.name)).map((e=>{const t=a.filter((t=>t.name===e.name)).length;let n=(0,Zn.jsxs)("button",{onClick:()=>this.props.sellItem(e,!0),children:["Sell",(0,Zn.jsx)("br",{}),(0,Zn.jsx)(ta,{type:$n.Money,value:10,size:ea.Button})]});return t>1&&(n=(0,Zn.jsxs)("div",{children:[(0,Zn.jsxs)("button",{onClick:()=>this.props.sellItem(e,!1),children:["Sell One",(0,Zn.jsx)("br",{}),(0,Zn.jsx)(ta,{type:$n.Money,value:10,size:ea.Button})]}),(0,Zn.jsxs)("button",{onClick:()=>this.props.sellItem(e,!0),children:["Sell All (",t,")",(0,Zn.jsx)("br",{}),(0,Zn.jsx)(ta,{type:$n.Money,value:10*t,size:ea.Button})]})]})),(0,Zn.jsxs)("div",{children:[(0,Zn.jsx)(yr,{item:e,count:t}),n]},e.id)}));n=(0,Zn.jsx)("div",{children:(0,Zn.jsx)(oa,{cards:e})})}let r=null;const s=d.sort(this.props.game.items.filter((e=>!e.magic&&!e.potion)),(e=>e.name));if(s.length>0){const e=d.distinct(s,(e=>e.name)).map((e=>{const t=s.filter((t=>t.name===e.name)).length;let n=(0,Zn.jsx)("button",{onClick:()=>this.props.sellItem(e,!0),children:"Sell"});return t>1&&(n=(0,Zn.jsxs)("div",{children:[(0,Zn.jsx)("button",{onClick:()=>this.props.sellItem(e,!1),children:"Sell One"}),(0,Zn.jsxs)("button",{onClick:()=>this.props.sellItem(e,!0),children:["Sell All (",t,")"]})]})),(0,Zn.jsxs)("div",{children:[(0,Zn.jsx)(yr,{item:e,count:t}),n]},e.id)}));r=(0,Zn.jsx)("div",{children:(0,Zn.jsx)(oa,{cards:e})})}let i=null;return 0===this.props.game.items.length&&(i=(0,Zn.jsx)(ra,{type:aa.Empty,children:"You have no unequipped items."})),(0,Zn.jsxs)("div",{className:"items-page ".concat(this.props.orientation),children:[(0,Zn.jsxs)("div",{className:"items-content",children:[e?(0,Zn.jsx)(ra,{type:aa.SubHeading,children:"Magic Items"}):null,e,n?(0,Zn.jsx)(ra,{type:aa.SubHeading,children:"Potions"}):null,n,r?(0,Zn.jsx)(ra,{type:aa.SubHeading,children:"Non-Magic Items"}):null,r,i]}),this.getSidebar(),this.getDialog()]})}catch{return(0,Zn.jsx)("div",{className:"items-page render-error"})}},this.state={showMarket:null,showEnchant:!1,selectedMagicItem:null,selectedBoon:null}}}var xc=Fn("outline","hexagon","IconHexagon",[["path",{d:"M19.875 6.27a2.225 2.225 0 0 1 1.125 1.948v7.284c0 .809 -.443 1.555 -1.158 1.948l-6.75 4.27a2.269 2.269 0 0 1 -2.184 0l-6.75 -4.27a2.225 2.225 0 0 1 -1.158 -1.948v-7.285c0 -.809 .443 -1.554 1.158 -1.947l6.75 -3.98a2.33 2.33 0 0 1 2.25 0l6.75 3.98h-.033z",key:"svg-0"}]]),Sc=Fn("filled","hexagon-filled","IconHexagonFilled",[["path",{d:"M10.425 1.414l-6.775 3.996a3.21 3.21 0 0 0 -1.65 2.807v7.285a3.226 3.226 0 0 0 1.678 2.826l6.695 4.237c1.034 .57 2.22 .57 3.2 .032l6.804 -4.302c.98 -.537 1.623 -1.618 1.623 -2.793v-7.284l-.005 -.204a3.223 3.223 0 0 0 -1.284 -2.39l-.107 -.075l-.007 -.007a1.074 1.074 0 0 0 -.181 -.133l-6.776 -3.995a3.33 3.33 0 0 0 -3.216 0z",key:"svg-0"}]]);class wc extends i.Component{constructor(e){super(e),this.getStructures=()=>{const e=[];for(;e.length<3;){const t=Oe.getStructureDeck(this.props.options.packIDs).filter((e=>V.canCharge(e)));e.push(d.draw(t))}return d.sort(e,(e=>e.name))},this.redraw=()=>{this.setState({structures:this.getStructures()},(()=>{this.props.options.developer||this.props.useCharge(h.Forge,1)}))},this.render=()=>{try{const e=this.state.structures.map((e=>(0,Zn.jsx)(br,{structure:e,onClick:this.props.buyStructure},e.id))),t=V.getStructureCharges(this.props.game,h.Forge);return(0,Zn.jsxs)("div",{className:"buy-structure-modal",children:[(0,Zn.jsx)(ra,{type:aa.Heading,children:"Choose a Structure"}),(0,Zn.jsx)("hr",{}),(0,Zn.jsx)(ra,{type:aa.Information,children:(0,Zn.jsx)("p",{children:"Three structure cards have been drawn for you. Choose one card to add it to your stronghold."})}),(0,Zn.jsxs)("div",{className:"card-selection-row",children:[(0,Zn.jsx)(oa,{cards:e}),t>0||this.props.options.developer?(0,Zn.jsxs)("button",{className:this.props.options.developer?"developer":"",onClick:()=>this.redraw(),children:["Redraw Structure Cards",(0,Zn.jsx)("br",{}),(0,Zn.jsx)(ta,{type:$n.Redraw,value:t,size:ea.Button})]}):null]})]})}catch{return(0,Zn.jsx)("div",{className:"buy-structure-modal render-error"})}},this.state={structures:this.getStructures()}}}class Cc extends i.Component{constructor(e){super(e),this.selectBoon=e=>{if(e.type===g.Structure)this.props.redeemBoon(e,null,null,null,0)},this.buyStructure=e=>{const t="free"===this.state.addingStructure?0:50;this.setState({addingStructure:""},(()=>{this.props.buyStructure(e,t)}))},this.sellStructure=e=>{this.setState({selectedStructure:null},(()=>{this.props.sellStructure(e)}))},this.getStrongholdBenefits=()=>{const e=V.getStructureCharges(this.props.game,h.Hall),t=V.getStructureCharges(this.props.game,h.Quartermaster),n=V.getStructureCharges(this.props.game,h.TrainingGround),a=V.getStructureCharges(this.props.game,h.Observatory),r=V.getStructureCharges(this.props.game,h.WizardTower),s=V.getStructureCharges(this.props.game,h.Forge),i=e+t+n+a+r+s,o=V.getStructureCharges(this.props.game,h.Temple),l=V.getStructureCharges(this.props.game,h.Intelligencer),c=V.getStructureCharges(this.props.game,h.ThievesGuild),u=V.getStructureCharges(this.props.game,h.WarRoom),d=o+l+c,p=V.getStructureCharges(this.props.game,h.Academy),m=p;return i+d+m===0?null:(0,Zn.jsx)("div",{className:"sidebar-section",children:(0,Zn.jsxs)(ia,{label:"Stronghold Benefits",children:[e>0?(0,Zn.jsx)(fa,{label:"Hero Card Redraws",value:e}):null,t>0?(0,Zn.jsx)(fa,{label:"Item Card Redraws",value:t}):null,n>0?(0,Zn.jsx)(fa,{label:"Feature Card Redraws",value:n}):null,a>0?(0,Zn.jsx)(fa,{label:"Action Card Redraws",value:a}):null,r>0?(0,Zn.jsx)(fa,{label:"Magic Item Card Redraws",value:r}):null,s>0?(0,Zn.jsx)(fa,{label:"Structure Card Redraws",value:s}):null,i>0&&d+m>0?(0,Zn.jsx)("hr",{}):null,o>0?(0,Zn.jsx)(fa,{label:"Encounter Benefits",value:o}):null,l>0?(0,Zn.jsx)(fa,{label:"Encounter Detriments",value:l}):null,c>0?(0,Zn.jsx)(fa,{label:"Additional Actions",value:c}):null,u>0?(0,Zn.jsx)(fa,{label:"Additional Heroes",value:u}):null,m>0&&i+d>0?(0,Zn.jsx)("hr",{}):null,p>0?(0,Zn.jsx)(fa,{label:"Additional XP",value:p}):null]})})},this.getSidebar=()=>{if(this.state.selectedStructure){const e=V.getUpgradeCost(this.state.selectedStructure);let t=null,n=null;if(V.canCharge(this.state.selectedStructure)){if(t=(0,Zn.jsxs)("div",{className:"sidebar-section",children:[(0,Zn.jsxs)("div",{className:"upgrade-section",children:[(0,Zn.jsx)(fa,{orientation:"vertical",label:"Level",value:this.state.selectedStructure.level}),(0,Zn.jsxs)("button",{disabled:this.props.game.money<e,onClick:()=>this.props.upgradeStructure(this.state.selectedStructure),children:[(0,Zn.jsxs)("div",{children:["Upgrade",(0,Zn.jsx)("br",{}),"structure"]}),(0,Zn.jsx)(ta,{type:$n.Money,value:e,size:ea.Button})]})]}),(0,Zn.jsxs)("button",{onClick:()=>this.sellStructure(this.state.selectedStructure),children:[(0,Zn.jsx)("div",{children:"Demolish structure"}),(0,Zn.jsx)(ta,{type:$n.Money,value:25,size:ea.Button})]}),(0,Zn.jsxs)("button",{disabled:this.props.game.money<100,onClick:()=>this.props.chargeStructure(this.state.selectedStructure),children:[(0,Zn.jsx)("div",{children:"Recharge structure"}),(0,Zn.jsx)(ta,{type:$n.Money,value:100,size:ea.Button})]})]}),this.state.selectedStructure.charges>0){const e=[];for(let t=0;t<this.state.selectedStructure.level;++t)e.push(t>=this.state.selectedStructure.charges?(0,Zn.jsx)(xc,{size:50},t):(0,Zn.jsx)(Sc,{size:50},t));n=(0,Zn.jsx)("div",{className:"sidebar-section",children:(0,Zn.jsx)(fa,{orientation:"vertical",label:"Charges Remaining",value:(0,Zn.jsx)("div",{className:"bolts",children:e})})})}}else switch(this.state.selectedStructure.type){case h.Barracks:t=(0,Zn.jsx)("div",{className:"sidebar-section",children:(0,Zn.jsx)(ra,{type:aa.Information,children:(0,Zn.jsxs)("p",{children:["See your heroes ",(0,Zn.jsx)("button",{className:"link",onClick:()=>this.props.setPage(ht.Team),children:"here"}),"."]})})});break;case h.Warehouse:t=(0,Zn.jsx)("div",{className:"sidebar-section",children:(0,Zn.jsx)(ra,{type:aa.Information,children:(0,Zn.jsxs)("p",{children:["See your items ",(0,Zn.jsx)("button",{className:"link",onClick:()=>this.props.setPage(ht.Items),children:"here"}),"."]})})})}return(0,Zn.jsxs)("div",{className:"sidebar",children:[(0,Zn.jsx)("div",{className:"sidebar-section",children:(0,Zn.jsx)(oa,{cards:[(0,Zn.jsx)(br,{structure:this.state.selectedStructure},"selected")]})}),t,n]},this.state.selectedStructure.id)}let e=null;if(this.props.game.boons.filter((e=>Oe.getBoonIsStrongholdType(e))).length>0){const t=this.props.game.boons.filter((e=>Oe.getBoonIsStrongholdType(e))).map((e=>(0,Zn.jsx)(vr,{boon:e,onClick:e=>this.selectBoon(e)},e.id)));e=(0,Zn.jsxs)("div",{children:[(0,Zn.jsx)(ra,{type:aa.Information,children:(0,Zn.jsxs)("p",{children:[(0,Zn.jsx)("b",{children:"You have won these rewards."})," Select a card to redeem a reward."]})}),(0,Zn.jsx)(oa,{cards:t})]})}let t=null;return Oe.getStructureDeck(this.props.options.packIDs).length>0&&(t=(0,Zn.jsxs)("button",{disabled:this.props.game.money<50,onClick:()=>this.setState({addingStructure:"paid"}),children:[(0,Zn.jsx)("div",{children:"Build a Structure"}),(0,Zn.jsx)(ta,{type:$n.Money,value:50,size:ea.Button})]})),(0,Zn.jsxs)("div",{className:"sidebar",children:[(0,Zn.jsxs)("div",{className:"sidebar-section",children:[(0,Zn.jsx)(ra,{type:aa.SubHeading,children:"Your Stronghold"}),(0,Zn.jsx)(ra,{children:"This is your base of operations."}),(0,Zn.jsx)(ra,{children:"It's made up of structures, each of which can grant you a unique benefit."}),(0,Zn.jsx)(ra,{children:"Select a structure on the map to see what it can do."}),this.props.options.showTips?(0,Zn.jsx)(da,{header:(0,Zn.jsx)(ra,{type:aa.Tip,children:"Your stronghold can provide useful benefits."}),content:(0,Zn.jsxs)("div",{children:[(0,Zn.jsx)("p",{children:"The different structures have different effects:"}),(0,Zn.jsxs)("ul",{children:[(0,Zn.jsx)("li",{children:"Some structures allow you to redraw cards."}),(0,Zn.jsx)("li",{children:"Some structures provide advantages in encounters."})]}),(0,Zn.jsx)("p",{children:"Structures can be upgraded, which increases their usefulness."}),(0,Zn.jsx)("p",{children:"Most structures need to be charged before they can be used, which costs money."})]})}):null]}),this.getStrongholdBenefits(),null!==e||null!==t?(0,Zn.jsxs)("div",{className:"sidebar-section",children:[e,null!==e&&null!==t?(0,Zn.jsx)("hr",{}):null,t]}):null]},"map")},this.getDialog=()=>""!==this.state.addingStructure?(0,Zn.jsx)(ua,{content:(0,Zn.jsx)(wc,{game:this.props.game,options:this.props.options,buyStructure:this.buyStructure,useCharge:this.props.useCharge})}):null,this.render=()=>{try{return(0,Zn.jsxs)("div",{className:"stronghold-page ".concat(this.props.orientation),children:[(0,Zn.jsx)("div",{className:"map-content",onClick:()=>this.setState({selectedStructure:null}),children:(0,Zn.jsx)(pr,{stronghold:this.props.game.stronghold,selectedStructure:this.state.selectedStructure,onSelectStructure:e=>this.setState({selectedStructure:e})})}),this.getSidebar(),this.getDialog()]})}catch{return(0,Zn.jsx)("div",{className:"stronghold-page render-error"})}},this.state={selectedStructure:null,addingStructure:""}}}class Ac extends i.Component{constructor(){super(...arguments),this.render=()=>{try{let e=null;switch(this.props.page){case ht.Island:e=(0,Zn.jsx)(bc,{game:this.props.game,options:this.props.options,orientation:this.props.orientation,startEncounter:this.props.startEncounter,regenerateCampaignMap:this.props.regenerateCampaignMap,conquer:this.props.conquer});break;case ht.Stronghold:e=(0,Zn.jsx)(Cc,{game:this.props.game,options:this.props.options,orientation:this.props.orientation,setPage:this.props.setPage,buyStructure:this.props.buyStructure,sellStructure:this.props.sellStructure,chargeStructure:this.props.chargeStructure,upgradeStructure:this.props.upgradeStructure,useCharge:this.props.useCharge,redeemBoon:this.props.redeemBoon});break;case ht.Team:e=(0,Zn.jsx)(vc,{game:this.props.game,options:this.props.options,orientation:this.props.orientation,addHero:this.props.addHero,addXP:this.props.addXP,equipItem:this.props.equipItem,unequipItem:this.props.unequipItem,pickUpItem:this.props.pickUpItem,dropItem:this.props.dropItem,levelUp:this.props.levelUp,retireHero:this.props.retireHero,redeemBoon:this.props.redeemBoon,useCharge:this.props.useCharge});break;case ht.Items:e=(0,Zn.jsx)(kc,{game:this.props.game,options:this.props.options,orientation:this.props.orientation,buyItem:this.props.buyItem,sellItem:this.props.sellItem,equipItem:this.props.equipItem,dropItem:this.props.dropItem,redeemBoon:this.props.redeemBoon,useCharge:this.props.useCharge,addMoney:this.props.addMoney})}const t=[{id:ht.Island,display:(0,Zn.jsx)("div",{className:"page-btn",children:"The Island"})},{id:ht.Stronghold,display:(0,Zn.jsxs)("div",{className:"page-btn",children:[(0,Zn.jsx)("div",{children:"Your Stronghold"}),this.props.game.boons.some((e=>Oe.getBoonIsStrongholdType(e)))?(0,Zn.jsx)("div",{children:"\u2b51"}):null]})},{id:ht.Team,display:(0,Zn.jsxs)("div",{className:"page-btn",children:[(0,Zn.jsx)("div",{children:"Your Team"}),this.props.game.boons.some((e=>Oe.getBoonIsHeroType(e)))||this.props.game.heroes.some((e=>e.xp>=e.level))?(0,Zn.jsx)("div",{children:"\u2b51"}):null]})},{id:ht.Items,display:(0,Zn.jsxs)("div",{className:"page-btn",children:[(0,Zn.jsx)("div",{children:"Your Equipment"}),this.props.game.boons.some((e=>Oe.getBoonIsItemType(e)))?(0,Zn.jsx)("div",{children:"\u2b51"}):null]})}],n=Sr.getPacks().filter((e=>!this.props.options.packIDs.includes(e.id))).length;return(0,Zn.jsxs)("div",{className:"campaign-screen ".concat(this.props.orientation),children:[(0,Zn.jsxs)("div",{className:"campaign-top-bar",children:[(0,Zn.jsx)("div",{className:"branding",children:(0,Zn.jsx)(dr,{size:36})}),(0,Zn.jsxs)("div",{className:"money",children:[(0,Zn.jsx)(ta,{type:$n.Money,value:M.toText(this.props.game.money),size:ea.Large}),this.props.options.developer?(0,Zn.jsx)("button",{className:"developer icon-btn",onClick:()=>this.props.addMoney(),children:(0,Zn.jsx)(Na,{})}):null]}),(0,Zn.jsxs)("div",{className:"buttons",children:[(0,Zn.jsx)(sa,{value:n,children:(0,Zn.jsx)("button",{className:"icon-btn",title:"Packs",onClick:()=>this.props.showPacks(),children:(0,Zn.jsx)(Mr,{})})}),(0,Zn.jsx)("button",{className:"icon-btn",title:"Help",onClick:()=>this.props.showHelp(this.props.page),children:this.props.options.developer&&this.props.hasExceptions?(0,Zn.jsx)(Br,{}):(0,Zn.jsx)(Fr,{})}),this.props.options.developer?(0,Zn.jsx)("button",{className:"icon-btn developer",title:"Backstage",onClick:this.props.toggleBackstage,children:(0,Zn.jsx)(Tn,{})}):null]})]}),(0,Zn.jsx)(ma,{options:t,selectedID:this.props.page,onSelect:e=>this.props.setPage(e)}),(0,Zn.jsx)("div",{className:"campaign-content",children:e})]})}catch{return(0,Zn.jsx)("div",{className:"campaign-screen render-error"})}}}}var jc=Fn("outline","dots","IconDots",[["path",{d:"M5 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M19 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]]),Dc=Fn("filled","layout-sidebar-left-collapse-filled","IconLayoutSidebarLeftCollapseFilled",[["path",{d:"M18 3a3 3 0 0 1 2.995 2.824l.005 .176v12a3 3 0 0 1 -2.824 2.995l-.176 .005h-12a3 3 0 0 1 -2.995 -2.824l-.005 -.176v-12a3 3 0 0 1 2.824 -2.995l.176 -.005h12zm0 2h-9v14h9a1 1 0 0 0 .993 -.883l.007 -.117v-12a1 1 0 0 0 -.883 -.993l-.117 -.007zm-2.293 4.293a1 1 0 0 1 .083 1.32l-.083 .094l-1.292 1.293l1.292 1.293a1 1 0 0 1 .083 1.32l-.083 .094a1 1 0 0 1 -1.32 .083l-.094 -.083l-2 -2a1 1 0 0 1 -.083 -1.32l.083 -.094l2 -2a1 1 0 0 1 1.414 0z",key:"svg-0"}]]),Ec=Fn("filled","layout-sidebar-left-expand-filled","IconLayoutSidebarLeftExpandFilled",[["path",{d:"M18 3a3 3 0 0 1 2.995 2.824l.005 .176v12a3 3 0 0 1 -2.824 2.995l-.176 .005h-12a3 3 0 0 1 -2.995 -2.824l-.005 -.176v-12a3 3 0 0 1 2.824 -2.995l.176 -.005h12zm0 2h-9v14h9a1 1 0 0 0 .993 -.883l.007 -.117v-12a1 1 0 0 0 -.883 -.993l-.117 -.007zm-4.387 4.21l.094 .083l2 2a1 1 0 0 1 .083 1.32l-.083 .094l-2 2a1 1 0 0 1 -1.497 -1.32l.083 -.094l1.292 -1.293l-1.292 -1.293a1 1 0 0 1 -.083 -1.32l.083 -.094a1 1 0 0 1 1.32 -.083z",key:"svg-0"}]]),Ic=Fn("filled","layout-bottombar-collapse-filled","IconLayoutBottombarCollapseFilled",[["path",{d:"M18 3a3 3 0 0 1 2.995 2.824l.005 .176v12a3 3 0 0 1 -2.824 2.995l-.176 .005h-12a3 3 0 0 1 -2.995 -2.824l-.005 -.176v-12a3 3 0 0 1 2.824 -2.995l.176 -.005h12zm0 2h-12a1 1 0 0 0 -.993 .883l-.007 .117v9h14v-9a1 1 0 0 0 -.883 -.993l-.117 -.007zm-7.387 3.21l.094 .083l1.293 1.292l1.293 -1.292a1 1 0 0 1 1.32 -.083l.094 .083a1 1 0 0 1 .083 1.32l-.083 .094l-2 2a1 1 0 0 1 -1.32 .083l-.094 -.083l-2 -2a1 1 0 0 1 1.32 -1.497z",key:"svg-0"}]]),Nc=Fn("filled","layout-bottombar-expand-filled","IconLayoutBottombarExpandFilled",[["path",{d:"M18 3a3 3 0 0 1 2.995 2.824l.005 .176v12a3 3 0 0 1 -2.824 2.995l-.176 .005h-12a3 3 0 0 1 -2.995 -2.824l-.005 -.176v-12a3 3 0 0 1 2.824 -2.995l.176 -.005h12zm0 2h-12a1 1 0 0 0 -.993 .883l-.007 .117v9h14v-9a1 1 0 0 0 -.883 -.993l-.117 -.007zm-5.387 3.21l.094 .083l2 2a1 1 0 0 1 -1.32 1.497l-.094 -.083l-1.293 -1.292l-1.293 1.292a1 1 0 0 1 -1.32 .083l-.094 -.083a1 1 0 0 1 -.083 -1.32l.083 -.094l2 -2a1 1 0 0 1 1.32 -.083z",key:"svg-0"}]]),Pc=Fn("filled","layout-sidebar-right-collapse-filled","IconLayoutSidebarRightCollapseFilled",[["path",{d:"M18 3a3 3 0 0 1 2.995 2.824l.005 .176v12a3 3 0 0 1 -2.824 2.995l-.176 .005h-12a3 3 0 0 1 -2.995 -2.824l-.005 -.176v-12a3 3 0 0 1 2.824 -2.995l.176 -.005h12zm-3 2h-9a1 1 0 0 0 -.993 .883l-.007 .117v12a1 1 0 0 0 .883 .993l.117 .007h9v-14zm-5.387 4.21l.094 .083l2 2a1 1 0 0 1 .083 1.32l-.083 .094l-2 2a1 1 0 0 1 -1.497 -1.32l.083 -.094l1.292 -1.293l-1.292 -1.293a1 1 0 0 1 -.083 -1.32l.083 -.094a1 1 0 0 1 1.32 -.083z",key:"svg-0"}]]),Mc=Fn("filled","layout-sidebar-right-expand-filled","IconLayoutSidebarRightExpandFilled",[["path",{d:"M18 3a3 3 0 0 1 2.995 2.824l.005 .176v12a3 3 0 0 1 -2.824 2.995l-.176 .005h-12a3 3 0 0 1 -2.995 -2.824l-.005 -.176v-12a3 3 0 0 1 2.824 -2.995l.176 -.005h12zm-3 2h-9a1 1 0 0 0 -.993 .883l-.007 .117v12a1 1 0 0 0 .883 .993l.117 .007h9v-14zm-3.293 4.293a1 1 0 0 1 .083 1.32l-.083 .094l-1.292 1.293l1.292 1.293a1 1 0 0 1 .083 1.32l-.083 .094a1 1 0 0 1 -1.32 .083l-.094 -.083l-2 -2a1 1 0 0 1 -.083 -1.32l.083 -.094l2 -2a1 1 0 0 1 1.414 0z",key:"svg-0"}]]),Bc=Fn("outline","rotate-2","IconRotate2",[["path",{d:"M15 4.55a8 8 0 0 0 -6 14.9m0 -4.45v5h-5",key:"svg-0"}],["path",{d:"M18.37 7.16l0 .01",key:"svg-1"}],["path",{d:"M13 19.94l0 .01",key:"svg-2"}],["path",{d:"M16.84 18.37l0 .01",key:"svg-3"}],["path",{d:"M19.37 15.1l0 .01",key:"svg-4"}],["path",{d:"M19.94 11l0 .01",key:"svg-5"}]]),Fc=Fn("outline","rotate-clockwise-2","IconRotateClockwise2",[["path",{d:"M9 4.55a8 8 0 0 1 6 14.9m0 -4.45v5h5",key:"svg-0"}],["path",{d:"M5.63 7.16l0 .01",key:"svg-1"}],["path",{d:"M4.06 11l0 .01",key:"svg-2"}],["path",{d:"M4.63 15.1l0 .01",key:"svg-3"}],["path",{d:"M7.16 18.37l0 .01",key:"svg-4"}],["path",{d:"M11 19.94l0 .01",key:"svg-5"}]]),Tc=Fn("outline","zoom-out","IconZoomOut",[["path",{d:"M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0",key:"svg-0"}],["path",{d:"M7 10l6 0",key:"svg-1"}],["path",{d:"M21 21l-6 -6",key:"svg-2"}]]),Rc=Fn("outline","zoom-in","IconZoomIn",[["path",{d:"M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0",key:"svg-0"}],["path",{d:"M7 10l6 0",key:"svg-1"}],["path",{d:"M10 7l0 6",key:"svg-2"}],["path",{d:"M21 21l-6 -6",key:"svg-3"}]]),qc=Fn("outline","arrow-back-up-double","IconArrowBackUpDouble",[["path",{d:"M13 14l-4 -4l4 -4",key:"svg-0"}],["path",{d:"M8 14l-4 -4l4 -4",key:"svg-1"}],["path",{d:"M9 10h7a4 4 0 1 1 0 8h-1",key:"svg-2"}]]),Lc=Fn("outline","confetti","IconConfetti",[["path",{d:"M4 5h2",key:"svg-0"}],["path",{d:"M5 4v2",key:"svg-1"}],["path",{d:"M11.5 4l-.5 2",key:"svg-2"}],["path",{d:"M18 5h2",key:"svg-3"}],["path",{d:"M19 4v2",key:"svg-4"}],["path",{d:"M15 9l-1 1",key:"svg-5"}],["path",{d:"M18 13l2 -.5",key:"svg-6"}],["path",{d:"M18 19h2",key:"svg-7"}],["path",{d:"M19 18v2",key:"svg-8"}],["path",{d:"M14 16.518l-6.518 -6.518l-4.39 9.58a1 1 0 0 0 1.329 1.329l9.579 -4.39z",key:"svg-9"}]]),zc=Fn("outline","list-details","IconListDetails",[["path",{d:"M13 5h8",key:"svg-0"}],["path",{d:"M13 9h5",key:"svg-1"}],["path",{d:"M13 15h8",key:"svg-2"}],["path",{d:"M13 19h5",key:"svg-3"}],["path",{d:"M3 4m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-4"}],["path",{d:"M3 14m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-5"}]]),Oc=Fn("outline","notes","IconNotes",[["path",{d:"M5 3m0 2a2 2 0 0 1 2 -2h10a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M9 7l6 0",key:"svg-1"}],["path",{d:"M9 11l6 0",key:"svg-2"}],["path",{d:"M9 15l4 0",key:"svg-3"}]]),Hc=Fn("outline","arrows-move","IconArrowsMove",[["path",{d:"M18 9l3 3l-3 3",key:"svg-0"}],["path",{d:"M15 12h6",key:"svg-1"}],["path",{d:"M6 9l-3 3l3 3",key:"svg-2"}],["path",{d:"M3 12h6",key:"svg-3"}],["path",{d:"M9 18l3 3l3 -3",key:"svg-4"}],["path",{d:"M12 15v6",key:"svg-5"}],["path",{d:"M15 6l-3 -3l-3 3",key:"svg-6"}],["path",{d:"M12 3v6",key:"svg-7"}]]),_c=Fn("outline","viewfinder","IconViewfinder",[["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-0"}],["path",{d:"M12 3l0 4",key:"svg-1"}],["path",{d:"M12 21l0 -3",key:"svg-2"}],["path",{d:"M3 12l4 0",key:"svg-3"}],["path",{d:"M21 12l-3 0",key:"svg-4"}],["path",{d:"M12 12l0 .01",key:"svg-5"}]]),Uc=Fn("outline","dots-circle-horizontal","IconDotsCircleHorizontal",[["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-0"}],["path",{d:"M8 12l0 .01",key:"svg-1"}],["path",{d:"M12 12l0 .01",key:"svg-2"}],["path",{d:"M16 12l0 .01",key:"svg-3"}]]);class Wc extends i.Component{constructor(e){super(e),this.toggleOriginMoveControl=()=>{this.setState({showOriginMoveControl:!this.state.showOriginMoveControl,showTargetSelectControl:!1},(()=>{this.props.isSelectedOnMap&&this.props.selectOnMap(this.props.parameter)}))},this.toggleTargetSelectControl=()=>{this.setState({showOriginMoveControl:!1,showTargetSelectControl:!this.state.showTargetSelectControl},(()=>{this.props.isSelectedOnMap&&this.props.selectOnMap(this.props.parameter)}))},this.toggleSelectedOnMap=()=>{this.setState({showOriginMoveControl:!1,showTargetSelectControl:!1},(()=>{this.props.selectOnMap(this.props.parameter)}))},this.getActionButtons=()=>{const e=[];switch(this.props.parameter.id){case"origin":{const t=this.props.parameter;if(t.value){t.value.length>0&&e.push((0,Zn.jsxs)("button",{className:"icon-btn ".concat(this.state.showOriginMoveControl?"checked":""),title:"Move Origin Square",onClick:this.toggleOriginMoveControl,children:[(0,Zn.jsx)(Hc,{size:15}),"Move"]},"origin-move"))}t.candidates.length>1&&e.push((0,Zn.jsxs)("button",{className:"icon-btn ".concat(this.props.isSelectedOnMap?"checked":""),title:"Select Origin Square",onClick:this.toggleSelectedOnMap,children:[(0,Zn.jsx)(_c,{size:15}),"Select"]},"origin-select"));break}case"targets":{const t=this.props.parameter;if(t.targets)switch(t.targets.type){case S.Combatants:case S.Enemies:case S.Allies:t.targets.count===Number.MAX_VALUE||t.candidates.length>t.targets.count&&(e.push((0,Zn.jsxs)("button",{className:"icon-btn ".concat(this.state.showTargetSelectControl?"checked":""),title:"List all targets",onClick:this.toggleTargetSelectControl,children:[(0,Zn.jsx)(Uc,{size:15}),"List"]},"combatant-all")),e.push((0,Zn.jsxs)("button",{className:"icon-btn ".concat(this.props.isSelectedOnMap?"checked":""),title:"Select targets",onClick:this.toggleSelectedOnMap,children:[(0,Zn.jsx)(_c,{size:15}),"Select"]},"combatant-select")));break;case S.Squares:t.targets.count===Number.MAX_VALUE||t.candidates.length>t.targets.count&&e.push((0,Zn.jsxs)("button",{className:"icon-btn ".concat(this.props.isSelectedOnMap?"checked":""),title:"Select Squares",onClick:()=>this.props.selectOnMap(t),children:[(0,Zn.jsx)(_c,{size:15}),"Select"]},"square-select"));break;case S.Walls:t.targets.count===Number.MAX_VALUE||t.candidates.length>t.targets.count&&e.push((0,Zn.jsxs)("button",{className:"icon-btn ".concat(this.props.isSelectedOnMap?"checked":""),title:"Select Walls",onClick:()=>this.props.selectOnMap(t),children:[(0,Zn.jsx)(_c,{size:15}),"Select"]},"wall-select"))}break}}return e},this.getControls=()=>{const e=[];switch(this.props.parameter.id){case"weapon":this.props.parameter.value||e.push((0,Zn.jsx)(ka,{children:"No suitable weapon equipped"},"weapon-none"));break;case"origin":{const t=this.props.parameter;if(t.value){const n=t.value;if(n.length>0){const t=n[0];e.push((0,Zn.jsx)(Wa,{from:Ce.getCombatantSquares(this.props.encounter,this.props.combatant),to:[t]},"".concat(t.x," ").concat(t.y)))}else e.push((0,Zn.jsx)(ka,{children:"Not set"},"origin-none-empty"))}else e.push((0,Zn.jsx)(ka,{children:"Not set"},"origin-none-null"));break}case"targets":{const t=this.props.parameter;if(t.targets)switch(t.targets.type){case S.Combatants:case S.Enemies:case S.Allies:{const n=t.value;if(t.targets.count===Number.MAX_VALUE)e.push(...n.map((e=>Ce.getCombatant(this.props.encounter,e))).map((e=>(0,Zn.jsx)(ka,{children:e.name},e.id)))),0===n.length&&e.push((0,Zn.jsx)(ka,{children:"No suitable targets within range"},"target-combatants-all-none"));else if(e.push(...n.map((e=>Ce.getCombatant(this.props.encounter,e))).map((e=>this.state.showTargetSelectControl?(0,Zn.jsx)(ka,{children:(0,Zn.jsxs)("div",{className:"combatant-candidate selected",onClick:()=>this.removeCombatant(t,e.id),children:[e.name,(0,Zn.jsx)(Pa,{size:15})]})},e.id):(0,Zn.jsx)(ka,{children:(0,Zn.jsx)("div",{className:"combatant-candidate",children:e.name})},e.id)))),0===n.length&&e.push((0,Zn.jsx)(ka,{children:"No targets selected"},"target-combatants-number-none")),this.state.showTargetSelectControl){const a=t.candidates;e.push(...a.filter((e=>!n.includes(e))).map((e=>Ce.getCombatant(this.props.encounter,e))).map((e=>(0,Zn.jsx)(ka,{children:(0,Zn.jsxs)("div",{className:"combatant-candidate not-selected",onClick:()=>this.addCombatant(t,e.id),children:[e.name,(0,Zn.jsx)(Na,{size:15})]})},e.id))))}break}case S.Squares:{const n=t.value;t.targets.count===Number.MAX_VALUE?e.push((0,Zn.jsx)(ka,{children:n.length>0?"".concat(n.length," squares"):"No squares selected"},"target-squares")):e.push(...n.map((e=>(0,Zn.jsx)(Wa,{from:Ce.getCombatantSquares(this.props.encounter,this.props.combatant),to:[e]},"".concat(e.x," ").concat(e.y)))));break}case S.Walls:{const n=t.value;t.targets.count===Number.MAX_VALUE?e.push((0,Zn.jsx)(ka,{children:n.length>0?"".concat(n.length," walls"):"No walls selected"},"target-walls")):e.push(...n.map((e=>(0,Zn.jsx)(Wa,{from:Ce.getCombatantSquares(this.props.encounter,this.props.combatant),to:[e]},"".concat(e.x," ").concat(e.y)))));break}}break}}return e},this.getSecondaryControls=()=>{const e=[];switch(this.props.parameter.id){case"weapon":{const t=this.props.parameter;t.candidates.length>1&&e.push((0,Zn.jsx)(ma,{options:t.candidates.map((e=>e)).map((e=>this.props.combatant.items.find((t=>t.id===e)))).map((e=>({id:e.id,display:e.name}))),selectedID:t.value,onSelect:e=>this.props.setWeaponParameterValue(t,e)},"weapon-select"));break}case"origin":{const t=this.props.parameter;this.props.isSelectedOnMap&&e.push((0,Zn.jsx)(ra,{type:aa.Information,children:(0,Zn.jsx)("p",{children:"Select a square on the map."})},"origin-select")),this.state.showOriginMoveControl&&e.push(this.getMoveControl(t));break}case"targets":{const t=this.props.parameter;if(this.props.isSelectedOnMap&&t.targets)switch(t.targets.type){case S.Combatants:case S.Enemies:case S.Allies:e.push((0,Zn.jsx)(ra,{type:aa.Information,children:(0,Zn.jsx)("p",{children:"Select your target(s) on the map."})},"target-select-combatant"));break;case S.Squares:e.push((0,Zn.jsx)(ra,{type:aa.Information,children:(0,Zn.jsx)("p",{children:"Select your target square(s) on the map."})},"target-select-square"));break;case S.Walls:e.push((0,Zn.jsx)(ra,{type:aa.Information,children:(0,Zn.jsx)("p",{children:"Select your target wall(s) on the map."})},"target-select-wall"))}break}}return e},this.addCombatant=(e,t)=>{let n=e.value;n=n.filter((e=>e!==t)),e.targets&&1===e.targets.count&&(n=[]),n.push(t),this.props.setTargetParameterValue(e,n)},this.removeCombatant=(e,t)=>{let n=e.value;n=n.filter((e=>e!==t)),this.props.setTargetParameterValue(e,n)},this.getMoveControl=e=>{const t=e.value[0],n=e.candidates;return(0,Zn.jsx)($a,{mode:"compact",movement:0,costs:{n:n.find((e=>e.x===t.x&&e.y===t.y-1))?0:Number.MAX_VALUE,ne:n.find((e=>e.x===t.x+1&&e.y===t.y-1))?0:Number.MAX_VALUE,e:n.find((e=>e.x===t.x+1&&e.y===t.y))?0:Number.MAX_VALUE,se:n.find((e=>e.x===t.x+1&&e.y===t.y+1))?0:Number.MAX_VALUE,s:n.find((e=>e.x===t.x&&e.y===t.y+1))?0:Number.MAX_VALUE,sw:n.find((e=>e.x===t.x-1&&e.y===t.y+1))?0:Number.MAX_VALUE,w:n.find((e=>e.x===t.x-1&&e.y===t.y))?0:Number.MAX_VALUE,nw:n.find((e=>e.x===t.x-1&&e.y===t.y-1))?0:Number.MAX_VALUE},onMove:(n,a)=>{const r={x:t.x,y:t.y};switch(n){case"n":r.y-=1;break;case"ne":r.x+=1,r.y-=1;break;case"e":r.x+=1;break;case"se":r.x+=1,r.y+=1;break;case"s":r.y+=1;break;case"sw":r.x-=1,r.y+=1;break;case"w":r.x-=1;break;case"nw":r.x-=1,r.y-=1}this.props.setOriginParameterValue(e,r)}},"dpanel")},this.render=()=>{try{let e="";switch(this.props.parameter.id){case"weapon":e="Weapon";break;case"origin":e="Origin";break;case"targets":e="Target(s)"}const t=this.getActionButtons(),n=this.getControls(),a=this.getSecondaryControls();return(0,Zn.jsxs)("div",{className:Fe.isParameterSet(this.props.parameter)?"action-parameter":"action-parameter not-set",children:[(0,Zn.jsxs)("div",{className:"top-line",children:[(0,Zn.jsx)(ra,{type:aa.MinorHeading,children:e}),t.length>0?(0,Zn.jsx)("div",{className:"action-parameter-actions",children:t}):null]}),n.length>0?(0,Zn.jsx)("div",{className:"action-parameter-controls",children:n}):null,a.length>0?(0,Zn.jsx)("div",{className:"action-parameter-controls secondary",children:a}):null]},this.props.parameter.id)}catch{return(0,Zn.jsx)("div",{className:"action-parameter render-error"})}},this.state={showOriginMoveControl:!1,showTargetSelectControl:!1}}}class Vc extends i.Component{constructor(){super(...arguments),this.showParameter=e=>{switch(e.id){case"weapon":return e.candidates.length>1;case"targets":{const t=e;return!!t.targets&&!!t.value}}return!0},this.getNotSelected=()=>{const e=[],t=[];this.props.combatant.combat.actions.filter((e=>X.getActionSourceType(this.props.combatant,e.id)!==E.Base)).sort(((e,t)=>e.name.localeCompare(t.name))).forEach((t=>{const n=t.prerequisites.every((e=>Ie.isSatisfied(e,this.props.combatant)));e.push((0,Zn.jsx)(xa,{action:t,footer:X.getActionSource(this.props.combatant,t.id),footerType:X.getActionSourceType(this.props.combatant,t.id),combatant:this.props.combatant,encounter:this.props.encounter,disabled:!n,onClick:n?e=>this.props.selectAction(this.props.encounter,this.props.combatant,e):null},t.id))})),this.props.combatant.combat.actions.filter((e=>X.getActionSourceType(this.props.combatant,e.id)===E.Base)).forEach((e=>{const n=e.prerequisites.every((e=>Ie.isSatisfied(e,this.props.combatant)));n&&t.push((0,Zn.jsx)(xa,{action:e,footer:X.getActionSource(this.props.combatant,e.id),footerType:X.getActionSourceType(this.props.combatant,e.id),combatant:this.props.combatant,encounter:this.props.encounter,onClick:e=>this.props.selectAction(this.props.encounter,this.props.combatant,e)},e.id))}));let n=null;const a=V.getStructureCharges(this.props.game,h.Observatory);return(a>0||this.props.developer)&&(n=(0,Zn.jsx)(Dr,{label:"Redraw",available:a,developer:this.props.developer,onRedraw:()=>this.props.drawActions(this.props.encounter,this.props.combatant,this.props.developer?null:h.Observatory)})),(0,Zn.jsxs)("div",{className:"action-controls-content",children:[e,n?(0,Zn.jsx)("div",{className:"separator"}):null,n,t.length>0?(0,Zn.jsx)("div",{className:"separator"}):null,t]},"not-selected")},this.getInProgress=e=>{let t=!0;const n=[];e.prerequisites.forEach(((e,a)=>{Ie.isSatisfied(e,this.props.combatant)||(t=!1,n.push((0,Zn.jsx)("div",{className:"action-prerequisite",children:e.description},a)))}));let a=!0;const r=[];return e.parameters.forEach(((e,t)=>{if(!a)return;const n=Fe.isParameterSet(e);this.showParameter(e)&&e.value&&r.push((0,Zn.jsx)(Wc,{parameter:e,encounter:this.props.encounter,combatant:this.props.combatant,isSelectedOnMap:this.props.currentActionParameter===e,selectOnMap:this.props.setActionParameter,setWeaponParameterValue:this.props.setWeaponParameterValue,setOriginParameterValue:this.props.setOriginParameterValue,setTargetParameterValue:this.props.setTargetParameterValue},e.id)),n||(a=!1)})),(0,Zn.jsxs)("div",{className:"action-controls-content",children:[(0,Zn.jsx)(xa,{action:e,footer:X.getActionSource(this.props.combatant,e.id),footerType:X.getActionSourceType(this.props.combatant,e.id),combatant:this.props.combatant,encounter:this.props.encounter}),(0,Zn.jsxs)("div",{className:"action-details",children:[n,r,(0,Zn.jsxs)("div",{className:"button-row",children:[(0,Zn.jsx)("button",{className:"primary",disabled:!t||!a,onClick:()=>this.props.runAction(this.props.encounter,this.props.combatant),children:"Go"}),(0,Zn.jsx)("button",{onClick:()=>this.props.deselectAction(this.props.encounter,this.props.combatant),children:"Cancel"})]})]})]},e.id)},this.getUsed=e=>{let t=null;const n=V.getStructureCharges(this.props.game,h.ThievesGuild);return(n>0||this.props.developer)&&(t=(0,Zn.jsx)(Dr,{label:"Act Again",available:n,developer:this.props.developer,onUse:()=>this.props.drawActions(this.props.encounter,this.props.combatant,this.props.developer?null:h.ThievesGuild)})),(0,Zn.jsxs)("div",{className:"action-controls-content",children:[(0,Zn.jsx)(xa,{action:e,footer:X.getActionSource(this.props.combatant,e.id),footerType:X.getActionSourceType(this.props.combatant,e.id),combatant:this.props.combatant,encounter:this.props.encounter}),t,(0,Zn.jsx)("div",{className:"action-details",children:(0,Zn.jsxs)(ra,{type:aa.Information,children:[(0,Zn.jsx)("p",{children:"You have used your action for this turn."}),this.props.combatant.combat.movement>0?(0,Zn.jsx)("p",{children:"You still have some movement points you can use."}):null]})})]},e.id+" used")},this.render=()=>{try{let e=null,t=null;return this.props.combatant.combat.selectedAction?t=this.props.combatant.combat.selectedAction.used?this.getUsed(this.props.combatant.combat.selectedAction.action):this.getInProgress(this.props.combatant.combat.selectedAction.action):(this.props.collapsed||(e=(0,Zn.jsx)("div",{className:"banner",children:"Scroll left and right to see all the action cards in your hand."})),t=this.getNotSelected()),(0,Zn.jsxs)("div",{className:"action-controls ".concat(this.props.collapsed?"collapsed":"expanded"),onClick:()=>{this.props.collapsed&&this.props.toggleCollapsed()},children:[e,t]},this.props.combatant.id)}catch{return(0,Zn.jsx)("div",{className:"action-controls render-error"})}}}}class Qc extends i.Component{constructor(){super(...arguments),this.render=()=>{try{const e=this.props.game.map.regions.find((e=>e.id===this.props.encounter.regionID));switch(this.props.state){case oe.Victory:return e.encounters.length>1?(0,Zn.jsxs)("div",{className:"encounter-controls",children:[(0,Zn.jsx)(ra,{type:aa.Heading,children:"Victory"}),(0,Zn.jsxs)(ra,{type:aa.MinorHeading,children:["You won the encounter in ",e.name,"!"]}),(0,Zn.jsxs)("ul",{children:[(0,Zn.jsx)("li",{children:"Each surviving hero who took part in this encounter gains 1 XP."}),(0,Zn.jsx)("li",{children:"Any heroes who died have been lost."})]}),(0,Zn.jsx)("hr",{}),(0,Zn.jsx)("button",{className:"primary",onClick:()=>this.props.finishEncounter(oe.Victory),children:"OK"}),this.props.state!==Ce.getEncounterState(this.props.encounter)?(0,Zn.jsx)("button",{onClick:()=>this.props.setEncounterState(oe.Active),children:"Cancel"}):null]}):(0,Zn.jsxs)("div",{className:"encounter-controls",children:[(0,Zn.jsx)(ra,{type:aa.Heading,children:"Victory"}),(0,Zn.jsxs)(ra,{type:aa.MinorHeading,children:["You have taken control of ",e.name,"!"]}),(0,Zn.jsxs)("ul",{children:[(0,Zn.jsx)("li",{children:"Each surviving hero who took part in this encounter gains 1 XP."}),(0,Zn.jsx)("li",{children:"Any heroes who died have been lost."}),(0,Zn.jsx)("li",{children:"You can recruit a new hero."}),(0,Zn.jsx)("li",{children:"You have earned a reward."})]}),(0,Zn.jsx)("div",{className:"region-reward",children:(0,Zn.jsx)(vr,{boon:e.boon})}),(0,Zn.jsx)("hr",{}),(0,Zn.jsx)("button",{className:"primary",onClick:()=>this.props.finishEncounter(oe.Victory),children:"OK"}),this.props.state!==Ce.getEncounterState(this.props.encounter)?(0,Zn.jsx)("button",{onClick:()=>this.props.setEncounterState(oe.Active),children:"Cancel"}):null]});case oe.Defeat:return(0,Zn.jsxs)("div",{className:"encounter-controls",children:[(0,Zn.jsx)(ra,{type:aa.Heading,children:"Defeated"}),(0,Zn.jsxs)(ra,{type:aa.MinorHeading,children:["You lost the encounter in ",e.name,"."]}),(0,Zn.jsx)("ul",{children:(0,Zn.jsx)("li",{children:"Those heroes who took part have been lost, along with all their equipment."})}),(0,Zn.jsx)("hr",{}),(0,Zn.jsx)("button",{className:"primary",onClick:()=>this.props.finishEncounter(oe.Defeat),children:"OK"}),this.props.state!==Ce.getEncounterState(this.props.encounter)?(0,Zn.jsx)("button",{onClick:()=>this.props.setEncounterState(oe.Active),children:"Cancel"}):null]});case oe.Retreat:return(0,Zn.jsxs)("div",{className:"encounter-controls",children:[(0,Zn.jsx)(ra,{type:aa.Heading,children:"Retreat"}),(0,Zn.jsxs)(ra,{type:aa.MinorHeading,children:["You retreated from the encounter in ",e.name,"."]}),(0,Zn.jsx)("ul",{children:(0,Zn.jsx)("li",{children:"Any heroes who fell have been lost, along with all their equipment."})}),(0,Zn.jsx)("hr",{}),(0,Zn.jsx)("button",{className:"primary",onClick:()=>this.props.finishEncounter(oe.Retreat),children:"OK"}),this.props.state!==Ce.getEncounterState(this.props.encounter)?(0,Zn.jsx)("button",{onClick:()=>this.props.setEncounterState(oe.Active),children:"Cancel"}):null]})}return null}catch{return(0,Zn.jsx)("div",{className:"encounter-controls render-error"})}}}}var Xc=Fn("outline","flask-2","IconFlask2",[["path",{d:"M6.1 15h11.8",key:"svg-0"}],["path",{d:"M14 3v7.342a6 6 0 0 1 1.318 10.658h-6.635a6 6 0 0 1 1.317 -10.66v-7.34h4z",key:"svg-1"}],["path",{d:"M9 3h6",key:"svg-2"}]]);class Gc extends i.Component{constructor(){super(...arguments),this.render=()=>{try{const e={};return["n","ne","e","se","s","sw","w","nw"].forEach((t=>{let n=0;n=this.props.combatant.combat.stunned?Number.MAX_VALUE:Ce.getMoveCost(this.props.encounter,this.props.combatant,this.props.combatant.combat.position,t),e[t]=n})),(0,Zn.jsxs)("div",{className:"hero-move",children:[this.props.combatant.combat.movement>0?(0,Zn.jsx)($a,{mode:"full",movement:this.props.combatant.combat.movement,costs:e,onMove:(e,t)=>this.props.move(this.props.encounter,this.props.combatant,e,t)}):(0,Zn.jsxs)(ra,{type:aa.Information,children:[(0,Zn.jsx)("p",{children:"You have no more movement remaining this turn."}),this.props.combatant.combat.selectedAction&&this.props.combatant.combat.selectedAction.used?null:(0,Zn.jsx)("p",{children:"You can still take your action."})]}),this.props.options.showTips?(0,Zn.jsx)(da,{header:(0,Zn.jsx)(ra,{type:aa.Tip,children:"Movement Points"}),content:(0,Zn.jsxs)("div",{children:[(0,Zn.jsxs)("p",{children:["Your hero only has a certain number of movement points ",(0,Zn.jsx)(Rn,{size:15})," to use each round."]}),(0,Zn.jsxs)("p",{children:["These points are calculated using their ",(0,Zn.jsx)("b",{children:"Speed"})," trait rank."]}),(0,Zn.jsx)("p",{children:"You can use them to move your hero around the map, but they're also useful for picking up items, hiding, or drinking potions."})]})}):null,this.props.options.developer?(0,Zn.jsx)("button",{className:"developer",onClick:()=>this.props.addMovement(this.props.encounter,this.props.combatant,10),children:"Add Movement"}):null]})}catch{return(0,Zn.jsx)("div",{className:"hero-move render-error"})}}}}class Jc extends i.Component{constructor(){super(...arguments),this.render=()=>{try{return(0,Zn.jsxs)("div",{className:"hero-overview",children:[(0,Zn.jsx)(Ba,{combatant:this.props.combatant,encounter:this.props.encounter}),(0,Zn.jsxs)("div",{className:"quick-actions",children:[(0,Zn.jsxs)("button",{disabled:this.props.combatant.combat.stunned||this.props.combatant.combat.movement<4,onClick:()=>this.props.inspire(this.props.encounter,this.props.combatant),children:["Inspire",(0,Zn.jsx)("br",{}),(0,Zn.jsx)(ta,{value:4,type:$n.Movement,size:ea.Button})]}),(0,Zn.jsxs)("button",{disabled:this.props.combatant.combat.stunned||this.props.combatant.combat.movement<4,onClick:()=>this.props.scan(this.props.encounter,this.props.combatant),children:["Scan",(0,Zn.jsx)("br",{}),(0,Zn.jsx)(ta,{value:4,type:$n.Movement,size:ea.Button})]}),(0,Zn.jsxs)("button",{disabled:this.props.combatant.combat.stunned||this.props.combatant.combat.movement<4,onClick:()=>this.props.hide(this.props.encounter,this.props.combatant),children:["Hide",(0,Zn.jsx)("br",{}),(0,Zn.jsx)(ta,{value:4,type:$n.Movement,size:ea.Button})]})]}),(0,Zn.jsx)(Fa,{combatant:this.props.combatant}),this.props.options.developer?(0,Zn.jsx)("button",{className:"developer",onClick:()=>this.props.levelUp(this.props.combatant),children:"Level Up"}):null,this.props.options.developer?(0,Zn.jsx)("button",{className:"developer",onClick:()=>this.props.switchAllegiance(this.props.combatant),children:"Switch Allegiance"}):null,this.props.options.developer?(0,Zn.jsx)("button",{className:"developer",onClick:()=>this.props.stun(this.props.combatant),children:"Stun / Unstun"}):null,this.props.options.developer?(0,Zn.jsx)("button",{className:"developer",onClick:()=>this.props.knockout(this.props.combatant),children:"Knockout"}):null,this.props.options.developer?(0,Zn.jsx)("button",{className:"developer",onClick:()=>this.props.kill(this.props.combatant),children:"Kill"}):null,this.props.options.showTips?(0,Zn.jsx)(da,{header:(0,Zn.jsx)(ra,{type:aa.Tip,children:"Taking an Action"}),content:(0,Zn.jsxs)("div",{children:[(0,Zn.jsx)("p",{children:"You haven't yet chosen your action for this turn."}),(0,Zn.jsx)("p",{children:"Three action cards have been drawn for you from your action deck, and are shown below the map."}),(0,Zn.jsx)("p",{children:"Select one of those cards to use that action."})]})}):null,this.props.options.showTips?(0,Zn.jsx)(da,{header:(0,Zn.jsx)(ra,{type:aa.Tip,children:"Damage and Wounds"}),content:(0,Zn.jsxs)("div",{children:[(0,Zn.jsxs)("p",{children:["When a combatant takes damage, the amount is added to their Damage value and they roll their ",(0,Zn.jsx)("b",{children:"Endurance"})," trait."]}),(0,Zn.jsx)("p",{children:"If the result of that roll is lower than their Damage value, they take a Wound, and their Damage is reset to 0."}),(0,Zn.jsxs)("p",{children:["A combatant can only take as many Wounds as their ",(0,Zn.jsx)("b",{children:"Resolve"})," trait rank before becoming unconscious."]}),(0,Zn.jsx)("p",{children:"Once a combatant is unconscious:"}),(0,Zn.jsxs)("ul",{children:[(0,Zn.jsx)("li",{children:"They will die if they take an additional Wound."}),(0,Zn.jsxs)("li",{children:["At the start of their turn they roll their ",(0,Zn.jsx)("b",{children:"Resolve"})," trait; a result of 1 kills them."]})]})]})}):null,this.props.options.showTips?(0,Zn.jsx)(da,{header:(0,Zn.jsx)(ra,{type:aa.Tip,children:"Hidden vs Senses"}),content:(0,Zn.jsxs)("div",{children:[(0,Zn.jsxs)("p",{children:["At the start of a combatant's turn, their Senses value is calculated using their ",(0,Zn.jsx)("b",{children:"Perception"})," skill rank."]}),(0,Zn.jsx)("p",{children:"A combatant cannot see enemies whose Hidden value is greater than this value."}),(0,Zn.jsxs)("p",{children:["If you Hide, your Hidden value is increased based on your ",(0,Zn.jsx)("b",{children:"Stealth"})," skill rank."]}),(0,Zn.jsxs)("p",{children:["If you Scan, your Senses value is increased based on your ",(0,Zn.jsx)("b",{children:"Perception"})," skill rank."]})]})}):null]})}catch{return(0,Zn.jsx)("div",{className:"hero-overview render-error"})}}}}class Yc extends i.Component{constructor(){super(...arguments),this.render=()=>{try{const e=se.getMapEdges(this.props.encounter.mapSquares),t=Ce.getCombatantSquares(this.props.encounter,this.props.combatant),n=Ce.findCombatants(this.props.encounter,t,1).filter((e=>e.id!==this.props.combatant.id)).filter((e=>e.combat.state!==I.Dead)).filter((e=>e.faction===this.props.combatant.faction)).filter((n=>se.canSeeAny(e,t,Ce.getCombatantSquares(this.props.encounter,n)))),a=d.distinct(this.props.combatant.carried.filter((e=>e.potion)),(e=>e.name)).map(((e,t)=>{const a=this.props.combatant.carried.filter((t=>t.name===e.name)).length;return(0,Zn.jsxs)("div",{children:[(0,Zn.jsx)("div",{className:"potion-card",children:(0,Zn.jsx)(yr,{item:e,count:a})}),(0,Zn.jsxs)("button",{disabled:this.props.combatant.combat.movement<2,onClick:()=>this.props.drinkPotion(this.props.encounter,this.props.combatant,this.props.combatant,e),children:["Drink",(0,Zn.jsx)("br",{}),(0,Zn.jsx)(ta,{type:$n.Movement,value:2,size:ea.Button})]}),n.map((t=>(0,Zn.jsxs)("button",{disabled:this.props.combatant.combat.movement<2,onClick:()=>this.props.drinkPotion(this.props.encounter,this.props.combatant,t,e),children:["Feed to ",t.name,(0,Zn.jsx)("br",{}),(0,Zn.jsx)(ta,{type:$n.Movement,value:2,size:ea.Button})]},t.id)))]},t)}));return 0===a.length&&a.push((0,Zn.jsx)("div",{children:(0,Zn.jsx)(ra,{type:aa.Information,children:(0,Zn.jsxs)("p",{children:[this.props.combatant.name," does not have any potions."]})})},"empty")),(0,Zn.jsx)("div",{className:"hero-potions",children:a})}catch{return(0,Zn.jsx)("div",{className:"hero-potions render-error"})}}}}class Kc extends i.Component{constructor(e){super(e),this.setTab=e=>{this.setState({tab:e})},this.render=()=>{try{const e=[{id:"stats",display:(0,Zn.jsx)(Aa,{})},{id:"move",display:(0,Zn.jsx)(Hc,{})}];this.props.combatant.carried.some((e=>e.potion))&&e.splice(2,0,{id:"potion",display:(0,Zn.jsx)(Xc,{})});let t=null;switch(this.state.tab){case"stats":t=(0,Zn.jsx)(Jc,{combatant:this.props.combatant,encounter:this.props.encounter,options:this.props.options,inspire:this.props.inspire,scan:this.props.scan,hide:this.props.hide,levelUp:this.props.levelUp,switchAllegiance:this.props.switchAllegiance,stun:this.props.stun,knockout:this.props.knockout,kill:this.props.kill});break;case"move":t=(0,Zn.jsx)(Gc,{combatant:this.props.combatant,encounter:this.props.encounter,options:this.props.options,move:this.props.move,addMovement:this.props.addMovement});break;case"potion":t=(0,Zn.jsx)(Yc,{combatant:this.props.combatant,encounter:this.props.encounter,drinkPotion:this.props.drinkPotion})}return(0,Zn.jsxs)("div",{className:"hero-controls",children:[(0,Zn.jsx)(_a,{mode:"header",combatant:this.props.combatant,encounter:this.props.encounter,options:this.props.options,onTokenClick:this.props.showToken,onDetails:this.props.showCharacterSheet}),this.props.options.showTips?(0,Zn.jsx)(da,{header:(0,Zn.jsxs)(ra,{type:aa.Tip,children:["It is ",this.props.combatant.name,"'s turn; explore the tabs below to see what they can do."]}),content:(0,Zn.jsxs)("div",{children:[(0,Zn.jsx)("p",{children:"The most important things to know are:"}),(0,Zn.jsxs)("ul",{children:[(0,Zn.jsxs)("li",{children:["You can move your hero around the map with the ",(0,Zn.jsx)(Hc,{size:15})," tab."]}),(0,Zn.jsx)("li",{children:"You can choose your action - you only get one per turn! Your action cards are shown below the map."}),(0,Zn.jsx)("li",{children:"If you can't see your hero's token on the map, press their icon and the map will scroll them into view."})]}),(0,Zn.jsxs)("p",{children:["When you're finished, select ",(0,Zn.jsx)("b",{children:"End My Turn"})," above."]})]})}):null,(0,Zn.jsx)(va,{options:e,selectedID:this.state.tab,onSelect:this.setTab}),(0,Zn.jsx)("div",{className:"tab-content",children:t})]},this.props.combatant.id)}catch{return(0,Zn.jsx)("div",{className:"hero-controls render-error"})}},this.state={tab:"stats"}}}class Zc extends i.Component{constructor(e){super(e),this.setThinking=e=>{this.setState({thinking:e})},this.render=()=>{try{let e=null;return this.props.combatant.combat.selectedAction&&(e=(0,Zn.jsx)("div",{className:"selected-action-card",children:(0,Zn.jsx)(xa,{action:this.props.combatant.combat.selectedAction.action,footer:X.getActionSource(this.props.combatant,this.props.combatant.combat.selectedAction.action.id),footerType:X.getActionSourceType(this.props.combatant,this.props.combatant.combat.selectedAction.action.id)})})),(0,Zn.jsxs)("div",{className:"monster-controls",children:[(0,Zn.jsx)(_a,{mode:"header",combatant:this.props.combatant,encounter:this.props.encounter,options:this.props.options,onTokenClick:this.props.showToken,onDetails:this.props.showCharacterSheet}),(0,Zn.jsx)(ra,{type:aa.Information,children:(0,Zn.jsxs)("p",{children:[this.props.combatant.name," is a ",(0,Zn.jsx)("b",{children:"monster"}),"."]})}),this.props.options.showTips?(0,Zn.jsx)(da,{header:(0,Zn.jsxs)(ra,{type:aa.Tip,children:["It is ",this.props.combatant.name,"'s turn."]}),content:(0,Zn.jsx)("div",{children:(0,Zn.jsxs)("p",{children:["You can't control a monster directly; press the ",(0,Zn.jsx)("b",{children:"Take Monster Turn"})," button and it will take its turn."]})})}):null,(0,Zn.jsx)(Ba,{combatant:this.props.combatant,encounter:this.props.encounter}),(0,Zn.jsx)(Fa,{combatant:this.props.combatant}),this.props.options.developer?(0,Zn.jsx)("button",{className:"developer",onClick:()=>this.props.levelUp(this.props.combatant),children:"Level Up"}):null,this.props.options.developer?(0,Zn.jsx)("button",{className:"developer",onClick:()=>this.props.switchAllegiance(this.props.combatant),children:"Switch Allegiance"}):null,this.props.options.developer?(0,Zn.jsx)("button",{className:"developer",onClick:()=>this.props.stun(this.props.combatant),children:"Stun / Unstun"}):null,this.props.options.developer?(0,Zn.jsx)("button",{className:"developer",onClick:()=>this.props.knockout(this.props.combatant),children:"Knockout"}):null,this.props.options.developer?(0,Zn.jsx)("button",{className:"developer",onClick:()=>this.props.kill(this.props.combatant),children:"Kill"}):null,e]},this.props.combatant.id)}catch{return(0,Zn.jsx)("div",{className:"monster-controls render-error"})}},this.state={thinking:!1}}}class $c extends i.Component{constructor(){super(...arguments),this.addHero=()=>{const e=d.draw(this.props.game.heroes);this.props.addCombatantToEncounter(this.props.encounter,e,this.props.options.developer?null:h.WarRoom)},this.addMonster=()=>{const e=Q.createCombatant(N.Monster),t=Oe.getMonsterSpeciesDeck(this.props.options.packIDs),n=Oe.getRoleDeck(this.props.options.packIDs),a=Oe.getBackgroundDeck(this.props.options.packIDs);X.applyCombatantCards(e,d.draw(t).id,d.draw(n).id,d.draw(a).id),this.props.addCombatantToEncounter(this.props.encounter,e,null)},this.render=()=>{try{const e=this.props.encounter.combatants.filter((e=>e.faction===N.Hero)).filter((e=>e.combat.state===I.Standing||e.combat.state===I.Prone)).length,t=this.props.encounter.combatants.filter((e=>e.faction===N.Hero)).filter((e=>e.combat.state===I.Unconscious)).length,n=this.props.encounter.combatants.filter((e=>e.faction===N.Hero)).filter((e=>e.combat.state===I.Dead)).length,a=this.props.encounter.combatants.filter((e=>e.faction===N.Monster)).filter((e=>e.combat.state===I.Standing||e.combat.state===I.Prone)).length,r=this.props.encounter.combatants.filter((e=>e.faction===N.Monster)).filter((e=>e.combat.state===I.Unconscious)).length,s=this.props.encounter.combatants.filter((e=>e.faction===N.Monster)).filter((e=>e.combat.state===I.Dead)).length,i=(0,Zn.jsxs)("div",{className:"encounter-stats",children:[(0,Zn.jsxs)(ia,{label:"Heroes",children:[(0,Zn.jsx)(fa,{orientation:"vertical",label:"Active",value:e}),(0,Zn.jsx)("hr",{}),(0,Zn.jsx)(fa,{orientation:"vertical",label:"Unconscious",value:t}),(0,Zn.jsx)("hr",{}),(0,Zn.jsx)(fa,{orientation:"vertical",label:"Dead",value:n})]}),(0,Zn.jsxs)(ia,{label:"Monsters",children:[(0,Zn.jsx)(fa,{orientation:"vertical",label:"Active",value:a}),(0,Zn.jsx)("hr",{}),(0,Zn.jsx)(fa,{orientation:"vertical",label:"Unconscious",value:r}),(0,Zn.jsx)("hr",{}),(0,Zn.jsx)(fa,{orientation:"vertical",label:"Dead",value:s})]})]});let o=null;if(this.props.encounter.round>0&&this.props.game.heroes.length>0){const e=V.getStructureCharges(this.props.game,h.WarRoom);(e>0||this.props.options.developer)&&(o=(0,Zn.jsx)("div",{className:"benefits",children:(0,Zn.jsx)(Dr,{label:"Add a Hero",available:e,developer:this.props.options.developer,onUse:this.addHero})}))}return(0,Zn.jsxs)("div",{className:"round-controls",children:[(0,Zn.jsxs)(ra,{type:aa.Heading,children:["Round ",this.props.encounter.round+1]}),i,this.props.options.showTips?(0,Zn.jsx)(da,{header:(0,Zn.jsx)(ra,{type:aa.Tip,children:"At the start of each turn, each combatant rolls initiative."}),content:(0,Zn.jsxs)("div",{children:[(0,Zn.jsx)("p",{children:"This determines the order they will act in for this round - higher goes first."}),(0,Zn.jsxs)("p",{children:["Initiative is calculated using a combatant's ",(0,Zn.jsx)("b",{children:"Reactions"})," skill rank."]})]})}):null,o,this.props.options.developer?(0,Zn.jsx)("button",{className:"developer",onClick:this.props.regenerateEncounterMap,children:"Regenerate Map"}):null,this.props.options.developer?(0,Zn.jsx)("button",{className:"developer",onClick:this.addMonster,children:"Add a Monster"}):null]})}catch{return(0,Zn.jsx)("div",{className:"round-controls render-error"})}}}}class eu extends i.Component{constructor(e){super(e),this.componentDidMount=()=>{we.handleLogMessage=e=>{Mn.custom((t=>(setTimeout((()=>{Mn.remove(t.id)}),5e3),(0,Zn.jsx)("div",{className:"skirmish-notification",onClick:e=>{e.stopPropagation(),Mn.remove(t.id)},children:e.map(((e,t)=>(0,Zn.jsx)("div",{children:we.getLogMessage(this.props.encounter,e)},t)))},t.id))))}},this.componentWillUnmount=()=>{we.handleLogMessage=null,Mn.remove()},this.mapRef=(0,i.createRef)(),this.scrollToCombatant=e=>{var t;null===(t=this.mapRef.current)||void 0===t||t.scrollToCombatant(e)},this.nudgeMapSize=e=>{const t=Math.max(this.state.mapSquareSize+e,5);this.setState({mapSquareSize:t})},this.toggleLeftPanel=()=>{this.setState({showLeftPanel:!this.state.showLeftPanel})},this.toggleBottomPanel=()=>{this.setState({showBottomPanel:!this.state.showBottomPanel})},this.toggleRightPanel=()=>{this.setState({showRightPanel:!this.state.showRightPanel})},this.selectCombatant=e=>{const t=this.state.selectedActionParameter;if(t){let n=!1,a=Number.MAX_VALUE;if("targets"===t.id){const e=t;if(e.targets)switch(e.targets.type){case S.Combatants:case S.Enemies:case S.Allies:n=!0,a=e.targets.count}}if(n){let n=this.state.selectedCombatantIDs;n.includes(e.id)?n=n.filter((t=>t!==e.id)):1===a?n=[e.id]:n.length<a&&n.push(e.id),t.value=n,this.setState({selectedActionParameter:t,selectedCombatantIDs:n,selectedLootIDs:[],selectedSquares:[]},(()=>{this.props.setActionParameterValue(t,n)}))}}else e.combat.current?this.setState({selectedActionParameter:t,selectedCombatantIDs:[],selectedLootIDs:[],selectedSquares:[]}):this.setState({selectedActionParameter:t,selectedCombatantIDs:[e.id],selectedLootIDs:[],selectedSquares:[]})},this.selectLoot=e=>{this.setState({selectedCombatantIDs:[],selectedLootIDs:[e.id],selectedSquares:[]})},this.selectSquare=e=>{const t=this.state.selectedActionParameter;if(t){let n=!1,a=Number.MAX_VALUE;switch(t.id){case"origin":n=!0,a=1;break;case"targets":{const e=t;if(e.targets)switch(e.targets.type){case S.Squares:case S.Walls:n=!0,a=e.targets.count}}}if(n){let n=this.state.selectedSquares;if(n.find((t=>t.x===e.x&&t.y===e.y))?n=n.filter((t=>!(t.x===e.x&&t.y===e.y))):1===a?n=[e]:n.length<a&&n.push(e),t.value=n,"origin"===t.id){const e=this.props.encounter.combatants.find((e=>e.combat.current)),t=e.combat.selectedAction?e.combat.selectedAction.action:null;if(t){const n=t.parameters.find((e=>"targets"===e.id));Fe.checkTargetParameter(n,this.props.encounter,e,t,!1)}}this.setState({selectedActionParameter:t,selectedCombatantIDs:[],selectedLootIDs:[],selectedSquares:n},(()=>{this.props.setActionParameterValue(t,n)}))}}else this.setState({selectedActionParameter:t,selectedCombatantIDs:[],selectedLootIDs:[],selectedSquares:[e]})},this.clearSelection=()=>{this.state.selectedActionParameter?this.setState({selectedActionParameter:null,selectableCombatantIDs:[],selectableLootIDs:[],selectableSquares:[]}):this.setState({selectedCombatantIDs:[],selectedLootIDs:[],selectedSquares:[]})},this.setManualEncounterState=e=>{this.setState({manualEncounterState:e})},this.showDetailsCombatant=e=>{this.setState({detailsCombatant:e,detailsLoot:null})},this.showDetailsLoot=e=>{this.setState({detailsCombatant:null,detailsLoot:e})},this.clearDetails=()=>{this.setState({detailsCombatant:null,detailsLoot:null})},this.move=(e,t,n,a)=>{this.setState({selectedActionParameter:null,selectedSquares:[]},(()=>{this.props.move(e,t,n,a)}))},this.selectAction=(e,t,n)=>{this.setState({selectedCombatantIDs:[],selectedLootIDs:[],selectedSquares:[]},(()=>{this.props.selectAction(e,t,n)}))},this.setActionParameter=e=>{var t,n,a,r;if(null!==this.state.selectedActionParameter)this.setState({selectedActionParameter:null,selectableCombatantIDs:[],selectableLootIDs:[],selectableSquares:[]});else{let o=[],l=[],c=[],u=[];switch(e.id){case"origin":{var s,i;const t=e;l=null!==(s=t.candidates)&&void 0!==s?s:[],u=null!==(i=t.value)&&void 0!==i?i:[];break}case"targets":{const s=e;if(null!==s.targets)switch(s.targets.type){case S.Combatants:case S.Enemies:case S.Allies:o=s.candidates,c=s.value;break;case S.Squares:l=null!==(t=s.candidates)&&void 0!==t?t:[],u=null!==(n=s.value)&&void 0!==n?n:[];break;case S.Walls:l=null!==(a=s.candidates)&&void 0!==a?a:[],u=null!==(r=s.value)&&void 0!==r?r:[]}break}}this.setState({selectedActionParameter:e,selectableCombatantIDs:o,selectableLootIDs:[],selectableSquares:l,selectedCombatantIDs:c,selectedLootIDs:[],selectedSquares:u})}},this.runAction=(e,t)=>{this.setState({selectedActionParameter:null,selectableCombatantIDs:[],selectableLootIDs:[],selectableSquares:[],selectedSquares:[]},(()=>{this.props.runAction(e,t)}))},this.deselectAction=(e,t)=>{this.setState({selectedActionParameter:null,selectableCombatantIDs:[],selectableLootIDs:[],selectableSquares:[],selectedSquares:[]},(()=>{this.props.deselectAction(e,t)}))},this.endTurn=()=>{this.setState({selectedActionParameter:null,selectableSquares:[],selectedSquares:[]},(()=>{this.props.endTurn(this.props.encounter)}))},this.runMonsterTurn=()=>{const e=this.props.encounter.combatants.find((e=>e.combat.current))||null;e&&e.faction===N.Monster&&this.setState({thinking:!0},(()=>{this.props.runMonsterTurn(this.props.encounter,e,(()=>{this.setState({thinking:!1})}))}))},this.getTopControls=()=>{let e=this.state.manualEncounterState;if(e===oe.Active&&(e=Ce.getEncounterState(this.props.encounter)),e!==oe.Active)return(0,Zn.jsx)("div",{className:"encounter-top-panel",children:(0,Zn.jsx)(dr,{size:36})});let t=(0,Zn.jsx)("div",{className:"action-container",children:(0,Zn.jsx)("button",{className:"primary action",onClick:()=>this.props.rollInitiative(),onDoubleClick:e=>e.stopPropagation(),children:"Roll Initiative"},"init-btn")});const n=this.props.encounter.combatants.find((e=>e.combat.current))||null;if(n){const e=!n.combat.stunned&&n.combat.state!==I.Unconscious&&n.combat.state!==I.Dead;if(n.faction===N.Hero)if(e){const e=n.combat.selectedAction&&n.combat.selectedAction.used;t=(0,Zn.jsxs)("div",{className:"action-container",children:[(0,Zn.jsx)(fa,{orientation:"vertical",label:"Movement",value:(0,Zn.jsx)(ta,{value:n.combat.movement,type:$n.Movement,size:ea.Large})}),(0,Zn.jsx)(fa,{orientation:"vertical",label:"Action",value:e?(0,Zn.jsx)(ga,{className:"action-taken",size:39}):(0,Zn.jsx)(jc,{size:39})}),(0,Zn.jsx)("button",{className:e?"primary action":"action",onClick:()=>this.endTurn(),onDoubleClick:e=>e.stopPropagation(),children:"End My Turn"},"hero-btn")]})}else t=(0,Zn.jsx)("div",{className:"action-container",children:(0,Zn.jsx)("button",{className:"primary action",onClick:()=>this.endTurn(),onDoubleClick:e=>e.stopPropagation(),children:"Skip My Turn"},"hero-btn")});if(n.faction===N.Monster){const n=e?"Take Monster Turn":"Skip Monster Turn";t=(0,Zn.jsx)("div",{className:"action-container",children:(0,Zn.jsx)("button",{className:"primary action",disabled:this.state.thinking,onClick:()=>this.runMonsterTurn(),onDoubleClick:e=>e.stopPropagation(),children:this.state.thinking?"Thinking":n},"monster-btn")})}}if(1===this.state.selectedCombatantIDs.length){const e=Ce.getCombatant(this.props.encounter,this.state.selectedCombatantIDs[0]);if(e)return(0,Zn.jsxs)("div",{className:"encounter-top-panel",children:[(0,Zn.jsx)(_a,{mode:"detailed",combatant:e,encounter:this.props.encounter,options:this.props.options,onTokenClick:()=>this.scrollToCombatant("selected"),onDetails:this.showDetailsCombatant,onCancel:this.clearSelection}),t]})}if(1===this.state.selectedLootIDs.length){const e=Ce.getLoot(this.props.encounter,this.state.selectedLootIDs[0]);if(e)return(0,Zn.jsxs)("div",{className:"encounter-top-panel",children:[(0,Zn.jsx)(mr,{loot:e,onDetails:this.showDetailsLoot,onCancel:this.clearSelection}),t]})}return(0,Zn.jsxs)("div",{className:"encounter-top-panel",children:[(0,Zn.jsxs)("div",{className:"encounter-toolbar",children:[(0,Zn.jsxs)("div",{className:"icon-section",children:[(0,Zn.jsx)("button",{className:"icon-btn",title:"Left Panel",onClick:()=>this.toggleLeftPanel(),children:this.state.showLeftPanel?(0,Zn.jsx)(Dc,{}):(0,Zn.jsx)(Ec,{})}),(0,Zn.jsx)("button",{className:"icon-btn",title:"Bottom Panel",onClick:()=>this.toggleBottomPanel(),children:this.state.showBottomPanel?(0,Zn.jsx)(Ic,{}):(0,Zn.jsx)(Nc,{})}),(0,Zn.jsx)("button",{className:"icon-btn",title:"Right Panal",onClick:()=>this.toggleRightPanel(),children:this.state.showRightPanel?(0,Zn.jsx)(Pc,{}):(0,Zn.jsx)(Mc,{})})]}),(0,Zn.jsxs)("div",{className:"icon-section",children:[(0,Zn.jsx)("button",{className:"icon-btn",title:"Rotate Left",onClick:()=>this.props.rotateMap(this.props.encounter,"l"),children:(0,Zn.jsx)(Bc,{})}),(0,Zn.jsx)("button",{className:"icon-btn",title:"Rotate Right",onClick:()=>this.props.rotateMap(this.props.encounter,"r"),children:(0,Zn.jsx)(Fc,{})})]}),(0,Zn.jsxs)("div",{className:"icon-section",children:[(0,Zn.jsx)("button",{disabled:this.state.mapSquareSize<=5,className:"icon-btn",title:"Zoom Out",onClick:()=>this.nudgeMapSize(-5),children:(0,Zn.jsx)(Tc,{})}),(0,Zn.jsx)("button",{disabled:this.state.mapSquareSize>=50,className:"icon-btn",title:"Zoom In",onClick:()=>this.nudgeMapSize(5),children:(0,Zn.jsx)(Rc,{})})]}),(0,Zn.jsxs)("div",{className:"icon-section",children:[(0,Zn.jsx)("button",{className:"icon-btn",title:"Retreat",onClick:()=>this.setManualEncounterState(oe.Retreat),children:(0,Zn.jsx)(qc,{})}),this.props.options.developer?(0,Zn.jsx)("button",{className:"icon-btn developer",title:"Win",onClick:()=>this.setManualEncounterState(oe.Victory),children:(0,Zn.jsx)(Lc,{})}):null]}),(0,Zn.jsx)("div",{className:"icon-section",children:(0,Zn.jsx)("button",{className:"icon-btn",title:"Help",onClick:()=>this.props.showHelp("encounters"),children:this.props.options.developer&&this.props.hasExceptions?(0,Zn.jsx)(Br,{}):(0,Zn.jsx)(Fr,{})})})]}),t]})},this.getBottomControls=()=>{let e=this.state.manualEncounterState;if(e===oe.Active&&(e=Ce.getEncounterState(this.props.encounter)),e!==oe.Active)return null;const t=this.props.encounter.combatants.find((e=>e.combat.current))||null;return t&&t.faction===N.Hero&&!t.combat.stunned&&t.combat.actions.length>0?(0,Zn.jsx)("div",{className:"encounter-bottom-panel",children:(0,Zn.jsx)(Vc,{combatant:t,encounter:this.props.encounter,game:this.props.game,developer:this.props.options.developer,currentActionParameter:this.state.selectedActionParameter,collapsed:!this.state.showBottomPanel,toggleCollapsed:()=>this.setState({showBottomPanel:!this.state.showBottomPanel}),drawActions:this.props.drawActions,selectAction:this.selectAction,deselectAction:this.deselectAction,setActionParameter:this.setActionParameter,setWeaponParameterValue:(e,t)=>{this.props.setActionParameterValue(e,t)},setOriginParameterValue:(e,t)=>{this.setState({selectedSquares:[t]},(()=>{e.value=[t];const n=this.props.encounter.combatants.find((e=>e.combat.current)),a=n.combat.selectedAction?n.combat.selectedAction.action:null;if(a){const e=a.parameters.find((e=>"targets"===e.id));Fe.checkTargetParameter(e,this.props.encounter,n,a,!1)}this.props.setActionParameterValue(e,[t])}))},setTargetParameterValue:(e,t)=>{this.setState({selectedCombatantIDs:t},(()=>{this.props.setActionParameterValue(e,t)}))},runAction:this.runAction})}):null},this.getLeftControls=()=>{if(this.state.showLeftPanel){let e=null;switch(this.state.leftTab){case"init":e=(0,Zn.jsx)(cr,{encounter:this.props.encounter,options:this.props.options,selectedIDs:this.state.selectedCombatantIDs,onSelect:this.selectCombatant,nudgeInitiative:this.props.nudgeInitiative});break;case"log":e=(0,Zn.jsx)(er,{encounter:this.props.encounter})}return(0,Zn.jsxs)("div",{className:"encounter-left-column",children:[(0,Zn.jsx)(va,{options:[{id:"init",display:(0,Zn.jsx)(zc,{})},{id:"log",display:(0,Zn.jsx)(Oc,{})}],selectedID:this.state.leftTab,onSelect:e=>this.setState({leftTab:e})}),(0,Zn.jsx)("div",{className:"tab-content",children:e})]})}return null},this.getRightControls=()=>{let e=this.state.manualEncounterState;if(e===oe.Active&&(e=Ce.getEncounterState(this.props.encounter)),e!==oe.Active)return(0,Zn.jsx)("div",{className:"encounter-right-column",children:(0,Zn.jsx)(Qc,{encounter:this.props.encounter,game:this.props.game,options:this.props.options,state:e,setEncounterState:this.setManualEncounterState,finishEncounter:this.props.finishEncounter})});const t=this.props.encounter.combatants.find((e=>e.combat.current))||null;return null===t?(0,Zn.jsx)("div",{className:"encounter-right-column",children:(0,Zn.jsx)($c,{encounter:this.props.encounter,game:this.props.game,options:this.props.options,regenerateEncounterMap:this.props.regenerateEncounterMap,addCombatantToEncounter:this.props.addCombatantToEncounter})}):this.state.showRightPanel?t.faction===N.Monster?(0,Zn.jsx)("div",{className:"encounter-right-column",children:(0,Zn.jsx)(Zc,{combatant:t,encounter:this.props.encounter,options:this.props.options,showToken:()=>this.scrollToCombatant("current"),showCharacterSheet:this.showDetailsCombatant,levelUp:this.props.levelUp,switchAllegiance:this.props.switchAllegiance,stun:this.props.stun,knockout:this.props.knockout,kill:this.props.kill})}):(0,Zn.jsx)("div",{className:"encounter-right-column",children:(0,Zn.jsx)(Kc,{combatant:t,encounter:this.props.encounter,options:this.props.options,showToken:()=>this.scrollToCombatant("current"),showCharacterSheet:this.showDetailsCombatant,move:this.move,addMovement:this.props.addMovement,inspire:this.props.inspire,scan:this.props.scan,hide:this.props.hide,levelUp:this.props.levelUp,switchAllegiance:this.props.switchAllegiance,stun:this.props.stun,knockout:this.props.knockout,kill:this.props.kill,drinkPotion:this.props.drinkPotion})}):(0,Zn.jsx)("div",{className:"encounter-right-column collapsed",onClick:()=>this.toggleRightPanel(),children:(0,Zn.jsx)(_a,{mode:"column",combatant:t,encounter:this.props.encounter,options:this.props.options,onTokenClick:()=>this.scrollToCombatant("current"),onDetails:this.showDetailsCombatant})})},this.getDialog=()=>{if(this.state.detailsCombatant)return(0,Zn.jsx)(ua,{content:(0,Zn.jsx)(Vr,{combatant:this.state.detailsCombatant,game:this.props.game,developer:this.props.options.developer,equipItem:this.props.equipItem,unequipItem:this.props.unequipItem,pickUpItem:this.props.pickUpItem,dropItem:this.props.dropItem,levelUp:()=>null,retireHero:()=>null,useCharge:this.props.useCharge}),onClose:()=>this.clearDetails()});if(this.state.detailsLoot){const e=this.state.detailsLoot.items.map((e=>(0,Zn.jsx)(yr,{item:e},e.id)));return this.state.detailsLoot.money>0&&e.push((0,Zn.jsx)(ha,{type:E.Item,front:(0,Zn.jsx)(fr,{content:(0,Zn.jsx)("div",{className:"treasure-money",children:(0,Zn.jsx)(ta,{type:$n.Money,value:this.state.detailsLoot.money,size:ea.Large})})}),footerText:"Money"})),(0,Zn.jsx)(ua,{content:(0,Zn.jsxs)("div",{children:[(0,Zn.jsx)(ra,{type:aa.Heading,children:"Treasure"}),(0,Zn.jsx)("hr",{}),(0,Zn.jsx)(oa,{cards:e})]}),onClose:()=>this.clearDetails()})}return null},this.render=()=>{try{const e=this.getTopControls(),t=this.getBottomControls(),n=this.getLeftControls(),a=this.getRightControls();return this.props.orientation===pt.Portrait?(0,Zn.jsxs)("div",{className:"encounter-screen ".concat(this.props.orientation),children:[e,(0,Zn.jsxs)("div",{className:"encounter-main-panel",children:[(0,Zn.jsxs)("div",{className:"encounter-central-column",children:[(0,Zn.jsx)("div",{className:"encounter-center-panel",children:(0,Zn.jsx)(lr,{ref:this.mapRef,encounter:this.props.encounter,squareSize:this.state.mapSquareSize,selectableCombatantIDs:this.state.selectableCombatantIDs,selectableLootIDs:this.state.selectableLootIDs,selectableSquares:this.state.selectableSquares,selectedCombatantIDs:this.state.selectedCombatantIDs,selectedLootIDs:this.state.selectedLootIDs,selectedSquares:this.state.selectedSquares,onClickCombatant:this.selectCombatant,onClickLoot:this.selectLoot,onClickSquare:this.selectSquare,onClickOff:this.clearSelection})}),t]}),this.state.showLeftPanel||this.state.showRightPanel?(0,Zn.jsxs)("div",{className:"encounter-side-columns",children:[n,a]}):null]}),this.getDialog()]}):(0,Zn.jsxs)("div",{className:"encounter-screen ".concat(this.props.orientation),children:[e,(0,Zn.jsxs)("div",{className:"encounter-main-panel",children:[n,(0,Zn.jsxs)("div",{className:"encounter-central-column",children:[(0,Zn.jsx)("div",{className:"encounter-center-panel",children:(0,Zn.jsx)(lr,{ref:this.mapRef,encounter:this.props.encounter,squareSize:this.state.mapSquareSize,selectableCombatantIDs:this.state.selectableCombatantIDs,selectableLootIDs:this.state.selectableLootIDs,selectableSquares:this.state.selectableSquares,selectedCombatantIDs:this.state.selectedCombatantIDs,selectedLootIDs:this.state.selectedLootIDs,selectedSquares:this.state.selectedSquares,onClickCombatant:this.selectCombatant,onClickLoot:this.selectLoot,onClickSquare:this.selectSquare,onClickOff:this.clearSelection})}),t]}),a]}),this.getDialog()]})}catch{return(0,Zn.jsx)("div",{className:"encounter-screen render-error"})}},this.state={mapSquareSize:15,showLeftPanel:!0,showBottomPanel:!0,showRightPanel:!0,leftTab:"init",selectedActionParameter:null,selectableCombatantIDs:[],selectableLootIDs:[],selectableSquares:[],selectedCombatantIDs:[],selectedLootIDs:[],selectedSquares:[],manualEncounterState:oe.Active,detailsCombatant:null,detailsLoot:null,thinking:!1}}}class tu extends i.Component{constructor(){super(...arguments),this.render=()=>{try{let e=null;e=this.props.game?(0,Zn.jsx)(ha,{type:E.Role,stack:!0,front:(0,Zn.jsx)(fr,{text:"Continue",subtext:"Click here to continue your campaign.",content:(0,Zn.jsx)(dr,{text:null,size:60})}),onClick:this.props.continueCampaign}):(0,Zn.jsx)(ha,{type:E.Role,stack:!0,front:(0,Zn.jsx)(fr,{text:"Start",subtext:"Click here to begin a new campaign.",content:(0,Zn.jsx)(dr,{text:null,size:60})}),onClick:this.props.startCampaign});let t=null;const n=Sr.getPacks().filter((e=>!this.props.options.packIDs.includes(e.id))).length;return n>0&&(t=(0,Zn.jsxs)("button",{className:"packs-btn",onClick:()=>this.props.showPacks(),children:["".concat(n," card pack").concat(1===n?"":"s"," available"),(0,Zn.jsx)(Mr,{})]})),(0,Zn.jsxs)("div",{className:"landing-screen ".concat(this.props.orientation),children:[(0,Zn.jsx)("div",{className:"landing-top-bar",children:(0,Zn.jsx)(dr,{size:this.props.orientation===pt.Landscape?140:100})}),(0,Zn.jsxs)("div",{className:"landing-content",children:[(0,Zn.jsxs)(ra,{children:[(0,Zn.jsx)("p",{children:"Skirmish is a tactical battle game in which you control a band of heroes, each represented by a stack of cards. Your objective is to gain control of an island."}),(0,Zn.jsx)("p",{children:"This island, however, is populated by monstrous enemies which you will have to defeat in a series of encounters."}),(0,Zn.jsx)("p",{children:"Some parts of the island might be easier to control than others, but each region will provide you with some reward for conquering it."}),(0,Zn.jsx)("p",{children:"As you gain control over more and more of the island your heroes will become more powerful, and you'll pick up allies and magic items which will help you in your encounters."}),(0,Zn.jsx)("p",{children:"Good luck!"})]}),(0,Zn.jsxs)("div",{className:"action-buttons",children:[e,t]})]}),(0,Zn.jsxs)("div",{className:"landing-footer",children:[(0,Zn.jsxs)(ka,{children:["Version ",this.props.options.version]}),(0,Zn.jsx)(ka,{children:"\xa9 Andy Aiken 2024"})]})]})}catch{return(0,Zn.jsx)("div",{className:"landing-screen render-error"})}}}}class nu extends i.Component{constructor(e){super(e),this.createHero=()=>{this.setState({hero:Q.createCombatant(N.Hero)})},this.createHeroes=()=>{let e=Oe.getHeroSpeciesDeck(this.props.options.packIDs).map((e=>e.id)),t=Oe.getRoleDeck(this.props.options.packIDs).map((e=>e.id)),n=Oe.getBackgroundDeck(this.props.options.packIDs).map((e=>e.id));const a=[],r=5-this.props.game.heroes.length;for(;a.length<r;){const r=Q.createCombatant(N.Hero);r.name=O.generateName(Math.random);const s=u.randomColor(20,180);r.color=U.toString(s);const i=d.draw(e);e=e.filter((e=>e!==i));const o=d.draw(t);t=t.filter((e=>e!==o));const l=d.draw(n);n=n.filter((e=>e!==l)),X.applyCombatantCards(r,i,o,l),X.addItems(r,this.props.options.packIDs),a.push(r)}this.props.addHeroes(a)},this.selectHero=e=>{this.setState({hero:e})},this.getDialog=()=>this.state.hero?""===this.state.hero.name?(0,Zn.jsx)(ua,{content:(0,Zn.jsx)(fc,{hero:this.state.hero,game:this.props.game,options:this.props.options,useCharge:()=>null,finished:e=>{this.setState({hero:null},(()=>{this.props.addHero(e)}))}})}):(0,Zn.jsx)(ua,{content:(0,Zn.jsx)(Vr,{combatant:this.state.hero,game:this.props.game,developer:this.props.options.developer,equipItem:this.props.equipItem,unequipItem:this.props.unequipItem,pickUpItem:this.props.pickUpItem,dropItem:this.props.dropItem,levelUp:()=>null,retireHero:()=>null,useCharge:()=>null}),onClose:()=>this.selectHero(null)}):null,this.render=()=>{try{const e=this.props.game.heroes.map((e=>(0,Zn.jsx)(_a,{combatant:e,options:this.props.options,onDetails:this.selectHero},e.id)));for(e.length<5&&e.push((0,Zn.jsx)("div",{className:"empty-panel",children:(0,Zn.jsx)("button",{className:"primary",onClick:this.createHero,children:"Recruit a Hero"})},"add"));e.length<5;)e.push((0,Zn.jsx)("div",{className:"empty-panel"},e.length));let t=null;const n=Sr.getPacks().filter((e=>!this.props.options.packIDs.includes(e.id))).length;return n>0&&(t=(0,Zn.jsxs)("button",{className:"packs-btn",onClick:()=>this.props.showPacks(),children:["".concat(n," card pack").concat(1===n?"":"s"," available"),(0,Zn.jsx)(Mr,{})]})),(0,Zn.jsxs)("div",{className:"setup-screen ".concat(this.props.orientation),children:[(0,Zn.jsx)("div",{className:"setup-top-bar",children:(0,Zn.jsx)(dr,{size:100})}),(0,Zn.jsxs)("div",{className:"setup-content",children:[(0,Zn.jsx)("div",{className:"left-panel",children:e}),(0,Zn.jsxs)("div",{className:"right-panel",children:[this.props.game.heroes.length>=5?(0,Zn.jsx)(ha,{type:E.Role,stack:!0,front:(0,Zn.jsx)(fr,{text:"Begin the Campaign",content:(0,Zn.jsx)(dr,{text:null,size:170})}),onClick:this.props.beginCampaign}):(0,Zn.jsx)(ra,{type:aa.Information,children:(0,Zn.jsxs)("p",{children:[(0,Zn.jsx)("b",{children:"Recruit your team."})," These five heroes will begin the task of conquering the island."]})}),this.props.options.showTips?(0,Zn.jsx)(da,{header:(0,Zn.jsx)(ra,{type:aa.Tip,children:"When you see a box like this, you can tap it to show more information."}),content:(0,Zn.jsxs)("div",{children:[(0,Zn.jsx)("p",{children:"We'll use these boxes to explain how to play the game."}),(0,Zn.jsx)("p",{children:"You can tap it again to close it."})]})}):null,this.props.options.developer&&this.props.game.heroes.length<5?(0,Zn.jsx)("button",{className:"developer",onClick:this.createHeroes,children:"Randomize"}):null,t]})]}),this.getDialog()]})}catch{return(0,Zn.jsx)("div",{className:"setup-screen render-error"})}},this.state={hero:null}}}const au=n.p+"static/media/encounters.628c17737148de763dda.md",ru=n.p+"static/media/island.f996098b2607f785de03.md",su=n.p+"static/media/items.23b09b4b6988857071a2.md",iu=n.p+"static/media/stronghold.6b71cf5a01fc45d4f608.md",ou=n.p+"static/media/team.a4b2fc77132b99d18f12.md",lu=n.p+"static/media/dong.e69db03d8e628a27235e.mp3",cu={};class uu extends i.Component{constructor(e){super(e),this.componentDidMount=()=>{fetch(au).then((e=>e.text())).then((e=>{cu.encounters=e})),fetch(ru).then((e=>e.text())).then((e=>{cu.island=e})),fetch(su).then((e=>e.text())).then((e=>{cu.items=e})),fetch(iu).then((e=>e.text())).then((e=>{cu.stronghold=e})),fetch(ou).then((e=>e.text())).then((e=>{cu.team=e})),fetch(lu).then((e=>e.arrayBuffer())).then((e=>{ce.dong.array=e}))},this.logException=e=>{console.error(e);const t=this.state.exceptions;t.push("".concat(e)),this.setState({exceptions:t})},this.saveGame=D.debounce((()=>{this.props.platform.saveGame()})),this.saveOptions=D.debounce((()=>{this.props.platform.saveOptions()})),this.setScreen=e=>{this.setState({dialog:null},(()=>{this.props.setScreen(e)}))},this.showHelp=e=>{this.setState({showHelp:e,showPacks:!1,dialog:null})},this.showPacks=()=>{this.setState({showHelp:null,showPacks:!0,dialog:null})},this.setDeveloperMode=e=>{const t=this.state.options;t.developer=e,this.setState({options:t},(()=>{this.saveOptions()}))},this.setShowTips=e=>{const t=this.state.options;t.showTips=e,this.setState({options:t},(()=>{this.saveOptions()}))},this.setSoundEffectsVolume=e=>{const t=this.state.options;t.soundEffectsVolume=e,ce.volume=e,this.setState({options:t},(()=>{this.saveOptions()}))},this.setRenderer=e=>{const t=this.state.options;t.renderer=e,this.setState({options:t},(()=>{this.saveOptions()}))},this.getPackPrice=e=>this.props.platform.getPackPrice(e,this.state.options),this.addPacks=e=>{const t=this.state.options;this.props.platform.getPacks(e,this.state.options).then((()=>{e.forEach((e=>{t.packIDs.includes(e.id)||t.packIDs.push(e.id)})),t.packIDs.sort(),this.setState({options:t},(()=>{this.saveOptions()}))}))},this.removePack=e=>{const t=this.state.options;t.packIDs=t.packIDs.filter((t=>t!==e.id)),this.setState({options:t},(()=>{this.saveOptions()}))},this.startCampaign=()=>{try{const e=Q.createGame(this.state.options.packIDs);this.setState({game:e,showHelp:null,showPacks:!1,dialog:null},(()=>{this.saveGame(),this.props.setScreen(mt.Setup)}))}catch(e){this.logException(e)}},this.beginCampaign=()=>{try{this.saveGame(),this.props.setScreen(mt.Campaign)}catch(e){this.logException(e)}},this.continueCampaign=()=>{try{var e;this.saveGame(),this.props.setScreen(null!==(e=this.state.game)&&void 0!==e&&e.encounter?mt.Encounter:mt.Campaign)}catch(t){this.logException(t)}},this.nextIsland=()=>{try{const e=this.state.game,t=Q.createGame(this.state.options.packIDs);t.heroes=e.heroes,t.heroSlots=0,this.setState({game:t,showHelp:null,showPacks:!1,dialog:null},(()=>{this.saveGame(),this.props.setScreen(mt.Campaign)}))}catch(e){this.logException(e)}},this.restartCampaign=()=>{try{const e=this.state.game;e.heroSlots=5,e.heroes=[],e.items=[],e.boons=[],e.money=0,this.setState({game:e,showHelp:null,showPacks:!1,dialog:null},(()=>{this.saveGame(),this.props.setScreen(mt.Campaign)}))}catch(e){this.logException(e)}},this.endCampaign=()=>{try{this.setState({game:null,showHelp:null,showPacks:!1,dialog:null},(()=>{this.saveGame(),this.props.setScreen(mt.Landing)}))}catch(e){this.logException(e)}},this.buyStructure=(e,t)=>{try{const n=this.state.game;V.addStructure(n.stronghold,e),t>0&&(n.money=Math.max(0,n.money-t)),this.setState({game:n},(()=>{this.saveGame()}))}catch(n){this.logException(n)}},this.sellStructure=e=>{try{const t=this.state.game;t.stronghold=t.stronghold.filter((t=>t.id!==e.id)),t.money+=25,this.setState({game:t},(()=>{this.saveGame()}))}catch(t){this.logException(t)}},this.chargeStructure=e=>{try{const t=this.state.game,n=100;t.money=Math.max(0,t.money-n),e.charges+=e.level,this.setState({game:t},(()=>{this.saveGame()}))}catch(t){this.logException(t)}},this.upgradeStructure=e=>{try{const t=this.state.game,n=50*e.level;t.money=Math.max(0,t.money-n),e.level+=1,this.setState({game:t},(()=>{this.saveGame()}))}catch(t){this.logException(t)}},this.useCharge=(e,t)=>{try{const n=this.state.game;V.useCharge(n,e,t),this.setState({game:n},(()=>{this.saveGame()}))}catch(n){this.logException(n)}},this.addHero=e=>{try{const t=this.state.game;Oe.addHeroToGame(t,e),this.setState({game:t},(()=>{this.saveGame()}))}catch(t){this.logException(t)}},this.addHeroes=e=>{try{const t=this.state.game;e.forEach((e=>{Oe.addHeroToGame(t,e)})),this.setState({game:t},(()=>{this.saveGame()}))}catch(t){this.logException(t)}},this.addXP=(e,t)=>{try{const n=this.state.game;e.xp+=1,t&&V.useCharge(n,t,1),this.setState({game:n},(()=>{this.saveGame()}))}catch(n){this.logException(n)}},this.levelUp=(e,t)=>{try{X.incrementCombatantLevel(t,e,this.state.options.packIDs),this.setState({game:this.state.game},(()=>{this.saveGame()}))}catch(n){this.logException(n)}},this.retireHero=e=>{try{const t=this.state.game,n=e.level*(e.level-1)/2+e.xp,a=Math.floor(n/2);a>0&&t.boons.push({id:D.guid(),type:g.ExtraXP,data:a}),t.heroSlots+=1,t.heroes=t.heroes.filter((t=>t.id!==e.id)),e.items.filter((e=>e.magic||e.potion)).forEach((e=>t.items.push(e))),e.carried.filter((e=>e.magic||e.potion)).forEach((e=>t.items.push(e))),this.setState({game:t},(()=>{this.saveGame()}))}catch(t){this.logException(t)}},this.redeemBoon=(e,t,n,a,r)=>{try{const s=this.state.game;switch(s.boons=s.boons.filter((t=>t.id!==e.id)),e.type){case g.ExtraHero:s.heroSlots+=1;break;case g.ExtraXP:t.xp+=e.data;break;case g.LevelUp:t.xp+=t.level;break;case g.MagicItem:s.items.push(e.data);break;case g.Money:s.money+=e.data;break;case g.EnchantItem:{const e=n,t=a;s.heroes.forEach((n=>{n.items.forEach(((a,r)=>{a.id===e.id&&(n.items[r]=t)})),n.carried.forEach(((a,r)=>{a.id===e.id&&(n.items[r]=t)}))})),s.items.forEach(((n,a)=>{n.id===e.id&&(s.items[a]=t)}));break}case g.Structure:V.addStructure(s.stronghold,e.data)}s.money-=r,this.setState({game:s},(()=>{this.saveGame()}))}catch(s){this.logException(s)}},this.buyItem=e=>{try{const t=this.state.game;t.items.push(e);let n=2;e.potion&&(n=20),e.magic&&(n=100),t.money=Math.max(0,t.money-n),this.setState({game:t},(()=>{this.saveGame()}))}catch(t){this.logException(t)}},this.sellItem=(e,t)=>{try{const n=e=>{a.items=a.items.filter((t=>t!==e));let t=1;e.potion&&(t=10),e.magic&&(t=50),a.money+=t},a=this.state.game;t?a.items.filter((t=>t.name===e.name)).forEach((e=>n(e))):n(e),this.setState({game:a},(()=>{this.saveGame()}))}catch(n){this.logException(n)}},this.addMoney=()=>{try{const e=this.state.game;e.money+=100,this.setState({game:e},(()=>{this.saveGame()}))}catch(e){this.logException(e)}},this.startEncounter=(e,t,n,a)=>{try{if(this.state.game){const r=this.state.game;t.forEach((e=>X.resetCombatant(e))),r.heroes=r.heroes.filter((e=>!t.includes(e))),r.encounter=Ae.createEncounter(e,t,this.state.options.packIDs);for(let e=0;e<n;++e){const e=d.draw(r.encounter.combatants.filter((e=>e.faction===N.Hero)));e.combat.conditions.push(G.createRandomBeneficialCondition())}this.state.options.developer||V.useCharge(r,h.Temple,n);for(let e=0;e<a;++e){const e=d.draw(r.encounter.combatants.filter((e=>e.faction===N.Monster)));e.combat.conditions.push(G.createRandomDetrimentalCondition())}this.state.options.developer||V.useCharge(r,h.Intelligencer,a),se.visibilityCache.reset(),this.setState({game:r},(()=>{this.saveGame(),this.props.setScreen(mt.Encounter)}))}}catch(r){this.logException(r)}},this.regenerateCampaignMap=()=>{try{if(this.state.game){const e=this.state.game;e.map=W.generateCampaignMap(this.state.options.packIDs,Math.random),this.setState({game:e},(()=>{this.saveGame()}))}}catch(e){this.logException(e)}},this.conquer=e=>{try{if(this.state.game){const t=this.state.game;_.conquerRegion(t.map,e),t.heroes.forEach((t=>t.xp+=e.encounters.length)),t.heroSlots+=1,t.boons.push(e.boon),this.setState({game:t},(()=>{this.saveGame()}))}}catch(t){this.logException(t)}},this.rotateMap=(e,t)=>{try{const n=(e,n)=>{const a={x:e.x,y:e.y};switch(t){case"l":a.x=e.y,a.y=-e.x-n;break;case"r":a.x=-e.y-n,a.y=e.x}return a};e.mapSquares.forEach((e=>{const t=n(e,1);e.x=t.x,e.y=t.y})),e.combatants.forEach((e=>{const t=n(e.combat.position,e.size);e.combat.position.x=t.x,e.combat.position.y=t.y,e.combat.trail.forEach((t=>{const a=n(t,e.size);t.x=a.x,t.y=a.y}))})),e.loot.forEach((e=>{const t=n(e.position,1);e.position.x=t.x,e.position.y=t.y})),se.visibilityCache.reset(),this.setState({game:this.state.game},(()=>{this.saveGame()}))}catch(n){this.logException(n)}},this.rollInitiative=()=>{try{const e=this.state.game,t=e.encounter;Ce.rollInitiative(t);const n=Ce.getActiveCombatants(t),a=n.length>0?n[0]:null;a&&Ce.startOfTurn(t,a),this.setState({game:e},(()=>{this.saveGame()}))}catch(e){this.logException(e)}},this.regenerateEncounterMap=()=>{try{const e=this.state.game,t=e.encounter;t.mapSquares=ie.generateEncounterMap(Math.random),t.combatants.forEach((e=>e.combat.position={x:Number.MIN_VALUE,y:Number.MIN_VALUE})),t.loot.forEach((e=>e.position={x:Number.MIN_VALUE,y:Number.MIN_VALUE})),Ae.placeCombatants(t,Math.random),Ae.placeLoot(t,Math.random),this.setState({game:e},(()=>{this.saveGame()}))}catch(e){this.logException(e)}},this.addCombatantToEncounter=(e,t,n)=>{try{const a=this.state.game;t.type===N.Hero&&(a.heroes=a.heroes.filter((e=>e.id!==t.id))),X.resetCombatant(t),e.combatants.push(t),Ae.placeCombatants(e,Math.random),n&&V.useCharge(a,n,1),this.setState({game:a},(()=>{this.saveGame()}))}catch(a){this.logException(a)}},this.move=(e,t,n,a)=>{try{Ce.move(e,t,n,a),this.setState({game:this.state.game},(()=>{this.saveGame()}))}catch(r){this.logException(r)}},this.addMovement=(e,t,n)=>{try{t.combat.movement+=n,this.setState({game:this.state.game},(()=>{this.saveGame()}))}catch(a){this.logException(a)}},this.inspire=(e,t)=>{try{Ce.inspire(e,t),this.setState({game:this.state.game},(()=>{this.saveGame()}))}catch(n){this.logException(n)}},this.scan=(e,t)=>{try{Ce.scan(e,t),this.setState({game:this.state.game},(()=>{this.saveGame()}))}catch(n){this.logException(n)}},this.hide=(e,t)=>{try{Ce.hide(e,t),this.setState({game:this.state.game},(()=>{this.saveGame()}))}catch(n){this.logException(n)}},this.drinkPotion=(e,t,n,a)=>{try{Ce.drinkPotion(e,t,n,a),this.setState({game:this.state.game},(()=>{this.saveGame()}))}catch(r){this.logException(r)}},this.drawActions=(e,t,n)=>{try{Ce.drawActions(e,t),n&&V.useCharge(this.state.game,n,1),this.setState({game:this.state.game},(()=>{this.saveGame()}))}catch(a){this.logException(a)}},this.selectAction=(e,t,n)=>{try{Ce.selectAction(e,t,n),this.setState({game:this.state.game},(()=>{this.saveGame()}))}catch(a){this.logException(a)}},this.deselectAction=(e,t)=>{try{Ce.deselectAction(e,t),this.setState({game:this.state.game},(()=>{this.saveGame()}))}catch(n){this.logException(n)}},this.setActionParameterValue=(e,t)=>{try{e.value=t,this.setState({game:this.state.game},(()=>{this.saveGame()}))}catch(n){this.logException(n)}},this.runAction=(e,t)=>{try{Ce.runAction(e,t),this.setState({game:this.state.game},(()=>{this.saveGame()}))}catch(n){this.logException(n)}},this.runMonsterTurn=(e,t,n)=>{try{if(t.combat.stunned||t.combat.state===I.Unconscious||t.combat.state===I.Dead)Ce.endTurn(e),this.setState({game:this.state.game},(()=>{this.saveGame(),n()}));else{const a=()=>{t.combat.intents=Ee.getIntents(e,t),t.combat.intents&&t.combat.intents.intents.length>0?(Ee.performIntents(e,t),this.setState({game:this.state.game},(()=>{this.saveGame(),setTimeout(a,800)}))):(Ce.endTurn(e),this.setState({game:this.state.game},(()=>{this.saveGame(),n()})))};setTimeout(a,1e3)}}catch(a){this.logException(a)}},this.endTurn=e=>{try{Ce.endTurn(e),this.setState({game:this.state.game},(()=>{this.saveGame()}))}catch(t){this.logException(t)}},this.equipItem=(e,t)=>{try{const n=this.state.game;n.encounter?Ce.equipItem(n.encounter,t,e):(n.items=n.items.filter((t=>t.id!==e.id)),t.carried=t.carried.filter((t=>t.id!==e.id)),t.items.push(e)),this.setState({game:n},(()=>{this.saveGame()}))}catch(n){this.logException(n)}},this.unequipItem=(e,t)=>{try{const n=this.state.game;n.encounter?Ce.unequipItem(n.encounter,t,e):(t.items=t.items.filter((t=>t.id!==e.id)),t.carried.push(e)),this.setState({game:n},(()=>{this.saveGame()}))}catch(n){this.logException(n)}},this.pickUpItem=(e,t)=>{try{const n=this.state.game;n.encounter?Ce.pickUpItem(n.encounter,t,e):(n.items=n.items.filter((t=>t.id!==e.id)),X.canEquip(t,e)?t.items.push(e):t.carried.push(e)),this.setState({game:n},(()=>{this.saveGame()}))}catch(n){this.logException(n)}},this.dropItem=(e,t)=>{try{const n=this.state.game;n.encounter?Ce.dropItem(n.encounter,t,e):(t.items=t.items.filter((t=>t.id!==e.id)),t.carried=t.carried.filter((t=>t.id!==e.id)),n.items.push(e)),this.setState({game:n},(()=>{this.saveGame()}))}catch(n){this.logException(n)}},this.finishEncounter=e=>{try{const t=this.state.game;if(!t)return;const n=t.encounter;if(!n)return;const a=t.map.regions.find((e=>e.id===n.regionID));if(!a)return;let r=null;switch(e){case oe.Victory:n.loot.forEach((e=>{t.items.push(...e.items),t.money+=e.money})),n.combatants.filter((e=>e.type===N.Monster&&e.faction===N.Monster)).forEach((e=>{t.items.push(...e.items),t.items.push(...e.carried)})),n.combatants.filter((e=>e.type===N.Hero&&e.faction===N.Hero)).filter((e=>e.combat.state===I.Standing||e.combat.state===I.Prone)).forEach((e=>e.xp+=1)),n.combatants.filter((e=>e.type===N.Hero&&e.faction===N.Hero)).filter((e=>e.combat.state===I.Standing||e.combat.state===I.Prone||e.combat.state===I.Unconscious)).forEach((e=>t.heroes.push(e))),t.heroes=d.sort(t.heroes,(e=>e.name)),a.encounters.splice(0,1),0===a.encounters.length&&(_.conquerRegion(t.map,a),t.map.squares.every((e=>""===e.regionID))?r=(0,Zn.jsxs)("div",{children:[(0,Zn.jsx)(ra,{type:aa.Heading,children:"Victory"}),(0,Zn.jsx)(ra,{type:aa.SubHeading,children:"You control the island!"}),(0,Zn.jsxs)(ra,{children:[(0,Zn.jsxs)("p",{children:[(0,Zn.jsx)("b",{children:"Congratulations!"})," There are no more regions to conquer."]}),(0,Zn.jsx)("p",{children:"You can now choose to take your heroes to a new island, or you can start a fresh new campaign."})]}),(0,Zn.jsxs)("div",{className:"card-options",children:[(0,Zn.jsx)(ha,{front:(0,Zn.jsx)(fr,{text:"New Island"}),onClick:()=>this.nextIsland()}),(0,Zn.jsx)(ha,{front:(0,Zn.jsx)(fr,{text:"Fresh Start"}),onClick:()=>this.endCampaign()})]})]}):(t.heroSlots+=1,t.boons.push(a.boon))),t.encounter=null;break;case oe.Defeat:{t.encounter=null;const e=t.heroes.length+t.heroSlots+t.boons.filter((e=>e.type===g.ExtraHero)).length;0===e&&(r=(0,Zn.jsxs)("div",{children:[(0,Zn.jsx)(ra,{type:aa.Heading,children:"Defeat"}),(0,Zn.jsxs)(ra,{type:aa.SubHeading,children:["You lost the encounter in ",a.name,", and have no more heroes."]}),(0,Zn.jsx)(ra,{children:"You can either continue your campaign with a new group of heroes, or abandon it."}),(0,Zn.jsxs)("div",{className:"card-options",children:[(0,Zn.jsx)(ha,{front:(0,Zn.jsx)(fr,{text:"Continue"}),onClick:()=>this.restartCampaign()}),(0,Zn.jsx)(ha,{front:(0,Zn.jsx)(fr,{text:"Abandon"}),onClick:()=>this.endCampaign()})]})]}));break}case oe.Retreat:n.combatants.filter((e=>e.type===N.Hero&&e.faction===N.Hero)).filter((e=>e.combat.state===I.Standing||e.combat.state===I.Prone)).forEach((e=>t.heroes.push(e))),t.heroes=d.sort(t.heroes,(e=>e.name)),t.encounter=null}t.heroes.forEach((e=>X.resetCombatant(e))),se.visibilityCache.reset(),this.setState({game:t,dialog:r},(()=>{this.saveGame(),this.props.setScreen(mt.Campaign)}))}catch(t){this.logException(t)}},this.incrementMonsterLevel=e=>{try{const t=this.state.game,n=X.getFeatureDeck(e).filter((e=>e.type!==j.Proficiency));X.incrementCombatantLevel(e,d.draw(n),this.props.options.packIDs),Ce.drawActions(t.encounter,e),this.setState({game:t},(()=>{this.saveGame()}))}catch(t){this.logException(t)}},this.switchAllegiance=e=>{try{const t=this.state.game;e.faction=e.faction===N.Hero?N.Monster:N.Hero,Ce.drawActions(t.encounter,e),this.setState({game:t},(()=>{this.saveGame()}))}catch(t){this.logException(t)}},this.stun=e=>{try{const t=this.state.game;e.combat.stunned=!e.combat.stunned,this.setState({game:t},(()=>{this.saveGame()}))}catch(t){this.logException(t)}},this.knockout=e=>{try{const t=this.state.game,n=t.encounter;Ce.knockout(n,e),this.setState({game:t},(()=>{this.saveGame()}))}catch(t){this.logException(t)}},this.kill=e=>{try{const t=this.state.game,n=t.encounter;Ce.kill(n,e),this.setState({game:t},(()=>{this.saveGame()}))}catch(t){this.logException(t)}},this.nudgeInitiative=(e,t)=>{try{const n=this.state.game,a=n.encounter;e.combat.initiative+=t,Ce.sortInitiative(a),this.setState({game:n},(()=>{this.saveGame()}))}catch(n){this.logException(n)}},this.getContent=()=>{var e;switch(this.props.screen){case mt.Landing:return(0,Zn.jsx)(tu,{game:this.state.game,options:this.state.options,orientation:this.props.orientation,startCampaign:this.startCampaign,continueCampaign:this.continueCampaign,showPacks:this.showPacks});case mt.Setup:return(0,Zn.jsx)(nu,{game:this.state.game,options:this.state.options,orientation:this.props.orientation,addHero:this.addHero,addHeroes:this.addHeroes,equipItem:this.equipItem,unequipItem:this.unequipItem,pickUpItem:this.pickUpItem,dropItem:this.dropItem,showPacks:this.showPacks,beginCampaign:this.beginCampaign});case mt.Campaign:return(0,Zn.jsx)(Ac,{game:this.state.game,options:this.state.options,platform:this.props.platform,orientation:this.props.orientation,page:this.props.page,hasExceptions:this.state.exceptions.length>0,setPage:this.props.setPage,showHelp:this.showHelp,showPacks:this.showPacks,toggleBackstage:()=>this.setScreen(mt.Backstage),buyStructure:this.buyStructure,sellStructure:this.sellStructure,chargeStructure:this.chargeStructure,upgradeStructure:this.upgradeStructure,useCharge:this.useCharge,addHero:this.addHero,addXP:this.addXP,equipItem:this.equipItem,unequipItem:this.unequipItem,pickUpItem:this.pickUpItem,dropItem:this.dropItem,levelUp:this.levelUp,retireHero:this.retireHero,redeemBoon:this.redeemBoon,buyItem:this.buyItem,sellItem:this.sellItem,addMoney:this.addMoney,startEncounter:this.startEncounter,regenerateCampaignMap:this.regenerateCampaignMap,conquer:this.conquer});case mt.Encounter:return(0,Zn.jsx)(eu,{encounter:null===(e=this.state.game)||void 0===e?void 0:e.encounter,game:this.state.game,options:this.state.options,orientation:this.props.orientation,hasExceptions:this.state.exceptions.length>0,showHelp:this.showHelp,rotateMap:this.rotateMap,rollInitiative:this.rollInitiative,regenerateEncounterMap:this.regenerateEncounterMap,addCombatantToEncounter:this.addCombatantToEncounter,endTurn:e=>this.endTurn(e),move:this.move,addMovement:this.addMovement,inspire:this.inspire,scan:this.scan,hide:this.hide,drinkPotion:this.drinkPotion,drawActions:this.drawActions,selectAction:this.selectAction,deselectAction:this.deselectAction,setActionParameterValue:this.setActionParameterValue,runAction:this.runAction,runMonsterTurn:this.runMonsterTurn,equipItem:this.equipItem,unequipItem:this.unequipItem,pickUpItem:this.pickUpItem,dropItem:this.dropItem,useCharge:this.useCharge,levelUp:this.incrementMonsterLevel,switchAllegiance:this.switchAllegiance,stun:this.stun,knockout:this.knockout,kill:this.kill,nudgeInitiative:this.nudgeInitiative,finishEncounter:this.finishEncounter});case mt.Backstage:return(0,Zn.jsx)(Pr,{options:this.props.options,toggleBackstage:()=>this.setScreen(mt.Campaign)})}},this.render=()=>{try{let e=null;return null!==this.state.showHelp&&(e=(0,Zn.jsx)(ua,{content:(0,Zn.jsx)(dc,{game:this.state.game,exceptions:this.state.exceptions,rules:cu[this.state.showHelp],options:this.state.options,endCampaign:this.endCampaign,setDeveloperMode:this.setDeveloperMode,setShowTips:this.setShowTips,setSoundEffectsVolume:this.setSoundEffectsVolume,setRenderer:this.setRenderer}),onClose:()=>this.setState({showHelp:null})})),this.state.showPacks&&(e=(0,Zn.jsx)(ua,{content:(0,Zn.jsx)(yc,{options:this.state.options,getPrice:this.getPackPrice,addPacks:this.addPacks,removePack:this.removePack}),onClose:()=>this.setState({showPacks:!1})})),this.state.dialog&&(e=(0,Zn.jsx)(ua,{content:this.state.dialog})),(0,Zn.jsxs)("div",{className:"skirmish",children:[(0,Zn.jsx)(Pn,{position:"bottom-right",toastOptions:{duration:5e3}}),this.getContent(),e]})}catch{return(0,Zn.jsx)("div",{className:"skirmish render-error"})}},this.state={game:e.game,options:e.options,showHelp:null,showPacks:!1,dialog:null,exceptions:[]},this.props.platform.getGame=()=>this.state.game,this.props.platform.getOptions=()=>this.state.options,this.props.platform.logException=e=>this.logException(e),ce.volume=this.state.options.soundEffectsVolume}}const du=e=>{const[t,n]=(0,i.useState)(mt.Landing),[a,r]=(0,i.useState)(ht.Island),s=dt({query:"(min-width: 1024px)"}),o=dt({query:"(min-height: 768px)"}),l=dt({query:"(min-width: 768px)"}),c=dt({query:"(min-height: 1024px)"});return s&&o?(0,Zn.jsx)(uu,{game:e.game,options:e.options,platform:e.platform,orientation:pt.Landscape,screen:t,page:a,setScreen:n,setPage:r}):l&&c?(0,Zn.jsx)(uu,{game:e.game,options:e.options,platform:e.platform,orientation:pt.Portrait,screen:t,page:a,setScreen:n,setPage:r}):(0,Zn.jsx)("div",{className:"layout",children:"To play Skirmish, use a device with a larger screen."})},pu=new class{constructor(){this.worker=void 0,this.getGame=void 0,this.getOptions=void 0,this.logException=void 0,this.logIn=()=>new Promise((e=>{c().getItem("skirmish-game").then((t=>{t&&this.updateGame(t),c().getItem("skirmish-options").then((n=>{n?this.updateOptions(n):n={version:"",developer:!1,showTips:!0,soundEffectsVolume:.5,packIDs:[],renderer:""},n.version=_e,n.renderer=this.getRenderer(),e({game:t,options:n})}))}))})),this.updateGame=e=>{e.map.regions.forEach((e=>{if(e.boon.type===g.Structure){const t=e.boon.data;V.canCharge(t)||(e.boon=He.generateBoon([],Math.random))}})),e.heroes.forEach((e=>{void 0===e.faction&&(e.faction=e.type)})),e.stronghold||(e.stronghold=[]),1!==e.stronghold.filter((e=>e.type===h.Barracks)).length&&(e.stronghold=e.stronghold.filter((e=>e.type!==h.Barracks)),V.addStructure(e.stronghold,f.barracks())),1!==e.stronghold.filter((e=>e.type===h.Warehouse)).length&&(e.stronghold=e.stronghold.filter((e=>e.type!==h.Warehouse)),V.addStructure(e.stronghold,f.warehouse())),e.encounter&&(e.encounter.combatants.forEach((e=>{void 0===e.faction&&(e.faction=e.type)})),e.encounter.loot.forEach((e=>{void 0===e.money&&(e.money=0)})),void 0===e.encounter.log&&(e.encounter.log=[])),e.map.regions.filter((e=>e.encounters.length>10)).forEach((e=>{e.encounters=e.encounters.slice(0,9)}))},this.updateOptions=e=>{void 0===e.showTips&&(e.showTips=!0),void 0===e.packIDs&&(e.packIDs=[])},this.getRenderer=()=>navigator.userAgent.toLowerCase().includes("edg/")?"edge":navigator.userAgent.toLowerCase().includes("chrome/")?"chrome":navigator.userAgent.toLowerCase().includes("firefox/")?"firefox":"safari",this.saveGame=D.debounce((()=>{this.worker.postMessage({type:"game",payload:this.getGame()})})),this.saveOptions=D.debounce((()=>{this.worker.postMessage({type:"options",payload:this.getOptions()})})),this.getPackPrice=(e,t)=>0,this.getPacks=(e,t)=>Promise.resolve(),this.worker=new Worker(new URL(n.p+n.u(80),n.b)),this.worker.onmessage=e=>{this.logException(e)},this.getGame=()=>null,this.getOptions=()=>null,this.logException=e=>{console.error(e)}}};pu.logIn().then((e=>{const t=document.getElementById("root");if(t){(0,o.s)(t).render((0,Zn.jsx)(i.StrictMode,{children:(0,Zn.jsx)(du,{game:e.game,options:e.options,platform:pu})}))}}))})()})();
//# sourceMappingURL=main.d6107a0d.js.map